var IN=Object.defineProperty;var LN=(e,t,r)=>t in e?IN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var wr=(e,t,r)=>LN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ir(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b3={exports:{}},ep={},w3={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf=Symbol.for("react.element"),BN=Symbol.for("react.portal"),FN=Symbol.for("react.fragment"),GN=Symbol.for("react.strict_mode"),zN=Symbol.for("react.profiler"),UN=Symbol.for("react.provider"),WN=Symbol.for("react.context"),VN=Symbol.for("react.forward_ref"),HN=Symbol.for("react.suspense"),XN=Symbol.for("react.memo"),KN=Symbol.for("react.lazy"),Ub=Symbol.iterator;function qN(e){return e===null||typeof e!="object"?null:(e=Ub&&e[Ub]||e["@@iterator"],typeof e=="function"?e:null)}var k3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S3=Object.assign,j3={};function Fc(e,t,r){this.props=e,this.context=t,this.refs=j3,this.updater=r||k3}Fc.prototype.isReactComponent={};Fc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _3(){}_3.prototype=Fc.prototype;function Px(e,t,r){this.props=e,this.context=t,this.refs=j3,this.updater=r||k3}var Cx=Px.prototype=new _3;Cx.constructor=Px;S3(Cx,Fc.prototype);Cx.isPureReactComponent=!0;var Wb=Array.isArray,P3=Object.prototype.hasOwnProperty,Nx={current:null},C3={key:!0,ref:!0,__self:!0,__source:!0};function N3(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)P3.call(t,n)&&!C3.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Qf,type:e,key:i,ref:o,props:a,_owner:Nx.current}}function YN(e,t){return{$$typeof:Qf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ox(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qf}function ZN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Vb=/\/+/g;function Eg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ZN(""+e.key):t.toString(36)}function o0(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qf:case BN:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Eg(o,0):n,Wb(a)?(r="",e!=null&&(r=e.replace(Vb,"$&/")+"/"),o0(a,t,r,"",function(u){return u})):a!=null&&(Ox(a)&&(a=YN(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Vb,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Wb(e))for(var s=0;s<e.length;s++){i=e[s];var c=n+Eg(i,s);o+=o0(i,t,r,c,a)}else if(c=qN(e),typeof c=="function")for(e=c.call(e),s=0;!(i=e.next()).done;)i=i.value,c=n+Eg(i,s++),o+=o0(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function jd(e,t,r){if(e==null)return e;var n=[],a=0;return o0(e,n,"","",function(i){return t.call(r,i,a++)}),n}function QN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ca={current:null},s0={transition:null},JN={ReactCurrentDispatcher:Ca,ReactCurrentBatchConfig:s0,ReactCurrentOwner:Nx};function O3(){throw Error("act(...) is not supported in production builds of React.")}Jt.Children={map:jd,forEach:function(e,t,r){jd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return jd(e,function(){t++}),t},toArray:function(e){return jd(e,function(t){return t})||[]},only:function(e){if(!Ox(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Jt.Component=Fc;Jt.Fragment=FN;Jt.Profiler=zN;Jt.PureComponent=Px;Jt.StrictMode=GN;Jt.Suspense=HN;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JN;Jt.act=O3;Jt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=S3({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Nx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)P3.call(t,c)&&!C3.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Qf,type:e.type,key:a,ref:i,props:n,_owner:o}};Jt.createContext=function(e){return e={$$typeof:WN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:UN,_context:e},e.Consumer=e};Jt.createElement=N3;Jt.createFactory=function(e){var t=N3.bind(null,e);return t.type=e,t};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(e){return{$$typeof:VN,render:e}};Jt.isValidElement=Ox;Jt.lazy=function(e){return{$$typeof:KN,_payload:{_status:-1,_result:e},_init:QN}};Jt.memo=function(e,t){return{$$typeof:XN,type:e,compare:t===void 0?null:t}};Jt.startTransition=function(e){var t=s0.transition;s0.transition={};try{e()}finally{s0.transition=t}};Jt.unstable_act=O3;Jt.useCallback=function(e,t){return Ca.current.useCallback(e,t)};Jt.useContext=function(e){return Ca.current.useContext(e)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(e){return Ca.current.useDeferredValue(e)};Jt.useEffect=function(e,t){return Ca.current.useEffect(e,t)};Jt.useId=function(){return Ca.current.useId()};Jt.useImperativeHandle=function(e,t,r){return Ca.current.useImperativeHandle(e,t,r)};Jt.useInsertionEffect=function(e,t){return Ca.current.useInsertionEffect(e,t)};Jt.useLayoutEffect=function(e,t){return Ca.current.useLayoutEffect(e,t)};Jt.useMemo=function(e,t){return Ca.current.useMemo(e,t)};Jt.useReducer=function(e,t,r){return Ca.current.useReducer(e,t,r)};Jt.useRef=function(e){return Ca.current.useRef(e)};Jt.useState=function(e){return Ca.current.useState(e)};Jt.useSyncExternalStore=function(e,t,r){return Ca.current.useSyncExternalStore(e,t,r)};Jt.useTransition=function(){return Ca.current.useTransition()};Jt.version="18.3.1";w3.exports=Jt;var C=w3.exports;const ee=Ir(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO=C,tO=Symbol.for("react.element"),rO=Symbol.for("react.fragment"),nO=Object.prototype.hasOwnProperty,aO=eO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iO={key:!0,ref:!0,__self:!0,__source:!0};function M3(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)nO.call(t,n)&&!iO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:tO,type:e,key:i,ref:o,props:a,_owner:aO.current}}ep.Fragment=rO;ep.jsx=M3;ep.jsxs=M3;b3.exports=ep;var l=b3.exports,qm={},A3={exports:{}},Ya={},T3={exports:{}},E3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,H){var W=F.length;F.push(H);e:for(;0<W;){var J=W-1>>>1,Y=F[J];if(0<a(Y,H))F[J]=H,F[W]=Y,W=J;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var H=F[0],W=F.pop();if(W!==H){F[0]=W;e:for(var J=0,Y=F.length,ne=Y>>>1;J<ne;){var te=2*(J+1)-1,fe=F[te],se=te+1,ye=F[se];if(0>a(fe,W))se<Y&&0>a(ye,fe)?(F[J]=ye,F[se]=W,J=se):(F[J]=fe,F[te]=W,J=te);else if(se<Y&&0>a(ye,W))F[J]=ye,F[se]=W,J=se;else break e}}return H}function a(F,H){var W=F.sortIndex-H.sortIndex;return W!==0?W:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],u=[],f=1,d=null,p=3,m=!1,x=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=F)n(u),H.sortIndex=H.expirationTime,t(c,H);else break;H=r(u)}}function P(F){if(b=!1,w(F),!x)if(r(c)!==null)x=!0,D(j);else{var H=r(u);H!==null&&L(P,H.startTime-F)}}function j(F,H){x=!1,b&&(b=!1,v(A),A=-1),m=!0;var W=p;try{for(w(H),d=r(c);d!==null&&(!(d.expirationTime>H)||F&&!T());){var J=d.callback;if(typeof J=="function"){d.callback=null,p=d.priorityLevel;var Y=J(d.expirationTime<=H);H=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===r(c)&&n(c),w(H)}else n(c);d=r(c)}if(d!==null)var ne=!0;else{var te=r(u);te!==null&&L(P,te.startTime-H),ne=!1}return ne}finally{d=null,p=W,m=!1}}var k=!1,O=null,A=-1,R=5,E=-1;function T(){return!(e.unstable_now()-E<R)}function B(){if(O!==null){var F=e.unstable_now();E=F;var H=!0;try{H=O(!0,F)}finally{H?G():(k=!1,O=null)}}else k=!1}var G;if(typeof y=="function")G=function(){y(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,z=V.port2;V.port1.onmessage=B,G=function(){z.postMessage(null)}}else G=function(){S(B,0)};function D(F){O=F,k||(k=!0,G())}function L(F,H){A=S(function(){F(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,D(j))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(F){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var W=p;p=H;try{return F()}finally{p=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=p;p=F;try{return H()}finally{p=W}},e.unstable_scheduleCallback=function(F,H,W){var J=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=W+Y,F={id:f++,callback:H,priorityLevel:F,startTime:W,expirationTime:Y,sortIndex:-1},W>J?(F.sortIndex=W,t(u,F),r(c)===null&&F===r(u)&&(b?(v(A),A=-1):b=!0,L(P,W-J))):(F.sortIndex=Y,t(c,F),x||m||(x=!0,D(j))),F},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(F){var H=p;return function(){var W=p;p=H;try{return F.apply(this,arguments)}finally{p=W}}}})(E3);T3.exports=E3;var oO=T3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sO=C,qa=oO;function Ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $3=new Set,Yu={};function pl(e,t){ac(e,t),ac(e+"Capture",t)}function ac(e,t){for(Yu[e]=t,e=0;e<t.length;e++)$3.add(t[e])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ym=Object.prototype.hasOwnProperty,lO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hb={},Xb={};function cO(e){return Ym.call(Xb,e)?!0:Ym.call(Hb,e)?!1:lO.test(e)?Xb[e]=!0:(Hb[e]=!0,!1)}function uO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fO(e,t,r,n){if(t===null||typeof t>"u"||uO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Na(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var sa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sa[e]=new Na(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sa[t]=new Na(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sa[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sa[e]=new Na(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sa[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sa[e]=new Na(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sa[e]=new Na(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sa[e]=new Na(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sa[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mx=/[\-:]([a-z])/g;function Ax(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mx,Ax);sa[t]=new Na(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mx,Ax);sa[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mx,Ax);sa[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sa[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)});sa.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sa[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tx(e,t,r,n){var a=sa.hasOwnProperty(t)?sa[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fO(t,r,a,n)&&(r=null),n||a===null?cO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Oo=sO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_d=Symbol.for("react.element"),El=Symbol.for("react.portal"),$l=Symbol.for("react.fragment"),Ex=Symbol.for("react.strict_mode"),Zm=Symbol.for("react.profiler"),R3=Symbol.for("react.provider"),D3=Symbol.for("react.context"),$x=Symbol.for("react.forward_ref"),Qm=Symbol.for("react.suspense"),Jm=Symbol.for("react.suspense_list"),Rx=Symbol.for("react.memo"),Io=Symbol.for("react.lazy"),I3=Symbol.for("react.offscreen"),Kb=Symbol.iterator;function lu(e){return e===null||typeof e!="object"?null:(e=Kb&&e[Kb]||e["@@iterator"],typeof e=="function"?e:null)}var dn=Object.assign,$g;function Nu(e){if($g===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$g=t&&t[1]||""}return`
`+$g+e}var Rg=!1;function Dg(e,t){if(!e||Rg)return"";Rg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=s);break}}}finally{Rg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Nu(e):""}function dO(e){switch(e.tag){case 5:return Nu(e.type);case 16:return Nu("Lazy");case 13:return Nu("Suspense");case 19:return Nu("SuspenseList");case 0:case 2:case 15:return e=Dg(e.type,!1),e;case 11:return e=Dg(e.type.render,!1),e;case 1:return e=Dg(e.type,!0),e;default:return""}}function ey(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $l:return"Fragment";case El:return"Portal";case Zm:return"Profiler";case Ex:return"StrictMode";case Qm:return"Suspense";case Jm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D3:return(e.displayName||"Context")+".Consumer";case R3:return(e._context.displayName||"Context")+".Provider";case $x:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rx:return t=e.displayName||null,t!==null?t:ey(e.type)||"Memo";case Io:t=e._payload,e=e._init;try{return ey(e(t))}catch{}}return null}function hO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ey(t);case 8:return t===Ex?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pO(e){var t=L3(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pd(e){e._valueTracker||(e._valueTracker=pO(e))}function B3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=L3(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function w0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ty(e,t){var r=t.checked;return dn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function qb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=fs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F3(e,t){t=t.checked,t!=null&&Tx(e,"checked",t,!1)}function ry(e,t){F3(e,t);var r=fs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ny(e,t.type,r):t.hasOwnProperty("defaultValue")&&ny(e,t.type,fs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ny(e,t,r){(t!=="number"||w0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ou=Array.isArray;function Kl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+fs(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ay(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return dn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ae(92));if(Ou(r)){if(1<r.length)throw Error(Ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:fs(r)}}function G3(e,t){var r=fs(t.value),n=fs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function z3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?z3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cd,U3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cd=Cd||document.createElement("div"),Cd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gO=["Webkit","ms","Moz","O"];Object.keys(Eu).forEach(function(e){gO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Eu[t]=Eu[e]})});function W3(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Eu.hasOwnProperty(e)&&Eu[e]?(""+t).trim():t+"px"}function V3(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=W3(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var mO=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oy(e,t){if(t){if(mO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ae(62))}}function sy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ly=null;function Dx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cy=null,ql=null,Yl=null;function Jb(e){if(e=td(e)){if(typeof cy!="function")throw Error(Ae(280));var t=e.stateNode;t&&(t=ip(t),cy(e.stateNode,e.type,t))}}function H3(e){ql?Yl?Yl.push(e):Yl=[e]:ql=e}function X3(){if(ql){var e=ql,t=Yl;if(Yl=ql=null,Jb(e),t)for(e=0;e<t.length;e++)Jb(t[e])}}function K3(e,t){return e(t)}function q3(){}var Ig=!1;function Y3(e,t,r){if(Ig)return e(t,r);Ig=!0;try{return K3(e,t,r)}finally{Ig=!1,(ql!==null||Yl!==null)&&(q3(),X3())}}function Qu(e,t){var r=e.stateNode;if(r===null)return null;var n=ip(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ae(231,t,typeof r));return r}var uy=!1;if(ko)try{var cu={};Object.defineProperty(cu,"passive",{get:function(){uy=!0}}),window.addEventListener("test",cu,cu),window.removeEventListener("test",cu,cu)}catch{uy=!1}function yO(e,t,r,n,a,i,o,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var $u=!1,k0=null,S0=!1,fy=null,vO={onError:function(e){$u=!0,k0=e}};function xO(e,t,r,n,a,i,o,s,c){$u=!1,k0=null,yO.apply(vO,arguments)}function bO(e,t,r,n,a,i,o,s,c){if(xO.apply(this,arguments),$u){if($u){var u=k0;$u=!1,k0=null}else throw Error(Ae(198));S0||(S0=!0,fy=u)}}function gl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Z3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function e2(e){if(gl(e)!==e)throw Error(Ae(188))}function wO(e){var t=e.alternate;if(!t){if(t=gl(e),t===null)throw Error(Ae(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return e2(a),e;if(i===n)return e2(a),t;i=i.sibling}throw Error(Ae(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(Ae(189))}}if(r.alternate!==n)throw Error(Ae(190))}if(r.tag!==3)throw Error(Ae(188));return r.stateNode.current===r?e:t}function Q3(e){return e=wO(e),e!==null?J3(e):null}function J3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=J3(e);if(t!==null)return t;e=e.sibling}return null}var e4=qa.unstable_scheduleCallback,t2=qa.unstable_cancelCallback,kO=qa.unstable_shouldYield,SO=qa.unstable_requestPaint,Mn=qa.unstable_now,jO=qa.unstable_getCurrentPriorityLevel,Ix=qa.unstable_ImmediatePriority,t4=qa.unstable_UserBlockingPriority,j0=qa.unstable_NormalPriority,_O=qa.unstable_LowPriority,r4=qa.unstable_IdlePriority,tp=null,Xi=null;function PO(e){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(tp,e,void 0,(e.current.flags&128)===128)}catch{}}var Ai=Math.clz32?Math.clz32:OO,CO=Math.log,NO=Math.LN2;function OO(e){return e>>>=0,e===0?32:31-(CO(e)/NO|0)|0}var Nd=64,Od=4194304;function Mu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _0(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Mu(s):(i&=o,i!==0&&(n=Mu(i)))}else o=r&~a,o!==0?n=Mu(o):i!==0&&(n=Mu(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ai(t),a=1<<r,n|=e[r],t&=~a;return n}function MO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ai(i),s=1<<o,c=a[o];c===-1?(!(s&r)||s&n)&&(a[o]=MO(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}function dy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n4(){var e=Nd;return Nd<<=1,!(Nd&4194240)&&(Nd=64),e}function Lg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Jf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ai(t),e[t]=r}function TO(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ai(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Lx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ai(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Cr=0;function a4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var i4,Bx,o4,s4,l4,hy=!1,Md=[],Jo=null,es=null,ts=null,Ju=new Map,ef=new Map,Fo=[],EO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r2(e,t){switch(e){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":Ju.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(t.pointerId)}}function uu(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=td(t),t!==null&&Bx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function $O(e,t,r,n,a){switch(t){case"focusin":return Jo=uu(Jo,e,t,r,n,a),!0;case"dragenter":return es=uu(es,e,t,r,n,a),!0;case"mouseover":return ts=uu(ts,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ju.set(i,uu(Ju.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ef.set(i,uu(ef.get(i)||null,e,t,r,n,a)),!0}return!1}function c4(e){var t=Rs(e.target);if(t!==null){var r=gl(t);if(r!==null){if(t=r.tag,t===13){if(t=Z3(r),t!==null){e.blockedOn=t,l4(e.priority,function(){o4(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function l0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=py(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ly=n,r.target.dispatchEvent(n),ly=null}else return t=td(r),t!==null&&Bx(t),e.blockedOn=r,!1;t.shift()}return!0}function n2(e,t,r){l0(e)&&r.delete(t)}function RO(){hy=!1,Jo!==null&&l0(Jo)&&(Jo=null),es!==null&&l0(es)&&(es=null),ts!==null&&l0(ts)&&(ts=null),Ju.forEach(n2),ef.forEach(n2)}function fu(e,t){e.blockedOn===t&&(e.blockedOn=null,hy||(hy=!0,qa.unstable_scheduleCallback(qa.unstable_NormalPriority,RO)))}function tf(e){function t(a){return fu(a,e)}if(0<Md.length){fu(Md[0],e);for(var r=1;r<Md.length;r++){var n=Md[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Jo!==null&&fu(Jo,e),es!==null&&fu(es,e),ts!==null&&fu(ts,e),Ju.forEach(t),ef.forEach(t),r=0;r<Fo.length;r++)n=Fo[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Fo.length&&(r=Fo[0],r.blockedOn===null);)c4(r),r.blockedOn===null&&Fo.shift()}var Zl=Oo.ReactCurrentBatchConfig,P0=!0;function DO(e,t,r,n){var a=Cr,i=Zl.transition;Zl.transition=null;try{Cr=1,Fx(e,t,r,n)}finally{Cr=a,Zl.transition=i}}function IO(e,t,r,n){var a=Cr,i=Zl.transition;Zl.transition=null;try{Cr=4,Fx(e,t,r,n)}finally{Cr=a,Zl.transition=i}}function Fx(e,t,r,n){if(P0){var a=py(e,t,r,n);if(a===null)Kg(e,t,n,C0,r),r2(e,n);else if($O(a,e,t,r,n))n.stopPropagation();else if(r2(e,n),t&4&&-1<EO.indexOf(e)){for(;a!==null;){var i=td(a);if(i!==null&&i4(i),i=py(e,t,r,n),i===null&&Kg(e,t,n,C0,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Kg(e,t,n,null,r)}}var C0=null;function py(e,t,r,n){if(C0=null,e=Dx(n),e=Rs(e),e!==null)if(t=gl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Z3(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return C0=e,null}function u4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jO()){case Ix:return 1;case t4:return 4;case j0:case _O:return 16;case r4:return 536870912;default:return 16}default:return 16}}var Uo=null,Gx=null,c0=null;function f4(){if(c0)return c0;var e,t=Gx,r=t.length,n,a="value"in Uo?Uo.value:Uo.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return c0=a.slice(e,1<n?1-n:void 0)}function u0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ad(){return!0}function a2(){return!1}function Za(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ad:a2,this.isPropagationStopped=a2,this}return dn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),t}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zx=Za(Gc),ed=dn({},Gc,{view:0,detail:0}),LO=Za(ed),Bg,Fg,du,rp=dn({},ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ux,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==du&&(du&&e.type==="mousemove"?(Bg=e.screenX-du.screenX,Fg=e.screenY-du.screenY):Fg=Bg=0,du=e),Bg)},movementY:function(e){return"movementY"in e?e.movementY:Fg}}),i2=Za(rp),BO=dn({},rp,{dataTransfer:0}),FO=Za(BO),GO=dn({},ed,{relatedTarget:0}),Gg=Za(GO),zO=dn({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),UO=Za(zO),WO=dn({},Gc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),VO=Za(WO),HO=dn({},Gc,{data:0}),o2=Za(HO),XO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qO[e])?!!t[e]:!1}function Ux(){return YO}var ZO=dn({},ed,{key:function(e){if(e.key){var t=XO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=u0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ux,charCode:function(e){return e.type==="keypress"?u0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?u0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),QO=Za(ZO),JO=dn({},rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s2=Za(JO),eM=dn({},ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ux}),tM=Za(eM),rM=dn({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),nM=Za(rM),aM=dn({},rp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iM=Za(aM),oM=[9,13,27,32],Wx=ko&&"CompositionEvent"in window,Ru=null;ko&&"documentMode"in document&&(Ru=document.documentMode);var sM=ko&&"TextEvent"in window&&!Ru,d4=ko&&(!Wx||Ru&&8<Ru&&11>=Ru),l2=" ",c2=!1;function h4(e,t){switch(e){case"keyup":return oM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rl=!1;function lM(e,t){switch(e){case"compositionend":return p4(t);case"keypress":return t.which!==32?null:(c2=!0,l2);case"textInput":return e=t.data,e===l2&&c2?null:e;default:return null}}function cM(e,t){if(Rl)return e==="compositionend"||!Wx&&h4(e,t)?(e=f4(),c0=Gx=Uo=null,Rl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d4&&t.locale!=="ko"?null:t.data;default:return null}}var uM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uM[e.type]:t==="textarea"}function g4(e,t,r,n){H3(n),t=N0(t,"onChange"),0<t.length&&(r=new zx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Du=null,rf=null;function fM(e){P4(e,0)}function np(e){var t=Ll(e);if(B3(t))return e}function dM(e,t){if(e==="change")return t}var m4=!1;if(ko){var zg;if(ko){var Ug="oninput"in document;if(!Ug){var f2=document.createElement("div");f2.setAttribute("oninput","return;"),Ug=typeof f2.oninput=="function"}zg=Ug}else zg=!1;m4=zg&&(!document.documentMode||9<document.documentMode)}function d2(){Du&&(Du.detachEvent("onpropertychange",y4),rf=Du=null)}function y4(e){if(e.propertyName==="value"&&np(rf)){var t=[];g4(t,rf,e,Dx(e)),Y3(fM,t)}}function hM(e,t,r){e==="focusin"?(d2(),Du=t,rf=r,Du.attachEvent("onpropertychange",y4)):e==="focusout"&&d2()}function pM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return np(rf)}function gM(e,t){if(e==="click")return np(t)}function mM(e,t){if(e==="input"||e==="change")return np(t)}function yM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ei=typeof Object.is=="function"?Object.is:yM;function nf(e,t){if(Ei(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Ym.call(t,a)||!Ei(e[a],t[a]))return!1}return!0}function h2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p2(e,t){var r=h2(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=h2(r)}}function v4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?v4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x4(){for(var e=window,t=w0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=w0(e.document)}return t}function Vx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vM(e){var t=x4(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&v4(r.ownerDocument.documentElement,r)){if(n!==null&&Vx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=p2(r,i);var o=p2(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xM=ko&&"documentMode"in document&&11>=document.documentMode,Dl=null,gy=null,Iu=null,my=!1;function g2(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;my||Dl==null||Dl!==w0(n)||(n=Dl,"selectionStart"in n&&Vx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Iu&&nf(Iu,n)||(Iu=n,n=N0(gy,"onSelect"),0<n.length&&(t=new zx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Dl)))}function Td(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Il={animationend:Td("Animation","AnimationEnd"),animationiteration:Td("Animation","AnimationIteration"),animationstart:Td("Animation","AnimationStart"),transitionend:Td("Transition","TransitionEnd")},Wg={},b4={};ko&&(b4=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function ap(e){if(Wg[e])return Wg[e];if(!Il[e])return e;var t=Il[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in b4)return Wg[e]=t[r];return e}var w4=ap("animationend"),k4=ap("animationiteration"),S4=ap("animationstart"),j4=ap("transitionend"),_4=new Map,m2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(e,t){_4.set(e,t),pl(t,[e])}for(var Vg=0;Vg<m2.length;Vg++){var Hg=m2[Vg],bM=Hg.toLowerCase(),wM=Hg[0].toUpperCase()+Hg.slice(1);hs(bM,"on"+wM)}hs(w4,"onAnimationEnd");hs(k4,"onAnimationIteration");hs(S4,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(j4,"onTransitionEnd");ac("onMouseEnter",["mouseout","mouseover"]);ac("onMouseLeave",["mouseout","mouseover"]);ac("onPointerEnter",["pointerout","pointerover"]);ac("onPointerLeave",["pointerout","pointerover"]);pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Au));function y2(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,bO(n,t,void 0,e),e.currentTarget=null}function P4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==i&&a.isPropagationStopped())break e;y2(a,s,u),i=c}else for(o=0;o<n.length;o++){if(s=n[o],c=s.instance,u=s.currentTarget,s=s.listener,c!==i&&a.isPropagationStopped())break e;y2(a,s,u),i=c}}}if(S0)throw e=fy,S0=!1,fy=null,e}function qr(e,t){var r=t[wy];r===void 0&&(r=t[wy]=new Set);var n=e+"__bubble";r.has(n)||(C4(t,e,2,!1),r.add(n))}function Xg(e,t,r){var n=0;t&&(n|=4),C4(r,e,n,t)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function af(e){if(!e[Ed]){e[Ed]=!0,$3.forEach(function(r){r!=="selectionchange"&&(kM.has(r)||Xg(r,!1,e),Xg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ed]||(t[Ed]=!0,Xg("selectionchange",!1,t))}}function C4(e,t,r,n){switch(u4(t)){case 1:var a=DO;break;case 4:a=IO;break;default:a=Fx}r=a.bind(null,t,r,e),a=void 0,!uy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Kg(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;s!==null;){if(o=Rs(s),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}s=s.parentNode}}n=n.return}Y3(function(){var u=i,f=Dx(r),d=[];e:{var p=_4.get(e);if(p!==void 0){var m=zx,x=e;switch(e){case"keypress":if(u0(r)===0)break e;case"keydown":case"keyup":m=QO;break;case"focusin":x="focus",m=Gg;break;case"focusout":x="blur",m=Gg;break;case"beforeblur":case"afterblur":m=Gg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=i2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=FO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=tM;break;case w4:case k4:case S4:m=UO;break;case j4:m=nM;break;case"scroll":m=LO;break;case"wheel":m=iM;break;case"copy":case"cut":case"paste":m=VO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=s2}var b=(t&4)!==0,S=!b&&e==="scroll",v=b?p!==null?p+"Capture":null:p;b=[];for(var y=u,w;y!==null;){w=y;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,v!==null&&(P=Qu(y,v),P!=null&&b.push(of(y,P,w)))),S)break;y=y.return}0<b.length&&(p=new m(p,x,null,r,f),d.push({event:p,listeners:b}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==ly&&(x=r.relatedTarget||r.fromElement)&&(Rs(x)||x[So]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=u,x=x?Rs(x):null,x!==null&&(S=gl(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(b=i2,P="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(b=s2,P="onPointerLeave",v="onPointerEnter",y="pointer"),S=m==null?p:Ll(m),w=x==null?p:Ll(x),p=new b(P,y+"leave",m,r,f),p.target=S,p.relatedTarget=w,P=null,Rs(f)===u&&(b=new b(v,y+"enter",x,r,f),b.target=w,b.relatedTarget=S,P=b),S=P,m&&x)t:{for(b=m,v=x,y=0,w=b;w;w=Cl(w))y++;for(w=0,P=v;P;P=Cl(P))w++;for(;0<y-w;)b=Cl(b),y--;for(;0<w-y;)v=Cl(v),w--;for(;y--;){if(b===v||v!==null&&b===v.alternate)break t;b=Cl(b),v=Cl(v)}b=null}else b=null;m!==null&&v2(d,p,m,b,!1),x!==null&&S!==null&&v2(d,S,x,b,!0)}}e:{if(p=u?Ll(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var j=dM;else if(u2(p))if(m4)j=mM;else{j=pM;var k=hM}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=gM);if(j&&(j=j(e,u))){g4(d,j,r,f);break e}k&&k(e,p,u),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&ny(p,"number",p.value)}switch(k=u?Ll(u):window,e){case"focusin":(u2(k)||k.contentEditable==="true")&&(Dl=k,gy=u,Iu=null);break;case"focusout":Iu=gy=Dl=null;break;case"mousedown":my=!0;break;case"contextmenu":case"mouseup":case"dragend":my=!1,g2(d,r,f);break;case"selectionchange":if(xM)break;case"keydown":case"keyup":g2(d,r,f)}var O;if(Wx)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Rl?h4(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(d4&&r.locale!=="ko"&&(Rl||A!=="onCompositionStart"?A==="onCompositionEnd"&&Rl&&(O=f4()):(Uo=f,Gx="value"in Uo?Uo.value:Uo.textContent,Rl=!0)),k=N0(u,A),0<k.length&&(A=new o2(A,e,null,r,f),d.push({event:A,listeners:k}),O?A.data=O:(O=p4(r),O!==null&&(A.data=O)))),(O=sM?lM(e,r):cM(e,r))&&(u=N0(u,"onBeforeInput"),0<u.length&&(f=new o2("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=O))}P4(d,t)})}function of(e,t,r){return{instance:e,listener:t,currentTarget:r}}function N0(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Qu(e,r),i!=null&&n.unshift(of(e,i,a)),i=Qu(e,t),i!=null&&n.push(of(e,i,a))),e=e.return}return n}function Cl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function v2(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,c=s.alternate,u=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&u!==null&&(s=u,a?(c=Qu(r,i),c!=null&&o.unshift(of(r,c,s))):a||(c=Qu(r,i),c!=null&&o.push(of(r,c,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var SM=/\r\n?/g,jM=/\u0000|\uFFFD/g;function x2(e){return(typeof e=="string"?e:""+e).replace(SM,`
`).replace(jM,"")}function $d(e,t,r){if(t=x2(t),x2(e)!==t&&r)throw Error(Ae(425))}function O0(){}var yy=null,vy=null;function xy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var by=typeof setTimeout=="function"?setTimeout:void 0,_M=typeof clearTimeout=="function"?clearTimeout:void 0,b2=typeof Promise=="function"?Promise:void 0,PM=typeof queueMicrotask=="function"?queueMicrotask:typeof b2<"u"?function(e){return b2.resolve(null).then(e).catch(CM)}:by;function CM(e){setTimeout(function(){throw e})}function qg(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),tf(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);tf(t)}function rs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function w2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var zc=Math.random().toString(36).slice(2),Ui="__reactFiber$"+zc,sf="__reactProps$"+zc,So="__reactContainer$"+zc,wy="__reactEvents$"+zc,NM="__reactListeners$"+zc,OM="__reactHandles$"+zc;function Rs(e){var t=e[Ui];if(t)return t;for(var r=e.parentNode;r;){if(t=r[So]||r[Ui]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=w2(e);e!==null;){if(r=e[Ui])return r;e=w2(e)}return t}e=r,r=e.parentNode}return null}function td(e){return e=e[Ui]||e[So],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ll(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ae(33))}function ip(e){return e[sf]||null}var ky=[],Bl=-1;function ps(e){return{current:e}}function Qr(e){0>Bl||(e.current=ky[Bl],ky[Bl]=null,Bl--)}function Vr(e,t){Bl++,ky[Bl]=e.current,e.current=t}var ds={},va=ps(ds),Da=ps(!1),Qs=ds;function ic(e,t){var r=e.type.contextTypes;if(!r)return ds;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ia(e){return e=e.childContextTypes,e!=null}function M0(){Qr(Da),Qr(va)}function k2(e,t,r){if(va.current!==ds)throw Error(Ae(168));Vr(va,t),Vr(Da,r)}function N4(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Ae(108,hO(e)||"Unknown",a));return dn({},r,n)}function A0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ds,Qs=va.current,Vr(va,e),Vr(Da,Da.current),!0}function S2(e,t,r){var n=e.stateNode;if(!n)throw Error(Ae(169));r?(e=N4(e,t,Qs),n.__reactInternalMemoizedMergedChildContext=e,Qr(Da),Qr(va),Vr(va,e)):Qr(Da),Vr(Da,r)}var fo=null,op=!1,Yg=!1;function O4(e){fo===null?fo=[e]:fo.push(e)}function MM(e){op=!0,O4(e)}function gs(){if(!Yg&&fo!==null){Yg=!0;var e=0,t=Cr;try{var r=fo;for(Cr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}fo=null,op=!1}catch(a){throw fo!==null&&(fo=fo.slice(e+1)),e4(Ix,gs),a}finally{Cr=t,Yg=!1}}return null}var Fl=[],Gl=0,T0=null,E0=0,si=[],li=0,Js=null,ho=1,po="";function Ms(e,t){Fl[Gl++]=E0,Fl[Gl++]=T0,T0=e,E0=t}function M4(e,t,r){si[li++]=ho,si[li++]=po,si[li++]=Js,Js=e;var n=ho;e=po;var a=32-Ai(n)-1;n&=~(1<<a),r+=1;var i=32-Ai(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ho=1<<32-Ai(t)+a|r<<a|n,po=i+e}else ho=1<<i|r<<a|n,po=e}function Hx(e){e.return!==null&&(Ms(e,1),M4(e,1,0))}function Xx(e){for(;e===T0;)T0=Fl[--Gl],Fl[Gl]=null,E0=Fl[--Gl],Fl[Gl]=null;for(;e===Js;)Js=si[--li],si[li]=null,po=si[--li],si[li]=null,ho=si[--li],si[li]=null}var Ka=null,Xa=null,tn=!1,Pi=null;function A4(e,t){var r=ci(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function j2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ka=e,Xa=rs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ka=e,Xa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Js!==null?{id:ho,overflow:po}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ci(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ka=e,Xa=null,!0):!1;default:return!1}}function Sy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jy(e){if(tn){var t=Xa;if(t){var r=t;if(!j2(e,t)){if(Sy(e))throw Error(Ae(418));t=rs(r.nextSibling);var n=Ka;t&&j2(e,t)?A4(n,r):(e.flags=e.flags&-4097|2,tn=!1,Ka=e)}}else{if(Sy(e))throw Error(Ae(418));e.flags=e.flags&-4097|2,tn=!1,Ka=e}}}function _2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ka=e}function Rd(e){if(e!==Ka)return!1;if(!tn)return _2(e),tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xy(e.type,e.memoizedProps)),t&&(t=Xa)){if(Sy(e))throw T4(),Error(Ae(418));for(;t;)A4(e,t),t=rs(t.nextSibling)}if(_2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xa=rs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xa=null}}else Xa=Ka?rs(e.stateNode.nextSibling):null;return!0}function T4(){for(var e=Xa;e;)e=rs(e.nextSibling)}function oc(){Xa=Ka=null,tn=!1}function Kx(e){Pi===null?Pi=[e]:Pi.push(e)}var AM=Oo.ReactCurrentBatchConfig;function hu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ae(309));var n=r.stateNode}if(!n)throw Error(Ae(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ae(284));if(!r._owner)throw Error(Ae(290,e))}return e}function Dd(e,t){throw e=Object.prototype.toString.call(t),Error(Ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function P2(e){var t=e._init;return t(e._payload)}function E4(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=os(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,y,w,P){return y===null||y.tag!==6?(y=nm(w,v.mode,P),y.return=v,y):(y=a(y,w),y.return=v,y)}function c(v,y,w,P){var j=w.type;return j===$l?f(v,y,w.props.children,P,w.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Io&&P2(j)===y.type)?(P=a(y,w.props),P.ref=hu(v,y,w),P.return=v,P):(P=y0(w.type,w.key,w.props,null,v.mode,P),P.ref=hu(v,y,w),P.return=v,P)}function u(v,y,w,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=am(w,v.mode,P),y.return=v,y):(y=a(y,w.children||[]),y.return=v,y)}function f(v,y,w,P,j){return y===null||y.tag!==7?(y=Ks(w,v.mode,P,j),y.return=v,y):(y=a(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=nm(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _d:return w=y0(y.type,y.key,y.props,null,v.mode,w),w.ref=hu(v,null,y),w.return=v,w;case El:return y=am(y,v.mode,w),y.return=v,y;case Io:var P=y._init;return d(v,P(y._payload),w)}if(Ou(y)||lu(y))return y=Ks(y,v.mode,w,null),y.return=v,y;Dd(v,y)}return null}function p(v,y,w,P){var j=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:s(v,y,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _d:return w.key===j?c(v,y,w,P):null;case El:return w.key===j?u(v,y,w,P):null;case Io:return j=w._init,p(v,y,j(w._payload),P)}if(Ou(w)||lu(w))return j!==null?null:f(v,y,w,P,null);Dd(v,w)}return null}function m(v,y,w,P,j){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(w)||null,s(y,v,""+P,j);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case _d:return v=v.get(P.key===null?w:P.key)||null,c(y,v,P,j);case El:return v=v.get(P.key===null?w:P.key)||null,u(y,v,P,j);case Io:var k=P._init;return m(v,y,w,k(P._payload),j)}if(Ou(P)||lu(P))return v=v.get(w)||null,f(y,v,P,j,null);Dd(y,P)}return null}function x(v,y,w,P){for(var j=null,k=null,O=y,A=y=0,R=null;O!==null&&A<w.length;A++){O.index>A?(R=O,O=null):R=O.sibling;var E=p(v,O,w[A],P);if(E===null){O===null&&(O=R);break}e&&O&&E.alternate===null&&t(v,O),y=i(E,y,A),k===null?j=E:k.sibling=E,k=E,O=R}if(A===w.length)return r(v,O),tn&&Ms(v,A),j;if(O===null){for(;A<w.length;A++)O=d(v,w[A],P),O!==null&&(y=i(O,y,A),k===null?j=O:k.sibling=O,k=O);return tn&&Ms(v,A),j}for(O=n(v,O);A<w.length;A++)R=m(O,v,A,w[A],P),R!==null&&(e&&R.alternate!==null&&O.delete(R.key===null?A:R.key),y=i(R,y,A),k===null?j=R:k.sibling=R,k=R);return e&&O.forEach(function(T){return t(v,T)}),tn&&Ms(v,A),j}function b(v,y,w,P){var j=lu(w);if(typeof j!="function")throw Error(Ae(150));if(w=j.call(w),w==null)throw Error(Ae(151));for(var k=j=null,O=y,A=y=0,R=null,E=w.next();O!==null&&!E.done;A++,E=w.next()){O.index>A?(R=O,O=null):R=O.sibling;var T=p(v,O,E.value,P);if(T===null){O===null&&(O=R);break}e&&O&&T.alternate===null&&t(v,O),y=i(T,y,A),k===null?j=T:k.sibling=T,k=T,O=R}if(E.done)return r(v,O),tn&&Ms(v,A),j;if(O===null){for(;!E.done;A++,E=w.next())E=d(v,E.value,P),E!==null&&(y=i(E,y,A),k===null?j=E:k.sibling=E,k=E);return tn&&Ms(v,A),j}for(O=n(v,O);!E.done;A++,E=w.next())E=m(O,v,A,E.value,P),E!==null&&(e&&E.alternate!==null&&O.delete(E.key===null?A:E.key),y=i(E,y,A),k===null?j=E:k.sibling=E,k=E);return e&&O.forEach(function(B){return t(v,B)}),tn&&Ms(v,A),j}function S(v,y,w,P){if(typeof w=="object"&&w!==null&&w.type===$l&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case _d:e:{for(var j=w.key,k=y;k!==null;){if(k.key===j){if(j=w.type,j===$l){if(k.tag===7){r(v,k.sibling),y=a(k,w.props.children),y.return=v,v=y;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Io&&P2(j)===k.type){r(v,k.sibling),y=a(k,w.props),y.ref=hu(v,k,w),y.return=v,v=y;break e}r(v,k);break}else t(v,k);k=k.sibling}w.type===$l?(y=Ks(w.props.children,v.mode,P,w.key),y.return=v,v=y):(P=y0(w.type,w.key,w.props,null,v.mode,P),P.ref=hu(v,y,w),P.return=v,v=P)}return o(v);case El:e:{for(k=w.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(v,y.sibling),y=a(y,w.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=am(w,v.mode,P),y.return=v,v=y}return o(v);case Io:return k=w._init,S(v,y,k(w._payload),P)}if(Ou(w))return x(v,y,w,P);if(lu(w))return b(v,y,w,P);Dd(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,w),y.return=v,v=y):(r(v,y),y=nm(w,v.mode,P),y.return=v,v=y),o(v)):r(v,y)}return S}var sc=E4(!0),$4=E4(!1),$0=ps(null),R0=null,zl=null,qx=null;function Yx(){qx=zl=R0=null}function Zx(e){var t=$0.current;Qr($0),e._currentValue=t}function _y(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ql(e,t){R0=e,qx=zl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($a=!0),e.firstContext=null)}function pi(e){var t=e._currentValue;if(qx!==e)if(e={context:e,memoizedValue:t,next:null},zl===null){if(R0===null)throw Error(Ae(308));zl=e,R0.dependencies={lanes:0,firstContext:e}}else zl=zl.next=e;return t}var Ds=null;function Qx(e){Ds===null?Ds=[e]:Ds.push(e)}function R4(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Qx(t)):(r.next=a.next,a.next=r),t.interleaved=r,jo(e,n)}function jo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Lo=!1;function Jx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ns(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,dr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,jo(e,r)}return a=n.interleaved,a===null?(t.next=t,Qx(n)):(t.next=a.next,a.next=t),n.interleaved=t,jo(e,r)}function f0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lx(e,r)}}function C2(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function D0(e,t,r,n){var a=e.updateQueue;Lo=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var c=s,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=a.baseState;o=0,f=u=c=null,s=i;do{var p=s.lane,m=s.eventTime;if((n&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var x=e,b=s;switch(p=t,m=r,b.tag){case 1:if(x=b.payload,typeof x=="function"){d=x.call(m,d,p);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,p=typeof x=="function"?x.call(m,d,p):x,p==null)break e;d=dn({},d,p);break e;case 2:Lo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else m={eventTime:m,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(f===null&&(c=d),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);tl|=o,e.lanes=o,e.memoizedState=d}}function N2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Ae(191,a));a.call(n)}}}var rd={},Ki=ps(rd),lf=ps(rd),cf=ps(rd);function Is(e){if(e===rd)throw Error(Ae(174));return e}function e1(e,t){switch(Vr(cf,t),Vr(lf,e),Vr(Ki,rd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:iy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=iy(t,e)}Qr(Ki),Vr(Ki,t)}function lc(){Qr(Ki),Qr(lf),Qr(cf)}function I4(e){Is(cf.current);var t=Is(Ki.current),r=iy(t,e.type);t!==r&&(Vr(lf,e),Vr(Ki,r))}function t1(e){lf.current===e&&(Qr(Ki),Qr(lf))}var un=ps(0);function I0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zg=[];function r1(){for(var e=0;e<Zg.length;e++)Zg[e]._workInProgressVersionPrimary=null;Zg.length=0}var d0=Oo.ReactCurrentDispatcher,Qg=Oo.ReactCurrentBatchConfig,el=0,fn=null,zn=null,Zn=null,L0=!1,Lu=!1,uf=0,TM=0;function da(){throw Error(Ae(321))}function n1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ei(e[r],t[r]))return!1;return!0}function a1(e,t,r,n,a,i){if(el=i,fn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,d0.current=e===null||e.memoizedState===null?DM:IM,e=r(n,a),Lu){i=0;do{if(Lu=!1,uf=0,25<=i)throw Error(Ae(301));i+=1,Zn=zn=null,t.updateQueue=null,d0.current=LM,e=r(n,a)}while(Lu)}if(d0.current=B0,t=zn!==null&&zn.next!==null,el=0,Zn=zn=fn=null,L0=!1,t)throw Error(Ae(300));return e}function i1(){var e=uf!==0;return uf=0,e}function zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?fn.memoizedState=Zn=e:Zn=Zn.next=e,Zn}function gi(){if(zn===null){var e=fn.alternate;e=e!==null?e.memoizedState:null}else e=zn.next;var t=Zn===null?fn.memoizedState:Zn.next;if(t!==null)Zn=t,zn=e;else{if(e===null)throw Error(Ae(310));zn=e,e={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Zn===null?fn.memoizedState=Zn=e:Zn=Zn.next=e}return Zn}function ff(e,t){return typeof t=="function"?t(e):t}function Jg(e){var t=gi(),r=t.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=e;var n=zn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,c=null,u=i;do{var f=u.lane;if((el&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(s=c=d,o=n):c=c.next=d,fn.lanes|=f,tl|=f}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=s,Ei(n,t.memoizedState)||($a=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,fn.lanes|=i,tl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function em(e){var t=gi(),r=t.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ei(i,t.memoizedState)||($a=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function L4(){}function B4(e,t){var r=fn,n=gi(),a=t(),i=!Ei(n.memoizedState,a);if(i&&(n.memoizedState=a,$a=!0),n=n.queue,o1(z4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Zn!==null&&Zn.memoizedState.tag&1){if(r.flags|=2048,df(9,G4.bind(null,r,n,a,t),void 0,null),Qn===null)throw Error(Ae(349));el&30||F4(r,t,a)}return a}function F4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fn.updateQueue,t===null?(t={lastEffect:null,stores:null},fn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function G4(e,t,r,n){t.value=r,t.getSnapshot=n,U4(t)&&W4(e)}function z4(e,t,r){return r(function(){U4(t)&&W4(e)})}function U4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ei(e,r)}catch{return!0}}function W4(e){var t=jo(e,1);t!==null&&Ti(t,e,1,-1)}function O2(e){var t=zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:e},t.queue=e,e=e.dispatch=RM.bind(null,fn,e),[t.memoizedState,e]}function df(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=fn.updateQueue,t===null?(t={lastEffect:null,stores:null},fn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function V4(){return gi().memoizedState}function h0(e,t,r,n){var a=zi();fn.flags|=e,a.memoizedState=df(1|t,r,void 0,n===void 0?null:n)}function sp(e,t,r,n){var a=gi();n=n===void 0?null:n;var i=void 0;if(zn!==null){var o=zn.memoizedState;if(i=o.destroy,n!==null&&n1(n,o.deps)){a.memoizedState=df(t,r,i,n);return}}fn.flags|=e,a.memoizedState=df(1|t,r,i,n)}function M2(e,t){return h0(8390656,8,e,t)}function o1(e,t){return sp(2048,8,e,t)}function H4(e,t){return sp(4,2,e,t)}function X4(e,t){return sp(4,4,e,t)}function K4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function q4(e,t,r){return r=r!=null?r.concat([e]):null,sp(4,4,K4.bind(null,t,e),r)}function s1(){}function Y4(e,t){var r=gi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&n1(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Z4(e,t){var r=gi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&n1(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Q4(e,t,r){return el&21?(Ei(r,t)||(r=n4(),fn.lanes|=r,tl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$a=!0),e.memoizedState=r)}function EM(e,t){var r=Cr;Cr=r!==0&&4>r?r:4,e(!0);var n=Qg.transition;Qg.transition={};try{e(!1),t()}finally{Cr=r,Qg.transition=n}}function J4(){return gi().memoizedState}function $M(e,t,r){var n=is(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ej(e))tj(t,r);else if(r=R4(e,t,r,n),r!==null){var a=Pa();Ti(r,e,n,a),rj(r,t,n)}}function RM(e,t,r){var n=is(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ej(e))tj(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Ei(s,o)){var c=t.interleaved;c===null?(a.next=a,Qx(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=R4(e,t,a,n),r!==null&&(a=Pa(),Ti(r,e,n,a),rj(r,t,n))}}function ej(e){var t=e.alternate;return e===fn||t!==null&&t===fn}function tj(e,t){Lu=L0=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function rj(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lx(e,r)}}var B0={readContext:pi,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useInsertionEffect:da,useLayoutEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useMutableSource:da,useSyncExternalStore:da,useId:da,unstable_isNewReconciler:!1},DM={readContext:pi,useCallback:function(e,t){return zi().memoizedState=[e,t===void 0?null:t],e},useContext:pi,useEffect:M2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,h0(4194308,4,K4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return h0(4194308,4,e,t)},useInsertionEffect:function(e,t){return h0(4,2,e,t)},useMemo:function(e,t){var r=zi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=zi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$M.bind(null,fn,e),[n.memoizedState,e]},useRef:function(e){var t=zi();return e={current:e},t.memoizedState=e},useState:O2,useDebugValue:s1,useDeferredValue:function(e){return zi().memoizedState=e},useTransition:function(){var e=O2(!1),t=e[0];return e=EM.bind(null,e[1]),zi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=fn,a=zi();if(tn){if(r===void 0)throw Error(Ae(407));r=r()}else{if(r=t(),Qn===null)throw Error(Ae(349));el&30||F4(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,M2(z4.bind(null,n,i,e),[e]),n.flags|=2048,df(9,G4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=zi(),t=Qn.identifierPrefix;if(tn){var r=po,n=ho;r=(n&~(1<<32-Ai(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=uf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=TM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IM={readContext:pi,useCallback:Y4,useContext:pi,useEffect:o1,useImperativeHandle:q4,useInsertionEffect:H4,useLayoutEffect:X4,useMemo:Z4,useReducer:Jg,useRef:V4,useState:function(){return Jg(ff)},useDebugValue:s1,useDeferredValue:function(e){var t=gi();return Q4(t,zn.memoizedState,e)},useTransition:function(){var e=Jg(ff)[0],t=gi().memoizedState;return[e,t]},useMutableSource:L4,useSyncExternalStore:B4,useId:J4,unstable_isNewReconciler:!1},LM={readContext:pi,useCallback:Y4,useContext:pi,useEffect:o1,useImperativeHandle:q4,useInsertionEffect:H4,useLayoutEffect:X4,useMemo:Z4,useReducer:em,useRef:V4,useState:function(){return em(ff)},useDebugValue:s1,useDeferredValue:function(e){var t=gi();return zn===null?t.memoizedState=e:Q4(t,zn.memoizedState,e)},useTransition:function(){var e=em(ff)[0],t=gi().memoizedState;return[e,t]},useMutableSource:L4,useSyncExternalStore:B4,useId:J4,unstable_isNewReconciler:!1};function ki(e,t){if(e&&e.defaultProps){t=dn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Py(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:dn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var lp={isMounted:function(e){return(e=e._reactInternals)?gl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Pa(),a=is(e),i=vo(n,a);i.payload=t,r!=null&&(i.callback=r),t=ns(e,i,a),t!==null&&(Ti(t,e,a,n),f0(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Pa(),a=is(e),i=vo(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ns(e,i,a),t!==null&&(Ti(t,e,a,n),f0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Pa(),n=is(e),a=vo(r,n);a.tag=2,t!=null&&(a.callback=t),t=ns(e,a,n),t!==null&&(Ti(t,e,n,r),f0(t,e,n))}};function A2(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!nf(r,n)||!nf(a,i):!0}function nj(e,t,r){var n=!1,a=ds,i=t.contextType;return typeof i=="object"&&i!==null?i=pi(i):(a=Ia(t)?Qs:va.current,n=t.contextTypes,i=(n=n!=null)?ic(e,a):ds),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lp,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function T2(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&lp.enqueueReplaceState(t,t.state,null)}function Cy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Jx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=pi(i):(i=Ia(t)?Qs:va.current,a.context=ic(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Py(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&lp.enqueueReplaceState(a,a.state,null),D0(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function cc(e,t){try{var r="",n=t;do r+=dO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function tm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ny(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var BM=typeof WeakMap=="function"?WeakMap:Map;function aj(e,t,r){r=vo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){G0||(G0=!0,Ly=n),Ny(e,t)},r}function ij(e,t,r){r=vo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Ny(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ny(e,t),typeof n!="function"&&(as===null?as=new Set([this]):as.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function E2(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new BM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=JM.bind(null,e,t,r),t.then(e,e))}function $2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function R2(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=vo(-1,1),t.tag=2,ns(r,t,1))),r.lanes|=1),e)}var FM=Oo.ReactCurrentOwner,$a=!1;function ka(e,t,r,n){t.child=e===null?$4(t,null,r,n):sc(t,e.child,r,n)}function D2(e,t,r,n,a){r=r.render;var i=t.ref;return Ql(t,a),n=a1(e,t,r,n,i,a),r=i1(),e!==null&&!$a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,_o(e,t,a)):(tn&&r&&Hx(t),t.flags|=1,ka(e,t,n,a),t.child)}function I2(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!g1(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,oj(e,t,i,n,a)):(e=y0(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:nf,r(o,n)&&e.ref===t.ref)return _o(e,t,a)}return t.flags|=1,e=os(i,n),e.ref=t.ref,e.return=t,t.child=e}function oj(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(nf(i,n)&&e.ref===t.ref)if($a=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&($a=!0);else return t.lanes=e.lanes,_o(e,t,a)}return Oy(e,t,r,n,a)}function sj(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vr(Wl,Wa),Wa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vr(Wl,Wa),Wa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Vr(Wl,Wa),Wa|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Vr(Wl,Wa),Wa|=n;return ka(e,t,a,r),t.child}function lj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Oy(e,t,r,n,a){var i=Ia(r)?Qs:va.current;return i=ic(t,i),Ql(t,a),r=a1(e,t,r,n,i,a),n=i1(),e!==null&&!$a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,_o(e,t,a)):(tn&&n&&Hx(t),t.flags|=1,ka(e,t,r,a),t.child)}function L2(e,t,r,n,a){if(Ia(r)){var i=!0;A0(t)}else i=!1;if(Ql(t,a),t.stateNode===null)p0(e,t),nj(t,r,n),Cy(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=pi(u):(u=Ia(r)?Qs:va.current,u=ic(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||c!==u)&&T2(t,o,n,u),Lo=!1;var p=t.memoizedState;o.state=p,D0(t,n,o,a),c=t.memoizedState,s!==n||p!==c||Da.current||Lo?(typeof f=="function"&&(Py(t,r,f,n),c=t.memoizedState),(s=Lo||A2(t,r,s,n,p,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,D4(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ki(t.type,s),o.props=u,d=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=pi(c):(c=Ia(r)?Qs:va.current,c=ic(t,c));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==c)&&T2(t,o,n,c),Lo=!1,p=t.memoizedState,o.state=p,D0(t,n,o,a);var x=t.memoizedState;s!==d||p!==x||Da.current||Lo?(typeof m=="function"&&(Py(t,r,m,n),x=t.memoizedState),(u=Lo||A2(t,r,u,n,p,x,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return My(e,t,r,n,i,a)}function My(e,t,r,n,a,i){lj(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&S2(t,r,!1),_o(e,t,i);n=t.stateNode,FM.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=sc(t,e.child,null,i),t.child=sc(t,null,s,i)):ka(e,t,s,i),t.memoizedState=n.state,a&&S2(t,r,!0),t.child}function cj(e){var t=e.stateNode;t.pendingContext?k2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&k2(e,t.context,!1),e1(e,t.containerInfo)}function B2(e,t,r,n,a){return oc(),Kx(a),t.flags|=256,ka(e,t,r,n),t.child}var Ay={dehydrated:null,treeContext:null,retryLane:0};function Ty(e){return{baseLanes:e,cachePool:null,transitions:null}}function uj(e,t,r){var n=t.pendingProps,a=un.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Vr(un,a&1),e===null)return jy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fp(o,n,0,null),e=Ks(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ty(r),t.memoizedState=Ay,e):l1(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return GM(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=os(a,c),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=os(s,i):(i=Ks(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Ty(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Ay,n}return i=e.child,e=i.sibling,n=os(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function l1(e,t){return t=fp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Id(e,t,r,n){return n!==null&&Kx(n),sc(t,e.child,null,r),e=l1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GM(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=tm(Error(Ae(422))),Id(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=fp({mode:"visible",children:n.children},a,0,null),i=Ks(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&sc(t,e.child,null,o),t.child.memoizedState=Ty(o),t.memoizedState=Ay,i);if(!(t.mode&1))return Id(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(Ae(419)),n=tm(i,n,void 0),Id(e,t,o,n)}if(s=(o&e.childLanes)!==0,$a||s){if(n=Qn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,jo(e,a),Ti(n,e,a,-1))}return p1(),n=tm(Error(Ae(421))),Id(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=eA.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Xa=rs(a.nextSibling),Ka=t,tn=!0,Pi=null,e!==null&&(si[li++]=ho,si[li++]=po,si[li++]=Js,ho=e.id,po=e.overflow,Js=t),t=l1(t,n.children),t.flags|=4096,t)}function F2(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),_y(e.return,t,r)}function rm(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function fj(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ka(e,t,n.children,r),n=un.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&F2(e,r,t);else if(e.tag===19)F2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Vr(un,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&I0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),rm(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&I0(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}rm(t,!0,r,null,i);break;case"together":rm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function p0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _o(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ae(153));if(t.child!==null){for(e=t.child,r=os(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=os(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function zM(e,t,r){switch(t.tag){case 3:cj(t),oc();break;case 5:I4(t);break;case 1:Ia(t.type)&&A0(t);break;case 4:e1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Vr($0,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Vr(un,un.current&1),t.flags|=128,null):r&t.child.childLanes?uj(e,t,r):(Vr(un,un.current&1),e=_o(e,t,r),e!==null?e.sibling:null);Vr(un,un.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return fj(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Vr(un,un.current),n)break;return null;case 22:case 23:return t.lanes=0,sj(e,t,r)}return _o(e,t,r)}var dj,Ey,hj,pj;dj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ey=function(){};hj=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Is(Ki.current);var i=null;switch(r){case"input":a=ty(e,a),n=ty(e,n),i=[];break;case"select":a=dn({},a,{value:void 0}),n=dn({},n,{value:void 0}),i=[];break;case"textarea":a=ay(e,a),n=ay(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=O0)}oy(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==s&&(c!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&qr("scroll",e),i||s===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};pj=function(e,t,r,n){r!==n&&(t.flags|=4)};function pu(e,t){if(!tn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ha(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function UM(e,t,r){var n=t.pendingProps;switch(Xx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ha(t),null;case 1:return Ia(t.type)&&M0(),ha(t),null;case 3:return n=t.stateNode,lc(),Qr(Da),Qr(va),r1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Rd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pi!==null&&(Gy(Pi),Pi=null))),Ey(e,t),ha(t),null;case 5:t1(t);var a=Is(cf.current);if(r=t.type,e!==null&&t.stateNode!=null)hj(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ae(166));return ha(t),null}if(e=Is(Ki.current),Rd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ui]=t,n[sf]=i,e=(t.mode&1)!==0,r){case"dialog":qr("cancel",n),qr("close",n);break;case"iframe":case"object":case"embed":qr("load",n);break;case"video":case"audio":for(a=0;a<Au.length;a++)qr(Au[a],n);break;case"source":qr("error",n);break;case"img":case"image":case"link":qr("error",n),qr("load",n);break;case"details":qr("toggle",n);break;case"input":qb(n,i),qr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},qr("invalid",n);break;case"textarea":Zb(n,i),qr("invalid",n)}oy(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&$d(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&$d(n.textContent,s,e),a=["children",""+s]):Yu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&qr("scroll",n)}switch(r){case"input":Pd(n),Yb(n,i,!0);break;case"textarea":Pd(n),Qb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=O0)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=z3(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ui]=t,e[sf]=n,dj(e,t,!1,!1),t.stateNode=e;e:{switch(o=sy(r,n),r){case"dialog":qr("cancel",e),qr("close",e),a=n;break;case"iframe":case"object":case"embed":qr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Au.length;a++)qr(Au[a],e);a=n;break;case"source":qr("error",e),a=n;break;case"img":case"image":case"link":qr("error",e),qr("load",e),a=n;break;case"details":qr("toggle",e),a=n;break;case"input":qb(e,n),a=ty(e,n),qr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=dn({},n,{value:void 0}),qr("invalid",e);break;case"textarea":Zb(e,n),a=ay(e,n),qr("invalid",e);break;default:a=n}oy(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var c=s[i];i==="style"?V3(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&U3(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Zu(e,c):typeof c=="number"&&Zu(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&qr("scroll",e):c!=null&&Tx(e,i,c,o))}switch(r){case"input":Pd(e),Yb(e,n,!1);break;case"textarea":Pd(e),Qb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+fs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Kl(e,!!n.multiple,i,!1):n.defaultValue!=null&&Kl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=O0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ha(t),null;case 6:if(e&&t.stateNode!=null)pj(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ae(166));if(r=Is(cf.current),Is(Ki.current),Rd(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ui]=t,(i=n.nodeValue!==r)&&(e=Ka,e!==null))switch(e.tag){case 3:$d(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$d(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ui]=t,t.stateNode=n}return ha(t),null;case 13:if(Qr(un),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&Xa!==null&&t.mode&1&&!(t.flags&128))T4(),oc(),t.flags|=98560,i=!1;else if(i=Rd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Ae(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ae(317));i[Ui]=t}else oc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ha(t),i=!1}else Pi!==null&&(Gy(Pi),Pi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||un.current&1?Wn===0&&(Wn=3):p1())),t.updateQueue!==null&&(t.flags|=4),ha(t),null);case 4:return lc(),Ey(e,t),e===null&&af(t.stateNode.containerInfo),ha(t),null;case 10:return Zx(t.type._context),ha(t),null;case 17:return Ia(t.type)&&M0(),ha(t),null;case 19:if(Qr(un),i=t.memoizedState,i===null)return ha(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)pu(i,!1);else{if(Wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=I0(e),o!==null){for(t.flags|=128,pu(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Vr(un,un.current&1|2),t.child}e=e.sibling}i.tail!==null&&Mn()>uc&&(t.flags|=128,n=!0,pu(i,!1),t.lanes=4194304)}else{if(!n)if(e=I0(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),pu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!tn)return ha(t),null}else 2*Mn()-i.renderingStartTime>uc&&r!==1073741824&&(t.flags|=128,n=!0,pu(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Mn(),t.sibling=null,r=un.current,Vr(un,n?r&1|2:r&1),t):(ha(t),null);case 22:case 23:return h1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Wa&1073741824&&(ha(t),t.subtreeFlags&6&&(t.flags|=8192)):ha(t),null;case 24:return null;case 25:return null}throw Error(Ae(156,t.tag))}function WM(e,t){switch(Xx(t),t.tag){case 1:return Ia(t.type)&&M0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lc(),Qr(Da),Qr(va),r1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return t1(t),null;case 13:if(Qr(un),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ae(340));oc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qr(un),null;case 4:return lc(),null;case 10:return Zx(t.type._context),null;case 22:case 23:return h1(),null;case 24:return null;default:return null}}var Ld=!1,ma=!1,VM=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Ul(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Sn(e,t,n)}else r.current=null}function $y(e,t,r){try{r()}catch(n){Sn(e,t,n)}}var G2=!1;function HM(e,t){if(yy=P0,e=x4(),Vx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,c=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var m;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===e)break t;if(p===r&&++u===a&&(s=o),p===i&&++f===n&&(c=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(vy={focusedElem:e,selectionRange:r},P0=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){t=qe;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,S=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?b:ki(t.type,b),S);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(P){Sn(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}return x=G2,G2=!1,x}function Bu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&$y(t,r,i)}a=a.next}while(a!==n)}}function cp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ry(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function gj(e){var t=e.alternate;t!==null&&(e.alternate=null,gj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ui],delete t[sf],delete t[wy],delete t[NM],delete t[OM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mj(e){return e.tag===5||e.tag===3||e.tag===4}function z2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=O0));else if(n!==4&&(e=e.child,e!==null))for(Dy(e,t,r),e=e.sibling;e!==null;)Dy(e,t,r),e=e.sibling}function Iy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Iy(e,t,r),e=e.sibling;e!==null;)Iy(e,t,r),e=e.sibling}var na=null,Si=!1;function $o(e,t,r){for(r=r.child;r!==null;)yj(e,t,r),r=r.sibling}function yj(e,t,r){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(tp,r)}catch{}switch(r.tag){case 5:ma||Ul(r,t);case 6:var n=na,a=Si;na=null,$o(e,t,r),na=n,Si=a,na!==null&&(Si?(e=na,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):na.removeChild(r.stateNode));break;case 18:na!==null&&(Si?(e=na,r=r.stateNode,e.nodeType===8?qg(e.parentNode,r):e.nodeType===1&&qg(e,r),tf(e)):qg(na,r.stateNode));break;case 4:n=na,a=Si,na=r.stateNode.containerInfo,Si=!0,$o(e,t,r),na=n,Si=a;break;case 0:case 11:case 14:case 15:if(!ma&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&$y(r,t,o),a=a.next}while(a!==n)}$o(e,t,r);break;case 1:if(!ma&&(Ul(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Sn(r,t,s)}$o(e,t,r);break;case 21:$o(e,t,r);break;case 22:r.mode&1?(ma=(n=ma)||r.memoizedState!==null,$o(e,t,r),ma=n):$o(e,t,r);break;default:$o(e,t,r)}}function U2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new VM),t.forEach(function(n){var a=tA.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function bi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:na=s.stateNode,Si=!1;break e;case 3:na=s.stateNode.containerInfo,Si=!0;break e;case 4:na=s.stateNode.containerInfo,Si=!0;break e}s=s.return}if(na===null)throw Error(Ae(160));yj(i,o,a),na=null,Si=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Sn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vj(t,e),t=t.sibling}function vj(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bi(t,e),Gi(e),n&4){try{Bu(3,e,e.return),cp(3,e)}catch(b){Sn(e,e.return,b)}try{Bu(5,e,e.return)}catch(b){Sn(e,e.return,b)}}break;case 1:bi(t,e),Gi(e),n&512&&r!==null&&Ul(r,r.return);break;case 5:if(bi(t,e),Gi(e),n&512&&r!==null&&Ul(r,r.return),e.flags&32){var a=e.stateNode;try{Zu(a,"")}catch(b){Sn(e,e.return,b)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&F3(a,i),sy(s,o);var u=sy(s,i);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?V3(a,d):f==="dangerouslySetInnerHTML"?U3(a,d):f==="children"?Zu(a,d):Tx(a,f,d,u)}switch(s){case"input":ry(a,i);break;case"textarea":G3(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Kl(a,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Kl(a,!!i.multiple,i.defaultValue,!0):Kl(a,!!i.multiple,i.multiple?[]:"",!1))}a[sf]=i}catch(b){Sn(e,e.return,b)}}break;case 6:if(bi(t,e),Gi(e),n&4){if(e.stateNode===null)throw Error(Ae(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){Sn(e,e.return,b)}}break;case 3:if(bi(t,e),Gi(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{tf(t.containerInfo)}catch(b){Sn(e,e.return,b)}break;case 4:bi(t,e),Gi(e);break;case 13:bi(t,e),Gi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(f1=Mn())),n&4&&U2(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(ma=(u=ma)||f,bi(t,e),ma=u):bi(t,e),Gi(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(qe=e,f=e.child;f!==null;){for(d=qe=f;qe!==null;){switch(p=qe,m=p.child,p.tag){case 0:case 11:case 14:case 15:Bu(4,p,p.return);break;case 1:Ul(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(b){Sn(n,r,b)}}break;case 5:Ul(p,p.return);break;case 22:if(p.memoizedState!==null){V2(d);continue}}m!==null?(m.return=p,qe=m):V2(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=W3("display",o))}catch(b){Sn(e,e.return,b)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){Sn(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bi(t,e),Gi(e),n&4&&U2(e);break;case 21:break;default:bi(t,e),Gi(e)}}function Gi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(mj(r)){var n=r;break e}r=r.return}throw Error(Ae(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Zu(a,""),n.flags&=-33);var i=z2(e);Iy(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=z2(e);Dy(e,s,o);break;default:throw Error(Ae(161))}}catch(c){Sn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function XM(e,t,r){qe=e,xj(e)}function xj(e,t,r){for(var n=(e.mode&1)!==0;qe!==null;){var a=qe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Ld;if(!o){var s=a.alternate,c=s!==null&&s.memoizedState!==null||ma;s=Ld;var u=ma;if(Ld=o,(ma=c)&&!u)for(qe=a;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?H2(a):c!==null?(c.return=o,qe=c):H2(a);for(;i!==null;)qe=i,xj(i),i=i.sibling;qe=a,Ld=s,ma=u}W2(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,qe=i):W2(e)}}function W2(e){for(;qe!==null;){var t=qe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ma||cp(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ma)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ki(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&N2(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}N2(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&tf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}ma||t.flags&512&&Ry(t)}catch(p){Sn(t,t.return,p)}}if(t===e){qe=null;break}if(r=t.sibling,r!==null){r.return=t.return,qe=r;break}qe=t.return}}function V2(e){for(;qe!==null;){var t=qe;if(t===e){qe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,qe=r;break}qe=t.return}}function H2(e){for(;qe!==null;){var t=qe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{cp(4,t)}catch(c){Sn(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Sn(t,a,c)}}var i=t.return;try{Ry(t)}catch(c){Sn(t,i,c)}break;case 5:var o=t.return;try{Ry(t)}catch(c){Sn(t,o,c)}}}catch(c){Sn(t,t.return,c)}if(t===e){qe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,qe=s;break}qe=t.return}}var KM=Math.ceil,F0=Oo.ReactCurrentDispatcher,c1=Oo.ReactCurrentOwner,di=Oo.ReactCurrentBatchConfig,dr=0,Qn=null,In=null,oa=0,Wa=0,Wl=ps(0),Wn=0,hf=null,tl=0,up=0,u1=0,Fu=null,Ta=null,f1=0,uc=1/0,uo=null,G0=!1,Ly=null,as=null,Bd=!1,Wo=null,z0=0,Gu=0,By=null,g0=-1,m0=0;function Pa(){return dr&6?Mn():g0!==-1?g0:g0=Mn()}function is(e){return e.mode&1?dr&2&&oa!==0?oa&-oa:AM.transition!==null?(m0===0&&(m0=n4()),m0):(e=Cr,e!==0||(e=window.event,e=e===void 0?16:u4(e.type)),e):1}function Ti(e,t,r,n){if(50<Gu)throw Gu=0,By=null,Error(Ae(185));Jf(e,r,n),(!(dr&2)||e!==Qn)&&(e===Qn&&(!(dr&2)&&(up|=r),Wn===4&&Go(e,oa)),La(e,n),r===1&&dr===0&&!(t.mode&1)&&(uc=Mn()+500,op&&gs()))}function La(e,t){var r=e.callbackNode;AO(e,t);var n=_0(e,e===Qn?oa:0);if(n===0)r!==null&&t2(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&t2(r),t===1)e.tag===0?MM(X2.bind(null,e)):O4(X2.bind(null,e)),PM(function(){!(dr&6)&&gs()}),r=null;else{switch(a4(n)){case 1:r=Ix;break;case 4:r=t4;break;case 16:r=j0;break;case 536870912:r=r4;break;default:r=j0}r=Cj(r,bj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function bj(e,t){if(g0=-1,m0=0,dr&6)throw Error(Ae(327));var r=e.callbackNode;if(Jl()&&e.callbackNode!==r)return null;var n=_0(e,e===Qn?oa:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=U0(e,n);else{t=n;var a=dr;dr|=2;var i=kj();(Qn!==e||oa!==t)&&(uo=null,uc=Mn()+500,Xs(e,t));do try{ZM();break}catch(s){wj(e,s)}while(!0);Yx(),F0.current=i,dr=a,In!==null?t=0:(Qn=null,oa=0,t=Wn)}if(t!==0){if(t===2&&(a=dy(e),a!==0&&(n=a,t=Fy(e,a))),t===1)throw r=hf,Xs(e,0),Go(e,n),La(e,Mn()),r;if(t===6)Go(e,n);else{if(a=e.current.alternate,!(n&30)&&!qM(a)&&(t=U0(e,n),t===2&&(i=dy(e),i!==0&&(n=i,t=Fy(e,i))),t===1))throw r=hf,Xs(e,0),Go(e,n),La(e,Mn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Ae(345));case 2:As(e,Ta,uo);break;case 3:if(Go(e,n),(n&130023424)===n&&(t=f1+500-Mn(),10<t)){if(_0(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Pa(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=by(As.bind(null,e,Ta,uo),t);break}As(e,Ta,uo);break;case 4:if(Go(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ai(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Mn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*KM(n/1960))-n,10<n){e.timeoutHandle=by(As.bind(null,e,Ta,uo),n);break}As(e,Ta,uo);break;case 5:As(e,Ta,uo);break;default:throw Error(Ae(329))}}}return La(e,Mn()),e.callbackNode===r?bj.bind(null,e):null}function Fy(e,t){var r=Fu;return e.current.memoizedState.isDehydrated&&(Xs(e,t).flags|=256),e=U0(e,t),e!==2&&(t=Ta,Ta=r,t!==null&&Gy(t)),e}function Gy(e){Ta===null?Ta=e:Ta.push.apply(Ta,e)}function qM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ei(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Go(e,t){for(t&=~u1,t&=~up,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ai(t),n=1<<r;e[r]=-1,t&=~n}}function X2(e){if(dr&6)throw Error(Ae(327));Jl();var t=_0(e,0);if(!(t&1))return La(e,Mn()),null;var r=U0(e,t);if(e.tag!==0&&r===2){var n=dy(e);n!==0&&(t=n,r=Fy(e,n))}if(r===1)throw r=hf,Xs(e,0),Go(e,t),La(e,Mn()),r;if(r===6)throw Error(Ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,As(e,Ta,uo),La(e,Mn()),null}function d1(e,t){var r=dr;dr|=1;try{return e(t)}finally{dr=r,dr===0&&(uc=Mn()+500,op&&gs())}}function rl(e){Wo!==null&&Wo.tag===0&&!(dr&6)&&Jl();var t=dr;dr|=1;var r=di.transition,n=Cr;try{if(di.transition=null,Cr=1,e)return e()}finally{Cr=n,di.transition=r,dr=t,!(dr&6)&&gs()}}function h1(){Wa=Wl.current,Qr(Wl)}function Xs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_M(r)),In!==null)for(r=In.return;r!==null;){var n=r;switch(Xx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&M0();break;case 3:lc(),Qr(Da),Qr(va),r1();break;case 5:t1(n);break;case 4:lc();break;case 13:Qr(un);break;case 19:Qr(un);break;case 10:Zx(n.type._context);break;case 22:case 23:h1()}r=r.return}if(Qn=e,In=e=os(e.current,null),oa=Wa=t,Wn=0,hf=null,u1=up=tl=0,Ta=Fu=null,Ds!==null){for(t=0;t<Ds.length;t++)if(r=Ds[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ds=null}return e}function wj(e,t){do{var r=In;try{if(Yx(),d0.current=B0,L0){for(var n=fn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}L0=!1}if(el=0,Zn=zn=fn=null,Lu=!1,uf=0,c1.current=null,r===null||r.return===null){Wn=1,hf=t,In=null;break}e:{var i=e,o=r.return,s=r,c=t;if(t=oa,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=$2(o);if(m!==null){m.flags&=-257,R2(m,o,s,i,t),m.mode&1&&E2(i,u,t),t=m,c=u;var x=t.updateQueue;if(x===null){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}else{if(!(t&1)){E2(i,u,t),p1();break e}c=Error(Ae(426))}}else if(tn&&s.mode&1){var S=$2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),R2(S,o,s,i,t),Kx(cc(c,s));break e}}i=c=cc(c,s),Wn!==4&&(Wn=2),Fu===null?Fu=[i]:Fu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=aj(i,c,t);C2(i,v);break e;case 1:s=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(as===null||!as.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var P=ij(i,s,t);C2(i,P);break e}}i=i.return}while(i!==null)}jj(r)}catch(j){t=j,In===r&&r!==null&&(In=r=r.return);continue}break}while(!0)}function kj(){var e=F0.current;return F0.current=B0,e===null?B0:e}function p1(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),Qn===null||!(tl&268435455)&&!(up&268435455)||Go(Qn,oa)}function U0(e,t){var r=dr;dr|=2;var n=kj();(Qn!==e||oa!==t)&&(uo=null,Xs(e,t));do try{YM();break}catch(a){wj(e,a)}while(!0);if(Yx(),dr=r,F0.current=n,In!==null)throw Error(Ae(261));return Qn=null,oa=0,Wn}function YM(){for(;In!==null;)Sj(In)}function ZM(){for(;In!==null&&!kO();)Sj(In)}function Sj(e){var t=Pj(e.alternate,e,Wa);e.memoizedProps=e.pendingProps,t===null?jj(e):In=t,c1.current=null}function jj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=WM(r,t),r!==null){r.flags&=32767,In=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Wn=6,In=null;return}}else if(r=UM(r,t,Wa),r!==null){In=r;return}if(t=t.sibling,t!==null){In=t;return}In=t=e}while(t!==null);Wn===0&&(Wn=5)}function As(e,t,r){var n=Cr,a=di.transition;try{di.transition=null,Cr=1,QM(e,t,r,n)}finally{di.transition=a,Cr=n}return null}function QM(e,t,r,n){do Jl();while(Wo!==null);if(dr&6)throw Error(Ae(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ae(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(TO(e,i),e===Qn&&(In=Qn=null,oa=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Bd||(Bd=!0,Cj(j0,function(){return Jl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=di.transition,di.transition=null;var o=Cr;Cr=1;var s=dr;dr|=4,c1.current=null,HM(e,r),vj(r,e),vM(vy),P0=!!yy,vy=yy=null,e.current=r,XM(r),SO(),dr=s,Cr=o,di.transition=i}else e.current=r;if(Bd&&(Bd=!1,Wo=e,z0=a),i=e.pendingLanes,i===0&&(as=null),PO(r.stateNode),La(e,Mn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(G0)throw G0=!1,e=Ly,Ly=null,e;return z0&1&&e.tag!==0&&Jl(),i=e.pendingLanes,i&1?e===By?Gu++:(Gu=0,By=e):Gu=0,gs(),null}function Jl(){if(Wo!==null){var e=a4(z0),t=di.transition,r=Cr;try{if(di.transition=null,Cr=16>e?16:e,Wo===null)var n=!1;else{if(e=Wo,Wo=null,z0=0,dr&6)throw Error(Ae(331));var a=dr;for(dr|=4,qe=e.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var s=i.deletions;if(s!==null){for(var c=0;c<s.length;c++){var u=s[c];for(qe=u;qe!==null;){var f=qe;switch(f.tag){case 0:case 11:case 15:Bu(8,f,i)}var d=f.child;if(d!==null)d.return=f,qe=d;else for(;qe!==null;){f=qe;var p=f.sibling,m=f.return;if(gj(f),f===u){qe=null;break}if(p!==null){p.return=m,qe=p;break}qe=m}}}var x=i.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bu(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,qe=v;break e}qe=i.return}}var y=e.current;for(qe=y;qe!==null;){o=qe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,qe=w;else e:for(o=y;qe!==null;){if(s=qe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:cp(9,s)}}catch(j){Sn(s,s.return,j)}if(s===o){qe=null;break e}var P=s.sibling;if(P!==null){P.return=s.return,qe=P;break e}qe=s.return}}if(dr=a,gs(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(tp,e)}catch{}n=!0}return n}finally{Cr=r,di.transition=t}}return!1}function K2(e,t,r){t=cc(r,t),t=aj(e,t,1),e=ns(e,t,1),t=Pa(),e!==null&&(Jf(e,1,t),La(e,t))}function Sn(e,t,r){if(e.tag===3)K2(e,e,r);else for(;t!==null;){if(t.tag===3){K2(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(as===null||!as.has(n))){e=cc(r,e),e=ij(t,e,1),t=ns(t,e,1),e=Pa(),t!==null&&(Jf(t,1,e),La(t,e));break}}t=t.return}}function JM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Pa(),e.pingedLanes|=e.suspendedLanes&r,Qn===e&&(oa&r)===r&&(Wn===4||Wn===3&&(oa&130023424)===oa&&500>Mn()-f1?Xs(e,0):u1|=r),La(e,t)}function _j(e,t){t===0&&(e.mode&1?(t=Od,Od<<=1,!(Od&130023424)&&(Od=4194304)):t=1);var r=Pa();e=jo(e,t),e!==null&&(Jf(e,t,r),La(e,r))}function eA(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),_j(e,r)}function tA(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ae(314))}n!==null&&n.delete(t),_j(e,r)}var Pj;Pj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Da.current)$a=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return $a=!1,zM(e,t,r);$a=!!(e.flags&131072)}else $a=!1,tn&&t.flags&1048576&&M4(t,E0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;p0(e,t),e=t.pendingProps;var a=ic(t,va.current);Ql(t,r),a=a1(null,t,n,e,a,r);var i=i1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(n)?(i=!0,A0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Jx(t),a.updater=lp,t.stateNode=a,a._reactInternals=t,Cy(t,n,e,r),t=My(null,t,n,!0,i,r)):(t.tag=0,tn&&i&&Hx(t),ka(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(p0(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=nA(n),e=ki(n,e),a){case 0:t=Oy(null,t,n,e,r);break e;case 1:t=L2(null,t,n,e,r);break e;case 11:t=D2(null,t,n,e,r);break e;case 14:t=I2(null,t,n,ki(n.type,e),r);break e}throw Error(Ae(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ki(n,a),Oy(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ki(n,a),L2(e,t,n,a,r);case 3:e:{if(cj(t),e===null)throw Error(Ae(387));n=t.pendingProps,i=t.memoizedState,a=i.element,D4(e,t),D0(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=cc(Error(Ae(423)),t),t=B2(e,t,n,r,a);break e}else if(n!==a){a=cc(Error(Ae(424)),t),t=B2(e,t,n,r,a);break e}else for(Xa=rs(t.stateNode.containerInfo.firstChild),Ka=t,tn=!0,Pi=null,r=$4(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(oc(),n===a){t=_o(e,t,r);break e}ka(e,t,n,r)}t=t.child}return t;case 5:return I4(t),e===null&&jy(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,xy(n,a)?o=null:i!==null&&xy(n,i)&&(t.flags|=32),lj(e,t),ka(e,t,o,r),t.child;case 6:return e===null&&jy(t),null;case 13:return uj(e,t,r);case 4:return e1(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sc(t,null,n,r):ka(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ki(n,a),D2(e,t,n,a,r);case 7:return ka(e,t,t.pendingProps,r),t.child;case 8:return ka(e,t,t.pendingProps.children,r),t.child;case 12:return ka(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Vr($0,n._currentValue),n._currentValue=o,i!==null)if(Ei(i.value,o)){if(i.children===a.children&&!Da.current){t=_o(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=vo(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),_y(i.return,r,t),s.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ae(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),_y(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ka(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ql(t,r),a=pi(a),n=n(a),t.flags|=1,ka(e,t,n,r),t.child;case 14:return n=t.type,a=ki(n,t.pendingProps),a=ki(n.type,a),I2(e,t,n,a,r);case 15:return oj(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ki(n,a),p0(e,t),t.tag=1,Ia(n)?(e=!0,A0(t)):e=!1,Ql(t,r),nj(t,n,a),Cy(t,n,a,r),My(null,t,n,!0,e,r);case 19:return fj(e,t,r);case 22:return sj(e,t,r)}throw Error(Ae(156,t.tag))};function Cj(e,t){return e4(e,t)}function rA(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(e,t,r,n){return new rA(e,t,r,n)}function g1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nA(e){if(typeof e=="function")return g1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$x)return 11;if(e===Rx)return 14}return 2}function os(e,t){var r=e.alternate;return r===null?(r=ci(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function y0(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")g1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $l:return Ks(r.children,a,i,t);case Ex:o=8,a|=8;break;case Zm:return e=ci(12,r,t,a|2),e.elementType=Zm,e.lanes=i,e;case Qm:return e=ci(13,r,t,a),e.elementType=Qm,e.lanes=i,e;case Jm:return e=ci(19,r,t,a),e.elementType=Jm,e.lanes=i,e;case I3:return fp(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R3:o=10;break e;case D3:o=9;break e;case $x:o=11;break e;case Rx:o=14;break e;case Io:o=16,n=null;break e}throw Error(Ae(130,e==null?e:typeof e,""))}return t=ci(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Ks(e,t,r,n){return e=ci(7,e,n,t),e.lanes=r,e}function fp(e,t,r,n){return e=ci(22,e,n,t),e.elementType=I3,e.lanes=r,e.stateNode={isHidden:!1},e}function nm(e,t,r){return e=ci(6,e,null,t),e.lanes=r,e}function am(e,t,r){return t=ci(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aA(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lg(0),this.expirationTimes=Lg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lg(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function m1(e,t,r,n,a,i,o,s,c){return e=new aA(e,t,r,s,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ci(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jx(i),e}function iA(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:El,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Nj(e){if(!e)return ds;e=e._reactInternals;e:{if(gl(e)!==e||e.tag!==1)throw Error(Ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ia(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ae(171))}if(e.tag===1){var r=e.type;if(Ia(r))return N4(e,r,t)}return t}function Oj(e,t,r,n,a,i,o,s,c){return e=m1(r,n,!0,e,a,i,o,s,c),e.context=Nj(null),r=e.current,n=Pa(),a=is(r),i=vo(n,a),i.callback=t??null,ns(r,i,a),e.current.lanes=a,Jf(e,a,n),La(e,n),e}function dp(e,t,r,n){var a=t.current,i=Pa(),o=is(a);return r=Nj(r),t.context===null?t.context=r:t.pendingContext=r,t=vo(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ns(a,t,o),e!==null&&(Ti(e,a,o,i),f0(e,a,o)),o}function W0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function q2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function y1(e,t){q2(e,t),(e=e.alternate)&&q2(e,t)}function oA(){return null}var Mj=typeof reportError=="function"?reportError:function(e){console.error(e)};function v1(e){this._internalRoot=e}hp.prototype.render=v1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ae(409));dp(e,t,null,null)};hp.prototype.unmount=v1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rl(function(){dp(null,e,null,null)}),t[So]=null}};function hp(e){this._internalRoot=e}hp.prototype.unstable_scheduleHydration=function(e){if(e){var t=s4();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Fo.length&&t!==0&&t<Fo[r].priority;r++);Fo.splice(r,0,e),r===0&&c4(e)}};function x1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Y2(){}function sA(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=W0(o);i.call(u)}}var o=Oj(t,n,e,0,null,!1,!1,"",Y2);return e._reactRootContainer=o,e[So]=o.current,af(e.nodeType===8?e.parentNode:e),rl(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=W0(c);s.call(u)}}var c=m1(e,0,!1,null,null,!1,!1,"",Y2);return e._reactRootContainer=c,e[So]=c.current,af(e.nodeType===8?e.parentNode:e),rl(function(){dp(t,c,r,n)}),c}function gp(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var c=W0(o);s.call(c)}}dp(t,o,e,a)}else o=sA(r,t,e,a,n);return W0(o)}i4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Mu(t.pendingLanes);r!==0&&(Lx(t,r|1),La(t,Mn()),!(dr&6)&&(uc=Mn()+500,gs()))}break;case 13:rl(function(){var n=jo(e,1);if(n!==null){var a=Pa();Ti(n,e,1,a)}}),y1(e,1)}};Bx=function(e){if(e.tag===13){var t=jo(e,134217728);if(t!==null){var r=Pa();Ti(t,e,134217728,r)}y1(e,134217728)}};o4=function(e){if(e.tag===13){var t=is(e),r=jo(e,t);if(r!==null){var n=Pa();Ti(r,e,t,n)}y1(e,t)}};s4=function(){return Cr};l4=function(e,t){var r=Cr;try{return Cr=e,t()}finally{Cr=r}};cy=function(e,t,r){switch(t){case"input":if(ry(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ip(n);if(!a)throw Error(Ae(90));B3(n),ry(n,a)}}}break;case"textarea":G3(e,r);break;case"select":t=r.value,t!=null&&Kl(e,!!r.multiple,t,!1)}};K3=d1;q3=rl;var lA={usingClientEntryPoint:!1,Events:[td,Ll,ip,H3,X3,d1]},gu={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cA={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Q3(e),e===null?null:e.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance||oA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{tp=Fd.inject(cA),Xi=Fd}catch{}}Ya.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA;Ya.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x1(t))throw Error(Ae(200));return iA(e,t,null,r)};Ya.createRoot=function(e,t){if(!x1(e))throw Error(Ae(299));var r=!1,n="",a=Mj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=m1(e,1,!1,null,null,r,!1,n,a),e[So]=t.current,af(e.nodeType===8?e.parentNode:e),new v1(t)};Ya.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ae(188)):(e=Object.keys(e).join(","),Error(Ae(268,e)));return e=Q3(t),e=e===null?null:e.stateNode,e};Ya.flushSync=function(e){return rl(e)};Ya.hydrate=function(e,t,r){if(!pp(t))throw Error(Ae(200));return gp(null,e,t,!0,r)};Ya.hydrateRoot=function(e,t,r){if(!x1(e))throw Error(Ae(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Mj;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Oj(t,null,e,1,r??null,a,!1,i,o),e[So]=t.current,af(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new hp(t)};Ya.render=function(e,t,r){if(!pp(t))throw Error(Ae(200));return gp(null,e,t,!1,r)};Ya.unmountComponentAtNode=function(e){if(!pp(e))throw Error(Ae(40));return e._reactRootContainer?(rl(function(){gp(null,null,e,!1,function(){e._reactRootContainer=null,e[So]=null})}),!0):!1};Ya.unstable_batchedUpdates=d1;Ya.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!pp(r))throw Error(Ae(200));if(e==null||e._reactInternals===void 0)throw Error(Ae(38));return gp(e,t,r,!1,n)};Ya.version="18.3.1-next-f1338f8080-20240426";function Aj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Aj)}catch(e){console.error(e)}}Aj(),A3.exports=Ya;var uA=A3.exports,Z2=uA;qm.createRoot=Z2.createRoot,qm.hydrateRoot=Z2.hydrateRoot;const ss=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[l.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[l.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[l.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),l.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,fA=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:c,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:p,onOpenAbout:m,onShowExif:x,bridgeStatus:b,onBridgeClick:S,isDrLabOpen:v,onToggleDrLab:y,isColorLabOpen:w,onToggleColorLab:P,isFftLabOpen:j,onToggleFftLab:k,isSfrLabOpen:O,onToggleSfrLab:A,onGenerateTestPic:R,onPTCFilesSelected:E,onDownloadDng:T,isThreePlane:B,onOpenDatabase:G,isSidebarOpen:V,onToggleSidebar:z,onOpenSaveZ8:D})=>{const L=C.useRef(null),F=C.useRef(null),[H,W]=C.useState(!1),[J,Y]=C.useState(!1),[ne,te]=C.useState(!1),[fe,se]=C.useState("direct"),ye=C.useRef(null),ie=C.useRef(null);C.useEffect(()=>{const je=Se=>{ye.current&&!ye.current.contains(Se.target)&&Y(!1),ie.current&&!ie.current.contains(Se.target)&&te(!1)};return document.addEventListener("mousedown",je),()=>document.removeEventListener("mousedown",je)},[]);const X=je=>{var Se,me;Y(!1),je==="direct"?(se("direct"),(Se=L.current)==null||Se.click()):!b.isConnected||!b.hasDngConverter?W(!0):(se("convert"),(me=L.current)==null||me.click())},le=je=>{var me;const Se=(me=je.target.files)==null?void 0:me[0];Se&&e(Se,fe),je.target.value=""},he=je=>{je.target.files&&je.target.files.length>0&&E(je.target.files),je.target.value=""},oe=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return l.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[l.jsx(ss,{isOpen:H,onClose:()=>W(!1),onConfirm:()=>W(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[l.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),l.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),B&&l.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:b.isConnected?void 0:S,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${b.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:b.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[l.jsx("span",{className:`w-2 h-2 ${b.isConnected?"bg-emerald-600":"bg-pink-600"}`}),b.isConnected?`JiangBridge Ready ${b.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),v&&l.jsxs("button",{onClick:y,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),w&&l.jsxs("button",{onClick:P,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),j&&l.jsxs("button",{onClick:k,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),O&&l.jsxs("button",{onClick:A,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&l.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[l.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),l.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),l.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),oe&&l.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[p&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:je=>s(parseFloat(je.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:je=>{const Se=parseFloat(je.target.value);isNaN(Se)||s(Se)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),l.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:je=>d(parseFloat(je.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:je=>{const Se=parseFloat(je.target.value);isNaN(Se)||d(Se)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),l.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:c*100,onChange:je=>u(parseInt(je.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(c*100),onChange:je=>{const Se=parseInt(je.target.value);isNaN(Se)||u(Math.min(100,Math.max(1,Se))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),l.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),l.jsxs("button",{onClick:T,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[l.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),l.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),l.jsx("input",{type:"file",ref:L,onChange:le,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("input",{type:"file",ref:F,onChange:he,className:"hidden",multiple:!0,accept:".csv"}),l.jsxs("div",{className:"relative inline-block text-left",ref:ie,children:[l.jsxs("button",{onClick:()=>te(!ne),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",l.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${ne?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ne&&l.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>{te(!1),D==null||D()},className:"w-full text-left px-4 py-3 text-sm font-bold text-red-600 dark:text-red-400 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsx("span",{children:" Z8 (Save Z8)"})]}),l.jsxs("button",{onClick:()=>{te(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("span",{children:"Generate Pattern DNG"})]}),l.jsxs("button",{onClick:()=>{te(!1),v||y(),j&&k(),w&&P&&P(),O&&A&&A()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),l.jsxs("span",{children:["DR Lab ",v?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{te(!1),P&&!w&&P(),v&&y(),j&&k(),O&&A&&A()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${w?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),l.jsxs("span",{children:["Color Lab ",w?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{te(!1),A&&!O&&A(),v&&y(),j&&k(),w&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${O?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),l.jsxs("span",{children:["SFR Lab ",O?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{te(!1),j||k(),v&&y(),w&&P&&P(),O&&A&&A()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${j?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),l.jsxs("span",{children:["Stack Lab ",j?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{var je;te(!1),(je=F.current)==null||je.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),l.jsx("span",{children:"Generate PTC & TargetSNR"})]}),l.jsxs("button",{onClick:()=>{te(!1),window.open("https://y-g-jiang.github.io/CP.html","_blank")},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 text-teal-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),l.jsx("span",{children:"Generate MTF Contour"})]})]})})]}),l.jsxs("div",{className:"relative inline-block text-left",ref:ye,children:[l.jsxs("button",{onClick:()=>Y(!J),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",l.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${J?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),J&&l.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>X("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),l.jsx("span",{children:"Load Image (Direct)"})]}),l.jsxs("button",{onClick:()=>X("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),l.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&x&&l.jsxs("button",{onClick:x,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),l.jsx("button",{onClick:m,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),l.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),l.jsxs("button",{onClick:z,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${V?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:V?"Hide Control Panel":"Show Control Panel",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:V?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),l.jsx("span",{className:"hidden sm:inline",children:V?"Hide Panel":"Show Panel"})]})]})]})},dA=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:c="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:p=[],colorLabPoints:m=[],colorLabRects:x=[],sfrRects:b=[]})=>{var se;const S=C.useRef(null),v=C.useRef(document.createElement("canvas")),[y,w]=C.useState(!1),[P,j]=C.useState({x:0,y:0}),k=C.useRef(null),O=C.useRef(null),A=C.useRef(null),[R,E]=C.useState(!1),[T,B]=C.useState(null),[G,V]=C.useState(null);C.useEffect(()=>{o!==void 0&&V(o)},[o]);const z=C.useCallback(()=>{const ye=S.current,ie=ye==null?void 0:ye.getContext("2d");return{canvas:ye,ctx:ie}},[]);C.useEffect(()=>{const ye=v.current,ie=ye.getContext("2d");if(!e||!ie)return;let X=0,le=0;e instanceof ImageData?(X=e.width,le=e.height):e instanceof HTMLImageElement&&(X=e.naturalWidth,le=e.naturalHeight),!(X===0||le===0)&&((ye.width!==X||ye.height!==le)&&(ye.width=X,ye.height=le),e instanceof ImageData?ie.putImageData(e,0,0):(ie.clearRect(0,0,X,le),ie.drawImage(e,0,0)))},[e]);const D=C.useCallback(()=>{const{canvas:ye,ctx:ie}=z();if(!(!ye||!ie||!e)){if(ie.setTransform(1,0,0,1,0,0),ie.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",ie.fillRect(0,0,ye.width,ye.height),ie.setTransform(t,0,0,t,r.x,r.y),v.current.width>0&&(ie.imageSmoothingEnabled=!1,ie.drawImage(v.current,0,0)),G){ie.strokeStyle="#06b6d4",ie.lineWidth=1/t,ie.fillStyle="rgba(6, 182, 212, 0.2)",ie.beginPath(),ie.rect(G.x,G.y,G.w,G.h),ie.fill(),ie.stroke(),ie.save(),ie.fillStyle="#fff";const X=Math.max(10,14/t);ie.font=`${X}px monospace`,ie.shadowColor="rgba(0,0,0,0.8)",ie.shadowBlur=4,ie.shadowOffsetX=1,ie.shadowOffsetY=1,ie.fillText(`${Math.round(G.w)}x${Math.round(G.h)}`,G.x,G.y-5/t),ie.restore()}if(p&&p.length>0){ie.save(),ie.strokeStyle="#f59e0b",ie.lineWidth=1/t,ie.globalAlpha=.8,ie.beginPath(),p.forEach(he=>{ie.rect(he.x,he.y,he.w,he.h)}),ie.stroke();const X=p[0];ie.fillStyle="#f59e0b";const le=Math.max(10,12/t);ie.font=`${le}px monospace`,ie.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t),ie.restore()}if(d&&d.length>0){ie.save();const X=6/t,le=Math.max(12,16/t);ie.font=`bold ${le}px sans-serif`,ie.textAlign="center",ie.textBaseline="middle",d.forEach((he,oe)=>{ie.beginPath(),ie.arc(he.x,he.y,X,0,2*Math.PI),ie.fillStyle="white",ie.fill(),ie.strokeStyle="#4338ca",ie.lineWidth=2/t,ie.stroke(),ie.fillStyle="#4338ca",ie.fillText((oe+1).toString(),he.x,he.y-12/t)}),ie.restore()}if(m&&m.length>0){ie.save();const X=5/t,le=Math.max(10,14/t);ie.font=`bold ${le}px sans-serif`,ie.textAlign="center",ie.textBaseline="middle",m.forEach((he,oe)=>{ie.fillStyle="yellow",ie.fillRect(he.x-X,he.y-X,X*2,X*2),ie.strokeStyle="black",ie.lineWidth=1/t,ie.strokeRect(he.x-X,he.y-X,X*2,X*2),ie.fillStyle="yellow",ie.shadowColor="black",ie.shadowBlur=2,ie.fillText((oe+1).toString(),he.x,he.y-10/t)}),ie.restore()}if(x&&x.length>0){if(ie.save(),ie.strokeStyle="yellow",ie.lineWidth=1/t,ie.globalAlpha=.9,ie.beginPath(),x.forEach(X=>{ie.rect(X.x,X.y,X.w,X.h)}),ie.stroke(),x[0]){const X=x[0];ie.fillStyle="yellow",ie.shadowColor="black",ie.shadowBlur=3;const le=Math.max(10,12/t);ie.font=`${le}px monospace`,ie.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t)}ie.restore()}b&&b.length>0&&(ie.save(),ie.strokeStyle="#ef4444",ie.lineWidth=2/t,ie.globalAlpha=.9,ie.beginPath(),b.forEach(X=>{ie.rect(X.x,X.y,X.w,X.h)}),ie.stroke(),ie.restore())}},[z,e,t,r,s,G,p,d,m,x,b]);C.useEffect(()=>{const{canvas:ye}=z();if(!ye)return;const ie=new ResizeObserver(()=>{ye.width=ye.clientWidth,ye.height=ye.clientHeight,D()});return ie.observe(ye),()=>ie.disconnect()},[z,D]),C.useEffect(()=>{D()},[D,e,r,t,s,G,p,d,m,x,b]);const L=ye=>{const{canvas:ie}=z();if(!ie)return{x:0,y:0};const X=ie.getBoundingClientRect();return{x:ye.clientX-X.left,y:ye.clientY-X.top}},F=(ye,ie)=>({x:(ye-r.x)/t,y:(ie-r.y)/t}),H=ye=>{ye.preventDefault();const ie=L(ye);if(u&&f){const X=F(ie.x,ie.y);f(X);return}if(c==="select"||ye.shiftKey){E(!0);const X=F(ie.x,ie.y),le={x:Math.floor(X.x),y:Math.floor(X.y)};B(le),V(null),i&&i(null)}else w(!0),j({x:ie.x-r.x,y:ie.y-r.y})},W=ye=>{const ie=L(ye);if(R&&T){const X=F(ie.x,ie.y),le=Math.floor(X.x),he=Math.floor(X.y),oe=Math.min(T.x,le),je=Math.min(T.y,he),Se=Math.max(T.x,le),me=Math.max(T.y,he),ge=Se-oe+1,Ce=me-je+1;V({x:oe,y:je,w:ge,h:Ce})}else y&&n({x:ie.x-P.x,y:ie.y-P.y})},J=()=>{R&&(E(!1),G&&i&&G.w>0&&G.h>0&&i(G)),w(!1)},Y=ye=>{var ie;if(ye.touches.length===1){const X=ye.touches[0],le=(ie=S.current)==null?void 0:ie.getBoundingClientRect();if(!le)return;const he=X.clientX-le.left,oe=X.clientY-le.top;if(u&&f){const je=F(he,oe);f(je);return}if(c==="select"){const je=F(he,oe),Se={x:Math.floor(je.x),y:Math.floor(je.y)};B(Se),E(!0),V(null),i&&i(null)}else A.current={x:he,y:oe},j({x:he-r.x,y:oe-r.y}),w(!0)}else if(ye.touches.length===2){const X=Math.hypot(ye.touches[0].clientX-ye.touches[1].clientX,ye.touches[0].clientY-ye.touches[1].clientY);k.current=X,O.current=t,w(!1),E(!1)}},ne=ye=>{var ie;if(ye.touches.length===1){const X=ye.touches[0],le=(ie=S.current)==null?void 0:ie.getBoundingClientRect();if(!le)return;const he=X.clientX-le.left,oe=X.clientY-le.top;if(u)return;if(R&&T){const je=F(he,oe),Se=Math.floor(je.x),me=Math.floor(je.y),ge=Math.min(T.x,Se),Ce=Math.min(T.y,me),De=Math.max(T.x,Se),ze=Math.max(T.y,me),Be=De-ge+1,et=ze-Ce+1;V({x:ge,y:Ce,w:Be,h:et})}else y&&n({x:he-P.x,y:oe-P.y})}else if(ye.touches.length===2&&k.current&&O.current&&a){const le=Math.hypot(ye.touches[0].clientX-ye.touches[1].clientX,ye.touches[0].clientY-ye.touches[1].clientY)/k.current;a(O.current*le)}},te=()=>{R&&(E(!1),G&&i&&G.w>0&&G.h>0&&i(G)),w(!1),k.current=null,O.current=null,A.current=null},fe=u||c==="select"||(se=window.event)!=null&&se.shiftKey?"cursor-crosshair":"cursor-grab active:cursor-grabbing";return l.jsx("canvas",{ref:S,className:`w-full h-full block touch-none ${fe}`,onMouseDown:H,onMouseMove:W,onMouseUp:J,onMouseLeave:J,onTouchStart:Y,onTouchMove:ne,onTouchEnd:te,onTouchCancel:te,tabIndex:0})},fc={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},hA="modulepreload",pA=function(e){return"/"+e},Q2={},Tj=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=pA(c),c in Q2)return;Q2[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":hA,u||(d.as="script"),d.crossOrigin="",d.href=c,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function dc(e){const[[t,r,n],[a,i,o],[s,c,u]]=e,f=t*(i*u-o*c)-r*(a*u-o*s)+n*(a*c-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*c)*d,(n*c-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*c-i*s)*d,(r*s-t*c)*d,(t*i-r*a)*d]]}function pf(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class nl{constructor(t){wr(this,"size");wr(this,"isPowerOfTwo");wr(this,"_real");wr(this,"_imag");wr(this,"_scratch",null);wr(this,"_rev",null);wr(this,"_m",0);wr(this,"_internalFFT",null);wr(this,"_chirpReal",null);wr(this,"_chirpImag",null);wr(this,"_bReal",null);wr(this,"_bImag",null);wr(this,"_hanning",null);wr(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new nl(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const c=a[s];if(s<c){const u=i[s],f=o[s];i[s]=i[c],o[s]=o[c],i[c]=u,o[c]=f}}else for(let s=0;s<n;s++){const c=a[s];i[s]=t[c],o[s]=r?r[c]:0}for(let s=2;s<=n;s*=2){const c=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let p=0;p<n;p+=s){let m=1,x=0;for(let b=0;b<c;b++){const S=p+b,v=p+b+c,y=m*i[v]-x*o[v],w=m*o[v]+x*i[v],P=i[S],j=o[S];i[S]=P+y,o[S]=j+w,i[v]=P-y,o[v]=j-w;const k=m*f-x*d,O=m*d+x*f;m=k,x=O}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const p=t[d],m=r?r[d]:0,x=this._chirpReal[d],b=this._chirpImag[d];o[d]=p*x-m*b,s[d]=p*b+m*x}i.transformRadix2(o,s);for(let d=0;d<a;d++){const p=i._real[d],m=i._imag[d],x=this._bReal[d],b=this._bImag[d];i._real[d]=p*x-m*b,i._imag[d]=p*b+m*x}const c=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(c,u);const f=1/a;for(let d=0;d<n;d++){const p=i._real[d]*f,m=-i._imag[d]*f,x=this._chirpReal[d],b=this._chirpImag[d];this._real[d]=p*x-m*b,this._imag[d]=p*b+m*x}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const c=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<c;f++){const d=this._real[f],p=this._imag[f];r[f]+=(d*d+p*p)*u}}}function gA(e,t,r,n=!1){const a=new nl(t),i=new nl(r),o=t*r,s=new Float32Array(o),c=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let b=0;b<t;b++)u[b]=.5*(1-Math.cos(2*Math.PI*b/(t-1)));f=new Float32Array(r);for(let b=0;b<r;b++)f[b]=.5*(1-Math.cos(2*Math.PI*b/(r-1)))}for(let b=0;b<r;b++){const S=b*t,v=a._real;let y=0;for(let P=0;P<t;P++)y+=e[S+P];const w=y/t;if(u)for(let P=0;P<t;P++)v[P]=(e[S+P]-w)*u[P];else for(let P=0;P<t;P++)v[P]=e[S+P]-w;a.transform(v);for(let P=0;P<t;P++)s[S+P]=a._real[P],c[S+P]=a._imag[P]}for(let b=0;b<t;b++){const S=i._real,v=i._imag;for(let y=0;y<r;y++){const w=y*t+b;let P=s[w],j=c[w];f&&(P*=f[y],j*=f[y]),S[y]=P,v[y]=j}i.transform(S,v);for(let y=0;y<r;y++){const w=y*t+b;s[w]=i._real[y],c[w]=i._imag[y]}}const d=new Float32Array(o);let p=1,m=t,x=r;if(n&&u&&f){m=0;for(let b=0;b<t;b++)m+=u[b]*u[b];x=0;for(let b=0;b<r;b++)x+=f[b]*f[b]}p=1/(m*x);for(let b=0;b<o;b++)d[b]=(s[b]*s[b]+c[b]*c[b])*p;return d}function mA(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const c=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+c;n[d]=e[f]}return n}function v0(e,t,r,n=[0,0,0,0],a=65535,i="RGGB",o=null){const c=e*t*2,u=8,f=u+c,d="Fake",p="StretchedNoiseCam",m="StretchedNoiseCam",x=z=>{const D=new Uint8Array(z.length+1);for(let L=0;L<z.length;L++)D[L]=z.charCodeAt(L);return D[z.length]=0,D},b=x(d),S=x(p),v=x(m),y=z=>{const D=[0,0,0,0],L={R:0,G:1,B:2},F=z.toUpperCase();for(let H=0;H<4;H++)D[H]=L[F[H]]??1;return D},w=z=>{const D=[];return z.forEach(L=>{D.push(Math.round(L*1e4)),D.push(1e4)}),D},P=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:b.length,value:b},{id:272,type:2,count:S.length,value:S},{id:273,type:4,count:1,value:u},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:c},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:y(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(z=>Math.round(z))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:v.length,value:v}];o&&o.length===9&&(P.push({id:50721,type:10,count:9,value:w(o)}),P.push({id:50778,type:3,count:1,value:21})),P.sort((z,D)=>z.id-D.id);const j=2+P.length*12+4;let k=0;const O=P.map(z=>{let D=1;z.type===3&&(D=2),z.type===4&&(D=4),(z.type===5||z.type===10)&&(D=8);const L=z.count*D,F=L<=4;let H=0;return F||(H=k,k+=L,k%2!==0&&k++),{...z,fits:F,totalBytes:L,extraOffset:H,typeSize:D}}),A=f+j,R=A+k,E=new ArrayBuffer(R),T=new DataView(E),B=new Uint8Array(E);T.setUint16(0,18761,!0),T.setUint16(2,42,!0),T.setUint32(4,f,!0);const G=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);B.set(G,u);let V=f;return T.setUint16(V,P.length,!0),V+=2,O.forEach(z=>{if(T.setUint16(V,z.id,!0),T.setUint16(V+2,z.type,!0),T.setUint32(V+4,z.count,!0),z.fits){const D=V+8;Array.isArray(z.value)?z.value.forEach((L,F)=>{z.type===1&&T.setUint8(D+F,L),z.type===3&&T.setUint16(D+F*2,L,!0)}):(z.type===3&&T.setUint16(D,z.value,!0),z.type===4&&T.setUint32(D,z.value,!0))}else{const D=A+z.extraOffset;T.setUint32(V+8,D,!0),z.value instanceof Uint8Array?B.set(z.value,D):Array.isArray(z.value)&&z.value.forEach((L,F)=>{z.type===1&&T.setUint8(D+F,L),z.type===2&&T.setUint8(D+F,L),z.type===3&&T.setUint16(D+F*2,L,!0),z.type===4&&T.setUint32(D+F*4,L,!0),(z.type===5||z.type===10)&&(z.type===10?T.setInt32(D+F*4,L,!0):T.setUint32(D+F*4,L,!0))})}V+=12}),T.setUint32(V,0,!0),E}var mp=typeof self<"u"?self:global;const gf=typeof navigator<"u",yA=gf&&typeof HTMLImageElement>"u",V0=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),yp=mp.Buffer,Gd=mp.BigInt,vp=!!yp,vA=e=>e;function H0(e,t=vA){if(V0)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let b1=mp.fetch;const xA=e=>b1=e;if(!mp.fetch){const e=H0("http",n=>n),t=H0("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:c,pathname:u,protocol:f,search:d}=new URL(n);const p={method:"GET",hostname:c,path:encodeURI(u)+d,headers:a};s!==""&&(p.port=Number(s));const m=(f==="https:"?await t:await e).request(p,x=>{if(x.statusCode===301||x.statusCode===302){let b=new URL(x.headers.location,n).toString();return r(b,{headers:a}).then(i).catch(o)}i({status:x.statusCode,arrayBuffer:()=>new Promise(b=>{let S=[];x.on("data",v=>S.push(v)),x.on("end",()=>b(Buffer.concat(S)))})})});m.on("error",o),m.end()});xA(r)}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const X0=e=>Ej(e)?void 0:e,bA=e=>e!==void 0;function Ej(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(bA).length===0)}function Ln(e){let t=new Error(e);throw delete t.stack,t}function Ls(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function zy(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Uy=e=>String.fromCharCode.apply(null,e),J2=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function $j(e){return J2?J2.decode(e):vp?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Uy(e)))}class Ea{static from(t,r){return t instanceof this&&t.le===r?t:new Ea(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Ea){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&Ln("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Ln("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=Ea){return t instanceof DataView||t instanceof Ea?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Ln("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new Ea(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return $j(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return Uy(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return Uy(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function Wy(e,t){Ln(`${e} '${t}' was not loaded, try using full build of exifr.`)}let w1=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||Wy(this.kind,t),r&&(t in r||function(n,a){Ln(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||Wy(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var Ji=new w1("file parser"),Dn=new w1("segment parser"),ro=new w1("file reader");function wA(e,t){return typeof e=="string"?ew(e,t):gf&&!yA&&e instanceof HTMLImageElement?ew(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Ea(e):gf&&e instanceof Blob?Vy(e,t,"blob",il):void Ln("Invalid input argument")}function ew(e,t){return(r=e).startsWith("data:")||r.length>1e4?Hy(e,t,"base64"):V0&&e.includes("://")?Vy(e,t,"url",al):V0?Hy(e,t,"fs"):gf?Vy(e,t,"url",al):void Ln("Invalid input argument");var r}async function Vy(e,t,r,n){return ro.has(r)?Hy(e,t,r):n?async function(a,i){let o=await i(a);return new Ea(o)}(e,n):void Ln(`Parser ${r} is not loaded`)}async function Hy(e,t,r){let n=new(ro.get(r))(e,t);return await n.read(),n}const al=e=>b1(e).then(t=>t.arrayBuffer()),il=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class kA extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Tn(e,t,r){let n=new kA;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function ol(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Jn=new Map,Ri=new Map,ls=new Map,Vo=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Uc=["jfif","xmp","icc","iptc","ihdr"],sl=["tiff",...Uc],kn=["ifd0","ifd1","exif","gps","interop"],Ho=[...sl,...kn],Xo=["makerNote","userComment"],Wc=["translateKeys","translateValues","reviveValues","multiSegment"],Ko=[...Wc,"sanitize","mergeOutput","silentErrors"];class Rj{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class mu extends Rj{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),xt(this,"enabled",!1),xt(this,"skip",new Set),xt(this,"pick",new Set),xt(this,"deps",new Set),xt(this,"translateKeys",!1),xt(this,"translateValues",!1),xt(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=kn.includes(t),this.canBeFiltered&&(this.dict=Jn.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Ln(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of Wc)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,K0(this.pick,this.deps)):this.enabled&&this.pick.size>0&&K0(this.pick,this.deps)}}var ba={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},tw=new Map;let ml=class extends Rj{static useCached(t){let r=tw.get(t);return r!==void 0||(r=new this(t),tw.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Ln(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=gf?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of Vo)this[t]=ba[t];for(t of Ko)this[t]=ba[t];for(t of Xo)this[t]=ba[t];for(t of Ho)this[t]=new mu(t,ba[t],void 0,this)}setupFromTrue(){let t;for(t of Vo)this[t]=ba[t];for(t of Ko)this[t]=ba[t];for(t of Xo)this[t]=!0;for(t of Ho)this[t]=new mu(t,!0,void 0,this)}setupFromArray(t){let r;for(r of Vo)this[r]=ba[r];for(r of Ko)this[r]=ba[r];for(r of Xo)this[r]=ba[r];for(r of Ho)this[r]=new mu(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,kn)}setupFromObject(t){let r;for(r of(kn.ifd0=kn.ifd0||kn.image,kn.ifd1=kn.ifd1||kn.thumbnail,Object.assign(this,t),Vo))this[r]=im(t[r],ba[r]);for(r of Ko)this[r]=im(t[r],ba[r]);for(r of Xo)this[r]=im(t[r],ba[r]);for(r of sl)this[r]=new mu(r,ba[r],t[r],this);for(r of kn)this[r]=new mu(r,ba[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,kn,Ho),t.tiff===!0?this.batchEnableWithBool(kn,!0):t.tiff===!1?this.batchEnableWithUserValue(kn,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,kn):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,kn)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=rw(t,n);for(let[o,s]of i)K0(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=rw(r,n);for(let[o,s]of i)K0(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=kn.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of kn)this[i].finalizeFilters()}get onlyTiff(){return!Uc.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of sl)this[t].enabled&&!Dn.has(t)&&Wy("segment parser",t)}};function rw(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Jn.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function im(e,t){return e!==void 0?e:t!==void 0?t:void 0}function K0(e,t){for(let r of t)e.add(r)}xt(ml,"default",ba);class ms{constructor(t){xt(this,"parsers",{}),xt(this,"output",{}),xt(this,"errors",[]),xt(this,"pushToErrors",r=>this.errors.push(r)),this.options=ml.useCached(t)}async read(t){this.file=await wA(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of Ji)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),Ln("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),X0(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=Dn.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function xp(e,t){let r=new ms(t);return await r.read(e),r.parse()}var SA=Object.freeze({__proto__:null,parse:xp,Exifr:ms,fileParsers:Ji,segmentParsers:Dn,fileReaders:ro,tagKeys:Jn,tagValues:Ri,tagRevivers:ls,createDictionary:Tn,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Vo,otherSegments:Uc,segments:sl,tiffBlocks:kn,segmentsAndBlocks:Ho,tiffExtractables:Xo,inheritables:Wc,allFormatters:Ko,Options:ml});class bp{constructor(t,r,n){xt(this,"errors",[]),xt(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){Ln(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Ln("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(Dn.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}let Ni=class{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new ml({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof Ea?t:new Ea(t)}constructor(t,r={},n){xt(this,"errors",[]),xt(this,"raw",new Map),xt(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=ls.get(r),a=Ri.get(r),i=Jn.get(r),o=this.options[r],s=o.reviveValues&&!!n,c=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,p]of t)s&&n.has(d)?p=n.get(d)(p):c&&a.has(d)&&(p=this.translateValue(p,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=p;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}};xt(Ni,"headerLength",4),xt(Ni,"type",void 0),xt(Ni,"multiSegment",!1),xt(Ni,"canHandle",()=>!1);function jA(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function _A(e){return e>=224&&e<=239}function PA(e,t,r){for(let[n,a]of Dn)if(a.canHandle(e,t,r))return n}class nw extends bp{constructor(...t){super(...t),xt(this,"appSegments",[]),xt(this,"jpegSegments",[]),xt(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(Dn.keyList())):(t=t===void 0?Dn.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&Dn.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let c=Dn.get(s),u=this.options[s];return c.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:c}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>c&&!u?!await n.readNextChunk(t):!await n.readNextChunk(c),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,c,{file:u,findAll:f,wanted:d,remaining:p,options:m}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),_A(n)){if(a=u.getUint16(t+2),i=PA(u,t,a),i&&d.has(i)&&(o=Dn.get(i),s=o.findPosition(u,t),c=m[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&c.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||p.delete(i)):p.delete(i),p.size===0)))break;m.recordUnknownSegments&&(s=Ni.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(jA(n)){if(a=u.getUint16(t+2),n===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let c=0;c<r.length;c++)a=r[c],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=Dn.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}xt(nw,"type","jpeg"),Ji.set("jpeg",nw);const CA=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class NA extends Ni{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,c=this.chunk.getUint16(t);t+=2;for(let u=0;u<c;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=CA[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Ln(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Ln(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return Ls(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let c=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)c[f]=this.parseTagValue(i,t),t+=u;return c}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Ln(`Invalid tiff type ${t}`)}}}class om extends NA{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ln("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Ln(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,zy(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,zy(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",aw(...t.get(2),t.get(1))),t.set("longitude",aw(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of kn)if(t=this[r],!Ej(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function aw(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}xt(om,"type","tiff"),xt(om,"headerLength",10),Dn.set("tiff",om);var OA=Object.freeze({__proto__:null,default:SA,Exifr:ms,fileParsers:Ji,segmentParsers:Dn,fileReaders:ro,tagKeys:Jn,tagValues:Ri,tagRevivers:ls,createDictionary:Tn,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Vo,otherSegments:Uc,segments:sl,tiffBlocks:kn,segmentsAndBlocks:Ho,tiffExtractables:Xo,inheritables:Wc,allFormatters:Ko,Options:ml,parse:xp});const k1={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},S1=Object.assign({},k1,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Dj(e){let t=new ms(S1);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const j1=Object.assign({},k1,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Ij(e){let t=new ms(j1);await t.read(e);let r=await t.extractThumbnail();return r&&vp?yp.from(r):r}async function Lj(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const _1=Object.assign({},k1,{firstChunkSize:4e4,ifd0:[274]});async function P1(e){let t=new ms(_1);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const C1=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Bs=!0,Fs=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;Bs=Number(r)+.1*Number(n)<13.4,Fs=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Bs=Fs=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Bs=Fs=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Bs=Fs=Number(t)<77}}async function Bj(e){let t=await P1(e);return Object.assign({canvas:Bs,css:Fs},C1[t])}class MA extends Ea{constructor(...t){super(...t),xt(this,"ranges",new AA),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=vp?yp.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class AA{constructor(){xt(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>iw(t,o.offset,a)||iw(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function iw(e,t,r){return e<=t&&t<=r}class wp extends MA{constructor(t,r){super(0),xt(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ro.set("blob",class extends wp{async readWhole(){this.chunked=!1;let e=await il(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await il(n);return this.set(a,e,!0)}});var TA=Object.freeze({__proto__:null,default:OA,Exifr:ms,fileParsers:Ji,segmentParsers:Dn,fileReaders:ro,tagKeys:Jn,tagValues:Ri,tagRevivers:ls,createDictionary:Tn,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Vo,otherSegments:Uc,segments:sl,tiffBlocks:kn,segmentsAndBlocks:Ho,tiffExtractables:Xo,inheritables:Wc,allFormatters:Ko,Options:ml,parse:xp,gpsOnlyOptions:S1,gps:Dj,thumbnailOnlyOptions:j1,thumbnail:Ij,thumbnailUrl:Lj,orientationOnlyOptions:_1,orientation:P1,rotations:C1,get rotateCanvas(){return Bs},get rotateCss(){return Fs},rotation:Bj});ro.set("url",class extends wp{async readWhole(){this.chunked=!1;let e=await al(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await b1(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});Ea.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof Gd!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Gd(t)<<Gd(32)|Gd(r)):void Ln("Trying to read 64b value but JS can only handle 53b numbers.")};class EA extends bp{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class Fj extends EA{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let c=4+this.file.getUint32(o);o+=c,s-=c,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),c=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,p=this.file.getUintBytes(n,d);for(n+=d;p--;){let m=this.file.getUintBytes(n,c);n+=c+u+2+o;let x=this.file.getUint16(n);if(n+=2,m===r)return x>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=x*f}}}class Gj extends Fj{}xt(Gj,"type","heic");class ow extends Fj{}xt(ow,"type","avif"),Ji.set("heic",Gj),Ji.set("avif",ow),Tn(Jn,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Tn(Jn,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Tn(Jn,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Tn(Ri,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let zu=Tn(Ri,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const sw={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};zu.set(37392,sw),zu.set(41488,sw);const sm={0:"Normal",1:"Low",2:"High"};function lw(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function cw(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function lm(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function yu(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(uw(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(uw(e[r],e[r+1]));return Ls(String.fromCodePoint(...t))}function uw(e,t){return e<<8|t}zu.set(41992,sm),zu.set(41993,sm),zu.set(41994,sm),Tn(ls,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?$j(e):e}],[306,lm],[40091,yu],[40092,yu],[40093,yu],[40094,yu],[40095,yu]]),Tn(ls,"exif",[[40960,cw],[36864,cw],[36867,lm],[36868,lm],[40962,lw],[40963,lw]]),Tn(ls,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class cm extends Ni{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:Ea.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let c of Vj)o[c]=[],s[c]=0;return i.replace(IA,(c,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${c}#${d}`}return`${c}#${o[f].pop()}`})}(t);let r=ec.findAll(t,"rdf","Description");r.length===0&&r.push(new ec("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=DA(o.ns,a),zj(o,n);return function(i){let o;for(let s in i)o=i[s]=X0(i[s]),o===void 0&&delete i[s];return X0(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}xt(cm,"type","xmp"),xt(cm,"multiSegment",!0),Dn.set("xmp",cm);class q0{static findAll(t){return Uj(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(q0.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=Wj(a),new q0(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class ec{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Uj(t,a).map(ec.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new ec(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=q0.findAll(n),this.children=ec.findAll(a),this.value=this.children.length===0?Wj(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return RA(this.children.map($A));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)zj(r,t);return this.value!==void 0&&(t.value=this.value),X0(t)}}function zj(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var $A=e=>e.serialize(),RA=e=>e.length===1?e[0]:e,DA=(e,t)=>t[e]?t[e]:t[e]={};function Uj(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function Wj(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const Vj=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],IA=new RegExp(`(<|\\/)(${Vj.join("|")})`,"g");var Hj=Object.freeze({__proto__:null,default:TA,Exifr:ms,fileParsers:Ji,segmentParsers:Dn,fileReaders:ro,tagKeys:Jn,tagValues:Ri,tagRevivers:ls,createDictionary:Tn,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Vo,otherSegments:Uc,segments:sl,tiffBlocks:kn,segmentsAndBlocks:Ho,tiffExtractables:Xo,inheritables:Wc,allFormatters:Ko,Options:ml,parse:xp,gpsOnlyOptions:S1,gps:Dj,thumbnailOnlyOptions:j1,thumbnail:Ij,thumbnailUrl:Lj,orientationOnlyOptions:_1,orientation:P1,rotations:C1,get rotateCanvas(){return Bs},get rotateCss(){return Fs},rotation:Bj});let fw=H0("fs",e=>e.promises);ro.set("fs",class extends wp{async readWhole(){this.chunked=!1,this.fs=await fw;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await fw,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});ro.set("base64",class extends wp{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(vp){let c=yp.from(a,"base64").slice(n,n+s);return this.set(c,e,!0)}{let c=this.subarray(e,s,!0),u=atob(a),f=c.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return c}}});class dw extends bp{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(zy(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}xt(dw,"type","tiff"),Ji.set("tiff",dw);let LA=H0("zlib");const BA=["ihdr","iccp","text","itxt","exif"];class hw extends bp{constructor(...t){super(...t),xt(this,"catchError",r=>this.errors.push(r)),xt(this,"metaChunks",[]),xt(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,c={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};BA.includes(o)?this.metaChunks.push(c):this.unknownChunks.push(c),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),V0){let s=await LA,c=r.getUint8Array(i);c=s.inflateSync(c),this.injectSegment("icc",c)}}}xt(hw,"type","png"),Ji.set("png",hw),Tn(Jn,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),ol(Jn,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let pw=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];ol(Jn,"ifd0",pw),ol(Jn,"exif",pw),Tn(Ri,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class um extends Ni{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}xt(um,"type","jfif"),xt(um,"headerLength",9),Dn.set("jfif",um),Tn(Jn,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class gw extends Ni{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}xt(gw,"type","ihdr"),Dn.set("ihdr",gw),Tn(Jn,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Tn(Ri,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class x0 extends Ni{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),c=0;for(let u of a)s.set(u,c),c+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new Ea(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&Ln("ICC header is too short");for(let[r,n]of Object.entries(FA)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),c=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(c,4),r=this.chunk.getUint32(c+4),n=this.chunk.getUint32(c+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),c+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return Ls(this.chunk.getString(t+12,r))}parseText(t,r){return Ls(this.chunk.getString(t+8,r-8))}parseSig(t){return Ls(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let c=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,p=Ls(r.getUnicodeString(d,f));o.push({lang:c,country:u,text:p}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}xt(x0,"type","icc"),xt(x0,"multiSegment",!0),xt(x0,"headerLength",18);const FA={4:so,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:so,16:so,20:so,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:so,40:so,48:so,52:so,64:(e,t)=>e.getUint32(t),80:so};function so(e,t){return Ls(e.getString(t,4))}Dn.set("icc",x0),Tn(Jn,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const zd={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},mw={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Tn(Ri,"icc",[[4,zd],[12,mw],[40,Object.assign({},zd,mw)],[48,zd],[80,zd],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Ud extends Ni{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}xt(Ud,"type","iptc"),xt(Ud,"translateValues",!1),xt(Ud,"reviveValues",!1),Dn.set("iptc",Ud),Tn(Jn,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Tn(Ri,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let fm=null;async function yl(){if(!fm)try{const n=(await Tj(()=>Promise.resolve().then(()=>sne),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;fm=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await fm,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const N1=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],cs=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function Wd(e,t=0,r=0){const n=await yl(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,c=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((c-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let m=0;m<f/2;m++){const x=m*6+r;if(x+3>=c)break;const b=x*s,S=(x+3)*s,v=m*2,y=v*u,w=(v+1)*u;for(let P=0;P<u/2;P++){const j=P*6+t;if(j+1>=s)break;const k=P*2;d[y+k]=o[b+j+1],d[y+k+1]=o[b+j+0],d[w+k]=o[S+j+0],d[w+k+1]=o[S+j+1]}}return{dngBuffer:v0(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function GA(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,c=r*n,u=new Uint16Array(c);for(let p=0;p<n;p++)for(let m=0;m<r;m++){const x=(p*r+m)*4,b=p*r+m,S=p%2===0,v=m%2===0;let y=0;S&&v?y=s[x]:!S&&!v?y=s[x+2]:y=s[x+1],u[b]=y*64}const f=await new Promise(p=>a.toBlob(p,"image/png"));let d={description:"Standard image (non-RAW)"};try{const p=await Hj.parse(e);p&&(d={...d,...p})}catch(p){console.warn("EXIF parsing failed for standard image",p)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const zA=async e=>{const t=await yl(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const c=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const p=d*3,m=d*4;c.data[m]=u[p],c.data[m+1]=u[p+1],c.data[m+2]=u[p+2],c.data[m+3]=255}s.putImageData(c,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},Y0=async e=>{var n,a,i,o,s,c,u,f,d;const t=await yl(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const p=r.getRawImage();let m=new Uint16Array(p.data);const x=await r.metadata(!0);let b={...x};try{const k=await Hj.parse(e.buffer);k&&(b={...b,...k})}catch(k){console.warn("exifr parsing failed for RAW buffer",k)}const S=((n=x.idata)==null?void 0:n.filters)||0,v=((a=x.idata)==null?void 0:a.colors)||0,y=S===0&&v===3,w=S===9;let P=[0,0,0,0],j=!1;if(r.getBlackLevels)try{const k=r.getBlackLevels();k.dng_cblack&&k.dng_cblack.length===4&&Array.from(k.dng_cblack).some(O=>O>0)?(P=Array.from(k.dng_cblack).map(Number),j=!0):k.cblack&&k.cblack.length===4&&Array.from(k.cblack).some(O=>O>0)?(P=Array.from(k.cblack).map(Number),j=!0):typeof k.black=="number"&&k.black>0&&(P=[k.black,k.black,k.black,k.black],j=!0)}catch(k){console.warn("getBlackLevels binding failed",k)}if(!j){let k=[];if((i=x.color_data)!=null&&i.cblack_rawpy_style)k=x.color_data.cblack_rawpy_style;else if((s=(o=x.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)k=x.color_data.dng_levels.dng_cblack;else if(((c=x.black_level_per_channel)==null?void 0:c.length)>=4)k=x.black_level_per_channel;else if(((u=x.cblack)==null?void 0:u.length)>=4)k=x.cblack;else if(((d=(f=x.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)k=x.color.cblack;else{const O=x.black_level||x.color_data&&x.color_data.black||0;k=[O,O,O,O]}P=[Number(k[0])||0,Number(k[1])||0,Number(k[2])||0,Number(k[3])||0]}return{data:m,width:p.width,height:p.height,bayerPattern:x.color_desc||"RGGB",blackLevels:P,whiteLevel:x.white_level||16383,metadata:b,isThreePlane:y,isXTrans:w}}finally{r.delete?r.delete():r.close()}};async function Cs(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([zA(t),Y0(r)]);return{previewBlob:n,analysisData:a}}async function hc(e){const t=new Uint8Array(e);return Y0(t)}const yw=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function dm(e,t,r,n=!0){const a=await Y0(new Uint8Array(e)),i=await Y0(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,c=r?yw(o):o,u=r?yw(s):s,f=c*u,d=new Uint16Array(f),p=32768,m=1.41421356;for(let x=0;x<s;x++){const b=x*o,S=x*c;for(let v=0;v<o;v++){const y=a.data[b+v],w=i.data[b+v];let P=y-w;n&&(P/=m);let j=P+p;j=Math.max(0,Math.min(65535,j)),d[S+v]=Math.round(j)}}return{rawData:d,width:c,height:u,metadata:a.metadata}}function Ns(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),c=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],p=[0,0,0,0],m=[0,0,0,0];for(let S=c;S<f;S++){const v=S*t,y=S%2;for(let w=s;w<u;w++){const P=w%2,j=e[v+w],k=y*2+P;d[k]+=j,p[k]+=j*j,m[k]++}}const x=[0,0,0,0],b=[0,0,0,0];for(let S=0;S<4;S++)if(m[S]>0){const v=d[S]/m[S];x[S]=v;const w=p[S]/m[S]-v*v;b[S]=Math.sqrt(Math.max(0,w))}return{x:s,y:c,width:u-s,height:f-c,means:x,stdDevs:b,pixelCount:m.reduce((S,v)=>S+v,0)}}function UA(e,t,r,n,a,i=!1){const o=Math.floor(Math.max(0,r.x)),s=Math.floor(Math.max(0,r.y)),c=Math.ceil(Math.min(t,r.x+r.w)),u=e.length/t,f=Math.ceil(Math.min(u,r.y+r.h)),d=[0,0,0,0],p=[0,0,0,0];for(let z=s;z<f;z++){const D=z*t,L=z%2;for(let F=o;F<c;F++){const H=F%2,W=L*2+H,J=e[D+F],Y=n[W]||0;d[W]+=Math.max(0,J-Y),p[W]++}}let m=0,x=3;i&&(m=3,x=0);const b=p[m]>0?d[m]/p[m]:1,S=(d[1]+d[2])/(p[1]+p[2]||1),v=p[x]>0?d[x]/p[x]:1;if(b<1||S<1||v<1)return[1,1];const y=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]],w=dc(y);if(!w)return console.warn("Color Matrix is not invertible, falling back to standard WB"),[S/b,S/v];const P=pf(N1,w),j=dc(P);let k=1,O=1,A=1;if(j)k=j[0][0]+j[0][1]+j[0][2],O=j[1][0]+j[1][1]+j[1][2],A=j[2][0]+j[2][1]+j[2][2],Math.abs(O)<1e-6&&(O=1);else return console.warn("Final Matrix is not invertible"),[S/b,S/v];const R=S/b,E=S/v,T=k/O,B=A/O,G=R*T,V=E*B;return[Math.max(0,G),Math.max(0,V)]}function vw(e,t,r,n,a,i,o=0,s=0){const c=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),p=a>>1,m=a&1,x=(i>>1)+o,b=(i&1)+s;let S=0,v=0,y=0;for(let A=u;A<d-2;A+=2)for(let R=c;R<f-2;R+=2){const E=(A+p)*t+(R+m),T=(A+x)*t+(R+b);A+x>=r||R+b>=t||(S+=e[E],v+=e[T],y++)}if(y<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const w=S/y,P=v/y;let j=0,k=0,O=0;for(let A=u;A<d-2;A+=2)for(let R=c;R<f-2;R+=2){const E=(A+p)*t+(R+m),T=(A+x)*t+(R+b);if(A+x>=r||R+b>=t)continue;const B=e[E],G=e[T],V=B-w,z=G-P;j+=V*z,k+=V*V,O+=z*z}return{sumCov:j,sumVar1:k,sumVar2:O,n:y}}function WA(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function VA(e,t,r,n,a,i,o,s,c,u,f){if(u<=c)return[];const d=Math.max(0,Math.floor(n)),p=Math.max(0,Math.floor(a)),m=Math.min(t,Math.ceil(n+i)),x=Math.min(r,Math.ceil(a+o)),b=u-c,S=f?Math.floor(b)+1:s,v=b/S,y=[new Uint32Array(S),new Uint32Array(S),new Uint32Array(S),new Uint32Array(S)];for(let P=p;P<x;P++){const j=P*t,k=P%2;for(let O=d;O<m;O++){const A=O%2,R=e[j+O];if(R<c||R>u)continue;const E=k*2+A;let T;f?T=Math.floor(R-c):T=Math.floor((R-c)/v),T<0&&(T=0),T>=S&&(T=S-1),y[E][T]++}}const w=[];for(let P=0;P<S;P++){const j=c+(f?P:P*v);w.push({binStart:j,c0:y[0][P],c1:y[1][P],c2:y[2][P],c3:y[3][P]})}return w}function HA(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},c=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),p=Math.min(t,Math.ceil(n.x+n.w)),m=Math.min(r,Math.ceil(n.y+n.h)),x=p-f,b=m-d;if(x<=1||b<=1)return null;let S=0;for(let T=f;T<p;T++)T%2===(a&1)&&S++;let v=0;for(let T=d;T<m;T++)T%2===a>>1&&v++;if(S<4||v<4)return null;const y=Math.max(1,u),w=Math.floor(2*S/(y+1)),P=Math.floor(2*v/(y+1));if(w<4||P<4)return null;const j=new nl(w),k=new nl(P),O=new Float32Array(Math.floor(w/2)+1),A=new Float32Array(Math.floor(P/2)+1);let R=0,E=0;for(let T=d;T<m;T++){const B=T%2;if(a>>1!==B||s.rows&&(T>>1&1)!==s.rowGroup)continue;const G=T*t,V=new Float32Array(S);let z=0;for(let D=f;D<p;D++)D%2===(a&1)&&z<S&&(V[z++]=e[G+D]);for(let D=0;D<y;D++){const L=Math.floor(D*w/2);if(L+w>S)break;const F=V.slice(L,L+w);j.calculateSpectrum(F,O,o),R++}if(!c)break}for(let T=f;T<p;T++){const B=T%2;if((a&1)!==B||s.cols&&(T>>1&1)!==s.rowGroup)continue;const G=new Float32Array(v);let V=0;for(let z=d;z<m;z++)z%2===a>>1&&V<v&&(G[V++]=e[z*t+T]);for(let z=0;z<y;z++){const D=Math.floor(z*P/2);if(D+P>v)break;const L=G.slice(D,D+P);k.calculateSpectrum(L,A,o),E++}if(!c)break}if(R>0)for(let T=0;T<O.length;T++)O[T]/=R;if(E>0)for(let T=0;T<A.length;T++)A[T]/=E;return{avgHoriz:Array.from(O),avgVert:Array.from(A),sampleCount:{h:R,v:E}}}function XA(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),c=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let y=s;y<u;y++)if(y%2===a>>1){f=y;break}if(f===-1)return null;let d=-1;for(let y=o;y<c;y++)if(y%2===(a&1)){d=y;break}if(d===-1)return null;const p=[];for(let y=f;y<u;y+=2){const w=y*t,P=[];for(let j=d;j<c;j+=2)P.push(e[w+j]);p.push(P)}const m=p.length;if(m===0)return null;const x=p[0].length;if(x===0)return null;const b=new Float32Array(x*m);for(let y=0;y<m;y++){const w=p[y];for(let P=0;P<x;P++)b[y*x+P]=w[P]}const S=gA(b,x,m,i),v=mA(S,x,m);return{width:x,height:m,data:v}}function KA(e,t,r,n,a,i,o){const{x:s,y:c,w:u,h:f}=n,d=[],p=Math.max(0,Math.floor(s)),m=Math.max(0,Math.floor(c)),x=Math.min(t,Math.ceil(s+u)),b=Math.min(r,Math.ceil(c+f)),S=a>>1,v=a&1;for(let k=m;k<b;k++){if(k%2!==S)continue;const O=k*t;for(let A=p;A<x;A++){if(A%2!==v)continue;const R=e[O+A];R>=i&&R<=o&&d.push(R-i)}}if(d.length===0)return null;d.sort((k,O)=>k-O);const y=[d[0]];for(let k=1;k<d.length;k++)d[k]!==d[k-1]&&y.push(d[k]);const w=[],P=[],j={};for(let k=0;k<y.length-1;k++){const O=y[k],R=y[k+1]-O;w.push(R),P.push({x:O,y:R}),j[R]=(j[R]||0)+1}return{uniqueCount:y.length,diffCount:w.length,stepCounts:j,plotData:P}}function O1(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:c}=e,u=a.map((w,P)=>Math.max(0,w-n[P])),f=i.map((w,P)=>Math.max(0,w-n[P])),d=(u[1]+u[3])/2,p=(f[1]+f[3])/2,m=Math.floor(t.x),x=Math.floor(t.y),b=Math.floor(t.w),S=Math.floor(t.h),v=Math.pow(2,r.exposure),y=new Uint16Array(b*S);for(let w=0;w<S;w++){const P=x+w;if(P<0||P>=e.height)continue;const j=P%2,k=P*s,O=w*b;for(let A=0;A<b;A++){const R=m+A;if(R<0||R>=s)continue;const E=R%2;let T=0;!j&&!E?T=0:!j&&E?T=1:j&&!E?T=3:T=2;const B=o[k+R],G=n[T],V=u[T],z=f[T],D=Math.max(B-G,0),L=z-V||1e-9,F=(D-V)/L;let H;F<0?H=D*(d/Math.max(V,1e-9)):F>1?H=D*(p/Math.max(z,1e-9)):H=(1-F)*d+F*p,H*=v,y[O+A]=Math.max(0,Math.min(65535,Math.round(H)))}}return{data:y,width:b,height:S}}async function xw(e,t){const r=await yl(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const p=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],m=dc(p);if(m){const x=t.wbGains?t.wbGains[0]:1,b=t.wbGains?t.wbGains[1]:1,v=pf(m,[[x,0,0],[0,1,0],[0,0,b]]),y=pf(N1,v);o=[y[0][0],y[0][1],y[0][2],y[1][0],y[1][1],y[1][2],y[2][0],y[2][1],y[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(p=>{const m=Math.round(p);return m===0?1:m})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const c=await n.imageData(),u=new ImageData(c.width,c.height),f=u.data,d=new Uint16Array(c.data.buffer,c.data.byteOffset,c.data.byteLength/2);if(i&&o.length===9){const p=o,x=Math.pow(2,t.exposure)*.25;for(let b=0;b<d.length;b+=3){const S=d[b]/65535,v=d[b+1]/65535,y=d[b+2]/65535;let w=p[0]*S+p[1]*v+p[2]*y,P=p[3]*S+p[4]*v+p[5]*y,j=p[6]*S+p[7]*v+p[8]*y;w*=x,P*=x,j*=x,w=Math.max(0,Math.min(1,w)),P=Math.max(0,Math.min(1,P)),j=Math.max(0,Math.min(1,j)),w=cs(w),P=cs(P),j=cs(j);const k=b/3*4;f[k]=Math.round(w*255),f[k+1]=Math.round(P*255),f[k+2]=Math.round(j*255),f[k+3]=255}}else for(let p=0;p<d.length;p+=3){const m=p/3*4;f[m]=d[p]>>8,f[m+1]=d[p+1]>>8,f[m+2]=d[p+2]>>8,f[m+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function hm(e,t){const r=await yl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const b=await n.metadata(!0);b&&b.white_level&&(a=b.white_level)}catch(b){console.warn("Metadata error",b)}const i=n.getRawImage(),o=i.width,s=i.height,c=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],p=a,m=t.wbGains?t.wbGains[0]:1,x=t.wbGains?t.wbGains[1]:1;for(let b=0;b<s;b++){const S=b%2;for(let v=0;v<o;v++){const y=v%2,w=S*2+y,P=c[b*o+v],j=d[w];let k=(P-j)/(p-j);k=Math.max(0,Math.min(1,k)),t.exposure!==0&&(k*=Math.pow(2,t.exposure),k=Math.min(1,k)),w===0?k*=m:w===3&&(k*=x);const O=Math.round(cs(Math.min(1,k))*255),A=(b*o+v)*4;f[A]=O,f[A+1]=O,f[A+2]=O,f[A+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function qA(e,t){const r=await yl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const B=await n.metadata(!0);B&&B.white_level&&(a=B.white_level)}catch{}const i=n.getRawImage(),{width:o,height:s,data:c}=i,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],p=a,m=t.wbGains?t.wbGains[0]:1,x=t.wbGains?t.wbGains[1]:1,b=Math.pow(2,t.exposure),S=!!t.isBGGR;let v=[[1,0,0],[0,1,0],[0,0,1]];if(t.customMatrix&&t.customMatrix.length===9){const B=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],G=dc(B);G&&(v=pf(N1,G))}const y=v[0][0],w=v[0][1],P=v[0][2],j=v[1][0],k=v[1][1],O=v[1][2],A=v[2][0],R=v[2][1],E=v[2][2],T=new Float32Array(o*s);for(let B=0;B<o*s;B++){const G=Math.floor(B/o),V=B%o,z=G%2,D=V%2,L=z*2+D,F=c[B],H=d[L];let W=(F-H)/(p-H);W=Math.max(0,W),S?L===0?W*=x:L===3&&(W*=m):L===0?W*=m:L===3&&(W*=x),T[B]=W}for(let B=1;B<s-1;B++){const G=B%2,V=B*o;for(let z=1;z<o-1;z++){const D=z%2,L=V+z;let F=0,H=0,W=0,J=!1,Y=!1,ne=!1;if(!G&&!D?S?Y=!0:J=!0:G&&D?S?J=!0:Y=!0:ne=!0,J)F=T[L],H=(T[L-1]+T[L+1]+T[L-o]+T[L+o])*.25,W=(T[L-o-1]+T[L-o+1]+T[L+o-1]+T[L+o+1])*.25;else if(Y)W=T[L],H=(T[L-1]+T[L+1]+T[L-o]+T[L+o])*.25,F=(T[L-o-1]+T[L-o+1]+T[L+o-1]+T[L+o+1])*.25;else{H=T[L];const ie=(T[L-1]+T[L+1])*.5,X=(T[L-o]+T[L+o])*.5;let le=!1;!G&&D?S?le=!1:le=!0:S?le=!0:le=!1,le?(F=ie,W=X):(W=ie,F=X)}let te=y*F+w*H+P*W,fe=j*F+k*H+O*W,se=A*F+R*H+E*W;te*=b,fe*=b,se*=b,te=Math.max(0,Math.min(1,te)),fe=Math.max(0,Math.min(1,fe)),se=Math.max(0,Math.min(1,se)),te=cs(te),fe=cs(fe),se=cs(se);const ye=L*4;f[ye]=Math.round(te*255),f[ye+1]=Math.round(fe*255),f[ye+2]=Math.round(se*255),f[ye+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function YA(e,t){const r=await yl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const y=await n.metadata(!0);y&&y.white_level&&(a=y.white_level)}catch(y){console.warn("Metadata error",y)}const i=n.getRawImage(),{width:o,height:s,data:c}=i,u=new ImageData(o,s),f=u.data;if(!t.advancedZeroDep)throw new Error("Missing advanced settings");const{bl:d,bg:p,fg:m}=t.advancedZeroDep,x=p.map((y,w)=>Math.max(0,y-d[w])),b=m.map((y,w)=>Math.max(0,y-d[w])),S=(x[1]+x[3])/2,v=(b[1]+b[3])/2;for(let y=0;y<s;y++){const w=y%2;for(let P=0;P<o;P++){const j=P%2;let k=0;!w&&!j?k=0:!w&&j?k=1:w&&!j?k=3:k=2;const O=c[y*o+P],A=d[k],R=x[k],E=b[k],T=Math.max(O-A,0),B=E-R||1e-9,G=(T-R)/B;let V;G<0?V=T*(S/Math.max(R,1e-9)):G>1?V=T*(v/Math.max(E,1e-9)):V=(1-G)*S+G*v;let z=V/65535;z=Math.max(0,Math.min(1,z));const D=Math.round(cs(z)*255),L=(y*o+P)*4;f[L]=D,f[L+1]=D,f[L+2]=D,f[L+3]=255}}return u}finally{n.delete?n.delete():n.close()}}const Nl=({title:e,children:t})=>l.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[l.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:l.jsx("span",{children:e})}),l.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),ZA=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],pm=({checked:e,onChange:t,label:r})=>l.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[l.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),l.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:l.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),gm=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=c=>{const u=[];for(let f=0;f<4;f++)r[f]===c&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const c=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(c)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(p=>d[p]=c),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let c=[];if(Array.isArray(s)?c=s.map(Number):typeof s=="string"?c=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(c=[s,s,s,s]),c.length===1&&!isNaN(c[0])&&(c=[c[0],c[0],c[0],c[0]]),c.length>=4&&!c.slice(0,4).some(isNaN))return[c[0],c[1],c[2],c[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},QA=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:c,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:p,drGridRows:m,onDrGridRowsChange:x,drGridCols:b,onDrGridColsChange:S,onBatchDrLab:v,hasDrMarkers:y,isFftLabOpen:w,onProcessPair:P,onProcessBatchDiff:j,onProcessStackFft:k,onOpenCrossCalc:O,isThreePlane:A,onToggleXTrans:R,xtransPhase:E,onXTransPhaseChange:T,isXTransConverted:B,onCommand:G,isColorLabOpen:V,colorLabMarkingStep:z,onStartColorLabMarking:D,isSfrLabOpen:L,roiStats:F,isBGGR:H,onOpenDngExport:W,sfrRectCount:J,isBatchMarkingMode:Y,onToggleBatchMarking:ne,onClearBatchMarks:te,onBatchCompute:fe,stdChartStep:se,onStartStandardCalibration:ye,onSaveBatchTemplate:ie,onImportBatchTemplate:X,onBatchTransform:le,onOpenStackingTool:he}=e,oe=!!t,je=!!(t!=null&&t.isXTrans),Se=!!R,[me,ge]=C.useState(r.exposure.toString()),[Ce,De]=C.useState(""),[ze,Be]=C.useState("0 0 0 0"),[et,yt]=C.useState("1.0"),[dt,cr]=C.useState("1.0"),[St,ur]=C.useState(r.demosaicMethod),[jt,fr]=C.useState(!!r.showKadc),[$r,Tt]=C.useState(!!r.subtractBlackLevelFromStats),[_r,Qe]=C.useState("64"),[_t,Qt]=C.useState(!1),[Bt,yr]=C.useState(""),[rr,Jr]=C.useState(""),[Ft,hn]=C.useState(""),[Pt,en]=C.useState(!1),[Ue,nn]=C.useState(!1),[Or,pn]=C.useState(!1),[an,or]=C.useState(!1),[Lr,gn]=C.useState(!1),[on,sn]=C.useState("single"),[hr,nr]=C.useState(!1),[ar,M]=C.useState(!0),[Fe,pt]=C.useState(!0),[Wt,Lt]=C.useState(!1),[wt,vr]=C.useState(10),[Xt,Je]=C.useState(1.05),bt=C.useMemo(()=>Object.keys(fc).sort(),[]),kt=C.useRef(null),Kt=C.useRef(null),pr=C.useRef(null),_e=C.useRef(null),[Hr,I]=C.useState(null),[be,Ne]=C.useState(null),[Ct,Ve]=C.useState(!1),[lt,ft]=C.useState(!0),qt=C.useRef(null),Xr=C.useRef(null),Br=C.useRef(null);C.useEffect(()=>{if(ge(r.exposure.toString()),r.customMatrix?De(r.customMatrix.join(" ")):De(""),r.blackLevel&&r.blackLevel.length===4)Be(r.blackLevel.join(" "));else{const q=gm(t,i);q&&q.some(ke=>ke!==0)?Be(q.join(" ")):Be("")}yt(r.wbGains?r.wbGains[0].toString():"1.0"),cr(r.wbGains?r.wbGains[1].toString():"1.0"),ur(r.demosaicMethod),fr(!!r.showKadc),Tt(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(yr(r.advancedZeroDep.bl.join(" ")),Jr(r.advancedZeroDep.bg.join(" ")),hn(r.advancedZeroDep.fg.join(" ")),Qt(!0))},[r,t,i]);const Yt=C.useRef(!1),En=C.useRef(null);C.useEffect(()=>{t!==En.current&&(Yt.current=!1,En.current=t)},[t]),C.useEffect(()=>{if(o&&t&&!Yt.current){Yt.current=!0;const q=gm(t,i),ke=q&&q.some(ct=>ct>0);if(q&&ke){console.log("[AutoApply] Detected Black Levels via Bridge:",q);const ct={...r,blackLevel:q,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(ct)}}},[o,t,i,r,n]);const mn=q=>ge(q),Kn=q=>yt(q),Et=q=>cr(q),Gt=q=>ur(parseInt(q.target.value,10)),Rr=q=>De(q.target.value),Le=()=>{ge("0"),ur(3),yt("1.0"),cr("1.0"),fr(!0),Tt(!0),De(""),Qt(!1);const q=gm(t,i);Be(q&&q.some(ke=>ke!==0)?q.join(" "):"")},er=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),G==null||G("sel full"))},Kr=()=>{if(!t||!a)return;const q=parseInt(_r,10);if(isNaN(q)||q<=0)return;const ke=Math.min(q,t.width),ct=Math.min(q,t.height),tt=Math.floor((t.width-ke)/2),Dt=Math.floor((t.height-ct)/2);a({x:tt,y:Dt,w:ke,h:ct}),G==null||G(`sel center ${q}`)},la=()=>{if(!t||!F){alert("Please select a region on the image first.");return}const q=ca()||[0,0,0,0],ke=Ce.trim().replace(/[\s,\n]+/g," "),ct=ke?ke.split(" ").map(Number):[1,0,0,0,1,0,0,0,1];if(ct.length!==9){alert("Matrix must be 3x3 (9 values).");return}const[tt,Dt]=UA(t.data,t.width,{x:F.x,y:F.y,w:F.width,h:F.height},q,ct,H);yt(tt.toFixed(4)),cr(Dt.toFixed(4)),G==null||G(`wb ${tt.toFixed(4)} ${Dt.toFixed(4)} (Spot)`)},ca=()=>{const ke=ze.split(/[\s,]+/).filter(ct=>ct.trim()!=="").map(Number);if(ke.length===1&&!isNaN(ke[0]))return[ke[0],ke[0],ke[0],ke[0]];if(ke.length>=4&&!ke.slice(0,4).some(isNaN))return[ke[0],ke[1],ke[2],ke[3]]},Mr=q=>{const ke=q.trim().split(/[\s,]+/).map(Number);return ke.length===4&&!ke.some(isNaN)?ke:ke.length===1&&!isNaN(ke[0])?[ke[0],ke[0],ke[0],ke[0]]:null},Qa=()=>{G&&(me!=="0"&&G(`ev ${me}`),(et!=="1.0"||dt!=="1.0")&&G(`wb ${et} ${dt}`),ze!=="0 0 0 0"&&ze!==""&&G(`bl ${ze}`),St!==3&&G(`demo ${St}`),Ce.trim().length>0&&G(`matrix ${Ce.replace(/\s+/g," ")}`),G("render"));const q={...r},ke=parseFloat(me);isNaN(ke)||(q.exposure=ke);const ct=parseFloat(et),tt=parseFloat(dt);!isNaN(ct)&&!isNaN(tt)&&(q.wbGains=[ct,tt]),q.demosaicMethod=St,q.renderMode="standard";const Dt=ca();Dt?q.blackLevel=Dt:delete q.blackLevel;const Zt=Ce.trim().replace(/[\s,\n]+/g," ");if(Zt){const ln=Zt.split(" ").map(Number);ln.length===9&&!ln.some(isNaN)?q.customMatrix=ln:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete q.customMatrix;q.showKadc=jt,q.subtractBlackLevelFromStats=$r,n(q)},re=()=>{pn(H||!1),nn(!0)},ve=q=>{G&&(me!=="0"&&G(`ev ${me}`),(et!=="1.0"||dt!=="1.0")&&G(`wb ${et} ${dt}`),ze!=="0 0 0 0"&&ze!==""&&G(`bl ${ze}`),G(q==="bilinear"?"render zero color":"render zero"));const ke={...r},ct=ca();ct&&(ke.blackLevel=ct);const tt=parseFloat(et),Dt=parseFloat(dt);!isNaN(tt)&&!isNaN(Dt)&&(ke.wbGains=[tt,Dt]);const Zt=parseFloat(me);if(isNaN(Zt)||(ke.exposure=Zt),q==="bilinear"){const ln=Ce.trim().replace(/[\s,\n]+/g," ");if(ln){const yn=ln.split(" ").map(Number);yn.length===9&&!yn.some(isNaN)&&(ke.customMatrix=yn)}ke.isBGGR=Or}ke.renderMode=q==="mosaic"?"zero-dependency":"zero-dep-color",ke.showKadc=jt,ke.subtractBlackLevelFromStats=$r,nn(!1),n(ke)},we=()=>{const q=Mr(Bt),ke=Mr(rr),ct=Mr(Ft);if(!q||!ke||!ct){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}G&&(me!=="0"&&G(`ev ${me}`),G(`render unmix ${q.join(" ")} ${ke.join(" ")} ${ct.join(" ")}`));const tt={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:q,bg:ke,fg:ct}};tt.showKadc=jt,tt.subtractBlackLevelFromStats=$r,n(tt)},Z=()=>{if(F){const q=F.means,ke=[q[0],q[1],q[3],q[2]].map(ct=>ct.toFixed(1));Jr(ke.join(" "))}else alert("Please select an ROI on the image first.")},Oe=()=>{if(F){const q=F.means,ke=[q[0],q[1],q[3],q[2]].map(ct=>ct.toFixed(1));hn(ke.join(" "))}else alert("Please select an ROI on the image first.")},it=q=>{q.target.files&&q.target.files.length>0&&v&&(v(q.target.files,on),G==null||G(`drlab batch ${on}`)),q.target.value="",gn(!1)},nt=async q=>{var ct;const ke=(ct=q.target.files)==null?void 0:ct[0];if(!(!ke||!X)){try{const Dt=(await ke.text()).split(`
`),Zt=[];let ln=!1;for(let yn of Dt){if(yn=yn.trim(),!yn)continue;if(yn.toLowerCase().startsWith("index")){ln=!0;continue}const Pn=yn.split(",").map(Number);if(Pn.length>=5){const ua=Pn[1],Ga=Pn[2],Oa=Pn[3],gr=Pn[4],xi=Pn[5];!isNaN(ua)&&!isNaN(Ga)&&!isNaN(Oa)&&!isNaN(gr)&&Zt.push({x:ua,y:Ga,w:Oa,h:gr,ori:isNaN(xi)?void 0:xi})}}X(Zt),alert(`Imported ${Zt.length} ROIs successfully.`)}catch(tt){console.error("Import failed",tt),alert("Failed to import CSV: "+tt.message)}q.target.value=""}},$t=async q=>{var ct;const ke=(ct=q.target.files)==null?void 0:ct[0];if(ke){try{const Dt=(await ke.text()).split(`
`),Zt=[];Zt.push("#BlackLevel: 0,0,0,0"),Zt.push("#ImageHeight: 0"),Zt.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let ln=1;for(let Ga=0;Ga<Dt.length;Ga++){const Oa=Dt[Ga].trim();if(!Oa||Oa.includes("R_mean")||Oa.includes("R_std"))continue;const gr=Oa.split(/\s+/).map(Number);if(gr.length<8||gr.some(isNaN))continue;const xi=[ln,1,gr[0],gr[2],gr[6],gr[4],gr[1],gr[3],gr[7],gr[5]].join(",");Zt.push(xi),ln++}const yn=new Blob([Zt.join(`
`)],{type:"text/csv"}),Pn=URL.createObjectURL(yn),ua=document.createElement("a");ua.href=Pn,ua.download=ke.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(ua),ua.click(),document.body.removeChild(ua),URL.revokeObjectURL(Pn)}catch(tt){console.error("Conversion failed",tt),alert("Failed to convert file.")}q.target.value=""}},vt=q=>{q.target.files&&q.target.files[0]&&(I(q.target.files[0]),G==null||G("fft load a"))},ht=q=>{q.target.files&&q.target.files[0]&&(Ne(q.target.files[0]),G==null||G("fft load b"))},xr=()=>{Hr&&be&&P&&(P(Hr,be,Ct,lt),G==null||G("fft run"))},Rt=q=>{q.target.files&&q.target.files.length>0&&j&&(j(q.target.files),G==null||G("fft batch")),q.target.value=""},sr=q=>{q.target.files&&q.target.files.length>0&&k&&(k(q.target.files),G==null||G("fft stack")),q.target.value=""},Fr=()=>{fe&&(fe({useNR:ar,useDeshading:Fe,greenOnly:Wt}),G==null||G("batch compute"))},Pe=(q,ke,ct)=>{le&&le(q,ke,ct)},$e=Bt.trim()!==""&&rr.trim()!==""&&Ft.trim()!=="",at=r.renderMode==="advanced-zero-dep";return l.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[l.jsxs("div",{className:"flex-grow overflow-y-auto",children:[A&&l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[l.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),l.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),je&&!B&&l.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[l.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),l.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),B&&l.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[l.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),l.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),L&&l.jsx(Nl,{title:"SFR Lab Tools (Scalar Unmixing)",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[l.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),l.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),l.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),at&&l.jsxs("div",{className:"border-t border-orange-200 dark:border-orange-800 pt-3",children:[l.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>nr(!hr),children:[l.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase",children:" (Batch Ops)"}),l.jsx("svg",{className:`w-4 h-4 text-orange-500 transition-transform ${hr?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),hr&&l.jsxs("div",{className:"mt-3 space-y-3 bg-white/50 dark:bg-black/20 p-2 rounded animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Standard Chart)"}),l.jsx("button",{onClick:ye,disabled:!!se&&se>0,className:`w-full py-2 border font-bold text-xs rounded transition-all ${se&&se>0?"bg-emerald-600 text-white border-emerald-500 animate-pulse":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:se&&se>0?`Click ${se===1?"TL":se===2?"TR":se===3?"BL":"BR"}`:"Start Calibration (4-Pts)"}),!!se&&se>0&&l.jsx("p",{className:"text-[9px] text-emerald-600 dark:text-emerald-400 font-bold text-center",children:"Click corners: TopLeft  TopRight  BottomLeft  BottomRight"})]}),l.jsx("div",{className:"h-px bg-gray-300 dark:bg-slate-600 w-full"}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Manual Mark)"}),J!==void 0&&J>0&&l.jsxs("span",{className:"text-[9px] text-orange-500 font-bold",children:[J," Selected"]})]}),l.jsx("button",{onClick:ne,className:`w-full py-2 font-bold text-xs rounded shadow transition-all ${Y?"bg-orange-600 hover:bg-orange-500 text-white ring-2 ring-orange-300":"bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:Y?"Stop Marking (Active)":"Start Batch Marking"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:ie,disabled:!J,className:"flex-1 py-1.5 border border-indigo-300 dark:border-indigo-700 text-indigo-700 dark:text-indigo-400 font-bold text-[10px] rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})," (Save)"]}),l.jsx("input",{type:"file",ref:Br,className:"hidden",accept:".csv",onChange:nt}),l.jsxs("button",{onClick:()=>{var q;return(q=Br.current)==null?void 0:q.click()},className:"flex-1 py-1.5 border border-emerald-300 dark:border-emerald-700 text-emerald-700 dark:text-emerald-400 font-bold text-[10px] rounded hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-colors flex items-center justify-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})," (Import)"]})]}),J!==void 0&&J>0&&l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800/50 p-2 rounded border border-gray-200 dark:border-slate-700 mt-1",children:[l.jsx("div",{className:"text-[9px] font-bold text-gray-500 text-center mb-1",children:"UNIFIED TRANSFORM"}),l.jsxs("div",{className:"flex gap-2 mb-2 justify-center",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400",children:"Step (px)"}),l.jsx("input",{type:"number",min:"1",value:wt,onChange:q=>vr(Number(q.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400",children:"Scale"}),l.jsx("input",{type:"number",step:"0.01",value:Xt,onChange:q=>Je(Number(q.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[l.jsx("button",{onClick:()=>Pe("scale",1/Xt,1/Xt),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom Out (Shrink)",children:"-"}),l.jsx("button",{onClick:()=>Pe("move",0,-wt),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("button",{onClick:()=>Pe("scale",Xt,Xt),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom In (Expand)",children:"+"}),l.jsx("button",{onClick:()=>Pe("move",-wt,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("div",{className:"text-center text-[8px] text-gray-400 flex items-center justify-center",children:"Move"}),l.jsx("button",{onClick:()=>Pe("move",wt,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>Pe("move",0,wt),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("div",{})]})]}),Y&&l.jsx("p",{className:"text-[9px] text-gray-400 italic text-center mt-1",children:"Hold Shift + Drag on canvas to add multiple ROIs."}),l.jsxs("div",{className:"flex flex-col gap-1 text-[10px] mt-2 bg-gray-100 dark:bg-slate-800/50 p-2 rounded",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ar,onChange:q=>M(q.target.checked),className:"rounded text-orange-500"}),"Jiang Official NR"]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:Fe,onChange:q=>pt(q.target.checked),className:"rounded text-purple-500"}),"Deshading"]})]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 my-1"}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",title:"Only use Green channel points for projection (reduces color moire issues)",children:[l.jsx("input",{type:"checkbox",checked:Wt,onChange:q=>Lt(q.target.checked),className:"rounded text-emerald-500"}),l.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:"Green Channel Only (G Only)"})]})]}),l.jsxs("button",{onClick:Fr,disabled:!J,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold text-xs rounded shadow transition-transform active:scale-95",children:["Calculate & Copy (",J||0,")"]}),l.jsx("button",{onClick:te,disabled:!J,className:"w-full py-1.5 bg-gray-200 dark:bg-slate-700 hover:bg-red-100 hover:text-red-600 text-[10px] font-bold rounded transition-colors disabled:opacity-50",children:"Clear All Marks"})]})]})]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),l.jsx(pm,{checked:_t,onChange:Qt,label:" (Scalar Unmixing)"}),_t&&l.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[l.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[l.jsx("div",{className:"col-span-1",children:"Param"}),l.jsx("div",{className:"text-center",children:"Ch0(R)"}),l.jsx("div",{className:"text-center",children:"Ch1(G1)"}),l.jsx("div",{className:"text-center",children:"Ch2(B)"}),l.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),l.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[l.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),l.jsx("input",{type:"text",value:Bt,onChange:q=>yr(q.target.value),placeholder:"0 0 0 0",className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),l.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),l.jsxs("div",{className:"col-span-4 flex gap-1",children:[l.jsx("input",{type:"text",value:rr,onChange:q=>Jr(q.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),l.jsx("button",{onClick:Z,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),l.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[l.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),l.jsxs("div",{className:"col-span-4 flex gap-1",children:[l.jsx("input",{type:"text",value:Ft,onChange:q=>hn(q.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),l.jsx("button",{onClick:Oe,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),l.jsx("button",{onClick:we,disabled:!oe||!$e,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed",children:"RUN UNMIXING (ADV ZERO-DEP)"}),l.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),w&&l.jsx(Nl,{title:"FFT Lab (Noise Profile)",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{type:"file",ref:kt,className:"hidden",onChange:vt,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var q;return(q=kt.current)==null?void 0:q.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${Hr?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:Hr?`A: ${Hr.name}`:"Load Image A"}),l.jsx("input",{type:"file",ref:Kt,className:"hidden",onChange:ht,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var q;return(q=Kt.current)==null?void 0:q.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${be?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:be?`B: ${be.name}`:"Load Image B"})]}),l.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:lt,onChange:q=>ft(q.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[l.jsx("button",{onClick:xr,disabled:!Hr||!be,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),l.jsx("input",{type:"file",ref:pr,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Rt}),l.jsx("button",{onClick:()=>{var q;return(q=pr.current)==null?void 0:q.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),l.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{type:"file",ref:_e,className:"hidden",multiple:!0,onChange:sr,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var q;return(q=_e.current)==null?void 0:q.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-gray-100 dark:border-slate-800",children:[l.jsx("button",{onClick:()=>{O==null||O(),G==null||G("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"}),l.jsx("button",{onClick:()=>{he==null||he(),G==null||G("stack tool")},className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:" (General Stack)"})]})]})}),s&&l.jsx(Nl,{title:"DR Lab Tools",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{onClick:()=>{f==null||f(),G==null||G("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),l.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),p&&d!==void 0&&l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),l.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:q=>p(parseInt(q.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),l.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),x&&S&&m!==void 0&&b!==void 0&&l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:"Layout:"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"1",max:"50",value:m,onChange:q=>x(Math.max(1,parseInt(q.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),l.jsx("span",{className:"text-xs text-gray-400",children:"x"}),l.jsx("input",{type:"number",min:"1",max:"50",value:b,onChange:q=>S(Math.max(1,parseInt(q.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:()=>{u==null||u(),G==null||G("mark")},disabled:!oe||c!==void 0&&c>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${oe?c&&c>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:c&&c>0?"Marking Active...":"Mark Corners"}),v&&l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"file",ref:qt,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:it}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>gn(!Lr),disabled:!y,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),Lr&&l.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[l.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var q;sn("single"),(q=qt.current)==null||q.click()},children:"1. Independent Frames"}),l.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var q;sn("pair"),(q=qt.current)==null||q.click()},children:"2. Pair Difference (A-B)"})]})]})]}),l.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[l.jsx("input",{type:"file",ref:Xr,className:"hidden",accept:".txt",onChange:$t}),l.jsx("button",{onClick:()=>{var q;return(q=Xr.current)==null?void 0:q.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),c!==void 0&&c>0&&l.jsx("div",{className:"mt-2 text-center",children:l.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[c===1&&"Click Top-Left Center",c===2&&"Click Top-Right Center",c===3&&"Click Bottom-Left Center",c===4&&"Click Bottom-Right Center"]})})]})]})}),V&&l.jsx(Nl,{title:"Color Lab Tools",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),l.jsx("button",{onClick:()=>{D==null||D(),G==null||G("cl mark")},disabled:!oe||z!==void 0&&z>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${oe?z&&z>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:z&&z>0?"Marking Active...":"Mark 24-Patch Chart"}),z!==void 0&&z>0&&l.jsx("div",{className:"mt-2 text-center",children:l.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[z===1&&"Click Top-Left (Brown)",z===2&&"Click Top-Right (Cyanish)",z===3&&"Click Bottom-Left (White)",z===4&&"Click Bottom-Right (Black)"]})})]})}),l.jsx(Nl,{title:"Selection Tools",children:l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),l.jsx("input",{type:"number",min:"1",value:_r,onChange:q=>Qe(q.target.value),disabled:!oe,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:Kr,disabled:!oe,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),l.jsx("button",{onClick:er,disabled:!oe,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),l.jsx(Nl,{title:"Display Controls",children:l.jsxs("div",{className:"space-y-5",children:[l.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",l.jsx("b",{children:"Apply"}),"."]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!oe,value:parseFloat(me)||0,onChange:q=>mn(q.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("input",{id:"exposure",type:"number",step:"0.1",value:me,onChange:q=>mn(q.target.value),disabled:!oe,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),Se&&l.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[l.jsx(pm,{checked:!!B,onChange:q=>{R&&R(q),G==null||G(`xtrans ${q?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),B&&E&&T&&l.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),l.jsx("input",{type:"number",min:"0",max:"5",value:E.x,onChange:q=>{const ke=Math.min(5,Math.max(0,parseInt(q.target.value)||0));T({x:ke}),G==null||G(`xtrans phase ${ke} ${E.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),l.jsx("input",{type:"number",min:"0",max:"5",value:E.y,onChange:q=>{const ke=Math.min(5,Math.max(0,parseInt(q.target.value)||0));T({y:ke}),G==null||G(`xtrans phase ${E.x} ${ke}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),l.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx(pm,{checked:jt,onChange:fr,label:"Show k"}),l.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),l.jsxs("div",{children:[l.jsxs("button",{onClick:la,disabled:!oe||!F,className:"w-full mb-3 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded shadow-sm transition-all active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",title:"Calculate Gains to make the selected area neutral gray, accounting for Color Matrix",children:[l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Spot WB (Matrix-Aware)"]}),l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),l.jsx("input",{type:"number",step:"0.01",value:et,onChange:q=>Kn(q.target.value),disabled:!oe,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),l.jsx("input",{type:"number",step:"0.01",value:dt,onChange:q=>Et(q.target.value),disabled:!oe,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",l.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),l.jsx("button",{onClick:()=>en(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[l.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),l.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${$r?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>Tt(!$r),children:l.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${$r?"translate-x-4":"translate-x-0"}`})})]})]}),l.jsx("input",{type:"text",value:ze,onChange:q=>Be(q.target.value),disabled:!oe,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),l.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[l.jsx("span",{children:"Custom Color Matrix"}),l.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),l.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:q=>{const ke=fc[q.target.value];ke&&De(ke),q.target.value=""},defaultValue:"",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),bt.map(q=>l.jsx("option",{value:q,children:q},q))]})]}),l.jsx("textarea",{id:"customMatrix",value:Ce,onChange:Rr,disabled:!oe,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),l.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[l.jsx("button",{onClick:re,disabled:!oe,className:"w-full text-sm font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-4 rounded-xl flex items-center justify-center border-2 border-slate-500 shadow-lg",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:l.jsxs("span",{className:"text-center leading-tight",children:["Apply Settings/Render",l.jsx("br",{}),l.jsx("span",{className:"text-xs font-normal opacity-90",children:"CM"})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>or(!0),disabled:!oe,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed py-3 px-2 rounded-lg transition-all active:scale-95 border border-gray-700",children:["",l.jsx("br",{}),l.jsx("span",{className:"text-[10px] font-normal opacity-75",children:""})]}),l.jsx("button",{onClick:()=>W==null?void 0:W(),disabled:!oe,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-all py-3 rounded-lg flex items-center justify-center border border-gray-700 active:scale-95",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:"Generate 16bit DNG"})]}),l.jsx("div",{className:"text-center pt-1",children:l.jsx("button",{onClick:Le,disabled:!oe,className:"text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors underline decoration-gray-300 hover:decoration-gray-600 underline-offset-2",children:"Reset Defaults (Local)"})})]})]})})]}),l.jsx(ss,{isOpen:Pt,onClose:()=>en(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),en(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[l.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/",l.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),l.jsxs("p",{className:"leading-relaxed",children:["Autofills. If no result is found or it's wrong or not precise enough, please check the ",l.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame(close the lens cap) with the same ISO/speed setting to calculate the average (using jiangtherapee) and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),l.jsx(ss,{isOpen:Ue,onClose:()=>nn(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),l.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Bayer Pattern"}),l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>pn(!1),className:`px-3 py-1 text-[10px] font-bold rounded transition-all ${Or?"text-gray-500 dark:text-slate-400":"bg-white dark:bg-slate-600 text-cyan-600 dark:text-cyan-400 shadow-sm"}`,children:"RGGB"}),l.jsx("button",{onClick:()=>pn(!0),className:`px-3 py-1 text-[10px] font-bold rounded transition-all ${Or?"bg-white dark:bg-slate-600 text-cyan-600 dark:text-cyan-400 shadow-sm":"text-gray-500 dark:text-slate-400"}`,children:"BGGR"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("button",{onClick:()=>ve("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:l.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),l.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),l.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),l.jsxs("button",{onClick:()=>ve("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[l.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:l.jsx("svg",{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),l.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),l.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),l.jsx(ss,{isOpen:an,onClose:()=>or(!1),onConfirm:()=>{Qa(),or(!1)},title:"Official Render Options",confirmText:"Render",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),l.jsx("select",{id:"demosaic-modal",value:St,onChange:Gt,disabled:!oe||A||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:ZA.map(q=>l.jsx("option",{value:q.value,children:q.label},q.value))}),A&&l.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&l.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},JA=C.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:c,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:p,onToggleXTrans:m,onXTransPhaseChange:x}=e,[b,S]=C.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[v,y]=C.useState(""),[w,P]=C.useState([]),[j,k]=C.useState(-1),O=C.useRef(null),A=C.useRef(null),R=C.useRef(null),E=C.useRef(null),T=C.useRef(null),B=C.useRef(null),G=C.useRef(null),V=C.useRef(null);C.useRef(null);const z=C.useRef({...n});C.useEffect(()=>{z.current={...n}},[n.exposure,n.demosaicMethod]);const D=C.useRef({fileA:null,fileB:null});C.useLayoutEffect(()=>{O.current&&(O.current.scrollTop=O.current.scrollHeight)},[b]);const L=(ne,te="out")=>{S(fe=>[...fe,{id:Date.now().toString()+Math.random(),type:te,text:ne}])};C.useImperativeHandle(t,()=>({log:(ne,te="in")=>{const fe=te;let se=ne;te==="in"&&!ne.startsWith(">")&&(se=`> ${ne}`),L(se,fe)}}));const F=C.useRef(null);C.useEffect(()=>{if(e.roiStats&&e.roiStats!==F.current){const ne=e.roiStats,te=Math.round(ne.x),fe=Math.round(ne.y),se=Math.round(ne.width),ye=Math.round(ne.height);L(`> sel ${te} ${fe} ${se} ${ye}`,"in");const ie=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],X=l.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[l.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",te,", ",fe,", ",se,"x",ye,"]:"]}),l.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[l.jsx("div",{children:"Ch"}),l.jsx("div",{className:"text-right",children:"Mean"}),l.jsx("div",{className:"text-right",children:"StdDev"})]}),ie.map(le=>l.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[l.jsx("div",{className:le.name==="R"?"text-red-500":le.name==="B"?"text-blue-500":"text-green-500",children:le.name}),l.jsx("div",{className:"text-right text-gray-300",children:ne.means[le.idx].toFixed(2)}),l.jsx("div",{className:"text-right text-gray-400",children:ne.stdDevs[le.idx].toFixed(2)})]},le.name))]});L(X,"out"),F.current=ne}},[e.roiStats,e.isBGGR]);const H=ne=>{var ye,ie,X,le,he,oe,je;const te=ne.trim().split(/\s+/),fe=te[0].toLowerCase(),se=te.slice(1);switch(fe){case"help":L("Available Commands:","info"),L("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),L("  wb <r> <b>        Set WB Gains","info"),L("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),L("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),L("  matrix <n1..n9>   Set Custom Color Matrix","info"),L("  xtrans <on|off>   Force X-Trans Mode","info"),L("  xtrans phase <x> <y>  Set X-Trans Phase","info"),L("  render            Apply settings & Render","info"),L("  render zero       Zero-Dependency Render","info"),L("  render unmix      Advanced Unmixing Render","info"),L("  sel <full|center> Select ROI","info"),L("  sel <x> <y> <w> <h> Select ROI manually","info"),L("  mark              Start DR Lab Corner Marking","info"),L("  gen test          Generate Test Pattern","info"),L("  fft load <a>      Load FFT Pair Image A","info"),L("  fft load <b>      Load FFT Pair Image B","info"),L("  fft run           Run FFT Pair Diff","info"),L("  cls               Clear Screen","info");break;case"cls":case"clear":S([]);break;case"ev":case"exposure":if(se.length<1){L(`Current EV: ${z.current.exposure}`,"info");return}const Se=parseFloat(se[0]);if(isNaN(Se)){L("Invalid EV value","err");return}z.current.exposure=Se,L(`EV set to ${Se} (run 'render' to apply)`);break;case"wb":if(se.length<2){L("Usage: wb <red_gain> <blue_gain>","err");return}const me=parseFloat(se[0]),ge=parseFloat(se[1]);if(isNaN(me)||isNaN(ge)){L("Invalid gains","err");return}z.current.wbGains=[me,ge],L(`WB set to R:${me} B:${ge}`);break;case"bl":case"black":if(se.length===0){L(`Current BL: ${((ye=z.current.blackLevel)==null?void 0:ye.join(" "))||"Auto"}`,"info");return}let Ce=se.map(Number);if(Ce.some(isNaN)){L("Invalid numbers","err");return}if(Ce.length===1&&(Ce=[Ce[0],Ce[0],Ce[0],Ce[0]]),Ce.length<4){L("Need 1 or 4 values","err");return}z.current.blackLevel=[Ce[0],Ce[1],Ce[2],Ce[3]],z.current.subtractBlackLevelFromStats=!0,z.current.showKadc=!0,L(`Black Level set: ${Ce.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if(se.length===0){L("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const De=parseInt(se[0]);if(isNaN(De)){L("Invalid method ID","err");return}z.current.demosaicMethod=De,L(`Demosaic set to ID ${De}`);break;case"matrix":if(se.length!==9){L("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const ze=se.map(Number);if(ze.some(isNaN)){L("Invalid matrix values","err");return}z.current.customMatrix=ze,L("Custom Color Matrix set.");break;case"xtrans":if(se[0]==="on"||se[0]==="true")m?(m(!0),L("X-Trans conversion ON")):L("Feature not available","err");else if(se[0]==="off"||se[0]==="false")m?(m(!1),L("X-Trans conversion OFF")):L("Feature not available","err");else if(se[0]==="phase"){if(se.length<3){L("Usage: xtrans phase <x> <y>","err");return}const Be=parseInt(se[1]),et=parseInt(se[2]);x&&(x({x:Be,y:et}),L(`X-Trans Phase set to (${Be}, ${et})`))}else L("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if(se[0]==="zero"){const Be=se[1]==="color"?"zero-dep-color":"zero-dependency";z.current.renderMode=Be,L(`Rendering Zero-Dependency (${Be})...`)}else if(se[0]==="unmix"){if(se.length<13){L("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const Be=se.slice(1).map(Number);if(Be.some(isNaN)){L("Invalid params","err");return}z.current.renderMode="advanced-zero-dep",z.current.advancedZeroDep={bl:[Be[0],Be[1],Be[2],Be[3]],bg:[Be[4],Be[5],Be[6],Be[7]],fg:[Be[8],Be[9],Be[10],Be[11]]},L("Rendering Advanced Unmix...")}else z.current.renderMode="standard",L("Rendering Standard Pipeline...");a({...z.current});break;case"sel":case"select":if(!r||!i){L("No image loaded","err");return}if(se[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if(se[0]==="center"){const Be=parseInt(se[1])||64,et=Math.floor((r.width-Be)/2),yt=Math.floor((r.height-Be)/2);i({x:et,y:yt,w:Be,h:Be})}else if(se.length===4){const[Be,et,yt,dt]=se.map(Number);if([Be,et,yt,dt].some(isNaN)){L("Invalid coordinates","err");return}i({x:Be,y:et,w:yt,h:dt})}else L("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),L("Interactive marking started. Click 4 corners on canvas."));break;case"gen":(se[0]==="test"||se[0]==="pattern")&&s&&(s(),L("Generated Test Pattern"));break;case"drlab":if(se[0]==="config"){const[Be,et,yt]=se.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(Be||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(et||10),e.onDrGridColsChange&&e.onDrGridColsChange(yt||10),L(`DR Grid Configured: Size=${Be}, Grid=${et}x${yt}`)}else se[0]==="batch"&&(se[1]==="pair"?(L("Select file pairs for DR Lab..."),(ie=E.current)==null||ie.click()):(L("Select single files for DR Lab..."),(X=R.current)==null||X.click()));break;case"fft":se[0]==="load"?se[1]==="a"?(le=T.current)==null||le.click():se[1]==="b"?(he=B.current)==null||he.click():L("Usage: fft load <a|b>","err"):se[0]==="run"?D.current.fileA&&D.current.fileB&&u?(L(`Processing Pair: ${D.current.fileA.name} - ${D.current.fileB.name}`),u(D.current.fileA,D.current.fileB,!1,!0)):L("Load both A and B first","err"):se[0]==="stack"?(L("Select files for Stack FFT..."),(oe=G.current)==null||oe.click()):se[0]==="batch"&&(L("Select files for Batch Diff...","info"),(je=V.current)==null||je.click());break;case"crosscalc":p&&(p(),L("Opened Cross-Calculator"));break;default:L(`Unknown command: ${fe}`,"err")}},W=ne=>{if(ne.key==="Enter"){const te=v.trim();if(!te)return;L(`> ${te}`,"in"),te.split(";").forEach(se=>{se.trim()&&H(se.trim())}),P(se=>[...se,te]),k(-1),y("")}else if(ne.key==="ArrowUp"){if(ne.preventDefault(),w.length>0){const te=j===-1?w.length-1:Math.max(0,j-1);k(te),y(w[te])}}else if(ne.key==="ArrowDown")if(ne.preventDefault(),j!==-1){const te=Math.min(w.length-1,j+1);k(te),y(w[te])}else y("")},J=(ne,te)=>{ne.target.files&&ne.target.files.length>0&&c&&(L(`Batch processing ${ne.target.files.length} files in ${te} mode...`),c(ne.target.files,te)),ne.target.value=""},Y=(ne,te)=>{var se;const fe=(se=ne.target.files)==null?void 0:se[0];fe&&(te==="A"?D.current.fileA=fe:D.current.fileB=fe,L(`Loaded ${te}: ${fe.name}`)),ne.target.value=""};return l.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[l.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[l.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),l.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),l.jsx("div",{ref:O,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:b.map(ne=>l.jsxs("div",{className:`mb-1 ${ne.type==="in"?"opacity-50":""} ${ne.type==="err"?"text-red-500":""} ${ne.type==="info"?"text-cyan-400":""}`,children:[ne.type!=="in"&&typeof ne.text=="string"&&!ne.text.startsWith(">")&&l.jsx("span",{className:"mr-2 opacity-50",children:">"}),ne.text]},ne.id))}),l.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[l.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),l.jsx("input",{ref:A,type:"text",value:v,onChange:ne=>y(ne.target.value),onKeyDown:W,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),l.jsx("input",{type:"file",ref:R,className:"hidden",multiple:!0,onChange:ne=>J(ne,"single")}),l.jsx("input",{type:"file",ref:E,className:"hidden",multiple:!0,onChange:ne=>J(ne,"pair")}),l.jsx("input",{type:"file",ref:T,className:"hidden",onChange:ne=>Y(ne,"A")}),l.jsx("input",{type:"file",ref:B,className:"hidden",onChange:ne=>Y(ne,"B")}),l.jsx("input",{type:"file",ref:G,className:"hidden",multiple:!0,onChange:ne=>{e.onProcessStackFft&&ne.target.files&&(L(`Loading ${ne.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(ne.target.files)),ne.target.value=""}}),l.jsx("input",{type:"file",ref:V,className:"hidden",multiple:!0,onChange:ne=>{e.onProcessBatchDiff&&ne.target.files&&(L("Starting Batch Diff..."),e.onProcessBatchDiff(ne.target.files)),ne.target.value=""}})]})}),e6=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=c=>{const u=[];for(let f=0;f<4;f++)r[f]===c&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const c=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(c)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(p=>d[p]=c),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d.some(p=>p>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let c=[];if(Array.isArray(s)?c=s.map(Number):typeof s=="string"?c=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(c=[s,s,s,s]),c.length===1&&!isNaN(c[0])&&(c=[c[0],c[0],c[0],c[0]]),c.length>=4&&!c.slice(0,4).some(isNaN)&&c.some(u=>u>0))return[c[0],c[1],c[2],c[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},t6=e=>{const[t,r]=C.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,c=C.useRef(null),u=C.useRef(!1),f=C.useRef(null);C.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),C.useEffect(()=>{var p;if(i&&n&&!u.current){u.current=!0;const m=e6(n,a),x=m&&m.some(b=>b>0);if(m&&x){console.log("[AutoApply] Detected Black Levels via Bridge:",m),(p=c.current)==null||p.log(`Auto-detected BL: ${m.join(" ")}`,"info");const b={...o,blackLevel:m,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};s(b)}}},[i,n,a,o,s]);const d=p=>{c.current&&c.current.log(p,"in")};return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[l.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),l.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),l.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[l.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:l.jsx(QA,{...e,onCommand:d})}),l.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:l.jsx(JA,{...e,ref:c})})]})]})},r6=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),n6=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),a6=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),i6=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),o6=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Xy=.1,Ky=16,s6=Math.log(Xy),l6=Math.log(Ky),c6=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Xy,Math.min(Ky,d)))},o=()=>{t(Math.min(Ky,e*1.25))},s=()=>{t(Math.max(Xy,e/1.25))},c=Math.log(e);return l.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[l.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:l.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?l.jsx(o6,{}):l.jsx(i6,{})})}),l.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[l.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:l.jsx(r6,{})}),l.jsx("input",{type:"range",min:s6,max:l6,step:"0.01",value:c,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),l.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:l.jsx(n6,{})}),l.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),l.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:l.jsx(a6,{})})]})]})},u6=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return l.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function Xj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Xj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function tr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Xj(e))&&(n&&(n+=" "),n+=t);return n}var f6=Array.isArray,Fa=f6,d6=typeof Sd=="object"&&Sd&&Sd.Object===Object&&Sd,Kj=d6,h6=Kj,p6=typeof self=="object"&&self&&self.Object===Object&&self,g6=h6||p6||Function("return this")(),no=g6,m6=no,y6=m6.Symbol,nd=y6,bw=nd,qj=Object.prototype,v6=qj.hasOwnProperty,x6=qj.toString,vu=bw?bw.toStringTag:void 0;function b6(e){var t=v6.call(e,vu),r=e[vu];try{e[vu]=void 0;var n=!0}catch{}var a=x6.call(e);return n&&(t?e[vu]=r:delete e[vu]),a}var w6=b6,k6=Object.prototype,S6=k6.toString;function j6(e){return S6.call(e)}var _6=j6,ww=nd,P6=w6,C6=_6,N6="[object Null]",O6="[object Undefined]",kw=ww?ww.toStringTag:void 0;function M6(e){return e==null?e===void 0?O6:N6:kw&&kw in Object(e)?P6(e):C6(e)}var Mo=M6;function A6(e){return e!=null&&typeof e=="object"}var Ao=A6,T6=Mo,E6=Ao,$6="[object Symbol]";function R6(e){return typeof e=="symbol"||E6(e)&&T6(e)==$6}var Vc=R6,D6=Fa,I6=Vc,L6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B6=/^\w*$/;function F6(e,t){if(D6(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||I6(e)?!0:B6.test(e)||!L6.test(e)||t!=null&&e in Object(t)}var M1=F6;function G6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ys=G6;const Hc=Ir(ys);var z6=Mo,U6=ys,W6="[object AsyncFunction]",V6="[object Function]",H6="[object GeneratorFunction]",X6="[object Proxy]";function K6(e){if(!U6(e))return!1;var t=z6(e);return t==V6||t==H6||t==W6||t==X6}var A1=K6;const At=Ir(A1);var q6=no,Y6=q6["__core-js_shared__"],Z6=Y6,mm=Z6,Sw=function(){var e=/[^.]+$/.exec(mm&&mm.keys&&mm.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Q6(e){return!!Sw&&Sw in e}var J6=Q6,eT=Function.prototype,tT=eT.toString;function rT(e){if(e!=null){try{return tT.call(e)}catch{}try{return e+""}catch{}}return""}var Yj=rT,nT=A1,aT=J6,iT=ys,oT=Yj,sT=/[\\^$.*+?()[\]{}|]/g,lT=/^\[object .+?Constructor\]$/,cT=Function.prototype,uT=Object.prototype,fT=cT.toString,dT=uT.hasOwnProperty,hT=RegExp("^"+fT.call(dT).replace(sT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pT(e){if(!iT(e)||aT(e))return!1;var t=nT(e)?hT:lT;return t.test(oT(e))}var gT=pT;function mT(e,t){return e==null?void 0:e[t]}var yT=mT,vT=gT,xT=yT;function bT(e,t){var r=xT(e,t);return vT(r)?r:void 0}var vl=bT,wT=vl,kT=wT(Object,"create"),kp=kT,jw=kp;function ST(){this.__data__=jw?jw(null):{},this.size=0}var jT=ST;function _T(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var PT=_T,CT=kp,NT="__lodash_hash_undefined__",OT=Object.prototype,MT=OT.hasOwnProperty;function AT(e){var t=this.__data__;if(CT){var r=t[e];return r===NT?void 0:r}return MT.call(t,e)?t[e]:void 0}var TT=AT,ET=kp,$T=Object.prototype,RT=$T.hasOwnProperty;function DT(e){var t=this.__data__;return ET?t[e]!==void 0:RT.call(t,e)}var IT=DT,LT=kp,BT="__lodash_hash_undefined__";function FT(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=LT&&t===void 0?BT:t,this}var GT=FT,zT=jT,UT=PT,WT=TT,VT=IT,HT=GT;function Xc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Xc.prototype.clear=zT;Xc.prototype.delete=UT;Xc.prototype.get=WT;Xc.prototype.has=VT;Xc.prototype.set=HT;var XT=Xc;function KT(){this.__data__=[],this.size=0}var qT=KT;function YT(e,t){return e===t||e!==e&&t!==t}var T1=YT,ZT=T1;function QT(e,t){for(var r=e.length;r--;)if(ZT(e[r][0],t))return r;return-1}var Sp=QT,JT=Sp,e8=Array.prototype,t8=e8.splice;function r8(e){var t=this.__data__,r=JT(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():t8.call(t,r,1),--this.size,!0}var n8=r8,a8=Sp;function i8(e){var t=this.__data__,r=a8(t,e);return r<0?void 0:t[r][1]}var o8=i8,s8=Sp;function l8(e){return s8(this.__data__,e)>-1}var c8=l8,u8=Sp;function f8(e,t){var r=this.__data__,n=u8(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var d8=f8,h8=qT,p8=n8,g8=o8,m8=c8,y8=d8;function Kc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kc.prototype.clear=h8;Kc.prototype.delete=p8;Kc.prototype.get=g8;Kc.prototype.has=m8;Kc.prototype.set=y8;var jp=Kc,v8=vl,x8=no,b8=v8(x8,"Map"),E1=b8,_w=XT,w8=jp,k8=E1;function S8(){this.size=0,this.__data__={hash:new _w,map:new(k8||w8),string:new _w}}var j8=S8;function _8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var P8=_8,C8=P8;function N8(e,t){var r=e.__data__;return C8(t)?r[typeof t=="string"?"string":"hash"]:r.map}var _p=N8,O8=_p;function M8(e){var t=O8(this,e).delete(e);return this.size-=t?1:0,t}var A8=M8,T8=_p;function E8(e){return T8(this,e).get(e)}var $8=E8,R8=_p;function D8(e){return R8(this,e).has(e)}var I8=D8,L8=_p;function B8(e,t){var r=L8(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var F8=B8,G8=j8,z8=A8,U8=$8,W8=I8,V8=F8;function qc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qc.prototype.clear=G8;qc.prototype.delete=z8;qc.prototype.get=U8;qc.prototype.has=W8;qc.prototype.set=V8;var $1=qc,Zj=$1,H8="Expected a function";function R1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(H8);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(R1.Cache||Zj),r}R1.Cache=Zj;var Qj=R1;const X8=Ir(Qj);var K8=Qj,q8=500;function Y8(e){var t=K8(e,function(n){return r.size===q8&&r.clear(),n}),r=t.cache;return t}var Z8=Y8,Q8=Z8,J8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eE=/\\(\\)?/g,tE=Q8(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(J8,function(r,n,a,i){t.push(a?i.replace(eE,"$1"):n||r)}),t}),rE=tE;function nE(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var D1=nE,Pw=nd,aE=D1,iE=Fa,oE=Vc,Cw=Pw?Pw.prototype:void 0,Nw=Cw?Cw.toString:void 0;function Jj(e){if(typeof e=="string")return e;if(iE(e))return aE(e,Jj)+"";if(oE(e))return Nw?Nw.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var sE=Jj,lE=sE;function cE(e){return e==null?"":lE(e)}var e_=cE,uE=Fa,fE=M1,dE=rE,hE=e_;function pE(e,t){return uE(e)?e:fE(e,t)?[e]:dE(hE(e))}var t_=pE,gE=Vc;function mE(e){if(typeof e=="string"||gE(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Pp=mE,yE=t_,vE=Pp;function xE(e,t){t=yE(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[vE(t[r++])];return r&&r==n?e:void 0}var I1=xE,bE=I1;function wE(e,t,r){var n=e==null?void 0:bE(e,t);return n===void 0?r:n}var r_=wE;const hi=Ir(r_);function kE(e){return e==null}var SE=kE;const Nt=Ir(SE);var jE=Mo,_E=Fa,PE=Ao,CE="[object String]";function NE(e){return typeof e=="string"||!_E(e)&&PE(e)&&jE(e)==CE}var OE=NE;const ll=Ir(OE);var n_={exports:{}},Nr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=Symbol.for("react.element"),B1=Symbol.for("react.portal"),Cp=Symbol.for("react.fragment"),Np=Symbol.for("react.strict_mode"),Op=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Ap=Symbol.for("react.context"),ME=Symbol.for("react.server_context"),Tp=Symbol.for("react.forward_ref"),Ep=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),Rp=Symbol.for("react.memo"),Dp=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),a_;a_=Symbol.for("react.module.reference");function yi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case L1:switch(e=e.type,e){case Cp:case Op:case Np:case Ep:case $p:return e;default:switch(e=e&&e.$$typeof,e){case ME:case Ap:case Tp:case Dp:case Rp:case Mp:return e;default:return t}}case B1:return t}}}Nr.ContextConsumer=Ap;Nr.ContextProvider=Mp;Nr.Element=L1;Nr.ForwardRef=Tp;Nr.Fragment=Cp;Nr.Lazy=Dp;Nr.Memo=Rp;Nr.Portal=B1;Nr.Profiler=Op;Nr.StrictMode=Np;Nr.Suspense=Ep;Nr.SuspenseList=$p;Nr.isAsyncMode=function(){return!1};Nr.isConcurrentMode=function(){return!1};Nr.isContextConsumer=function(e){return yi(e)===Ap};Nr.isContextProvider=function(e){return yi(e)===Mp};Nr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===L1};Nr.isForwardRef=function(e){return yi(e)===Tp};Nr.isFragment=function(e){return yi(e)===Cp};Nr.isLazy=function(e){return yi(e)===Dp};Nr.isMemo=function(e){return yi(e)===Rp};Nr.isPortal=function(e){return yi(e)===B1};Nr.isProfiler=function(e){return yi(e)===Op};Nr.isStrictMode=function(e){return yi(e)===Np};Nr.isSuspense=function(e){return yi(e)===Ep};Nr.isSuspenseList=function(e){return yi(e)===$p};Nr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Cp||e===Op||e===Np||e===Ep||e===$p||e===AE||typeof e=="object"&&e!==null&&(e.$$typeof===Dp||e.$$typeof===Rp||e.$$typeof===Mp||e.$$typeof===Ap||e.$$typeof===Tp||e.$$typeof===a_||e.getModuleId!==void 0)};Nr.typeOf=yi;n_.exports=Nr;var TE=n_.exports,EE=Mo,$E=Ao,RE="[object Number]";function DE(e){return typeof e=="number"||$E(e)&&EE(e)==RE}var i_=DE;const IE=Ir(i_);var LE=i_;function BE(e){return LE(e)&&e!=+e}var FE=BE;const Yc=Ir(FE);var Oi=function(t){return t===0?0:t>0?1:-1},Gs=function(t){return ll(t)&&t.indexOf("%")===t.length-1},Ee=function(t){return IE(t)&&!Yc(t)},GE=function(t){return Nt(t)},Vn=function(t){return Ee(t)||ll(t)},zE=0,xl=function(t){var r=++zE;return"".concat(t||"").concat(r)},cl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(t)&&!ll(t))return n;var i;if(Gs(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Yc(i)&&(i=n),a&&i>r&&(i=r),i},zo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},UE=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},An=function(t,r){return Ee(t)&&Ee(r)?function(n){return t+n*(r-t)}:function(){return r}};function Z0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):hi(n,t))===r})}var WE=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,c=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),c=Math.max(c,u);var p=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:c,a:p,b:(a-p*n)/r}},VE=function(t,r){return Ee(t)&&Ee(r)?t-r:ll(t)&&ll(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function tc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function qy(e){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qy(e)}var HE=["viewBox","children"],XE=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ow=["points","pathLength"],ym={svg:HE,polygon:Ow,polyline:Ow},F1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Q0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),!Hc(n))return null;var a={};return Object.keys(n).forEach(function(i){F1.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},KE=function(t,r,n){return function(a){return t(r,n,a),null}},mf=function(t,r,n){if(!Hc(t)||qy(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];F1.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=KE(o,r,n))}),a},qE=["children"],YE=["children"];function Mw(e,t){if(e==null)return{};var r=ZE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Yy(e){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yy(e)}var Aw={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Tw=null,vm=null,G1=function e(t){if(t===Tw&&Array.isArray(vm))return vm;var r=[];return C.Children.forEach(t,function(n){Nt(n)||(TE.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),vm=r,Tw=t,r};function Ba(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return xo(a)}):n=[xo(t)],G1(e).forEach(function(a){var i=hi(a,"type.displayName")||hi(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Va(e,t){var r=Ba(e,t);return r&&r[0]}var Ew=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Ee(n)||n<=0||!Ee(a)||a<=0)},QE=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],JE=function(t){return t&&t.type&&ll(t.type)&&QE.indexOf(t.type)>=0},o_=function(t){return t&&Yy(t)==="object"&&"clipDot"in t},e$=function(t,r,n,a){var i,o=(i=ym==null?void 0:ym[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!At(t)&&(a&&o.includes(r)||XE.includes(r))||n&&F1.includes(r)},Ot=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(C.isValidElement(t)&&(a=t.props),!Hc(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;e$((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},Zy=function e(t,r){if(t===r)return!0;var n=C.Children.count(t);if(n!==C.Children.count(r))return!1;if(n===0)return!0;if(n===1)return $w(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!$w(i,o))return!1}return!0},$w=function(t,r){if(Nt(t)&&Nt(r))return!0;if(!Nt(t)&&!Nt(r)){var n=t.props||{},a=n.children,i=Mw(n,qE),o=r.props||{},s=o.children,c=Mw(o,YE);return a&&s?tc(i,c)&&Zy(a,s):!a&&!s?tc(i,c):!1}return!1},Rw=function(t,r){var n=[],a={};return G1(t).forEach(function(i,o){if(JE(i))n.push(i);else if(i){var s=xo(i.type),c=r[s]||{},u=c.handler,f=c.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},t$=function(t){var r=t&&t.type;return r&&Aw[r]?Aw[r]:null},r$=function(t,r){return G1(r).indexOf(t)},n$=["children","width","height","viewBox","className","style","title","desc"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(this,arguments)}function a$(e,t){if(e==null)return{};var r=i$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jy(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,c=e.desc,u=a$(e,n$),f=a||{width:r,height:n,x:0,y:0},d=tr("recharts-surface",i);return ee.createElement("svg",Qy({},Ot(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ee.createElement("title",null,s),ee.createElement("desc",null,c),t)}var o$=["children","className"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ev.apply(this,arguments)}function s$(e,t){if(e==null)return{};var r=l$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kr=ee.forwardRef(function(e,t){var r=e.children,n=e.className,a=s$(e,o$),i=tr("recharts-layer",n);return ee.createElement("g",ev({className:i},Ot(a,!0),{ref:t}),r)}),bo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function c$(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var u$=c$,f$=u$;function d$(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:f$(e,t,r)}var h$=d$,p$="\\ud800-\\udfff",g$="\\u0300-\\u036f",m$="\\ufe20-\\ufe2f",y$="\\u20d0-\\u20ff",v$=g$+m$+y$,x$="\\ufe0e\\ufe0f",b$="\\u200d",w$=RegExp("["+b$+p$+v$+x$+"]");function k$(e){return w$.test(e)}var s_=k$;function S$(e){return e.split("")}var j$=S$,l_="\\ud800-\\udfff",_$="\\u0300-\\u036f",P$="\\ufe20-\\ufe2f",C$="\\u20d0-\\u20ff",N$=_$+P$+C$,O$="\\ufe0e\\ufe0f",M$="["+l_+"]",tv="["+N$+"]",rv="\\ud83c[\\udffb-\\udfff]",A$="(?:"+tv+"|"+rv+")",c_="[^"+l_+"]",u_="(?:\\ud83c[\\udde6-\\uddff]){2}",f_="[\\ud800-\\udbff][\\udc00-\\udfff]",T$="\\u200d",d_=A$+"?",h_="["+O$+"]?",E$="(?:"+T$+"(?:"+[c_,u_,f_].join("|")+")"+h_+d_+")*",$$=h_+d_+E$,R$="(?:"+[c_+tv+"?",tv,u_,f_,M$].join("|")+")",D$=RegExp(rv+"(?="+rv+")|"+R$+$$,"g");function I$(e){return e.match(D$)||[]}var L$=I$,B$=j$,F$=s_,G$=L$;function z$(e){return F$(e)?G$(e):B$(e)}var U$=z$,W$=h$,V$=s_,H$=U$,X$=e_;function K$(e){return function(t){t=X$(t);var r=V$(t)?H$(t):void 0,n=r?r[0]:t.charAt(0),a=r?W$(r,1).join(""):t.slice(1);return n[e]()+a}}var q$=K$,Y$=q$,Z$=Y$("toUpperCase"),Q$=Z$;const Ip=Ir(Q$);function Wr(e){return function(){return e}}const p_=Math.cos,J0=Math.sin,Di=Math.sqrt,eh=Math.PI,Lp=2*eh,nv=Math.PI,av=2*nv,Ts=1e-6,J$=av-Ts;function g_(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function e7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return g_;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class t7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?g_:e7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,c=n-t,u=a-r,f=o-t,d=s-r,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Ts)if(!(Math.abs(d*c-u*f)>Ts)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,x=a-s,b=c*c+u*u,S=m*m+x*x,v=Math.sqrt(b),y=Math.sqrt(p),w=i*Math.tan((nv-Math.acos((b+p-S)/(2*v*y)))/2),P=w/y,j=w/v;Math.abs(P-1)>Ts&&this._append`L${t+P*f},${r+P*d}`,this._append`A${i},${i},0,0,${+(d*m>f*x)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),c=n*Math.sin(a),u=t+s,f=r+c,d=1^o,p=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Ts||Math.abs(this._y1-f)>Ts)&&this._append`L${u},${f}`,n&&(p<0&&(p=p%av+av),p>J$?this._append`A${n},${n},0,1,${d},${t-s},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:p>Ts&&this._append`A${n},${n},0,${+(p>=nv)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function z1(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new t7(t)}function U1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function m_(e){this._context=e}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Bp(e){return new m_(e)}function y_(e){return e[0]}function v_(e){return e[1]}function x_(e,t){var r=Wr(!0),n=null,a=Bp,i=null,o=z1(s);e=typeof e=="function"?e:e===void 0?y_:Wr(e),t=typeof t=="function"?t:t===void 0?v_:Wr(t);function s(c){var u,f=(c=U1(c)).length,d,p=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(d,u,c),+t(d,u,c));if(m)return i=null,m+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:Wr(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:Wr(+c),s):t},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Wr(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),s):a},s.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),s):n},s}function Vd(e,t,r){var n=null,a=Wr(!0),i=null,o=Bp,s=null,c=z1(u);e=typeof e=="function"?e:e===void 0?y_:Wr(+e),t=typeof t=="function"?t:Wr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?v_:Wr(+r);function u(d){var p,m,x,b=(d=U1(d)).length,S,v=!1,y,w=new Array(b),P=new Array(b);for(i==null&&(s=o(y=c())),p=0;p<=b;++p){if(!(p<b&&a(S=d[p],p,d))===v)if(v=!v)m=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=p-1;x>=m;--x)s.point(w[x],P[x]);s.lineEnd(),s.areaEnd()}v&&(w[p]=+e(S,p,d),P[p]=+t(S,p,d),s.point(n?+n(S,p,d):w[p],r?+r(S,p,d):P[p]))}if(y)return s=null,y+""||null}function f(){return x_().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Wr(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Wr(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Wr(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Wr(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Wr(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Wr(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Wr(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class b_{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function r7(e){return new b_(e,!0)}function n7(e){return new b_(e,!1)}const W1={draw(e,t){const r=Di(t/eh);e.moveTo(r,0),e.arc(0,0,r,0,Lp)}},a7={draw(e,t){const r=Di(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},w_=Di(1/3),i7=w_*2,o7={draw(e,t){const r=Di(t/i7),n=r*w_;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},s7={draw(e,t){const r=Di(t),n=-r/2;e.rect(n,n,r,r)}},l7=.8908130915292852,k_=J0(eh/10)/J0(7*eh/10),c7=J0(Lp/10)*k_,u7=-p_(Lp/10)*k_,f7={draw(e,t){const r=Di(t*l7),n=c7*r,a=u7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Lp*i/5,s=p_(o),c=J0(o);e.lineTo(c*r,-s*r),e.lineTo(s*n-c*a,c*n+s*a)}e.closePath()}},xm=Di(3),d7={draw(e,t){const r=-Di(t/(xm*3));e.moveTo(0,r*2),e.lineTo(-xm*r,-r),e.lineTo(xm*r,-r),e.closePath()}},ni=-.5,ai=Di(3)/2,iv=1/Di(12),h7=(iv/2+1)*3,p7={draw(e,t){const r=Di(t/h7),n=r/2,a=r*iv,i=n,o=r*iv+r,s=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,c),e.lineTo(ni*n-ai*a,ai*n+ni*a),e.lineTo(ni*i-ai*o,ai*i+ni*o),e.lineTo(ni*s-ai*c,ai*s+ni*c),e.lineTo(ni*n+ai*a,ni*a-ai*n),e.lineTo(ni*i+ai*o,ni*o-ai*i),e.lineTo(ni*s+ai*c,ni*c-ai*s),e.closePath()}};function g7(e,t){let r=null,n=z1(a);e=typeof e=="function"?e:Wr(e||W1),t=typeof t=="function"?t:Wr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Wr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Wr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function th(){}function rh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function S_(e){this._context=e}S_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m7(e){return new S_(e)}function j_(e){this._context=e}j_.prototype={areaStart:th,areaEnd:th,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:rh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y7(e){return new j_(e)}function __(e){this._context=e}__.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:rh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v7(e){return new __(e)}function P_(e){this._context=e}P_.prototype={areaStart:th,areaEnd:th,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function x7(e){return new P_(e)}function Dw(e){return e<0?-1:1}function Iw(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(Dw(i)+Dw(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Lw(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function bm(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function nh(e){this._context=e}nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bm(this,this._t0,Lw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bm(this,Lw(this,r=Iw(this,e,t)),r);break;default:bm(this,this._t0,r=Iw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function C_(e){this._context=new N_(e)}(C_.prototype=Object.create(nh.prototype)).point=function(e,t){nh.prototype.point.call(this,t,e)};function N_(e){this._context=e}N_.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function b7(e){return new nh(e)}function w7(e){return new C_(e)}function O_(e){this._context=e}O_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Bw(e),a=Bw(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Bw(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function k7(e){return new O_(e)}function Fp(e,t){this._context=e,this._t=t}Fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function S7(e){return new Fp(e,.5)}function j7(e){return new Fp(e,0)}function _7(e){return new Fp(e,1)}function pc(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function ov(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function P7(e,t){return e[t]}function C7(e){const t=[];return t.key=e,t}function N7(){var e=Wr([]),t=ov,r=pc,n=P7;function a(i){var o=Array.from(e.apply(this,arguments),C7),s,c=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<c;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=U1(t(o));s<c;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Wr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Wr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?ov:typeof i=="function"?i:Wr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??pc,a):r},a}function O7(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}pc(e,t)}}function M7(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}pc(e,t)}}function A7(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,c=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,p=f[n-1][1]||0,m=(d-p)/2,x=0;x<s;++x){var b=e[t[x]],S=b[n][1]||0,v=b[n-1][1]||0;m+=S-v}c+=d,u+=m*d}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,pc(e,t)}}function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}var T7=["type","size","sizeType"];function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sv.apply(this,arguments)}function Fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fw(Object(r),!0).forEach(function(n){E7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E7(e,t,r){return t=$7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $7(e){var t=R7(e,"string");return yf(t)=="symbol"?t:t+""}function R7(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D7(e,t){if(e==null)return{};var r=I7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function I7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var M_={symbolCircle:W1,symbolCross:a7,symbolDiamond:o7,symbolSquare:s7,symbolStar:f7,symbolTriangle:d7,symbolWye:p7},L7=Math.PI/180,B7=function(t){var r="symbol".concat(Ip(t));return M_[r]||W1},F7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*L7;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},G7=function(t,r){M_["symbol".concat(Ip(t))]=r},Gp=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,c=D7(t,T7),u=Gw(Gw({},c),{},{type:n,size:i,sizeType:s}),f=function(){var S=B7(n),v=g7().type(S).size(F7(i,s,n));return v()},d=u.className,p=u.cx,m=u.cy,x=Ot(u,!0);return p===+p&&m===+m&&i===+i?ee.createElement("path",sv({},x,{className:tr("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(m,")"),d:f()})):null};Gp.registerSymbol=G7;function gc(e){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(e)}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lv.apply(this,arguments)}function zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zw(Object(r),!0).forEach(function(n){vf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T_(n.key),n)}}function V7(e,t,r){return t&&W7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H7(e,t,r){return t=ah(t),X7(e,A_()?Reflect.construct(t,r||[],ah(e).constructor):t.apply(e,r))}function X7(e,t){if(t&&(gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K7(e)}function K7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A_=function(){return!!e})()}function ah(e){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ah(e)}function q7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cv(e,t)}function vf(e,t,r){return t=T_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T_(e){var t=Y7(e,"string");return gc(t)=="symbol"?t:t+""}function Y7(e,t){if(gc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ii=32,V1=function(e){function t(){return U7(this,t),H7(this,t,arguments)}return q7(t,e),V7(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ii/2,o=ii/6,s=ii/3,c=n.inactive?a:n.color;if(n.type==="plainline")return ee.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ii,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ee.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(ii,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ee.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ii/8,"h").concat(ii,"v").concat(ii*3/4,"h").concat(-ii,"z"),className:"recharts-legend-icon"});if(ee.isValidElement(n.legendIcon)){var u=z7({},n);return delete u.legendIcon,ee.cloneElement(n.legendIcon,u)}return ee.createElement(Gp,{fill:c,cx:i,cy:i,size:ii,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:ii,height:ii},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,x){var b=m.formatter||c,S=tr(vf(vf({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",m.inactive));if(m.type==="none")return null;var v=At(m.value)?null:m.value;bo(!At(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return ee.createElement("li",lv({className:S,style:d,key:"legend-item-".concat(x)},mf(n.props,m,x)),ee.createElement(Jy,{width:o,height:o,viewBox:f,style:p},n.renderIcon(m)),ee.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},b?b(v,m,x):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ee.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(C.PureComponent);vf(V1,"displayName","Legend");vf(V1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Z7=jp;function Q7(){this.__data__=new Z7,this.size=0}var J7=Q7;function e9(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var t9=e9;function r9(e){return this.__data__.get(e)}var n9=r9;function a9(e){return this.__data__.has(e)}var i9=a9,o9=jp,s9=E1,l9=$1,c9=200;function u9(e,t){var r=this.__data__;if(r instanceof o9){var n=r.__data__;if(!s9||n.length<c9-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new l9(n)}return r.set(e,t),this.size=r.size,this}var f9=u9,d9=jp,h9=J7,p9=t9,g9=n9,m9=i9,y9=f9;function Zc(e){var t=this.__data__=new d9(e);this.size=t.size}Zc.prototype.clear=h9;Zc.prototype.delete=p9;Zc.prototype.get=g9;Zc.prototype.has=m9;Zc.prototype.set=y9;var E_=Zc,v9="__lodash_hash_undefined__";function x9(e){return this.__data__.set(e,v9),this}var b9=x9;function w9(e){return this.__data__.has(e)}var k9=w9,S9=$1,j9=b9,_9=k9;function ih(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new S9;++t<r;)this.add(e[t])}ih.prototype.add=ih.prototype.push=j9;ih.prototype.has=_9;var $_=ih;function P9(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var R_=P9;function C9(e,t){return e.has(t)}var D_=C9,N9=$_,O9=R_,M9=D_,A9=1,T9=2;function E9(e,t,r,n,a,i){var o=r&A9,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,p=!0,m=r&T9?new N9:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var x=e[d],b=t[d];if(n)var S=o?n(b,x,d,t,e,i):n(x,b,d,e,t,i);if(S!==void 0){if(S)continue;p=!1;break}if(m){if(!O9(t,function(v,y){if(!M9(m,y)&&(x===v||a(x,v,r,n,i)))return m.push(y)})){p=!1;break}}else if(!(x===b||a(x,b,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var I_=E9,$9=no,R9=$9.Uint8Array,D9=R9;function I9(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var L9=I9;function B9(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var H1=B9,Uw=nd,Ww=D9,F9=T1,G9=I_,z9=L9,U9=H1,W9=1,V9=2,H9="[object Boolean]",X9="[object Date]",K9="[object Error]",q9="[object Map]",Y9="[object Number]",Z9="[object RegExp]",Q9="[object Set]",J9="[object String]",eR="[object Symbol]",tR="[object ArrayBuffer]",rR="[object DataView]",Vw=Uw?Uw.prototype:void 0,wm=Vw?Vw.valueOf:void 0;function nR(e,t,r,n,a,i,o){switch(r){case rR:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case tR:return!(e.byteLength!=t.byteLength||!i(new Ww(e),new Ww(t)));case H9:case X9:case Y9:return F9(+e,+t);case K9:return e.name==t.name&&e.message==t.message;case Z9:case J9:return e==t+"";case q9:var s=z9;case Q9:var c=n&W9;if(s||(s=U9),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=V9,o.set(e,t);var f=G9(s(e),s(t),n,a,i,o);return o.delete(e),f;case eR:if(wm)return wm.call(e)==wm.call(t)}return!1}var aR=nR;function iR(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var L_=iR,oR=L_,sR=Fa;function lR(e,t,r){var n=t(e);return sR(e)?n:oR(n,r(e))}var cR=lR;function uR(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var fR=uR;function dR(){return[]}var hR=dR,pR=fR,gR=hR,mR=Object.prototype,yR=mR.propertyIsEnumerable,Hw=Object.getOwnPropertySymbols,vR=Hw?function(e){return e==null?[]:(e=Object(e),pR(Hw(e),function(t){return yR.call(e,t)}))}:gR,xR=vR;function bR(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var wR=bR,kR=Mo,SR=Ao,jR="[object Arguments]";function _R(e){return SR(e)&&kR(e)==jR}var PR=_R,Xw=PR,CR=Ao,B_=Object.prototype,NR=B_.hasOwnProperty,OR=B_.propertyIsEnumerable,MR=Xw(function(){return arguments}())?Xw:function(e){return CR(e)&&NR.call(e,"callee")&&!OR.call(e,"callee")},X1=MR,oh={exports:{}};function AR(){return!1}var TR=AR;oh.exports;(function(e,t){var r=no,n=TR,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||n;e.exports=u})(oh,oh.exports);var F_=oh.exports,ER=9007199254740991,$R=/^(?:0|[1-9]\d*)$/;function RR(e,t){var r=typeof e;return t=t??ER,!!t&&(r=="number"||r!="symbol"&&$R.test(e))&&e>-1&&e%1==0&&e<t}var K1=RR,DR=9007199254740991;function IR(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=DR}var q1=IR,LR=Mo,BR=q1,FR=Ao,GR="[object Arguments]",zR="[object Array]",UR="[object Boolean]",WR="[object Date]",VR="[object Error]",HR="[object Function]",XR="[object Map]",KR="[object Number]",qR="[object Object]",YR="[object RegExp]",ZR="[object Set]",QR="[object String]",JR="[object WeakMap]",eD="[object ArrayBuffer]",tD="[object DataView]",rD="[object Float32Array]",nD="[object Float64Array]",aD="[object Int8Array]",iD="[object Int16Array]",oD="[object Int32Array]",sD="[object Uint8Array]",lD="[object Uint8ClampedArray]",cD="[object Uint16Array]",uD="[object Uint32Array]",Yr={};Yr[rD]=Yr[nD]=Yr[aD]=Yr[iD]=Yr[oD]=Yr[sD]=Yr[lD]=Yr[cD]=Yr[uD]=!0;Yr[GR]=Yr[zR]=Yr[eD]=Yr[UR]=Yr[tD]=Yr[WR]=Yr[VR]=Yr[HR]=Yr[XR]=Yr[KR]=Yr[qR]=Yr[YR]=Yr[ZR]=Yr[QR]=Yr[JR]=!1;function fD(e){return FR(e)&&BR(e.length)&&!!Yr[LR(e)]}var dD=fD;function hD(e){return function(t){return e(t)}}var G_=hD,sh={exports:{}};sh.exports;(function(e,t){var r=Kj,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(sh,sh.exports);var pD=sh.exports,gD=dD,mD=G_,Kw=pD,qw=Kw&&Kw.isTypedArray,yD=qw?mD(qw):gD,z_=yD,vD=wR,xD=X1,bD=Fa,wD=F_,kD=K1,SD=z_,jD=Object.prototype,_D=jD.hasOwnProperty;function PD(e,t){var r=bD(e),n=!r&&xD(e),a=!r&&!n&&wD(e),i=!r&&!n&&!a&&SD(e),o=r||n||a||i,s=o?vD(e.length,String):[],c=s.length;for(var u in e)(t||_D.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||kD(u,c)))&&s.push(u);return s}var CD=PD,ND=Object.prototype;function OD(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ND;return e===r}var MD=OD;function AD(e,t){return function(r){return e(t(r))}}var U_=AD,TD=U_,ED=TD(Object.keys,Object),$D=ED,RD=MD,DD=$D,ID=Object.prototype,LD=ID.hasOwnProperty;function BD(e){if(!RD(e))return DD(e);var t=[];for(var r in Object(e))LD.call(e,r)&&r!="constructor"&&t.push(r);return t}var FD=BD,GD=A1,zD=q1;function UD(e){return e!=null&&zD(e.length)&&!GD(e)}var ad=UD,WD=CD,VD=FD,HD=ad;function XD(e){return HD(e)?WD(e):VD(e)}var zp=XD,KD=cR,qD=xR,YD=zp;function ZD(e){return KD(e,YD,qD)}var QD=ZD,Yw=QD,JD=1,eI=Object.prototype,tI=eI.hasOwnProperty;function rI(e,t,r,n,a,i){var o=r&JD,s=Yw(e),c=s.length,u=Yw(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var p=s[d];if(!(o?p in t:tI.call(t,p)))return!1}var m=i.get(e),x=i.get(t);if(m&&x)return m==t&&x==e;var b=!0;i.set(e,t),i.set(t,e);for(var S=o;++d<c;){p=s[d];var v=e[p],y=t[p];if(n)var w=o?n(y,v,p,t,e,i):n(v,y,p,e,t,i);if(!(w===void 0?v===y||a(v,y,r,n,i):w)){b=!1;break}S||(S=p=="constructor")}if(b&&!S){var P=e.constructor,j=t.constructor;P!=j&&"constructor"in e&&"constructor"in t&&!(typeof P=="function"&&P instanceof P&&typeof j=="function"&&j instanceof j)&&(b=!1)}return i.delete(e),i.delete(t),b}var nI=rI,aI=vl,iI=no,oI=aI(iI,"DataView"),sI=oI,lI=vl,cI=no,uI=lI(cI,"Promise"),fI=uI,dI=vl,hI=no,pI=dI(hI,"Set"),W_=pI,gI=vl,mI=no,yI=gI(mI,"WeakMap"),vI=yI,uv=sI,fv=E1,dv=fI,hv=W_,pv=vI,V_=Mo,Qc=Yj,Zw="[object Map]",xI="[object Object]",Qw="[object Promise]",Jw="[object Set]",ek="[object WeakMap]",tk="[object DataView]",bI=Qc(uv),wI=Qc(fv),kI=Qc(dv),SI=Qc(hv),jI=Qc(pv),Es=V_;(uv&&Es(new uv(new ArrayBuffer(1)))!=tk||fv&&Es(new fv)!=Zw||dv&&Es(dv.resolve())!=Qw||hv&&Es(new hv)!=Jw||pv&&Es(new pv)!=ek)&&(Es=function(e){var t=V_(e),r=t==xI?e.constructor:void 0,n=r?Qc(r):"";if(n)switch(n){case bI:return tk;case wI:return Zw;case kI:return Qw;case SI:return Jw;case jI:return ek}return t});var _I=Es,km=E_,PI=I_,CI=aR,NI=nI,rk=_I,nk=Fa,ak=F_,OI=z_,MI=1,ik="[object Arguments]",ok="[object Array]",Hd="[object Object]",AI=Object.prototype,sk=AI.hasOwnProperty;function TI(e,t,r,n,a,i){var o=nk(e),s=nk(t),c=o?ok:rk(e),u=s?ok:rk(t);c=c==ik?Hd:c,u=u==ik?Hd:u;var f=c==Hd,d=u==Hd,p=c==u;if(p&&ak(e)){if(!ak(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new km),o||OI(e)?PI(e,t,r,n,a,i):CI(e,t,c,r,n,a,i);if(!(r&MI)){var m=f&&sk.call(e,"__wrapped__"),x=d&&sk.call(t,"__wrapped__");if(m||x){var b=m?e.value():e,S=x?t.value():t;return i||(i=new km),a(b,S,r,n,i)}}return p?(i||(i=new km),NI(e,t,r,n,a,i)):!1}var EI=TI,$I=EI,lk=Ao;function H_(e,t,r,n,a){return e===t?!0:e==null||t==null||!lk(e)&&!lk(t)?e!==e&&t!==t:$I(e,t,r,n,H_,a)}var Y1=H_,RI=E_,DI=Y1,II=1,LI=2;function BI(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var c=s[0],u=e[c],f=s[1];if(o&&s[2]){if(u===void 0&&!(c in e))return!1}else{var d=new RI;if(n)var p=n(u,f,c,e,t,d);if(!(p===void 0?DI(f,u,II|LI,n,d):p))return!1}}return!0}var FI=BI,GI=ys;function zI(e){return e===e&&!GI(e)}var X_=zI,UI=X_,WI=zp;function VI(e){for(var t=WI(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,UI(a)]}return t}var HI=VI;function XI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var K_=XI,KI=FI,qI=HI,YI=K_;function ZI(e){var t=qI(e);return t.length==1&&t[0][2]?YI(t[0][0],t[0][1]):function(r){return r===e||KI(r,e,t)}}var QI=ZI;function JI(e,t){return e!=null&&t in Object(e)}var eL=JI,tL=t_,rL=X1,nL=Fa,aL=K1,iL=q1,oL=Pp;function sL(e,t,r){t=tL(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=oL(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&iL(a)&&aL(o,a)&&(nL(e)||rL(e)))}var lL=sL,cL=eL,uL=lL;function fL(e,t){return e!=null&&uL(e,t,cL)}var dL=fL,hL=Y1,pL=r_,gL=dL,mL=M1,yL=X_,vL=K_,xL=Pp,bL=1,wL=2;function kL(e,t){return mL(e)&&yL(t)?vL(xL(e),t):function(r){var n=pL(r,e);return n===void 0&&n===t?gL(r,e):hL(t,n,bL|wL)}}var SL=kL;function jL(e){return e}var Jc=jL;function _L(e){return function(t){return t==null?void 0:t[e]}}var PL=_L,CL=I1;function NL(e){return function(t){return CL(t,e)}}var OL=NL,ML=PL,AL=OL,TL=M1,EL=Pp;function $L(e){return TL(e)?ML(EL(e)):AL(e)}var RL=$L,DL=QI,IL=SL,LL=Jc,BL=Fa,FL=RL;function GL(e){return typeof e=="function"?e:e==null?LL:typeof e=="object"?BL(e)?IL(e[0],e[1]):DL(e):FL(e)}var vs=GL;function zL(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var q_=zL;function UL(e){return e!==e}var WL=UL;function VL(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var HL=VL,XL=q_,KL=WL,qL=HL;function YL(e,t,r){return t===t?qL(e,t,r):XL(e,KL,r)}var ZL=YL,QL=ZL;function JL(e,t){var r=e==null?0:e.length;return!!r&&QL(e,t,0)>-1}var eB=JL;function tB(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var rB=tB;function nB(){}var aB=nB,Sm=W_,iB=aB,oB=H1,sB=1/0,lB=Sm&&1/oB(new Sm([,-0]))[1]==sB?function(e){return new Sm(e)}:iB,cB=lB,uB=$_,fB=eB,dB=rB,hB=D_,pB=cB,gB=H1,mB=200;function yB(e,t,r){var n=-1,a=fB,i=e.length,o=!0,s=[],c=s;if(r)o=!1,a=dB;else if(i>=mB){var u=t?null:pB(e);if(u)return gB(u);o=!1,a=hB,c=new uB}else c=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(f)}else a(c,d,r)||(c!==s&&c.push(d),s.push(f))}return s}var vB=yB,xB=vs,bB=vB;function wB(e,t){return e&&e.length?bB(e,xB(t)):[]}var kB=wB;const ck=Ir(kB);function Y_(e,t,r){return t===!0?ck(e,r):At(t)?ck(e,t):e}function mc(e){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(e)}var SB=["ref"];function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(n){Up(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q_(n.key),n)}}function _B(e,t,r){return t&&fk(e.prototype,t),r&&fk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function PB(e,t,r){return t=lh(t),CB(e,Z_()?Reflect.construct(t,r||[],lh(e).constructor):t.apply(e,r))}function CB(e,t){if(t&&(mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NB(e)}function NB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z_=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lh(e)}function OB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gv(e,t)}function gv(e,t){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gv(e,t)}function Up(e,t,r){return t=Q_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q_(e){var t=MB(e,"string");return mc(t)=="symbol"?t:t+""}function MB(e,t){if(mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function AB(e,t){if(e==null)return{};var r=TB(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function TB(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function EB(e){return e.value}function $B(e,t){if(ee.isValidElement(e))return ee.cloneElement(e,t);if(typeof e=="function")return ee.createElement(e,t);t.ref;var r=AB(t,SB);return ee.createElement(V1,r)}var dk=1,qi=function(e){function t(){var r;jB(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=PB(this,t,[].concat(a)),Up(r,"lastBoundingBox",{width:-1,height:-1}),r}return OB(t,e),_B(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>dk||Math.abs(a.height-this.lastBoundingBox.height)>dk)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?lo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,d,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var x=this.getBBoxSnapshot();p={top:((f||0)-x.height)/2}}else p=s==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return lo(lo({},d),p)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=lo(lo({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(c)),c);return ee.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){n.wrapperNode=m}},$B(i,lo(lo({},this.props),{},{payload:Y_(f,u,EB)})))}}],[{key:"getWithHeight",value:function(n,a){var i=lo(lo({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Ee(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(C.PureComponent);Up(qi,"displayName","Legend");Up(qi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var hk=nd,RB=X1,DB=Fa,pk=hk?hk.isConcatSpreadable:void 0;function IB(e){return DB(e)||RB(e)||!!(pk&&e&&e[pk])}var LB=IB,BB=L_,FB=LB;function J_(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=FB),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?J_(s,t-1,r,n,a):BB(a,s):n||(a[a.length]=s)}return a}var eP=J_;function GB(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var c=o[e?s:++a];if(r(i[c],c,i)===!1)break}return t}}var zB=GB,UB=zB,WB=UB(),VB=WB,HB=VB,XB=zp;function KB(e,t){return e&&HB(e,t,XB)}var tP=KB,qB=ad;function YB(e,t){return function(r,n){if(r==null)return r;if(!qB(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var ZB=YB,QB=tP,JB=ZB,eF=JB(QB),Z1=eF,tF=Z1,rF=ad;function nF(e,t){var r=-1,n=rF(e)?Array(e.length):[];return tF(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var rP=nF;function aF(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var iF=aF,gk=Vc;function oF(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=gk(e),o=t!==void 0,s=t===null,c=t===t,u=gk(t);if(!s&&!u&&!i&&e>t||i&&o&&c&&!s&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!c)return-1}return 0}var sF=oF,lF=sF;function cF(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var c=lF(a[n],i[n]);if(c){if(n>=s)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var uF=cF,jm=D1,fF=I1,dF=vs,hF=rP,pF=iF,gF=G_,mF=uF,yF=Jc,vF=Fa;function xF(e,t,r){t.length?t=jm(t,function(i){return vF(i)?function(o){return fF(o,i.length===1?i[0]:i)}:i}):t=[yF];var n=-1;t=jm(t,gF(dF));var a=hF(e,function(i,o,s){var c=jm(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return pF(a,function(i,o){return mF(i,o,r)})}var bF=xF;function wF(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var kF=wF,SF=kF,mk=Math.max;function jF(e,t,r){return t=mk(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=mk(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),SF(e,this,s)}}var _F=jF;function PF(e){return function(){return e}}var CF=PF,NF=vl,OF=function(){try{var e=NF(Object,"defineProperty");return e({},"",{}),e}catch{}}(),nP=OF,MF=CF,yk=nP,AF=Jc,TF=yk?function(e,t){return yk(e,"toString",{configurable:!0,enumerable:!1,value:MF(t),writable:!0})}:AF,EF=TF,$F=800,RF=16,DF=Date.now;function IF(e){var t=0,r=0;return function(){var n=DF(),a=RF-(n-r);if(r=n,a>0){if(++t>=$F)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var LF=IF,BF=EF,FF=LF,GF=FF(BF),zF=GF,UF=Jc,WF=_F,VF=zF;function HF(e,t){return VF(WF(e,t,UF),e+"")}var XF=HF,KF=T1,qF=ad,YF=K1,ZF=ys;function QF(e,t,r){if(!ZF(r))return!1;var n=typeof t;return(n=="number"?qF(r)&&YF(t,r.length):n=="string"&&t in r)?KF(r[t],e):!1}var Wp=QF,JF=eP,eG=bF,tG=XF,vk=Wp,rG=tG(function(e,t){if(e==null)return[];var r=t.length;return r>1&&vk(e,t[0],t[1])?t=[]:r>2&&vk(t[0],t[1],t[2])&&(t=[t[0]]),eG(e,JF(t,1),[])}),nG=rG;const Q1=Ir(nG);function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mv.apply(this,arguments)}function aG(e,t){return lG(e)||sG(e,t)||oG(e,t)||iG()}function iG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oG(e,t){if(e){if(typeof e=="string")return xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xk(e,t)}}function xk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function lG(e){if(Array.isArray(e))return e}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(n){cG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cG(e,t,r){return t=uG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uG(e){var t=fG(e,"string");return xf(t)=="symbol"?t:t+""}function fG(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dG(e){return Array.isArray(e)&&Vn(e[0])&&Vn(e[1])?e.join(" ~ "):e}var hG=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,p=t.itemSorter,m=t.wrapperClassName,x=t.labelClassName,b=t.label,S=t.labelFormatter,v=t.accessibilityLayer,y=v===void 0?!1:v,w=function(){if(f&&f.length){var B={padding:0,margin:0},G=(p?Q1(f,p):f).map(function(V,z){if(V.type==="none")return null;var D=_m({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},s),L=V.formatter||d||dG,F=V.value,H=V.name,W=F,J=H;if(L&&W!=null&&J!=null){var Y=L(F,H,V,z,f);if(Array.isArray(Y)){var ne=aG(Y,2);W=ne[0],J=ne[1]}else W=Y}return ee.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:D},Vn(J)?ee.createElement("span",{className:"recharts-tooltip-item-name"},J):null,Vn(J)?ee.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ee.createElement("span",{className:"recharts-tooltip-item-value"},W),ee.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return ee.createElement("ul",{className:"recharts-tooltip-item-list",style:B},G)}return null},P=_m({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=_m({margin:0},u),k=!Nt(b),O=k?b:"",A=tr("recharts-default-tooltip",m),R=tr("recharts-tooltip-label",x);k&&S&&f!==void 0&&f!==null&&(O=S(b,f));var E=y?{role:"status","aria-live":"assertive"}:{};return ee.createElement("div",mv({className:A,style:P},E),ee.createElement("p",{className:R,style:j},ee.isValidElement(O)?O:"".concat(O)),w())};function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function Xd(e,t,r){return t=pG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pG(e){var t=gG(e,"string");return bf(t)=="symbol"?t:t+""}function gG(e,t){if(bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xu="recharts-tooltip-wrapper",mG={visibility:"hidden"};function yG(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return tr(xu,Xd(Xd(Xd(Xd({},"".concat(xu,"-right"),Ee(r)&&t&&Ee(t.x)&&r>=t.x),"".concat(xu,"-left"),Ee(r)&&t&&Ee(t.x)&&r<t.x),"".concat(xu,"-bottom"),Ee(n)&&t&&Ee(t.y)&&n>=t.y),"".concat(xu,"-top"),Ee(n)&&t&&Ee(t.y)&&n<t.y))}function wk(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Ee(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var p=f,m=c[n];return p<m?Math.max(d,c[n]):Math.max(f,c[n])}var x=d+s,b=c[n]+u;return x>b?Math.max(f,c[n]):Math.max(d,c[n])}function vG(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xG(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=wk({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=wk({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=vG({translateX:f,translateY:d,useTranslate3d:s})):u=mG,{cssProperties:u,cssClasses:yG({translateX:f,translateY:d,coordinate:r})}}function yc(e){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yc(e)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(n){vv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iP(n.key),n)}}function kG(e,t,r){return t&&wG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SG(e,t,r){return t=ch(t),jG(e,aP()?Reflect.construct(t,r||[],ch(e).constructor):t.apply(e,r))}function jG(e,t){if(t&&(yc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _G(e)}function _G(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aP=function(){return!!e})()}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ch(e)}function PG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yv(e,t)}function yv(e,t){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yv(e,t)}function vv(e,t,r){return t=iP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iP(e){var t=CG(e,"string");return yc(t)=="symbol"?t:t+""}function CG(e,t){if(yc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jk=1,NG=function(e){function t(){var r;bG(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=SG(this,t,[].concat(a)),vv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),vv(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return PG(t,e),kG(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>jk||Math.abs(n.height-this.state.lastBoundingBox.height)>jk)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,p=a.isAnimationActive,m=a.offset,x=a.position,b=a.reverseDirection,S=a.useTranslate3d,v=a.viewBox,y=a.wrapperStyle,w=xG({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:x,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:S,viewBox:v}),P=w.cssClasses,j=w.cssProperties,k=Sk(Sk({transition:p&&i?"transform ".concat(s,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return ee.createElement("div",{tabIndex:-1,className:P,style:k,ref:function(A){n.wrapperNode=A}},u)}}])}(C.PureComponent),OG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},xs={isSsr:OG()};function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function _k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(r),!0).forEach(function(n){J1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sP(n.key),n)}}function TG(e,t,r){return t&&AG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EG(e,t,r){return t=uh(t),$G(e,oP()?Reflect.construct(t,r||[],uh(e).constructor):t.apply(e,r))}function $G(e,t){if(t&&(vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RG(e)}function RG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oP=function(){return!!e})()}function uh(e){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uh(e)}function DG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xv(e,t)}function xv(e,t){return xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xv(e,t)}function J1(e,t,r){return t=sP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sP(e){var t=IG(e,"string");return vc(t)=="symbol"?t:t+""}function IG(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function LG(e){return e.dataKey}function BG(e,t){return ee.isValidElement(e)?ee.cloneElement(e,t):typeof e=="function"?ee.createElement(e,t):ee.createElement(hG,t)}var Un=function(e){function t(){return MG(this,t),EG(this,t,arguments)}return DG(t,e),TG(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,p=a.isAnimationActive,m=a.offset,x=a.payload,b=a.payloadUniqBy,S=a.position,v=a.reverseDirection,y=a.useTranslate3d,w=a.viewBox,P=a.wrapperStyle,j=x??[];d&&j.length&&(j=Y_(x.filter(function(O){return O.value!=null&&(O.hide!==!0||n.props.includeHidden)}),b,LG));var k=j.length>0;return ee.createElement(NG,{allowEscapeViewBox:o,animationDuration:s,animationEasing:c,isAnimationActive:p,active:i,coordinate:f,hasPayload:k,offset:m,position:S,reverseDirection:v,useTranslate3d:y,viewBox:w,wrapperStyle:P},BG(u,Pk(Pk({},this.props),{},{payload:j})))}}])}(C.PureComponent);J1(Un,"displayName","Tooltip");J1(Un,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!xs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var FG=no,GG=function(){return FG.Date.now()},zG=GG,UG=/\s/;function WG(e){for(var t=e.length;t--&&UG.test(e.charAt(t)););return t}var VG=WG,HG=VG,XG=/^\s+/;function KG(e){return e&&e.slice(0,HG(e)+1).replace(XG,"")}var qG=KG,YG=qG,Ck=ys,ZG=Vc,Nk=NaN,QG=/^[-+]0x[0-9a-f]+$/i,JG=/^0b[01]+$/i,ez=/^0o[0-7]+$/i,tz=parseInt;function rz(e){if(typeof e=="number")return e;if(ZG(e))return Nk;if(Ck(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ck(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=YG(e);var r=JG.test(e);return r||ez.test(e)?tz(e.slice(2),r?2:8):QG.test(e)?Nk:+e}var lP=rz,nz=ys,Pm=zG,Ok=lP,az="Expected a function",iz=Math.max,oz=Math.min;function sz(e,t,r){var n,a,i,o,s,c,u=0,f=!1,d=!1,p=!0;if(typeof e!="function")throw new TypeError(az);t=Ok(t)||0,nz(r)&&(f=!!r.leading,d="maxWait"in r,i=d?iz(Ok(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function m(k){var O=n,A=a;return n=a=void 0,u=k,o=e.apply(A,O),o}function x(k){return u=k,s=setTimeout(v,t),f?m(k):o}function b(k){var O=k-c,A=k-u,R=t-O;return d?oz(R,i-A):R}function S(k){var O=k-c,A=k-u;return c===void 0||O>=t||O<0||d&&A>=i}function v(){var k=Pm();if(S(k))return y(k);s=setTimeout(v,b(k))}function y(k){return s=void 0,p&&n?m(k):(n=a=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,n=c=a=s=void 0}function P(){return s===void 0?o:y(Pm())}function j(){var k=Pm(),O=S(k);if(n=arguments,a=this,c=k,O){if(s===void 0)return x(c);if(d)return clearTimeout(s),s=setTimeout(v,t),m(c)}return s===void 0&&(s=setTimeout(v,t)),o}return j.cancel=w,j.flush=P,j}var lz=sz,cz=lz,uz=ys,fz="Expected a function";function dz(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(fz);return uz(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),cz(e,t,{leading:n,maxWait:t,trailing:a})}var hz=dz;const cP=Ir(hz);function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function Mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mk(Object(r),!0).forEach(function(n){pz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pz(e,t,r){return t=gz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gz(e){var t=mz(e,"string");return wf(t)=="symbol"?t:t+""}function mz(e,t){if(wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yz(e,t){return wz(e)||bz(e,t)||xz(e,t)||vz()}function vz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xz(e,t){if(e){if(typeof e=="string")return Ak(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ak(e,t)}}function Ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function wz(e){if(Array.isArray(e))return e}var Wi=C.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,c=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,p=e.maxHeight,m=e.children,x=e.debounce,b=x===void 0?0:x,S=e.id,v=e.className,y=e.onResize,w=e.style,P=w===void 0?{}:w,j=C.useRef(null),k=C.useRef();k.current=y,C.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var O=C.useState({containerWidth:a.width,containerHeight:a.height}),A=yz(O,2),R=A[0],E=A[1],T=C.useCallback(function(G,V){E(function(z){var D=Math.round(G),L=Math.round(V);return z.containerWidth===D&&z.containerHeight===L?z:{containerWidth:D,containerHeight:L}})},[]);C.useEffect(function(){var G=function(H){var W,J=H[0].contentRect,Y=J.width,ne=J.height;T(Y,ne),(W=k.current)===null||W===void 0||W.call(k,Y,ne)};b>0&&(G=cP(G,b,{trailing:!0,leading:!1}));var V=new ResizeObserver(G),z=j.current.getBoundingClientRect(),D=z.width,L=z.height;return T(D,L),V.observe(j.current),function(){V.disconnect()}},[T,b]);var B=C.useMemo(function(){var G=R.containerWidth,V=R.containerHeight;if(G<0||V<0)return null;bo(Gs(o)||Gs(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),bo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=Gs(o)?G:o,D=Gs(c)?V:c;r&&r>0&&(z?D=z/r:D&&(z=D*r),p&&D>p&&(D=p)),bo(z>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,D,o,c,f,d,r);var L=!Array.isArray(m)&&xo(m.type).endsWith("Chart");return ee.Children.map(m,function(F){return ee.isValidElement(F)?C.cloneElement(F,Kd({width:z,height:D},L?{style:Kd({height:"100%",width:"100%",maxHeight:D,maxWidth:z},F.props.style)}:{})):F})},[r,m,c,p,d,f,R,o]);return ee.createElement("div",{id:S?"".concat(S):void 0,className:tr("recharts-responsive-container",v),style:Kd(Kd({},P),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:p}),ref:j},B)}),eb=function(t){return null};eb.displayName="Cell";function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){kz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kz(e,t,r){return t=Sz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sz(e){var t=jz(e,"string");return kf(t)=="symbol"?t:t+""}function jz(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ol={widthCache:{},cacheCount:0},_z=2e3,Pz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ek="recharts_measurement_span";function Cz(e){var t=bv({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Uu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||xs.isSsr)return{width:0,height:0};var n=Cz(r),a=JSON.stringify({text:t,copyStyle:n});if(Ol.widthCache[a])return Ol.widthCache[a];try{var i=document.getElementById(Ek);i||(i=document.createElement("span"),i.setAttribute("id",Ek),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=bv(bv({},Pz),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),c={width:s.width,height:s.height};return Ol.widthCache[a]=c,++Ol.cacheCount>_z&&(Ol.cacheCount=0,Ol.widthCache={}),c}catch{return{width:0,height:0}}},Nz=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function fh(e,t){return Tz(e)||Az(e,t)||Mz(e,t)||Oz()}function Oz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mz(e,t){if(e){if(typeof e=="string")return $k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $k(e,t)}}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Az(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Tz(e){if(Array.isArray(e))return e}function Ez(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rz(n.key),n)}}function $z(e,t,r){return t&&Rk(e.prototype,t),r&&Rk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rz(e){var t=Dz(e,"string");return Sf(t)=="symbol"?t:t+""}function Dz(e,t){if(Sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Dk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ik=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Iz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Lz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Bz=Object.keys(uP),Vl="NaN";function Fz(e,t){return e*uP[t]}var qd=function(){function e(t,r){Ez(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Iz.test(r)&&(this.num=NaN,this.unit=""),Bz.includes(r)&&(this.num=Fz(t,r),this.unit="px")}return $z(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Lz.exec(r))!==null&&n!==void 0?n:[],i=fh(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function fP(e){if(e.includes(Vl))return Vl;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Dk.exec(t))!==null&&r!==void 0?r:[],a=fh(n,4),i=a[1],o=a[2],s=a[3],c=qd.parse(i??""),u=qd.parse(s??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Vl;t=t.replace(Dk,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,p=(d=Ik.exec(t))!==null&&d!==void 0?d:[],m=fh(p,4),x=m[1],b=m[2],S=m[3],v=qd.parse(x??""),y=qd.parse(S??""),w=b==="+"?v.add(y):v.subtract(y);if(w.isNaN())return Vl;t=t.replace(Ik,w.toString())}return t}var Lk=/\(([^()]*)\)/;function Gz(e){for(var t=e;t.includes("(");){var r=Lk.exec(t),n=fh(r,2),a=n[1];t=t.replace(Lk,fP(a))}return t}function zz(e){var t=e.replace(/\s+/g,"");return t=Gz(t),t=fP(t),t}function Uz(e){try{return zz(e)}catch{return Vl}}function Cm(e){var t=Uz(e.slice(5,-1));return t===Vl?"":t}var Wz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Vz=["dx","dy","angle","className","breakAll"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(this,arguments)}function Bk(e,t){if(e==null)return{};var r=Hz(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Fk(e,t){return Yz(e)||qz(e,t)||Kz(e,t)||Xz()}function Xz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kz(e,t){if(e){if(typeof e=="string")return Gk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gk(e,t)}}function Gk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Yz(e){if(Array.isArray(e))return e}var dP=/[ \f\n\r\t\v\u2028\u2029]+/,hP=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Nt(r)||(n?i=r.toString().split(""):i=r.toString().split(dP));var o=i.map(function(c){return{word:c,width:Uu(c,a).width}}),s=n?0:Uu("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Zz=function(t,r,n,a,i){var o=t.maxLines,s=t.children,c=t.style,u=t.breakAll,f=Ee(o),d=s,p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(D,L){var F=L.word,H=L.width,W=D[D.length-1];if(W&&(a==null||i||W.width+H+n<Number(a)))W.words.push(F),W.width+=H+n;else{var J={words:[F],width:H};D.push(J)}return D},[])},m=p(r),x=function(z){return z.reduce(function(D,L){return D.width>L.width?D:L})};if(!f)return m;for(var b="",S=function(z){var D=d.slice(0,z),L=hP({breakAll:u,style:c,children:D+b}).wordsWithComputedWidth,F=p(L),H=F.length>o||x(F).width>Number(a);return[H,F]},v=0,y=d.length-1,w=0,P;v<=y&&w<=d.length-1;){var j=Math.floor((v+y)/2),k=j-1,O=S(k),A=Fk(O,2),R=A[0],E=A[1],T=S(j),B=Fk(T,1),G=B[0];if(!R&&!G&&(v=j+1),R&&G&&(y=j-1),!R&&G){P=E;break}w++}return P||m},zk=function(t){var r=Nt(t)?[]:t.toString().split(dP);return[{words:r}]},Qz=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!xs.isSsr){var c,u,f=hP({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,p=f.spaceWidth;c=d,u=p}else return zk(a);return Zz({breakAll:o,children:a,maxLines:s,style:i},c,u,r,n)}return zk(a)},Uk="#808080",dh=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,p=t.textAnchor,m=p===void 0?"start":p,x=t.verticalAnchor,b=x===void 0?"end":x,S=t.fill,v=S===void 0?Uk:S,y=Bk(t,Wz),w=C.useMemo(function(){return Qz({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),P=y.dx,j=y.dy,k=y.angle,O=y.className,A=y.breakAll,R=Bk(y,Vz);if(!Vn(n)||!Vn(i))return null;var E=n+(Ee(P)?P:0),T=i+(Ee(j)?j:0),B;switch(b){case"start":B=Cm("calc(".concat(u,")"));break;case"middle":B=Cm("calc(".concat((w.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:B=Cm("calc(".concat(w.length-1," * -").concat(s,")"));break}var G=[];if(d){var V=w[0].width,z=y.width;G.push("scale(".concat((Ee(z)?z/V:1)/V,")"))}return k&&G.push("rotate(".concat(k,", ").concat(E,", ").concat(T,")")),G.length&&(R.transform=G.join(" ")),ee.createElement("text",wv({},Ot(R,!0),{x:E,y:T,className:tr("recharts-text",O),textAnchor:m,fill:v.includes("url")?Uk:v}),w.map(function(D,L){var F=D.words.join(A?"":" ");return ee.createElement("tspan",{x:E,dy:L===0?B:s,key:"".concat(F,"-").concat(L)},F)}))};function us(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jz(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tb(e){let t,r,n;e.length!==2?(t=us,r=(s,c)=>us(e(s),c),n=(s,c)=>e(s)-c):(t=e===us||e===Jz?e:eU,r=e,n=e);function a(s,c,u=0,f=s.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(s[d],c)<0?u=d+1:f=d}while(u<f)}return u}function i(s,c,u=0,f=s.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(s[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,c,u=0,f=s.length){const d=a(s,c,u,f-1);return d>u&&n(s[d-1],c)>-n(s[d],c)?d-1:d}return{left:a,center:o,right:i}}function eU(){return 0}function pP(e){return e===null?NaN:+e}function*tU(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const rU=tb(us),id=rU.right;tb(pP).center;class Wk extends Map{constructor(t,r=iU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Vk(this,t))}has(t){return super.has(Vk(this,t))}set(t,r){return super.set(nU(this,t),r)}delete(t){return super.delete(aU(this,t))}}function Vk({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function nU({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function aU({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function iU(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oU(e=us){if(e===us)return gP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function gP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const sU=Math.sqrt(50),lU=Math.sqrt(10),cU=Math.sqrt(2);function hh(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=sU?10:i>=lU?5:i>=cU?2:1;let s,c,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),c=Math.round(t*u),s/u<e&&++s,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),c=Math.round(t/u),s*u<e&&++s,c*u>t&&--c),c<s&&.5<=r&&r<2?hh(e,t,r*2):[s,c,u]}function kv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?hh(t,e,r):hh(e,t,r);if(!(i>=a))return[];const s=i-a+1,c=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)c[u]=(i-u)/-o;else for(let u=0;u<s;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(a+u)/-o;else for(let u=0;u<s;++u)c[u]=(a+u)*o;return c}function Sv(e,t,r){return t=+t,e=+e,r=+r,hh(e,t,r)[2]}function jv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Sv(t,e,r):Sv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Hk(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Xk(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function mP(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?gP:oU(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*d/c+p)),x=Math.min(n,Math.floor(t+(c-u)*d/c+p));mP(e,t,m,x,a)}const i=e[t];let o=r,s=n;for(bu(e,r,t),a(e[n],i)>0&&bu(e,r,n);o<s;){for(bu(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?bu(e,r,s):(++s,bu(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function bu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function uU(e,t,r){if(e=Float64Array.from(tU(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Xk(e);if(t>=1)return Hk(e);var n,a=(n-1)*t,i=Math.floor(a),o=Hk(mP(e,i).subarray(0,i+1)),s=Xk(e.subarray(i+1));return o+(s-o)*(a-i)}}function fU(e,t,r=pP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function dU(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function vi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function To(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _v=Symbol("implicit");function rb(){var e=new Wk,t=[],r=[],n=_v;function a(i){let o=e.get(i);if(o===void 0){if(n!==_v)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Wk;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return rb(t,r).unknown(n)},vi.apply(a,arguments),a}function jf(){var e=rb().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var p=t().length,m=a<n,x=m?a:n,b=m?n:a;i=(b-x)/Math.max(1,p-c+u*2),s&&(i=Math.floor(i)),x+=(b-x-i*(p-c))*f,o=i*(1-c),s&&(x=Math.round(x),o=Math.round(o));var S=dU(p).map(function(v){return x+i*v});return r(m?S.reverse():S)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(s=!!p,d()):s},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),d()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),d()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},e.copy=function(){return jf(t(),[n,a]).round(s).paddingInner(c).paddingOuter(u).align(f)},vi.apply(d(),arguments)}function yP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yP(t())},e}function Wu(){return yP(jf.apply(null,arguments).paddingInner(1))}function nb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function vP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function od(){}var _f=.7,ph=1/_f,rc="\\s*([+-]?\\d+)\\s*",Pf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hU=/^#([0-9a-f]{3,8})$/,pU=new RegExp(`^rgb\\(${rc},${rc},${rc}\\)$`),gU=new RegExp(`^rgb\\(${Yi},${Yi},${Yi}\\)$`),mU=new RegExp(`^rgba\\(${rc},${rc},${rc},${Pf}\\)$`),yU=new RegExp(`^rgba\\(${Yi},${Yi},${Yi},${Pf}\\)$`),vU=new RegExp(`^hsl\\(${Pf},${Yi},${Yi}\\)$`),xU=new RegExp(`^hsla\\(${Pf},${Yi},${Yi},${Pf}\\)$`),Kk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nb(od,Cf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qk,formatHex:qk,formatHex8:bU,formatHsl:wU,formatRgb:Yk,toString:Yk});function qk(){return this.rgb().formatHex()}function bU(){return this.rgb().formatHex8()}function wU(){return xP(this).formatHsl()}function Yk(){return this.rgb().formatRgb()}function Cf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=hU.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Zk(t):r===3?new Ra(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Yd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Yd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pU.exec(e))?new Ra(t[1],t[2],t[3],1):(t=gU.exec(e))?new Ra(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mU.exec(e))?Yd(t[1],t[2],t[3],t[4]):(t=yU.exec(e))?Yd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vU.exec(e))?eS(t[1],t[2]/100,t[3]/100,1):(t=xU.exec(e))?eS(t[1],t[2]/100,t[3]/100,t[4]):Kk.hasOwnProperty(e)?Zk(Kk[e]):e==="transparent"?new Ra(NaN,NaN,NaN,0):null}function Zk(e){return new Ra(e>>16&255,e>>8&255,e&255,1)}function Yd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ra(e,t,r,n)}function kU(e){return e instanceof od||(e=Cf(e)),e?(e=e.rgb(),new Ra(e.r,e.g,e.b,e.opacity)):new Ra}function Pv(e,t,r,n){return arguments.length===1?kU(e):new Ra(e,t,r,n??1)}function Ra(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}nb(Ra,Pv,vP(od,{brighter(e){return e=e==null?ph:Math.pow(ph,e),new Ra(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new Ra(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ra(qs(this.r),qs(this.g),qs(this.b),gh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qk,formatHex:Qk,formatHex8:SU,formatRgb:Jk,toString:Jk}));function Qk(){return`#${zs(this.r)}${zs(this.g)}${zs(this.b)}`}function SU(){return`#${zs(this.r)}${zs(this.g)}${zs(this.b)}${zs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jk(){const e=gh(this.opacity);return`${e===1?"rgb(":"rgba("}${qs(this.r)}, ${qs(this.g)}, ${qs(this.b)}${e===1?")":`, ${e})`}`}function gh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zs(e){return e=qs(e),(e<16?"0":"")+e.toString(16)}function eS(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ci(e,t,r,n)}function xP(e){if(e instanceof Ci)return new Ci(e.h,e.s,e.l,e.opacity);if(e instanceof od||(e=Cf(e)),!e)return new Ci;if(e instanceof Ci)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,c=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new Ci(o,s,c,e.opacity)}function jU(e,t,r,n){return arguments.length===1?xP(e):new Ci(e,t,r,n??1)}function Ci(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}nb(Ci,jU,vP(od,{brighter(e){return e=e==null?ph:Math.pow(ph,e),new Ci(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new Ci(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ra(Nm(e>=240?e-240:e+120,a,n),Nm(e,a,n),Nm(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ci(tS(this.h),Zd(this.s),Zd(this.l),gh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gh(this.opacity);return`${e===1?"hsl(":"hsla("}${tS(this.h)}, ${Zd(this.s)*100}%, ${Zd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tS(e){return e=(e||0)%360,e<0?e+360:e}function Zd(e){return Math.max(0,Math.min(1,e||0))}function Nm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ab=e=>()=>e;function _U(e,t){return function(r){return e+r*t}}function PU(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function CU(e){return(e=+e)==1?bP:function(t,r){return r-t?PU(t,r,e):ab(isNaN(t)?r:t)}}function bP(e,t){var r=t-e;return r?_U(e,r):ab(isNaN(e)?t:e)}const rS=function e(t){var r=CU(t);function n(a,i){var o=r((a=Pv(a)).r,(i=Pv(i)).r),s=r(a.g,i.g),c=r(a.b,i.b),u=bP(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=c(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function NU(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function OU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function MU(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=eu(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function AU(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function mh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function TU(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=eu(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Cv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Om=new RegExp(Cv.source,"g");function EU(e){return function(){return e}}function $U(e){return function(t){return e(t)+""}}function RU(e,t){var r=Cv.lastIndex=Om.lastIndex=0,n,a,i,o=-1,s=[],c=[];for(e=e+"",t=t+"";(n=Cv.exec(e))&&(a=Om.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:mh(n,a)})),r=Om.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?$U(c[0].x):EU(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)s[(d=c[f]).i]=d.x(u);return s.join("")})}function eu(e,t){var r=typeof t,n;return t==null||r==="boolean"?ab(t):(r==="number"?mh:r==="string"?(n=Cf(t))?(t=n,rS):RU:t instanceof Cf?rS:t instanceof Date?AU:OU(t)?NU:Array.isArray(t)?MU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TU:mh)(e,t)}function ib(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function DU(e,t){t===void 0&&(t=e,e=eu);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function IU(e){return function(){return e}}function yh(e){return+e}var nS=[0,1];function Sa(e){return e}function Nv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:IU(isNaN(t)?NaN:.5)}function LU(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function BU(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=Nv(a,n),i=r(o,i)):(n=Nv(n,a),i=r(i,o)),function(s){return i(n(s))}}function FU(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Nv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var c=id(e,s,1,n)-1;return i[c](a[c](s))}}function sd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vp(){var e=nS,t=nS,r=eu,n,a,i,o=Sa,s,c,u;function f(){var p=Math.min(e.length,t.length);return o!==Sa&&(o=LU(e[0],e[p-1])),s=p>2?FU:BU,c=u=null,d}function d(p){return p==null||isNaN(p=+p)?i:(c||(c=s(e.map(n),t,r)))(n(o(p)))}return d.invert=function(p){return o(a((u||(u=s(t,e.map(n),mh)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,yh),f()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),r=ib,f()},d.clamp=function(p){return arguments.length?(o=p?!0:Sa,f()):o!==Sa},d.interpolate=function(p){return arguments.length?(r=p,f()):r},d.unknown=function(p){return arguments.length?(i=p,d):i},function(p,m){return n=p,a=m,f()}}function ob(){return Vp()(Sa,Sa)}function GU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vh(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function xc(e){return e=vh(Math.abs(e)),e?e[1]:NaN}function zU(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],c=0;a>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),i.push(r.substring(a-=s,a+s)),!((c+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function UU(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var WU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nf(e){if(!(t=WU.exec(e)))throw new Error("invalid format: "+e);var t;return new sb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Nf.prototype=sb.prototype;function sb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VU(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var xh;function HU(e,t){var r=vh(e,t);if(!r)return xh=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(xh=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+vh(e,Math.max(0,t+i-1))[0]}function aS(e,t){var r=vh(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const iS={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:GU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>aS(e*100,t),r:aS,s:HU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function oS(e){return e}var sS=Array.prototype.map,lS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function XU(e){var t=e.grouping===void 0||e.thousands===void 0?oS:zU(sS.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?oS:UU(sS.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d,p){d=Nf(d);var m=d.fill,x=d.align,b=d.sign,S=d.symbol,v=d.zero,y=d.width,w=d.comma,P=d.precision,j=d.trim,k=d.type;k==="n"?(w=!0,k="g"):iS[k]||(P===void 0&&(P=12),j=!0,k="g"),(v||m==="0"&&x==="=")&&(v=!0,m="0",x="=");var O=(p&&p.prefix!==void 0?p.prefix:"")+(S==="$"?r:S==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),A=(S==="$"?n:/[%p]/.test(k)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),R=iS[k],E=/[defgprs%]/.test(k);P=P===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function T(B){var G=O,V=A,z,D,L;if(k==="c")V=R(B)+V,B="";else{B=+B;var F=B<0||1/B<0;if(B=isNaN(B)?c:R(Math.abs(B),P),j&&(B=VU(B)),F&&+B==0&&b!=="+"&&(F=!1),G=(F?b==="("?b:s:b==="-"||b==="("?"":b)+G,V=(k==="s"&&!isNaN(B)&&xh!==void 0?lS[8+xh/3]:"")+V+(F&&b==="("?")":""),E){for(z=-1,D=B.length;++z<D;)if(L=B.charCodeAt(z),48>L||L>57){V=(L===46?a+B.slice(z+1):B.slice(z))+V,B=B.slice(0,z);break}}}w&&!v&&(B=t(B,1/0));var H=G.length+B.length+V.length,W=H<y?new Array(y-H+1).join(m):"";switch(w&&v&&(B=t(W+B,W.length?y-V.length:1/0),W=""),x){case"<":B=G+B+V+W;break;case"=":B=G+W+B+V;break;case"^":B=W.slice(0,H=W.length>>1)+G+B+V+W.slice(H);break;default:B=W+G+B+V;break}return i(B)}return T.toString=function(){return d+""},T}function f(d,p){var m=Math.max(-8,Math.min(8,Math.floor(xc(p)/3)))*3,x=Math.pow(10,-m),b=u((d=Nf(d),d.type="f",d),{suffix:lS[8+m/3]});return function(S){return b(x*S)}}return{format:u,formatPrefix:f}}var Qd,lb,wP;KU({thousands:",",grouping:[3],currency:["$",""]});function KU(e){return Qd=XU(e),lb=Qd.format,wP=Qd.formatPrefix,Qd}function qU(e){return Math.max(0,-xc(Math.abs(e)))}function YU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xc(t)/3)))*3-xc(Math.abs(e)))}function ZU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xc(t)-xc(e))+1}function kP(e,t,r,n){var a=jv(e,t,r),i;switch(n=Nf(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=YU(a,o))&&(n.precision=i),wP(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=ZU(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=qU(a))&&(n.precision=i-(n.type==="%")*2);break}}return lb(n)}function bs(e){var t=e.domain;return e.ticks=function(r){var n=t();return kv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return kP(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],c,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=Sv(o,s,r),u===c)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return e},e}function bh(){var e=ob();return e.copy=function(){return sd(e,bh())},vi.apply(e,arguments),bs(e)}function SP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,yh),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return SP(e).unknown(t)},e=arguments.length?Array.from(e,yh):[0,1],bs(r)}function jP(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function cS(e){return Math.log(e)}function uS(e){return Math.exp(e)}function QU(e){return-Math.log(-e)}function JU(e){return-Math.exp(-e)}function eW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tW(e){return e===10?eW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fS(e){return(t,r)=>-e(-t,r)}function cb(e){const t=e(cS,uS),r=t.domain;let n=10,a,i;function o(){return a=rW(n),i=tW(n),r()[0]<0?(a=fS(a),i=fS(i),e(QU,JU)):e(cS,uS),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=a(u),m=a(f),x,b;const S=s==null?10:+s;let v=[];if(!(n%1)&&m-p<S){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(x=1;x<n;++x)if(b=p<0?x/i(-p):x*i(p),!(b<u)){if(b>f)break;v.push(b)}}else for(;p<=m;++p)for(x=n-1;x>=1;--x)if(b=p>0?x/i(-p):x*i(p),!(b<u)){if(b>f)break;v.push(b)}v.length*2<S&&(v=kv(u,f,S))}else v=kv(p,m,Math.min(m-p,S)).map(i);return d?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Nf(c)).precision==null&&(c.trim=!0),c=lb(c)),s===1/0)return c;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(jP(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function _P(){const e=cb(Vp()).domain([1,10]);return e.copy=()=>sd(e,_P()).base(e.base()),vi.apply(e,arguments),e}function dS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ub(e){var t=1,r=e(dS(t),hS(t));return r.constant=function(n){return arguments.length?e(dS(t=+n),hS(t)):t},bs(r)}function PP(){var e=ub(Vp());return e.copy=function(){return sd(e,PP()).constant(e.constant())},vi.apply(e,arguments)}function pS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function aW(e){return e<0?-e*e:e*e}function fb(e){var t=e(Sa,Sa),r=1;function n(){return r===1?e(Sa,Sa):r===.5?e(nW,aW):e(pS(r),pS(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},bs(t)}function db(){var e=fb(Vp());return e.copy=function(){return sd(e,db()).exponent(e.exponent())},vi.apply(e,arguments),e}function iW(){return db.apply(null,arguments).exponent(.5)}function gS(e){return Math.sign(e)*e*e}function oW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function CP(){var e=ob(),t=[0,1],r=!1,n;function a(i){var o=oW(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(gS(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,yh)).map(gS)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return CP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},vi.apply(a,arguments),bs(a)}function NP(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=fU(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[id(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(us),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return NP().domain(e).range(t).unknown(n)},vi.apply(i,arguments)}function OP(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[id(n,c,0,r)]:i}function s(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,s()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return OP().domain([e,t]).range(a).unknown(i)},vi.apply(bs(o),arguments)}function MP(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[id(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return MP().domain(e).range(t).unknown(r)},vi.apply(a,arguments)}const Mm=new Date,Am=new Date;function Xn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const c=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return c;let u;do c.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return c},a.filter=i=>Xn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Mm.setTime(+i),Am.setTime(+o),e(Mm),e(Am),Math.floor(r(Mm,Am))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const wh=Xn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Xn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):wh);wh.range;const go=1e3,ui=go*60,mo=ui*60,Po=mo*24,hb=Po*7,mS=Po*30,Tm=Po*365,Us=Xn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getUTCSeconds());Us.range;const pb=Xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*go)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getMinutes());pb.range;const gb=Xn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getUTCMinutes());gb.range;const mb=Xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*go-e.getMinutes()*ui)},(e,t)=>{e.setTime(+e+t*mo)},(e,t)=>(t-e)/mo,e=>e.getHours());mb.range;const yb=Xn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mo)},(e,t)=>(t-e)/mo,e=>e.getUTCHours());yb.range;const ld=Xn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ui)/Po,e=>e.getDate()-1);ld.range;const Hp=Xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Po,e=>e.getUTCDate()-1);Hp.range;const AP=Xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Po,e=>Math.floor(e/Po));AP.range;function bl(e){return Xn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ui)/hb)}const Xp=bl(0),kh=bl(1),sW=bl(2),lW=bl(3),bc=bl(4),cW=bl(5),uW=bl(6);Xp.range;kh.range;sW.range;lW.range;bc.range;cW.range;uW.range;function wl(e){return Xn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/hb)}const Kp=wl(0),Sh=wl(1),fW=wl(2),dW=wl(3),wc=wl(4),hW=wl(5),pW=wl(6);Kp.range;Sh.range;fW.range;dW.range;wc.range;hW.range;pW.range;const vb=Xn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vb.range;const xb=Xn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());xb.range;const Co=Xn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Co.range;const No=Xn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());No.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});No.range;function TP(e,t,r,n,a,i){const o=[[Us,1,go],[Us,5,5*go],[Us,15,15*go],[Us,30,30*go],[i,1,ui],[i,5,5*ui],[i,15,15*ui],[i,30,30*ui],[a,1,mo],[a,3,3*mo],[a,6,6*mo],[a,12,12*mo],[n,1,Po],[n,2,2*Po],[r,1,hb],[t,1,mS],[t,3,3*mS],[e,1,Tm]];function s(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:c(u,f,d),x=m?m.range(u,+f+1):[];return p?x.reverse():x}function c(u,f,d){const p=Math.abs(f-u)/d,m=tb(([,,S])=>S).right(o,p);if(m===o.length)return e.every(jv(u/Tm,f/Tm,d));if(m===0)return wh.every(Math.max(jv(u,f,d),1));const[x,b]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return x.every(b)}return[s,c]}const[gW,mW]=TP(No,xb,Kp,AP,yb,gb),[yW,vW]=TP(Co,vb,Xp,ld,mb,pb);function Em(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $m(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function xW(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,c=e.shortMonths,u=ku(a),f=Su(a),d=ku(i),p=Su(i),m=ku(o),x=Su(o),b=ku(s),S=Su(s),v=ku(c),y=Su(c),w={a:L,A:F,b:H,B:W,c:null,d:kS,e:kS,f:zW,g:QW,G:eV,H:BW,I:FW,j:GW,L:EP,m:UW,M:WW,p:J,q:Y,Q:_S,s:PS,S:VW,u:HW,U:XW,V:KW,w:qW,W:YW,x:null,X:null,y:ZW,Y:JW,Z:tV,"%":jS},P={a:ne,A:te,b:fe,B:se,c:null,d:SS,e:SS,f:iV,g:gV,G:yV,H:rV,I:nV,j:aV,L:RP,m:oV,M:sV,p:ye,q:ie,Q:_S,s:PS,S:lV,u:cV,U:uV,V:fV,w:dV,W:hV,x:null,X:null,y:pV,Y:mV,Z:vV,"%":jS},j={a:E,A:T,b:B,B:G,c:V,d:bS,e:bS,f:RW,g:xS,G:vS,H:wS,I:wS,j:AW,L:$W,m:MW,M:TW,p:R,q:OW,Q:IW,s:LW,S:EW,u:jW,U:_W,V:PW,w:SW,W:CW,x:z,X:D,y:xS,Y:vS,Z:NW,"%":DW};w.x=k(r,w),w.X=k(n,w),w.c=k(t,w),P.x=k(r,P),P.X=k(n,P),P.c=k(t,P);function k(X,le){return function(he){var oe=[],je=-1,Se=0,me=X.length,ge,Ce,De;for(he instanceof Date||(he=new Date(+he));++je<me;)X.charCodeAt(je)===37&&(oe.push(X.slice(Se,je)),(Ce=yS[ge=X.charAt(++je)])!=null?ge=X.charAt(++je):Ce=ge==="e"?" ":"0",(De=le[ge])&&(ge=De(he,Ce)),oe.push(ge),Se=je+1);return oe.push(X.slice(Se,je)),oe.join("")}}function O(X,le){return function(he){var oe=wu(1900,void 0,1),je=A(oe,X,he+="",0),Se,me;if(je!=he.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(le&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Se=$m(wu(oe.y,0,1)),me=Se.getUTCDay(),Se=me>4||me===0?Sh.ceil(Se):Sh(Se),Se=Hp.offset(Se,(oe.V-1)*7),oe.y=Se.getUTCFullYear(),oe.m=Se.getUTCMonth(),oe.d=Se.getUTCDate()+(oe.w+6)%7):(Se=Em(wu(oe.y,0,1)),me=Se.getDay(),Se=me>4||me===0?kh.ceil(Se):kh(Se),Se=ld.offset(Se,(oe.V-1)*7),oe.y=Se.getFullYear(),oe.m=Se.getMonth(),oe.d=Se.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),me="Z"in oe?$m(wu(oe.y,0,1)).getUTCDay():Em(wu(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(me+5)%7:oe.w+oe.U*7-(me+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,$m(oe)):Em(oe)}}function A(X,le,he,oe){for(var je=0,Se=le.length,me=he.length,ge,Ce;je<Se;){if(oe>=me)return-1;if(ge=le.charCodeAt(je++),ge===37){if(ge=le.charAt(je++),Ce=j[ge in yS?le.charAt(je++):ge],!Ce||(oe=Ce(X,he,oe))<0)return-1}else if(ge!=he.charCodeAt(oe++))return-1}return oe}function R(X,le,he){var oe=u.exec(le.slice(he));return oe?(X.p=f.get(oe[0].toLowerCase()),he+oe[0].length):-1}function E(X,le,he){var oe=m.exec(le.slice(he));return oe?(X.w=x.get(oe[0].toLowerCase()),he+oe[0].length):-1}function T(X,le,he){var oe=d.exec(le.slice(he));return oe?(X.w=p.get(oe[0].toLowerCase()),he+oe[0].length):-1}function B(X,le,he){var oe=v.exec(le.slice(he));return oe?(X.m=y.get(oe[0].toLowerCase()),he+oe[0].length):-1}function G(X,le,he){var oe=b.exec(le.slice(he));return oe?(X.m=S.get(oe[0].toLowerCase()),he+oe[0].length):-1}function V(X,le,he){return A(X,t,le,he)}function z(X,le,he){return A(X,r,le,he)}function D(X,le,he){return A(X,n,le,he)}function L(X){return o[X.getDay()]}function F(X){return i[X.getDay()]}function H(X){return c[X.getMonth()]}function W(X){return s[X.getMonth()]}function J(X){return a[+(X.getHours()>=12)]}function Y(X){return 1+~~(X.getMonth()/3)}function ne(X){return o[X.getUTCDay()]}function te(X){return i[X.getUTCDay()]}function fe(X){return c[X.getUTCMonth()]}function se(X){return s[X.getUTCMonth()]}function ye(X){return a[+(X.getUTCHours()>=12)]}function ie(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var le=k(X+="",w);return le.toString=function(){return X},le},parse:function(X){var le=O(X+="",!1);return le.toString=function(){return X},le},utcFormat:function(X){var le=k(X+="",P);return le.toString=function(){return X},le},utcParse:function(X){var le=O(X+="",!0);return le.toString=function(){return X},le}}}var yS={"-":"",_:" ",0:"0"},ea=/^\s*\d+/,bW=/^%/,wW=/[\\^$*+?|[\]().{}]/g;function mr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function kW(e){return e.replace(wW,"\\$&")}function ku(e){return new RegExp("^(?:"+e.map(kW).join("|")+")","i")}function Su(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function SW(e,t,r){var n=ea.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function jW(e,t,r){var n=ea.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function _W(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function PW(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function CW(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function vS(e,t,r){var n=ea.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function xS(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function NW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function OW(e,t,r){var n=ea.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function MW(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function bS(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function AW(e,t,r){var n=ea.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function wS(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function TW(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function EW(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function $W(e,t,r){var n=ea.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function RW(e,t,r){var n=ea.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function DW(e,t,r){var n=bW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function IW(e,t,r){var n=ea.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function LW(e,t,r){var n=ea.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function kS(e,t){return mr(e.getDate(),t,2)}function BW(e,t){return mr(e.getHours(),t,2)}function FW(e,t){return mr(e.getHours()%12||12,t,2)}function GW(e,t){return mr(1+ld.count(Co(e),e),t,3)}function EP(e,t){return mr(e.getMilliseconds(),t,3)}function zW(e,t){return EP(e,t)+"000"}function UW(e,t){return mr(e.getMonth()+1,t,2)}function WW(e,t){return mr(e.getMinutes(),t,2)}function VW(e,t){return mr(e.getSeconds(),t,2)}function HW(e){var t=e.getDay();return t===0?7:t}function XW(e,t){return mr(Xp.count(Co(e)-1,e),t,2)}function $P(e){var t=e.getDay();return t>=4||t===0?bc(e):bc.ceil(e)}function KW(e,t){return e=$P(e),mr(bc.count(Co(e),e)+(Co(e).getDay()===4),t,2)}function qW(e){return e.getDay()}function YW(e,t){return mr(kh.count(Co(e)-1,e),t,2)}function ZW(e,t){return mr(e.getFullYear()%100,t,2)}function QW(e,t){return e=$P(e),mr(e.getFullYear()%100,t,2)}function JW(e,t){return mr(e.getFullYear()%1e4,t,4)}function eV(e,t){var r=e.getDay();return e=r>=4||r===0?bc(e):bc.ceil(e),mr(e.getFullYear()%1e4,t,4)}function tV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function SS(e,t){return mr(e.getUTCDate(),t,2)}function rV(e,t){return mr(e.getUTCHours(),t,2)}function nV(e,t){return mr(e.getUTCHours()%12||12,t,2)}function aV(e,t){return mr(1+Hp.count(No(e),e),t,3)}function RP(e,t){return mr(e.getUTCMilliseconds(),t,3)}function iV(e,t){return RP(e,t)+"000"}function oV(e,t){return mr(e.getUTCMonth()+1,t,2)}function sV(e,t){return mr(e.getUTCMinutes(),t,2)}function lV(e,t){return mr(e.getUTCSeconds(),t,2)}function cV(e){var t=e.getUTCDay();return t===0?7:t}function uV(e,t){return mr(Kp.count(No(e)-1,e),t,2)}function DP(e){var t=e.getUTCDay();return t>=4||t===0?wc(e):wc.ceil(e)}function fV(e,t){return e=DP(e),mr(wc.count(No(e),e)+(No(e).getUTCDay()===4),t,2)}function dV(e){return e.getUTCDay()}function hV(e,t){return mr(Sh.count(No(e)-1,e),t,2)}function pV(e,t){return mr(e.getUTCFullYear()%100,t,2)}function gV(e,t){return e=DP(e),mr(e.getUTCFullYear()%100,t,2)}function mV(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function yV(e,t){var r=e.getUTCDay();return e=r>=4||r===0?wc(e):wc.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function vV(){return"+0000"}function jS(){return"%"}function _S(e){return+e}function PS(e){return Math.floor(+e/1e3)}var Ml,IP,LP;xV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xV(e){return Ml=xW(e),IP=Ml.format,Ml.parse,LP=Ml.utcFormat,Ml.utcParse,Ml}function bV(e){return new Date(e)}function wV(e){return e instanceof Date?+e:+new Date(+e)}function bb(e,t,r,n,a,i,o,s,c,u){var f=ob(),d=f.invert,p=f.domain,m=u(".%L"),x=u(":%S"),b=u("%I:%M"),S=u("%I %p"),v=u("%a %d"),y=u("%b %d"),w=u("%B"),P=u("%Y");function j(k){return(c(k)<k?m:s(k)<k?x:o(k)<k?b:i(k)<k?S:n(k)<k?a(k)<k?v:y:r(k)<k?w:P)(k)}return f.invert=function(k){return new Date(d(k))},f.domain=function(k){return arguments.length?p(Array.from(k,wV)):p().map(bV)},f.ticks=function(k){var O=p();return e(O[0],O[O.length-1],k??10)},f.tickFormat=function(k,O){return O==null?j:u(O)},f.nice=function(k){var O=p();return(!k||typeof k.range!="function")&&(k=t(O[0],O[O.length-1],k??10)),k?p(jP(O,k)):f},f.copy=function(){return sd(f,bb(e,t,r,n,a,i,o,s,c,u))},f}function kV(){return vi.apply(bb(yW,vW,Co,vb,Xp,ld,mb,pb,Us,IP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SV(){return vi.apply(bb(gW,mW,No,xb,Kp,Hp,yb,gb,Us,LP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qp(){var e=0,t=1,r,n,a,i,o=Sa,s=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(p){var m,x;return arguments.length?([m,x]=p,o=d(m,x),u):[o(0),o(1)]}}return u.range=f(eu),u.rangeRound=f(ib),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function ws(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BP(){var e=bs(qp()(Sa));return e.copy=function(){return ws(e,BP())},To.apply(e,arguments)}function FP(){var e=cb(qp()).domain([1,10]);return e.copy=function(){return ws(e,FP()).base(e.base())},To.apply(e,arguments)}function GP(){var e=ub(qp());return e.copy=function(){return ws(e,GP()).constant(e.constant())},To.apply(e,arguments)}function wb(){var e=fb(qp());return e.copy=function(){return ws(e,wb()).exponent(e.exponent())},To.apply(e,arguments)}function jV(){return wb.apply(null,arguments).exponent(.5)}function zP(){var e=[],t=Sa;function r(n){if(n!=null&&!isNaN(n=+n))return t((id(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(us),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>uU(e,i/n))},r.copy=function(){return zP(t).domain(e)},To.apply(r,arguments)}function Yp(){var e=0,t=.5,r=1,n=1,a,i,o,s,c,u=Sa,f,d=!1,p;function m(b){return isNaN(b=+b)?p:(b=.5+((b=+f(b))-i)*(n*b<n*i?s:c),u(d?Math.max(0,Math.min(1,b)):b))}m.domain=function(b){return arguments.length?([e,t,r]=b,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(b){return arguments.length?(d=!!b,m):d},m.interpolator=function(b){return arguments.length?(u=b,m):u};function x(b){return function(S){var v,y,w;return arguments.length?([v,y,w]=S,u=DU(b,[v,y,w]),m):[u(0),u(.5),u(1)]}}return m.range=x(eu),m.rangeRound=x(ib),m.unknown=function(b){return arguments.length?(p=b,m):p},function(b){return f=b,a=b(e),i=b(t),o=b(r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function UP(){var e=bs(Yp()(Sa));return e.copy=function(){return ws(e,UP())},To.apply(e,arguments)}function WP(){var e=cb(Yp()).domain([.1,1,10]);return e.copy=function(){return ws(e,WP()).base(e.base())},To.apply(e,arguments)}function VP(){var e=ub(Yp());return e.copy=function(){return ws(e,VP()).constant(e.constant())},To.apply(e,arguments)}function kb(){var e=fb(Yp());return e.copy=function(){return ws(e,kb()).exponent(e.exponent())},To.apply(e,arguments)}function _V(){return kb.apply(null,arguments).exponent(.5)}const CS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jf,scaleDiverging:UP,scaleDivergingLog:WP,scaleDivergingPow:kb,scaleDivergingSqrt:_V,scaleDivergingSymlog:VP,scaleIdentity:SP,scaleImplicit:_v,scaleLinear:bh,scaleLog:_P,scaleOrdinal:rb,scalePoint:Wu,scalePow:db,scaleQuantile:NP,scaleQuantize:OP,scaleRadial:CP,scaleSequential:BP,scaleSequentialLog:FP,scaleSequentialPow:wb,scaleSequentialQuantile:zP,scaleSequentialSqrt:jV,scaleSequentialSymlog:GP,scaleSqrt:iW,scaleSymlog:PP,scaleThreshold:MP,scaleTime:kV,scaleUtc:SV,tickFormat:kP},Symbol.toStringTag,{value:"Module"}));var PV=Vc;function CV(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!PV(o):r(o,s)))var s=o,c=i}return c}var HP=CV;function NV(e,t){return e>t}var OV=NV,MV=HP,AV=OV,TV=Jc;function EV(e){return e&&e.length?MV(e,TV,AV):void 0}var $V=EV;const qo=Ir($V);function RV(e,t){return e<t}var DV=RV,IV=HP,LV=DV,BV=Jc;function FV(e){return e&&e.length?IV(e,BV,LV):void 0}var GV=FV;const Zp=Ir(GV);var zV=D1,UV=vs,WV=rP,VV=Fa;function HV(e,t){var r=VV(e)?zV:WV;return r(e,UV(t))}var XV=HV,KV=eP,qV=XV;function YV(e,t){return KV(qV(e,t),1)}var ZV=YV;const QV=Ir(ZV);var JV=Y1;function eH(e,t){return JV(e,t)}var tH=eH;const ul=Ir(tH);var tu=1e9,rH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jb,rn=!0,mi="[DecimalError] ",Ys=mi+"Invalid argument: ",Sb=mi+"Exponent out of range: ",ru=Math.floor,$s=Math.pow,nH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ha,Yn=1e7,Zr=7,XP=9007199254740991,jh=ru(XP/Zr),Ye={};Ye.absoluteValue=Ye.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ye.comparedTo=Ye.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ye.decimalPlaces=Ye.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Zr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ye.dividedBy=Ye.div=function(e){return wo(this,new this.constructor(e))};Ye.dividedToIntegerBy=Ye.idiv=function(e){var t=this,r=t.constructor;return Dr(wo(t,new r(e),0,1),r.precision)};Ye.equals=Ye.eq=function(e){return!this.cmp(e)};Ye.exponent=function(){return Bn(this)};Ye.greaterThan=Ye.gt=function(e){return this.cmp(e)>0};Ye.greaterThanOrEqualTo=Ye.gte=function(e){return this.cmp(e)>=0};Ye.isInteger=Ye.isint=function(){return this.e>this.d.length-2};Ye.isNegative=Ye.isneg=function(){return this.s<0};Ye.isPositive=Ye.ispos=function(){return this.s>0};Ye.isZero=function(){return this.s===0};Ye.lessThan=Ye.lt=function(e){return this.cmp(e)<0};Ye.lessThanOrEqualTo=Ye.lte=function(e){return this.cmp(e)<1};Ye.logarithm=Ye.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ha))throw Error(mi+"NaN");if(r.s<1)throw Error(mi+(r.s?"NaN":"-Infinity"));return r.eq(Ha)?new n(0):(rn=!1,t=wo(Of(r,i),Of(e,i),i),rn=!0,Dr(t,a))};Ye.minus=Ye.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?YP(t,e):KP(t,(e.s=-e.s,e))};Ye.modulo=Ye.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(mi+"NaN");return r.s?(rn=!1,t=wo(r,e,0,1).times(e),rn=!0,r.minus(t)):Dr(new n(r),a)};Ye.naturalExponential=Ye.exp=function(){return qP(this)};Ye.naturalLogarithm=Ye.ln=function(){return Of(this)};Ye.negated=Ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ye.plus=Ye.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KP(t,e):YP(t,(e.s=-e.s,e))};Ye.precision=Ye.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ys+e);if(t=Bn(a)+1,n=a.d.length-1,r=n*Zr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ye.squareRoot=Ye.sqrt=function(){var e,t,r,n,a,i,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(mi+"NaN")}for(e=Bn(s),rn=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Vi(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ru((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(wo(s,i,o+2)).times(.5),Vi(i.d).slice(0,o)===(t=Vi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Dr(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return rn=!0,Dr(n,r)};Ye.times=Ye.mul=function(e){var t,r,n,a,i,o,s,c,u,f=this,d=f.constructor,p=f.d,m=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=p.length,u=m.length,c<u&&(i=p,p=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)s=i[a]+m[n]*p[a-n-1]+t,i[a--]=s%Yn|0,t=s/Yn|0;i[a]=(i[a]+t)%Yn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,rn?Dr(e,d.precision):e};Ye.toDecimalPlaces=Ye.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(eo(e,0,tu),t===void 0?t=n.rounding:eo(t,0,8),Dr(r,e+Bn(r)+1,t))};Ye.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=fl(n,!0):(eo(e,0,tu),t===void 0?t=a.rounding:eo(t,0,8),n=Dr(new a(n),e+1,t),r=fl(n,!0,e+1)),r};Ye.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?fl(a):(eo(e,0,tu),t===void 0?t=i.rounding:eo(t,0,8),n=Dr(new i(a),e+Bn(a)+1,t),r=fl(n.abs(),!1,e+Bn(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ye.toInteger=Ye.toint=function(){var e=this,t=e.constructor;return Dr(new t(e),Bn(e)+1,t.rounding)};Ye.toNumber=function(){return+this};Ye.toPower=Ye.pow=function(e){var t,r,n,a,i,o,s=this,c=s.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(Ha);if(s=new c(s),!s.s){if(e.s<1)throw Error(mi+"Infinity");return s}if(s.eq(Ha))return s;if(n=c.precision,e.eq(Ha))return Dr(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=XP){for(a=new c(Ha),t=Math.ceil(n/Zr+4),rn=!1;r%2&&(a=a.times(s),OS(a.d,t)),r=ru(r/2),r!==0;)s=s.times(s),OS(s.d,t);return rn=!0,e.s<0?new c(Ha).div(a):Dr(a,n)}}else if(i<0)throw Error(mi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,rn=!1,a=e.times(Of(s,n+u)),rn=!0,a=qP(a),a.s=i,a};Ye.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Bn(a),n=fl(a,r<=i.toExpNeg||r>=i.toExpPos)):(eo(e,1,tu),t===void 0?t=i.rounding:eo(t,0,8),a=Dr(new i(a),e,t),r=Bn(a),n=fl(a,e<=r||r<=i.toExpNeg,e)),n};Ye.toSignificantDigits=Ye.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(eo(e,1,tu),t===void 0?t=n.rounding:eo(t,0,8)),Dr(new n(r),e,t)};Ye.toString=Ye.valueOf=Ye.val=Ye.toJSON=Ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Bn(e),r=e.constructor;return fl(e,t<=r.toExpNeg||t>=r.toExpPos)};function KP(e,t){var r,n,a,i,o,s,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),rn?Dr(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,s=u.length):(n=u,a=o,s=c.length),o=Math.ceil(d/Zr),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=c.length,i=u.length,s-i<0&&(i=s,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Yn|0,c[i]%=Yn;for(r&&(c.unshift(r),++a),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=a,rn?Dr(t,d):t}function eo(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ys+e)}function Vi(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Zr-n.length,r&&(i+=Bo(r)),i+=n;o=e[t],n=o+"",r=Zr-n.length,r&&(i+=Bo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var wo=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Yn|0,o=i/Yn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,c;if(i!=o)c=i>o?1:-1;else for(s=c=0;s<i;s++)if(n[s]!=a[s]){c=n[s]>a[s]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Yn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,c,u,f,d,p,m,x,b,S,v,y,w,P,j,k,O,A,R=n.constructor,E=n.s==a.s?1:-1,T=n.d,B=a.d;if(!n.s)return new R(n);if(!a.s)throw Error(mi+"Division by zero");for(c=n.e-a.e,O=B.length,j=T.length,m=new R(E),x=m.d=[],u=0;B[u]==(T[u]||0);)++u;if(B[u]>(T[u]||0)&&--c,i==null?y=i=R.precision:o?y=i+(Bn(n)-Bn(a))+1:y=i,y<0)return new R(0);if(y=y/Zr+2|0,u=0,O==1)for(f=0,B=B[0],y++;(u<j||f)&&y--;u++)w=f*Yn+(T[u]||0),x[u]=w/B|0,f=w%B|0;else{for(f=Yn/(B[0]+1)|0,f>1&&(B=e(B,f),T=e(T,f),O=B.length,j=T.length),P=O,b=T.slice(0,O),S=b.length;S<O;)b[S++]=0;A=B.slice(),A.unshift(0),k=B[0],B[1]>=Yn/2&&++k;do f=0,s=t(B,b,O,S),s<0?(v=b[0],O!=S&&(v=v*Yn+(b[1]||0)),f=v/k|0,f>1?(f>=Yn&&(f=Yn-1),d=e(B,f),p=d.length,S=b.length,s=t(d,b,p,S),s==1&&(f--,r(d,O<p?A:B,p))):(f==0&&(s=f=1),d=B.slice()),p=d.length,p<S&&d.unshift(0),r(b,d,S),s==-1&&(S=b.length,s=t(B,b,O,S),s<1&&(f++,r(b,O<S?A:B,S))),S=b.length):s===0&&(f++,b=[0]),x[u++]=f,s&&b[0]?b[S++]=T[P]||0:(b=[T[P]],S=1);while((P++<j||b[0]!==void 0)&&y--)}return x[0]||x.shift(),m.e=c,Dr(m,o?i+Bn(m)+1:i)}}();function qP(e,t){var r,n,a,i,o,s,c=0,u=0,f=e.constructor,d=f.precision;if(Bn(e)>16)throw Error(Sb+Bn(e));if(!e.s)return new f(Ha);for(rn=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log($s(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(Ha),f.precision=s;;){if(a=Dr(a.times(e),s),r=r.times(++c),o=i.plus(wo(a,r,s)),Vi(o.d).slice(0,s)===Vi(i.d).slice(0,s)){for(;u--;)i=Dr(i.times(i),s);return f.precision=d,t==null?(rn=!0,Dr(i,d)):i}i=o}}function Bn(e){for(var t=e.e*Zr,r=e.d[0];r>=10;r/=10)t++;return t}function Rm(e,t,r){if(t>e.LN10.sd())throw rn=!0,r&&(e.precision=r),Error(mi+"LN10 precision limit exceeded");return Dr(new e(e.LN10),t)}function Bo(e){for(var t="";e--;)t+="0";return t}function Of(e,t){var r,n,a,i,o,s,c,u,f,d=1,p=10,m=e,x=m.d,b=m.constructor,S=b.precision;if(m.s<1)throw Error(mi+(m.s?"NaN":"-Infinity"));if(m.eq(Ha))return new b(0);if(t==null?(rn=!1,u=S):u=t,m.eq(10))return t==null&&(rn=!0),Rm(b,u);if(u+=p,b.precision=u,r=Vi(x),n=r.charAt(0),i=Bn(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Vi(m.d),n=r.charAt(0),d++;i=Bn(m),n>1?(m=new b("0."+r),i++):m=new b(n+"."+r.slice(1))}else return c=Rm(b,u+2,S).times(i+""),m=Of(new b(n+"."+r.slice(1)),u-p).plus(c),b.precision=S,t==null?(rn=!0,Dr(m,S)):m;for(s=o=m=wo(m.minus(Ha),m.plus(Ha),u),f=Dr(m.times(m),u),a=3;;){if(o=Dr(o.times(f),u),c=s.plus(wo(o,new b(a),u)),Vi(c.d).slice(0,u)===Vi(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Rm(b,u+2,S).times(i+""))),s=wo(s,new b(d),u),b.precision=S,t==null?(rn=!0,Dr(s,S)):s;s=c,a+=2}}function NS(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ru(r/Zr),e.d=[],n=(r+1)%Zr,r<0&&(n+=Zr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Zr;n<a;)e.d.push(+t.slice(n,n+=Zr));t=t.slice(n),n=Zr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),rn&&(e.e>jh||e.e<-jh))throw Error(Sb+r)}else e.s=0,e.e=0,e.d=[0];return e}function Dr(e,t,r){var n,a,i,o,s,c,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Zr,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Zr),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Zr,a=n-Zr+o}if(r!==void 0&&(i=$s(10,o-a-1),s=u/i%10|0,c=t<0||d[f+1]!==void 0||u%i,c=r<4?(s||c)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||c||r==6&&(n>0?a>0?u/$s(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=Bn(e),d.length=1,t=t-i-1,d[0]=$s(10,(Zr-t%Zr)%Zr),e.e=ru(-t/Zr)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=$s(10,Zr-n),d[f]=a>0?(u/$s(10,o-a)%$s(10,a)|0)*i:0),c)for(;;)if(f==0){(d[0]+=i)==Yn&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Yn)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(rn&&(e.e>jh||e.e<-jh))throw Error(Sb+Bn(e));return e}function YP(e,t){var r,n,a,i,o,s,c,u,f,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),rn?Dr(t,m):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,s=d.length):(r=d,n=u,s=c.length),a=Math.max(Math.ceil(m/Zr),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(c[a]!=d[a]){f=c[a]<d[a];break}o=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),s=c.length,a=d.length-s;a>0;--a)c[s++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(i=a;i&&c[--i]===0;)c[i]=Yn-1;--c[i],c[a]+=Yn}c[a]-=d[a]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,rn?Dr(t,m):t):new p(0)}function fl(e,t,r){var n,a=Bn(e),i=Vi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Bo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Bo(-a-1)+i,r&&(n=r-o)>0&&(i+=Bo(n))):a>=o?(i+=Bo(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Bo(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Bo(n))),e.s<0?"-"+i:i}function OS(e,t){if(e.length>t)return e.length=t,!0}function ZP(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ys+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return NS(o,i.toString())}else if(typeof i!="string")throw Error(Ys+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,nH.test(i))NS(o,i);else throw Error(Ys+i)}if(a.prototype=Ye,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ZP,a.config=a.set=aH,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function aH(e){if(!e||typeof e!="object")throw Error(mi+"Object expected");var t,r,n,a=["precision",1,tu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ru(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Ys+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ys+r+": "+n);return this}var jb=ZP(rH);Ha=new jb(1);const Er=jb;function iH(e){return cH(e)||lH(e)||sH(e)||oH()}function oH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sH(e,t){if(e){if(typeof e=="string")return Ov(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ov(e,t)}}function lH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function cH(e){if(Array.isArray(e))return Ov(e)}function Ov(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var uH=function(t){return t},QP={},JP=function(t){return t===QP},MS=function(t){return function r(){return arguments.length===0||arguments.length===1&&JP(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},fH=function e(t,r){return t===1?r:MS(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==QP}).length;return o>=t?r.apply(void 0,a):e(t-o,MS(function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];var f=a.map(function(d){return JP(d)?c.shift():d});return r.apply(void 0,iH(f).concat(c))}))})},Qp=function(t){return fH(t.length,t)},Mv=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},dH=Qp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),hH=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return uH;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,c){return c(s)},i.apply(void 0,arguments))}},Av=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},eC=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,c){return s===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function pH(e){var t;return e===0?t=1:t=Math.floor(new Er(e).abs().log(10).toNumber())+1,t}function gH(e,t,r){for(var n=new Er(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var mH=Qp(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),yH=Qp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),vH=Qp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Jp={rangeStep:gH,getDigitCount:pH,interpolateNumber:mH,uninterpolateNumber:yH,uninterpolateTruncation:vH};function Tv(e){return wH(e)||bH(e)||tC(e)||xH()}function xH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function wH(e){if(Array.isArray(e))return Ev(e)}function Mf(e,t){return jH(e)||SH(e,t)||tC(e,t)||kH()}function kH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tC(e,t){if(e){if(typeof e=="string")return Ev(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ev(e,t)}}function Ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SH(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function jH(e){if(Array.isArray(e))return e}function rC(e){var t=Mf(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function nC(e,t,r){if(e.lte(0))return new Er(0);var n=Jp.getDigitCount(e.toNumber()),a=new Er(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new Er(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=s.mul(a);return t?c:new Er(Math.ceil(c))}function _H(e,t,r){var n=1,a=new Er(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Er(10).pow(Jp.getDigitCount(e)-1),a=new Er(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Er(Math.floor(e)))}else e===0?a=new Er(Math.floor((t-1)/2)):r||(a=new Er(Math.floor(e)));var o=Math.floor((t-1)/2),s=hH(dH(function(c){return a.add(new Er(c-o).mul(n)).toNumber()}),Mv);return s(0,t)}function aC(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Er(0),tickMin:new Er(0),tickMax:new Er(0)};var i=nC(new Er(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Er(0):(o=new Er(e).add(t).div(2),o=o.sub(new Er(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Er(t).sub(o).div(i).toNumber()),u=s+c+1;return u>r?aC(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new Er(s).mul(i)),tickMax:o.add(new Er(c).mul(i))})}function PH(e){var t=Mf(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=rC([r,n]),c=Mf(s,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(Tv(Mv(0,a-1).map(function(){return 1/0}))):[].concat(Tv(Mv(0,a-1).map(function(){return-1/0})),[f]);return r>n?Av(d):d}if(u===f)return _H(u,a,i);var p=aC(u,f,o,i),m=p.step,x=p.tickMin,b=p.tickMax,S=Jp.rangeStep(x,b.add(new Er(.1).mul(m)),m);return r>n?Av(S):S}function CH(e,t){var r=Mf(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=rC([n,a]),s=Mf(o,2),c=s[0],u=s[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var f=Math.max(t,2),d=nC(new Er(u).sub(c).div(f-1),i,0),p=[].concat(Tv(Jp.rangeStep(new Er(c),new Er(u).sub(new Er(.99).mul(d)),d)),[u]);return n>a?Av(p):p}var NH=eC(PH),OH=eC(CH),MH="Invariant failed";function dl(e,t){throw new Error(MH)}var AH=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function kc(e){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(e)}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_h.apply(this,arguments)}function TH(e,t){return DH(e)||RH(e,t)||$H(e,t)||EH()}function EH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $H(e,t){if(e){if(typeof e=="string")return AS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AS(e,t)}}function AS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function DH(e){if(Array.isArray(e))return e}function IH(e,t){if(e==null)return{};var r=LH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function BH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sC(n.key),n)}}function GH(e,t,r){return t&&FH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zH(e,t,r){return t=Ph(t),UH(e,iC()?Reflect.construct(t,r||[],Ph(e).constructor):t.apply(e,r))}function UH(e,t){if(t&&(kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WH(e)}function WH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iC=function(){return!!e})()}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ph(e)}function VH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$v(e,t)}function $v(e,t){return $v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$v(e,t)}function oC(e,t,r){return t=sC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sC(e){var t=HH(e,"string");return kc(t)=="symbol"?t:t+""}function HH(e,t){if(kc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nu=function(e){function t(){return BH(this,t),zH(this,t,arguments)}return VH(t,e),GH(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,p=IH(n,AH),m=Ot(p,!1);this.props.direction==="x"&&f.type!=="number"&&dl();var x=c.map(function(b){var S=u(b,s),v=S.x,y=S.y,w=S.value,P=S.errorVal;if(!P)return null;var j=[],k,O;if(Array.isArray(P)){var A=TH(P,2);k=A[0],O=A[1]}else k=O=P;if(i==="vertical"){var R=f.scale,E=y+a,T=E+o,B=E-o,G=R(w-k),V=R(w+O);j.push({x1:V,y1:T,x2:V,y2:B}),j.push({x1:G,y1:E,x2:V,y2:E}),j.push({x1:G,y1:T,x2:G,y2:B})}else if(i==="horizontal"){var z=d.scale,D=v+a,L=D-o,F=D+o,H=z(w-k),W=z(w+O);j.push({x1:L,y1:W,x2:F,y2:W}),j.push({x1:D,y1:H,x2:D,y2:W}),j.push({x1:L,y1:H,x2:F,y2:H})}return ee.createElement(kr,_h({className:"recharts-errorBar",key:"bar-".concat(j.map(function(J){return"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))},m),j.map(function(J){return ee.createElement("line",_h({},J,{key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))}))});return ee.createElement(kr,{className:"recharts-errorBars"},x)}}])}(ee.Component);oC(nu,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});oC(nu,"displayName","ErrorBar");function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(n){XH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XH(e,t,r){return t=KH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KH(e){var t=qH(e,"string");return Af(t)=="symbol"?t:t+""}function qH(e,t){if(Af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lC=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Va(r,qi);if(!o)return null;var s=qi.defaultProps,c=s!==void 0?Os(Os({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var p=d.item,m=d.props,x=m.sectors||m.data||[];return f.concat(x.map(function(b){return{type:o.props.iconType||p.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(n||[]).map(function(f){var d=f.item,p=d.type.defaultProps,m=p!==void 0?Os(Os({},p),d.props):{},x=m.dataKey,b=m.name,S=m.legendType,v=m.hide;return{inactive:v,dataKey:x,type:c.iconType||S||"square",color:_b(d),value:b||x,payload:m}}),Os(Os(Os({},c),qi.getWithHeight(o,a)),{},{payload:u,item:o})};function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function ES(e){return JH(e)||QH(e)||ZH(e)||YH()}function YH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZH(e,t){if(e){if(typeof e=="string")return Rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rv(e,t)}}function QH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JH(e){if(Array.isArray(e))return Rv(e)}function Rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){nc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nc(e,t,r){return t=eX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eX(e){var t=tX(e,"string");return Tf(t)=="symbol"?t:t+""}function tX(e,t){if(Tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hn(e,t,r){return Nt(e)||Nt(t)?r:Vn(t)?hi(e,t,r):At(t)?t(e):r}function Vu(e,t,r,n){var a=QV(e,function(s){return Hn(s,t)});if(r==="number"){var i=a.filter(function(s){return Ee(s)||parseFloat(s)});return i.length?[Zp(i),qo(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!Nt(s)}):a;return o.map(function(s){return Vn(s)||s instanceof Date?s:""})}var rX=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,p=u>=s-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Oi(d-f)!==Oi(p-d)){var x=[];if(Oi(p-d)===Oi(c[1]-c[0])){m=p;var b=d+c[1]-c[0];x[0]=Math.min(b,(b+f)/2),x[1]=Math.max(b,(b+f)/2)}else{m=f;var S=p+c[1]-c[0];x[0]=Math.min(d,(S+d)/2),x[1]=Math.max(d,(S+d)/2)}var v=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>v[0]&&t<=v[1]||t>=x[0]&&t<=x[1]){o=a[u].index;break}}else{var y=Math.min(f,p),w=Math.max(f,p);if(t>(y+d)/2&&t<=(w+d)/2){o=a[u].index;break}}}else for(var P=0;P<s;P++)if(P===0&&t<=(n[P].coordinate+n[P+1].coordinate)/2||P>0&&P<s-1&&t>(n[P].coordinate+n[P-1].coordinate)/2&&t<=(n[P].coordinate+n[P+1].coordinate)/2||P===s-1&&t>(n[P].coordinate+n[P-1].coordinate)/2){o=n[P].index;break}return o},_b=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:s;break;default:c=s;break}return c},nX=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),c=0,u=s.length;c<u;c++)for(var f=i[s[c]].stackGroups,d=Object.keys(f),p=0,m=d.length;p<m;p++){var x=f[d[p]],b=x.items,S=x.cateAxisId,v=b.filter(function(O){return xo(O.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,w=y!==void 0?jn(jn({},y),v[0].props):v[0].props,P=w.barSize,j=w[S];o[j]||(o[j]=[]);var k=Nt(P)?r:P;o[j].push({item:v[0],stackList:v.slice(1),barSize:Nt(k)?void 0:cl(k,n,0)})}}return o},aX=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,c=o.length;if(c<1)return null;var u=cl(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=a/c,x=o.reduce(function(P,j){return P+j.barSize||0},0);x+=(c-1)*u,x>=a&&(x-=(c-1)*u,u=0),x>=a&&m>0&&(p=!0,m*=.9,x=c*m);var b=(a-x)/2>>0,S={offset:b-u,size:0};f=o.reduce(function(P,j){var k={item:j.item,position:{offset:S.offset+S.size+u,size:p?m:j.barSize}},O=[].concat(ES(P),[k]);return S=O[O.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){O.push({item:A,position:S})}),O},d)}else{var v=cl(n,a,0,!0);a-2*v-(c-1)*u<=0&&(u=0);var y=(a-2*v-(c-1)*u)/c;y>1&&(y>>=0);var w=s===+s?Math.min(y,s):y;f=o.reduce(function(P,j,k){var O=[].concat(ES(P),[{item:j.item,position:{offset:v+(y+u)*k+(y-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){O.push({item:A,position:O[O.length-1].position})}),O},d)}return f},iX=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,c=o-(s.left||0)-(s.right||0),u=lC({children:i,legendWidth:c});if(u){var f=a||{},d=f.width,p=f.height,m=u.align,x=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&x==="middle")&&m!=="center"&&Ee(t[m]))return jn(jn({},t),{},nc({},m,t[m]+(d||0)));if((b==="horizontal"||b==="vertical"&&m==="center")&&x!=="middle"&&Ee(t[x]))return jn(jn({},t),{},nc({},x,t[x]+(p||0)))}return t},oX=function(t,r,n){return Nt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},cC=function(t,r,n,a,i){var o=r.props.children,s=Ba(o,nu).filter(function(u){return oX(a,i,u.props.direction)});if(s&&s.length){var c=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Hn(f,n);if(Nt(d))return u;var p=Array.isArray(d)?[Zp(d),qo(d)]:[d,d],m=c.reduce(function(x,b){var S=Hn(f,b,0),v=p[0]-Math.abs(Array.isArray(S)?S[0]:S),y=p[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(v,x[0]),Math.max(y,x[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},sX=function(t,r,n,a,i){var o=r.map(function(s){return cC(t,s,n,i,a)}).filter(function(s){return!Nt(s)});return o&&o.length?o.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]):null},uC=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&cC(t,c,u,a)||Vu(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,c.push(u[f]));return c},[])},fC=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},dC=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,s=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||s.push(r),o||s.push(n),s},yo=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Oi(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var p=i?i.indexOf(d):d;return{coordinate:a(p)+u,value:d,offset:u}});return f.filter(function(d){return!Yc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,p){return{coordinate:a(d)+u,value:d,index:p,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,p){return{coordinate:a(d)+u,value:i?i[d]:d,index:p,offset:u}})},Dm=new WeakMap,Jd=function(t,r){if(typeof r!="function")return t;Dm.has(t)||Dm.set(t,new WeakMap);var n=Dm.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},lX=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:jf(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:bh(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Wu(),realScaleType:"point"}:i==="category"?{scale:jf(),realScaleType:"band"}:{scale:bh(),realScaleType:"linear"};if(ll(a)){var c="scale".concat(Ip(a));return{scale:(CS[c]||Wu)(),realScaleType:CS[c]?c:"point"}}return At(a)?{scale:a}:{scale:Wu(),realScaleType:"point"}},RS=1e-4,cX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-RS,o=Math.max(a[0],a[1])+RS,s=t(r[0]),c=t(r[n-1]);(s<i||s>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},uX=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},fX=function(t,r){if(!r||r.length!==2||!Ee(r[0])||!Ee(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Ee(t[0])||t[0]<n)&&(i[0]=n),(!Ee(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},dX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var c=Yc(t[s][n][1])?t[s][n][0]:t[s][n][1];c>=0?(t[s][n][0]=i,t[s][n][1]=i+c,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+c,o=t[s][n][1])}},hX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=Yc(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},pX={sign:dX,expand:O7,none:pc,silhouette:M7,wiggle:A7,positive:hX},gX=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=pX[n],o=N7().keys(a).value(function(s,c){return+Hn(s,c,0)}).order(ov).offset(i);return o(t)},mX=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,c={},u=s.reduce(function(d,p){var m,x=(m=p.type)!==null&&m!==void 0&&m.defaultProps?jn(jn({},p.type.defaultProps),p.props):p.props,b=x.stackId,S=x.hide;if(S)return d;var v=x[n],y=d[v]||{hasStack:!1,stackGroups:{}};if(Vn(b)){var w=y.stackGroups[b]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(p),y.hasStack=!0,y.stackGroups[b]=w}else y.stackGroups[xl("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return jn(jn({},d),{},nc({},v,y))},c),f={};return Object.keys(u).reduce(function(d,p){var m=u[p];if(m.hasStack){var x={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(b,S){var v=m.stackGroups[S];return jn(jn({},b),{},nc({},S,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:gX(t,v.items,i)}))},x)}return jn(jn({},d),{},nc({},p,m))},f)},yX=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=NH(u,i,s);return t.domain([Zp(f),qo(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),p=OH(d,i,s);return{niceTicks:p}}return null};function Sc(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Nt(a[t.dataKey])){var s=Z0(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Hn(a,Nt(o)?t.dataKey:o);return Nt(c)?null:t.scale(c)}var DS=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var c=Hn(o,r.dataKey,r.domain[s]);return Nt(c)?null:r.scale(c)-i/2+a},vX=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},xX=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Vn(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},bX=function(t){return t.reduce(function(r,n){return[Zp(n.concat([r[0]]).filter(Ee)),qo(n.concat([r[1]]).filter(Ee))]},[1/0,-1/0])},hC=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,c=s.reduce(function(u,f){var d=bX(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},IS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dv=function(t,r,n){if(At(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Ee(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(IS.test(t[0])){var i=+IS.exec(t[0])[1];a[0]=r[0]-i}else At(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Ee(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(LS.test(t[1])){var o=+LS.exec(t[1])[1];a[1]=r[1]+o}else At(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Ch=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=Q1(r,function(d){return d.coordinate}),o=1/0,s=1,c=i.length;s<c;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},BS=function(t,r,n){return!t||!t.length||ul(t,hi(n,"type.defaultProps.domain"))?r:t},pC=function(t,r){var n=t.type.defaultProps?jn(jn({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return jn(jn({},Ot(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:_b(t),value:Hn(r,a),type:c,payload:r,chartType:u,hide:f})};function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function FS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FS(Object(r),!0).forEach(function(n){wX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wX(e,t,r){return t=kX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=SX(e,"string");return Ef(t)=="symbol"?t:t+""}function SX(e,t){if(Ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nh=Math.PI/180,jX=function(t){return t*180/Math.PI},ia=function(t,r,n,a){return{x:t+Math.cos(-Nh*a)*n,y:r+Math.sin(-Nh*a)*n}},_X=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},PX=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=_X({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var c=(n-i)/s,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:s,angle:jX(u),angleInRadian:u}},CX=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},NX=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},zS=function(t,r){var n=t.x,a=t.y,i=PX({x:n,y:a},r),o=i.radius,s=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=CX(r),d=f.startAngle,p=f.endAngle,m=s,x;if(d<=p){for(;m>p;)m-=360;for(;m<d;)m+=360;x=m>=d&&m<=p}else{for(;m>d;)m-=360;for(;m<p;)m+=360;x=m>=p&&m<=d}return x?GS(GS({},r),{},{radius:o,angle:NX(m,r)}):null};function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}var OX=["offset"];function MX(e){return $X(e)||EX(e)||TX(e)||AX()}function AX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TX(e,t){if(e){if(typeof e=="string")return Iv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iv(e,t)}}function EX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $X(e){if(Array.isArray(e))return Iv(e)}function Iv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RX(e,t){if(e==null)return{};var r=DX(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function US(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?US(Object(r),!0).forEach(function(n){IX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IX(e,t,r){return t=LX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LX(e){var t=BX(e,"string");return $f(t)=="symbol"?t:t+""}function BX(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rf.apply(this,arguments)}var FX=function(t){var r=t.value,n=t.formatter,a=Nt(t.children)?r:t.children;return At(n)?n(a):a},GX=function(t,r){var n=Oi(r-t),a=Math.min(Math.abs(r-t),360);return n*a},zX=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,c=i,u=c.cx,f=c.cy,d=c.innerRadius,p=c.outerRadius,m=c.startAngle,x=c.endAngle,b=c.clockWise,S=(d+p)/2,v=GX(m,x),y=v>=0?1:-1,w,P;a==="insideStart"?(w=m+y*o,P=b):a==="insideEnd"?(w=x-y*o,P=!b):a==="end"&&(w=x+y*o,P=b),P=v<=0?P:!P;var j=ia(u,f,S,w),k=ia(u,f,S,w+(P?1:-1)*359),O="M".concat(j.x,",").concat(j.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(P?0:1,`,
    `).concat(k.x,",").concat(k.y),A=Nt(t.id)?xl("recharts-radial-line-"):t.id;return ee.createElement("text",Rf({},n,{dominantBaseline:"central",className:tr("recharts-radial-bar-label",s)}),ee.createElement("defs",null,ee.createElement("path",{id:A,d:O})),ee.createElement("textPath",{xlinkHref:"#".concat(A)},r))},UX=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,c=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,p=(f+d)/2;if(a==="outside"){var m=ia(o,s,u+n,p),x=m.x,b=m.y;return{x,y:b,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var S=(c+u)/2,v=ia(o,s,S,p),y=v.x,w=v.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},WX=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,p=d*a,m=d>0?"end":"start",x=d>0?"start":"end",b=u>=0?1:-1,S=b*a,v=b>0?"end":"start",y=b>0?"start":"end";if(i==="top"){var w={x:s+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:m};return Gn(Gn({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var P={x:s+u/2,y:c+f+p,textAnchor:"middle",verticalAnchor:x};return Gn(Gn({},P),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(i==="left"){var j={x:s-S,y:c+f/2,textAnchor:v,verticalAnchor:"middle"};return Gn(Gn({},j),n?{width:Math.max(j.x-n.x,0),height:f}:{})}if(i==="right"){var k={x:s+u+S,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return Gn(Gn({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:f}:{})}var O=n?{width:u,height:f}:{};return i==="insideLeft"?Gn({x:s+S,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},O):i==="insideRight"?Gn({x:s+u-S,y:c+f/2,textAnchor:v,verticalAnchor:"middle"},O):i==="insideTop"?Gn({x:s+u/2,y:c+p,textAnchor:"middle",verticalAnchor:x},O):i==="insideBottom"?Gn({x:s+u/2,y:c+f-p,textAnchor:"middle",verticalAnchor:m},O):i==="insideTopLeft"?Gn({x:s+S,y:c+p,textAnchor:y,verticalAnchor:x},O):i==="insideTopRight"?Gn({x:s+u-S,y:c+p,textAnchor:v,verticalAnchor:x},O):i==="insideBottomLeft"?Gn({x:s+S,y:c+f-p,textAnchor:y,verticalAnchor:m},O):i==="insideBottomRight"?Gn({x:s+u-S,y:c+f-p,textAnchor:v,verticalAnchor:m},O):Hc(i)&&(Ee(i.x)||Gs(i.x))&&(Ee(i.y)||Gs(i.y))?Gn({x:s+cl(i.x,u),y:c+cl(i.y,f),textAnchor:"end",verticalAnchor:"end"},O):Gn({x:s+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},O)},VX=function(t){return"cx"in t&&Ee(t.cx)};function aa(e){var t=e.offset,r=t===void 0?5:t,n=RX(e,OX),a=Gn({offset:r},n),i=a.viewBox,o=a.position,s=a.value,c=a.children,u=a.content,f=a.className,d=f===void 0?"":f,p=a.textBreakAll;if(!i||Nt(s)&&Nt(c)&&!C.isValidElement(u)&&!At(u))return null;if(C.isValidElement(u))return C.cloneElement(u,a);var m;if(At(u)){if(m=C.createElement(u,a),C.isValidElement(m))return m}else m=FX(a);var x=VX(i),b=Ot(a,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return zX(a,m,b);var S=x?UX(a):WX(a);return ee.createElement(dh,Rf({className:tr("recharts-label",d)},b,S,{breakAll:p}),m)}aa.displayName="Label";var gC=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,p=t.y,m=t.top,x=t.left,b=t.width,S=t.height,v=t.clockWise,y=t.labelViewBox;if(y)return y;if(Ee(b)&&Ee(S)){if(Ee(d)&&Ee(p))return{x:d,y:p,width:b,height:S};if(Ee(m)&&Ee(x))return{x:m,y:x,width:b,height:S}}return Ee(d)&&Ee(p)?{x:d,y:p,width:0,height:0}:Ee(r)&&Ee(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||s||0,clockWise:v}:t.viewBox?t.viewBox:{}},HX=function(t,r){return t?t===!0?ee.createElement(aa,{key:"label-implicit",viewBox:r}):Vn(t)?ee.createElement(aa,{key:"label-implicit",viewBox:r,value:t}):C.isValidElement(t)?t.type===aa?C.cloneElement(t,{key:"label-implicit",viewBox:r}):ee.createElement(aa,{key:"label-implicit",content:t,viewBox:r}):At(t)?ee.createElement(aa,{key:"label-implicit",content:t,viewBox:r}):Hc(t)?ee.createElement(aa,Rf({viewBox:r},t,{key:"label-implicit"})):null:null},XX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=gC(t),o=Ba(a,aa).map(function(c,u){return C.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=HX(t.label,r||i);return[s].concat(MX(o))};aa.parseViewBox=gC;aa.renderCallByParent=XX;function KX(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var qX=KX;const YX=Ir(qX);function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}var ZX=["valueAccessor"],QX=["data","dataKey","clockWise","id","textBreakAll"];function JX(e){return nK(e)||rK(e)||tK(e)||eK()}function eK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tK(e,t){if(e){if(typeof e=="string")return Lv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lv(e,t)}}function rK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nK(e){if(Array.isArray(e))return Lv(e)}function Lv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oh(){return Oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oh.apply(this,arguments)}function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(r),!0).forEach(function(n){aK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aK(e,t,r){return t=iK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iK(e){var t=oK(e,"string");return Df(t)=="symbol"?t:t+""}function oK(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HS(e,t){if(e==null)return{};var r=sK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var lK=function(t){return Array.isArray(t.value)?YX(t.value):t.value};function Zi(e){var t=e.valueAccessor,r=t===void 0?lK:t,n=HS(e,ZX),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,c=n.textBreakAll,u=HS(n,QX);return!a||!a.length?null:ee.createElement(kr,{className:"recharts-label-list"},a.map(function(f,d){var p=Nt(i)?r(f,d):Hn(f&&f.payload,i),m=Nt(s)?{}:{id:"".concat(s,"-").concat(d)};return ee.createElement(aa,Oh({},Ot(f,!0),u,m,{parentViewBox:f.parentViewBox,value:p,textBreakAll:c,viewBox:aa.parseViewBox(Nt(o)?f:VS(VS({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Zi.displayName="LabelList";function cK(e,t){return e?e===!0?ee.createElement(Zi,{key:"labelList-implicit",data:t}):ee.isValidElement(e)||At(e)?ee.createElement(Zi,{key:"labelList-implicit",data:t,content:e}):Hc(e)?ee.createElement(Zi,Oh({data:t},e,{key:"labelList-implicit"})):null:null}function uK(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Ba(n,Zi).map(function(o,s){return C.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=cK(e.label,t);return[i].concat(JX(a))}Zi.renderCallByParent=uK;function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(this,arguments)}function XS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(r),!0).forEach(function(n){fK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fK(e,t,r){return t=dK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dK(e){var t=hK(e,"string");return If(t)=="symbol"?t:t+""}function hK(e,t){if(If(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pK=function(t,r){var n=Oi(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},e0=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(s?1:-1)+a,d=Math.asin(c/f)/Nh,p=u?i:i+o*d,m=ia(r,n,f,p),x=ia(r,n,a,p),b=u?i-o*d:i,S=ia(r,n,f*Math.cos(d*Nh),b);return{center:m,circleTangency:x,lineTangency:S,theta:d}},mC=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,c=pK(o,s),u=o+c,f=ia(r,n,i,o),d=ia(r,n,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var m=ia(r,n,a,o),x=ia(r,n,a,u);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},gK=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Oi(f-u),p=e0({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,x=p.lineTangency,b=p.theta,S=e0({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),v=S.circleTangency,y=S.lineTangency,w=S.theta,P=c?Math.abs(u-f):Math.abs(u-f)-b-w;if(P<0)return s?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):mC({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var j="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var k=e0({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),O=k.circleTangency,A=k.lineTangency,R=k.theta,E=e0({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=E.circleTangency,B=E.lineTangency,G=E.theta,V=c?Math.abs(u-f):Math.abs(u-f)-R-G;if(V<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(V>180),",").concat(+(d>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},mK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yC=function(t){var r=KS(KS({},mK),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,p=r.className;if(o<i||f===d)return null;var m=tr("recharts-sector",p),x=o-i,b=cl(s,x,0,!0),S;return b>0&&Math.abs(f-d)<360?S=gK({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(b,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):S=mC({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),ee.createElement("path",Bv({},Ot(r,!0),{className:m,d:S,role:"img"}))};function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(this,arguments)}function qS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(r),!0).forEach(function(n){yK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yK(e,t,r){return t=vK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vK(e){var t=xK(e,"string");return Lf(t)=="symbol"?t:t+""}function xK(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZS={curveBasisClosed:y7,curveBasisOpen:v7,curveBasis:m7,curveBumpX:r7,curveBumpY:n7,curveLinearClosed:x7,curveLinear:Bp,curveMonotoneX:b7,curveMonotoneY:w7,curveNatural:k7,curveStep:S7,curveStepAfter:_7,curveStepBefore:j7},t0=function(t){return t.x===+t.x&&t.y===+t.y},ju=function(t){return t.x},_u=function(t){return t.y},bK=function(t,r){if(At(t))return t;var n="curve".concat(Ip(t));return(n==="curveMonotone"||n==="curveBump")&&r?ZS["".concat(n).concat(r==="vertical"?"Y":"X")]:ZS[n]||Bp},wK=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=bK(n,s),d=u?i.filter(function(b){return t0(b)}):i,p;if(Array.isArray(o)){var m=u?o.filter(function(b){return t0(b)}):o,x=d.map(function(b,S){return YS(YS({},b),{},{base:m[S]})});return s==="vertical"?p=Vd().y(_u).x1(ju).x0(function(b){return b.base.x}):p=Vd().x(ju).y1(_u).y0(function(b){return b.base.y}),p.defined(t0).curve(f),p(x)}return s==="vertical"&&Ee(o)?p=Vd().y(_u).x1(ju).x0(o):Ee(o)?p=Vd().x(ju).y1(_u).y0(o):p=x_().x(ju).y(_u),p.defined(t0).curve(f),p(d)},Zs=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?wK(t):a;return C.createElement("path",Fv({},Ot(t,!1),Q0(t),{className:tr("recharts-curve",r),d:o,ref:i}))},vC={exports:{}},kK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SK=kK,jK=SK;function xC(){}function bC(){}bC.resetWarningCache=xC;var _K=function(){function e(n,a,i,o,s,c){if(c!==jK){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:bC,resetWarningCache:xC};return r.PropTypes=r,r};vC.exports=_K();var PK=vC.exports;const jr=Ir(PK),{getOwnPropertyNames:CK,getOwnPropertySymbols:NK}=Object,{hasOwnProperty:OK}=Object.prototype;function Im(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function r0(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function MK(e){return e!=null?e[Symbol.toStringTag]:void 0}function QS(e){return CK(e).concat(NK(e))}const AK=Object.hasOwn||((e,t)=>OK.call(e,t));function kl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const TK="__v",EK="__o",$K="_owner",{getOwnPropertyDescriptor:JS,keys:e5}=Object;function RK(e,t){return e.byteLength===t.byteLength&&Mh(new Uint8Array(e),new Uint8Array(t))}function DK(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function IK(e,t){return e.byteLength===t.byteLength&&Mh(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function LK(e,t){return kl(e.getTime(),t.getTime())}function BK(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function FK(e,t){return e===t}function t5(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const p=o.value,m=s.value;if(r.equals(p[0],m[0],c,d,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;c++}return!0}const GK=kl;function zK(e,t,r){const n=e5(e);let a=n.length;if(e5(t).length!==a)return!1;for(;a-- >0;)if(!wC(e,t,r,n[a]))return!1;return!0}function Pu(e,t,r){const n=QS(e);let a=n.length;if(QS(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!wC(e,t,r,i)||(o=JS(e,i),s=JS(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function UK(e,t){return kl(e.valueOf(),t.valueOf())}function WK(e,t){return e.source===t.source&&e.flags===t.flags}function r5(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,f=0;for(;(s=c.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function Mh(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function VK(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function wC(e,t,r,n){return(n===$K||n===EK||n===TK)&&(e.$$typeof||t.$$typeof)?!0:AK(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const HK="[object ArrayBuffer]",XK="[object Arguments]",KK="[object Boolean]",qK="[object DataView]",YK="[object Date]",ZK="[object Error]",QK="[object Map]",JK="[object Number]",eq="[object Object]",tq="[object RegExp]",rq="[object Set]",nq="[object String]",aq={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},iq="[object URL]",oq=Object.prototype.toString;function sq({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:x}){return function(S,v,y){if(S===v)return!0;if(S==null||v==null)return!1;const w=typeof S;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?s(S,v,y):w==="function"?i(S,v,y):!1;const P=S.constructor;if(P!==v.constructor)return!1;if(P===Object)return c(S,v,y);if(Array.isArray(S))return t(S,v,y);if(P===Date)return n(S,v,y);if(P===RegExp)return f(S,v,y);if(P===Map)return o(S,v,y);if(P===Set)return d(S,v,y);const j=oq.call(S);if(j===YK)return n(S,v,y);if(j===tq)return f(S,v,y);if(j===QK)return o(S,v,y);if(j===rq)return d(S,v,y);if(j===eq)return typeof S.then!="function"&&typeof v.then!="function"&&c(S,v,y);if(j===iq)return m(S,v,y);if(j===ZK)return a(S,v,y);if(j===XK)return c(S,v,y);if(aq[j])return p(S,v,y);if(j===HK)return e(S,v,y);if(j===qK)return r(S,v,y);if(j===KK||j===JK||j===nq)return u(S,v,y);if(x){let k=x[j];if(!k){const O=MK(S);O&&(k=x[O])}if(k)return k(S,v,y)}return!1}}function lq({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:RK,areArraysEqual:r?Pu:DK,areDataViewsEqual:IK,areDatesEqual:LK,areErrorsEqual:BK,areFunctionsEqual:FK,areMapsEqual:r?Im(t5,Pu):t5,areNumbersEqual:GK,areObjectsEqual:r?Pu:zK,arePrimitiveWrappersEqual:UK,areRegExpsEqual:WK,areSetsEqual:r?Im(r5,Pu):r5,areTypedArraysEqual:r?Im(Mh,Pu):Mh,areUrlsEqual:VK,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=r0(n.areArraysEqual),i=r0(n.areMapsEqual),o=r0(n.areObjectsEqual),s=r0(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function cq(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function uq({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,c){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,c,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,c){return t(s,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,c){return t(s,c,i)}}const fq=ks();ks({strict:!0});ks({circular:!0});ks({circular:!0,strict:!0});ks({createInternalComparator:()=>kl});ks({strict:!0,createInternalComparator:()=>kl});ks({circular:!0,createInternalComparator:()=>kl});ks({circular:!0,createInternalComparator:()=>kl,strict:!0});function ks(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=lq(e),o=sq(i),s=r?r(o):cq(o);return uq({circular:t,comparator:o,createState:n,equals:s,strict:a})}function dq(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function n5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):dq(a)};requestAnimationFrame(n)}function Gv(e){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gv(e)}function hq(e){return yq(e)||mq(e)||gq(e)||pq()}function pq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gq(e,t){if(e){if(typeof e=="string")return a5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a5(e,t)}}function a5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yq(e){if(Array.isArray(e))return e}function vq(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=hq(o),c=s[0],u=s.slice(1);if(typeof c=="number"){n5(a.bind(null,u),c);return}a(c),n5(a.bind(null,u));return}Gv(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function i5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i5(Object(r),!0).forEach(function(n){kC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kC(e,t,r){return t=xq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xq(e){var t=bq(e,"string");return Bf(t)==="symbol"?t:String(t)}function bq(e,t){if(Bf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wq=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},kq=function(t){return t},Sq=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Hu=function(t,r){return Object.keys(r).reduce(function(n,a){return o5(o5({},n),{},kC({},a,t(a,r[a])))},{})},s5=function(t,r,n){return t.map(function(a){return"".concat(Sq(a)," ").concat(r,"ms ").concat(n)}).join(",")};function jq(e,t){return Cq(e)||Pq(e,t)||SC(e,t)||_q()}function _q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Cq(e){if(Array.isArray(e))return e}function Nq(e){return Aq(e)||Mq(e)||SC(e)||Oq()}function Oq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SC(e,t){if(e){if(typeof e=="string")return zv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zv(e,t)}}function Mq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Aq(e){if(Array.isArray(e))return zv(e)}function zv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ah=1e-4,jC=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},_C=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},l5=function(t,r){return function(n){var a=jC(t,r);return _C(a,n)}},Tq=function(t,r){return function(n){var a=jC(t,r),i=[].concat(Nq(a.map(function(o,s){return o*s}).slice(1)),[0]);return _C(i,n)}},c5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),f=jq(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=l5(a,o),p=l5(i,s),m=Tq(a,o),x=function(v){return v>1?1:v<0?0:v},b=function(v){for(var y=v>1?1:v,w=y,P=0;P<8;++P){var j=d(w)-y,k=m(w);if(Math.abs(j-y)<Ah||k<Ah)return p(w);w=x(w-j/k)}return p(w)};return b.isStepper=!1,b},Eq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,c=function(f,d,p){var m=-(f-d)*n,x=p*i,b=p+(m-x)*s/1e3,S=p*s/1e3+f;return Math.abs(S-d)<Ah&&Math.abs(b)<Ah?[d,0]:[S,b]};return c.isStepper=!0,c.dt=s,c},$q=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return c5(a);case"spring":return Eq();default:if(a.split("(")[0]==="cubic-bezier")return c5(a)}return typeof a=="function"?a:null};function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function u5(e){return Iq(e)||Dq(e)||PC(e)||Rq()}function Rq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Iq(e){if(Array.isArray(e))return Wv(e)}function f5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f5(Object(r),!0).forEach(function(n){Uv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uv(e,t,r){return t=Lq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lq(e){var t=Bq(e,"string");return Ff(t)==="symbol"?t:String(t)}function Bq(e,t){if(Ff(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ff(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fq(e,t){return Uq(e)||zq(e,t)||PC(e,t)||Gq()}function Gq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PC(e,t){if(e){if(typeof e=="string")return Wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wv(e,t)}}function Wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Uq(e){if(Array.isArray(e))return e}var Th=function(t,r,n){return t+(r-t)*n},Vv=function(t){var r=t.from,n=t.to;return r!==n},Wq=function e(t,r,n){var a=Hu(function(i,o){if(Vv(o)){var s=t(o.from,o.to,o.velocity),c=Fq(s,2),u=c[0],f=c[1];return ra(ra({},o),{},{from:u,velocity:f})}return o},r);return n<1?Hu(function(i,o){return Vv(o)?ra(ra({},o),{},{velocity:Th(o.velocity,a[i].velocity,n),from:Th(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const Vq=function(e,t,r,n,a){var i=wq(e,t),o=i.reduce(function(S,v){return ra(ra({},S),{},Uv({},v,[e[v],t[v]]))},{}),s=i.reduce(function(S,v){return ra(ra({},S),{},Uv({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,f,d=function(){return null},p=function(){return Hu(function(v,y){return y.from},s)},m=function(){return!Object.values(s).filter(Vv).length},x=function(v){u||(u=v);var y=v-u,w=y/r.dt;s=Wq(r,s,w),a(ra(ra(ra({},e),t),p())),u=v,m()||(c=requestAnimationFrame(d))},b=function(v){f||(f=v);var y=(v-f)/n,w=Hu(function(j,k){return Th.apply(void 0,u5(k).concat([r(y)]))},o);if(a(ra(ra(ra({},e),t),w)),y<1)c=requestAnimationFrame(d);else{var P=Hu(function(j,k){return Th.apply(void 0,u5(k).concat([r(1)]))},o);a(ra(ra(ra({},e),t),P))}};return d=r.isStepper?x:b,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}var Hq=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Xq(e,t){if(e==null)return{};var r=Kq(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kq(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Lm(e){return Qq(e)||Zq(e)||Yq(e)||qq()}function qq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yq(e,t){if(e){if(typeof e=="string")return Hv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hv(e,t)}}function Zq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qq(e){if(Array.isArray(e))return Hv(e)}function Hv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d5(Object(r),!0).forEach(function(n){Tu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tu(e,t,r){return t=CC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CC(n.key),n)}}function tY(e,t,r){return t&&eY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CC(e){var t=rY(e,"string");return jc(t)==="symbol"?t:String(t)}function rY(e,t){if(jc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xv(e,t)}function Xv(e,t){return Xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xv(e,t)}function aY(e){var t=iY();return function(){var n=Eh(e),a;if(t){var i=Eh(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Kv(this,a)}}function Kv(e,t){if(t&&(jc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qv(e)}function qv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eh(e)}var $i=function(e){nY(r,e);var t=aY(r);function r(n,a){var i;Jq(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,p=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(qv(i)),i.changeStyle=i.changeStyle.bind(qv(i)),!s||m<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),Kv(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof p=="function")return i.state={style:u},Kv(i);i.state={style:c?Tu({},c,u):u}}else i.state={style:{}};return i}return tY(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,p=this.state.style;if(s){if(!o){var m={style:c?Tu({},c,f):f};this.state&&p&&(c&&p[c]!==f||!c&&p!==f)&&this.setState(m);return}if(!(fq(a.to,f)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=x||u?d:a.to;if(this.state&&p){var S={style:c?Tu({},c,b):b};(c&&p[c]!==b||!c&&p!==b)&&this.setState(S)}this.runAnimation(wi(wi({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,c=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,p=a.onAnimationStart,m=Vq(o,s,$q(u),c,this.changeStyle),x=function(){i.stopJSAnimation=m()};this.manager.start([p,f,x,c,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,p=d===void 0?0:d,m=function(b,S,v){if(v===0)return b;var y=S.duration,w=S.easing,P=w===void 0?"ease":w,j=S.style,k=S.properties,O=S.onAnimationEnd,A=v>0?o[v-1]:S,R=k||Object.keys(j);if(typeof P=="function"||P==="spring")return[].concat(Lm(b),[i.runJSAnimation.bind(i,{from:A.style,to:j,duration:y,easing:P}),y]);var E=s5(R,y,P),T=wi(wi(wi({},A.style),j),{},{transition:E});return[].concat(Lm(b),[T,y,O]).filter(kq)};return this.manager.start([c].concat(Lm(o.reduce(m,[f,Math.max(p,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=vq());var i=a.begin,o=a.duration,s=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,p=a.steps,m=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var b=s?Tu({},s,c):c,S=s5(Object.keys(b),o,u);x.start([f,i,wi(wi({},b),{},{transition:S}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Xq(a,Hq),u=C.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(m){var x=m.props,b=x.style,S=b===void 0?{}:b,v=x.className,y=C.cloneElement(m,wi(wi({},c),{},{style:wi(wi({},S),f),className:v}));return y};return u===1?d(C.Children.only(i)):ee.createElement("div",null,C.Children.map(i,function(p){return d(p)}))}}]),r}(C.PureComponent);$i.displayName="Animate";$i.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};$i.propTypes={from:jr.oneOfType([jr.object,jr.string]),to:jr.oneOfType([jr.object,jr.string]),attributeName:jr.string,duration:jr.number,begin:jr.number,easing:jr.oneOfType([jr.string,jr.func]),steps:jr.arrayOf(jr.shape({duration:jr.number.isRequired,style:jr.object.isRequired,easing:jr.oneOfType([jr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),jr.func]),properties:jr.arrayOf("string"),onAnimationEnd:jr.func})),children:jr.oneOfType([jr.node,jr.func]),isActive:jr.bool,canBegin:jr.bool,onAnimationEnd:jr.func,shouldReAnimate:jr.bool,onAnimationStart:jr.func,onAnimationReStart:jr.func};function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function $h(){return $h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$h.apply(this,arguments)}function oY(e,t){return uY(e)||cY(e,t)||lY(e,t)||sY()}function sY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lY(e,t){if(e){if(typeof e=="string")return h5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h5(e,t)}}function h5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function uY(e){if(Array.isArray(e))return e}function p5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function g5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(r),!0).forEach(function(n){fY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fY(e,t,r){return t=dY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dY(e){var t=hY(e,"string");return Gf(t)=="symbol"?t:t+""}function hY(e,t){if(Gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m5=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,m=4;p<m;p++)d[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+a)),f+="L ".concat(t+c*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);f="M ".concat(t,",").concat(r+s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+c*x,",").concat(r,`
            L `).concat(t+n-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*x,`
            L `).concat(t+n,",").concat(r+a-s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n-c*x,",").concat(r+a,`
            L `).concat(t+c*x,",").concat(r+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*x," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},pY=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,c=r.height;if(Math.abs(s)>0&&Math.abs(c)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+c),p=Math.max(o,o+c);return n>=u&&n<=f&&a>=d&&a<=p}return!1},gY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pb=function(t){var r=g5(g5({},gY),t),n=C.useRef(),a=C.useState(-1),i=oY(a,2),o=i[0],s=i[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&s(P)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,p=r.radius,m=r.className,x=r.animationEasing,b=r.animationDuration,S=r.animationBegin,v=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var w=tr("recharts-rectangle",m);return y?ee.createElement($i,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:b,animationEasing:x,isActive:y},function(P){var j=P.width,k=P.height,O=P.x,A=P.y;return ee.createElement($i,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:b,isActive:v,easing:x},ee.createElement("path",$h({},Ot(r,!0),{className:w,d:m5(O,A,j,k,p),ref:n})))}):ee.createElement("path",$h({},Ot(r,!0),{className:w,d:m5(c,u,f,d,p)}))};function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yv.apply(this,arguments)}var eg=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=tr("recharts-dot",i);return r===+r&&n===+n&&a===+a?C.createElement("circle",Yv({},Ot(t,!1),Q0(t),{className:o,cx:r,cy:n,r:a})):null};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}var mY=["x","y","top","left","width","height","className"];function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zv.apply(this,arguments)}function y5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y5(Object(r),!0).forEach(function(n){vY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vY(e,t,r){return t=xY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xY(e){var t=bY(e,"string");return zf(t)=="symbol"?t:t+""}function bY(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wY(e,t){if(e==null)return{};var r=kY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var SY=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},jY=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,p=t.height,m=p===void 0?0:p,x=t.className,b=wY(t,mY),S=yY({x:n,y:i,top:s,left:u,width:d,height:m},b);return!Ee(n)||!Ee(i)||!Ee(d)||!Ee(m)||!Ee(s)||!Ee(u)?null:ee.createElement("path",Zv({},Ot(S,!0),{className:tr("recharts-cross",x),d:SY(n,i,d,m,s,u)}))},_Y=U_,PY=_Y(Object.getPrototypeOf,Object),CY=PY,NY=Mo,OY=CY,MY=Ao,AY="[object Object]",TY=Function.prototype,EY=Object.prototype,NC=TY.toString,$Y=EY.hasOwnProperty,RY=NC.call(Object);function DY(e){if(!MY(e)||NY(e)!=AY)return!1;var t=OY(e);if(t===null)return!0;var r=$Y.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&NC.call(r)==RY}var IY=DY;const LY=Ir(IY);var BY=Mo,FY=Ao,GY="[object Boolean]";function zY(e){return e===!0||e===!1||FY(e)&&BY(e)==GY}var UY=zY;const WY=Ir(UY);function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rh.apply(this,arguments)}function VY(e,t){return qY(e)||KY(e,t)||XY(e,t)||HY()}function HY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XY(e,t){if(e){if(typeof e=="string")return v5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v5(e,t)}}function v5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function KY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function qY(e){if(Array.isArray(e))return e}function x5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(r),!0).forEach(function(n){YY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YY(e,t,r){return t=ZY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZY(e){var t=QY(e,"string");return Uf(t)=="symbol"?t:t+""}function QY(e,t){if(Uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w5=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},JY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eZ=function(t){var r=b5(b5({},JY),t),n=C.useRef(),a=C.useState(-1),i=VY(a,2),o=i[0],s=i[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&s(w)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,p=r.height,m=r.className,x=r.animationEasing,b=r.animationDuration,S=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||p!==+p||f===0&&d===0||p===0)return null;var y=tr("recharts-trapezoid",m);return v?ee.createElement($i,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:p,x:c,y:u},duration:b,animationEasing:x,isActive:v},function(w){var P=w.upperWidth,j=w.lowerWidth,k=w.height,O=w.x,A=w.y;return ee.createElement($i,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:b,easing:x},ee.createElement("path",Rh({},Ot(r,!0),{className:y,d:w5(O,A,P,j,k),ref:n})))}):ee.createElement("g",null,ee.createElement("path",Rh({},Ot(r,!0),{className:y,d:w5(c,u,f,d,p)})))},tZ=["option","shapeType","propTransformer","activeClassName","isActive"];function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function rZ(e,t){if(e==null)return{};var r=nZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function k5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(r),!0).forEach(function(n){aZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aZ(e,t,r){return t=iZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iZ(e){var t=oZ(e,"string");return Wf(t)=="symbol"?t:t+""}function oZ(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sZ(e,t){return Dh(Dh({},t),e)}function lZ(e,t){return e==="symbols"}function S5(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ee.createElement(Pb,r);case"trapezoid":return ee.createElement(eZ,r);case"sector":return ee.createElement(yC,r);case"symbols":if(lZ(t))return ee.createElement(Gp,r);break;default:return null}}function cZ(e){return C.isValidElement(e)?e.props:e}function Qv(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?sZ:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,c=rZ(e,tZ),u;if(C.isValidElement(t))u=C.cloneElement(t,Dh(Dh({},c),cZ(t)));else if(At(t))u=t(c);else if(LY(t)&&!WY(t)){var f=a(t,c);u=ee.createElement(S5,{shapeType:r,elementProps:f})}else{var d=c;u=ee.createElement(S5,{shapeType:r,elementProps:d})}return s?ee.createElement(kr,{className:o},u):u}function tg(e,t){return t!=null&&"trapezoids"in e.props}function rg(e,t){return t!=null&&"sectors"in e.props}function Vf(e,t){return t!=null&&"points"in e.props}function uZ(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function fZ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function dZ(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function hZ(e,t){var r;return tg(e,t)?r=uZ:rg(e,t)?r=fZ:Vf(e,t)&&(r=dZ),r}function pZ(e,t){var r;return tg(e,t)?r="trapezoids":rg(e,t)?r="sectors":Vf(e,t)&&(r="points"),r}function gZ(e,t){if(tg(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(rg(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Vf(e,t)?t.payload:{}}function mZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=pZ(r,t),i=gZ(r,t),o=n.filter(function(c,u){var f=ul(i,c),d=r.props[a].filter(function(x){var b=hZ(r,t);return b(x,t)}),p=r.props[a].indexOf(d[d.length-1]),m=u===p;return f&&m}),s=n.indexOf(o[o.length-1]);return s}var yZ=Math.ceil,vZ=Math.max;function xZ(e,t,r,n){for(var a=-1,i=vZ(yZ((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var bZ=xZ,wZ=lP,j5=1/0,kZ=17976931348623157e292;function SZ(e){if(!e)return e===0?e:0;if(e=wZ(e),e===j5||e===-j5){var t=e<0?-1:1;return t*kZ}return e===e?e:0}var OC=SZ,jZ=bZ,_Z=Wp,Bm=OC;function PZ(e){return function(t,r,n){return n&&typeof n!="number"&&_Z(t,r,n)&&(r=n=void 0),t=Bm(t),r===void 0?(r=t,t=0):r=Bm(r),n=n===void 0?t<r?1:-1:Bm(n),jZ(t,r,n,e)}}var CZ=PZ,NZ=CZ,OZ=NZ(),MZ=OZ;const Ih=Ir(MZ);function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function _5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(r),!0).forEach(function(n){MC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MC(e,t,r){return t=AZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AZ(e){var t=TZ(e,"string");return Hf(t)=="symbol"?t:t+""}function TZ(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EZ=["Webkit","Moz","O","ms"],$Z=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=EZ.reduce(function(i,o){return P5(P5({},i),{},MC({},o+n,r))},{});return a[t]=r,a};function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lh.apply(this,arguments)}function C5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C5(Object(r),!0).forEach(function(n){Ua(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TC(n.key),n)}}function DZ(e,t,r){return t&&N5(e.prototype,t),r&&N5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IZ(e,t,r){return t=Bh(t),LZ(e,AC()?Reflect.construct(t,r||[],Bh(e).constructor):t.apply(e,r))}function LZ(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BZ(e)}function BZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AC=function(){return!!e})()}function Bh(e){return Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bh(e)}function FZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jv(e,t)}function Jv(e,t){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jv(e,t)}function Ua(e,t,r){return t=TC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TC(e){var t=GZ(e,"string");return _c(t)=="symbol"?t:t+""}function GZ(e,t){if(_c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zZ=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Wu().domain(Ih(0,c)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},O5=function(t){return t.changedTouches&&!!t.changedTouches.length},Pc=function(e){function t(r){var n;return RZ(this,t),n=IZ(this,t,[r]),Ua(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ua(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ua(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),Ua(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ua(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ua(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ua(n,"handleSlideDragStart",function(a){var i=O5(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return FZ(t,e),DZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,c=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),p=Math.max(a,i),m=t.getIndexInRange(o,d),x=t.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:x===f?f:x-x%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,c=Hn(i[n],s,n);return At(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,p=c.startIndex,m=c.endIndex,x=c.onChange,b=n.pageX-i;b>0?b=Math.min(b,u+f-d-s,u+f-d-o):b<0&&(b=Math.max(b,u-o,u-s));var S=this.getIndex({startX:o+b,endX:s+b});(S.startIndex!==p||S.endIndex!==m)&&x&&x(S),this.setState({startX:o+b,endX:s+b,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=O5(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,c=a.startX,u=this.state[o],f=this.props,d=f.x,p=f.width,m=f.travellerWidth,x=f.onChange,b=f.gap,S=f.data,v={startX:this.state.startX,endX:this.state.endX},y=n.pageX-i;y>0?y=Math.min(y,d+p-m-u):y<0&&(y=Math.max(y,d-u)),v[o]=u+y;var w=this.getIndex(v),P=w.startIndex,j=w.endIndex,k=function(){var A=S.length-1;return o==="startX"&&(s>c?P%b===0:j%b===0)||s<c&&j===A||o==="endX"&&(s>c?j%b===0:P%b===0)||s>c&&j===A};this.setState(Ua(Ua({},o,u+y),"brushMoveStartX",n.pageX),function(){x&&k()&&x(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var p=d+n;if(!(p===-1||p>=s.length)){var m=s[p];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Ua({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,c=n.fill,u=n.stroke;return ee.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,c=n.data,u=n.children,f=n.padding,d=C.Children.only(u);return d?ee.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,p=c.traveller,m=c.ariaLabel,x=c.data,b=c.startIndex,S=c.endIndex,v=Math.max(n,this.props.x),y=Fm(Fm({},Ot(this.props,!1)),{},{x:v,y:u,width:f,height:d}),w=m||"Min value: ".concat((i=x[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=x[S])===null||o===void 0?void 0:o.name);return ee.createElement(kr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),s.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,y))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,c=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return ee.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,p=f.endX,m=5,x={pointerEvents:"none",fill:u};return ee.createElement(kr,{className:"recharts-brush-texts"},ee.createElement(dh,Lh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-m,y:o+s/2},x),this.getTextOfTick(a)),ee.createElement(dh,Lh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+c+m,y:o+s/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,p=this.state,m=p.startX,x=p.endX,b=p.isTextActive,S=p.isSlideMoving,v=p.isTravellerMoving,y=p.isTravellerFocused;if(!a||!a.length||!Ee(s)||!Ee(c)||!Ee(u)||!Ee(f)||u<=0||f<=0)return null;var w=tr("recharts-brush",i),P=ee.Children.count(o)===1,j=$Z("userSelect","none");return ee.createElement(kr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(m,x),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(x,"endX"),(b||S||v||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,c=n.stroke,u=Math.floor(i+s/2)-1;return ee.createElement(ee.Fragment,null,ee.createElement("rect",{x:a,y:i,width:o,height:s,fill:c,stroke:"none"}),ee.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),ee.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return ee.isValidElement(n)?i=ee.cloneElement(n,a):At(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Fm({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?zZ({data:i,width:o,x:s,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([s,s+o-c]);var p=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var c=Math.floor((o+s)/2);n[c]>a?s=c:o=c}return a>=n[s]?s:o}}])}(C.PureComponent);Ua(Pc,"displayName","Brush");Ua(Pc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var UZ=Z1;function WZ(e,t){var r;return UZ(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var VZ=WZ,HZ=R_,XZ=vs,KZ=VZ,qZ=Fa,YZ=Wp;function ZZ(e,t,r){var n=qZ(e)?HZ:KZ;return r&&YZ(e,t,r)&&(t=void 0),n(e,XZ(t))}var QZ=ZZ;const JZ=Ir(QZ);var Qi=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},M5=nP;function eQ(e,t,r){t=="__proto__"&&M5?M5(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var tQ=eQ,rQ=tQ,nQ=tP,aQ=vs;function iQ(e,t){var r={};return t=aQ(t),nQ(e,function(n,a,i){rQ(r,a,t(n,a,i))}),r}var oQ=iQ;const sQ=Ir(oQ);function lQ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var cQ=lQ,uQ=Z1;function fQ(e,t){var r=!0;return uQ(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var dQ=fQ,hQ=cQ,pQ=dQ,gQ=vs,mQ=Fa,yQ=Wp;function vQ(e,t,r){var n=mQ(e)?hQ:pQ;return r&&yQ(e,t,r)&&(t=void 0),n(e,gQ(t))}var xQ=vQ;const EC=Ir(xQ);var bQ=["x","y"];function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(this,arguments)}function A5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A5(Object(r),!0).forEach(function(n){wQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wQ(e,t,r){return t=kQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kQ(e){var t=SQ(e,"string");return Xf(t)=="symbol"?t:t+""}function SQ(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jQ(e,t){if(e==null)return{};var r=_Q(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _Q(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function PQ(e,t){var r=e.x,n=e.y,a=jQ(e,bQ),i="".concat(r),o=parseInt(i,10),s="".concat(n),c=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),p=parseInt(d,10);return Cu(Cu(Cu(Cu(Cu({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function T5(e){return ee.createElement(Qv,ex({shapeType:"rectangle",propTransformer:PQ,activeClassName:"recharts-active-bar"},e))}var CQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Ee(n)||GE(n);return i?t(n,a):(i||dl(),r)}},NQ=["value","background"],$C;function Cc(e){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cc(e)}function OQ(e,t){if(e==null)return{};var r=MQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fh.apply(this,arguments)}function E5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E5(Object(r),!0).forEach(function(n){Yo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DC(n.key),n)}}function TQ(e,t,r){return t&&$5(e.prototype,t),r&&$5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function EQ(e,t,r){return t=Gh(t),$Q(e,RC()?Reflect.construct(t,r||[],Gh(e).constructor):t.apply(e,r))}function $Q(e,t){if(t&&(Cc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RQ(e)}function RQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RC=function(){return!!e})()}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gh(e)}function DQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tx(e,t)}function tx(e,t){return tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tx(e,t)}function Yo(e,t,r){return t=DC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DC(e){var t=IQ(e,"string");return Cc(t)=="symbol"?t:t+""}function IQ(e,t){if(Cc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cd=function(e){function t(){var r;AQ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=EQ(this,t,[].concat(a)),Yo(r,"state",{isAnimationFinished:!1}),Yo(r,"id",xl("recharts-bar-")),Yo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Yo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return DQ(t,e),TQ(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,c=i.activeIndex,u=i.activeBar,f=Ot(this.props,!1);return n&&n.map(function(d,p){var m=p===c,x=m?u:o,b=Rn(Rn(Rn({},f),d),{},{isActive:m,option:x,index:p,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ee.createElement(kr,Fh({className:"recharts-bar-rectangle"},mf(a.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),ee.createElement(T5,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,p=this.state.prevData;return ee.createElement($i,{begin:c,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var x=m.t,b=i.map(function(S,v){var y=p&&p[v];if(y){var w=An(y.x,S.x),P=An(y.y,S.y),j=An(y.width,S.width),k=An(y.height,S.height);return Rn(Rn({},S),{},{x:w(x),y:P(x),width:j(x),height:k(x)})}if(o==="horizontal"){var O=An(0,S.height),A=O(x);return Rn(Rn({},S),{},{y:S.y+S.height-A,height:A})}var R=An(0,S.width),E=R(x);return Rn(Rn({},S),{},{width:E})});return ee.createElement(kr,null,n.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!ul(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,c=Ot(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,p=OQ(u,NQ);if(!d)return null;var m=Rn(Rn(Rn(Rn(Rn({},p),{},{fill:"#eee"},d),c),mf(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return ee.createElement(T5,Fh({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Ba(f,nu);if(!d)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,m=function(S,v){var y=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:y,errorVal:Hn(S,v)}},x={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ee.createElement(kr,x,d.map(function(b){return ee.cloneElement(b,{key:"error-bar-".concat(a,"-").concat(b.props.dataKey),data:o,xAxis:s,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,p=n.height,m=n.isAnimationActive,x=n.background,b=n.id;if(a||!i||!i.length)return null;var S=this.state.isAnimationFinished,v=tr("recharts-bar",o),y=s&&s.allowDataOverflow,w=c&&c.allowDataOverflow,P=y||w,j=Nt(b)?this.id:b;return ee.createElement(kr,{className:v},y||w?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(j)},ee.createElement("rect",{x:y?u:u-d/2,y:w?f:f-p/2,width:y?d:d*2,height:w?p:p*2}))):null,ee.createElement(kr,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(j,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,j),(!m||S)&&Zi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(C.PureComponent);$C=cd;Yo(cd,"displayName","Bar");Yo(cd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!xs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yo(cd,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,m=uX(n,r);if(!m)return null;var x=t.layout,b=r.type.defaultProps,S=b!==void 0?Rn(Rn({},b),r.props):r.props,v=S.dataKey,y=S.children,w=S.minPointSize,P=x==="horizontal"?o:i,j=u?P.scale.domain():null,k=vX({numericAxis:P}),O=Ba(y,eb),A=d.map(function(R,E){var T,B,G,V,z,D;u?T=fX(u[f+E],j):(T=Hn(R,v),Array.isArray(T)||(T=[k,T]));var L=CQ(w,$C.defaultProps.minPointSize)(T[1],E);if(x==="horizontal"){var F,H=[o.scale(T[0]),o.scale(T[1])],W=H[0],J=H[1];B=DS({axis:i,ticks:s,bandSize:a,offset:m.offset,entry:R,index:E}),G=(F=J??W)!==null&&F!==void 0?F:void 0,V=m.size;var Y=W-J;if(z=Number.isNaN(Y)?0:Y,D={x:B,y:o.y,width:V,height:o.height},Math.abs(L)>0&&Math.abs(z)<Math.abs(L)){var ne=Oi(z||L)*(Math.abs(L)-Math.abs(z));G-=ne,z+=ne}}else{var te=[i.scale(T[0]),i.scale(T[1])],fe=te[0],se=te[1];if(B=fe,G=DS({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:R,index:E}),V=se-fe,z=m.size,D={x:i.x,y:G,width:i.width,height:z},Math.abs(L)>0&&Math.abs(V)<Math.abs(L)){var ye=Oi(V||L)*(Math.abs(L)-Math.abs(V));V+=ye}}return Rn(Rn(Rn({},R),{},{x:B,y:G,width:V,height:z,value:u?T:T[1],payload:R,background:D},O&&O[E]&&O[E].props),{},{tooltipPayload:[pC(r,R)],tooltipPosition:{x:B+V/2,y:G+z/2}})});return Rn({data:A,layout:x},p)});function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function LQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IC(n.key),n)}}function BQ(e,t,r){return t&&R5(e.prototype,t),r&&R5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function D5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(r),!0).forEach(function(n){ng(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ng(e,t,r){return t=IC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IC(e){var t=FQ(e,"string");return Kf(t)=="symbol"?t:t+""}function FQ(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cb=function(t,r,n,a,i){var o=t.width,s=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},p=!!Va(u,cd);return f.reduce(function(m,x){var b=r[x],S=b.orientation,v=b.domain,y=b.padding,w=y===void 0?{}:y,P=b.mirror,j=b.reversed,k="".concat(S).concat(P?"Mirror":""),O,A,R,E,T;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var B=v[1]-v[0],G=1/0,V=b.categoricalDomain.sort(VE);if(V.forEach(function(te,fe){fe>0&&(G=Math.min((te||0)-(V[fe-1]||0),G))}),Number.isFinite(G)){var z=G/B,D=b.layout==="vertical"?n.height:n.width;if(b.padding==="gap"&&(O=z*D/2),b.padding==="no-gap"){var L=cl(t.barCategoryGap,z*D),F=z*D/2;O=F-L-(F-L)/D*L}}}a==="xAxis"?A=[n.left+(w.left||0)+(O||0),n.left+n.width-(w.right||0)-(O||0)]:a==="yAxis"?A=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(O||0),n.top+n.height-(w.bottom||0)-(O||0)]:A=b.range,j&&(A=[A[1],A[0]]);var H=lX(b,i,p),W=H.scale,J=H.realScaleType;W.domain(v).range(A),cX(W);var Y=yX(W,ji(ji({},b),{},{realScaleType:J}));a==="xAxis"?(T=S==="top"&&!P||S==="bottom"&&P,R=n.left,E=d[k]-T*b.height):a==="yAxis"&&(T=S==="left"&&!P||S==="right"&&P,R=d[k]-T*b.width,E=n.top);var ne=ji(ji(ji({},b),Y),{},{realScaleType:J,x:R,y:E,scale:W,width:a==="xAxis"?n.width:b.width,height:a==="yAxis"?n.height:b.height});return ne.bandSize=Ch(ne,Y),!b.hide&&a==="xAxis"?d[k]+=(T?-1:1)*ne.height:b.hide||(d[k]+=(T?-1:1)*ne.width),ji(ji({},m),{},ng({},x,ne))},{})},LC=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},GQ=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return LC({x:r,y:n},{x:a,y:i})},BC=function(){function e(t){LQ(this,e),this.scale=t}return BQ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();ng(BC,"EPS",1e-4);var Nb=function(t){var r=Object.keys(t).reduce(function(n,a){return ji(ji({},n),{},ng({},a,BC.create(t[a])))},{});return ji(ji({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return sQ(a,function(c,u){return r[u].apply(c,{bandAware:o,position:s})})},isInRange:function(a){return EC(a,function(i,o){return r[o].isInRange(i)})}})};function zQ(e){return(e%180+180)%180}var UQ=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=zQ(a),o=i*Math.PI/180,s=Math.atan(n/r),c=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},WQ=vs,VQ=ad,HQ=zp;function XQ(e){return function(t,r,n){var a=Object(t);if(!VQ(t)){var i=WQ(r);t=HQ(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var KQ=XQ,qQ=OC;function YQ(e){var t=qQ(e),r=t%1;return t===t?r?t-r:t:0}var ZQ=YQ,QQ=q_,JQ=vs,eJ=ZQ,tJ=Math.max;function rJ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:eJ(r);return a<0&&(a=tJ(n+a,0)),QQ(e,JQ(t),a)}var nJ=rJ,aJ=KQ,iJ=nJ,oJ=aJ(iJ),sJ=oJ;const lJ=Ir(sJ);var cJ=X8(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Ob=C.createContext(void 0),Mb=C.createContext(void 0),FC=C.createContext(void 0),GC=C.createContext({}),zC=C.createContext(void 0),UC=C.createContext(0),WC=C.createContext(0),I5=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,c=t.width,u=t.height,f=cJ(i);return ee.createElement(Ob.Provider,{value:n},ee.createElement(Mb.Provider,{value:a},ee.createElement(GC.Provider,{value:i},ee.createElement(FC.Provider,{value:f},ee.createElement(zC.Provider,{value:o},ee.createElement(UC.Provider,{value:u},ee.createElement(WC.Provider,{value:c},s)))))))},uJ=function(){return C.useContext(zC)},VC=function(t){var r=C.useContext(Ob);r==null&&dl();var n=r[t];return n==null&&dl(),n},fJ=function(){var t=C.useContext(Ob);return zo(t)},dJ=function(){var t=C.useContext(Mb),r=lJ(t,function(n){return EC(n.domain,Number.isFinite)});return r||zo(t)},HC=function(t){var r=C.useContext(Mb);r==null&&dl();var n=r[t];return n==null&&dl(),n},hJ=function(){var t=C.useContext(FC);return t},pJ=function(){return C.useContext(GC)},Ab=function(){return C.useContext(WC)},Tb=function(){return C.useContext(UC)};function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function gJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KC(n.key),n)}}function yJ(e,t,r){return t&&mJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vJ(e,t,r){return t=zh(t),xJ(e,XC()?Reflect.construct(t,r||[],zh(e).constructor):t.apply(e,r))}function xJ(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bJ(e)}function bJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XC=function(){return!!e})()}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zh(e)}function wJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rx(e,t)}function rx(e,t){return rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rx(e,t)}function L5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L5(Object(r),!0).forEach(function(n){Eb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eb(e,t,r){return t=KC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KC(e){var t=kJ(e,"string");return Nc(t)=="symbol"?t:t+""}function kJ(e,t){if(Nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function SJ(e,t){return CJ(e)||PJ(e,t)||_J(e,t)||jJ()}function jJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _J(e,t){if(e){if(typeof e=="string")return F5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F5(e,t)}}function F5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function CJ(e){if(Array.isArray(e))return e}function nx(){return nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nx.apply(this,arguments)}var NJ=function(t,r){var n;return ee.isValidElement(t)?n=ee.cloneElement(t,r):At(t)?n=t(r):n=ee.createElement("line",nx({},r,{className:"recharts-reference-line-line"})),n},OJ=function(t,r,n,a,i,o,s,c,u){var f=i.x,d=i.y,p=i.width,m=i.height;if(n){var x=u.y,b=t.y.apply(x,{position:o});if(Qi(u,"discard")&&!t.y.isInRange(b))return null;var S=[{x:f+p,y:b},{x:f,y:b}];return c==="left"?S.reverse():S}if(r){var v=u.x,y=t.x.apply(v,{position:o});if(Qi(u,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:d+m},{x:y,y:d}];return s==="top"?w.reverse():w}if(a){var P=u.segment,j=P.map(function(k){return t.apply(k,{position:o})});return Qi(u,"discard")&&JZ(j,function(k){return!t.isInRange(k)})?null:j}return null};function MJ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,c=e.alwaysShow,u=uJ(),f=VC(a),d=HC(i),p=hJ();if(!u||!p)return null;bo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Nb({x:f.scale,y:d.scale}),x=Vn(t),b=Vn(r),S=n&&n.length===2,v=OJ(m,x,b,S,p,e.position,f.orientation,d.orientation,e);if(!v)return null;var y=SJ(v,2),w=y[0],P=w.x,j=w.y,k=y[1],O=k.x,A=k.y,R=Qi(e,"hidden")?"url(#".concat(u,")"):void 0,E=B5(B5({clipPath:R},Ot(e,!0)),{},{x1:P,y1:j,x2:O,y2:A});return ee.createElement(kr,{className:tr("recharts-reference-line",s)},NJ(o,E),aa.renderCallByParent(e,GQ({x1:P,y1:j,x2:O,y2:A})))}var Zo=function(e){function t(){return gJ(this,t),vJ(this,t,arguments)}return wJ(t,e),yJ(t,[{key:"render",value:function(){return ee.createElement(MJ,this.props)}}])}(ee.Component);Eb(Zo,"displayName","ReferenceLine");Eb(Zo,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ax(){return ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ax.apply(this,arguments)}function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function G5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G5(Object(r),!0).forEach(function(n){ag(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YC(n.key),n)}}function EJ(e,t,r){return t&&TJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $J(e,t,r){return t=Uh(t),RJ(e,qC()?Reflect.construct(t,r||[],Uh(e).constructor):t.apply(e,r))}function RJ(e,t){if(t&&(Oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DJ(e)}function DJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qC=function(){return!!e})()}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uh(e)}function IJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ix(e,t)}function ix(e,t){return ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ix(e,t)}function ag(e,t,r){return t=YC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YC(e){var t=LJ(e,"string");return Oc(t)=="symbol"?t:t+""}function LJ(e,t){if(Oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BJ=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=Nb({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return Qi(t,"discard")&&!o.isInRange(s)?null:s},ud=function(e){function t(){return AJ(this,t),$J(this,t,arguments)}return IJ(t,e),EJ(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,c=n.clipPathId,u=Vn(a),f=Vn(i);if(bo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=BJ(this.props);if(!d)return null;var p=d.x,m=d.y,x=this.props,b=x.shape,S=x.className,v=Qi(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=z5(z5({clipPath:v},Ot(this.props,!0)),{},{cx:p,cy:m});return ee.createElement(kr,{className:tr("recharts-reference-dot",S)},t.renderDot(b,y),aa.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])}(ee.Component);ag(ud,"displayName","ReferenceDot");ag(ud,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ag(ud,"renderDot",function(e,t){var r;return ee.isValidElement(e)?r=ee.cloneElement(e,t):At(e)?r=e(t):r=ee.createElement(eg,ax({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ox.apply(this,arguments)}function Mc(e){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(e)}function U5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(r),!0).forEach(function(n){ig(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QC(n.key),n)}}function zJ(e,t,r){return t&&GJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UJ(e,t,r){return t=Wh(t),WJ(e,ZC()?Reflect.construct(t,r||[],Wh(e).constructor):t.apply(e,r))}function WJ(e,t){if(t&&(Mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VJ(e)}function VJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZC=function(){return!!e})()}function Wh(e){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wh(e)}function HJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sx(e,t)}function sx(e,t){return sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sx(e,t)}function ig(e,t,r){return t=QC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QC(e){var t=XJ(e,"string");return Mc(t)=="symbol"?t:t+""}function XJ(e,t){if(Mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var KJ=function(t,r,n,a,i){var o=i.x1,s=i.x2,c=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var p=Nb({x:f.scale,y:d.scale}),m={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},x={x:r?p.x.apply(s,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Qi(i,"discard")&&(!p.isInRange(m)||!p.isInRange(x))?null:LC(m,x)},fd=function(e){function t(){return FJ(this,t),UJ(this,t,arguments)}return HJ(t,e),zJ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;bo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Vn(a),p=Vn(i),m=Vn(o),x=Vn(s),b=this.props.shape;if(!d&&!p&&!m&&!x&&!b)return null;var S=KJ(d,p,m,x,this.props);if(!S&&!b)return null;var v=Qi(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ee.createElement(kr,{className:tr("recharts-reference-area",c)},t.renderRect(b,W5(W5({clipPath:v},Ot(this.props,!0)),S)),aa.renderCallByParent(this.props,S))}}])}(ee.Component);ig(fd,"displayName","ReferenceArea");ig(fd,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ig(fd,"renderRect",function(e,t){var r;return ee.isValidElement(e)?r=ee.cloneElement(e,t):At(e)?r=e(t):r=ee.createElement(Pb,ox({},t,{className:"recharts-reference-area-rect"})),r});function JC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function qJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return UQ(n,r)}function YJ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function Vh(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function ZJ(e,t){return JC(e,t+1)}function QJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,c=0,u=1,f=o,d=function(){var x=n==null?void 0:n[c];if(x===void 0)return{v:JC(n,u)};var b=c,S,v=function(){return S===void 0&&(S=r(x,b)),S},y=x.coordinate,w=c===0||Vh(e,y,v,f,s);w||(c=0,f=o,u+=1),w&&(f=y+e*(v()/2+a),c+=u)},p;u<=i.length;)if(p=d(),p)return p.v;return[]}function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function V5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V5(Object(r),!0).forEach(function(n){JJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JJ(e,t,r){return t=eee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eee(e){var t=tee(e,"string");return qf(t)=="symbol"?t:t+""}function tee(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ree(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,c=t.end,u=function(p){var m=i[p],x,b=function(){return x===void 0&&(x=r(m,p)),x};if(p===o-1){var S=e*(m.coordinate+e*b()/2-c);i[p]=m=ga(ga({},m),{},{tickCoord:S>0?m.coordinate-S*e:m.coordinate})}else i[p]=m=ga(ga({},m),{},{tickCoord:m.coordinate});var v=Vh(e,m.tickCoord,b,s,c);v&&(c=m.tickCoord-e*(b()/2+a),i[p]=ga(ga({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function nee(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,c=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),p=e*(f.coordinate+e*d/2-u);o[s-1]=f=ga(ga({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var m=Vh(e,f.tickCoord,function(){return d},c,u);m&&(u=f.tickCoord-e*(d/2+a),o[s-1]=ga(ga({},f),{},{isShow:!0}))}for(var x=i?s-1:s,b=function(y){var w=o[y],P,j=function(){return P===void 0&&(P=r(w,y)),P};if(y===0){var k=e*(w.coordinate-e*j()/2-c);o[y]=w=ga(ga({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[y]=w=ga(ga({},w),{},{tickCoord:w.coordinate});var O=Vh(e,w.tickCoord,j,c,u);O&&(c=w.tickCoord+e*(j()/2+a),o[y]=ga(ga({},w),{},{isShow:!0}))},S=0;S<x;S++)b(S);return o}function $b(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(Ee(c)||xs.isSsr)return ZJ(a,typeof c=="number"&&Ee(c)?c:0);var p=[],m=s==="top"||s==="bottom"?"width":"height",x=f&&m==="width"?Uu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=function(w,P){var j=At(u)?u(w.value,P):w.value;return m==="width"?qJ(Uu(j,{fontSize:t,letterSpacing:r}),x,d):Uu(j,{fontSize:t,letterSpacing:r})[m]},S=a.length>=2?Oi(a[1].coordinate-a[0].coordinate):1,v=YJ(i,S,m);return c==="equidistantPreserveStart"?QJ(S,v,b,a,o):(c==="preserveStart"||c==="preserveStartEnd"?p=nee(S,v,b,a,o,c==="preserveStartEnd"):p=ree(S,v,b,a,o),p.filter(function(y){return y.isShow}))}var aee=["viewBox"],iee=["viewBox"],oee=["ticks"];function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hl.apply(this,arguments)}function H5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H5(Object(r),!0).forEach(function(n){Rb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gm(e,t){if(e==null)return{};var r=see(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function see(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tN(n.key),n)}}function cee(e,t,r){return t&&X5(e.prototype,t),r&&X5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uee(e,t,r){return t=Hh(t),fee(e,eN()?Reflect.construct(t,r||[],Hh(e).constructor):t.apply(e,r))}function fee(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dee(e)}function dee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!e})()}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hh(e)}function hee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lx(e,t)}function lx(e,t){return lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lx(e,t)}function Rb(e,t,r){return t=tN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tN(e){var t=pee(e,"string");return Ac(t)=="symbol"?t:t+""}function pee(e,t){if(Ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var au=function(e){function t(r){var n;return lee(this,t),n=uee(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return hee(t,e),cee(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Gm(n,aee),s=this.props,c=s.viewBox,u=Gm(s,iee);return!tc(i,c)||!tc(o,u)||!tc(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,c=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,p=a.tickMargin,m,x,b,S,v,y,w=d?-1:1,P=n.tickSize||f,j=Ee(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=x=n.coordinate,S=o+ +!d*c,b=S-w*P,y=b-w*p,v=j;break;case"left":b=S=n.coordinate,x=i+ +!d*s,m=x-w*P,v=m-w*p,y=j;break;case"right":b=S=n.coordinate,x=i+ +d*s,m=x+w*P,v=m+w*p,y=j;break;default:m=x=n.coordinate,S=o+ +d*c,b=S+w*P,y=b+w*p,v=j;break}return{line:{x1:m,y1:b,x2:x,y2:S},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=Fn(Fn(Fn({},Ot(this.props,!1)),Ot(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);d=Fn(Fn({},d),{},{x1:a,y1:i+p*s,x2:a+o,y2:i+p*s})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=Fn(Fn({},d),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+s})}return ee.createElement("line",Hl({},d,{className:tr("recharts-cartesian-axis-line",hi(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,c=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,p=s.unit,m=$b(Fn(Fn({},this.props),{},{ticks:n}),a,i),x=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),S=Ot(this.props,!1),v=Ot(f,!1),y=Fn(Fn({},S),{},{fill:"none"},Ot(c,!1)),w=m.map(function(P,j){var k=o.getTickLineCoord(P),O=k.line,A=k.tick,R=Fn(Fn(Fn(Fn({textAnchor:x,verticalAnchor:b},S),{},{stroke:"none",fill:u},v),A),{},{index:j,payload:P,visibleTicksCount:m.length,tickFormatter:d});return ee.createElement(kr,Hl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},mf(o.props,P,j)),c&&ee.createElement("line",Hl({},y,O,{className:tr("recharts-cartesian-axis-tick-line",hi(c,"className"))})),f&&t.renderTickItem(f,R,"".concat(At(d)?d(P.value,j):P.value).concat(p||"")))});return ee.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,p=d.ticks,m=Gm(d,oee),x=p;return At(c)&&(x=p&&p.length>0?c(this.props):c(m)),o<=0||s<=0||!x||!x.length?null:ee.createElement(kr,{className:tr("recharts-cartesian-axis",u),ref:function(S){n.layerReference=S}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),aa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=tr(a.className,"recharts-cartesian-axis-tick-value");return ee.isValidElement(n)?o=ee.cloneElement(n,Fn(Fn({},a),{},{className:s})):At(n)?o=n(Fn(Fn({},a),{},{className:s})):o=ee.createElement(dh,Hl({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(C.Component);Rb(au,"displayName","CartesianAxis");Rb(au,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var gee=["x1","y1","x2","y2","key"],mee=["offset"];function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function K5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(r),!0).forEach(function(n){yee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yee(e,t,r){return t=vee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vee(e){var t=xee(e,"string");return hl(t)=="symbol"?t:t+""}function xee(e,t){if(hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ws.apply(this,arguments)}function q5(e,t){if(e==null)return{};var r=bee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var wee=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,c=t.ry;return ee.createElement("rect",{x:a,y:i,ry:c,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function rN(e,t){var r;if(ee.isValidElement(e))r=ee.cloneElement(e,t);else if(At(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,c=q5(t,gee),u=Ot(c,!1);u.offset;var f=q5(u,mee);r=ee.createElement("line",Ws({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function kee(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,c){var u=ya(ya({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(c),index:c});return rN(a,u)});return ee.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function See(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,c){var u=ya(ya({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(c),index:c});return rN(a,u)});return ee.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function jee(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=s.map(function(p){return Math.round(p+a-a)}).sort(function(p,m){return p-m});a!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var x=!f[m+1],b=x?a+o-p:f[m+1]-p;if(b<=0)return null;var S=m%t.length;return ee.createElement("rect",{key:"react-".concat(m),y:p,x:n,height:b,width:i,stroke:"none",fill:t[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ee.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function _ee(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var x=!f[m+1],b=x?i+s-p:f[m+1]-p;if(b<=0)return null;var S=m%n.length;return ee.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:b,height:c,stroke:"none",fill:n[S],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ee.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Pee=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return dC($b(ya(ya(ya({},au.defaultProps),n),{},{ticks:yo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},Cee=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return dC($b(ya(ya(ya({},au.defaultProps),n),{},{ticks:yo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Al={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Mi(e){var t,r,n,a,i,o,s=Ab(),c=Tb(),u=pJ(),f=ya(ya({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Al.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Al.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Al.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Al.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Al.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Al.verticalFill,x:Ee(e.x)?e.x:u.left,y:Ee(e.y)?e.y:u.top,width:Ee(e.width)?e.width:u.width,height:Ee(e.height)?e.height:u.height}),d=f.x,p=f.y,m=f.width,x=f.height,b=f.syncWithTicks,S=f.horizontalValues,v=f.verticalValues,y=fJ(),w=dJ();if(!Ee(m)||m<=0||!Ee(x)||x<=0||!Ee(d)||d!==+d||!Ee(p)||p!==+p)return null;var P=f.verticalCoordinatesGenerator||Pee,j=f.horizontalCoordinatesGenerator||Cee,k=f.horizontalPoints,O=f.verticalPoints;if((!k||!k.length)&&At(j)){var A=S&&S.length,R=j({yAxis:w?ya(ya({},w),{},{ticks:A?S:w.ticks}):void 0,width:s,height:c,offset:u},A?!0:b);bo(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(hl(R),"]")),Array.isArray(R)&&(k=R)}if((!O||!O.length)&&At(P)){var E=v&&v.length,T=P({xAxis:y?ya(ya({},y),{},{ticks:E?v:y.ticks}):void 0,width:s,height:c,offset:u},E?!0:b);bo(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(hl(T),"]")),Array.isArray(T)&&(O=T)}return ee.createElement("g",{className:"recharts-cartesian-grid"},ee.createElement(wee,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ee.createElement(kee,Ws({},f,{offset:u,horizontalPoints:k,xAxis:y,yAxis:w})),ee.createElement(See,Ws({},f,{offset:u,verticalPoints:O,xAxis:y,yAxis:w})),ee.createElement(jee,Ws({},f,{horizontalPoints:k})),ee.createElement(_ee,Ws({},f,{verticalPoints:O})))}Mi.displayName="CartesianGrid";var Nee=["type","layout","connectNulls","ref"],Oee=["key"];function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function Y5(e,t){if(e==null)return{};var r=Mee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Mee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xu.apply(this,arguments)}function Z5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(r),!0).forEach(function(n){_i(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tl(e){return $ee(e)||Eee(e)||Tee(e)||Aee()}function Aee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tee(e,t){if(e){if(typeof e=="string")return cx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cx(e,t)}}function Eee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $ee(e){if(Array.isArray(e))return cx(e)}function cx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ree(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aN(n.key),n)}}function Dee(e,t,r){return t&&Q5(e.prototype,t),r&&Q5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Iee(e,t,r){return t=Xh(t),Lee(e,nN()?Reflect.construct(t,r||[],Xh(e).constructor):t.apply(e,r))}function Lee(e,t){if(t&&(Tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bee(e)}function Bee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nN=function(){return!!e})()}function Xh(e){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xh(e)}function Fee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ux(e,t)}function ux(e,t){return ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ux(e,t)}function _i(e,t,r){return t=aN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aN(e){var t=Gee(e,"string");return Tc(t)=="symbol"?t:t+""}function Gee(e,t){if(Tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _n=function(e){function t(){var r;Ree(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Iee(this,t,[].concat(a)),_i(r,"state",{isAnimationFinished:!0,totalLength:0}),_i(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),_i(r,"getStrokeDasharray",function(o,s,c){var u=c.reduce(function(v,y){return v+y});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,p=s-o,m=[],x=0,b=0;x<c.length;b+=c[x],++x)if(b+c[x]>d){m=[].concat(Tl(c.slice(0,x)),[d-b]);break}var S=m.length%2===0?[0,p]:[p];return[].concat(Tl(t.repeat(c,f)),Tl(m),S).map(function(v){return"".concat(v,"px")}).join(", ")}),_i(r,"id",xl("recharts-line-")),_i(r,"pathRef",function(o){r.mainCurve=o}),_i(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),_i(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Fee(t,e),Dee(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Ba(f,nu);if(!d)return null;var p=function(b,S){return{x:b.x,y:b.y,value:b.value,errorVal:Hn(b.payload,S)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ee.createElement(kr,m,d.map(function(x){return ee.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:s,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.dot,u=s.points,f=s.dataKey,d=Ot(this.props,!1),p=Ot(c,!0),m=u.map(function(b,S){var v=za(za(za({key:"dot-".concat(S),r:3},d),p),{},{index:S,cx:b.x,cy:b.y,value:b.value,dataKey:f,payload:b.payload,points:u});return t.renderDotItem(c,v)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ee.createElement(kr,Xu({className:"recharts-line-dots",key:"dots"},x),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,c=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=Y5(s,Nee),p=za(za(za({},Ot(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:f});return ee.createElement(Zs,Xu({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,c=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,x=o.animateNewValues,b=o.width,S=o.height,v=this.state,y=v.prevPoints,w=v.totalLength;return ee.createElement($i,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var j=P.t;if(y){var k=y.length/s.length,O=s.map(function(B,G){var V=Math.floor(G*k);if(y[V]){var z=y[V],D=An(z.x,B.x),L=An(z.y,B.y);return za(za({},B),{},{x:D(j),y:L(j)})}if(x){var F=An(b*2,B.x),H=An(S/2,B.y);return za(za({},B),{},{x:F(j),y:H(j)})}return za(za({},B),{},{x:B.x,y:B.y})});return i.renderCurveStatically(O,n,a)}var A=An(0,w),R=A(j),E;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(B){return parseFloat(B)});E=i.getStrokeDasharray(R,w,T)}else E=i.generateSimpleStrokeDasharray(w,R);return i.renderCurveStatically(s,n,a,{strokeDasharray:E})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return s&&o&&o.length&&(!u&&f>0||!ul(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,c=a.className,u=a.xAxis,f=a.yAxis,d=a.top,p=a.left,m=a.width,x=a.height,b=a.isAnimationActive,S=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,w=tr("recharts-line",c),P=u&&u.allowDataOverflow,j=f&&f.allowDataOverflow,k=P||j,O=Nt(S)?this.id:S,A=(n=Ot(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},R=A.r,E=R===void 0?3:R,T=A.strokeWidth,B=T===void 0?2:T,G=o_(o)?o:{},V=G.clipDot,z=V===void 0?!0:V,D=E*2+B;return ee.createElement(kr,{className:w},P||j?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(O)},ee.createElement("rect",{x:P?p:p-m/2,y:j?d:d-x/2,width:P?m:m*2,height:j?x:x*2})),!z&&ee.createElement("clipPath",{id:"clipPath-dots-".concat(O)},ee.createElement("rect",{x:p-D/2,y:d-D/2,width:m+D,height:x+D}))):null,!y&&this.renderCurve(k,O),this.renderErrorBar(k,O),(y||o)&&this.renderDots(k,z,O),(!b||v)&&Zi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Tl(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(Tl(o),Tl(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(ee.isValidElement(n))i=ee.cloneElement(n,a);else if(At(n))i=n(a);else{var o=a.key,s=Y5(a,Oee),c=tr("recharts-line-dot",typeof n!="boolean"?n.className:"");i=ee.createElement(eg,Xu({key:o},s,{className:c}))}return i}}])}(C.PureComponent);_i(_n,"displayName","Line");_i(_n,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!xs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_i(_n,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,c=e.displayedData,u=e.offset,f=t.layout,d=c.map(function(p,m){var x=Hn(p,o);return f==="horizontal"?{x:Sc({axis:r,ticks:a,bandSize:s,entry:p,index:m}),y:Nt(x)?null:n.scale(x),value:x,payload:p}:{x:Nt(x)?null:r.scale(x),y:Sc({axis:n,ticks:i,bandSize:s,entry:p,index:m}),value:x,payload:p}});return za({points:d,layout:f},u)});var zee=["layout","type","stroke","connectNulls","isRange","ref"],Uee=["key"],iN;function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}function oN(e,t){if(e==null)return{};var r=Wee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vs.apply(this,arguments)}function J5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Do(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J5(Object(r),!0).forEach(function(n){Hi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lN(n.key),n)}}function Hee(e,t,r){return t&&e3(e.prototype,t),r&&e3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xee(e,t,r){return t=Kh(t),Kee(e,sN()?Reflect.construct(t,r||[],Kh(e).constructor):t.apply(e,r))}function Kee(e,t){if(t&&(Ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qee(e)}function qee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sN=function(){return!!e})()}function Kh(e){return Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kh(e)}function Yee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fx(e,t)}function fx(e,t){return fx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fx(e,t)}function Hi(e,t,r){return t=lN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lN(e){var t=Zee(e,"string");return Ec(t)=="symbol"?t:t+""}function Zee(e,t){if(Ec(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fi=function(e){function t(){var r;Vee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Xee(this,t,[].concat(a)),Hi(r,"state",{isAnimationFinished:!0}),Hi(r,"id",xl("recharts-area-")),Hi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),At(o)&&o()}),Hi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),At(o)&&o()}),r}return Yee(t,e),Hee(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var c=this.props,u=c.dot,f=c.points,d=c.dataKey,p=Ot(this.props,!1),m=Ot(u,!0),x=f.map(function(S,v){var y=Do(Do(Do({key:"dot-".concat(v),r:3},p),m),{},{index:v,cx:S.x,cy:S.y,dataKey:d,value:S.value,payload:S.payload,points:f});return t.renderDotItem(u,y)}),b={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ee.createElement(kr,Vs({className:"recharts-area-dots"},b),x)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=n*Math.abs(c-u),d=qo(o.map(function(p){return p.y||0}));return Ee(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(qo(i.map(function(p){return p.y||0})),d)),Ee(d)?ee.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=n*Math.abs(c-u),d=qo(o.map(function(p){return p.x||0}));return Ee(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(qo(i.map(function(p){return p.x||0})),d)),Ee(d)?ee.createElement("rect",{x:0,y:c<u?c:c-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,c=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,p=s.isRange;s.ref;var m=oN(s,zee);return ee.createElement(kr,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ee.createElement(Zs,Vs({},Ot(m,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&ee.createElement(Zs,Vs({},Ot(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&p&&ee.createElement(Zs,Vs({},Ot(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,x=this.state,b=x.prevPoints,S=x.prevBaseLine;return ee.createElement($i,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t;if(b){var w=b.length/s.length,P=s.map(function(A,R){var E=Math.floor(R*w);if(b[E]){var T=b[E],B=An(T.x,A.x),G=An(T.y,A.y);return Do(Do({},A),{},{x:B(y),y:G(y)})}return A}),j;if(Ee(c)&&typeof c=="number"){var k=An(S,c);j=k(y)}else if(Nt(c)||Yc(c)){var O=An(S,0);j=O(y)}else j=c.map(function(A,R){var E=Math.floor(R*w);if(S[E]){var T=S[E],B=An(T.x,A.x),G=An(T.y,A.y);return Do(Do({},A),{},{x:B(y),y:G(y)})}return A});return i.renderAreaStatically(P,j,n,a)}return ee.createElement(kr,null,ee.createElement("defs",null,ee.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),ee.createElement(kr,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,c=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,p=u.totalLength;return c&&o&&o.length&&(!f&&p>0||!ul(f,o)||!ul(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,c=a.className,u=a.top,f=a.left,d=a.xAxis,p=a.yAxis,m=a.width,x=a.height,b=a.isAnimationActive,S=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,w=tr("recharts-area",c),P=d&&d.allowDataOverflow,j=p&&p.allowDataOverflow,k=P||j,O=Nt(S)?this.id:S,A=(n=Ot(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},R=A.r,E=R===void 0?3:R,T=A.strokeWidth,B=T===void 0?2:T,G=o_(o)?o:{},V=G.clipDot,z=V===void 0?!0:V,D=E*2+B;return ee.createElement(kr,{className:w},P||j?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(O)},ee.createElement("rect",{x:P?f:f-m/2,y:j?u:u-x/2,width:P?m:m*2,height:j?x:x*2})),!z&&ee.createElement("clipPath",{id:"clipPath-dots-".concat(O)},ee.createElement("rect",{x:f-D/2,y:u-D/2,width:m+D,height:x+D}))):null,y?null:this.renderArea(k,O),(o||y)&&this.renderDots(k,z,O),(!b||v)&&Zi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(C.PureComponent);iN=fi;Hi(fi,"displayName","Area");Hi(fi,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!xs.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Hi(fi,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(Ee(s)&&typeof s=="number")return s;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Hi(fi,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,c=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,m=t.layout,x=u&&u.length,b=iN.getBaseValue(t,r,n,a),S=m==="horizontal",v=!1,y=d.map(function(P,j){var k;x?k=u[f+j]:(k=Hn(P,c),Array.isArray(k)?v=!0:k=[b,k]);var O=k[1]==null||x&&Hn(P,c)==null;return S?{x:Sc({axis:n,ticks:i,bandSize:s,entry:P,index:j}),y:O?null:a.scale(k[1]),value:k,payload:P}:{x:O?null:n.scale(k[1]),y:Sc({axis:a,ticks:o,bandSize:s,entry:P,index:j}),value:k,payload:P}}),w;return x||v?w=y.map(function(P){var j=Array.isArray(P.value)?P.value[0]:null;return S?{x:P.x,y:j!=null&&P.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:P.y}}):w=S?a.scale(b):n.scale(b),Do({points:y,baseLine:w,layout:m,isRange:v},p)});Hi(fi,"renderDotItem",function(e,t){var r;if(ee.isValidElement(e))r=ee.cloneElement(e,t);else if(At(e))r=e(t);else{var n=tr("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=oN(t,Uee);r=ee.createElement(eg,Vs({},i,{key:a,className:n}))}return r});function $c(e){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c(e)}function Qee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fN(n.key),n)}}function ete(e,t,r){return t&&Jee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tte(e,t,r){return t=qh(t),rte(e,cN()?Reflect.construct(t,r||[],qh(e).constructor):t.apply(e,r))}function rte(e,t){if(t&&($c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nte(e)}function nte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cN=function(){return!!e})()}function qh(e){return qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qh(e)}function ate(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dx(e,t)}function dx(e,t){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dx(e,t)}function uN(e,t,r){return t=fN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fN(e){var t=ite(e,"string");return $c(t)=="symbol"?t:t+""}function ite(e,t){if($c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var og=function(e){function t(){return Qee(this,t),tte(this,t,arguments)}return ate(t,e),ete(t,[{key:"render",value:function(){return null}}])}(C.Component);uN(og,"displayName","ZAxis");uN(og,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ote=["option","isActive"];function Ku(){return Ku=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ku.apply(this,arguments)}function ste(e,t){if(e==null)return{};var r=lte(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function cte(e){var t=e.option,r=e.isActive,n=ste(e,ote);return typeof t=="string"?C.createElement(Qv,Ku({option:C.createElement(Gp,Ku({type:t},n)),isActive:r,shapeType:"symbols"},n)):C.createElement(Qv,Ku({option:t,isActive:r,shapeType:"symbols"},n))}function Rc(e){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qu.apply(this,arguments)}function t3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t3(Object(r),!0).forEach(function(n){Qo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ute(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hN(n.key),n)}}function fte(e,t,r){return t&&r3(e.prototype,t),r&&r3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function dte(e,t,r){return t=Yh(t),hte(e,dN()?Reflect.construct(t,r||[],Yh(e).constructor):t.apply(e,r))}function hte(e,t){if(t&&(Rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pte(e)}function pte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dN=function(){return!!e})()}function Yh(e){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yh(e)}function gte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hx(e,t)}function hx(e,t){return hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hx(e,t)}function Qo(e,t,r){return t=hN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hN(e){var t=mte(e,"string");return Rc(t)=="symbol"?t:t+""}function mte(e,t){if(Rc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wa=function(e){function t(){var r;ute(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=dte(this,t,[].concat(a)),Qo(r,"state",{isAnimationFinished:!1}),Qo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Qo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Qo(r,"id",xl("recharts-scatter-")),r}return gte(t,e),fte(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,c=i.activeIndex,u=Ot(this.props,!1);return n.map(function(f,d){var p=c===d,m=p?s:o,x=oi(oi({},u),f);return ee.createElement(kr,qu({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},mf(a.props,f,d),{role:"img"}),ee.createElement(cte,qu({option:m,isActive:p,key:"symbol-".concat(d)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,c=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return ee.createElement($i,{begin:s,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,x=i.map(function(b,S){var v=d&&d[S];if(v){var y=An(v.cx,b.cx),w=An(v.cy,b.cy),P=An(v.size,b.size);return oi(oi({},b),{},{cx:y(m),cy:w(m),size:P(m)})}var j=An(0,b.size);return oi(oi({},b),{},{size:j(m)})});return ee.createElement(kr,null,n.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!ul(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,c=a.children,u=Ba(c,nu);return u?u.map(function(f,d){var p=f.props,m=p.direction,x=p.dataKey;return ee.cloneElement(f,{key:"".concat(m,"-").concat(x,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(S,v){return{x:S.cx,y:S.cy,value:m==="x"?+S.node.x:+S.node.y,errorVal:Hn(S,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,c=Ot(this.props,!1),u=Ot(i,!1),f,d;if(o==="joint")f=a.map(function(w){return{x:w.cx,y:w.cy}});else if(o==="fitting"){var p=WE(a),m=p.xmin,x=p.xmax,b=p.a,S=p.b,v=function(P){return b*P+S};f=[{x:m,y:v(m)},{x,y:v(x)}]}var y=oi(oi(oi({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:f});return ee.isValidElement(i)?d=ee.cloneElement(i,y):At(i)?d=i(y):d=ee.createElement(Zs,qu({},y,{type:s})),ee.createElement(kr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,c=n.xAxis,u=n.yAxis,f=n.left,d=n.top,p=n.width,m=n.height,x=n.id,b=n.isAnimationActive;if(a||!i||!i.length)return null;var S=this.state.isAnimationFinished,v=tr("recharts-scatter",s),y=c&&c.allowDataOverflow,w=u&&u.allowDataOverflow,P=y||w,j=Nt(x)?this.id:x;return ee.createElement(kr,{className:v,clipPath:P?"url(#clipPath-".concat(j,")"):null},y||w?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(j)},ee.createElement("rect",{x:y?f:f-p/2,y:w?d:d-m/2,width:y?p:p*2,height:w?m:m*2}))):null,o&&this.renderLine(),this.renderErrorBar(),ee.createElement(kr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!b||S)&&Zi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(C.PureComponent);Qo(wa,"displayName","Scatter");Qo(wa,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!xs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Qo(wa,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,c=e.offset,u=a.props.tooltipType,f=Ba(a.props.children,eb),d=Nt(t.dataKey)?a.props.dataKey:t.dataKey,p=Nt(r.dataKey)?a.props.dataKey:r.dataKey,m=n&&n.dataKey,x=n?n.range:og.defaultProps.range,b=x&&x[0],S=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,y=i.map(function(w,P){var j=Hn(w,d),k=Hn(w,p),O=!Nt(m)&&Hn(w,m)||"-",A=[{name:Nt(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:j,payload:w,dataKey:d,type:u},{name:Nt(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:w,dataKey:p,type:u}];O!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:O,payload:w,dataKey:m,type:u});var R=Sc({axis:t,ticks:o,bandSize:S,entry:w,index:P,dataKey:d}),E=Sc({axis:r,ticks:s,bandSize:v,entry:w,index:P,dataKey:p}),T=O!=="-"?n.scale(O):b,B=Math.sqrt(Math.max(T,0)/Math.PI);return oi(oi({},w),{},{cx:R,cy:E,x:R-B,y:E-B,xAxis:t,yAxis:r,zAxis:n,width:2*B,height:2*B,size:T,node:{x:j,y:k,z:O},tooltipPayload:A,tooltipPosition:{x:R,y:E},payload:w},f&&f[P]&&f[P].props)});return oi({points:y},c)});function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function yte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mN(n.key),n)}}function xte(e,t,r){return t&&vte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bte(e,t,r){return t=Zh(t),wte(e,pN()?Reflect.construct(t,r||[],Zh(e).constructor):t.apply(e,r))}function wte(e,t){if(t&&(Dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kte(e)}function kte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pN=function(){return!!e})()}function Zh(e){return Zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zh(e)}function Ste(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&px(e,t)}function px(e,t){return px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},px(e,t)}function gN(e,t,r){return t=mN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mN(e){var t=jte(e,"string");return Dc(t)=="symbol"?t:t+""}function jte(e,t){if(Dc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gx.apply(this,arguments)}function _te(e){var t=e.xAxisId,r=Ab(),n=Tb(),a=VC(t);return a==null?null:C.createElement(au,gx({},a,{className:tr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return yo(o,!0)}}))}var ja=function(e){function t(){return yte(this,t),bte(this,t,arguments)}return Ste(t,e),xte(t,[{key:"render",value:function(){return C.createElement(_te,this.props)}}])}(C.Component);gN(ja,"displayName","XAxis");gN(ja,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ic(e){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function Pte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xN(n.key),n)}}function Nte(e,t,r){return t&&Cte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ote(e,t,r){return t=Qh(t),Mte(e,yN()?Reflect.construct(t,r||[],Qh(e).constructor):t.apply(e,r))}function Mte(e,t){if(t&&(Ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ate(e)}function Ate(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yN=function(){return!!e})()}function Qh(e){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qh(e)}function Tte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mx(e,t)}function mx(e,t){return mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mx(e,t)}function vN(e,t,r){return t=xN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xN(e){var t=Ete(e,"string");return Ic(t)=="symbol"?t:t+""}function Ete(e,t){if(Ic(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(this,arguments)}var $te=function(t){var r=t.yAxisId,n=Ab(),a=Tb(),i=HC(r);return i==null?null:C.createElement(au,yx({},i,{className:tr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return yo(s,!0)}}))},_a=function(e){function t(){return Pte(this,t),Ote(this,t,arguments)}return Tte(t,e),Nte(t,[{key:"render",value:function(){return C.createElement($te,this.props)}}])}(C.Component);vN(_a,"displayName","YAxis");vN(_a,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function n3(e){return Lte(e)||Ite(e)||Dte(e)||Rte()}function Rte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dte(e,t){if(e){if(typeof e=="string")return vx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vx(e,t)}}function Ite(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lte(e){if(Array.isArray(e))return vx(e)}function vx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xx=function(t,r,n,a,i){var o=Ba(t,Zo),s=Ba(t,ud),c=[].concat(n3(o),n3(s)),u=Ba(t,fd),f="".concat(a,"Id"),d=a[0],p=r;if(c.length&&(p=c.reduce(function(b,S){if(S.props[f]===n&&Qi(S.props,"extendDomain")&&Ee(S.props[d])){var v=S.props[d];return[Math.min(b[0],v),Math.max(b[1],v)]}return b},p)),u.length){var m="".concat(d,"1"),x="".concat(d,"2");p=u.reduce(function(b,S){if(S.props[f]===n&&Qi(S.props,"extendDomain")&&Ee(S.props[m])&&Ee(S.props[x])){var v=S.props[m],y=S.props[x];return[Math.min(b[0],v,y),Math.max(b[1],v,y)]}return b},p)}return i&&i.length&&(p=i.reduce(function(b,S){return Ee(S)?[Math.min(b[0],S),Math.max(b[1],S)]:b},p)),p},bN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,d||c,p),x=r?r+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,m=d.length,x=new Array(m);p<m;p++)x[p]=d[p].fn;return x},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,p,m,x){var b=r?r+u:u;if(!this._events[b])return!1;var S=this._events[b],v=arguments.length,y,w;if(S.fn){switch(S.once&&this.removeListener(u,S.fn,void 0,!0),v){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,d),!0;case 4:return S.fn.call(S.context,f,d,p),!0;case 5:return S.fn.call(S.context,f,d,p,m),!0;case 6:return S.fn.call(S.context,f,d,p,m,x),!0}for(w=1,y=new Array(v-1);w<v;w++)y[w-1]=arguments[w];S.fn.apply(S.context,y)}else{var P=S.length,j;for(w=0;w<P;w++)switch(S[w].once&&this.removeListener(u,S[w].fn,void 0,!0),v){case 1:S[w].fn.call(S[w].context);break;case 2:S[w].fn.call(S[w].context,f);break;case 3:S[w].fn.call(S[w].context,f,d);break;case 4:S[w].fn.call(S[w].context,f,d,p);break;default:if(!y)for(j=1,y=new Array(v-1);j<v;j++)y[j-1]=arguments[j];S[w].fn.apply(S[w].context,y)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,p){var m=r?r+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===f&&(!p||x.once)&&(!d||x.context===d)&&o(this,m);else{for(var b=0,S=[],v=x.length;b<v;b++)(x[b].fn!==f||p&&!x[b].once||d&&x[b].context!==d)&&S.push(x[b]);S.length?this._events[m]=S.length===1?S[0]:S:o(this,m)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(bN);var Bte=bN.exports;const Fte=Ir(Bte);var zm=new Fte,Um="recharts.syncMouseEvents";function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function Gte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wN(n.key),n)}}function Ute(e,t,r){return t&&zte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wm(e,t,r){return t=wN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wN(e){var t=Wte(e,"string");return Yf(t)=="symbol"?t:t+""}function Wte(e,t){if(Yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vte=function(){function e(){Gte(this,e),Wm(this,"activeIndex",0),Wm(this,"coordinateList",[]),Wm(this,"layout","horizontal")}return Ute(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,p=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function Hte(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Ee(n)&&Ee(a))return!0}return!1}function Xte(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function kN(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=ia(t,r,n,a),s=ia(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Kte(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,p=ia(s,c,u,d),m=ia(s,c,f,d);n=p.x,a=p.y,i=m.x,o=m.y}else return kN(t);return[{x:n,y:a},{x:i,y:o}]}function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function a3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a3(Object(r),!0).forEach(function(n){qte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qte(e,t,r){return t=Yte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yte(e){var t=Zte(e,"string");return Zf(t)=="symbol"?t:t+""}function Zte(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qte(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,p=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||p!=="ScatterChart"&&a!=="axis")return null;var x,b=Zs;if(p==="ScatterChart")x=o,b=jY;else if(p==="BarChart")x=Xte(d,o,c,f),b=Pb;else if(d==="radial"){var S=kN(o),v=S.cx,y=S.cy,w=S.radius,P=S.startAngle,j=S.endAngle;x={cx:v,cy:y,startAngle:P,endAngle:j,innerRadius:w,outerRadius:w},b=yC}else x={points:Kte(d,o,c)},b=Zs;var k=n0(n0(n0(n0({stroke:"#ccc",pointerEvents:"none"},c),x),Ot(m,!1)),{},{payload:s,payloadIndex:u,className:tr("recharts-tooltip-cursor",m.className)});return C.isValidElement(m)?C.cloneElement(m,k):C.createElement(b,k)}var Jte=["item"],ere=["children","className","width","height","style","compact","title","desc"];function Lc(e){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(e)}function Xl(){return Xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xl.apply(this,arguments)}function i3(e,t){return nre(e)||rre(e,t)||jN(e,t)||tre()}function tre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function nre(e){if(Array.isArray(e))return e}function o3(e,t){if(e==null)return{};var r=are(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function are(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ire(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ore(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_N(n.key),n)}}function sre(e,t,r){return t&&ore(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lre(e,t,r){return t=Jh(t),cre(e,SN()?Reflect.construct(t,r||[],Jh(e).constructor):t.apply(e,r))}function cre(e,t){if(t&&(Lc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ure(e)}function ure(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SN=function(){return!!e})()}function Jh(e){return Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jh(e)}function fre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bx(e,t)}function bx(e,t){return bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},bx(e,t)}function Bc(e){return pre(e)||hre(e)||jN(e)||dre()}function dre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jN(e,t){if(e){if(typeof e=="string")return wx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wx(e,t)}}function hre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pre(e){if(Array.isArray(e))return wx(e)}function wx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s3(Object(r),!0).forEach(function(n){gt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gt(e,t,r){return t=_N(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _N(e){var t=gre(e,"string");return Lc(t)=="symbol"?t:t+""}function gre(e,t){if(Lc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mre={xAxis:["bottom","top"],yAxis:["left","right"]},yre={width:"100%",height:"100%"},PN={x:0,y:0};function a0(e){return e}var vre=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},xre=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return xe(xe(xe({},a),ia(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var c=i.coordinate,u=a.angle;return xe(xe(xe({},a),ia(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return PN},sg=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,c){var u=c.props.data;return u&&u.length?[].concat(Bc(s),Bc(u)):s},[]);return o.length>0?o:t&&t.length&&Ee(a)&&Ee(i)?t.slice(a,i+1):[]};function CN(e){return e==="number"?[0,"auto"]:void 0}var kx=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=sg(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?s:d;p=Z0(m,o.dataKey,a)}else p=d&&d[n]||s[n];return p?[].concat(Bc(c),[pC(u,p)]):c},[])},l3=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=vre(i,n),s=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=rX(o,s,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,p=kx(t,r,f,d),m=xre(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:p,activeCoordinate:m}}return null},bre=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=t.stackOffset,m=fC(f,i);return n.reduce(function(x,b){var S,v=b.type.defaultProps!==void 0?xe(xe({},b.type.defaultProps),b.props):b.props,y=v.type,w=v.dataKey,P=v.allowDataOverflow,j=v.allowDuplicatedCategory,k=v.scale,O=v.ticks,A=v.includeHidden,R=v[o];if(x[R])return x;var E=sg(t.data,{graphicalItems:a.filter(function(Y){var ne,te=o in Y.props?Y.props[o]:(ne=Y.type.defaultProps)===null||ne===void 0?void 0:ne[o];return te===R}),dataStartIndex:c,dataEndIndex:u}),T=E.length,B,G,V;Hte(v.domain,P,y)&&(B=Dv(v.domain,null,P),m&&(y==="number"||k!=="auto")&&(V=Vu(E,w,"category")));var z=CN(y);if(!B||B.length===0){var D,L=(D=v.domain)!==null&&D!==void 0?D:z;if(w){if(B=Vu(E,w,y),y==="category"&&m){var F=UE(B);j&&F?(G=B,B=Ih(0,T)):j||(B=BS(L,B,b).reduce(function(Y,ne){return Y.indexOf(ne)>=0?Y:[].concat(Bc(Y),[ne])},[]))}else if(y==="category")j?B=B.filter(function(Y){return Y!==""&&!Nt(Y)}):B=BS(L,B,b).reduce(function(Y,ne){return Y.indexOf(ne)>=0||ne===""||Nt(ne)?Y:[].concat(Bc(Y),[ne])},[]);else if(y==="number"){var H=sX(E,a.filter(function(Y){var ne,te,fe=o in Y.props?Y.props[o]:(ne=Y.type.defaultProps)===null||ne===void 0?void 0:ne[o],se="hide"in Y.props?Y.props.hide:(te=Y.type.defaultProps)===null||te===void 0?void 0:te.hide;return fe===R&&(A||!se)}),w,i,f);H&&(B=H)}m&&(y==="number"||k!=="auto")&&(V=Vu(E,w,"category"))}else m?B=Ih(0,T):s&&s[R]&&s[R].hasStack&&y==="number"?B=p==="expand"?[0,1]:hC(s[R].stackGroups,c,u):B=uC(E,a.filter(function(Y){var ne=o in Y.props?Y.props[o]:Y.type.defaultProps[o],te="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return ne===R&&(A||!te)}),y,f,!0);if(y==="number")B=xx(d,B,R,i,O),L&&(B=Dv(L,B,P));else if(y==="category"&&L){var W=L,J=B.every(function(Y){return W.indexOf(Y)>=0});J&&(B=W)}}return xe(xe({},x),{},gt({},R,xe(xe({},v),{},{axisType:i,domain:B,categoricalDomain:V,duplicateDomain:G,originalDomain:(S=v.domain)!==null&&S!==void 0?S:z,isCategorical:m,layout:f})))},{})},wre=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=sg(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=p.length,x=fC(f,i),b=-1;return n.reduce(function(S,v){var y=v.type.defaultProps!==void 0?xe(xe({},v.type.defaultProps),v.props):v.props,w=y[o],P=CN("number");if(!S[w]){b++;var j;return x?j=Ih(0,m):s&&s[w]&&s[w].hasStack?(j=hC(s[w].stackGroups,c,u),j=xx(d,j,w,i)):(j=Dv(P,uC(p,n.filter(function(k){var O,A,R=o in k.props?k.props[o]:(O=k.type.defaultProps)===null||O===void 0?void 0:O[o],E="hide"in k.props?k.props.hide:(A=k.type.defaultProps)===null||A===void 0?void 0:A.hide;return R===w&&!E}),"number",f),a.defaultProps.allowDataOverflow),j=xx(d,j,w,i)),xe(xe({},S),{},gt({},w,xe(xe({axisType:i},a.defaultProps),{},{hide:!0,orientation:hi(mre,"".concat(i,".").concat(b%2),null),domain:j,originalDomain:P,isCategorical:x,layout:f})))}return S},{})},kre=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),p=Ba(f,i),m={};return p&&p.length?m=bre(t,{axes:p,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=wre(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:c,dataEndIndex:u})),m},Sre=function(t){var r=zo(t),n=yo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Q1(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Ch(r,n)}},c3=function(t){var r=t.children,n=t.defaultShowTooltip,a=Va(r,Pc),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},jre=function(t){return!t||!t.length?!1:t.some(function(r){var n=xo(r&&r.type);return n&&n.indexOf("Bar")>=0})},u3=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},_re=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,c=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,p=n.margin||{},m=Va(d,Pc),x=Va(d,qi),b=Object.keys(c).reduce(function(j,k){var O=c[k],A=O.orientation;return!O.mirror&&!O.hide?xe(xe({},j),{},gt({},A,j[A]+O.width)):j},{left:p.left||0,right:p.right||0}),S=Object.keys(o).reduce(function(j,k){var O=o[k],A=O.orientation;return!O.mirror&&!O.hide?xe(xe({},j),{},gt({},A,hi(j,"".concat(A))+O.height)):j},{top:p.top||0,bottom:p.bottom||0}),v=xe(xe({},S),b),y=v.bottom;m&&(v.bottom+=m.props.height||Pc.defaultProps.height),x&&r&&(v=iX(v,a,n,r));var w=u-v.left-v.right,P=f-v.top-v.bottom;return xe(xe({brushBottom:y},v),{},{width:Math.max(w,0),height:Math.max(P,0)})},Pre=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Db=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,p=function(v,y){var w=y.graphicalItems,P=y.stackGroups,j=y.offset,k=y.updateId,O=y.dataStartIndex,A=y.dataEndIndex,R=v.barSize,E=v.layout,T=v.barGap,B=v.barCategoryGap,G=v.maxBarSize,V=u3(E),z=V.numericAxisName,D=V.cateAxisName,L=jre(w),F=[];return w.forEach(function(H,W){var J=sg(v.data,{graphicalItems:[H],dataStartIndex:O,dataEndIndex:A}),Y=H.type.defaultProps!==void 0?xe(xe({},H.type.defaultProps),H.props):H.props,ne=Y.dataKey,te=Y.maxBarSize,fe=Y["".concat(z,"Id")],se=Y["".concat(D,"Id")],ye={},ie=c.reduce(function(et,yt){var dt=y["".concat(yt.axisType,"Map")],cr=Y["".concat(yt.axisType,"Id")];dt&&dt[cr]||yt.axisType==="zAxis"||dl();var St=dt[cr];return xe(xe({},et),{},gt(gt({},yt.axisType,St),"".concat(yt.axisType,"Ticks"),yo(St)))},ye),X=ie[D],le=ie["".concat(D,"Ticks")],he=P&&P[fe]&&P[fe].hasStack&&xX(H,P[fe].stackGroups),oe=xo(H.type).indexOf("Bar")>=0,je=Ch(X,le),Se=[],me=L&&nX({barSize:R,stackGroups:P,totalSize:Pre(ie,D)});if(oe){var ge,Ce,De=Nt(te)?G:te,ze=(ge=(Ce=Ch(X,le,!0))!==null&&Ce!==void 0?Ce:De)!==null&&ge!==void 0?ge:0;Se=aX({barGap:T,barCategoryGap:B,bandSize:ze!==je?ze:je,sizeList:me[se],maxBarSize:De}),ze!==je&&(Se=Se.map(function(et){return xe(xe({},et),{},{position:xe(xe({},et.position),{},{offset:et.position.offset-ze/2})})}))}var Be=H&&H.type&&H.type.getComposedData;Be&&F.push({props:xe(xe({},Be(xe(xe({},ie),{},{displayedData:J,props:v,dataKey:ne,item:H,bandSize:je,barPosition:Se,offset:j,stackedData:he,layout:E,dataStartIndex:O,dataEndIndex:A}))),{},gt(gt(gt({key:H.key||"item-".concat(W)},z,ie[z]),D,ie[D]),"animationId",k)),childIndex:r$(H,v.children),item:H})}),F},m=function(v,y){var w=v.props,P=v.dataStartIndex,j=v.dataEndIndex,k=v.updateId;if(!Ew({props:w}))return null;var O=w.children,A=w.layout,R=w.stackOffset,E=w.data,T=w.reverseStackOrder,B=u3(A),G=B.numericAxisName,V=B.cateAxisName,z=Ba(O,n),D=mX(E,z,"".concat(G,"Id"),"".concat(V,"Id"),R,T),L=c.reduce(function(Y,ne){var te="".concat(ne.axisType,"Map");return xe(xe({},Y),{},gt({},te,kre(w,xe(xe({},ne),{},{graphicalItems:z,stackGroups:ne.axisType===G&&D,dataStartIndex:P,dataEndIndex:j}))))},{}),F=_re(xe(xe({},L),{},{props:w,graphicalItems:z}),y==null?void 0:y.legendBBox);Object.keys(L).forEach(function(Y){L[Y]=f(w,L[Y],F,Y.replace("Map",""),r)});var H=L["".concat(V,"Map")],W=Sre(H),J=p(w,xe(xe({},L),{},{dataStartIndex:P,dataEndIndex:j,updateId:k,graphicalItems:z,stackGroups:D,offset:F}));return xe(xe({formattedGraphicalItems:J,graphicalItems:z,offset:F,stackGroups:D},W),L)},x=function(S){function v(y){var w,P,j;return ire(this,v),j=lre(this,v,[y]),gt(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gt(j,"accessibilityManager",new Vte),gt(j,"handleLegendBBoxUpdate",function(k){if(k){var O=j.state,A=O.dataStartIndex,R=O.dataEndIndex,E=O.updateId;j.setState(xe({legendBBox:k},m({props:j.props,dataStartIndex:A,dataEndIndex:R,updateId:E},xe(xe({},j.state),{},{legendBBox:k}))))}}),gt(j,"handleReceiveSyncEvent",function(k,O,A){if(j.props.syncId===k){if(A===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(O)}}),gt(j,"handleBrushChange",function(k){var O=k.startIndex,A=k.endIndex;if(O!==j.state.dataStartIndex||A!==j.state.dataEndIndex){var R=j.state.updateId;j.setState(function(){return xe({dataStartIndex:O,dataEndIndex:A},m({props:j.props,dataStartIndex:O,dataEndIndex:A,updateId:R},j.state))}),j.triggerSyncEvent({dataStartIndex:O,dataEndIndex:A})}}),gt(j,"handleMouseEnter",function(k){var O=j.getMouseInfo(k);if(O){var A=xe(xe({},O),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var R=j.props.onMouseEnter;At(R)&&R(A,k)}}),gt(j,"triggeredAfterMouseMove",function(k){var O=j.getMouseInfo(k),A=O?xe(xe({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(A),j.triggerSyncEvent(A);var R=j.props.onMouseMove;At(R)&&R(A,k)}),gt(j,"handleItemMouseEnter",function(k){j.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),gt(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),gt(j,"handleMouseMove",function(k){k.persist(),j.throttleTriggeredAfterMouseMove(k)}),gt(j,"handleMouseLeave",function(k){j.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};j.setState(O),j.triggerSyncEvent(O);var A=j.props.onMouseLeave;At(A)&&A(O,k)}),gt(j,"handleOuterEvent",function(k){var O=t$(k),A=hi(j.props,"".concat(O));if(O&&At(A)){var R,E;/.*touch.*/i.test(O)?E=j.getMouseInfo(k.changedTouches[0]):E=j.getMouseInfo(k),A((R=E)!==null&&R!==void 0?R:{},k)}}),gt(j,"handleClick",function(k){var O=j.getMouseInfo(k);if(O){var A=xe(xe({},O),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var R=j.props.onClick;At(R)&&R(A,k)}}),gt(j,"handleMouseDown",function(k){var O=j.props.onMouseDown;if(At(O)){var A=j.getMouseInfo(k);O(A,k)}}),gt(j,"handleMouseUp",function(k){var O=j.props.onMouseUp;if(At(O)){var A=j.getMouseInfo(k);O(A,k)}}),gt(j,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),gt(j,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&j.handleMouseDown(k.changedTouches[0])}),gt(j,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&j.handleMouseUp(k.changedTouches[0])}),gt(j,"handleDoubleClick",function(k){var O=j.props.onDoubleClick;if(At(O)){var A=j.getMouseInfo(k);O(A,k)}}),gt(j,"handleContextMenu",function(k){var O=j.props.onContextMenu;if(At(O)){var A=j.getMouseInfo(k);O(A,k)}}),gt(j,"triggerSyncEvent",function(k){j.props.syncId!==void 0&&zm.emit(Um,j.props.syncId,k,j.eventEmitterSymbol)}),gt(j,"applySyncEvent",function(k){var O=j.props,A=O.layout,R=O.syncMethod,E=j.state.updateId,T=k.dataStartIndex,B=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)j.setState(xe({dataStartIndex:T,dataEndIndex:B},m({props:j.props,dataStartIndex:T,dataEndIndex:B,updateId:E},j.state)));else if(k.activeTooltipIndex!==void 0){var G=k.chartX,V=k.chartY,z=k.activeTooltipIndex,D=j.state,L=D.offset,F=D.tooltipTicks;if(!L)return;if(typeof R=="function")z=R(F,k);else if(R==="value"){z=-1;for(var H=0;H<F.length;H++)if(F[H].value===k.activeLabel){z=H;break}}var W=xe(xe({},L),{},{x:L.left,y:L.top}),J=Math.min(G,W.x+W.width),Y=Math.min(V,W.y+W.height),ne=F[z]&&F[z].value,te=kx(j.state,j.props.data,z),fe=F[z]?{x:A==="horizontal"?F[z].coordinate:J,y:A==="horizontal"?Y:F[z].coordinate}:PN;j.setState(xe(xe({},k),{},{activeLabel:ne,activeCoordinate:fe,activePayload:te,activeTooltipIndex:z}))}else j.setState(k)}),gt(j,"renderCursor",function(k){var O,A=j.state,R=A.isTooltipActive,E=A.activeCoordinate,T=A.activePayload,B=A.offset,G=A.activeTooltipIndex,V=A.tooltipAxisBandSize,z=j.getTooltipEventType(),D=(O=k.props.active)!==null&&O!==void 0?O:R,L=j.props.layout,F=k.key||"_recharts-cursor";return ee.createElement(Qte,{key:F,activeCoordinate:E,activePayload:T,activeTooltipIndex:G,chartName:r,element:k,isActive:D,layout:L,offset:B,tooltipAxisBandSize:V,tooltipEventType:z})}),gt(j,"renderPolarAxis",function(k,O,A){var R=hi(k,"type.axisType"),E=hi(j.state,"".concat(R,"Map")),T=k.type.defaultProps,B=T!==void 0?xe(xe({},T),k.props):k.props,G=E&&E[B["".concat(R,"Id")]];return C.cloneElement(k,xe(xe({},G),{},{className:tr(R,G.className),key:k.key||"".concat(O,"-").concat(A),ticks:yo(G,!0)}))}),gt(j,"renderPolarGrid",function(k){var O=k.props,A=O.radialLines,R=O.polarAngles,E=O.polarRadius,T=j.state,B=T.radiusAxisMap,G=T.angleAxisMap,V=zo(B),z=zo(G),D=z.cx,L=z.cy,F=z.innerRadius,H=z.outerRadius;return C.cloneElement(k,{polarAngles:Array.isArray(R)?R:yo(z,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(E)?E:yo(V,!0).map(function(W){return W.coordinate}),cx:D,cy:L,innerRadius:F,outerRadius:H,key:k.key||"polar-grid",radialLines:A})}),gt(j,"renderLegend",function(){var k=j.state.formattedGraphicalItems,O=j.props,A=O.children,R=O.width,E=O.height,T=j.props.margin||{},B=R-(T.left||0)-(T.right||0),G=lC({children:A,formattedGraphicalItems:k,legendWidth:B,legendContent:u});if(!G)return null;var V=G.item,z=o3(G,Jte);return C.cloneElement(V,xe(xe({},z),{},{chartWidth:R,chartHeight:E,margin:T,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),gt(j,"renderTooltip",function(){var k,O=j.props,A=O.children,R=O.accessibilityLayer,E=Va(A,Un);if(!E)return null;var T=j.state,B=T.isTooltipActive,G=T.activeCoordinate,V=T.activePayload,z=T.activeLabel,D=T.offset,L=(k=E.props.active)!==null&&k!==void 0?k:B;return C.cloneElement(E,{viewBox:xe(xe({},D),{},{x:D.left,y:D.top}),active:L,label:z,payload:L?V:[],coordinate:G,accessibilityLayer:R})}),gt(j,"renderBrush",function(k){var O=j.props,A=O.margin,R=O.data,E=j.state,T=E.offset,B=E.dataStartIndex,G=E.dataEndIndex,V=E.updateId;return C.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Jd(j.handleBrushChange,k.props.onChange),data:R,x:Ee(k.props.x)?k.props.x:T.left,y:Ee(k.props.y)?k.props.y:T.top+T.height+T.brushBottom-(A.bottom||0),width:Ee(k.props.width)?k.props.width:T.width,startIndex:B,endIndex:G,updateId:"brush-".concat(V)})}),gt(j,"renderReferenceElement",function(k,O,A){if(!k)return null;var R=j,E=R.clipPathId,T=j.state,B=T.xAxisMap,G=T.yAxisMap,V=T.offset,z=k.type.defaultProps||{},D=k.props,L=D.xAxisId,F=L===void 0?z.xAxisId:L,H=D.yAxisId,W=H===void 0?z.yAxisId:H;return C.cloneElement(k,{key:k.key||"".concat(O,"-").concat(A),xAxis:B[F],yAxis:G[W],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:E})}),gt(j,"renderActivePoints",function(k){var O=k.item,A=k.activePoint,R=k.basePoint,E=k.childIndex,T=k.isRange,B=[],G=O.props.key,V=O.item.type.defaultProps!==void 0?xe(xe({},O.item.type.defaultProps),O.item.props):O.item.props,z=V.activeDot,D=V.dataKey,L=xe(xe({index:E,dataKey:D,cx:A.x,cy:A.y,r:4,fill:_b(O.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ot(z,!1)),Q0(z));return B.push(v.renderActiveDot(z,L,"".concat(G,"-activePoint-").concat(E))),R?B.push(v.renderActiveDot(z,xe(xe({},L),{},{cx:R.x,cy:R.y}),"".concat(G,"-basePoint-").concat(E))):T&&B.push(null),B}),gt(j,"renderGraphicChild",function(k,O,A){var R=j.filterFormatItem(k,O,A);if(!R)return null;var E=j.getTooltipEventType(),T=j.state,B=T.isTooltipActive,G=T.tooltipAxis,V=T.activeTooltipIndex,z=T.activeLabel,D=j.props.children,L=Va(D,Un),F=R.props,H=F.points,W=F.isRange,J=F.baseLine,Y=R.item.type.defaultProps!==void 0?xe(xe({},R.item.type.defaultProps),R.item.props):R.item.props,ne=Y.activeDot,te=Y.hide,fe=Y.activeBar,se=Y.activeShape,ye=!!(!te&&B&&L&&(ne||fe||se)),ie={};E!=="axis"&&L&&L.props.trigger==="click"?ie={onClick:Jd(j.handleItemMouseEnter,k.props.onClick)}:E!=="axis"&&(ie={onMouseLeave:Jd(j.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Jd(j.handleItemMouseEnter,k.props.onMouseEnter)});var X=C.cloneElement(k,xe(xe({},R.props),ie));function le(yt){return typeof G.dataKey=="function"?G.dataKey(yt.payload):null}if(ye)if(V>=0){var he,oe;if(G.dataKey&&!G.allowDuplicatedCategory){var je=typeof G.dataKey=="function"?le:"payload.".concat(G.dataKey.toString());he=Z0(H,je,z),oe=W&&J&&Z0(J,je,z)}else he=H==null?void 0:H[V],oe=W&&J&&J[V];if(se||fe){var Se=k.props.activeIndex!==void 0?k.props.activeIndex:V;return[C.cloneElement(k,xe(xe(xe({},R.props),ie),{},{activeIndex:Se})),null,null]}if(!Nt(he))return[X].concat(Bc(j.renderActivePoints({item:R,activePoint:he,basePoint:oe,childIndex:V,isRange:W})))}else{var me,ge=(me=j.getItemByXY(j.state.activeCoordinate))!==null&&me!==void 0?me:{graphicalItem:X},Ce=ge.graphicalItem,De=Ce.item,ze=De===void 0?k:De,Be=Ce.childIndex,et=xe(xe(xe({},R.props),ie),{},{activeIndex:Be});return[C.cloneElement(ze,et),null,null]}return W?[X,null,null]:[X,null]}),gt(j,"renderCustomized",function(k,O,A){return C.cloneElement(k,xe(xe({key:"recharts-customized-".concat(A)},j.props),j.state))}),gt(j,"renderMap",{CartesianGrid:{handler:a0,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:a0},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:a0},YAxis:{handler:a0},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=y.id)!==null&&w!==void 0?w:xl("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=cP(j.triggeredAfterMouseMove,(P=y.throttleDelay)!==null&&P!==void 0?P:1e3/60),j.state={},j}return fre(v,S),sre(v,[{key:"componentDidMount",value:function(){var w,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,P=w.children,j=w.data,k=w.height,O=w.layout,A=Va(P,Un);if(A){var R=A.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,T=kx(this.state,j,R,E),B=this.state.tooltipTicks[R].coordinate,G=(this.state.offset.top+k)/2,V=O==="horizontal",z=V?{x:B,y:G}:{y:B,x:G},D=this.state.formattedGraphicalItems.find(function(F){var H=F.item;return H.type.name==="Scatter"});D&&(z=xe(xe({},z),D.props.points[R].tooltipPosition),T=D.props.points[R].tooltipPayload);var L={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:E,activePayload:T,activeCoordinate:z};this.setState(L),this.renderCursor(A),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,k;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(w){Zy([Va(w.children,Un)],[Va(this.props.children,Un)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Va(this.props.children,Un);if(w&&typeof w.props.shared=="boolean"){var P=w.props.shared?"axis":"item";return s.indexOf(P)>=0?P:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var P=this.container,j=P.getBoundingClientRect(),k=Nz(j),O={chartX:Math.round(w.pageX-k.left),chartY:Math.round(w.pageY-k.top)},A=j.width/P.offsetWidth||1,R=this.inRange(O.chartX,O.chartY,A);if(!R)return null;var E=this.state,T=E.xAxisMap,B=E.yAxisMap,G=this.getTooltipEventType(),V=l3(this.state,this.props.data,this.props.layout,R);if(G!=="axis"&&T&&B){var z=zo(T).scale,D=zo(B).scale,L=z&&z.invert?z.invert(O.chartX):null,F=D&&D.invert?D.invert(O.chartY):null;return xe(xe({},O),{},{xValue:L,yValue:F},V)}return V?xe(xe({},O),V):null}},{key:"inRange",value:function(w,P){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,O=w/j,A=P/j;if(k==="horizontal"||k==="vertical"){var R=this.state.offset,E=O>=R.left&&O<=R.left+R.width&&A>=R.top&&A<=R.top+R.height;return E?{x:O,y:A}:null}var T=this.state,B=T.angleAxisMap,G=T.radiusAxisMap;if(B&&G){var V=zo(B);return zS({x:O,y:A},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,P=this.getTooltipEventType(),j=Va(w,Un),k={};j&&P==="axis"&&(j.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=Q0(this.props,this.handleOuterEvent);return xe(xe({},O),k)}},{key:"addListener",value:function(){zm.on(Um,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){zm.removeListener(Um,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,P,j){for(var k=this.state.formattedGraphicalItems,O=0,A=k.length;O<A;O++){var R=k[O];if(R.item===w||R.props.key===w.key||P===xo(R.item.type)&&j===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,P=this.state.offset,j=P.left,k=P.top,O=P.height,A=P.width;return ee.createElement("defs",null,ee.createElement("clipPath",{id:w},ee.createElement("rect",{x:j,y:k,height:O,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(P,j){var k=i3(j,2),O=k[0],A=k[1];return xe(xe({},P),{},gt({},O,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(P,j){var k=i3(j,2),O=k[0],A=k[1];return xe(xe({},P),{},gt({},O,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[w])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(w){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[w])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(w){var P=this.state,j=P.formattedGraphicalItems,k=P.activeItem;if(j&&j.length)for(var O=0,A=j.length;O<A;O++){var R=j[O],E=R.props,T=R.item,B=T.type.defaultProps!==void 0?xe(xe({},T.type.defaultProps),T.props):T.props,G=xo(T.type);if(G==="Bar"){var V=(E.data||[]).find(function(F){return pY(w,F)});if(V)return{graphicalItem:R,payload:V}}else if(G==="RadialBar"){var z=(E.data||[]).find(function(F){return zS(w,F)});if(z)return{graphicalItem:R,payload:z}}else if(tg(R,k)||rg(R,k)||Vf(R,k)){var D=mZ({graphicalItem:R,activeTooltipItem:k,itemData:B.data}),L=B.activeIndex===void 0?D:B.activeIndex;return{graphicalItem:xe(xe({},R),{},{childIndex:L}),payload:Vf(R,k)?B.data[D]:R.props.data[D]}}}return null}},{key:"render",value:function(){var w=this;if(!Ew(this))return null;var P=this.props,j=P.children,k=P.className,O=P.width,A=P.height,R=P.style,E=P.compact,T=P.title,B=P.desc,G=o3(P,ere),V=Ot(G,!1);if(E)return ee.createElement(I5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ee.createElement(Jy,Xl({},V,{width:O,height:A,title:T,desc:B}),this.renderClipPath(),Rw(j,this.renderMap)));if(this.props.accessibilityLayer){var z,D;V.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,V.role=(D=this.props.role)!==null&&D!==void 0?D:"application",V.onKeyDown=function(F){w.accessibilityManager.keyboardEvent(F)},V.onFocus=function(){w.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return ee.createElement(I5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ee.createElement("div",Xl({className:tr("recharts-wrapper",k),style:xe({position:"relative",cursor:"default",width:O,height:A},R)},L,{ref:function(H){w.container=H}}),ee.createElement(Jy,Xl({},V,{width:O,height:A,title:T,desc:B,style:yre}),this.renderClipPath(),Rw(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(C.Component);gt(x,"displayName",r),gt(x,"defaultProps",xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),gt(x,"getDerivedStateFromProps",function(S,v){var y=S.dataKey,w=S.data,P=S.children,j=S.width,k=S.height,O=S.layout,A=S.stackOffset,R=S.margin,E=v.dataStartIndex,T=v.dataEndIndex;if(v.updateId===void 0){var B=c3(S);return xe(xe(xe({},B),{},{updateId:0},m(xe(xe({props:S},B),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:w,prevWidth:j,prevHeight:k,prevLayout:O,prevStackOffset:A,prevMargin:R,prevChildren:P})}if(y!==v.prevDataKey||w!==v.prevData||j!==v.prevWidth||k!==v.prevHeight||O!==v.prevLayout||A!==v.prevStackOffset||!tc(R,v.prevMargin)){var G=c3(S),V={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},z=xe(xe({},l3(v,w,O)),{},{updateId:v.updateId+1}),D=xe(xe(xe({},G),V),z);return xe(xe(xe({},D),m(xe({props:S},D),v)),{},{prevDataKey:y,prevData:w,prevWidth:j,prevHeight:k,prevLayout:O,prevStackOffset:A,prevMargin:R,prevChildren:P})}if(!Zy(P,v.prevChildren)){var L,F,H,W,J=Va(P,Pc),Y=J&&(L=(F=J.props)===null||F===void 0?void 0:F.startIndex)!==null&&L!==void 0?L:E,ne=J&&(H=(W=J.props)===null||W===void 0?void 0:W.endIndex)!==null&&H!==void 0?H:T,te=Y!==E||ne!==T,fe=!Nt(w),se=fe&&!te?v.updateId:v.updateId+1;return xe(xe({updateId:se},m(xe(xe({props:S},v),{},{updateId:se,dataStartIndex:Y,dataEndIndex:ne}),v)),{},{prevChildren:P,dataStartIndex:Y,dataEndIndex:ne})}return null}),gt(x,"renderActiveDot",function(S,v,y){var w;return C.isValidElement(S)?w=C.cloneElement(S,v):At(S)?w=S(v):w=ee.createElement(eg,v),ee.createElement(kr,{className:"recharts-active-dot",key:y},w)});var b=C.forwardRef(function(v,y){return ee.createElement(x,Xl({},v,{ref:y}))});return b.displayName=x.displayName,b},Hs=Db({chartName:"LineChart",GraphicalChild:_n,axisComponents:[{axisType:"xAxis",AxisComp:ja},{axisType:"yAxis",AxisComp:_a}],formatAxisMap:Cb}),Cre=Db({chartName:"ScatterChart",GraphicalChild:wa,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:ja},{axisType:"yAxis",AxisComp:_a},{axisType:"zAxis",AxisComp:og}],formatAxisMap:Cb}),NN=Db({chartName:"AreaChart",GraphicalChild:fi,axisComponents:[{axisType:"xAxis",AxisComp:ja},{axisType:"yAxis",AxisComp:_a}],formatAxisMap:Cb});const co=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},Nre=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:c,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[p,m]=C.useState(()=>(u==null?void 0:u.channelMode)??co("hist_mode","All")),[x,b]=C.useState(()=>(u==null?void 0:u.minVal)??co("hist_min",0)),[S,v]=C.useState(()=>(u==null?void 0:u.maxVal)??co("hist_max",16383)),[y,w]=C.useState(()=>(u==null?void 0:u.binCount)??co("hist_bins",100)),[P,j]=C.useState(()=>(u==null?void 0:u.pointToPoint)??co("hist_ptp",!1)),[k,O]=C.useState(()=>(u==null?void 0:u.showTheo)??co("hist_show_theo",!1)),[A,R]=C.useState(()=>(u==null?void 0:u.theoMean)??co("hist_theo_mean","512")),[E,T]=C.useState(()=>(u==null?void 0:u.theoSigma)??co("hist_theo_sigma","10")),[B,G]=C.useState(()=>(u==null?void 0:u.theoAmp)??co("hist_theo_amp","1000")),[V,z]=C.useState(!1),[D,L]=C.useState(0),[F,H]=C.useState([]),[W,J]=C.useState(null),[Y,ne]=C.useState(c||{x:100,y:100}),[te,fe]=C.useState(!1),se=C.useRef({x:0,y:0});C.useEffect(()=>{localStorage.setItem("hist_mode",p),localStorage.setItem("hist_min",String(x)),localStorage.setItem("hist_max",String(S)),localStorage.setItem("hist_bins",String(y)),localStorage.setItem("hist_ptp",String(P)),localStorage.setItem("hist_show_theo",String(k)),localStorage.setItem("hist_theo_mean",A),localStorage.setItem("hist_theo_sigma",E),localStorage.setItem("hist_theo_amp",B),f&&f({channelMode:p,minVal:x,maxVal:S,binCount:y,pointToPoint:P,showTheo:k,theoMean:A,theoSigma:E,theoAmp:B})},[p,x,S,y,P,k,A,E,B]),C.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(S<=x){J("Invalid range: Max must be greater than Min");return}J(null),z(!0),L(0);const me=new AbortController,ge=[],De=setTimeout(async()=>{try{let ze=[];if(d&&d.length>1){const Be=Math.min(d.length,navigator.hardwareConcurrency||4);for(let St=0;St<Be;St++){const ur=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});ge.push(ur)}let et=0,yt=0;const dt=[],cr=async St=>{for(;et<d.length;){if(me.signal.aborted)return;const ur=et++,jt=d[ur];try{const fr=await jt.arrayBuffer();await new Promise(($r,Tt)=>{St.onmessage=_r=>{const{success:Qe,hist:_t,error:Qt}=_r.data;Qe?(dt.push(_t),yt++,L(yt),$r()):(console.error(`Error processing ${jt.name}:`,Qt),$r())},St.onerror=_r=>{console.error("Worker Error",_r),$r()},St.postMessage({buffer:fr,roi:a,binCount:y,minVal:x,maxVal:S,pointToPoint:P},[fr])})}catch(fr){console.error("File Read Error",fr)}}};if(await Promise.all(ge.map(St=>cr(St))),ge.forEach(St=>St.terminate()),ge.length=0,dt.length>0){ze=dt[0];for(let St=1;St<dt.length;St++){const ur=dt[St];for(let jt=0;jt<ur.length;jt++)ze[jt]&&(ze[jt].c0+=ur[jt].c0,ze[jt].c1+=ur[jt].c1,ze[jt].c2+=ur[jt].c2,ze[jt].c3+=ur[jt].c3)}}}else n&&(ze=VA(n.data,n.width,n.height,a.x,a.y,a.w,a.h,y,x,S,P));me.signal.aborted||H(ze)}catch(ze){console.error("Histogram calc error:",ze),J("Error calculating histogram")}finally{me.signal.aborted||z(!1)}},50);return()=>{clearTimeout(De),me.abort(),ge.length>0&&(console.log(`Terminating ${ge.length} active histogram workers...`),ge.forEach(ze=>ze.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,y,x,S,P,d]);const ye=C.useMemo(()=>{if(!k)return F;const me=parseFloat(A),ge=parseFloat(E),Ce=parseFloat(B);return isNaN(me)||isNaN(ge)||isNaN(Ce)||ge<=0?F:F.map(De=>{const ze=De.binStart,Be=-Math.pow(ze-me,2)/(2*Math.pow(ge,2)),et=Ce*Math.exp(Be);return{...De,theory:et}})},[F,k,A,E,B]),ie=()=>{if(F.length===0)return;let me=0,ge=0;if(F.forEach(Ce=>{const De=Math.max(Ce.c0||0,Ce.c1||0,Ce.c2||0,Ce.c3||0);De>me&&(me=De,ge=Ce.binStart)}),R(ge.toFixed(2)),G(me.toString()),parseFloat(E)===0||isNaN(parseFloat(E))){const Ce=S-x;T((Ce/20).toFixed(2))}},X=(me,ge,Ce)=>{s&&s(),!(Ce.closest("button")||Ce.closest("input")||Ce.closest("select"))&&(fe(!0),se.current={x:me-Y.x,y:ge-Y.y})},le=me=>{X(me.clientX,me.clientY,me.target)},he=me=>{const ge=me.touches[0];X(ge.clientX,ge.clientY,me.target)};if(C.useEffect(()=>{const me=Ce=>{if(te){const De="touches"in Ce?Ce.touches[0].clientX:Ce.clientX,ze="touches"in Ce?Ce.touches[0].clientY:Ce.clientY;ne({x:De-se.current.x,y:ze-se.current.y})}},ge=()=>fe(!1);return te&&(window.addEventListener("mousemove",me),window.addEventListener("mouseup",ge),window.addEventListener("touchmove",me,{passive:!1}),window.addEventListener("touchend",ge)),()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",ge),window.removeEventListener("touchmove",me),window.removeEventListener("touchend",ge)}},[te]),!e)return null;const oe=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},je=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Se="step";return l.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:Y.x,top:Y.y,zIndex:o??100},onMouseDownCapture:s,children:[l.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${te?"cursor-grabbing":"cursor-grab"}`,onMouseDown:le,onTouchStart:he,children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&l.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[r&&l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),l.jsxs("select",{value:p,onChange:me=>m(me.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[l.jsx("option",{value:"All",children:"All Colors"}),l.jsx("option",{value:"0",children:oe.c0}),l.jsx("option",{value:"1",children:oe.c1}),l.jsx("option",{value:"2",children:oe.c2}),l.jsx("option",{value:"3",children:oe.c3})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),l.jsx("input",{type:"number",value:x,onChange:me=>b(Number(me.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",value:S,onChange:me=>v(Number(me.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:P,onChange:me=>j(me.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),l.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!P&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),l.jsx("input",{type:"number",value:y,onChange:me=>w(Math.max(1,Number(me.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),l.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${k?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:k,onChange:me=>O(me.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),l.jsx("span",{className:`font-bold uppercase tracking-tight ${k?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),k&&l.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),l.jsx("input",{type:"text",value:A,onChange:me=>R(me.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),l.jsx("input",{type:"text",value:E,onChange:me=>T(me.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),l.jsx("input",{type:"text",value:B,onChange:me=>G(me.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),l.jsx("button",{onClick:ie,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),l.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),V&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),l.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${D}/${d.length}`:"Calculating Histogram..."})]}),W?l.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:W}):l.jsx("div",{className:"relative z-10 w-full h-full",children:l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:ye,children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),l.jsx(ja,{dataKey:"binStart",type:"number",domain:[x,S],tickFormatter:me=>Math.floor(me).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),l.jsx(_a,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),l.jsx(Un,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:me=>`DN: ${Math.round(Number(me))}`,formatter:(me,ge)=>[Math.round(me),ge]}),l.jsx(qi,{wrapperStyle:{paddingTop:"10px"}}),k&&l.jsx(_n,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(p==="All"||p==="0")&&l.jsx(_n,{type:Se,dataKey:"c0",name:oe.c0,stroke:je.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="1")&&l.jsx(_n,{type:Se,dataKey:"c1",name:oe.c1,stroke:je.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="2")&&l.jsx(_n,{type:Se,dataKey:"c2",name:oe.c2,stroke:je.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="3")&&l.jsx(_n,{type:Se,dataKey:"c3",name:oe.c3,stroke:je.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},Ss=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=C.useState(e),[c,u]=C.useState(!1),[f,d]=C.useState({x:0,y:0}),p=C.useRef(null),m=(S,v,y)=>{i&&i(),!(y.closest("button")||y.closest("input"))&&(u(!0),d({x:S-o.x,y:v-o.y}))},x=S=>{m(S.clientX,S.clientY,S.target)},b=S=>{const v=S.touches[0];m(v.clientX,v.clientY,S.target)};return C.useEffect(()=>{const S=y=>{var w,P;if(c){y.cancelable&&y.preventDefault();const j="touches"in y?y.touches[0].clientX:y.clientX,k="touches"in y?y.touches[0].clientY:y.clientY,O=j-f.x,A=k-f.y,R=window.innerWidth-(((w=p.current)==null?void 0:w.offsetWidth)||100),E=window.innerHeight-(((P=p.current)==null?void 0:P.offsetHeight)||100);s({x:Math.max(0,Math.min(O,R)),y:Math.max(0,Math.min(A,E))})}},v=()=>{u(!1)};return c&&(window.addEventListener("mousemove",S),window.addEventListener("mouseup",v),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",v)),()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",v)}},[c,f]),l.jsxs("div",{ref:p,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${c?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[l.jsx("div",{onMouseDown:x,onTouchStart:b,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),l.jsx("div",{className:"relative z-10 pointer-events-none",children:l.jsx("div",{className:"pointer-events-auto",children:t})})]})},Ore=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:c})=>{const u=C.useRef(null),[f,d]=C.useState(!1),[p,m]=C.useState(null),[x,b]=C.useState(null),[S,v]=C.useState(!0),[y,w]=C.useState(!0),[P,j]=C.useState("-1"),[k,O]=C.useState("8"),[A,R]=C.useState(64),[E,T]=C.useState(45),[B,G]=C.useState(60),V=C.useRef(!1),z=C.useRef({x:0,y:0});C.useEffect(()=>{!e||!r||!n||(d(!0),b(null),setTimeout(()=>{try{const H=XA(r.data,r.width,r.height,n,a,y);H?m(H):b("Could not extract valid data from ROI.")}catch(H){console.error("2D FFT Error",H),b("Calculation Error: "+H.message)}finally{d(!1)}},50))},[e,r,n,a,y]),C.useEffect(()=>{if(!p||!u.current)return;const H=u.current,W=H.getContext("2d");if(!W)return;const J=H.width,Y=H.height;W.clearRect(0,0,J,Y),W.fillStyle="#0f172a",W.fillRect(0,0,J,Y);const ne=p.width,te=p.height,fe=p.data,se=Math.pow(10,parseFloat(P)||-1),ye=Math.pow(10,parseFloat(k)||8);let ie=se,X=ye;S&&(ie=Math.log10(Math.max(1e-10,se)),X=Math.log10(Math.max(1e-10,ye)));const le=X-ie||1,he=J/2,oe=Y/2+50,je=Math.min(J,Y)*.4,Se=.6,me=E*Math.PI/180,ge=B*Math.PI/180,Ce=Math.cos(me),De=Math.sin(me),ze=Math.cos(ge),Be=Math.sin(ge),et=(_t,Qt,Bt)=>{const yr=_t*Ce-Qt*De,rr=_t*De+Qt*Ce,Jr=rr*ze-Bt*Be,Ft=rr*Be+Bt*ze;return{x:he+yr*je,y:oe-Jr*je,depth:Ft}},yt=Math.max(16,A),dt=Math.max(1,Math.floor(ne/yt)),cr=Math.max(1,Math.floor(te/yt)),St=(_t,Qt)=>{let Bt=fe[Qt*ne+_t];return S&&(Bt=Math.log10(Math.max(1e-10,Bt))),Bt=Math.max(ie,Math.min(X,Bt)),(Bt-ie)/le},ur=_t=>`hsl(${(1-_t)*240}, 80%, 50%)`,jt=[];for(let _t=0;_t<te-cr;_t+=cr)for(let Qt=0;Qt<ne-dt;Qt+=dt){const Bt=Qt,yr=_t,rr=Qt+dt,Jr=_t,Ft=Qt+dt,hn=_t+cr,Pt=Qt,en=_t+cr,Ue=St(Bt,yr),nn=St(rr,Jr),Or=St(Ft,hn),pn=St(Pt,en),an=(Ue+nn+Or+pn)/4,or=et(Bt/(ne-1)-.5,yr/(te-1)-.5,Ue*Se),Lr=et(rr/(ne-1)-.5,Jr/(te-1)-.5,nn*Se),gn=et(Ft/(ne-1)-.5,hn/(te-1)-.5,Or*Se),on=et(Pt/(ne-1)-.5,en/(te-1)-.5,pn*Se),sn=(or.depth+Lr.depth+gn.depth+on.depth)/4;jt.push({pts:[{x:or.x,y:or.y},{x:Lr.x,y:Lr.y},{x:gn.x,y:gn.y},{x:on.x,y:on.y}],avgDepth:sn,avgZ:an})}jt.sort((_t,Qt)=>_t.avgDepth-Qt.avgDepth),W.lineWidth=.5,jt.forEach(_t=>{W.fillStyle=ur(_t.avgZ),W.beginPath(),W.moveTo(_t.pts[0].x,_t.pts[0].y),W.lineTo(_t.pts[1].x,_t.pts[1].y),W.lineTo(_t.pts[2].x,_t.pts[2].y),W.lineTo(_t.pts[3].x,_t.pts[3].y),W.closePath(),W.fill()}),W.fillStyle="#aaa",W.font="10px monospace";const fr=et(-.5,-.5,0),$r=et(.5,-.5,0),Tt=et(-.5,.5,0),_r=et(.5,.5,0);W.strokeStyle="#666",W.beginPath(),W.moveTo(fr.x,fr.y),W.lineTo($r.x,$r.y),W.lineTo(_r.x,_r.y),W.lineTo(Tt.x,Tt.y),W.closePath(),W.stroke(),W.fillText("0",fr.x-10,fr.y+10),W.fillText("Fx",$r.x+5,$r.y),W.fillText("Fy",Tt.x-15,Tt.y);const Qe=et(-.5,-.5,Se);W.strokeStyle="#fff",W.beginPath(),W.moveTo(fr.x,fr.y),W.lineTo(Qe.x,Qe.y),W.stroke(),W.fillText(`10^${k}`,Qe.x-25,Qe.y),W.fillText(`10^${P}`,fr.x-25,fr.y)},[p,S,E,B,P,k,A]);const D=H=>{V.current=!0,z.current={x:H.clientX,y:H.clientY}},L=H=>{if(!V.current)return;const W=H.clientX-z.current.x,J=H.clientY-z.current.y;T(Y=>Y-W*.5),G(Y=>Math.max(0,Math.min(90,Y+J*.5))),z.current={x:H.clientX,y:H.clientY}},F=()=>{V.current=!1};return e?l.jsxs(Ss,{initialPosition:c||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,p&&l.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[p.width,"x",p.height," (Chirp-Z)"]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),l.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[l.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),l.jsx("input",{type:"number",value:P,onChange:H=>j(H.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),l.jsx("span",{className:"text-slate-500",children:"to"}),l.jsx("input",{type:"number",value:k,onChange:H=>O(H.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[l.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),l.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:A,onChange:H=>R(Number(H.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),l.jsx("span",{className:"text-slate-300 w-6 text-right",children:A})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[l.jsx("input",{type:"checkbox",checked:S,onChange:H=>v(H.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:H=>w(H.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),l.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),x&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:x}),l.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:D,onMouseMove:L,onMouseUp:F,onMouseLeave:F}),l.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},Mre=.5,Sx=1e-10,f3=(e,t)=>{const r=e.length-1;if(r<0)return Sx;const n=t/Mre*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,Sx)},Are=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},Tre=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:c,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:p})=>{const[m,x]=C.useState((f==null?void 0:f.selectedChannel)??0),[b,S]=C.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[v,y]=C.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[w,P]=C.useState((f==null?void 0:f.useHanning)??!0),[j,k]=C.useState((f==null?void 0:f.doAverage)??!0),[O,A]=C.useState((f==null?void 0:f.welchSegments)??1),[R,E]=C.useState((f==null?void 0:f.showH)??!0),[T,B]=C.useState((f==null?void 0:f.showV)??!0),[G,V]=C.useState((f==null?void 0:f.interlaceRows)??!1),[z,D]=C.useState((f==null?void 0:f.rowGroup)??0),[L,F]=C.useState((f==null?void 0:f.interlaceCols)??!1),[H,W]=C.useState((f==null?void 0:f.colGroup)??0),[J,Y]=C.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[ne,te]=C.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[fe,se]=C.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[ye,ie]=C.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[X,le]=C.useState((f==null?void 0:f.intStart)||"0"),[he,oe]=C.useState((f==null?void 0:f.intEnd)||"0.5"),[je,Se]=C.useState(!1),[me,ge]=C.useState([]),[Ce,De]=C.useState(!1),[ze,Be]=C.useState(0),[et,yt]=C.useState(null),[dt,cr]=C.useState(!1),[St,ur]=C.useState(!1),[jt,fr]=C.useState(null),[$r,Tt]=C.useState(!1),[_r,Qe]=C.useState(null),[_t,Qt]=C.useState(u||{x:50,y:50}),[Bt,yr]=C.useState(!1),[rr,Jr]=C.useState(null),[Ft,hn]=C.useState({}),Pt=C.useRef({x:0,y:0}),en=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Ue=C.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);C.useEffect(()=>{localStorage.setItem("fft_y_min",b),localStorage.setItem("fft_y_max",v),localStorage.setItem("fft_theo_sigma",J),localStorage.setItem("fft_theo_ksize",ne),localStorage.setItem("fft_theo_noise",fe),localStorage.setItem("fft_theo_scale",ye)},[b,v,J,ne,fe,ye]),C.useEffect(()=>{if(!e||!n||!a)return;De(!0),yt(null),Be(0);const M=setTimeout(async()=>{try{const Fe=m===-1?[0,1,2,3]:[m],pt=p&&p.length>1?p:[null],Wt=pt.length,Lt={};let wt={h:0,v:0};for(let Je=0;Je<Wt;Je++){Be(Je+1);let bt;if(pt[Je]){const kt=await pt[Je].arrayBuffer();bt=await hc(kt)}else bt=n;for(const kt of Fe){const Kt=HA(bt.data,bt.width,bt.height,a,kt,!1,w,{rows:G,rowGroup:z,cols:L,colGroup:H},j,O);Kt&&(Lt[kt]||(Lt[kt]={h:new Array(Kt.avgHoriz.length).fill(0),v:new Array(Kt.avgVert.length).fill(0)}),Kt.avgHoriz.forEach((pr,_e)=>Lt[kt].h[_e]+=pr/Wt),Kt.avgVert.forEach((pr,_e)=>Lt[kt].v[_e]+=pr/Wt),wt=Kt.sampleCount)}}if(Object.keys(Lt).length===0)throw new Error("ROI too small or no data found.");const vr=1024,Xt=[];for(let Je=0;Je<vr;Je++){const bt=Je/(vr-1)*.5,kt={freq:parseFloat(bt.toFixed(6))};for(const Kt of Fe)Lt[Kt]&&(kt[`c${Kt}_h`]=f3(Lt[Kt].h,bt),kt[`c${Kt}_v`]=f3(Lt[Kt].v,bt));Xt.push(kt)}Jr(wt),ge(Xt)}catch(Fe){console.error("FFT Loop Failed:",Fe),yt(Fe.message||"Unknown error during FFT processing")}finally{De(!1)}},100);return()=>clearTimeout(M)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,m,w,j,O,G,z,L,H,p]);const nn=()=>{const M=parseFloat(X),Fe=parseFloat(he);if(isNaN(M)||isNaN(Fe))return;const pt={},Wt=m===-1?[0,1,2,3]:[m],Lt=me.filter(wt=>wt.freq>=M&&wt.freq<=Fe);if(Lt.length===0){hn({});return}Wt.forEach(wt=>{let vr=0,Xt=0;Lt.forEach(Je=>{const bt=Je[`c${wt}_h`],kt=Je[`c${wt}_v`];typeof bt=="number"&&(vr+=bt),typeof kt=="number"&&(Xt+=kt)}),pt[wt]={h:vr/Lt.length,v:Xt/Lt.length,count:Lt.length}}),hn(pt)},Or=C.useMemo(()=>{const M=parseFloat(J),Fe=parseInt(ne),pt=parseFloat(fe),Wt=parseFloat(ye);if(isNaN(M)||isNaN(Fe)||isNaN(pt)||isNaN(Wt)||me.length===0)return me;const Lt=Are(Fe,M),wt=Lt.reduce((Je,bt)=>Je+bt*bt,0),vr=(Fe-1)/2,Xt=pt*pt*Wt;return me.map(Je=>{const bt=Je.freq,kt=2*Math.PI*bt;let Kt=0,pr=0;for(let Hr=0;Hr<Fe;Hr++){const I=Hr-vr,be=Lt[Hr],Ne=-kt*I;Kt+=be*Math.cos(Ne),pr+=be*Math.sin(Ne)}const _e=Kt*Kt+pr*pr;return{...Je,theory:Math.max(Sx,Xt*wt*_e)}})},[me,J,ne,fe,ye]),pn=M=>{M&&M.activeLabel!==void 0&&(Tt(!0),Qe(Number(M.activeLabel)),fr(null))},an=M=>{if($r&&_r!==null&&M&&M.activeLabel!==void 0){const Fe=Number(M.activeLabel);fr([Math.min(_r,Fe),Math.max(_r,Fe)])}},or=()=>Tt(!1),Lr=(M,Fe,pt)=>{c&&c(),!(pt.closest("button")||pt.closest("input"))&&(yr(!0),Pt.current={x:M-_t.x,y:Fe-_t.y})},gn=M=>{Lr(M.clientX,M.clientY,M.target)},on=M=>{const Fe=M.touches[0];Lr(Fe.clientX,Fe.clientY,M.target)};C.useEffect(()=>{const M=pt=>{if(Bt){const Wt="touches"in pt?pt.touches[0].clientX:pt.clientX,Lt="touches"in pt?pt.touches[0].clientY:pt.clientY;Qt({x:Wt-Pt.current.x,y:Lt-Pt.current.y})}},Fe=()=>yr(!1);return Bt&&(window.addEventListener("mousemove",M),window.addEventListener("mouseup",Fe),window.addEventListener("touchmove",M,{passive:!1}),window.addEventListener("touchend",Fe)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",Fe),window.removeEventListener("touchmove",M),window.removeEventListener("touchend",Fe)}},[Bt]);const sn=C.useMemo(()=>{if(!jt||me.length===0)return null;const[M,Fe]=jt,pt=me.filter(wt=>wt.freq>=M&&wt.freq<=Fe);if(pt.length===0)return null;const Wt=m===-1?[0,1,2,3]:[m],Lt={};return Wt.forEach(wt=>{["h","v"].forEach(vr=>{const Xt=`c${wt}_${vr}`;let Je=0,bt=0;for(const kt of pt){const Kt=kt[Xt];typeof Kt=="number"&&(Je+=Kt,bt++)}bt>0&&(Lt[`${Xt}_sigma`]=Math.sqrt(Je/bt))})}),{count:pt.length,stats:Lt}},[jt,me,m]),hr=()=>{if(me.length===0)return;let M=1/0,Fe=-1/0;if(me.forEach(vr=>{vr.freq<.01||vr.freq>.49||Object.keys(vr).forEach(Xt=>{if(Xt==="freq"||Xt==="theory")return;const Je=vr[Xt];typeof Je=="number"&&Je>0&&(Je<M&&(M=Je),Je>Fe&&(Fe=Je))})}),M===1/0)return;const pt=Math.log10(M),Wt=Math.log10(Fe),Lt=Wt-pt,wt=(Lt===0?1:Lt)*.1;S((pt-wt).toFixed(2)),y((Wt+wt).toFixed(2))},nr=(M,Fe)=>{a&&o&&o({...a,x:a.x+M,y:a.y+Fe})},ar=(M,Fe)=>{a&&o&&o({...a,w:Math.max(2,a.w+M),h:Math.max(2,a.h+Fe)})};return e?l.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:_t.x,top:_t.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:c,children:[l.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${Bt?"cursor-grabbing":"cursor-grab"}`,onMouseDown:gn,onTouchStart:on,children:[l.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",l.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:p&&p.length>1?`Stack Avg (${p.length} frames)`:"Single Mode"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[r&&l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[l.jsx("button",{onClick:()=>x(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${m===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(M=>l.jsx("button",{onClick:()=>x(M),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${m===M?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:Ue[M]},M))]})]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),l.jsxs("button",{onClick:()=>Se(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[l.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),l.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:ne,set:te,w:"w-10"},{label:"Sigma",val:J,set:Y,w:"w-12"},{label:"Noise()",val:fe,set:se,w:"w-12"},{label:"Scale",val:ye,set:ie,w:"w-12"}].map(M=>l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:M.label}),l.jsx("input",{type:"text",value:M.val,onChange:Fe=>M.set(Fe.target.value),className:`${M.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},M.label))})]})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[l.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),l.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:O,onChange:M=>A(parseInt(M.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),l.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:O})]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),l.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[l.jsx("input",{type:"checkbox",checked:G,onChange:M=>V(M.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[l.jsx("input",{type:"checkbox",checked:L,onChange:M=>F(M.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),l.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[l.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${w?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:w&&l.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("input",{type:"checkbox",checked:w,onChange:M=>P(M.target.checked),className:"hidden"}),l.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[l.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${j?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:j&&l.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("input",{type:"checkbox",checked:j,onChange:M=>k(M.target.checked),className:"hidden"}),l.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),l.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsxs("button",{onClick:()=>E(!R),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${R?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${R?"bg-cyan-400":"bg-gray-400"}`})," H"]}),l.jsxs("button",{onClick:()=>B(!T),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${T?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${R?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),l.jsxs("div",{className:"ml-auto flex gap-2",children:[l.jsx("button",{onClick:()=>ur(!St),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${St?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),l.jsx("button",{onClick:()=>cr(!dt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${dt?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[l.jsx("button",{onClick:hr,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",l.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[l.jsx("input",{type:"text",value:b,onChange:M=>S(M.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),l.jsx("span",{className:"px-2 text-gray-400",children:"to"}),l.jsx("input",{type:"text",value:v,onChange:M=>y(M.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),l.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:l.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),Ce&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),p&&p.length>1&&l.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",ze," / ",p.length]})]}),et?l.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:et}):l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[l.jsx("div",{className:"flex-1 relative z-10",onMouseDown:pn,onMouseMove:an,onMouseUp:or,style:{cursor:$r?"col-resize":"crosshair"},children:l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:Or,margin:{top:10,right:10,bottom:20,left:0},children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),l.jsx(ja,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),l.jsx(_a,{scale:"log",domain:[Math.pow(10,parseFloat(b)),Math.pow(10,parseFloat(v))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:M=>Number(M).toExponential(0),width:45}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:M=>[Number(M).toExponential(3),""],labelFormatter:M=>`Freq: ${Number(M).toFixed(4)}`}),l.jsx(qi,{wrapperStyle:{fontSize:"10px"}}),l.jsx(_n,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(M=>{if(m!==-1&&m!==M)return[];const Fe=`c${M}_h`,pt=`c${M}_v`,Wt=en[`c${M}`],Lt=[];return R&&Lt.push(l.jsx(_n,{type:"linear",dataKey:Fe,name:`${Ue[M]} (H)`,stroke:Wt,strokeWidth:1,dot:!1,isAnimationActive:!1},`${M}_h`)),T&&Lt.push(l.jsx(_n,{type:"linear",dataKey:pt,name:`${Ue[M]} (V)`,stroke:Wt,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${M}_v`)),Lt}),jt&&l.jsx(fd,{x1:jt[0],x2:jt[1],fill:"#8884d8",fillOpacity:.15})]})})}),sn&&jt&&l.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[l.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",jt[0].toFixed(3),"-",jt[1].toFixed(3)]}),Object.entries(sn.stats).map(([M,Fe])=>l.jsxs("div",{className:"flex justify-between gap-4",children:[l.jsxs("span",{className:"text-slate-400",children:[M,":"]}),l.jsx("span",{className:"font-bold text-cyan-400",children:Fe.toFixed(5)})]},M))]})]})]}),St&&l.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[l.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("input",{type:"number",step:"0.01",value:X,onChange:M=>le(M.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",step:"0.01",value:he,onChange:M=>oe(M.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),l.jsx("button",{onClick:nn,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),l.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(M=>{const Fe=Ft[M];if(!Fe)return null;const pt=en[`c${M}`];return l.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[l.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:pt},children:[Ue[M]," ",l.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Fe.count," pts)"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[l.jsxs("div",{children:["H: ",Fe.h.toExponential(3)]}),l.jsxs("div",{children:["V: ",Fe.v.toExponential(3)]})]})]},M)})})]}),dt&&l.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),l.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[l.jsx("div",{}),l.jsx("button",{onClick:()=>nr(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>nr(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>nr(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>nr(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[l.jsx("button",{onClick:()=>ar(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),l.jsx("button",{onClick:()=>ar(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),l.jsx("button",{onClick:()=>ar(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),l.jsx("button",{onClick:()=>ar(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),l.jsx(Ore,{isOpen:je,onClose:()=>Se(!1),rawImageData:n,roi:a,selectedChannel:m===-1?0:m,channelName:m===-1?"Red (Default)":Ue[m],zIndex:s?s+2:102,onFocus:c})]}):null},Ere=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:c,initialInternalState:u,onUpdateState:f})=>{const[d,p]=C.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[m,x]=C.useState((u==null?void 0:u.blackLevel)??0),[b,S]=C.useState((u==null?void 0:u.whiteLevel)??16383),[v,y]=C.useState(null),[w,P]=C.useState(!1),[j,k]=C.useState(null),[O,A]=C.useState(c||{x:150,y:150}),[R,E]=C.useState(!1),T=C.useRef({x:0,y:0});C.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:m,whiteLevel:b})},[d,m,b]),C.useEffect(()=>{if(e&&n&&!u){const L=n.blackLevels?Math.floor(n.blackLevels[1]):0;x(L),S(n.whiteLevel||16383),y(null)}},[e,n]);const B=()=>{if(!n||!a)return;k(null),P(!0);const F=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const H=KA(n.data,n.width,n.height,a,F,m,b);H?y(H):(k("No data found in selection with current filters."),y(null))}catch(H){console.error("Analysis failed:",H),k(H.message||"Analysis error")}finally{P(!1)}},50)},G=(L,F,H)=>{s&&s(),!(H.closest("button")||H.closest("input")||H.closest("select"))&&(E(!0),T.current={x:L-O.x,y:F-O.y})},V=L=>{G(L.clientX,L.clientY,L.target)},z=L=>{const F=L.touches[0];G(F.clientX,F.clientY,L.target)};if(C.useEffect(()=>{const L=H=>{if(R){const W="touches"in H?H.touches[0].clientX:H.clientX,J="touches"in H?H.touches[0].clientY:H.clientY;A({x:W-T.current.x,y:J-T.current.y})}},F=()=>E(!1);return R&&(window.addEventListener("mousemove",L),window.addEventListener("mouseup",F),window.addEventListener("touchmove",L,{passive:!1}),window.addEventListener("touchend",F)),()=>{window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",F),window.removeEventListener("touchmove",L),window.removeEventListener("touchend",F)}},[R]),!e)return null;const D=i?["B","G1","G2","R"]:["R","G1","G2","B"];return l.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:O.x,top:O.y,zIndex:o??100},onMouseDownCapture:s,children:[l.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${R?"cursor-grabbing":"cursor-grab"}`,onMouseDown:V,onTouchStart:z,children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),l.jsxs("div",{className:"flex items-center gap-1",children:[r&&l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),l.jsx("select",{value:d,onChange:L=>p(L.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:D.map(L=>l.jsx("option",{value:L,children:L},L))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),l.jsx("input",{type:"number",value:m,onChange:L=>x(Number(L.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),l.jsx("input",{type:"number",value:b,onChange:L=>S(Number(L.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),l.jsx("button",{onClick:B,disabled:w,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:w?"Analyzing...":"Run Analysis"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[j&&l.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:j}),!v&&!w&&!j&&l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:l.jsx("p",{children:"Configure parameters and click Run Analysis"})}),v&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[l.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.uniqueCount})]}),l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[l.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.diffCount})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[l.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),l.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(v.stepCounts).sort((L,F)=>parseFloat(L[0])-parseFloat(F[0])).map(([L,F])=>l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",L,":"]}),l.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(F)})]},L))})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[l.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),l.jsx("div",{className:"relative z-10 w-full h-full",children:l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:v.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),l.jsx(ja,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),l.jsx(_a,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:L=>`Val: ${L}`,formatter:L=>[L,"Step Size"]}),l.jsx(_n,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},$re=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:c})=>{const[u,f]=C.useState("cross"),[d,p]=C.useState("R"),[m,x]=C.useState("B"),[b,S]=C.useState("H"),[v,y]=C.useState(null),[w,P]=C.useState(!1),[j,k]=C.useState(0),[O,A]=C.useState(0),[R,E]=C.useState("single"),T=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},B=a?["B","G1","G2","R"]:["R","G1","G2","B"],G=async V=>{if(!r||!n)return;P(!0),E(V),k(0),y(null);let z=T[d],D=u==="cross"?T[m]:z,L=0,F=0;u==="self"&&(b==="H"?F=2:L=2),setTimeout(async()=>{try{let H={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(V==="single")H=vw(r.data,r.width,r.height,n,z,D,L,F);else if(c&&c.length>0)for(let W=0;W<c.length;W++){k(W+1);const J=await c[W].arrayBuffer(),Y=await hc(J),ne=vw(Y.data,Y.width,Y.height,n,z,D,L,F);H.sumCov+=ne.sumCov,H.sumVar1+=ne.sumVar1,H.sumVar2+=ne.sumVar2,H.n+=ne.n}A(H.n),y(WA(H))}catch(H){console.error("Pearson calculation failed",H),alert("Calculation error: "+H.message)}finally{P(!1)}},50)};return e?l.jsxs(Ss,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",l.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),l.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),l.jsx("select",{value:d,onChange:V=>p(V.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:B.map(V=>l.jsx("option",{value:V,children:V},V))})]}),l.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),l.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?l.jsx("select",{value:m,onChange:V=>x(V.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:B.map(V=>l.jsx("option",{value:V,children:V},V))}):l.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[l.jsx("button",{onClick:()=>S("H"),className:`flex-1 text-[9px] font-bold rounded ${b==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),l.jsx("button",{onClick:()=>S("V"),className:`flex-1 text-[9px] font-bold rounded ${b==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[l.jsx("button",{onClick:()=>G("single"),disabled:w,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:w&&R==="single"?"Calculating...":"Calc Current Frame"}),c&&c.length>0&&l.jsxs("button",{onClick:()=>G("stack"),disabled:w,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[l.jsx("span",{children:"Calc Stack Concatenated"}),w&&R==="stack"&&l.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",j," / ",c.length]})]})]}),v!==null&&l.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${b})`," r"]}),l.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:v.toFixed(5)}),l.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",O.toLocaleString()," pairs"]}),l.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(v)>.5?l.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(v)>.1?l.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):l.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),l.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${b==="V"?"+2":""}, c${b==="H"?"+2":""}) in the same channel.`})]}):null},Rre=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],Dre=["5","9","0","8","2","1","4","7","3","6"],d3=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:Dre[r]}).join(""),Ire=({isOpen:e,onClose:t})=>{const[r,n]=C.useState({pv:"--",uv:"--"});return C.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[l.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:l.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-bold mr-2",children:"about:"}),l.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),l.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Rre.map(a=>l.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),l.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),l.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),l.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),l.jsx("div",{className:"flex justify-end mt-4",children:l.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:l.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[l.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:d3(r.pv)}),l.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:d3(r.uv)})]})})})]})]})}):null},Lre=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=C.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(p,m)=>{if(typeof m=="bigint")return m.toString()+"n";if(typeof m=="object"&&m!==null){if(d.has(m))return"[Circular]";if(d.add(m),ArrayBuffer.isView(m))return`[${m.constructor.name}]`}return m})}catch{return"[Unable to serialize object]"}},c=C.useMemo(()=>{if(!r)return[];const f=[],d=(p,m=0)=>{if(m>5)return"...";if(p==null)return String(p);if(p instanceof Date)return p.toLocaleString();if(typeof p=="number")return p.toString();if(typeof p=="string")return p;if(typeof p=="bigint")return p.toString()+"n";if(ArrayBuffer.isView(p))return`<${p.constructor.name} len=${p.length} bytes=${p.byteLength}>`;if(p instanceof ArrayBuffer)return`<ArrayBuffer bytes=${p.byteLength}>`;if(typeof p=="object"){if(Array.isArray(p))return p.length===0?"[]":p.length>20?`[${p.slice(0,10).map(S=>typeof S=="number"?S.toFixed(2):d(S,m+1)).join(", ")}, ... (+${p.length-10} more)]`:`[${p.map(b=>typeof b=="number"?Number.isInteger(b)?b:b.toFixed(4):d(b,m+1)).join(", ")}]`;try{const x=Object.keys(p);return x.length>5?`{Object with ${x.length} keys}`:s(p)}catch{return"<Complex Object>"}}return String(p)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(m=>{if(m==="MakerNote"||m==="UserComment"||m.includes("Strip")||m.includes("Offset")){f.push({key:m,value:"<Binary/Internal Data>"});return}const x=r[m];f.push({key:m,value:d(x)})})}catch(p){console.error("Error processing EXIF data:",p),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=c.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{className:"overflow-hidden",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&l.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:l.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:l.jsxs("div",{className:"relative",children:[l.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),l.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?l.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),l.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[l.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),l.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):l.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:l.jsxs("p",{children:['No tags found matching "',i,'"']})})}),l.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:l.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},Bre=100,Vm=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},h3=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=C.useRef(null),s=C.useRef(null),c=C.useCallback(y=>{const w=i?Math.max(1e-6,e):e,P=i?Math.max(w*1.0001,t):t,j=Math.max(w,Math.min(P,y));if(i){const k=Math.log10(w),O=Math.log10(P);return(Math.log10(j)-k)/(O-k)}return(j-w)/(P-w)},[e,t,i]),u=C.useCallback(y=>{const w=i?Math.max(1e-6,e):e,P=i?Math.max(w*1.0001,t):t;if(i){const j=Math.log10(w),k=Math.log10(P);return Math.pow(10,j+y*(k-j))}return w+y*(P-w)},[e,t,i]),f=(y,w)=>{y.preventDefault(),y.stopPropagation(),s.current=w;const P=k=>{if(!s.current||!o.current)return;const O=o.current.getBoundingClientRect();let A=0;a?A=(O.bottom-k.clientY)/O.height:A=(k.clientX-O.left)/O.width,A=Math.max(0,Math.min(1,A));const R=u(A);if(s.current==="min"){const E=r[1];n([Math.min(R,E),E])}else{const E=r[0];n([E,Math.max(R,E)])}},j=()=>{s.current=null,window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",j)};window.addEventListener("mousemove",P),window.addEventListener("mouseup",j)},d=c(r[0])*100,p=c(r[1])*100,m=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},x=a?{left:"50%",bottom:`${d}%`,height:`${p-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${p-d}%`,height:"4px",transform:"translateY(-50%)"},b="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",S=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},v=a?{left:"50%",bottom:`${p}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${p}%`,transform:"translate(-50%, -50%)"};return l.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[l.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:m}),l.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:x}),l.jsx("div",{className:b,style:S,onMouseDown:y=>f(y,"min")}),l.jsx("div",{className:b,style:v,onMouseDown:y=>f(y,"max")})]})},Fre=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:c,initialISO:u})=>{const[f,d]=C.useState("Noise"),[p,m]=C.useState(!0),[x,b]=C.useState(null),[S,v]=C.useState("default"),[y,w]=C.useState(!1),[P,j]=C.useState(!1),[k,O]=C.useState({R:!0,G1:!0,G2:!0,B:!0}),[A,R]=C.useState(""),[E,T]=C.useState(""),[B,G]=C.useState(""),[V,z]=C.useState(""),[D,L]=C.useState("10"),[F,H]=C.useState(""),[W,J]=C.useState("0 0 0 0"),[Y,ne]=C.useState("0 0 0 0"),[te,fe]=C.useState(!1),[se,ye]=C.useState(null),[ie,X]=C.useState(!1),[le,he]=C.useState(0),[oe,je]=C.useState([]),[Se,me]=C.useState(""),[ge,Ce]=C.useState(""),De=()=>{const re=parseFloat(Se),ve=parseFloat(ge);!isNaN(re)&&!isNaN(ve)&&(je([...oe,{id:Date.now(),x:re,y:ve}]),me(""),Ce(""))},[ze,Be]=C.useState(()=>localStorage.getItem("ptc_tester_name")||""),[et,yt]=C.useState(""),[dt,cr]=C.useState("");C.useEffect(()=>{localStorage.setItem("ptc_tester_name",ze)},[ze]);const St=C.useRef(te),ur=C.useRef(ie),jt=C.useRef(le);C.useEffect(()=>{St.current=te,ur.current=ie,jt.current=le},[te,ie,le]);const[fr,$r]=C.useState(null),[Tt,_r]=C.useState({min:.01,max:90}),[Qe,_t]=C.useState({readNoise:0,gain:1,prnu:.5}),[Qt,Bt]=C.useState(2e6),yr=C.useRef(Qe),rr=C.useRef(Tt),Jr=C.useRef(Qt);C.useEffect(()=>{yr.current=Qe,rr.current=Tt,Jr.current=Qt},[Qe,Tt,Qt]);const[Ft,hn]=C.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[Pt,en]=C.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[Ue,nn]=C.useState(!1),[Or,pn]=C.useState([]),[an,or]=C.useState(null),[Lr,gn]=C.useState(""),on=C.useMemo(()=>n?n.join(","):"",[n]);C.useEffect(()=>{if(e){let re="0 0 0 0";o&&o.blackLevel?re=o.blackLevel.join(" "):re=n&&n.length===4?n.join(" "):"0 0 0 0",J(re),ne(re);let ve="";if(o&&o.height?ve=o.height.toString():a&&(ve=a.toString()),H(ve),ve){const Z=parseFloat(ve);!isNaN(Z)&&Z>0?L((2309.4/Z).toFixed(2)):L("10")}else L("10");ye(null),fe(!1),X(!1),he(0),pn([]),or(null),_r({min:.01,max:90}),hn({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const we={readNoise:0,gain:0,prnu:0};_t(we),yr.current=we,R(""),T(""),G(""),z(""),d("Noise"),$r(null),Bt(2e6),gn(""),j(!1),je([]),yt(Z=>Z.trim()===""&&c?c:Z),cr(Z=>Z.trim()===""&&u?u:Z)}},[e,on,o,a,r,c,u]);const sn=re=>{if(re.key==="Enter"){const ve=parseFloat(F);if(!isNaN(ve)&&ve>0){const we=(2309.4/ve).toFixed(2);L(we)}re.target.blur()}},hr=C.useMemo(()=>{let ve=Y.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(ve.length===1&&(ve=[ve[0],ve[0],ve[0],ve[0]]);ve.length<4;)ve.push(0);const we=Z=>{switch(Z){case"R":return ve[0];case"G1":return ve[1];case"G2":return ve[2];case"B":return ve[3];default:return 0}};return r.map(Z=>{const Oe=Z.mean-we(Z.channel),it=Z.std>0?Oe/Z.std:0;return{...Z,x:Oe,std:Z.std,snr:it}}).filter(Z=>Z.std>0)},[r,Y]),nr=C.useMemo(()=>{const re=Qe.readNoise,ve=re*re;return hr.map(we=>{let Z=0;if(f==="Noise")Z=we.std;else if(f==="SNR")Z=we.snr;else if(f==="Linear"){const it=we.std*we.std-ve;Z=we.x!==0?it/we.x:0}return{...we,y:Z}})},[hr,f,Qe.readNoise]),ar=C.useMemo(()=>{if(hr.length===0)return"G1";const re={R:0,G1:0,G2:0,B:0},ve={R:0,G1:0,G2:0,B:0};for(const Oe of hr)re[Oe.channel]+=Oe.x,ve[Oe.channel]++;let we="G1",Z=-1/0;return Object.keys(re).forEach(Oe=>{const it=ve[Oe],nt=it>0?re[Oe]/it:-1/0;nt>Z&&(Z=nt,we=Oe)}),we},[hr]),M=C.useCallback(()=>{let re=1/0,ve=-1/0;if(hr.length===0)return{min:.1,max:1};for(let we=0;we<hr.length;we++){const Z=hr[we].x;p&&Z<=0||(Z<re&&(re=Z),Z>ve&&(ve=Z))}return re===1/0?{min:.1,max:1}:{min:re,max:ve}},[hr,p]),Fe=C.useCallback(()=>{let re=1/0,ve=-1/0;if(nr.length===0)return{min:.1,max:1};for(let we=0;we<nr.length;we++){const Z=nr[we].y;p&&Z<=0||(Z<re&&(re=Z),Z>ve&&(ve=Z))}return re===1/0?{min:.1,max:1}:{min:re*.9,max:ve*1.1}},[nr,p]),{min:pt,max:Wt}=M(),{min:Lt,max:wt}=Fe(),vr=Wt*(Tt.min/100),Xt=Wt*(Tt.max/100),Je=C.useMemo(()=>{if(!p&&nr.length===0)return{shot:[],read:[],prnu:[],total:[]};const re=A?parseFloat(A):pt,ve=E?parseFloat(E):Wt,we=100,Z=Math.max(.1,re),Oe=Math.max(1,ve);if(Z>=Oe)return{shot:[],read:[],prnu:[],total:[]};const it=Math.log10(Z),$t=(Math.log10(Oe)-it)/we,vt=Qe.readNoise,ht=Qe.gain>0?Qe.gain:1,xr=Qe.prnu/100,Rt=[],sr=[],Fr=[],Pe=[];for(let $e=0;$e<=we;$e++){const at=Math.pow(10,it+$e*$t);if(f==="Linear"){const q=1/ht,ke=xr*xr,ct=q+ke*at;Pe.push({x:at,y:ct}),Rt.push({x:at,y:q}),Fr.push({x:at,y:ke*at})}else{const q=vt,ke=Math.sqrt(at/ht),ct=xr*at,tt=Math.sqrt(q*q+ke*ke+ct*ct);f==="Noise"?(Rt.push({x:at,y:ke}),sr.push({x:at,y:q}),Fr.push({x:at,y:ct}),Pe.push({x:at,y:tt})):(ke>0&&Rt.push({x:at,y:at/ke}),q>0&&sr.push({x:at,y:at/q}),ct>0&&Fr.push({x:at,y:at/ct}),tt>0&&Pe.push({x:at,y:at/tt}))}}return{shot:Rt,read:sr,prnu:Fr,total:Pe}},[nr,p,A,E,Qe,f,pt,Wt]),bt=C.useMemo(()=>{if(f==="Linear")return[];const re=parseFloat(D);if(isNaN(re)||re<=0)return[];const ve=A?parseFloat(A):pt,we=E?parseFloat(E):Wt;return f==="SNR"?[{x:ve,y:re},{x:we,y:re}]:[{x:ve,y:ve/re},{x:we,y:we/re}]},[nr,D,f,A,E,pt,Wt]),kt=C.useCallback((re,ve)=>{if(!ve||ve.length===0)return null;const we=[...ve].sort((Z,Oe)=>Z.x-Oe.x);for(let Z=0;Z<we.length-1;Z++){const Oe=we[Z],it=we[Z+1];if(Oe.snr<=re&&it.snr>=re||Oe.snr>=re&&it.snr<=re){const nt=(re-Oe.snr)/(it.snr-Oe.snr);return Oe.x+nt*(it.x-Oe.x)}}return null},[]),Kt=C.useMemo(()=>{const re=hr,ve=1e3,we=Oe=>{if(Oe.length===0)return[];if(Oe.length<=ve)return Oe;const it=[...Oe].sort((vt,ht)=>vt.x-ht.x),nt=[],$t=it.length/ve;for(let vt=0;vt<ve;vt++){const ht=Math.floor(vt*$t),xr=Math.floor((vt+1)*$t),Rt=it.slice(ht,xr);if(Rt.length===0)continue;Rt.sort((Fr,Pe)=>Fr.std-Pe.std);const sr=Math.floor(Rt.length/2);nt.push(Rt[sr])}return nt},Z={R:[],G1:[],G2:[],B:[]};return re.forEach(Oe=>{Z[Oe.channel]&&Z[Oe.channel].push(Oe)}),{R:we(Z.R),G1:we(Z.G1),G2:we(Z.G2),B:we(Z.B)}},[hr]),pr=C.useMemo(()=>se&&Qe.gain?se*Qe.gain:null,[se,Qe.gain]),_e=C.useMemo(()=>{if(se===null||se===0)return null;const re=parseFloat(D);let ve=null;if(!isNaN(re)&&re>0){let nt=0,$t=0;if(["R","G1","G2","B"].forEach(vt=>{const ht=kt(re,Kt[vt]);ht!==null&&(nt+=ht,$t++)}),$t>0){const vt=nt/$t;ve=Math.log2(se/vt)}}const we=parseFloat(F);let Z=null,Oe=NaN;if(!isNaN(we)&&we>0){Oe=16e3/we;let nt=0,$t=0;if(["R","G1","G2","B"].forEach(vt=>{const ht=kt(Oe,Kt[vt]);ht!==null&&(nt+=ht,$t++)}),$t>0){const vt=nt/$t;Z=Math.log2(se/vt)}}let it=null;if(!isNaN(we)&&we>0){const nt=kt(Oe,Kt[ar]);nt!==null&&(it=Math.log2(se/nt))}return{manualDR:ve,ptpDR:Z,d55DR:it,manualTarget:re,ptpTarget:Oe,saturationSignal:se,dominantChannel:ar}},[se,D,F,Kt,kt,ar]),Hr=C.useMemo(()=>{if(f==="Linear"||!_e||!_e.ptpTarget||isNaN(_e.ptpTarget))return[];const re=_e.ptpTarget,ve=A?parseFloat(A):pt,we=E?parseFloat(E):Wt;return f==="SNR"?[{x:ve,y:re},{x:we,y:re}]:[{x:ve,y:ve/re},{x:we,y:we/re}]},[f,_e,A,E,pt,Wt]),I=C.useCallback(()=>{const we=document.createElement("canvas");we.width=2048,we.height=1536;const Z=we.getContext("2d");if(!Z)return;const Oe=s==="dark",it=Oe?"#0f172a":"#ffffff",nt=Oe?"#ffffff":"#000000",$t=Oe?"#475569":"#cbd5e1",vt=Oe?"#1e293b":"#f1f5f9",ht=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};Z.fillStyle=it,Z.fillRect(0,0,2048,1536);let xr=A?parseFloat(A):pt,Rt=E?parseFloat(E):Wt,sr=B?parseFloat(B):Lt,Fr=V?parseFloat(V):wt;isNaN(xr)&&(xr=.1),isNaN(Rt)&&(Rt=1e4),isNaN(sr)&&(sr=.1),isNaN(Fr)&&(Fr=1e3);const Pe={top:80,right:80,bottom:100,left:120},$e=2048-Pe.left-Pe.right,at=1536-Pe.top-Pe.bottom,q=He=>{if(p){const It=Math.log10(Math.max(1e-9,xr)),Vt=Math.log10(Math.max(1e-9,Rt)),Mt=Math.log10(Math.max(1e-9,He));return Pe.left+(Mt-It)/(Vt-It)*$e}else return Pe.left+(He-xr)/(Rt-xr)*$e},ke=He=>{if(p){const It=Math.log10(Math.max(1e-9,sr)),Vt=Math.log10(Math.max(1e-9,Fr)),Mt=Math.log10(Math.max(1e-9,He));return Pe.top+at-(Mt-It)/(Vt-It)*at}else return Pe.top+at-(He-sr)/(Fr-sr)*at};if(Z.beginPath(),p){const He=(It,Vt,Mt)=>{const ta=Math.log10(Math.max(1e-9,It)),Cn=Math.log10(Math.max(1e-9,Vt)),Aa=Math.floor(ta),ei=Math.ceil(Cn);for(let Li=Aa;Li<=ei;Li++){const ti=Math.pow(10,Li);let zr=Mt?q(ti):ke(ti);(Mt?zr>=Pe.left-1&&zr<=Pe.left+$e+1:zr>=Pe.top-1&&zr<=Pe.top+at+1)&&(Z.lineWidth=1.5,Z.strokeStyle=$t,Z.beginPath(),Mt?(Z.moveTo(zr,Pe.top),Z.lineTo(zr,Pe.top+at)):(Z.moveTo(Pe.left,zr),Z.lineTo(Pe.left+$e,zr)),Z.stroke()),Z.lineWidth=.5,Z.strokeStyle=vt;for(let _s=2;_s<10;_s++){const ao=_s*ti;zr=Mt?q(ao):ke(ao),(Mt?zr>=Pe.left&&zr<=Pe.left+$e:zr>=Pe.top&&zr<=Pe.top+at)&&(Z.beginPath(),Mt?(Z.moveTo(zr,Pe.top),Z.lineTo(zr,Pe.top+at)):(Z.moveTo(Pe.left,zr),Z.lineTo(Pe.left+$e,zr)),Z.stroke())}}};He(xr,Rt,!0),He(sr,Fr,!1)}else{Z.strokeStyle=$t,Z.lineWidth=1;for(let He=0;He<=5;He++){const It=Pe.left+$e*He/5;Z.beginPath(),Z.moveTo(It,Pe.top),Z.lineTo(It,Pe.top+at),Z.stroke();const Vt=Pe.top+at*He/5;Z.beginPath(),Z.moveTo(Pe.left,Vt),Z.lineTo(Pe.left+$e,Vt),Z.stroke()}}Z.strokeStyle=nt,Z.lineWidth=2,Z.strokeRect(Pe.left,Pe.top,$e,at);const ct=(He,It,Vt)=>{He<Pe.left||He>Pe.left+$e||It<Pe.top||It>Pe.top+at||(Z.fillStyle=Vt,Z.fillRect(He-1.5,It-1.5,3,3))},tt=nr.filter(He=>!(p&&(He.x<=0||He.y<=0)));tt.forEach(He=>{k[He.channel]&&He.channel!==ar&&ct(q(He.x),ke(He.y),ht[He.channel])}),tt.forEach(He=>{k[He.channel]&&He.channel===ar&&ct(q(He.x),ke(He.y),ht[He.channel])}),oe.forEach(He=>{const It=q(He.x),Vt=ke(He.y);if(It<Pe.left||It>Pe.left+$e||Vt<Pe.top||Vt>Pe.top+at)return;Z.strokeStyle="#d946ef",Z.lineWidth=2.5;const Mt=6;Z.beginPath(),Z.moveTo(It-Mt,Vt-Mt),Z.lineTo(It+Mt,Vt+Mt),Z.moveTo(It+Mt,Vt-Mt),Z.lineTo(It-Mt,Vt+Mt),Z.stroke()});const Dt=(He,It,Vt=[])=>{if(He.length<2)return;Z.beginPath(),Z.strokeStyle=It,Z.lineWidth=3,Z.setLineDash(Vt);let Mt=!1;for(const ta of He){const Cn=q(ta.x),Aa=ke(ta.y);if(Cn<Pe.left-100||Cn>Pe.left+$e+100||Aa<Pe.top-100||Aa>Pe.top+at+100){Mt=!1;continue}Mt?Z.lineTo(Cn,Aa):(Z.moveTo(Cn,Aa),Mt=!0)}Z.stroke(),Z.setLineDash([])},Zt=Oe?"#ffffff":"#000000";if(Pt.shot&&Dt(Je.shot,"#94a3b8",[5,5]),Pt.read&&Dt(Je.read,"#f43f5e",[3,3]),Pt.prnu&&Dt(Je.prnu,"#f59e0b",[3,3]),Pt.total&&Dt(Je.total,Zt,[]),bt.length===2){const He="#6366f1";Dt(bt,He,[4,2]);const It=bt[1],Vt=ke(It.y);Vt>=Pe.top&&Vt<=Pe.top+at&&(Z.fillStyle=He,Z.font="bold 20px sans-serif",Z.textAlign="right",Z.textBaseline="bottom",Z.fillText(`M.Tgt=${D}`,Pe.left+$e-10,Vt-8))}if(Hr.length===2&&(_e!=null&&_e.ptpTarget)){const He="#10b981";Dt(Hr,He,[4,4]);const It=Hr[1],Vt=ke(It.y);if(Vt>=Pe.top&&Vt<=Pe.top+at){Z.fillStyle=He,Z.font="bold 20px sans-serif",Z.textAlign="right",Z.textBaseline="bottom";const Mt=_e.ptpTarget.toFixed(1),ta=bt.length===2?ke(bt[1].y):-100,Cn=Math.abs(Vt-ta)<25?25:0;Z.fillText(`PTP=${Mt}`,Pe.left+$e-10,Vt-8-Cn)}}if(Pt.fitRange||ie){const He=(It,Vt)=>{const Mt=q(It);Mt>=Pe.left&&Mt<=Pe.left+$e&&(Z.beginPath(),Z.strokeStyle=Vt,Z.lineWidth=2,Z.setLineDash([8,8]),Z.moveTo(Mt,Pe.top),Z.lineTo(Mt,Pe.top+at),Z.stroke(),Z.setLineDash([]))};He(vr,"#22d3ee"),He(Xt,"#22d3ee")}if(se){const He=q(se);He>=Pe.left&&He<=Pe.left+$e&&(Z.strokeStyle="#ef4444",Z.lineWidth=3,Z.setLineDash([10,10]),Z.beginPath(),Z.moveTo(He,Pe.top),Z.lineTo(He,Pe.top+at),Z.stroke(),Z.setLineDash([]),Z.fillStyle="#ef4444",Z.font="bold 24px sans-serif",Z.textAlign="center",Z.fillText("Sat",He,Pe.top-10))}Z.fillStyle=nt,Z.font="28px monospace",Z.textAlign="center",Z.fillText(xr.toExponential(1),Pe.left,Pe.top+at+40),Z.fillText(Rt.toExponential(1),Pe.left+$e,Pe.top+at+40),Z.fillText("Signal (DN)",Pe.left+$e/2,Pe.top+at+80),Z.textAlign="right",Z.textBaseline="middle",Z.fillText(sr.toExponential(1),Pe.left-20,Pe.top+at),Z.fillText(Fr.toExponential(1),Pe.left-20,Pe.top),Z.save(),Z.translate(Pe.left-80,Pe.top+at/2),Z.rotate(-Math.PI/2),Z.textAlign="center",Z.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),Z.restore(),Z.save(),Z.translate(2048/2,1536/2),Z.rotate(-Math.PI/6),Z.textAlign="center",Z.textBaseline="middle",Z.fillStyle=Oe?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",Z.font="bold 150px sans-serif",Z.fillText(" y-g-jiang.github.io",0,0),Z.restore(),Z.fillStyle=nt,Z.font="bold 36px sans-serif",Z.textAlign="left",Z.textBaseline="top",Z.fillText(`PTC Export: ${f} Mode`,Pe.left,20),Z.font="24px sans-serif",Z.fillStyle=Oe?"#94a3b8":"#64748b",Z.fillText(`Points: ${nr.length} | Sat Channel: ${ar}`,Pe.left,65);const ln=Pe.left+30,yn=Pe.top+30,Pn=70,ua=He=>{if(!se||He<=0)return"--";const It=Qe.readNoise,Vt=Qe.gain,Mt=Qe.prnu/100;if(Vt<=0)return"--";const ta=He*He,Cn=It*It,Aa=1-ta*Mt*Mt,ei=-(ta/Vt),Li=-(ta*Cn);let ti=0;if(Math.abs(Aa)<1e-8)Math.abs(ei)>1e-8&&(ti=-Li/ei);else{const zr=ei*ei-4*Aa*Li;zr>=0&&(ti=(-ei+Math.sqrt(zr))/(2*Aa))}return ti>0?Math.log2(se/ti).toFixed(2)+" EV":"--"},Ga=_e!=null&&_e.ptpTarget&&!isNaN(_e.ptpTarget)?ua(_e.ptpTarget):"--",Oa=D?ua(parseFloat(D)):"--";Z.font="bold 48px monospace",Z.textAlign="left",Z.textBaseline="top",Z.shadowColor=Oe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",Z.shadowBlur=4,Z.shadowOffsetX=1,Z.shadowOffsetY=1;const gr=(He,It,Vt,Mt)=>{const ta=yn+Vt*Pn;Z.fillStyle=nt,Z.fillText(He,ln,ta);const Cn=Z.measureText(He).width;Z.fillStyle=Mt||nt,Z.fillText(It,ln+Cn,ta)},xi=Ft.read,Ma=parseFloat(Ft.gain).toFixed(3),Sl=parseFloat(Ft.prnu).toFixed(2)+"%";let Ja=`M.DR@SNR${D}: `;const Ii=parseFloat(F);if(!isNaN(Ii)&&Ii>0){const He=(2309.4/Ii).toFixed(2);Math.abs(parseFloat(D)-parseFloat(He))<.05&&(Ja="8mpSNR=1 DR: ")}gr("Tester: ",ze||"N/A",0),gr("Model : ",et||"Unknown",1),gr("ISO   : ",dt||"N/A",2),gr("RN/FPN: ",xi,3,"#f43f5e"),gr("KADC  : ",Ma,4,"#06b6d4"),gr("PRNU  : ",Sl,5,"#f59e0b"),gr("PTP DR: ",_e!=null&&_e.ptpDR?_e.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),gr("D55 DR: ",_e!=null&&_e.d55DR?_e.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),gr("FWC   : ",pr?pr>1e4?(pr/1e3).toFixed(1)+"k":Math.round(pr).toString():"--",8,"#f97316"),gr(Ja,_e!=null&&_e.manualDR?_e.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),gr("PTCFitDR(PTP): ",Ga,10,"#10b981"),gr("PTCFitDR(Man): ",Oa,11,"#06b6d4"),Z.save(),Z.textAlign="right",Z.textBaseline="bottom",Z.fillStyle="#3b82f6",Z.font="bold 80px sans-serif",Z.shadowColor=Oe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",Z.shadowBlur=4,Z.shadowOffsetX=2,Z.shadowOffsetY=2;const Gr=1988,js=1476,iu=90;Z.fillText("Online",Gr,js),Z.fillText("Jiangtherapee",Gr,js-iu),Z.restore();const Eo=document.createElement("a");Eo.download=`ptc_complete_${f}_${Date.now()}.jpg`,Eo.href=we.toDataURL("image/jpeg",.9),Eo.click()},[nr,ar,k,A,E,B,V,pt,Wt,Lt,wt,p,s,f,se,i,Pt,Je,vr,Xt,Tt,ie,ze,et,dt,_e,pr,D,bt,Hr,Ft,F,oe]),be=C.useMemo(()=>{let re=nr;if(p&&(re=re.filter(Oe=>Oe.y>0&&Oe.x>0)),S==="top3"){const Oe=[...re].sort((nt,$t)=>$t.x-nt.x),it=Math.max(50,Math.ceil(Oe.length*.03));re=Oe.slice(0,it)}const ve={R:[],G1:[],G2:[],B:[]};if(re.forEach(Oe=>{ve[Oe.channel]&&ve[Oe.channel].push(Oe)}),S==="raw")return ve;const we=S==="top3"?500:Bre,Z=Oe=>{if(Oe.length<=we)return Oe;const it=[...Oe].sort((vt,ht)=>vt.x-ht.x),nt=[],$t=it.length/we;for(let vt=0;vt<we;vt++){const ht=Math.floor(vt*$t),xr=Math.floor((vt+1)*$t),Rt=it.slice(ht,xr);if(Rt.length===0)continue;Rt.sort((Fr,Pe)=>Fr.y-Pe.y);const sr=Math.floor(Rt.length/2);nt.push(Rt[sr])}return nt};return{R:Z(ve.R),G1:Z(ve.G1),G2:Z(ve.G2),B:Z(ve.B)}},[nr,S,p]),Ne=C.useMemo(()=>{if(hr.length<5)return[];const re=hr.filter(we=>we.channel===ar);return[...re.length>20?re:hr].sort((we,Z)=>we.x-Z.x).map(we=>({mean:we.x,std:we.std}))},[hr,ar]),Ct=re=>{const ve=re.length;if(ve===0)return[];const we=re.reduce(($e,at)=>$e+at,0)/ve,Z=re.reduce(($e,at)=>$e+Math.pow(at-we,2),0)/(ve-1||1),Oe=Math.sqrt(Z);if(Oe===0)return[{x:we-.001,density:0},{x:we,density:1},{x:we+.001,density:0}];const it=1.06*Oe*Math.pow(ve,-.2),nt=Math.min(...re),$t=Math.max(...re),vt=($t-nt)*.2||nt*.1,ht=Math.max(0,nt-vt),xr=$t+vt,Rt=100,sr=(xr-ht)/(Rt-1),Fr=$e=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*$e*$e),Pe=[];for(let $e=0;$e<Rt;$e++){const at=ht+$e*sr;let q=0;for(let ke=0;ke<ve;ke++)q+=Fr((at-re[ke])/it);q/=ve*it,Pe.push({x:at,density:q})}return Pe},Ve=C.useCallback((re,ve,we,Z)=>{if(re.length<5)return{gain:0,prnu:0};const Oe=re[re.length-1].mean,it=Oe*(we.min/100),nt=Oe*(we.max/100),$t=re.filter(tt=>tt.mean>=it&&tt.mean<=nt);if($t.length<5)return{gain:0,prnu:0};$r({nPoints:$t.length});const vt=ve*ve,ht=[],xr=[];if($t.forEach(tt=>{const Zt=tt.std*tt.std-vt;if(tt.mean>1&&Zt>0){const ln=tt.mean,yn=Zt/tt.mean;ht.push({x:ln,y:yn}),xr.push(tt.mean/Zt)}}),ht.length<5)return{gain:0,prnu:0};const Rt=[],sr=ht.length,Fr=Z,Pe=sr*(sr-1)/2;if(Pe<=Fr)for(let tt=0;tt<sr;tt++)for(let Dt=tt+1;Dt<sr;Dt++){const Zt=ht[Dt].x-ht[tt].x;Math.abs(Zt)>1e-5&&Rt.push((ht[Dt].y-ht[tt].y)/Zt)}else{const tt=Math.max(1,Math.floor(Pe/Fr));for(let Dt=0;Dt<sr;Dt++)for(let Zt=Dt+1;Zt<sr;Zt+=tt){const ln=ht[Zt].x-ht[Dt].x;Math.abs(ln)>1e-5&&Rt.push((ht[Zt].y-ht[Dt].y)/ln)}}const $e=Vm(Rt),at=ht.map(tt=>tt.y-$e*tt.x),q=Vm(at);let ke=0,ct=0;if(q>1e-6?ke=1/q:ke=Vm(xr),$e>0&&(ct=Math.sqrt($e)*100),xr.length>0){const tt=Ct(xr);pn(tt),or(ke)}else pn([]);return{gain:ke,prnu:ct}},[]),lt=C.useCallback(re=>{let ve=re.read??yr.current.readNoise;const we=re.gRange??rr.current,Z=Jr.current;if((re.read!==void 0||re.gRange!==void 0)&&re.gain===void 0&&re.prnu===void 0&&Ne.length>0&&ve>=0)j(!0),setTimeout(()=>{const it=Ve(Ne,ve,we,Z);let nt=yr.current.gain,$t=yr.current.prnu;it.gain>0&&(nt=it.gain,$t=it.prnu),_t({readNoise:ve,gain:nt,prnu:$t}),re.gRange!==void 0&&_r(re.gRange),hn(vt=>{var ht,xr;return{...vt,read:ve.toString(),gain:nt>0?nt.toFixed(3):"0",prnu:$t.toFixed(2),rangeMin:(((ht=re.gRange)==null?void 0:ht.min)??vt.rangeMin).toString(),rangeMax:(((xr=re.gRange)==null?void 0:xr.max)??vt.rangeMax).toString()}}),j(!1)},50);else{let it=re.gain!==void 0?re.gain:yr.current.gain,nt=re.prnu!==void 0?re.prnu:yr.current.prnu;_t({readNoise:ve,gain:it,prnu:nt}),re.gRange!==void 0&&_r(re.gRange),hn($t=>{var vt,ht;return{...$t,read:ve.toString(),gain:it>0?it.toFixed(3):"0",prnu:nt.toFixed(2),rangeMin:(((vt=re.gRange)==null?void 0:vt.min)??$t.rangeMin).toString(),rangeMax:(((ht=re.gRange)==null?void 0:ht.max)??$t.rangeMax).toString()}})}},[Ne,Ve]),ft=`${Y}-${r.length}`;C.useEffect(()=>{if(!e||!r||r.length===0)return;const re=be[ar];if(!re||re.length===0||Lr===ft)return;O({R:ar==="R",G1:ar==="G1",G2:ar==="G2",B:ar==="B"});const ve=[...re].sort((it,nt)=>it.x-nt.x);let we=0;ve.length>0&&(we=ve[0].std);const Z=hr.filter(it=>it.channel===ar);let Oe=-1/0;for(const it of Z)it.x>Oe&&(Oe=it.x);Oe!==-1/0&&ye(Oe),lt({read:we}),gn(ft)},[e,r,Lr,ft,be,ar,lt,hr]);const qt=(re,ve)=>{hn(we=>({...we,[re]:ve}))},Xr=re=>{let ve=parseFloat(Ft[re]);isNaN(ve)||ve<0||lt({[re]:ve})},Br=()=>{ne(W),gn("")},Yt=()=>{const re=parseFloat(Ft.rangeMin),ve=parseFloat(Ft.rangeMax);!isNaN(re)&&!isNaN(ve)&&re<ve&&re>=0&&ve<=100&&lt({gRange:{min:re,max:ve}})},En=(re,ve)=>{re.key==="Enter"&&(ve==="rangeMin"||ve==="rangeMax"?Yt():Xr(ve),re.target.blur())};C.useEffect(()=>{e&&Ne.length>0&&lt({})},[e,Qt,Ne]);const mn=re=>{O(ve=>({...ve,[re]:!ve[re]}))},Kn=()=>{v(re=>re==="top3"?"default":"top3")},Et=()=>{S==="raw"?v("default"):w(!0)},Gt=()=>{w(!1),v("raw")},Rr=(re,ve)=>{const we=parseFloat(re),Z=parseFloat(ve);let Oe=isNaN(we)?"auto":we,it=isNaN(Z)?"auto":Z;return p&&typeof Oe=="number"&&Oe<=0&&(Oe="auto"),[Oe,it]},Le=re=>{if(!re||!re.payload)return;const ve=re.payload;if(b(ve),St.current&&(ye(ve.x),fe(!1)),ur.current){const we=rr.current.min,Z=rr.current.max,{max:Oe}=M();if(Oe<=0)return;const it=Math.max(0,Math.min(100,ve.x/Oe*100));if(jt.current===1){const nt=Math.min(it,Z-.5);lt({gRange:{min:nt,max:Z}}),he(2)}else if(jt.current===2){const nt=Math.max(it,we+.5);lt({gRange:{min:we,max:nt}}),he(0),X(!1)}}},er=C.useCallback(re=>{const{cx:ve,cy:we,fill:Z}=re;return l.jsx("circle",{cx:ve,cy:we,r:3,fill:Z,stroke:"none",style:{cursor:"pointer"}})},[]),Kr=({active:re,payload:ve})=>{if(re&&ve&&ve.length){const we=ve[0].payload;return l.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[l.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:we.channel}),l.jsxs("div",{children:["Signal: ",we.x.toFixed(2)]}),l.jsxs("div",{children:[f,": ",we.y.toFixed(4)]}),we.row!==void 0&&we.col!==void 0&&!isNaN(we.row)&&!isNaN(we.col)&&l.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",we.row,", Col ",we.col]}),we.filename&&l.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:we.filename,children:we.filename})]})}return null},la=re=>{d(re),re==="Linear"&&m(!1)};if(!e)return null;const ca=s==="dark"?"#ffffff":"#000000";let Mr=f;f==="Linear"&&(Mr="(Var - RN) / Mean");const Qa=W!==Y;return l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:re=>{re.stopPropagation()},children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:re=>re.stopPropagation(),children:[l.jsx(ss,{isOpen:y,onClose:()=>w(!1),onConfirm:Gt,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),x&&l.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[l.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),l.jsx("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:l.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),l.jsx("span",{className:"font-bold",children:x.channel}),l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),l.jsx("span",{children:x.x.toFixed(4)}),l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),l.jsx("span",{children:x.std.toFixed(4)}),l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),l.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(x.x/x.std).toFixed(2)})]})})]}),Ue&&l.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[l.jsx("button",{onClick:()=>nn(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),l.jsxs("div",{className:"mb-4 text-center",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",l.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:an==null?void 0:an.toFixed(4)}),l.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",Or.length>0?"Density Curve Generated":"No Data"]})]}),l.jsx("div",{className:"flex-1 min-h-0",children:Or.length>0?l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(NN,{data:Or,margin:{top:10,right:30,left:0,bottom:20},children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),l.jsx(ja,{dataKey:"x",tickFormatter:re=>re.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),l.jsx(_a,{tick:{fill:"#9ca3af",fontSize:10}}),l.jsx(Un,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),l.jsx(fi,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),an!==null&&l.jsx(Zo,{x:an,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):l.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),l.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",l.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("button",{onClick:I,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),l.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>la("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),l.jsx("button",{onClick:()=>la("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),l.jsx("button",{onClick:()=>la("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),l.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:p,onChange:re=>m(re.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[l.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),l.jsx("input",{type:"number",placeholder:"Min",value:A,onChange:re=>R(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",placeholder:"Max",value:E,onChange:re=>T(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),l.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),l.jsx("input",{type:"number",placeholder:"Min",value:B,onChange:re=>G(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",placeholder:"Max",value:V,onChange:re=>z(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),l.jsx("button",{onClick:()=>{R(""),T(""),G(""),z("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),l.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>mn("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),l.jsx("button",{onClick:()=>mn("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),l.jsx("button",{onClick:()=>mn("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),l.jsx("button",{onClick:()=>mn("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[l.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[l.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),l.jsx("input",{type:"text",value:W,onChange:re=>J(re.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),l.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),l.jsx("button",{onClick:()=>{X(!ie),he(ie?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${ie?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:ie?le===1?"Pick Min":"Pick Max":"Select"})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[l.jsx("input",{type:"number",step:"0.1",value:Ft.rangeMin,onChange:re=>qt("rangeMin",re.target.value),onBlur:Yt,onKeyDown:re=>En(re,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",step:"0.1",value:Ft.rangeMax,onChange:re=>qt("rangeMax",re.target.value),onBlur:Yt,onKeyDown:re=>En(re,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),l.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[l.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),l.jsx("input",{type:"number",value:F,onChange:re=>H(re.target.value),onKeyDown:sn,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),l.jsx("input",{type:"number",value:D,onChange:re=>L(re.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[l.jsx("button",{onClick:()=>{fe(!te),se&&ye(null)},disabled:ie,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${te?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:te?"Pick Point":"Select Linear Limit"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:Kn,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${S==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),l.jsx("button",{onClick:Et,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${S==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[l.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:ze,onChange:re=>Be(re.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),l.jsx("input",{type:"text",value:et,onChange:re=>yt(re.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),l.jsx("input",{type:"text",value:dt,onChange:re=>cr(re.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[l.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("input",{type:"number",value:Se,onChange:re=>me(re.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),l.jsx("input",{type:"number",value:ge,onChange:re=>Ce(re.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),l.jsx("button",{onClick:De,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),oe.length>0&&l.jsx("button",{onClick:()=>je([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),l.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[oe.length," pts"]})]}),l.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.shot,onChange:re=>en({...Pt,shot:re.target.checked}),className:"rounded text-gray-500"})," ",l.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.read,onChange:re=>en({...Pt,read:re.target.checked}),className:"rounded text-rose-500"})," ",l.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.prnu,onChange:re=>en({...Pt,prnu:re.target.checked}),className:"rounded text-amber-500"})," ",l.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.total,onChange:re=>en({...Pt,total:re.target.checked}),className:"rounded text-white"})," ",l.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),l.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[l.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",ar,")",P&&l.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("button",{onClick:Br,disabled:P,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${P?"bg-gray-400 cursor-wait":Qa?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:P?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),l.jsxs("select",{value:Qt,onChange:re=>Bt(Number(re.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[l.jsx("option",{value:1e5,children:"100k Pairs"}),l.jsx("option",{value:5e5,children:"500k Pairs"}),l.jsx("option",{value:2e6,children:"2M Pairs"}),l.jsx("option",{value:5e6,children:"5M Pairs"}),l.jsx("option",{value:1e7,children:"10M Pairs"})]}),fr&&l.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",fr.nPoints]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),l.jsx("input",{type:"text",inputMode:"decimal",value:Ft.read,onChange:re=>qt("read",re.target.value),onBlur:()=>Xr("read"),onKeyDown:re=>En(re,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),l.jsxs("div",{className:"flex flex-col items-center relative group",children:[l.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",l.jsx("button",{onClick:()=>nn(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),l.jsx("input",{type:"text",inputMode:"decimal",value:Ft.gain,onChange:re=>qt("gain",re.target.value),onBlur:()=>Xr("gain"),onKeyDown:re=>En(re,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),l.jsx("input",{type:"text",inputMode:"decimal",value:Ft.prnu,onChange:re=>qt("prnu",re.target.value),onBlur:()=>Xr("prnu"),onKeyDown:re=>En(re,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[l.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(_e==null?void 0:_e.manualTarget)||D}`,children:["M.DR @ SNR=",(_e==null?void 0:_e.manualTarget)||D]}),l.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:_e!=null&&_e.manualDR?`${_e.manualDR.toFixed(2)} EV`:"--"})]}),l.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((_e==null?void 0:_e.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${F||"H"})`,children:[l.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),l.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:_e!=null&&_e.ptpDR?`${_e.ptpDR.toFixed(2)} EV`:"--"})]}),l.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((_e==null?void 0:_e.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${F||"H"} on ${_e==null?void 0:_e.dominantChannel} Channel)`,children:[l.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",_e==null?void 0:_e.dominantChannel,")"]}),l.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:_e!=null&&_e.d55DR?`${_e.d55DR.toFixed(2)} EV`:"--"})]}),l.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[l.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),l.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:pr!==null?`${Math.round(pr)}`:"",children:pr!==null?pr>1e4?`${(pr/1e3).toFixed(1)}k`:`${Math.round(pr)}`:"--"})]})]}),se===null&&l.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),l.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${te||ie?"cursor-crosshair":""}`,children:[l.jsx("div",{className:"row-start-1 col-start-1 h-full",children:l.jsx(h3,{vertical:!0,min:Lt,max:wt,value:[B?parseFloat(B):Lt,V?parseFloat(V):wt],onChange:([re,ve])=>{G(re.toString()),z(ve.toString())},logScale:p})}),l.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[nr.length===0?l.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Cre,{margin:{top:20,right:20,bottom:0,left:0},onClick:Le,children:[l.jsx("defs",{children:l.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[l.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"coloredBlur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),l.jsx(ja,{type:"number",dataKey:"x",name:"Signal",scale:p?"log":"linear",domain:Rr(A,E),allowDataOverflow:!0,hide:!0}),l.jsx(_a,{type:"number",dataKey:"y",name:f,scale:p?"log":"linear",domain:Rr(B,V),label:{value:Mr,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),l.jsx(Un,{content:l.jsx(Kr,{}),cursor:{strokeDasharray:"3 3"}}),se&&l.jsx(Zo,{x:se,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(Pt.fitRange||ie)&&l.jsxs(l.Fragment,{children:[l.jsx(Zo,{x:vr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${Tt.min}%`,fill:"#22d3ee",fontSize:9}}),l.jsx(Zo,{x:Xt,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${Tt.max}%`,fill:"#22d3ee",fontSize:9}})]}),k.R&&l.jsx(wa,{name:"Red",data:be.R,fill:"#ef4444",shape:er,onClick:Le,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),k.G1&&l.jsx(wa,{name:"Green 1",data:be.G1,fill:"#22c55e",shape:er,onClick:Le,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),k.G2&&l.jsx(wa,{name:"Green 2",data:be.G2,fill:"#4ade80",shape:er,onClick:Le,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),k.B&&l.jsx(wa,{name:"Blue",data:be.B,fill:"#3b82f6",shape:er,onClick:Le,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),Pt.shot&&Je.shot.length>0&&l.jsx(wa,{name:"Shot Noise (Ideal)",data:Je.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),Pt.read&&Je.read.length>0&&l.jsx(wa,{name:"Read Noise Floor",data:Je.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),Pt.prnu&&Je.prnu.length>0&&l.jsx(wa,{name:"PRNU (Non-uniformity)",data:Je.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),Pt.total&&Je.total.length>0&&l.jsx(wa,{name:"Total Noise Model",data:Je.total,line:{stroke:ca,strokeWidth:2},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),bt.length>0&&l.jsx(wa,{name:`Target SNR=${D}`,data:bt,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),Hr.length>0&&l.jsx(wa,{name:`PTP Target SNR=${_e!=null&&_e.ptpTarget?_e.ptpTarget.toFixed(1):"?"}`,data:Hr,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),oe.length>0&&l.jsx(wa,{name:"Manual Markers",data:oe,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),l.jsx("div",{className:"row-start-2 col-start-2 w-full",children:l.jsx(h3,{min:pt,max:Wt,value:[A?parseFloat(A):pt,E?parseFloat(E):Wt],onChange:([re,ve])=>{R(re.toString()),T(ve.toString())},logScale:p})})]})]})})},Gre=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>l.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"relative md:col-span-3",children:[l.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),l.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),l.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>l.jsx("option",{value:s,children:s},s))}),l.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[l.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>l.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),zre=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return l.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[l.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),l.jsx("div",{className:"mt-2 space-y-1 text-sm",children:l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),l.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),l.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),l.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},Ure=({data:e,theme:t="dark"})=>{const r=C.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=C.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(x=>[...x.R_range,...x.G1_range,...x.G2_range,...x.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),c=Math.max(...o);const u=.25,f=c-s;if(f<u){const x=u-f;s-=x/2,c+=x/2}const d=(c-s)*.1,p=s-d,m=c+d;return[p,m]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?l.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:l.jsx("p",{children:"No data available for this mode."})}):l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(NN,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:a}),l.jsx(ja,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),l.jsx(_a,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),l.jsx(Un,{content:l.jsx(zre,{theme:t})}),l.jsx(qi,{wrapperStyle:{fontSize:"14px",color:i}}),l.jsx(fi,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),l.jsx(_n,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),l.jsx(fi,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),l.jsx(_n,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),l.jsx(fi,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),l.jsx(_n,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),l.jsx(fi,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),l.jsx(_n,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},Wre=ee.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=C.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=C.useState(n[0]||""),{chartData:o,tableData:s}=C.useMemo(()=>{const d=e.shootingModes.find(x=>x.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const p=d.data.map(x=>({iso:x.iso,R_range:x.r.range,R_avg:x.r.avg,G1_range:x.g1.range,G1_avg:x.g1.avg,B_range:x.b.range,B_avg:x.b.avg,G2_range:x.g2.range,G2_avg:x.g2.avg})),m=d.data.map(x=>({iso:x.iso,levels:[x.r.avg,x.g1.avg,x.g2.avg,x.b.avg],clipping:x.clipping}));return{chartData:p,tableData:m}},[e.shootingModes,a]),c=`Raw Data (${a})`,u=C.useRef(null),f=C.useRef(null);return C.useEffect(()=>{const d=u.current,p=f.current;if(!d||!p)return;const m=new ResizeObserver(x=>{for(let b of x){const{width:S}=b.contentRect,y=Math.max(8,S/35);p.style.fontSize=`${y}px`}});return m.observe(d),()=>m.disconnect()},[]),l.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[l.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),l.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),l.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>l.jsx("option",{value:d,children:d},d))})]}),l.jsxs("div",{ref:u,className:"h-64 relative",children:[l.jsx(Ure,{data:o,theme:t},a),l.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:l.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),l.jsxs("div",{className:"overflow-x-auto",children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:c})}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),l.jsx("tbody",{children:s.map(({iso:d,levels:p,clipping:m})=>l.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[l.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,m&&l.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),l.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:p[0].toFixed(2)}),l.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:p[1].toFixed(2)}),l.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:p[3].toFixed(2)}),l.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:p[2].toFixed(2)})]},d))})]})]})]})}),Ge=(e,t,r)=>({avg:e,range:[t,r]}),Hm=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:Ge(512.1,511.95,512.25),g1:Ge(512.05,511.9,512.2),b:Ge(512.12,511.98,512.28),g2:Ge(512.06,511.92,512.22)},{iso:200,r:Ge(512.15,512,512.3),g1:Ge(512.1,511.95,512.25),b:Ge(512.18,512.05,512.35),g2:Ge(512.12,511.98,512.28)},{iso:400,r:Ge(512.25,512.1,512.45),g1:Ge(512.2,512.05,512.4),b:Ge(512.3,512.15,512.5),g2:Ge(512.22,512.08,512.42)},{iso:800,r:Ge(512.5,512.2,512.8),g1:Ge(512.45,512.15,512.75),b:Ge(512.55,512.25,512.85),g2:Ge(512.48,512.18,512.78)},{iso:1600,r:Ge(513.1,512.8,513.4),g1:Ge(513.05,512.75,513.35),b:Ge(513.15,512.85,513.45),g2:Ge(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:Ge(512.02,511.98,512.05),g1:Ge(512.01,511.97,512.04),b:Ge(512.03,511.99,512.06),g2:Ge(512.01,511.97,512.04)},{iso:640,r:Ge(512.15,512.05,512.25),g1:Ge(512.12,512.02,512.22),b:Ge(512.18,512.08,512.28),g2:Ge(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Ge(512,511.8,512.2),g1:Ge(512,511.8,512.2),b:Ge(512,511.8,512.2),g2:Ge(512,511.8,512.2)},{iso:400,r:Ge(512,511.7,512.3),g1:Ge(512,511.7,512.3),b:Ge(512,511.7,512.3),g2:Ge(512,511.7,512.3)},{iso:1600,r:Ge(512.2,511.5,512.8),g1:Ge(512.2,511.5,512.8),b:Ge(512.2,511.5,512.8),g2:Ge(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Ge(511.95,511.8,512.1),g1:Ge(511.95,511.8,512.1),b:Ge(511.95,511.8,512.1),g2:Ge(511.95,511.8,512.1)},{iso:800,r:Ge(512.1,511.9,512.3),g1:Ge(512.1,511.9,512.3),b:Ge(512.1,511.9,512.3),g2:Ge(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:Ge(400,399.9,400.1),g1:Ge(400,399.9,400.1),b:Ge(400,399.9,400.1),g2:Ge(400,399.9,400.1)},{iso:100,r:Ge(400,399.9,400.1),g1:Ge(400,399.9,400.1),b:Ge(400,399.9,400.1),g2:Ge(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:Ge(400.1,399.8,400.3),g1:Ge(400.1,399.8,400.3),b:Ge(400.1,399.8,400.3),g2:Ge(400.1,399.8,400.3)},{iso:800,r:Ge(400.3,399.5,401.1),g1:Ge(400.3,399.5,401.1),b:Ge(400.3,399.5,401.1),g2:Ge(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:Ge(1024,1023.8,1024.2),g1:Ge(1024,1023.8,1024.2),b:Ge(1024,1023.8,1024.2),g2:Ge(1024,1023.8,1024.2)},{iso:800,r:Ge(1024.2,1023.5,1025),g1:Ge(1024.2,1023.5,1025),b:Ge(1024.2,1023.5,1025),g2:Ge(1024.2,1023.5,1025)}]}]}],Vre=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=C.useState(""),[i,o]=C.useState("All"),s=C.useMemo(()=>["All",...Array.from(new Set(Hm.map(d=>d.manufacturer))).sort()],[]),c=C.useMemo(()=>Hm.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),p=i==="All"||f.manufacturer===i;return d&&p}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",l.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Hm.length," Models"]})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:l.jsx(Gre,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:c,onCameraSelect:u})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[c.map(f=>l.jsx("div",{id:`camera-${f.id}`,children:l.jsx(Wre,{camera:f,theme:r})},f.id)),c.length===0&&l.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:l.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Hre=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=C.useState(""),[i,o]=C.useState(""),[s,c]=C.useState(""),[u,f]=C.useState(""),[d,p]=C.useState(null),m=()=>{const x=parseFloat(n),b=parseFloat(i),S=parseFloat(s),v=parseFloat(u);if(isNaN(x)||isNaN(b)||isNaN(S)||isNaN(v)){p(null);return}const y=x,w=b,P=S*S,j=v*v,k=(y+w)/2;if(k<=1e-9){p(0);return}const O=P*j/k,A=Math.sqrt(O);p(A)};return e?l.jsxs(Ss,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[l.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),l.jsx("input",{type:"number",step:"any",value:n,onChange:x=>a(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),l.jsx("input",{type:"number",step:"any",value:i,onChange:x=>o(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),l.jsx("input",{type:"number",step:"any",value:s,onChange:x=>c(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),l.jsx("input",{type:"number",step:"any",value:u,onChange:x=>f(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsx("button",{onClick:m,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&l.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[l.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),l.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},jx=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],Xre=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function Kre(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),p=Math.hypot(n.x-r.x,n.y-r.y),m=Math.hypot(r.x-e.x,r.y-e.y),x=Math.hypot(n.x-t.x,n.y-t.y),b=(d+p)/2/5,S=(m+x)/2/3,v=b*f,y=S*f;for(let w=0;w<4;w++)for(let P=0;P<6;P++){const j=P/5,k=w/3,O=(1-j)*(1-k)*e.x+j*(1-k)*t.x+(1-j)*k*r.x+j*k*n.x,A=(1-j)*(1-k)*e.y+j*(1-k)*t.y+(1-j)*k*r.y+j*k*n.y;u.push({x:O-v/2,y:A-y/2,w:v,h:y})}return u}function ON(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function b0(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let c=0;c<i;c++)for(let u=0;u<n;u++)o[s][c]+=e[s][u]*t[u][c];return o}function qre(e,t){const r=ON(e),n=b0(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=dc(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=b0(r,t);return b0(o,s)}function Yre(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const c=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=c*r[n][u]}}return r.map(n=>n.slice(t))}function Zre(e,t,r){const n=[...e].sort((b,S)=>b.id-S.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(b=>{const S=b.rawMeans,v=[S[0]-t[0],S[1]-t[1],S[2]-t[2],S[3]-t[3]];let y,w,P;r?(P=v[0],w=(v[1]+v[2])/2,y=v[3]):(y=v[0],w=(v[1]+v[2])/2,P=v[3]),y=Math.max(0,y),w=Math.max(0,w),P=Math.max(0,P),a.push([y,w,P])});const o=a[18],s=(o[0]+o[1]+o[2])/3,c=1/Math.max(1e-9,s),u=a.map(b=>[b[0]*c,b[1]*c,b[2]*c]),d=qre(u,jx),p=ON(d);let m;try{m=Yre(p)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:b0(m,Xre)}}const Qre=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,c]=C.useState(n),[u,f]=C.useState(["0","0","0","0"]),[d,p]=C.useState(null),[m,x]=C.useState(null);if(C.useEffect(()=>{if(e&&r&&r.length===24){const k=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([k[0].toFixed(2),k[1].toFixed(2),k[2].toFixed(2),k[3].toFixed(2)])}},[e,r]),C.useEffect(()=>{if(!e||!r||r.length!==24)return;const j=u.map(k=>parseFloat(k));if(!j.some(isNaN))try{const k=Zre(r,j,s);p(k),x(null)}catch(k){x(k.message)}},[e,r,s,u]),!e)return null;const b=(j,k)=>{f(O=>{const A=[...O];return A[j]=k,A})},S=j=>{navigator.clipboard.writeText(j)},v=j=>j?j.map(k=>k.map(O=>O.toFixed(4))):[],y=d?v(d.matrix).flat().join(" "):"",w=s?["B","G1","G2","R"]:["R","G1","G2","B"],P=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return l.jsxs(Ss,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),l.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),l.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:j=>o(parseFloat(j.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>c(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),l.jsx("button",{onClick:()=>c(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),l.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[l.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(j=>l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:`text-[10px] font-bold mb-1 ${P[j]}`,children:w[j]}),l.jsx("input",{type:"number",step:"0.01",value:u[j],onChange:k=>b(j,k.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},j))})]}),m?l.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:m}):d?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[l.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),l.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:v(d.matrix).map((j,k)=>l.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[l.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:j[0]}),l.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:j[1]}),l.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:j[2]})]},k))}),l.jsx("button",{onClick:()=>S(y),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):l.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function Ib(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let c=0;c<r;c++)n+=e[c],a+=t[c],i+=e[c]*t[c],o+=e[c]*e[c];const s=r*o-n*n;return s===0?{slope:0,intercept:0}:{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function Jre(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function ene(e){const t=new Array(e.length).fill(0);t[0]=e[0];for(let r=1;r<e.length;r++){let n=e[r]-e[r-1];n>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI),t[r]=t[r-1]+n}return t}function tne(e){const t=e.length,r=new Array(t).fill(0).map((i,o)=>o),{slope:n,intercept:a}=Ib(r,e);return e.map((i,o)=>i-(n*o+a))}function rne(e,t,r="RGGB"){const n=r.toUpperCase(),a=t%2,i=e%2;return n==="RGGB"||n==="BGGR"?(a+i)%2!==0:n==="GBRG"||n==="GRBG"?(a+i)%2===0:(a+i)%2!==0}function _x(e,t,r,n,a){const i=Math.floor(n.x),o=Math.floor(n.y),s=Math.floor(n.w),c=Math.floor(n.h);if(s<8||c<8)return null;let u=[];for(let X=0;X<c;X++){const le=[],he=(o+X)*t;for(let oe=0;oe<s;oe++)le.push(e[he+i+oe]);u.push(le)}let f=0,d=0;for(let X=1;X<c-1;X+=2)for(let le=1;le<s-1;le+=2)f+=Math.abs(u[X][le+1]-u[X][le-1]),d+=Math.abs(u[X+1][le]-u[X-1][le]);let p=s,m=c,x=u,b=2,S=!1;if(d>f){b=1,S=!0,x=Array(s).fill(0).map(()=>Array(c).fill(0));for(let X=0;X<c;X++)for(let le=0;le<s;le++)x[le][c-1-X]=u[X][le];p=c,m=s}else b=2;const v=[],y=[];for(let X=0;X<m;X++){const le=x[X],he=le.map((Se,me)=>me===0?0:Math.abs(Se-le[me-1])),oe=Math.max(...he),je=he.indexOf(oe);if(oe>1){const Se=Math.max(0,je-3),me=Math.min(p,je+4);let ge=0,Ce=0;for(let De=Se;De<me;De++)ge+=he[De],Ce+=De*he[De];ge>0&&(v.push(Ce/ge),y.push(X))}}if(v.length<m*.4)return null;const{slope:w,intercept:P}=Ib(y,v),j=Math.cos(Math.atan(w)),k=[],O=[],A=(a==null?void 0:a.greenOnly)??!1,R=(a==null?void 0:a.globalX)??0,E=(a==null?void 0:a.globalY)??0,T=(a==null?void 0:a.bayerPattern)||"RGGB";for(let X=0;X<m;X++){const le=w*X+P;for(let he=0;he<p;he++){if(A){let oe,je;if(S){const Se=c-1-he,me=X;oe=R+i+me,je=E+o+Se}else oe=R+i+he,je=E+o+X;if(!rne(oe,je,T))continue}k.push((he-le)*j),O.push(x[X][he])}}const G=Math.min(s,c)/2;let V=0;for(const X of k)Math.abs(X)<=G&&V++;let z=.125;if(a!=null&&a.manualBinSize&&a.manualBinSize>0)z=Math.max(.01,Math.min(.5,a.manualBinSize));else if(V>0){const X=40*G/V;z=Math.max(.01,Math.min(.125,X))}const D=z,L=Array.from(k.keys()).sort((X,le)=>k[X]-k[le]),F=L.map(X=>k[X]),H=L.map(X=>O[X]);if(F.length===0)return null;const W=F[0],J=F[F.length-1],Y=Math.floor((J-W)/D),ne=new Array(Y).fill(0),te=new Array(Y).fill(0);for(let X=0;X<F.length;X++){const le=Math.floor((F[X]-W)/D);le>=0&&le<Y&&(ne[le]+=H[X],te[le]++)}let fe=H[0];for(let X=0;X<Y;X++)te[X]>0?(ne[X]/=te[X],fe=ne[X]):ne[X]=fe;const se=ne.slice(0,10).reduce((X,le)=>X+le,0)/10,ye=ne.slice(-10).reduce((X,le)=>X+le,0)/10;if(se>ye){const X=Math.max(...ne),le=Math.min(...ne);for(let he=0;he<ne.length;he++)ne[he]=X-ne[he]+le}const ie=Jre(ne,D);return{esf:ne,lsfFull:ie,binSize:D,orientation:b}}function MN(e,t,r,n=!1,a=0,i=!1){if(e.length===0)return null;const o=4096,s=new nl(o),c=r?1e3/r:1,u=new Float32Array(501);for(let y=0;y<=500;y++)u[y]=y/500*c*2;const f=new Float32Array(501).fill(0);let d=0,p=[],m=[],x=0,b=[];for(const y of e){let w=[...y.lsfFull];const P=y.binSize;let j=0,k=-1/0;for(let te=0;te<w.length;te++)w[te]>k&&(k=w[te],j=te);const O=k*.2;let A=0,R=w.length-1;for(let te=j;te>=0;te--)if(w[te]<O){A=te;break}for(let te=j;te<w.length;te++)if(w[te]<O){R=te;break}const E=R-A;let T=!1;if(n&&E>0){const te=E*4,fe=[],se=[];if(a>0){const ye=Math.max(0,j-te-a),ie=Math.max(0,j-te);for(let he=ye;he<ie;he++)fe.push(he),se.push(w[he]);const X=Math.min(w.length,j+te),le=Math.min(w.length,j+te+a);for(let he=X;he<le;he++)fe.push(he),se.push(w[he])}else{for(let ye=0;ye<Math.max(0,j-te);ye++)fe.push(ye),se.push(w[ye]);for(let ye=Math.min(w.length,j+te);ye<w.length;ye++)fe.push(ye),se.push(w[ye])}if(fe.length>2){const{slope:ye,intercept:ie}=Ib(fe,se);for(let X=0;X<w.length;X++)w[X]=w[X]-(ye*X+ie);k=-1/0;for(let X=0;X<w.length;X++)w[X]>k&&(k=w[X],j=X);T=!0}}let B=0,G=0;if(t>0)G=t,B=Math.round(t/P);else{const te=k*.2;let fe=0,se=w.length-1;for(let le=j;le>=0;le--)if(w[le]<te){fe=le;break}for(let le=j;le<w.length;le++)if(w[le]<te){se=le;break}const ie=(se-fe)*P;let X=Math.max(2,ie*8);G=X,B=Math.round(X/P)}x+=G;const V=Math.max(0,j-B),z=Math.min(w.length,j+B),D=w.slice(V,z);if(D.length<8)continue;const L=new Float32Array(o).fill(0);let F=-1/0,H=0;for(let te=0;te<D.length;te++)D[te]>F&&(F=D[te],H=te);for(let te=0;te<D.length;te++){let fe=1;i&&(fe=.5*(1-Math.cos(2*Math.PI*te/(D.length-1))));const se=D[te]*fe,ye=(te-H+o)%o;L[ye]=se}s.transform(L);const W=[],J=[],Y=[];for(let te=0;te<=o/2;te++){const fe=s._real[te],se=s._imag[te],ye=Math.sqrt(fe*fe+se*se);W.push(ye),J.push(te/(o*P)*c),Y.push(Math.atan2(se,fe))}const ne=W[0];if(ne>0){for(let te=0;te<=500;te++){const fe=u[te];f[te]+=p3(fe,J,W)/ne}if(d++,p.length===0){p=D,m=T?nne(w):y.esf;const te=ene(Y),fe=tne(te);for(let se=0;se<=500;se++){const ye=u[se];b.push(p3(ye,J,fe))}}}}if(d===0)return null;const S=Array.from(f).map(y=>y/d);let v=null;for(let y=0;y<S.length-1;y++)if(S[y]>=.5&&S[y+1]<.5){v=u[y]+(.5-S[y])*(u[y+1]-u[y])/(S[y+1]-S[y]);break}return{esf:m,lsf:[],lsfCropped:p,mtf:S,ptf:b,freqs:Array.from(u),mtf50:v,calcRadius:x/d}}function nne(e){const t=new Array(e.length).fill(0);let r=0;for(let n=0;n<e.length;n++)r+=e[n],t[n]=r;return t}function p3(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const Ro=({locked:e,onToggle:t,title:r})=>l.jsx("span",{className:"inline-flex items-center justify-center p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors cursor-pointer select-none",title:r??(e?"Locked (Auto Fit will NOT change)":"Unlocked (Auto Fit may change)"),onMouseDown:n=>{n.stopPropagation()},onClick:n=>{n.stopPropagation(),t()},children:l.jsx("span",{className:`w-4 h-4 rounded-full border-2 transition-all active:scale-90 flex items-center justify-center ${e?"border-indigo-600 bg-indigo-600":"border-gray-400 dark:border-slate-500 bg-transparent hover:border-gray-500"}`,children:e&&l.jsx("span",{className:"w-2 h-2 rounded-full bg-white"})})}),ane=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o,isSfrLabOpen:s})=>{const[c,u]=C.useState([]),[f,d]=C.useState(""),[p,m]=C.useState(""),[x,b]=C.useState(12),[S,v]=C.useState(!0),[y,w]=C.useState(!0),[P,j]=C.useState(!0),[k,O]=C.useState(!1),[A,R]=C.useState(!1),[E,T]=C.useState(!1),[B,G]=C.useState(!1),[V,z]=C.useState("50"),[D,L]=C.useState(!1),[F,H]=C.useState("0.125"),[W,J]=C.useState(!1),[Y,ne]=C.useState({aperture:4,olpfSeparationPx:.7,fillFactor:.9,coreSigmaPx:.15,haloSigmaPx:.8,haloWeight:.25,wavelengthUm:.55,rolloff:1}),[te,fe]=C.useState({aperture:!1,olpfSeparationPx:!1,fillFactor:!1,coreSigmaPx:!1,haloSigmaPx:!1,haloWeight:!1,wavelengthUm:!1,rolloff:!1}),[se,ye]=C.useState("0"),[ie,X]=C.useState(""),[le,he]=C.useState(!1),[oe,je]=C.useState(""),[Se,me]=C.useState(1),[ge,Ce]=C.useState(null),[De,ze]=C.useState({x:100,y:50}),[Be,et]=C.useState({w:1e3,h:800}),[yt,dt]=C.useState(!1),[cr,St]=C.useState(!1),ur=C.useRef({x:0,y:0}),jt=C.useRef({w:0,h:0}),[fr,$r]=C.useState(!1),[Tt,_r]=C.useState(!1),Qe=c.length>0?c[c.length-1].binSize:null,_t=Qe?(1/Qe).toFixed(1):"-",Qt=C.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),yr=(o==null?void 0:o.renderMode)==="advanced-zero-dep",rr=C.useMemo(()=>{const I=parseFloat(f);return Number.isFinite(I)&&I>0?I:null},[f]),Jr=rr!==null,Ft=Jr?"lp/mm":"cy/px",hn=(I,be,Ne)=>Math.min(Ne,Math.max(be,I)),Pt=I=>{if(Math.abs(I)<1e-12)return 1;const be=Math.PI*I;return Math.sin(be)/be},en=I=>I<=0?1:I>=1?0:2/Math.PI*(Math.acos(I)-I*Math.sqrt(1-I*I)),Ue=(I,be,Ne,Ct)=>{const Ve=hn(Ct,0,1),lt=Math.max(0,be),ft=Math.max(0,Ne),qt=Math.exp(-2*Math.PI*Math.PI*lt*lt*I*I),Xr=Math.exp(-2*Math.PI*Math.PI*ft*ft*I*I);return(1-Ve)*qt+Ve*Xr},nn=C.useMemo(()=>Jr&&rr?1e3/rr:1,[Jr,rr]),Or=(I,be)=>{const{aperture:Ne,olpfSeparationPx:Ct,fillFactor:Ve,coreSigmaPx:lt,haloSigmaPx:ft,haloWeight:qt,wavelengthUm:Xr,rolloff:Br}=be,Yt=Jr?I/nn:I,En=Math.max(1e-9,Xr)/1e3,mn=Jr&&rr?rr/1e3:5/1e3,Kn=Math.max(1e-6,Ne),Gt=1/(En*Kn)*mn,Rr=Gt>0?Yt/Gt:1e9,Le=en(Rr),er=Math.max(0,Ct),Kr=Math.abs(Math.cos(Math.PI*Yt*er)),la=hn(Ve,0,1),ca=Math.abs(Pt(Yt*la)),Mr=Math.max(0,lt),Qa=Math.max(0,ft),re=Ue(Yt,Mr,Qa,qt);let ve=Le*Kr*ca*re;const we=Math.max(.1,Br);return ve=Math.pow(Math.max(0,ve),we),Math.min(1.2,Math.max(0,ve))},pn=()=>{if(!(!r||!n)){if(!yr){alert("Scalar Unmixing is required. Please configure Background/Foreground/BlackLevel in the Sidebar and click 'RUN UNMIXING' first.");return}try{let I=null;const be=D?parseFloat(F):void 0;if(o!=null&&o.advancedZeroDep){const Ne=O1(r,n,o);I=_x(Ne.data,Ne.width,Ne.height,{x:0,y:0,w:Ne.width,h:Ne.height},{greenOnly:P,globalX:n.x,globalY:n.y,bayerPattern:r.bayerPattern,manualBinSize:be})}else I=_x(r.data,r.width,r.height,n,{greenOnly:P,globalX:n.x,globalY:n.y,bayerPattern:r.bayerPattern,manualBinSize:be});I?u(Ne=>[...Ne,I]):alert("Could not detect valid edge.")}catch(I){console.error(I),alert("Error processing ROI")}}},an=()=>{u([]),Ce(null),me(1)},or=()=>{if(!ge)return;const I=parseFloat(f),Ct=`data:text/csv;charset=utf-8,Frequency (${!isNaN(I)&&I>0?"lp/mm":"cy/px"}),MTF,Phase(Rad)
`+ge.freqs.map((ft,qt)=>{const Xr=ge.ptf?ge.ptf[qt]:0;return`${ft.toFixed(6)},${ge.mtf[qt].toFixed(6)},${Xr?Xr.toFixed(6):0}`}).join(`
`),Ve=encodeURI(Ct),lt=document.createElement("a");lt.setAttribute("href",Ve),lt.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(lt),lt.click(),document.body.removeChild(lt)},Lr=()=>{if(!(ge!=null&&ge.mtf50)||!n)return;const I=n.x+n.w/2,be=n.y+n.h/2,Ne=`{${I.toFixed(1)},${be.toFixed(1)},${ge.mtf50.toFixed(4)}}`;navigator.clipboard.writeText(Ne)};C.useEffect(()=>{if(c.length===0){Ce(null);return}const I=parseFloat(f),be=!isNaN(I)&&I>0?I:null,Ne=S?-1:x,Ct=B&&parseFloat(V)||0,Ve=MN(c,Ne,be,y,Ct,k);Ce(Ve)},[c,x,S,y,f,B,V,k]),C.useEffect(()=>{e&&yr&&c.length===0&&n&&r&&pn()},[e]);const gn=I=>{i&&i(),!Tt&&(I.target.closest("button")||I.target.closest("input")||I.target.closest("select")||I.target.closest("label")||(dt(!0),ur.current={x:I.clientX-De.x,y:I.clientY-De.y}))},on=I=>{Tt||(I.stopPropagation(),I.preventDefault(),St(!0),ur.current={x:I.clientX,y:I.clientY},jt.current={w:Be.w,h:Be.h})};C.useEffect(()=>{const I=Ne=>{if(yt)ze({x:Ne.clientX-ur.current.x,y:Ne.clientY-ur.current.y});else if(cr){const Ct=Ne.clientX-ur.current.x,Ve=Ne.clientX-ur.current.y;et({w:Math.max(600,jt.current.w+Ct),h:Math.max(500,jt.current.h+Ve)})}},be=()=>{dt(!1),St(!1)};return(yt||cr)&&(window.addEventListener("mousemove",I),window.addEventListener("mouseup",be)),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",be)}},[yt,cr]);const sn=C.useMemo(()=>{if(!(ge!=null&&ge.mtf50)||!p)return null;const I=parseFloat(p);if(isNaN(I)||I<=0)return null;let be=ge.mtf50;const Ne=parseFloat(f);return!isNaN(Ne)&&Ne>0&&(be=ge.mtf50*(Ne/1e3)),be*2*I},[ge,p,f]),hr=A?2:1,nr=hr*nn,ar=.004,M=C.useMemo(()=>{if(!W)return[];const I=[];for(let be=0;be<=hr+1e-12;be+=ar){const Ne=be*nn;I.push({freq:Ne,modelMtf:Or(Ne,Y)})}return I},[W,Y,hr,nn]),Fe=C.useMemo(()=>{const I=ge?ge.mtf.map((Ne,Ct)=>({freq:ge.freqs[Ct],mtf:Ne})).filter(Ne=>Ne.freq<=nr):[];if(!W||M.length===0)return I.map(Ne=>({freq:Ne.freq,mtf:Ne.mtf,modelMtf:null}));const be=new Map;for(const Ne of M){const Ct=Ne.freq.toFixed(6);be.set(Ct,{freq:Ne.freq,mtf:null,modelMtf:Ne.modelMtf})}for(const Ne of I){const Ct=Ne.freq.toFixed(6),Ve=be.get(Ct);Ve?Ve.mtf=Ne.mtf:be.set(Ct,{freq:Ne.freq,mtf:Ne.mtf,modelMtf:null})}return Array.from(be.values()).sort((Ne,Ct)=>Ne.freq-Ct.freq)},[ge,nr,W,M]),pt=ge?ge.lsfCropped.map((I,be)=>({x:be,y:I})):[],Wt=ge?ge.esf.map((I,be)=>({x:be,y:I})):[],Lt=C.useMemo(()=>ge!=null&&ge.ptf?ge.ptf.map((I,be)=>({freq:ge.freqs[be],ptf:I})).filter(I=>I.freq<=nr):[],[ge,nr]);if(!e)return null;const wt={aperture:[.7,64],olpfSeparationPx:[0,5],fillFactor:[.05,1],coreSigmaPx:[0,3],haloSigmaPx:[0,50],haloWeight:[0,1],wavelengthUm:[.4,.7],rolloff:[.2,6]},vr={aperture:.2,olpfSeparationPx:.05,fillFactor:.03,coreSigmaPx:.03,haloSigmaPx:.2,haloWeight:.05,wavelengthUm:.01,rolloff:.1},Xt=()=>{let I=0,be=0;for(;I===0;)I=Math.random();for(;be===0;)be=Math.random();return Math.sqrt(-2*Math.log(I))*Math.cos(2*Math.PI*be)},Je=()=>["aperture","olpfSeparationPx","fillFactor","coreSigmaPx","haloSigmaPx","haloWeight","wavelengthUm","rolloff"].filter(be=>!te[be]),bt=(I,be)=>be.map(Ne=>I[Ne]),kt=(I,be,Ne,Ct)=>{const Ve={...be};for(let qt=0;qt<Ne.length;qt++){const Xr=Ne[qt],[Br,Yt]=wt[Xr];Ve[Xr]=hn(I[qt],Br,Yt)}Object.keys(Ct).forEach(qt=>{Ct[qt]&&(Ve[qt]=be[qt])});const lt=Ct.coreSigmaPx,ft=Ct.haloSigmaPx;return ft&&!lt?Ve.coreSigmaPx=Math.min(Ve.coreSigmaPx,be.haloSigmaPx):lt&&!ft?Ve.haloSigmaPx=Math.max(Ve.haloSigmaPx,be.coreSigmaPx):!lt&&!ft&&(Ve.haloSigmaPx=Math.max(Ve.haloSigmaPx,Ve.coreSigmaPx)),Ve},Kt=(I,be)=>{const Ne=[...I];for(let Ct=0;Ct<be.length;Ct++){const Ve=be[Ct],lt=vr[Ve],ft=Ve==="aperture"?.1:Ve==="wavelengthUm"?.02:.2;Ne[Ct]=Ne[Ct]+ft*lt*Xt()}return Ne},pr=(I,be,Ne,Ct)=>{const Ve=I.map(lt=>1/(1+.5*lt*lt));return lt=>{const ft=kt(lt,Ne,Ct,te);let qt=0;for(let Yt=0;Yt<I.length;Yt++){const En=be[Yt],Kn=Or(I[Yt],ft)-En;qt+=Ve[Yt]*Kn*Kn}const Br=1e-4*((te.olpfSeparationPx?0:ft.olpfSeparationPx*ft.olpfSeparationPx)+(te.coreSigmaPx?0:ft.coreSigmaPx*ft.coreSigmaPx)+(te.haloSigmaPx?0:ft.haloSigmaPx*ft.haloSigmaPx)+(te.rolloff?0:(ft.rolloff-1)*(ft.rolloff-1)));return qt+Br}},_e=(I,be,Ne,Ct=320)=>{const Ve=be.length,lt=new Array(Ve+1);lt[0]=[...be];for(let Et=0;Et<Ve;Et++){const Gt=[...be];Gt[Et]=Gt[Et]+Ne[Et],lt[Et+1]=Gt}const ft=lt.map(Et=>I(Et)),qt=()=>{const Et=ft.map((Le,er)=>[Le,er]).sort((Le,er)=>Le[0]-er[0]).map(Le=>Le[1]),Gt=Et.map(Le=>lt[Le]),Rr=Et.map(Le=>ft[Le]);for(let Le=0;Le<lt.length;Le++)lt[Le]=Gt[Le];for(let Le=0;Le<ft.length;Le++)ft[Le]=Rr[Le]},Xr=()=>{const Et=new Array(Ve).fill(0);for(let Gt=0;Gt<Ve;Gt++){const Rr=lt[Gt];for(let Le=0;Le<Ve;Le++)Et[Le]+=Rr[Le]}for(let Gt=0;Gt<Ve;Gt++)Et[Gt]/=Ve;return Et},Br=(Et,Gt,Rr=1)=>Et.map((Le,er)=>Le+Rr*Gt[er]),Yt=(Et,Gt)=>Et.map((Rr,Le)=>Rr-Gt[Le]),En=1,mn=2,Kn=.5;for(let Et=0;Et<Ct;Et++){qt();const Gt=lt[0],Rr=lt[Ve],Le=Xr(),er=Br(Le,Yt(Le,Rr),En),Kr=I(er);if(Kr<ft[0]){const Mr=Br(Le,Yt(er,Le),mn),Qa=I(Mr);Qa<Kr?(lt[Ve]=Mr,ft[Ve]=Qa):(lt[Ve]=er,ft[Ve]=Kr);continue}if(Kr<ft[Ve-1]){lt[Ve]=er,ft[Ve]=Kr;continue}const la=Br(Le,Yt(Rr,Le),-.5),ca=I(la);if(ca<ft[Ve]){lt[Ve]=la,ft[Ve]=ca;continue}for(let Mr=1;Mr<Ve+1;Mr++)lt[Mr]=Br(Gt,Yt(lt[Mr],Gt),Kn),ft[Mr]=I(lt[Mr])}return qt(),{x:lt[0],fx:ft[0]}},Hr=async()=>{if(!(ge!=null&&ge.freqs)||!(ge!=null&&ge.mtf)||ge.freqs.length<10){je("No enough MTF data to fit.");return}const I=Je();if(I.length===0){je("All parameters are locked.");return}const be=Math.max(0,parseFloat(se||"0")||0),Ne=nr,Ct=(()=>{const Le=parseFloat(ie||"");return Number.isFinite(Le)&&Le>0?Le:Ne})(),Ve=[];for(let Le=0;Le<ge.freqs.length;Le++){const er=ge.freqs[Le],Kr=ge.mtf[Le];er>=be&&er<=Ct&&Number.isFinite(Kr)&&Ve.push([er,Kr])}if(Ve.length<10){je("Fit range too narrow (need >= 10 points).");return}const ft=Math.max(1,Math.floor(Ve.length/300)),qt=Ve.filter((Le,er)=>er%ft===0).map(Le=>Le[0]),Xr=Ve.filter((Le,er)=>er%ft===0).map(Le=>Le[1]);he(!0),je(`Fitting ${I.length} params (${qt.length} pts) in [${be.toFixed(3)}, ${Ct.toFixed(3)}] ${Ft} ...`);const Br=Y,Yt=bt(Br,I),En=I.map(Le=>vr[Le]),mn=pr(qt,Xr,Br,I),Kn=7;let Et=Yt,Gt=mn(Yt);for(let Le=0;Le<Kn;Le++){const er=Le===0?Yt:Kt(Yt,I),Kr=_e(mn,er,En,320);Kr.fx<Gt&&(Gt=Kr.fx,Et=Kr.x),await new Promise(requestAnimationFrame)}const Rr=kt(Et,Br,I,te);ne(Rr),je(`Fit done. SSE=${Gt.toExponential(3)}  unlocked=${I.length}  range=[${be.toFixed(3)}, ${Ct.toFixed(3)}] ${Ft}`),he(!1)};return l.jsxs("div",{className:`fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl overflow-hidden ${Tt?"rounded-none":"rounded-xl"}`,style:Tt?{inset:0,width:"100vw",height:"100vh",zIndex:a??100}:{left:De.x,top:De.y,width:Be.w,height:fr?"auto":Be.h,zIndex:a??100},onMouseDownCapture:i,children:[l.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${!Tt&&yt?"cursor-grabbing":Tt?"":"cursor-grab"}`,onMouseDown:gn,onDoubleClick:()=>_r(!Tt),children:[l.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",l.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[c.length," ROI",c.length!==1?"s":""]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>_r(!Tt),className:"text-gray-400 hover:text-orange-500 transition-colors",title:Tt?"Restore":"Maximize",children:Tt?l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 14h6v6M20 10h-6V4"})}):l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M20 8V4m0 0h-4M4 16v4m0 0h4M20 16v4m0 0h-4"})})}),l.jsx("button",{onClick:()=>$r(!fr),className:"text-gray-400 hover:text-orange-500 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]})]}),!fr&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),l.jsx("input",{type:"number",value:f,onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>d(I.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),l.jsx("input",{type:"number",value:p,onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>m(I.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",children:[l.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),Qe?l.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Qe.toFixed(3),"px",l.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",_t,"x)"]})]}):l.jsx("span",{className:"text-gray-400 italic",children:"..."}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none ml-2 border-l border-blue-200 dark:border-blue-700 pl-2",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:D,onChange:I=>{I.stopPropagation(),L(I.target.checked)},className:"w-3 h-3 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}),l.jsx("span",{className:"text-[10px] font-bold text-blue-600 dark:text-blue-400",children:"Manual"})]}),D&&l.jsx("input",{type:"number",value:F,onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>H(I.target.value),step:"0.001",min:"0.01",max:"0.5",className:"w-16 px-1 py-0.5 text-xs bg-white dark:bg-slate-900 border border-blue-300 dark:border-blue-600 rounded outline-none focus:border-orange-500",placeholder:"0.125"})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[500px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",title:"Linear detrending with limited fitting width",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:y,onChange:I=>{I.stopPropagation(),w(I.target.checked)},className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:"Deshading"})]}),y&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none border-l border-purple-200 dark:border-purple-800 pl-2",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:B,onChange:I=>{I.stopPropagation(),G(I.target.checked)},className:"w-3 h-3 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),l.jsx("span",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400",children:"Limit Fit"})]}),B&&l.jsxs("div",{className:"flex items-center gap-1",title:"Width of data used for fitting (pixels)",children:[l.jsx("input",{type:"number",value:V,onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>z(I.target.value),step:"5",min:"10",max:"500",className:"w-14 px-1 py-0.5 text-xs bg-white dark:bg-slate-900 border border-purple-300 dark:border-purple-600 rounded outline-none focus:border-orange-500"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]})]})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:P,onChange:I=>{I.stopPropagation(),j(I.target.checked)},className:"w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:"G-Only"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),title:"Apply Hann windowing before FFT",children:[l.jsx("input",{type:"checkbox",checked:k,onChange:I=>{I.stopPropagation(),O(I.target.checked)},className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"Hann On"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:A,onChange:I=>{I.stopPropagation(),R(I.target.checked)},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"2 Freq"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:E,onChange:I=>{I.stopPropagation(),T(I.target.checked)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-teal-600 dark:text-teal-400",children:"Show PTF"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:S,onChange:I=>{I.stopPropagation();const be=I.target.checked;v(be),be||b(Qt)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's official NR"})]}),l.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[l.jsxs("div",{className:"flex justify-between items-baseline",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:S?"Calculated:":"Manual:"}),l.jsxs("span",{className:`font-mono font-bold ${S?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[S&&(ge!=null&&ge.calcRadius)?ge.calcRadius.toFixed(2):x.toFixed(1)," px"]})]}),l.jsx("input",{type:"range",min:"2",max:Qt,step:"0.5",value:x,onMouseDown:I=>I.stopPropagation(),onChange:I=>{b(parseFloat(I.target.value)),v(!1)},disabled:S,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${S?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onMouseDown:I=>I.stopPropagation(),onClick:I=>{I.stopPropagation(),pn()},disabled:!yr,title:yr?"":"Scalar Unmixing must be active. Run Unmixing in Sidebar first.",className:`px-3 py-1.5 text-white font-bold rounded shadow-sm transition-transform active:scale-95 ${yr?"bg-orange-600 hover:bg-orange-500":"bg-gray-400 cursor-not-allowed"}`,children:yr?"Add Current ROI":"Unmixing Required"}),l.jsx("button",{onMouseDown:I=>I.stopPropagation(),onClick:I=>{I.stopPropagation(),Lr()},disabled:!ge||!ge.mtf50||!n,className:"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Copy Pos/MTF50"}),l.jsx("button",{onMouseDown:I=>I.stopPropagation(),onClick:I=>{I.stopPropagation(),or()},disabled:!ge,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),l.jsx("button",{onMouseDown:I=>I.stopPropagation(),onClick:I=>{I.stopPropagation(),an()},className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),l.jsxs("div",{className:"px-3 py-2 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-200 dark:border-indigo-800 flex items-center gap-4 flex-wrap text-xs",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:W,onChange:I=>{I.stopPropagation(),J(I.target.checked)},className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-indigo-700 dark:text-indigo-400 text-sm",children:"Show Model Line"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"F-number (Aperture)",children:[l.jsx(Ro,{locked:te.aperture,onToggle:()=>fe(I=>({...I,aperture:!I.aperture}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"F/"}),l.jsx("input",{type:"number",value:Y.aperture,step:"0.05",min:"0.7",max:"64",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,aperture:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"OLPF two-image split separation d (px)",children:[l.jsx(Ro,{locked:te.olpfSeparationPx,onToggle:()=>fe(I=>({...I,olpfSeparationPx:!I.olpfSeparationPx}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"OLPF d:"}),l.jsx("input",{type:"number",value:Y.olpfSeparationPx,step:"0.01",min:"0",max:"5",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,olpfSeparationPx:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Pixel Fill Factor (0..1)",children:[l.jsx(Ro,{locked:te.fillFactor,onToggle:()=>fe(I=>({...I,fillFactor:!I.fillFactor}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Fill:"}),l.jsx("input",{type:"number",value:Y.fillFactor,step:"0.01",min:"0",max:"1",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,fillFactor:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Spherical core sigma (px)",children:[l.jsx(Ro,{locked:te.coreSigmaPx,onToggle:()=>fe(I=>({...I,coreSigmaPx:!I.coreSigmaPx}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Core :"}),l.jsx("input",{type:"number",value:Y.coreSigmaPx,step:"0.01",min:"0",max:"10",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,coreSigmaPx:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Spherical halo sigma (px)",children:[l.jsx(Ro,{locked:te.haloSigmaPx,onToggle:()=>fe(I=>({...I,haloSigmaPx:!I.haloSigmaPx}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Halo :"}),l.jsx("input",{type:"number",value:Y.haloSigmaPx,step:"0.01",min:"0",max:"50",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,haloSigmaPx:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Halo weight 0..1",children:[l.jsx(Ro,{locked:te.haloWeight,onToggle:()=>fe(I=>({...I,haloWeight:!I.haloWeight}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Halo w:"}),l.jsx("input",{type:"number",value:Y.haloWeight,step:"0.01",min:"0",max:"1",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,haloWeight:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Wavelength (m) for diffraction model",children:[l.jsx(Ro,{locked:te.wavelengthUm,onToggle:()=>fe(I=>({...I,wavelengthUm:!I.wavelengthUm}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"number",value:Y.wavelengthUm,step:"0.01",min:"0.35",max:"0.75",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,wavelengthUm:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"m"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Manual rolloff exponent",children:[l.jsx(Ro,{locked:te.rolloff,onToggle:()=>fe(I=>({...I,rolloff:!I.rolloff}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Rolloff:"}),l.jsx("input",{type:"number",value:Y.rolloff,step:"0.01",min:"0.1",max:"10",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>{const be=parseFloat(I.target.value);Number.isFinite(be)&&ne(Ne=>({...Ne,rolloff:be}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Fit:"}),l.jsx("input",{type:"number",value:se,step:"0.001",min:"0",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>ye(I.target.value),className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs",title:`Fit range min (${Ft})`}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"to"}),l.jsx("input",{type:"number",value:ie,step:"0.001",min:"0",onMouseDown:I=>I.stopPropagation(),onClick:I=>I.stopPropagation(),onChange:I=>X(I.target.value),className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs",placeholder:`${nr.toFixed(2)}`,title:`Fit range max (${Ft}), blank = current max`}),l.jsx("button",{onMouseDown:I=>I.stopPropagation(),onClick:I=>{I.stopPropagation(),le||Hr()},disabled:le||!ge,className:`px-2 py-1 rounded font-bold text-white text-xs transition-transform active:scale-95 ${le?"bg-gray-400":"bg-indigo-600 hover:bg-indigo-500"}`,title:"Auto fit UNLOCKED params to measured MTF in the given frequency range",children:le?"Fitting":"Auto Fit"})]}),l.jsx("span",{className:"text-[10px] text-gray-500 dark:text-slate-400 italic ml-2",children:"Dot filled = locked. Auto Fit only changes unlocked params."}),oe&&l.jsx("span",{className:"text-[10px] text-gray-500 dark:text-slate-400 italic ml-2",children:oe})]}),l.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[l.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[l.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),l.jsx("div",{className:"flex-1 min-h-0 w-full",children:l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:Wt,children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),l.jsx(ja,{dataKey:"x",hide:!0}),l.jsx(_a,{hide:!0,domain:["auto","auto"]}),l.jsx(Un,{contentStyle:{fontSize:"10px"}}),l.jsx(_n,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),l.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",Se>1?`(x${Se.toFixed(0)})`:""]}),l.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[l.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),l.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:Se,onMouseDown:I=>I.stopPropagation(),onChange:I=>me(parseFloat(I.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),l.jsx("div",{className:"flex-1 min-h-0 w-full",children:l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:pt,children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),l.jsx(Zo,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),l.jsx(ja,{dataKey:"x",hide:!0}),l.jsx(_a,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[I=>I,I=>I/Se],allowDataOverflow:!0,tickFormatter:I=>I.toFixed(3)}),l.jsx(Un,{contentStyle:{fontSize:"10px"},formatter:I=>[I.toFixed(5),"Amplitude"]}),l.jsx(_n,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),l.jsxs("div",{className:"flex-1 flex gap-4 min-h-[250px]",children:[l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF"}),l.jsxs("div",{className:"flex gap-4 items-center",children:[(ge==null?void 0:ge.mtf50)&&l.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",l.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[ge.mtf50.toFixed(2)," ",Ft]})]}),sn!==null&&l.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(sn)," LW/PH"]})]})]}),l.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:l.jsx("svg",{viewBox:"0 0 400 60",className:"w-[30rem] h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:Fe,margin:{top:10,right:30,left:10,bottom:20},children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),l.jsx(ja,{dataKey:"freq",type:"number",domain:[0,nr],tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${Ft})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),l.jsx(_a,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:I=>`Freq: ${Number(I).toFixed(3)} ${Ft}`,formatter:(I,be)=>be==="Model"?[I==null?void 0:I.toFixed(4),"Model"]:[I==null?void 0:I.toFixed(4),"Measured"]}),l.jsx(qi,{verticalAlign:"top",height:20}),l.jsx(_n,{type:"monotone",dataKey:"mtf",name:"Measured",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1,connectNulls:!1}),W&&l.jsx(_n,{type:"monotone",dataKey:"modelMtf",name:"Model",stroke:"#0066cc",strokeWidth:2,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1,connectNulls:!0}),(ge==null?void 0:ge.mtf50)&&l.jsx(ud,{x:ge.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:l.jsx(aa,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]}),E&&l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsx("div",{className:"flex justify-between items-start px-2 mb-1",children:l.jsx("h4",{className:"text-xs font-bold text-teal-600 dark:text-teal-400 uppercase",children:"PTF / Phase"})}),l.jsx("div",{className:"flex-1 relative min-h-0 w-full",children:l.jsx(Wi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:Lt,margin:{top:10,right:30,left:10,bottom:20},children:[l.jsx(Mi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),l.jsx(ja,{dataKey:"freq",type:"number",domain:[0,nr],tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${Ft})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),l.jsx(_a,{tick:{fontSize:10,fill:"#9ca3af"},label:{value:"Phase (Rad)",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:I=>`Freq: ${Number(I).toFixed(3)} ${Ft}`,formatter:I=>[I==null?void 0:I.toFixed(4),"Phase (Rad)"]}),l.jsx(_n,{type:"monotone",dataKey:"ptf",name:"Phase",stroke:"#0d9488",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]})]})]}),!Tt&&l.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:on})]})},ine=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations to prevent premature overflow and allow negative offsets
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,one=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=C.useState(!0),[c,u]=C.useState(!1),[f,d]=C.useState(""),p=C.useRef(null),m=C.useRef(null),[x,b]=C.useState(4),[S,v]=C.useState(0),[y,w]=C.useState(""),[P,j]=C.useState(""),[k,O]=C.useState("RGGB"),[A,R]=C.useState(!1),[E,T]=C.useState(100),[B,G]=C.useState(4e3),[V,z]=C.useState(0),[D,L]=C.useState(0),F=C.useMemo(()=>Object.keys(fc).sort(),[]);C.useEffect(()=>{e&&!p.current&&(async()=>{try{const Y=await window.loadPyodide();await Y.loadPackage("numpy"),await Y.runPythonAsync(ine),p.current=Y,s(!1)}catch(Y){console.error("Pyodide Init Failed",Y)}})()},[e]),C.useEffect(()=>{if(e&&r){const J=r.whiteLevel;J>1e4?b(2):J>3e3?b(4):J>6e4&&b(0);const Y=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(Y)?O(Y):O("RGGB");const ne=Math.min(r.width,r.height),te=Math.max(48,Math.round(ne/40));T(te),z(Math.round(te*10)),L(Math.round(r.height-te*2))}},[e,r]);const H=async J=>{if(!J.target.files||J.target.files.length===0||!p.current)return;const Y=Array.from(J.target.files);u(!0);const ne=y.trim()?y.trim().split(/\s+/).map(Number):[0,0,0,0];for(ne.length===1&&!isNaN(ne[0])&&ne.push(ne[0],ne[0],ne[0]);ne.length<4;)ne.push(0);const te=P.trim()?P.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(te.length!==9){alert("Color Matrix must contain exactly 9 numeric values."),u(!1);return}const fe=p.current;for(let se=0;se<Y.length;se++){const ye=Y[se];d(`Processing ${se+1}/${Y.length}: ${ye.name}`);try{const ie=await ye.arrayBuffer(),X=await hc(ie);let le;if(A){const De=document.createElement("canvas");De.width=X.width,De.height=X.height;const ze=De.getContext("2d");if(ze){ze.fillStyle="black",ze.fillRect(0,0,De.width,De.height),ze.font=`bold ${E}px sans-serif`,ze.fillStyle="white",ze.textBaseline="middle",ze.textAlign="center",ze.fillText("(C)  y-g-jiang.github.io",V,D);const Be=ze.getImageData(0,0,De.width,De.height).data;le=new Uint16Array(X.data);const et=le.length;for(let yt=0;yt<et;yt++)if(Be[yt*4]>128){let dt=le[yt]+B;dt<0&&(dt=0),dt>65535&&(dt=65535),le[yt]=dt}}else le=new Uint16Array(X.data)}else le=X.data;fe.globals.set("js_raw_bytes",new Uint8Array(le.buffer,le.byteOffset,le.byteLength)),fe.globals.set("js_width",X.width),fe.globals.set("js_height",X.height),fe.globals.set("js_cfa",k),fe.globals.set("js_bl_list",ne),fe.globals.set("js_shift",x),fe.globals.set("js_linear_shift",S),fe.globals.set("js_cm_flat",te);const he=await fe.runPythonAsync(`
                    convert_to_dng(
                        js_raw_bytes.to_py(), 
                        js_width, 
                        js_height, 
                        js_cfa, 
                        js_bl_list.to_py(), 
                        js_shift,
                        js_linear_shift,
                        js_cm_flat.to_py()
                    )
                `),oe=he.toJs();he.destroy();const je=new Blob([oe],{type:"image/x-adobe-dng"}),Se=URL.createObjectURL(je),me=document.createElement("a");me.href=Se;const ge=ye.name.substring(0,ye.name.lastIndexOf("."))||"image",Ce=A?"_wm":"";me.download=`${ge}_16bit_manual${Ce}.dng`,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(Se),await new Promise(De=>setTimeout(De,200))}catch(ie){console.error(`Failed to batch process ${ye.name}`,ie)}}u(!1),d(""),J.target.value=""},W=async()=>{if(!(!r||!p.current)){u(!0);try{const J=p.current,Y=y.trim()?y.trim().split(/\s+/).map(Number):[0,0,0,0];if(Y.length===1&&!isNaN(Y[0])&&Y.push(Y[0],Y[0],Y[0]),Y.length<4)for(;Y.length<4;)Y.push(0);const ne=P.trim()?P.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(ne.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const te=k;let fe;if(A){const je=document.createElement("canvas");je.width=r.width,je.height=r.height;const Se=je.getContext("2d");if(Se){Se.fillStyle="black",Se.fillRect(0,0,je.width,je.height),Se.font=`bold ${E}px sans-serif`,Se.fillStyle="white",Se.textBaseline="middle",Se.textAlign="center",Se.fillText("(C)  y-g-jiang.github.io",V,D);const me=Se.getImageData(0,0,je.width,je.height).data;fe=new Uint16Array(r.data);const ge=fe.length;for(let Ce=0;Ce<ge;Ce++)if(me[Ce*4]>128){let De=fe[Ce]+B;De<0&&(De=0),De>65535&&(De=65535),fe[Ce]=De}}else fe=new Uint16Array(r.data)}else fe=r.data;J.globals.set("js_raw_bytes",new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength)),J.globals.set("js_width",r.width),J.globals.set("js_height",r.height),J.globals.set("js_cfa",te),J.globals.set("js_bl_list",Y),J.globals.set("js_shift",x),J.globals.set("js_linear_shift",S),J.globals.set("js_cm_flat",ne);const se=await J.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift,
                    js_linear_shift,
                    js_cm_flat.to_py()
                )
            `),ye=se.toJs();se.destroy();const ie=new Blob([ye],{type:"image/x-adobe-dng"}),X=URL.createObjectURL(ie),le=document.createElement("a");le.href=X;const he=n.substring(0,n.lastIndexOf("."))||"image",oe=A?"_wm":"";le.download=`${he}_16bit_manual${oe}.dng`,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(X)}catch(J){console.error(J),alert("Export Failed: "+J.message)}finally{u(!1)}}};return e?l.jsxs(Ss,{initialPosition:{x:window.innerWidth/2-250,y:50},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[l.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),l.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?l.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),l.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),l.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),l.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Bit Shift (<<)"}),l.jsx("input",{type:"number",value:x,onChange:J=>b(parseInt(J.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),l.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase",children:"Offset (+)"}),l.jsx("input",{type:"number",value:S,onChange:J=>v(parseInt(J.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),l.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),l.jsxs("select",{value:k,onChange:J=>O(J.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[l.jsx("option",{value:"RGGB",children:"RGGB"}),l.jsx("option",{value:"BGGR",children:"BGGR"}),l.jsx("option",{value:"GBRG",children:"GBRG"}),l.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),l.jsx("div",{className:"mt-[-10px] grid grid-cols-3 gap-4",children:l.jsx("div",{className:"text-[9px] text-gray-400 dark:text-gray-500 col-span-2",children:"Shift: 4=12bit(x16), 2=14bit(x4). Added after shift."})}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level (Manual Fill)"}),l.jsx("input",{type:"text",value:y,onChange:J=>w(J.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),l.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:J=>{const Y=fc[J.target.value];Y&&j(Y),J.target.value=""},defaultValue:"",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),F.map(J=>l.jsx("option",{value:J,children:J},J))]})]}),l.jsx("textarea",{value:P,onChange:J=>j(J.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),l.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),l.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("input",{type:"checkbox",id:"enableWatermark",checked:A,onChange:J=>R(J.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),l.jsx("label",{htmlFor:"enableWatermark",className:"text-xs font-bold text-gray-700 dark:text-gray-300 select-none",children:"Add Watermark: (C)  y-g-jiang.github.io"})]}),A&&l.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Size (px)"}),l.jsx("input",{type:"number",value:E,onChange:J=>T(Math.max(10,parseInt(J.target.value)||10)),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Depth (Shift DN)"}),l.jsx("input",{type:"number",value:B,onChange:J=>G(parseInt(J.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs",placeholder:"+/- value"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Center X"}),l.jsx("input",{type:"number",value:V,onChange:J=>z(parseInt(J.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Center Y"}),l.jsx("input",{type:"number",value:D,onChange:J=>L(parseInt(J.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs"})]})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"file",ref:m,multiple:!0,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:H}),l.jsx("button",{onClick:()=>{var J;return(J=m.current)==null?void 0:J.click()},disabled:c,className:"flex-1 py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 bg-white dark:bg-slate-800 border-2 border-black dark:border-white text-black dark:text-white hover:bg-gray-100 dark:hover:bg-slate-700",children:"Batch Export (Files)"}),l.jsx("button",{onClick:W,disabled:c,className:`flex-[2] py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${c?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:c?"Processing...":"Export Single"})]}),f&&l.jsx("div",{className:"text-center text-xs font-bold text-cyan-600 dark:text-cyan-400 animate-pulse",children:f})]})})]}):null};async function AN(e={}){var Lb,Bb,Fb;var t,r=e,n=!!globalThis.window,a=!!globalThis.WorkerGlobalScope,i=((Bb=(Lb=globalThis.process)==null?void 0:Lb.versions)==null?void 0:Bb.node)&&((Fb=globalThis.process)==null?void 0:Fb.type)!="renderer";if(i){const{createRequire:h}=await Tj(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);var o=h(import.meta.url)}var s="./this.program",c=(h,g)=>{throw g},u=import.meta.url,f="";function d(h){return r.locateFile?r.locateFile(h,f):f+h}var p,m;if(i){var x=o("fs");u.startsWith("file:")&&(f=o("path").dirname(o("url").fileURLToPath(u))+"/"),m=h=>{h=w(h)?new URL(h):h;var g=x.readFileSync(h);return g},p=async(h,g=!0)=>{h=w(h)?new URL(h):h;var _=x.readFileSync(h,g?void 0:"utf8");return _},process.argv.length>1&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),c=(h,g)=>{throw process.exitCode=h,g}}else if(n||a){try{f=new URL(".",u).href}catch{}a&&(m=h=>{var g=new XMLHttpRequest;return g.open("GET",h,!1),g.responseType="arraybuffer",g.send(null),new Uint8Array(g.response)}),p=async h=>{if(w(h))return new Promise((_,N)=>{var $=new XMLHttpRequest;$.open("GET",h,!0),$.responseType="arraybuffer",$.onload=()=>{if($.status==200||$.status==0&&$.response){_($.response);return}N($.status)},$.onerror=N,$.send(null)});var g=await fetch(h,{credentials:"same-origin"});if(g.ok)return g.arrayBuffer();throw new Error(g.status+" : "+g.url)}}var b=console.log.bind(console),S=console.error.bind(console),v,y=!1,w=h=>h.startsWith("file://"),P,j,k,O,A,R,E,T,B,G,V,z,D=!1;function L(){var h=Nn.buffer;k=new Int8Array(h),A=new Int16Array(h),O=new Uint8Array(h),R=new Uint16Array(h),E=new Int32Array(h),T=new Uint32Array(h),B=new Float32Array(h),G=new Float64Array(h),V=new BigInt64Array(h),z=new BigUint64Array(h)}function F(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)me(r.preRun.shift());he(Se)}function H(){D=!0,!r.noFSInit&&!M.initialized&&M.init(),Ps.da(),M.ignorePermissions=!1}function W(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)je(r.postRun.shift());he(oe)}function J(h){var _;(_=r.onAbort)==null||_.call(r,h),h="Aborted("+h+")",S(h),y=!0,h+=". Build with -sASSERTIONS for more info.";var g=new WebAssembly.RuntimeError(h);throw j==null||j(g),g}var Y;function ne(){return r.locateFile?d("joraw.wasm"):new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href}function te(h){if(h==Y&&v)return new Uint8Array(v);if(m)return m(h);throw"both async and sync fetching of the wasm failed"}async function fe(h){if(!v)try{var g=await p(h);return new Uint8Array(g)}catch{}return te(h)}async function se(h,g){try{var _=await fe(h),N=await WebAssembly.instantiate(_,g);return N}catch($){S(`failed to asynchronously prepare wasm: ${$}`),J($)}}async function ye(h,g,_){if(!h&&!w(g)&&!i)try{var N=fetch(g,{credentials:"same-origin"}),$=await WebAssembly.instantiateStreaming(N,_);return $}catch(U){S(`wasm streaming compile failed: ${U}`),S("falling back to ArrayBuffer instantiation")}return se(g,_)}function ie(){var h={a:Fi};return h}async function X(){function h(U,K){return Ps=U.exports,Ps=DN(Ps),On(Ps),L(),Ps}function g(U){return h(U.instance)}var _=ie();if(r.instantiateWasm)return new Promise((U,K)=>{r.instantiateWasm(_,(ae,de)=>{U(h(ae))})});Y??(Y=ne());var N=await ye(v,Y,_),$=g(N);return $}class le{constructor(g){wr(this,"name","ExitStatus");this.message=`Program terminated with exit(${g})`,this.status=g}}var he=h=>{for(;h.length>0;)h.shift()(r)},oe=[],je=h=>oe.push(h),Se=[],me=h=>Se.push(h),ge=!0,Ce=h=>Tr(h),De=()=>qn(),ze=9007199254740992,Be=-9007199254740992,et=h=>h<Be||h>ze?NaN:Number(h),yt=globalThis.TextDecoder&&new TextDecoder,dt=(h,g,_,N)=>{var $=g+_;if(N)return $;for(;h[g]&&!(g>=$);)++g;return g},cr=(h,g=0,_,N)=>{g>>>=0;var $=dt(h,g,_,N);if($-g>16&&h.buffer&&yt)return yt.decode(h.subarray(g,$));for(var U="";g<$;){var K=h[g++];if(!(K&128)){U+=String.fromCharCode(K);continue}var ae=h[g++]&63;if((K&224)==192){U+=String.fromCharCode((K&31)<<6|ae);continue}var de=h[g++]&63;if((K&240)==224?K=(K&15)<<12|ae<<6|de:K=(K&7)<<18|ae<<12|de<<6|h[g++]&63,K<65536)U+=String.fromCharCode(K);else{var Te=K-65536;U+=String.fromCharCode(55296|Te>>10,56320|Te&1023)}}return U},St=(h,g,_)=>(h>>>=0,h?cr(O,h,g,_):"");function ur(h,g,_,N){return h>>>=0,g>>>=0,N>>>=0,J(`Assertion failed: ${St(h)}, at: `+[g?St(g):"unknown filename",_,N?St(N):"unknown function"])}class jt{constructor(g){this.excPtr=g,this.ptr=g-24}set_type(g){T[this.ptr+4>>>2>>>0]=g}get_type(){return T[this.ptr+4>>>2>>>0]}set_destructor(g){T[this.ptr+8>>>2>>>0]=g}get_destructor(){return T[this.ptr+8>>>2>>>0]}set_caught(g){g=g?1:0,k[this.ptr+12>>>0]=g}get_caught(){return k[this.ptr+12>>>0]!=0}set_rethrown(g){g=g?1:0,k[this.ptr+13>>>0]=g}get_rethrown(){return k[this.ptr+13>>>0]!=0}init(g,_){this.set_adjusted_ptr(0),this.set_type(g),this.set_destructor(_)}set_adjusted_ptr(g){T[this.ptr+16>>>2>>>0]=g}get_adjusted_ptr(){return T[this.ptr+16>>>2>>>0]}}var fr=0;function $r(h,g,_){h>>>=0,g>>>=0,_>>>=0;var N=new jt(h);throw N.init(g,_),fr=h,fr}var Tt=()=>{var h=E[+Fe.varargs>>>2>>>0];return Fe.varargs+=4,h},_r=Tt,Qe={isAbs:h=>h.charAt(0)==="/",splitPath:h=>{var g=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return g.exec(h).slice(1)},normalizeArray:(h,g)=>{for(var _=0,N=h.length-1;N>=0;N--){var $=h[N];$==="."?h.splice(N,1):$===".."?(h.splice(N,1),_++):_&&(h.splice(N,1),_--)}if(g)for(;_;_--)h.unshift("..");return h},normalize:h=>{var g=Qe.isAbs(h),_=h.slice(-1)==="/";return h=Qe.normalizeArray(h.split("/").filter(N=>!!N),!g).join("/"),!h&&!g&&(h="."),h&&_&&(h+="/"),(g?"/":"")+h},dirname:h=>{var g=Qe.splitPath(h),_=g[0],N=g[1];return!_&&!N?".":(N&&(N=N.slice(0,-1)),_+N)},basename:h=>h&&h.match(/([^\/]+|\/)\/*$/)[1],join:(...h)=>Qe.normalize(h.join("/")),join2:(h,g)=>Qe.normalize(h+"/"+g)},_t=()=>{if(i){var h=o("crypto");return g=>h.randomFillSync(g)}return g=>crypto.getRandomValues(g)},Qt=h=>{(Qt=_t())(h)},Bt={resolve:(...h)=>{for(var g="",_=!1,N=h.length-1;N>=-1&&!_;N--){var $=N>=0?h[N]:M.cwd();if(typeof $!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!$)return"";g=$+"/"+g,_=Qe.isAbs($)}return g=Qe.normalizeArray(g.split("/").filter(U=>!!U),!_).join("/"),(_?"/":"")+g||"."},relative:(h,g)=>{h=Bt.resolve(h).slice(1),g=Bt.resolve(g).slice(1);function _(Te){for(var Ze=0;Ze<Te.length&&Te[Ze]==="";Ze++);for(var st=Te.length-1;st>=0&&Te[st]==="";st--);return Ze>st?[]:Te.slice(Ze,st-Ze+1)}for(var N=_(h.split("/")),$=_(g.split("/")),U=Math.min(N.length,$.length),K=U,ae=0;ae<U;ae++)if(N[ae]!==$[ae]){K=ae;break}for(var de=[],ae=K;ae<N.length;ae++)de.push("..");return de=de.concat($.slice(K)),de.join("/")}},yr=[],rr=h=>{for(var g=0,_=0;_<h.length;++_){var N=h.charCodeAt(_);N<=127?g++:N<=2047?g+=2:N>=55296&&N<=57343?(g+=4,++_):g+=3}return g},Jr=(h,g,_,N)=>{if(_>>>=0,!(N>0))return 0;for(var $=_,U=_+N-1,K=0;K<h.length;++K){var ae=h.codePointAt(K);if(ae<=127){if(_>=U)break;g[_++>>>0]=ae}else if(ae<=2047){if(_+1>=U)break;g[_++>>>0]=192|ae>>6,g[_++>>>0]=128|ae&63}else if(ae<=65535){if(_+2>=U)break;g[_++>>>0]=224|ae>>12,g[_++>>>0]=128|ae>>6&63,g[_++>>>0]=128|ae&63}else{if(_+3>=U)break;g[_++>>>0]=240|ae>>18,g[_++>>>0]=128|ae>>12&63,g[_++>>>0]=128|ae>>6&63,g[_++>>>0]=128|ae&63,K++}}return g[_>>>0]=0,_-$},Ft=(h,g,_)=>{var N=rr(h)+1,$=new Array(N),U=Jr(h,$,0,$.length);return $.length=U,$},hn=()=>{var U;if(!yr.length){var h=null;if(i){var g=256,_=Buffer.alloc(g),N=0,$=process.stdin.fd;try{N=x.readSync($,_,0,g)}catch(K){if(K.toString().includes("EOF"))N=0;else throw K}N>0&&(h=_.slice(0,N).toString("utf-8"))}else(U=globalThis.window)!=null&&U.prompt&&(h=window.prompt("Input: "),h!==null&&(h+=`
`));if(!h)return null;yr=Ft(h)}return yr.shift()},Pt={ttys:[],init(){},shutdown(){},register(h,g){Pt.ttys[h]={input:[],output:[],ops:g},M.registerDevice(h,Pt.stream_ops)},stream_ops:{open(h){var g=Pt.ttys[h.node.rdev];if(!g)throw new M.ErrnoError(43);h.tty=g,h.seekable=!1},close(h){h.tty.ops.fsync(h.tty)},fsync(h){h.tty.ops.fsync(h.tty)},read(h,g,_,N,$){if(!h.tty||!h.tty.ops.get_char)throw new M.ErrnoError(60);for(var U=0,K=0;K<N;K++){var ae;try{ae=h.tty.ops.get_char(h.tty)}catch{throw new M.ErrnoError(29)}if(ae===void 0&&U===0)throw new M.ErrnoError(6);if(ae==null)break;U++,g[_+K]=ae}return U&&(h.node.atime=Date.now()),U},write(h,g,_,N,$){if(!h.tty||!h.tty.ops.put_char)throw new M.ErrnoError(60);try{for(var U=0;U<N;U++)h.tty.ops.put_char(h.tty,g[_+U])}catch{throw new M.ErrnoError(29)}return N&&(h.node.mtime=h.node.ctime=Date.now()),U}},default_tty_ops:{get_char(h){return hn()},put_char(h,g){g===null||g===10?(b(cr(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;((g=h.output)==null?void 0:g.length)>0&&(b(cr(h.output)),h.output=[])},ioctl_tcgets(h){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(h,g,_){return 0},ioctl_tiocgwinsz(h){return[24,80]}},default_tty1_ops:{put_char(h,g){g===null||g===10?(S(cr(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;((g=h.output)==null?void 0:g.length)>0&&(S(cr(h.output)),h.output=[])}}},en=h=>{J()},Ue={ops_table:null,mount(h){return Ue.createNode(null,"/",16895,0)},createNode(h,g,_,N){if(M.isBlkdev(_)||M.isFIFO(_))throw new M.ErrnoError(63);Ue.ops_table||(Ue.ops_table={dir:{node:{getattr:Ue.node_ops.getattr,setattr:Ue.node_ops.setattr,lookup:Ue.node_ops.lookup,mknod:Ue.node_ops.mknod,rename:Ue.node_ops.rename,unlink:Ue.node_ops.unlink,rmdir:Ue.node_ops.rmdir,readdir:Ue.node_ops.readdir,symlink:Ue.node_ops.symlink},stream:{llseek:Ue.stream_ops.llseek}},file:{node:{getattr:Ue.node_ops.getattr,setattr:Ue.node_ops.setattr},stream:{llseek:Ue.stream_ops.llseek,read:Ue.stream_ops.read,write:Ue.stream_ops.write,mmap:Ue.stream_ops.mmap,msync:Ue.stream_ops.msync}},link:{node:{getattr:Ue.node_ops.getattr,setattr:Ue.node_ops.setattr,readlink:Ue.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ue.node_ops.getattr,setattr:Ue.node_ops.setattr},stream:M.chrdev_stream_ops}});var $=M.createNode(h,g,_,N);return M.isDir($.mode)?($.node_ops=Ue.ops_table.dir.node,$.stream_ops=Ue.ops_table.dir.stream,$.contents={}):M.isFile($.mode)?($.node_ops=Ue.ops_table.file.node,$.stream_ops=Ue.ops_table.file.stream,$.usedBytes=0,$.contents=null):M.isLink($.mode)?($.node_ops=Ue.ops_table.link.node,$.stream_ops=Ue.ops_table.link.stream):M.isChrdev($.mode)&&($.node_ops=Ue.ops_table.chrdev.node,$.stream_ops=Ue.ops_table.chrdev.stream),$.atime=$.mtime=$.ctime=Date.now(),h&&(h.contents[g]=$,h.atime=h.mtime=h.ctime=$.atime),$},getFileDataAsTypedArray(h){return h.contents?h.contents.subarray?h.contents.subarray(0,h.usedBytes):new Uint8Array(h.contents):new Uint8Array(0)},expandFileStorage(h,g){var _=h.contents?h.contents.length:0;if(!(_>=g)){var N=1024*1024;g=Math.max(g,_*(_<N?2:1.125)>>>0),_!=0&&(g=Math.max(g,256));var $=h.contents;h.contents=new Uint8Array(g),h.usedBytes>0&&h.contents.set($.subarray(0,h.usedBytes),0)}},resizeFileStorage(h,g){if(h.usedBytes!=g)if(g==0)h.contents=null,h.usedBytes=0;else{var _=h.contents;h.contents=new Uint8Array(g),_&&h.contents.set(_.subarray(0,Math.min(g,h.usedBytes))),h.usedBytes=g}},node_ops:{getattr(h){var g={};return g.dev=M.isChrdev(h.mode)?h.id:1,g.ino=h.id,g.mode=h.mode,g.nlink=1,g.uid=0,g.gid=0,g.rdev=h.rdev,M.isDir(h.mode)?g.size=4096:M.isFile(h.mode)?g.size=h.usedBytes:M.isLink(h.mode)?g.size=h.link.length:g.size=0,g.atime=new Date(h.atime),g.mtime=new Date(h.mtime),g.ctime=new Date(h.ctime),g.blksize=4096,g.blocks=Math.ceil(g.size/g.blksize),g},setattr(h,g){for(const _ of["mode","atime","mtime","ctime"])g[_]!=null&&(h[_]=g[_]);g.size!==void 0&&Ue.resizeFileStorage(h,g.size)},lookup(h,g){throw Ue.doesNotExistError||(Ue.doesNotExistError=new M.ErrnoError(44),Ue.doesNotExistError.stack="<generic error, no stack>"),Ue.doesNotExistError},mknod(h,g,_,N){return Ue.createNode(h,g,_,N)},rename(h,g,_){var N;try{N=M.lookupNode(g,_)}catch{}if(N){if(M.isDir(h.mode))for(var $ in N.contents)throw new M.ErrnoError(55);M.hashRemoveNode(N)}delete h.parent.contents[h.name],g.contents[_]=h,h.name=_,g.ctime=g.mtime=h.parent.ctime=h.parent.mtime=Date.now()},unlink(h,g){delete h.contents[g],h.ctime=h.mtime=Date.now()},rmdir(h,g){var _=M.lookupNode(h,g);for(var N in _.contents)throw new M.ErrnoError(55);delete h.contents[g],h.ctime=h.mtime=Date.now()},readdir(h){return[".","..",...Object.keys(h.contents)]},symlink(h,g,_){var N=Ue.createNode(h,g,41471,0);return N.link=_,N},readlink(h){if(!M.isLink(h.mode))throw new M.ErrnoError(28);return h.link}},stream_ops:{read(h,g,_,N,$){var U=h.node.contents;if($>=h.node.usedBytes)return 0;var K=Math.min(h.node.usedBytes-$,N);if(K>8&&U.subarray)g.set(U.subarray($,$+K),_);else for(var ae=0;ae<K;ae++)g[_+ae]=U[$+ae];return K},write(h,g,_,N,$,U){if(g.buffer===k.buffer&&(U=!1),!N)return 0;var K=h.node;if(K.mtime=K.ctime=Date.now(),g.subarray&&(!K.contents||K.contents.subarray)){if(U)return K.contents=g.subarray(_,_+N),K.usedBytes=N,N;if(K.usedBytes===0&&$===0)return K.contents=g.slice(_,_+N),K.usedBytes=N,N;if($+N<=K.usedBytes)return K.contents.set(g.subarray(_,_+N),$),N}if(Ue.expandFileStorage(K,$+N),K.contents.subarray&&g.subarray)K.contents.set(g.subarray(_,_+N),$);else for(var ae=0;ae<N;ae++)K.contents[$+ae]=g[_+ae];return K.usedBytes=Math.max(K.usedBytes,$+N),N},llseek(h,g,_){var N=g;if(_===1?N+=h.position:_===2&&M.isFile(h.node.mode)&&(N+=h.node.usedBytes),N<0)throw new M.ErrnoError(28);return N},mmap(h,g,_,N,$){if(!M.isFile(h.node.mode))throw new M.ErrnoError(43);var U,K,ae=h.node.contents;if(!($&2)&&ae&&ae.buffer===k.buffer)K=!1,U=ae.byteOffset;else{if(K=!0,U=en(),!U)throw new M.ErrnoError(48);ae&&((_>0||_+g<ae.length)&&(ae.subarray?ae=ae.subarray(_,_+g):ae=Array.prototype.slice.call(ae,_,_+g)),k.set(ae,U>>>0))}return{ptr:U,allocated:K}},msync(h,g,_,N,$){return Ue.stream_ops.write(h,g,0,N,_,!1),0}}},nn=h=>{var g={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},_=g[h];if(typeof _>"u")throw new Error(`Unknown file open mode: ${h}`);return _},Or=(h,g)=>{var _=0;return h&&(_|=365),g&&(_|=146),_},pn=async h=>{var g=await p(h);return new Uint8Array(g)},an=(...h)=>M.createDataFile(...h),or=0,Lr=null,gn=h=>{var _;if(or--,(_=r.monitorRunDependencies)==null||_.call(r,or),or==0&&Lr){var g=Lr;Lr=null,g()}},on=h=>{var g;or++,(g=r.monitorRunDependencies)==null||g.call(r,or)},sn=[],hr=async(h,g)=>{typeof Browser<"u"&&Browser.init();for(var _ of sn)if(_.canHandle(g))return _.handle(h,g);return h},nr=async(h,g,_,N,$,U,K,ae)=>{var de=g?Bt.resolve(Qe.join2(h,g)):h;on();try{var Te=_;typeof _=="string"&&(Te=await pn(_)),Te=await hr(Te,de),ae==null||ae(),U||an(h,g,Te,N,$,K)}finally{gn()}},ar=(h,g,_,N,$,U,K,ae,de,Te)=>{nr(h,g,_,N,$,ae,de,Te).then(U).catch(K)},M={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{constructor(h){wr(this,"name","ErrnoError");this.errno=h}},FSStream:class{constructor(){wr(this,"shared",{})}get object(){return this.node}set object(h){this.node=h}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(h){this.shared.flags=h}get position(){return this.shared.position}set position(h){this.shared.position=h}},FSNode:class{constructor(h,g,_,N){wr(this,"node_ops",{});wr(this,"stream_ops",{});wr(this,"readMode",365);wr(this,"writeMode",146);wr(this,"mounted",null);h||(h=this),this.parent=h,this.mount=h.mount,this.id=M.nextInode++,this.name=g,this.mode=_,this.rdev=N,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(h){h?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(h){h?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return M.isDir(this.mode)}get isDevice(){return M.isChrdev(this.mode)}},lookupPath(h,g={}){if(!h)throw new M.ErrnoError(44);g.follow_mount??(g.follow_mount=!0),Qe.isAbs(h)||(h=M.cwd()+"/"+h);e:for(var _=0;_<40;_++){for(var N=h.split("/").filter(Te=>!!Te),$=M.root,U="/",K=0;K<N.length;K++){var ae=K===N.length-1;if(ae&&g.parent)break;if(N[K]!=="."){if(N[K]===".."){if(U=Qe.dirname(U),M.isRoot($)){h=U+"/"+N.slice(K+1).join("/"),_--;continue e}else $=$.parent;continue}U=Qe.join2(U,N[K]);try{$=M.lookupNode($,N[K])}catch(Te){if((Te==null?void 0:Te.errno)===44&&ae&&g.noent_okay)return{path:U};throw Te}if(M.isMountpoint($)&&(!ae||g.follow_mount)&&($=$.mounted.root),M.isLink($.mode)&&(!ae||g.follow)){if(!$.node_ops.readlink)throw new M.ErrnoError(52);var de=$.node_ops.readlink($);Qe.isAbs(de)||(de=Qe.dirname(U)+"/"+de),h=de+"/"+N.slice(K+1).join("/");continue e}}}return{path:U,node:$}}throw new M.ErrnoError(32)},getPath(h){for(var g;;){if(M.isRoot(h)){var _=h.mount.mountpoint;return g?_[_.length-1]!=="/"?`${_}/${g}`:_+g:_}g=g?`${h.name}/${g}`:h.name,h=h.parent}},hashName(h,g){for(var _=0,N=0;N<g.length;N++)_=(_<<5)-_+g.charCodeAt(N)|0;return(h+_>>>0)%M.nameTable.length},hashAddNode(h){var g=M.hashName(h.parent.id,h.name);h.name_next=M.nameTable[g],M.nameTable[g]=h},hashRemoveNode(h){var g=M.hashName(h.parent.id,h.name);if(M.nameTable[g]===h)M.nameTable[g]=h.name_next;else for(var _=M.nameTable[g];_;){if(_.name_next===h){_.name_next=h.name_next;break}_=_.name_next}},lookupNode(h,g){var _=M.mayLookup(h);if(_)throw new M.ErrnoError(_);for(var N=M.hashName(h.id,g),$=M.nameTable[N];$;$=$.name_next){var U=$.name;if($.parent.id===h.id&&U===g)return $}return M.lookup(h,g)},createNode(h,g,_,N){var $=new M.FSNode(h,g,_,N);return M.hashAddNode($),$},destroyNode(h){M.hashRemoveNode(h)},isRoot(h){return h===h.parent},isMountpoint(h){return!!h.mounted},isFile(h){return(h&61440)===32768},isDir(h){return(h&61440)===16384},isLink(h){return(h&61440)===40960},isChrdev(h){return(h&61440)===8192},isBlkdev(h){return(h&61440)===24576},isFIFO(h){return(h&61440)===4096},isSocket(h){return(h&49152)===49152},flagsToPermissionString(h){var g=["r","w","rw"][h&3];return h&512&&(g+="w"),g},nodePermissions(h,g){return M.ignorePermissions?0:g.includes("r")&&!(h.mode&292)||g.includes("w")&&!(h.mode&146)||g.includes("x")&&!(h.mode&73)?2:0},mayLookup(h){if(!M.isDir(h.mode))return 54;var g=M.nodePermissions(h,"x");return g||(h.node_ops.lookup?0:2)},mayCreate(h,g){if(!M.isDir(h.mode))return 54;try{var _=M.lookupNode(h,g);return 20}catch{}return M.nodePermissions(h,"wx")},mayDelete(h,g,_){var N;try{N=M.lookupNode(h,g)}catch(U){return U.errno}var $=M.nodePermissions(h,"wx");if($)return $;if(_){if(!M.isDir(N.mode))return 54;if(M.isRoot(N)||M.getPath(N)===M.cwd())return 10}else if(M.isDir(N.mode))return 31;return 0},mayOpen(h,g){return h?M.isLink(h.mode)?32:M.isDir(h.mode)&&(M.flagsToPermissionString(g)!=="r"||g&576)?31:M.nodePermissions(h,M.flagsToPermissionString(g)):44},checkOpExists(h,g){if(!h)throw new M.ErrnoError(g);return h},MAX_OPEN_FDS:4096,nextfd(){for(var h=0;h<=M.MAX_OPEN_FDS;h++)if(!M.streams[h])return h;throw new M.ErrnoError(33)},getStreamChecked(h){var g=M.getStream(h);if(!g)throw new M.ErrnoError(8);return g},getStream:h=>M.streams[h],createStream(h,g=-1){return h=Object.assign(new M.FSStream,h),g==-1&&(g=M.nextfd()),h.fd=g,M.streams[g]=h,h},closeStream(h){M.streams[h]=null},dupStream(h,g=-1){var N,$;var _=M.createStream(h,g);return($=(N=_.stream_ops)==null?void 0:N.dup)==null||$.call(N,_),_},doSetAttr(h,g,_){var N=h==null?void 0:h.stream_ops.setattr,$=N?h:g;N??(N=g.node_ops.setattr),M.checkOpExists(N,63),N($,_)},chrdev_stream_ops:{open(h){var _,N;var g=M.getDevice(h.node.rdev);h.stream_ops=g.stream_ops,(N=(_=h.stream_ops).open)==null||N.call(_,h)},llseek(){throw new M.ErrnoError(70)}},major:h=>h>>8,minor:h=>h&255,makedev:(h,g)=>h<<8|g,registerDevice(h,g){M.devices[h]={stream_ops:g}},getDevice:h=>M.devices[h],getMounts(h){for(var g=[],_=[h];_.length;){var N=_.pop();g.push(N),_.push(...N.mounts)}return g},syncfs(h,g){typeof h=="function"&&(g=h,h=!1),M.syncFSRequests++,M.syncFSRequests>1&&S(`warning: ${M.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var _=M.getMounts(M.root.mount),N=0;function $(ae){return M.syncFSRequests--,g(ae)}function U(ae){if(ae)return U.errored?void 0:(U.errored=!0,$(ae));++N>=_.length&&$(null)}for(var K of _)K.type.syncfs?K.type.syncfs(K,h,U):U(null)},mount(h,g,_){var N=_==="/",$=!_,U;if(N&&M.root)throw new M.ErrnoError(10);if(!N&&!$){var K=M.lookupPath(_,{follow_mount:!1});if(_=K.path,U=K.node,M.isMountpoint(U))throw new M.ErrnoError(10);if(!M.isDir(U.mode))throw new M.ErrnoError(54)}var ae={type:h,opts:g,mountpoint:_,mounts:[]},de=h.mount(ae);return de.mount=ae,ae.root=de,N?M.root=de:U&&(U.mounted=ae,U.mount&&U.mount.mounts.push(ae)),de},unmount(h){var g=M.lookupPath(h,{follow_mount:!1});if(!M.isMountpoint(g.node))throw new M.ErrnoError(28);var _=g.node,N=_.mounted,$=M.getMounts(N);for(var[U,K]of Object.entries(M.nameTable))for(;K;){var ae=K.name_next;$.includes(K.mount)&&M.destroyNode(K),K=ae}_.mounted=null;var de=_.mount.mounts.indexOf(N);_.mount.mounts.splice(de,1)},lookup(h,g){return h.node_ops.lookup(h,g)},mknod(h,g,_){var N=M.lookupPath(h,{parent:!0}),$=N.node,U=Qe.basename(h);if(!U)throw new M.ErrnoError(28);if(U==="."||U==="..")throw new M.ErrnoError(20);var K=M.mayCreate($,U);if(K)throw new M.ErrnoError(K);if(!$.node_ops.mknod)throw new M.ErrnoError(63);return $.node_ops.mknod($,U,g,_)},statfs(h){return M.statfsNode(M.lookupPath(h,{follow:!0}).node)},statfsStream(h){return M.statfsNode(h.node)},statfsNode(h){var g={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:M.nextInode,ffree:M.nextInode-1,fsid:42,flags:2,namelen:255};return h.node_ops.statfs&&Object.assign(g,h.node_ops.statfs(h.mount.opts.root)),g},create(h,g=438){return g&=4095,g|=32768,M.mknod(h,g,0)},mkdir(h,g=511){return g&=1023,g|=16384,M.mknod(h,g,0)},mkdirTree(h,g){var _=h.split("/"),N="";for(var $ of _)if($){(N||Qe.isAbs(h))&&(N+="/"),N+=$;try{M.mkdir(N,g)}catch(U){if(U.errno!=20)throw U}}},mkdev(h,g,_){return typeof _>"u"&&(_=g,g=438),g|=8192,M.mknod(h,g,_)},symlink(h,g){if(!Bt.resolve(h))throw new M.ErrnoError(44);var _=M.lookupPath(g,{parent:!0}),N=_.node;if(!N)throw new M.ErrnoError(44);var $=Qe.basename(g),U=M.mayCreate(N,$);if(U)throw new M.ErrnoError(U);if(!N.node_ops.symlink)throw new M.ErrnoError(63);return N.node_ops.symlink(N,$,h)},rename(h,g){var _=Qe.dirname(h),N=Qe.dirname(g),$=Qe.basename(h),U=Qe.basename(g),K,ae,de;if(K=M.lookupPath(h,{parent:!0}),ae=K.node,K=M.lookupPath(g,{parent:!0}),de=K.node,!ae||!de)throw new M.ErrnoError(44);if(ae.mount!==de.mount)throw new M.ErrnoError(75);var Te=M.lookupNode(ae,$),Ze=Bt.relative(h,N);if(Ze.charAt(0)!==".")throw new M.ErrnoError(28);if(Ze=Bt.relative(g,_),Ze.charAt(0)!==".")throw new M.ErrnoError(55);var st;try{st=M.lookupNode(de,U)}catch{}if(Te!==st){var rt=M.isDir(Te.mode),Ie=M.mayDelete(ae,$,rt);if(Ie)throw new M.ErrnoError(Ie);if(Ie=st?M.mayDelete(de,U,rt):M.mayCreate(de,U),Ie)throw new M.ErrnoError(Ie);if(!ae.node_ops.rename)throw new M.ErrnoError(63);if(M.isMountpoint(Te)||st&&M.isMountpoint(st))throw new M.ErrnoError(10);if(de!==ae&&(Ie=M.nodePermissions(ae,"w"),Ie))throw new M.ErrnoError(Ie);M.hashRemoveNode(Te);try{ae.node_ops.rename(Te,de,U),Te.parent=de}catch(Ut){throw Ut}finally{M.hashAddNode(Te)}}},rmdir(h){var g=M.lookupPath(h,{parent:!0}),_=g.node,N=Qe.basename(h),$=M.lookupNode(_,N),U=M.mayDelete(_,N,!0);if(U)throw new M.ErrnoError(U);if(!_.node_ops.rmdir)throw new M.ErrnoError(63);if(M.isMountpoint($))throw new M.ErrnoError(10);_.node_ops.rmdir(_,N),M.destroyNode($)},readdir(h){var g=M.lookupPath(h,{follow:!0}),_=g.node,N=M.checkOpExists(_.node_ops.readdir,54);return N(_)},unlink(h){var g=M.lookupPath(h,{parent:!0}),_=g.node;if(!_)throw new M.ErrnoError(44);var N=Qe.basename(h),$=M.lookupNode(_,N),U=M.mayDelete(_,N,!1);if(U)throw new M.ErrnoError(U);if(!_.node_ops.unlink)throw new M.ErrnoError(63);if(M.isMountpoint($))throw new M.ErrnoError(10);_.node_ops.unlink(_,N),M.destroyNode($)},readlink(h){var g=M.lookupPath(h),_=g.node;if(!_)throw new M.ErrnoError(44);if(!_.node_ops.readlink)throw new M.ErrnoError(28);return _.node_ops.readlink(_)},stat(h,g){var _=M.lookupPath(h,{follow:!g}),N=_.node,$=M.checkOpExists(N.node_ops.getattr,63);return $(N)},fstat(h){var g=M.getStreamChecked(h),_=g.node,N=g.stream_ops.getattr,$=N?g:_;return N??(N=_.node_ops.getattr),M.checkOpExists(N,63),N($)},lstat(h){return M.stat(h,!0)},doChmod(h,g,_,N){M.doSetAttr(h,g,{mode:_&4095|g.mode&-4096,ctime:Date.now(),dontFollow:N})},chmod(h,g,_){var N;if(typeof h=="string"){var $=M.lookupPath(h,{follow:!_});N=$.node}else N=h;M.doChmod(null,N,g,_)},lchmod(h,g){M.chmod(h,g,!0)},fchmod(h,g){var _=M.getStreamChecked(h);M.doChmod(_,_.node,g,!1)},doChown(h,g,_){M.doSetAttr(h,g,{timestamp:Date.now(),dontFollow:_})},chown(h,g,_,N){var $;if(typeof h=="string"){var U=M.lookupPath(h,{follow:!N});$=U.node}else $=h;M.doChown(null,$,N)},lchown(h,g,_){M.chown(h,g,_,!0)},fchown(h,g,_){var N=M.getStreamChecked(h);M.doChown(N,N.node,!1)},doTruncate(h,g,_){if(M.isDir(g.mode))throw new M.ErrnoError(31);if(!M.isFile(g.mode))throw new M.ErrnoError(28);var N=M.nodePermissions(g,"w");if(N)throw new M.ErrnoError(N);M.doSetAttr(h,g,{size:_,timestamp:Date.now()})},truncate(h,g){if(g<0)throw new M.ErrnoError(28);var _;if(typeof h=="string"){var N=M.lookupPath(h,{follow:!0});_=N.node}else _=h;M.doTruncate(null,_,g)},ftruncate(h,g){var _=M.getStreamChecked(h);if(g<0||!(_.flags&2097155))throw new M.ErrnoError(28);M.doTruncate(_,_.node,g)},utime(h,g,_){var N=M.lookupPath(h,{follow:!0}),$=N.node,U=M.checkOpExists($.node_ops.setattr,63);U($,{atime:g,mtime:_})},open(h,g,_=438){if(h==="")throw new M.ErrnoError(44);g=typeof g=="string"?nn(g):g,g&64?_=_&4095|32768:_=0;var N,$;if(typeof h=="object")N=h;else{$=h.endsWith("/");var U=M.lookupPath(h,{follow:!(g&131072),noent_okay:!0});N=U.node,h=U.path}var K=!1;if(g&64)if(N){if(g&128)throw new M.ErrnoError(20)}else{if($)throw new M.ErrnoError(31);N=M.mknod(h,_|511,0),K=!0}if(!N)throw new M.ErrnoError(44);if(M.isChrdev(N.mode)&&(g&=-513),g&65536&&!M.isDir(N.mode))throw new M.ErrnoError(54);if(!K){var ae=M.mayOpen(N,g);if(ae)throw new M.ErrnoError(ae)}g&512&&!K&&M.truncate(N,0),g&=-131713;var de=M.createStream({node:N,path:M.getPath(N),flags:g,seekable:!0,position:0,stream_ops:N.stream_ops,ungotten:[],error:!1});return de.stream_ops.open&&de.stream_ops.open(de),K&&M.chmod(N,_&511),r.logReadFiles&&!(g&1)&&(h in M.readFiles||(M.readFiles[h]=1)),de},close(h){if(M.isClosed(h))throw new M.ErrnoError(8);h.getdents&&(h.getdents=null);try{h.stream_ops.close&&h.stream_ops.close(h)}catch(g){throw g}finally{M.closeStream(h.fd)}h.fd=null},isClosed(h){return h.fd===null},llseek(h,g,_){if(M.isClosed(h))throw new M.ErrnoError(8);if(!h.seekable||!h.stream_ops.llseek)throw new M.ErrnoError(70);if(_!=0&&_!=1&&_!=2)throw new M.ErrnoError(28);return h.position=h.stream_ops.llseek(h,g,_),h.ungotten=[],h.position},read(h,g,_,N,$){if(N<0||$<0)throw new M.ErrnoError(28);if(M.isClosed(h))throw new M.ErrnoError(8);if((h.flags&2097155)===1)throw new M.ErrnoError(8);if(M.isDir(h.node.mode))throw new M.ErrnoError(31);if(!h.stream_ops.read)throw new M.ErrnoError(28);var U=typeof $<"u";if(!U)$=h.position;else if(!h.seekable)throw new M.ErrnoError(70);var K=h.stream_ops.read(h,g,_,N,$);return U||(h.position+=K),K},write(h,g,_,N,$,U){if(N<0||$<0)throw new M.ErrnoError(28);if(M.isClosed(h))throw new M.ErrnoError(8);if(!(h.flags&2097155))throw new M.ErrnoError(8);if(M.isDir(h.node.mode))throw new M.ErrnoError(31);if(!h.stream_ops.write)throw new M.ErrnoError(28);h.seekable&&h.flags&1024&&M.llseek(h,0,2);var K=typeof $<"u";if(!K)$=h.position;else if(!h.seekable)throw new M.ErrnoError(70);var ae=h.stream_ops.write(h,g,_,N,$,U);return K||(h.position+=ae),ae},mmap(h,g,_,N,$){if(N&2&&!($&2)&&(h.flags&2097155)!==2)throw new M.ErrnoError(2);if((h.flags&2097155)===1)throw new M.ErrnoError(2);if(!h.stream_ops.mmap)throw new M.ErrnoError(43);if(!g)throw new M.ErrnoError(28);return h.stream_ops.mmap(h,g,_,N,$)},msync(h,g,_,N,$){return h.stream_ops.msync?h.stream_ops.msync(h,g,_,N,$):0},ioctl(h,g,_){if(!h.stream_ops.ioctl)throw new M.ErrnoError(59);return h.stream_ops.ioctl(h,g,_)},readFile(h,g={}){g.flags=g.flags||0,g.encoding=g.encoding||"binary",g.encoding!=="utf8"&&g.encoding!=="binary"&&J(`Invalid encoding type "${g.encoding}"`);var _=M.open(h,g.flags),N=M.stat(h),$=N.size,U=new Uint8Array($);return M.read(_,U,0,$,0),g.encoding==="utf8"&&(U=cr(U)),M.close(_),U},writeFile(h,g,_={}){_.flags=_.flags||577;var N=M.open(h,_.flags,_.mode);typeof g=="string"&&(g=new Uint8Array(Ft(g))),ArrayBuffer.isView(g)?M.write(N,g,0,g.byteLength,void 0,_.canOwn):J("Unsupported data type"),M.close(N)},cwd:()=>M.currentPath,chdir(h){var g=M.lookupPath(h,{follow:!0});if(g.node===null)throw new M.ErrnoError(44);if(!M.isDir(g.node.mode))throw new M.ErrnoError(54);var _=M.nodePermissions(g.node,"x");if(_)throw new M.ErrnoError(_);M.currentPath=g.path},createDefaultDirectories(){M.mkdir("/tmp"),M.mkdir("/home"),M.mkdir("/home/web_user")},createDefaultDevices(){M.mkdir("/dev"),M.registerDevice(M.makedev(1,3),{read:()=>0,write:(N,$,U,K,ae)=>K,llseek:()=>0}),M.mkdev("/dev/null",M.makedev(1,3)),Pt.register(M.makedev(5,0),Pt.default_tty_ops),Pt.register(M.makedev(6,0),Pt.default_tty1_ops),M.mkdev("/dev/tty",M.makedev(5,0)),M.mkdev("/dev/tty1",M.makedev(6,0));var h=new Uint8Array(1024),g=0,_=()=>(g===0&&(Qt(h),g=h.byteLength),h[--g]);M.createDevice("/dev","random",_),M.createDevice("/dev","urandom",_),M.mkdir("/dev/shm"),M.mkdir("/dev/shm/tmp")},createSpecialDirectories(){M.mkdir("/proc");var h=M.mkdir("/proc/self");M.mkdir("/proc/self/fd"),M.mount({mount(){var g=M.createNode(h,"fd",16895,73);return g.stream_ops={llseek:Ue.stream_ops.llseek},g.node_ops={lookup(_,N){var $=+N,U=M.getStreamChecked($),K={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>U.path},id:$+1};return K.parent=K,K},readdir(){return Array.from(M.streams.entries()).filter(([_,N])=>N).map(([_,N])=>_.toString())}},g}},{},"/proc/self/fd")},createStandardStreams(h,g,_){h?M.createDevice("/dev","stdin",h):M.symlink("/dev/tty","/dev/stdin"),g?M.createDevice("/dev","stdout",null,g):M.symlink("/dev/tty","/dev/stdout"),_?M.createDevice("/dev","stderr",null,_):M.symlink("/dev/tty1","/dev/stderr"),M.open("/dev/stdin",0),M.open("/dev/stdout",1),M.open("/dev/stderr",1)},staticInit(){M.nameTable=new Array(4096),M.mount(Ue,{},"/"),M.createDefaultDirectories(),M.createDefaultDevices(),M.createSpecialDirectories(),M.filesystems={MEMFS:Ue}},init(h,g,_){M.initialized=!0,h??(h=r.stdin),g??(g=r.stdout),_??(_=r.stderr),M.createStandardStreams(h,g,_)},quit(){M.initialized=!1;for(var h of M.streams)h&&M.close(h)},findObject(h,g){var _=M.analyzePath(h,g);return _.exists?_.object:null},analyzePath(h,g){try{var _=M.lookupPath(h,{follow:!g});h=_.path}catch{}var N={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var _=M.lookupPath(h,{parent:!0});N.parentExists=!0,N.parentPath=_.path,N.parentObject=_.node,N.name=Qe.basename(h),_=M.lookupPath(h,{follow:!g}),N.exists=!0,N.path=_.path,N.object=_.node,N.name=_.node.name,N.isRoot=_.path==="/"}catch($){N.error=$.errno}return N},createPath(h,g,_,N){h=typeof h=="string"?h:M.getPath(h);for(var $=g.split("/").reverse();$.length;){var U=$.pop();if(U){var K=Qe.join2(h,U);try{M.mkdir(K)}catch(ae){if(ae.errno!=20)throw ae}h=K}}return K},createFile(h,g,_,N,$){var U=Qe.join2(typeof h=="string"?h:M.getPath(h),g),K=Or(N,$);return M.create(U,K)},createDataFile(h,g,_,N,$,U){var K=g;h&&(h=typeof h=="string"?h:M.getPath(h),K=g?Qe.join2(h,g):h);var ae=Or(N,$),de=M.create(K,ae);if(_){if(typeof _=="string"){for(var Te=new Array(_.length),Ze=0,st=_.length;Ze<st;++Ze)Te[Ze]=_.charCodeAt(Ze);_=Te}M.chmod(de,ae|146);var rt=M.open(de,577);M.write(rt,_,0,_.length,0,U),M.close(rt),M.chmod(de,ae)}},createDevice(h,g,_,N){var ae;var $=Qe.join2(typeof h=="string"?h:M.getPath(h),g),U=Or(!!_,!!N);(ae=M.createDevice).major??(ae.major=64);var K=M.makedev(M.createDevice.major++,0);return M.registerDevice(K,{open(de){de.seekable=!1},close(de){var Te;(Te=N==null?void 0:N.buffer)!=null&&Te.length&&N(10)},read(de,Te,Ze,st,rt){for(var Ie=0,Ut=0;Ut<st;Ut++){var br;try{br=_()}catch{throw new M.ErrnoError(29)}if(br===void 0&&Ie===0)throw new M.ErrnoError(6);if(br==null)break;Ie++,Te[Ze+Ut]=br}return Ie&&(de.node.atime=Date.now()),Ie},write(de,Te,Ze,st,rt){for(var Ie=0;Ie<st;Ie++)try{N(Te[Ze+Ie])}catch{throw new M.ErrnoError(29)}return st&&(de.node.mtime=de.node.ctime=Date.now()),Ie}}),M.mkdev($,U,K)},forceLoadFile(h){if(h.isDevice||h.isFolder||h.link||h.contents)return!0;if(globalThis.XMLHttpRequest)J("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else try{h.contents=m(h.url)}catch{throw new M.ErrnoError(29)}},createLazyFile(h,g,_,N,$){class U{constructor(){wr(this,"lengthKnown",!1);wr(this,"chunks",[])}get(rt){if(!(rt>this.length-1||rt<0)){var Ie=rt%this.chunkSize,Ut=rt/this.chunkSize|0;return this.getter(Ut)[Ie]}}setDataGetter(rt){this.getter=rt}cacheLength(){var rt=new XMLHttpRequest;rt.open("HEAD",_,!1),rt.send(null),rt.status>=200&&rt.status<300||rt.status===304||J("Couldn't load "+_+". Status: "+rt.status);var Ie=Number(rt.getResponseHeader("Content-length")),Ut,br=(Ut=rt.getResponseHeader("Accept-Ranges"))&&Ut==="bytes",bn=(Ut=rt.getResponseHeader("Content-Encoding"))&&Ut==="gzip",wn=1024*1024;br||(wn=Ie);var xa=(ri,oo)=>{ri>oo&&J("invalid range ("+ri+", "+oo+") or no bytes requested!"),oo>Ie-1&&J("only "+Ie+" bytes available! programmer error!");var $n=new XMLHttpRequest;return $n.open("GET",_,!1),Ie!==wn&&$n.setRequestHeader("Range","bytes="+ri+"-"+oo),$n.responseType="arraybuffer",$n.overrideMimeType&&$n.overrideMimeType("text/plain; charset=x-user-defined"),$n.send(null),$n.status>=200&&$n.status<300||$n.status===304||J("Couldn't load "+_+". Status: "+$n.status),$n.response!==void 0?new Uint8Array($n.response||[]):Ft($n.responseText||"")},fa=this;fa.setDataGetter(ri=>{var oo=ri*wn,$n=(ri+1)*wn-1;return $n=Math.min($n,Ie-1),typeof fa.chunks[ri]>"u"&&(fa.chunks[ri]=xa(oo,$n)),typeof fa.chunks[ri]>"u"&&J("doXHR failed!"),fa.chunks[ri]}),(bn||!Ie)&&(wn=Ie=1,Ie=this.getter(0).length,wn=Ie,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Ie,this._chunkSize=wn,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(globalThis.XMLHttpRequest){a||J("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var K=new U,ae={isDevice:!1,contents:K}}else var ae={isDevice:!1,url:_};var de=M.createFile(h,g,ae,N,$);ae.contents?de.contents=ae.contents:ae.url&&(de.contents=null,de.url=ae.url),Object.defineProperties(de,{usedBytes:{get:function(){return this.contents.length}}});var Te={};for(const[st,rt]of Object.entries(de.stream_ops))Te[st]=(...Ie)=>(M.forceLoadFile(de),rt(...Ie));function Ze(st,rt,Ie,Ut,br){var bn=st.node.contents;if(br>=bn.length)return 0;var wn=Math.min(bn.length-br,Ut);if(bn.slice)for(var xa=0;xa<wn;xa++)rt[Ie+xa]=bn[br+xa];else for(var xa=0;xa<wn;xa++)rt[Ie+xa]=bn.get(br+xa);return wn}return Te.read=(st,rt,Ie,Ut,br)=>(M.forceLoadFile(de),Ze(st,rt,Ie,Ut,br)),Te.mmap=(st,rt,Ie,Ut,br)=>{M.forceLoadFile(de);var bn=en();if(!bn)throw new M.ErrnoError(48);return Ze(st,k,bn,rt,Ie),{ptr:bn,allocated:!0}},de.stream_ops=Te,de}},Fe={DEFAULT_POLLMASK:5,calculateAt(h,g,_){if(Qe.isAbs(g))return g;var N;if(h===-100)N=M.cwd();else{var $=Fe.getStreamFromFD(h);N=$.path}if(g.length==0){if(!_)throw new M.ErrnoError(44);return N}return N+"/"+g},writeStat(h,g){T[h>>>2>>>0]=g.dev,T[h+4>>>2>>>0]=g.mode,T[h+8>>>2>>>0]=g.nlink,T[h+12>>>2>>>0]=g.uid,T[h+16>>>2>>>0]=g.gid,T[h+20>>>2>>>0]=g.rdev,V[h+24>>>3>>>0]=BigInt(g.size),E[h+32>>>2>>>0]=4096,E[h+36>>>2>>>0]=g.blocks;var _=g.atime.getTime(),N=g.mtime.getTime(),$=g.ctime.getTime();return V[h+40>>>3>>>0]=BigInt(Math.floor(_/1e3)),T[h+48>>>2>>>0]=_%1e3*1e3*1e3,V[h+56>>>3>>>0]=BigInt(Math.floor(N/1e3)),T[h+64>>>2>>>0]=N%1e3*1e3*1e3,V[h+72>>>3>>>0]=BigInt(Math.floor($/1e3)),T[h+80>>>2>>>0]=$%1e3*1e3*1e3,V[h+88>>>3>>>0]=BigInt(g.ino),0},writeStatFs(h,g){T[h+4>>>2>>>0]=g.bsize,T[h+60>>>2>>>0]=g.bsize,V[h+8>>>3>>>0]=BigInt(g.blocks),V[h+16>>>3>>>0]=BigInt(g.bfree),V[h+24>>>3>>>0]=BigInt(g.bavail),V[h+32>>>3>>>0]=BigInt(g.files),V[h+40>>>3>>>0]=BigInt(g.ffree),T[h+48>>>2>>>0]=g.fsid,T[h+64>>>2>>>0]=g.flags,T[h+56>>>2>>>0]=g.namelen},doMsync(h,g,_,N,$){if(!M.isFile(g.node.mode))throw new M.ErrnoError(43);if(N&2)return 0;var U=O.slice(h,h+_);M.msync(g,U,$,_,N)},getStreamFromFD(h){var g=M.getStreamChecked(h);return g},varargs:void 0,getStr(h){var g=St(h);return g}};function pt(h,g,_){_>>>=0,Fe.varargs=_;try{var N=Fe.getStreamFromFD(h);switch(g){case 0:{var $=Tt();if($<0)return-28;for(;M.streams[$];)$++;var U;return U=M.dupStream(N,$),U.fd}case 1:case 2:return 0;case 3:return N.flags;case 4:{var $=Tt();return N.flags|=$,0}case 12:{var $=_r(),K=0;return A[$+K>>>1>>>0]=2,0}case 13:case 14:return 0}return-28}catch(ae){if(typeof M>"u"||ae.name!=="ErrnoError")throw ae;return-ae.errno}}function Wt(h,g,_){_>>>=0,Fe.varargs=_;try{var N=Fe.getStreamFromFD(h);switch(g){case 21509:return N.tty?0:-59;case 21505:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcgets){var $=N.tty.ops.ioctl_tcgets(N),U=_r();E[U>>>2>>>0]=$.c_iflag||0,E[U+4>>>2>>>0]=$.c_oflag||0,E[U+8>>>2>>>0]=$.c_cflag||0,E[U+12>>>2>>>0]=$.c_lflag||0;for(var K=0;K<32;K++)k[U+K+17>>>0]=$.c_cc[K]||0;return 0}return 0}case 21510:case 21511:case 21512:return N.tty?0:-59;case 21506:case 21507:case 21508:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcsets){for(var U=_r(),ae=E[U>>>2>>>0],de=E[U+4>>>2>>>0],Te=E[U+8>>>2>>>0],Ze=E[U+12>>>2>>>0],st=[],K=0;K<32;K++)st.push(k[U+K+17>>>0]);return N.tty.ops.ioctl_tcsets(N.tty,g,{c_iflag:ae,c_oflag:de,c_cflag:Te,c_lflag:Ze,c_cc:st})}return 0}case 21519:{if(!N.tty)return-59;var U=_r();return E[U>>>2>>>0]=0,0}case 21520:return N.tty?-28:-59;case 21537:case 21531:{var U=_r();return M.ioctl(N,g,U)}case 21523:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tiocgwinsz){var rt=N.tty.ops.ioctl_tiocgwinsz(N.tty),U=_r();A[U>>>1>>>0]=rt[0],A[U+2>>>1>>>0]=rt[1]}return 0}case 21524:return N.tty?0:-59;case 21515:return N.tty?0:-59;default:return-28}}catch(Ie){if(typeof M>"u"||Ie.name!=="ErrnoError")throw Ie;return-Ie.errno}}function Lt(h,g,_,N){g>>>=0,N>>>=0,Fe.varargs=N;try{g=Fe.getStr(g),g=Fe.calculateAt(h,g);var $=N?Tt():0;return M.open(g,_,$).fd}catch(U){if(typeof M>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}function wt(h){h>>>=0;try{return h=Fe.getStr(h),M.rmdir(h),0}catch(g){if(typeof M>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function vr(h,g,_){g>>>=0;try{if(g=Fe.getStr(g),g=Fe.calculateAt(h,g),!_)M.unlink(g);else if(_===512)M.rmdir(g);else return-28;return 0}catch(N){if(typeof M>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var Xt=()=>J(""),Je=h=>{h>>>=0;for(var g="";;){var _=O[h++>>>0];if(!_)return g;g+=String.fromCharCode(_)}},bt={},kt={},Kt={},pr=class extends Error{constructor(g){super(g),this.name="BindingError"}},_e=h=>{throw new pr(h)};function Hr(h,g,_={}){var N=g.name;if(h||_e(`type "${N}" must have a positive integer typeid pointer`),kt.hasOwnProperty(h)){if(_.ignoreDuplicateRegistrations)return;_e(`Cannot register type '${N}' twice`)}if(kt[h]=g,delete Kt[h],bt.hasOwnProperty(h)){var $=bt[h];delete bt[h],$.forEach(U=>U())}}function I(h,g,_={}){return Hr(h,g,_)}var be=(h,g,_)=>{switch(g){case 1:return _?N=>k[N>>>0]:N=>O[N>>>0];case 2:return _?N=>A[N>>>1>>>0]:N=>R[N>>>1>>>0];case 4:return _?N=>E[N>>>2>>>0]:N=>T[N>>>2>>>0];case 8:return _?N=>V[N>>>3>>>0]:N=>z[N>>>3>>>0];default:throw new TypeError(`invalid integer width (${g}): ${h}`)}},Ne=function(h,g,_,N,$){h>>>=0,g>>>=0,_>>>=0,g=Je(g);const U=N===0n;let K=ae=>ae;if(U){const ae=_*8;K=de=>BigInt.asUintN(ae,de),$=K($)}I(h,{name:g,fromWireType:K,toWireType:(ae,de)=>(typeof de=="number"&&(de=BigInt(de)),de),readValueFromPointer:be(g,_,!U),destructorFunction:null})};function Ct(h,g,_,N){h>>>=0,g>>>=0,g=Je(g),I(h,{name:g,fromWireType:function($){return!!$},toWireType:function($,U){return U?_:N},readValueFromPointer:function($){return this.fromWireType(O[$>>>0])},destructorFunction:null})}var Ve=h=>({count:h.count,deleteScheduled:h.deleteScheduled,preservePointerOnDelete:h.preservePointerOnDelete,ptr:h.ptr,ptrType:h.ptrType,smartPtr:h.smartPtr,smartPtrType:h.smartPtrType}),lt=h=>{function g(_){return _.$$.ptrType.registeredClass.name}_e(g(h)+" instance already deleted")},ft=!1,qt=h=>{},Xr=h=>{h.smartPtr?h.smartPtrType.rawDestructor(h.smartPtr):h.ptrType.registeredClass.rawDestructor(h.ptr)},Br=h=>{h.count.value-=1;var g=h.count.value===0;g&&Xr(h)},Yt=h=>globalThis.FinalizationRegistry?(ft=new FinalizationRegistry(g=>{Br(g.$$)}),Yt=g=>{var _=g.$$,N=!!_.smartPtr;if(N){var $={$$:_};ft.register(g,$,g)}return g},qt=g=>ft.unregister(g),Yt(h)):(Yt=g=>g,h),En=()=>{let h=mn.prototype;Object.assign(h,{isAliasOf(_){if(!(this instanceof mn)||!(_ instanceof mn))return!1;var N=this.$$.ptrType.registeredClass,$=this.$$.ptr;_.$$=_.$$;for(var U=_.$$.ptrType.registeredClass,K=_.$$.ptr;N.baseClass;)$=N.upcast($),N=N.baseClass;for(;U.baseClass;)K=U.upcast(K),U=U.baseClass;return N===U&&$===K},clone(){if(this.$$.ptr||lt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var _=Yt(Object.create(Object.getPrototypeOf(this),{$$:{value:Ve(this.$$)}}));return _.$$.count.value+=1,_.$$.deleteScheduled=!1,_},delete(){this.$$.ptr||lt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_e("Object already scheduled for deletion"),qt(this),Br(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||lt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_e("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const g=Symbol.dispose;g&&(h[g]=h.delete)};function mn(){}var Kn=(h,g)=>Object.defineProperty(g,"name",{value:h}),Et={},Gt=(h,g,_)=>{if(h[g].overloadTable===void 0){var N=h[g];h[g]=function(...$){return h[g].overloadTable.hasOwnProperty($.length)||_e(`Function '${_}' called with an invalid number of arguments (${$.length}) - expects one of (${h[g].overloadTable})!`),h[g].overloadTable[$.length].apply(this,$)},h[g].overloadTable=[],h[g].overloadTable[N.argCount]=N}},Rr=(h,g,_)=>{r.hasOwnProperty(h)?(_e(`Cannot register public name '${h}' twice`),Gt(r,h,h),r[h].overloadTable.hasOwnProperty(_)&&_e(`Cannot register multiple overloads of a function with the same number of arguments (${_})!`),r[h].overloadTable[_]=g):(r[h]=g,r[h].argCount=_)},Le=48,er=57,Kr=h=>{h=h.replace(/[^a-zA-Z0-9_]/g,"$");var g=h.charCodeAt(0);return g>=Le&&g<=er?`_${h}`:h};function la(h,g,_,N,$,U,K,ae){this.name=h,this.constructor=g,this.instancePrototype=_,this.rawDestructor=N,this.baseClass=$,this.getActualType=U,this.upcast=K,this.downcast=ae,this.pureVirtualFunctions=[]}var ca=(h,g,_)=>{for(;g!==_;)g.upcast||_e(`Expected null or instance of ${_.name}, got an instance of ${g.name}`),h=g.upcast(h),g=g.baseClass;return h},Mr=h=>{if(h===null)return"null";var g=typeof h;return g==="object"||g==="array"||g==="function"?h.toString():""+h};function Qa(h,g){if(g===null)return this.isReference&&_e(`null is not a valid ${this.name}`),0;g.$$||_e(`Cannot pass "${Mr(g)}" as a ${this.name}`),g.$$.ptr||_e(`Cannot pass deleted object as a pointer of type ${this.name}`);var _=g.$$.ptrType.registeredClass,N=ca(g.$$.ptr,_,this.registeredClass);return N}function re(h,g){var _;if(g===null)return this.isReference&&_e(`null is not a valid ${this.name}`),this.isSmartPointer?(_=this.rawConstructor(),h!==null&&h.push(this.rawDestructor,_),_):0;(!g||!g.$$)&&_e(`Cannot pass "${Mr(g)}" as a ${this.name}`),g.$$.ptr||_e(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&g.$$.ptrType.isConst&&_e(`Cannot convert argument of type ${g.$$.smartPtrType?g.$$.smartPtrType.name:g.$$.ptrType.name} to parameter type ${this.name}`);var N=g.$$.ptrType.registeredClass;if(_=ca(g.$$.ptr,N,this.registeredClass),this.isSmartPointer)switch(g.$$.smartPtr===void 0&&_e("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:g.$$.smartPtrType===this?_=g.$$.smartPtr:_e(`Cannot convert argument of type ${g.$$.smartPtrType?g.$$.smartPtrType.name:g.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:_=g.$$.smartPtr;break;case 2:if(g.$$.smartPtrType===this)_=g.$$.smartPtr;else{var $=g.clone();_=this.rawShare(_,Gr.toHandle(()=>$.delete())),h!==null&&h.push(this.rawDestructor,_)}break;default:_e("Unsupporting sharing policy")}return _}function ve(h,g){if(g===null)return this.isReference&&_e(`null is not a valid ${this.name}`),0;g.$$||_e(`Cannot pass "${Mr(g)}" as a ${this.name}`),g.$$.ptr||_e(`Cannot pass deleted object as a pointer of type ${this.name}`),g.$$.ptrType.isConst&&_e(`Cannot convert argument of type ${g.$$.ptrType.name} to parameter type ${this.name}`);var _=g.$$.ptrType.registeredClass,N=ca(g.$$.ptr,_,this.registeredClass);return N}function we(h){return this.fromWireType(T[h>>>2>>>0])}var Z=(h,g,_)=>{if(g===_)return h;if(_.baseClass===void 0)return null;var N=Z(h,g,_.baseClass);return N===null?null:_.downcast(N)},Oe={},it=(h,g)=>{for(g===void 0&&_e("ptr should not be undefined");h.baseClass;)g=h.upcast(g),h=h.baseClass;return g},nt=(h,g)=>(g=it(h,g),Oe[g]),$t=class extends Error{constructor(g){super(g),this.name="InternalError"}},vt=h=>{throw new $t(h)},ht=(h,g)=>{(!g.ptrType||!g.ptr)&&vt("makeClassHandle requires ptr and ptrType");var _=!!g.smartPtrType,N=!!g.smartPtr;return _!==N&&vt("Both smartPtrType and smartPtr must be specified"),g.count={value:1},Yt(Object.create(h,{$$:{value:g,writable:!0}}))};function xr(h){var g=this.getPointee(h);if(!g)return this.destructor(h),null;var _=nt(this.registeredClass,g);if(_!==void 0){if(_.$$.count.value===0)return _.$$.ptr=g,_.$$.smartPtr=h,_.clone();var N=_.clone();return this.destructor(h),N}function $(){return this.isSmartPointer?ht(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:g,smartPtrType:this,smartPtr:h}):ht(this.registeredClass.instancePrototype,{ptrType:this,ptr:h})}var U=this.registeredClass.getActualType(g),K=Et[U];if(!K)return $.call(this);var ae;this.isConst?ae=K.constPointerType:ae=K.pointerType;var de=Z(g,this.registeredClass,ae.registeredClass);return de===null?$.call(this):this.isSmartPointer?ht(ae.registeredClass.instancePrototype,{ptrType:ae,ptr:de,smartPtrType:this,smartPtr:h}):ht(ae.registeredClass.instancePrototype,{ptrType:ae,ptr:de})}var Rt=()=>{Object.assign(sr.prototype,{getPointee(h){return this.rawGetPointee&&(h=this.rawGetPointee(h)),h},destructor(h){var g;(g=this.rawDestructor)==null||g.call(this,h)},readValueFromPointer:we,fromWireType:xr})};function sr(h,g,_,N,$,U,K,ae,de,Te,Ze){this.name=h,this.registeredClass=g,this.isReference=_,this.isConst=N,this.isSmartPointer=$,this.pointeeType=U,this.sharingPolicy=K,this.rawGetPointee=ae,this.rawConstructor=de,this.rawShare=Te,this.rawDestructor=Ze,!$&&g.baseClass===void 0?N?(this.toWireType=Qa,this.destructorFunction=null):(this.toWireType=ve,this.destructorFunction=null):this.toWireType=re}var Fr=(h,g,_)=>{r.hasOwnProperty(h)||vt("Replacing nonexistent public symbol"),r[h].overloadTable!==void 0&&_!==void 0||(r[h]=g,r[h].argCount=_)},Pe=[],$e=h=>{var g=Pe[h];return g||(Pe[h]=g=Bi.get(h)),g},at=(h,g,_=[],N=!1)=>{var $=$e(g),U=$(..._);function K(ae){return h[0]=="p"?ae>>>0:ae}return K(U)},q=(h,g,_=!1)=>(...N)=>at(h,g,N,_),ke=(h,g,_=!1)=>{h=Je(h);function N(){if(h.includes("p"))return q(h,g,_);var U=$e(g);return U}var $=N();return typeof $!="function"&&_e(`unknown function pointer with signature ${h}: ${g}`),$};class ct extends Error{}var tt=h=>{var g=Pr(h),_=Je(g);return Sr(g),_},Dt=(h,g)=>{var _=[],N={};function $(U){if(!N[U]&&!kt[U]){if(Kt[U]){Kt[U].forEach($);return}_.push(U),N[U]=!0}}throw g.forEach($),new ct(`${h}: `+_.map(tt).join([", "]))},Zt=(h,g,_)=>{h.forEach(ae=>Kt[ae]=g);function N(ae){var de=_(ae);de.length!==h.length&&vt("Mismatched type converter count");for(var Te=0;Te<h.length;++Te)I(h[Te],de[Te])}var $=new Array(g.length),U=[],K=0;for(let[ae,de]of g.entries())kt.hasOwnProperty(de)?$[ae]=kt[de]:(U.push(de),bt.hasOwnProperty(de)||(bt[de]=[]),bt[de].push(()=>{$[ae]=kt[de],++K,K===U.length&&N($)}));U.length===0&&N($)};function ln(h,g,_,N,$,U,K,ae,de,Te,Ze,st,rt){h>>>=0,g>>>=0,_>>>=0,N>>>=0,$>>>=0,U>>>=0,K>>>=0,ae>>>=0,de>>>=0,Te>>>=0,Ze>>>=0,st>>>=0,rt>>>=0,Ze=Je(Ze),U=ke($,U),ae&&(ae=ke(K,ae)),Te&&(Te=ke(de,Te)),rt=ke(st,rt);var Ie=Kr(Ze);Rr(Ie,function(){Dt(`Cannot construct ${Ze} due to unbound types`,[N])}),Zt([h,g,_],N?[N]:[],Ut=>{var Gb;Ut=Ut[0];var br,bn;N?(br=Ut.registeredClass,bn=br.instancePrototype):bn=mn.prototype;var wn=Kn(Ze,function(...Tg){if(Object.getPrototypeOf(this)!==xa)throw new pr(`Use 'new' to construct ${Ze}`);if(fa.constructor_body===void 0)throw new pr(`${Ze} has no accessible constructor`);var zb=fa.constructor_body[Tg.length];if(zb===void 0)throw new pr(`Tried to invoke ctor of ${Ze} with invalid number of parameters (${Tg.length}) - expected (${Object.keys(fa.constructor_body).toString()}) parameters instead!`);return zb.apply(this,Tg)}),xa=Object.create(bn,{constructor:{value:wn}});wn.prototype=xa;var fa=new la(Ze,wn,xa,rt,br,U,ae,Te);fa.baseClass&&((Gb=fa.baseClass).__derivedClasses??(Gb.__derivedClasses=[]),fa.baseClass.__derivedClasses.push(fa));var ri=new sr(Ze,fa,!0,!1,!1),oo=new sr(Ze+"*",fa,!1,!1,!1),$n=new sr(Ze+" const*",fa,!1,!0,!1);return Et[h]={pointerType:oo,constPointerType:$n},Fr(Ie,wn),[ri,oo,$n]})}var yn=(h,g)=>{for(var _=[],N=0;N<h;N++)_.push(T[g+N*4>>>2>>>0]);return _},Pn=h=>{for(;h.length;){var g=h.pop(),_=h.pop();_(g)}};function ua(h){for(var g=1;g<h.length;++g)if(h[g]!==null&&h[g].destructorFunction===void 0)return!0;return!1}function Ga(h,g,_,N){var $=ua(h),U=h.length-2,K=[],ae=["fn"];g&&ae.push("thisWired");for(var de=0;de<U;++de)K.push(`arg${de}`),ae.push(`arg${de}Wired`);K=K.join(","),ae=ae.join(",");var Te=`return function (${K}) {
`;$&&(Te+=`var destructors = [];
`);var Ze=$?"destructors":"null",st=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];g&&(Te+=`var thisWired = toClassParamWire(${Ze}, this);
`);for(var de=0;de<U;++de){var rt=`toArg${de}Wire`;Te+=`var arg${de}Wired = ${rt}(${Ze}, arg${de});
`,st.push(rt)}if(Te+=(_||N?"var rv = ":"")+`invoker(${ae});
`,$)Te+=`runDestructors(destructors);
`;else for(var de=g?1:2;de<h.length;++de){var Ie=de===1?"thisWired":"arg"+(de-2)+"Wired";h[de].destructorFunction!==null&&(Te+=`${Ie}_dtor(${Ie});
`,st.push(`${Ie}_dtor`))}return _&&(Te+=`var ret = fromRetWire(rv);
return ret;
`),Te+=`}
`,new Function(st,Te)}function Oa(h,g,_,N,$,U){var K=g.length;K<2&&_e("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var ae=g[1]!==null&&_!==null,de=ua(g),Te=!g[0].isVoid,Ze=g[0],st=g[1],rt=[h,_e,N,$,Pn,Ze.fromWireType.bind(Ze),st==null?void 0:st.toWireType.bind(st)],Ie=2;Ie<K;++Ie){var Ut=g[Ie];rt.push(Ut.toWireType.bind(Ut))}if(!de)for(var Ie=ae?1:2;Ie<g.length;++Ie)g[Ie].destructorFunction!==null&&rt.push(g[Ie].destructorFunction);var bn=Ga(g,ae,Te,U)(...rt);return Kn(h,bn)}var gr=function(h,g,_,N,$,U){h>>>=0,_>>>=0,N>>>=0,$>>>=0,U>>>=0;var K=yn(g,_);$=ke(N,$),Zt([],[h],ae=>{ae=ae[0];var de=`constructor ${ae.name}`;if(ae.registeredClass.constructor_body===void 0&&(ae.registeredClass.constructor_body=[]),ae.registeredClass.constructor_body[g-1]!==void 0)throw new pr(`Cannot register multiple constructors with identical number of parameters (${g-1}) for class '${ae.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return ae.registeredClass.constructor_body[g-1]=()=>{Dt(`Cannot construct ${ae.name} due to unbound types`,K)},Zt([],K,Te=>(Te.splice(1,0,null),ae.registeredClass.constructor_body[g-1]=Oa(de,Te,null,$,U),[])),[]})},xi=h=>{h=h.trim();const g=h.indexOf("(");return g===-1?h:h.slice(0,g)},Ma=function(h,g,_,N,$,U,K,ae,de,Te){h>>>=0,g>>>=0,N>>>=0,$>>>=0,U>>>=0,K>>>=0;var Ze=yn(_,N);g=Je(g),g=xi(g),U=ke($,U,de),Zt([],[h],st=>{st=st[0];var rt=`${st.name}.${g}`;g.startsWith("@@")&&(g=Symbol[g.substring(2)]),ae&&st.registeredClass.pureVirtualFunctions.push(g);function Ie(){Dt(`Cannot call ${rt} due to unbound types`,Ze)}var Ut=st.registeredClass.instancePrototype,br=Ut[g];return br===void 0||br.overloadTable===void 0&&br.className!==st.name&&br.argCount===_-2?(Ie.argCount=_-2,Ie.className=st.name,Ut[g]=Ie):(Gt(Ut,g,rt),Ut[g].overloadTable[_-2]=Ie),Zt([],Ze,bn=>{var wn=Oa(rt,bn,st,U,K,de);return Ut[g].overloadTable===void 0?(wn.argCount=_-2,Ut[g]=wn):Ut[g].overloadTable[_-2]=wn,[]}),[]})},Sl=[],Ja=[0,1,,1,null,1,!0,1,!1,1];function Ii(h){h>>>=0,h>9&&--Ja[h+1]===0&&(Ja[h]=void 0,Sl.push(h))}var Gr={toValue:h=>(h||_e(`Cannot use deleted val. handle = ${h}`),Ja[h]),toHandle:h=>{switch(h){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const g=Sl.pop()||Ja.length;return Ja[g]=h,Ja[g+1]=1,g}}}},js={name:"emscripten::val",fromWireType:h=>{var g=Gr.toValue(h);return Ii(h),g},toWireType:(h,g)=>Gr.toHandle(g),readValueFromPointer:we,destructorFunction:null};function iu(h){return h>>>=0,I(h,js)}var Eo=(h,g)=>{switch(g){case 4:return function(_){return this.fromWireType(B[_>>>2>>>0])};case 8:return function(_){return this.fromWireType(G[_>>>3>>>0])};default:throw new TypeError(`invalid float width (${g}): ${h}`)}},He=function(h,g,_){h>>>=0,g>>>=0,_>>>=0,g=Je(g),I(h,{name:g,fromWireType:N=>N,toWireType:(N,$)=>$,readValueFromPointer:Eo(g,_),destructorFunction:null})},It=function(h,g,_,N,$){h>>>=0,g>>>=0,_>>>=0,g=Je(g);const U=N===0;let K=de=>de;if(U){var ae=32-8*_;K=de=>de<<ae>>>ae,$=K($)}I(h,{name:g,fromWireType:K,toWireType:(de,Te)=>Te,readValueFromPointer:be(g,_,N!==0),destructorFunction:null})};function Vt(h,g,_){h>>>=0,_>>>=0;var N=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],$=N[g];function U(K){var ae=T[K>>>2>>>0],de=T[K+4>>>2>>>0];return new $(k.buffer,de,ae)}_=Je(_),I(h,{name:_,fromWireType:U,readValueFromPointer:U},{ignoreDuplicateRegistrations:!0})}var Mt=Object.assign({optional:!0},js);function ta(h,g){h>>>=0,I(h,Mt)}var Cn=(h,g,_)=>Jr(h,O,g,_);function Aa(h,g){h>>>=0,g>>>=0,g=Je(g),I(h,{name:g,fromWireType(_){var N=T[_>>>2>>>0],$=_+4,U;return U=St($,N,!0),Sr(_),U},toWireType(_,N){N instanceof ArrayBuffer&&(N=new Uint8Array(N));var $,U=typeof N=="string";U||ArrayBuffer.isView(N)&&N.BYTES_PER_ELEMENT==1||_e("Cannot pass non-string to std::string"),U?$=rr(N):$=N.length;var K=xn(4+$+1),ae=K+4;return T[K>>>2>>>0]=$,U?Cn(N,ae,$+1):O.set(N,ae>>>0),_!==null&&_.push(Sr,K),K},readValueFromPointer:we,destructorFunction(_){Sr(_)}})}var ei=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,Li=(h,g,_)=>{var N=h>>>1,$=dt(R,N,g/2,_);if($-N>16&&ei)return ei.decode(R.subarray(N>>>0,$>>>0));for(var U="",K=N;K<$;++K){var ae=R[K>>>0];U+=String.fromCharCode(ae)}return U},ti=(h,g,_)=>{if(_??(_=2147483647),_<2)return 0;_-=2;for(var N=g,$=_<h.length*2?_/2:h.length,U=0;U<$;++U){var K=h.charCodeAt(U);A[g>>>1>>>0]=K,g+=2}return A[g>>>1>>>0]=0,g-N},zr=h=>h.length*2,dd=(h,g,_)=>{for(var N="",$=h>>>2,U=0;!(U>=g/4);U++){var K=T[$+U>>>0];if(!K&&!_)break;N+=String.fromCodePoint(K)}return N},_s=(h,g,_)=>{if(g>>>=0,_??(_=2147483647),_<4)return 0;for(var N=g,$=N+_-4,U=0;U<h.length;++U){var K=h.codePointAt(U);if(K>65535&&U++,E[g>>>2>>>0]=K,g+=4,g+4>$)break}return E[g>>>2>>>0]=0,g-N},ao=h=>{for(var g=0,_=0;_<h.length;++_){var N=h.codePointAt(_);N>65535&&_++,g+=4}return g};function hd(h,g,_){h>>>=0,g>>>=0,_>>>=0,_=Je(_);var N,$,U;g===2?(N=Li,$=ti,U=zr):(N=dd,$=_s,U=ao),I(h,{name:_,fromWireType:K=>{var ae=T[K>>>2>>>0],de=N(K+4,ae*g,!0);return Sr(K),de},toWireType:(K,ae)=>{typeof ae!="string"&&_e(`Cannot pass non-string to C++ string type ${_}`);var de=U(ae),Te=xn(4+de+g);return T[Te>>>2>>>0]=de/g,$(ae,Te+4,de+g),K!==null&&K.push(Sr,Te),Te},readValueFromPointer:we,destructorFunction(K){Sr(K)}})}var cg=function(h,g){h>>>=0,g>>>=0,g=Je(g),I(h,{isVoid:!0,name:g,fromWireType:()=>{},toWireType:(_,N)=>{}})},ug=()=>{throw 1/0},ou=[],pd=h=>{var g=ou.length;return ou.push(h),g},gd=(h,g)=>{var _=kt[h];return _===void 0&&_e(`${g} has unknown type ${tt(h)}`),_},fg=(h,g)=>{for(var _=new Array(h),N=0;N<h;++N)_[N]=gd(T[g+N*4>>>2>>>0],`parameter ${N}`);return _},dg=(h,g,_)=>{var N=[],$=h(N,_);return N.length&&(T[g>>>2>>>0]=Gr.toHandle(N)),$},hg={},su=h=>{var g=hg[h];return g===void 0?Je(h):g},pg=function(h,g,_){g>>>=0;var N=8,[$,...U]=fg(h,g),K=$.toWireType.bind($),ae=U.map(Ie=>Ie.readValueFromPointer.bind(Ie));h--;var de={toValue:Gr.toValue},Te=ae.map((Ie,Ut)=>{var br=`argFromPtr${Ut}`;return de[br]=Ie,`${br}(args${Ut?"+"+Ut*N:""})`}),Ze;switch(_){case 0:Ze="toValue(handle)";break;case 2:Ze="new (toValue(handle))";break;case 3:Ze="";break;case 1:de.getStringOrSymbol=su,Ze="toValue(handle)[getStringOrSymbol(methodName)]";break}Ze+=`(${Te})`,$.isVoid||(de.toReturnWire=K,de.emval_returnValue=dg,Ze=`return emval_returnValue(toReturnWire, destructorsRef, ${Ze})`),Ze=`return function (handle, methodName, destructorsRef, args) {
  ${Ze}
  }`;var st=new Function(Object.keys(de),Ze)(...Object.values(de)),rt=`methodCaller<(${U.map(Ie=>Ie.name)}) => ${$.name}>`;return pd(Kn(rt,st))};function md(h){return h>>>=0,h?(h=su(h),Gr.toHandle(globalThis[h])):Gr.toHandle(globalThis)}function gg(h,g){return h>>>=0,g>>>=0,h=Gr.toValue(h),g=Gr.toValue(g),Gr.toHandle(h[g])}function yd(h){h>>>=0,h>9&&(Ja[h+1]+=1)}function mg(h,g){return h>>>=0,g>>>=0,h=Gr.toValue(h),g=Gr.toValue(g),h instanceof g}function yg(h,g,_,N,$){return h>>>=0,g>>>=0,_>>>=0,N>>>=0,$>>>=0,ou[h](g,_,N,$)}function vg(){return Gr.toHandle([])}function xg(h){return h>>>=0,Gr.toHandle(su(h))}function vd(){return Gr.toHandle({})}function bg(h){h>>>=0;var g=Gr.toValue(h);Pn(g),Ii(h)}function wg(h,g,_){h>>>=0,g>>>=0,_>>>=0,h=Gr.toValue(h),g=Gr.toValue(g),_=Gr.toValue(_),h[g]=_}function kg(h){return h>>>=0,h=Gr.toValue(h),Gr.toHandle(typeof h)}function Sg(h,g){h=et(h),g>>>=0;var _=new Date(h*1e3);E[g>>>2>>>0]=_.getUTCSeconds(),E[g+4>>>2>>>0]=_.getUTCMinutes(),E[g+8>>>2>>>0]=_.getUTCHours(),E[g+12>>>2>>>0]=_.getUTCDate(),E[g+16>>>2>>>0]=_.getUTCMonth(),E[g+20>>>2>>>0]=_.getUTCFullYear()-1900,E[g+24>>>2>>>0]=_.getUTCDay();var N=Date.UTC(_.getUTCFullYear(),0,1,0,0,0,0),$=(_.getTime()-N)/(1e3*60*60*24)|0;E[g+28>>>2>>>0]=$}var jg=h=>h%4===0&&(h%100!==0||h%400===0),_g=[0,31,60,91,121,152,182,213,244,274,305,335],xd=[0,31,59,90,120,151,181,212,243,273,304,334],bd=h=>{var g=jg(h.getFullYear()),_=g?_g:xd,N=_[h.getMonth()]+h.getDate()-1;return N};function Pg(h,g){h=et(h),g>>>=0;var _=new Date(h*1e3);E[g>>>2>>>0]=_.getSeconds(),E[g+4>>>2>>>0]=_.getMinutes(),E[g+8>>>2>>>0]=_.getHours(),E[g+12>>>2>>>0]=_.getDate(),E[g+16>>>2>>>0]=_.getMonth(),E[g+20>>>2>>>0]=_.getFullYear()-1900,E[g+24>>>2>>>0]=_.getDay();var N=bd(_)|0;E[g+28>>>2>>>0]=N,E[g+36>>>2>>>0]=-(_.getTimezoneOffset()*60);var $=new Date(_.getFullYear(),0,1),U=new Date(_.getFullYear(),6,1).getTimezoneOffset(),K=$.getTimezoneOffset(),ae=(U!=K&&_.getTimezoneOffset()==Math.min(K,U))|0;E[g+32>>>2>>>0]=ae}var Cg=function(h){h>>>=0;var g=(()=>{var _=new Date(E[h+20>>>2>>>0]+1900,E[h+16>>>2>>>0],E[h+12>>>2>>>0],E[h+8>>>2>>>0],E[h+4>>>2>>>0],E[h>>>2>>>0],0),N=E[h+32>>>2>>>0],$=_.getTimezoneOffset(),U=new Date(_.getFullYear(),0,1),K=new Date(_.getFullYear(),6,1).getTimezoneOffset(),ae=U.getTimezoneOffset(),de=Math.min(ae,K);if(N<0)E[h+32>>>2>>>0]=+(K!=ae&&de==$);else if(N>0!=(de==$)){var Te=Math.max(ae,K),Ze=N>0?de:Te;_.setTime(_.getTime()+(Ze-$)*6e4)}E[h+24>>>2>>>0]=_.getDay();var st=bd(_)|0;E[h+28>>>2>>>0]=st,E[h>>>2>>>0]=_.getSeconds(),E[h+4>>>2>>>0]=_.getMinutes(),E[h+8>>>2>>>0]=_.getHours(),E[h+12>>>2>>>0]=_.getDate(),E[h+16>>>2>>>0]=_.getMonth(),E[h+20>>>2>>>0]=_.getYear();var rt=_.getTime();return isNaN(rt)?-1:rt/1e3})();return BigInt(g)},jl=function(h,g,_,N){h>>>=0,g>>>=0,_>>>=0,N>>>=0;var $=new Date().getFullYear(),U=new Date($,0,1),K=new Date($,6,1),ae=U.getTimezoneOffset(),de=K.getTimezoneOffset(),Te=Math.max(ae,de);T[h>>>2>>>0]=Te*60,E[g>>>2>>>0]=+(ae!=de);var Ze=Ie=>{var Ut=Ie>=0?"-":"+",br=Math.abs(Ie),bn=String(Math.floor(br/60)).padStart(2,"0"),wn=String(br%60).padStart(2,"0");return`UTC${Ut}${bn}${wn}`},st=Ze(ae),rt=Ze(de);de<ae?(Cn(st,_,17),Cn(rt,N,17)):(Cn(st,N,17),Cn(rt,_,17))},wd=()=>Date.now(),kd=()=>4294901760,Q=(h,g)=>Math.ceil(h/g)*g,ue=h=>{var g=Nn.buffer.byteLength,_=(h-g+65535)/65536|0;try{return Nn.grow(_),L(),1}catch{}};function ce(h){h>>>=0;var g=O.length,_=kd();if(h>_)return!1;for(var N=1;N<=4;N*=2){var $=g*(1+.2/N);$=Math.min($,h+100663296);var U=Math.min(_,Q(Math.max(h,$),65536)),K=ue(U);if(K)return!0}return!1}var pe={},Re=()=>s||"./this.program",Me=()=>{if(!Me.strings){var h=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:h,_:Re()};for(var _ in pe)pe[_]===void 0?delete g[_]:g[_]=pe[_];var N=[];for(var _ in g)N.push(`${_}=${g[_]}`);Me.strings=N}return Me.strings};function Xe(h,g){h>>>=0,g>>>=0;var _=0,N=0;for(var $ of Me()){var U=g+_;T[h+N>>>2>>>0]=U,_+=Cn($,U,1/0)+1,N+=4}return 0}function Ke(h,g){h>>>=0,g>>>=0;var _=Me();T[h>>>2>>>0]=_.length;var N=0;for(var $ of _)N+=rr($)+1;return T[g>>>2>>>0]=N,0}var ot=0,We=()=>ge||ot>0,ut=h=>{var g;We()||((g=r.onExit)==null||g.call(r,h),y=!0),c(h,new le(h))},zt=(h,g)=>{ut(h)},lr=zt;function Ar(h){try{var g=Fe.getStreamFromFD(h);return M.close(g),0}catch(_){if(typeof M>"u"||_.name!=="ErrnoError")throw _;return _.errno}}var cn=(h,g,_,N)=>{for(var $=0,U=0;U<_;U++){var K=T[g>>>2>>>0],ae=T[g+4>>>2>>>0];g+=8;var de=M.read(h,k,K,ae,N);if(de<0)return-1;if($+=de,de<ae)break}return $};function vn(h,g,_,N){g>>>=0,_>>>=0,N>>>=0;try{var $=Fe.getStreamFromFD(h),U=cn($,g,_);return T[N>>>2>>>0]=U,0}catch(K){if(typeof M>"u"||K.name!=="ErrnoError")throw K;return K.errno}}function Ur(h,g,_,N){g=et(g),N>>>=0;try{if(isNaN(g))return 61;var $=Fe.getStreamFromFD(h);return M.llseek($,g,_),V[N>>>3>>>0]=BigInt($.position),$.getdents&&g===0&&_===0&&($.getdents=null),0}catch(U){if(typeof M>"u"||U.name!=="ErrnoError")throw U;return U.errno}}var mt=(h,g,_,N)=>{for(var $=0,U=0;U<_;U++){var K=T[g>>>2>>>0],ae=T[g+4>>>2>>>0];g+=8;var de=M.write(h,k,K,ae,N);if(de<0)return-1;if($+=de,de<ae)break}return $};function ir(h,g,_,N){g>>>=0,_>>>=0,N>>>=0;try{var $=Fe.getStreamFromFD(h),U=mt($,g,_);return T[N>>>2>>>0]=U,0}catch(K){if(typeof M>"u"||K.name!=="ErrnoError")throw K;return K.errno}}if(M.createPreloadedFile=ar,M.preloadFile=nr,M.staticInit(),En(),Rt(),r.noExitRuntime&&(ge=r.noExitRuntime),r.preloadPlugins&&(sn=r.preloadPlugins),r.print&&(b=r.print),r.printErr&&(S=r.printErr),r.wasmBinary&&(v=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(s=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()();var Pr,Sr,xn,Ht,Tr,qn,Nn,Bi;function On(h){Pr=h.ea,Sr=h.fa,xn=h.ga,Ht=h.ia,Tr=h.ja,qn=h.ka,Nn=h.ca,Bi=h.ha}var Fi={g:ur,b:$r,A:pt,V:Wt,W:Lt,L:wt,M:vr,J:Xt,C:Ne,aa:Ct,F:ln,E:gr,o:Ma,_:iu,B:He,p:It,m:Vt,X:ta,$:Aa,x:hd,ba:cg,H:ug,f:pg,a:Ii,q:md,i:gg,j:yd,D:mg,e:yg,k:vg,c:xg,l:vd,d:bg,h:wg,t:kg,N:Sg,O:Pg,P:Cg,Q:jl,Y:wd,K:ce,S:Xe,T:Ke,Z:lr,y:Ar,U:vn,R:Ur,z:ir,G:RN,u:$N,n:_l,s:Pl,v:Ng,I:io,r:Og,w:Mg};function io(h){var g=De();try{$e(h)()}catch(_){if(Ce(g),_!==_+0)throw _;Ht(1,0)}}function Ng(h,g){var _=De();try{return $e(h)(g)}catch(N){if(Ce(_),N!==N+0)throw N;return Ht(1,0),0n}}function _l(h,g,_,N,$){var U=De();try{return $e(h)(g,_,N,$)}catch(K){if(Ce(U),K!==K+0)throw K;Ht(1,0)}}function Pl(h,g,_,N){var $=De();try{return $e(h)(g,_,N)}catch(U){if(Ce($),U!==U+0)throw U;Ht(1,0)}}function Og(h,g){var _=De();try{$e(h)(g)}catch(N){if(Ce(_),N!==N+0)throw N;Ht(1,0)}}function Mg(h,g,_,N){var $=De();try{$e(h)(g,_,N)}catch(U){if(Ce($),U!==U+0)throw U;Ht(1,0)}}function $N(h,g,_,N){var $=De();try{return $e(h)(g,_,N)}catch(U){if(Ce($),U!==U+0)throw U;Ht(1,0)}}function RN(h,g,_){var N=De();try{return $e(h)(g,_)}catch($){if(Ce(N),$!==$+0)throw $;Ht(1,0)}}function DN(h){h=Object.assign({},h);var g=N=>$=>N($)>>>0,_=N=>()=>N()>>>0;return h.ea=g(h.ea),h.ga=g(h.ga),h._emscripten_stack_alloc=g(h._emscripten_stack_alloc),h.ka=_(h.ka),h}function Ag(){if(or>0){Lr=Ag;return}if(F(),or>0){Lr=Ag;return}function h(){var g;r.calledRun=!0,!y&&(H(),P==null||P(r),(g=r.onRuntimeInitialized)==null||g.call(r),W())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),h()},1)):h()}var Ps;return Ps=await X(),Ag(),D?t=r:t=new Promise((h,g)=>{P=h,j=g}),t}const sne=Object.freeze(Object.defineProperty({__proto__:null,default:AN},Symbol.toStringTag,{value:"Module"})),lne=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Ascii = (2,1); Byte = (1,1)
    Srational = (10,8)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevelRepeatDim = (50713, Type.Short)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 10:
            flat = [item for sublist in value for item in sublist]  # [[num,den]...]
            return struct.pack('<%sl' % len(flat), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def pack_dng_from_u16(raw_u16_bytes_le, width, height, cfa_str, black_level_list, cm_flat, make_str, model_str, unique_model_str):
    raw_data = np.frombuffer(raw_u16_bytes_le, dtype=np.uint16).copy()
    raw_data = raw_data.astype(np.int32)
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    white_level = 65019
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]
    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}

    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]),
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, make_str),
        dngTag(Tag.Model, model_str),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]),
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, unique_model_str),
    ]

    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0]))
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)

    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size

    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC

    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break

    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))

    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12

    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)

    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`;let Xm=null;async function cne(e){return Xm||(Xm=(async()=>{if(!window.loadPyodide)throw new Error("Pyodide missing: window.loadPyodide not found.");e==null||e("Loading Pyodide...");const t=await window.loadPyodide();return e==null||e("Loading numpy..."),await t.loadPackage("numpy"),e==null||e("Init DNG writer kernel..."),await t.runPythonAsync(lne),t})()),Xm}let Km=null;async function une(){Km||(Km=AN({locateFile:(t,r)=>t.endsWith("joraw.wasm")?new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href:r+t}));const e=await Km;return e.LibRaw||e.JoRaw}function fne(e,t,r,n){const a=t*r,i=new Float32Array(a);let o=0;for(let s=0;s<r;s++){const c=(s&1)<<1;for(let u=0;u<t;u++){const f=c|u&1;i[o]=e[o]-n[f],o++}}return i}function dne(e,t,r,n){const a=t*r,i=new Uint16Array(a);let o=0;for(let s=0;s<r;s++){const c=(s&1)<<1;for(let u=0;u<t;u++){const f=c|u&1;let d=e[o]+n[f];d<0&&(d=0),d>65535&&(d=65535),i[o]=d+.5|0,o++}}return i}function hne(e){const t=new Uint16Array([255]);if(new Uint8Array(t.buffer)[0]===255)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);const n=new Uint8Array(e.length*2),a=new DataView(n.buffer);for(let i=0;i<e.length;i++)a.setUint16(i*2,e[i],!0);return n}function pne(e){const t=e.trim(),r=[];let n=0;const a=f=>f>="0"&&f<="9",i=f=>f>="A"&&f<="Z"||f>="a"&&f<="z";for(;n<t.length;){const f=t[n];if(f<=" "){n++;continue}if(f==="("){r.push({t:"lp"}),n++;continue}if(f===")"){r.push({t:"rp"}),n++;continue}if(f===","){r.push({t:"comma"}),n++;continue}if(f==="+"&&t[n+1]==="+"){r.push({t:"op",v:"++"}),n+=2;continue}if(f==="+"){r.push({t:"op",v:"+"}),n++;continue}if(f==="-"){r.push({t:"op",v:"-"}),n++;continue}if(f==="*"){r.push({t:"op",v:"*"}),n++;continue}if(f==="/"){r.push({t:"op",v:"/"}),n++;continue}if(a(f)||f==="."){let d=n+1;for(;d<t.length&&(a(t[d])||t[d]===".");)d++;const p=Number(t.slice(n,d));if(!Number.isFinite(p))throw new Error(`Bad number: ${t.slice(n,d)}`);r.push({t:"num",v:p}),n=d;continue}if(i(f)){let d=n+1;for(;d<t.length&&i(t[d]);)d++;const p=t.slice(n,d).toUpperCase();let m=d;for(;m<t.length&&t[m]<=" ";)m++;t[m]==="("&&(p==="MAX"||p==="MIN"||p==="MID")?r.push({t:"func",name:p}):r.push({t:"id",v:p}),n=d;continue}throw new Error(`Unexpected char at ${n}: ${f}`)}const o=[];for(let f=0;f<r.length;f++){const d=r[f],p=o[o.length-1],m=!p||p.t==="op"||p.t==="lp"||p.t==="comma";if(d.t==="op"&&(d.v==="-"||d.v==="+")&&m){o.push({t:"num",v:0}),o.push(d);continue}o.push(d)}const s=[],c=f=>f.t==="num"||f.t==="id"||f.t==="rp",u=f=>f.t==="num"||f.t==="id"||f.t==="lp"||f.t==="func";for(let f=0;f<o.length;f++){const d=o[f],p=s[s.length-1];p&&c(p)&&u(d)&&s.push({t:"op",v:"*"}),s.push(d)}return s}function g3(e){return e==="*"||e==="/"?2:1}function gne(e){const t=[],r=[],n=[];for(const a of e){if(a.t==="num"||a.t==="id"){t.push(a);continue}if(a.t==="func"){r.push(a),n.push(1);continue}if(a.t==="comma"){for(;r.length&&r[r.length-1].t!=="lp";)t.push(r.pop());if(!r.length)throw new Error("Comma found outside parentheses.");if(!n.length)throw new Error("Comma found but no function context.");n[n.length-1]+=1;continue}if(a.t==="lp"){r.push(a);continue}if(a.t==="rp"){for(;r.length&&r[r.length-1].t!=="lp";)t.push(r.pop());if(!r.length)throw new Error("Mismatched parentheses");if(r.pop(),r.length&&r[r.length-1].t==="func"){const i=r.pop(),o=n.pop()??1;t.push({t:"func",name:i.name,argc:o})}continue}if(a.t==="op"){for(;r.length;){const i=r[r.length-1];if(i.t!=="op")break;const o=g3(a.v);if(g3(i.v)>=o)t.push(r.pop());else break}r.push(a);continue}}for(;r.length;){const a=r.pop();if(a.t==="lp"||a.t==="rp")throw new Error("Mismatched parentheses");if(a.t==="func"){const i=n.pop()??1;t.push({t:"func",name:a.name,argc:i})}else t.push(a)}if(n.length!==0)throw new Error("Internal error: argCountStack not empty.");return t}function mne(e,t){for(let n=1;n<t;n++){const a=e[n];let i=n-1;for(;i>=0&&e[i]>a;)e[i+1]=e[i],i--;e[i+1]=a}const r=t-1>>1;return e[r]}function yne(e,t,r){if(t.size===0)throw new Error("No RAW loaded.");const n=t.values().next().value,a=n.width,i=n.height,o=a*i,s=new Map,c=v=>{const y=t.get(v);if(!y)throw new Error(`Unknown RAW key: ${v}`);if(y.width!==a||y.height!==i)throw new Error("Dimension mismatch among RAWs.");let w=s.get(v);if(!w){w=new Float64Array(o);const P=y.workF32;for(let j=0;j<o;j++)w[j]=P[j];s.set(v,w)}return{kind:"img",v:w,w:a,h:i,firstId:v}},u=v=>({kind:"scalar",v}),f=v=>{if(v.kind==="img")return v;const y=new Float64Array(o);return y.fill(v.v),{kind:"img",v:y,w:a,h:i,firstId:void 0}},d=(v,y)=>v??y,p=[];for(const v of e){if(v.t==="num"){p.push(u(v.v));continue}if(v.t==="id"){p.push(c(v.v));continue}if(v.t==="func"){const y=v.argc??1;if(y<1)throw new Error(`${v.name.toLowerCase()}(...) requires at least 1 argument.`);const w=[];for(let A=0;A<y;A++){const R=p.pop();if(!R)throw new Error(`${v.name.toLowerCase()}(...) missing argument(s).`);w.push(R)}if(w.reverse(),w.every(A=>A.kind==="scalar")){const A=w.map(R=>R.v);for(let R=1;R<A.length;R++){const E=A[R];let T=R-1;for(;T>=0&&A[T]>E;)A[T+1]=A[T],T--;A[T+1]=E}if(v.name==="MAX")p.push(u(A[A.length-1]));else if(v.name==="MIN")p.push(u(A[0]));else{const R=A.length-1>>1;p.push(u(A[R]))}continue}const j=w.map(f),k=j.reduce((A,R)=>d(A,R.firstId),void 0),O=new Float64Array(o);if(v.name==="MAX"||v.name==="MIN"){const A=j[0].v;for(let R=0;R<o;R++)O[R]=A[R];if(v.name==="MAX")for(let R=1;R<j.length;R++){const E=j[R].v;for(let T=0;T<o;T++)E[T]>O[T]&&(O[T]=E[T])}else for(let R=1;R<j.length;R++){const E=j[R].v;for(let T=0;T<o;T++)E[T]<O[T]&&(O[T]=E[T])}p.push({kind:"img",v:O,w:a,h:i,firstId:k});continue}if(v.name==="MID"){const A=j.length,R=new Float64Array(A);for(let E=0;E<o;E++){for(let T=0;T<A;T++)R[T]=j[T].v[E];O[E]=mne(R,A)}p.push({kind:"img",v:O,w:a,h:i,firstId:k});continue}throw new Error(`Unknown function: ${v.name}`)}if(v.t==="op"){const y=v.v,w=p.pop(),P=p.pop();if(!P||!w)throw new Error(`Operator ${y} missing operands`);if(y==="++"){if(!r)throw new Error("Formula uses '++' but ppRange is null.");const E=f(P),T=f(w),B=T.firstId;if(!B){p.push(E);continue}const G=t.get(B);if(!G)throw new Error(`Mask source RAW not found: ${B}`);const V=E.v,z=T.v,D=new Float64Array(o),L=r.min,F=r.max,H=G.origU16;for(let W=0;W<o;W++){const J=H[W];D[W]=J>=L&&J<=F?z[W]:V[W]}p.push({kind:"img",v:D,w:a,h:i,firstId:d(E.firstId,B)});continue}if(P.kind==="scalar"&&w.kind==="scalar"){if(y==="+")p.push(u(P.v+w.v));else if(y==="-")p.push(u(P.v-w.v));else if(y==="*")p.push(u(P.v*w.v));else if(y==="/")p.push(u(P.v/w.v));else throw new Error(`Unsupported op ${y}`);continue}const j=f(P),k=f(w),O=j.v,A=k.v,R=new Float64Array(o);if(y==="+")for(let E=0;E<o;E++)R[E]=O[E]+A[E];else if(y==="-")for(let E=0;E<o;E++)R[E]=O[E]-A[E];else if(y==="*")for(let E=0;E<o;E++)R[E]=O[E]*A[E];else if(y==="/")for(let E=0;E<o;E++)R[E]=O[E]/A[E];else throw new Error(`Unsupported op ${y}`);p.push({kind:"img",v:R,w:a,h:i,firstId:d(j.firstId,k.firstId)});continue}}if(p.length!==1)throw new Error("Expression did not reduce to a single value.");const m=p[0],x=m.kind==="img"?m:f(m),b=new Float32Array(o),S=x.v;for(let v=0;v<o;v++)b[v]=S[v];return b}async function vne(e,t,r,n,a,i,o,s,c){if(Object.keys(e).length===0)throw new Error("No files loaded.");if(!t.trim())throw new Error("Formula empty.");const f=t.includes("++");if(f&&!o)throw new Error("Formula contains '++' but ++Range is not provided.");c==null||c("Parsing formula...");const d=pne(t),p=gne(d),m=new Set;for(const B of d)B.t==="id"&&m.add(B.v);for(const B of m)if(!e[B])throw new Error(`Formula references "${B}" but it is not loaded.`);c==null||c("Initializing joraw...");const x=await une(),b=[];let S=0,v=0;const y=Array.from(m);for(let B=0;B<y.length;B++){const G=y[B],V=e[G];c==null||c(`Decoding ${G}: ${V.name} ...`);const z=await V.arrayBuffer(),D=new x;try{await D.open(new Uint8Array(z));const L=D.getRawImage(),F=L.width,H=L.height,W=new Uint16Array(L.data),J=fne(W,F,H,r);if(b.length===0)S=F,v=H;else if(F!==S||H!==v)throw new Error(`Dimension mismatch: ${G} is ${F}x${H}, expected ${S}x${v}.`);b.push({key:G,file:V,width:F,height:H,origU16:W,workF32:J})}finally{D.delete?D.delete():D.close&&D.close()}}if(b.length===0)throw new Error("No referenced RAWs loaded.");c==null||c("Evaluating expression (float domain)...");const w=new Map(b.map(B=>[B.key,B])),P=yne(p,w,f?o:null);if(s){let B=-1/0;for(let G=0;G<P.length;G++)P[G]>B&&(B=P[G]);if(B>1e-6){const z=(65019-Math.max(...n))/B;c==null||c(`Auto-filling 16bit: Max=${B.toFixed(2)}, Factor=${z.toFixed(4)}`);for(let D=0;D<P.length;D++)P[D]*=z}}c==null||c("Finalizing to 16-bit (add OutputBL pedestal + clip)...");const j=dne(P,S,v,n),k=hne(j),O=a&&a.length===9?a:[1,0,0,0,1,0,0,0,1],A=await cne(c);c==null||c("Packing DNG container..."),A.globals.set("js_raw_u16_le",k),A.globals.set("js_width",S),A.globals.set("js_height",v),A.globals.set("js_cfa",String(i||"RGGB")),A.globals.set("js_bl_out",Array.from(n)),A.globals.set("js_cm_flat",O),A.globals.set("js_make","JO-Workstation"),A.globals.set("js_model","StackingTool"),A.globals.set("js_unique_model","JO StackingTool 16bit");const R=await A.runPythonAsync(`
pack_dng_from_u16(
  js_raw_u16_le.to_py(),
  js_width,
  js_height,
  js_cfa,
  js_bl_out.to_py(),
  js_cm_flat.to_py(),
  js_make,
  js_model,
  js_unique_model
)
  `),E=R.toJs();R.destroy&&R.destroy();const T=new Uint8Array(E.byteLength);return T.set(E),T.buffer}const xne=({isOpen:e,onClose:t,zIndex:r,onFocus:n})=>{const[a,i]=C.useState({}),[o,s]=C.useState(0),[c,u]=C.useState("0 0 0 0"),[f,d]=C.useState("0 0 0 0"),[p,m]=C.useState(()=>localStorage.getItem("stacking_formula")||""),[x,b]=C.useState(!0),[S,v]=C.useState("0-14000"),[y,w]=C.useState(!0),[P,j]=C.useState(""),[k,O]=C.useState("RGGB"),[A,R]=C.useState("Idle"),[E,T]=C.useState(!1),[B,G]=C.useState(null),V=C.useRef(null),z=C.useMemo(()=>Object.keys(fc).sort(),[]);C.useEffect(()=>{localStorage.setItem("stacking_formula",p)},[p]);const D=Y=>{let ne="",te=Y;for(;te>=0;)ne=String.fromCharCode(te%26+65)+ne,te=Math.floor(te/26)-1;return ne},L=Y=>{if(Y.target.files&&Y.target.files.length>0){const ne={...a};let te=o;Array.from(Y.target.files).forEach(fe=>{const se=D(te++);ne[se]=fe}),i(ne),s(te)}Y.target.value=""},F=()=>{i({}),s(0),G(null),R("Idle")},H=(Y,ne)=>{const te=Y.trim().split(/[\s,]+/).map(Number);if(te.length<1||te.some(isNaN))throw new Error(`Invalid ${ne} Black Level format.`);return[te[0],te.length>1?te[1]:te[0],te.length>2?te[2]:te[0],te.length>3?te[3]:te[0]]},W=async()=>{if(Object.keys(a).length===0){G("No files loaded.");return}if(!p.trim()){G("Please enter a formula.");return}let Y,ne;try{Y=H(c,"Input"),ne=H(f,"Output")}catch(se){G(se.message);return}let te=null;if(x){const se=S.split("-").map(ye=>parseFloat(ye.trim()));if(se.length===2&&!isNaN(se[0])&&!isNaN(se[1]))te={min:Math.min(se[0],se[1]),max:Math.max(se[0],se[1])};else{G("Invalid ++Range format. Use min-max (e.g., 0-14000).");return}}else if(p.includes("++")){G("Formula contains '++' operator but ++Range is disabled.");return}let fe=null;if(P.trim()&&(fe=P.trim().split(/[\s,\n]+/).map(Number),fe.length!==9||fe.some(isNaN))){G("Color Matrix must be 9 numbers.");return}T(!0),G(null),R("Starting...");try{await new Promise(le=>setTimeout(le,50));const se=await vne(a,p,Y,ne,fe,k,te,y,le=>R(le));R("Creating Download...");const ye=new Blob([se],{type:"image/x-adobe-dng"}),ie=URL.createObjectURL(ye),X=document.createElement("a");X.href=ie,X.download=`Stacked_Result_${Date.now()}.dng`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(ie),R("Done!")}catch(se){console.error(se),G(se.message),R("Failed")}finally{T(!1)}},J=()=>{d(c)};return e?l.jsxs(Ss,{initialPosition:{x:window.innerWidth/2-250,y:100},onClose:t,zIndex:r,onFocus:n,className:"w-[500px] bg-white dark:bg-slate-900 border-2 border-black dark:border-white shadow-2xl flex flex-col font-mono",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-emerald-700 text-white",children:[l.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest",children:"Advanced Math Stacking Tool"}),l.jsx("button",{onClick:t,className:"hover:text-red-300 transition-colors",children:""})]}),l.jsxs("div",{className:"p-4 flex flex-col gap-4 overflow-y-auto max-h-[80vh]",children:[l.jsx("div",{className:"h-28 border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-black/30 rounded p-2 overflow-y-auto",children:Object.keys(a).length===0?l.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-xs",children:"No files loaded. Click 'Add Files' below."}):l.jsx("div",{className:"space-y-1",children:Object.entries(a).map(([Y,ne])=>{const te=ne;return l.jsxs("div",{className:"flex justify-between text-xs border-b border-gray-200 dark:border-slate-800 pb-1 last:border-0",children:[l.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400 w-8",children:Y}),l.jsx("span",{className:"truncate text-gray-700 dark:text-slate-300 flex-1",children:te.name}),l.jsxs("span",{className:"text-gray-400",children:[(te.size/1024/1024).toFixed(1),"MB"]})]},Y)})})}),l.jsxs("div",{className:"flex flex-col gap-3 flex-shrink-0",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"file",ref:V,multiple:!0,className:"hidden",onChange:L,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var Y;return(Y=V.current)==null?void 0:Y.click()},className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-slate-800 dark:hover:bg-slate-700 py-1 rounded text-xs font-bold transition-colors",children:"Add Files"}),l.jsx("button",{onClick:F,className:"px-3 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 py-1 rounded text-xs font-bold transition-colors",children:"Clear"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Input BL (Subtract)"}),l.jsx("input",{type:"text",value:c,onChange:Y=>u(Y.target.value),className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none"}),l.jsx("div",{className:"text-[9px] text-gray-400 mt-0.5",children:"(0,0), (0,1), (1,0), (1,1)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Output BL (Add to Result)"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("input",{type:"text",value:f,onChange:Y=>d(Y.target.value),className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none"}),l.jsx("button",{onClick:J,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 rounded text-[9px]",title:"Copy Input to Output",children:""})]})]})]}),l.jsxs("div",{className:"flex flex-col justify-end",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Options"}),l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer mb-2",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:Y=>w(Y.target.checked),className:"rounded text-emerald-600 focus:ring-emerald-500"}),l.jsx("span",{className:"text-[10px] font-bold uppercase text-emerald-600 dark:text-emerald-400",children:"16bit (Auto Fill)"})]}),l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[l.jsx("input",{type:"checkbox",checked:x,onChange:Y=>b(Y.target.checked),className:"rounded",title:"Enable Conditional ++ Operator"}),l.jsx("span",{className:`text-[9px] font-bold uppercase ${x?"text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"++Range:"}),l.jsx("input",{type:"text",value:S,onChange:Y=>v(Y.target.value),disabled:!x,placeholder:"min-max",className:"w-full text-[10px] px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none disabled:opacity-50"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Math Formula ( + - * / and ++ )"}),l.jsx("textarea",{value:p,onChange:Y=>m(Y.target.value),placeholder:"e.g. (A+B)/2 or A ++ 4*B",className:"w-full h-14 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none resize-none font-mono"}),l.jsxs("p",{className:"text-[9px] text-gray-400 mt-1 leading-tight",children:["Operators: +, -, *, /, ( ). ",l.jsx("br",{}),l.jsx("span",{className:"text-indigo-400 font-bold",children:"++"})," Operator: ",l.jsx("code",{children:"A ++ B"}),' means "Use B if B is in range, else use A". ',l.jsx("br",{}),"Inputs are linearized float32 (Raw - InputBL)."]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Color Matrix (9 vals)"}),l.jsxs("select",{className:"text-[9px] bg-gray-100 dark:bg-slate-800 border border-black dark:border-slate-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer",onChange:Y=>{const ne=fc[Y.target.value];ne&&j(ne),Y.target.value=""},defaultValue:"",children:[l.jsx("option",{value:"",disabled:!0,children:"Presets..."}),z.map(Y=>l.jsx("option",{value:Y,children:Y},Y))]})]}),l.jsx("input",{type:"text",value:P,onChange:Y=>j(Y.target.value),placeholder:"e.g. 1 0 0 0 1 0 0 0 1",className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"CFA Pattern"}),l.jsxs("select",{value:k,onChange:Y=>O(Y.target.value),className:"w-full bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-1 text-xs font-bold",children:[l.jsx("option",{value:"RGGB",children:"RGGB"}),l.jsx("option",{value:"BGGR",children:"BGGR"}),l.jsx("option",{value:"GBRG",children:"GBRG"}),l.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),B&&l.jsx("div",{className:"text-red-500 text-xs bg-red-50 dark:bg-red-900/20 p-2 rounded text-center font-bold",children:B}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("div",{className:"flex-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold truncate",children:A}),l.jsx("button",{onClick:W,disabled:E,className:`px-6 py-2 text-sm font-bold uppercase tracking-wide text-white rounded shadow-md transition-all active:scale-95 ${E?"bg-gray-400 cursor-wait":"bg-emerald-600 hover:bg-emerald-500"}`,children:"Process & Save DNG"})]})]})]})]}):null},bne=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Z8-Rescued"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Nikon Z 8") 
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,wne=[1.1423,-.4564,-.1123,-.4816,1.2895,.2119,-.021,.1061,.7282],kne=[4032,4032,4032,4032],Sne=2,jne=({isOpen:e,onClose:t,zIndex:r=250,onFocus:n})=>{const[a,i]=C.useState(!0),[o,s]=C.useState(!1),[c,u]=C.useState(""),f=C.useRef(null),d=C.useRef(null);C.useEffect(()=>{e&&!f.current&&(async()=>{try{const x=await window.loadPyodide();await x.loadPackage("numpy"),await x.runPythonAsync(bne),f.current=x,i(!1)}catch(x){console.error("Pyodide Init Failed",x),u("Error loading Python environment.")}})()},[e]);const p=async m=>{if(!m.target.files||m.target.files.length===0||!f.current)return;const x=Array.from(m.target.files);s(!0),u("Starting batch...");const b=f.current;for(let S=0;S<x.length;S++){const v=x[S];u(`Processing ${S+1}/${x.length}: ${v.name}`);try{const y=await v.arrayBuffer(),w=await hc(y),{data:P,width:j,height:k}=w,O=[[0,0,0],[0,0,0],[0,0,0],[0,0,0]];for(let D=0;D<k;D+=2){const L=D*j,F=(D+1)*j;for(let H=0;H<j;H+=2){const W=[L+H,L+H+1,F+H,F+H+1];for(let J=0;J<4;J++){const Y=P[W[J]];Y>=1006&&Y<=1008&&O[J][Y-1006]++}}}const A=[-1,-1,-1,-1];for(let D=0;D<4;D++){const L=O[D][0],F=O[D][1],H=O[D][2];H<F?A[D]=1007:H>F&&F<L&&(A[D]=1006)}let R=!1;if(A.some(D=>D>-1)){R=!0;for(let D=0;D<k;D+=2){const L=D*j,F=(D+1)*j;for(let H=0;H<j;H+=2){const W=[L+H,L+H+1,F+H,F+H+1];for(let J=0;J<4;J++){const Y=A[J];Y>-1&&P[W[J]]<=Y&&(P[W[J]]+=1)}}}}b.globals.set("js_raw_bytes",new Uint8Array(P.buffer,P.byteOffset,P.byteLength)),b.globals.set("js_width",j),b.globals.set("js_height",k),b.globals.set("js_cfa","RGGB"),b.globals.set("js_bl_list",kne),b.globals.set("js_shift",Sne),b.globals.set("js_linear_shift",0),b.globals.set("js_cm_flat",wne);const E=await b.runPythonAsync(`
                    convert_to_dng(
                        js_raw_bytes.to_py(), 
                        js_width, 
                        js_height, 
                        js_cfa, 
                        js_bl_list.to_py(), 
                        js_shift,
                        js_linear_shift,
                        js_cm_flat.to_py()
                    )
                `),T=E.toJs();E.destroy();const B=new Blob([T],{type:"image/x-adobe-dng"}),G=URL.createObjectURL(B),V=document.createElement("a");V.href=G;const z=v.name.substring(0,v.name.lastIndexOf("."))||"image";V.download=`${z}_Z8Rescued_16bit.dng`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(G),await new Promise(D=>setTimeout(D,100))}catch(y){console.error(`Error processing ${v.name}`,y),u(`Error on ${v.name}: ${y.message}`)}}s(!1),u("Batch Complete."),m.target.value=""};return e?l.jsxs(Ss,{initialPosition:{x:window.innerWidth/2-200,y:150},onClose:t,zIndex:r,onFocus:n,className:"w-[400px] bg-white dark:bg-slate-900 border-2 border-red-600 shadow-[8px_8px_0px_rgba(220,38,38,0.3)] rounded-none flex flex-col font-mono",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-red-600 text-white border-b-2 border-black dark:border-white",children:[l.jsxs("h3",{className:"text-sm font-bold uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:""}),"  Z8 (Z8 Rescue)"]}),l.jsx("button",{onClick:t,className:"hover:text-black transition-colors font-bold",children:""})]}),l.jsx("div",{className:"p-6 flex flex-col gap-4",children:a?l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx("div",{className:"w-6 h-6 border-4 border-red-600 border-t-transparent animate-spin rounded-full"}),l.jsx("p",{className:"text-xs mt-2 text-gray-500",children:"Loading Python Kernel..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 p-3 text-[10px] text-gray-700 dark:text-gray-300 leading-relaxed",children:[l.jsx("strong",{className:"block mb-1 text-red-600 dark:text-red-400",children:"Logic:"}),"1. iso64 preferred",l.jsx("br",{}),"2. PTC",l.jsx("br",{}),"3. Apply bit-shift (x4) to 16-bit.",l.jsx("br",{}),"4. Export DNG with BL=4032 & Z8 Matrix."]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{type:"file",ref:d,multiple:!0,accept:".nef,.dng",className:"hidden",onChange:p}),l.jsx("button",{onClick:()=>{var m;return(m=d.current)==null?void 0:m.click()},disabled:o,className:`w-full py-3 font-bold uppercase text-xs tracking-widest shadow-md transition-all active:translate-y-1 ${o?"bg-gray-400 text-gray-700 cursor-wait":"bg-red-600 hover:bg-red-500 text-white border-2 border-black dark:border-white"}`,children:o?"Rescuing...":"Select Z8 Files & Rescue"})]}),c&&l.jsx("div",{className:"text-center text-[10px] font-bold text-red-600 dark:text-red-400 border-t border-gray-200 dark:border-slate-800 pt-2 animate-pulse",children:c})]})})]}):null},_ne="http://localhost:5428",Pne=(e=!1)=>{const[t,r]=C.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return C.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${_ne}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const c=await s.json(),u=`Connected (${c.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===c.exiftool&&f.hasDngConverter===!!c.dng_converter?f:{isConnected:!0,message:u,version:c.exiftool,hasDngConverter:!!c.dng_converter})}else r(c=>c.isConnected===!1&&c.message==="Service Error"?c:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},Cne="JTR_BlobStore",to="raw_files",Nne=1,lg=()=>new Promise((e,t)=>{const r=indexedDB.open(Cne,Nne);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(to)||a.createObjectStore(to)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),m3=async(e,t)=>{const r=await lg();return new Promise((n,a)=>{const i=r.transaction(to,"readwrite");i.objectStore(to).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},One=async e=>{const t=await lg();return new Promise((r,n)=>{const o=t.transaction(to,"readonly").objectStore(to).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},Mne=async()=>{const e=await lg();return new Promise((t,r)=>{const n=e.transaction(to,"readwrite");n.objectStore(to).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},TN="jtr_workspace_index",Ane=e=>{try{const t=JSON.stringify(e);localStorage.setItem(TN,t)}catch(t){console.error("Failed to save workspace index",t)}},Tne=()=>{try{const e=localStorage.getItem(TN);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},Ene=async e=>{const n=(await lg()).transaction(to,"readwrite").objectStore(to),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},$ne=[{x:3050,y:1973},{x:4245,y:1980},{x:3043,y:2870},{x:4243,y:2876}],Rne=1195,y3=150,v3=50,Dne=[{x:3528,y:2437.5,ori:2},{x:3775,y:2419,ori:2},{x:3638.5,y:2303,ori:1},{x:3653,y:2548.5,ori:1},{x:3082,y:2413,ori:2},{x:2825,y:2427,ori:2},{x:2946,y:2300.5,ori:1},{x:2966,y:2550,ori:1},{x:3638.5,y:3e3,ori:1},{x:3657.5,y:3248.5,ori:1},{x:3521.5,y:3135,ori:2},{x:3770,y:3108.5,ori:2},{x:4375.5,y:3064.5,ori:2},{x:4620.5,y:3040,ori:2},{x:4486.5,y:2934,ori:1},{x:4509.5,y:3182.5,ori:1},{x:2066.5,y:1726,ori:2},{x:2176.5,y:1597,ori:1},{x:2194.5,y:1843,ori:1},{x:2313.5,y:1705,ori:2},{x:2675.5,y:1799.5,ori:2},{x:2789.5,y:1674,ori:1},{x:2926,y:1787.5,ori:2},{x:2810.5,y:1921.5,ori:1},{x:4380.5,y:1816,ori:2},{x:4497.5,y:1687,ori:1},{x:4513,y:1934.5,ori:1},{x:4628,y:1799.5,ori:2},{x:5099,y:1622.5,ori:1},{x:4985.5,y:1751,ori:2},{x:5122,y:1867.5,ori:1},{x:5229,y:1732,ori:2},{x:2194.5,y:2428,ori:2},{x:2305.5,y:2295.5,ori:1},{x:2327,y:2544,ori:1},{x:2442,y:2405,ori:2},{x:3530.5,y:1741.5,ori:2},{x:3640.5,y:1610,ori:1},{x:3777.5,y:1719.5,ori:2},{x:3666,y:1856.5,ori:1},{x:4222,y:2443.5,ori:2},{x:4470.5,y:2422,ori:2},{x:4334.5,y:2309,ori:1},{x:4356.5,y:2554,ori:1},{x:4965,y:2313,ori:1},{x:4852.5,y:2446,ori:2},{x:4987,y:2561,ori:1},{x:5097,y:2427,ori:2},{x:4981.5,y:3141.5,ori:2},{x:5096,y:3009,ori:1},{x:5222.5,y:3122.5,ori:2},{x:5115.5,y:3256.5,ori:1},{x:2779,y:2928,ori:1},{x:2667,y:3064.5,ori:2},{x:2799,y:3173.5,ori:1},{x:2917.5,y:3043,ori:2},{x:2167.5,y:2993,ori:1},{x:2052,y:3130,ori:2},{x:2187.5,y:3243.5,ori:1},{x:2304.5,y:3108.5,ori:2}];function Ine(e,t){let r=[],n=[];for(let o=0;o<4;o++){let s=e[o].x,c=e[o].y,u=t[o].x,f=t[o].y;r.push([s,c,1,0,0,0,-s*u,-c*u]),r.push([0,0,0,s,c,1,-s*f,-c*f]),n.push(u),n.push(f)}const a=8;for(let o=0;o<a;o++){let s=o;for(let c=o+1;c<a;c++)Math.abs(r[c][o])>Math.abs(r[s][o])&&(s=c);[r[o],r[s]]=[r[s],r[o]],[n[o],n[s]]=[n[s],n[o]];for(let c=o+1;c<a;c++){const u=r[c][o]/r[o][o];n[c]-=u*n[o];for(let f=o;f<a;f++)r[c][f]-=u*r[o][f]}}const i=new Array(a).fill(0);for(let o=a-1;o>=0;o--){let s=0;for(let c=o+1;c<a;c++)s+=r[o][c]*i[c];i[o]=(n[o]-s)/r[o][o]}return[[i[0],i[1],i[2]],[i[3],i[4],i[5]],[i[6],i[7],1]]}function Lne(e,t,r){const n=e[2][0]*t+e[2][1]*r+e[2][2];return{x:(e[0][0]*t+e[0][1]*r+e[0][2])/n,y:(e[1][0]*t+e[1][1]*r+e[1][2])/n}}function Bne(e){if(e.length!==4)return[];const t=Ine($ne,e),n=Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y)/Rne;return Dne.map(a=>{const i=Lne(t,a.x,a.y);let o,s;return a.ori===1?(o=y3*n,s=v3*n):(o=v3*n,s=y3*n),{x:i.x-o/2,y:i.y-s/2,w:o,h:s,ori:a.ori}})}const Fne=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],Gne=`
struct Uniforms {
    width: u32,
    height: u32,
    whiteLevel: f32,
    exposureScale: f32,
    // Black Levels [0,1,2,3]
    bl0: f32, bl1: f32, bl2: f32, bl3: f32,
    // WB Gains [0,1,2,3] - Pre-mapped to Bayer index
    wb0: f32, wb1: f32, wb2: f32, wb3: f32,
    // Color Matrix (3x3 row-major flat)
    cm0: f32, cm1: f32, cm2: f32,
    cm3: f32, cm4: f32, cm5: f32,
    cm6: f32, cm7: f32, cm8: f32,
    // Flags
    renderMode: u32, // 0: Mosaic (Gray), 1: Bilinear (Color), 2: Advanced Unmix
    isBGGR: u32,     // 0: RGGB, 1: BGGR
};

// Advanced Unmix Params (Linearized)
struct UnmixParams {
    bl0: f32, bl1: f32, bl2: f32, bl3: f32,
    bg0: f32, bg1: f32, bg2: f32, bg3: f32,
    fg0: f32, fg1: f32, fg2: f32, fg3: f32,
};

@group(0) @binding(0) var<uniform> u : Uniforms;
@group(0) @binding(1) var<storage, read> rawData : array<u32>; // Packed 2xU16 per U32
@group(0) @binding(2) var<storage, read_write> output : array<u32>; // Packed RGBA8
@group(0) @binding(3) var<uniform> unmix : UnmixParams;

// sRGB Transfer Function
fn srgb_gamma(linear: f32) -> f32 {
    if (linear <= 0.0031308) {
        return 12.92 * linear;
    } else {
        return 1.055 * pow(linear, 1.0 / 2.4) - 0.055;
    }
}

fn get_raw_val(idx: u32) -> f32 {
    let u32Idx = idx / 2u;
    let shift = (idx % 2u) * 16u;
    let packed = rawData[u32Idx];
    return f32((packed >> shift) & 0xFFFFu);
}

// Get Bayer Index for (x, y)
// 0=TL, 1=TR, 2=BL, 3=BR (relative to 2x2 block)
fn get_bayer_idx(x: u32, y: u32) -> u32 {
    let rowIsOdd = (y % 2u);
    let colIsOdd = (x % 2u);
    return (rowIsOdd * 2u) + colIsOdd;
}

@compute @workgroup_size(16, 16)
fn main(@builtin(global_invocation_id) global_id : vec3u) {
    let x = global_id.x;
    let y = global_id.y;
    
    if (x >= u.width || y >= u.height) {
        return;
    }

    let idx = y * u.width + x;
    
    // Default output color (R, G, B, A)
    var finalR: f32 = 0.0;
    var finalG: f32 = 0.0;
    var finalB: f32 = 0.0;
    
    // --- MODE 0: MOSAIC (Zero-Dependency Grayscale) ---
    if (u.renderMode == 0u) {
        let rawVal = get_raw_val(idx);
        let bIdx = get_bayer_idx(x, y);
        
        var bl = 0.0;
        var wb = 1.0;
        
        if (bIdx == 0u) { bl = u.bl0; wb = u.wb0; }
        else if (bIdx == 1u) { bl = u.bl1; wb = u.wb1; }
        else if (bIdx == 2u) { bl = u.bl2; wb = u.wb2; }
        else { bl = u.bl3; wb = u.wb3; }
        
        let val = max(0.0, rawVal - bl);
        // Normalize
        var norm = val / (u.whiteLevel - bl);
        norm = norm * u.exposureScale * wb;
        norm = max(0.0, min(1.0, norm));
        
        // Gamma
        let gray = srgb_gamma(norm);
        finalR = gray; finalG = gray; finalB = gray;
    }
    // --- MODE 2: ADVANCED UNMIXING ---
    else if (u.renderMode == 2u) {
        // Logic ported from rawProcessor.ts
        let rawVal = get_raw_val(idx);
        let bIdx = get_bayer_idx(x, y);
        
        var bl = 0.0;
        var bg = 0.0; // Linearized BG target
        var fg = 0.0; // Linearized FG target
        
        if (bIdx == 0u) { bl = unmix.bl0; bg = unmix.bg0; fg = unmix.fg0; }
        else if (bIdx == 1u) { bl = unmix.bl1; bg = unmix.bg1; fg = unmix.fg1; }
        else if (bIdx == 2u) { bl = unmix.bl2; bg = unmix.bg2; fg = unmix.fg2; }
        else { bl = unmix.bl3; bg = unmix.bg3; fg = unmix.fg3; }
        
        // Reference Green Targets
        let ref_bg = (unmix.bg1 + unmix.bg3) * 0.5;
        let ref_fg = (unmix.fg1 + unmix.fg3) * 0.5;
        
        let img_linear = max(0.0, rawVal - bl);
        let denom = fg - bg;
        var alpha = 0.0;
        if (abs(denom) > 1e-9) {
            alpha = (img_linear - bg) / denom;
        }
        
        var val = 0.0;
        if (alpha < 0.0) {
             val = img_linear * (ref_bg / max(bg, 1e-9));
        } else if (alpha > 1.0) {
             val = img_linear * (ref_fg / max(fg, 1e-9));
        } else {
             val = (1.0 - alpha) * ref_bg + alpha * ref_fg;
        }
        
        // Apply exposure and normalize to 16-bit container (65535)
        // Note: JS version normalizes by 65535.0
        var norm = (val * u.exposureScale) / 65535.0;
        norm = max(0.0, min(1.0, norm));
        let gray = srgb_gamma(norm);
        
        finalR = gray; finalG = gray; finalB = gray;
    }
    // --- MODE 1: BASIC COLOR (Bilinear) ---
    else if (u.renderMode == 1u) {
        // Bilinear Demosaic
        // Check pixel type
        let rowIsOdd = (y % 2u);
        let colIsOdd = (x % 2u);
        
        var isRed = false;
        var isBlue = false;
        var isGreen = false;
        
        // Mapping based on BGGR flag
        // Standard RGGB: (0,0)=R
        // BGGR: (0,0)=B
        if (rowIsOdd == 0u && colIsOdd == 0u) {
            if (u.isBGGR == 1u) { isBlue = true; } else { isRed = true; }
        } else if (rowIsOdd == 1u && colIsOdd == 1u) {
            if (u.isBGGR == 1u) { isRed = true; } else { isBlue = true; }
        } else {
            isGreen = true;
        }
        
        var r_lin: f32 = 0.0;
        var g_lin: f32 = 0.0;
        var b_lin: f32 = 0.0;
        
        // 1. Fetch RAW data (clamped to border)
        // Helper to get normalized linear value at arbitrary coords
        // Note: This is expensive in branching, optimized approach would pre-load shared memory
        
        // Since we are inside a compute shader, random access is "okay" but cache-unfriendly.
        // For simplicity we implement direct neighbors lookups.
        
        let w = u.width;
        let h = u.height;
        
        // Get Val Helper: returns (Raw - BL) * WB
        // Does NOT handle boundary checks inside, caller must ensure or clamp
        
        // Pre-calculate current pixel's linear value
        let centerRaw = get_raw_val(idx);
        let centerBIdx = get_bayer_idx(x, y);
        // ... (We need a function for this repeated logic, but WGSL function limitations apply)
        
        // Simplified approach: Just get raw neighbors. 
        // We will apply BL/WB *after* averaging raw values? 
        // NO. Physics says: (Raw - BL) * WB then Average.
        
        // Let's implement a 'get_linear_pixel(x, y)' logic inline or fn
        // We need to sample:
        // Center, Up, Down, Left, Right, UL, UR, DL, DR
        
        // --- Red Pixel Case ---
        if (isRed) {
            r_lin = get_norm_pixel(x, y);
            // Green: Average Cross (Up, Down, Left, Right)
            g_lin = (get_norm_pixel(x, y-1u) + get_norm_pixel(x, y+1u) + get_norm_pixel(x-1u, y) + get_norm_pixel(x+1u, y)) * 0.25;
            // Blue: Average Diagonal
            b_lin = (get_norm_pixel(x-1u, y-1u) + get_norm_pixel(x+1u, y-1u) + get_norm_pixel(x-1u, y+1u) + get_norm_pixel(x+1u, y+1u)) * 0.25;
        }
        // --- Blue Pixel Case ---
        else if (isBlue) {
            b_lin = get_norm_pixel(x, y);
            // Green: Average Cross
            g_lin = (get_norm_pixel(x, y-1u) + get_norm_pixel(x, y+1u) + get_norm_pixel(x-1u, y) + get_norm_pixel(x+1u, y)) * 0.25;
            // Red: Average Diagonal
            r_lin = (get_norm_pixel(x-1u, y-1u) + get_norm_pixel(x+1u, y-1u) + get_norm_pixel(x-1u, y+1u) + get_norm_pixel(x+1u, y+1u)) * 0.25;
        }
        // --- Green Pixel Case ---
        else {
            g_lin = get_norm_pixel(x, y);
            
            // Need to know if we are on Red Row or Blue Row
            // RGGB: Row 0 (Even) = R G R G. Green is at (0,1). Neighbors L/R are R.
            //       Row 1 (Odd)  = G B G B. Green is at (1,0). Neighbors L/R are B.
            
            // BGGR: Row 0 = B G B G. Green (0,1). L/R are B.
            //       Row 1 = G R G R. Green (1,0). L/R are R.
            
            var horizIsRed = false;
            if (rowIsOdd == 0u) { // Even Row
                // If RGGB, Row 0 is R-G-R-G. Green neighbors are Red.
                if (u.isBGGR == 0u) { horizIsRed = true; } else { horizIsRed = false; }
            } else { // Odd Row
                 // If RGGB, Row 1 is G-B-G-B. Green neighbors are Blue.
                 if (u.isBGGR == 0u) { horizIsRed = false; } else { horizIsRed = true; }
            }
            
            let valH = (get_norm_pixel(x-1u, y) + get_norm_pixel(x+1u, y)) * 0.5;
            let valV = (get_norm_pixel(x, y-1u) + get_norm_pixel(x, y+1u)) * 0.5;
            
            if (horizIsRed) {
                r_lin = valH;
                b_lin = valV;
            } else {
                b_lin = valH;
                r_lin = valV;
            }
        }
        
        // 2. Color Matrix (Linear RGB -> sRGB)
        // r' = cm0*r + cm1*g + cm2*b
        let rr = u.cm0*r_lin + u.cm1*g_lin + u.cm2*b_lin;
        let gg = u.cm3*r_lin + u.cm4*g_lin + u.cm5*b_lin;
        let bb = u.cm6*r_lin + u.cm7*g_lin + u.cm8*b_lin;
        
        // 3. Exposure + Gamma
        finalR = srgb_gamma(max(0.0, min(1.0, rr * u.exposureScale)));
        finalG = srgb_gamma(max(0.0, min(1.0, gg * u.exposureScale)));
        finalB = srgb_gamma(max(0.0, min(1.0, bb * u.exposureScale)));
    }

    // Pack to RGBA8 (Little Endian: A B G R)
    let r8 = u32(finalR * 255.0);
    let g8 = u32(finalG * 255.0);
    let b8 = u32(finalB * 255.0);
    let a8 = 255u;
    
    output[idx] = (a8 << 24u) | (b8 << 16u) | (g8 << 8u) | r8;
}

// Helper to safely get pixel with boundary check
fn get_norm_pixel(x: u32, y: u32) -> f32 {
    let w = u.width;
    let h = u.height;
    
    // Clamp coords
    let sx = min(max(x, 0u), w - 1u);
    let sy = min(max(y, 0u), h - 1u);
    
    let idx = sy * w + sx;
    let rawVal = get_raw_val(idx);
    let bIdx = get_bayer_idx(sx, sy);
    
    var bl = 0.0;
    var wb = 1.0;
    
    if (bIdx == 0u) { bl = u.bl0; wb = u.wb0; }
    else if (bIdx == 1u) { bl = u.bl1; wb = u.wb1; }
    else if (bIdx == 2u) { bl = u.bl2; wb = u.wb2; }
    else { bl = u.bl3; wb = u.wb3; }
    
    let val = max(0.0, rawVal - bl);
    // Note: We return linearized, normalized float (0-1) BEFORE exposure/matrix
    return val / (u.whiteLevel - bl) * wb; 
}
`;class zne{constructor(){wr(this,"device",null);wr(this,"pipeline",null);wr(this,"resources",new Map);wr(this,"uniformBuffer",null);wr(this,"unmixParamsBuffer",null);wr(this,"isInitialized",!1)}async init(){if(this.isInitialized)return!0;if(!navigator.gpu)return console.warn("WebGPU not supported."),!1;try{const t=await navigator.gpu.requestAdapter();if(!t)throw new Error("No GPU adapter found.");const r={};t.limits.maxStorageBufferBindingSize&&(r.maxStorageBufferBindingSize=Math.min(t.limits.maxStorageBufferBindingSize,1024*1024*1024)),t.limits.maxBufferSize&&(r.maxBufferSize=Math.min(t.limits.maxBufferSize,1024*1024*1024)),this.device=await t.requestDevice({requiredLimits:r});const n=this.device.createShaderModule({code:Gne}),a=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]});return this.pipeline=this.device.createComputePipeline({layout:this.device.createPipelineLayout({bindGroupLayouts:[a]}),compute:{module:n,entryPoint:"main"}}),this.uniformBuffer=this.device.createBuffer({size:256,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.unmixParamsBuffer=this.device.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.isInitialized=!0,console.log("WebGPU Renderer Initialized with limits:",r),!0}catch(t){return console.error("WebGPU Init Failed:",t),!1}}hasImage(t){return this.resources.has(t)}async uploadImage(t,r,n,a){if(this.isInitialized||await this.init(),!(!this.device||!this.pipeline||!this.uniformBuffer||!this.unmixParamsBuffer)){if(this.resources.has(t)){const i=this.resources.get(t);if(i&&i.width===n&&i.height===a)return;this.disposeImage(t)}try{const i=n*a,o=Math.ceil(i*2/4)*4,s=this.device.createBuffer({size:o,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});new Uint16Array(s.getMappedRange()).set(r),s.unmap();const u=i*4,f=this.device.createBuffer({size:u,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),d=this.device.createBuffer({size:u,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),p=this.device.createBindGroup({layout:this.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.uniformBuffer}},{binding:1,resource:{buffer:s}},{binding:2,resource:{buffer:f}},{binding:3,resource:{buffer:this.unmixParamsBuffer}}]});this.resources.set(t,{width:n,height:a,rawBuffer:s,outputBuffer:f,readBuffer:d,bindGroup:p})}catch(i){console.error("[WebGPU] Buffer creation failed (likely OOM or size limit). Falling back to CPU.",i)}}}async render(t,r,n=16383){if(!this.isInitialized&&!await this.init()||!this.device||!this.pipeline||!this.uniformBuffer||!this.unmixParamsBuffer)return null;const a=this.resources.get(t);if(!a)return null;const i=Math.pow(2,r.exposure),o=r.blackLevel||[0,0,0,0],s=r.wbGains||[1,1];let c=[1,1,1,1];r.isBGGR?c=[s[1],1,1,s[0]]:c=[s[0],1,1,s[1]];let u=[1,0,0,0,1,0,0,0,1];if(r.customMatrix&&r.customMatrix.length===9){const k=[[r.customMatrix[0],r.customMatrix[1],r.customMatrix[2]],[r.customMatrix[3],r.customMatrix[4],r.customMatrix[5]],[r.customMatrix[6],r.customMatrix[7],r.customMatrix[8]]],O=dc(k);if(O){const A=pf(Fne,O);u=[A[0][0],A[0][1],A[0][2],A[1][0],A[1][1],A[1][2],A[2][0],A[2][1],A[2][2]]}}const f=u;let d=0;r.renderMode==="zero-dep-color"&&(d=1),r.renderMode==="advanced-zero-dep"&&(d=2);const p=new Float32Array([0,0,n,i,o[0],o[1],o[2],o[3],c[0],c[1],c[2],c[3],f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],0,0]),m=new Uint32Array(p.buffer);if(m[0]=a.width,m[1]=a.height,m[21]=d,m[22]=r.isBGGR?1:0,this.device.queue.writeBuffer(this.uniformBuffer,0,p),d===2&&r.advancedZeroDep){const k=r.advancedZeroDep,O=new Float32Array([k.bl[0],k.bl[1],k.bl[2],k.bl[3],Math.max(0,k.bg[0]-k.bl[0]),Math.max(0,k.bg[1]-k.bl[1]),Math.max(0,k.bg[2]-k.bl[2]),Math.max(0,k.bg[3]-k.bl[3]),Math.max(0,k.fg[0]-k.bl[0]),Math.max(0,k.fg[1]-k.bl[1]),Math.max(0,k.fg[2]-k.bl[2]),Math.max(0,k.fg[3]-k.bl[3])]);this.device.queue.writeBuffer(this.unmixParamsBuffer,0,O)}const x=this.device.createCommandEncoder(),b=x.beginComputePass();b.setPipeline(this.pipeline),b.setBindGroup(0,a.bindGroup);const S=Math.ceil(a.width/16),v=Math.ceil(a.height/16);b.dispatchWorkgroups(S,v),b.end(),x.copyBufferToBuffer(a.outputBuffer,0,a.readBuffer,0,a.width*a.height*4),this.device.queue.submit([x.finish()]),await a.readBuffer.mapAsync(GPUMapMode.READ);const y=a.readBuffer.getMappedRange(),w=new Uint8ClampedArray(y),P=new Uint8ClampedArray(w),j=new ImageData(P,a.width,a.height);return a.readBuffer.unmap(),j}disposeImage(t){const r=this.resources.get(t);r&&(r.rawBuffer.destroy(),r.outputBuffer.destroy(),r.readBuffer.destroy(),this.resources.delete(t))}disposeAll(){this.resources.forEach(t=>{t.rawBuffer.destroy(),t.outputBuffer.destroy(),t.readBuffer.destroy()}),this.resources.clear()}}const i0=new zne,pa=1024,x3=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,c=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),p=f*t*4,m=d*n*4;for(let x=0;x<t;x++){const S=Math.floor(x*c)*4,v=p+x*4,y=m+S;s[v]=o[y],s[v+1]=o[y+1],s[v+2]=o[y+2],s[v+3]=o[y+3]}}return i},Une=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=c=>{const u=[];for(let f=0;f<4;f++)r[f]===c&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const c=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(c)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(p=>d[p]=c),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d.some(p=>p>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let c=[];if(Array.isArray(s)?c=s.map(Number):typeof s=="string"?c=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(c=[s,s,s,s]),c.length===1&&!isNaN(c[0])&&(c=[c[0],c[0],c[0],c[0]]),c.length>=4&&!c.slice(0,4).some(isNaN)&&c.some(u=>u>0))return[c[0],c[1],c[2],c[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},Wne=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:c,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],p=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,m=C.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:w,y:P,width:j,height:k}=e,O=O1(u,{x:w,y:P,w:j,h:k},o),A=[0,0,0,0],R=[0,0,0,0],E=Math.floor(P),T=Math.floor(w);for(let B=0;B<O.height;B++){const G=B*O.width;for(let V=0;V<O.width;V++){const z=O.data[G+V],D=E+B,L=T+V,F=D%2,H=L%2,W=F*2+H;A[W]+=z,R[W]++}}return A.map((B,G)=>R[G]>0?B/R[G]:0)}catch(w){return console.error("Unmix calc error",w),null}},[e,u,o]),x=(w,P,j)=>f?P<=1e-4?0:(w-j)/P:null,b=(w,P)=>p?w-d[P]:w,S=()=>{if(!p){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let w,P,j,k;n?(k=0,P=1,j=2,w=3):(w=0,P=1,j=2,k=3);const O=R=>e.means[R]-d[R],A=R=>e.stdDevs[R];localStorage.setItem("import_signal_r",O(w).toString()),localStorage.setItem("import_signal_g1",O(P).toString()),localStorage.setItem("import_signal_g2",O(j).toString()),localStorage.setItem("import_signal_b",O(k).toString()),localStorage.setItem("import_sigma_r",A(w).toString()),localStorage.setItem("import_sigma_g1",A(P).toString()),localStorage.setItem("import_sigma_g2",A(j).toString()),localStorage.setItem("import_sigma_b",A(k).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},v=n?[{name:"B",desc:"(0,0)",mean:b(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:x(e.means[0],e.stdDevs[0],d[0]),unmixed:m?m[0]:null},{name:"G1",desc:"(0,1)",mean:b(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:x(e.means[1],e.stdDevs[1],d[1]),unmixed:m?m[1]:null},{name:"G2",desc:"(1,0)",mean:b(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:x(e.means[2],e.stdDevs[2],d[2]),unmixed:m?m[2]:null},{name:"R",desc:"(1,1)",mean:b(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:x(e.means[3],e.stdDevs[3],d[3]),unmixed:m?m[3]:null}]:[{name:"R",desc:"(0,0)",mean:b(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:x(e.means[0],e.stdDevs[0],d[0]),unmixed:m?m[0]:null},{name:"G1",desc:"(0,1)",mean:b(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:x(e.means[1],e.stdDevs[1],d[1]),unmixed:m?m[1]:null},{name:"G2",desc:"(1,0)",mean:b(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:x(e.means[2],e.stdDevs[2],d[2]),unmixed:m?m[2]:null},{name:"B",desc:"(1,1)",mean:b(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:x(e.means[3],e.stdDevs[3],d[3]),unmixed:m?m[3]:null}],y=m?"w-96":f?"w-80":"w-60";return l.jsxs(Ss,{className:`${y} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:c,initialPosition:{x:20,y:80},children:[l.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[l.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",l.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),l.jsx("br",{}),"Y: ",Math.round(e.y)]}),l.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),l.jsxs("table",{className:"w-full mb-3",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[l.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),l.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",p?"*":""]}),l.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&l.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),m&&l.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),l.jsx("tbody",{className:"font-mono text-xs",children:v.map((w,P)=>l.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[l.jsxs("td",{className:"py-1",children:[l.jsx("span",{className:`font-bold ${w.color}`,children:w.name}),l.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:w.desc})]}),l.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",children:w.mean.toFixed(2)}),l.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:w.std.toFixed(2)}),f&&l.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:w.snr!==null?w.snr.toFixed(2):"-"}),m&&l.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:w.unmixed!==null?w.unmixed.toFixed(1):"-"})]},P))})]}),p&&l.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Hist"}),l.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Quant"}),l.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"FFT"}),l.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"PCC"}),l.jsx("button",{onClick:S,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"ColorN"})]})]})]})},Vne=()=>{var kd;const[e,t]=C.useState("init"),[r,n]=C.useState("Checking storage..."),[a,i]=C.useState(null),o=C.useRef(!1),[s,c]=C.useState("dark"),[u,f]=C.useState(!1);C.useEffect(()=>((async()=>{const ue=await i0.init();f(ue),console.log("WebGPU Available:",ue)})(),()=>{i0.disposeAll()}),[]),C.useEffect(()=>{const Q=window.document.documentElement;Q.classList.remove(s==="dark"?"light":"dark"),Q.classList.add(s)},[s]);const[d,p]=C.useState(!1),[m,x]=C.useState(!1),[b,S]=C.useState(!1),[v,y]=C.useState(!1),[w,P]=C.useState(!1),[j,k]=C.useState(!1),O=Pne(d||m||b),[A,R]=C.useState(!1),[E,T]=C.useState([]),[B,G]=C.useState(-1),[V,z]=C.useState([]),D=C.useMemo(()=>E[B],[E,B]),L=C.useRef(null);C.useEffect(()=>{L.current=D||null},[D]);const F=(D==null?void 0:D.file)||null,H=(D==null?void 0:D.imageElement)||null,W=(D==null?void 0:D.rawImageData)||null,J=(D==null?void 0:D.rawFileBuffer)||null,Y=(D==null?void 0:D.renderedRawImageData)||null,ne=(D==null?void 0:D.referenceImageData)||null,te=(D==null?void 0:D.sampledImageData)||null,fe=(D==null?void 0:D.exifData)||null,se=(D==null?void 0:D.isThreePlane)||!1,ye=(D==null?void 0:D.xtransPhase)||{x:0,y:0},ie=(D==null?void 0:D.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[X,le]=C.useState(!1),[he,oe]=C.useState(null),[je,Se]=C.useState(!1),[me,ge]=C.useState(!1),[Ce,De]=C.useState(null),[ze,Be]=C.useState([]),[et,yt]=C.useState(100),[dt,cr]=C.useState(!0),[St,ur]=C.useState(!1),[jt,fr]=C.useState(null),[$r,Tt]=C.useState(!1),[_r,Qe]=C.useState(!1),[_t,Qt]=C.useState(!1),[Bt,yr]=C.useState(!1),[rr,Jr]=C.useState(!1),[Ft,hn]=C.useState("1.0"),[Pt,en]=C.useState(!1),[Ue,nn]=C.useState(!1),[Or,pn]=C.useState(!1),[an,or]=C.useState([]),[Lr,gn]=C.useState(!1),[on,sn]=C.useState(0),[hr,nr]=C.useState([]),[ar,M]=C.useState(!1),[Fe,pt]=C.useState({x:0,y:0}),[Wt,Lt]=C.useState(!1),[wt,vr]=C.useState(!1),[Xt,Je]=C.useState([]),[bt,kt]=C.useState(0),[Kt,pr]=C.useState(null),[_e,Hr]=C.useState(!1),[I,be]=C.useState([]),[Ne,Ct]=C.useState(.5),[Ve,lt]=C.useState(!1),[ft,qt]=C.useState(2),[Xr,Br]=C.useState(1),[Yt,En]=C.useState([]),[mn,Kn]=C.useState(null),[Et,Gt]=C.useState(0),[Rr,Le]=C.useState([]),[er,Kr]=C.useState([]),[la,ca]=C.useState(64),[Mr,Qa]=C.useState(10),[re,ve]=C.useState(10),[we,Z]=C.useState(4),[Oe,it]=C.useState(1),[nt,$t]=C.useState(0),[vt,ht]=C.useState("processed"),[xr,Rt]=C.useState(!1),sr=C.useMemo(()=>ie.blackLevel?ie.blackLevel:W!=null&&W.blackLevels?[W.blackLevels[0],W.blackLevels[1],W.blackLevels[2],W.blackLevels[3]]:[0,0,0,0],[ie.blackLevel,W]),Fr=(fe==null?void 0:fe.ImageHeight)||(fe==null?void 0:fe.ExifImageHeight)||(W==null?void 0:W.height)||0,[Pe,$e]=C.useState(null),[at,q]=C.useState(null),[ke,ct]=C.useState({x:0,y:0}),[tt,Dt]=C.useState(1),[Zt,ln]=C.useState("pan"),yn=C.useRef(null),Pn=C.useRef(null);C.useEffect(()=>{if(u&&D&&D.rawImageData&&D.id){const{data:Q,width:ue,height:ce}=D.rawImageData;i0.uploadImage(D.id,Q,ue,ce)}},[u,D==null?void 0:D.id]),C.useEffect(()=>{const Q=Tne();Q&&Q.sessions.length>0?(i(Q),t("prompt")):t("idle")},[]),C.useCallback(async()=>{o.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await Mne()}catch(Q){console.error("Failed to clear DB",Q)}t("idle"),i(null),o.current=!1},[]),C.useCallback(async()=>{if(!a)return;t("restoring"),n("Restoring layout...");const Q=a;if(c(Q.theme),cr(Q.sidebarOpen),Q.sessions.length>0){n(`Restoring ${Q.sessions.length} images...`);const ue=[];for(const ce of Q.sessions){if(o.current)return;await new Promise(pe=>setTimeout(pe,50));try{const pe=await One(ce.id);if(pe){const Re={id:ce.id,fileName:ce.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:pe,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:ce.isThreePlane,displaySettings:ce.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:Me,analysisData:Xe}=await Cs(pe);let Ke=null;if(Xe)try{ce.displaySettings.renderMode==="zero-dependency"?Ke=await hm(pe,ce.displaySettings):ce.displaySettings.renderMode==="advanced-zero-dep"?Ke=await YA(pe,ce.displaySettings):ce.displaySettings.renderMode==="zero-dep-color"?Ke=await qA(pe,ce.displaySettings):Ke=await xw(pe,ce.displaySettings)}catch(ut){console.error("Render failed",ut),Ke=await hm(pe,ce.displaySettings)}const ot=URL.createObjectURL(Me),We=new Image;We.src=ot,await new Promise(ut=>{We.onload=()=>ut()}),ue.push({...Re,rawImageData:Xe,renderedRawImageData:Ke,previewUrl:ot,imageElement:We,exifData:Xe.metadata})}}catch(pe){console.error(`Failed to restore session ${ce.id}`,pe)}}if(o.current)return;if(T(ue),Q.activeSessionId){const ce=ue.findIndex(pe=>pe.id===Q.activeSessionId);ce>=0?G(ce):ue.length>0&&G(0)}Be(Q.windows)}o.current||t("idle")},[a]);const ua=C.useCallback(async()=>{},[J,D,ie,Bt,rr]),Ga=C.useCallback(()=>{!J||!D||Qt(!0)},[J,D]),Oa=C.useCallback(async()=>{},[W,D,Ft,sr]);C.useEffect(()=>{const Q=ue=>{(ue.ctrlKey||ue.metaKey)&&ue.key.toLowerCase()==="s"&&(ue.preventDefault(),Ga())};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[Ga]);const gr=C.useRef(null),xi=C.useCallback(()=>{e==="idle"&&(gr.current&&clearTimeout(gr.current),gr.current=window.setTimeout(async()=>{var ce;const Q={version:1,timestamp:Date.now(),activeSessionId:((ce=E[B])==null?void 0:ce.id)||null,theme:s,sidebarOpen:dt,sessions:E.map(pe=>({id:pe.id,fileName:pe.fileName,fileType:pe.file?pe.file.type:"application/octet-stream",fileSize:pe.rawFileBuffer?pe.rawFileBuffer.byteLength:0,displaySettings:pe.displaySettings,isThreePlane:pe.isThreePlane})),windows:ze.map(pe=>({id:pe.id,type:pe.type,roi:pe.roi,zIndex:pe.zIndex,initialPosition:pe.initialPosition,sessionId:pe.sessionId,isBGGR:pe.isBGGR,isMinimized:pe.isMinimized||!1,internalState:pe.internalState}))};Ane(Q);const ue=E.map(pe=>pe.id);Ene(ue)},1e3))},[E,ze,B,s,dt,e]);C.useEffect(()=>{xi()},[xi]);const Ma=C.useCallback(Q=>{T(ue=>ue.map((ce,pe)=>pe===B?{...ce,...Q}:ce))},[B]),Sl=()=>G(Q=>Math.min(Q+1,E.length-1)),Ja=()=>G(Q=>Math.max(0,Q-1));C.useEffect(()=>{if(W&&he){const Q=Ns(W.data,W.width,W.height,he.x,he.y,he.width,he.height);oe(Q)}},[W]);const Ii=Q=>{if(!he||!D)return;const ue=Date.now().toString()+Math.random().toString().slice(2,5),ce=Math.max(et,...ze.map(Me=>Me.zIndex),100),pe=ze.length%10*30,Re=Q==="fft"?{x:50,y:50}:Q==="histogram"?{x:100,y:100}:{x:150,y:150};Be(Me=>[...Me,{id:ue,type:Q,roi:{x:he.x,y:he.y,w:he.width,h:he.height},zIndex:ce+1,initialPosition:{x:Re.x+pe,y:Re.y+pe},sessionId:D.id,isBGGR:je,isMinimized:!1,stackFiles:(Q==="fft"||Q==="pearson"||Q==="histogram")&&V.length>0?V:void 0}])},Gr=Q=>{Be(ue=>ue.filter(ce=>ce.id!==Q))},js=Q=>{Be(ue=>ue.map(ce=>ce.id===Q?{...ce,isMinimized:!0}:ce))},iu=Q=>{Be(ue=>ue.map(ce=>ce.id===Q?{...ce,isMinimized:!1}:ce)),Eo(Q)},Eo=Q=>{Be(ue=>{const ce=Math.max(et,...ue.map(pe=>pe.zIndex));return ue.map(pe=>pe.id===Q?{...pe,zIndex:ce+1}:pe)})},He=(Q,ue)=>{Be(ce=>ce.map(pe=>pe.id===Q?{...pe,internalState:{...pe.internalState,...ue}}:pe))},It=()=>{const Q=Math.max(et,...ze.map(ue=>ue.zIndex));yt(Q+1)},Vt=(Q,ue)=>{Be(ce=>ce.map(pe=>pe.id===Q?{...pe,roi:ue}:pe))};C.useEffect(()=>{if(!fe)return;const Q=fe.CFAPattern2||fe.CFAPattern;if(Q){let ue="";Array.isArray(Q)?ue=Q.join(""):typeof Q=="string"?ue=Q.replace(/[\s,]+/g,""):typeof Q=="number"&&(ue=String(Q)),ue==="0112"?Se(!1):ue==="2110"&&Se(!0)}},[fe]),C.useEffect(()=>{let Q;const ue=()=>{if(Ve&&ar){const ce=Date.now()/1e3,pe=.55+.45*Math.sin(ce*ft);Br(pe),Q=requestAnimationFrame(ue)}else Br(1)};return Ve&&ar?ue():Br(1),()=>{Q&&cancelAnimationFrame(Q)}},[Ve,ar,ft]),C.useEffect(()=>{const Q=ue=>{ue.key==="Escape"&&ar&&(M(!1),pt({x:0,y:0}),lt(!1))};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[ar]),C.useEffect(()=>()=>{E.forEach(Q=>{Q.previewUrl&&URL.revokeObjectURL(Q.previewUrl)}),Pn.current&&Pn.current.terminate()},[]);const Mt=async(Q,ue=!0)=>{ue&&(ct({x:0,y:0}),Dt(1),Gt(0),Le([]),Kr([]),ur(!1),fr(null),le(!1),vr(!1),Je([]),be([]),kt(0),or([]));let ce=null;if(O.isConnected){const Ke=new FormData;Ke.append("file",Q);try{const We=await(await fetch("http://localhost:5428/read",{method:"POST",body:Ke})).json();if(We.success){let ut=We.data;Array.isArray(ut)&&ut.length===1&&(ut=ut[0]),ce=ut}}catch(ot){console.warn("Auto Exif fetch failed",ot)}}const pe=Q.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(Q.type)||pe)){$e("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let Me={file:Q,exifData:ce};if(pe||Q.type==="image/x-adobe-dng")try{ue?q("Processing RAW file (this may take a moment)..."):Rt(!0);const Ke=await Q.arrayBuffer();Me.rawFileBuffer=Ke;const{previewBlob:ot,analysisData:We}=await Cs(Ke);Me.rawImageData=We,!ce&&We.metadata&&(Me.exifData=We.metadata),Me.isThreePlane=We.isThreePlane||!1,We.isThreePlane&&ue&&le(!0);let ut=!1,zt=null,lr=!1;if(We.isXTrans){lr=!0,zt=Ke;const vn=(await Wd(Ke,0,0)).dngBuffer,Ur=await Cs(vn);Me.rawFileBuffer=vn,Me.rawImageData=Ur.analysisData,Me.previewUrl=URL.createObjectURL(Ur.previewBlob),ut=!0}else Me.previewUrl=URL.createObjectURL(ot);Me.originalRawFileBuffer=zt,Me.isXTransOriginal=lr,Me.isXTransConverted=ut,Me.xtransPhase={x:0,y:0};const Ar=new Image;if(Ar.src=Me.previewUrl||"",await new Promise((cn,vn)=>{Ar.onload=()=>{Me.imageElement=Ar,cn()},Ar.onerror=()=>{cn()}}),ue){const cn=Me.rawImageData||We,vn=Une(cn,ce||cn.metadata);let Ur;vn&&vn.some(Pr=>Pr>0)&&(Ur=vn);const mt={exposure:0,demosaicMethod:-1,blackLevel:Ur,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ir=Me.rawFileBuffer;if(ir&&(pe||Q.type==="image/x-adobe-dng"))try{const Pr=await hm(ir,mt);Me.renderedRawImageData=Pr,Me.displaySettings=mt}catch(Pr){console.error("Initial Zero-Dep Render Failed",Pr)}}}catch(Ke){$e(`Failed to process RAW file: ${Ke.message}`),q(null),Rt(!1);return}else try{q("Processing image...");const{previewBlob:Ke,analysisData:ot}=await GA(Q);Me.rawImageData=ot,!ce&&ot.metadata&&(Me.exifData=ot.metadata),Me.rawFileBuffer=await Q.arrayBuffer(),Me.isThreePlane=ot.isThreePlane||!1,Me.isXTransOriginal=!1,Me.isXTransConverted=!1,Me.originalRawFileBuffer=null;const We=URL.createObjectURL(Ke);Me.previewUrl=We;const ut=new Image;ut.src=We,await new Promise(zt=>{ut.onload=()=>{Me.imageElement=ut,zt()},ut.onerror=()=>{$e("Could not load the image file."),zt()}})}catch(Ke){$e(`Failed to process image: ${Ke.message}`),q(null);return}const Xe=Date.now().toString()+Math.random();if(Me.rawFileBuffer&&await m3(Xe,Me.rawFileBuffer),ue){const Ke={exposure:0,demosaicMethod:-1,blackLevel:void 0,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ot={id:Xe,fileName:Q.name,file:Q,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:Ke,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...Me};T(We=>{const ut=[...We,ot];return G(ut.length-1),ut})}else Ma(Me);q(null),Rt(!1)},ta=async Q=>{q("Converting to DNG...");try{const ue=new FormData;ue.append("file",Q);const ce=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:ue}),pe=ce.headers.get("content-type")||"";if(ce.ok)if(pe.includes("application/json")){const Re=await ce.json();throw new Error(Re.error||"Conversion failed")}else{const Re=await ce.blob(),Me=URL.createObjectURL(Re),Xe=document.createElement("a");Xe.href=Me;const Ke=Q.name,ot=Ke.substring(0,Ke.lastIndexOf("."))+".dng"||"converted.dng";Xe.download=ot,document.body.appendChild(Xe),Xe.click(),document.body.removeChild(Xe),URL.revokeObjectURL(Me);const We=new File([Re],ot,{type:"image/x-adobe-dng"});await Mt(We,!0)}else{const Re=await ce.text();throw new Error(`HTTP ${ce.status}: ${Re}`)}}catch(ue){q(null),$e(`Conversion Error: ${ue.message}`)}},Cn=(Q,ue)=>{Q&&(ue==="direct"?Mt(Q,!0):ta(Q))},Aa=async Q=>{var ce;const ue=(ce=Q.target.files)==null?void 0:ce[0];ue&&(await Mt(ue,!0),Q.target.value="")},ei=async(Q,ue,ce,pe)=>{!Q||!ue||(q("Processing Pair Difference (May take a while)..."),$e(null),setTimeout(async()=>{try{const Re=await Q.arrayBuffer(),Me=await ue.arrayBuffer(),Xe=await dm(Re,Me,ce,pe),Ke=v0(Xe.width,Xe.height,Xe.rawData),ot=new File([Ke],`Diff_${Q.name}_${ue.name}.dng`,{type:"image/x-adobe-dng"});await Mt(ot,!0),Ii("fft")}catch(Re){console.error("Pair Processing Error",Re),$e("Pair Processing Failed: "+Re.message)}finally{q(null)}},100))},Li=async Q=>{if(Q.length<2){$e("Need at least 2 files for Batch Diff.");return}q(`Batch Processing 0/${Math.floor(Q.length/2)} pairs...`);const ue=Array.from(Q).sort((ce,pe)=>ce.name.localeCompare(pe.name,void 0,{numeric:!0}));try{for(let ce=0;ce<ue.length-1;ce+=2){const pe=ue[ce],Re=ue[ce+1];q(`Batch Processing Pair ${Math.floor(ce/2)+1}/${Math.floor(ue.length/2)}: ${pe.name} & ${Re.name}`);const Me=await pe.arrayBuffer(),Xe=await Re.arrayBuffer(),Ke=await dm(Me,Xe,!1,!1),ot=v0(Ke.width,Ke.height,Ke.rawData),We=new Blob([ot],{type:"image/x-adobe-dng"}),ut=URL.createObjectURL(We),zt=document.createElement("a");zt.href=ut,zt.download=`Diff_${pe.name}_${Re.name}.dng`,document.body.appendChild(zt),zt.click(),document.body.removeChild(zt),URL.revokeObjectURL(ut)}}catch(ce){console.error("FFT Batch Error",ce),$e("Batch Processing Failed: "+ce.message)}finally{q(null)}},ti=async Q=>{if(Q.length<1)return;const ue=Array.from(Q).sort((ce,pe)=>ce.name.localeCompare(pe.name,void 0,{numeric:!0}));z(ue),await Mt(ue[0],!0)},zr=async()=>{Rt(!0);const Q=128,ue=Q,ce=Q,pe=ue*ce,Re=new Uint16Array(pe),Me=mt=>{const ir=mt/we+nt;return Math.sin(2*Math.PI*ir)>=0?1:0},Xe=32,Ke=Oe*.5,ot=Math.max(1e-4,Oe/Xe);for(let mt=0;mt<ce;mt++){let ir=0;const Sr=mt+.5-Ke;for(let Tr=0;Tr<Xe;Tr++){const qn=Sr+(Tr+.5)*ot;ir+=Me(qn)}const xn=ir/Xe,Ht=Math.round(xn*65535);for(let Tr=0;Tr<ue;Tr++)Re[mt*ue+Tr]=Ht}const We=new ImageData(pa,pa),ut=pa/ue,zt=Oe/2;for(let mt=0;mt<pa;mt++){const ir=mt/ut,Pr=Math.floor(ir),Sr=ir-Pr,xn=Sr>=.5-zt&&Sr<.5+zt;for(let Ht=0;Ht<pa;Ht++){const Tr=Ht/ut,qn=Math.floor(Tr),Nn=Tr-qn,Bi=Nn>=.5-zt&&Nn<.5+zt,On=(mt*pa+Ht)*4;if(qn>=ue||Pr>=ce){We.data[On]=30,We.data[On+1]=34,We.data[On+2]=40,We.data[On+3]=255;continue}if(xn&&Bi){const Fi=Re[Pr*ue+qn],io=Math.round(Fi/257);We.data[On]=io,We.data[On+1]=io,We.data[On+2]=io,We.data[On+3]=255}else We.data[On]=30,We.data[On+1]=34,We.data[On+2]=40,We.data[On+3]=255}}const lr=new ImageData(pa,pa),Ar=ce/pa;for(let mt=0;mt<pa;mt++){const ir=(mt+.5)*Ar,Sr=Me(ir)>.5?255:0,xn=mt*pa*4;for(let Ht=0;Ht<pa;Ht++){const Tr=xn+Ht*4;lr.data[Tr]=Sr,lr.data[Tr+1]=Sr,lr.data[Tr+2]=Sr,lr.data[Tr+3]=255}}const cn=v0(ue,ce,Re),vn=new File([cn],"pattern_test.dng",{type:"image/x-adobe-dng"}),Ur=Date.now().toString();try{const{previewBlob:mt,analysisData:ir}=await Cs(cn.slice(0)),Pr=await xw(cn.slice(0),ie),Sr=x3(Pr,pa,pa),xn=URL.createObjectURL(mt),Ht=new Image;Ht.src=xn,await new Promise(qn=>{Ht.onload=()=>qn()}),await m3(Ur,cn);const Tr={id:Ur,fileName:"pattern_test.dng",file:vn,imageElement:Ht,rawImageData:ir,rawFileBuffer:cn,renderedRawImageData:Sr,referenceImageData:lr,sampledImageData:We,exifData:null,isThreePlane:!1,previewUrl:xn,displaySettings:ie,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(F==null?void 0:F.name)==="pattern_test.dng"?Ma(Tr):T(qn=>{const Nn=[...qn,Tr];return G(Nn.length-1),Nn})}catch(mt){console.error("Error generating pattern:",mt),$e(`Error generating pattern: ${mt.message}`)}Rt(!1),q(null)},dd=()=>{Tt(!0)},_s=()=>{Tt(!1),ht("sampled"),q("Generating..."),setTimeout(()=>zr(),50)},ao=C.useRef({period:we,fill:Oe,phase:nt});C.useEffect(()=>{(F==null?void 0:F.name)==="pattern_test.dng"&&(ao.current.period!==we||ao.current.fill!==Oe||ao.current.phase!==nt)&&(ao.current={period:we,fill:Oe,phase:nt},zr())},[we,Oe,nt,F]);const hd=C.useCallback(async Q=>{var pe;if(Ma({displaySettings:Q}),!L.current)return;const ue=L.current.id;if(u&&(Q.renderMode==="zero-dependency"||Q.renderMode==="zero-dep-color"||Q.renderMode==="advanced-zero-dep"))try{Rt(!0);const Re=((pe=L.current.rawImageData)==null?void 0:pe.whiteLevel)||16383,Me=await i0.render(ue,Q,Re);if(Me){Ma({renderedRawImageData:Me}),Rt(!1);return}else console.warn("WebGPU Render returned null, falling back to CPU")}catch(Re){console.error("WebGPU Render failed:",Re)}if(!J)return;Rt(!0),Pn.current&&Pn.current.terminate();const ce=new Worker(new URL("/assets/renderWorker-DjzFrYUC.js",import.meta.url),{type:"module"});Pn.current=ce,ce.onmessage=Re=>{const{success:Me,imageData:Xe,error:Ke}=Re.data;if(Me){let ot=Xe;(F==null?void 0:F.name)==="pattern_test.dng"&&(ot=x3(Xe,pa,pa)),Ma({renderedRawImageData:ot})}else $e(Ke||"Unknown worker error");Rt(!1),ce.terminate(),Pn.current=null},ce.postMessage({buffer:J.slice(0),settings:Q})},[J,F,Ma,u]),cg=async(Q,ue)=>{q("Re-sampling X-Trans with new Phase...");try{const pe=(await Wd(ue,Q.x,Q.y)).dngBuffer,Re=await Cs(pe),Me=URL.createObjectURL(Re.previewBlob),Xe=new Image;Xe.src=Me,await new Promise(Ke=>{Xe.onload=()=>Ke()}),D!=null&&D.previewUrl&&URL.revokeObjectURL(D.previewUrl),Ma({rawFileBuffer:pe,rawImageData:Re.analysisData,previewUrl:Me,imageElement:Xe,xtransPhase:Q}),oe(null)}catch(ce){console.error("X-Trans Phase Update Failed",ce),$e("Phase Update Failed: "+ce.message)}finally{q(null)}},ug=Q=>{if(!D||!D.originalRawFileBuffer||!D.isXTransConverted)return;const ue={...D.xtransPhase,...Q};cg(ue,D.originalRawFileBuffer)},ou=C.useCallback(async Q=>{if(D)if(Q){if(D.isXTransConverted)return;const ue=D.originalRawFileBuffer||D.rawFileBuffer;if(!ue)return;q("Converting X-Trans to Pseudo-Bayer DNG...");try{const ce=D.xtransPhase||{x:0,y:0},Re=(await Wd(ue,ce.x,ce.y)).dngBuffer,Me=await Cs(Re),Xe=URL.createObjectURL(Me.previewBlob),Ke=new Image;Ke.src=Xe,await new Promise(ot=>{Ke.onload=()=>ot()}),D.previewUrl&&URL.revokeObjectURL(D.previewUrl),Ma({rawFileBuffer:Re,rawImageData:Me.analysisData,previewUrl:Xe,imageElement:Ke,isXTransConverted:!0,originalRawFileBuffer:ue}),oe(null)}catch(ce){console.error("X-Trans Conversion Failed",ce),$e("Failed to convert X-Trans: "+ce.message)}finally{q(null)}}else{if(!D.isXTransConverted)return;const ue=D.originalRawFileBuffer;if(!ue){$e("Original X-Trans buffer lost. Cannot revert.");return}q("Reverting to Native X-Trans...");try{const ce=await Cs(ue),pe=URL.createObjectURL(ce.previewBlob),Re=new Image;Re.src=pe,await new Promise(Me=>{Re.onload=()=>Me()}),D.previewUrl&&URL.revokeObjectURL(D.previewUrl),Ma({rawFileBuffer:ue,rawImageData:ce.analysisData,previewUrl:pe,imageElement:Re,isXTransConverted:!1}),oe(null)}catch(ce){console.error("X-Trans Revert Failed",ce),$e("Failed to revert X-Trans: "+ce.message)}finally{q(null)}}},[D,Ma]),pd=Q=>{if(yn.current){const ue=yn.current,{width:ce,height:pe}=ue.getBoundingClientRect(),Re=ce/2,Me=pe/2,Xe=Q/tt,Ke=Re-(Re-ke.x)*Xe,ot=Me-(Me-ke.y)*Xe;ct({x:Ke,y:ot})}Dt(Q)},gd=Q=>{if(!Q)return;if(!W){oe(null);return}if(Lr){Q.w>0&&Q.h>0&&or(ce=>[...ce,Q]);return}me&&ge(!1);const ue=Ns(W.data,W.width,W.height,Q.x,Q.y,Q.w,Q.h);oe(ue)},fg=Q=>{De(Q),gd(Q)},dg=()=>{ln(Q=>Q==="pan"?"select":"pan")},hg=(Q,ue,ce)=>{or(pe=>{if(pe.length===0)return pe;if(Q==="move")return pe.map(Re=>({...Re,x:Re.x+ue,y:Re.y+ce}));if(Q==="scale"){const Re=pe.reduce((Xe,Ke)=>Xe+Ke.x+Ke.w/2,0)/pe.length,Me=pe.reduce((Xe,Ke)=>Xe+Ke.y+Ke.h/2,0)/pe.length;return pe.map(Xe=>{const Ke=Xe.x+Xe.w/2,ot=Xe.y+Xe.h/2,We=Re+(Ke-Re)*ue,ut=Me+(ot-Me)*ce,zt=Xe.w*ue,lr=Xe.h*ce;return{...Xe,x:We-zt/2,y:ut-lr/2,w:zt,h:lr}})}return pe})},su=()=>{if(an.length===0){$e("No ROIs to save.");return}let Q=`Index,X,Y,W,H,Orientation
`;an.forEach((Re,Me)=>{Q+=`${Me+1},${Re.x.toFixed(2)},${Re.y.toFixed(2)},${Re.w.toFixed(2)},${Re.h.toFixed(2)},${Re.ori||0}
`});const ue=new Blob([Q],{type:"text/csv;charset=utf-8;"}),ce=URL.createObjectURL(ue),pe=document.createElement("a");pe.setAttribute("href",ce),pe.setAttribute("download",`sfr_plate_template_${Date.now()}.csv`),document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(ce)},pg=Q=>{if(!Q||Q.length===0){$e("No valid ROIs found in file.");return}or(ue=>[...ue,...Q])},md=Q=>{if(an.length===0){$e("ROIs ");return}if(!W||ie.renderMode!=="advanced-zero-dep"){$e("Advanced Zero-Dep (Unmixed) mode required for scalar SFR calc.");return}q("Computing Batch SFR..."),setTimeout(()=>{try{const ue=[];for(const ce of an){const pe=O1(W,ce,ie),Re=_x(pe.data,pe.width,pe.height,{x:0,y:0,w:pe.width,h:pe.height},{greenOnly:Q.greenOnly,globalX:ce.x,globalY:ce.y,bayerPattern:W.bayerPattern});if(Re){const Me=Q.useNR?-1:12,Xe=MN([Re],Me,null,Q.useDeshading);Xe&&Xe.mtf50!==null&&ue.push({x:ce.x+ce.w/2,y:ce.y+ce.h/2,mtf50:Xe.mtf50,orientation:Re.orientation})}}if(ue.length>0){const ce=ue.map(pe=>`{${pe.x.toFixed(1)},${pe.y.toFixed(1)},${pe.mtf50.toFixed(4)},${pe.orientation}}`).join("");navigator.clipboard.writeText(ce).then(()=>alert(`Computed ${ue.length}/${an.length} ROIs. Copied results to clipboard.`)).catch(pe=>$e("Failed to copy results: "+pe))}else $e("Failed to compute valid SFR for any selected ROIs.")}catch(ue){$e("Batch Compute Failed: "+ue.message)}finally{q(null)}},100)},gg=Q=>{if(Et===0||Et>4)return;const ue=[...Rr,Q];Le(ue),Et===4?(mg(ue),Gt(0)):Gt(Et+1)},yd=(Q,ue,ce,pe)=>{const Re=Q[0],Me=Q[1],Xe=Q[2],Ke=Q[3],ot=ue/2,We=[];for(let ut=0;ut<ce;ut++){const zt=ce>1?ut/(ce-1):.5;for(let lr=0;lr<pe;lr++){const Ar=pe>1?lr/(pe-1):.5,cn=Re.x*(1-Ar)+Me.x*Ar,vn=Re.y*(1-Ar)+Me.y*Ar,Ur=Xe.x*(1-Ar)+Ke.x*Ar,mt=Xe.y*(1-Ar)+Ke.y*Ar,ir=cn*(1-zt)+Ur*zt,Pr=vn*(1-zt)+mt*zt,Sr=ir-ot,xn=Pr-ot;We.push({x:Sr,y:xn,w:ue,h:ue})}}return We},mg=Q=>{!W||!D||(q("Calculating DR Lab Grid..."),setTimeout(()=>{try{const ue=yd(Q,la,Mr,re);Kr(ue);const Me=[...[`#BlackLevel: ${(ie.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${W.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Xe=`img${D.fileName||"image"}`;ue.forEach((zt,lr)=>{const Ar=Math.floor(lr/re)+1,cn=lr%re+1,vn=Ns(W.data,W.width,W.height,zt.x,zt.y,zt.w,zt.h),Ur=vn.means,mt=vn.stdDevs,ir=`${Xe},${Ar},${cn},${Ur[0].toFixed(4)},${Ur[1].toFixed(4)},${Ur[2].toFixed(4)},${Ur[3].toFixed(4)},${mt[0].toFixed(4)},${mt[1].toFixed(4)},${mt[2].toFixed(4)},${mt[3].toFixed(4)}`;Me.push(ir)});const Ke=Me.join(`
`),ot=new Blob([Ke],{type:"text/csv;charset=utf-8;"}),We=URL.createObjectURL(ot),ut=document.createElement("a");ut.setAttribute("href",We),ut.setAttribute("download","dr_lab_results.csv"),document.body.appendChild(ut),ut.click(),document.body.removeChild(ut),URL.revokeObjectURL(We),Le([])}catch(ue){$e("DR Lab Error: "+ue.message)}finally{q(null)}},100))},yg=async(Q,ue)=>{if(Rr.length<4&&er.length<1){$e("Please mark the grid on an image first before running batch processing.");return}let ce=er;if(ce.length===0&&Rr.length===4&&(ce=yd(Rr,la,Mr,re)),ce.length===0){$e("No grid definitions found. Mark corners first.");return}q(ue==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const Re=(ie.blackLevel||[0,0,0,0]).join(","),Me=W?W.height:0,Ke=[...[`#BlackLevel: ${Re}`,`#ImageHeight: ${Me}`,ue==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2), Full Float Stats)":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],ot=Array.from(Q).sort((lr,Ar)=>lr.name.localeCompare(Ar.name,void 0,{numeric:!0}));if(ue==="pair"&&ot.length<2){$e("Need at least 2 files for Pair processing."),q(null);return}const We=L.current,ut=(We==null?void 0:We.isXTransConverted)||!1,zt=(We==null?void 0:We.xtransPhase)||{x:0,y:0};try{const lr=async mt=>{let ir=await mt.arrayBuffer();return ut&&(ir=(await Wd(ir,zt.x,zt.y)).dngBuffer),ir};if(ue==="single")for(let mt=0;mt<ot.length;mt++){const ir=ot[mt];q(`Processing ${mt+1}/${ot.length}: ${ir.name}...`);const Pr=await lr(ir),Sr=await hc(Pr),xn=`img${ir.name}`;ce.forEach((Ht,Tr)=>{const qn=Math.floor(Tr/Mr)+1,Nn=Tr%re+1,Bi=Ns(Sr.data,Sr.width,Sr.height,Ht.x,Ht.y,Ht.w,Ht.h),On=Bi.means,Fi=Bi.stdDevs,io=`${xn},${qn},${Nn},${On[0].toFixed(4)},${On[1].toFixed(4)},${On[2].toFixed(4)},${On[3].toFixed(4)},${Fi[0].toFixed(4)},${Fi[1].toFixed(4)},${Fi[2].toFixed(4)},${Fi[3].toFixed(4)}`;Ke.push(io)})}else for(let mt=0;mt<ot.length-1;mt+=2){const ir=ot[mt],Pr=ot[mt+1],Sr=`img${ir.name} & ${Pr.name}`;q(`Processing Pair ${Math.floor(mt/2)+1}/${Math.floor(ot.length/2)}: ${ir.name} & ${Pr.name}...`);const xn=await lr(ir),Ht=await hc(xn),Tr=await lr(Pr),qn=await dm(xn,Tr,!1,!1);ce.forEach((Nn,Bi)=>{const On=Math.floor(Bi/Mr)+1,Fi=Bi%re+1,io=Ns(Ht.data,Ht.width,Ht.height,Nn.x,Nn.y,Nn.w,Nn.h),Ng=Ns(qn.rawData,qn.width,qn.height,Nn.x,Nn.y,Nn.w,Nn.h),_l=io.means,Pl=Ng.stdDevs.map(Mg=>Mg/1.41421356),Og=`${Sr},${On},${Fi},${_l[0].toFixed(4)},${_l[1].toFixed(4)},${_l[2].toFixed(4)},${_l[3].toFixed(4)},${Pl[0].toFixed(4)},${Pl[1].toFixed(4)},${Pl[2].toFixed(4)},${Pl[3].toFixed(4)}`;Ke.push(Og)})}const Ar=Ke.join(`
`),cn=new Blob([Ar],{type:"text/csv;charset=utf-8;"}),vn=URL.createObjectURL(cn),Ur=document.createElement("a");Ur.href=vn,Ur.setAttribute("download",`dr_lab_batch_${ue}_${new Date().getTime()}.csv`),document.body.appendChild(Ur),Ur.click(),document.body.removeChild(Ur),URL.revokeObjectURL(vn)}catch(lr){console.error("Batch Error",lr),$e("Batch Processing Failed: "+lr.message)}finally{q(null)}},vg=()=>{Je([]),kt(1)},xg=Q=>{if(!wt||bt===0)return;const ue=[...Xt,Q];Je(ue),ue.length===4&&W?(vd(ue,Ne),kt(0)):kt(ce=>ce+1)},vd=(Q,ue)=>{W&&(q("Analyzing Color Chart..."),setTimeout(()=>{try{const ce=Kre(Q[0],Q[1],Q[2],Q[3],W.width,W.height,ue);be(ce);const Re=ce.map((Me,Xe)=>{const Ke=Ns(W.data,W.width,W.height,Me.x,Me.y,Me.w,Me.h);return{id:Xe,rawMeans:Ke.means,refRGB:[0,0,0]}}).map((Me,Xe)=>({...Me,refRGB:jx[Xe]||[0,0,0]}));pr(Re),Hr(!0)}catch(ce){$e("Color Lab Error: "+ce.message)}finally{q(null)}},100))},bg=Q=>{Ct(Q),Xt.length===4&&vd(Xt,Q)},wg=()=>{Hr(!1)},kg=()=>{fe||fr("No EXIF data found. The file might not contain metadata or it was stripped during processing."),ur(!0)},Sg=async Q=>{q("Parsing PTC Data...");const ue=[];let ce=null;try{for(let pe=0;pe<Q.length;pe++){const Me=(await Q[pe].text()).split(`
`);let Xe=!0;for(const Ke of Me){const ot=Ke.trim();if(!ot)continue;if(ot.startsWith("#")){if(ot.includes("BlackLevel:")){const Ht=ot.split(":")[1].trim().split(",");if(Ht.length>=4){const Tr=Ht.map(Number);ce||(ce={}),ce.blackLevel=Tr}}if(ot.includes("ImageHeight:")){const Ht=parseInt(ot.split(":")[1].trim());isNaN(Ht)||(ce||(ce={}),ce.height=Ht)}continue}if(Xe){ot.toLowerCase().includes("mean")&&ot.toLowerCase().includes("std")&&(Xe=!1);continue}const We=ot.split(",");if(We.length<5)continue;let ut=0,zt;isNaN(parseFloat(We[0]))&&(zt=We[0],ut=1);const lr=parseInt(We[ut]),Ar=parseInt(We[ut+1]),cn=parseFloat(We[ut+2]),vn=parseFloat(We[ut+3]),Ur=parseFloat(We[ut+4]),mt=parseFloat(We[ut+5]),ir=parseFloat(We[ut+6]),Pr=parseFloat(We[ut+7]),Sr=parseFloat(We[ut+8]),xn=parseFloat(We[ut+9]);!isNaN(cn)&&!isNaN(ir)&&ue.push({channel:"R",mean:cn,std:ir,filename:zt,row:lr,col:Ar}),!isNaN(vn)&&!isNaN(Pr)&&ue.push({channel:"G1",mean:vn,std:Pr,filename:zt,row:lr,col:Ar}),!isNaN(Ur)&&!isNaN(Sr)&&ue.push({channel:"G2",mean:Ur,std:Sr,filename:zt,row:lr,col:Ar}),!isNaN(mt)&&!isNaN(xn)&&ue.push({channel:"B",mean:mt,std:xn,filename:zt,row:lr,col:Ar})}}En(ue),Kn(ce),p(!0)}catch(pe){console.error("PTC Parse Error",pe),$e("Failed to parse CSV files: "+pe.message)}finally{q(null)}},jg=()=>{if(!J||!D)return;const Q=new Blob([J],{type:"image/x-adobe-dng"}),ue=URL.createObjectURL(Q),ce=document.createElement("a");ce.href=ue;const pe=D.fileName||"image.dng",Re=pe.toLowerCase().endsWith(".dng")?pe:pe.replace(/\.[^/.]+$/,"")+".dng";ce.download=Re,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(ue)},_g=()=>{Gt(1),Le([]),Kr([])},xd=()=>{window.open("https://github.com/y-g-jiang/y-g-jiang.github.io/blob/main/drtest.png","_blank")},bd=C.useMemo(()=>Kt?Kt.map((Q,ue)=>({...Q,refRGB:jx[ue]||[0,0,0]})):[],[Kt]),Pg=()=>{sn(1),nr([]),or([])},Cg=Q=>{if(on===0)return;const ue=[...hr,Q];if(nr(ue),ue.length===4){sn(0);try{const ce=Bne(ue);or(ce),md({useNR:!0,useDeshading:!0,greenOnly:!1})}catch(ce){console.error("Standard Chart Gen Error",ce),$e("Failed to generate chart ROIs.")}}else sn(ce=>ce+1)};let jl=Y||H;vt==="reference"&&ne?jl=ne:vt==="sampled"&&te&&(jl=te);const wd=at||xr;return l.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[l.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:l.jsx(fA,{onLoadImage:Aa,onFileSelected:Cn,onGenerateFakeDng:dd,fileName:F?F.name:null,hasGeneratedData:(F==null?void 0:F.name)==="pattern_test.dng",viewMode:vt,onSetViewMode:ht,patternPeriod:we,onPatternPeriodChange:Z,fillFactor:Oe,onFillFactorChange:it,patternPhase:nt,onPatternPhaseChange:$t,showPatternControls:(F==null?void 0:F.name)==="pattern_test.dng",onOpenAbout:()=>Qe(!0),onShowExif:kg,bridgeStatus:O,onBridgeClick:()=>R(!0),isDrLabOpen:Pt,onToggleDrLab:()=>{en(!Pt),Gt(0),Le([]),Kr([]),Ue&&nn(!1),wt&&vr(!1),Or&&pn(!1),kt(0),be([]),or([]),gn(!1),sn(0)},isColorLabOpen:wt,onToggleColorLab:()=>{vr(!wt),Je([]),kt(0),be([]),Pt&&en(!1),Ue&&nn(!1),Or&&pn(!1),or([]),gn(!1),sn(0)},isFftLabOpen:Ue,onToggleFftLab:()=>{nn(!Ue),Pt&&en(!1),wt&&vr(!1),Or&&pn(!1),kt(0),be([]),or([]),gn(!1),sn(0)},isSfrLabOpen:Or,onToggleSfrLab:()=>{pn(!Or),Pt&&en(!1),wt&&vr(!1),Ue&&nn(!1),kt(0),be([]),or([]),gn(!1),sn(0)},onGenerateTestPic:xd,onPTCFilesSelected:Sg,onDownloadDng:jg,isThreePlane:se,onOpenDatabase:()=>x(!0),isSidebarOpen:dt,onToggleSidebar:()=>cr(!dt),stretchMultiplier:Ft,onStretchMultiplierChange:hn,onStretchDngExport:Oa,isRawLoaded:!!W,onOpenSaveZ8:()=>k(!0)})}),l.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[l.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:yn,children:[wd&&l.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),l.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:at||"Processing..."})]}),u&&l.jsx("div",{className:"absolute top-2 left-2 z-30 pointer-events-none opacity-50 hover:opacity-100 transition-opacity",children:l.jsx("span",{className:"text-[9px] font-bold text-cyan-500 bg-black/50 px-1 py-0.5 rounded border border-cyan-500/50",children:" WebGPU"})}),E.length>1&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-4 bg-white/90 dark:bg-slate-900/90 px-4 py-2 rounded-full shadow-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:Ja,disabled:B===0,className:"p-1 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full disabled:opacity-30",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsxs("span",{className:"font-mono text-xs font-bold text-gray-700 dark:text-gray-300",children:[B+1," / ",E.length]}),l.jsx("button",{onClick:Sl,disabled:B===E.length-1,className:"p-1 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full disabled:opacity-30",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),l.jsxs("div",{className:"absolute bottom-4 left-4 z-40 flex flex-col-reverse gap-2 items-start pointer-events-none",children:[me&&he&&l.jsxs("button",{onClick:()=>ge(!1),className:"pointer-events-auto bg-white dark:bg-slate-800 border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] px-3 py-2 text-xs font-bold uppercase tracking-widest hover:translate-x-1 transition-transform flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"ROI Stats"]}),ze.filter(Q=>Q.isMinimized).map(Q=>l.jsxs("button",{onClick:()=>iu(Q.id),className:"pointer-events-auto bg-white dark:bg-slate-800 border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] px-3 py-2 text-xs font-bold uppercase tracking-widest hover:translate-x-1 transition-transform flex items-center gap-2",children:[l.jsx("span",{className:`w-2 h-2 rounded-full animate-pulse ${Q.type==="histogram"?"bg-cyan-500":Q.type==="fft"?"bg-purple-500":Q.type==="quant"?"bg-teal-500":"bg-indigo-500"}`}),Q.type==="histogram"?"Histogram":Q.type==="fft"?"Power Spectrum":Q.type==="quant"?"Quantization":"Pearson"]},Q.id))]}),l.jsx(Ire,{isOpen:_r,onClose:()=>Qe(!1)}),l.jsx(Lre,{isOpen:St,onClose:()=>ur(!1),data:fe,fileName:F?F.name:"",warning:jt}),l.jsx(Fre,{isOpen:d,onClose:()=>p(!1),data:Yt,blackLevel:sr,imageHeight:Fr,isBGGR:je,importedMetadata:mn||void 0,theme:s,initialCameraModel:(fe==null?void 0:fe.Model)||"",initialISO:(fe==null?void 0:fe.ISO)||((kd=fe==null?void 0:fe.ISOSpeedRatings)==null?void 0:kd.toString())||""}),l.jsx(Vre,{isOpen:m,onClose:()=>x(!1),theme:s}),l.jsx(Hre,{isOpen:b,onClose:()=>S(!1),zIndex:200}),l.jsx(Qre,{isOpen:_e,onClose:wg,patchStats:bd,initialIsBGGR:je,sizeRatio:Ne,onSizeChange:bg}),l.jsx(ane,{isOpen:Or,isSfrLabOpen:Or,onClose:()=>{},rawImageData:W,roi:he?{x:he.x,y:he.y,w:he.width,h:he.height}:null,zIndex:200,onFocus:It,displaySettings:ie}),l.jsx(one,{isOpen:v,onClose:()=>y(!1),rawImageData:W,fileName:(F==null?void 0:F.name)||"image.dng",zIndex:300,onFocus:It}),l.jsx(xne,{isOpen:w,onClose:()=>P(!1),zIndex:350,onFocus:It}),l.jsx(jne,{isOpen:j,onClose:()=>k(!1),zIndex:400,onFocus:It}),l.jsx(ss,{isOpen:$r,onClose:()=>Tt(!1),onConfirm:_s,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),l.jsx("p",{className:"text-xs text-gray-500"})]})}),l.jsx(ss,{isOpen:A,onClose:()=>R(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),R(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[l.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),l.jsx(ss,{isOpen:_t,onClose:()=>Qt(!1),onConfirm:ua,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),l.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),l.jsx("div",{onClick:()=>yr(!Bt),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Bt?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:l.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Bt?"translate-x-6":""}`})})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),l.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),l.jsx("div",{onClick:()=>Jr(!rr),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${rr?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:l.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${rr?"translate-x-6":""}`})})]})]}),l.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[Bt&&!rr&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!Bt&&rr&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",Bt&&rr&&"Mode: Ready-to-Use. Conventional 16-bit development.",!Bt&&!rr&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!me&&l.jsx(Wne,{stats:he,onClose:()=>{oe(null),De(null)},onMinimize:()=>ge(!0),isBGGR:je,onToggleBGGR:Se,onOpenWindow:Ii,displaySettings:ie,zIndex:et,onFocus:It,rawImageData:W}),ze.map(Q=>{if(Q.isMinimized)return null;const ue=E.find(Re=>Re.id===Q.sessionId),ce=ue==null?void 0:ue.rawImageData;if(!ce)return null;const pe={key:Q.id,isOpen:!0,onClose:()=>Gr(Q.id),onMinimize:()=>js(Q.id),rawImageData:ce,roi:Q.roi,isBGGR:Q.isBGGR,zIndex:Q.zIndex,onFocus:()=>Eo(Q.id),initialPosition:Q.initialPosition,initialInternalState:Q.internalState,onUpdateState:Re=>He(Q.id,Re),stackFiles:Q.stackFiles};return Q.type==="histogram"?l.jsx(Nre,{...pe}):Q.type==="fft"?l.jsx(Tre,{...pe,onUpdateROI:Re=>Vt(Q.id,Re)}):Q.type==="quant"?l.jsx(Ere,{...pe}):Q.type==="pearson"?l.jsx($re,{...pe}):null}),Pe&&l.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:l.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[l.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),l.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:Pe}),l.jsx("button",{onClick:()=>$e(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!jl&&!wd&&!Pe&&l.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:l.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),l.jsx(dA,{image:jl,zoom:tt,pan:ke,onPanChange:ct,onZoomChange:pd,onSelectionChange:gd,forcedSelection:Ce,theme:s,touchAction:Zt,isMarking:Et>0||wt&&bt>0||on>0,onPointClick:Q=>{Et>0?gg(Q):wt&&bt>0?xg(Q):on>0&&Cg(Q)},markers:Rr,gridRects:er,colorLabPoints:Xt,colorLabRects:I,sfrRects:an}),on>0&&hr.map((Q,ue)=>l.jsxs("div",{className:"absolute pointer-events-none z-30",style:{left:Q.x*tt+ke.x,top:Q.y*tt+ke.y,transform:"translate(-50%, -50%)"},children:[l.jsx("div",{className:"w-3 h-3 border-2 border-cyan-400 rounded-full flex items-center justify-center bg-transparent",children:l.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})}),l.jsx("div",{className:"text-[10px] font-bold text-cyan-400 absolute top-3 left-1/2 -translate-x-1/2 bg-black/50 px-1 rounded",children:ue+1})]},ue)),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),W&&!Et&&!wt&&!Lr&&!on&&l.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",l.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),Lr&&l.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-red-500 bg-black/80 px-4 py-2 rounded-full border border-red-500 animate-pulse shadow-lg",children:"Manual Batch Marking Active (Shift+Drag to add)"}),on>0&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-emerald-500 bg-black/80 px-4 py-2 rounded-full border border-emerald-500 animate-pulse shadow-lg",children:["Calibration: Click Corner ",on,"/4"]}),wt&&bt>0&&l.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[Xt.length===0&&"Click Top-Left Corner of Chart",Xt.length===1&&"Click Top-Right Corner",Xt.length===2&&"Click Bottom-Left Corner",Xt.length===3&&"Click Bottom-Right Corner",Xt.length===4&&"Processing..."]}),l.jsx(c6,{zoom:tt,onZoomChange:pd,onResetView:()=>{Dt(1),ct({x:0,y:0})},touchAction:Zt,onToggleTouchAction:dg})]}),dt&&l.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:l.jsx(t6,{rawImageData:W,displaySettings:ie,onApplyDisplaySettings:hd,onSetSelection:fg,exifData:fe,isBridgeConnected:O.isConnected,isDrLabOpen:Pt,drMarkingStep:Et,onStartMarking:_g,onGenerateTestPic:xd,drRoiSize:la,onDrRoiSizeChange:ca,drGridRows:Mr,onDrGridRowsChange:Qa,drGridCols:re,onDrGridColsChange:ve,onBatchDrLab:yg,hasDrMarkers:er.length>0,isFftLabOpen:Ue,onProcessPair:ei,onProcessBatchDiff:Li,onProcessStackFft:ti,onOpenCrossCalc:()=>S(!0),isThreePlane:se,onToggleXTrans:ou,xtransPhase:ye,onXTransPhaseChange:ug,isXTransConverted:D==null?void 0:D.isXTransConverted,roiStats:he,isBGGR:je,isColorLabOpen:wt,colorLabMarkingStep:bt,onStartColorLabMarking:vg,isSfrLabOpen:Or,onOpenDngExport:()=>y(!0),sfrRectCount:an.length,isBatchMarkingMode:Lr,onToggleBatchMarking:()=>gn(!Lr),onClearBatchMarks:()=>or([]),onBatchCompute:md,stdChartStep:on,onStartStandardCalibration:Pg,onSaveBatchTemplate:su,onImportBatchTemplate:pg,onBatchTransform:hg,onOpenStackingTool:()=>P(!0)})}),l.jsx(u6,{theme:s,setTheme:c})]})]})},EN=document.getElementById("root");if(!EN)throw new Error("Could not find root element to mount to");const Hne=qm.createRoot(EN);Hne.render(l.jsx(ee.StrictMode,{children:l.jsx(Vne,{})}));
