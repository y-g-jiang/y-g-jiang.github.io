var $N=Object.defineProperty;var DN=(e,t,r)=>t in e?$N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pr=(e,t,r)=>DN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l4={exports:{}},Zh={},c4={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=Symbol.for("react.element"),RN=Symbol.for("react.portal"),IN=Symbol.for("react.fragment"),LN=Symbol.for("react.strict_mode"),BN=Symbol.for("react.profiler"),FN=Symbol.for("react.provider"),zN=Symbol.for("react.context"),UN=Symbol.for("react.forward_ref"),GN=Symbol.for("react.suspense"),WN=Symbol.for("react.memo"),VN=Symbol.for("react.lazy"),Tb=Symbol.iterator;function HN(e){return e===null||typeof e!="object"?null:(e=Tb&&e[Tb]||e["@@iterator"],typeof e=="function"?e:null)}var u4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f4=Object.assign,d4={};function Rc(e,t,r){this.props=e,this.context=t,this.refs=d4,this.updater=r||u4}Rc.prototype.isReactComponent={};Rc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h4(){}h4.prototype=Rc.prototype;function mx(e,t,r){this.props=e,this.context=t,this.refs=d4,this.updater=r||u4}var yx=mx.prototype=new h4;yx.constructor=mx;f4(yx,Rc.prototype);yx.isPureReactComponent=!0;var Eb=Array.isArray,p4=Object.prototype.hasOwnProperty,vx={current:null},g4={key:!0,ref:!0,__self:!0,__source:!0};function m4(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)p4.call(t,n)&&!g4.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:qf,type:e,key:i,ref:o,props:a,_owner:vx.current}}function XN(e,t){return{$$typeof:qf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xx(e){return typeof e=="object"&&e!==null&&e.$$typeof===qf}function KN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $b=/\/+/g;function Sg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?KN(""+e.key):t.toString(36)}function t0(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case qf:case RN:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Sg(o,0):n,Eb(a)?(r="",e!=null&&(r=e.replace($b,"$&/")+"/"),t0(a,t,r,"",function(u){return u})):a!=null&&(xx(a)&&(a=XN(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace($b,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Eb(e))for(var s=0;s<e.length;s++){i=e[s];var l=n+Sg(i,s);o+=t0(i,t,r,l,a)}else if(l=HN(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=n+Sg(i,s++),o+=t0(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function bd(e,t,r){if(e==null)return e;var n=[],a=0;return t0(e,n,"","",function(i){return t.call(r,i,a++)}),n}function YN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ga={current:null},r0={transition:null},qN={ReactCurrentDispatcher:ga,ReactCurrentBatchConfig:r0,ReactCurrentOwner:vx};function y4(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:bd,forEach:function(e,t,r){bd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bd(e,function(){t++}),t},toArray:function(e){return bd(e,function(t){return t})||[]},only:function(e){if(!xx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rt.Component=Rc;Rt.Fragment=IN;Rt.Profiler=BN;Rt.PureComponent=mx;Rt.StrictMode=LN;Rt.Suspense=GN;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qN;Rt.act=y4;Rt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f4({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=vx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)p4.call(t,l)&&!g4.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:qf,type:e.type,key:a,ref:i,props:n,_owner:o}};Rt.createContext=function(e){return e={$$typeof:zN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FN,_context:e},e.Consumer=e};Rt.createElement=m4;Rt.createFactory=function(e){var t=m4.bind(null,e);return t.type=e,t};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(e){return{$$typeof:UN,render:e}};Rt.isValidElement=xx;Rt.lazy=function(e){return{$$typeof:VN,_payload:{_status:-1,_result:e},_init:YN}};Rt.memo=function(e,t){return{$$typeof:WN,type:e,compare:t===void 0?null:t}};Rt.startTransition=function(e){var t=r0.transition;r0.transition={};try{e()}finally{r0.transition=t}};Rt.unstable_act=y4;Rt.useCallback=function(e,t){return ga.current.useCallback(e,t)};Rt.useContext=function(e){return ga.current.useContext(e)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(e){return ga.current.useDeferredValue(e)};Rt.useEffect=function(e,t){return ga.current.useEffect(e,t)};Rt.useId=function(){return ga.current.useId()};Rt.useImperativeHandle=function(e,t,r){return ga.current.useImperativeHandle(e,t,r)};Rt.useInsertionEffect=function(e,t){return ga.current.useInsertionEffect(e,t)};Rt.useLayoutEffect=function(e,t){return ga.current.useLayoutEffect(e,t)};Rt.useMemo=function(e,t){return ga.current.useMemo(e,t)};Rt.useReducer=function(e,t,r){return ga.current.useReducer(e,t,r)};Rt.useRef=function(e){return ga.current.useRef(e)};Rt.useState=function(e){return ga.current.useState(e)};Rt.useSyncExternalStore=function(e,t,r){return ga.current.useSyncExternalStore(e,t,r)};Rt.useTransition=function(){return ga.current.useTransition()};Rt.version="18.3.1";c4.exports=Rt;var P=c4.exports;const Y=mr(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN=P,QN=Symbol.for("react.element"),JN=Symbol.for("react.fragment"),eO=Object.prototype.hasOwnProperty,tO=ZN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rO={key:!0,ref:!0,__self:!0,__source:!0};function v4(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)eO.call(t,n)&&!rO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:QN,type:e,key:i,ref:o,props:a,_owner:tO.current}}Zh.Fragment=JN;Zh.jsx=v4;Zh.jsxs=v4;l4.exports=Zh;var c=l4.exports,Bm={},x4={exports:{}},Fa={},b4={exports:{}},w4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,W){var K=L.length;L.push(W);e:for(;0<K;){var ae=K-1>>>1,re=L[ae];if(0<a(re,W))L[ae]=W,L[K]=re,K=ae;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var W=L[0],K=L.pop();if(K!==W){L[0]=K;e:for(var ae=0,re=L.length,Q=re>>>1;ae<Q;){var le=2*(ae+1)-1,Ne=L[le],ie=le+1,ge=L[ie];if(0>a(Ne,K))ie<re&&0>a(ge,Ne)?(L[ae]=ge,L[ie]=K,ae=ie):(L[ae]=Ne,L[le]=K,ae=le);else if(ie<re&&0>a(ge,K))L[ae]=ge,L[ie]=K,ae=ie;else break e}}return W}function a(L,W){var K=L.sortIndex-W.sortIndex;return K!==0?K:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],f=1,d=null,p=3,m=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(L){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=L)n(u),W.sortIndex=W.expirationTime,t(l,W);else break;W=r(u)}}function C(L){if(x=!1,k(L),!b)if(r(l)!==null)b=!0,F(j);else{var W=r(u);W!==null&&I(C,W.startTime-L)}}function j(L,W){b=!1,x&&(x=!1,v(M),M=-1),m=!0;var K=p;try{for(k(W),d=r(l);d!==null&&(!(d.expirationTime>W)||L&&!T());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,p=d.priorityLevel;var re=ae(d.expirationTime<=W);W=e.unstable_now(),typeof re=="function"?d.callback=re:d===r(l)&&n(l),k(W)}else n(l);d=r(l)}if(d!==null)var Q=!0;else{var le=r(u);le!==null&&I(C,le.startTime-W),Q=!1}return Q}finally{d=null,p=K,m=!1}}var S=!1,N=null,M=-1,E=5,R=-1;function T(){return!(e.unstable_now()-R<E)}function D(){if(N!==null){var L=e.unstable_now();R=L;var W=!0;try{W=N(!0,L)}finally{W?B():(S=!1,N=null)}}else S=!1}var B;if(typeof y=="function")B=function(){y(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=D,B=function(){z.postMessage(null)}}else B=function(){w(D,0)};function F(L){N=L,S||(S=!0,B())}function I(L,W){M=w(function(){L(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,F(j))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(L){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var K=p;p=W;try{return L()}finally{p=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=p;p=L;try{return W()}finally{p=K}},e.unstable_scheduleCallback=function(L,W,K){var ae=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ae+K:ae):K=ae,L){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=K+re,L={id:f++,callback:W,priorityLevel:L,startTime:K,expirationTime:re,sortIndex:-1},K>ae?(L.sortIndex=K,t(u,L),r(l)===null&&L===r(u)&&(x?(v(M),M=-1):x=!0,I(C,K-ae))):(L.sortIndex=re,t(l,L),b||m||(b=!0,F(j))),L},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(L){var W=p;return function(){var K=p;p=W;try{return L.apply(this,arguments)}finally{p=K}}}})(w4);b4.exports=w4;var nO=b4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO=P,Ba=nO;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k4=new Set,Ku={};function cl(e,t){rc(e,t),rc(e+"Capture",t)}function rc(e,t){for(Ku[e]=t,e=0;e<t.length;e++)k4.add(t[e])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fm=Object.prototype.hasOwnProperty,iO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Db={},Rb={};function oO(e){return Fm.call(Rb,e)?!0:Fm.call(Db,e)?!1:iO.test(e)?Rb[e]=!0:(Db[e]=!0,!1)}function sO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lO(e,t,r,n){if(t===null||typeof t>"u"||sO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ma(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yn[e]=new ma(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yn[t]=new ma(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yn[e]=new ma(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yn[e]=new ma(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yn[e]=new ma(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yn[e]=new ma(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yn[e]=new ma(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yn[e]=new ma(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yn[e]=new ma(e,5,!1,e.toLowerCase(),null,!1,!1)});var bx=/[\-:]([a-z])/g;function wx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bx,wx);Yn[t]=new ma(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bx,wx);Yn[t]=new ma(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bx,wx);Yn[t]=new ma(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yn[e]=new ma(e,1,!1,e.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new ma("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yn[e]=new ma(e,1,!1,e.toLowerCase(),null,!0,!0)});function kx(e,t,r,n){var a=Yn.hasOwnProperty(t)?Yn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lO(t,r,a,n)&&(r=null),n||a===null?oO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var jo=aO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wd=Symbol.for("react.element"),Ml=Symbol.for("react.portal"),Al=Symbol.for("react.fragment"),Sx=Symbol.for("react.strict_mode"),zm=Symbol.for("react.profiler"),S4=Symbol.for("react.provider"),j4=Symbol.for("react.context"),jx=Symbol.for("react.forward_ref"),Um=Symbol.for("react.suspense"),Gm=Symbol.for("react.suspense_list"),_x=Symbol.for("react.memo"),Ao=Symbol.for("react.lazy"),_4=Symbol.for("react.offscreen"),Ib=Symbol.iterator;function ou(e){return e===null||typeof e!="object"?null:(e=Ib&&e[Ib]||e["@@iterator"],typeof e=="function"?e:null)}var Fr=Object.assign,jg;function Cu(e){if(jg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);jg=t&&t[1]||""}return`
`+jg+e}var _g=!1;function Cg(e,t){if(!e||_g)return"";_g=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{_g=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Cu(e):""}function cO(e){switch(e.tag){case 5:return Cu(e.type);case 16:return Cu("Lazy");case 13:return Cu("Suspense");case 19:return Cu("SuspenseList");case 0:case 2:case 15:return e=Cg(e.type,!1),e;case 11:return e=Cg(e.type.render,!1),e;case 1:return e=Cg(e.type,!0),e;default:return""}}function Wm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Al:return"Fragment";case Ml:return"Portal";case zm:return"Profiler";case Sx:return"StrictMode";case Um:return"Suspense";case Gm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j4:return(e.displayName||"Context")+".Consumer";case S4:return(e._context.displayName||"Context")+".Provider";case jx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _x:return t=e.displayName||null,t!==null?t:Wm(e.type)||"Memo";case Ao:t=e._payload,e=e._init;try{return Wm(e(t))}catch{}}return null}function uO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wm(t);case 8:return t===Sx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function is(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fO(e){var t=C4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kd(e){e._valueTracker||(e._valueTracker=fO(e))}function P4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=C4(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function m0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vm(e,t){var r=t.checked;return Fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Lb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=is(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function N4(e,t){t=t.checked,t!=null&&kx(e,"checked",t,!1)}function Hm(e,t){N4(e,t);var r=is(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xm(e,t.type,is(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xm(e,t,r){(t!=="number"||m0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pu=Array.isArray;function Vl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+is(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Km(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ke(92));if(Pu(r)){if(1<r.length)throw Error(ke(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:is(r)}}function O4(e,t){var r=is(t.value),n=is(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function zb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function M4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ym(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?M4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sd,A4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sd=Sd||document.createElement("div"),Sd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Au={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dO=["Webkit","ms","Moz","O"];Object.keys(Au).forEach(function(e){dO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Au[t]=Au[e]})});function T4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Au.hasOwnProperty(e)&&Au[e]?(""+t).trim():t+"px"}function E4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=T4(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var hO=Fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(e,t){if(t){if(hO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function Zm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qm=null;function Cx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jm=null,Hl=null,Xl=null;function Ub(e){if(e=Jf(e)){if(typeof Jm!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=rp(t),Jm(e.stateNode,e.type,t))}}function $4(e){Hl?Xl?Xl.push(e):Xl=[e]:Hl=e}function D4(){if(Hl){var e=Hl,t=Xl;if(Xl=Hl=null,Ub(e),t)for(e=0;e<t.length;e++)Ub(t[e])}}function R4(e,t){return e(t)}function I4(){}var Pg=!1;function L4(e,t,r){if(Pg)return e(t,r);Pg=!0;try{return R4(e,t,r)}finally{Pg=!1,(Hl!==null||Xl!==null)&&(I4(),D4())}}function qu(e,t){var r=e.stateNode;if(r===null)return null;var n=rp(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ke(231,t,typeof r));return r}var ey=!1;if(yo)try{var su={};Object.defineProperty(su,"passive",{get:function(){ey=!0}}),window.addEventListener("test",su,su),window.removeEventListener("test",su,su)}catch{ey=!1}function pO(e,t,r,n,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Tu=!1,y0=null,v0=!1,ty=null,gO={onError:function(e){Tu=!0,y0=e}};function mO(e,t,r,n,a,i,o,s,l){Tu=!1,y0=null,pO.apply(gO,arguments)}function yO(e,t,r,n,a,i,o,s,l){if(mO.apply(this,arguments),Tu){if(Tu){var u=y0;Tu=!1,y0=null}else throw Error(ke(198));v0||(v0=!0,ty=u)}}function ul(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function B4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gb(e){if(ul(e)!==e)throw Error(ke(188))}function vO(e){var t=e.alternate;if(!t){if(t=ul(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Gb(a),e;if(i===n)return Gb(a),t;i=i.sibling}throw Error(ke(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(ke(189))}}if(r.alternate!==n)throw Error(ke(190))}if(r.tag!==3)throw Error(ke(188));return r.stateNode.current===r?e:t}function F4(e){return e=vO(e),e!==null?z4(e):null}function z4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=z4(e);if(t!==null)return t;e=e.sibling}return null}var U4=Ba.unstable_scheduleCallback,Wb=Ba.unstable_cancelCallback,xO=Ba.unstable_shouldYield,bO=Ba.unstable_requestPaint,an=Ba.unstable_now,wO=Ba.unstable_getCurrentPriorityLevel,Px=Ba.unstable_ImmediatePriority,G4=Ba.unstable_UserBlockingPriority,x0=Ba.unstable_NormalPriority,kO=Ba.unstable_LowPriority,W4=Ba.unstable_IdlePriority,Qh=null,Bi=null;function SO(e){if(Bi&&typeof Bi.onCommitFiberRoot=="function")try{Bi.onCommitFiberRoot(Qh,e,void 0,(e.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:CO,jO=Math.log,_O=Math.LN2;function CO(e){return e>>>=0,e===0?32:31-(jO(e)/_O|0)|0}var jd=64,_d=4194304;function Nu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function b0(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Nu(s):(i&=o,i!==0&&(n=Nu(i)))}else o=r&~a,o!==0?n=Nu(o):i!==0&&(n=Nu(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ji(t),a=1<<r,n|=e[r],t&=~a;return n}function PO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ji(i),s=1<<o,l=a[o];l===-1?(!(s&r)||s&n)&&(a[o]=PO(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function ry(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function V4(){var e=jd;return jd<<=1,!(jd&4194240)&&(jd=64),e}function Ng(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Zf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ji(t),e[t]=r}function OO(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ji(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Nx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ji(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var or=0;function H4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var X4,Ox,K4,Y4,q4,ny=!1,Cd=[],Xo=null,Ko=null,Yo=null,Zu=new Map,Qu=new Map,$o=[],MO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vb(e,t){switch(e){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Yo=null;break;case"pointerover":case"pointerout":Zu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(t.pointerId)}}function lu(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Jf(t),t!==null&&Ox(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function AO(e,t,r,n,a){switch(t){case"focusin":return Xo=lu(Xo,e,t,r,n,a),!0;case"dragenter":return Ko=lu(Ko,e,t,r,n,a),!0;case"mouseover":return Yo=lu(Yo,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Zu.set(i,lu(Zu.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Qu.set(i,lu(Qu.get(i)||null,e,t,r,n,a)),!0}return!1}function Z4(e){var t=As(e.target);if(t!==null){var r=ul(t);if(r!==null){if(t=r.tag,t===13){if(t=B4(r),t!==null){e.blockedOn=t,q4(e.priority,function(){K4(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function n0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ay(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Qm=n,r.target.dispatchEvent(n),Qm=null}else return t=Jf(r),t!==null&&Ox(t),e.blockedOn=r,!1;t.shift()}return!0}function Hb(e,t,r){n0(e)&&r.delete(t)}function TO(){ny=!1,Xo!==null&&n0(Xo)&&(Xo=null),Ko!==null&&n0(Ko)&&(Ko=null),Yo!==null&&n0(Yo)&&(Yo=null),Zu.forEach(Hb),Qu.forEach(Hb)}function cu(e,t){e.blockedOn===t&&(e.blockedOn=null,ny||(ny=!0,Ba.unstable_scheduleCallback(Ba.unstable_NormalPriority,TO)))}function Ju(e){function t(a){return cu(a,e)}if(0<Cd.length){cu(Cd[0],e);for(var r=1;r<Cd.length;r++){var n=Cd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Xo!==null&&cu(Xo,e),Ko!==null&&cu(Ko,e),Yo!==null&&cu(Yo,e),Zu.forEach(t),Qu.forEach(t),r=0;r<$o.length;r++)n=$o[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$o.length&&(r=$o[0],r.blockedOn===null);)Z4(r),r.blockedOn===null&&$o.shift()}var Kl=jo.ReactCurrentBatchConfig,w0=!0;function EO(e,t,r,n){var a=or,i=Kl.transition;Kl.transition=null;try{or=1,Mx(e,t,r,n)}finally{or=a,Kl.transition=i}}function $O(e,t,r,n){var a=or,i=Kl.transition;Kl.transition=null;try{or=4,Mx(e,t,r,n)}finally{or=a,Kl.transition=i}}function Mx(e,t,r,n){if(w0){var a=ay(e,t,r,n);if(a===null)Lg(e,t,n,k0,r),Vb(e,n);else if(AO(a,e,t,r,n))n.stopPropagation();else if(Vb(e,n),t&4&&-1<MO.indexOf(e)){for(;a!==null;){var i=Jf(a);if(i!==null&&X4(i),i=ay(e,t,r,n),i===null&&Lg(e,t,n,k0,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Lg(e,t,n,null,r)}}var k0=null;function ay(e,t,r,n){if(k0=null,e=Cx(n),e=As(e),e!==null)if(t=ul(e),t===null)e=null;else if(r=t.tag,r===13){if(e=B4(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return k0=e,null}function Q4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wO()){case Px:return 1;case G4:return 4;case x0:case kO:return 16;case W4:return 536870912;default:return 16}default:return 16}}var Io=null,Ax=null,a0=null;function J4(){if(a0)return a0;var e,t=Ax,r=t.length,n,a="value"in Io?Io.value:Io.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return a0=a.slice(e,1<n?1-n:void 0)}function i0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pd(){return!0}function Xb(){return!1}function za(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pd:Xb,this.isPropagationStopped=Xb,this}return Fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Pd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Pd)},persist:function(){},isPersistent:Pd}),t}var Ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tx=za(Ic),Qf=Fr({},Ic,{view:0,detail:0}),DO=za(Qf),Og,Mg,uu,Jh=Fr({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ex,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==uu&&(uu&&e.type==="mousemove"?(Og=e.screenX-uu.screenX,Mg=e.screenY-uu.screenY):Mg=Og=0,uu=e),Og)},movementY:function(e){return"movementY"in e?e.movementY:Mg}}),Kb=za(Jh),RO=Fr({},Jh,{dataTransfer:0}),IO=za(RO),LO=Fr({},Qf,{relatedTarget:0}),Ag=za(LO),BO=Fr({},Ic,{animationName:0,elapsedTime:0,pseudoElement:0}),FO=za(BO),zO=Fr({},Ic,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),UO=za(zO),GO=Fr({},Ic,{data:0}),Yb=za(GO),WO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HO[e])?!!t[e]:!1}function Ex(){return XO}var KO=Fr({},Qf,{key:function(e){if(e.key){var t=WO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=i0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?VO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ex,charCode:function(e){return e.type==="keypress"?i0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?i0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YO=za(KO),qO=Fr({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qb=za(qO),ZO=Fr({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ex}),QO=za(ZO),JO=Fr({},Ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),eM=za(JO),tM=Fr({},Jh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rM=za(tM),nM=[9,13,27,32],$x=yo&&"CompositionEvent"in window,Eu=null;yo&&"documentMode"in document&&(Eu=document.documentMode);var aM=yo&&"TextEvent"in window&&!Eu,e3=yo&&(!$x||Eu&&8<Eu&&11>=Eu),Zb=" ",Qb=!1;function t3(e,t){switch(e){case"keyup":return nM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tl=!1;function iM(e,t){switch(e){case"compositionend":return r3(t);case"keypress":return t.which!==32?null:(Qb=!0,Zb);case"textInput":return e=t.data,e===Zb&&Qb?null:e;default:return null}}function oM(e,t){if(Tl)return e==="compositionend"||!$x&&t3(e,t)?(e=J4(),a0=Ax=Io=null,Tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return e3&&t.locale!=="ko"?null:t.data;default:return null}}var sM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sM[e.type]:t==="textarea"}function n3(e,t,r,n){$4(n),t=S0(t,"onChange"),0<t.length&&(r=new Tx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $u=null,ef=null;function lM(e){p3(e,0)}function ep(e){var t=Dl(e);if(P4(t))return e}function cM(e,t){if(e==="change")return t}var a3=!1;if(yo){var Tg;if(yo){var Eg="oninput"in document;if(!Eg){var e2=document.createElement("div");e2.setAttribute("oninput","return;"),Eg=typeof e2.oninput=="function"}Tg=Eg}else Tg=!1;a3=Tg&&(!document.documentMode||9<document.documentMode)}function t2(){$u&&($u.detachEvent("onpropertychange",i3),ef=$u=null)}function i3(e){if(e.propertyName==="value"&&ep(ef)){var t=[];n3(t,ef,e,Cx(e)),L4(lM,t)}}function uM(e,t,r){e==="focusin"?(t2(),$u=t,ef=r,$u.attachEvent("onpropertychange",i3)):e==="focusout"&&t2()}function fM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ep(ef)}function dM(e,t){if(e==="click")return ep(t)}function hM(e,t){if(e==="input"||e==="change")return ep(t)}function pM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ci=typeof Object.is=="function"?Object.is:pM;function tf(e,t){if(Ci(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Fm.call(t,a)||!Ci(e[a],t[a]))return!1}return!0}function r2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n2(e,t){var r=r2(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=r2(r)}}function o3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?o3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function s3(){for(var e=window,t=m0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=m0(e.document)}return t}function Dx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gM(e){var t=s3(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&o3(r.ownerDocument.documentElement,r)){if(n!==null&&Dx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=n2(r,i);var o=n2(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mM=yo&&"documentMode"in document&&11>=document.documentMode,El=null,iy=null,Du=null,oy=!1;function a2(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oy||El==null||El!==m0(n)||(n=El,"selectionStart"in n&&Dx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Du&&tf(Du,n)||(Du=n,n=S0(iy,"onSelect"),0<n.length&&(t=new Tx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=El)))}function Nd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var $l={animationend:Nd("Animation","AnimationEnd"),animationiteration:Nd("Animation","AnimationIteration"),animationstart:Nd("Animation","AnimationStart"),transitionend:Nd("Transition","TransitionEnd")},$g={},l3={};yo&&(l3=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function tp(e){if($g[e])return $g[e];if(!$l[e])return e;var t=$l[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in l3)return $g[e]=t[r];return e}var c3=tp("animationend"),u3=tp("animationiteration"),f3=tp("animationstart"),d3=tp("transitionend"),h3=new Map,i2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(e,t){h3.set(e,t),cl(t,[e])}for(var Dg=0;Dg<i2.length;Dg++){var Rg=i2[Dg],yM=Rg.toLowerCase(),vM=Rg[0].toUpperCase()+Rg.slice(1);ss(yM,"on"+vM)}ss(c3,"onAnimationEnd");ss(u3,"onAnimationIteration");ss(f3,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(d3,"onTransitionEnd");rc("onMouseEnter",["mouseout","mouseover"]);rc("onMouseLeave",["mouseout","mouseover"]);rc("onPointerEnter",["pointerout","pointerover"]);rc("onPointerLeave",["pointerout","pointerover"]);cl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cl("onBeforeInput",["compositionend","keypress","textInput","paste"]);cl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ou));function o2(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,yO(n,t,void 0,e),e.currentTarget=null}function p3(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;o2(a,s,u),i=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;o2(a,s,u),i=l}}}if(v0)throw e=ty,v0=!1,ty=null,e}function Nr(e,t){var r=t[fy];r===void 0&&(r=t[fy]=new Set);var n=e+"__bubble";r.has(n)||(g3(t,e,2,!1),r.add(n))}function Ig(e,t,r){var n=0;t&&(n|=4),g3(r,e,n,t)}var Od="_reactListening"+Math.random().toString(36).slice(2);function rf(e){if(!e[Od]){e[Od]=!0,k4.forEach(function(r){r!=="selectionchange"&&(xM.has(r)||Ig(r,!1,e),Ig(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Od]||(t[Od]=!0,Ig("selectionchange",!1,t))}}function g3(e,t,r,n){switch(Q4(t)){case 1:var a=EO;break;case 4:a=$O;break;default:a=Mx}r=a.bind(null,t,r,e),a=void 0,!ey||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Lg(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=As(s),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}s=s.parentNode}}n=n.return}L4(function(){var u=i,f=Cx(r),d=[];e:{var p=h3.get(e);if(p!==void 0){var m=Tx,b=e;switch(e){case"keypress":if(i0(r)===0)break e;case"keydown":case"keyup":m=YO;break;case"focusin":b="focus",m=Ag;break;case"focusout":b="blur",m=Ag;break;case"beforeblur":case"afterblur":m=Ag;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Kb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=IO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=QO;break;case c3:case u3:case f3:m=FO;break;case d3:m=eM;break;case"scroll":m=DO;break;case"wheel":m=rM;break;case"copy":case"cut":case"paste":m=UO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qb}var x=(t&4)!==0,w=!x&&e==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var y=u,k;y!==null;){k=y;var C=k.stateNode;if(k.tag===5&&C!==null&&(k=C,v!==null&&(C=qu(y,v),C!=null&&x.push(nf(y,C,k)))),w)break;y=y.return}0<x.length&&(p=new m(p,b,null,r,f),d.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==Qm&&(b=r.relatedTarget||r.fromElement)&&(As(b)||b[vo]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=r.relatedTarget||r.toElement,m=u,b=b?As(b):null,b!==null&&(w=ul(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(x=Kb,C="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(x=qb,C="onPointerLeave",v="onPointerEnter",y="pointer"),w=m==null?p:Dl(m),k=b==null?p:Dl(b),p=new x(C,y+"leave",m,r,f),p.target=w,p.relatedTarget=k,C=null,As(f)===u&&(x=new x(v,y+"enter",b,r,f),x.target=k,x.relatedTarget=w,C=x),w=C,m&&b)t:{for(x=m,v=b,y=0,k=x;k;k=jl(k))y++;for(k=0,C=v;C;C=jl(C))k++;for(;0<y-k;)x=jl(x),y--;for(;0<k-y;)v=jl(v),k--;for(;y--;){if(x===v||v!==null&&x===v.alternate)break t;x=jl(x),v=jl(v)}x=null}else x=null;m!==null&&s2(d,p,m,x,!1),b!==null&&w!==null&&s2(d,w,b,x,!0)}}e:{if(p=u?Dl(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var j=cM;else if(Jb(p))if(a3)j=hM;else{j=fM;var S=uM}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=dM);if(j&&(j=j(e,u))){n3(d,j,r,f);break e}S&&S(e,p,u),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Xm(p,"number",p.value)}switch(S=u?Dl(u):window,e){case"focusin":(Jb(S)||S.contentEditable==="true")&&(El=S,iy=u,Du=null);break;case"focusout":Du=iy=El=null;break;case"mousedown":oy=!0;break;case"contextmenu":case"mouseup":case"dragend":oy=!1,a2(d,r,f);break;case"selectionchange":if(mM)break;case"keydown":case"keyup":a2(d,r,f)}var N;if($x)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Tl?t3(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(e3&&r.locale!=="ko"&&(Tl||M!=="onCompositionStart"?M==="onCompositionEnd"&&Tl&&(N=J4()):(Io=f,Ax="value"in Io?Io.value:Io.textContent,Tl=!0)),S=S0(u,M),0<S.length&&(M=new Yb(M,e,null,r,f),d.push({event:M,listeners:S}),N?M.data=N:(N=r3(r),N!==null&&(M.data=N)))),(N=aM?iM(e,r):oM(e,r))&&(u=S0(u,"onBeforeInput"),0<u.length&&(f=new Yb("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=N))}p3(d,t)})}function nf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function S0(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=qu(e,r),i!=null&&n.unshift(nf(e,i,a)),i=qu(e,t),i!=null&&n.push(nf(e,i,a))),e=e.return}return n}function jl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function s2(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,a?(l=qu(r,i),l!=null&&o.unshift(nf(r,l,s))):a||(l=qu(r,i),l!=null&&o.push(nf(r,l,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var bM=/\r\n?/g,wM=/\u0000|\uFFFD/g;function l2(e){return(typeof e=="string"?e:""+e).replace(bM,`
`).replace(wM,"")}function Md(e,t,r){if(t=l2(t),l2(e)!==t&&r)throw Error(ke(425))}function j0(){}var sy=null,ly=null;function cy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uy=typeof setTimeout=="function"?setTimeout:void 0,kM=typeof clearTimeout=="function"?clearTimeout:void 0,c2=typeof Promise=="function"?Promise:void 0,SM=typeof queueMicrotask=="function"?queueMicrotask:typeof c2<"u"?function(e){return c2.resolve(null).then(e).catch(jM)}:uy;function jM(e){setTimeout(function(){throw e})}function Bg(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Ju(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ju(t)}function qo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function u2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Lc=Math.random().toString(36).slice(2),Ri="__reactFiber$"+Lc,af="__reactProps$"+Lc,vo="__reactContainer$"+Lc,fy="__reactEvents$"+Lc,_M="__reactListeners$"+Lc,CM="__reactHandles$"+Lc;function As(e){var t=e[Ri];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vo]||r[Ri]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=u2(e);e!==null;){if(r=e[Ri])return r;e=u2(e)}return t}e=r,r=e.parentNode}return null}function Jf(e){return e=e[Ri]||e[vo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function rp(e){return e[af]||null}var dy=[],Rl=-1;function ls(e){return{current:e}}function Ar(e){0>Rl||(e.current=dy[Rl],dy[Rl]=null,Rl--)}function kr(e,t){Rl++,dy[Rl]=e.current,e.current=t}var os={},aa=ls(os),ja=ls(!1),Xs=os;function nc(e,t){var r=e.type.contextTypes;if(!r)return os;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _a(e){return e=e.childContextTypes,e!=null}function _0(){Ar(ja),Ar(aa)}function f2(e,t,r){if(aa.current!==os)throw Error(ke(168));kr(aa,t),kr(ja,r)}function m3(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ke(108,uO(e)||"Unknown",a));return Fr({},r,n)}function C0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||os,Xs=aa.current,kr(aa,e),kr(ja,ja.current),!0}function d2(e,t,r){var n=e.stateNode;if(!n)throw Error(ke(169));r?(e=m3(e,t,Xs),n.__reactInternalMemoizedMergedChildContext=e,Ar(ja),Ar(aa),kr(aa,e)):Ar(ja),kr(ja,r)}var io=null,np=!1,Fg=!1;function y3(e){io===null?io=[e]:io.push(e)}function PM(e){np=!0,y3(e)}function cs(){if(!Fg&&io!==null){Fg=!0;var e=0,t=or;try{var r=io;for(or=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}io=null,np=!1}catch(a){throw io!==null&&(io=io.slice(e+1)),U4(Px,cs),a}finally{or=t,Fg=!1}}return null}var Il=[],Ll=0,P0=null,N0=0,qa=[],Za=0,Ks=null,oo=1,so="";function Cs(e,t){Il[Ll++]=N0,Il[Ll++]=P0,P0=e,N0=t}function v3(e,t,r){qa[Za++]=oo,qa[Za++]=so,qa[Za++]=Ks,Ks=e;var n=oo;e=so;var a=32-ji(n)-1;n&=~(1<<a),r+=1;var i=32-ji(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,oo=1<<32-ji(t)+a|r<<a|n,so=i+e}else oo=1<<i|r<<a|n,so=e}function Rx(e){e.return!==null&&(Cs(e,1),v3(e,1,0))}function Ix(e){for(;e===P0;)P0=Il[--Ll],Il[Ll]=null,N0=Il[--Ll],Il[Ll]=null;for(;e===Ks;)Ks=qa[--Za],qa[Za]=null,so=qa[--Za],qa[Za]=null,oo=qa[--Za],qa[Za]=null}var La=null,Ia=null,$r=!1,bi=null;function x3(e,t){var r=Qa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function h2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,La=e,Ia=qo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,La=e,Ia=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ks!==null?{id:oo,overflow:so}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,La=e,Ia=null,!0):!1;default:return!1}}function hy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function py(e){if($r){var t=Ia;if(t){var r=t;if(!h2(e,t)){if(hy(e))throw Error(ke(418));t=qo(r.nextSibling);var n=La;t&&h2(e,t)?x3(n,r):(e.flags=e.flags&-4097|2,$r=!1,La=e)}}else{if(hy(e))throw Error(ke(418));e.flags=e.flags&-4097|2,$r=!1,La=e}}}function p2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;La=e}function Ad(e){if(e!==La)return!1;if(!$r)return p2(e),$r=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cy(e.type,e.memoizedProps)),t&&(t=Ia)){if(hy(e))throw b3(),Error(ke(418));for(;t;)x3(e,t),t=qo(t.nextSibling)}if(p2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ia=qo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ia=null}}else Ia=La?qo(e.stateNode.nextSibling):null;return!0}function b3(){for(var e=Ia;e;)e=qo(e.nextSibling)}function ac(){Ia=La=null,$r=!1}function Lx(e){bi===null?bi=[e]:bi.push(e)}var NM=jo.ReactCurrentBatchConfig;function fu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ke(309));var n=r.stateNode}if(!n)throw Error(ke(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ke(284));if(!r._owner)throw Error(ke(290,e))}return e}function Td(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function g2(e){var t=e._init;return t(e._payload)}function w3(e){function t(v,y){if(e){var k=v.deletions;k===null?(v.deletions=[y],v.flags|=16):k.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=es(v,y),v.index=0,v.sibling=null,v}function i(v,y,k){return v.index=k,e?(k=v.alternate,k!==null?(k=k.index,k<y?(v.flags|=2,y):k):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,y,k,C){return y===null||y.tag!==6?(y=Xg(k,v.mode,C),y.return=v,y):(y=a(y,k),y.return=v,y)}function l(v,y,k,C){var j=k.type;return j===Al?f(v,y,k.props.children,C,k.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ao&&g2(j)===y.type)?(C=a(y,k.props),C.ref=fu(v,y,k),C.return=v,C):(C=d0(k.type,k.key,k.props,null,v.mode,C),C.ref=fu(v,y,k),C.return=v,C)}function u(v,y,k,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=Kg(k,v.mode,C),y.return=v,y):(y=a(y,k.children||[]),y.return=v,y)}function f(v,y,k,C,j){return y===null||y.tag!==7?(y=Gs(k,v.mode,C,j),y.return=v,y):(y=a(y,k),y.return=v,y)}function d(v,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xg(""+y,v.mode,k),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wd:return k=d0(y.type,y.key,y.props,null,v.mode,k),k.ref=fu(v,null,y),k.return=v,k;case Ml:return y=Kg(y,v.mode,k),y.return=v,y;case Ao:var C=y._init;return d(v,C(y._payload),k)}if(Pu(y)||ou(y))return y=Gs(y,v.mode,k,null),y.return=v,y;Td(v,y)}return null}function p(v,y,k,C){var j=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return j!==null?null:s(v,y,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case wd:return k.key===j?l(v,y,k,C):null;case Ml:return k.key===j?u(v,y,k,C):null;case Ao:return j=k._init,p(v,y,j(k._payload),C)}if(Pu(k)||ou(k))return j!==null?null:f(v,y,k,C,null);Td(v,k)}return null}function m(v,y,k,C,j){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(k)||null,s(y,v,""+C,j);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case wd:return v=v.get(C.key===null?k:C.key)||null,l(y,v,C,j);case Ml:return v=v.get(C.key===null?k:C.key)||null,u(y,v,C,j);case Ao:var S=C._init;return m(v,y,k,S(C._payload),j)}if(Pu(C)||ou(C))return v=v.get(k)||null,f(y,v,C,j,null);Td(y,C)}return null}function b(v,y,k,C){for(var j=null,S=null,N=y,M=y=0,E=null;N!==null&&M<k.length;M++){N.index>M?(E=N,N=null):E=N.sibling;var R=p(v,N,k[M],C);if(R===null){N===null&&(N=E);break}e&&N&&R.alternate===null&&t(v,N),y=i(R,y,M),S===null?j=R:S.sibling=R,S=R,N=E}if(M===k.length)return r(v,N),$r&&Cs(v,M),j;if(N===null){for(;M<k.length;M++)N=d(v,k[M],C),N!==null&&(y=i(N,y,M),S===null?j=N:S.sibling=N,S=N);return $r&&Cs(v,M),j}for(N=n(v,N);M<k.length;M++)E=m(N,v,M,k[M],C),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?M:E.key),y=i(E,y,M),S===null?j=E:S.sibling=E,S=E);return e&&N.forEach(function(T){return t(v,T)}),$r&&Cs(v,M),j}function x(v,y,k,C){var j=ou(k);if(typeof j!="function")throw Error(ke(150));if(k=j.call(k),k==null)throw Error(ke(151));for(var S=j=null,N=y,M=y=0,E=null,R=k.next();N!==null&&!R.done;M++,R=k.next()){N.index>M?(E=N,N=null):E=N.sibling;var T=p(v,N,R.value,C);if(T===null){N===null&&(N=E);break}e&&N&&T.alternate===null&&t(v,N),y=i(T,y,M),S===null?j=T:S.sibling=T,S=T,N=E}if(R.done)return r(v,N),$r&&Cs(v,M),j;if(N===null){for(;!R.done;M++,R=k.next())R=d(v,R.value,C),R!==null&&(y=i(R,y,M),S===null?j=R:S.sibling=R,S=R);return $r&&Cs(v,M),j}for(N=n(v,N);!R.done;M++,R=k.next())R=m(N,v,M,R.value,C),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?M:R.key),y=i(R,y,M),S===null?j=R:S.sibling=R,S=R);return e&&N.forEach(function(D){return t(v,D)}),$r&&Cs(v,M),j}function w(v,y,k,C){if(typeof k=="object"&&k!==null&&k.type===Al&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case wd:e:{for(var j=k.key,S=y;S!==null;){if(S.key===j){if(j=k.type,j===Al){if(S.tag===7){r(v,S.sibling),y=a(S,k.props.children),y.return=v,v=y;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ao&&g2(j)===S.type){r(v,S.sibling),y=a(S,k.props),y.ref=fu(v,S,k),y.return=v,v=y;break e}r(v,S);break}else t(v,S);S=S.sibling}k.type===Al?(y=Gs(k.props.children,v.mode,C,k.key),y.return=v,v=y):(C=d0(k.type,k.key,k.props,null,v.mode,C),C.ref=fu(v,y,k),C.return=v,v=C)}return o(v);case Ml:e:{for(S=k.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){r(v,y.sibling),y=a(y,k.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=Kg(k,v.mode,C),y.return=v,v=y}return o(v);case Ao:return S=k._init,w(v,y,S(k._payload),C)}if(Pu(k))return b(v,y,k,C);if(ou(k))return x(v,y,k,C);Td(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,k),y.return=v,v=y):(r(v,y),y=Xg(k,v.mode,C),y.return=v,v=y),o(v)):r(v,y)}return w}var ic=w3(!0),k3=w3(!1),O0=ls(null),M0=null,Bl=null,Bx=null;function Fx(){Bx=Bl=M0=null}function zx(e){var t=O0.current;Ar(O0),e._currentValue=t}function gy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yl(e,t){M0=e,Bx=Bl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ka=!0),e.firstContext=null)}function ni(e){var t=e._currentValue;if(Bx!==e)if(e={context:e,memoizedValue:t,next:null},Bl===null){if(M0===null)throw Error(ke(308));Bl=e,M0.dependencies={lanes:0,firstContext:e}}else Bl=Bl.next=e;return t}var Ts=null;function Ux(e){Ts===null?Ts=[e]:Ts.push(e)}function S3(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Ux(t)):(r.next=a.next,a.next=r),t.interleaved=r,xo(e,n)}function xo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var To=!1;function Gx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Xt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,xo(e,r)}return a=n.interleaved,a===null?(t.next=t,Ux(n)):(t.next=a.next,a.next=t),n.interleaved=t,xo(e,r)}function o0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nx(e,r)}}function m2(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function A0(e,t,r,n){var a=e.updateQueue;To=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,f=u=l=null,s=i;do{var p=s.lane,m=s.eventTime;if((n&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var b=e,x=s;switch(p=t,m=r,x.tag){case 1:if(b=x.payload,typeof b=="function"){d=b.call(m,d,p);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,p=typeof b=="function"?b.call(m,d,p):b,p==null)break e;d=Fr({},d,p);break e;case 2:To=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else m={eventTime:m,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=m,l=d):f=f.next=m,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(f===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);qs|=o,e.lanes=o,e.memoizedState=d}}function y2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ke(191,a));a.call(n)}}}var ed={},Fi=ls(ed),of=ls(ed),sf=ls(ed);function Es(e){if(e===ed)throw Error(ke(174));return e}function Wx(e,t){switch(kr(sf,t),kr(of,e),kr(Fi,ed),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ym(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ym(t,e)}Ar(Fi),kr(Fi,t)}function oc(){Ar(Fi),Ar(of),Ar(sf)}function _3(e){Es(sf.current);var t=Es(Fi.current),r=Ym(t,e.type);t!==r&&(kr(of,e),kr(Fi,r))}function Vx(e){of.current===e&&(Ar(Fi),Ar(of))}var Lr=ls(0);function T0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zg=[];function Hx(){for(var e=0;e<zg.length;e++)zg[e]._workInProgressVersionPrimary=null;zg.length=0}var s0=jo.ReactCurrentDispatcher,Ug=jo.ReactCurrentBatchConfig,Ys=0,Br=null,wn=null,Tn=null,E0=!1,Ru=!1,lf=0,OM=0;function Qn(){throw Error(ke(321))}function Xx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ci(e[r],t[r]))return!1;return!0}function Kx(e,t,r,n,a,i){if(Ys=i,Br=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,s0.current=e===null||e.memoizedState===null?EM:$M,e=r(n,a),Ru){i=0;do{if(Ru=!1,lf=0,25<=i)throw Error(ke(301));i+=1,Tn=wn=null,t.updateQueue=null,s0.current=DM,e=r(n,a)}while(Ru)}if(s0.current=$0,t=wn!==null&&wn.next!==null,Ys=0,Tn=wn=Br=null,E0=!1,t)throw Error(ke(300));return e}function Yx(){var e=lf!==0;return lf=0,e}function Di(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Br.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function ai(){if(wn===null){var e=Br.alternate;e=e!==null?e.memoizedState:null}else e=wn.next;var t=Tn===null?Br.memoizedState:Tn.next;if(t!==null)Tn=t,wn=e;else{if(e===null)throw Error(ke(310));wn=e,e={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Tn===null?Br.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function cf(e,t){return typeof t=="function"?t(e):t}function Gg(e){var t=ai(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=e;var n=wn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,l=null,u=i;do{var f=u.lane;if((Ys&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,Br.lanes|=f,qs|=f}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=s,Ci(n,t.memoizedState)||(ka=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Br.lanes|=i,qs|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Wg(e){var t=ai(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ci(i,t.memoizedState)||(ka=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function C3(){}function P3(e,t){var r=Br,n=ai(),a=t(),i=!Ci(n.memoizedState,a);if(i&&(n.memoizedState=a,ka=!0),n=n.queue,qx(M3.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Tn!==null&&Tn.memoizedState.tag&1){if(r.flags|=2048,uf(9,O3.bind(null,r,n,a,t),void 0,null),$n===null)throw Error(ke(349));Ys&30||N3(r,t,a)}return a}function N3(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Br.updateQueue,t===null?(t={lastEffect:null,stores:null},Br.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function O3(e,t,r,n){t.value=r,t.getSnapshot=n,A3(t)&&T3(e)}function M3(e,t,r){return r(function(){A3(t)&&T3(e)})}function A3(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ci(e,r)}catch{return!0}}function T3(e){var t=xo(e,1);t!==null&&_i(t,e,1,-1)}function v2(e){var t=Di();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:e},t.queue=e,e=e.dispatch=TM.bind(null,Br,e),[t.memoizedState,e]}function uf(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Br.updateQueue,t===null?(t={lastEffect:null,stores:null},Br.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function E3(){return ai().memoizedState}function l0(e,t,r,n){var a=Di();Br.flags|=e,a.memoizedState=uf(1|t,r,void 0,n===void 0?null:n)}function ap(e,t,r,n){var a=ai();n=n===void 0?null:n;var i=void 0;if(wn!==null){var o=wn.memoizedState;if(i=o.destroy,n!==null&&Xx(n,o.deps)){a.memoizedState=uf(t,r,i,n);return}}Br.flags|=e,a.memoizedState=uf(1|t,r,i,n)}function x2(e,t){return l0(8390656,8,e,t)}function qx(e,t){return ap(2048,8,e,t)}function $3(e,t){return ap(4,2,e,t)}function D3(e,t){return ap(4,4,e,t)}function R3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function I3(e,t,r){return r=r!=null?r.concat([e]):null,ap(4,4,R3.bind(null,t,e),r)}function Zx(){}function L3(e,t){var r=ai();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function B3(e,t){var r=ai();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function F3(e,t,r){return Ys&21?(Ci(r,t)||(r=V4(),Br.lanes|=r,qs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ka=!0),e.memoizedState=r)}function MM(e,t){var r=or;or=r!==0&&4>r?r:4,e(!0);var n=Ug.transition;Ug.transition={};try{e(!1),t()}finally{or=r,Ug.transition=n}}function z3(){return ai().memoizedState}function AM(e,t,r){var n=Jo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},U3(e))G3(t,r);else if(r=S3(e,t,r,n),r!==null){var a=pa();_i(r,e,n,a),W3(r,t,n)}}function TM(e,t,r){var n=Jo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(U3(e))G3(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Ci(s,o)){var l=t.interleaved;l===null?(a.next=a,Ux(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=S3(e,t,a,n),r!==null&&(a=pa(),_i(r,e,n,a),W3(r,t,n))}}function U3(e){var t=e.alternate;return e===Br||t!==null&&t===Br}function G3(e,t){Ru=E0=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function W3(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nx(e,r)}}var $0={readContext:ni,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},EM={readContext:ni,useCallback:function(e,t){return Di().memoizedState=[e,t===void 0?null:t],e},useContext:ni,useEffect:x2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,l0(4194308,4,R3.bind(null,t,e),r)},useLayoutEffect:function(e,t){return l0(4194308,4,e,t)},useInsertionEffect:function(e,t){return l0(4,2,e,t)},useMemo:function(e,t){var r=Di();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Di();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=AM.bind(null,Br,e),[n.memoizedState,e]},useRef:function(e){var t=Di();return e={current:e},t.memoizedState=e},useState:v2,useDebugValue:Zx,useDeferredValue:function(e){return Di().memoizedState=e},useTransition:function(){var e=v2(!1),t=e[0];return e=MM.bind(null,e[1]),Di().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Br,a=Di();if($r){if(r===void 0)throw Error(ke(407));r=r()}else{if(r=t(),$n===null)throw Error(ke(349));Ys&30||N3(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,x2(M3.bind(null,n,i,e),[e]),n.flags|=2048,uf(9,O3.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Di(),t=$n.identifierPrefix;if($r){var r=so,n=oo;r=(n&~(1<<32-ji(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=lf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=OM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$M={readContext:ni,useCallback:L3,useContext:ni,useEffect:qx,useImperativeHandle:I3,useInsertionEffect:$3,useLayoutEffect:D3,useMemo:B3,useReducer:Gg,useRef:E3,useState:function(){return Gg(cf)},useDebugValue:Zx,useDeferredValue:function(e){var t=ai();return F3(t,wn.memoizedState,e)},useTransition:function(){var e=Gg(cf)[0],t=ai().memoizedState;return[e,t]},useMutableSource:C3,useSyncExternalStore:P3,useId:z3,unstable_isNewReconciler:!1},DM={readContext:ni,useCallback:L3,useContext:ni,useEffect:qx,useImperativeHandle:I3,useInsertionEffect:$3,useLayoutEffect:D3,useMemo:B3,useReducer:Wg,useRef:E3,useState:function(){return Wg(cf)},useDebugValue:Zx,useDeferredValue:function(e){var t=ai();return wn===null?t.memoizedState=e:F3(t,wn.memoizedState,e)},useTransition:function(){var e=Wg(cf)[0],t=ai().memoizedState;return[e,t]},useMutableSource:C3,useSyncExternalStore:P3,useId:z3,unstable_isNewReconciler:!1};function mi(e,t){if(e&&e.defaultProps){t=Fr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function my(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Fr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ip={isMounted:function(e){return(e=e._reactInternals)?ul(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=pa(),a=Jo(e),i=fo(n,a);i.payload=t,r!=null&&(i.callback=r),t=Zo(e,i,a),t!==null&&(_i(t,e,a,n),o0(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=pa(),a=Jo(e),i=fo(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Zo(e,i,a),t!==null&&(_i(t,e,a,n),o0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=pa(),n=Jo(e),a=fo(r,n);a.tag=2,t!=null&&(a.callback=t),t=Zo(e,a,n),t!==null&&(_i(t,e,n,r),o0(t,e,n))}};function b2(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!tf(r,n)||!tf(a,i):!0}function V3(e,t,r){var n=!1,a=os,i=t.contextType;return typeof i=="object"&&i!==null?i=ni(i):(a=_a(t)?Xs:aa.current,n=t.contextTypes,i=(n=n!=null)?nc(e,a):os),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ip,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function w2(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ip.enqueueReplaceState(t,t.state,null)}function yy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Gx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ni(i):(i=_a(t)?Xs:aa.current,a.context=nc(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(my(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ip.enqueueReplaceState(a,a.state,null),A0(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function sc(e,t){try{var r="",n=t;do r+=cO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Vg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function vy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var RM=typeof WeakMap=="function"?WeakMap:Map;function H3(e,t,r){r=fo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){R0||(R0=!0,Ny=n),vy(e,t)},r}function X3(e,t,r){r=fo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){vy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){vy(e,t),typeof n!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function k2(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new RM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=qM.bind(null,e,t,r),t.then(e,e))}function S2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function j2(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=fo(-1,1),t.tag=2,Zo(r,t,1))),r.lanes|=1),e)}var IM=jo.ReactCurrentOwner,ka=!1;function da(e,t,r,n){t.child=e===null?k3(t,null,r,n):ic(t,e.child,r,n)}function _2(e,t,r,n,a){r=r.render;var i=t.ref;return Yl(t,a),n=Kx(e,t,r,n,i,a),r=Yx(),e!==null&&!ka?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bo(e,t,a)):($r&&r&&Rx(t),t.flags|=1,da(e,t,n,a),t.child)}function C2(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!i1(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,K3(e,t,i,n,a)):(e=d0(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:tf,r(o,n)&&e.ref===t.ref)return bo(e,t,a)}return t.flags|=1,e=es(i,n),e.ref=t.ref,e.return=t,t.child=e}function K3(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(tf(i,n)&&e.ref===t.ref)if(ka=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(ka=!0);else return t.lanes=e.lanes,bo(e,t,a)}return xy(e,t,r,n,a)}function Y3(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(zl,$a),$a|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kr(zl,$a),$a|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,kr(zl,$a),$a|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,kr(zl,$a),$a|=n;return da(e,t,a,r),t.child}function q3(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xy(e,t,r,n,a){var i=_a(r)?Xs:aa.current;return i=nc(t,i),Yl(t,a),r=Kx(e,t,r,n,i,a),n=Yx(),e!==null&&!ka?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bo(e,t,a)):($r&&n&&Rx(t),t.flags|=1,da(e,t,r,a),t.child)}function P2(e,t,r,n,a){if(_a(r)){var i=!0;C0(t)}else i=!1;if(Yl(t,a),t.stateNode===null)c0(e,t),V3(t,r,n),yy(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ni(u):(u=_a(r)?Xs:aa.current,u=nc(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&w2(t,o,n,u),To=!1;var p=t.memoizedState;o.state=p,A0(t,n,o,a),l=t.memoizedState,s!==n||p!==l||ja.current||To?(typeof f=="function"&&(my(t,r,f,n),l=t.memoizedState),(s=To||b2(t,r,s,n,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,j3(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:mi(t.type,s),o.props=u,d=t.pendingProps,p=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ni(l):(l=_a(r)?Xs:aa.current,l=nc(t,l));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==l)&&w2(t,o,n,l),To=!1,p=t.memoizedState,o.state=p,A0(t,n,o,a);var b=t.memoizedState;s!==d||p!==b||ja.current||To?(typeof m=="function"&&(my(t,r,m,n),b=t.memoizedState),(u=To||b2(t,r,u,n,p,b,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return by(e,t,r,n,i,a)}function by(e,t,r,n,a,i){q3(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&d2(t,r,!1),bo(e,t,i);n=t.stateNode,IM.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ic(t,e.child,null,i),t.child=ic(t,null,s,i)):da(e,t,s,i),t.memoizedState=n.state,a&&d2(t,r,!0),t.child}function Z3(e){var t=e.stateNode;t.pendingContext?f2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&f2(e,t.context,!1),Wx(e,t.containerInfo)}function N2(e,t,r,n,a){return ac(),Lx(a),t.flags|=256,da(e,t,r,n),t.child}var wy={dehydrated:null,treeContext:null,retryLane:0};function ky(e){return{baseLanes:e,cachePool:null,transitions:null}}function Q3(e,t,r){var n=t.pendingProps,a=Lr.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),kr(Lr,a&1),e===null)return py(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lp(o,n,0,null),e=Gs(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ky(r),t.memoizedState=wy,e):Qx(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return LM(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=es(a,l),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=es(s,i):(i=Gs(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?ky(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=wy,n}return i=e.child,e=i.sibling,n=es(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Qx(e,t){return t=lp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ed(e,t,r,n){return n!==null&&Lx(n),ic(t,e.child,null,r),e=Qx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LM(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Vg(Error(ke(422))),Ed(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=lp({mode:"visible",children:n.children},a,0,null),i=Gs(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ic(t,e.child,null,o),t.child.memoizedState=ky(o),t.memoizedState=wy,i);if(!(t.mode&1))return Ed(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(ke(419)),n=Vg(i,n,void 0),Ed(e,t,o,n)}if(s=(o&e.childLanes)!==0,ka||s){if(n=$n,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,xo(e,a),_i(n,e,a,-1))}return a1(),n=Vg(Error(ke(421))),Ed(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=ZM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ia=qo(a.nextSibling),La=t,$r=!0,bi=null,e!==null&&(qa[Za++]=oo,qa[Za++]=so,qa[Za++]=Ks,oo=e.id,so=e.overflow,Ks=t),t=Qx(t,n.children),t.flags|=4096,t)}function O2(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gy(e.return,t,r)}function Hg(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function J3(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(da(e,t,n.children,r),n=Lr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&O2(e,r,t);else if(e.tag===19)O2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(kr(Lr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&T0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Hg(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&T0(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Hg(t,!0,r,null,i);break;case"together":Hg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function c0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,r=es(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=es(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function BM(e,t,r){switch(t.tag){case 3:Z3(t),ac();break;case 5:_3(t);break;case 1:_a(t.type)&&C0(t);break;case 4:Wx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;kr(O0,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(kr(Lr,Lr.current&1),t.flags|=128,null):r&t.child.childLanes?Q3(e,t,r):(kr(Lr,Lr.current&1),e=bo(e,t,r),e!==null?e.sibling:null);kr(Lr,Lr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return J3(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),kr(Lr,Lr.current),n)break;return null;case 22:case 23:return t.lanes=0,Y3(e,t,r)}return bo(e,t,r)}var ej,Sy,tj,rj;ej=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sy=function(){};tj=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Es(Fi.current);var i=null;switch(r){case"input":a=Vm(e,a),n=Vm(e,n),i=[];break;case"select":a=Fr({},a,{value:void 0}),n=Fr({},n,{value:void 0}),i=[];break;case"textarea":a=Km(e,a),n=Km(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=j0)}qm(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ku.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ku.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Nr("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};rj=function(e,t,r,n){r!==n&&(t.flags|=4)};function du(e,t){if(!$r)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function FM(e,t,r){var n=t.pendingProps;switch(Ix(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(t),null;case 1:return _a(t.type)&&_0(),Jn(t),null;case 3:return n=t.stateNode,oc(),Ar(ja),Ar(aa),Hx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ad(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bi!==null&&(Ay(bi),bi=null))),Sy(e,t),Jn(t),null;case 5:Vx(t);var a=Es(sf.current);if(r=t.type,e!==null&&t.stateNode!=null)tj(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ke(166));return Jn(t),null}if(e=Es(Fi.current),Ad(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ri]=t,n[af]=i,e=(t.mode&1)!==0,r){case"dialog":Nr("cancel",n),Nr("close",n);break;case"iframe":case"object":case"embed":Nr("load",n);break;case"video":case"audio":for(a=0;a<Ou.length;a++)Nr(Ou[a],n);break;case"source":Nr("error",n);break;case"img":case"image":case"link":Nr("error",n),Nr("load",n);break;case"details":Nr("toggle",n);break;case"input":Lb(n,i),Nr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Nr("invalid",n);break;case"textarea":Fb(n,i),Nr("invalid",n)}qm(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&Md(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Md(n.textContent,s,e),a=["children",""+s]):Ku.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Nr("scroll",n)}switch(r){case"input":kd(n),Bb(n,i,!0);break;case"textarea":kd(n),zb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=j0)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=M4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ri]=t,e[af]=n,ej(e,t,!1,!1),t.stateNode=e;e:{switch(o=Zm(r,n),r){case"dialog":Nr("cancel",e),Nr("close",e),a=n;break;case"iframe":case"object":case"embed":Nr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ou.length;a++)Nr(Ou[a],e);a=n;break;case"source":Nr("error",e),a=n;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=n;break;case"details":Nr("toggle",e),a=n;break;case"input":Lb(e,n),a=Vm(e,n),Nr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Fr({},n,{value:void 0}),Nr("invalid",e);break;case"textarea":Fb(e,n),a=Km(e,n),Nr("invalid",e);break;default:a=n}qm(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?E4(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&A4(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Yu(e,l):typeof l=="number"&&Yu(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ku.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Nr("scroll",e):l!=null&&kx(e,i,l,o))}switch(r){case"input":kd(e),Bb(e,n,!1);break;case"textarea":kd(e),zb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+is(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Vl(e,!!n.multiple,i,!1):n.defaultValue!=null&&Vl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=j0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jn(t),null;case 6:if(e&&t.stateNode!=null)rj(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ke(166));if(r=Es(sf.current),Es(Fi.current),Ad(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ri]=t,(i=n.nodeValue!==r)&&(e=La,e!==null))switch(e.tag){case 3:Md(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Md(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ri]=t,t.stateNode=n}return Jn(t),null;case 13:if(Ar(Lr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($r&&Ia!==null&&t.mode&1&&!(t.flags&128))b3(),ac(),t.flags|=98560,i=!1;else if(i=Ad(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ke(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ke(317));i[Ri]=t}else ac(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jn(t),i=!1}else bi!==null&&(Ay(bi),bi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Lr.current&1?kn===0&&(kn=3):a1())),t.updateQueue!==null&&(t.flags|=4),Jn(t),null);case 4:return oc(),Sy(e,t),e===null&&rf(t.stateNode.containerInfo),Jn(t),null;case 10:return zx(t.type._context),Jn(t),null;case 17:return _a(t.type)&&_0(),Jn(t),null;case 19:if(Ar(Lr),i=t.memoizedState,i===null)return Jn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)du(i,!1);else{if(kn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=T0(e),o!==null){for(t.flags|=128,du(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return kr(Lr,Lr.current&1|2),t.child}e=e.sibling}i.tail!==null&&an()>lc&&(t.flags|=128,n=!0,du(i,!1),t.lanes=4194304)}else{if(!n)if(e=T0(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),du(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$r)return Jn(t),null}else 2*an()-i.renderingStartTime>lc&&r!==1073741824&&(t.flags|=128,n=!0,du(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=an(),t.sibling=null,r=Lr.current,kr(Lr,n?r&1|2:r&1),t):(Jn(t),null);case 22:case 23:return n1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?$a&1073741824&&(Jn(t),t.subtreeFlags&6&&(t.flags|=8192)):Jn(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function zM(e,t){switch(Ix(t),t.tag){case 1:return _a(t.type)&&_0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oc(),Ar(ja),Ar(aa),Hx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vx(t),null;case 13:if(Ar(Lr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));ac()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ar(Lr),null;case 4:return oc(),null;case 10:return zx(t.type._context),null;case 22:case 23:return n1(),null;case 24:return null;default:return null}}var $d=!1,ra=!1,UM=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Fl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qr(e,t,n)}else r.current=null}function jy(e,t,r){try{r()}catch(n){qr(e,t,n)}}var M2=!1;function GM(e,t){if(sy=w0,e=s3(),Dx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var m;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===e)break t;if(p===r&&++u===a&&(s=o),p===i&&++f===n&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ly={focusedElem:e,selectionRange:r},w0=!1,Ue=t;Ue!==null;)if(t=Ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ue=e;else for(;Ue!==null;){t=Ue;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,w=b.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:mi(t.type,x),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(C){qr(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ue=e;break}Ue=t.return}return b=M2,M2=!1,b}function Iu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&jy(t,r,i)}a=a.next}while(a!==n)}}function op(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function _y(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nj(e){var t=e.alternate;t!==null&&(e.alternate=null,nj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ri],delete t[af],delete t[fy],delete t[_M],delete t[CM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aj(e){return e.tag===5||e.tag===3||e.tag===4}function A2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||aj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=j0));else if(n!==4&&(e=e.child,e!==null))for(Cy(e,t,r),e=e.sibling;e!==null;)Cy(e,t,r),e=e.sibling}function Py(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Py(e,t,r),e=e.sibling;e!==null;)Py(e,t,r),e=e.sibling}var Vn=null,yi=!1;function Oo(e,t,r){for(r=r.child;r!==null;)ij(e,t,r),r=r.sibling}function ij(e,t,r){if(Bi&&typeof Bi.onCommitFiberUnmount=="function")try{Bi.onCommitFiberUnmount(Qh,r)}catch{}switch(r.tag){case 5:ra||Fl(r,t);case 6:var n=Vn,a=yi;Vn=null,Oo(e,t,r),Vn=n,yi=a,Vn!==null&&(yi?(e=Vn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Vn.removeChild(r.stateNode));break;case 18:Vn!==null&&(yi?(e=Vn,r=r.stateNode,e.nodeType===8?Bg(e.parentNode,r):e.nodeType===1&&Bg(e,r),Ju(e)):Bg(Vn,r.stateNode));break;case 4:n=Vn,a=yi,Vn=r.stateNode.containerInfo,yi=!0,Oo(e,t,r),Vn=n,yi=a;break;case 0:case 11:case 14:case 15:if(!ra&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jy(r,t,o),a=a.next}while(a!==n)}Oo(e,t,r);break;case 1:if(!ra&&(Fl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){qr(r,t,s)}Oo(e,t,r);break;case 21:Oo(e,t,r);break;case 22:r.mode&1?(ra=(n=ra)||r.memoizedState!==null,Oo(e,t,r),ra=n):Oo(e,t,r);break;default:Oo(e,t,r)}}function T2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new UM),t.forEach(function(n){var a=QM.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function pi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Vn=s.stateNode,yi=!1;break e;case 3:Vn=s.stateNode.containerInfo,yi=!0;break e;case 4:Vn=s.stateNode.containerInfo,yi=!0;break e}s=s.return}if(Vn===null)throw Error(ke(160));ij(i,o,a),Vn=null,yi=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){qr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oj(t,e),t=t.sibling}function oj(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pi(t,e),$i(e),n&4){try{Iu(3,e,e.return),op(3,e)}catch(x){qr(e,e.return,x)}try{Iu(5,e,e.return)}catch(x){qr(e,e.return,x)}}break;case 1:pi(t,e),$i(e),n&512&&r!==null&&Fl(r,r.return);break;case 5:if(pi(t,e),$i(e),n&512&&r!==null&&Fl(r,r.return),e.flags&32){var a=e.stateNode;try{Yu(a,"")}catch(x){qr(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&N4(a,i),Zm(s,o);var u=Zm(s,i);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?E4(a,d):f==="dangerouslySetInnerHTML"?A4(a,d):f==="children"?Yu(a,d):kx(a,f,d,u)}switch(s){case"input":Hm(a,i);break;case"textarea":O4(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Vl(a,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Vl(a,!!i.multiple,i.defaultValue,!0):Vl(a,!!i.multiple,i.multiple?[]:"",!1))}a[af]=i}catch(x){qr(e,e.return,x)}}break;case 6:if(pi(t,e),$i(e),n&4){if(e.stateNode===null)throw Error(ke(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){qr(e,e.return,x)}}break;case 3:if(pi(t,e),$i(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ju(t.containerInfo)}catch(x){qr(e,e.return,x)}break;case 4:pi(t,e),$i(e);break;case 13:pi(t,e),$i(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(t1=an())),n&4&&T2(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(ra=(u=ra)||f,pi(t,e),ra=u):pi(t,e),$i(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Ue=e,f=e.child;f!==null;){for(d=Ue=f;Ue!==null;){switch(p=Ue,m=p.child,p.tag){case 0:case 11:case 14:case 15:Iu(4,p,p.return);break;case 1:Fl(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(x){qr(n,r,x)}}break;case 5:Fl(p,p.return);break;case 22:if(p.memoizedState!==null){$2(d);continue}}m!==null?(m.return=p,Ue=m):$2(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=T4("display",o))}catch(x){qr(e,e.return,x)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){qr(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pi(t,e),$i(e),n&4&&T2(e);break;case 21:break;default:pi(t,e),$i(e)}}function $i(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(aj(r)){var n=r;break e}r=r.return}throw Error(ke(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Yu(a,""),n.flags&=-33);var i=A2(e);Py(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=A2(e);Cy(e,s,o);break;default:throw Error(ke(161))}}catch(l){qr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function WM(e,t,r){Ue=e,sj(e)}function sj(e,t,r){for(var n=(e.mode&1)!==0;Ue!==null;){var a=Ue,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||$d;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||ra;s=$d;var u=ra;if($d=o,(ra=l)&&!u)for(Ue=a;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?D2(a):l!==null?(l.return=o,Ue=l):D2(a);for(;i!==null;)Ue=i,sj(i),i=i.sibling;Ue=a,$d=s,ra=u}E2(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ue=i):E2(e)}}function E2(e){for(;Ue!==null;){var t=Ue;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ra||op(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ra)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:mi(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&y2(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}y2(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ju(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}ra||t.flags&512&&_y(t)}catch(p){qr(t,t.return,p)}}if(t===e){Ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ue=r;break}Ue=t.return}}function $2(e){for(;Ue!==null;){var t=Ue;if(t===e){Ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ue=r;break}Ue=t.return}}function D2(e){for(;Ue!==null;){var t=Ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{op(4,t)}catch(l){qr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){qr(t,a,l)}}var i=t.return;try{_y(t)}catch(l){qr(t,i,l)}break;case 5:var o=t.return;try{_y(t)}catch(l){qr(t,o,l)}}}catch(l){qr(t,t.return,l)}if(t===e){Ue=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ue=s;break}Ue=t.return}}var VM=Math.ceil,D0=jo.ReactCurrentDispatcher,Jx=jo.ReactCurrentOwner,ti=jo.ReactCurrentBatchConfig,Xt=0,$n=null,gn=null,Kn=0,$a=0,zl=ls(0),kn=0,ff=null,qs=0,sp=0,e1=0,Lu=null,ba=null,t1=0,lc=1/0,ao=null,R0=!1,Ny=null,Qo=null,Dd=!1,Lo=null,I0=0,Bu=0,Oy=null,u0=-1,f0=0;function pa(){return Xt&6?an():u0!==-1?u0:u0=an()}function Jo(e){return e.mode&1?Xt&2&&Kn!==0?Kn&-Kn:NM.transition!==null?(f0===0&&(f0=V4()),f0):(e=or,e!==0||(e=window.event,e=e===void 0?16:Q4(e.type)),e):1}function _i(e,t,r,n){if(50<Bu)throw Bu=0,Oy=null,Error(ke(185));Zf(e,r,n),(!(Xt&2)||e!==$n)&&(e===$n&&(!(Xt&2)&&(sp|=r),kn===4&&Do(e,Kn)),Ca(e,n),r===1&&Xt===0&&!(t.mode&1)&&(lc=an()+500,np&&cs()))}function Ca(e,t){var r=e.callbackNode;NO(e,t);var n=b0(e,e===$n?Kn:0);if(n===0)r!==null&&Wb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Wb(r),t===1)e.tag===0?PM(R2.bind(null,e)):y3(R2.bind(null,e)),SM(function(){!(Xt&6)&&cs()}),r=null;else{switch(H4(n)){case 1:r=Px;break;case 4:r=G4;break;case 16:r=x0;break;case 536870912:r=W4;break;default:r=x0}r=gj(r,lj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function lj(e,t){if(u0=-1,f0=0,Xt&6)throw Error(ke(327));var r=e.callbackNode;if(ql()&&e.callbackNode!==r)return null;var n=b0(e,e===$n?Kn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=L0(e,n);else{t=n;var a=Xt;Xt|=2;var i=uj();($n!==e||Kn!==t)&&(ao=null,lc=an()+500,Us(e,t));do try{KM();break}catch(s){cj(e,s)}while(!0);Fx(),D0.current=i,Xt=a,gn!==null?t=0:($n=null,Kn=0,t=kn)}if(t!==0){if(t===2&&(a=ry(e),a!==0&&(n=a,t=My(e,a))),t===1)throw r=ff,Us(e,0),Do(e,n),Ca(e,an()),r;if(t===6)Do(e,n);else{if(a=e.current.alternate,!(n&30)&&!HM(a)&&(t=L0(e,n),t===2&&(i=ry(e),i!==0&&(n=i,t=My(e,i))),t===1))throw r=ff,Us(e,0),Do(e,n),Ca(e,an()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ke(345));case 2:Ps(e,ba,ao);break;case 3:if(Do(e,n),(n&130023424)===n&&(t=t1+500-an(),10<t)){if(b0(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){pa(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=uy(Ps.bind(null,e,ba,ao),t);break}Ps(e,ba,ao);break;case 4:if(Do(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-ji(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=an()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*VM(n/1960))-n,10<n){e.timeoutHandle=uy(Ps.bind(null,e,ba,ao),n);break}Ps(e,ba,ao);break;case 5:Ps(e,ba,ao);break;default:throw Error(ke(329))}}}return Ca(e,an()),e.callbackNode===r?lj.bind(null,e):null}function My(e,t){var r=Lu;return e.current.memoizedState.isDehydrated&&(Us(e,t).flags|=256),e=L0(e,t),e!==2&&(t=ba,ba=r,t!==null&&Ay(t)),e}function Ay(e){ba===null?ba=e:ba.push.apply(ba,e)}function HM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ci(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Do(e,t){for(t&=~e1,t&=~sp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ji(t),n=1<<r;e[r]=-1,t&=~n}}function R2(e){if(Xt&6)throw Error(ke(327));ql();var t=b0(e,0);if(!(t&1))return Ca(e,an()),null;var r=L0(e,t);if(e.tag!==0&&r===2){var n=ry(e);n!==0&&(t=n,r=My(e,n))}if(r===1)throw r=ff,Us(e,0),Do(e,t),Ca(e,an()),r;if(r===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e,ba,ao),Ca(e,an()),null}function r1(e,t){var r=Xt;Xt|=1;try{return e(t)}finally{Xt=r,Xt===0&&(lc=an()+500,np&&cs())}}function Zs(e){Lo!==null&&Lo.tag===0&&!(Xt&6)&&ql();var t=Xt;Xt|=1;var r=ti.transition,n=or;try{if(ti.transition=null,or=1,e)return e()}finally{or=n,ti.transition=r,Xt=t,!(Xt&6)&&cs()}}function n1(){$a=zl.current,Ar(zl)}function Us(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,kM(r)),gn!==null)for(r=gn.return;r!==null;){var n=r;switch(Ix(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_0();break;case 3:oc(),Ar(ja),Ar(aa),Hx();break;case 5:Vx(n);break;case 4:oc();break;case 13:Ar(Lr);break;case 19:Ar(Lr);break;case 10:zx(n.type._context);break;case 22:case 23:n1()}r=r.return}if($n=e,gn=e=es(e.current,null),Kn=$a=t,kn=0,ff=null,e1=sp=qs=0,ba=Lu=null,Ts!==null){for(t=0;t<Ts.length;t++)if(r=Ts[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ts=null}return e}function cj(e,t){do{var r=gn;try{if(Fx(),s0.current=$0,E0){for(var n=Br.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}E0=!1}if(Ys=0,Tn=wn=Br=null,Ru=!1,lf=0,Jx.current=null,r===null||r.return===null){kn=1,ff=t,gn=null;break}e:{var i=e,o=r.return,s=r,l=t;if(t=Kn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=S2(o);if(m!==null){m.flags&=-257,j2(m,o,s,i,t),m.mode&1&&k2(i,u,t),t=m,l=u;var b=t.updateQueue;if(b===null){var x=new Set;x.add(l),t.updateQueue=x}else b.add(l);break e}else{if(!(t&1)){k2(i,u,t),a1();break e}l=Error(ke(426))}}else if($r&&s.mode&1){var w=S2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),j2(w,o,s,i,t),Lx(sc(l,s));break e}}i=l=sc(l,s),kn!==4&&(kn=2),Lu===null?Lu=[i]:Lu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=H3(i,l,t);m2(i,v);break e;case 1:s=l;var y=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Qo===null||!Qo.has(k)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=X3(i,s,t);m2(i,C);break e}}i=i.return}while(i!==null)}dj(r)}catch(j){t=j,gn===r&&r!==null&&(gn=r=r.return);continue}break}while(!0)}function uj(){var e=D0.current;return D0.current=$0,e===null?$0:e}function a1(){(kn===0||kn===3||kn===2)&&(kn=4),$n===null||!(qs&268435455)&&!(sp&268435455)||Do($n,Kn)}function L0(e,t){var r=Xt;Xt|=2;var n=uj();($n!==e||Kn!==t)&&(ao=null,Us(e,t));do try{XM();break}catch(a){cj(e,a)}while(!0);if(Fx(),Xt=r,D0.current=n,gn!==null)throw Error(ke(261));return $n=null,Kn=0,kn}function XM(){for(;gn!==null;)fj(gn)}function KM(){for(;gn!==null&&!xO();)fj(gn)}function fj(e){var t=pj(e.alternate,e,$a);e.memoizedProps=e.pendingProps,t===null?dj(e):gn=t,Jx.current=null}function dj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zM(r,t),r!==null){r.flags&=32767,gn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kn=6,gn=null;return}}else if(r=FM(r,t,$a),r!==null){gn=r;return}if(t=t.sibling,t!==null){gn=t;return}gn=t=e}while(t!==null);kn===0&&(kn=5)}function Ps(e,t,r){var n=or,a=ti.transition;try{ti.transition=null,or=1,YM(e,t,r,n)}finally{ti.transition=a,or=n}return null}function YM(e,t,r,n){do ql();while(Lo!==null);if(Xt&6)throw Error(ke(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(OO(e,i),e===$n&&(gn=$n=null,Kn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Dd||(Dd=!0,gj(x0,function(){return ql(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ti.transition,ti.transition=null;var o=or;or=1;var s=Xt;Xt|=4,Jx.current=null,GM(e,r),oj(r,e),gM(ly),w0=!!sy,ly=sy=null,e.current=r,WM(r),bO(),Xt=s,or=o,ti.transition=i}else e.current=r;if(Dd&&(Dd=!1,Lo=e,I0=a),i=e.pendingLanes,i===0&&(Qo=null),SO(r.stateNode),Ca(e,an()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(R0)throw R0=!1,e=Ny,Ny=null,e;return I0&1&&e.tag!==0&&ql(),i=e.pendingLanes,i&1?e===Oy?Bu++:(Bu=0,Oy=e):Bu=0,cs(),null}function ql(){if(Lo!==null){var e=H4(I0),t=ti.transition,r=or;try{if(ti.transition=null,or=16>e?16:e,Lo===null)var n=!1;else{if(e=Lo,Lo=null,I0=0,Xt&6)throw Error(ke(331));var a=Xt;for(Xt|=4,Ue=e.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ue=u;Ue!==null;){var f=Ue;switch(f.tag){case 0:case 11:case 15:Iu(8,f,i)}var d=f.child;if(d!==null)d.return=f,Ue=d;else for(;Ue!==null;){f=Ue;var p=f.sibling,m=f.return;if(nj(f),f===u){Ue=null;break}if(p!==null){p.return=m,Ue=p;break}Ue=m}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Iu(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ue=v;break e}Ue=i.return}}var y=e.current;for(Ue=y;Ue!==null;){o=Ue;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Ue=k;else e:for(o=y;Ue!==null;){if(s=Ue,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:op(9,s)}}catch(j){qr(s,s.return,j)}if(s===o){Ue=null;break e}var C=s.sibling;if(C!==null){C.return=s.return,Ue=C;break e}Ue=s.return}}if(Xt=a,cs(),Bi&&typeof Bi.onPostCommitFiberRoot=="function")try{Bi.onPostCommitFiberRoot(Qh,e)}catch{}n=!0}return n}finally{or=r,ti.transition=t}}return!1}function I2(e,t,r){t=sc(r,t),t=H3(e,t,1),e=Zo(e,t,1),t=pa(),e!==null&&(Zf(e,1,t),Ca(e,t))}function qr(e,t,r){if(e.tag===3)I2(e,e,r);else for(;t!==null;){if(t.tag===3){I2(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qo===null||!Qo.has(n))){e=sc(r,e),e=X3(t,e,1),t=Zo(t,e,1),e=pa(),t!==null&&(Zf(t,1,e),Ca(t,e));break}}t=t.return}}function qM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=pa(),e.pingedLanes|=e.suspendedLanes&r,$n===e&&(Kn&r)===r&&(kn===4||kn===3&&(Kn&130023424)===Kn&&500>an()-t1?Us(e,0):e1|=r),Ca(e,t)}function hj(e,t){t===0&&(e.mode&1?(t=_d,_d<<=1,!(_d&130023424)&&(_d=4194304)):t=1);var r=pa();e=xo(e,t),e!==null&&(Zf(e,t,r),Ca(e,r))}function ZM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),hj(e,r)}function QM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ke(314))}n!==null&&n.delete(t),hj(e,r)}var pj;pj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ja.current)ka=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ka=!1,BM(e,t,r);ka=!!(e.flags&131072)}else ka=!1,$r&&t.flags&1048576&&v3(t,N0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;c0(e,t),e=t.pendingProps;var a=nc(t,aa.current);Yl(t,r),a=Kx(null,t,n,e,a,r);var i=Yx();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_a(n)?(i=!0,C0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Gx(t),a.updater=ip,t.stateNode=a,a._reactInternals=t,yy(t,n,e,r),t=by(null,t,n,!0,i,r)):(t.tag=0,$r&&i&&Rx(t),da(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(c0(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=eA(n),e=mi(n,e),a){case 0:t=xy(null,t,n,e,r);break e;case 1:t=P2(null,t,n,e,r);break e;case 11:t=_2(null,t,n,e,r);break e;case 14:t=C2(null,t,n,mi(n.type,e),r);break e}throw Error(ke(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mi(n,a),xy(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mi(n,a),P2(e,t,n,a,r);case 3:e:{if(Z3(t),e===null)throw Error(ke(387));n=t.pendingProps,i=t.memoizedState,a=i.element,j3(e,t),A0(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=sc(Error(ke(423)),t),t=N2(e,t,n,r,a);break e}else if(n!==a){a=sc(Error(ke(424)),t),t=N2(e,t,n,r,a);break e}else for(Ia=qo(t.stateNode.containerInfo.firstChild),La=t,$r=!0,bi=null,r=k3(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ac(),n===a){t=bo(e,t,r);break e}da(e,t,n,r)}t=t.child}return t;case 5:return _3(t),e===null&&py(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,cy(n,a)?o=null:i!==null&&cy(n,i)&&(t.flags|=32),q3(e,t),da(e,t,o,r),t.child;case 6:return e===null&&py(t),null;case 13:return Q3(e,t,r);case 4:return Wx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ic(t,null,n,r):da(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mi(n,a),_2(e,t,n,a,r);case 7:return da(e,t,t.pendingProps,r),t.child;case 8:return da(e,t,t.pendingProps.children,r),t.child;case 12:return da(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,kr(O0,n._currentValue),n._currentValue=o,i!==null)if(Ci(i.value,o)){if(i.children===a.children&&!ja.current){t=bo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=fo(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),gy(i.return,r,t),s.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ke(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),gy(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}da(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Yl(t,r),a=ni(a),n=n(a),t.flags|=1,da(e,t,n,r),t.child;case 14:return n=t.type,a=mi(n,t.pendingProps),a=mi(n.type,a),C2(e,t,n,a,r);case 15:return K3(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:mi(n,a),c0(e,t),t.tag=1,_a(n)?(e=!0,C0(t)):e=!1,Yl(t,r),V3(t,n,a),yy(t,n,a,r),by(null,t,n,!0,e,r);case 19:return J3(e,t,r);case 22:return Y3(e,t,r)}throw Error(ke(156,t.tag))};function gj(e,t){return U4(e,t)}function JM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,r,n){return new JM(e,t,r,n)}function i1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function eA(e){if(typeof e=="function")return i1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jx)return 11;if(e===_x)return 14}return 2}function es(e,t){var r=e.alternate;return r===null?(r=Qa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function d0(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")i1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Al:return Gs(r.children,a,i,t);case Sx:o=8,a|=8;break;case zm:return e=Qa(12,r,t,a|2),e.elementType=zm,e.lanes=i,e;case Um:return e=Qa(13,r,t,a),e.elementType=Um,e.lanes=i,e;case Gm:return e=Qa(19,r,t,a),e.elementType=Gm,e.lanes=i,e;case _4:return lp(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case S4:o=10;break e;case j4:o=9;break e;case jx:o=11;break e;case _x:o=14;break e;case Ao:o=16,n=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Qa(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Gs(e,t,r,n){return e=Qa(7,e,n,t),e.lanes=r,e}function lp(e,t,r,n){return e=Qa(22,e,n,t),e.elementType=_4,e.lanes=r,e.stateNode={isHidden:!1},e}function Xg(e,t,r){return e=Qa(6,e,null,t),e.lanes=r,e}function Kg(e,t,r){return t=Qa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tA(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ng(0),this.expirationTimes=Ng(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ng(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function o1(e,t,r,n,a,i,o,s,l){return e=new tA(e,t,r,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gx(i),e}function rA(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ml,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function mj(e){if(!e)return os;e=e._reactInternals;e:{if(ul(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_a(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var r=e.type;if(_a(r))return m3(e,r,t)}return t}function yj(e,t,r,n,a,i,o,s,l){return e=o1(r,n,!0,e,a,i,o,s,l),e.context=mj(null),r=e.current,n=pa(),a=Jo(r),i=fo(n,a),i.callback=t??null,Zo(r,i,a),e.current.lanes=a,Zf(e,a,n),Ca(e,n),e}function cp(e,t,r,n){var a=t.current,i=pa(),o=Jo(a);return r=mj(r),t.context===null?t.context=r:t.pendingContext=r,t=fo(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Zo(a,t,o),e!==null&&(_i(e,a,o,i),o0(e,a,o)),o}function B0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function L2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function s1(e,t){L2(e,t),(e=e.alternate)&&L2(e,t)}function nA(){return null}var vj=typeof reportError=="function"?reportError:function(e){console.error(e)};function l1(e){this._internalRoot=e}up.prototype.render=l1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));cp(e,t,null,null)};up.prototype.unmount=l1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zs(function(){cp(null,e,null,null)}),t[vo]=null}};function up(e){this._internalRoot=e}up.prototype.unstable_scheduleHydration=function(e){if(e){var t=Y4();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$o.length&&t!==0&&t<$o[r].priority;r++);$o.splice(r,0,e),r===0&&Z4(e)}};function c1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function B2(){}function aA(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=B0(o);i.call(u)}}var o=yj(t,n,e,0,null,!1,!1,"",B2);return e._reactRootContainer=o,e[vo]=o.current,rf(e.nodeType===8?e.parentNode:e),Zs(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=B0(l);s.call(u)}}var l=o1(e,0,!1,null,null,!1,!1,"",B2);return e._reactRootContainer=l,e[vo]=l.current,rf(e.nodeType===8?e.parentNode:e),Zs(function(){cp(t,l,r,n)}),l}function dp(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=B0(o);s.call(l)}}cp(t,o,e,a)}else o=aA(r,t,e,a,n);return B0(o)}X4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Nu(t.pendingLanes);r!==0&&(Nx(t,r|1),Ca(t,an()),!(Xt&6)&&(lc=an()+500,cs()))}break;case 13:Zs(function(){var n=xo(e,1);if(n!==null){var a=pa();_i(n,e,1,a)}}),s1(e,1)}};Ox=function(e){if(e.tag===13){var t=xo(e,134217728);if(t!==null){var r=pa();_i(t,e,134217728,r)}s1(e,134217728)}};K4=function(e){if(e.tag===13){var t=Jo(e),r=xo(e,t);if(r!==null){var n=pa();_i(r,e,t,n)}s1(e,t)}};Y4=function(){return or};q4=function(e,t){var r=or;try{return or=e,t()}finally{or=r}};Jm=function(e,t,r){switch(t){case"input":if(Hm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=rp(n);if(!a)throw Error(ke(90));P4(n),Hm(n,a)}}}break;case"textarea":O4(e,r);break;case"select":t=r.value,t!=null&&Vl(e,!!r.multiple,t,!1)}};R4=r1;I4=Zs;var iA={usingClientEntryPoint:!1,Events:[Jf,Dl,rp,$4,D4,r1]},hu={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oA={bundleType:hu.bundleType,version:hu.version,rendererPackageName:hu.rendererPackageName,rendererConfig:hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=F4(e),e===null?null:e.stateNode},findFiberByHostInstance:hu.findFiberByHostInstance||nA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{Qh=Rd.inject(oA),Bi=Rd}catch{}}Fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;Fa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c1(t))throw Error(ke(200));return rA(e,t,null,r)};Fa.createRoot=function(e,t){if(!c1(e))throw Error(ke(299));var r=!1,n="",a=vj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=o1(e,1,!1,null,null,r,!1,n,a),e[vo]=t.current,rf(e.nodeType===8?e.parentNode:e),new l1(t)};Fa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=F4(t),e=e===null?null:e.stateNode,e};Fa.flushSync=function(e){return Zs(e)};Fa.hydrate=function(e,t,r){if(!fp(t))throw Error(ke(200));return dp(null,e,t,!0,r)};Fa.hydrateRoot=function(e,t,r){if(!c1(e))throw Error(ke(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=vj;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=yj(t,null,e,1,r??null,a,!1,i,o),e[vo]=t.current,rf(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new up(t)};Fa.render=function(e,t,r){if(!fp(t))throw Error(ke(200));return dp(null,e,t,!1,r)};Fa.unmountComponentAtNode=function(e){if(!fp(e))throw Error(ke(40));return e._reactRootContainer?(Zs(function(){dp(null,null,e,!1,function(){e._reactRootContainer=null,e[vo]=null})}),!0):!1};Fa.unstable_batchedUpdates=r1;Fa.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!fp(r))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return dp(e,t,r,!1,n)};Fa.version="18.3.1-next-f1338f8080-20240426";function xj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xj)}catch(e){console.error(e)}}xj(),x4.exports=Fa;var sA=x4.exports,F2=sA;Bm.createRoot=F2.createRoot,Bm.hydrateRoot=F2.hydrateRoot;const ts=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[c.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,lA=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:l,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:p,onOpenAbout:m,onShowExif:b,bridgeStatus:x,onBridgeClick:w,isDrLabOpen:v,onToggleDrLab:y,isColorLabOpen:k,onToggleColorLab:C,isFftLabOpen:j,onToggleFftLab:S,isSfrLabOpen:N,onToggleSfrLab:M,onGenerateTestPic:E,onPTCFilesSelected:R,onDownloadDng:T,isThreePlane:D,onOpenDatabase:B,isSidebarOpen:G,onToggleSidebar:z})=>{const F=P.useRef(null),I=P.useRef(null),[L,W]=P.useState(!1),[K,ae]=P.useState(!1),[re,Q]=P.useState(!1),[le,Ne]=P.useState("direct"),ie=P.useRef(null),ge=P.useRef(null);P.useEffect(()=>{const ee=Oe=>{ie.current&&!ie.current.contains(Oe.target)&&ae(!1),ge.current&&!ge.current.contains(Oe.target)&&Q(!1)};return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[]);const ne=ee=>{var Oe,Te;ae(!1),ee==="direct"?(Ne("direct"),(Oe=F.current)==null||Oe.click()):!x.isConnected||!x.hasDngConverter?W(!0):(Ne("convert"),(Te=F.current)==null||Te.click())},H=ee=>{var Te;const Oe=(Te=ee.target.files)==null?void 0:Te[0];Oe&&e(Oe,le),ee.target.value=""},ue=ee=>{ee.target.files&&ee.target.files.length>0&&R(ee.target.files),ee.target.value=""},ve=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return c.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[c.jsx(ts,{isOpen:L,onClose:()=>W(!1),onConfirm:()=>W(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),D&&c.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:x.isConnected?void 0:w,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${x.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:x.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[c.jsx("span",{className:`w-2 h-2 ${x.isConnected?"bg-emerald-600":"bg-pink-600"}`}),x.isConnected?`JiangBridge Ready ${x.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),v&&c.jsxs("button",{onClick:y,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),k&&c.jsxs("button",{onClick:C,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),j&&c.jsxs("button",{onClick:S,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),N&&c.jsxs("button",{onClick:M,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&c.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[c.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),c.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),c.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),ve&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[p&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:ee=>s(parseFloat(ee.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:ee=>{const Oe=parseFloat(ee.target.value);isNaN(Oe)||s(Oe)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:ee=>d(parseFloat(ee.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:ee=>{const Oe=parseFloat(ee.target.value);isNaN(Oe)||d(Oe)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:l*100,onChange:ee=>u(parseInt(ee.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(l*100),onChange:ee=>{const Oe=parseInt(ee.target.value);isNaN(Oe)||u(Math.min(100,Math.max(1,Oe))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),c.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),c.jsxs("button",{onClick:T,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[c.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),c.jsx("input",{type:"file",ref:F,onChange:H,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("input",{type:"file",ref:I,onChange:ue,className:"hidden",multiple:!0,accept:".csv"}),c.jsxs("div",{className:"relative inline-block text-left",ref:ge,children:[c.jsxs("button",{onClick:()=>Q(!re),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${re?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),re&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{Q(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:"Generate Pattern DNG"})]}),c.jsxs("button",{onClick:()=>{Q(!1),v||y(),j&&S(),k&&C&&C(),N&&M&&M()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsxs("span",{children:["DR Lab ",v?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{Q(!1),C&&!k&&C(),v&&y(),j&&S(),N&&M&&M()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${k?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:["Color Lab ",k?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{Q(!1),M&&!N&&M(),v&&y(),j&&S(),k&&C&&C()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${N?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsxs("span",{children:["SFR Lab ",N?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{Q(!1),j||S(),v&&y(),k&&C&&C(),N&&M&&M()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${j?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsxs("span",{children:["Stack Lab ",j?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{var ee;Q(!1),(ee=I.current)==null||ee.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),c.jsx("span",{children:"Generate PTC & TargetSNR"})]}),c.jsxs("button",{onClick:()=>{Q(!1),window.open("https://y-g-jiang.github.io/CP.html","_blank")},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-teal-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("span",{children:"Generate MTF Contour"})]})]})})]}),c.jsxs("div",{className:"relative inline-block text-left",ref:ie,children:[c.jsxs("button",{onClick:()=>ae(!K),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${K?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),K&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>ne("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.jsx("span",{children:"Load Image (Direct)"})]}),c.jsxs("button",{onClick:()=>ne("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&b&&c.jsxs("button",{onClick:b,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),c.jsx("button",{onClick:m,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),c.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),c.jsxs("button",{onClick:z,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${G?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:G?"Hide Control Panel":"Show Control Panel",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:G?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),c.jsx("span",{className:"hidden sm:inline",children:G?"Hide Panel":"Show Panel"})]})]})]})},cA=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:l="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:p=[],colorLabPoints:m=[],colorLabRects:b=[],sfrRects:x=[]})=>{var ie;const w=P.useRef(null),v=P.useRef(document.createElement("canvas")),[y,k]=P.useState(!1),[C,j]=P.useState({x:0,y:0}),S=P.useRef(null),N=P.useRef(null),M=P.useRef(null),[E,R]=P.useState(!1),[T,D]=P.useState(null),[B,G]=P.useState(null);P.useEffect(()=>{o!==void 0&&G(o)},[o]);const z=P.useCallback(()=>{const ge=w.current,ne=ge==null?void 0:ge.getContext("2d");return{canvas:ge,ctx:ne}},[]);P.useEffect(()=>{const ge=v.current,ne=ge.getContext("2d");if(!e||!ne)return;let H=0,ue=0;e instanceof ImageData?(H=e.width,ue=e.height):e instanceof HTMLImageElement&&(H=e.naturalWidth,ue=e.naturalHeight),!(H===0||ue===0)&&((ge.width!==H||ge.height!==ue)&&(ge.width=H,ge.height=ue),e instanceof ImageData?ne.putImageData(e,0,0):(ne.clearRect(0,0,H,ue),ne.drawImage(e,0,0)))},[e]);const F=P.useCallback(()=>{const{canvas:ge,ctx:ne}=z();if(!(!ge||!ne||!e)){if(ne.setTransform(1,0,0,1,0,0),ne.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",ne.fillRect(0,0,ge.width,ge.height),ne.setTransform(t,0,0,t,r.x,r.y),v.current.width>0&&(ne.imageSmoothingEnabled=!1,ne.drawImage(v.current,0,0)),B){ne.strokeStyle="#06b6d4",ne.lineWidth=1/t,ne.fillStyle="rgba(6, 182, 212, 0.2)",ne.beginPath(),ne.rect(B.x,B.y,B.w,B.h),ne.fill(),ne.stroke(),ne.save(),ne.fillStyle="#fff";const H=Math.max(10,14/t);ne.font=`${H}px monospace`,ne.shadowColor="rgba(0,0,0,0.8)",ne.shadowBlur=4,ne.shadowOffsetX=1,ne.shadowOffsetY=1,ne.fillText(`${Math.round(B.w)}x${Math.round(B.h)}`,B.x,B.y-5/t),ne.restore()}if(p&&p.length>0){ne.save(),ne.strokeStyle="#f59e0b",ne.lineWidth=1/t,ne.globalAlpha=.8,ne.beginPath(),p.forEach(ve=>{ne.rect(ve.x,ve.y,ve.w,ve.h)}),ne.stroke();const H=p[0];ne.fillStyle="#f59e0b";const ue=Math.max(10,12/t);ne.font=`${ue}px monospace`,ne.fillText(`${Math.round(H.w)}x${Math.round(H.h)}`,H.x,H.y-4/t),ne.restore()}if(d&&d.length>0){ne.save();const H=6/t,ue=Math.max(12,16/t);ne.font=`bold ${ue}px sans-serif`,ne.textAlign="center",ne.textBaseline="middle",d.forEach((ve,ee)=>{ne.beginPath(),ne.arc(ve.x,ve.y,H,0,2*Math.PI),ne.fillStyle="white",ne.fill(),ne.strokeStyle="#4338ca",ne.lineWidth=2/t,ne.stroke(),ne.fillStyle="#4338ca",ne.fillText((ee+1).toString(),ve.x,ve.y-12/t)}),ne.restore()}if(m&&m.length>0){ne.save();const H=5/t,ue=Math.max(10,14/t);ne.font=`bold ${ue}px sans-serif`,ne.textAlign="center",ne.textBaseline="middle",m.forEach((ve,ee)=>{ne.fillStyle="yellow",ne.fillRect(ve.x-H,ve.y-H,H*2,H*2),ne.strokeStyle="black",ne.lineWidth=1/t,ne.strokeRect(ve.x-H,ve.y-H,H*2,H*2),ne.fillStyle="yellow",ne.shadowColor="black",ne.shadowBlur=2,ne.fillText((ee+1).toString(),ve.x,ve.y-10/t)}),ne.restore()}if(b&&b.length>0){if(ne.save(),ne.strokeStyle="yellow",ne.lineWidth=1/t,ne.globalAlpha=.9,ne.beginPath(),b.forEach(H=>{ne.rect(H.x,H.y,H.w,H.h)}),ne.stroke(),b[0]){const H=b[0];ne.fillStyle="yellow",ne.shadowColor="black",ne.shadowBlur=3;const ue=Math.max(10,12/t);ne.font=`${ue}px monospace`,ne.fillText(`${Math.round(H.w)}x${Math.round(H.h)}`,H.x,H.y-4/t)}ne.restore()}x&&x.length>0&&(ne.save(),ne.strokeStyle="#ef4444",ne.lineWidth=2/t,ne.globalAlpha=.9,ne.beginPath(),x.forEach(H=>{ne.rect(H.x,H.y,H.w,H.h)}),ne.stroke(),ne.restore())}},[z,e,t,r,s,B,p,d,m,b,x]);P.useEffect(()=>{const{canvas:ge}=z();if(!ge)return;const ne=new ResizeObserver(()=>{ge.width=ge.clientWidth,ge.height=ge.clientHeight,F()});return ne.observe(ge),()=>ne.disconnect()},[z,F]),P.useEffect(()=>{F()},[F,e,r,t,s,B,p,d,m,b,x]);const I=ge=>{const{canvas:ne}=z();if(!ne)return{x:0,y:0};const H=ne.getBoundingClientRect();return{x:ge.clientX-H.left,y:ge.clientY-H.top}},L=(ge,ne)=>({x:(ge-r.x)/t,y:(ne-r.y)/t}),W=ge=>{ge.preventDefault();const ne=I(ge);if(u&&f){const H=L(ne.x,ne.y);f(H);return}if(l==="select"||ge.shiftKey){R(!0);const H=L(ne.x,ne.y),ue={x:Math.floor(H.x),y:Math.floor(H.y)};D(ue),G(null),i&&i(null)}else k(!0),j({x:ne.x-r.x,y:ne.y-r.y})},K=ge=>{const ne=I(ge);if(E&&T){const H=L(ne.x,ne.y),ue=Math.floor(H.x),ve=Math.floor(H.y),ee=Math.min(T.x,ue),Oe=Math.min(T.y,ve),Te=Math.max(T.x,ue),pe=Math.max(T.y,ve),Me=Te-ee+1,Se=pe-Oe+1;G({x:ee,y:Oe,w:Me,h:Se})}else y&&n({x:ne.x-C.x,y:ne.y-C.y})},ae=()=>{E&&(R(!1),B&&i&&B.w>0&&B.h>0&&i(B)),k(!1)},re=ge=>{var ne;if(ge.touches.length===1){const H=ge.touches[0],ue=(ne=w.current)==null?void 0:ne.getBoundingClientRect();if(!ue)return;const ve=H.clientX-ue.left,ee=H.clientY-ue.top;if(u&&f){const Oe=L(ve,ee);f(Oe);return}if(l==="select"){const Oe=L(ve,ee),Te={x:Math.floor(Oe.x),y:Math.floor(Oe.y)};D(Te),R(!0),G(null),i&&i(null)}else M.current={x:ve,y:ee},j({x:ve-r.x,y:ee-r.y}),k(!0)}else if(ge.touches.length===2){const H=Math.hypot(ge.touches[0].clientX-ge.touches[1].clientX,ge.touches[0].clientY-ge.touches[1].clientY);S.current=H,N.current=t,k(!1),R(!1)}},Q=ge=>{var ne;if(ge.touches.length===1){const H=ge.touches[0],ue=(ne=w.current)==null?void 0:ne.getBoundingClientRect();if(!ue)return;const ve=H.clientX-ue.left,ee=H.clientY-ue.top;if(u)return;if(E&&T){const Oe=L(ve,ee),Te=Math.floor(Oe.x),pe=Math.floor(Oe.y),Me=Math.min(T.x,Te),Se=Math.min(T.y,pe),me=Math.max(T.x,Te),Ae=Math.max(T.y,pe),Re=me-Me+1,Xe=Ae-Se+1;G({x:Me,y:Se,w:Re,h:Xe})}else y&&n({x:ve-C.x,y:ee-C.y})}else if(ge.touches.length===2&&S.current&&N.current&&a){const ue=Math.hypot(ge.touches[0].clientX-ge.touches[1].clientX,ge.touches[0].clientY-ge.touches[1].clientY)/S.current;a(N.current*ue)}},le=()=>{E&&(R(!1),B&&i&&B.w>0&&B.h>0&&i(B)),k(!1),S.current=null,N.current=null,M.current=null},Ne=u||l==="select"||(ie=window.event)!=null&&ie.shiftKey?"cursor-crosshair":"cursor-grab active:cursor-grabbing";return c.jsx("canvas",{ref:w,className:`w-full h-full block touch-none ${Ne}`,onMouseDown:W,onMouseMove:K,onMouseUp:ae,onMouseLeave:ae,onTouchStart:re,onTouchMove:Q,onTouchEnd:le,onTouchCancel:le,tabIndex:0})},cc={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},uA="modulepreload",fA=function(e){return"/"+e},z2={},bj=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=fA(l),l in z2)return;z2[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":uA,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function df(e){const[[t,r,n],[a,i,o],[s,l,u]]=e,f=t*(i*u-o*l)-r*(a*u-o*s)+n*(a*l-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*l)*d,(n*l-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*l-i*s)*d,(r*s-t*l)*d,(t*i-r*a)*d]]}function F0(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class Qs{constructor(t){Pr(this,"size");Pr(this,"isPowerOfTwo");Pr(this,"_real");Pr(this,"_imag");Pr(this,"_scratch",null);Pr(this,"_rev",null);Pr(this,"_m",0);Pr(this,"_internalFFT",null);Pr(this,"_chirpReal",null);Pr(this,"_chirpImag",null);Pr(this,"_bReal",null);Pr(this,"_bImag",null);Pr(this,"_hanning",null);Pr(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new Qs(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const l=a[s];if(s<l){const u=i[s],f=o[s];i[s]=i[l],o[s]=o[l],i[l]=u,o[l]=f}}else for(let s=0;s<n;s++){const l=a[s];i[s]=t[l],o[s]=r?r[l]:0}for(let s=2;s<=n;s*=2){const l=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let p=0;p<n;p+=s){let m=1,b=0;for(let x=0;x<l;x++){const w=p+x,v=p+x+l,y=m*i[v]-b*o[v],k=m*o[v]+b*i[v],C=i[w],j=o[w];i[w]=C+y,o[w]=j+k,i[v]=C-y,o[v]=j-k;const S=m*f-b*d,N=m*d+b*f;m=S,b=N}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const p=t[d],m=r?r[d]:0,b=this._chirpReal[d],x=this._chirpImag[d];o[d]=p*b-m*x,s[d]=p*x+m*b}i.transformRadix2(o,s);for(let d=0;d<a;d++){const p=i._real[d],m=i._imag[d],b=this._bReal[d],x=this._bImag[d];i._real[d]=p*b-m*x,i._imag[d]=p*x+m*b}const l=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(l,u);const f=1/a;for(let d=0;d<n;d++){const p=i._real[d]*f,m=-i._imag[d]*f,b=this._chirpReal[d],x=this._chirpImag[d];this._real[d]=p*b-m*x,this._imag[d]=p*x+m*b}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const l=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<l;f++){const d=this._real[f],p=this._imag[f];r[f]+=(d*d+p*p)*u}}}function dA(e,t,r,n=!1){const a=new Qs(t),i=new Qs(r),o=t*r,s=new Float32Array(o),l=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let x=0;x<t;x++)u[x]=.5*(1-Math.cos(2*Math.PI*x/(t-1)));f=new Float32Array(r);for(let x=0;x<r;x++)f[x]=.5*(1-Math.cos(2*Math.PI*x/(r-1)))}for(let x=0;x<r;x++){const w=x*t,v=a._real;let y=0;for(let C=0;C<t;C++)y+=e[w+C];const k=y/t;if(u)for(let C=0;C<t;C++)v[C]=(e[w+C]-k)*u[C];else for(let C=0;C<t;C++)v[C]=e[w+C]-k;a.transform(v);for(let C=0;C<t;C++)s[w+C]=a._real[C],l[w+C]=a._imag[C]}for(let x=0;x<t;x++){const w=i._real,v=i._imag;for(let y=0;y<r;y++){const k=y*t+x;let C=s[k],j=l[k];f&&(C*=f[y],j*=f[y]),w[y]=C,v[y]=j}i.transform(w,v);for(let y=0;y<r;y++){const k=y*t+x;s[k]=i._real[y],l[k]=i._imag[y]}}const d=new Float32Array(o);let p=1,m=t,b=r;if(n&&u&&f){m=0;for(let x=0;x<t;x++)m+=u[x]*u[x];b=0;for(let x=0;x<r;x++)b+=f[x]*f[x]}p=1/(m*b);for(let x=0;x<o;x++)d[x]=(s[x]*s[x]+l[x]*l[x])*p;return d}function hA(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const l=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+l;n[d]=e[f]}return n}function h0(e,t,r,n=[0,0,0,0],a=65535,i="RGGB",o=null){const l=e*t*2,u=8,f=u+l,d="Fake",p="StretchedNoiseCam",m="StretchedNoiseCam",b=z=>{const F=new Uint8Array(z.length+1);for(let I=0;I<z.length;I++)F[I]=z.charCodeAt(I);return F[z.length]=0,F},x=b(d),w=b(p),v=b(m),y=z=>{const F=[0,0,0,0],I={R:0,G:1,B:2},L=z.toUpperCase();for(let W=0;W<4;W++)F[W]=I[L[W]]??1;return F},k=z=>{const F=[];return z.forEach(I=>{F.push(Math.round(I*1e4)),F.push(1e4)}),F},C=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:x.length,value:x},{id:272,type:2,count:w.length,value:w},{id:273,type:4,count:1,value:u},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:l},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:y(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(z=>Math.round(z))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:v.length,value:v}];o&&o.length===9&&(C.push({id:50721,type:10,count:9,value:k(o)}),C.push({id:50778,type:3,count:1,value:21})),C.sort((z,F)=>z.id-F.id);const j=2+C.length*12+4;let S=0;const N=C.map(z=>{let F=1;z.type===3&&(F=2),z.type===4&&(F=4),(z.type===5||z.type===10)&&(F=8);const I=z.count*F,L=I<=4;let W=0;return L||(W=S,S+=I,S%2!==0&&S++),{...z,fits:L,totalBytes:I,extraOffset:W,typeSize:F}}),M=f+j,E=M+S,R=new ArrayBuffer(E),T=new DataView(R),D=new Uint8Array(R);T.setUint16(0,18761,!0),T.setUint16(2,42,!0),T.setUint32(4,f,!0);const B=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);D.set(B,u);let G=f;return T.setUint16(G,C.length,!0),G+=2,N.forEach(z=>{if(T.setUint16(G,z.id,!0),T.setUint16(G+2,z.type,!0),T.setUint32(G+4,z.count,!0),z.fits){const F=G+8;Array.isArray(z.value)?z.value.forEach((I,L)=>{z.type===1&&T.setUint8(F+L,I),z.type===3&&T.setUint16(F+L*2,I,!0)}):(z.type===3&&T.setUint16(F,z.value,!0),z.type===4&&T.setUint32(F,z.value,!0))}else{const F=M+z.extraOffset;T.setUint32(G+8,F,!0),z.value instanceof Uint8Array?D.set(z.value,F):Array.isArray(z.value)&&z.value.forEach((I,L)=>{z.type===1&&T.setUint8(F+L,I),z.type===2&&T.setUint8(F+L,I),z.type===3&&T.setUint16(F+L*2,I,!0),z.type===4&&T.setUint32(F+L*4,I,!0),(z.type===5||z.type===10)&&(z.type===10?T.setInt32(F+L*4,I,!0):T.setUint32(F+L*4,I,!0))})}G+=12}),T.setUint32(G,0,!0),R}var hp=typeof self<"u"?self:global;const hf=typeof navigator<"u",pA=hf&&typeof HTMLImageElement>"u",z0=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),pp=hp.Buffer,Id=hp.BigInt,gp=!!pp,gA=e=>e;function U0(e,t=gA){if(z0)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let u1=hp.fetch;const mA=e=>u1=e;if(!hp.fetch){const e=U0("http",n=>n),t=U0("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:l,pathname:u,protocol:f,search:d}=new URL(n);const p={method:"GET",hostname:l,path:encodeURI(u)+d,headers:a};s!==""&&(p.port=Number(s));const m=(f==="https:"?await t:await e).request(p,b=>{if(b.statusCode===301||b.statusCode===302){let x=new URL(b.headers.location,n).toString();return r(x,{headers:a}).then(i).catch(o)}i({status:b.statusCode,arrayBuffer:()=>new Promise(x=>{let w=[];b.on("data",v=>w.push(v)),b.on("end",()=>x(Buffer.concat(w)))})})});m.on("error",o),m.end()});mA(r)}function ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const G0=e=>wj(e)?void 0:e,yA=e=>e!==void 0;function wj(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(yA).length===0)}function yn(e){let t=new Error(e);throw delete t.stack,t}function $s(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function Ty(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Ey=e=>String.fromCharCode.apply(null,e),U2=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function kj(e){return U2?U2.decode(e):gp?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Ey(e)))}class wa{static from(t,r){return t instanceof this&&t.le===r?t:new wa(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof wa){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&yn("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else yn("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=wa){return t instanceof DataView||t instanceof wa?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||yn("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new wa(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return kj(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return Ey(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return Ey(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function $y(e,t){yn(`${e} '${t}' was not loaded, try using full build of exifr.`)}let f1=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||$y(this.kind,t),r&&(t in r||function(n,a){yn(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||$y(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var Hi=new f1("file parser"),pn=new f1("segment parser"),Yi=new f1("file reader");function vA(e,t){return typeof e=="string"?G2(e,t):hf&&!pA&&e instanceof HTMLImageElement?G2(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new wa(e):hf&&e instanceof Blob?Dy(e,t,"blob",el):void yn("Invalid input argument")}function G2(e,t){return(r=e).startsWith("data:")||r.length>1e4?Ry(e,t,"base64"):z0&&e.includes("://")?Dy(e,t,"url",Js):z0?Ry(e,t,"fs"):hf?Dy(e,t,"url",Js):void yn("Invalid input argument");var r}async function Dy(e,t,r,n){return Yi.has(r)?Ry(e,t,r):n?async function(a,i){let o=await i(a);return new wa(o)}(e,n):void yn(`Parser ${r} is not loaded`)}async function Ry(e,t,r){let n=new(Yi.get(r))(e,t);return await n.read(),n}const Js=e=>u1(e).then(t=>t.arrayBuffer()),el=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class xA extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function sn(e,t,r){let n=new xA;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function tl(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Dn=new Map,Ni=new Map,rs=new Map,Bo=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Bc=["jfif","xmp","icc","iptc","ihdr"],rl=["tiff",...Bc],Yr=["ifd0","ifd1","exif","gps","interop"],Fo=[...rl,...Yr],zo=["makerNote","userComment"],Fc=["translateKeys","translateValues","reviveValues","multiSegment"],Uo=[...Fc,"sanitize","mergeOutput","silentErrors"];class Sj{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class pu extends Sj{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),ht(this,"enabled",!1),ht(this,"skip",new Set),ht(this,"pick",new Set),ht(this,"deps",new Set),ht(this,"translateKeys",!1),ht(this,"translateValues",!1),ht(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=Yr.includes(t),this.canBeFiltered&&(this.dict=Dn.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:yn(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of Fc)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,W0(this.pick,this.deps)):this.enabled&&this.pick.size>0&&W0(this.pick,this.deps)}}var ua={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},W2=new Map;let fl=class extends Sj{static useCached(t){let r=W2.get(t);return r!==void 0||(r=new this(t),W2.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):yn(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=hf?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of Bo)this[t]=ua[t];for(t of Uo)this[t]=ua[t];for(t of zo)this[t]=ua[t];for(t of Fo)this[t]=new pu(t,ua[t],void 0,this)}setupFromTrue(){let t;for(t of Bo)this[t]=ua[t];for(t of Uo)this[t]=ua[t];for(t of zo)this[t]=!0;for(t of Fo)this[t]=new pu(t,!0,void 0,this)}setupFromArray(t){let r;for(r of Bo)this[r]=ua[r];for(r of Uo)this[r]=ua[r];for(r of zo)this[r]=ua[r];for(r of Fo)this[r]=new pu(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,Yr)}setupFromObject(t){let r;for(r of(Yr.ifd0=Yr.ifd0||Yr.image,Yr.ifd1=Yr.ifd1||Yr.thumbnail,Object.assign(this,t),Bo))this[r]=Yg(t[r],ua[r]);for(r of Uo)this[r]=Yg(t[r],ua[r]);for(r of zo)this[r]=Yg(t[r],ua[r]);for(r of rl)this[r]=new pu(r,ua[r],t[r],this);for(r of Yr)this[r]=new pu(r,ua[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,Yr,Fo),t.tiff===!0?this.batchEnableWithBool(Yr,!0):t.tiff===!1?this.batchEnableWithUserValue(Yr,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,Yr):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,Yr)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=V2(t,n);for(let[o,s]of i)W0(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=V2(r,n);for(let[o,s]of i)W0(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=Yr.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of Yr)this[i].finalizeFilters()}get onlyTiff(){return!Bc.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of rl)this[t].enabled&&!pn.has(t)&&$y("segment parser",t)}};function V2(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Dn.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function Yg(e,t){return e!==void 0?e:t!==void 0?t:void 0}function W0(e,t){for(let r of t)e.add(r)}ht(fl,"default",ua);class us{constructor(t){ht(this,"parsers",{}),ht(this,"output",{}),ht(this,"errors",[]),ht(this,"pushToErrors",r=>this.errors.push(r)),this.options=fl.useCached(t)}async read(t){this.file=await vA(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of Hi)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),yn("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),G0(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=pn.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function mp(e,t){let r=new us(t);return await r.read(e),r.parse()}var bA=Object.freeze({__proto__:null,parse:mp,Exifr:us,fileParsers:Hi,segmentParsers:pn,fileReaders:Yi,tagKeys:Dn,tagValues:Ni,tagRevivers:rs,createDictionary:sn,extendDictionary:tl,fetchUrlAsArrayBuffer:Js,readBlobAsArrayBuffer:el,chunkedProps:Bo,otherSegments:Bc,segments:rl,tiffBlocks:Yr,segmentsAndBlocks:Fo,tiffExtractables:zo,inheritables:Fc,allFormatters:Uo,Options:fl});class yp{constructor(t,r,n){ht(this,"errors",[]),ht(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){yn(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):yn("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(pn.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}let ki=class{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new fl({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof wa?t:new wa(t)}constructor(t,r={},n){ht(this,"errors",[]),ht(this,"raw",new Map),ht(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=rs.get(r),a=Ni.get(r),i=Dn.get(r),o=this.options[r],s=o.reviveValues&&!!n,l=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,p]of t)s&&n.has(d)?p=n.get(d)(p):l&&a.has(d)&&(p=this.translateValue(p,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=p;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}};ht(ki,"headerLength",4),ht(ki,"type",void 0),ht(ki,"multiSegment",!1),ht(ki,"canHandle",()=>!1);function wA(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function kA(e){return e>=224&&e<=239}function SA(e,t,r){for(let[n,a]of pn)if(a.canHandle(e,t,r))return n}class H2 extends yp{constructor(...t){super(...t),ht(this,"appSegments",[]),ht(this,"jpegSegments",[]),ht(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(pn.keyList())):(t=t===void 0?pn.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&pn.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let l=pn.get(s),u=this.options[s];return l.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>l&&!u?!await n.readNextChunk(t):!await n.readNextChunk(l),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,l,{file:u,findAll:f,wanted:d,remaining:p,options:m}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),kA(n)){if(a=u.getUint16(t+2),i=SA(u,t,a),i&&d.has(i)&&(o=pn.get(i),s=o.findPosition(u,t),l=m[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||p.delete(i)):p.delete(i),p.size===0)))break;m.recordUnknownSegments&&(s=ki.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(wA(n)){if(a=u.getUint16(t+2),n===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let l=0;l<r.length;l++)a=r[l],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=pn.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}ht(H2,"type","jpeg"),Hi.set("jpeg",H2);const jA=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class _A extends ki{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,l=this.chunk.getUint16(t);t+=2;for(let u=0;u<l;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=jA[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&yn(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&yn(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return $s(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let l=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)l[f]=this.parseTagValue(i,t),t+=u;return l}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:yn(`Invalid tiff type ${t}`)}}}class qg extends _A{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&yn("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&yn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,Ty(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Ty(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",X2(...t.get(2),t.get(1))),t.set("longitude",X2(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of Yr)if(t=this[r],!wj(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function X2(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}ht(qg,"type","tiff"),ht(qg,"headerLength",10),pn.set("tiff",qg);var CA=Object.freeze({__proto__:null,default:bA,Exifr:us,fileParsers:Hi,segmentParsers:pn,fileReaders:Yi,tagKeys:Dn,tagValues:Ni,tagRevivers:rs,createDictionary:sn,extendDictionary:tl,fetchUrlAsArrayBuffer:Js,readBlobAsArrayBuffer:el,chunkedProps:Bo,otherSegments:Bc,segments:rl,tiffBlocks:Yr,segmentsAndBlocks:Fo,tiffExtractables:zo,inheritables:Fc,allFormatters:Uo,Options:fl,parse:mp});const d1={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},h1=Object.assign({},d1,{firstChunkSize:4e4,gps:[1,2,3,4]});async function jj(e){let t=new us(h1);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const p1=Object.assign({},d1,{tiff:!1,ifd1:!0,mergeOutput:!1});async function _j(e){let t=new us(p1);await t.read(e);let r=await t.extractThumbnail();return r&&gp?pp.from(r):r}async function Cj(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const g1=Object.assign({},d1,{firstChunkSize:4e4,ifd0:[274]});async function m1(e){let t=new us(g1);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const y1=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Ds=!0,Rs=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;Ds=Number(r)+.1*Number(n)<13.4,Rs=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Ds=Rs=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Ds=Rs=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Ds=Rs=Number(t)<77}}async function Pj(e){let t=await m1(e);return Object.assign({canvas:Ds,css:Rs},y1[t])}class PA extends wa{constructor(...t){super(...t),ht(this,"ranges",new NA),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=gp?pp.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class NA{constructor(){ht(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>K2(t,o.offset,a)||K2(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function K2(e,t,r){return e<=t&&t<=r}class vp extends PA{constructor(t,r){super(0),ht(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Yi.set("blob",class extends vp{async readWhole(){this.chunked=!1;let e=await el(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await el(n);return this.set(a,e,!0)}});var OA=Object.freeze({__proto__:null,default:CA,Exifr:us,fileParsers:Hi,segmentParsers:pn,fileReaders:Yi,tagKeys:Dn,tagValues:Ni,tagRevivers:rs,createDictionary:sn,extendDictionary:tl,fetchUrlAsArrayBuffer:Js,readBlobAsArrayBuffer:el,chunkedProps:Bo,otherSegments:Bc,segments:rl,tiffBlocks:Yr,segmentsAndBlocks:Fo,tiffExtractables:zo,inheritables:Fc,allFormatters:Uo,Options:fl,parse:mp,gpsOnlyOptions:h1,gps:jj,thumbnailOnlyOptions:p1,thumbnail:_j,thumbnailUrl:Cj,orientationOnlyOptions:g1,orientation:m1,rotations:y1,get rotateCanvas(){return Ds},get rotateCss(){return Rs},rotation:Pj});Yi.set("url",class extends vp{async readWhole(){this.chunked=!1;let e=await Js(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await u1(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});wa.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof Id!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Id(t)<<Id(32)|Id(r)):void yn("Trying to read 64b value but JS can only handle 53b numbers.")};class MA extends yp{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class Nj extends MA{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let l=4+this.file.getUint32(o);o+=l,s-=l,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),l=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,p=this.file.getUintBytes(n,d);for(n+=d;p--;){let m=this.file.getUintBytes(n,l);n+=l+u+2+o;let b=this.file.getUint16(n);if(n+=2,m===r)return b>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=b*f}}}class Oj extends Nj{}ht(Oj,"type","heic");class Y2 extends Nj{}ht(Y2,"type","avif"),Hi.set("heic",Oj),Hi.set("avif",Y2),sn(Dn,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),sn(Dn,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),sn(Dn,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),sn(Ni,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Fu=sn(Ni,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const q2={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Fu.set(37392,q2),Fu.set(41488,q2);const Zg={0:"Normal",1:"Low",2:"High"};function Z2(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function Q2(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function Qg(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function gu(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(J2(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(J2(e[r],e[r+1]));return $s(String.fromCodePoint(...t))}function J2(e,t){return e<<8|t}Fu.set(41992,Zg),Fu.set(41993,Zg),Fu.set(41994,Zg),sn(rs,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?kj(e):e}],[306,Qg],[40091,gu],[40092,gu],[40093,gu],[40094,gu],[40095,gu]]),sn(rs,"exif",[[40960,Q2],[36864,Q2],[36867,Qg],[36868,Qg],[40962,Z2],[40963,Z2]]),sn(rs,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class Jg extends ki{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:wa.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let l of Ej)o[l]=[],s[l]=0;return i.replace($A,(l,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${l}#${d}`}return`${l}#${o[f].pop()}`})}(t);let r=Zl.findAll(t,"rdf","Description");r.length===0&&r.push(new Zl("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=EA(o.ns,a),Mj(o,n);return function(i){let o;for(let s in i)o=i[s]=G0(i[s]),o===void 0&&delete i[s];return G0(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}ht(Jg,"type","xmp"),ht(Jg,"multiSegment",!0),pn.set("xmp",Jg);class V0{static findAll(t){return Aj(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(V0.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=Tj(a),new V0(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class Zl{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Aj(t,a).map(Zl.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new Zl(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=V0.findAll(n),this.children=Zl.findAll(a),this.value=this.children.length===0?Tj(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return TA(this.children.map(AA));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)Mj(r,t);return this.value!==void 0&&(t.value=this.value),G0(t)}}function Mj(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var AA=e=>e.serialize(),TA=e=>e.length===1?e[0]:e,EA=(e,t)=>t[e]?t[e]:t[e]={};function Aj(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function Tj(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const Ej=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],$A=new RegExp(`(<|\\/)(${Ej.join("|")})`,"g");var $j=Object.freeze({__proto__:null,default:OA,Exifr:us,fileParsers:Hi,segmentParsers:pn,fileReaders:Yi,tagKeys:Dn,tagValues:Ni,tagRevivers:rs,createDictionary:sn,extendDictionary:tl,fetchUrlAsArrayBuffer:Js,readBlobAsArrayBuffer:el,chunkedProps:Bo,otherSegments:Bc,segments:rl,tiffBlocks:Yr,segmentsAndBlocks:Fo,tiffExtractables:zo,inheritables:Fc,allFormatters:Uo,Options:fl,parse:mp,gpsOnlyOptions:h1,gps:jj,thumbnailOnlyOptions:p1,thumbnail:_j,thumbnailUrl:Cj,orientationOnlyOptions:g1,orientation:m1,rotations:y1,get rotateCanvas(){return Ds},get rotateCss(){return Rs},rotation:Pj});let ew=U0("fs",e=>e.promises);Yi.set("fs",class extends vp{async readWhole(){this.chunked=!1,this.fs=await ew;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await ew,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});Yi.set("base64",class extends vp{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(gp){let l=pp.from(a,"base64").slice(n,n+s);return this.set(l,e,!0)}{let l=this.subarray(e,s,!0),u=atob(a),f=l.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return l}}});class tw extends yp{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(Ty(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}ht(tw,"type","tiff"),Hi.set("tiff",tw);let DA=U0("zlib");const RA=["ihdr","iccp","text","itxt","exif"];class rw extends yp{constructor(...t){super(...t),ht(this,"catchError",r=>this.errors.push(r)),ht(this,"metaChunks",[]),ht(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,l={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};RA.includes(o)?this.metaChunks.push(l):this.unknownChunks.push(l),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),z0){let s=await DA,l=r.getUint8Array(i);l=s.inflateSync(l),this.injectSegment("icc",l)}}}ht(rw,"type","png"),Hi.set("png",rw),sn(Dn,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),tl(Dn,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let nw=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];tl(Dn,"ifd0",nw),tl(Dn,"exif",nw),sn(Ni,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class em extends ki{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}ht(em,"type","jfif"),ht(em,"headerLength",9),pn.set("jfif",em),sn(Dn,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class aw extends ki{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}ht(aw,"type","ihdr"),pn.set("ihdr",aw),sn(Dn,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),sn(Ni,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class p0 extends ki{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),l=0;for(let u of a)s.set(u,l),l+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new wa(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&yn("ICC header is too short");for(let[r,n]of Object.entries(IA)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(l,4),r=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),l+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return $s(this.chunk.getString(t+12,r))}parseText(t,r){return $s(this.chunk.getString(t+8,r-8))}parseSig(t){return $s(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let l=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,p=$s(r.getUnicodeString(d,f));o.push({lang:l,country:u,text:p}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}ht(p0,"type","icc"),ht(p0,"multiSegment",!0),ht(p0,"headerLength",18);const IA={4:to,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:to,16:to,20:to,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:to,40:to,48:to,52:to,64:(e,t)=>e.getUint32(t),80:to};function to(e,t){return $s(e.getString(t,4))}pn.set("icc",p0),sn(Dn,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Ld={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},iw={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};sn(Ni,"icc",[[4,Ld],[12,iw],[40,Object.assign({},Ld,iw)],[48,Ld],[80,Ld],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Bd extends ki{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}ht(Bd,"type","iptc"),ht(Bd,"translateValues",!1),ht(Bd,"reviveValues",!1),pn.set("iptc",Bd),sn(Dn,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),sn(Ni,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let tm=null;async function dl(){if(!tm)try{const n=(await bj(()=>Promise.resolve().then(()=>rne),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;tm=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await tm,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const v1=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],ns=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function Fd(e,t=0,r=0){const n=await dl(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,l=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((l-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let m=0;m<f/2;m++){const b=m*6+r;if(b+3>=l)break;const x=b*s,w=(b+3)*s,v=m*2,y=v*u,k=(v+1)*u;for(let C=0;C<u/2;C++){const j=C*6+t;if(j+1>=s)break;const S=C*2;d[y+S]=o[x+j+1],d[y+S+1]=o[x+j+0],d[k+S]=o[w+j+0],d[k+S+1]=o[w+j+1]}}return{dngBuffer:h0(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function LA(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,l=r*n,u=new Uint16Array(l);for(let p=0;p<n;p++)for(let m=0;m<r;m++){const b=(p*r+m)*4,x=p*r+m,w=p%2===0,v=m%2===0;let y=0;w&&v?y=s[b]:!w&&!v?y=s[b+2]:y=s[b+1],u[x]=y*64}const f=await new Promise(p=>a.toBlob(p,"image/png"));let d={description:"Standard image (non-RAW)"};try{const p=await $j.parse(e);p&&(d={...d,...p})}catch(p){console.warn("EXIF parsing failed for standard image",p)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const BA=async e=>{const t=await dl(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const l=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const p=d*3,m=d*4;l.data[m]=u[p],l.data[m+1]=u[p+1],l.data[m+2]=u[p+2],l.data[m+3]=255}s.putImageData(l,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},H0=async e=>{var n,a,i,o,s,l,u,f,d;const t=await dl(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const p=r.getRawImage();let m=new Uint16Array(p.data);const b=await r.metadata(!0);let x={...b};try{const S=await $j.parse(e.buffer);S&&(x={...x,...S})}catch(S){console.warn("exifr parsing failed for RAW buffer",S)}const w=((n=b.idata)==null?void 0:n.filters)||0,v=((a=b.idata)==null?void 0:a.colors)||0,y=w===0&&v===3,k=w===9;let C=[0,0,0,0],j=!1;if(r.getBlackLevels)try{const S=r.getBlackLevels();S.dng_cblack&&S.dng_cblack.length===4&&Array.from(S.dng_cblack).some(N=>N>0)?(C=Array.from(S.dng_cblack).map(Number),j=!0):S.cblack&&S.cblack.length===4&&Array.from(S.cblack).some(N=>N>0)?(C=Array.from(S.cblack).map(Number),j=!0):typeof S.black=="number"&&S.black>0&&(C=[S.black,S.black,S.black,S.black],j=!0)}catch(S){console.warn("getBlackLevels binding failed",S)}if(!j){let S=[];if((i=b.color_data)!=null&&i.cblack_rawpy_style)S=b.color_data.cblack_rawpy_style;else if((s=(o=b.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)S=b.color_data.dng_levels.dng_cblack;else if(((l=b.black_level_per_channel)==null?void 0:l.length)>=4)S=b.black_level_per_channel;else if(((u=b.cblack)==null?void 0:u.length)>=4)S=b.cblack;else if(((d=(f=b.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)S=b.color.cblack;else{const N=b.black_level||b.color_data&&b.color_data.black||0;S=[N,N,N,N]}C=[Number(S[0])||0,Number(S[1])||0,Number(S[2])||0,Number(S[3])||0]}return{data:m,width:p.width,height:p.height,bayerPattern:b.color_desc||"RGGB",blackLevels:C,whiteLevel:b.white_level||16383,metadata:x,isThreePlane:y,isXTrans:k}}finally{r.delete?r.delete():r.close()}};async function Ss(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([BA(t),H0(r)]);return{previewBlob:n,analysisData:a}}async function X0(e){const t=new Uint8Array(e);return H0(t)}const ow=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function rm(e,t,r,n=!0){const a=await H0(new Uint8Array(e)),i=await H0(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,l=r?ow(o):o,u=r?ow(s):s,f=l*u,d=new Uint16Array(f),p=6e4,m=1.41421356;for(let b=0;b<s;b++){const x=b*o,w=b*l;for(let v=0;v<o;v++){const y=a.data[x+v],k=i.data[x+v];let C=y-k;n&&(C/=m);let j=C+p;j=Math.max(0,Math.min(65535,j)),d[w+v]=Math.round(j)}}return{rawData:d,width:l,height:u,metadata:a.metadata}}function js(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),l=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],p=[0,0,0,0],m=[0,0,0,0];for(let w=l;w<f;w++){const v=w*t,y=w%2;for(let k=s;k<u;k++){const C=k%2,j=e[v+k],S=y*2+C;d[S]+=j,p[S]+=j*j,m[S]++}}const b=[0,0,0,0],x=[0,0,0,0];for(let w=0;w<4;w++)if(m[w]>0){const v=d[w]/m[w];b[w]=v;const k=p[w]/m[w]-v*v;x[w]=Math.sqrt(Math.max(0,k))}return{x:s,y:l,width:u-s,height:f-l,means:b,stdDevs:x,pixelCount:m.reduce((w,v)=>w+v,0)}}function FA(e,t,r,n,a,i=!1){const o=Math.floor(Math.max(0,r.x)),s=Math.floor(Math.max(0,r.y)),l=Math.ceil(Math.min(t,r.x+r.w)),u=e.length/t,f=Math.ceil(Math.min(u,r.y+r.h)),d=[0,0,0,0],p=[0,0,0,0];for(let z=s;z<f;z++){const F=z*t,I=z%2;for(let L=o;L<l;L++){const W=L%2,K=I*2+W,ae=e[F+L],re=n[K]||0;d[K]+=Math.max(0,ae-re),p[K]++}}let m=0,b=3;i&&(m=3,b=0);const x=p[m]>0?d[m]/p[m]:1,w=(d[1]+d[2])/(p[1]+p[2]||1),v=p[b]>0?d[b]/p[b]:1;if(x<1||w<1||v<1)return[1,1];const y=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]],k=df(y);if(!k)return console.warn("Color Matrix is not invertible, falling back to standard WB"),[w/x,w/v];const C=F0(v1,k),j=df(C);let S=1,N=1,M=1;if(j)S=j[0][0]+j[0][1]+j[0][2],N=j[1][0]+j[1][1]+j[1][2],M=j[2][0]+j[2][1]+j[2][2],Math.abs(N)<1e-6&&(N=1);else return console.warn("Final Matrix is not invertible"),[w/x,w/v];const E=w/x,R=w/v,T=S/N,D=M/N,B=E*T,G=R*D;return[Math.max(0,B),Math.max(0,G)]}function sw(e,t,r,n,a,i,o=0,s=0){const l=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),p=a>>1,m=a&1,b=(i>>1)+o,x=(i&1)+s;let w=0,v=0,y=0;for(let M=u;M<d-2;M+=2)for(let E=l;E<f-2;E+=2){const R=(M+p)*t+(E+m),T=(M+b)*t+(E+x);M+b>=r||E+x>=t||(w+=e[R],v+=e[T],y++)}if(y<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const k=w/y,C=v/y;let j=0,S=0,N=0;for(let M=u;M<d-2;M+=2)for(let E=l;E<f-2;E+=2){const R=(M+p)*t+(E+m),T=(M+b)*t+(E+x);if(M+b>=r||E+x>=t)continue;const D=e[R],B=e[T],G=D-k,z=B-C;j+=G*z,S+=G*G,N+=z*z}return{sumCov:j,sumVar1:S,sumVar2:N,n:y}}function zA(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function UA(e,t,r,n,a,i,o,s,l,u,f){if(u<=l)return[];const d=Math.max(0,Math.floor(n)),p=Math.max(0,Math.floor(a)),m=Math.min(t,Math.ceil(n+i)),b=Math.min(r,Math.ceil(a+o)),x=u-l,w=f?Math.floor(x)+1:s,v=x/w,y=[new Uint32Array(w),new Uint32Array(w),new Uint32Array(w),new Uint32Array(w)];for(let C=p;C<b;C++){const j=C*t,S=C%2;for(let N=d;N<m;N++){const M=N%2,E=e[j+N];if(E<l||E>u)continue;const R=S*2+M;let T;f?T=Math.floor(E-l):T=Math.floor((E-l)/v),T<0&&(T=0),T>=w&&(T=w-1),y[R][T]++}}const k=[];for(let C=0;C<w;C++){const j=l+(f?C:C*v);k.push({binStart:j,c0:y[0][C],c1:y[1][C],c2:y[2][C],c3:y[3][C]})}return k}function GA(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},l=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),p=Math.min(t,Math.ceil(n.x+n.w)),m=Math.min(r,Math.ceil(n.y+n.h)),b=p-f,x=m-d;if(b<=1||x<=1)return null;let w=0;for(let T=f;T<p;T++)T%2===(a&1)&&w++;let v=0;for(let T=d;T<m;T++)T%2===a>>1&&v++;if(w<4||v<4)return null;const y=Math.max(1,u),k=Math.floor(2*w/(y+1)),C=Math.floor(2*v/(y+1));if(k<4||C<4)return null;const j=new Qs(k),S=new Qs(C),N=new Float32Array(Math.floor(k/2)+1),M=new Float32Array(Math.floor(C/2)+1);let E=0,R=0;for(let T=d;T<m;T++){const D=T%2;if(a>>1!==D||s.rows&&(T>>1&1)!==s.rowGroup)continue;const B=T*t,G=new Float32Array(w);let z=0;for(let F=f;F<p;F++)F%2===(a&1)&&z<w&&(G[z++]=e[B+F]);for(let F=0;F<y;F++){const I=Math.floor(F*k/2);if(I+k>w)break;const L=G.slice(I,I+k);j.calculateSpectrum(L,N,o),E++}if(!l)break}for(let T=f;T<p;T++){const D=T%2;if((a&1)!==D||s.cols&&(T>>1&1)!==s.rowGroup)continue;const B=new Float32Array(v);let G=0;for(let z=d;z<m;z++)z%2===a>>1&&G<v&&(B[G++]=e[z*t+T]);for(let z=0;z<y;z++){const F=Math.floor(z*C/2);if(F+C>v)break;const I=B.slice(F,F+C);S.calculateSpectrum(I,M,o),R++}if(!l)break}if(E>0)for(let T=0;T<N.length;T++)N[T]/=E;if(R>0)for(let T=0;T<M.length;T++)M[T]/=R;return{avgHoriz:Array.from(N),avgVert:Array.from(M),sampleCount:{h:E,v:R}}}function WA(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),l=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let y=s;y<u;y++)if(y%2===a>>1){f=y;break}if(f===-1)return null;let d=-1;for(let y=o;y<l;y++)if(y%2===(a&1)){d=y;break}if(d===-1)return null;const p=[];for(let y=f;y<u;y+=2){const k=y*t,C=[];for(let j=d;j<l;j+=2)C.push(e[k+j]);p.push(C)}const m=p.length;if(m===0)return null;const b=p[0].length;if(b===0)return null;const x=new Float32Array(b*m);for(let y=0;y<m;y++){const k=p[y];for(let C=0;C<b;C++)x[y*b+C]=k[C]}const w=dA(x,b,m,i),v=hA(w,b,m);return{width:b,height:m,data:v}}function VA(e,t,r,n,a,i,o){const{x:s,y:l,w:u,h:f}=n,d=[],p=Math.max(0,Math.floor(s)),m=Math.max(0,Math.floor(l)),b=Math.min(t,Math.ceil(s+u)),x=Math.min(r,Math.ceil(l+f)),w=a>>1,v=a&1;for(let S=m;S<x;S++){if(S%2!==w)continue;const N=S*t;for(let M=p;M<b;M++){if(M%2!==v)continue;const E=e[N+M];E>=i&&E<=o&&d.push(E-i)}}if(d.length===0)return null;d.sort((S,N)=>S-N);const y=[d[0]];for(let S=1;S<d.length;S++)d[S]!==d[S-1]&&y.push(d[S]);const k=[],C=[],j={};for(let S=0;S<y.length-1;S++){const N=y[S],E=y[S+1]-N;k.push(E),C.push({x:N,y:E}),j[E]=(j[E]||0)+1}return{uniqueCount:y.length,diffCount:k.length,stepCounts:j,plotData:C}}function x1(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:l}=e,u=a.map((k,C)=>Math.max(0,k-n[C])),f=i.map((k,C)=>Math.max(0,k-n[C])),d=(u[1]+u[3])/2,p=(f[1]+f[3])/2,m=Math.floor(t.x),b=Math.floor(t.y),x=Math.floor(t.w),w=Math.floor(t.h),v=Math.pow(2,r.exposure),y=new Uint16Array(x*w);for(let k=0;k<w;k++){const C=b+k;if(C<0||C>=e.height)continue;const j=C%2,S=C*s,N=k*x;for(let M=0;M<x;M++){const E=m+M;if(E<0||E>=s)continue;const R=E%2;let T=0;!j&&!R?T=0:!j&&R?T=1:j&&!R?T=3:T=2;const D=o[S+E],B=n[T],G=u[T],z=f[T],F=Math.max(D-B,0),I=z-G||1e-9,L=(F-G)/I;let W;L<0?W=F*(d/Math.max(G,1e-9)):L>1?W=F*(p/Math.max(z,1e-9)):W=(1-L)*d+L*p,W*=v,y[N+M]=Math.max(0,Math.min(65535,Math.round(W)))}}return{data:y,width:x,height:w}}async function lw(e,t){const r=await dl(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const p=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],m=df(p);if(m){const b=t.wbGains?t.wbGains[0]:1,x=t.wbGains?t.wbGains[1]:1,v=F0(m,[[b,0,0],[0,1,0],[0,0,x]]),y=F0(v1,v);o=[y[0][0],y[0][1],y[0][2],y[1][0],y[1][1],y[1][2],y[2][0],y[2][1],y[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(p=>{const m=Math.round(p);return m===0?1:m})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const l=await n.imageData(),u=new ImageData(l.width,l.height),f=u.data,d=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2);if(i&&o.length===9){const p=o,b=Math.pow(2,t.exposure)*.25;for(let x=0;x<d.length;x+=3){const w=d[x]/65535,v=d[x+1]/65535,y=d[x+2]/65535;let k=p[0]*w+p[1]*v+p[2]*y,C=p[3]*w+p[4]*v+p[5]*y,j=p[6]*w+p[7]*v+p[8]*y;k*=b,C*=b,j*=b,k=Math.max(0,Math.min(1,k)),C=Math.max(0,Math.min(1,C)),j=Math.max(0,Math.min(1,j)),k=ns(k),C=ns(C),j=ns(j);const S=x/3*4;f[S]=Math.round(k*255),f[S+1]=Math.round(C*255),f[S+2]=Math.round(j*255),f[S+3]=255}}else for(let p=0;p<d.length;p+=3){const m=p/3*4;f[m]=d[p]>>8,f[m+1]=d[p+1]>>8,f[m+2]=d[p+2]>>8,f[m+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function nm(e,t){const r=await dl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const x=await n.metadata(!0);x&&x.white_level&&(a=x.white_level)}catch(x){console.warn("Metadata error",x)}const i=n.getRawImage(),o=i.width,s=i.height,l=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],p=a,m=t.wbGains?t.wbGains[0]:1,b=t.wbGains?t.wbGains[1]:1;for(let x=0;x<s;x++){const w=x%2;for(let v=0;v<o;v++){const y=v%2,k=w*2+y,C=l[x*o+v],j=d[k];let S=(C-j)/(p-j);S=Math.max(0,Math.min(1,S)),t.exposure!==0&&(S*=Math.pow(2,t.exposure),S=Math.min(1,S)),k===0?S*=m:k===3&&(S*=b);const N=Math.round(ns(Math.min(1,S))*255),M=(x*o+v)*4;f[M]=N,f[M+1]=N,f[M+2]=N,f[M+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function HA(e,t){const r=await dl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const D=await n.metadata(!0);D&&D.white_level&&(a=D.white_level)}catch{}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],p=a,m=t.wbGains?t.wbGains[0]:1,b=t.wbGains?t.wbGains[1]:1,x=Math.pow(2,t.exposure),w=!!t.isBGGR;let v=[[1,0,0],[0,1,0],[0,0,1]];if(t.customMatrix&&t.customMatrix.length===9){const D=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],B=df(D);B&&(v=F0(v1,B))}const y=v[0][0],k=v[0][1],C=v[0][2],j=v[1][0],S=v[1][1],N=v[1][2],M=v[2][0],E=v[2][1],R=v[2][2],T=new Float32Array(o*s);for(let D=0;D<o*s;D++){const B=Math.floor(D/o),G=D%o,z=B%2,F=G%2,I=z*2+F,L=l[D],W=d[I];let K=(L-W)/(p-W);K=Math.max(0,K),w?I===0?K*=b:I===3&&(K*=m):I===0?K*=m:I===3&&(K*=b),T[D]=K}for(let D=1;D<s-1;D++){const B=D%2,G=D*o;for(let z=1;z<o-1;z++){const F=z%2,I=G+z;let L=0,W=0,K=0,ae=!1,re=!1,Q=!1;if(!B&&!F?w?re=!0:ae=!0:B&&F?w?ae=!0:re=!0:Q=!0,ae)L=T[I],W=(T[I-1]+T[I+1]+T[I-o]+T[I+o])*.25,K=(T[I-o-1]+T[I-o+1]+T[I+o-1]+T[I+o+1])*.25;else if(re)K=T[I],W=(T[I-1]+T[I+1]+T[I-o]+T[I+o])*.25,L=(T[I-o-1]+T[I-o+1]+T[I+o-1]+T[I+o+1])*.25;else{W=T[I];const ne=(T[I-1]+T[I+1])*.5,H=(T[I-o]+T[I+o])*.5;let ue=!1;!B&&F?w?ue=!1:ue=!0:w?ue=!0:ue=!1,ue?(L=ne,K=H):(K=ne,L=H)}let le=y*L+k*W+C*K,Ne=j*L+S*W+N*K,ie=M*L+E*W+R*K;le*=x,Ne*=x,ie*=x,le=Math.max(0,Math.min(1,le)),Ne=Math.max(0,Math.min(1,Ne)),ie=Math.max(0,Math.min(1,ie)),le=ns(le),Ne=ns(Ne),ie=ns(ie);const ge=I*4;f[ge]=Math.round(le*255),f[ge+1]=Math.round(Ne*255),f[ge+2]=Math.round(ie*255),f[ge+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function XA(e,t){const r=await dl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const y=await n.metadata(!0);y&&y.white_level&&(a=y.white_level)}catch(y){console.warn("Metadata error",y)}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data;if(!t.advancedZeroDep)throw new Error("Missing advanced settings");const{bl:d,bg:p,fg:m}=t.advancedZeroDep,b=p.map((y,k)=>Math.max(0,y-d[k])),x=m.map((y,k)=>Math.max(0,y-d[k])),w=(b[1]+b[3])/2,v=(x[1]+x[3])/2;for(let y=0;y<s;y++){const k=y%2;for(let C=0;C<o;C++){const j=C%2;let S=0;!k&&!j?S=0:!k&&j?S=1:k&&!j?S=3:S=2;const N=l[y*o+C],M=d[S],E=b[S],R=x[S],T=Math.max(N-M,0),D=R-E||1e-9,B=(T-E)/D;let G;B<0?G=T*(w/Math.max(E,1e-9)):B>1?G=T*(v/Math.max(R,1e-9)):G=(1-B)*w+B*v;let z=G/65535;z=Math.max(0,Math.min(1,z));const F=Math.round(ns(z)*255),I=(y*o+C)*4;f[I]=F,f[I+1]=F,f[I+2]=F,f[I+3]=255}}return u}finally{n.delete?n.delete():n.close()}}const _l=({title:e,children:t})=>c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[c.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:c.jsx("span",{children:e})}),c.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),KA=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],am=({checked:e,onChange:t,label:r})=>c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),c.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:c.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),im=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(p=>d[p]=l),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},YA=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:l,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:p,drGridRows:m,onDrGridRowsChange:b,drGridCols:x,onDrGridColsChange:w,onBatchDrLab:v,hasDrMarkers:y,isFftLabOpen:k,onProcessPair:C,onProcessBatchDiff:j,onProcessStackFft:S,onOpenCrossCalc:N,isThreePlane:M,onToggleXTrans:E,xtransPhase:R,onXTransPhaseChange:T,isXTransConverted:D,onCommand:B,isColorLabOpen:G,colorLabMarkingStep:z,onStartColorLabMarking:F,isSfrLabOpen:I,roiStats:L,isBGGR:W,onOpenDngExport:K,sfrRectCount:ae,isBatchMarkingMode:re,onToggleBatchMarking:Q,onClearBatchMarks:le,onBatchCompute:Ne,stdChartStep:ie,onStartStandardCalibration:ge,onSaveBatchTemplate:ne,onImportBatchTemplate:H,onBatchTransform:ue,onOpenStackingTool:ve}=e,ee=!!t,Oe=!!(t!=null&&t.isXTrans),Te=!!E,[pe,Me]=P.useState(r.exposure.toString()),[Se,me]=P.useState(""),[Ae,Re]=P.useState("0 0 0 0"),[Xe,kt]=P.useState("1.0"),[xt,Yt]=P.useState("1.0"),[bt,yr]=P.useState(r.demosaicMethod),[_t,ar]=P.useState(!!r.showKadc),[Sr,ir]=P.useState(!!r.subtractBlackLevelFromStats),[Gt,Qe]=P.useState("64"),[lt,Wt]=P.useState(!1),[Vt,Tr]=P.useState(""),[vr,Qr]=P.useState(""),[Ft,Jr]=P.useState(""),[mt,zr]=P.useState(!1),[Be,jr]=P.useState(!1),[Ur,ln]=P.useState(!1),[Gr,lr]=P.useState(!1),[en,In]=P.useState(!1),[Cn,ya]=P.useState("single"),[xr,_r]=P.useState(!1),[cr,A]=P.useState(!0),[Ee,ot]=P.useState(!0),[gt,St]=P.useState(!1),[At,qt]=P.useState(10),[er,qe]=P.useState(1.05),Ct=P.useMemo(()=>Object.keys(cc).sort(),[]),$t=P.useRef(null),zt=P.useRef(null),Lt=P.useRef(null),we=P.useRef(null),[Wr,tn]=P.useState(null),[rn,ia]=P.useState(null),[xl,bl]=P.useState(!1),[Pn,li]=P.useState(!0),va=P.useRef(null),ci=P.useRef(null),Zi=P.useRef(null);P.useEffect(()=>{if(Me(r.exposure.toString()),r.customMatrix?me(r.customMatrix.join(" ")):me(""),r.blackLevel&&r.blackLevel.length===4)Re(r.blackLevel.join(" "));else{const J=im(t,i);J&&J.some(xe=>xe!==0)?Re(J.join(" ")):Re("")}kt(r.wbGains?r.wbGains[0].toString():"1.0"),Yt(r.wbGains?r.wbGains[1].toString():"1.0"),yr(r.demosaicMethod),ar(!!r.showKadc),ir(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(Tr(r.advancedZeroDep.bl.join(" ")),Qr(r.advancedZeroDep.bg.join(" ")),Jr(r.advancedZeroDep.fg.join(" ")),Wt(!0))},[r,t,i]);const Vr=P.useRef(!1),qn=P.useRef(null);P.useEffect(()=>{t!==qn.current&&(Vr.current=!1,qn.current=t)},[t]),P.useEffect(()=>{if(o&&t&&!Vr.current){Vr.current=!0;const J=im(t,i),xe=J&&J.some(st=>st>0);if(J&&xe){console.log("[AutoApply] Detected Black Levels via Bridge:",J);const st={...r,blackLevel:J,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(st)}}},[o,t,i,r,n]);const Nn=J=>Me(J),Aa=J=>kt(J),ui=J=>Yt(J),fi=J=>yr(parseInt(J.target.value,10)),Mi=J=>me(J.target.value),di=()=>{Me("0"),yr(3),kt("1.0"),Yt("1.0"),ar(!0),ir(!0),me(""),Wt(!1);const J=im(t,i);Re(J&&J.some(xe=>xe!==0)?J.join(" "):"")},xa=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),B==null||B("sel full"))},ys=()=>{if(!t||!a)return;const J=parseInt(Gt,10);if(isNaN(J)||J<=0)return;const xe=Math.min(J,t.width),st=Math.min(J,t.height),et=Math.floor((t.width-xe)/2),yt=Math.floor((t.height-st)/2);a({x:et,y:yt,w:xe,h:st}),B==null||B(`sel center ${J}`)},oa=()=>{if(!t||!L){alert("Please select a region on the image first.");return}const J=hi()||[0,0,0,0],xe=Se.trim().replace(/[\s,\n]+/g," "),st=xe?xe.split(" ").map(Number):[1,0,0,0,1,0,0,0,1];if(st.length!==9){alert("Matrix must be 3x3 (9 values).");return}const[et,yt]=FA(t.data,t.width,{x:L.x,y:L.y,w:L.width,h:L.height},J,st,W);kt(et.toFixed(4)),Yt(yt.toFixed(4)),B==null||B(`wb ${et.toFixed(4)} ${yt.toFixed(4)} (Spot)`)},hi=()=>{const xe=Ae.split(/[\s,]+/).filter(st=>st.trim()!=="").map(Number);if(xe.length===1&&!isNaN(xe[0]))return[xe[0],xe[0],xe[0],xe[0]];if(xe.length>=4&&!xe.slice(0,4).some(isNaN))return[xe[0],xe[1],xe[2],xe[3]]},Ln=J=>{const xe=J.trim().split(/[\s,]+/).map(Number);return xe.length===4&&!xe.some(isNaN)?xe:xe.length===1&&!isNaN(xe[0])?[xe[0],xe[0],xe[0],xe[0]]:null},vs=()=>{B&&(pe!=="0"&&B(`ev ${pe}`),(Xe!=="1.0"||xt!=="1.0")&&B(`wb ${Xe} ${xt}`),Ae!=="0 0 0 0"&&Ae!==""&&B(`bl ${Ae}`),bt!==3&&B(`demo ${bt}`),Se.trim().length>0&&B(`matrix ${Se.replace(/\s+/g," ")}`),B("render"));const J={...r},xe=parseFloat(pe);isNaN(xe)||(J.exposure=xe);const st=parseFloat(Xe),et=parseFloat(xt);!isNaN(st)&&!isNaN(et)&&(J.wbGains=[st,et]),J.demosaicMethod=bt,J.renderMode="standard";const yt=hi();yt?J.blackLevel=yt:delete J.blackLevel;const Dt=Se.trim().replace(/[\s,\n]+/g," ");if(Dt){const Er=Dt.split(" ").map(Number);Er.length===9&&!Er.some(isNaN)?J.customMatrix=Er:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete J.customMatrix;J.showKadc=_t,J.subtractBlackLevelFromStats=Sr,n(J)},q=()=>{ln(W||!1),jr(!0)},de=J=>{B&&(pe!=="0"&&B(`ev ${pe}`),(Xe!=="1.0"||xt!=="1.0")&&B(`wb ${Xe} ${xt}`),Ae!=="0 0 0 0"&&Ae!==""&&B(`bl ${Ae}`),B(J==="bilinear"?"render zero color":"render zero"));const xe={...r},st=hi();st&&(xe.blackLevel=st);const et=parseFloat(Xe),yt=parseFloat(xt);!isNaN(et)&&!isNaN(yt)&&(xe.wbGains=[et,yt]);const Dt=parseFloat(pe);if(isNaN(Dt)||(xe.exposure=Dt),J==="bilinear"){const Er=Se.trim().replace(/[\s,\n]+/g," ");if(Er){const cn=Er.split(" ").map(Number);cn.length===9&&!cn.some(isNaN)&&(xe.customMatrix=cn)}xe.isBGGR=Ur}xe.renderMode=J==="mosaic"?"zero-dependency":"zero-dep-color",xe.showKadc=_t,xe.subtractBlackLevelFromStats=Sr,jr(!1),n(xe)},ye=()=>{const J=Ln(Vt),xe=Ln(vr),st=Ln(Ft);if(!J||!xe||!st){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}B&&(pe!=="0"&&B(`ev ${pe}`),B(`render unmix ${J.join(" ")} ${xe.join(" ")} ${st.join(" ")}`));const et={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:J,bg:xe,fg:st}};et.showKadc=_t,et.subtractBlackLevelFromStats=Sr,n(et)},X=()=>{if(L){const J=L.means,xe=[J[0],J[1],J[3],J[2]].map(st=>st.toFixed(1));Qr(xe.join(" "))}else alert("Please select an ROI on the image first.")},je=()=>{if(L){const J=L.means,xe=[J[0],J[1],J[3],J[2]].map(st=>st.toFixed(1));Jr(xe.join(" "))}else alert("Please select an ROI on the image first.")},Ze=J=>{J.target.files&&J.target.files.length>0&&v&&(v(J.target.files,Cn),B==null||B(`drlab batch ${Cn}`)),J.target.value="",In(!1)},it=async J=>{var st;const xe=(st=J.target.files)==null?void 0:st[0];if(!(!xe||!H)){try{const yt=(await xe.text()).split(`
`),Dt=[];let Er=!1;for(let cn of yt){if(cn=cn.trim(),!cn)continue;if(cn.toLowerCase().startsWith("index")){Er=!0;continue}const On=cn.split(",").map(Number);if(On.length>=5){const Bn=On[1],un=On[2],sa=On[3],tr=On[4],Ai=On[5];!isNaN(Bn)&&!isNaN(un)&&!isNaN(sa)&&!isNaN(tr)&&Dt.push({x:Bn,y:un,w:sa,h:tr,ori:isNaN(Ai)?void 0:Ai})}}H(Dt),alert(`Imported ${Dt.length} ROIs successfully.`)}catch(et){console.error("Import failed",et),alert("Failed to import CSV: "+et.message)}J.target.value=""}},dt=async J=>{var st;const xe=(st=J.target.files)==null?void 0:st[0];if(xe){try{const yt=(await xe.text()).split(`
`),Dt=[];Dt.push("#BlackLevel: 0,0,0,0"),Dt.push("#ImageHeight: 0"),Dt.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let Er=1;for(let un=0;un<yt.length;un++){const sa=yt[un].trim();if(!sa||sa.includes("R_mean")||sa.includes("R_std"))continue;const tr=sa.split(/\s+/).map(Number);if(tr.length<8||tr.some(isNaN))continue;const Ai=[Er,1,tr[0],tr[2],tr[6],tr[4],tr[1],tr[3],tr[7],tr[5]].join(",");Dt.push(Ai),Er++}const cn=new Blob([Dt.join(`
`)],{type:"text/csv"}),On=URL.createObjectURL(cn),Bn=document.createElement("a");Bn.href=On,Bn.download=xe.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(Bn),Bn.click(),document.body.removeChild(Bn),URL.revokeObjectURL(On)}catch(et){console.error("Conversion failed",et),alert("Failed to convert file.")}J.target.value=""}},pt=J=>{J.target.files&&J.target.files[0]&&(tn(J.target.files[0]),B==null||B("fft load a"))},ct=J=>{J.target.files&&J.target.files[0]&&(ia(J.target.files[0]),B==null||B("fft load b"))},Ht=()=>{Wr&&rn&&C&&(C(Wr,rn,xl,Pn),B==null||B("fft run"))},Ve=J=>{J.target.files&&J.target.files.length>0&&j&&(j(J.target.files),B==null||B("fft batch")),J.target.value=""},Ut=J=>{J.target.files&&J.target.files.length>0&&S&&(S(J.target.files),B==null||B("fft stack")),J.target.value=""},Je=()=>{Ne&&(Ne({useNR:cr,useDeshading:Ee,greenOnly:gt}),B==null||B("batch compute"))},be=(J,xe,st)=>{ue&&ue(J,xe,st)},nt=Vt.trim()!==""&&vr.trim()!==""&&Ft.trim()!=="",Ke=r.renderMode==="advanced-zero-dep";return c.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[M&&c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[c.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),c.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),Oe&&!D&&c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),c.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),D&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),c.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),I&&c.jsx(_l,{title:"SFR Lab Tools (Scalar Unmixing)",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),c.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),Ke&&c.jsxs("div",{className:"border-t border-orange-200 dark:border-orange-800 pt-3",children:[c.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>_r(!xr),children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase",children:" (Batch Ops)"}),c.jsx("svg",{className:`w-4 h-4 text-orange-500 transition-transform ${xr?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),xr&&c.jsxs("div",{className:"mt-3 space-y-3 bg-white/50 dark:bg-black/20 p-2 rounded animate-in slide-in-from-top-1",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Standard Chart)"}),c.jsx("button",{onClick:ge,disabled:!!ie&&ie>0,className:`w-full py-2 border font-bold text-xs rounded transition-all ${ie&&ie>0?"bg-emerald-600 text-white border-emerald-500 animate-pulse":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:ie&&ie>0?`Click ${ie===1?"TL":ie===2?"TR":ie===3?"BL":"BR"}`:"Start Calibration (4-Pts)"}),!!ie&&ie>0&&c.jsx("p",{className:"text-[9px] text-emerald-600 dark:text-emerald-400 font-bold text-center",children:"Click corners: TopLeft  TopRight  BottomLeft  BottomRight"})]}),c.jsx("div",{className:"h-px bg-gray-300 dark:bg-slate-600 w-full"}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Manual Mark)"}),ae!==void 0&&ae>0&&c.jsxs("span",{className:"text-[9px] text-orange-500 font-bold",children:[ae," Selected"]})]}),c.jsx("button",{onClick:Q,className:`w-full py-2 font-bold text-xs rounded shadow transition-all ${re?"bg-orange-600 hover:bg-orange-500 text-white ring-2 ring-orange-300":"bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:re?"Stop Marking (Active)":"Start Batch Marking"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:ne,disabled:!ae,className:"flex-1 py-1.5 border border-indigo-300 dark:border-indigo-700 text-indigo-700 dark:text-indigo-400 font-bold text-[10px] rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})," (Save)"]}),c.jsx("input",{type:"file",ref:Zi,className:"hidden",accept:".csv",onChange:it}),c.jsxs("button",{onClick:()=>{var J;return(J=Zi.current)==null?void 0:J.click()},className:"flex-1 py-1.5 border border-emerald-300 dark:border-emerald-700 text-emerald-700 dark:text-emerald-400 font-bold text-[10px] rounded hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-colors flex items-center justify-center gap-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})," (Import)"]})]}),ae!==void 0&&ae>0&&c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800/50 p-2 rounded border border-gray-200 dark:border-slate-700 mt-1",children:[c.jsx("div",{className:"text-[9px] font-bold text-gray-500 text-center mb-1",children:"UNIFIED TRANSFORM"}),c.jsxs("div",{className:"flex gap-2 mb-2 justify-center",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400",children:"Step (px)"}),c.jsx("input",{type:"number",min:"1",value:At,onChange:J=>qt(Number(J.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400",children:"Scale"}),c.jsx("input",{type:"number",step:"0.01",value:er,onChange:J=>qe(Number(J.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("button",{onClick:()=>be("scale",1/er,1/er),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom Out (Shrink)",children:"-"}),c.jsx("button",{onClick:()=>be("move",0,-At),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("button",{onClick:()=>be("scale",er,er),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom In (Expand)",children:"+"}),c.jsx("button",{onClick:()=>be("move",-At,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("div",{className:"text-center text-[8px] text-gray-400 flex items-center justify-center",children:"Move"}),c.jsx("button",{onClick:()=>be("move",At,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>be("move",0,At),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("div",{})]})]}),re&&c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center mt-1",children:"Hold Shift + Drag on canvas to add multiple ROIs."}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] mt-2 bg-gray-100 dark:bg-slate-800/50 p-2 rounded",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:cr,onChange:J=>A(J.target.checked),className:"rounded text-orange-500"}),"Jiang Official NR"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ee,onChange:J=>ot(J.target.checked),className:"rounded text-purple-500"}),"Deshading"]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 my-1"}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",title:"Only use Green channel points for projection (reduces color moire issues)",children:[c.jsx("input",{type:"checkbox",checked:gt,onChange:J=>St(J.target.checked),className:"rounded text-emerald-500"}),c.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:"Green Channel Only (G Only)"})]})]}),c.jsxs("button",{onClick:Je,disabled:!ae,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold text-xs rounded shadow transition-transform active:scale-95",children:["Calculate & Copy (",ae||0,")"]}),c.jsx("button",{onClick:le,disabled:!ae,className:"w-full py-1.5 bg-gray-200 dark:bg-slate-700 hover:bg-red-100 hover:text-red-600 text-[10px] font-bold rounded transition-colors disabled:opacity-50",children:"Clear All Marks"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsx(am,{checked:lt,onChange:Wt,label:" (Scalar Unmixing)"}),lt&&c.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[c.jsx("div",{className:"col-span-1",children:"Param"}),c.jsx("div",{className:"text-center",children:"Ch0(R)"}),c.jsx("div",{className:"text-center",children:"Ch1(G1)"}),c.jsx("div",{className:"text-center",children:"Ch2(B)"}),c.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),c.jsx("input",{type:"text",value:Vt,onChange:J=>Tr(J.target.value),placeholder:"0 0 0 0",className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:vr,onChange:J=>Qr(J.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:X,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Ft,onChange:J=>Jr(J.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:je,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsx("button",{onClick:ye,disabled:!ee||!nt,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed",children:"RUN UNMIXING (ADV ZERO-DEP)"}),c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),k&&c.jsx(_l,{title:"FFT Lab (Noise Profile)",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:$t,className:"hidden",onChange:pt,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var J;return(J=$t.current)==null?void 0:J.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${Wr?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:Wr?`A: ${Wr.name}`:"Load Image A"}),c.jsx("input",{type:"file",ref:zt,className:"hidden",onChange:ct,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var J;return(J=zt.current)==null?void 0:J.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${rn?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:rn?`B: ${rn.name}`:"Load Image B"})]}),c.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Pn,onChange:J=>li(J.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:Ht,disabled:!Wr||!rn,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),c.jsx("input",{type:"file",ref:Lt,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Ve}),c.jsx("button",{onClick:()=>{var J;return(J=Lt.current)==null?void 0:J.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:we,className:"hidden",multiple:!0,onChange:Ut,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var J;return(J=we.current)==null?void 0:J.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("button",{onClick:()=>{N==null||N(),B==null||B("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:()=>{ve==null||ve(),B==null||B("stack tool")},className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:" (General Stack)"})]})]})}),s&&c.jsx(_l,{title:"DR Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>{f==null||f(),B==null||B("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),p&&d!==void 0&&c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),c.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:J=>p(parseInt(J.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),c.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),b&&w&&m!==void 0&&x!==void 0&&c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:"Layout:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"1",max:"50",value:m,onChange:J=>b(Math.max(1,parseInt(J.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),c.jsx("span",{className:"text-xs text-gray-400",children:"x"}),c.jsx("input",{type:"number",min:"1",max:"50",value:x,onChange:J=>w(Math.max(1,parseInt(J.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>{u==null||u(),B==null||B("mark")},disabled:!ee||l!==void 0&&l>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${ee?l&&l>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l>0?"Marking Active...":"Mark Corners"}),v&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",ref:va,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Ze}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>In(!en),disabled:!y,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),en&&c.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var J;ya("single"),(J=va.current)==null||J.click()},children:"1. Independent Frames"}),c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var J;ya("pair"),(J=va.current)==null||J.click()},children:"2. Pair Difference (A-B)"})]})]})]}),c.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("input",{type:"file",ref:ci,className:"hidden",accept:".txt",onChange:dt}),c.jsx("button",{onClick:()=>{var J;return(J=ci.current)==null?void 0:J.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),l!==void 0&&l>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[l===1&&"Click Top-Left Center",l===2&&"Click Top-Right Center",l===3&&"Click Bottom-Left Center",l===4&&"Click Bottom-Right Center"]})})]})]})}),G&&c.jsx(_l,{title:"Color Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),c.jsx("button",{onClick:()=>{F==null||F(),B==null||B("cl mark")},disabled:!ee||z!==void 0&&z>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${ee?z&&z>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:z&&z>0?"Marking Active...":"Mark 24-Patch Chart"}),z!==void 0&&z>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[z===1&&"Click Top-Left (Brown)",z===2&&"Click Top-Right (Cyanish)",z===3&&"Click Bottom-Left (White)",z===4&&"Click Bottom-Right (Black)"]})})]})}),c.jsx(_l,{title:"Selection Tools",children:c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),c.jsx("input",{type:"number",min:"1",value:Gt,onChange:J=>Qe(J.target.value),disabled:!ee,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:ys,disabled:!ee,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),c.jsx("button",{onClick:xa,disabled:!ee,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),c.jsx(_l,{title:"Display Controls",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",c.jsx("b",{children:"Apply"}),"."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!ee,value:parseFloat(pe)||0,onChange:J=>Nn(J.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{id:"exposure",type:"number",step:"0.1",value:pe,onChange:J=>Nn(J.target.value),disabled:!ee,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),Te&&c.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[c.jsx(am,{checked:!!D,onChange:J=>{E&&E(J),B==null||B(`xtrans ${J?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),D&&R&&T&&c.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:R.x,onChange:J=>{const xe=Math.min(5,Math.max(0,parseInt(J.target.value)||0));T({x:xe}),B==null||B(`xtrans phase ${xe} ${R.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:R.y,onChange:J=>{const xe=Math.min(5,Math.max(0,parseInt(J.target.value)||0));T({y:xe}),B==null||B(`xtrans phase ${R.x} ${xe}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),c.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx(am,{checked:_t,onChange:ar,label:"Show k"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),c.jsxs("div",{children:[c.jsxs("button",{onClick:oa,disabled:!ee||!L,className:"w-full mb-3 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded shadow-sm transition-all active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",title:"Calculate Gains to make the selected area neutral gray, accounting for Color Matrix",children:[c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Spot WB (Matrix-Aware)"]}),c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),c.jsx("input",{type:"number",step:"0.01",value:Xe,onChange:J=>Aa(J.target.value),disabled:!ee,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),c.jsx("input",{type:"number",step:"0.01",value:xt,onChange:J=>ui(J.target.value),disabled:!ee,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",c.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),c.jsx("button",{onClick:()=>zr(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[c.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),c.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${Sr?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>ir(!Sr),children:c.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${Sr?"translate-x-4":"translate-x-0"}`})})]})]}),c.jsx("input",{type:"text",value:Ae,onChange:J=>Re(J.target.value),disabled:!ee,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[c.jsx("span",{children:"Custom Color Matrix"}),c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:J=>{const xe=cc[J.target.value];xe&&me(xe),J.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),Ct.map(J=>c.jsx("option",{value:J,children:J},J))]})]}),c.jsx("textarea",{id:"customMatrix",value:Se,onChange:Mi,disabled:!ee,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[c.jsx("button",{onClick:q,disabled:!ee,className:"w-full text-sm font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-4 rounded-xl flex items-center justify-center border-2 border-slate-500 shadow-lg",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:c.jsxs("span",{className:"text-center leading-tight",children:["Apply Settings/Render",c.jsx("br",{}),c.jsx("span",{className:"text-xs font-normal opacity-90",children:"CM"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>lr(!0),disabled:!ee,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed py-3 px-2 rounded-lg transition-all active:scale-95 border border-gray-700",children:["",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] font-normal opacity-75",children:""})]}),c.jsx("button",{onClick:()=>K==null?void 0:K(),disabled:!ee,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-all py-3 rounded-lg flex items-center justify-center border border-gray-700 active:scale-95",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:"Generate 16bit DNG"})]}),c.jsx("div",{className:"text-center pt-1",children:c.jsx("button",{onClick:di,disabled:!ee,className:"text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors underline decoration-gray-300 hover:decoration-gray-600 underline-offset-2",children:"Reset Defaults (Local)"})})]})]})})]}),c.jsx(ts,{isOpen:mt,onClose:()=>zr(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),zr(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[c.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("p",{className:"leading-relaxed",children:["Autofills. If no result is found or it's wrong or not precise enough, please check the ",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame(close the lens cap) with the same ISO/speed setting to calculate the average (using jiangtherapee) and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),c.jsx(ts,{isOpen:Be,onClose:()=>jr(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),c.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[c.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Bayer Pattern"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>ln(!1),className:`px-3 py-1 text-[10px] font-bold rounded transition-all ${Ur?"text-gray-500 dark:text-slate-400":"bg-white dark:bg-slate-600 text-cyan-600 dark:text-cyan-400 shadow-sm"}`,children:"RGGB"}),c.jsx("button",{onClick:()=>ln(!0),className:`px-3 py-1 text-[10px] font-bold rounded transition-all ${Ur?"bg-white dark:bg-slate-600 text-cyan-600 dark:text-cyan-400 shadow-sm":"text-gray-500 dark:text-slate-400"}`,children:"BGGR"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>de("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),c.jsxs("button",{onClick:()=>de("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),c.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),c.jsx(ts,{isOpen:Gr,onClose:()=>lr(!1),onConfirm:()=>{vs(),lr(!1)},title:"Official Render Options",confirmText:"Render",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),c.jsx("select",{id:"demosaic-modal",value:bt,onChange:fi,disabled:!ee||M||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:KA.map(J=>c.jsx("option",{value:J.value,children:J.label},J.value))}),M&&c.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&c.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},qA=P.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:l,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:p,onToggleXTrans:m,onXTransPhaseChange:b}=e,[x,w]=P.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[v,y]=P.useState(""),[k,C]=P.useState([]),[j,S]=P.useState(-1),N=P.useRef(null),M=P.useRef(null),E=P.useRef(null),R=P.useRef(null),T=P.useRef(null),D=P.useRef(null),B=P.useRef(null),G=P.useRef(null);P.useRef(null);const z=P.useRef({...n});P.useEffect(()=>{z.current={...n}},[n.exposure,n.demosaicMethod]);const F=P.useRef({fileA:null,fileB:null});P.useLayoutEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[x]);const I=(Q,le="out")=>{w(Ne=>[...Ne,{id:Date.now().toString()+Math.random(),type:le,text:Q}])};P.useImperativeHandle(t,()=>({log:(Q,le="in")=>{const Ne=le;let ie=Q;le==="in"&&!Q.startsWith(">")&&(ie=`> ${Q}`),I(ie,Ne)}}));const L=P.useRef(null);P.useEffect(()=>{if(e.roiStats&&e.roiStats!==L.current){const Q=e.roiStats,le=Math.round(Q.x),Ne=Math.round(Q.y),ie=Math.round(Q.width),ge=Math.round(Q.height);I(`> sel ${le} ${Ne} ${ie} ${ge}`,"in");const ne=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],H=c.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[c.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",le,", ",Ne,", ",ie,"x",ge,"]:"]}),c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[c.jsx("div",{children:"Ch"}),c.jsx("div",{className:"text-right",children:"Mean"}),c.jsx("div",{className:"text-right",children:"StdDev"})]}),ne.map(ue=>c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[c.jsx("div",{className:ue.name==="R"?"text-red-500":ue.name==="B"?"text-blue-500":"text-green-500",children:ue.name}),c.jsx("div",{className:"text-right text-gray-300",children:Q.means[ue.idx].toFixed(2)}),c.jsx("div",{className:"text-right text-gray-400",children:Q.stdDevs[ue.idx].toFixed(2)})]},ue.name))]});I(H,"out"),L.current=Q}},[e.roiStats,e.isBGGR]);const W=Q=>{var ge,ne,H,ue,ve,ee,Oe;const le=Q.trim().split(/\s+/),Ne=le[0].toLowerCase(),ie=le.slice(1);switch(Ne){case"help":I("Available Commands:","info"),I("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),I("  wb <r> <b>        Set WB Gains","info"),I("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),I("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),I("  matrix <n1..n9>   Set Custom Color Matrix","info"),I("  xtrans <on|off>   Force X-Trans Mode","info"),I("  xtrans phase <x> <y>  Set X-Trans Phase","info"),I("  render            Apply settings & Render","info"),I("  render zero       Zero-Dependency Render","info"),I("  render unmix      Advanced Unmixing Render","info"),I("  sel <full|center> Select ROI","info"),I("  sel <x> <y> <w> <h> Select ROI manually","info"),I("  mark              Start DR Lab Corner Marking","info"),I("  gen test          Generate Test Pattern","info"),I("  fft load <a>      Load FFT Pair Image A","info"),I("  fft load <b>      Load FFT Pair Image B","info"),I("  fft run           Run FFT Pair Diff","info"),I("  cls               Clear Screen","info");break;case"cls":case"clear":w([]);break;case"ev":case"exposure":if(ie.length<1){I(`Current EV: ${z.current.exposure}`,"info");return}const Te=parseFloat(ie[0]);if(isNaN(Te)){I("Invalid EV value","err");return}z.current.exposure=Te,I(`EV set to ${Te} (run 'render' to apply)`);break;case"wb":if(ie.length<2){I("Usage: wb <red_gain> <blue_gain>","err");return}const pe=parseFloat(ie[0]),Me=parseFloat(ie[1]);if(isNaN(pe)||isNaN(Me)){I("Invalid gains","err");return}z.current.wbGains=[pe,Me],I(`WB set to R:${pe} B:${Me}`);break;case"bl":case"black":if(ie.length===0){I(`Current BL: ${((ge=z.current.blackLevel)==null?void 0:ge.join(" "))||"Auto"}`,"info");return}let Se=ie.map(Number);if(Se.some(isNaN)){I("Invalid numbers","err");return}if(Se.length===1&&(Se=[Se[0],Se[0],Se[0],Se[0]]),Se.length<4){I("Need 1 or 4 values","err");return}z.current.blackLevel=[Se[0],Se[1],Se[2],Se[3]],z.current.subtractBlackLevelFromStats=!0,z.current.showKadc=!0,I(`Black Level set: ${Se.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if(ie.length===0){I("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const me=parseInt(ie[0]);if(isNaN(me)){I("Invalid method ID","err");return}z.current.demosaicMethod=me,I(`Demosaic set to ID ${me}`);break;case"matrix":if(ie.length!==9){I("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const Ae=ie.map(Number);if(Ae.some(isNaN)){I("Invalid matrix values","err");return}z.current.customMatrix=Ae,I("Custom Color Matrix set.");break;case"xtrans":if(ie[0]==="on"||ie[0]==="true")m?(m(!0),I("X-Trans conversion ON")):I("Feature not available","err");else if(ie[0]==="off"||ie[0]==="false")m?(m(!1),I("X-Trans conversion OFF")):I("Feature not available","err");else if(ie[0]==="phase"){if(ie.length<3){I("Usage: xtrans phase <x> <y>","err");return}const Re=parseInt(ie[1]),Xe=parseInt(ie[2]);b&&(b({x:Re,y:Xe}),I(`X-Trans Phase set to (${Re}, ${Xe})`))}else I("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if(ie[0]==="zero"){const Re=ie[1]==="color"?"zero-dep-color":"zero-dependency";z.current.renderMode=Re,I(`Rendering Zero-Dependency (${Re})...`)}else if(ie[0]==="unmix"){if(ie.length<13){I("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const Re=ie.slice(1).map(Number);if(Re.some(isNaN)){I("Invalid params","err");return}z.current.renderMode="advanced-zero-dep",z.current.advancedZeroDep={bl:[Re[0],Re[1],Re[2],Re[3]],bg:[Re[4],Re[5],Re[6],Re[7]],fg:[Re[8],Re[9],Re[10],Re[11]]},I("Rendering Advanced Unmix...")}else z.current.renderMode="standard",I("Rendering Standard Pipeline...");a({...z.current});break;case"sel":case"select":if(!r||!i){I("No image loaded","err");return}if(ie[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if(ie[0]==="center"){const Re=parseInt(ie[1])||64,Xe=Math.floor((r.width-Re)/2),kt=Math.floor((r.height-Re)/2);i({x:Xe,y:kt,w:Re,h:Re})}else if(ie.length===4){const[Re,Xe,kt,xt]=ie.map(Number);if([Re,Xe,kt,xt].some(isNaN)){I("Invalid coordinates","err");return}i({x:Re,y:Xe,w:kt,h:xt})}else I("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),I("Interactive marking started. Click 4 corners on canvas."));break;case"gen":(ie[0]==="test"||ie[0]==="pattern")&&s&&(s(),I("Generated Test Pattern"));break;case"drlab":if(ie[0]==="config"){const[Re,Xe,kt]=ie.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(Re||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(Xe||10),e.onDrGridColsChange&&e.onDrGridColsChange(kt||10),I(`DR Grid Configured: Size=${Re}, Grid=${Xe}x${kt}`)}else ie[0]==="batch"&&(ie[1]==="pair"?(I("Select file pairs for DR Lab..."),(ne=R.current)==null||ne.click()):(I("Select single files for DR Lab..."),(H=E.current)==null||H.click()));break;case"fft":ie[0]==="load"?ie[1]==="a"?(ue=T.current)==null||ue.click():ie[1]==="b"?(ve=D.current)==null||ve.click():I("Usage: fft load <a|b>","err"):ie[0]==="run"?F.current.fileA&&F.current.fileB&&u?(I(`Processing Pair: ${F.current.fileA.name} - ${F.current.fileB.name}`),u(F.current.fileA,F.current.fileB,!1,!0)):I("Load both A and B first","err"):ie[0]==="stack"?(I("Select files for Stack FFT..."),(ee=B.current)==null||ee.click()):ie[0]==="batch"&&(I("Select files for Batch Diff...","info"),(Oe=G.current)==null||Oe.click());break;case"crosscalc":p&&(p(),I("Opened Cross-Calculator"));break;default:I(`Unknown command: ${Ne}`,"err")}},K=Q=>{if(Q.key==="Enter"){const le=v.trim();if(!le)return;I(`> ${le}`,"in"),le.split(";").forEach(ie=>{ie.trim()&&W(ie.trim())}),C(ie=>[...ie,le]),S(-1),y("")}else if(Q.key==="ArrowUp"){if(Q.preventDefault(),k.length>0){const le=j===-1?k.length-1:Math.max(0,j-1);S(le),y(k[le])}}else if(Q.key==="ArrowDown")if(Q.preventDefault(),j!==-1){const le=Math.min(k.length-1,j+1);S(le),y(k[le])}else y("")},ae=(Q,le)=>{Q.target.files&&Q.target.files.length>0&&l&&(I(`Batch processing ${Q.target.files.length} files in ${le} mode...`),l(Q.target.files,le)),Q.target.value=""},re=(Q,le)=>{var ie;const Ne=(ie=Q.target.files)==null?void 0:ie[0];Ne&&(le==="A"?F.current.fileA=Ne:F.current.fileB=Ne,I(`Loaded ${le}: ${Ne.name}`)),Q.target.value=""};return c.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[c.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[c.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),c.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),c.jsx("div",{ref:N,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:x.map(Q=>c.jsxs("div",{className:`mb-1 ${Q.type==="in"?"opacity-50":""} ${Q.type==="err"?"text-red-500":""} ${Q.type==="info"?"text-cyan-400":""}`,children:[Q.type!=="in"&&typeof Q.text=="string"&&!Q.text.startsWith(">")&&c.jsx("span",{className:"mr-2 opacity-50",children:">"}),Q.text]},Q.id))}),c.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[c.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),c.jsx("input",{ref:M,type:"text",value:v,onChange:Q=>y(Q.target.value),onKeyDown:K,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),c.jsx("input",{type:"file",ref:E,className:"hidden",multiple:!0,onChange:Q=>ae(Q,"single")}),c.jsx("input",{type:"file",ref:R,className:"hidden",multiple:!0,onChange:Q=>ae(Q,"pair")}),c.jsx("input",{type:"file",ref:T,className:"hidden",onChange:Q=>re(Q,"A")}),c.jsx("input",{type:"file",ref:D,className:"hidden",onChange:Q=>re(Q,"B")}),c.jsx("input",{type:"file",ref:B,className:"hidden",multiple:!0,onChange:Q=>{e.onProcessStackFft&&Q.target.files&&(I(`Loading ${Q.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(Q.target.files)),Q.target.value=""}}),c.jsx("input",{type:"file",ref:G,className:"hidden",multiple:!0,onChange:Q=>{e.onProcessBatchDiff&&Q.target.files&&(I("Starting Batch Diff..."),e.onProcessBatchDiff(Q.target.files)),Q.target.value=""}})]})}),ZA=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(p=>d[p]=l),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d.some(p=>p>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},QA=e=>{const[t,r]=P.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,l=P.useRef(null),u=P.useRef(!1),f=P.useRef(null);P.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),P.useEffect(()=>{var p;if(i&&n&&!u.current){u.current=!0;const m=ZA(n,a),b=m&&m.some(x=>x>0);if(m&&b){console.log("[AutoApply] Detected Black Levels via Bridge:",m),(p=l.current)==null||p.log(`Auto-detected BL: ${m.join(" ")}`,"info");const x={...o,blackLevel:m,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};s(x)}}},[i,n,a,o,s]);const d=p=>{l.current&&l.current.log(p,"in")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[c.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),c.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),c.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[c.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:c.jsx(YA,{...e,onCommand:d})}),c.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:c.jsx(qA,{...e,ref:l})})]})]})},JA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),e6=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),t6=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),r6=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),n6=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Iy=.1,Ly=16,a6=Math.log(Iy),i6=Math.log(Ly),o6=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Iy,Math.min(Ly,d)))},o=()=>{t(Math.min(Ly,e*1.25))},s=()=>{t(Math.max(Iy,e/1.25))},l=Math.log(e);return c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[c.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:c.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?c.jsx(n6,{}):c.jsx(r6,{})})}),c.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[c.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:c.jsx(JA,{})}),c.jsx("input",{type:"range",min:a6,max:i6,step:"0.01",value:l,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),c.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:c.jsx(e6,{})}),c.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),c.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:c.jsx(t6,{})})]})]})},s6=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return c.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function Dj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Dj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function It(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Dj(e))&&(n&&(n+=" "),n+=t);return n}var l6=Array.isArray,Ma=l6,c6=typeof xd=="object"&&xd&&xd.Object===Object&&xd,Rj=c6,u6=Rj,f6=typeof self=="object"&&self&&self.Object===Object&&self,d6=u6||f6||Function("return this")(),qi=d6,h6=qi,p6=h6.Symbol,td=p6,cw=td,Ij=Object.prototype,g6=Ij.hasOwnProperty,m6=Ij.toString,mu=cw?cw.toStringTag:void 0;function y6(e){var t=g6.call(e,mu),r=e[mu];try{e[mu]=void 0;var n=!0}catch{}var a=m6.call(e);return n&&(t?e[mu]=r:delete e[mu]),a}var v6=y6,x6=Object.prototype,b6=x6.toString;function w6(e){return b6.call(e)}var k6=w6,uw=td,S6=v6,j6=k6,_6="[object Null]",C6="[object Undefined]",fw=uw?uw.toStringTag:void 0;function P6(e){return e==null?e===void 0?C6:_6:fw&&fw in Object(e)?S6(e):j6(e)}var _o=P6;function N6(e){return e!=null&&typeof e=="object"}var Co=N6,O6=_o,M6=Co,A6="[object Symbol]";function T6(e){return typeof e=="symbol"||M6(e)&&O6(e)==A6}var zc=T6,E6=Ma,$6=zc,D6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R6=/^\w*$/;function I6(e,t){if(E6(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||$6(e)?!0:R6.test(e)||!D6.test(e)||t!=null&&e in Object(t)}var b1=I6;function L6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var fs=L6;const Uc=mr(fs);var B6=_o,F6=fs,z6="[object AsyncFunction]",U6="[object Function]",G6="[object GeneratorFunction]",W6="[object Proxy]";function V6(e){if(!F6(e))return!1;var t=B6(e);return t==U6||t==G6||t==z6||t==W6}var w1=V6;const jt=mr(w1);var H6=qi,X6=H6["__core-js_shared__"],K6=X6,om=K6,dw=function(){var e=/[^.]+$/.exec(om&&om.keys&&om.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Y6(e){return!!dw&&dw in e}var q6=Y6,Z6=Function.prototype,Q6=Z6.toString;function J6(e){if(e!=null){try{return Q6.call(e)}catch{}try{return e+""}catch{}}return""}var Lj=J6,eT=w1,tT=q6,rT=fs,nT=Lj,aT=/[\\^$.*+?()[\]{}|]/g,iT=/^\[object .+?Constructor\]$/,oT=Function.prototype,sT=Object.prototype,lT=oT.toString,cT=sT.hasOwnProperty,uT=RegExp("^"+lT.call(cT).replace(aT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fT(e){if(!rT(e)||tT(e))return!1;var t=eT(e)?uT:iT;return t.test(nT(e))}var dT=fT;function hT(e,t){return e==null?void 0:e[t]}var pT=hT,gT=dT,mT=pT;function yT(e,t){var r=mT(e,t);return gT(r)?r:void 0}var hl=yT,vT=hl,xT=vT(Object,"create"),xp=xT,hw=xp;function bT(){this.__data__=hw?hw(null):{},this.size=0}var wT=bT;function kT(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ST=kT,jT=xp,_T="__lodash_hash_undefined__",CT=Object.prototype,PT=CT.hasOwnProperty;function NT(e){var t=this.__data__;if(jT){var r=t[e];return r===_T?void 0:r}return PT.call(t,e)?t[e]:void 0}var OT=NT,MT=xp,AT=Object.prototype,TT=AT.hasOwnProperty;function ET(e){var t=this.__data__;return MT?t[e]!==void 0:TT.call(t,e)}var $T=ET,DT=xp,RT="__lodash_hash_undefined__";function IT(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=DT&&t===void 0?RT:t,this}var LT=IT,BT=wT,FT=ST,zT=OT,UT=$T,GT=LT;function Gc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gc.prototype.clear=BT;Gc.prototype.delete=FT;Gc.prototype.get=zT;Gc.prototype.has=UT;Gc.prototype.set=GT;var WT=Gc;function VT(){this.__data__=[],this.size=0}var HT=VT;function XT(e,t){return e===t||e!==e&&t!==t}var k1=XT,KT=k1;function YT(e,t){for(var r=e.length;r--;)if(KT(e[r][0],t))return r;return-1}var bp=YT,qT=bp,ZT=Array.prototype,QT=ZT.splice;function JT(e){var t=this.__data__,r=qT(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():QT.call(t,r,1),--this.size,!0}var eE=JT,tE=bp;function rE(e){var t=this.__data__,r=tE(t,e);return r<0?void 0:t[r][1]}var nE=rE,aE=bp;function iE(e){return aE(this.__data__,e)>-1}var oE=iE,sE=bp;function lE(e,t){var r=this.__data__,n=sE(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var cE=lE,uE=HT,fE=eE,dE=nE,hE=oE,pE=cE;function Wc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Wc.prototype.clear=uE;Wc.prototype.delete=fE;Wc.prototype.get=dE;Wc.prototype.has=hE;Wc.prototype.set=pE;var wp=Wc,gE=hl,mE=qi,yE=gE(mE,"Map"),S1=yE,pw=WT,vE=wp,xE=S1;function bE(){this.size=0,this.__data__={hash:new pw,map:new(xE||vE),string:new pw}}var wE=bE;function kE(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var SE=kE,jE=SE;function _E(e,t){var r=e.__data__;return jE(t)?r[typeof t=="string"?"string":"hash"]:r.map}var kp=_E,CE=kp;function PE(e){var t=CE(this,e).delete(e);return this.size-=t?1:0,t}var NE=PE,OE=kp;function ME(e){return OE(this,e).get(e)}var AE=ME,TE=kp;function EE(e){return TE(this,e).has(e)}var $E=EE,DE=kp;function RE(e,t){var r=DE(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var IE=RE,LE=wE,BE=NE,FE=AE,zE=$E,UE=IE;function Vc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vc.prototype.clear=LE;Vc.prototype.delete=BE;Vc.prototype.get=FE;Vc.prototype.has=zE;Vc.prototype.set=UE;var j1=Vc,Bj=j1,GE="Expected a function";function _1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(GE);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(_1.Cache||Bj),r}_1.Cache=Bj;var Fj=_1;const WE=mr(Fj);var VE=Fj,HE=500;function XE(e){var t=VE(e,function(n){return r.size===HE&&r.clear(),n}),r=t.cache;return t}var KE=XE,YE=KE,qE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZE=/\\(\\)?/g,QE=YE(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(qE,function(r,n,a,i){t.push(a?i.replace(ZE,"$1"):n||r)}),t}),JE=QE;function e8(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var C1=e8,gw=td,t8=C1,r8=Ma,n8=zc,mw=gw?gw.prototype:void 0,yw=mw?mw.toString:void 0;function zj(e){if(typeof e=="string")return e;if(r8(e))return t8(e,zj)+"";if(n8(e))return yw?yw.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var a8=zj,i8=a8;function o8(e){return e==null?"":i8(e)}var Uj=o8,s8=Ma,l8=b1,c8=JE,u8=Uj;function f8(e,t){return s8(e)?e:l8(e,t)?[e]:c8(u8(e))}var Gj=f8,d8=zc;function h8(e){if(typeof e=="string"||d8(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Sp=h8,p8=Gj,g8=Sp;function m8(e,t){t=p8(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[g8(t[r++])];return r&&r==n?e:void 0}var P1=m8,y8=P1;function v8(e,t,r){var n=e==null?void 0:y8(e,t);return n===void 0?r:n}var Wj=v8;const ri=mr(Wj);function x8(e){return e==null}var b8=x8;const vt=mr(b8);var w8=_o,k8=Ma,S8=Co,j8="[object String]";function _8(e){return typeof e=="string"||!k8(e)&&S8(e)&&w8(e)==j8}var C8=_8;const nl=mr(C8);var Vj={exports:{}},sr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=Symbol.for("react.element"),O1=Symbol.for("react.portal"),jp=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),Cp=Symbol.for("react.profiler"),Pp=Symbol.for("react.provider"),Np=Symbol.for("react.context"),P8=Symbol.for("react.server_context"),Op=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Ap=Symbol.for("react.suspense_list"),Tp=Symbol.for("react.memo"),Ep=Symbol.for("react.lazy"),N8=Symbol.for("react.offscreen"),Hj;Hj=Symbol.for("react.module.reference");function oi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case N1:switch(e=e.type,e){case jp:case Cp:case _p:case Mp:case Ap:return e;default:switch(e=e&&e.$$typeof,e){case P8:case Np:case Op:case Ep:case Tp:case Pp:return e;default:return t}}case O1:return t}}}sr.ContextConsumer=Np;sr.ContextProvider=Pp;sr.Element=N1;sr.ForwardRef=Op;sr.Fragment=jp;sr.Lazy=Ep;sr.Memo=Tp;sr.Portal=O1;sr.Profiler=Cp;sr.StrictMode=_p;sr.Suspense=Mp;sr.SuspenseList=Ap;sr.isAsyncMode=function(){return!1};sr.isConcurrentMode=function(){return!1};sr.isContextConsumer=function(e){return oi(e)===Np};sr.isContextProvider=function(e){return oi(e)===Pp};sr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===N1};sr.isForwardRef=function(e){return oi(e)===Op};sr.isFragment=function(e){return oi(e)===jp};sr.isLazy=function(e){return oi(e)===Ep};sr.isMemo=function(e){return oi(e)===Tp};sr.isPortal=function(e){return oi(e)===O1};sr.isProfiler=function(e){return oi(e)===Cp};sr.isStrictMode=function(e){return oi(e)===_p};sr.isSuspense=function(e){return oi(e)===Mp};sr.isSuspenseList=function(e){return oi(e)===Ap};sr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jp||e===Cp||e===_p||e===Mp||e===Ap||e===N8||typeof e=="object"&&e!==null&&(e.$$typeof===Ep||e.$$typeof===Tp||e.$$typeof===Pp||e.$$typeof===Np||e.$$typeof===Op||e.$$typeof===Hj||e.getModuleId!==void 0)};sr.typeOf=oi;Vj.exports=sr;var O8=Vj.exports,M8=_o,A8=Co,T8="[object Number]";function E8(e){return typeof e=="number"||A8(e)&&M8(e)==T8}var Xj=E8;const $8=mr(Xj);var D8=Xj;function R8(e){return D8(e)&&e!=+e}var I8=R8;const Hc=mr(I8);var Si=function(t){return t===0?0:t>0?1:-1},Is=function(t){return nl(t)&&t.indexOf("%")===t.length-1},Ce=function(t){return $8(t)&&!Hc(t)},L8=function(t){return vt(t)},Sn=function(t){return Ce(t)||nl(t)},B8=0,pl=function(t){var r=++B8;return"".concat(t||"").concat(r)},al=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ce(t)&&!nl(t))return n;var i;if(Is(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Hc(i)&&(i=n),a&&i>r&&(i=r),i},Ro=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},F8=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},on=function(t,r){return Ce(t)&&Ce(r)?function(n){return t+n*(r-t)}:function(){return r}};function K0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ri(n,t))===r})}var z8=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,l=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),l=Math.max(l,u);var p=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:l,a:p,b:(a-p*n)/r}},U8=function(t,r){return Ce(t)&&Ce(r)?t-r:nl(t)&&nl(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Ql(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function By(e){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(e)}var G8=["viewBox","children"],W8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],vw=["points","pathLength"],sm={svg:G8,polygon:vw,polyline:vw},M1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Y0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(P.isValidElement(t)&&(n=t.props),!Uc(n))return null;var a={};return Object.keys(n).forEach(function(i){M1.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},V8=function(t,r,n){return function(a){return t(r,n,a),null}},pf=function(t,r,n){if(!Uc(t)||By(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];M1.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=V8(o,r,n))}),a},H8=["children"],X8=["children"];function xw(e,t){if(e==null)return{};var r=K8(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function K8(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Fy(e){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fy(e)}var bw={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ho=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},ww=null,lm=null,A1=function e(t){if(t===ww&&Array.isArray(lm))return lm;var r=[];return P.Children.forEach(t,function(n){vt(n)||(O8.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),lm=r,ww=t,r};function Pa(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return ho(a)}):n=[ho(t)],A1(e).forEach(function(a){var i=ri(a,"type.displayName")||ri(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Da(e,t){var r=Pa(e,t);return r&&r[0]}var kw=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Ce(n)||n<=0||!Ce(a)||a<=0)},Y8=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],q8=function(t){return t&&t.type&&nl(t.type)&&Y8.indexOf(t.type)>=0},Kj=function(t){return t&&Fy(t)==="object"&&"clipDot"in t},Z8=function(t,r,n,a){var i,o=(i=sm==null?void 0:sm[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!jt(t)&&(a&&o.includes(r)||W8.includes(r))||n&&M1.includes(r)},wt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(P.isValidElement(t)&&(a=t.props),!Uc(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;Z8((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},zy=function e(t,r){if(t===r)return!0;var n=P.Children.count(t);if(n!==P.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Sw(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!Sw(i,o))return!1}return!0},Sw=function(t,r){if(vt(t)&&vt(r))return!0;if(!vt(t)&&!vt(r)){var n=t.props||{},a=n.children,i=xw(n,H8),o=r.props||{},s=o.children,l=xw(o,X8);return a&&s?Ql(i,l)&&zy(a,s):!a&&!s?Ql(i,l):!1}return!1},jw=function(t,r){var n=[],a={};return A1(t).forEach(function(i,o){if(q8(i))n.push(i);else if(i){var s=ho(i.type),l=r[s]||{},u=l.handler,f=l.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},Q8=function(t){var r=t&&t.type;return r&&bw[r]?bw[r]:null},J8=function(t,r){return A1(r).indexOf(t)},e$=["children","width","height","viewBox","className","style","title","desc"];function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(this,arguments)}function t$(e,t){if(e==null)return{};var r=r$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function r$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Gy(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,u=t$(e,e$),f=a||{width:r,height:n,x:0,y:0},d=It("recharts-surface",i);return Y.createElement("svg",Uy({},wt(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Y.createElement("title",null,s),Y.createElement("desc",null,l),t)}var n$=["children","className"];function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(this,arguments)}function a$(e,t){if(e==null)return{};var r=i$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Jt=Y.forwardRef(function(e,t){var r=e.children,n=e.className,a=a$(e,n$),i=It("recharts-layer",n);return Y.createElement("g",Wy({className:i},wt(a,!0),{ref:t}),r)}),po=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function o$(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var s$=o$,l$=s$;function c$(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:l$(e,t,r)}var u$=c$,f$="\\ud800-\\udfff",d$="\\u0300-\\u036f",h$="\\ufe20-\\ufe2f",p$="\\u20d0-\\u20ff",g$=d$+h$+p$,m$="\\ufe0e\\ufe0f",y$="\\u200d",v$=RegExp("["+y$+f$+g$+m$+"]");function x$(e){return v$.test(e)}var Yj=x$;function b$(e){return e.split("")}var w$=b$,qj="\\ud800-\\udfff",k$="\\u0300-\\u036f",S$="\\ufe20-\\ufe2f",j$="\\u20d0-\\u20ff",_$=k$+S$+j$,C$="\\ufe0e\\ufe0f",P$="["+qj+"]",Vy="["+_$+"]",Hy="\\ud83c[\\udffb-\\udfff]",N$="(?:"+Vy+"|"+Hy+")",Zj="[^"+qj+"]",Qj="(?:\\ud83c[\\udde6-\\uddff]){2}",Jj="[\\ud800-\\udbff][\\udc00-\\udfff]",O$="\\u200d",e_=N$+"?",t_="["+C$+"]?",M$="(?:"+O$+"(?:"+[Zj,Qj,Jj].join("|")+")"+t_+e_+")*",A$=t_+e_+M$,T$="(?:"+[Zj+Vy+"?",Vy,Qj,Jj,P$].join("|")+")",E$=RegExp(Hy+"(?="+Hy+")|"+T$+A$,"g");function $$(e){return e.match(E$)||[]}var D$=$$,R$=w$,I$=Yj,L$=D$;function B$(e){return I$(e)?L$(e):R$(e)}var F$=B$,z$=u$,U$=Yj,G$=F$,W$=Uj;function V$(e){return function(t){t=W$(t);var r=U$(t)?G$(t):void 0,n=r?r[0]:t.charAt(0),a=r?z$(r,1).join(""):t.slice(1);return n[e]()+a}}var H$=V$,X$=H$,K$=X$("toUpperCase"),Y$=K$;const $p=mr(Y$);function wr(e){return function(){return e}}const r_=Math.cos,q0=Math.sin,Oi=Math.sqrt,Z0=Math.PI,Dp=2*Z0,Xy=Math.PI,Ky=2*Xy,Ns=1e-6,q$=Ky-Ns;function n_(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Z$(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return n_;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Q${constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?n_:Z$(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,f=o-t,d=s-r,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Ns)if(!(Math.abs(d*l-u*f)>Ns)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,b=a-s,x=l*l+u*u,w=m*m+b*b,v=Math.sqrt(x),y=Math.sqrt(p),k=i*Math.tan((Xy-Math.acos((x+p-w)/(2*v*y)))/2),C=k/y,j=k/v;Math.abs(C-1)>Ns&&this._append`L${t+C*f},${r+C*d}`,this._append`A${i},${i},0,0,${+(d*m>f*b)},${this._x1=t+j*l},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,f=r+l,d=1^o,p=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Ns||Math.abs(this._y1-f)>Ns)&&this._append`L${u},${f}`,n&&(p<0&&(p=p%Ky+Ky),p>q$?this._append`A${n},${n},0,1,${d},${t-s},${r-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:p>Ns&&this._append`A${n},${n},0,${+(p>=Xy)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function T1(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Q$(t)}function E1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function a_(e){this._context=e}a_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rp(e){return new a_(e)}function i_(e){return e[0]}function o_(e){return e[1]}function s_(e,t){var r=wr(!0),n=null,a=Rp,i=null,o=T1(s);e=typeof e=="function"?e:e===void 0?i_:wr(e),t=typeof t=="function"?t:t===void 0?o_:wr(t);function s(l){var u,f=(l=E1(l)).length,d,p=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=f;++u)!(u<f&&r(d=l[u],u,l))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(d,u,l),+t(d,u,l));if(m)return i=null,m+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:wr(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:wr(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:wr(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function zd(e,t,r){var n=null,a=wr(!0),i=null,o=Rp,s=null,l=T1(u);e=typeof e=="function"?e:e===void 0?i_:wr(+e),t=typeof t=="function"?t:wr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?o_:wr(+r);function u(d){var p,m,b,x=(d=E1(d)).length,w,v=!1,y,k=new Array(x),C=new Array(x);for(i==null&&(s=o(y=l())),p=0;p<=x;++p){if(!(p<x&&a(w=d[p],p,d))===v)if(v=!v)m=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=p-1;b>=m;--b)s.point(k[b],C[b]);s.lineEnd(),s.areaEnd()}v&&(k[p]=+e(w,p,d),C[p]=+t(w,p,d),s.point(n?+n(w,p,d):k[p],r?+r(w,p,d):C[p]))}if(y)return s=null,y+""||null}function f(){return s_().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:wr(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:wr(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:wr(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:wr(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:wr(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:wr(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:wr(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class l_{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function J$(e){return new l_(e,!0)}function e7(e){return new l_(e,!1)}const $1={draw(e,t){const r=Oi(t/Z0);e.moveTo(r,0),e.arc(0,0,r,0,Dp)}},t7={draw(e,t){const r=Oi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},c_=Oi(1/3),r7=c_*2,n7={draw(e,t){const r=Oi(t/r7),n=r*c_;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},a7={draw(e,t){const r=Oi(t),n=-r/2;e.rect(n,n,r,r)}},i7=.8908130915292852,u_=q0(Z0/10)/q0(7*Z0/10),o7=q0(Dp/10)*u_,s7=-r_(Dp/10)*u_,l7={draw(e,t){const r=Oi(t*i7),n=o7*r,a=s7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Dp*i/5,s=r_(o),l=q0(o);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},cm=Oi(3),c7={draw(e,t){const r=-Oi(t/(cm*3));e.moveTo(0,r*2),e.lineTo(-cm*r,-r),e.lineTo(cm*r,-r),e.closePath()}},Ha=-.5,Xa=Oi(3)/2,Yy=1/Oi(12),u7=(Yy/2+1)*3,f7={draw(e,t){const r=Oi(t/u7),n=r/2,a=r*Yy,i=n,o=r*Yy+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(Ha*n-Xa*a,Xa*n+Ha*a),e.lineTo(Ha*i-Xa*o,Xa*i+Ha*o),e.lineTo(Ha*s-Xa*l,Xa*s+Ha*l),e.lineTo(Ha*n+Xa*a,Ha*a-Xa*n),e.lineTo(Ha*i+Xa*o,Ha*o-Xa*i),e.lineTo(Ha*s+Xa*l,Ha*l-Xa*s),e.closePath()}};function d7(e,t){let r=null,n=T1(a);e=typeof e=="function"?e:wr(e||$1),t=typeof t=="function"?t:wr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:wr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:wr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Q0(){}function J0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function f_(e){this._context=e}f_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:J0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:J0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function h7(e){return new f_(e)}function d_(e){this._context=e}d_.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:J0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p7(e){return new d_(e)}function h_(e){this._context=e}h_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:J0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g7(e){return new h_(e)}function p_(e){this._context=e}p_.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function m7(e){return new p_(e)}function _w(e){return e<0?-1:1}function Cw(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(_w(i)+_w(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Pw(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function um(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function eh(e){this._context=e}eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:um(this,this._t0,Pw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,um(this,Pw(this,r=Cw(this,e,t)),r);break;default:um(this,this._t0,r=Cw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function g_(e){this._context=new m_(e)}(g_.prototype=Object.create(eh.prototype)).point=function(e,t){eh.prototype.point.call(this,t,e)};function m_(e){this._context=e}m_.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function y7(e){return new eh(e)}function v7(e){return new g_(e)}function y_(e){this._context=e}y_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Nw(e),a=Nw(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Nw(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function x7(e){return new y_(e)}function Ip(e,t){this._context=e,this._t=t}Ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function b7(e){return new Ip(e,.5)}function w7(e){return new Ip(e,0)}function k7(e){return new Ip(e,1)}function uc(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function qy(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function S7(e,t){return e[t]}function j7(e){const t=[];return t.key=e,t}function _7(){var e=wr([]),t=qy,r=uc,n=S7;function a(i){var o=Array.from(e.apply(this,arguments),j7),s,l=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=E1(t(o));s<l;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:wr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:wr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?qy:typeof i=="function"?i:wr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??uc,a):r},a}function C7(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}uc(e,t)}}function P7(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}uc(e,t)}}function N7(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,p=f[n-1][1]||0,m=(d-p)/2,b=0;b<s;++b){var x=e[t[b]],w=x[n][1]||0,v=x[n-1][1]||0;m+=w-v}l+=d,u+=m*d}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,uc(e,t)}}function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}var O7=["type","size","sizeType"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zy.apply(this,arguments)}function Ow(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ow(Object(r),!0).forEach(function(n){M7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ow(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M7(e,t,r){return t=A7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A7(e){var t=T7(e,"string");return gf(t)=="symbol"?t:t+""}function T7(e,t){if(gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E7(e,t){if(e==null)return{};var r=$7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var v_={symbolCircle:$1,symbolCross:t7,symbolDiamond:n7,symbolSquare:a7,symbolStar:l7,symbolTriangle:c7,symbolWye:f7},D7=Math.PI/180,R7=function(t){var r="symbol".concat($p(t));return v_[r]||$1},I7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*D7;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},L7=function(t,r){v_["symbol".concat($p(t))]=r},Lp=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=E7(t,O7),u=Mw(Mw({},l),{},{type:n,size:i,sizeType:s}),f=function(){var w=R7(n),v=d7().type(w).size(I7(i,s,n));return v()},d=u.className,p=u.cx,m=u.cy,b=wt(u,!0);return p===+p&&m===+m&&i===+i?Y.createElement("path",Zy({},b,{className:It("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(m,")"),d:f()})):null};Lp.registerSymbol=L7;function fc(e){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(e)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(this,arguments)}function Aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(r),!0).forEach(function(n){mf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b_(n.key),n)}}function U7(e,t,r){return t&&z7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G7(e,t,r){return t=th(t),W7(e,x_()?Reflect.construct(t,r||[],th(e).constructor):t.apply(e,r))}function W7(e,t){if(t&&(fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V7(e)}function V7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x_=function(){return!!e})()}function th(e){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},th(e)}function H7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jy(e,t)}function Jy(e,t){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jy(e,t)}function mf(e,t,r){return t=b_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b_(e){var t=X7(e,"string");return fc(t)=="symbol"?t:t+""}function X7(e,t){if(fc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ka=32,D1=function(e){function t(){return F7(this,t),G7(this,t,arguments)}return H7(t,e),U7(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Ka/2,o=Ka/6,s=Ka/3,l=n.inactive?a:n.color;if(n.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ka,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Ka,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return Y.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ka/8,"h").concat(Ka,"v").concat(Ka*3/4,"h").concat(-Ka,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(n.legendIcon)){var u=B7({},n);return delete u.legendIcon,Y.cloneElement(n.legendIcon,u)}return Y.createElement(Lp,{fill:l,cx:i,cy:i,size:Ka,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:Ka,height:Ka},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,b){var x=m.formatter||l,w=It(mf(mf({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",m.inactive));if(m.type==="none")return null;var v=jt(m.value)?null:m.value;po(!jt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return Y.createElement("li",Qy({className:w,style:d,key:"legend-item-".concat(b)},pf(n.props,m,b)),Y.createElement(Gy,{width:o,height:o,viewBox:f,style:p},n.renderIcon(m)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},x?x(v,m,b):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(P.PureComponent);mf(D1,"displayName","Legend");mf(D1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var K7=wp;function Y7(){this.__data__=new K7,this.size=0}var q7=Y7;function Z7(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Q7=Z7;function J7(e){return this.__data__.get(e)}var e9=J7;function t9(e){return this.__data__.has(e)}var r9=t9,n9=wp,a9=S1,i9=j1,o9=200;function s9(e,t){var r=this.__data__;if(r instanceof n9){var n=r.__data__;if(!a9||n.length<o9-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new i9(n)}return r.set(e,t),this.size=r.size,this}var l9=s9,c9=wp,u9=q7,f9=Q7,d9=e9,h9=r9,p9=l9;function Xc(e){var t=this.__data__=new c9(e);this.size=t.size}Xc.prototype.clear=u9;Xc.prototype.delete=f9;Xc.prototype.get=d9;Xc.prototype.has=h9;Xc.prototype.set=p9;var w_=Xc,g9="__lodash_hash_undefined__";function m9(e){return this.__data__.set(e,g9),this}var y9=m9;function v9(e){return this.__data__.has(e)}var x9=v9,b9=j1,w9=y9,k9=x9;function rh(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new b9;++t<r;)this.add(e[t])}rh.prototype.add=rh.prototype.push=w9;rh.prototype.has=k9;var k_=rh;function S9(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var S_=S9;function j9(e,t){return e.has(t)}var j_=j9,_9=k_,C9=S_,P9=j_,N9=1,O9=2;function M9(e,t,r,n,a,i){var o=r&N9,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,p=!0,m=r&O9?new _9:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var b=e[d],x=t[d];if(n)var w=o?n(x,b,d,t,e,i):n(b,x,d,e,t,i);if(w!==void 0){if(w)continue;p=!1;break}if(m){if(!C9(t,function(v,y){if(!P9(m,y)&&(b===v||a(b,v,r,n,i)))return m.push(y)})){p=!1;break}}else if(!(b===x||a(b,x,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var __=M9,A9=qi,T9=A9.Uint8Array,E9=T9;function $9(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var D9=$9;function R9(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var R1=R9,Tw=td,Ew=E9,I9=k1,L9=__,B9=D9,F9=R1,z9=1,U9=2,G9="[object Boolean]",W9="[object Date]",V9="[object Error]",H9="[object Map]",X9="[object Number]",K9="[object RegExp]",Y9="[object Set]",q9="[object String]",Z9="[object Symbol]",Q9="[object ArrayBuffer]",J9="[object DataView]",$w=Tw?Tw.prototype:void 0,fm=$w?$w.valueOf:void 0;function eD(e,t,r,n,a,i,o){switch(r){case J9:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Q9:return!(e.byteLength!=t.byteLength||!i(new Ew(e),new Ew(t)));case G9:case W9:case X9:return I9(+e,+t);case V9:return e.name==t.name&&e.message==t.message;case K9:case q9:return e==t+"";case H9:var s=B9;case Y9:var l=n&z9;if(s||(s=F9),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=U9,o.set(e,t);var f=L9(s(e),s(t),n,a,i,o);return o.delete(e),f;case Z9:if(fm)return fm.call(e)==fm.call(t)}return!1}var tD=eD;function rD(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var C_=rD,nD=C_,aD=Ma;function iD(e,t,r){var n=t(e);return aD(e)?n:nD(n,r(e))}var oD=iD;function sD(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var lD=sD;function cD(){return[]}var uD=cD,fD=lD,dD=uD,hD=Object.prototype,pD=hD.propertyIsEnumerable,Dw=Object.getOwnPropertySymbols,gD=Dw?function(e){return e==null?[]:(e=Object(e),fD(Dw(e),function(t){return pD.call(e,t)}))}:dD,mD=gD;function yD(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var vD=yD,xD=_o,bD=Co,wD="[object Arguments]";function kD(e){return bD(e)&&xD(e)==wD}var SD=kD,Rw=SD,jD=Co,P_=Object.prototype,_D=P_.hasOwnProperty,CD=P_.propertyIsEnumerable,PD=Rw(function(){return arguments}())?Rw:function(e){return jD(e)&&_D.call(e,"callee")&&!CD.call(e,"callee")},I1=PD,nh={exports:{}};function ND(){return!1}var OD=ND;nh.exports;(function(e,t){var r=qi,n=OD,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(nh,nh.exports);var N_=nh.exports,MD=9007199254740991,AD=/^(?:0|[1-9]\d*)$/;function TD(e,t){var r=typeof e;return t=t??MD,!!t&&(r=="number"||r!="symbol"&&AD.test(e))&&e>-1&&e%1==0&&e<t}var L1=TD,ED=9007199254740991;function $D(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ED}var B1=$D,DD=_o,RD=B1,ID=Co,LD="[object Arguments]",BD="[object Array]",FD="[object Boolean]",zD="[object Date]",UD="[object Error]",GD="[object Function]",WD="[object Map]",VD="[object Number]",HD="[object Object]",XD="[object RegExp]",KD="[object Set]",YD="[object String]",qD="[object WeakMap]",ZD="[object ArrayBuffer]",QD="[object DataView]",JD="[object Float32Array]",eR="[object Float64Array]",tR="[object Int8Array]",rR="[object Int16Array]",nR="[object Int32Array]",aR="[object Uint8Array]",iR="[object Uint8ClampedArray]",oR="[object Uint16Array]",sR="[object Uint32Array]",Or={};Or[JD]=Or[eR]=Or[tR]=Or[rR]=Or[nR]=Or[aR]=Or[iR]=Or[oR]=Or[sR]=!0;Or[LD]=Or[BD]=Or[ZD]=Or[FD]=Or[QD]=Or[zD]=Or[UD]=Or[GD]=Or[WD]=Or[VD]=Or[HD]=Or[XD]=Or[KD]=Or[YD]=Or[qD]=!1;function lR(e){return ID(e)&&RD(e.length)&&!!Or[DD(e)]}var cR=lR;function uR(e){return function(t){return e(t)}}var O_=uR,ah={exports:{}};ah.exports;(function(e,t){var r=Rj,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(ah,ah.exports);var fR=ah.exports,dR=cR,hR=O_,Iw=fR,Lw=Iw&&Iw.isTypedArray,pR=Lw?hR(Lw):dR,M_=pR,gR=vD,mR=I1,yR=Ma,vR=N_,xR=L1,bR=M_,wR=Object.prototype,kR=wR.hasOwnProperty;function SR(e,t){var r=yR(e),n=!r&&mR(e),a=!r&&!n&&vR(e),i=!r&&!n&&!a&&bR(e),o=r||n||a||i,s=o?gR(e.length,String):[],l=s.length;for(var u in e)(t||kR.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||xR(u,l)))&&s.push(u);return s}var jR=SR,_R=Object.prototype;function CR(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||_R;return e===r}var PR=CR;function NR(e,t){return function(r){return e(t(r))}}var A_=NR,OR=A_,MR=OR(Object.keys,Object),AR=MR,TR=PR,ER=AR,$R=Object.prototype,DR=$R.hasOwnProperty;function RR(e){if(!TR(e))return ER(e);var t=[];for(var r in Object(e))DR.call(e,r)&&r!="constructor"&&t.push(r);return t}var IR=RR,LR=w1,BR=B1;function FR(e){return e!=null&&BR(e.length)&&!LR(e)}var rd=FR,zR=jR,UR=IR,GR=rd;function WR(e){return GR(e)?zR(e):UR(e)}var Bp=WR,VR=oD,HR=mD,XR=Bp;function KR(e){return VR(e,XR,HR)}var YR=KR,Bw=YR,qR=1,ZR=Object.prototype,QR=ZR.hasOwnProperty;function JR(e,t,r,n,a,i){var o=r&qR,s=Bw(e),l=s.length,u=Bw(t),f=u.length;if(l!=f&&!o)return!1;for(var d=l;d--;){var p=s[d];if(!(o?p in t:QR.call(t,p)))return!1}var m=i.get(e),b=i.get(t);if(m&&b)return m==t&&b==e;var x=!0;i.set(e,t),i.set(t,e);for(var w=o;++d<l;){p=s[d];var v=e[p],y=t[p];if(n)var k=o?n(y,v,p,t,e,i):n(v,y,p,e,t,i);if(!(k===void 0?v===y||a(v,y,r,n,i):k)){x=!1;break}w||(w=p=="constructor")}if(x&&!w){var C=e.constructor,j=t.constructor;C!=j&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof j=="function"&&j instanceof j)&&(x=!1)}return i.delete(e),i.delete(t),x}var eI=JR,tI=hl,rI=qi,nI=tI(rI,"DataView"),aI=nI,iI=hl,oI=qi,sI=iI(oI,"Promise"),lI=sI,cI=hl,uI=qi,fI=cI(uI,"Set"),T_=fI,dI=hl,hI=qi,pI=dI(hI,"WeakMap"),gI=pI,ev=aI,tv=S1,rv=lI,nv=T_,av=gI,E_=_o,Kc=Lj,Fw="[object Map]",mI="[object Object]",zw="[object Promise]",Uw="[object Set]",Gw="[object WeakMap]",Ww="[object DataView]",yI=Kc(ev),vI=Kc(tv),xI=Kc(rv),bI=Kc(nv),wI=Kc(av),Os=E_;(ev&&Os(new ev(new ArrayBuffer(1)))!=Ww||tv&&Os(new tv)!=Fw||rv&&Os(rv.resolve())!=zw||nv&&Os(new nv)!=Uw||av&&Os(new av)!=Gw)&&(Os=function(e){var t=E_(e),r=t==mI?e.constructor:void 0,n=r?Kc(r):"";if(n)switch(n){case yI:return Ww;case vI:return Fw;case xI:return zw;case bI:return Uw;case wI:return Gw}return t});var kI=Os,dm=w_,SI=__,jI=tD,_I=eI,Vw=kI,Hw=Ma,Xw=N_,CI=M_,PI=1,Kw="[object Arguments]",Yw="[object Array]",Ud="[object Object]",NI=Object.prototype,qw=NI.hasOwnProperty;function OI(e,t,r,n,a,i){var o=Hw(e),s=Hw(t),l=o?Yw:Vw(e),u=s?Yw:Vw(t);l=l==Kw?Ud:l,u=u==Kw?Ud:u;var f=l==Ud,d=u==Ud,p=l==u;if(p&&Xw(e)){if(!Xw(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new dm),o||CI(e)?SI(e,t,r,n,a,i):jI(e,t,l,r,n,a,i);if(!(r&PI)){var m=f&&qw.call(e,"__wrapped__"),b=d&&qw.call(t,"__wrapped__");if(m||b){var x=m?e.value():e,w=b?t.value():t;return i||(i=new dm),a(x,w,r,n,i)}}return p?(i||(i=new dm),_I(e,t,r,n,a,i)):!1}var MI=OI,AI=MI,Zw=Co;function $_(e,t,r,n,a){return e===t?!0:e==null||t==null||!Zw(e)&&!Zw(t)?e!==e&&t!==t:AI(e,t,r,n,$_,a)}var F1=$_,TI=w_,EI=F1,$I=1,DI=2;function RI(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var l=s[0],u=e[l],f=s[1];if(o&&s[2]){if(u===void 0&&!(l in e))return!1}else{var d=new TI;if(n)var p=n(u,f,l,e,t,d);if(!(p===void 0?EI(f,u,$I|DI,n,d):p))return!1}}return!0}var II=RI,LI=fs;function BI(e){return e===e&&!LI(e)}var D_=BI,FI=D_,zI=Bp;function UI(e){for(var t=zI(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,FI(a)]}return t}var GI=UI;function WI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var R_=WI,VI=II,HI=GI,XI=R_;function KI(e){var t=HI(e);return t.length==1&&t[0][2]?XI(t[0][0],t[0][1]):function(r){return r===e||VI(r,e,t)}}var YI=KI;function qI(e,t){return e!=null&&t in Object(e)}var ZI=qI,QI=Gj,JI=I1,eL=Ma,tL=L1,rL=B1,nL=Sp;function aL(e,t,r){t=QI(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=nL(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&rL(a)&&tL(o,a)&&(eL(e)||JI(e)))}var iL=aL,oL=ZI,sL=iL;function lL(e,t){return e!=null&&sL(e,t,oL)}var cL=lL,uL=F1,fL=Wj,dL=cL,hL=b1,pL=D_,gL=R_,mL=Sp,yL=1,vL=2;function xL(e,t){return hL(e)&&pL(t)?gL(mL(e),t):function(r){var n=fL(r,e);return n===void 0&&n===t?dL(r,e):uL(t,n,yL|vL)}}var bL=xL;function wL(e){return e}var Yc=wL;function kL(e){return function(t){return t==null?void 0:t[e]}}var SL=kL,jL=P1;function _L(e){return function(t){return jL(t,e)}}var CL=_L,PL=SL,NL=CL,OL=b1,ML=Sp;function AL(e){return OL(e)?PL(ML(e)):NL(e)}var TL=AL,EL=YI,$L=bL,DL=Yc,RL=Ma,IL=TL;function LL(e){return typeof e=="function"?e:e==null?DL:typeof e=="object"?RL(e)?$L(e[0],e[1]):EL(e):IL(e)}var ds=LL;function BL(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var I_=BL;function FL(e){return e!==e}var zL=FL;function UL(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var GL=UL,WL=I_,VL=zL,HL=GL;function XL(e,t,r){return t===t?HL(e,t,r):WL(e,VL,r)}var KL=XL,YL=KL;function qL(e,t){var r=e==null?0:e.length;return!!r&&YL(e,t,0)>-1}var ZL=qL;function QL(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var JL=QL;function eB(){}var tB=eB,hm=T_,rB=tB,nB=R1,aB=1/0,iB=hm&&1/nB(new hm([,-0]))[1]==aB?function(e){return new hm(e)}:rB,oB=iB,sB=k_,lB=ZL,cB=JL,uB=j_,fB=oB,dB=R1,hB=200;function pB(e,t,r){var n=-1,a=lB,i=e.length,o=!0,s=[],l=s;if(r)o=!1,a=cB;else if(i>=hB){var u=t?null:fB(e);if(u)return dB(u);o=!1,a=uB,l=new sB}else l=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var p=l.length;p--;)if(l[p]===d)continue e;t&&l.push(d),s.push(f)}else a(l,d,r)||(l!==s&&l.push(d),s.push(f))}return s}var gB=pB,mB=ds,yB=gB;function vB(e,t){return e&&e.length?yB(e,mB(t)):[]}var xB=vB;const Qw=mr(xB);function L_(e,t,r){return t===!0?Qw(e,r):jt(t)?Qw(e,t):e}function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}var bB=["ref"];function Jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(r),!0).forEach(function(n){Fp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ek(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F_(n.key),n)}}function kB(e,t,r){return t&&ek(e.prototype,t),r&&ek(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function SB(e,t,r){return t=ih(t),jB(e,B_()?Reflect.construct(t,r||[],ih(e).constructor):t.apply(e,r))}function jB(e,t){if(t&&(dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _B(e)}function _B(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B_=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(e)}function CB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iv(e,t)}function iv(e,t){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iv(e,t)}function Fp(e,t,r){return t=F_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F_(e){var t=PB(e,"string");return dc(t)=="symbol"?t:t+""}function PB(e,t){if(dc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function NB(e,t){if(e==null)return{};var r=OB(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OB(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MB(e){return e.value}function AB(e,t){if(Y.isValidElement(e))return Y.cloneElement(e,t);if(typeof e=="function")return Y.createElement(e,t);t.ref;var r=NB(t,bB);return Y.createElement(D1,r)}var tk=1,zi=function(e){function t(){var r;wB(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=SB(this,t,[].concat(a)),Fp(r,"lastBoundingBox",{width:-1,height:-1}),r}return CB(t,e),kB(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>tk||Math.abs(a.height-this.lastBoundingBox.height)>tk)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ro({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,f=a.chartHeight,d,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var b=this.getBBoxSnapshot();p={top:((f||0)-b.height)/2}}else p=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ro(ro({},d),p)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=ro(ro({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return Y.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){n.wrapperNode=m}},AB(i,ro(ro({},this.props),{},{payload:L_(f,u,MB)})))}}],[{key:"getWithHeight",value:function(n,a){var i=ro(ro({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Ce(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(P.PureComponent);Fp(zi,"displayName","Legend");Fp(zi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var rk=td,TB=I1,EB=Ma,nk=rk?rk.isConcatSpreadable:void 0;function $B(e){return EB(e)||TB(e)||!!(nk&&e&&e[nk])}var DB=$B,RB=C_,IB=DB;function z_(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=IB),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?z_(s,t-1,r,n,a):RB(a,s):n||(a[a.length]=s)}return a}var U_=z_;function LB(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(r(i[l],l,i)===!1)break}return t}}var BB=LB,FB=BB,zB=FB(),UB=zB,GB=UB,WB=Bp;function VB(e,t){return e&&GB(e,t,WB)}var G_=VB,HB=rd;function XB(e,t){return function(r,n){if(r==null)return r;if(!HB(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var KB=XB,YB=G_,qB=KB,ZB=qB(YB),z1=ZB,QB=z1,JB=rd;function eF(e,t){var r=-1,n=JB(e)?Array(e.length):[];return QB(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var W_=eF;function tF(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var rF=tF,ak=zc;function nF(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=ak(e),o=t!==void 0,s=t===null,l=t===t,u=ak(t);if(!s&&!u&&!i&&e>t||i&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!l)return-1}return 0}var aF=nF,iF=aF;function oF(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var l=iF(a[n],i[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var sF=oF,pm=C1,lF=P1,cF=ds,uF=W_,fF=rF,dF=O_,hF=sF,pF=Yc,gF=Ma;function mF(e,t,r){t.length?t=pm(t,function(i){return gF(i)?function(o){return lF(o,i.length===1?i[0]:i)}:i}):t=[pF];var n=-1;t=pm(t,dF(cF));var a=uF(e,function(i,o,s){var l=pm(t,function(u){return u(i)});return{criteria:l,index:++n,value:i}});return fF(a,function(i,o){return hF(i,o,r)})}var yF=mF;function vF(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var xF=vF,bF=xF,ik=Math.max;function wF(e,t,r){return t=ik(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=ik(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),bF(e,this,s)}}var kF=wF;function SF(e){return function(){return e}}var jF=SF,_F=hl,CF=function(){try{var e=_F(Object,"defineProperty");return e({},"",{}),e}catch{}}(),V_=CF,PF=jF,ok=V_,NF=Yc,OF=ok?function(e,t){return ok(e,"toString",{configurable:!0,enumerable:!1,value:PF(t),writable:!0})}:NF,MF=OF,AF=800,TF=16,EF=Date.now;function $F(e){var t=0,r=0;return function(){var n=EF(),a=TF-(n-r);if(r=n,a>0){if(++t>=AF)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var DF=$F,RF=MF,IF=DF,LF=IF(RF),BF=LF,FF=Yc,zF=kF,UF=BF;function GF(e,t){return UF(zF(e,t,FF),e+"")}var WF=GF,VF=k1,HF=rd,XF=L1,KF=fs;function YF(e,t,r){if(!KF(r))return!1;var n=typeof t;return(n=="number"?HF(r)&&XF(t,r.length):n=="string"&&t in r)?VF(r[t],e):!1}var zp=YF,qF=U_,ZF=yF,QF=WF,sk=zp,JF=QF(function(e,t){if(e==null)return[];var r=t.length;return r>1&&sk(e,t[0],t[1])?t=[]:r>2&&sk(t[0],t[1],t[2])&&(t=[t[0]]),ZF(e,qF(t,1),[])}),ez=JF;const U1=mr(ez);function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ov.apply(this,arguments)}function tz(e,t){return iz(e)||az(e,t)||nz(e,t)||rz()}function rz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nz(e,t){if(e){if(typeof e=="string")return lk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lk(e,t)}}function lk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function az(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function iz(e){if(Array.isArray(e))return e}function ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(r),!0).forEach(function(n){oz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oz(e,t,r){return t=sz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sz(e){var t=lz(e,"string");return yf(t)=="symbol"?t:t+""}function lz(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cz(e){return Array.isArray(e)&&Sn(e[0])&&Sn(e[1])?e.join(" ~ "):e}var uz=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,f=t.payload,d=t.formatter,p=t.itemSorter,m=t.wrapperClassName,b=t.labelClassName,x=t.label,w=t.labelFormatter,v=t.accessibilityLayer,y=v===void 0?!1:v,k=function(){if(f&&f.length){var D={padding:0,margin:0},B=(p?U1(f,p):f).map(function(G,z){if(G.type==="none")return null;var F=gm({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},s),I=G.formatter||d||cz,L=G.value,W=G.name,K=L,ae=W;if(I&&K!=null&&ae!=null){var re=I(L,W,G,z,f);if(Array.isArray(re)){var Q=tz(re,2);K=Q[0],ae=Q[1]}else K=re}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:F},Sn(ae)?Y.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,Sn(ae)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},K),Y.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},B)}return null},C=gm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=gm({margin:0},u),S=!vt(x),N=S?x:"",M=It("recharts-default-tooltip",m),E=It("recharts-tooltip-label",b);S&&w&&f!==void 0&&f!==null&&(N=w(x,f));var R=y?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",ov({className:M,style:C},R),Y.createElement("p",{className:E,style:j},Y.isValidElement(N)?N:"".concat(N)),k())};function vf(e){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function Gd(e,t,r){return t=fz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fz(e){var t=dz(e,"string");return vf(t)=="symbol"?t:t+""}function dz(e,t){if(vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yu="recharts-tooltip-wrapper",hz={visibility:"hidden"};function pz(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return It(yu,Gd(Gd(Gd(Gd({},"".concat(yu,"-right"),Ce(r)&&t&&Ce(t.x)&&r>=t.x),"".concat(yu,"-left"),Ce(r)&&t&&Ce(t.x)&&r<t.x),"".concat(yu,"-bottom"),Ce(n)&&t&&Ce(t.y)&&n>=t.y),"".concat(yu,"-top"),Ce(n)&&t&&Ce(t.y)&&n<t.y))}function uk(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(i&&Ce(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var p=f,m=l[n];return p<m?Math.max(d,l[n]):Math.max(f,l[n])}var b=d+s,x=l[n]+u;return b>x?Math.max(f,l[n]):Math.max(d,l[n])}function gz(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function mz(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=uk({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=uk({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=gz({translateX:f,translateY:d,useTranslate3d:s})):u=hz,{cssProperties:u,cssClasses:pz({translateX:f,translateY:d,coordinate:r})}}function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(r),!0).forEach(function(n){lv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X_(n.key),n)}}function xz(e,t,r){return t&&vz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bz(e,t,r){return t=oh(t),wz(e,H_()?Reflect.construct(t,r||[],oh(e).constructor):t.apply(e,r))}function wz(e,t){if(t&&(hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kz(e)}function kz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H_=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(e)}function Sz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sv(e,t)}function sv(e,t){return sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sv(e,t)}function lv(e,t,r){return t=X_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X_(e){var t=jz(e,"string");return hc(t)=="symbol"?t:t+""}function jz(e,t){if(hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hk=1,_z=function(e){function t(){var r;yz(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=bz(this,t,[].concat(a)),lv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),lv(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return Sz(t,e),xz(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>hk||Math.abs(n.height-this.state.lastBoundingBox.height)>hk)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,p=a.isAnimationActive,m=a.offset,b=a.position,x=a.reverseDirection,w=a.useTranslate3d,v=a.viewBox,y=a.wrapperStyle,k=mz({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:b,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:v}),C=k.cssClasses,j=k.cssProperties,S=dk(dk({transition:p&&i?"transform ".concat(s,"ms ").concat(l):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return Y.createElement("div",{tabIndex:-1,className:C,style:S,ref:function(M){n.wrapperNode=M}},u)}}])}(P.PureComponent),Cz=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},hs={isSsr:Cz()};function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}function pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(r),!0).forEach(function(n){G1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y_(n.key),n)}}function Oz(e,t,r){return t&&Nz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mz(e,t,r){return t=sh(t),Az(e,K_()?Reflect.construct(t,r||[],sh(e).constructor):t.apply(e,r))}function Az(e,t){if(t&&(pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tz(e)}function Tz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K_=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sh(e)}function Ez(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cv(e,t)}function G1(e,t,r){return t=Y_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y_(e){var t=$z(e,"string");return pc(t)=="symbol"?t:t+""}function $z(e,t){if(pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Dz(e){return e.dataKey}function Rz(e,t){return Y.isValidElement(e)?Y.cloneElement(e,t):typeof e=="function"?Y.createElement(e,t):Y.createElement(uz,t)}var En=function(e){function t(){return Pz(this,t),Mz(this,t,arguments)}return Ez(t,e),Oz(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,p=a.isAnimationActive,m=a.offset,b=a.payload,x=a.payloadUniqBy,w=a.position,v=a.reverseDirection,y=a.useTranslate3d,k=a.viewBox,C=a.wrapperStyle,j=b??[];d&&j.length&&(j=L_(b.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),x,Dz));var S=j.length>0;return Y.createElement(_z,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:p,active:i,coordinate:f,hasPayload:S,offset:m,position:w,reverseDirection:v,useTranslate3d:y,viewBox:k,wrapperStyle:C},Rz(u,gk(gk({},this.props),{},{payload:j})))}}])}(P.PureComponent);G1(En,"displayName","Tooltip");G1(En,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!hs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Iz=qi,Lz=function(){return Iz.Date.now()},Bz=Lz,Fz=/\s/;function zz(e){for(var t=e.length;t--&&Fz.test(e.charAt(t)););return t}var Uz=zz,Gz=Uz,Wz=/^\s+/;function Vz(e){return e&&e.slice(0,Gz(e)+1).replace(Wz,"")}var Hz=Vz,Xz=Hz,mk=fs,Kz=zc,yk=NaN,Yz=/^[-+]0x[0-9a-f]+$/i,qz=/^0b[01]+$/i,Zz=/^0o[0-7]+$/i,Qz=parseInt;function Jz(e){if(typeof e=="number")return e;if(Kz(e))return yk;if(mk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=mk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Xz(e);var r=qz.test(e);return r||Zz.test(e)?Qz(e.slice(2),r?2:8):Yz.test(e)?yk:+e}var q_=Jz,eU=fs,mm=Bz,vk=q_,tU="Expected a function",rU=Math.max,nU=Math.min;function aU(e,t,r){var n,a,i,o,s,l,u=0,f=!1,d=!1,p=!0;if(typeof e!="function")throw new TypeError(tU);t=vk(t)||0,eU(r)&&(f=!!r.leading,d="maxWait"in r,i=d?rU(vk(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function m(S){var N=n,M=a;return n=a=void 0,u=S,o=e.apply(M,N),o}function b(S){return u=S,s=setTimeout(v,t),f?m(S):o}function x(S){var N=S-l,M=S-u,E=t-N;return d?nU(E,i-M):E}function w(S){var N=S-l,M=S-u;return l===void 0||N>=t||N<0||d&&M>=i}function v(){var S=mm();if(w(S))return y(S);s=setTimeout(v,x(S))}function y(S){return s=void 0,p&&n?m(S):(n=a=void 0,o)}function k(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function C(){return s===void 0?o:y(mm())}function j(){var S=mm(),N=w(S);if(n=arguments,a=this,l=S,N){if(s===void 0)return b(l);if(d)return clearTimeout(s),s=setTimeout(v,t),m(l)}return s===void 0&&(s=setTimeout(v,t)),o}return j.cancel=k,j.flush=C,j}var iU=aU,oU=iU,sU=fs,lU="Expected a function";function cU(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(lU);return sU(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),oU(e,t,{leading:n,maxWait:t,trailing:a})}var uU=cU;const Z_=mr(uU);function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(r),!0).forEach(function(n){fU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fU(e,t,r){return t=dU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(e){var t=hU(e,"string");return xf(t)=="symbol"?t:t+""}function hU(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pU(e,t){return vU(e)||yU(e,t)||mU(e,t)||gU()}function gU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mU(e,t){if(e){if(typeof e=="string")return bk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bk(e,t)}}function bk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function vU(e){if(Array.isArray(e))return e}var go=P.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,p=e.maxHeight,m=e.children,b=e.debounce,x=b===void 0?0:b,w=e.id,v=e.className,y=e.onResize,k=e.style,C=k===void 0?{}:k,j=P.useRef(null),S=P.useRef();S.current=y,P.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var N=P.useState({containerWidth:a.width,containerHeight:a.height}),M=pU(N,2),E=M[0],R=M[1],T=P.useCallback(function(B,G){R(function(z){var F=Math.round(B),I=Math.round(G);return z.containerWidth===F&&z.containerHeight===I?z:{containerWidth:F,containerHeight:I}})},[]);P.useEffect(function(){var B=function(W){var K,ae=W[0].contentRect,re=ae.width,Q=ae.height;T(re,Q),(K=S.current)===null||K===void 0||K.call(S,re,Q)};x>0&&(B=Z_(B,x,{trailing:!0,leading:!1}));var G=new ResizeObserver(B),z=j.current.getBoundingClientRect(),F=z.width,I=z.height;return T(F,I),G.observe(j.current),function(){G.disconnect()}},[T,x]);var D=P.useMemo(function(){var B=E.containerWidth,G=E.containerHeight;if(B<0||G<0)return null;po(Is(o)||Is(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),po(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=Is(o)?B:o,F=Is(l)?G:l;r&&r>0&&(z?F=z/r:F&&(z=F*r),p&&F>p&&(F=p)),po(z>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,F,o,l,f,d,r);var I=!Array.isArray(m)&&ho(m.type).endsWith("Chart");return Y.Children.map(m,function(L){return Y.isValidElement(L)?P.cloneElement(L,Wd({width:z,height:F},I?{style:Wd({height:"100%",width:"100%",maxHeight:F,maxWidth:z},L.props.style)}:{})):L})},[r,m,l,p,d,f,E,o]);return Y.createElement("div",{id:w?"".concat(w):void 0,className:It("recharts-responsive-container",v),style:Wd(Wd({},C),{},{width:o,height:l,minWidth:f,minHeight:d,maxHeight:p}),ref:j},D)}),W1=function(t){return null};W1.displayName="Cell";function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(n){xU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xU(e,t,r){return t=bU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bU(e){var t=wU(e,"string");return bf(t)=="symbol"?t:t+""}function wU(e,t){if(bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cl={widthCache:{},cacheCount:0},kU=2e3,SU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kk="recharts_measurement_span";function jU(e){var t=uv({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var zu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hs.isSsr)return{width:0,height:0};var n=jU(r),a=JSON.stringify({text:t,copyStyle:n});if(Cl.widthCache[a])return Cl.widthCache[a];try{var i=document.getElementById(kk);i||(i=document.createElement("span"),i.setAttribute("id",kk),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=uv(uv({},SU),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Cl.widthCache[a]=l,++Cl.cacheCount>kU&&(Cl.cacheCount=0,Cl.widthCache={}),l}catch{return{width:0,height:0}}},_U=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function lh(e,t){return OU(e)||NU(e,t)||PU(e,t)||CU()}function CU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PU(e,t){if(e){if(typeof e=="string")return Sk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sk(e,t)}}function Sk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function OU(e){if(Array.isArray(e))return e}function MU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TU(n.key),n)}}function AU(e,t,r){return t&&jk(e.prototype,t),r&&jk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TU(e){var t=EU(e,"string");return wf(t)=="symbol"?t:t+""}function EU(e,t){if(wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _k=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ck=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$U=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,DU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Q_={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},RU=Object.keys(Q_),Ul="NaN";function IU(e,t){return e*Q_[t]}var Vd=function(){function e(t,r){MU(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!$U.test(r)&&(this.num=NaN,this.unit=""),RU.includes(r)&&(this.num=IU(t,r),this.unit="px")}return AU(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=DU.exec(r))!==null&&n!==void 0?n:[],i=lh(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function J_(e){if(e.includes(Ul))return Ul;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=_k.exec(t))!==null&&r!==void 0?r:[],a=lh(n,4),i=a[1],o=a[2],s=a[3],l=Vd.parse(i??""),u=Vd.parse(s??""),f=o==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return Ul;t=t.replace(_k,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,p=(d=Ck.exec(t))!==null&&d!==void 0?d:[],m=lh(p,4),b=m[1],x=m[2],w=m[3],v=Vd.parse(b??""),y=Vd.parse(w??""),k=x==="+"?v.add(y):v.subtract(y);if(k.isNaN())return Ul;t=t.replace(Ck,k.toString())}return t}var Pk=/\(([^()]*)\)/;function LU(e){for(var t=e;t.includes("(");){var r=Pk.exec(t),n=lh(r,2),a=n[1];t=t.replace(Pk,J_(a))}return t}function BU(e){var t=e.replace(/\s+/g,"");return t=LU(t),t=J_(t),t}function FU(e){try{return BU(e)}catch{return Ul}}function ym(e){var t=FU(e.slice(5,-1));return t===Ul?"":t}var zU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],UU=["dx","dy","angle","className","breakAll"];function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fv.apply(this,arguments)}function Nk(e,t){if(e==null)return{};var r=GU(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GU(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ok(e,t){return XU(e)||HU(e,t)||VU(e,t)||WU()}function WU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VU(e,t){if(e){if(typeof e=="string")return Mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mk(e,t)}}function Mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function XU(e){if(Array.isArray(e))return e}var eC=/[ \f\n\r\t\v\u2028\u2029]+/,tC=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];vt(r)||(n?i=r.toString().split(""):i=r.toString().split(eC));var o=i.map(function(l){return{word:l,width:zu(l,a).width}}),s=n?0:zu("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},KU=function(t,r,n,a,i){var o=t.maxLines,s=t.children,l=t.style,u=t.breakAll,f=Ce(o),d=s,p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(F,I){var L=I.word,W=I.width,K=F[F.length-1];if(K&&(a==null||i||K.width+W+n<Number(a)))K.words.push(L),K.width+=W+n;else{var ae={words:[L],width:W};F.push(ae)}return F},[])},m=p(r),b=function(z){return z.reduce(function(F,I){return F.width>I.width?F:I})};if(!f)return m;for(var x="",w=function(z){var F=d.slice(0,z),I=tC({breakAll:u,style:l,children:F+x}).wordsWithComputedWidth,L=p(I),W=L.length>o||b(L).width>Number(a);return[W,L]},v=0,y=d.length-1,k=0,C;v<=y&&k<=d.length-1;){var j=Math.floor((v+y)/2),S=j-1,N=w(S),M=Ok(N,2),E=M[0],R=M[1],T=w(j),D=Ok(T,1),B=D[0];if(!E&&!B&&(v=j+1),E&&B&&(y=j-1),!E&&B){C=R;break}k++}return C||m},Ak=function(t){var r=vt(t)?[]:t.toString().split(eC);return[{words:r}]},YU=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!hs.isSsr){var l,u,f=tC({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,p=f.spaceWidth;l=d,u=p}else return Ak(a);return KU({breakAll:o,children:a,maxLines:s,style:i},l,u,r,n)}return Ak(a)},Tk="#808080",ch=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,f=t.scaleToFit,d=f===void 0?!1:f,p=t.textAnchor,m=p===void 0?"start":p,b=t.verticalAnchor,x=b===void 0?"end":b,w=t.fill,v=w===void 0?Tk:w,y=Nk(t,zU),k=P.useMemo(function(){return YU({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),C=y.dx,j=y.dy,S=y.angle,N=y.className,M=y.breakAll,E=Nk(y,UU);if(!Sn(n)||!Sn(i))return null;var R=n+(Ce(C)?C:0),T=i+(Ce(j)?j:0),D;switch(x){case"start":D=ym("calc(".concat(u,")"));break;case"middle":D=ym("calc(".concat((k.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:D=ym("calc(".concat(k.length-1," * -").concat(s,")"));break}var B=[];if(d){var G=k[0].width,z=y.width;B.push("scale(".concat((Ce(z)?z/G:1)/G,")"))}return S&&B.push("rotate(".concat(S,", ").concat(R,", ").concat(T,")")),B.length&&(E.transform=B.join(" ")),Y.createElement("text",fv({},wt(E,!0),{x:R,y:T,className:It("recharts-text",N),textAnchor:m,fill:v.includes("url")?Tk:v}),k.map(function(F,I){var L=F.words.join(M?"":" ");return Y.createElement("tspan",{x:R,dy:I===0?D:s,key:"".concat(L,"-").concat(I)},L)}))};function as(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qU(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function V1(e){let t,r,n;e.length!==2?(t=as,r=(s,l)=>as(e(s),l),n=(s,l)=>e(s)-l):(t=e===as||e===qU?e:ZU,r=e,n=e);function a(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){const d=a(s,l,u,f-1);return d>u&&n(s[d-1],l)>-n(s[d],l)?d-1:d}return{left:a,center:o,right:i}}function ZU(){return 0}function rC(e){return e===null?NaN:+e}function*QU(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const JU=V1(as),nd=JU.right;V1(rC).center;class Ek extends Map{constructor(t,r=rG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get($k(this,t))}has(t){return super.has($k(this,t))}set(t,r){return super.set(eG(this,t),r)}delete(t){return super.delete(tG(this,t))}}function $k({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function eG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function tG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function rG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nG(e=as){if(e===as)return nC;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function nC(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const aG=Math.sqrt(50),iG=Math.sqrt(10),oG=Math.sqrt(2);function uh(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=aG?10:i>=iG?5:i>=oG?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?uh(e,t,r*2):[s,l,u]}function dv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?uh(t,e,r):uh(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function hv(e,t,r){return t=+t,e=+e,r=+r,uh(e,t,r)[2]}function pv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?hv(t,e,r):hv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Dk(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Rk(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function aC(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?nC:nG(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),m=Math.max(r,Math.floor(t-u*d/l+p)),b=Math.min(n,Math.floor(t+(l-u)*d/l+p));aC(e,t,m,b,a)}const i=e[t];let o=r,s=n;for(vu(e,r,t),a(e[n],i)>0&&vu(e,r,n);o<s;){for(vu(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?vu(e,r,s):(++s,vu(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function vu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function sG(e,t,r){if(e=Float64Array.from(QU(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Rk(e);if(t>=1)return Dk(e);var n,a=(n-1)*t,i=Math.floor(a),o=Dk(aC(e,i).subarray(0,i+1)),s=Rk(e.subarray(i+1));return o+(s-o)*(a-i)}}function lG(e,t,r=rC){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function cG(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function si(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Po(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const gv=Symbol("implicit");function H1(){var e=new Ek,t=[],r=[],n=gv;function a(i){let o=e.get(i);if(o===void 0){if(n!==gv)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Ek;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return H1(t,r).unknown(n)},si.apply(a,arguments),a}function kf(){var e=H1().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,f=.5;delete e.unknown;function d(){var p=t().length,m=a<n,b=m?a:n,x=m?n:a;i=(x-b)/Math.max(1,p-l+u*2),s&&(i=Math.floor(i)),b+=(x-b-i*(p-l))*f,o=i*(1-l),s&&(b=Math.round(b),o=Math.round(o));var w=cG(p).map(function(v){return b+i*v});return r(m?w.reverse():w)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(s=!!p,d()):s},e.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),d()):l},e.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},e.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},e.copy=function(){return kf(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},si.apply(d(),arguments)}function iC(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return iC(t())},e}function Uu(){return iC(kf.apply(null,arguments).paddingInner(1))}function X1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function oC(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ad(){}var Sf=.7,fh=1/Sf,Jl="\\s*([+-]?\\d+)\\s*",jf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uG=/^#([0-9a-f]{3,8})$/,fG=new RegExp(`^rgb\\(${Jl},${Jl},${Jl}\\)$`),dG=new RegExp(`^rgb\\(${Ui},${Ui},${Ui}\\)$`),hG=new RegExp(`^rgba\\(${Jl},${Jl},${Jl},${jf}\\)$`),pG=new RegExp(`^rgba\\(${Ui},${Ui},${Ui},${jf}\\)$`),gG=new RegExp(`^hsl\\(${jf},${Ui},${Ui}\\)$`),mG=new RegExp(`^hsla\\(${jf},${Ui},${Ui},${jf}\\)$`),Ik={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X1(ad,_f,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lk,formatHex:Lk,formatHex8:yG,formatHsl:vG,formatRgb:Bk,toString:Bk});function Lk(){return this.rgb().formatHex()}function yG(){return this.rgb().formatHex8()}function vG(){return sC(this).formatHsl()}function Bk(){return this.rgb().formatRgb()}function _f(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=uG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Fk(t):r===3?new Sa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fG.exec(e))?new Sa(t[1],t[2],t[3],1):(t=dG.exec(e))?new Sa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hG.exec(e))?Hd(t[1],t[2],t[3],t[4]):(t=pG.exec(e))?Hd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gG.exec(e))?Gk(t[1],t[2]/100,t[3]/100,1):(t=mG.exec(e))?Gk(t[1],t[2]/100,t[3]/100,t[4]):Ik.hasOwnProperty(e)?Fk(Ik[e]):e==="transparent"?new Sa(NaN,NaN,NaN,0):null}function Fk(e){return new Sa(e>>16&255,e>>8&255,e&255,1)}function Hd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Sa(e,t,r,n)}function xG(e){return e instanceof ad||(e=_f(e)),e?(e=e.rgb(),new Sa(e.r,e.g,e.b,e.opacity)):new Sa}function mv(e,t,r,n){return arguments.length===1?xG(e):new Sa(e,t,r,n??1)}function Sa(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}X1(Sa,mv,oC(ad,{brighter(e){return e=e==null?fh:Math.pow(fh,e),new Sa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sf:Math.pow(Sf,e),new Sa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sa(Ws(this.r),Ws(this.g),Ws(this.b),dh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zk,formatHex:zk,formatHex8:bG,formatRgb:Uk,toString:Uk}));function zk(){return`#${Ls(this.r)}${Ls(this.g)}${Ls(this.b)}`}function bG(){return`#${Ls(this.r)}${Ls(this.g)}${Ls(this.b)}${Ls((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uk(){const e=dh(this.opacity);return`${e===1?"rgb(":"rgba("}${Ws(this.r)}, ${Ws(this.g)}, ${Ws(this.b)}${e===1?")":`, ${e})`}`}function dh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ws(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ls(e){return e=Ws(e),(e<16?"0":"")+e.toString(16)}function Gk(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new wi(e,t,r,n)}function sC(e){if(e instanceof wi)return new wi(e.h,e.s,e.l,e.opacity);if(e instanceof ad||(e=_f(e)),!e)return new wi;if(e instanceof wi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new wi(o,s,l,e.opacity)}function wG(e,t,r,n){return arguments.length===1?sC(e):new wi(e,t,r,n??1)}function wi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}X1(wi,wG,oC(ad,{brighter(e){return e=e==null?fh:Math.pow(fh,e),new wi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sf:Math.pow(Sf,e),new wi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Sa(vm(e>=240?e-240:e+120,a,n),vm(e,a,n),vm(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new wi(Wk(this.h),Xd(this.s),Xd(this.l),dh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dh(this.opacity);return`${e===1?"hsl(":"hsla("}${Wk(this.h)}, ${Xd(this.s)*100}%, ${Xd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Wk(e){return e=(e||0)%360,e<0?e+360:e}function Xd(e){return Math.max(0,Math.min(1,e||0))}function vm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const K1=e=>()=>e;function kG(e,t){return function(r){return e+r*t}}function SG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function jG(e){return(e=+e)==1?lC:function(t,r){return r-t?SG(t,r,e):K1(isNaN(t)?r:t)}}function lC(e,t){var r=t-e;return r?kG(e,r):K1(isNaN(e)?t:e)}const Vk=function e(t){var r=jG(t);function n(a,i){var o=r((a=mv(a)).r,(i=mv(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=lC(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function _G(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function CG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=qc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function NG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function hh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function OG(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=qc(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var yv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xm=new RegExp(yv.source,"g");function MG(e){return function(){return e}}function AG(e){return function(t){return e(t)+""}}function TG(e,t){var r=yv.lastIndex=xm.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=yv.exec(e))&&(a=xm.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:hh(n,a)})),r=xm.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?AG(l[0].x):MG(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function qc(e,t){var r=typeof t,n;return t==null||r==="boolean"?K1(t):(r==="number"?hh:r==="string"?(n=_f(t))?(t=n,Vk):TG:t instanceof _f?Vk:t instanceof Date?NG:CG(t)?_G:Array.isArray(t)?PG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OG:hh)(e,t)}function Y1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function EG(e,t){t===void 0&&(t=e,e=qc);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function $G(e){return function(){return e}}function ph(e){return+e}var Hk=[0,1];function ha(e){return e}function vv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:$G(isNaN(t)?NaN:.5)}function DG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function RG(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=vv(a,n),i=r(o,i)):(n=vv(n,a),i=r(i,o)),function(s){return i(n(s))}}function IG(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=vv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=nd(e,s,1,n)-1;return i[l](a[l](s))}}function id(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Up(){var e=Hk,t=Hk,r=qc,n,a,i,o=ha,s,l,u;function f(){var p=Math.min(e.length,t.length);return o!==ha&&(o=DG(e[0],e[p-1])),s=p>2?IG:RG,l=u=null,d}function d(p){return p==null||isNaN(p=+p)?i:(l||(l=s(e.map(n),t,r)))(n(o(p)))}return d.invert=function(p){return o(a((u||(u=s(t,e.map(n),hh)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,ph),f()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),r=Y1,f()},d.clamp=function(p){return arguments.length?(o=p?!0:ha,f()):o!==ha},d.interpolate=function(p){return arguments.length?(r=p,f()):r},d.unknown=function(p){return arguments.length?(i=p,d):i},function(p,m){return n=p,a=m,f()}}function q1(){return Up()(ha,ha)}function LG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gh(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function gc(e){return e=gh(Math.abs(e)),e?e[1]:NaN}function BG(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function FG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var zG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cf(e){if(!(t=zG.exec(e)))throw new Error("invalid format: "+e);var t;return new Z1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Cf.prototype=Z1.prototype;function Z1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Z1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UG(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var mh;function GG(e,t){var r=gh(e,t);if(!r)return mh=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(mh=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+gh(e,Math.max(0,t+i-1))[0]}function Xk(e,t){var r=gh(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Kk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:LG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Xk(e*100,t),r:Xk,s:GG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yk(e){return e}var qk=Array.prototype.map,Zk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WG(e){var t=e.grouping===void 0||e.thousands===void 0?Yk:BG(qk.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Yk:FG(qk.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d,p){d=Cf(d);var m=d.fill,b=d.align,x=d.sign,w=d.symbol,v=d.zero,y=d.width,k=d.comma,C=d.precision,j=d.trim,S=d.type;S==="n"?(k=!0,S="g"):Kk[S]||(C===void 0&&(C=12),j=!0,S="g"),(v||m==="0"&&b==="=")&&(v=!0,m="0",b="=");var N=(p&&p.prefix!==void 0?p.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),M=(w==="$"?n:/[%p]/.test(S)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),E=Kk[S],R=/[defgprs%]/.test(S);C=C===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function T(D){var B=N,G=M,z,F,I;if(S==="c")G=E(D)+G,D="";else{D=+D;var L=D<0||1/D<0;if(D=isNaN(D)?l:E(Math.abs(D),C),j&&(D=UG(D)),L&&+D==0&&x!=="+"&&(L=!1),B=(L?x==="("?x:s:x==="-"||x==="("?"":x)+B,G=(S==="s"&&!isNaN(D)&&mh!==void 0?Zk[8+mh/3]:"")+G+(L&&x==="("?")":""),R){for(z=-1,F=D.length;++z<F;)if(I=D.charCodeAt(z),48>I||I>57){G=(I===46?a+D.slice(z+1):D.slice(z))+G,D=D.slice(0,z);break}}}k&&!v&&(D=t(D,1/0));var W=B.length+D.length+G.length,K=W<y?new Array(y-W+1).join(m):"";switch(k&&v&&(D=t(K+D,K.length?y-G.length:1/0),K=""),b){case"<":D=B+D+G+K;break;case"=":D=B+K+D+G;break;case"^":D=K.slice(0,W=K.length>>1)+B+D+G+K.slice(W);break;default:D=K+B+D+G;break}return i(D)}return T.toString=function(){return d+""},T}function f(d,p){var m=Math.max(-8,Math.min(8,Math.floor(gc(p)/3)))*3,b=Math.pow(10,-m),x=u((d=Cf(d),d.type="f",d),{suffix:Zk[8+m/3]});return function(w){return x(b*w)}}return{format:u,formatPrefix:f}}var Kd,Q1,cC;VG({thousands:",",grouping:[3],currency:["$",""]});function VG(e){return Kd=WG(e),Q1=Kd.format,cC=Kd.formatPrefix,Kd}function HG(e){return Math.max(0,-gc(Math.abs(e)))}function XG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gc(t)/3)))*3-gc(Math.abs(e)))}function KG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gc(t)-gc(e))+1}function uC(e,t,r,n){var a=pv(e,t,r),i;switch(n=Cf(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=XG(a,o))&&(n.precision=i),cC(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=KG(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=HG(a))&&(n.precision=i-(n.type==="%")*2);break}}return Q1(n)}function ps(e){var t=e.domain;return e.ticks=function(r){var n=t();return dv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return uC(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=hv(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function yh(){var e=q1();return e.copy=function(){return id(e,yh())},si.apply(e,arguments),ps(e)}function fC(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,ph),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return fC(e).unknown(t)},e=arguments.length?Array.from(e,ph):[0,1],ps(r)}function dC(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Qk(e){return Math.log(e)}function Jk(e){return Math.exp(e)}function YG(e){return-Math.log(-e)}function qG(e){return-Math.exp(-e)}function ZG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function QG(e){return e===10?ZG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function JG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function eS(e){return(t,r)=>-e(-t,r)}function J1(e){const t=e(Qk,Jk),r=t.domain;let n=10,a,i;function o(){return a=JG(n),i=QG(n),r()[0]<0?(a=eS(a),i=eS(i),e(YG,qG)):e(Qk,Jk),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=a(u),m=a(f),b,x;const w=s==null?10:+s;let v=[];if(!(n%1)&&m-p<w){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(b=1;b<n;++b)if(x=p<0?b/i(-p):b*i(p),!(x<u)){if(x>f)break;v.push(x)}}else for(;p<=m;++p)for(b=n-1;b>=1;--b)if(x=p>0?b/i(-p):b*i(p),!(x<u)){if(x>f)break;v.push(x)}v.length*2<w&&(v=dv(u,f,w))}else v=dv(p,m,Math.min(m-p,w)).map(i);return d?v.reverse():v},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Cf(l)).precision==null&&(l.trim=!0),l=Q1(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?l(f):""}},t.nice=()=>r(dC(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function hC(){const e=J1(Up()).domain([1,10]);return e.copy=()=>id(e,hC()).base(e.base()),si.apply(e,arguments),e}function tS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function eb(e){var t=1,r=e(tS(t),rS(t));return r.constant=function(n){return arguments.length?e(tS(t=+n),rS(t)):t},ps(r)}function pC(){var e=eb(Up());return e.copy=function(){return id(e,pC()).constant(e.constant())},si.apply(e,arguments)}function nS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tW(e){return e<0?-e*e:e*e}function tb(e){var t=e(ha,ha),r=1;function n(){return r===1?e(ha,ha):r===.5?e(eW,tW):e(nS(r),nS(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},ps(t)}function rb(){var e=tb(Up());return e.copy=function(){return id(e,rb()).exponent(e.exponent())},si.apply(e,arguments),e}function rW(){return rb.apply(null,arguments).exponent(.5)}function aS(e){return Math.sign(e)*e*e}function nW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function gC(){var e=q1(),t=[0,1],r=!1,n;function a(i){var o=nW(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(aS(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,ph)).map(aS)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return gC(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},si.apply(a,arguments),ps(a)}function mC(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=lG(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[nd(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(as),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return mC().domain(e).range(t).unknown(n)},si.apply(i,arguments)}function yC(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[nd(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return yC().domain([e,t]).range(a).unknown(i)},si.apply(ps(o),arguments)}function vC(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[nd(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return vC().domain(e).range(t).unknown(r)},si.apply(a,arguments)}const bm=new Date,wm=new Date;function _n(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>_n(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(bm.setTime(+i),wm.setTime(+o),e(bm),e(wm),Math.floor(r(bm,wm))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const vh=_n(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_n(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vh);vh.range;const lo=1e3,Ja=lo*60,co=Ja*60,wo=co*24,nb=wo*7,iS=wo*30,km=wo*365,Bs=_n(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lo)},(e,t)=>(t-e)/lo,e=>e.getUTCSeconds());Bs.range;const ab=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lo)},(e,t)=>{e.setTime(+e+t*Ja)},(e,t)=>(t-e)/Ja,e=>e.getMinutes());ab.range;const ib=_n(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ja)},(e,t)=>(t-e)/Ja,e=>e.getUTCMinutes());ib.range;const ob=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lo-e.getMinutes()*Ja)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getHours());ob.range;const sb=_n(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getUTCHours());sb.range;const od=_n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ja)/wo,e=>e.getDate()-1);od.range;const Gp=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wo,e=>e.getUTCDate()-1);Gp.range;const xC=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wo,e=>Math.floor(e/wo));xC.range;function gl(e){return _n(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ja)/nb)}const Wp=gl(0),xh=gl(1),aW=gl(2),iW=gl(3),mc=gl(4),oW=gl(5),sW=gl(6);Wp.range;xh.range;aW.range;iW.range;mc.range;oW.range;sW.range;function ml(e){return _n(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/nb)}const Vp=ml(0),bh=ml(1),lW=ml(2),cW=ml(3),yc=ml(4),uW=ml(5),fW=ml(6);Vp.range;bh.range;lW.range;cW.range;yc.range;uW.range;fW.range;const lb=_n(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());lb.range;const cb=_n(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());cb.range;const ko=_n(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ko.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ko.range;const So=_n(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());So.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});So.range;function bC(e,t,r,n,a,i){const o=[[Bs,1,lo],[Bs,5,5*lo],[Bs,15,15*lo],[Bs,30,30*lo],[i,1,Ja],[i,5,5*Ja],[i,15,15*Ja],[i,30,30*Ja],[a,1,co],[a,3,3*co],[a,6,6*co],[a,12,12*co],[n,1,wo],[n,2,2*wo],[r,1,nb],[t,1,iS],[t,3,3*iS],[e,1,km]];function s(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:l(u,f,d),b=m?m.range(u,+f+1):[];return p?b.reverse():b}function l(u,f,d){const p=Math.abs(f-u)/d,m=V1(([,,w])=>w).right(o,p);if(m===o.length)return e.every(pv(u/km,f/km,d));if(m===0)return vh.every(Math.max(pv(u,f,d),1));const[b,x]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return b.every(x)}return[s,l]}const[dW,hW]=bC(So,cb,Vp,xC,sb,ib),[pW,gW]=bC(ko,lb,Wp,od,ob,ab);function Sm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function mW(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=bu(a),f=wu(a),d=bu(i),p=wu(i),m=bu(o),b=wu(o),x=bu(s),w=wu(s),v=bu(l),y=wu(l),k={a:I,A:L,b:W,B:K,c:null,d:fS,e:fS,f:BW,g:YW,G:ZW,H:RW,I:IW,j:LW,L:wC,m:FW,M:zW,p:ae,q:re,Q:pS,s:gS,S:UW,u:GW,U:WW,V:VW,w:HW,W:XW,x:null,X:null,y:KW,Y:qW,Z:QW,"%":hS},C={a:Q,A:le,b:Ne,B:ie,c:null,d:dS,e:dS,f:rV,g:dV,G:pV,H:JW,I:eV,j:tV,L:SC,m:nV,M:aV,p:ge,q:ne,Q:pS,s:gS,S:iV,u:oV,U:sV,V:lV,w:cV,W:uV,x:null,X:null,y:fV,Y:hV,Z:gV,"%":hS},j={a:R,A:T,b:D,B,c:G,d:cS,e:cS,f:TW,g:lS,G:sS,H:uS,I:uS,j:NW,L:AW,m:PW,M:OW,p:E,q:CW,Q:$W,s:DW,S:MW,u:wW,U:kW,V:SW,w:bW,W:jW,x:z,X:F,y:lS,Y:sS,Z:_W,"%":EW};k.x=S(r,k),k.X=S(n,k),k.c=S(t,k),C.x=S(r,C),C.X=S(n,C),C.c=S(t,C);function S(H,ue){return function(ve){var ee=[],Oe=-1,Te=0,pe=H.length,Me,Se,me;for(ve instanceof Date||(ve=new Date(+ve));++Oe<pe;)H.charCodeAt(Oe)===37&&(ee.push(H.slice(Te,Oe)),(Se=oS[Me=H.charAt(++Oe)])!=null?Me=H.charAt(++Oe):Se=Me==="e"?" ":"0",(me=ue[Me])&&(Me=me(ve,Se)),ee.push(Me),Te=Oe+1);return ee.push(H.slice(Te,Oe)),ee.join("")}}function N(H,ue){return function(ve){var ee=xu(1900,void 0,1),Oe=M(ee,H,ve+="",0),Te,pe;if(Oe!=ve.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ue&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Te=jm(xu(ee.y,0,1)),pe=Te.getUTCDay(),Te=pe>4||pe===0?bh.ceil(Te):bh(Te),Te=Gp.offset(Te,(ee.V-1)*7),ee.y=Te.getUTCFullYear(),ee.m=Te.getUTCMonth(),ee.d=Te.getUTCDate()+(ee.w+6)%7):(Te=Sm(xu(ee.y,0,1)),pe=Te.getDay(),Te=pe>4||pe===0?xh.ceil(Te):xh(Te),Te=od.offset(Te,(ee.V-1)*7),ee.y=Te.getFullYear(),ee.m=Te.getMonth(),ee.d=Te.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),pe="Z"in ee?jm(xu(ee.y,0,1)).getUTCDay():Sm(xu(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(pe+5)%7:ee.w+ee.U*7-(pe+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,jm(ee)):Sm(ee)}}function M(H,ue,ve,ee){for(var Oe=0,Te=ue.length,pe=ve.length,Me,Se;Oe<Te;){if(ee>=pe)return-1;if(Me=ue.charCodeAt(Oe++),Me===37){if(Me=ue.charAt(Oe++),Se=j[Me in oS?ue.charAt(Oe++):Me],!Se||(ee=Se(H,ve,ee))<0)return-1}else if(Me!=ve.charCodeAt(ee++))return-1}return ee}function E(H,ue,ve){var ee=u.exec(ue.slice(ve));return ee?(H.p=f.get(ee[0].toLowerCase()),ve+ee[0].length):-1}function R(H,ue,ve){var ee=m.exec(ue.slice(ve));return ee?(H.w=b.get(ee[0].toLowerCase()),ve+ee[0].length):-1}function T(H,ue,ve){var ee=d.exec(ue.slice(ve));return ee?(H.w=p.get(ee[0].toLowerCase()),ve+ee[0].length):-1}function D(H,ue,ve){var ee=v.exec(ue.slice(ve));return ee?(H.m=y.get(ee[0].toLowerCase()),ve+ee[0].length):-1}function B(H,ue,ve){var ee=x.exec(ue.slice(ve));return ee?(H.m=w.get(ee[0].toLowerCase()),ve+ee[0].length):-1}function G(H,ue,ve){return M(H,t,ue,ve)}function z(H,ue,ve){return M(H,r,ue,ve)}function F(H,ue,ve){return M(H,n,ue,ve)}function I(H){return o[H.getDay()]}function L(H){return i[H.getDay()]}function W(H){return l[H.getMonth()]}function K(H){return s[H.getMonth()]}function ae(H){return a[+(H.getHours()>=12)]}function re(H){return 1+~~(H.getMonth()/3)}function Q(H){return o[H.getUTCDay()]}function le(H){return i[H.getUTCDay()]}function Ne(H){return l[H.getUTCMonth()]}function ie(H){return s[H.getUTCMonth()]}function ge(H){return a[+(H.getUTCHours()>=12)]}function ne(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var ue=S(H+="",k);return ue.toString=function(){return H},ue},parse:function(H){var ue=N(H+="",!1);return ue.toString=function(){return H},ue},utcFormat:function(H){var ue=S(H+="",C);return ue.toString=function(){return H},ue},utcParse:function(H){var ue=N(H+="",!0);return ue.toString=function(){return H},ue}}}var oS={"-":"",_:" ",0:"0"},Rn=/^\s*\d+/,yW=/^%/,vW=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function xW(e){return e.replace(vW,"\\$&")}function bu(e){return new RegExp("^(?:"+e.map(xW).join("|")+")","i")}function wu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function bW(e,t,r){var n=Rn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=Rn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function kW(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function SW(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function jW(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function sS(e,t,r){var n=Rn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function lS(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _W(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function CW(e,t,r){var n=Rn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function PW(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function cS(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function NW(e,t,r){var n=Rn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function uS(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function OW(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function MW(e,t,r){var n=Rn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function AW(e,t,r){var n=Rn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function TW(e,t,r){var n=Rn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function EW(e,t,r){var n=yW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function $W(e,t,r){var n=Rn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function DW(e,t,r){var n=Rn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function fS(e,t){return Kt(e.getDate(),t,2)}function RW(e,t){return Kt(e.getHours(),t,2)}function IW(e,t){return Kt(e.getHours()%12||12,t,2)}function LW(e,t){return Kt(1+od.count(ko(e),e),t,3)}function wC(e,t){return Kt(e.getMilliseconds(),t,3)}function BW(e,t){return wC(e,t)+"000"}function FW(e,t){return Kt(e.getMonth()+1,t,2)}function zW(e,t){return Kt(e.getMinutes(),t,2)}function UW(e,t){return Kt(e.getSeconds(),t,2)}function GW(e){var t=e.getDay();return t===0?7:t}function WW(e,t){return Kt(Wp.count(ko(e)-1,e),t,2)}function kC(e){var t=e.getDay();return t>=4||t===0?mc(e):mc.ceil(e)}function VW(e,t){return e=kC(e),Kt(mc.count(ko(e),e)+(ko(e).getDay()===4),t,2)}function HW(e){return e.getDay()}function XW(e,t){return Kt(xh.count(ko(e)-1,e),t,2)}function KW(e,t){return Kt(e.getFullYear()%100,t,2)}function YW(e,t){return e=kC(e),Kt(e.getFullYear()%100,t,2)}function qW(e,t){return Kt(e.getFullYear()%1e4,t,4)}function ZW(e,t){var r=e.getDay();return e=r>=4||r===0?mc(e):mc.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function QW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function dS(e,t){return Kt(e.getUTCDate(),t,2)}function JW(e,t){return Kt(e.getUTCHours(),t,2)}function eV(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function tV(e,t){return Kt(1+Gp.count(So(e),e),t,3)}function SC(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function rV(e,t){return SC(e,t)+"000"}function nV(e,t){return Kt(e.getUTCMonth()+1,t,2)}function aV(e,t){return Kt(e.getUTCMinutes(),t,2)}function iV(e,t){return Kt(e.getUTCSeconds(),t,2)}function oV(e){var t=e.getUTCDay();return t===0?7:t}function sV(e,t){return Kt(Vp.count(So(e)-1,e),t,2)}function jC(e){var t=e.getUTCDay();return t>=4||t===0?yc(e):yc.ceil(e)}function lV(e,t){return e=jC(e),Kt(yc.count(So(e),e)+(So(e).getUTCDay()===4),t,2)}function cV(e){return e.getUTCDay()}function uV(e,t){return Kt(bh.count(So(e)-1,e),t,2)}function fV(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function dV(e,t){return e=jC(e),Kt(e.getUTCFullYear()%100,t,2)}function hV(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function pV(e,t){var r=e.getUTCDay();return e=r>=4||r===0?yc(e):yc.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function gV(){return"+0000"}function hS(){return"%"}function pS(e){return+e}function gS(e){return Math.floor(+e/1e3)}var Pl,_C,CC;mV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mV(e){return Pl=mW(e),_C=Pl.format,Pl.parse,CC=Pl.utcFormat,Pl.utcParse,Pl}function yV(e){return new Date(e)}function vV(e){return e instanceof Date?+e:+new Date(+e)}function ub(e,t,r,n,a,i,o,s,l,u){var f=q1(),d=f.invert,p=f.domain,m=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),v=u("%a %d"),y=u("%b %d"),k=u("%B"),C=u("%Y");function j(S){return(l(S)<S?m:s(S)<S?b:o(S)<S?x:i(S)<S?w:n(S)<S?a(S)<S?v:y:r(S)<S?k:C)(S)}return f.invert=function(S){return new Date(d(S))},f.domain=function(S){return arguments.length?p(Array.from(S,vV)):p().map(yV)},f.ticks=function(S){var N=p();return e(N[0],N[N.length-1],S??10)},f.tickFormat=function(S,N){return N==null?j:u(N)},f.nice=function(S){var N=p();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?p(dC(N,S)):f},f.copy=function(){return id(f,ub(e,t,r,n,a,i,o,s,l,u))},f}function xV(){return si.apply(ub(pW,gW,ko,lb,Wp,od,ob,ab,Bs,_C).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bV(){return si.apply(ub(dW,hW,So,cb,Vp,Gp,sb,ib,Bs,CC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hp(){var e=0,t=1,r,n,a,i,o=ha,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(p){var m,b;return arguments.length?([m,b]=p,o=d(m,b),u):[o(0),o(1)]}}return u.range=f(qc),u.rangeRound=f(Y1),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function gs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PC(){var e=ps(Hp()(ha));return e.copy=function(){return gs(e,PC())},Po.apply(e,arguments)}function NC(){var e=J1(Hp()).domain([1,10]);return e.copy=function(){return gs(e,NC()).base(e.base())},Po.apply(e,arguments)}function OC(){var e=eb(Hp());return e.copy=function(){return gs(e,OC()).constant(e.constant())},Po.apply(e,arguments)}function fb(){var e=tb(Hp());return e.copy=function(){return gs(e,fb()).exponent(e.exponent())},Po.apply(e,arguments)}function wV(){return fb.apply(null,arguments).exponent(.5)}function MC(){var e=[],t=ha;function r(n){if(n!=null&&!isNaN(n=+n))return t((nd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(as),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>sG(e,i/n))},r.copy=function(){return MC(t).domain(e)},Po.apply(r,arguments)}function Xp(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=ha,f,d=!1,p;function m(x){return isNaN(x=+x)?p:(x=.5+((x=+f(x))-i)*(n*x<n*i?s:l),u(d?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(d=!!x,m):d},m.interpolator=function(x){return arguments.length?(u=x,m):u};function b(x){return function(w){var v,y,k;return arguments.length?([v,y,k]=w,u=EG(x,[v,y,k]),m):[u(0),u(.5),u(1)]}}return m.range=b(qc),m.rangeRound=b(Y1),m.unknown=function(x){return arguments.length?(p=x,m):p},function(x){return f=x,a=x(e),i=x(t),o=x(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function AC(){var e=ps(Xp()(ha));return e.copy=function(){return gs(e,AC())},Po.apply(e,arguments)}function TC(){var e=J1(Xp()).domain([.1,1,10]);return e.copy=function(){return gs(e,TC()).base(e.base())},Po.apply(e,arguments)}function EC(){var e=eb(Xp());return e.copy=function(){return gs(e,EC()).constant(e.constant())},Po.apply(e,arguments)}function db(){var e=tb(Xp());return e.copy=function(){return gs(e,db()).exponent(e.exponent())},Po.apply(e,arguments)}function kV(){return db.apply(null,arguments).exponent(.5)}const mS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kf,scaleDiverging:AC,scaleDivergingLog:TC,scaleDivergingPow:db,scaleDivergingSqrt:kV,scaleDivergingSymlog:EC,scaleIdentity:fC,scaleImplicit:gv,scaleLinear:yh,scaleLog:hC,scaleOrdinal:H1,scalePoint:Uu,scalePow:rb,scaleQuantile:mC,scaleQuantize:yC,scaleRadial:gC,scaleSequential:PC,scaleSequentialLog:NC,scaleSequentialPow:fb,scaleSequentialQuantile:MC,scaleSequentialSqrt:wV,scaleSequentialSymlog:OC,scaleSqrt:rW,scaleSymlog:pC,scaleThreshold:vC,scaleTime:xV,scaleUtc:bV,tickFormat:uC},Symbol.toStringTag,{value:"Module"}));var SV=zc;function jV(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!SV(o):r(o,s)))var s=o,l=i}return l}var $C=jV;function _V(e,t){return e>t}var CV=_V,PV=$C,NV=CV,OV=Yc;function MV(e){return e&&e.length?PV(e,OV,NV):void 0}var AV=MV;const Go=mr(AV);function TV(e,t){return e<t}var EV=TV,$V=$C,DV=EV,RV=Yc;function IV(e){return e&&e.length?$V(e,RV,DV):void 0}var LV=IV;const Kp=mr(LV);var BV=C1,FV=ds,zV=W_,UV=Ma;function GV(e,t){var r=UV(e)?BV:zV;return r(e,FV(t))}var WV=GV,VV=U_,HV=WV;function XV(e,t){return VV(HV(e,t),1)}var KV=XV;const YV=mr(KV);var qV=F1;function ZV(e,t){return qV(e,t)}var QV=ZV;const il=mr(QV);var Zc=1e9,JV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},pb,Dr=!0,ii="[DecimalError] ",Vs=ii+"Invalid argument: ",hb=ii+"Exponent out of range: ",Qc=Math.floor,Ms=Math.pow,eH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ra,An=1e7,Mr=7,DC=9007199254740991,wh=Qc(DC/Mr),Ge={};Ge.absoluteValue=Ge.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ge.comparedTo=Ge.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ge.decimalPlaces=Ge.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ge.dividedBy=Ge.div=function(e){return mo(this,new this.constructor(e))};Ge.dividedToIntegerBy=Ge.idiv=function(e){var t=this,r=t.constructor;return gr(mo(t,new r(e),0,1),r.precision)};Ge.equals=Ge.eq=function(e){return!this.cmp(e)};Ge.exponent=function(){return vn(this)};Ge.greaterThan=Ge.gt=function(e){return this.cmp(e)>0};Ge.greaterThanOrEqualTo=Ge.gte=function(e){return this.cmp(e)>=0};Ge.isInteger=Ge.isint=function(){return this.e>this.d.length-2};Ge.isNegative=Ge.isneg=function(){return this.s<0};Ge.isPositive=Ge.ispos=function(){return this.s>0};Ge.isZero=function(){return this.s===0};Ge.lessThan=Ge.lt=function(e){return this.cmp(e)<0};Ge.lessThanOrEqualTo=Ge.lte=function(e){return this.cmp(e)<1};Ge.logarithm=Ge.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ra))throw Error(ii+"NaN");if(r.s<1)throw Error(ii+(r.s?"NaN":"-Infinity"));return r.eq(Ra)?new n(0):(Dr=!1,t=mo(Pf(r,i),Pf(e,i),i),Dr=!0,gr(t,a))};Ge.minus=Ge.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LC(t,e):RC(t,(e.s=-e.s,e))};Ge.modulo=Ge.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ii+"NaN");return r.s?(Dr=!1,t=mo(r,e,0,1).times(e),Dr=!0,r.minus(t)):gr(new n(r),a)};Ge.naturalExponential=Ge.exp=function(){return IC(this)};Ge.naturalLogarithm=Ge.ln=function(){return Pf(this)};Ge.negated=Ge.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ge.plus=Ge.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RC(t,e):LC(t,(e.s=-e.s,e))};Ge.precision=Ge.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Vs+e);if(t=vn(a)+1,n=a.d.length-1,r=n*Mr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ge.squareRoot=Ge.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(ii+"NaN")}for(e=vn(s),Dr=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Ii(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Qc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus(mo(s,i,o+2)).times(.5),Ii(i.d).slice(0,o)===(t=Ii(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(gr(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return Dr=!0,gr(n,r)};Ge.times=Ge.mul=function(e){var t,r,n,a,i,o,s,l,u,f=this,d=f.constructor,p=f.d,m=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,l=p.length,u=m.length,l<u&&(i=p,p=m,m=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+m[n]*p[a-n-1]+t,i[a--]=s%An|0,t=s/An|0;i[a]=(i[a]+t)%An|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Dr?gr(e,d.precision):e};Ge.toDecimalPlaces=Ge.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Xi(e,0,Zc),t===void 0?t=n.rounding:Xi(t,0,8),gr(r,e+vn(r)+1,t))};Ge.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ol(n,!0):(Xi(e,0,Zc),t===void 0?t=a.rounding:Xi(t,0,8),n=gr(new a(n),e+1,t),r=ol(n,!0,e+1)),r};Ge.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?ol(a):(Xi(e,0,Zc),t===void 0?t=i.rounding:Xi(t,0,8),n=gr(new i(a),e+vn(a)+1,t),r=ol(n.abs(),!1,e+vn(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ge.toInteger=Ge.toint=function(){var e=this,t=e.constructor;return gr(new t(e),vn(e)+1,t.rounding)};Ge.toNumber=function(){return+this};Ge.toPower=Ge.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,f=+(e=new l(e));if(!e.s)return new l(Ra);if(s=new l(s),!s.s){if(e.s<1)throw Error(ii+"Infinity");return s}if(s.eq(Ra))return s;if(n=l.precision,e.eq(Ra))return gr(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=DC){for(a=new l(Ra),t=Math.ceil(n/Mr+4),Dr=!1;r%2&&(a=a.times(s),vS(a.d,t)),r=Qc(r/2),r!==0;)s=s.times(s),vS(s.d,t);return Dr=!0,e.s<0?new l(Ra).div(a):gr(a,n)}}else if(i<0)throw Error(ii+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,Dr=!1,a=e.times(Pf(s,n+u)),Dr=!0,a=IC(a),a.s=i,a};Ge.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=vn(a),n=ol(a,r<=i.toExpNeg||r>=i.toExpPos)):(Xi(e,1,Zc),t===void 0?t=i.rounding:Xi(t,0,8),a=gr(new i(a),e,t),r=vn(a),n=ol(a,e<=r||r<=i.toExpNeg,e)),n};Ge.toSignificantDigits=Ge.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Xi(e,1,Zc),t===void 0?t=n.rounding:Xi(t,0,8)),gr(new n(r),e,t)};Ge.toString=Ge.valueOf=Ge.val=Ge.toJSON=Ge[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=vn(e),r=e.constructor;return ol(e,t<=r.toExpNeg||t>=r.toExpPos)};function RC(e,t){var r,n,a,i,o,s,l,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Dr?gr(t,d):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(d/Mr),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/An|0,l[i]%=An;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,Dr?gr(t,d):t}function Xi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Vs+e)}function Ii(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Mr-n.length,r&&(i+=Eo(r)),i+=n;o=e[t],n=o+"",r=Mr-n.length,r&&(i+=Eo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var mo=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%An|0,o=i/An|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*An+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,f,d,p,m,b,x,w,v,y,k,C,j,S,N,M,E=n.constructor,R=n.s==a.s?1:-1,T=n.d,D=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(ii+"Division by zero");for(l=n.e-a.e,N=D.length,j=T.length,m=new E(R),b=m.d=[],u=0;D[u]==(T[u]||0);)++u;if(D[u]>(T[u]||0)&&--l,i==null?y=i=E.precision:o?y=i+(vn(n)-vn(a))+1:y=i,y<0)return new E(0);if(y=y/Mr+2|0,u=0,N==1)for(f=0,D=D[0],y++;(u<j||f)&&y--;u++)k=f*An+(T[u]||0),b[u]=k/D|0,f=k%D|0;else{for(f=An/(D[0]+1)|0,f>1&&(D=e(D,f),T=e(T,f),N=D.length,j=T.length),C=N,x=T.slice(0,N),w=x.length;w<N;)x[w++]=0;M=D.slice(),M.unshift(0),S=D[0],D[1]>=An/2&&++S;do f=0,s=t(D,x,N,w),s<0?(v=x[0],N!=w&&(v=v*An+(x[1]||0)),f=v/S|0,f>1?(f>=An&&(f=An-1),d=e(D,f),p=d.length,w=x.length,s=t(d,x,p,w),s==1&&(f--,r(d,N<p?M:D,p))):(f==0&&(s=f=1),d=D.slice()),p=d.length,p<w&&d.unshift(0),r(x,d,w),s==-1&&(w=x.length,s=t(D,x,N,w),s<1&&(f++,r(x,N<w?M:D,w))),w=x.length):s===0&&(f++,x=[0]),b[u++]=f,s&&x[0]?x[w++]=T[C]||0:(x=[T[C]],w=1);while((C++<j||x[0]!==void 0)&&y--)}return b[0]||b.shift(),m.e=l,gr(m,o?i+vn(m)+1:i)}}();function IC(e,t){var r,n,a,i,o,s,l=0,u=0,f=e.constructor,d=f.precision;if(vn(e)>16)throw Error(hb+vn(e));if(!e.s)return new f(Ra);for(Dr=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Ms(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(Ra),f.precision=s;;){if(a=gr(a.times(e),s),r=r.times(++l),o=i.plus(mo(a,r,s)),Ii(o.d).slice(0,s)===Ii(i.d).slice(0,s)){for(;u--;)i=gr(i.times(i),s);return f.precision=d,t==null?(Dr=!0,gr(i,d)):i}i=o}}function vn(e){for(var t=e.e*Mr,r=e.d[0];r>=10;r/=10)t++;return t}function _m(e,t,r){if(t>e.LN10.sd())throw Dr=!0,r&&(e.precision=r),Error(ii+"LN10 precision limit exceeded");return gr(new e(e.LN10),t)}function Eo(e){for(var t="";e--;)t+="0";return t}function Pf(e,t){var r,n,a,i,o,s,l,u,f,d=1,p=10,m=e,b=m.d,x=m.constructor,w=x.precision;if(m.s<1)throw Error(ii+(m.s?"NaN":"-Infinity"));if(m.eq(Ra))return new x(0);if(t==null?(Dr=!1,u=w):u=t,m.eq(10))return t==null&&(Dr=!0),_m(x,u);if(u+=p,x.precision=u,r=Ii(b),n=r.charAt(0),i=vn(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Ii(m.d),n=r.charAt(0),d++;i=vn(m),n>1?(m=new x("0."+r),i++):m=new x(n+"."+r.slice(1))}else return l=_m(x,u+2,w).times(i+""),m=Pf(new x(n+"."+r.slice(1)),u-p).plus(l),x.precision=w,t==null?(Dr=!0,gr(m,w)):m;for(s=o=m=mo(m.minus(Ra),m.plus(Ra),u),f=gr(m.times(m),u),a=3;;){if(o=gr(o.times(f),u),l=s.plus(mo(o,new x(a),u)),Ii(l.d).slice(0,u)===Ii(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(_m(x,u+2,w).times(i+""))),s=mo(s,new x(d),u),x.precision=w,t==null?(Dr=!0,gr(s,w)):s;s=l,a+=2}}function yS(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Qc(r/Mr),e.d=[],n=(r+1)%Mr,r<0&&(n+=Mr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Mr;n<a;)e.d.push(+t.slice(n,n+=Mr));t=t.slice(n),n=Mr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Dr&&(e.e>wh||e.e<-wh))throw Error(hb+r)}else e.s=0,e.e=0,e.d=[0];return e}function gr(e,t,r){var n,a,i,o,s,l,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Mr,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Mr),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Mr,a=n-Mr+o}if(r!==void 0&&(i=Ms(10,o-a-1),s=u/i%10|0,l=t<0||d[f+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Ms(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(i=vn(e),d.length=1,t=t-i-1,d[0]=Ms(10,(Mr-t%Mr)%Mr),e.e=Qc(-t/Mr)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=Ms(10,Mr-n),d[f]=a>0?(u/Ms(10,o-a)%Ms(10,a)|0)*i:0),l)for(;;)if(f==0){(d[0]+=i)==An&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=An)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(Dr&&(e.e>wh||e.e<-wh))throw Error(hb+vn(e));return e}function LC(e,t){var r,n,a,i,o,s,l,u,f,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Dr?gr(t,m):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(f=o<0,f?(r=l,o=-o,s=d.length):(r=d,n=u,s=l.length),a=Math.max(Math.ceil(m/Mr),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){f=l[a]<d[a];break}o=0}for(f&&(r=l,l=d,d=r,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>o;){if(l[--a]<d[a]){for(i=a;i&&l[--i]===0;)l[i]=An-1;--l[i],l[a]+=An}l[a]-=d[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Dr?gr(t,m):t):new p(0)}function ol(e,t,r){var n,a=vn(e),i=Ii(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Eo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Eo(-a-1)+i,r&&(n=r-o)>0&&(i+=Eo(n))):a>=o?(i+=Eo(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Eo(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Eo(n))),e.s<0?"-"+i:i}function vS(e,t){if(e.length>t)return e.length=t,!0}function BC(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Vs+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return yS(o,i.toString())}else if(typeof i!="string")throw Error(Vs+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,eH.test(i))yS(o,i);else throw Error(Vs+i)}if(a.prototype=Ge,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=BC,a.config=a.set=tH,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function tH(e){if(!e||typeof e!="object")throw Error(ii+"Object expected");var t,r,n,a=["precision",1,Zc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Qc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Vs+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Vs+r+": "+n);return this}var pb=BC(JV);Ra=new pb(1);const hr=pb;function rH(e){return oH(e)||iH(e)||aH(e)||nH()}function nH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aH(e,t){if(e){if(typeof e=="string")return xv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xv(e,t)}}function iH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function oH(e){if(Array.isArray(e))return xv(e)}function xv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sH=function(t){return t},FC={},zC=function(t){return t===FC},xS=function(t){return function r(){return arguments.length===0||arguments.length===1&&zC(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},lH=function e(t,r){return t===1?r:xS(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==FC}).length;return o>=t?r.apply(void 0,a):e(t-o,xS(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var f=a.map(function(d){return zC(d)?l.shift():d});return r.apply(void 0,rH(f).concat(l))}))})},Yp=function(t){return lH(t.length,t)},bv=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},cH=Yp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),uH=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return sH;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},wv=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},UC=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,l){return s===r[l]})||(r=i,n=t.apply(void 0,i)),n}};function fH(e){var t;return e===0?t=1:t=Math.floor(new hr(e).abs().log(10).toNumber())+1,t}function dH(e,t,r){for(var n=new hr(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var hH=Yp(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),pH=Yp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),gH=Yp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const qp={rangeStep:dH,getDigitCount:fH,interpolateNumber:hH,uninterpolateNumber:pH,uninterpolateTruncation:gH};function kv(e){return vH(e)||yH(e)||GC(e)||mH()}function mH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function vH(e){if(Array.isArray(e))return Sv(e)}function Nf(e,t){return wH(e)||bH(e,t)||GC(e,t)||xH()}function xH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GC(e,t){if(e){if(typeof e=="string")return Sv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sv(e,t)}}function Sv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bH(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function wH(e){if(Array.isArray(e))return e}function WC(e){var t=Nf(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function VC(e,t,r){if(e.lte(0))return new hr(0);var n=qp.getDigitCount(e.toNumber()),a=new hr(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new hr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?l:new hr(Math.ceil(l))}function kH(e,t,r){var n=1,a=new hr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new hr(10).pow(qp.getDigitCount(e)-1),a=new hr(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new hr(Math.floor(e)))}else e===0?a=new hr(Math.floor((t-1)/2)):r||(a=new hr(Math.floor(e)));var o=Math.floor((t-1)/2),s=uH(cH(function(l){return a.add(new hr(l-o).mul(n)).toNumber()}),bv);return s(0,t)}function HC(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new hr(0),tickMin:new hr(0),tickMax:new hr(0)};var i=VC(new hr(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new hr(0):(o=new hr(e).add(t).div(2),o=o.sub(new hr(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new hr(t).sub(o).div(i).toNumber()),u=s+l+1;return u>r?HC(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new hr(s).mul(i)),tickMax:o.add(new hr(l).mul(i))})}function SH(e){var t=Nf(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=WC([r,n]),l=Nf(s,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(kv(bv(0,a-1).map(function(){return 1/0}))):[].concat(kv(bv(0,a-1).map(function(){return-1/0})),[f]);return r>n?wv(d):d}if(u===f)return kH(u,a,i);var p=HC(u,f,o,i),m=p.step,b=p.tickMin,x=p.tickMax,w=qp.rangeStep(b,x.add(new hr(.1).mul(m)),m);return r>n?wv(w):w}function jH(e,t){var r=Nf(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=WC([n,a]),s=Nf(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var f=Math.max(t,2),d=VC(new hr(u).sub(l).div(f-1),i,0),p=[].concat(kv(qp.rangeStep(new hr(l),new hr(u).sub(new hr(.99).mul(d)),d)),[u]);return n>a?wv(p):p}var _H=UC(SH),CH=UC(jH),PH="Invariant failed";function sl(e,t){throw new Error(PH)}var NH=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kh.apply(this,arguments)}function OH(e,t){return EH(e)||TH(e,t)||AH(e,t)||MH()}function MH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AH(e,t){if(e){if(typeof e=="string")return bS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bS(e,t)}}function bS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function EH(e){if(Array.isArray(e))return e}function $H(e,t){if(e==null)return{};var r=DH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function RH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YC(n.key),n)}}function LH(e,t,r){return t&&IH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BH(e,t,r){return t=Sh(t),FH(e,XC()?Reflect.construct(t,r||[],Sh(e).constructor):t.apply(e,r))}function FH(e,t){if(t&&(vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zH(e)}function zH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XC=function(){return!!e})()}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sh(e)}function UH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jv(e,t)}function jv(e,t){return jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jv(e,t)}function KC(e,t,r){return t=YC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YC(e){var t=GH(e,"string");return vc(t)=="symbol"?t:t+""}function GH(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Jc=function(e){function t(){return RH(this,t),BH(this,t,arguments)}return UH(t,e),LH(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,p=$H(n,NH),m=wt(p,!1);this.props.direction==="x"&&f.type!=="number"&&sl();var b=l.map(function(x){var w=u(x,s),v=w.x,y=w.y,k=w.value,C=w.errorVal;if(!C)return null;var j=[],S,N;if(Array.isArray(C)){var M=OH(C,2);S=M[0],N=M[1]}else S=N=C;if(i==="vertical"){var E=f.scale,R=y+a,T=R+o,D=R-o,B=E(k-S),G=E(k+N);j.push({x1:G,y1:T,x2:G,y2:D}),j.push({x1:B,y1:R,x2:G,y2:R}),j.push({x1:B,y1:T,x2:B,y2:D})}else if(i==="horizontal"){var z=d.scale,F=v+a,I=F-o,L=F+o,W=z(k-S),K=z(k+N);j.push({x1:I,y1:K,x2:L,y2:K}),j.push({x1:F,y1:W,x2:F,y2:K}),j.push({x1:I,y1:W,x2:L,y2:W})}return Y.createElement(Jt,kh({className:"recharts-errorBar",key:"bar-".concat(j.map(function(ae){return"".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))},m),j.map(function(ae){return Y.createElement("line",kh({},ae,{key:"line-".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))}))});return Y.createElement(Jt,{className:"recharts-errorBars"},b)}}])}(Y.Component);KC(Jc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});KC(Jc,"displayName","ErrorBar");function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(r),!0).forEach(function(n){WH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WH(e,t,r){return t=VH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=HH(e,"string");return Of(t)=="symbol"?t:t+""}function HH(e,t){if(Of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qC=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Da(r,zi);if(!o)return null;var s=zi.defaultProps,l=s!==void 0?_s(_s({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var p=d.item,m=d.props,b=m.sectors||m.data||[];return f.concat(b.map(function(x){return{type:o.props.iconType||p.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(n||[]).map(function(f){var d=f.item,p=d.type.defaultProps,m=p!==void 0?_s(_s({},p),d.props):{},b=m.dataKey,x=m.name,w=m.legendType,v=m.hide;return{inactive:v,dataKey:b,type:l.iconType||w||"square",color:gb(d),value:x||b,payload:m}}),_s(_s(_s({},l),zi.getWithHeight(o,a)),{},{payload:u,item:o})};function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function kS(e){return qH(e)||YH(e)||KH(e)||XH()}function XH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KH(e,t){if(e){if(typeof e=="string")return _v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _v(e,t)}}function YH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qH(e){if(Array.isArray(e))return _v(e)}function _v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(n){ec(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ec(e,t,r){return t=ZH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZH(e){var t=QH(e,"string");return Mf(t)=="symbol"?t:t+""}function QH(e,t){if(Mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jn(e,t,r){return vt(e)||vt(t)?r:Sn(t)?ri(e,t,r):jt(t)?t(e):r}function Gu(e,t,r,n){var a=YV(e,function(s){return jn(s,t)});if(r==="number"){var i=a.filter(function(s){return Ce(s)||parseFloat(s)});return i.length?[Kp(i),Go(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!vt(s)}):a;return o.map(function(s){return Sn(s)||s instanceof Date?s:""})}var JH=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,p=u>=s-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Si(d-f)!==Si(p-d)){var b=[];if(Si(p-d)===Si(l[1]-l[0])){m=p;var x=d+l[1]-l[0];b[0]=Math.min(x,(x+f)/2),b[1]=Math.max(x,(x+f)/2)}else{m=f;var w=p+l[1]-l[0];b[0]=Math.min(d,(w+d)/2),b[1]=Math.max(d,(w+d)/2)}var v=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>v[0]&&t<=v[1]||t>=b[0]&&t<=b[1]){o=a[u].index;break}}else{var y=Math.min(f,p),k=Math.max(f,p);if(t>(y+d)/2&&t<=(k+d)/2){o=a[u].index;break}}}else for(var C=0;C<s;C++)if(C===0&&t<=(n[C].coordinate+n[C+1].coordinate)/2||C>0&&C<s-1&&t>(n[C].coordinate+n[C-1].coordinate)/2&&t<=(n[C].coordinate+n[C+1].coordinate)/2||C===s-1&&t>(n[C].coordinate+n[C-1].coordinate)/2){o=n[C].index;break}return o},gb=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Zr(Zr({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},eX=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,u=s.length;l<u;l++)for(var f=i[s[l]].stackGroups,d=Object.keys(f),p=0,m=d.length;p<m;p++){var b=f[d[p]],x=b.items,w=b.cateAxisId,v=x.filter(function(N){return ho(N.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,k=y!==void 0?Zr(Zr({},y),v[0].props):v[0].props,C=k.barSize,j=k[w];o[j]||(o[j]=[]);var S=vt(C)?r:C;o[j].push({item:v[0],stackList:v.slice(1),barSize:vt(S)?void 0:al(S,n,0)})}}return o},tX=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var u=al(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=a/l,b=o.reduce(function(C,j){return C+j.barSize||0},0);b+=(l-1)*u,b>=a&&(b-=(l-1)*u,u=0),b>=a&&m>0&&(p=!0,m*=.9,b=l*m);var x=(a-b)/2>>0,w={offset:x-u,size:0};f=o.reduce(function(C,j){var S={item:j.item,position:{offset:w.offset+w.size+u,size:p?m:j.barSize}},N=[].concat(kS(C),[S]);return w=N[N.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(M){N.push({item:M,position:w})}),N},d)}else{var v=al(n,a,0,!0);a-2*v-(l-1)*u<=0&&(u=0);var y=(a-2*v-(l-1)*u)/l;y>1&&(y>>=0);var k=s===+s?Math.min(y,s):y;f=o.reduce(function(C,j,S){var N=[].concat(kS(C),[{item:j.item,position:{offset:v+(y+u)*S+(y-k)/2,size:k}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(M){N.push({item:M,position:N[N.length-1].position})}),N},d)}return f},rX=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=qC({children:i,legendWidth:l});if(u){var f=a||{},d=f.width,p=f.height,m=u.align,b=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&b==="middle")&&m!=="center"&&Ce(t[m]))return Zr(Zr({},t),{},ec({},m,t[m]+(d||0)));if((x==="horizontal"||x==="vertical"&&m==="center")&&b!=="middle"&&Ce(t[b]))return Zr(Zr({},t),{},ec({},b,t[b]+(p||0)))}return t},nX=function(t,r,n){return vt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},ZC=function(t,r,n,a,i){var o=r.props.children,s=Pa(o,Jc).filter(function(u){return nX(a,i,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=jn(f,n);if(vt(d))return u;var p=Array.isArray(d)?[Kp(d),Go(d)]:[d,d],m=l.reduce(function(b,x){var w=jn(f,x,0),v=p[0]-Math.abs(Array.isArray(w)?w[0]:w),y=p[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(v,b[0]),Math.max(y,b[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},aX=function(t,r,n,a,i){var o=r.map(function(s){return ZC(t,s,n,i,a)}).filter(function(s){return!vt(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},QC=function(t,r,n,a,i){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&ZC(t,l,u,a)||Gu(t,u,n,i)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,l.push(u[f]));return l},[])},JC=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},eP=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===r&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate});return i||s.push(r),o||s.push(n),s},uo=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Si(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var p=i?i.indexOf(d):d;return{coordinate:a(p)+u,value:d,offset:u}});return f.filter(function(d){return!Hc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,p){return{coordinate:a(d)+u,value:d,index:p,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,p){return{coordinate:a(d)+u,value:i?i[d]:d,index:p,offset:u}})},Cm=new WeakMap,Yd=function(t,r){if(typeof r!="function")return t;Cm.has(t)||Cm.set(t,new WeakMap);var n=Cm.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},iX=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:kf(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:yh(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Uu(),realScaleType:"point"}:i==="category"?{scale:kf(),realScaleType:"band"}:{scale:yh(),realScaleType:"linear"};if(nl(a)){var l="scale".concat($p(a));return{scale:(mS[l]||Uu)(),realScaleType:mS[l]?l:"point"}}return jt(a)?{scale:a}:{scale:Uu(),realScaleType:"point"}},jS=1e-4,oX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-jS,o=Math.max(a[0],a[1])+jS,s=t(r[0]),l=t(r[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([r[0],r[n-1]])}},sX=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},lX=function(t,r){if(!r||r.length!==2||!Ce(r[0])||!Ce(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Ce(t[0])||t[0]<n)&&(i[0]=n),(!Ce(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},cX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var l=Hc(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},uX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=Hc(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},fX={sign:cX,expand:C7,none:uc,silhouette:P7,wiggle:N7,positive:uX},dX=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=fX[n],o=_7().keys(a).value(function(s,l){return+jn(s,l,0)}).order(qy).offset(i);return o(t)},hX=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(d,p){var m,b=(m=p.type)!==null&&m!==void 0&&m.defaultProps?Zr(Zr({},p.type.defaultProps),p.props):p.props,x=b.stackId,w=b.hide;if(w)return d;var v=b[n],y=d[v]||{hasStack:!1,stackGroups:{}};if(Sn(x)){var k=y.stackGroups[x]||{numericAxisId:n,cateAxisId:a,items:[]};k.items.push(p),y.hasStack=!0,y.stackGroups[x]=k}else y.stackGroups[pl("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return Zr(Zr({},d),{},ec({},v,y))},l),f={};return Object.keys(u).reduce(function(d,p){var m=u[p];if(m.hasStack){var b={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(x,w){var v=m.stackGroups[w];return Zr(Zr({},x),{},ec({},w,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:dX(t,v.items,i)}))},b)}return Zr(Zr({},d),{},ec({},p,m))},f)},pX=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=_H(u,i,s);return t.domain([Kp(f),Go(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),p=CH(d,i,s);return{niceTicks:p}}return null};function xc(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!vt(a[t.dataKey])){var s=K0(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=jn(a,vt(o)?t.dataKey:o);return vt(l)?null:t.scale(l)}var _S=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=jn(o,r.dataKey,r.domain[s]);return vt(l)?null:r.scale(l)-i/2+a},gX=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},mX=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Zr(Zr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Sn(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},yX=function(t){return t.reduce(function(r,n){return[Kp(n.concat([r[0]]).filter(Ce)),Go(n.concat([r[1]]).filter(Ce))]},[1/0,-1/0])},tP=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(u,f){var d=yX(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},CS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cv=function(t,r,n){if(jt(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Ce(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(CS.test(t[0])){var i=+CS.exec(t[0])[1];a[0]=r[0]-i}else jt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Ce(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(PS.test(t[1])){var o=+PS.exec(t[1])[1];a[1]=r[1]+o}else jt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},jh=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=U1(r,function(d){return d.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},NS=function(t,r,n){return!t||!t.length||il(t,ri(n,"type.defaultProps.domain"))?r:t},rP=function(t,r){var n=t.type.defaultProps?Zr(Zr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,f=n.hide;return Zr(Zr({},wt(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:gb(t),value:jn(r,a),type:l,payload:r,chartType:u,hide:f})};function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function OS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OS(Object(r),!0).forEach(function(n){vX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vX(e,t,r){return t=xX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xX(e){var t=bX(e,"string");return Af(t)=="symbol"?t:t+""}function bX(e,t){if(Af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _h=Math.PI/180,wX=function(t){return t*180/Math.PI},Xn=function(t,r,n,a){return{x:t+Math.cos(-_h*a)*n,y:r+Math.sin(-_h*a)*n}},kX=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},SX=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=kX({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(n-i)/s,u=Math.acos(l);return a>o&&(u=2*Math.PI-u),{radius:s,angle:wX(u),angleInRadian:u}},jX=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},_X=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},AS=function(t,r){var n=t.x,a=t.y,i=SX({x:n,y:a},r),o=i.radius,s=i.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var f=jX(r),d=f.startAngle,p=f.endAngle,m=s,b;if(d<=p){for(;m>p;)m-=360;for(;m<d;)m+=360;b=m>=d&&m<=p}else{for(;m>d;)m-=360;for(;m<p;)m+=360;b=m>=p&&m<=d}return b?MS(MS({},r),{},{radius:o,angle:_X(m,r)}):null};function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}var CX=["offset"];function PX(e){return AX(e)||MX(e)||OX(e)||NX()}function NX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OX(e,t){if(e){if(typeof e=="string")return Pv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pv(e,t)}}function MX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AX(e){if(Array.isArray(e))return Pv(e)}function Pv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TX(e,t){if(e==null)return{};var r=EX(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(n){$X(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $X(e,t,r){return t=DX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DX(e){var t=RX(e,"string");return Tf(t)=="symbol"?t:t+""}function RX(e,t){if(Tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ef(){return Ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ef.apply(this,arguments)}var IX=function(t){var r=t.value,n=t.formatter,a=vt(t.children)?r:t.children;return jt(n)?n(a):a},LX=function(t,r){var n=Si(r-t),a=Math.min(Math.abs(r-t),360);return n*a},BX=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,u=l.cx,f=l.cy,d=l.innerRadius,p=l.outerRadius,m=l.startAngle,b=l.endAngle,x=l.clockWise,w=(d+p)/2,v=LX(m,b),y=v>=0?1:-1,k,C;a==="insideStart"?(k=m+y*o,C=x):a==="insideEnd"?(k=b-y*o,C=!x):a==="end"&&(k=b+y*o,C=x),C=v<=0?C:!C;var j=Xn(u,f,w,k),S=Xn(u,f,w,k+(C?1:-1)*359),N="M".concat(j.x,",").concat(j.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(S.x,",").concat(S.y),M=vt(t.id)?pl("recharts-radial-line-"):t.id;return Y.createElement("text",Ef({},n,{dominantBaseline:"central",className:It("recharts-radial-bar-label",s)}),Y.createElement("defs",null,Y.createElement("path",{id:M,d:N})),Y.createElement("textPath",{xlinkHref:"#".concat(M)},r))},FX=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,l=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,p=(f+d)/2;if(a==="outside"){var m=Xn(o,s,u+n,p),b=m.x,x=m.y;return{x:b,y:x,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var w=(l+u)/2,v=Xn(o,s,w,p),y=v.x,k=v.y;return{x:y,y:k,textAnchor:"middle",verticalAnchor:"middle"}},zX=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,l=o.y,u=o.width,f=o.height,d=f>=0?1:-1,p=d*a,m=d>0?"end":"start",b=d>0?"start":"end",x=u>=0?1:-1,w=x*a,v=x>0?"end":"start",y=x>0?"start":"end";if(i==="top"){var k={x:s+u/2,y:l-d*a,textAnchor:"middle",verticalAnchor:m};return bn(bn({},k),n?{height:Math.max(l-n.y,0),width:u}:{})}if(i==="bottom"){var C={x:s+u/2,y:l+f+p,textAnchor:"middle",verticalAnchor:b};return bn(bn({},C),n?{height:Math.max(n.y+n.height-(l+f),0),width:u}:{})}if(i==="left"){var j={x:s-w,y:l+f/2,textAnchor:v,verticalAnchor:"middle"};return bn(bn({},j),n?{width:Math.max(j.x-n.x,0),height:f}:{})}if(i==="right"){var S={x:s+u+w,y:l+f/2,textAnchor:y,verticalAnchor:"middle"};return bn(bn({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:f}:{})}var N=n?{width:u,height:f}:{};return i==="insideLeft"?bn({x:s+w,y:l+f/2,textAnchor:y,verticalAnchor:"middle"},N):i==="insideRight"?bn({x:s+u-w,y:l+f/2,textAnchor:v,verticalAnchor:"middle"},N):i==="insideTop"?bn({x:s+u/2,y:l+p,textAnchor:"middle",verticalAnchor:b},N):i==="insideBottom"?bn({x:s+u/2,y:l+f-p,textAnchor:"middle",verticalAnchor:m},N):i==="insideTopLeft"?bn({x:s+w,y:l+p,textAnchor:y,verticalAnchor:b},N):i==="insideTopRight"?bn({x:s+u-w,y:l+p,textAnchor:v,verticalAnchor:b},N):i==="insideBottomLeft"?bn({x:s+w,y:l+f-p,textAnchor:y,verticalAnchor:m},N):i==="insideBottomRight"?bn({x:s+u-w,y:l+f-p,textAnchor:v,verticalAnchor:m},N):Uc(i)&&(Ce(i.x)||Is(i.x))&&(Ce(i.y)||Is(i.y))?bn({x:s+al(i.x,u),y:l+al(i.y,f),textAnchor:"end",verticalAnchor:"end"},N):bn({x:s+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},N)},UX=function(t){return"cx"in t&&Ce(t.cx)};function Hn(e){var t=e.offset,r=t===void 0?5:t,n=TX(e,CX),a=bn({offset:r},n),i=a.viewBox,o=a.position,s=a.value,l=a.children,u=a.content,f=a.className,d=f===void 0?"":f,p=a.textBreakAll;if(!i||vt(s)&&vt(l)&&!P.isValidElement(u)&&!jt(u))return null;if(P.isValidElement(u))return P.cloneElement(u,a);var m;if(jt(u)){if(m=P.createElement(u,a),P.isValidElement(m))return m}else m=IX(a);var b=UX(i),x=wt(a,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return BX(a,m,x);var w=b?FX(a):zX(a);return Y.createElement(ch,Ef({className:It("recharts-label",d)},x,w,{breakAll:p}),m)}Hn.displayName="Label";var nP=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,p=t.y,m=t.top,b=t.left,x=t.width,w=t.height,v=t.clockWise,y=t.labelViewBox;if(y)return y;if(Ce(x)&&Ce(w)){if(Ce(d)&&Ce(p))return{x:d,y:p,width:x,height:w};if(Ce(m)&&Ce(b))return{x:m,y:b,width:x,height:w}}return Ce(d)&&Ce(p)?{x:d,y:p,width:0,height:0}:Ce(r)&&Ce(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||l||s||0,clockWise:v}:t.viewBox?t.viewBox:{}},GX=function(t,r){return t?t===!0?Y.createElement(Hn,{key:"label-implicit",viewBox:r}):Sn(t)?Y.createElement(Hn,{key:"label-implicit",viewBox:r,value:t}):P.isValidElement(t)?t.type===Hn?P.cloneElement(t,{key:"label-implicit",viewBox:r}):Y.createElement(Hn,{key:"label-implicit",content:t,viewBox:r}):jt(t)?Y.createElement(Hn,{key:"label-implicit",content:t,viewBox:r}):Uc(t)?Y.createElement(Hn,Ef({viewBox:r},t,{key:"label-implicit"})):null:null},WX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=nP(t),o=Pa(a,Hn).map(function(l,u){return P.cloneElement(l,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=GX(t.label,r||i);return[s].concat(PX(o))};Hn.parseViewBox=nP;Hn.renderCallByParent=WX;function VX(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var HX=VX;const XX=mr(HX);function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}var KX=["valueAccessor"],YX=["data","dataKey","clockWise","id","textBreakAll"];function qX(e){return eK(e)||JX(e)||QX(e)||ZX()}function ZX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QX(e,t){if(e){if(typeof e=="string")return Nv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nv(e,t)}}function JX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eK(e){if(Array.isArray(e))return Nv(e)}function Nv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ch.apply(this,arguments)}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(n){tK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tK(e,t,r){return t=rK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rK(e){var t=nK(e,"string");return $f(t)=="symbol"?t:t+""}function nK(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DS(e,t){if(e==null)return{};var r=aK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var iK=function(t){return Array.isArray(t.value)?XX(t.value):t.value};function Gi(e){var t=e.valueAccessor,r=t===void 0?iK:t,n=DS(e,KX),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=DS(n,YX);return!a||!a.length?null:Y.createElement(Jt,{className:"recharts-label-list"},a.map(function(f,d){var p=vt(i)?r(f,d):jn(f&&f.payload,i),m=vt(s)?{}:{id:"".concat(s,"-").concat(d)};return Y.createElement(Hn,Ch({},wt(f,!0),u,m,{parentViewBox:f.parentViewBox,value:p,textBreakAll:l,viewBox:Hn.parseViewBox(vt(o)?f:$S($S({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Gi.displayName="LabelList";function oK(e,t){return e?e===!0?Y.createElement(Gi,{key:"labelList-implicit",data:t}):Y.isValidElement(e)||jt(e)?Y.createElement(Gi,{key:"labelList-implicit",data:t,content:e}):Uc(e)?Y.createElement(Gi,Ch({data:t},e,{key:"labelList-implicit"})):null:null}function sK(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Pa(n,Gi).map(function(o,s){return P.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=oK(e.label,t);return[i].concat(qX(a))}Gi.renderCallByParent=sK;function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ov.apply(this,arguments)}function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RS(Object(r),!0).forEach(function(n){lK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lK(e,t,r){return t=cK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cK(e){var t=uK(e,"string");return Df(t)=="symbol"?t:t+""}function uK(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fK=function(t,r){var n=Si(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},qd=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,f=l*(s?1:-1)+a,d=Math.asin(l/f)/_h,p=u?i:i+o*d,m=Xn(r,n,f,p),b=Xn(r,n,a,p),x=u?i-o*d:i,w=Xn(r,n,f*Math.cos(d*_h),x);return{center:m,circleTangency:b,lineTangency:w,theta:d}},aP=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=fK(o,s),u=o+l,f=Xn(r,n,i,o),d=Xn(r,n,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var m=Xn(r,n,a,o),b=Xn(r,n,a,u);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},dK=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Si(f-u),p=qd({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),m=p.circleTangency,b=p.lineTangency,x=p.theta,w=qd({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:l}),v=w.circleTangency,y=w.lineTangency,k=w.theta,C=l?Math.abs(u-f):Math.abs(u-f)-x-k;if(C<0)return s?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):aP({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var j="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var S=qd({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),N=S.circleTangency,M=S.lineTangency,E=S.theta,R=qd({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),T=R.circleTangency,D=R.lineTangency,B=R.theta,G=l?Math.abs(u-f):Math.abs(u-f)-E-B;if(G<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(d>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(M.x,",").concat(M.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},hK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iP=function(t){var r=IS(IS({},hK),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,p=r.className;if(o<i||f===d)return null;var m=It("recharts-sector",p),b=o-i,x=al(s,b,0,!0),w;return x>0&&Math.abs(f-d)<360?w=dK({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,b/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}):w=aP({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),Y.createElement("path",Ov({},wt(r,!0),{className:m,d:w,role:"img"}))};function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(this,arguments)}function LS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LS(Object(r),!0).forEach(function(n){pK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pK(e,t,r){return t=gK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gK(e){var t=mK(e,"string");return Rf(t)=="symbol"?t:t+""}function mK(e,t){if(Rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FS={curveBasisClosed:p7,curveBasisOpen:g7,curveBasis:h7,curveBumpX:J$,curveBumpY:e7,curveLinearClosed:m7,curveLinear:Rp,curveMonotoneX:y7,curveMonotoneY:v7,curveNatural:x7,curveStep:b7,curveStepAfter:k7,curveStepBefore:w7},Zd=function(t){return t.x===+t.x&&t.y===+t.y},ku=function(t){return t.x},Su=function(t){return t.y},yK=function(t,r){if(jt(t))return t;var n="curve".concat($p(t));return(n==="curveMonotone"||n==="curveBump")&&r?FS["".concat(n).concat(r==="vertical"?"Y":"X")]:FS[n]||Rp},vK=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,f=yK(n,s),d=u?i.filter(function(x){return Zd(x)}):i,p;if(Array.isArray(o)){var m=u?o.filter(function(x){return Zd(x)}):o,b=d.map(function(x,w){return BS(BS({},x),{},{base:m[w]})});return s==="vertical"?p=zd().y(Su).x1(ku).x0(function(x){return x.base.x}):p=zd().x(ku).y1(Su).y0(function(x){return x.base.y}),p.defined(Zd).curve(f),p(b)}return s==="vertical"&&Ce(o)?p=zd().y(Su).x1(ku).x0(o):Ce(o)?p=zd().x(ku).y1(Su).y0(o):p=s_().x(ku).y(Su),p.defined(Zd).curve(f),p(d)},Hs=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?vK(t):a;return P.createElement("path",Mv({},wt(t,!1),Y0(t),{className:It("recharts-curve",r),d:o,ref:i}))},oP={exports:{}},xK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",bK=xK,wK=bK;function sP(){}function lP(){}lP.resetWarningCache=sP;var kK=function(){function e(n,a,i,o,s,l){if(l!==wK){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:lP,resetWarningCache:sP};return r.PropTypes=r,r};oP.exports=kK();var SK=oP.exports;const nr=mr(SK),{getOwnPropertyNames:jK,getOwnPropertySymbols:_K}=Object,{hasOwnProperty:CK}=Object.prototype;function Pm(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Qd(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const l=e(r,n,a);return i.delete(r),i.delete(n),l}}function PK(e){return e!=null?e[Symbol.toStringTag]:void 0}function zS(e){return jK(e).concat(_K(e))}const NK=Object.hasOwn||((e,t)=>CK.call(e,t));function yl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const OK="__v",MK="__o",AK="_owner",{getOwnPropertyDescriptor:US,keys:GS}=Object;function TK(e,t){return e.byteLength===t.byteLength&&Ph(new Uint8Array(e),new Uint8Array(t))}function EK(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function $K(e,t){return e.byteLength===t.byteLength&&Ph(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function DK(e,t){return yl(e.getTime(),t.getTime())}function RK(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function IK(e,t){return e===t}function WS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,l=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const p=o.value,m=s.value;if(r.equals(p[0],m[0],l,d,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;l++}return!0}const LK=yl;function BK(e,t,r){const n=GS(e);let a=n.length;if(GS(t).length!==a)return!1;for(;a-- >0;)if(!cP(e,t,r,n[a]))return!1;return!0}function ju(e,t,r){const n=zS(e);let a=n.length;if(zS(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!cP(e,t,r,i)||(o=US(e,i),s=US(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function FK(e,t){return yl(e.valueOf(),t.valueOf())}function zK(e,t){return e.source===t.source&&e.flags===t.flags}function VS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const l=t.values();let u=!1,f=0;for(;(s=l.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function Ph(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function UK(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function cP(e,t,r,n){return(n===AK||n===MK||n===OK)&&(e.$$typeof||t.$$typeof)?!0:NK(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const GK="[object ArrayBuffer]",WK="[object Arguments]",VK="[object Boolean]",HK="[object DataView]",XK="[object Date]",KK="[object Error]",YK="[object Map]",qK="[object Number]",ZK="[object Object]",QK="[object RegExp]",JK="[object Set]",eY="[object String]",tY={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},rY="[object URL]",nY=Object.prototype.toString;function aY({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:b}){return function(w,v,y){if(w===v)return!0;if(w==null||v==null)return!1;const k=typeof w;if(k!==typeof v)return!1;if(k!=="object")return k==="number"?s(w,v,y):k==="function"?i(w,v,y):!1;const C=w.constructor;if(C!==v.constructor)return!1;if(C===Object)return l(w,v,y);if(Array.isArray(w))return t(w,v,y);if(C===Date)return n(w,v,y);if(C===RegExp)return f(w,v,y);if(C===Map)return o(w,v,y);if(C===Set)return d(w,v,y);const j=nY.call(w);if(j===XK)return n(w,v,y);if(j===QK)return f(w,v,y);if(j===YK)return o(w,v,y);if(j===JK)return d(w,v,y);if(j===ZK)return typeof w.then!="function"&&typeof v.then!="function"&&l(w,v,y);if(j===rY)return m(w,v,y);if(j===KK)return a(w,v,y);if(j===WK)return l(w,v,y);if(tY[j])return p(w,v,y);if(j===GK)return e(w,v,y);if(j===HK)return r(w,v,y);if(j===VK||j===qK||j===eY)return u(w,v,y);if(b){let S=b[j];if(!S){const N=PK(w);N&&(S=b[N])}if(S)return S(w,v,y)}return!1}}function iY({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:TK,areArraysEqual:r?ju:EK,areDataViewsEqual:$K,areDatesEqual:DK,areErrorsEqual:RK,areFunctionsEqual:IK,areMapsEqual:r?Pm(WS,ju):WS,areNumbersEqual:LK,areObjectsEqual:r?ju:BK,arePrimitiveWrappersEqual:FK,areRegExpsEqual:zK,areSetsEqual:r?Pm(VS,ju):VS,areTypedArraysEqual:r?Pm(Ph,ju):Ph,areUrlsEqual:UK,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=Qd(n.areArraysEqual),i=Qd(n.areMapsEqual),o=Qd(n.areObjectsEqual),s=Qd(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function oY(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function sY({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,l){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,l,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,l){return t(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,l){return t(s,l,i)}}const lY=ms();ms({strict:!0});ms({circular:!0});ms({circular:!0,strict:!0});ms({createInternalComparator:()=>yl});ms({strict:!0,createInternalComparator:()=>yl});ms({circular:!0,createInternalComparator:()=>yl});ms({circular:!0,createInternalComparator:()=>yl,strict:!0});function ms(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=iY(e),o=aY(i),s=r?r(o):oY(o);return sY({circular:t,comparator:o,createState:n,equals:s,strict:a})}function cY(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function HS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):cY(a)};requestAnimationFrame(n)}function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}function uY(e){return pY(e)||hY(e)||dY(e)||fY()}function fY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dY(e,t){if(e){if(typeof e=="string")return XS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XS(e,t)}}function XS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pY(e){if(Array.isArray(e))return e}function gY(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=uY(o),l=s[0],u=s.slice(1);if(typeof l=="number"){HS(a.bind(null,u),l);return}a(l),HS(a.bind(null,u));return}Av(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function KS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KS(Object(r),!0).forEach(function(n){uP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uP(e,t,r){return t=mY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mY(e){var t=yY(e,"string");return If(t)==="symbol"?t:String(t)}function yY(e,t){if(If(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(If(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vY=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},xY=function(t){return t},bY=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Wu=function(t,r){return Object.keys(r).reduce(function(n,a){return YS(YS({},n),{},uP({},a,t(a,r[a])))},{})},qS=function(t,r,n){return t.map(function(a){return"".concat(bY(a)," ").concat(r,"ms ").concat(n)}).join(",")};function wY(e,t){return jY(e)||SY(e,t)||fP(e,t)||kY()}function kY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function jY(e){if(Array.isArray(e))return e}function _Y(e){return NY(e)||PY(e)||fP(e)||CY()}function CY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fP(e,t){if(e){if(typeof e=="string")return Tv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tv(e,t)}}function PY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NY(e){if(Array.isArray(e))return Tv(e)}function Tv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nh=1e-4,dP=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},hP=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},ZS=function(t,r){return function(n){var a=dP(t,r);return hP(a,n)}},OY=function(t,r){return function(n){var a=dP(t,r),i=[].concat(_Y(a.map(function(o,s){return o*s}).slice(1)),[0]);return hP(i,n)}},QS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=wY(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=ZS(a,o),p=ZS(i,s),m=OY(a,o),b=function(v){return v>1?1:v<0?0:v},x=function(v){for(var y=v>1?1:v,k=y,C=0;C<8;++C){var j=d(k)-y,S=m(k);if(Math.abs(j-y)<Nh||S<Nh)return p(k);k=b(k-j/S)}return p(k)};return x.isStepper=!1,x},MY=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(f,d,p){var m=-(f-d)*n,b=p*i,x=p+(m-b)*s/1e3,w=p*s/1e3+f;return Math.abs(w-d)<Nh&&Math.abs(x)<Nh?[d,0]:[w,x]};return l.isStepper=!0,l.dt=s,l},AY=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return QS(a);case"spring":return MY();default:if(a.split("(")[0]==="cubic-bezier")return QS(a)}return typeof a=="function"?a:null};function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function JS(e){return $Y(e)||EY(e)||pP(e)||TY()}function TY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Y(e){if(Array.isArray(e))return $v(e)}function e5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e5(Object(r),!0).forEach(function(n){Ev(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ev(e,t,r){return t=DY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DY(e){var t=RY(e,"string");return Lf(t)==="symbol"?t:String(t)}function RY(e,t){if(Lf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IY(e,t){return FY(e)||BY(e,t)||pP(e,t)||LY()}function LY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pP(e,t){if(e){if(typeof e=="string")return $v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $v(e,t)}}function $v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function FY(e){if(Array.isArray(e))return e}var Oh=function(t,r,n){return t+(r-t)*n},Dv=function(t){var r=t.from,n=t.to;return r!==n},zY=function e(t,r,n){var a=Wu(function(i,o){if(Dv(o)){var s=t(o.from,o.to,o.velocity),l=IY(s,2),u=l[0],f=l[1];return Wn(Wn({},o),{},{from:u,velocity:f})}return o},r);return n<1?Wu(function(i,o){return Dv(o)?Wn(Wn({},o),{},{velocity:Oh(o.velocity,a[i].velocity,n),from:Oh(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const UY=function(e,t,r,n,a){var i=vY(e,t),o=i.reduce(function(w,v){return Wn(Wn({},w),{},Ev({},v,[e[v],t[v]]))},{}),s=i.reduce(function(w,v){return Wn(Wn({},w),{},Ev({},v,{from:e[v],velocity:0,to:t[v]}))},{}),l=-1,u,f,d=function(){return null},p=function(){return Wu(function(v,y){return y.from},s)},m=function(){return!Object.values(s).filter(Dv).length},b=function(v){u||(u=v);var y=v-u,k=y/r.dt;s=zY(r,s,k),a(Wn(Wn(Wn({},e),t),p())),u=v,m()||(l=requestAnimationFrame(d))},x=function(v){f||(f=v);var y=(v-f)/n,k=Wu(function(j,S){return Oh.apply(void 0,JS(S).concat([r(y)]))},o);if(a(Wn(Wn(Wn({},e),t),k)),y<1)l=requestAnimationFrame(d);else{var C=Wu(function(j,S){return Oh.apply(void 0,JS(S).concat([r(1)]))},o);a(Wn(Wn(Wn({},e),t),C))}};return d=r.isStepper?b:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function bc(e){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}var GY=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function WY(e,t){if(e==null)return{};var r=VY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VY(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Nm(e){return YY(e)||KY(e)||XY(e)||HY()}function HY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XY(e,t){if(e){if(typeof e=="string")return Rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rv(e,t)}}function KY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YY(e){if(Array.isArray(e))return Rv(e)}function Rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t5(Object(r),!0).forEach(function(n){Mu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mu(e,t,r){return t=gP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gP(n.key),n)}}function QY(e,t,r){return t&&ZY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gP(e){var t=JY(e,"string");return bc(t)==="symbol"?t:String(t)}function JY(e,t){if(bc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iv(e,t)}function Iv(e,t){return Iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Iv(e,t)}function tq(e){var t=rq();return function(){var n=Mh(e),a;if(t){var i=Mh(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Lv(this,a)}}function Lv(e,t){if(t&&(bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bv(e)}function Bv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rq(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mh(e){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mh(e)}var Pi=function(e){eq(r,e);var t=tq(r);function r(n,a){var i;qY(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,l=o.attributeName,u=o.from,f=o.to,d=o.steps,p=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Bv(i)),i.changeStyle=i.changeStyle.bind(Bv(i)),!s||m<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),Lv(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof p=="function")return i.state={style:u},Lv(i);i.state={style:l?Mu({},l,u):u}}else i.state={style:{}};return i}return QY(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,p=this.state.style;if(s){if(!o){var m={style:l?Mu({},l,f):f};this.state&&p&&(l&&p[l]!==f||!l&&p!==f)&&this.setState(m);return}if(!(lY(a.to,f)&&a.canBegin&&a.isActive)){var b=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=b||u?d:a.to;if(this.state&&p){var w={style:l?Mu({},l,x):x};(l&&p[l]!==x||!l&&p!==x)&&this.setState(w)}this.runAnimation(gi(gi({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,p=a.onAnimationStart,m=UY(o,s,AY(u),l,this.changeStyle),b=function(){i.stopJSAnimation=m()};this.manager.start([p,f,b,l,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,p=d===void 0?0:d,m=function(x,w,v){if(v===0)return x;var y=w.duration,k=w.easing,C=k===void 0?"ease":k,j=w.style,S=w.properties,N=w.onAnimationEnd,M=v>0?o[v-1]:w,E=S||Object.keys(j);if(typeof C=="function"||C==="spring")return[].concat(Nm(x),[i.runJSAnimation.bind(i,{from:M.style,to:j,duration:y,easing:C}),y]);var R=qS(E,y,C),T=gi(gi(gi({},M.style),j),{},{transition:R});return[].concat(Nm(x),[T,y,N]).filter(xY)};return this.manager.start([l].concat(Nm(o.reduce(m,[f,Math.max(p,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=gY());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,p=a.steps,m=a.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var x=s?Mu({},s,l):l,w=qS(Object.keys(x),o,u);b.start([f,i,gi(gi({},x),{},{transition:w}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=WY(a,GY),u=P.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(m){var b=m.props,x=b.style,w=x===void 0?{}:x,v=b.className,y=P.cloneElement(m,gi(gi({},l),{},{style:gi(gi({},w),f),className:v}));return y};return u===1?d(P.Children.only(i)):Y.createElement("div",null,P.Children.map(i,function(p){return d(p)}))}}]),r}(P.PureComponent);Pi.displayName="Animate";Pi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Pi.propTypes={from:nr.oneOfType([nr.object,nr.string]),to:nr.oneOfType([nr.object,nr.string]),attributeName:nr.string,duration:nr.number,begin:nr.number,easing:nr.oneOfType([nr.string,nr.func]),steps:nr.arrayOf(nr.shape({duration:nr.number.isRequired,style:nr.object.isRequired,easing:nr.oneOfType([nr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nr.func]),properties:nr.arrayOf("string"),onAnimationEnd:nr.func})),children:nr.oneOfType([nr.node,nr.func]),isActive:nr.bool,canBegin:nr.bool,onAnimationEnd:nr.func,shouldReAnimate:nr.bool,onAnimationStart:nr.func,onAnimationReStart:nr.func};function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ah.apply(this,arguments)}function nq(e,t){return sq(e)||oq(e,t)||iq(e,t)||aq()}function aq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iq(e,t){if(e){if(typeof e=="string")return r5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r5(e,t)}}function r5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function sq(e){if(Array.isArray(e))return e}function n5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n5(Object(r),!0).forEach(function(n){lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lq(e,t,r){return t=cq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cq(e){var t=uq(e,"string");return Bf(t)=="symbol"?t:t+""}function uq(e,t){if(Bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i5=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,m=4;p<m;p++)d[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+l*d[0],",").concat(r)),f+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-l*d[2],",").concat(r+a)),f+="L ".concat(t+l*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);f="M ".concat(t,",").concat(r+s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+l*b,",").concat(r,`
            L `).concat(t+n-l*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*b,`
            L `).concat(t+n,",").concat(r+a-s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n-l*b,",").concat(r+a,`
            L `).concat(t+l*b,",").concat(r+a,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},fq=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+l),p=Math.max(o,o+l);return n>=u&&n<=f&&a>=d&&a<=p}return!1},dq={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mb=function(t){var r=a5(a5({},dq),t),n=P.useRef(),a=P.useState(-1),i=nq(a,2),o=i[0],s=i[1];P.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&s(C)}catch{}},[]);var l=r.x,u=r.y,f=r.width,d=r.height,p=r.radius,m=r.className,b=r.animationEasing,x=r.animationDuration,w=r.animationBegin,v=r.isAnimationActive,y=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var k=It("recharts-rectangle",m);return y?Y.createElement(Pi,{canBegin:o>0,from:{width:f,height:d,x:l,y:u},to:{width:f,height:d,x:l,y:u},duration:x,animationEasing:b,isActive:y},function(C){var j=C.width,S=C.height,N=C.x,M=C.y;return Y.createElement(Pi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:x,isActive:v,easing:b},Y.createElement("path",Ah({},wt(r,!0),{className:k,d:i5(N,M,j,S,p),ref:n})))}):Y.createElement("path",Ah({},wt(r,!0),{className:k,d:i5(l,u,f,d,p)}))};function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(this,arguments)}var Zp=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=It("recharts-dot",i);return r===+r&&n===+n&&a===+a?P.createElement("circle",Fv({},wt(t,!1),Y0(t),{className:o,cx:r,cy:n,r:a})):null};function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}var hq=["x","y","top","left","width","height","className"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(this,arguments)}function o5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o5(Object(r),!0).forEach(function(n){gq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gq(e,t,r){return t=mq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mq(e){var t=yq(e,"string");return Ff(t)=="symbol"?t:t+""}function yq(e,t){if(Ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vq(e,t){if(e==null)return{};var r=xq(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var bq=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},wq=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,u=l===void 0?0:l,f=t.width,d=f===void 0?0:f,p=t.height,m=p===void 0?0:p,b=t.className,x=vq(t,hq),w=pq({x:n,y:i,top:s,left:u,width:d,height:m},x);return!Ce(n)||!Ce(i)||!Ce(d)||!Ce(m)||!Ce(s)||!Ce(u)?null:Y.createElement("path",zv({},wt(w,!0),{className:It("recharts-cross",b),d:bq(n,i,d,m,s,u)}))},kq=A_,Sq=kq(Object.getPrototypeOf,Object),jq=Sq,_q=_o,Cq=jq,Pq=Co,Nq="[object Object]",Oq=Function.prototype,Mq=Object.prototype,mP=Oq.toString,Aq=Mq.hasOwnProperty,Tq=mP.call(Object);function Eq(e){if(!Pq(e)||_q(e)!=Nq)return!1;var t=Cq(e);if(t===null)return!0;var r=Aq.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&mP.call(r)==Tq}var $q=Eq;const Dq=mr($q);var Rq=_o,Iq=Co,Lq="[object Boolean]";function Bq(e){return e===!0||e===!1||Iq(e)&&Rq(e)==Lq}var Fq=Bq;const zq=mr(Fq);function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Th.apply(this,arguments)}function Uq(e,t){return Hq(e)||Vq(e,t)||Wq(e,t)||Gq()}function Gq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wq(e,t){if(e){if(typeof e=="string")return s5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s5(e,t)}}function s5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Hq(e){if(Array.isArray(e))return e}function l5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l5(Object(r),!0).forEach(function(n){Xq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xq(e,t,r){return t=Kq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kq(e){var t=Yq(e,"string");return zf(t)=="symbol"?t:t+""}function Yq(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u5=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},qq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Zq=function(t){var r=c5(c5({},qq),t),n=P.useRef(),a=P.useState(-1),i=Uq(a,2),o=i[0],s=i[1];P.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var k=n.current.getTotalLength();k&&s(k)}catch{}},[]);var l=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,p=r.height,m=r.className,b=r.animationEasing,x=r.animationDuration,w=r.animationBegin,v=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||p!==+p||f===0&&d===0||p===0)return null;var y=It("recharts-trapezoid",m);return v?Y.createElement(Pi,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:u},to:{upperWidth:f,lowerWidth:d,height:p,x:l,y:u},duration:x,animationEasing:b,isActive:v},function(k){var C=k.upperWidth,j=k.lowerWidth,S=k.height,N=k.x,M=k.y;return Y.createElement(Pi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:x,easing:b},Y.createElement("path",Th({},wt(r,!0),{className:y,d:u5(N,M,C,j,S),ref:n})))}):Y.createElement("g",null,Y.createElement("path",Th({},wt(r,!0),{className:y,d:u5(l,u,f,d,p)})))},Qq=["option","shapeType","propTransformer","activeClassName","isActive"];function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function Jq(e,t){if(e==null)return{};var r=eZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function f5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Eh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f5(Object(r),!0).forEach(function(n){tZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tZ(e,t,r){return t=rZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rZ(e){var t=nZ(e,"string");return Uf(t)=="symbol"?t:t+""}function nZ(e,t){if(Uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aZ(e,t){return Eh(Eh({},t),e)}function iZ(e,t){return e==="symbols"}function d5(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Y.createElement(mb,r);case"trapezoid":return Y.createElement(Zq,r);case"sector":return Y.createElement(iP,r);case"symbols":if(iZ(t))return Y.createElement(Lp,r);break;default:return null}}function oZ(e){return P.isValidElement(e)?e.props:e}function Uv(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?aZ:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=Jq(e,Qq),u;if(P.isValidElement(t))u=P.cloneElement(t,Eh(Eh({},l),oZ(t)));else if(jt(t))u=t(l);else if(Dq(t)&&!zq(t)){var f=a(t,l);u=Y.createElement(d5,{shapeType:r,elementProps:f})}else{var d=l;u=Y.createElement(d5,{shapeType:r,elementProps:d})}return s?Y.createElement(Jt,{className:o},u):u}function Qp(e,t){return t!=null&&"trapezoids"in e.props}function Jp(e,t){return t!=null&&"sectors"in e.props}function Gf(e,t){return t!=null&&"points"in e.props}function sZ(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function lZ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function cZ(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function uZ(e,t){var r;return Qp(e,t)?r=sZ:Jp(e,t)?r=lZ:Gf(e,t)&&(r=cZ),r}function fZ(e,t){var r;return Qp(e,t)?r="trapezoids":Jp(e,t)?r="sectors":Gf(e,t)&&(r="points"),r}function dZ(e,t){if(Qp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Jp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Gf(e,t)?t.payload:{}}function hZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=fZ(r,t),i=dZ(r,t),o=n.filter(function(l,u){var f=il(i,l),d=r.props[a].filter(function(b){var x=uZ(r,t);return x(b,t)}),p=r.props[a].indexOf(d[d.length-1]),m=u===p;return f&&m}),s=n.indexOf(o[o.length-1]);return s}var pZ=Math.ceil,gZ=Math.max;function mZ(e,t,r,n){for(var a=-1,i=gZ(pZ((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var yZ=mZ,vZ=q_,h5=1/0,xZ=17976931348623157e292;function bZ(e){if(!e)return e===0?e:0;if(e=vZ(e),e===h5||e===-h5){var t=e<0?-1:1;return t*xZ}return e===e?e:0}var yP=bZ,wZ=yZ,kZ=zp,Om=yP;function SZ(e){return function(t,r,n){return n&&typeof n!="number"&&kZ(t,r,n)&&(r=n=void 0),t=Om(t),r===void 0?(r=t,t=0):r=Om(r),n=n===void 0?t<r?1:-1:Om(n),wZ(t,r,n,e)}}var jZ=SZ,_Z=jZ,CZ=_Z(),PZ=CZ;const $h=mr(PZ);function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function p5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function g5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(r),!0).forEach(function(n){vP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vP(e,t,r){return t=NZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NZ(e){var t=OZ(e,"string");return Wf(t)=="symbol"?t:t+""}function OZ(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MZ=["Webkit","Moz","O","ms"],AZ=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=MZ.reduce(function(i,o){return g5(g5({},i),{},vP({},o+n,r))},{});return a[t]=r,a};function wc(e){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dh.apply(this,arguments)}function m5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m5(Object(r),!0).forEach(function(n){Ea(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bP(n.key),n)}}function EZ(e,t,r){return t&&y5(e.prototype,t),r&&y5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Z(e,t,r){return t=Rh(t),DZ(e,xP()?Reflect.construct(t,r||[],Rh(e).constructor):t.apply(e,r))}function DZ(e,t){if(t&&(wc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RZ(e)}function RZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xP=function(){return!!e})()}function Rh(e){return Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rh(e)}function IZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gv(e,t)}function Gv(e,t){return Gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gv(e,t)}function Ea(e,t,r){return t=bP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bP(e){var t=LZ(e,"string");return wc(t)=="symbol"?t:t+""}function LZ(e,t){if(wc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BZ=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=Uu().domain($h(0,l)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},v5=function(t){return t.changedTouches&&!!t.changedTouches.length},kc=function(e){function t(r){var n;return TZ(this,t),n=$Z(this,t,[r]),Ea(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ea(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ea(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),Ea(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ea(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ea(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ea(n,"handleSlideDragStart",function(a){var i=v5(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return IZ(t,e),EZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),p=Math.max(a,i),m=t.getIndexInRange(o,d),b=t.getIndexInRange(o,p);return{startIndex:m-m%l,endIndex:b===f?f:b-b%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=jn(i[n],s,n);return jt(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,u=l.x,f=l.width,d=l.travellerWidth,p=l.startIndex,m=l.endIndex,b=l.onChange,x=n.pageX-i;x>0?x=Math.min(x,u+f-d-s,u+f-d-o):x<0&&(x=Math.max(x,u-o,u-s));var w=this.getIndex({startX:o+x,endX:s+x});(w.startIndex!==p||w.endIndex!==m)&&b&&b(w),this.setState({startX:o+x,endX:s+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=v5(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[o],f=this.props,d=f.x,p=f.width,m=f.travellerWidth,b=f.onChange,x=f.gap,w=f.data,v={startX:this.state.startX,endX:this.state.endX},y=n.pageX-i;y>0?y=Math.min(y,d+p-m-u):y<0&&(y=Math.max(y,d-u)),v[o]=u+y;var k=this.getIndex(v),C=k.startIndex,j=k.endIndex,S=function(){var M=w.length-1;return o==="startX"&&(s>l?C%x===0:j%x===0)||s<l&&j===M||o==="endX"&&(s>l?j%x===0:C%x===0)||s>l&&j===M};this.setState(Ea(Ea({},o,u+y),"brushMoveStartX",n.pageX),function(){b&&S()&&b(k)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var p=d+n;if(!(p===-1||p>=s.length)){var m=s[p];a==="startX"&&m>=u||a==="endX"&&m<=l||this.setState(Ea({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return Y.createElement("rect",{stroke:u,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.data,u=n.children,f=n.padding,d=P.Children.only(u);return d?Y.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,l=this.props,u=l.y,f=l.travellerWidth,d=l.height,p=l.traveller,m=l.ariaLabel,b=l.data,x=l.startIndex,w=l.endIndex,v=Math.max(n,this.props.x),y=Mm(Mm({},wt(this.props,!1)),{},{x:v,y:u,width:f,height:d}),k=m||"Min value: ".concat((i=b[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[w])===null||o===void 0?void 0:o.name);return Y.createElement(Jt,{tabIndex:0,role:"slider","aria-label":k,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),s.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,y))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,p=f.endX,m=5,b={pointerEvents:"none",fill:u};return Y.createElement(Jt,{className:"recharts-brush-texts"},Y.createElement(ch,Dh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-m,y:o+s/2},b),this.getTextOfTick(a)),Y.createElement(ch,Dh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+l+m,y:o+s/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,l=n.y,u=n.width,f=n.height,d=n.alwaysShowText,p=this.state,m=p.startX,b=p.endX,x=p.isTextActive,w=p.isSlideMoving,v=p.isTravellerMoving,y=p.isTravellerFocused;if(!a||!a.length||!Ce(s)||!Ce(l)||!Ce(u)||!Ce(f)||u<=0||f<=0)return null;var k=It("recharts-brush",i),C=Y.Children.count(o)===1,j=AZ("userSelect","none");return Y.createElement(Jt,{className:k,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(m,b),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(b,"endX"),(x||w||v||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(i+s/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),Y.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return Y.isValidElement(n)?i=Y.cloneElement(n,a):jt(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Mm({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?BZ({data:i,width:o,x:s,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var p=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>a?s=l:o=l}return a>=n[s]?s:o}}])}(P.PureComponent);Ea(kc,"displayName","Brush");Ea(kc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var FZ=z1;function zZ(e,t){var r;return FZ(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var UZ=zZ,GZ=S_,WZ=ds,VZ=UZ,HZ=Ma,XZ=zp;function KZ(e,t,r){var n=HZ(e)?GZ:VZ;return r&&XZ(e,t,r)&&(t=void 0),n(e,WZ(t))}var YZ=KZ;const qZ=mr(YZ);var Wi=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},x5=V_;function ZZ(e,t,r){t=="__proto__"&&x5?x5(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var QZ=ZZ,JZ=QZ,eQ=G_,tQ=ds;function rQ(e,t){var r={};return t=tQ(t),eQ(e,function(n,a,i){JZ(r,a,t(n,a,i))}),r}var nQ=rQ;const aQ=mr(nQ);function iQ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var oQ=iQ,sQ=z1;function lQ(e,t){var r=!0;return sQ(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var cQ=lQ,uQ=oQ,fQ=cQ,dQ=ds,hQ=Ma,pQ=zp;function gQ(e,t,r){var n=hQ(e)?uQ:fQ;return r&&pQ(e,t,r)&&(t=void 0),n(e,dQ(t))}var mQ=gQ;const wP=mr(mQ);var yQ=["x","y"];function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wv.apply(this,arguments)}function b5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b5(Object(r),!0).forEach(function(n){vQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vQ(e,t,r){return t=xQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xQ(e){var t=bQ(e,"string");return Vf(t)=="symbol"?t:t+""}function bQ(e,t){if(Vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wQ(e,t){if(e==null)return{};var r=kQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function SQ(e,t){var r=e.x,n=e.y,a=wQ(e,yQ),i="".concat(r),o=parseInt(i,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),p=parseInt(d,10);return _u(_u(_u(_u(_u({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function w5(e){return Y.createElement(Uv,Wv({shapeType:"rectangle",propTransformer:SQ,activeClassName:"recharts-active-bar"},e))}var jQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Ce(n)||L8(n);return i?t(n,a):(i||sl(),r)}},_Q=["value","background"],kP;function Sc(e){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(e)}function CQ(e,t){if(e==null)return{};var r=PQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function PQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(this,arguments)}function k5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(r),!0).forEach(function(n){Wo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jP(n.key),n)}}function OQ(e,t,r){return t&&S5(e.prototype,t),r&&S5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MQ(e,t,r){return t=Lh(t),AQ(e,SP()?Reflect.construct(t,r||[],Lh(e).constructor):t.apply(e,r))}function AQ(e,t){if(t&&(Sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TQ(e)}function TQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SP=function(){return!!e})()}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lh(e)}function EQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vv(e,t)}function Vv(e,t){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vv(e,t)}function Wo(e,t,r){return t=jP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jP(e){var t=$Q(e,"string");return Sc(t)=="symbol"?t:t+""}function $Q(e,t){if(Sc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sd=function(e){function t(){var r;NQ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=MQ(this,t,[].concat(a)),Wo(r,"state",{isAnimationFinished:!1}),Wo(r,"id",pl("recharts-bar-")),Wo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Wo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return EQ(t,e),OQ(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,u=i.activeBar,f=wt(this.props,!1);return n&&n.map(function(d,p){var m=p===l,b=m?u:o,x=hn(hn(hn({},f),d),{},{isActive:m,option:b,index:p,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Y.createElement(Jt,Ih({className:"recharts-bar-rectangle"},pf(a.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),Y.createElement(w5,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,p=this.state.prevData;return Y.createElement(Pi,{begin:l,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var b=m.t,x=i.map(function(w,v){var y=p&&p[v];if(y){var k=on(y.x,w.x),C=on(y.y,w.y),j=on(y.width,w.width),S=on(y.height,w.height);return hn(hn({},w),{},{x:k(b),y:C(b),width:j(b),height:S(b)})}if(o==="horizontal"){var N=on(0,w.height),M=N(b);return hn(hn({},w),{},{y:w.y+w.height-M,height:M})}var E=on(0,w.width),R=E(b);return hn(hn({},w),{},{width:R})});return Y.createElement(Jt,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!il(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=wt(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,p=CQ(u,_Q);if(!d)return null;var m=hn(hn(hn(hn(hn({},p),{},{fill:"#eee"},d),l),pf(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Y.createElement(w5,Ih({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Pa(f,Jc);if(!d)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,m=function(w,v){var y=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:y,errorVal:jn(w,v)}},b={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Y.createElement(Jt,b,d.map(function(x){return Y.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,f=n.top,d=n.width,p=n.height,m=n.isAnimationActive,b=n.background,x=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,v=It("recharts-bar",o),y=s&&s.allowDataOverflow,k=l&&l.allowDataOverflow,C=y||k,j=vt(x)?this.id:x;return Y.createElement(Jt,{className:v},y||k?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(j)},Y.createElement("rect",{x:y?u:u-d/2,y:k?f:f-p/2,width:y?d:d*2,height:k?p:p*2}))):null,Y.createElement(Jt,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(j,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,j),(!m||w)&&Gi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(P.PureComponent);kP=sd;Wo(sd,"displayName","Bar");Wo(sd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!hs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Wo(sd,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,m=sX(n,r);if(!m)return null;var b=t.layout,x=r.type.defaultProps,w=x!==void 0?hn(hn({},x),r.props):r.props,v=w.dataKey,y=w.children,k=w.minPointSize,C=b==="horizontal"?o:i,j=u?C.scale.domain():null,S=gX({numericAxis:C}),N=Pa(y,W1),M=d.map(function(E,R){var T,D,B,G,z,F;u?T=lX(u[f+R],j):(T=jn(E,v),Array.isArray(T)||(T=[S,T]));var I=jQ(k,kP.defaultProps.minPointSize)(T[1],R);if(b==="horizontal"){var L,W=[o.scale(T[0]),o.scale(T[1])],K=W[0],ae=W[1];D=_S({axis:i,ticks:s,bandSize:a,offset:m.offset,entry:E,index:R}),B=(L=ae??K)!==null&&L!==void 0?L:void 0,G=m.size;var re=K-ae;if(z=Number.isNaN(re)?0:re,F={x:D,y:o.y,width:G,height:o.height},Math.abs(I)>0&&Math.abs(z)<Math.abs(I)){var Q=Si(z||I)*(Math.abs(I)-Math.abs(z));B-=Q,z+=Q}}else{var le=[i.scale(T[0]),i.scale(T[1])],Ne=le[0],ie=le[1];if(D=Ne,B=_S({axis:o,ticks:l,bandSize:a,offset:m.offset,entry:E,index:R}),G=ie-Ne,z=m.size,F={x:i.x,y:B,width:i.width,height:z},Math.abs(I)>0&&Math.abs(G)<Math.abs(I)){var ge=Si(G||I)*(Math.abs(I)-Math.abs(G));G+=ge}}return hn(hn(hn({},E),{},{x:D,y:B,width:G,height:z,value:u?T:T[1],payload:E,background:F},N&&N[R]&&N[R].props),{},{tooltipPayload:[rP(r,E)],tooltipPosition:{x:D+G/2,y:B+z/2}})});return hn({data:M,layout:b},p)});function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function DQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_P(n.key),n)}}function RQ(e,t,r){return t&&j5(e.prototype,t),r&&j5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(r),!0).forEach(function(n){eg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eg(e,t,r){return t=_P(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _P(e){var t=IQ(e,"string");return Hf(t)=="symbol"?t:t+""}function IQ(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yb=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},p=!!Da(u,sd);return f.reduce(function(m,b){var x=r[b],w=x.orientation,v=x.domain,y=x.padding,k=y===void 0?{}:y,C=x.mirror,j=x.reversed,S="".concat(w).concat(C?"Mirror":""),N,M,E,R,T;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var D=v[1]-v[0],B=1/0,G=x.categoricalDomain.sort(U8);if(G.forEach(function(le,Ne){Ne>0&&(B=Math.min((le||0)-(G[Ne-1]||0),B))}),Number.isFinite(B)){var z=B/D,F=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(N=z*F/2),x.padding==="no-gap"){var I=al(t.barCategoryGap,z*F),L=z*F/2;N=L-I-(L-I)/F*I}}}a==="xAxis"?M=[n.left+(k.left||0)+(N||0),n.left+n.width-(k.right||0)-(N||0)]:a==="yAxis"?M=l==="horizontal"?[n.top+n.height-(k.bottom||0),n.top+(k.top||0)]:[n.top+(k.top||0)+(N||0),n.top+n.height-(k.bottom||0)-(N||0)]:M=x.range,j&&(M=[M[1],M[0]]);var W=iX(x,i,p),K=W.scale,ae=W.realScaleType;K.domain(v).range(M),oX(K);var re=pX(K,vi(vi({},x),{},{realScaleType:ae}));a==="xAxis"?(T=w==="top"&&!C||w==="bottom"&&C,E=n.left,R=d[S]-T*x.height):a==="yAxis"&&(T=w==="left"&&!C||w==="right"&&C,E=d[S]-T*x.width,R=n.top);var Q=vi(vi(vi({},x),re),{},{realScaleType:ae,x:E,y:R,scale:K,width:a==="xAxis"?n.width:x.width,height:a==="yAxis"?n.height:x.height});return Q.bandSize=jh(Q,re),!x.hide&&a==="xAxis"?d[S]+=(T?-1:1)*Q.height:x.hide||(d[S]+=(T?-1:1)*Q.width),vi(vi({},m),{},eg({},b,Q))},{})},CP=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},LQ=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return CP({x:r,y:n},{x:a,y:i})},PP=function(){function e(t){DQ(this,e),this.scale=t}return RQ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();eg(PP,"EPS",1e-4);var vb=function(t){var r=Object.keys(t).reduce(function(n,a){return vi(vi({},n),{},eg({},a,PP.create(t[a])))},{});return vi(vi({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return aQ(a,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return wP(a,function(i,o){return r[o].isInRange(i)})}})};function BQ(e){return(e%180+180)%180}var FQ=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=BQ(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},zQ=ds,UQ=rd,GQ=Bp;function WQ(e){return function(t,r,n){var a=Object(t);if(!UQ(t)){var i=zQ(r);t=GQ(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var VQ=WQ,HQ=yP;function XQ(e){var t=HQ(e),r=t%1;return t===t?r?t-r:t:0}var KQ=XQ,YQ=I_,qQ=ds,ZQ=KQ,QQ=Math.max;function JQ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:ZQ(r);return a<0&&(a=QQ(n+a,0)),YQ(e,qQ(t),a)}var eJ=JQ,tJ=VQ,rJ=eJ,nJ=tJ(rJ),aJ=nJ;const iJ=mr(aJ);var oJ=WE(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),xb=P.createContext(void 0),bb=P.createContext(void 0),NP=P.createContext(void 0),OP=P.createContext({}),MP=P.createContext(void 0),AP=P.createContext(0),TP=P.createContext(0),C5=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,l=t.width,u=t.height,f=oJ(i);return Y.createElement(xb.Provider,{value:n},Y.createElement(bb.Provider,{value:a},Y.createElement(OP.Provider,{value:i},Y.createElement(NP.Provider,{value:f},Y.createElement(MP.Provider,{value:o},Y.createElement(AP.Provider,{value:u},Y.createElement(TP.Provider,{value:l},s)))))))},sJ=function(){return P.useContext(MP)},EP=function(t){var r=P.useContext(xb);r==null&&sl();var n=r[t];return n==null&&sl(),n},lJ=function(){var t=P.useContext(xb);return Ro(t)},cJ=function(){var t=P.useContext(bb),r=iJ(t,function(n){return wP(n.domain,Number.isFinite)});return r||Ro(t)},$P=function(t){var r=P.useContext(bb);r==null&&sl();var n=r[t];return n==null&&sl(),n},uJ=function(){var t=P.useContext(NP);return t},fJ=function(){return P.useContext(OP)},wb=function(){return P.useContext(TP)},kb=function(){return P.useContext(AP)};function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}function dJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RP(n.key),n)}}function pJ(e,t,r){return t&&hJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gJ(e,t,r){return t=Bh(t),mJ(e,DP()?Reflect.construct(t,r||[],Bh(e).constructor):t.apply(e,r))}function mJ(e,t){if(t&&(jc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yJ(e)}function yJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DP=function(){return!!e})()}function Bh(e){return Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bh(e)}function vJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hv(e,t)}function Hv(e,t){return Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hv(e,t)}function P5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P5(Object(r),!0).forEach(function(n){Sb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sb(e,t,r){return t=RP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RP(e){var t=xJ(e,"string");return jc(t)=="symbol"?t:t+""}function xJ(e,t){if(jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function bJ(e,t){return jJ(e)||SJ(e,t)||kJ(e,t)||wJ()}function wJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kJ(e,t){if(e){if(typeof e=="string")return O5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O5(e,t)}}function O5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function jJ(e){if(Array.isArray(e))return e}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(this,arguments)}var _J=function(t,r){var n;return Y.isValidElement(t)?n=Y.cloneElement(t,r):jt(t)?n=t(r):n=Y.createElement("line",Xv({},r,{className:"recharts-reference-line-line"})),n},CJ=function(t,r,n,a,i,o,s,l,u){var f=i.x,d=i.y,p=i.width,m=i.height;if(n){var b=u.y,x=t.y.apply(b,{position:o});if(Wi(u,"discard")&&!t.y.isInRange(x))return null;var w=[{x:f+p,y:x},{x:f,y:x}];return l==="left"?w.reverse():w}if(r){var v=u.x,y=t.x.apply(v,{position:o});if(Wi(u,"discard")&&!t.x.isInRange(y))return null;var k=[{x:y,y:d+m},{x:y,y:d}];return s==="top"?k.reverse():k}if(a){var C=u.segment,j=C.map(function(S){return t.apply(S,{position:o})});return Wi(u,"discard")&&qZ(j,function(S){return!t.isInRange(S)})?null:j}return null};function PJ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,u=sJ(),f=EP(a),d=$P(i),p=uJ();if(!u||!p)return null;po(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=vb({x:f.scale,y:d.scale}),b=Sn(t),x=Sn(r),w=n&&n.length===2,v=CJ(m,b,x,w,p,e.position,f.orientation,d.orientation,e);if(!v)return null;var y=bJ(v,2),k=y[0],C=k.x,j=k.y,S=y[1],N=S.x,M=S.y,E=Wi(e,"hidden")?"url(#".concat(u,")"):void 0,R=N5(N5({clipPath:E},wt(e,!0)),{},{x1:C,y1:j,x2:N,y2:M});return Y.createElement(Jt,{className:It("recharts-reference-line",s)},_J(o,R),Hn.renderCallByParent(e,LQ({x1:C,y1:j,x2:N,y2:M})))}var Vo=function(e){function t(){return dJ(this,t),gJ(this,t,arguments)}return vJ(t,e),pJ(t,[{key:"render",value:function(){return Y.createElement(PJ,this.props)}}])}(Y.Component);Sb(Vo,"displayName","ReferenceLine");Sb(Vo,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kv.apply(this,arguments)}function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}function M5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M5(Object(r),!0).forEach(function(n){tg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LP(n.key),n)}}function MJ(e,t,r){return t&&OJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AJ(e,t,r){return t=Fh(t),TJ(e,IP()?Reflect.construct(t,r||[],Fh(e).constructor):t.apply(e,r))}function TJ(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EJ(e)}function EJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IP=function(){return!!e})()}function Fh(e){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fh(e)}function $J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yv(e,t)}function Yv(e,t){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yv(e,t)}function tg(e,t,r){return t=LP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LP(e){var t=DJ(e,"string");return _c(t)=="symbol"?t:t+""}function DJ(e,t){if(_c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var RJ=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=vb({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return Wi(t,"discard")&&!o.isInRange(s)?null:s},ld=function(e){function t(){return NJ(this,t),AJ(this,t,arguments)}return $J(t,e),MJ(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=Sn(a),f=Sn(i);if(po(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=RJ(this.props);if(!d)return null;var p=d.x,m=d.y,b=this.props,x=b.shape,w=b.className,v=Wi(this.props,"hidden")?"url(#".concat(l,")"):void 0,y=A5(A5({clipPath:v},wt(this.props,!0)),{},{cx:p,cy:m});return Y.createElement(Jt,{className:It("recharts-reference-dot",w)},t.renderDot(x,y),Hn.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])}(Y.Component);tg(ld,"displayName","ReferenceDot");tg(ld,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});tg(ld,"renderDot",function(e,t){var r;return Y.isValidElement(e)?r=Y.cloneElement(e,t):jt(e)?r=e(t):r=Y.createElement(Zp,Kv({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qv.apply(this,arguments)}function Cc(e){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cc(e)}function T5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(r),!0).forEach(function(n){rg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FP(n.key),n)}}function BJ(e,t,r){return t&&LJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FJ(e,t,r){return t=zh(t),zJ(e,BP()?Reflect.construct(t,r||[],zh(e).constructor):t.apply(e,r))}function zJ(e,t){if(t&&(Cc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UJ(e)}function UJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BP=function(){return!!e})()}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zh(e)}function GJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zv(e,t)}function rg(e,t,r){return t=FP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FP(e){var t=WJ(e,"string");return Cc(t)=="symbol"?t:t+""}function WJ(e,t){if(Cc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VJ=function(t,r,n,a,i){var o=i.x1,s=i.x2,l=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var p=vb({x:f.scale,y:d.scale}),m={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(l,{position:"start"}):p.y.rangeMin},b={x:r?p.x.apply(s,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Wi(i,"discard")&&(!p.isInRange(m)||!p.isInRange(b))?null:CP(m,b)},cd=function(e){function t(){return IJ(this,t),FJ(this,t,arguments)}return GJ(t,e),BJ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,f=n.clipPathId;po(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Sn(a),p=Sn(i),m=Sn(o),b=Sn(s),x=this.props.shape;if(!d&&!p&&!m&&!b&&!x)return null;var w=VJ(d,p,m,b,this.props);if(!w&&!x)return null;var v=Wi(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Y.createElement(Jt,{className:It("recharts-reference-area",l)},t.renderRect(x,E5(E5({clipPath:v},wt(this.props,!0)),w)),Hn.renderCallByParent(this.props,w))}}])}(Y.Component);rg(cd,"displayName","ReferenceArea");rg(cd,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});rg(cd,"renderRect",function(e,t){var r;return Y.isValidElement(e)?r=Y.cloneElement(e,t):jt(e)?r=e(t):r=Y.createElement(mb,qv({},t,{className:"recharts-reference-area-rect"})),r});function zP(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function HJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return FQ(n,r)}function XJ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function Uh(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function KJ(e,t){return zP(e,t+1)}function YJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,l=0,u=1,f=o,d=function(){var b=n==null?void 0:n[l];if(b===void 0)return{v:zP(n,u)};var x=l,w,v=function(){return w===void 0&&(w=r(b,x)),w},y=b.coordinate,k=l===0||Uh(e,y,v,f,s);k||(l=0,f=o,u+=1),k&&(f=y+e*(v()/2+a),l+=u)},p;u<=i.length;)if(p=d(),p)return p.v;return[]}function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function $5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(r),!0).forEach(function(n){qJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qJ(e,t,r){return t=ZJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZJ(e){var t=QJ(e,"string");return Xf(t)=="symbol"?t:t+""}function QJ(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,l=t.end,u=function(p){var m=i[p],b,x=function(){return b===void 0&&(b=r(m,p)),b};if(p===o-1){var w=e*(m.coordinate+e*x()/2-l);i[p]=m=ta(ta({},m),{},{tickCoord:w>0?m.coordinate-w*e:m.coordinate})}else i[p]=m=ta(ta({},m),{},{tickCoord:m.coordinate});var v=Uh(e,m.tickCoord,x,s,l);v&&(l=m.tickCoord-e*(x()/2+a),i[p]=ta(ta({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function eee(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,l=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),p=e*(f.coordinate+e*d/2-u);o[s-1]=f=ta(ta({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var m=Uh(e,f.tickCoord,function(){return d},l,u);m&&(u=f.tickCoord-e*(d/2+a),o[s-1]=ta(ta({},f),{},{isShow:!0}))}for(var b=i?s-1:s,x=function(y){var k=o[y],C,j=function(){return C===void 0&&(C=r(k,y)),C};if(y===0){var S=e*(k.coordinate-e*j()/2-l);o[y]=k=ta(ta({},k),{},{tickCoord:S<0?k.coordinate-S*e:k.coordinate})}else o[y]=k=ta(ta({},k),{},{tickCoord:k.coordinate});var N=Uh(e,k.tickCoord,j,l,u);N&&(l=k.tickCoord+e*(j()/2+a),o[y]=ta(ta({},k),{},{isShow:!0}))},w=0;w<b;w++)x(w);return o}function jb(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(Ce(l)||hs.isSsr)return KJ(a,typeof l=="number"&&Ce(l)?l:0);var p=[],m=s==="top"||s==="bottom"?"width":"height",b=f&&m==="width"?zu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=function(k,C){var j=jt(u)?u(k.value,C):k.value;return m==="width"?HJ(zu(j,{fontSize:t,letterSpacing:r}),b,d):zu(j,{fontSize:t,letterSpacing:r})[m]},w=a.length>=2?Si(a[1].coordinate-a[0].coordinate):1,v=XJ(i,w,m);return l==="equidistantPreserveStart"?YJ(w,v,x,a,o):(l==="preserveStart"||l==="preserveStartEnd"?p=eee(w,v,x,a,o,l==="preserveStartEnd"):p=JJ(w,v,x,a,o),p.filter(function(y){return y.isShow}))}var tee=["viewBox"],ree=["viewBox"],nee=["ticks"];function Pc(e){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(e)}function Gl(){return Gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gl.apply(this,arguments)}function D5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(r),!0).forEach(function(n){_b(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Am(e,t){if(e==null)return{};var r=aee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GP(n.key),n)}}function oee(e,t,r){return t&&R5(e.prototype,t),r&&R5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function see(e,t,r){return t=Gh(t),lee(e,UP()?Reflect.construct(t,r||[],Gh(e).constructor):t.apply(e,r))}function lee(e,t){if(t&&(Pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cee(e)}function cee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UP=function(){return!!e})()}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gh(e)}function uee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qv(e,t)}function Qv(e,t){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qv(e,t)}function _b(e,t,r){return t=GP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GP(e){var t=fee(e,"string");return Pc(t)=="symbol"?t:t+""}function fee(e,t){if(Pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eu=function(e){function t(r){var n;return iee(this,t),n=see(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return uee(t,e),oee(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Am(n,tee),s=this.props,l=s.viewBox,u=Am(s,ree);return!Ql(i,l)||!Ql(o,u)||!Ql(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,p=a.tickMargin,m,b,x,w,v,y,k=d?-1:1,C=n.tickSize||f,j=Ce(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=b=n.coordinate,w=o+ +!d*l,x=w-k*C,y=x-k*p,v=j;break;case"left":x=w=n.coordinate,b=i+ +!d*s,m=b-k*C,v=m-k*p,y=j;break;case"right":x=w=n.coordinate,b=i+ +d*s,m=b+k*C,v=m+k*p,y=j;break;default:m=b=n.coordinate,w=o+ +d*l,x=w+k*C,y=x+k*p,v=j;break}return{line:{x1:m,y1:x,x2:b,y2:w},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,f=n.axisLine,d=xn(xn(xn({},wt(this.props,!1)),wt(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!u||l==="bottom"&&u);d=xn(xn({},d),{},{x1:a,y1:i+p*s,x2:a+o,y2:i+p*s})}else{var m=+(l==="left"&&!u||l==="right"&&u);d=xn(xn({},d),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+s})}return Y.createElement("line",Gl({},d,{className:It("recharts-cartesian-axis-line",ri(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,l=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,p=s.unit,m=jb(xn(xn({},this.props),{},{ticks:n}),a,i),b=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),w=wt(this.props,!1),v=wt(f,!1),y=xn(xn({},w),{},{fill:"none"},wt(l,!1)),k=m.map(function(C,j){var S=o.getTickLineCoord(C),N=S.line,M=S.tick,E=xn(xn(xn(xn({textAnchor:b,verticalAnchor:x},w),{},{stroke:"none",fill:u},v),M),{},{index:j,payload:C,visibleTicksCount:m.length,tickFormatter:d});return Y.createElement(Jt,Gl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},pf(o.props,C,j)),l&&Y.createElement("line",Gl({},y,N,{className:It("recharts-cartesian-axis-tick-line",ri(l,"className"))})),f&&t.renderTickItem(f,E,"".concat(jt(d)?d(C.value,j):C.value).concat(p||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},k)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,p=d.ticks,m=Am(d,nee),b=p;return jt(l)&&(b=p&&p.length>0?l(this.props):l(m)),o<=0||s<=0||!b||!b.length?null:Y.createElement(Jt,{className:It("recharts-cartesian-axis",u),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Hn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=It(a.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(n)?o=Y.cloneElement(n,xn(xn({},a),{},{className:s})):jt(n)?o=n(xn(xn({},a),{},{className:s})):o=Y.createElement(ch,Gl({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(P.Component);_b(eu,"displayName","CartesianAxis");_b(eu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var dee=["x1","y1","x2","y2","key"],hee=["offset"];function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function I5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(r),!0).forEach(function(n){pee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pee(e,t,r){return t=gee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gee(e){var t=mee(e,"string");return ll(t)=="symbol"?t:t+""}function mee(e,t){if(ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(){return Fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fs.apply(this,arguments)}function L5(e,t){if(e==null)return{};var r=yee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vee=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return Y.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function WP(e,t){var r;if(Y.isValidElement(e))r=Y.cloneElement(e,t);else if(jt(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=L5(t,dee),u=wt(l,!1);u.offset;var f=L5(u,hee);r=Y.createElement("line",Fs({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function xee(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=na(na({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return WP(a,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function bee(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=na(na({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return WP(a,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function wee(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var f=s.map(function(p){return Math.round(p+a-a)}).sort(function(p,m){return p-m});a!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var b=!f[m+1],x=b?a+o-p:f[m+1]-p;if(x<=0)return null;var w=m%t.length;return Y.createElement("rect",{key:"react-".concat(m),y:p,x:n,height:x,width:i,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function kee(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var b=!f[m+1],x=b?i+s-p:f[m+1]-p;if(x<=0)return null;var w=m%n.length;return Y.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:x,height:l,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var See=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return eP(jb(na(na(na({},eu.defaultProps),n),{},{ticks:uo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},jee=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return eP(jb(na(na(na({},eu.defaultProps),n),{},{ticks:uo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Nl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Vi(e){var t,r,n,a,i,o,s=wb(),l=kb(),u=fJ(),f=na(na({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Nl.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Nl.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Nl.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Nl.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Nl.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Nl.verticalFill,x:Ce(e.x)?e.x:u.left,y:Ce(e.y)?e.y:u.top,width:Ce(e.width)?e.width:u.width,height:Ce(e.height)?e.height:u.height}),d=f.x,p=f.y,m=f.width,b=f.height,x=f.syncWithTicks,w=f.horizontalValues,v=f.verticalValues,y=lJ(),k=cJ();if(!Ce(m)||m<=0||!Ce(b)||b<=0||!Ce(d)||d!==+d||!Ce(p)||p!==+p)return null;var C=f.verticalCoordinatesGenerator||See,j=f.horizontalCoordinatesGenerator||jee,S=f.horizontalPoints,N=f.verticalPoints;if((!S||!S.length)&&jt(j)){var M=w&&w.length,E=j({yAxis:k?na(na({},k),{},{ticks:M?w:k.ticks}):void 0,width:s,height:l,offset:u},M?!0:x);po(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ll(E),"]")),Array.isArray(E)&&(S=E)}if((!N||!N.length)&&jt(C)){var R=v&&v.length,T=C({xAxis:y?na(na({},y),{},{ticks:R?v:y.ticks}):void 0,width:s,height:l,offset:u},R?!0:x);po(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ll(T),"]")),Array.isArray(T)&&(N=T)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(vee,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Y.createElement(xee,Fs({},f,{offset:u,horizontalPoints:S,xAxis:y,yAxis:k})),Y.createElement(bee,Fs({},f,{offset:u,verticalPoints:N,xAxis:y,yAxis:k})),Y.createElement(wee,Fs({},f,{horizontalPoints:S})),Y.createElement(kee,Fs({},f,{verticalPoints:N})))}Vi.displayName="CartesianGrid";var _ee=["type","layout","connectNulls","ref"],Cee=["key"];function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function B5(e,t){if(e==null)return{};var r=Pee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Pee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vu.apply(this,arguments)}function F5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(r),!0).forEach(function(n){xi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ol(e){return Aee(e)||Mee(e)||Oee(e)||Nee()}function Nee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oee(e,t){if(e){if(typeof e=="string")return Jv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jv(e,t)}}function Mee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Aee(e){if(Array.isArray(e))return Jv(e)}function Jv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HP(n.key),n)}}function Eee(e,t,r){return t&&z5(e.prototype,t),r&&z5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ee(e,t,r){return t=Wh(t),Dee(e,VP()?Reflect.construct(t,r||[],Wh(e).constructor):t.apply(e,r))}function Dee(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ree(e)}function Ree(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VP=function(){return!!e})()}function Wh(e){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wh(e)}function Iee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ex(e,t)}function ex(e,t){return ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ex(e,t)}function xi(e,t,r){return t=HP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HP(e){var t=Lee(e,"string");return Nc(t)=="symbol"?t:t+""}function Lee(e,t){if(Nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mn=function(e){function t(){var r;Tee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$ee(this,t,[].concat(a)),xi(r,"state",{isAnimationFinished:!0,totalLength:0}),xi(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),xi(r,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(v,y){return v+y});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,p=s-o,m=[],b=0,x=0;b<l.length;x+=l[b],++b)if(x+l[b]>d){m=[].concat(Ol(l.slice(0,b)),[d-x]);break}var w=m.length%2===0?[0,p]:[p];return[].concat(Ol(t.repeat(l,f)),Ol(m),w).map(function(v){return"".concat(v,"px")}).join(", ")}),xi(r,"id",pl("recharts-line-")),xi(r,"pathRef",function(o){r.mainCurve=o}),xi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),xi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Iee(t,e),Eee(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Pa(f,Jc);if(!d)return null;var p=function(x,w){return{x:x.x,y:x.y,value:x.value,errorVal:jn(x.payload,w)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Y.createElement(Jt,m,d.map(function(b){return Y.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,f=s.dataKey,d=wt(this.props,!1),p=wt(l,!0),m=u.map(function(x,w){var v=Ta(Ta(Ta({key:"dot-".concat(w),r:3},d),p),{},{index:w,cx:x.x,cy:x.y,value:x.value,dataKey:f,payload:x.payload,points:u});return t.renderDotItem(l,v)}),b={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Y.createElement(Jt,Vu({className:"recharts-line-dots",key:"dots"},b),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,l=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=B5(s,_ee),p=Ta(Ta(Ta({},wt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:l,layout:u,connectNulls:f});return Y.createElement(Hs,Vu({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,b=o.animateNewValues,x=o.width,w=o.height,v=this.state,y=v.prevPoints,k=v.totalLength;return Y.createElement(Pi,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var j=C.t;if(y){var S=y.length/s.length,N=s.map(function(D,B){var G=Math.floor(B*S);if(y[G]){var z=y[G],F=on(z.x,D.x),I=on(z.y,D.y);return Ta(Ta({},D),{},{x:F(j),y:I(j)})}if(b){var L=on(x*2,D.x),W=on(w/2,D.y);return Ta(Ta({},D),{},{x:L(j),y:W(j)})}return Ta(Ta({},D),{},{x:D.x,y:D.y})});return i.renderCurveStatically(N,n,a)}var M=on(0,k),E=M(j),R;if(l){var T="".concat(l).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});R=i.getStrokeDasharray(E,k,T)}else R=i.generateSimpleStrokeDasharray(k,E);return i.renderCurveStatically(s,n,a,{strokeDasharray:R})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return s&&o&&o.length&&(!u&&f>0||!il(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.xAxis,f=a.yAxis,d=a.top,p=a.left,m=a.width,b=a.height,x=a.isAnimationActive,w=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,k=It("recharts-line",l),C=u&&u.allowDataOverflow,j=f&&f.allowDataOverflow,S=C||j,N=vt(w)?this.id:w,M=(n=wt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},E=M.r,R=E===void 0?3:E,T=M.strokeWidth,D=T===void 0?2:T,B=Kj(o)?o:{},G=B.clipDot,z=G===void 0?!0:G,F=R*2+D;return Y.createElement(Jt,{className:k},C||j?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(N)},Y.createElement("rect",{x:C?p:p-m/2,y:j?d:d-b/2,width:C?m:m*2,height:j?b:b*2})),!z&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(N)},Y.createElement("rect",{x:p-F/2,y:d-F/2,width:m+F,height:b+F}))):null,!y&&this.renderCurve(S,N),this.renderErrorBar(S,N),(y||o)&&this.renderDots(S,z,N),(!x||v)&&Gi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Ol(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(Ol(o),Ol(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(Y.isValidElement(n))i=Y.cloneElement(n,a);else if(jt(n))i=n(a);else{var o=a.key,s=B5(a,Cee),l=It("recharts-line-dot",typeof n!="boolean"?n.className:"");i=Y.createElement(Zp,Vu({key:o},s,{className:l}))}return i}}])}(P.PureComponent);xi(mn,"displayName","Line");xi(mn,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!hs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});xi(mn,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,f=t.layout,d=l.map(function(p,m){var b=jn(p,o);return f==="horizontal"?{x:xc({axis:r,ticks:a,bandSize:s,entry:p,index:m}),y:vt(b)?null:n.scale(b),value:b,payload:p}:{x:vt(b)?null:r.scale(b),y:xc({axis:n,ticks:i,bandSize:s,entry:p,index:m}),value:b,payload:p}});return Ta({points:d,layout:f},u)});var Bee=["layout","type","stroke","connectNulls","isRange","ref"],Fee=["key"],XP;function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function KP(e,t){if(e==null)return{};var r=zee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zs.apply(this,arguments)}function U5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(r),!0).forEach(function(n){Li(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qP(n.key),n)}}function Gee(e,t,r){return t&&G5(e.prototype,t),r&&G5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wee(e,t,r){return t=Vh(t),Vee(e,YP()?Reflect.construct(t,r||[],Vh(e).constructor):t.apply(e,r))}function Vee(e,t){if(t&&(Oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hee(e)}function Hee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YP=function(){return!!e})()}function Vh(e){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vh(e)}function Xee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tx(e,t)}function tx(e,t){return tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tx(e,t)}function Li(e,t,r){return t=qP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(e){var t=Kee(e,"string");return Oc(t)=="symbol"?t:t+""}function Kee(e,t){if(Oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ei=function(e){function t(){var r;Uee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Wee(this,t,[].concat(a)),Li(r,"state",{isAnimationFinished:!0}),Li(r,"id",pl("recharts-area-")),Li(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),jt(o)&&o()}),Li(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),jt(o)&&o()}),r}return Xee(t,e),Gee(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,f=l.points,d=l.dataKey,p=wt(this.props,!1),m=wt(u,!0),b=f.map(function(w,v){var y=Mo(Mo(Mo({key:"dot-".concat(v),r:3},p),m),{},{index:v,cx:w.x,cy:w.y,dataKey:d,value:w.value,payload:w.payload,points:f});return t.renderDotItem(u,y)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Y.createElement(Jt,zs({className:"recharts-area-dots"},x),b)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,u=o[o.length-1].x,f=n*Math.abs(l-u),d=Go(o.map(function(p){return p.y||0}));return Ce(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Go(i.map(function(p){return p.y||0})),d)),Ce(d)?Y.createElement("rect",{x:l<u?l:l-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,u=o[o.length-1].y,f=n*Math.abs(l-u),d=Go(o.map(function(p){return p.x||0}));return Ce(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Go(i.map(function(p){return p.x||0})),d)),Ce(d)?Y.createElement("rect",{x:0,y:l<u?l:l-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,l=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,p=s.isRange;s.ref;var m=KP(s,Bee);return Y.createElement(Jt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},Y.createElement(Hs,zs({},wt(m,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Y.createElement(Hs,zs({},wt(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&p&&Y.createElement(Hs,zs({},wt(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,b=this.state,x=b.prevPoints,w=b.prevBaseLine;return Y.createElement(Pi,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t;if(x){var k=x.length/s.length,C=s.map(function(M,E){var R=Math.floor(E*k);if(x[R]){var T=x[R],D=on(T.x,M.x),B=on(T.y,M.y);return Mo(Mo({},M),{},{x:D(y),y:B(y)})}return M}),j;if(Ce(l)&&typeof l=="number"){var S=on(w,l);j=S(y)}else if(vt(l)||Hc(l)){var N=on(w,0);j=N(y)}else j=l.map(function(M,E){var R=Math.floor(E*k);if(w[R]){var T=w[R],D=on(T.x,M.x),B=on(T.y,M.y);return Mo(Mo({},M),{},{x:D(y),y:B(y)})}return M});return i.renderAreaStatically(C,j,n,a)}return Y.createElement(Jt,null,Y.createElement("defs",null,Y.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),Y.createElement(Jt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,l,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,p=u.totalLength;return l&&o&&o.length&&(!f&&p>0||!il(f,o)||!il(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.top,f=a.left,d=a.xAxis,p=a.yAxis,m=a.width,b=a.height,x=a.isAnimationActive,w=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,k=It("recharts-area",l),C=d&&d.allowDataOverflow,j=p&&p.allowDataOverflow,S=C||j,N=vt(w)?this.id:w,M=(n=wt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},E=M.r,R=E===void 0?3:E,T=M.strokeWidth,D=T===void 0?2:T,B=Kj(o)?o:{},G=B.clipDot,z=G===void 0?!0:G,F=R*2+D;return Y.createElement(Jt,{className:k},C||j?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(N)},Y.createElement("rect",{x:C?f:f-m/2,y:j?u:u-b/2,width:C?m:m*2,height:j?b:b*2})),!z&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(N)},Y.createElement("rect",{x:f-F/2,y:u-F/2,width:m+F,height:b+F}))):null,y?null:this.renderArea(S,N),(o||y)&&this.renderDots(S,z,N),(!x||v)&&Gi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(P.PureComponent);XP=ei;Li(ei,"displayName","Area");Li(ei,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!hs.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Li(ei,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(Ce(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Li(ei,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,m=t.layout,b=u&&u.length,x=XP.getBaseValue(t,r,n,a),w=m==="horizontal",v=!1,y=d.map(function(C,j){var S;b?S=u[f+j]:(S=jn(C,l),Array.isArray(S)?v=!0:S=[x,S]);var N=S[1]==null||b&&jn(C,l)==null;return w?{x:xc({axis:n,ticks:i,bandSize:s,entry:C,index:j}),y:N?null:a.scale(S[1]),value:S,payload:C}:{x:N?null:n.scale(S[1]),y:xc({axis:a,ticks:o,bandSize:s,entry:C,index:j}),value:S,payload:C}}),k;return b||v?k=y.map(function(C){var j=Array.isArray(C.value)?C.value[0]:null;return w?{x:C.x,y:j!=null&&C.y!=null?a.scale(j):null}:{x:j!=null?n.scale(j):null,y:C.y}}):k=w?a.scale(x):n.scale(x),Mo({points:y,baseLine:k,layout:m,isRange:v},p)});Li(ei,"renderDotItem",function(e,t){var r;if(Y.isValidElement(e))r=Y.cloneElement(e,t);else if(jt(e))r=e(t);else{var n=It("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=KP(t,Fee);r=Y.createElement(Zp,zs({},i,{key:a,className:n}))}return r});function Mc(e){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(e)}function Yee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JP(n.key),n)}}function Zee(e,t,r){return t&&qee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qee(e,t,r){return t=Hh(t),Jee(e,ZP()?Reflect.construct(t,r||[],Hh(e).constructor):t.apply(e,r))}function Jee(e,t){if(t&&(Mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ete(e)}function ete(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZP=function(){return!!e})()}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hh(e)}function tte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rx(e,t)}function rx(e,t){return rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rx(e,t)}function QP(e,t,r){return t=JP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JP(e){var t=rte(e,"string");return Mc(t)=="symbol"?t:t+""}function rte(e,t){if(Mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ng=function(e){function t(){return Yee(this,t),Qee(this,t,arguments)}return tte(t,e),Zee(t,[{key:"render",value:function(){return null}}])}(P.Component);QP(ng,"displayName","ZAxis");QP(ng,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var nte=["option","isActive"];function Hu(){return Hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hu.apply(this,arguments)}function ate(e,t){if(e==null)return{};var r=ite(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ite(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ote(e){var t=e.option,r=e.isActive,n=ate(e,nte);return typeof t=="string"?P.createElement(Uv,Hu({option:P.createElement(Lp,Hu({type:t},n)),isActive:r,shapeType:"symbols"},n)):P.createElement(Uv,Hu({option:t,isActive:r,shapeType:"symbols"},n))}function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xu.apply(this,arguments)}function W5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(r),!0).forEach(function(n){Ho(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tN(n.key),n)}}function lte(e,t,r){return t&&V5(e.prototype,t),r&&V5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cte(e,t,r){return t=Xh(t),ute(e,eN()?Reflect.construct(t,r||[],Xh(e).constructor):t.apply(e,r))}function ute(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fte(e)}function fte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!e})()}function Xh(e){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xh(e)}function dte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nx(e,t)}function nx(e,t){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nx(e,t)}function Ho(e,t,r){return t=tN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tN(e){var t=hte(e,"string");return Ac(t)=="symbol"?t:t+""}function hte(e,t){if(Ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fa=function(e){function t(){var r;ste(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=cte(this,t,[].concat(a)),Ho(r,"state",{isAnimationFinished:!1}),Ho(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Ho(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Ho(r,"id",pl("recharts-scatter-")),r}return dte(t,e),lte(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,l=i.activeIndex,u=wt(this.props,!1);return n.map(function(f,d){var p=l===d,m=p?s:o,b=Ya(Ya({},u),f);return Y.createElement(Jt,Xu({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},pf(a.props,f,d),{role:"img"}),Y.createElement(ote,Xu({option:m,isActive:p,key:"symbol-".concat(d)},b)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return Y.createElement(Pi,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,b=i.map(function(x,w){var v=d&&d[w];if(v){var y=on(v.cx,x.cx),k=on(v.cy,x.cy),C=on(v.size,x.size);return Ya(Ya({},x),{},{cx:y(m),cy:k(m),size:C(m)})}var j=on(0,x.size);return Ya(Ya({},x),{},{size:j(m)})});return Y.createElement(Jt,null,n.renderSymbolsStatically(b))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!il(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,l=a.children,u=Pa(l,Jc);return u?u.map(function(f,d){var p=f.props,m=p.direction,b=p.dataKey;return Y.cloneElement(f,{key:"".concat(m,"-").concat(b,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(w,v){return{x:w.cx,y:w.cy,value:m==="x"?+w.node.x:+w.node.y,errorVal:jn(w,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,l=wt(this.props,!1),u=wt(i,!1),f,d;if(o==="joint")f=a.map(function(k){return{x:k.cx,y:k.cy}});else if(o==="fitting"){var p=z8(a),m=p.xmin,b=p.xmax,x=p.a,w=p.b,v=function(C){return x*C+w};f=[{x:m,y:v(m)},{x:b,y:v(b)}]}var y=Ya(Ya(Ya({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:f});return Y.isValidElement(i)?d=Y.cloneElement(i,y):jt(i)?d=i(y):d=Y.createElement(Hs,Xu({},y,{type:s})),Y.createElement(Jt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,l=n.xAxis,u=n.yAxis,f=n.left,d=n.top,p=n.width,m=n.height,b=n.id,x=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,v=It("recharts-scatter",s),y=l&&l.allowDataOverflow,k=u&&u.allowDataOverflow,C=y||k,j=vt(b)?this.id:b;return Y.createElement(Jt,{className:v,clipPath:C?"url(#clipPath-".concat(j,")"):null},y||k?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(j)},Y.createElement("rect",{x:y?f:f-p/2,y:k?d:d-m/2,width:y?p:p*2,height:k?m:m*2}))):null,o&&this.renderLine(),this.renderErrorBar(),Y.createElement(Jt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!x||w)&&Gi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(P.PureComponent);Ho(fa,"displayName","Scatter");Ho(fa,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!hs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Ho(fa,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=a.props.tooltipType,f=Pa(a.props.children,W1),d=vt(t.dataKey)?a.props.dataKey:t.dataKey,p=vt(r.dataKey)?a.props.dataKey:r.dataKey,m=n&&n.dataKey,b=n?n.range:ng.defaultProps.range,x=b&&b[0],w=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,y=i.map(function(k,C){var j=jn(k,d),S=jn(k,p),N=!vt(m)&&jn(k,m)||"-",M=[{name:vt(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:j,payload:k,dataKey:d,type:u},{name:vt(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:S,payload:k,dataKey:p,type:u}];N!=="-"&&M.push({name:n.name||n.dataKey,unit:n.unit||"",value:N,payload:k,dataKey:m,type:u});var E=xc({axis:t,ticks:o,bandSize:w,entry:k,index:C,dataKey:d}),R=xc({axis:r,ticks:s,bandSize:v,entry:k,index:C,dataKey:p}),T=N!=="-"?n.scale(N):x,D=Math.sqrt(Math.max(T,0)/Math.PI);return Ya(Ya({},k),{},{cx:E,cy:R,x:E-D,y:R-D,xAxis:t,yAxis:r,zAxis:n,width:2*D,height:2*D,size:T,node:{x:j,y:S,z:N},tooltipPayload:M,tooltipPosition:{x:E,y:R},payload:k},f&&f[C]&&f[C].props)});return Ya({points:y},l)});function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function pte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aN(n.key),n)}}function mte(e,t,r){return t&&gte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yte(e,t,r){return t=Kh(t),vte(e,rN()?Reflect.construct(t,r||[],Kh(e).constructor):t.apply(e,r))}function vte(e,t){if(t&&(Tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xte(e)}function xte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rN=function(){return!!e})()}function Kh(e){return Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kh(e)}function bte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ax(e,t)}function ax(e,t){return ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ax(e,t)}function nN(e,t,r){return t=aN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aN(e){var t=wte(e,"string");return Tc(t)=="symbol"?t:t+""}function wte(e,t){if(Tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ix(){return ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ix.apply(this,arguments)}function kte(e){var t=e.xAxisId,r=wb(),n=kb(),a=EP(t);return a==null?null:P.createElement(eu,ix({},a,{className:It("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return uo(o,!0)}}))}var Na=function(e){function t(){return pte(this,t),yte(this,t,arguments)}return bte(t,e),mte(t,[{key:"render",value:function(){return P.createElement(kte,this.props)}}])}(P.Component);nN(Na,"displayName","XAxis");nN(Na,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}function Ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sN(n.key),n)}}function _te(e,t,r){return t&&jte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cte(e,t,r){return t=Yh(t),Pte(e,iN()?Reflect.construct(t,r||[],Yh(e).constructor):t.apply(e,r))}function Pte(e,t){if(t&&(Ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nte(e)}function Nte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iN=function(){return!!e})()}function Yh(e){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yh(e)}function Ote(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ox(e,t)}function ox(e,t){return ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ox(e,t)}function oN(e,t,r){return t=sN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sN(e){var t=Mte(e,"string");return Ec(t)=="symbol"?t:t+""}function Mte(e,t){if(Ec(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sx.apply(this,arguments)}var Ate=function(t){var r=t.yAxisId,n=wb(),a=kb(),i=$P(r);return i==null?null:P.createElement(eu,sx({},i,{className:It("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return uo(s,!0)}}))},Oa=function(e){function t(){return Ste(this,t),Cte(this,t,arguments)}return Ote(t,e),_te(t,[{key:"render",value:function(){return P.createElement(Ate,this.props)}}])}(P.Component);oN(Oa,"displayName","YAxis");oN(Oa,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function H5(e){return Dte(e)||$te(e)||Ete(e)||Tte()}function Tte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ete(e,t){if(e){if(typeof e=="string")return lx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lx(e,t)}}function $te(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dte(e){if(Array.isArray(e))return lx(e)}function lx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cx=function(t,r,n,a,i){var o=Pa(t,Vo),s=Pa(t,ld),l=[].concat(H5(o),H5(s)),u=Pa(t,cd),f="".concat(a,"Id"),d=a[0],p=r;if(l.length&&(p=l.reduce(function(x,w){if(w.props[f]===n&&Wi(w.props,"extendDomain")&&Ce(w.props[d])){var v=w.props[d];return[Math.min(x[0],v),Math.max(x[1],v)]}return x},p)),u.length){var m="".concat(d,"1"),b="".concat(d,"2");p=u.reduce(function(x,w){if(w.props[f]===n&&Wi(w.props,"extendDomain")&&Ce(w.props[m])&&Ce(w.props[b])){var v=w.props[m],y=w.props[b];return[Math.min(x[0],v,y),Math.max(x[1],v,y)]}return x},p)}return i&&i.length&&(p=i.reduce(function(x,w){return Ce(w)?[Math.min(x[0],w),Math.max(x[1],w)]:x},p)),p},lN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function i(l,u,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,d||l,p),b=r?r+u:u;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],m]:l._events[b].push(m):(l._events[b]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,m=d.length,b=new Array(m);p<m;p++)b[p]=d[p].fn;return b},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,p,m,b){var x=r?r+u:u;if(!this._events[x])return!1;var w=this._events[x],v=arguments.length,y,k;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),v){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,d),!0;case 4:return w.fn.call(w.context,f,d,p),!0;case 5:return w.fn.call(w.context,f,d,p,m),!0;case 6:return w.fn.call(w.context,f,d,p,m,b),!0}for(k=1,y=new Array(v-1);k<v;k++)y[k-1]=arguments[k];w.fn.apply(w.context,y)}else{var C=w.length,j;for(k=0;k<C;k++)switch(w[k].once&&this.removeListener(u,w[k].fn,void 0,!0),v){case 1:w[k].fn.call(w[k].context);break;case 2:w[k].fn.call(w[k].context,f);break;case 3:w[k].fn.call(w[k].context,f,d);break;case 4:w[k].fn.call(w[k].context,f,d,p);break;default:if(!y)for(j=1,y=new Array(v-1);j<v;j++)y[j-1]=arguments[j];w[k].fn.apply(w[k].context,y)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,p){var m=r?r+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var b=this._events[m];if(b.fn)b.fn===f&&(!p||b.once)&&(!d||b.context===d)&&o(this,m);else{for(var x=0,w=[],v=b.length;x<v;x++)(b[x].fn!==f||p&&!b[x].once||d&&b[x].context!==d)&&w.push(b[x]);w.length?this._events[m]=w.length===1?w[0]:w:o(this,m)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(lN);var Rte=lN.exports;const Ite=mr(Rte);var Tm=new Ite,Em="recharts.syncMouseEvents";function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function Lte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cN(n.key),n)}}function Fte(e,t,r){return t&&Bte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $m(e,t,r){return t=cN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cN(e){var t=zte(e,"string");return Kf(t)=="symbol"?t:t+""}function zte(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ute=function(){function e(){Lte(this,e),$m(this,"activeIndex",0),$m(this,"coordinateList",[]),$m(this,"layout","horizontal")}return Fte(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,f=r.offset,d=f===void 0?null:f,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+l+u,p=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function Gte(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Ce(n)&&Ce(a))return!0}return!1}function Wte(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function uN(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=Xn(t,r,n,a),s=Xn(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Vte(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,p=Xn(s,l,u,d),m=Xn(s,l,f,d);n=p.x,a=p.y,i=m.x,o=m.y}else return uN(t);return[{x:n,y:a},{x:i,y:o}]}function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function X5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X5(Object(r),!0).forEach(function(n){Hte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hte(e,t,r){return t=Xte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xte(e){var t=Kte(e,"string");return Yf(t)=="symbol"?t:t+""}function Kte(e,t){if(Yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yte(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,p=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||p!=="ScatterChart"&&a!=="axis")return null;var b,x=Hs;if(p==="ScatterChart")b=o,x=wq;else if(p==="BarChart")b=Wte(d,o,l,f),x=mb;else if(d==="radial"){var w=uN(o),v=w.cx,y=w.cy,k=w.radius,C=w.startAngle,j=w.endAngle;b={cx:v,cy:y,startAngle:C,endAngle:j,innerRadius:k,outerRadius:k},x=iP}else b={points:Vte(d,o,l)},x=Hs;var S=Jd(Jd(Jd(Jd({stroke:"#ccc",pointerEvents:"none"},l),b),wt(m,!1)),{},{payload:s,payloadIndex:u,className:It("recharts-tooltip-cursor",m.className)});return P.isValidElement(m)?P.cloneElement(m,S):P.createElement(x,S)}var qte=["item"],Zte=["children","className","width","height","style","compact","title","desc"];function $c(e){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c(e)}function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(this,arguments)}function K5(e,t){return ere(e)||Jte(e,t)||dN(e,t)||Qte()}function Qte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function ere(e){if(Array.isArray(e))return e}function Y5(e,t){if(e==null)return{};var r=tre(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hN(n.key),n)}}function are(e,t,r){return t&&nre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ire(e,t,r){return t=qh(t),ore(e,fN()?Reflect.construct(t,r||[],qh(e).constructor):t.apply(e,r))}function ore(e,t){if(t&&($c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sre(e)}function sre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fN=function(){return!!e})()}function qh(e){return qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qh(e)}function lre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ux(e,t)}function ux(e,t){return ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ux(e,t)}function Dc(e){return fre(e)||ure(e)||dN(e)||cre()}function cre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dN(e,t){if(e){if(typeof e=="string")return fx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fx(e,t)}}function ure(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fre(e){if(Array.isArray(e))return fx(e)}function fx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q5(Object(r),!0).forEach(function(n){ut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ut(e,t,r){return t=hN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hN(e){var t=dre(e,"string");return $c(t)=="symbol"?t:t+""}function dre(e,t){if($c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hre={xAxis:["bottom","top"],yAxis:["left","right"]},pre={width:"100%",height:"100%"},pN={x:0,y:0};function e0(e){return e}var gre=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},mre=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return he(he(he({},a),Xn(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,u=a.angle;return he(he(he({},a),Xn(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return pN},ag=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Dc(s),Dc(u)):s},[]);return o.length>0?o:t&&t.length&&Ce(a)&&Ce(i)?t.slice(a,i+1):[]};function gN(e){return e==="number"?[0,"auto"]:void 0}var dx=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=ag(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(l,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?s:d;p=K0(m,o.dataKey,a)}else p=d&&d[n]||s[n];return p?[].concat(Dc(l),[rP(u,p)]):l},[])},Z5=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=gre(i,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,f=JH(o,s,u,l);if(f>=0&&u){var d=u[f]&&u[f].value,p=dx(t,r,f,d),m=mre(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:p,activeCoordinate:m}}return null},yre=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=t.stackOffset,m=JC(f,i);return n.reduce(function(b,x){var w,v=x.type.defaultProps!==void 0?he(he({},x.type.defaultProps),x.props):x.props,y=v.type,k=v.dataKey,C=v.allowDataOverflow,j=v.allowDuplicatedCategory,S=v.scale,N=v.ticks,M=v.includeHidden,E=v[o];if(b[E])return b;var R=ag(t.data,{graphicalItems:a.filter(function(re){var Q,le=o in re.props?re.props[o]:(Q=re.type.defaultProps)===null||Q===void 0?void 0:Q[o];return le===E}),dataStartIndex:l,dataEndIndex:u}),T=R.length,D,B,G;Gte(v.domain,C,y)&&(D=Cv(v.domain,null,C),m&&(y==="number"||S!=="auto")&&(G=Gu(R,k,"category")));var z=gN(y);if(!D||D.length===0){var F,I=(F=v.domain)!==null&&F!==void 0?F:z;if(k){if(D=Gu(R,k,y),y==="category"&&m){var L=F8(D);j&&L?(B=D,D=$h(0,T)):j||(D=NS(I,D,x).reduce(function(re,Q){return re.indexOf(Q)>=0?re:[].concat(Dc(re),[Q])},[]))}else if(y==="category")j?D=D.filter(function(re){return re!==""&&!vt(re)}):D=NS(I,D,x).reduce(function(re,Q){return re.indexOf(Q)>=0||Q===""||vt(Q)?re:[].concat(Dc(re),[Q])},[]);else if(y==="number"){var W=aX(R,a.filter(function(re){var Q,le,Ne=o in re.props?re.props[o]:(Q=re.type.defaultProps)===null||Q===void 0?void 0:Q[o],ie="hide"in re.props?re.props.hide:(le=re.type.defaultProps)===null||le===void 0?void 0:le.hide;return Ne===E&&(M||!ie)}),k,i,f);W&&(D=W)}m&&(y==="number"||S!=="auto")&&(G=Gu(R,k,"category"))}else m?D=$h(0,T):s&&s[E]&&s[E].hasStack&&y==="number"?D=p==="expand"?[0,1]:tP(s[E].stackGroups,l,u):D=QC(R,a.filter(function(re){var Q=o in re.props?re.props[o]:re.type.defaultProps[o],le="hide"in re.props?re.props.hide:re.type.defaultProps.hide;return Q===E&&(M||!le)}),y,f,!0);if(y==="number")D=cx(d,D,E,i,N),I&&(D=Cv(I,D,C));else if(y==="category"&&I){var K=I,ae=D.every(function(re){return K.indexOf(re)>=0});ae&&(D=K)}}return he(he({},b),{},ut({},E,he(he({},v),{},{axisType:i,domain:D,categoricalDomain:G,duplicateDomain:B,originalDomain:(w=v.domain)!==null&&w!==void 0?w:z,isCategorical:m,layout:f})))},{})},vre=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=ag(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),m=p.length,b=JC(f,i),x=-1;return n.reduce(function(w,v){var y=v.type.defaultProps!==void 0?he(he({},v.type.defaultProps),v.props):v.props,k=y[o],C=gN("number");if(!w[k]){x++;var j;return b?j=$h(0,m):s&&s[k]&&s[k].hasStack?(j=tP(s[k].stackGroups,l,u),j=cx(d,j,k,i)):(j=Cv(C,QC(p,n.filter(function(S){var N,M,E=o in S.props?S.props[o]:(N=S.type.defaultProps)===null||N===void 0?void 0:N[o],R="hide"in S.props?S.props.hide:(M=S.type.defaultProps)===null||M===void 0?void 0:M.hide;return E===k&&!R}),"number",f),a.defaultProps.allowDataOverflow),j=cx(d,j,k,i)),he(he({},w),{},ut({},k,he(he({axisType:i},a.defaultProps),{},{hide:!0,orientation:ri(hre,"".concat(i,".").concat(x%2),null),domain:j,originalDomain:C,isCategorical:b,layout:f})))}return w},{})},xre=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),p=Pa(f,i),m={};return p&&p.length?m=yre(t,{axes:p,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(m=vre(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),m},bre=function(t){var r=Ro(t),n=uo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:U1(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:jh(r,n)}},Q5=function(t){var r=t.children,n=t.defaultShowTooltip,a=Da(r,kc),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},wre=function(t){return!t||!t.length?!1:t.some(function(r){var n=ho(r&&r.type);return n&&n.indexOf("Bar")>=0})},J5=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},kre=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,p=n.margin||{},m=Da(d,kc),b=Da(d,zi),x=Object.keys(l).reduce(function(j,S){var N=l[S],M=N.orientation;return!N.mirror&&!N.hide?he(he({},j),{},ut({},M,j[M]+N.width)):j},{left:p.left||0,right:p.right||0}),w=Object.keys(o).reduce(function(j,S){var N=o[S],M=N.orientation;return!N.mirror&&!N.hide?he(he({},j),{},ut({},M,ri(j,"".concat(M))+N.height)):j},{top:p.top||0,bottom:p.bottom||0}),v=he(he({},w),x),y=v.bottom;m&&(v.bottom+=m.props.height||kc.defaultProps.height),b&&r&&(v=rX(v,a,n,r));var k=u-v.left-v.right,C=f-v.top-v.bottom;return he(he({brushBottom:y},v),{},{width:Math.max(k,0),height:Math.max(C,0)})},Sre=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Cb=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,p=function(v,y){var k=y.graphicalItems,C=y.stackGroups,j=y.offset,S=y.updateId,N=y.dataStartIndex,M=y.dataEndIndex,E=v.barSize,R=v.layout,T=v.barGap,D=v.barCategoryGap,B=v.maxBarSize,G=J5(R),z=G.numericAxisName,F=G.cateAxisName,I=wre(k),L=[];return k.forEach(function(W,K){var ae=ag(v.data,{graphicalItems:[W],dataStartIndex:N,dataEndIndex:M}),re=W.type.defaultProps!==void 0?he(he({},W.type.defaultProps),W.props):W.props,Q=re.dataKey,le=re.maxBarSize,Ne=re["".concat(z,"Id")],ie=re["".concat(F,"Id")],ge={},ne=l.reduce(function(Xe,kt){var xt=y["".concat(kt.axisType,"Map")],Yt=re["".concat(kt.axisType,"Id")];xt&&xt[Yt]||kt.axisType==="zAxis"||sl();var bt=xt[Yt];return he(he({},Xe),{},ut(ut({},kt.axisType,bt),"".concat(kt.axisType,"Ticks"),uo(bt)))},ge),H=ne[F],ue=ne["".concat(F,"Ticks")],ve=C&&C[Ne]&&C[Ne].hasStack&&mX(W,C[Ne].stackGroups),ee=ho(W.type).indexOf("Bar")>=0,Oe=jh(H,ue),Te=[],pe=I&&eX({barSize:E,stackGroups:C,totalSize:Sre(ne,F)});if(ee){var Me,Se,me=vt(le)?B:le,Ae=(Me=(Se=jh(H,ue,!0))!==null&&Se!==void 0?Se:me)!==null&&Me!==void 0?Me:0;Te=tX({barGap:T,barCategoryGap:D,bandSize:Ae!==Oe?Ae:Oe,sizeList:pe[ie],maxBarSize:me}),Ae!==Oe&&(Te=Te.map(function(Xe){return he(he({},Xe),{},{position:he(he({},Xe.position),{},{offset:Xe.position.offset-Ae/2})})}))}var Re=W&&W.type&&W.type.getComposedData;Re&&L.push({props:he(he({},Re(he(he({},ne),{},{displayedData:ae,props:v,dataKey:Q,item:W,bandSize:Oe,barPosition:Te,offset:j,stackedData:ve,layout:R,dataStartIndex:N,dataEndIndex:M}))),{},ut(ut(ut({key:W.key||"item-".concat(K)},z,ne[z]),F,ne[F]),"animationId",S)),childIndex:J8(W,v.children),item:W})}),L},m=function(v,y){var k=v.props,C=v.dataStartIndex,j=v.dataEndIndex,S=v.updateId;if(!kw({props:k}))return null;var N=k.children,M=k.layout,E=k.stackOffset,R=k.data,T=k.reverseStackOrder,D=J5(M),B=D.numericAxisName,G=D.cateAxisName,z=Pa(N,n),F=hX(R,z,"".concat(B,"Id"),"".concat(G,"Id"),E,T),I=l.reduce(function(re,Q){var le="".concat(Q.axisType,"Map");return he(he({},re),{},ut({},le,xre(k,he(he({},Q),{},{graphicalItems:z,stackGroups:Q.axisType===B&&F,dataStartIndex:C,dataEndIndex:j}))))},{}),L=kre(he(he({},I),{},{props:k,graphicalItems:z}),y==null?void 0:y.legendBBox);Object.keys(I).forEach(function(re){I[re]=f(k,I[re],L,re.replace("Map",""),r)});var W=I["".concat(G,"Map")],K=bre(W),ae=p(k,he(he({},I),{},{dataStartIndex:C,dataEndIndex:j,updateId:S,graphicalItems:z,stackGroups:F,offset:L}));return he(he({formattedGraphicalItems:ae,graphicalItems:z,offset:L,stackGroups:F},K),I)},b=function(w){function v(y){var k,C,j;return rre(this,v),j=ire(this,v,[y]),ut(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ut(j,"accessibilityManager",new Ute),ut(j,"handleLegendBBoxUpdate",function(S){if(S){var N=j.state,M=N.dataStartIndex,E=N.dataEndIndex,R=N.updateId;j.setState(he({legendBBox:S},m({props:j.props,dataStartIndex:M,dataEndIndex:E,updateId:R},he(he({},j.state),{},{legendBBox:S}))))}}),ut(j,"handleReceiveSyncEvent",function(S,N,M){if(j.props.syncId===S){if(M===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(N)}}),ut(j,"handleBrushChange",function(S){var N=S.startIndex,M=S.endIndex;if(N!==j.state.dataStartIndex||M!==j.state.dataEndIndex){var E=j.state.updateId;j.setState(function(){return he({dataStartIndex:N,dataEndIndex:M},m({props:j.props,dataStartIndex:N,dataEndIndex:M,updateId:E},j.state))}),j.triggerSyncEvent({dataStartIndex:N,dataEndIndex:M})}}),ut(j,"handleMouseEnter",function(S){var N=j.getMouseInfo(S);if(N){var M=he(he({},N),{},{isTooltipActive:!0});j.setState(M),j.triggerSyncEvent(M);var E=j.props.onMouseEnter;jt(E)&&E(M,S)}}),ut(j,"triggeredAfterMouseMove",function(S){var N=j.getMouseInfo(S),M=N?he(he({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(M),j.triggerSyncEvent(M);var E=j.props.onMouseMove;jt(E)&&E(M,S)}),ut(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),ut(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),ut(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),ut(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};j.setState(N),j.triggerSyncEvent(N);var M=j.props.onMouseLeave;jt(M)&&M(N,S)}),ut(j,"handleOuterEvent",function(S){var N=Q8(S),M=ri(j.props,"".concat(N));if(N&&jt(M)){var E,R;/.*touch.*/i.test(N)?R=j.getMouseInfo(S.changedTouches[0]):R=j.getMouseInfo(S),M((E=R)!==null&&E!==void 0?E:{},S)}}),ut(j,"handleClick",function(S){var N=j.getMouseInfo(S);if(N){var M=he(he({},N),{},{isTooltipActive:!0});j.setState(M),j.triggerSyncEvent(M);var E=j.props.onClick;jt(E)&&E(M,S)}}),ut(j,"handleMouseDown",function(S){var N=j.props.onMouseDown;if(jt(N)){var M=j.getMouseInfo(S);N(M,S)}}),ut(j,"handleMouseUp",function(S){var N=j.props.onMouseUp;if(jt(N)){var M=j.getMouseInfo(S);N(M,S)}}),ut(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),ut(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),ut(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),ut(j,"handleDoubleClick",function(S){var N=j.props.onDoubleClick;if(jt(N)){var M=j.getMouseInfo(S);N(M,S)}}),ut(j,"handleContextMenu",function(S){var N=j.props.onContextMenu;if(jt(N)){var M=j.getMouseInfo(S);N(M,S)}}),ut(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&Tm.emit(Em,j.props.syncId,S,j.eventEmitterSymbol)}),ut(j,"applySyncEvent",function(S){var N=j.props,M=N.layout,E=N.syncMethod,R=j.state.updateId,T=S.dataStartIndex,D=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(he({dataStartIndex:T,dataEndIndex:D},m({props:j.props,dataStartIndex:T,dataEndIndex:D,updateId:R},j.state)));else if(S.activeTooltipIndex!==void 0){var B=S.chartX,G=S.chartY,z=S.activeTooltipIndex,F=j.state,I=F.offset,L=F.tooltipTicks;if(!I)return;if(typeof E=="function")z=E(L,S);else if(E==="value"){z=-1;for(var W=0;W<L.length;W++)if(L[W].value===S.activeLabel){z=W;break}}var K=he(he({},I),{},{x:I.left,y:I.top}),ae=Math.min(B,K.x+K.width),re=Math.min(G,K.y+K.height),Q=L[z]&&L[z].value,le=dx(j.state,j.props.data,z),Ne=L[z]?{x:M==="horizontal"?L[z].coordinate:ae,y:M==="horizontal"?re:L[z].coordinate}:pN;j.setState(he(he({},S),{},{activeLabel:Q,activeCoordinate:Ne,activePayload:le,activeTooltipIndex:z}))}else j.setState(S)}),ut(j,"renderCursor",function(S){var N,M=j.state,E=M.isTooltipActive,R=M.activeCoordinate,T=M.activePayload,D=M.offset,B=M.activeTooltipIndex,G=M.tooltipAxisBandSize,z=j.getTooltipEventType(),F=(N=S.props.active)!==null&&N!==void 0?N:E,I=j.props.layout,L=S.key||"_recharts-cursor";return Y.createElement(Yte,{key:L,activeCoordinate:R,activePayload:T,activeTooltipIndex:B,chartName:r,element:S,isActive:F,layout:I,offset:D,tooltipAxisBandSize:G,tooltipEventType:z})}),ut(j,"renderPolarAxis",function(S,N,M){var E=ri(S,"type.axisType"),R=ri(j.state,"".concat(E,"Map")),T=S.type.defaultProps,D=T!==void 0?he(he({},T),S.props):S.props,B=R&&R[D["".concat(E,"Id")]];return P.cloneElement(S,he(he({},B),{},{className:It(E,B.className),key:S.key||"".concat(N,"-").concat(M),ticks:uo(B,!0)}))}),ut(j,"renderPolarGrid",function(S){var N=S.props,M=N.radialLines,E=N.polarAngles,R=N.polarRadius,T=j.state,D=T.radiusAxisMap,B=T.angleAxisMap,G=Ro(D),z=Ro(B),F=z.cx,I=z.cy,L=z.innerRadius,W=z.outerRadius;return P.cloneElement(S,{polarAngles:Array.isArray(E)?E:uo(z,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(R)?R:uo(G,!0).map(function(K){return K.coordinate}),cx:F,cy:I,innerRadius:L,outerRadius:W,key:S.key||"polar-grid",radialLines:M})}),ut(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,N=j.props,M=N.children,E=N.width,R=N.height,T=j.props.margin||{},D=E-(T.left||0)-(T.right||0),B=qC({children:M,formattedGraphicalItems:S,legendWidth:D,legendContent:u});if(!B)return null;var G=B.item,z=Y5(B,qte);return P.cloneElement(G,he(he({},z),{},{chartWidth:E,chartHeight:R,margin:T,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),ut(j,"renderTooltip",function(){var S,N=j.props,M=N.children,E=N.accessibilityLayer,R=Da(M,En);if(!R)return null;var T=j.state,D=T.isTooltipActive,B=T.activeCoordinate,G=T.activePayload,z=T.activeLabel,F=T.offset,I=(S=R.props.active)!==null&&S!==void 0?S:D;return P.cloneElement(R,{viewBox:he(he({},F),{},{x:F.left,y:F.top}),active:I,label:z,payload:I?G:[],coordinate:B,accessibilityLayer:E})}),ut(j,"renderBrush",function(S){var N=j.props,M=N.margin,E=N.data,R=j.state,T=R.offset,D=R.dataStartIndex,B=R.dataEndIndex,G=R.updateId;return P.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Yd(j.handleBrushChange,S.props.onChange),data:E,x:Ce(S.props.x)?S.props.x:T.left,y:Ce(S.props.y)?S.props.y:T.top+T.height+T.brushBottom-(M.bottom||0),width:Ce(S.props.width)?S.props.width:T.width,startIndex:D,endIndex:B,updateId:"brush-".concat(G)})}),ut(j,"renderReferenceElement",function(S,N,M){if(!S)return null;var E=j,R=E.clipPathId,T=j.state,D=T.xAxisMap,B=T.yAxisMap,G=T.offset,z=S.type.defaultProps||{},F=S.props,I=F.xAxisId,L=I===void 0?z.xAxisId:I,W=F.yAxisId,K=W===void 0?z.yAxisId:W;return P.cloneElement(S,{key:S.key||"".concat(N,"-").concat(M),xAxis:D[L],yAxis:B[K],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:R})}),ut(j,"renderActivePoints",function(S){var N=S.item,M=S.activePoint,E=S.basePoint,R=S.childIndex,T=S.isRange,D=[],B=N.props.key,G=N.item.type.defaultProps!==void 0?he(he({},N.item.type.defaultProps),N.item.props):N.item.props,z=G.activeDot,F=G.dataKey,I=he(he({index:R,dataKey:F,cx:M.x,cy:M.y,r:4,fill:gb(N.item),strokeWidth:2,stroke:"#fff",payload:M.payload,value:M.value},wt(z,!1)),Y0(z));return D.push(v.renderActiveDot(z,I,"".concat(B,"-activePoint-").concat(R))),E?D.push(v.renderActiveDot(z,he(he({},I),{},{cx:E.x,cy:E.y}),"".concat(B,"-basePoint-").concat(R))):T&&D.push(null),D}),ut(j,"renderGraphicChild",function(S,N,M){var E=j.filterFormatItem(S,N,M);if(!E)return null;var R=j.getTooltipEventType(),T=j.state,D=T.isTooltipActive,B=T.tooltipAxis,G=T.activeTooltipIndex,z=T.activeLabel,F=j.props.children,I=Da(F,En),L=E.props,W=L.points,K=L.isRange,ae=L.baseLine,re=E.item.type.defaultProps!==void 0?he(he({},E.item.type.defaultProps),E.item.props):E.item.props,Q=re.activeDot,le=re.hide,Ne=re.activeBar,ie=re.activeShape,ge=!!(!le&&D&&I&&(Q||Ne||ie)),ne={};R!=="axis"&&I&&I.props.trigger==="click"?ne={onClick:Yd(j.handleItemMouseEnter,S.props.onClick)}:R!=="axis"&&(ne={onMouseLeave:Yd(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Yd(j.handleItemMouseEnter,S.props.onMouseEnter)});var H=P.cloneElement(S,he(he({},E.props),ne));function ue(kt){return typeof B.dataKey=="function"?B.dataKey(kt.payload):null}if(ge)if(G>=0){var ve,ee;if(B.dataKey&&!B.allowDuplicatedCategory){var Oe=typeof B.dataKey=="function"?ue:"payload.".concat(B.dataKey.toString());ve=K0(W,Oe,z),ee=K&&ae&&K0(ae,Oe,z)}else ve=W==null?void 0:W[G],ee=K&&ae&&ae[G];if(ie||Ne){var Te=S.props.activeIndex!==void 0?S.props.activeIndex:G;return[P.cloneElement(S,he(he(he({},E.props),ne),{},{activeIndex:Te})),null,null]}if(!vt(ve))return[H].concat(Dc(j.renderActivePoints({item:E,activePoint:ve,basePoint:ee,childIndex:G,isRange:K})))}else{var pe,Me=(pe=j.getItemByXY(j.state.activeCoordinate))!==null&&pe!==void 0?pe:{graphicalItem:H},Se=Me.graphicalItem,me=Se.item,Ae=me===void 0?S:me,Re=Se.childIndex,Xe=he(he(he({},E.props),ne),{},{activeIndex:Re});return[P.cloneElement(Ae,Xe),null,null]}return K?[H,null,null]:[H,null]}),ut(j,"renderCustomized",function(S,N,M){return P.cloneElement(S,he(he({key:"recharts-customized-".concat(M)},j.props),j.state))}),ut(j,"renderMap",{CartesianGrid:{handler:e0,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:e0},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:e0},YAxis:{handler:e0},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((k=y.id)!==null&&k!==void 0?k:pl("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=Z_(j.triggeredAfterMouseMove,(C=y.throttleDelay)!==null&&C!==void 0?C:1e3/60),j.state={},j}return lre(v,w),are(v,[{key:"componentDidMount",value:function(){var k,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var k=this.props,C=k.children,j=k.data,S=k.height,N=k.layout,M=Da(C,En);if(M){var E=M.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,T=dx(this.state,j,E,R),D=this.state.tooltipTicks[E].coordinate,B=(this.state.offset.top+S)/2,G=N==="horizontal",z=G?{x:D,y:B}:{y:D,x:B},F=this.state.formattedGraphicalItems.find(function(L){var W=L.item;return W.type.name==="Scatter"});F&&(z=he(he({},z),F.props.points[E].tooltipPosition),T=F.props.points[E].tooltipPayload);var I={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:R,activePayload:T,activeCoordinate:z};this.setState(I),this.renderCursor(M),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(k,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==k.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==k.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(k){zy([Da(k.children,En)],[Da(this.props.children,En)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var k=Da(this.props.children,En);if(k&&typeof k.props.shared=="boolean"){var C=k.props.shared?"axis":"item";return s.indexOf(C)>=0?C:i}return i}},{key:"getMouseInfo",value:function(k){if(!this.container)return null;var C=this.container,j=C.getBoundingClientRect(),S=_U(j),N={chartX:Math.round(k.pageX-S.left),chartY:Math.round(k.pageY-S.top)},M=j.width/C.offsetWidth||1,E=this.inRange(N.chartX,N.chartY,M);if(!E)return null;var R=this.state,T=R.xAxisMap,D=R.yAxisMap,B=this.getTooltipEventType(),G=Z5(this.state,this.props.data,this.props.layout,E);if(B!=="axis"&&T&&D){var z=Ro(T).scale,F=Ro(D).scale,I=z&&z.invert?z.invert(N.chartX):null,L=F&&F.invert?F.invert(N.chartY):null;return he(he({},N),{},{xValue:I,yValue:L},G)}return G?he(he({},N),G):null}},{key:"inRange",value:function(k,C){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,N=k/j,M=C/j;if(S==="horizontal"||S==="vertical"){var E=this.state.offset,R=N>=E.left&&N<=E.left+E.width&&M>=E.top&&M<=E.top+E.height;return R?{x:N,y:M}:null}var T=this.state,D=T.angleAxisMap,B=T.radiusAxisMap;if(D&&B){var G=Ro(D);return AS({x:N,y:M},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var k=this.props.children,C=this.getTooltipEventType(),j=Da(k,En),S={};j&&C==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Y0(this.props,this.handleOuterEvent);return he(he({},N),S)}},{key:"addListener",value:function(){Tm.on(Em,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Tm.removeListener(Em,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(k,C,j){for(var S=this.state.formattedGraphicalItems,N=0,M=S.length;N<M;N++){var E=S[N];if(E.item===k||E.props.key===k.key||C===ho(E.item.type)&&j===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var k=this.clipPathId,C=this.state.offset,j=C.left,S=C.top,N=C.height,M=C.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:k},Y.createElement("rect",{x:j,y:S,height:N,width:M})))}},{key:"getXScales",value:function(){var k=this.state.xAxisMap;return k?Object.entries(k).reduce(function(C,j){var S=K5(j,2),N=S[0],M=S[1];return he(he({},C),{},ut({},N,M.scale))},{}):null}},{key:"getYScales",value:function(){var k=this.state.yAxisMap;return k?Object.entries(k).reduce(function(C,j){var S=K5(j,2),N=S[0],M=S[1];return he(he({},C),{},ut({},N,M.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(k){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[k])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(k){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[k])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(k){var C=this.state,j=C.formattedGraphicalItems,S=C.activeItem;if(j&&j.length)for(var N=0,M=j.length;N<M;N++){var E=j[N],R=E.props,T=E.item,D=T.type.defaultProps!==void 0?he(he({},T.type.defaultProps),T.props):T.props,B=ho(T.type);if(B==="Bar"){var G=(R.data||[]).find(function(L){return fq(k,L)});if(G)return{graphicalItem:E,payload:G}}else if(B==="RadialBar"){var z=(R.data||[]).find(function(L){return AS(k,L)});if(z)return{graphicalItem:E,payload:z}}else if(Qp(E,S)||Jp(E,S)||Gf(E,S)){var F=hZ({graphicalItem:E,activeTooltipItem:S,itemData:D.data}),I=D.activeIndex===void 0?F:D.activeIndex;return{graphicalItem:he(he({},E),{},{childIndex:I}),payload:Gf(E,S)?D.data[F]:E.props.data[F]}}}return null}},{key:"render",value:function(){var k=this;if(!kw(this))return null;var C=this.props,j=C.children,S=C.className,N=C.width,M=C.height,E=C.style,R=C.compact,T=C.title,D=C.desc,B=Y5(C,Zte),G=wt(B,!1);if(R)return Y.createElement(C5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(Gy,Wl({},G,{width:N,height:M,title:T,desc:D}),this.renderClipPath(),jw(j,this.renderMap)));if(this.props.accessibilityLayer){var z,F;G.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,G.role=(F=this.props.role)!==null&&F!==void 0?F:"application",G.onKeyDown=function(L){k.accessibilityManager.keyboardEvent(L)},G.onFocus=function(){k.accessibilityManager.focus()}}var I=this.parseEventsOfWrapper();return Y.createElement(C5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",Wl({className:It("recharts-wrapper",S),style:he({position:"relative",cursor:"default",width:N,height:M},E)},I,{ref:function(W){k.container=W}}),Y.createElement(Gy,Wl({},G,{width:N,height:M,title:T,desc:D,style:pre}),this.renderClipPath(),jw(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(P.Component);ut(b,"displayName",r),ut(b,"defaultProps",he({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),ut(b,"getDerivedStateFromProps",function(w,v){var y=w.dataKey,k=w.data,C=w.children,j=w.width,S=w.height,N=w.layout,M=w.stackOffset,E=w.margin,R=v.dataStartIndex,T=v.dataEndIndex;if(v.updateId===void 0){var D=Q5(w);return he(he(he({},D),{},{updateId:0},m(he(he({props:w},D),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:k,prevWidth:j,prevHeight:S,prevLayout:N,prevStackOffset:M,prevMargin:E,prevChildren:C})}if(y!==v.prevDataKey||k!==v.prevData||j!==v.prevWidth||S!==v.prevHeight||N!==v.prevLayout||M!==v.prevStackOffset||!Ql(E,v.prevMargin)){var B=Q5(w),G={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},z=he(he({},Z5(v,k,N)),{},{updateId:v.updateId+1}),F=he(he(he({},B),G),z);return he(he(he({},F),m(he({props:w},F),v)),{},{prevDataKey:y,prevData:k,prevWidth:j,prevHeight:S,prevLayout:N,prevStackOffset:M,prevMargin:E,prevChildren:C})}if(!zy(C,v.prevChildren)){var I,L,W,K,ae=Da(C,kc),re=ae&&(I=(L=ae.props)===null||L===void 0?void 0:L.startIndex)!==null&&I!==void 0?I:R,Q=ae&&(W=(K=ae.props)===null||K===void 0?void 0:K.endIndex)!==null&&W!==void 0?W:T,le=re!==R||Q!==T,Ne=!vt(k),ie=Ne&&!le?v.updateId:v.updateId+1;return he(he({updateId:ie},m(he(he({props:w},v),{},{updateId:ie,dataStartIndex:re,dataEndIndex:Q}),v)),{},{prevChildren:C,dataStartIndex:re,dataEndIndex:Q})}return null}),ut(b,"renderActiveDot",function(w,v,y){var k;return P.isValidElement(w)?k=P.cloneElement(w,v):jt(w)?k=w(v):k=Y.createElement(Zp,v),Y.createElement(Jt,{className:"recharts-active-dot",key:y},k)});var x=P.forwardRef(function(v,y){return Y.createElement(b,Wl({},v,{ref:y}))});return x.displayName=b.displayName,x},tc=Cb({chartName:"LineChart",GraphicalChild:mn,axisComponents:[{axisType:"xAxis",AxisComp:Na},{axisType:"yAxis",AxisComp:Oa}],formatAxisMap:yb}),jre=Cb({chartName:"ScatterChart",GraphicalChild:fa,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Na},{axisType:"yAxis",AxisComp:Oa},{axisType:"zAxis",AxisComp:ng}],formatAxisMap:yb}),mN=Cb({chartName:"AreaChart",GraphicalChild:ei,axisComponents:[{axisType:"xAxis",AxisComp:Na},{axisType:"yAxis",AxisComp:Oa}],formatAxisMap:yb});const no=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},_re=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[p,m]=P.useState(()=>(u==null?void 0:u.channelMode)??no("hist_mode","All")),[b,x]=P.useState(()=>(u==null?void 0:u.minVal)??no("hist_min",0)),[w,v]=P.useState(()=>(u==null?void 0:u.maxVal)??no("hist_max",16383)),[y,k]=P.useState(()=>(u==null?void 0:u.binCount)??no("hist_bins",100)),[C,j]=P.useState(()=>(u==null?void 0:u.pointToPoint)??no("hist_ptp",!1)),[S,N]=P.useState(()=>(u==null?void 0:u.showTheo)??no("hist_show_theo",!1)),[M,E]=P.useState(()=>(u==null?void 0:u.theoMean)??no("hist_theo_mean","512")),[R,T]=P.useState(()=>(u==null?void 0:u.theoSigma)??no("hist_theo_sigma","10")),[D,B]=P.useState(()=>(u==null?void 0:u.theoAmp)??no("hist_theo_amp","1000")),[G,z]=P.useState(!1),[F,I]=P.useState(0),[L,W]=P.useState([]),[K,ae]=P.useState(null),[re,Q]=P.useState(l||{x:100,y:100}),[le,Ne]=P.useState(!1),ie=P.useRef({x:0,y:0});P.useEffect(()=>{localStorage.setItem("hist_mode",p),localStorage.setItem("hist_min",String(b)),localStorage.setItem("hist_max",String(w)),localStorage.setItem("hist_bins",String(y)),localStorage.setItem("hist_ptp",String(C)),localStorage.setItem("hist_show_theo",String(S)),localStorage.setItem("hist_theo_mean",M),localStorage.setItem("hist_theo_sigma",R),localStorage.setItem("hist_theo_amp",D),f&&f({channelMode:p,minVal:b,maxVal:w,binCount:y,pointToPoint:C,showTheo:S,theoMean:M,theoSigma:R,theoAmp:D})},[p,b,w,y,C,S,M,R,D]),P.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(w<=b){ae("Invalid range: Max must be greater than Min");return}ae(null),z(!0),I(0);const pe=new AbortController,Me=[],me=setTimeout(async()=>{try{let Ae=[];if(d&&d.length>1){const Re=Math.min(d.length,navigator.hardwareConcurrency||4);for(let bt=0;bt<Re;bt++){const yr=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});Me.push(yr)}let Xe=0,kt=0;const xt=[],Yt=async bt=>{for(;Xe<d.length;){if(pe.signal.aborted)return;const yr=Xe++,_t=d[yr];try{const ar=await _t.arrayBuffer();await new Promise((Sr,ir)=>{bt.onmessage=Gt=>{const{success:Qe,hist:lt,error:Wt}=Gt.data;Qe?(xt.push(lt),kt++,I(kt),Sr()):(console.error(`Error processing ${_t.name}:`,Wt),Sr())},bt.onerror=Gt=>{console.error("Worker Error",Gt),Sr()},bt.postMessage({buffer:ar,roi:a,binCount:y,minVal:b,maxVal:w,pointToPoint:C},[ar])})}catch(ar){console.error("File Read Error",ar)}}};if(await Promise.all(Me.map(bt=>Yt(bt))),Me.forEach(bt=>bt.terminate()),Me.length=0,xt.length>0){Ae=xt[0];for(let bt=1;bt<xt.length;bt++){const yr=xt[bt];for(let _t=0;_t<yr.length;_t++)Ae[_t]&&(Ae[_t].c0+=yr[_t].c0,Ae[_t].c1+=yr[_t].c1,Ae[_t].c2+=yr[_t].c2,Ae[_t].c3+=yr[_t].c3)}}}else n&&(Ae=UA(n.data,n.width,n.height,a.x,a.y,a.w,a.h,y,b,w,C));pe.signal.aborted||W(Ae)}catch(Ae){console.error("Histogram calc error:",Ae),ae("Error calculating histogram")}finally{pe.signal.aborted||z(!1)}},50);return()=>{clearTimeout(me),pe.abort(),Me.length>0&&(console.log(`Terminating ${Me.length} active histogram workers...`),Me.forEach(Ae=>Ae.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,y,b,w,C,d]);const ge=P.useMemo(()=>{if(!S)return L;const pe=parseFloat(M),Me=parseFloat(R),Se=parseFloat(D);return isNaN(pe)||isNaN(Me)||isNaN(Se)||Me<=0?L:L.map(me=>{const Ae=me.binStart,Re=-Math.pow(Ae-pe,2)/(2*Math.pow(Me,2)),Xe=Se*Math.exp(Re);return{...me,theory:Xe}})},[L,S,M,R,D]),ne=()=>{if(L.length===0)return;let pe=0,Me=0;if(L.forEach(Se=>{const me=Math.max(Se.c0||0,Se.c1||0,Se.c2||0,Se.c3||0);me>pe&&(pe=me,Me=Se.binStart)}),E(Me.toFixed(2)),B(pe.toString()),parseFloat(R)===0||isNaN(parseFloat(R))){const Se=w-b;T((Se/20).toFixed(2))}},H=(pe,Me,Se)=>{s&&s(),!(Se.closest("button")||Se.closest("input")||Se.closest("select"))&&(Ne(!0),ie.current={x:pe-re.x,y:Me-re.y})},ue=pe=>{H(pe.clientX,pe.clientY,pe.target)},ve=pe=>{const Me=pe.touches[0];H(Me.clientX,Me.clientY,pe.target)};if(P.useEffect(()=>{const pe=Se=>{if(le){const me="touches"in Se?Se.touches[0].clientX:Se.clientX,Ae="touches"in Se?Se.touches[0].clientY:Se.clientY;Q({x:me-ie.current.x,y:Ae-ie.current.y})}},Me=()=>Ne(!1);return le&&(window.addEventListener("mousemove",pe),window.addEventListener("mouseup",Me),window.addEventListener("touchmove",pe,{passive:!1}),window.addEventListener("touchend",Me)),()=>{window.removeEventListener("mousemove",pe),window.removeEventListener("mouseup",Me),window.removeEventListener("touchmove",pe),window.removeEventListener("touchend",Me)}},[le]),!e)return null;const ee=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},Oe=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Te="step";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:re.x,top:re.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${le?"cursor-grabbing":"cursor-grab"}`,onMouseDown:ue,onTouchStart:ve,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&c.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),c.jsxs("select",{value:p,onChange:pe=>m(pe.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[c.jsx("option",{value:"All",children:"All Colors"}),c.jsx("option",{value:"0",children:ee.c0}),c.jsx("option",{value:"1",children:ee.c1}),c.jsx("option",{value:"2",children:ee.c2}),c.jsx("option",{value:"3",children:ee.c3})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),c.jsx("input",{type:"number",value:b,onChange:pe=>x(Number(pe.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",value:w,onChange:pe=>v(Number(pe.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:C,onChange:pe=>j(pe.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),c.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!C&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),c.jsx("input",{type:"number",value:y,onChange:pe=>k(Math.max(1,Number(pe.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${S?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:pe=>N(pe.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),c.jsx("span",{className:`font-bold uppercase tracking-tight ${S?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),S&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),c.jsx("input",{type:"text",value:M,onChange:pe=>E(pe.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),c.jsx("input",{type:"text",value:R,onChange:pe=>T(pe.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),c.jsx("input",{type:"text",value:D,onChange:pe=>B(pe.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsx("button",{onClick:ne,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),G&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${F}/${d.length}`:"Calculating Histogram..."})]}),K?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:K}):c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(tc,{data:ge,children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),c.jsx(Na,{dataKey:"binStart",type:"number",domain:[b,w],tickFormatter:pe=>Math.floor(pe).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),c.jsx(Oa,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),c.jsx(En,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:pe=>`DN: ${Math.round(Number(pe))}`,formatter:(pe,Me)=>[Math.round(pe),Me]}),c.jsx(zi,{wrapperStyle:{paddingTop:"10px"}}),S&&c.jsx(mn,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(p==="All"||p==="0")&&c.jsx(mn,{type:Te,dataKey:"c0",name:ee.c0,stroke:Oe.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="1")&&c.jsx(mn,{type:Te,dataKey:"c1",name:ee.c1,stroke:Oe.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="2")&&c.jsx(mn,{type:Te,dataKey:"c2",name:ee.c2,stroke:Oe.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="3")&&c.jsx(mn,{type:Te,dataKey:"c3",name:ee.c3,stroke:Oe.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},vl=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=P.useState(e),[l,u]=P.useState(!1),[f,d]=P.useState({x:0,y:0}),p=P.useRef(null),m=(w,v,y)=>{i&&i(),!(y.closest("button")||y.closest("input"))&&(u(!0),d({x:w-o.x,y:v-o.y}))},b=w=>{m(w.clientX,w.clientY,w.target)},x=w=>{const v=w.touches[0];m(v.clientX,v.clientY,w.target)};return P.useEffect(()=>{const w=y=>{var k,C;if(l){y.cancelable&&y.preventDefault();const j="touches"in y?y.touches[0].clientX:y.clientX,S="touches"in y?y.touches[0].clientY:y.clientY,N=j-f.x,M=S-f.y,E=window.innerWidth-(((k=p.current)==null?void 0:k.offsetWidth)||100),R=window.innerHeight-(((C=p.current)==null?void 0:C.offsetHeight)||100);s({x:Math.max(0,Math.min(N,E)),y:Math.max(0,Math.min(M,R))})}},v=()=>{u(!1)};return l&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",v),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",v)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",v)}},[l,f]),c.jsxs("div",{ref:p,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${l?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[c.jsx("div",{onMouseDown:b,onTouchStart:x,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),c.jsx("div",{className:"relative z-10 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:t})})]})},Cre=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:l})=>{const u=P.useRef(null),[f,d]=P.useState(!1),[p,m]=P.useState(null),[b,x]=P.useState(null),[w,v]=P.useState(!0),[y,k]=P.useState(!0),[C,j]=P.useState("-1"),[S,N]=P.useState("8"),[M,E]=P.useState(64),[R,T]=P.useState(45),[D,B]=P.useState(60),G=P.useRef(!1),z=P.useRef({x:0,y:0});P.useEffect(()=>{!e||!r||!n||(d(!0),x(null),setTimeout(()=>{try{const W=WA(r.data,r.width,r.height,n,a,y);W?m(W):x("Could not extract valid data from ROI.")}catch(W){console.error("2D FFT Error",W),x("Calculation Error: "+W.message)}finally{d(!1)}},50))},[e,r,n,a,y]),P.useEffect(()=>{if(!p||!u.current)return;const W=u.current,K=W.getContext("2d");if(!K)return;const ae=W.width,re=W.height;K.clearRect(0,0,ae,re),K.fillStyle="#0f172a",K.fillRect(0,0,ae,re);const Q=p.width,le=p.height,Ne=p.data,ie=Math.pow(10,parseFloat(C)||-1),ge=Math.pow(10,parseFloat(S)||8);let ne=ie,H=ge;w&&(ne=Math.log10(Math.max(1e-10,ie)),H=Math.log10(Math.max(1e-10,ge)));const ue=H-ne||1,ve=ae/2,ee=re/2+50,Oe=Math.min(ae,re)*.4,Te=.6,pe=R*Math.PI/180,Me=D*Math.PI/180,Se=Math.cos(pe),me=Math.sin(pe),Ae=Math.cos(Me),Re=Math.sin(Me),Xe=(lt,Wt,Vt)=>{const Tr=lt*Se-Wt*me,vr=lt*me+Wt*Se,Qr=vr*Ae-Vt*Re,Ft=vr*Re+Vt*Ae;return{x:ve+Tr*Oe,y:ee-Qr*Oe,depth:Ft}},kt=Math.max(16,M),xt=Math.max(1,Math.floor(Q/kt)),Yt=Math.max(1,Math.floor(le/kt)),bt=(lt,Wt)=>{let Vt=Ne[Wt*Q+lt];return w&&(Vt=Math.log10(Math.max(1e-10,Vt))),Vt=Math.max(ne,Math.min(H,Vt)),(Vt-ne)/ue},yr=lt=>`hsl(${(1-lt)*240}, 80%, 50%)`,_t=[];for(let lt=0;lt<le-Yt;lt+=Yt)for(let Wt=0;Wt<Q-xt;Wt+=xt){const Vt=Wt,Tr=lt,vr=Wt+xt,Qr=lt,Ft=Wt+xt,Jr=lt+Yt,mt=Wt,zr=lt+Yt,Be=bt(Vt,Tr),jr=bt(vr,Qr),Ur=bt(Ft,Jr),ln=bt(mt,zr),Gr=(Be+jr+Ur+ln)/4,lr=Xe(Vt/(Q-1)-.5,Tr/(le-1)-.5,Be*Te),en=Xe(vr/(Q-1)-.5,Qr/(le-1)-.5,jr*Te),In=Xe(Ft/(Q-1)-.5,Jr/(le-1)-.5,Ur*Te),Cn=Xe(mt/(Q-1)-.5,zr/(le-1)-.5,ln*Te),ya=(lr.depth+en.depth+In.depth+Cn.depth)/4;_t.push({pts:[{x:lr.x,y:lr.y},{x:en.x,y:en.y},{x:In.x,y:In.y},{x:Cn.x,y:Cn.y}],avgDepth:ya,avgZ:Gr})}_t.sort((lt,Wt)=>lt.avgDepth-Wt.avgDepth),K.lineWidth=.5,_t.forEach(lt=>{K.fillStyle=yr(lt.avgZ),K.beginPath(),K.moveTo(lt.pts[0].x,lt.pts[0].y),K.lineTo(lt.pts[1].x,lt.pts[1].y),K.lineTo(lt.pts[2].x,lt.pts[2].y),K.lineTo(lt.pts[3].x,lt.pts[3].y),K.closePath(),K.fill()}),K.fillStyle="#aaa",K.font="10px monospace";const ar=Xe(-.5,-.5,0),Sr=Xe(.5,-.5,0),ir=Xe(-.5,.5,0),Gt=Xe(.5,.5,0);K.strokeStyle="#666",K.beginPath(),K.moveTo(ar.x,ar.y),K.lineTo(Sr.x,Sr.y),K.lineTo(Gt.x,Gt.y),K.lineTo(ir.x,ir.y),K.closePath(),K.stroke(),K.fillText("0",ar.x-10,ar.y+10),K.fillText("Fx",Sr.x+5,Sr.y),K.fillText("Fy",ir.x-15,ir.y);const Qe=Xe(-.5,-.5,Te);K.strokeStyle="#fff",K.beginPath(),K.moveTo(ar.x,ar.y),K.lineTo(Qe.x,Qe.y),K.stroke(),K.fillText(`10^${S}`,Qe.x-25,Qe.y),K.fillText(`10^${C}`,ar.x-25,ar.y)},[p,w,R,D,C,S,M]);const F=W=>{G.current=!0,z.current={x:W.clientX,y:W.clientY}},I=W=>{if(!G.current)return;const K=W.clientX-z.current.x,ae=W.clientY-z.current.y;T(re=>re-K*.5),B(re=>Math.max(0,Math.min(90,re+ae*.5))),z.current={x:W.clientX,y:W.clientY}},L=()=>{G.current=!1};return e?c.jsxs(vl,{initialPosition:l||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,p&&c.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[p.width,"x",p.height," (Chirp-Z)"]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),c.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),c.jsx("input",{type:"number",value:C,onChange:W=>j(W.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),c.jsx("span",{className:"text-slate-500",children:"to"}),c.jsx("input",{type:"number",value:S,onChange:W=>N(W.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),c.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:M,onChange:W=>E(Number(W.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),c.jsx("span",{className:"text-slate-300 w-6 text-right",children:M})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:W=>v(W.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:y,onChange:W=>k(W.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),c.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),b&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:b}),c.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:F,onMouseMove:I,onMouseUp:L,onMouseLeave:L}),c.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},Pre=.5,hx=1e-10,e4=(e,t)=>{const r=e.length-1;if(r<0)return hx;const n=t/Pre*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,hx)},Nre=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},Ore=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:l,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:p})=>{const[m,b]=P.useState((f==null?void 0:f.selectedChannel)??0),[x,w]=P.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[v,y]=P.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[k,C]=P.useState((f==null?void 0:f.useHanning)??!0),[j,S]=P.useState((f==null?void 0:f.doAverage)??!0),[N,M]=P.useState((f==null?void 0:f.welchSegments)??1),[E,R]=P.useState((f==null?void 0:f.showH)??!0),[T,D]=P.useState((f==null?void 0:f.showV)??!0),[B,G]=P.useState((f==null?void 0:f.interlaceRows)??!1),[z,F]=P.useState((f==null?void 0:f.rowGroup)??0),[I,L]=P.useState((f==null?void 0:f.interlaceCols)??!1),[W,K]=P.useState((f==null?void 0:f.colGroup)??0),[ae,re]=P.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[Q,le]=P.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[Ne,ie]=P.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[ge,ne]=P.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[H,ue]=P.useState((f==null?void 0:f.intStart)||"0"),[ve,ee]=P.useState((f==null?void 0:f.intEnd)||"0.5"),[Oe,Te]=P.useState(!1),[pe,Me]=P.useState([]),[Se,me]=P.useState(!1),[Ae,Re]=P.useState(0),[Xe,kt]=P.useState(null),[xt,Yt]=P.useState(!1),[bt,yr]=P.useState(!1),[_t,ar]=P.useState(null),[Sr,ir]=P.useState(!1),[Gt,Qe]=P.useState(null),[lt,Wt]=P.useState(u||{x:50,y:50}),[Vt,Tr]=P.useState(!1),[vr,Qr]=P.useState(null),[Ft,Jr]=P.useState({}),mt=P.useRef({x:0,y:0}),zr=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Be=P.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);P.useEffect(()=>{localStorage.setItem("fft_y_min",x),localStorage.setItem("fft_y_max",v),localStorage.setItem("fft_theo_sigma",ae),localStorage.setItem("fft_theo_ksize",Q),localStorage.setItem("fft_theo_noise",Ne),localStorage.setItem("fft_theo_scale",ge)},[x,v,ae,Q,Ne,ge]),P.useEffect(()=>{if(!e||!n||!a)return;me(!0),kt(null),Re(0);const A=setTimeout(async()=>{try{const Ee=m===-1?[0,1,2,3]:[m],ot=p&&p.length>1?p:[null],gt=ot.length,St={};let At={h:0,v:0};for(let qe=0;qe<gt;qe++){Re(qe+1);let Ct;if(ot[qe]){const $t=await ot[qe].arrayBuffer();Ct=await X0($t)}else Ct=n;for(const $t of Ee){const zt=GA(Ct.data,Ct.width,Ct.height,a,$t,!1,k,{rows:B,rowGroup:z,cols:I,colGroup:W},j,N);zt&&(St[$t]||(St[$t]={h:new Array(zt.avgHoriz.length).fill(0),v:new Array(zt.avgVert.length).fill(0)}),zt.avgHoriz.forEach((Lt,we)=>St[$t].h[we]+=Lt/gt),zt.avgVert.forEach((Lt,we)=>St[$t].v[we]+=Lt/gt),At=zt.sampleCount)}}if(Object.keys(St).length===0)throw new Error("ROI too small or no data found.");const qt=1024,er=[];for(let qe=0;qe<qt;qe++){const Ct=qe/(qt-1)*.5,$t={freq:parseFloat(Ct.toFixed(6))};for(const zt of Ee)St[zt]&&($t[`c${zt}_h`]=e4(St[zt].h,Ct),$t[`c${zt}_v`]=e4(St[zt].v,Ct));er.push($t)}Qr(At),Me(er)}catch(Ee){console.error("FFT Loop Failed:",Ee),kt(Ee.message||"Unknown error during FFT processing")}finally{me(!1)}},100);return()=>clearTimeout(A)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,m,k,j,N,B,z,I,W,p]);const jr=()=>{const A=parseFloat(H),Ee=parseFloat(ve);if(isNaN(A)||isNaN(Ee))return;const ot={},gt=m===-1?[0,1,2,3]:[m],St=pe.filter(At=>At.freq>=A&&At.freq<=Ee);if(St.length===0){Jr({});return}gt.forEach(At=>{let qt=0,er=0;St.forEach(qe=>{const Ct=qe[`c${At}_h`],$t=qe[`c${At}_v`];typeof Ct=="number"&&(qt+=Ct),typeof $t=="number"&&(er+=$t)}),ot[At]={h:qt/St.length,v:er/St.length,count:St.length}}),Jr(ot)},Ur=P.useMemo(()=>{const A=parseFloat(ae),Ee=parseInt(Q),ot=parseFloat(Ne),gt=parseFloat(ge);if(isNaN(A)||isNaN(Ee)||isNaN(ot)||isNaN(gt)||pe.length===0)return pe;const St=Nre(Ee,A),At=St.reduce((qe,Ct)=>qe+Ct*Ct,0),qt=(Ee-1)/2,er=ot*ot*gt;return pe.map(qe=>{const Ct=qe.freq,$t=2*Math.PI*Ct;let zt=0,Lt=0;for(let Wr=0;Wr<Ee;Wr++){const tn=Wr-qt,rn=St[Wr],ia=-$t*tn;zt+=rn*Math.cos(ia),Lt+=rn*Math.sin(ia)}const we=zt*zt+Lt*Lt;return{...qe,theory:Math.max(hx,er*At*we)}})},[pe,ae,Q,Ne,ge]),ln=A=>{A&&A.activeLabel!==void 0&&(ir(!0),Qe(Number(A.activeLabel)),ar(null))},Gr=A=>{if(Sr&&Gt!==null&&A&&A.activeLabel!==void 0){const Ee=Number(A.activeLabel);ar([Math.min(Gt,Ee),Math.max(Gt,Ee)])}},lr=()=>ir(!1),en=(A,Ee,ot)=>{l&&l(),!(ot.closest("button")||ot.closest("input"))&&(Tr(!0),mt.current={x:A-lt.x,y:Ee-lt.y})},In=A=>{en(A.clientX,A.clientY,A.target)},Cn=A=>{const Ee=A.touches[0];en(Ee.clientX,Ee.clientY,A.target)};P.useEffect(()=>{const A=ot=>{if(Vt){const gt="touches"in ot?ot.touches[0].clientX:ot.clientX,St="touches"in ot?ot.touches[0].clientY:ot.clientY;Wt({x:gt-mt.current.x,y:St-mt.current.y})}},Ee=()=>Tr(!1);return Vt&&(window.addEventListener("mousemove",A),window.addEventListener("mouseup",Ee),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",Ee)),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",Ee),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",Ee)}},[Vt]);const ya=P.useMemo(()=>{if(!_t||pe.length===0)return null;const[A,Ee]=_t,ot=pe.filter(At=>At.freq>=A&&At.freq<=Ee);if(ot.length===0)return null;const gt=m===-1?[0,1,2,3]:[m],St={};return gt.forEach(At=>{["h","v"].forEach(qt=>{const er=`c${At}_${qt}`;let qe=0,Ct=0;for(const $t of ot){const zt=$t[er];typeof zt=="number"&&(qe+=zt,Ct++)}Ct>0&&(St[`${er}_sigma`]=Math.sqrt(qe/Ct))})}),{count:ot.length,stats:St}},[_t,pe,m]),xr=()=>{if(pe.length===0)return;let A=1/0,Ee=-1/0;if(pe.forEach(qt=>{qt.freq<.01||qt.freq>.49||Object.keys(qt).forEach(er=>{if(er==="freq"||er==="theory")return;const qe=qt[er];typeof qe=="number"&&qe>0&&(qe<A&&(A=qe),qe>Ee&&(Ee=qe))})}),A===1/0)return;const ot=Math.log10(A),gt=Math.log10(Ee),St=gt-ot,At=(St===0?1:St)*.1;w((ot-At).toFixed(2)),y((gt+At).toFixed(2))},_r=(A,Ee)=>{a&&o&&o({...a,x:a.x+A,y:a.y+Ee})},cr=(A,Ee)=>{a&&o&&o({...a,w:Math.max(2,a.w+A),h:Math.max(2,a.h+Ee)})};return e?c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:lt.x,top:lt.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:l,children:[c.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${Vt?"cursor-grabbing":"cursor-grab"}`,onMouseDown:In,onTouchStart:Cn,children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:p&&p.length>1?`Stack Avg (${p.length} frames)`:"Single Mode"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[c.jsx("button",{onClick:()=>b(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${m===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(A=>c.jsx("button",{onClick:()=>b(A),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${m===A?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:Be[A]},A))]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("button",{onClick:()=>Te(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[c.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),c.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:Q,set:le,w:"w-10"},{label:"Sigma",val:ae,set:re,w:"w-12"},{label:"Noise()",val:Ne,set:ie,w:"w-12"},{label:"Scale",val:ge,set:ne,w:"w-12"}].map(A=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:A.label}),c.jsx("input",{type:"text",value:A.val,onChange:Ee=>A.set(Ee.target.value),className:`${A.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},A.label))})]})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),c.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:N,onChange:A=>M(parseInt(A.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),c.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:N})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:B,onChange:A=>G(A.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:I,onChange:A=>L(A.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),c.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${k?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:k&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:k,onChange:A=>C(A.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${j?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:j&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:j,onChange:A=>S(A.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),c.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("button",{onClick:()=>R(!E),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${E?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${E?"bg-cyan-400":"bg-gray-400"}`})," H"]}),c.jsxs("button",{onClick:()=>D(!T),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${T?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${E?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:()=>yr(!bt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${bt?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),c.jsx("button",{onClick:()=>Yt(!xt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${xt?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[c.jsx("button",{onClick:xr,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",c.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[c.jsx("input",{type:"text",value:x,onChange:A=>w(A.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),c.jsx("span",{className:"px-2 text-gray-400",children:"to"}),c.jsx("input",{type:"text",value:v,onChange:A=>y(A.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),Se&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),p&&p.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",Ae," / ",p.length]})]}),Xe?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:Xe}):c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[c.jsx("div",{className:"flex-1 relative z-10",onMouseDown:ln,onMouseMove:Gr,onMouseUp:lr,style:{cursor:Sr?"col-resize":"crosshair"},children:c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(tc,{data:Ur,margin:{top:10,right:10,bottom:20,left:0},children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),c.jsx(Na,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),c.jsx(Oa,{scale:"log",domain:[Math.pow(10,parseFloat(x)),Math.pow(10,parseFloat(v))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:A=>Number(A).toExponential(0),width:45}),c.jsx(En,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:A=>[Number(A).toExponential(3),""],labelFormatter:A=>`Freq: ${Number(A).toFixed(4)}`}),c.jsx(zi,{wrapperStyle:{fontSize:"10px"}}),c.jsx(mn,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(A=>{if(m!==-1&&m!==A)return[];const Ee=`c${A}_h`,ot=`c${A}_v`,gt=zr[`c${A}`],St=[];return E&&St.push(c.jsx(mn,{type:"linear",dataKey:Ee,name:`${Be[A]} (H)`,stroke:gt,strokeWidth:1,dot:!1,isAnimationActive:!1},`${A}_h`)),T&&St.push(c.jsx(mn,{type:"linear",dataKey:ot,name:`${Be[A]} (V)`,stroke:gt,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${A}_v`)),St}),_t&&c.jsx(cd,{x1:_t[0],x2:_t[1],fill:"#8884d8",fillOpacity:.15})]})})}),ya&&_t&&c.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[c.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",_t[0].toFixed(3),"-",_t[1].toFixed(3)]}),Object.entries(ya.stats).map(([A,Ee])=>c.jsxs("div",{className:"flex justify-between gap-4",children:[c.jsxs("span",{className:"text-slate-400",children:[A,":"]}),c.jsx("span",{className:"font-bold text-cyan-400",children:Ee.toFixed(5)})]},A))]})]})]}),bt&&c.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[c.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("input",{type:"number",step:"0.01",value:H,onChange:A=>ue(A.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.01",value:ve,onChange:A=>ee(A.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("button",{onClick:jr,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(A=>{const Ee=Ft[A];if(!Ee)return null;const ot=zr[`c${A}`];return c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:ot},children:[Be[A]," ",c.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Ee.count," pts)"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[c.jsxs("div",{children:["H: ",Ee.h.toExponential(3)]}),c.jsxs("div",{children:["V: ",Ee.v.toExponential(3)]})]})]},A)})})]}),xt&&c.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>_r(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>_r(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>_r(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>_r(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx("button",{onClick:()=>cr(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),c.jsx("button",{onClick:()=>cr(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),c.jsx("button",{onClick:()=>cr(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),c.jsx("button",{onClick:()=>cr(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),c.jsx(Cre,{isOpen:Oe,onClose:()=>Te(!1),rawImageData:n,roi:a,selectedChannel:m===-1?0:m,channelName:m===-1?"Red (Default)":Be[m],zIndex:s?s+2:102,onFocus:l})]}):null},Mre=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f})=>{const[d,p]=P.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[m,b]=P.useState((u==null?void 0:u.blackLevel)??0),[x,w]=P.useState((u==null?void 0:u.whiteLevel)??16383),[v,y]=P.useState(null),[k,C]=P.useState(!1),[j,S]=P.useState(null),[N,M]=P.useState(l||{x:150,y:150}),[E,R]=P.useState(!1),T=P.useRef({x:0,y:0});P.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:m,whiteLevel:x})},[d,m,x]),P.useEffect(()=>{if(e&&n&&!u){const I=n.blackLevels?Math.floor(n.blackLevels[1]):0;b(I),w(n.whiteLevel||16383),y(null)}},[e,n]);const D=()=>{if(!n||!a)return;S(null),C(!0);const L=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const W=VA(n.data,n.width,n.height,a,L,m,x);W?y(W):(S("No data found in selection with current filters."),y(null))}catch(W){console.error("Analysis failed:",W),S(W.message||"Analysis error")}finally{C(!1)}},50)},B=(I,L,W)=>{s&&s(),!(W.closest("button")||W.closest("input")||W.closest("select"))&&(R(!0),T.current={x:I-N.x,y:L-N.y})},G=I=>{B(I.clientX,I.clientY,I.target)},z=I=>{const L=I.touches[0];B(L.clientX,L.clientY,I.target)};if(P.useEffect(()=>{const I=W=>{if(E){const K="touches"in W?W.touches[0].clientX:W.clientX,ae="touches"in W?W.touches[0].clientY:W.clientY;M({x:K-T.current.x,y:ae-T.current.y})}},L=()=>R(!1);return E&&(window.addEventListener("mousemove",I),window.addEventListener("mouseup",L),window.addEventListener("touchmove",I,{passive:!1}),window.addEventListener("touchend",L)),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",L),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",L)}},[E]),!e)return null;const F=i?["B","G1","G2","R"]:["R","G1","G2","B"];return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:N.x,top:N.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${E?"cursor-grabbing":"cursor-grab"}`,onMouseDown:G,onTouchStart:z,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),c.jsx("select",{value:d,onChange:I=>p(I.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:F.map(I=>c.jsx("option",{value:I,children:I},I))})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),c.jsx("input",{type:"number",value:m,onChange:I=>b(Number(I.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),c.jsx("input",{type:"number",value:x,onChange:I=>w(Number(I.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsx("button",{onClick:D,disabled:k,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:k?"Analyzing...":"Run Analysis"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[j&&c.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:j}),!v&&!k&&!j&&c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:c.jsx("p",{children:"Configure parameters and click Run Analysis"})}),v&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.uniqueCount})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.diffCount})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[c.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),c.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(v.stepCounts).sort((I,L)=>parseFloat(I[0])-parseFloat(L[0])).map(([I,L])=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",I,":"]}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(L)})]},I))})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[c.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(tc,{data:v.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Na,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),c.jsx(Oa,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),c.jsx(En,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:I=>`Val: ${I}`,formatter:I=>[I,"Step Size"]}),c.jsx(mn,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},Are=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:l})=>{const[u,f]=P.useState("cross"),[d,p]=P.useState("R"),[m,b]=P.useState("B"),[x,w]=P.useState("H"),[v,y]=P.useState(null),[k,C]=P.useState(!1),[j,S]=P.useState(0),[N,M]=P.useState(0),[E,R]=P.useState("single"),T=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},D=a?["B","G1","G2","R"]:["R","G1","G2","B"],B=async G=>{if(!r||!n)return;C(!0),R(G),S(0),y(null);let z=T[d],F=u==="cross"?T[m]:z,I=0,L=0;u==="self"&&(x==="H"?L=2:I=2),setTimeout(async()=>{try{let W={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(G==="single")W=sw(r.data,r.width,r.height,n,z,F,I,L);else if(l&&l.length>0)for(let K=0;K<l.length;K++){S(K+1);const ae=await l[K].arrayBuffer(),re=await X0(ae),Q=sw(re.data,re.width,re.height,n,z,F,I,L);W.sumCov+=Q.sumCov,W.sumVar1+=Q.sumVar1,W.sumVar2+=Q.sumVar2,W.n+=Q.n}M(W.n),y(zA(W))}catch(W){console.error("Pearson calculation failed",W),alert("Calculation error: "+W.message)}finally{C(!1)}},50)};return e?c.jsxs(vl,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),c.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),c.jsx("select",{value:d,onChange:G=>p(G.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:D.map(G=>c.jsx("option",{value:G,children:G},G))})]}),c.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?c.jsx("select",{value:m,onChange:G=>b(G.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:D.map(G=>c.jsx("option",{value:G,children:G},G))}):c.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[c.jsx("button",{onClick:()=>w("H"),className:`flex-1 text-[9px] font-bold rounded ${x==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),c.jsx("button",{onClick:()=>w("V"),className:`flex-1 text-[9px] font-bold rounded ${x==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:()=>B("single"),disabled:k,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:k&&E==="single"?"Calculating...":"Calc Current Frame"}),l&&l.length>0&&c.jsxs("button",{onClick:()=>B("stack"),disabled:k,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[c.jsx("span",{children:"Calc Stack Concatenated"}),k&&E==="stack"&&c.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",j," / ",l.length]})]})]}),v!==null&&c.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${x})`," r"]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:v.toFixed(5)}),c.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",N.toLocaleString()," pairs"]}),c.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(v)>.5?c.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(v)>.1?c.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):c.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),c.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${x==="V"?"+2":""}, c${x==="H"?"+2":""}) in the same channel.`})]}):null},Tre=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],Ere=["5","9","0","8","2","1","4","7","3","6"],t4=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:Ere[r]}).join(""),$re=({isOpen:e,onClose:t})=>{const[r,n]=P.useState({pv:"--",uv:"--"});return P.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[c.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:c.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[c.jsx("span",{className:"font-bold mr-2",children:"about:"}),c.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),c.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Tre.map(a=>c.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),c.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),c.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:c.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[c.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:t4(r.pv)}),c.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:t4(r.uv)})]})})})]})]})}):null},Dre=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=P.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(p,m)=>{if(typeof m=="bigint")return m.toString()+"n";if(typeof m=="object"&&m!==null){if(d.has(m))return"[Circular]";if(d.add(m),ArrayBuffer.isView(m))return`[${m.constructor.name}]`}return m})}catch{return"[Unable to serialize object]"}},l=P.useMemo(()=>{if(!r)return[];const f=[],d=(p,m=0)=>{if(m>5)return"...";if(p==null)return String(p);if(p instanceof Date)return p.toLocaleString();if(typeof p=="number")return p.toString();if(typeof p=="string")return p;if(typeof p=="bigint")return p.toString()+"n";if(ArrayBuffer.isView(p))return`<${p.constructor.name} len=${p.length} bytes=${p.byteLength}>`;if(p instanceof ArrayBuffer)return`<ArrayBuffer bytes=${p.byteLength}>`;if(typeof p=="object"){if(Array.isArray(p))return p.length===0?"[]":p.length>20?`[${p.slice(0,10).map(w=>typeof w=="number"?w.toFixed(2):d(w,m+1)).join(", ")}, ... (+${p.length-10} more)]`:`[${p.map(x=>typeof x=="number"?Number.isInteger(x)?x:x.toFixed(4):d(x,m+1)).join(", ")}]`;try{const b=Object.keys(p);return b.length>5?`{Object with ${b.length} keys}`:s(p)}catch{return"<Complex Object>"}}return String(p)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(m=>{if(m==="MakerNote"||m==="UserComment"||m.includes("Strip")||m.includes("Offset")){f.push({key:m,value:"<Binary/Internal Data>"});return}const b=r[m];f.push({key:m,value:d(b)})})}catch(p){console.error("Error processing EXIF data:",p),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=l.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:c.jsxs("div",{className:"relative",children:[c.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?c.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[c.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),c.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):c.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:c.jsxs("p",{children:['No tags found matching "',i,'"']})})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},Rre=100,Dm=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},r4=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=P.useRef(null),s=P.useRef(null),l=P.useCallback(y=>{const k=i?Math.max(1e-6,e):e,C=i?Math.max(k*1.0001,t):t,j=Math.max(k,Math.min(C,y));if(i){const S=Math.log10(k),N=Math.log10(C);return(Math.log10(j)-S)/(N-S)}return(j-k)/(C-k)},[e,t,i]),u=P.useCallback(y=>{const k=i?Math.max(1e-6,e):e,C=i?Math.max(k*1.0001,t):t;if(i){const j=Math.log10(k),S=Math.log10(C);return Math.pow(10,j+y*(S-j))}return k+y*(C-k)},[e,t,i]),f=(y,k)=>{y.preventDefault(),y.stopPropagation(),s.current=k;const C=S=>{if(!s.current||!o.current)return;const N=o.current.getBoundingClientRect();let M=0;a?M=(N.bottom-S.clientY)/N.height:M=(S.clientX-N.left)/N.width,M=Math.max(0,Math.min(1,M));const E=u(M);if(s.current==="min"){const R=r[1];n([Math.min(E,R),R])}else{const R=r[0];n([R,Math.max(E,R)])}},j=()=>{s.current=null,window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",j)};window.addEventListener("mousemove",C),window.addEventListener("mouseup",j)},d=l(r[0])*100,p=l(r[1])*100,m=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},b=a?{left:"50%",bottom:`${d}%`,height:`${p-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${p-d}%`,height:"4px",transform:"translateY(-50%)"},x="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",w=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},v=a?{left:"50%",bottom:`${p}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${p}%`,transform:"translate(-50%, -50%)"};return c.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[c.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:m}),c.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:b}),c.jsx("div",{className:x,style:w,onMouseDown:y=>f(y,"min")}),c.jsx("div",{className:x,style:v,onMouseDown:y=>f(y,"max")})]})},Ire=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:l,initialISO:u})=>{const[f,d]=P.useState("Noise"),[p,m]=P.useState(!0),[b,x]=P.useState(null),[w,v]=P.useState("default"),[y,k]=P.useState(!1),[C,j]=P.useState(!1),[S,N]=P.useState({R:!0,G1:!0,G2:!0,B:!0}),[M,E]=P.useState(""),[R,T]=P.useState(""),[D,B]=P.useState(""),[G,z]=P.useState(""),[F,I]=P.useState("10"),[L,W]=P.useState(""),[K,ae]=P.useState("0 0 0 0"),[re,Q]=P.useState("0 0 0 0"),[le,Ne]=P.useState(!1),[ie,ge]=P.useState(null),[ne,H]=P.useState(!1),[ue,ve]=P.useState(0),[ee,Oe]=P.useState([]),[Te,pe]=P.useState(""),[Me,Se]=P.useState(""),me=()=>{const q=parseFloat(Te),de=parseFloat(Me);!isNaN(q)&&!isNaN(de)&&(Oe([...ee,{id:Date.now(),x:q,y:de}]),pe(""),Se(""))},[Ae,Re]=P.useState(()=>localStorage.getItem("ptc_tester_name")||""),[Xe,kt]=P.useState(""),[xt,Yt]=P.useState("");P.useEffect(()=>{localStorage.setItem("ptc_tester_name",Ae)},[Ae]);const bt=P.useRef(le),yr=P.useRef(ne),_t=P.useRef(ue);P.useEffect(()=>{bt.current=le,yr.current=ne,_t.current=ue},[le,ne,ue]);const[ar,Sr]=P.useState(null),[ir,Gt]=P.useState({min:.01,max:90}),[Qe,lt]=P.useState({readNoise:0,gain:1,prnu:.5}),[Wt,Vt]=P.useState(2e6),Tr=P.useRef(Qe),vr=P.useRef(ir),Qr=P.useRef(Wt);P.useEffect(()=>{Tr.current=Qe,vr.current=ir,Qr.current=Wt},[Qe,ir,Wt]);const[Ft,Jr]=P.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[mt,zr]=P.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[Be,jr]=P.useState(!1),[Ur,ln]=P.useState([]),[Gr,lr]=P.useState(null),[en,In]=P.useState(""),Cn=P.useMemo(()=>n?n.join(","):"",[n]);P.useEffect(()=>{if(e){let q="0 0 0 0";o&&o.blackLevel?q=o.blackLevel.join(" "):q=n&&n.length===4?n.join(" "):"0 0 0 0",ae(q),Q(q);let de="";if(o&&o.height?de=o.height.toString():a&&(de=a.toString()),W(de),de){const X=parseFloat(de);!isNaN(X)&&X>0?I((2309.4/X).toFixed(2)):I("10")}else I("10");ge(null),Ne(!1),H(!1),ve(0),ln([]),lr(null),Gt({min:.01,max:90}),Jr({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const ye={readNoise:0,gain:0,prnu:0};lt(ye),Tr.current=ye,E(""),T(""),B(""),z(""),d("Noise"),Sr(null),Vt(2e6),In(""),j(!1),Oe([]),kt(X=>X.trim()===""&&l?l:X),Yt(X=>X.trim()===""&&u?u:X)}},[e,Cn,o,a,r,l,u]);const ya=q=>{if(q.key==="Enter"){const de=parseFloat(L);if(!isNaN(de)&&de>0){const ye=(2309.4/de).toFixed(2);I(ye)}q.target.blur()}},xr=P.useMemo(()=>{let de=re.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(de.length===1&&(de=[de[0],de[0],de[0],de[0]]);de.length<4;)de.push(0);const ye=X=>{switch(X){case"R":return de[0];case"G1":return de[1];case"G2":return de[2];case"B":return de[3];default:return 0}};return r.map(X=>{const je=X.mean-ye(X.channel),Ze=X.std>0?je/X.std:0;return{...X,x:je,std:X.std,snr:Ze}}).filter(X=>X.std>0)},[r,re]),_r=P.useMemo(()=>{const q=Qe.readNoise,de=q*q;return xr.map(ye=>{let X=0;if(f==="Noise")X=ye.std;else if(f==="SNR")X=ye.snr;else if(f==="Linear"){const Ze=ye.std*ye.std-de;X=ye.x!==0?Ze/ye.x:0}return{...ye,y:X}})},[xr,f,Qe.readNoise]),cr=P.useMemo(()=>{if(xr.length===0)return"G1";const q={R:0,G1:0,G2:0,B:0},de={R:0,G1:0,G2:0,B:0};for(const je of xr)q[je.channel]+=je.x,de[je.channel]++;let ye="G1",X=-1/0;return Object.keys(q).forEach(je=>{const Ze=de[je],it=Ze>0?q[je]/Ze:-1/0;it>X&&(X=it,ye=je)}),ye},[xr]),A=P.useCallback(()=>{let q=1/0,de=-1/0;if(xr.length===0)return{min:.1,max:1};for(let ye=0;ye<xr.length;ye++){const X=xr[ye].x;p&&X<=0||(X<q&&(q=X),X>de&&(de=X))}return q===1/0?{min:.1,max:1}:{min:q,max:de}},[xr,p]),Ee=P.useCallback(()=>{let q=1/0,de=-1/0;if(_r.length===0)return{min:.1,max:1};for(let ye=0;ye<_r.length;ye++){const X=_r[ye].y;p&&X<=0||(X<q&&(q=X),X>de&&(de=X))}return q===1/0?{min:.1,max:1}:{min:q*.9,max:de*1.1}},[_r,p]),{min:ot,max:gt}=A(),{min:St,max:At}=Ee(),qt=gt*(ir.min/100),er=gt*(ir.max/100),qe=P.useMemo(()=>{if(!p&&_r.length===0)return{shot:[],read:[],prnu:[],total:[]};const q=M?parseFloat(M):ot,de=R?parseFloat(R):gt,ye=100,X=Math.max(.1,q),je=Math.max(1,de);if(X>=je)return{shot:[],read:[],prnu:[],total:[]};const Ze=Math.log10(X),dt=(Math.log10(je)-Ze)/ye,pt=Qe.readNoise,ct=Qe.gain>0?Qe.gain:1,Ht=Qe.prnu/100,Ve=[],Ut=[],Je=[],be=[];for(let nt=0;nt<=ye;nt++){const Ke=Math.pow(10,Ze+nt*dt);if(f==="Linear"){const J=1/ct,xe=Ht*Ht,st=J+xe*Ke;be.push({x:Ke,y:st}),Ve.push({x:Ke,y:J}),Je.push({x:Ke,y:xe*Ke})}else{const J=pt,xe=Math.sqrt(Ke/ct),st=Ht*Ke,et=Math.sqrt(J*J+xe*xe+st*st);f==="Noise"?(Ve.push({x:Ke,y:xe}),Ut.push({x:Ke,y:J}),Je.push({x:Ke,y:st}),be.push({x:Ke,y:et})):(xe>0&&Ve.push({x:Ke,y:Ke/xe}),J>0&&Ut.push({x:Ke,y:Ke/J}),st>0&&Je.push({x:Ke,y:Ke/st}),et>0&&be.push({x:Ke,y:Ke/et}))}}return{shot:Ve,read:Ut,prnu:Je,total:be}},[_r,p,M,R,Qe,f,ot,gt]),Ct=P.useMemo(()=>{if(f==="Linear")return[];const q=parseFloat(F);if(isNaN(q)||q<=0)return[];const de=M?parseFloat(M):ot,ye=R?parseFloat(R):gt;return f==="SNR"?[{x:de,y:q},{x:ye,y:q}]:[{x:de,y:de/q},{x:ye,y:ye/q}]},[_r,F,f,M,R,ot,gt]),$t=P.useCallback((q,de)=>{if(!de||de.length===0)return null;const ye=[...de].sort((X,je)=>X.x-je.x);for(let X=0;X<ye.length-1;X++){const je=ye[X],Ze=ye[X+1];if(je.snr<=q&&Ze.snr>=q||je.snr>=q&&Ze.snr<=q){const it=(q-je.snr)/(Ze.snr-je.snr);return je.x+it*(Ze.x-je.x)}}return null},[]),zt=P.useMemo(()=>{const q=xr,de=1e3,ye=je=>{if(je.length===0)return[];if(je.length<=de)return je;const Ze=[...je].sort((pt,ct)=>pt.x-ct.x),it=[],dt=Ze.length/de;for(let pt=0;pt<de;pt++){const ct=Math.floor(pt*dt),Ht=Math.floor((pt+1)*dt),Ve=Ze.slice(ct,Ht);if(Ve.length===0)continue;Ve.sort((Je,be)=>Je.std-be.std);const Ut=Math.floor(Ve.length/2);it.push(Ve[Ut])}return it},X={R:[],G1:[],G2:[],B:[]};return q.forEach(je=>{X[je.channel]&&X[je.channel].push(je)}),{R:ye(X.R),G1:ye(X.G1),G2:ye(X.G2),B:ye(X.B)}},[xr]),Lt=P.useMemo(()=>ie&&Qe.gain?ie*Qe.gain:null,[ie,Qe.gain]),we=P.useMemo(()=>{if(ie===null||ie===0)return null;const q=parseFloat(F);let de=null;if(!isNaN(q)&&q>0){let it=0,dt=0;if(["R","G1","G2","B"].forEach(pt=>{const ct=$t(q,zt[pt]);ct!==null&&(it+=ct,dt++)}),dt>0){const pt=it/dt;de=Math.log2(ie/pt)}}const ye=parseFloat(L);let X=null,je=NaN;if(!isNaN(ye)&&ye>0){je=16e3/ye;let it=0,dt=0;if(["R","G1","G2","B"].forEach(pt=>{const ct=$t(je,zt[pt]);ct!==null&&(it+=ct,dt++)}),dt>0){const pt=it/dt;X=Math.log2(ie/pt)}}let Ze=null;if(!isNaN(ye)&&ye>0){const it=$t(je,zt[cr]);it!==null&&(Ze=Math.log2(ie/it))}return{manualDR:de,ptpDR:X,d55DR:Ze,manualTarget:q,ptpTarget:je,saturationSignal:ie,dominantChannel:cr}},[ie,F,L,zt,$t,cr]),Wr=P.useMemo(()=>{if(f==="Linear"||!we||!we.ptpTarget||isNaN(we.ptpTarget))return[];const q=we.ptpTarget,de=M?parseFloat(M):ot,ye=R?parseFloat(R):gt;return f==="SNR"?[{x:de,y:q},{x:ye,y:q}]:[{x:de,y:de/q},{x:ye,y:ye/q}]},[f,we,M,R,ot,gt]),tn=P.useCallback(()=>{const ye=document.createElement("canvas");ye.width=2048,ye.height=1536;const X=ye.getContext("2d");if(!X)return;const je=s==="dark",Ze=je?"#0f172a":"#ffffff",it=je?"#ffffff":"#000000",dt=je?"#475569":"#cbd5e1",pt=je?"#1e293b":"#f1f5f9",ct=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};X.fillStyle=Ze,X.fillRect(0,0,2048,1536);let Ht=M?parseFloat(M):ot,Ve=R?parseFloat(R):gt,Ut=D?parseFloat(D):St,Je=G?parseFloat(G):At;isNaN(Ht)&&(Ht=.1),isNaN(Ve)&&(Ve=1e4),isNaN(Ut)&&(Ut=.1),isNaN(Je)&&(Je=1e3);const be={top:80,right:80,bottom:100,left:120},nt=2048-be.left-be.right,Ke=1536-be.top-be.bottom,J=Fe=>{if(p){const Tt=Math.log10(Math.max(1e-9,Ht)),Mt=Math.log10(Math.max(1e-9,Ve)),Pt=Math.log10(Math.max(1e-9,Fe));return be.left+(Pt-Tt)/(Mt-Tt)*nt}else return be.left+(Fe-Ht)/(Ve-Ht)*nt},xe=Fe=>{if(p){const Tt=Math.log10(Math.max(1e-9,Ut)),Mt=Math.log10(Math.max(1e-9,Je)),Pt=Math.log10(Math.max(1e-9,Fe));return be.top+Ke-(Pt-Tt)/(Mt-Tt)*Ke}else return be.top+Ke-(Fe-Ut)/(Je-Ut)*Ke};if(X.beginPath(),p){const Fe=(Tt,Mt,Pt)=>{const Fn=Math.log10(Math.max(1e-9,Tt)),nn=Math.log10(Math.max(1e-9,Mt)),zn=Math.floor(Fn),Ua=Math.ceil(nn);for(let Ti=zn;Ti<=Ua;Ti++){const Ga=Math.pow(10,Ti);let Cr=Pt?J(Ga):xe(Ga);(Pt?Cr>=be.left-1&&Cr<=be.left+nt+1:Cr>=be.top-1&&Cr<=be.top+Ke+1)&&(X.lineWidth=1.5,X.strokeStyle=dt,X.beginPath(),Pt?(X.moveTo(Cr,be.top),X.lineTo(Cr,be.top+Ke)):(X.moveTo(be.left,Cr),X.lineTo(be.left+nt,Cr)),X.stroke()),X.lineWidth=.5,X.strokeStyle=pt;for(let No=2;No<10;No++){const kl=No*Ga;Cr=Pt?J(kl):xe(kl),(Pt?Cr>=be.left&&Cr<=be.left+nt:Cr>=be.top&&Cr<=be.top+Ke)&&(X.beginPath(),Pt?(X.moveTo(Cr,be.top),X.lineTo(Cr,be.top+Ke)):(X.moveTo(be.left,Cr),X.lineTo(be.left+nt,Cr)),X.stroke())}}};Fe(Ht,Ve,!0),Fe(Ut,Je,!1)}else{X.strokeStyle=dt,X.lineWidth=1;for(let Fe=0;Fe<=5;Fe++){const Tt=be.left+nt*Fe/5;X.beginPath(),X.moveTo(Tt,be.top),X.lineTo(Tt,be.top+Ke),X.stroke();const Mt=be.top+Ke*Fe/5;X.beginPath(),X.moveTo(be.left,Mt),X.lineTo(be.left+nt,Mt),X.stroke()}}X.strokeStyle=it,X.lineWidth=2,X.strokeRect(be.left,be.top,nt,Ke);const st=(Fe,Tt,Mt)=>{Fe<be.left||Fe>be.left+nt||Tt<be.top||Tt>be.top+Ke||(X.fillStyle=Mt,X.fillRect(Fe-1.5,Tt-1.5,3,3))},et=_r.filter(Fe=>!(p&&(Fe.x<=0||Fe.y<=0)));et.forEach(Fe=>{S[Fe.channel]&&Fe.channel!==cr&&st(J(Fe.x),xe(Fe.y),ct[Fe.channel])}),et.forEach(Fe=>{S[Fe.channel]&&Fe.channel===cr&&st(J(Fe.x),xe(Fe.y),ct[Fe.channel])}),ee.forEach(Fe=>{const Tt=J(Fe.x),Mt=xe(Fe.y);if(Tt<be.left||Tt>be.left+nt||Mt<be.top||Mt>be.top+Ke)return;X.strokeStyle="#d946ef",X.lineWidth=2.5;const Pt=6;X.beginPath(),X.moveTo(Tt-Pt,Mt-Pt),X.lineTo(Tt+Pt,Mt+Pt),X.moveTo(Tt+Pt,Mt-Pt),X.lineTo(Tt-Pt,Mt+Pt),X.stroke()});const yt=(Fe,Tt,Mt=[])=>{if(Fe.length<2)return;X.beginPath(),X.strokeStyle=Tt,X.lineWidth=3,X.setLineDash(Mt);let Pt=!1;for(const Fn of Fe){const nn=J(Fn.x),zn=xe(Fn.y);if(nn<be.left-100||nn>be.left+nt+100||zn<be.top-100||zn>be.top+Ke+100){Pt=!1;continue}Pt?X.lineTo(nn,zn):(X.moveTo(nn,zn),Pt=!0)}X.stroke(),X.setLineDash([])},Dt=je?"#ffffff":"#000000";if(mt.shot&&yt(qe.shot,"#94a3b8",[5,5]),mt.read&&yt(qe.read,"#f43f5e",[3,3]),mt.prnu&&yt(qe.prnu,"#f59e0b",[3,3]),mt.total&&yt(qe.total,Dt,[]),Ct.length===2){const Fe="#6366f1";yt(Ct,Fe,[4,2]);const Tt=Ct[1],Mt=xe(Tt.y);Mt>=be.top&&Mt<=be.top+Ke&&(X.fillStyle=Fe,X.font="bold 20px sans-serif",X.textAlign="right",X.textBaseline="bottom",X.fillText(`M.Tgt=${F}`,be.left+nt-10,Mt-8))}if(Wr.length===2&&(we!=null&&we.ptpTarget)){const Fe="#10b981";yt(Wr,Fe,[4,4]);const Tt=Wr[1],Mt=xe(Tt.y);if(Mt>=be.top&&Mt<=be.top+Ke){X.fillStyle=Fe,X.font="bold 20px sans-serif",X.textAlign="right",X.textBaseline="bottom";const Pt=we.ptpTarget.toFixed(1),Fn=Ct.length===2?xe(Ct[1].y):-100,nn=Math.abs(Mt-Fn)<25?25:0;X.fillText(`PTP=${Pt}`,be.left+nt-10,Mt-8-nn)}}if(mt.fitRange||ne){const Fe=(Tt,Mt)=>{const Pt=J(Tt);Pt>=be.left&&Pt<=be.left+nt&&(X.beginPath(),X.strokeStyle=Mt,X.lineWidth=2,X.setLineDash([8,8]),X.moveTo(Pt,be.top),X.lineTo(Pt,be.top+Ke),X.stroke(),X.setLineDash([]))};Fe(qt,"#22d3ee"),Fe(er,"#22d3ee")}if(ie){const Fe=J(ie);Fe>=be.left&&Fe<=be.left+nt&&(X.strokeStyle="#ef4444",X.lineWidth=3,X.setLineDash([10,10]),X.beginPath(),X.moveTo(Fe,be.top),X.lineTo(Fe,be.top+Ke),X.stroke(),X.setLineDash([]),X.fillStyle="#ef4444",X.font="bold 24px sans-serif",X.textAlign="center",X.fillText("Sat",Fe,be.top-10))}X.fillStyle=it,X.font="28px monospace",X.textAlign="center",X.fillText(Ht.toExponential(1),be.left,be.top+Ke+40),X.fillText(Ve.toExponential(1),be.left+nt,be.top+Ke+40),X.fillText("Signal (DN)",be.left+nt/2,be.top+Ke+80),X.textAlign="right",X.textBaseline="middle",X.fillText(Ut.toExponential(1),be.left-20,be.top+Ke),X.fillText(Je.toExponential(1),be.left-20,be.top),X.save(),X.translate(be.left-80,be.top+Ke/2),X.rotate(-Math.PI/2),X.textAlign="center",X.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),X.restore(),X.save(),X.translate(2048/2,1536/2),X.rotate(-Math.PI/6),X.textAlign="center",X.textBaseline="middle",X.fillStyle=je?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",X.font="bold 150px sans-serif",X.fillText(" y-g-jiang.github.io",0,0),X.restore(),X.fillStyle=it,X.font="bold 36px sans-serif",X.textAlign="left",X.textBaseline="top",X.fillText(`PTC Export: ${f} Mode`,be.left,20),X.font="24px sans-serif",X.fillStyle=je?"#94a3b8":"#64748b",X.fillText(`Points: ${_r.length} | Sat Channel: ${cr}`,be.left,65);const Er=be.left+30,cn=be.top+30,On=70,Bn=Fe=>{if(!ie||Fe<=0)return"--";const Tt=Qe.readNoise,Mt=Qe.gain,Pt=Qe.prnu/100;if(Mt<=0)return"--";const Fn=Fe*Fe,nn=Tt*Tt,zn=1-Fn*Pt*Pt,Ua=-(Fn/Mt),Ti=-(Fn*nn);let Ga=0;if(Math.abs(zn)<1e-8)Math.abs(Ua)>1e-8&&(Ga=-Ti/Ua);else{const Cr=Ua*Ua-4*zn*Ti;Cr>=0&&(Ga=(-Ua+Math.sqrt(Cr))/(2*zn))}return Ga>0?Math.log2(ie/Ga).toFixed(2)+" EV":"--"},un=we!=null&&we.ptpTarget&&!isNaN(we.ptpTarget)?Bn(we.ptpTarget):"--",sa=F?Bn(parseFloat(F)):"--";X.font="bold 48px monospace",X.textAlign="left",X.textBaseline="top",X.shadowColor=je?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",X.shadowBlur=4,X.shadowOffsetX=1,X.shadowOffsetY=1;const tr=(Fe,Tt,Mt,Pt)=>{const Fn=cn+Mt*On;X.fillStyle=it,X.fillText(Fe,Er,Fn);const nn=X.measureText(Fe).width;X.fillStyle=Pt||it,X.fillText(Tt,Er+nn,Fn)},Ai=Ft.read,tu=parseFloat(Ft.gain).toFixed(3),wl=parseFloat(Ft.prnu).toFixed(2)+"%";let la=`M.DR@SNR${F}: `;const Qi=parseFloat(L);if(!isNaN(Qi)&&Qi>0){const Fe=(2309.4/Qi).toFixed(2);Math.abs(parseFloat(F)-parseFloat(Fe))<.05&&(la="8mpSNR=1 DR: ")}tr("Tester: ",Ae||"N/A",0),tr("Model : ",Xe||"Unknown",1),tr("ISO   : ",xt||"N/A",2),tr("RN/FPN: ",Ai,3,"#f43f5e"),tr("KADC  : ",tu,4,"#06b6d4"),tr("PRNU  : ",wl,5,"#f59e0b"),tr("PTP DR: ",we!=null&&we.ptpDR?we.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),tr("D55 DR: ",we!=null&&we.d55DR?we.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),tr("FWC   : ",Lt?Lt>1e4?(Lt/1e3).toFixed(1)+"k":Math.round(Lt).toString():"--",8,"#f97316"),tr(la,we!=null&&we.manualDR?we.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),tr("PTCFitDR(PTP): ",un,10,"#10b981"),tr("PTCFitDR(Man): ",sa,11,"#06b6d4"),X.save(),X.textAlign="right",X.textBaseline="bottom",X.fillStyle="#3b82f6",X.font="bold 80px sans-serif",X.shadowColor=je?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",X.shadowBlur=4,X.shadowOffsetX=2,X.shadowOffsetY=2;const rr=1988,xs=1476,ru=90;X.fillText("Online",rr,xs),X.fillText("Jiangtherapee",rr,xs-ru),X.restore();const bs=document.createElement("a");bs.download=`ptc_complete_${f}_${Date.now()}.jpg`,bs.href=ye.toDataURL("image/jpeg",.9),bs.click()},[_r,cr,S,M,R,D,G,ot,gt,St,At,p,s,f,ie,i,mt,qe,qt,er,ir,ne,Ae,Xe,xt,we,Lt,F,Ct,Wr,Ft,L,ee]),rn=P.useMemo(()=>{let q=_r;if(p&&(q=q.filter(je=>je.y>0&&je.x>0)),w==="top3"){const je=[...q].sort((it,dt)=>dt.x-it.x),Ze=Math.max(50,Math.ceil(je.length*.03));q=je.slice(0,Ze)}const de={R:[],G1:[],G2:[],B:[]};if(q.forEach(je=>{de[je.channel]&&de[je.channel].push(je)}),w==="raw")return de;const ye=w==="top3"?500:Rre,X=je=>{if(je.length<=ye)return je;const Ze=[...je].sort((pt,ct)=>pt.x-ct.x),it=[],dt=Ze.length/ye;for(let pt=0;pt<ye;pt++){const ct=Math.floor(pt*dt),Ht=Math.floor((pt+1)*dt),Ve=Ze.slice(ct,Ht);if(Ve.length===0)continue;Ve.sort((Je,be)=>Je.y-be.y);const Ut=Math.floor(Ve.length/2);it.push(Ve[Ut])}return it};return{R:X(de.R),G1:X(de.G1),G2:X(de.G2),B:X(de.B)}},[_r,w,p]),ia=P.useMemo(()=>{if(xr.length<5)return[];const q=xr.filter(ye=>ye.channel===cr);return[...q.length>20?q:xr].sort((ye,X)=>ye.x-X.x).map(ye=>({mean:ye.x,std:ye.std}))},[xr,cr]),xl=q=>{const de=q.length;if(de===0)return[];const ye=q.reduce((nt,Ke)=>nt+Ke,0)/de,X=q.reduce((nt,Ke)=>nt+Math.pow(Ke-ye,2),0)/(de-1||1),je=Math.sqrt(X);if(je===0)return[{x:ye-.001,density:0},{x:ye,density:1},{x:ye+.001,density:0}];const Ze=1.06*je*Math.pow(de,-.2),it=Math.min(...q),dt=Math.max(...q),pt=(dt-it)*.2||it*.1,ct=Math.max(0,it-pt),Ht=dt+pt,Ve=100,Ut=(Ht-ct)/(Ve-1),Je=nt=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*nt*nt),be=[];for(let nt=0;nt<Ve;nt++){const Ke=ct+nt*Ut;let J=0;for(let xe=0;xe<de;xe++)J+=Je((Ke-q[xe])/Ze);J/=de*Ze,be.push({x:Ke,density:J})}return be},bl=P.useCallback((q,de,ye,X)=>{if(q.length<5)return{gain:0,prnu:0};const je=q[q.length-1].mean,Ze=je*(ye.min/100),it=je*(ye.max/100),dt=q.filter(et=>et.mean>=Ze&&et.mean<=it);if(dt.length<5)return{gain:0,prnu:0};Sr({nPoints:dt.length});const pt=de*de,ct=[],Ht=[];if(dt.forEach(et=>{const Dt=et.std*et.std-pt;if(et.mean>1&&Dt>0){const Er=et.mean,cn=Dt/et.mean;ct.push({x:Er,y:cn}),Ht.push(et.mean/Dt)}}),ct.length<5)return{gain:0,prnu:0};const Ve=[],Ut=ct.length,Je=X,be=Ut*(Ut-1)/2;if(be<=Je)for(let et=0;et<Ut;et++)for(let yt=et+1;yt<Ut;yt++){const Dt=ct[yt].x-ct[et].x;Math.abs(Dt)>1e-5&&Ve.push((ct[yt].y-ct[et].y)/Dt)}else{const et=Math.max(1,Math.floor(be/Je));for(let yt=0;yt<Ut;yt++)for(let Dt=yt+1;Dt<Ut;Dt+=et){const Er=ct[Dt].x-ct[yt].x;Math.abs(Er)>1e-5&&Ve.push((ct[Dt].y-ct[yt].y)/Er)}}const nt=Dm(Ve),Ke=ct.map(et=>et.y-nt*et.x),J=Dm(Ke);let xe=0,st=0;if(J>1e-6?xe=1/J:xe=Dm(Ht),nt>0&&(st=Math.sqrt(nt)*100),Ht.length>0){const et=xl(Ht);ln(et),lr(xe)}else ln([]);return{gain:xe,prnu:st}},[]),Pn=P.useCallback(q=>{let de=q.read??Tr.current.readNoise;const ye=q.gRange??vr.current,X=Qr.current;if((q.read!==void 0||q.gRange!==void 0)&&q.gain===void 0&&q.prnu===void 0&&ia.length>0&&de>=0)j(!0),setTimeout(()=>{const Ze=bl(ia,de,ye,X);let it=Tr.current.gain,dt=Tr.current.prnu;Ze.gain>0&&(it=Ze.gain,dt=Ze.prnu),lt({readNoise:de,gain:it,prnu:dt}),q.gRange!==void 0&&Gt(q.gRange),Jr(pt=>{var ct,Ht;return{...pt,read:de.toString(),gain:it>0?it.toFixed(3):"0",prnu:dt.toFixed(2),rangeMin:(((ct=q.gRange)==null?void 0:ct.min)??pt.rangeMin).toString(),rangeMax:(((Ht=q.gRange)==null?void 0:Ht.max)??pt.rangeMax).toString()}}),j(!1)},50);else{let Ze=q.gain!==void 0?q.gain:Tr.current.gain,it=q.prnu!==void 0?q.prnu:Tr.current.prnu;lt({readNoise:de,gain:Ze,prnu:it}),q.gRange!==void 0&&Gt(q.gRange),Jr(dt=>{var pt,ct;return{...dt,read:de.toString(),gain:Ze>0?Ze.toFixed(3):"0",prnu:it.toFixed(2),rangeMin:(((pt=q.gRange)==null?void 0:pt.min)??dt.rangeMin).toString(),rangeMax:(((ct=q.gRange)==null?void 0:ct.max)??dt.rangeMax).toString()}})}},[ia,bl]),li=`${re}-${r.length}`;P.useEffect(()=>{if(!e||!r||r.length===0)return;const q=rn[cr];if(!q||q.length===0||en===li)return;N({R:cr==="R",G1:cr==="G1",G2:cr==="G2",B:cr==="B"});const de=[...q].sort((Ze,it)=>Ze.x-it.x);let ye=0;de.length>0&&(ye=de[0].std);const X=xr.filter(Ze=>Ze.channel===cr);let je=-1/0;for(const Ze of X)Ze.x>je&&(je=Ze.x);je!==-1/0&&ge(je),Pn({read:ye}),In(li)},[e,r,en,li,rn,cr,Pn,xr]);const va=(q,de)=>{Jr(ye=>({...ye,[q]:de}))},ci=q=>{let de=parseFloat(Ft[q]);isNaN(de)||de<0||Pn({[q]:de})},Zi=()=>{Q(K),In("")},Vr=()=>{const q=parseFloat(Ft.rangeMin),de=parseFloat(Ft.rangeMax);!isNaN(q)&&!isNaN(de)&&q<de&&q>=0&&de<=100&&Pn({gRange:{min:q,max:de}})},qn=(q,de)=>{q.key==="Enter"&&(de==="rangeMin"||de==="rangeMax"?Vr():ci(de),q.target.blur())};P.useEffect(()=>{e&&ia.length>0&&Pn({})},[e,Wt,ia]);const Nn=q=>{N(de=>({...de,[q]:!de[q]}))},Aa=()=>{v(q=>q==="top3"?"default":"top3")},ui=()=>{w==="raw"?v("default"):k(!0)},fi=()=>{k(!1),v("raw")},Mi=(q,de)=>{const ye=parseFloat(q),X=parseFloat(de);let je=isNaN(ye)?"auto":ye,Ze=isNaN(X)?"auto":X;return p&&typeof je=="number"&&je<=0&&(je="auto"),[je,Ze]},di=q=>{if(!q||!q.payload)return;const de=q.payload;if(x(de),bt.current&&(ge(de.x),Ne(!1)),yr.current){const ye=vr.current.min,X=vr.current.max,{max:je}=A();if(je<=0)return;const Ze=Math.max(0,Math.min(100,de.x/je*100));if(_t.current===1){const it=Math.min(Ze,X-.5);Pn({gRange:{min:it,max:X}}),ve(2)}else if(_t.current===2){const it=Math.max(Ze,ye+.5);Pn({gRange:{min:ye,max:it}}),ve(0),H(!1)}}},xa=P.useCallback(q=>{const{cx:de,cy:ye,fill:X}=q;return c.jsx("circle",{cx:de,cy:ye,r:3,fill:X,stroke:"none",style:{cursor:"pointer"}})},[]),ys=({active:q,payload:de})=>{if(q&&de&&de.length){const ye=de[0].payload;return c.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[c.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:ye.channel}),c.jsxs("div",{children:["Signal: ",ye.x.toFixed(2)]}),c.jsxs("div",{children:[f,": ",ye.y.toFixed(4)]}),ye.row!==void 0&&ye.col!==void 0&&!isNaN(ye.row)&&!isNaN(ye.col)&&c.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",ye.row,", Col ",ye.col]}),ye.filename&&c.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:ye.filename,children:ye.filename})]})}return null},oa=q=>{d(q),q==="Linear"&&m(!1)};if(!e)return null;const hi=s==="dark"?"#ffffff":"#000000";let Ln=f;f==="Linear"&&(Ln="(Var - RN) / Mean");const vs=K!==re;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:q=>{q.stopPropagation()},children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:q=>q.stopPropagation(),children:[c.jsx(ts,{isOpen:y,onClose:()=>k(!1),onConfirm:fi,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),b&&c.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),c.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),c.jsx("span",{className:"font-bold",children:b.channel}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),c.jsx("span",{children:b.x.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),c.jsx("span",{children:b.std.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),c.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(b.x/b.std).toFixed(2)})]})})]}),Be&&c.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[c.jsx("button",{onClick:()=>jr(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"mb-4 text-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:Gr==null?void 0:Gr.toFixed(4)}),c.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",Ur.length>0?"Density Curve Generated":"No Data"]})]}),c.jsx("div",{className:"flex-1 min-h-0",children:Ur.length>0?c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(mN,{data:Ur,margin:{top:10,right:30,left:0,bottom:20},children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),c.jsx(Na,{dataKey:"x",tickFormatter:q=>q.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),c.jsx(Oa,{tick:{fill:"#9ca3af",fontSize:10}}),c.jsx(En,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),c.jsx(ei,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),Gr!==null&&c.jsx(Vo,{x:Gr,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",c.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("button",{onClick:tn,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),c.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>oa("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),c.jsx("button",{onClick:()=>oa("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),c.jsx("button",{onClick:()=>oa("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:p,onChange:q=>m(q.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[c.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),c.jsx("input",{type:"number",placeholder:"Min",value:M,onChange:q=>E(q.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:R,onChange:q=>T(q.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),c.jsx("input",{type:"number",placeholder:"Min",value:D,onChange:q=>B(q.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:G,onChange:q=>z(q.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsx("button",{onClick:()=>{E(""),T(""),B(""),z("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>Nn("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${S.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),c.jsx("button",{onClick:()=>Nn("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${S.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),c.jsx("button",{onClick:()=>Nn("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${S.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),c.jsx("button",{onClick:()=>Nn("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${S.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),c.jsx("input",{type:"text",value:K,onChange:q=>ae(q.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),c.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),c.jsx("button",{onClick:()=>{H(!ne),ve(ne?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${ne?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:ne?ue===1?"Pick Min":"Pick Max":"Select"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx("input",{type:"number",step:"0.1",value:Ft.rangeMin,onChange:q=>va("rangeMin",q.target.value),onBlur:Vr,onKeyDown:q=>qn(q,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.1",value:Ft.rangeMax,onChange:q=>va("rangeMax",q.target.value),onBlur:Vr,onKeyDown:q=>qn(q,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),c.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),c.jsx("input",{type:"number",value:L,onChange:q=>W(q.target.value),onKeyDown:ya,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),c.jsx("input",{type:"number",value:F,onChange:q=>I(q.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[c.jsx("button",{onClick:()=>{Ne(!le),ie&&ge(null)},disabled:ne,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${le?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:le?"Pick Point":"Select Linear Limit"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Aa,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),c.jsx("button",{onClick:ui,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:Ae,onChange:q=>Re(q.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:Xe,onChange:q=>kt(q.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:xt,onChange:q=>Yt(q.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",value:Te,onChange:q=>pe(q.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("input",{type:"number",value:Me,onChange:q=>Se(q.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("button",{onClick:me,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),ee.length>0&&c.jsx("button",{onClick:()=>Oe([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[ee.length," pts"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:mt.shot,onChange:q=>zr({...mt,shot:q.target.checked}),className:"rounded text-gray-500"})," ",c.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:mt.read,onChange:q=>zr({...mt,read:q.target.checked}),className:"rounded text-rose-500"})," ",c.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:mt.prnu,onChange:q=>zr({...mt,prnu:q.target.checked}),className:"rounded text-amber-500"})," ",c.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:mt.total,onChange:q=>zr({...mt,total:q.target.checked}),className:"rounded text-white"})," ",c.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),c.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",cr,")",C&&c.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:Zi,disabled:C,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${C?"bg-gray-400 cursor-wait":vs?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:C?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),c.jsxs("select",{value:Wt,onChange:q=>Vt(Number(q.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[c.jsx("option",{value:1e5,children:"100k Pairs"}),c.jsx("option",{value:5e5,children:"500k Pairs"}),c.jsx("option",{value:2e6,children:"2M Pairs"}),c.jsx("option",{value:5e6,children:"5M Pairs"}),c.jsx("option",{value:1e7,children:"10M Pairs"})]}),ar&&c.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",ar.nPoints]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),c.jsx("input",{type:"text",inputMode:"decimal",value:Ft.read,onChange:q=>va("read",q.target.value),onBlur:()=>ci("read"),onKeyDown:q=>qn(q,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center relative group",children:[c.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",c.jsx("button",{onClick:()=>jr(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),c.jsx("input",{type:"text",inputMode:"decimal",value:Ft.gain,onChange:q=>va("gain",q.target.value),onBlur:()=>ci("gain"),onKeyDown:q=>qn(q,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),c.jsx("input",{type:"text",inputMode:"decimal",value:Ft.prnu,onChange:q=>va("prnu",q.target.value),onBlur:()=>ci("prnu"),onKeyDown:q=>qn(q,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[c.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(we==null?void 0:we.manualTarget)||F}`,children:["M.DR @ SNR=",(we==null?void 0:we.manualTarget)||F]}),c.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:we!=null&&we.manualDR?`${we.manualDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((we==null?void 0:we.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${L||"H"})`,children:[c.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),c.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:we!=null&&we.ptpDR?`${we.ptpDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((we==null?void 0:we.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${L||"H"} on ${we==null?void 0:we.dominantChannel} Channel)`,children:[c.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",we==null?void 0:we.dominantChannel,")"]}),c.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:we!=null&&we.d55DR?`${we.d55DR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),c.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:Lt!==null?`${Math.round(Lt)}`:"",children:Lt!==null?Lt>1e4?`${(Lt/1e3).toFixed(1)}k`:`${Math.round(Lt)}`:"--"})]})]}),ie===null&&c.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),c.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${le||ne?"cursor-crosshair":""}`,children:[c.jsx("div",{className:"row-start-1 col-start-1 h-full",children:c.jsx(r4,{vertical:!0,min:St,max:At,value:[D?parseFloat(D):St,G?parseFloat(G):At],onChange:([q,de])=>{B(q.toString()),z(de.toString())},logScale:p})}),c.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[_r.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(jre,{margin:{top:20,right:20,bottom:0,left:0},onClick:di,children:[c.jsx("defs",{children:c.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[c.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),c.jsx(Na,{type:"number",dataKey:"x",name:"Signal",scale:p?"log":"linear",domain:Mi(M,R),allowDataOverflow:!0,hide:!0}),c.jsx(Oa,{type:"number",dataKey:"y",name:f,scale:p?"log":"linear",domain:Mi(D,G),label:{value:Ln,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),c.jsx(En,{content:c.jsx(ys,{}),cursor:{strokeDasharray:"3 3"}}),ie&&c.jsx(Vo,{x:ie,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(mt.fitRange||ne)&&c.jsxs(c.Fragment,{children:[c.jsx(Vo,{x:qt,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${ir.min}%`,fill:"#22d3ee",fontSize:9}}),c.jsx(Vo,{x:er,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${ir.max}%`,fill:"#22d3ee",fontSize:9}})]}),S.R&&c.jsx(fa,{name:"Red",data:rn.R,fill:"#ef4444",shape:xa,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),S.G1&&c.jsx(fa,{name:"Green 1",data:rn.G1,fill:"#22c55e",shape:xa,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),S.G2&&c.jsx(fa,{name:"Green 2",data:rn.G2,fill:"#4ade80",shape:xa,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),S.B&&c.jsx(fa,{name:"Blue",data:rn.B,fill:"#3b82f6",shape:xa,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),mt.shot&&qe.shot.length>0&&c.jsx(fa,{name:"Shot Noise (Ideal)",data:qe.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),mt.read&&qe.read.length>0&&c.jsx(fa,{name:"Read Noise Floor",data:qe.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),mt.prnu&&qe.prnu.length>0&&c.jsx(fa,{name:"PRNU (Non-uniformity)",data:qe.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),mt.total&&qe.total.length>0&&c.jsx(fa,{name:"Total Noise Model",data:qe.total,line:{stroke:hi,strokeWidth:2},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),Ct.length>0&&c.jsx(fa,{name:`Target SNR=${F}`,data:Ct,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),Wr.length>0&&c.jsx(fa,{name:`PTP Target SNR=${we!=null&&we.ptpTarget?we.ptpTarget.toFixed(1):"?"}`,data:Wr,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),ee.length>0&&c.jsx(fa,{name:"Manual Markers",data:ee,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),c.jsx("div",{className:"row-start-2 col-start-2 w-full",children:c.jsx(r4,{min:ot,max:gt,value:[M?parseFloat(M):ot,R?parseFloat(R):gt],onChange:([q,de])=>{E(q.toString()),T(de.toString())},logScale:p})})]})]})})},Lre=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>c.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"relative md:col-span-3",children:[c.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>c.jsx("option",{value:s,children:s},s))}),c.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[c.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>c.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),Bre=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return c.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[c.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),c.jsx("div",{className:"mt-2 space-y-1 text-sm",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),c.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),c.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),c.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},Fre=({data:e,theme:t="dark"})=>{const r=P.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=P.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(b=>[...b.R_range,...b.G1_range,...b.G2_range,...b.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),l=Math.max(...o);const u=.25,f=l-s;if(f<u){const b=u-f;s-=b/2,l+=b/2}const d=(l-s)*.1,p=s-d,m=l+d;return[p,m]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:c.jsx("p",{children:"No data available for this mode."})}):c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(mN,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:a}),c.jsx(Na,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),c.jsx(Oa,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),c.jsx(En,{content:c.jsx(Bre,{theme:t})}),c.jsx(zi,{wrapperStyle:{fontSize:"14px",color:i}}),c.jsx(ei,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),c.jsx(mn,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),c.jsx(ei,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),c.jsx(mn,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),c.jsx(ei,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),c.jsx(mn,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),c.jsx(ei,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),c.jsx(mn,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},zre=Y.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=P.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=P.useState(n[0]||""),{chartData:o,tableData:s}=P.useMemo(()=>{const d=e.shootingModes.find(b=>b.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const p=d.data.map(b=>({iso:b.iso,R_range:b.r.range,R_avg:b.r.avg,G1_range:b.g1.range,G1_avg:b.g1.avg,B_range:b.b.range,B_avg:b.b.avg,G2_range:b.g2.range,G2_avg:b.g2.avg})),m=d.data.map(b=>({iso:b.iso,levels:[b.r.avg,b.g1.avg,b.g2.avg,b.b.avg],clipping:b.clipping}));return{chartData:p,tableData:m}},[e.shootingModes,a]),l=`Raw Data (${a})`,u=P.useRef(null),f=P.useRef(null);return P.useEffect(()=>{const d=u.current,p=f.current;if(!d||!p)return;const m=new ResizeObserver(b=>{for(let x of b){const{width:w}=x.contentRect,y=Math.max(8,w/35);p.style.fontSize=`${y}px`}});return m.observe(d),()=>m.disconnect()},[]),c.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),c.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),c.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>c.jsx("option",{value:d,children:d},d))})]}),c.jsxs("div",{ref:u,className:"h-64 relative",children:[c.jsx(Fre,{data:o,theme:t},a),c.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:c.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:l})}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),c.jsx("tbody",{children:s.map(({iso:d,levels:p,clipping:m})=>c.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[c.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,m&&c.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),c.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:p[0].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:p[1].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:p[3].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:p[2].toFixed(2)})]},d))})]})]})]})}),Ie=(e,t,r)=>({avg:e,range:[t,r]}),Rm=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:Ie(512.1,511.95,512.25),g1:Ie(512.05,511.9,512.2),b:Ie(512.12,511.98,512.28),g2:Ie(512.06,511.92,512.22)},{iso:200,r:Ie(512.15,512,512.3),g1:Ie(512.1,511.95,512.25),b:Ie(512.18,512.05,512.35),g2:Ie(512.12,511.98,512.28)},{iso:400,r:Ie(512.25,512.1,512.45),g1:Ie(512.2,512.05,512.4),b:Ie(512.3,512.15,512.5),g2:Ie(512.22,512.08,512.42)},{iso:800,r:Ie(512.5,512.2,512.8),g1:Ie(512.45,512.15,512.75),b:Ie(512.55,512.25,512.85),g2:Ie(512.48,512.18,512.78)},{iso:1600,r:Ie(513.1,512.8,513.4),g1:Ie(513.05,512.75,513.35),b:Ie(513.15,512.85,513.45),g2:Ie(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:Ie(512.02,511.98,512.05),g1:Ie(512.01,511.97,512.04),b:Ie(512.03,511.99,512.06),g2:Ie(512.01,511.97,512.04)},{iso:640,r:Ie(512.15,512.05,512.25),g1:Ie(512.12,512.02,512.22),b:Ie(512.18,512.08,512.28),g2:Ie(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Ie(512,511.8,512.2),g1:Ie(512,511.8,512.2),b:Ie(512,511.8,512.2),g2:Ie(512,511.8,512.2)},{iso:400,r:Ie(512,511.7,512.3),g1:Ie(512,511.7,512.3),b:Ie(512,511.7,512.3),g2:Ie(512,511.7,512.3)},{iso:1600,r:Ie(512.2,511.5,512.8),g1:Ie(512.2,511.5,512.8),b:Ie(512.2,511.5,512.8),g2:Ie(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Ie(511.95,511.8,512.1),g1:Ie(511.95,511.8,512.1),b:Ie(511.95,511.8,512.1),g2:Ie(511.95,511.8,512.1)},{iso:800,r:Ie(512.1,511.9,512.3),g1:Ie(512.1,511.9,512.3),b:Ie(512.1,511.9,512.3),g2:Ie(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:Ie(400,399.9,400.1),g1:Ie(400,399.9,400.1),b:Ie(400,399.9,400.1),g2:Ie(400,399.9,400.1)},{iso:100,r:Ie(400,399.9,400.1),g1:Ie(400,399.9,400.1),b:Ie(400,399.9,400.1),g2:Ie(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:Ie(400.1,399.8,400.3),g1:Ie(400.1,399.8,400.3),b:Ie(400.1,399.8,400.3),g2:Ie(400.1,399.8,400.3)},{iso:800,r:Ie(400.3,399.5,401.1),g1:Ie(400.3,399.5,401.1),b:Ie(400.3,399.5,401.1),g2:Ie(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:Ie(1024,1023.8,1024.2),g1:Ie(1024,1023.8,1024.2),b:Ie(1024,1023.8,1024.2),g2:Ie(1024,1023.8,1024.2)},{iso:800,r:Ie(1024.2,1023.5,1025),g1:Ie(1024.2,1023.5,1025),b:Ie(1024.2,1023.5,1025),g2:Ie(1024.2,1023.5,1025)}]}]}],Ure=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=P.useState(""),[i,o]=P.useState("All"),s=P.useMemo(()=>["All",...Array.from(new Set(Rm.map(d=>d.manufacturer))).sort()],[]),l=P.useMemo(()=>Rm.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),p=i==="All"||f.manufacturer===i;return d&&p}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",c.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Rm.length," Models"]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:c.jsx(Lre,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:l,onCameraSelect:u})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[l.map(f=>c.jsx("div",{id:`camera-${f.id}`,children:c.jsx(zre,{camera:f,theme:r})},f.id)),l.length===0&&c.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:c.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Gre=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=P.useState(""),[i,o]=P.useState(""),[s,l]=P.useState(""),[u,f]=P.useState(""),[d,p]=P.useState(null),m=()=>{const b=parseFloat(n),x=parseFloat(i),w=parseFloat(s),v=parseFloat(u);if(isNaN(b)||isNaN(x)||isNaN(w)||isNaN(v)){p(null);return}const y=b,k=x,C=w*w,j=v*v,S=(y+k)/2;if(S<=1e-9){p(0);return}const N=C*j/S,M=Math.sqrt(N);p(M)};return e?c.jsxs(vl,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:n,onChange:b=>a(b.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:i,onChange:b=>o(b.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:s,onChange:b=>l(b.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:u,onChange:b=>f(b.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsx("button",{onClick:m,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&c.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[c.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),c.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},px=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],Wre=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function Vre(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),p=Math.hypot(n.x-r.x,n.y-r.y),m=Math.hypot(r.x-e.x,r.y-e.y),b=Math.hypot(n.x-t.x,n.y-t.y),x=(d+p)/2/5,w=(m+b)/2/3,v=x*f,y=w*f;for(let k=0;k<4;k++)for(let C=0;C<6;C++){const j=C/5,S=k/3,N=(1-j)*(1-S)*e.x+j*(1-S)*t.x+(1-j)*S*r.x+j*S*n.x,M=(1-j)*(1-S)*e.y+j*(1-S)*t.y+(1-j)*S*r.y+j*S*n.y;u.push({x:N-v/2,y:M-y/2,w:v,h:y})}return u}function yN(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function g0(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let l=0;l<i;l++)for(let u=0;u<n;u++)o[s][l]+=e[s][u]*t[u][l];return o}function Hre(e,t){const r=yN(e),n=g0(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=df(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=g0(r,t);return g0(o,s)}function Xre(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const l=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=l*r[n][u]}}return r.map(n=>n.slice(t))}function Kre(e,t,r){const n=[...e].sort((x,w)=>x.id-w.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(x=>{const w=x.rawMeans,v=[w[0]-t[0],w[1]-t[1],w[2]-t[2],w[3]-t[3]];let y,k,C;r?(C=v[0],k=(v[1]+v[2])/2,y=v[3]):(y=v[0],k=(v[1]+v[2])/2,C=v[3]),y=Math.max(0,y),k=Math.max(0,k),C=Math.max(0,C),a.push([y,k,C])});const o=a[18],s=(o[0]+o[1]+o[2])/3,l=1/Math.max(1e-9,s),u=a.map(x=>[x[0]*l,x[1]*l,x[2]*l]),d=Hre(u,px),p=yN(d);let m;try{m=Xre(p)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:g0(m,Wre)}}const Yre=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,l]=P.useState(n),[u,f]=P.useState(["0","0","0","0"]),[d,p]=P.useState(null),[m,b]=P.useState(null);if(P.useEffect(()=>{if(e&&r&&r.length===24){const S=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([S[0].toFixed(2),S[1].toFixed(2),S[2].toFixed(2),S[3].toFixed(2)])}},[e,r]),P.useEffect(()=>{if(!e||!r||r.length!==24)return;const j=u.map(S=>parseFloat(S));if(!j.some(isNaN))try{const S=Kre(r,j,s);p(S),b(null)}catch(S){b(S.message)}},[e,r,s,u]),!e)return null;const x=(j,S)=>{f(N=>{const M=[...N];return M[j]=S,M})},w=j=>{navigator.clipboard.writeText(j)},v=j=>j?j.map(S=>S.map(N=>N.toFixed(4))):[],y=d?v(d.matrix).flat().join(" "):"",k=s?["B","G1","G2","R"]:["R","G1","G2","B"],C=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return c.jsxs(vl,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),c.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:j=>o(parseFloat(j.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>l(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),c.jsx("button",{onClick:()=>l(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(j=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:`text-[10px] font-bold mb-1 ${C[j]}`,children:k[j]}),c.jsx("input",{type:"number",step:"0.01",value:u[j],onChange:S=>x(j,S.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},j))})]}),m?c.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:m}):d?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),c.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:v(d.matrix).map((j,S)=>c.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[c.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:j[0]}),c.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:j[1]}),c.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:j[2]})]},S))}),c.jsx("button",{onClick:()=>w(y),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):c.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function vN(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let l=0;l<r;l++)n+=e[l],a+=t[l],i+=e[l]*t[l],o+=e[l]*e[l];const s=r*o-n*n;return s===0?{slope:0,intercept:0}:{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function qre(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function Zre(e,t,r="RGGB"){const n=r.toUpperCase(),a=t%2,i=e%2;return n==="RGGB"||n==="BGGR"?(a+i)%2!==0:n==="GBRG"||n==="GRBG"?(a+i)%2===0:(a+i)%2!==0}function gx(e,t,r,n,a){const i=Math.floor(n.x),o=Math.floor(n.y),s=Math.floor(n.w),l=Math.floor(n.h);if(s<8||l<8)return null;let u=[];for(let H=0;H<l;H++){const ue=[],ve=(o+H)*t;for(let ee=0;ee<s;ee++)ue.push(e[ve+i+ee]);u.push(ue)}let f=0,d=0;for(let H=1;H<l-1;H+=2)for(let ue=1;ue<s-1;ue+=2)f+=Math.abs(u[H][ue+1]-u[H][ue-1]),d+=Math.abs(u[H+1][ue]-u[H-1][ue]);let p=s,m=l,b=u,x=2,w=!1;if(d>f){x=1,w=!0,b=Array(s).fill(0).map(()=>Array(l).fill(0));for(let H=0;H<l;H++)for(let ue=0;ue<s;ue++)b[ue][l-1-H]=u[H][ue];p=l,m=s}else x=2;const v=[],y=[];for(let H=0;H<m;H++){const ue=b[H],ve=ue.map((Te,pe)=>pe===0?0:Math.abs(Te-ue[pe-1])),ee=Math.max(...ve),Oe=ve.indexOf(ee);if(ee>1){const Te=Math.max(0,Oe-3),pe=Math.min(p,Oe+4);let Me=0,Se=0;for(let me=Te;me<pe;me++)Me+=ve[me],Se+=me*ve[me];Me>0&&(v.push(Se/Me),y.push(H))}}if(v.length<m*.4)return null;const{slope:k,intercept:C}=vN(y,v),j=Math.cos(Math.atan(k)),S=[],N=[],M=(a==null?void 0:a.greenOnly)??!1,E=(a==null?void 0:a.globalX)??0,R=(a==null?void 0:a.globalY)??0,T=(a==null?void 0:a.bayerPattern)||"RGGB";for(let H=0;H<m;H++){const ue=k*H+C;for(let ve=0;ve<p;ve++){if(M){let ee,Oe;if(w){const Te=l-1-ve,pe=H;ee=E+i+pe,Oe=R+o+Te}else ee=E+i+ve,Oe=R+o+H;if(!Zre(ee,Oe,T))continue}S.push((ve-ue)*j),N.push(b[H][ve])}}const B=Math.min(s,l)/2;let G=0;for(const H of S)Math.abs(H)<=B&&G++;let z=.125;if(G>0){const H=40*B/G;z=Math.max(.01,Math.min(.125,H))}const F=z,I=Array.from(S.keys()).sort((H,ue)=>S[H]-S[ue]),L=I.map(H=>S[H]),W=I.map(H=>N[H]);if(L.length===0)return null;const K=L[0],ae=L[L.length-1],re=Math.floor((ae-K)/F),Q=new Array(re).fill(0),le=new Array(re).fill(0);for(let H=0;H<L.length;H++){const ue=Math.floor((L[H]-K)/F);ue>=0&&ue<re&&(Q[ue]+=W[H],le[ue]++)}let Ne=W[0];for(let H=0;H<re;H++)le[H]>0?(Q[H]/=le[H],Ne=Q[H]):Q[H]=Ne;const ie=Q.slice(0,10).reduce((H,ue)=>H+ue,0)/10,ge=Q.slice(-10).reduce((H,ue)=>H+ue,0)/10;if(ie>ge){const H=Math.max(...Q),ue=Math.min(...Q);for(let ve=0;ve<Q.length;ve++)Q[ve]=H-Q[ve]+ue}const ne=qre(Q,F);return{esf:Q,lsfFull:ne,binSize:F,orientation:x}}function xN(e,t,r,n=!1){if(e.length===0)return null;const a=4096,i=new Qs(a),o=r?1e3/r:1,s=new Float32Array(501);for(let x=0;x<=500;x++)s[x]=x/500*o;const l=new Float32Array(501).fill(0);let u=0,f=[],d=[],p=0;for(const x of e){let w=[...x.lsfFull];const v=x.binSize;let y=0,k=-1/0;for(let L=0;L<w.length;L++)w[L]>k&&(k=w[L],y=L);const C=k*.2;let j=0,S=w.length-1;for(let L=y;L>=0;L--)if(w[L]<C){j=L;break}for(let L=y;L<w.length;L++)if(w[L]<C){S=L;break}const N=S-j;let M=!1;if(n&&N>0){const L=N*4,W=[],K=[];for(let ae=0;ae<Math.max(0,y-L);ae++)W.push(ae),K.push(w[ae]);for(let ae=Math.min(w.length,y+L);ae<w.length;ae++)W.push(ae),K.push(w[ae]);if(W.length>5){const{slope:ae,intercept:re}=vN(W,K);for(let Q=0;Q<w.length;Q++)w[Q]=w[Q]-(ae*Q+re);k=-1/0;for(let Q=0;Q<w.length;Q++)w[Q]>k&&(k=w[Q],y=Q);M=!0}}let E=0,R=0;if(t>0)R=t,E=Math.round(t/v);else{const L=k*.2;let W=0,K=w.length-1;for(let le=y;le>=0;le--)if(w[le]<L){W=le;break}for(let le=y;le<w.length;le++)if(w[le]<L){K=le;break}let Q=(K-W)*v*8;Q=Math.max(2,Q),R=Q,E=Math.round(Q/v)}p+=R;const T=Math.max(0,y-E),D=Math.min(w.length,y+E),B=w.slice(T,D);if(B.length<8)continue;if(f.length===0)if(f=B,M){const L=new Array(w.length).fill(0);let W=0;for(let K=0;K<w.length;K++)W+=w[K],L[K]=W;d=L}else d=x.esf;const G=new Float32Array(a).fill(0);for(let L=0;L<B.length;L++){const W=.54-.46*Math.cos(2*Math.PI*L/(B.length-1));G[L]=B[L]*W}i.transform(G);const z=[],F=[];for(let L=0;L<=a/2;L++){const W=Math.sqrt(i._real[L]**2+i._imag[L]**2);z.push(W),F.push(L/(a*v)*o)}const I=z[0];if(I>0){for(let L=0;L<=500;L++){const W=s[L];l[L]+=Qre(W,F,z)/I}u++}}if(u===0)return null;const m=Array.from(l).map(x=>x/u);let b=null;for(let x=0;x<m.length-1;x++)if(m[x]>=.5&&m[x+1]<.5){b=s[x]+(.5-m[x])*(s[x+1]-s[x])/(m[x+1]-m[x]);break}return{esf:d,lsf:[],lsfCropped:f,mtf:m,freqs:Array.from(s),mtf50:b,calcRadius:p/u}}function Qre(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const Jre=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o,isSfrLabOpen:s})=>{const[l,u]=P.useState([]),[f,d]=P.useState(""),[p,m]=P.useState(""),[b,x]=P.useState(12),[w,v]=P.useState(!0),[y,k]=P.useState(!1),[C,j]=P.useState(!1),[S,N]=P.useState(1),[M,E]=P.useState(null),[R,T]=P.useState({x:100,y:50}),[D,B]=P.useState({w:1e3,h:800}),[G,z]=P.useState(!1),[F,I]=P.useState(!1),L=P.useRef({x:0,y:0}),W=P.useRef({w:0,h:0}),[K,ae]=P.useState(!1),re=l.length>0?l[l.length-1].binSize:null,Q=re?(1/re).toFixed(1):"-",le=P.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),ie=(o==null?void 0:o.renderMode)==="advanced-zero-dep",ge=()=>{if(!(!r||!n)){if(!ie){alert("Scalar Unmixing is required. Please configure Background/Foreground/BlackLevel in the Sidebar and click 'RUN UNMIXING' first.");return}try{let me;if(o!=null&&o.advancedZeroDep){const Ae=x1(r,n,o);me=gx(Ae.data,Ae.width,Ae.height,{x:0,y:0,w:Ae.width,h:Ae.height},{greenOnly:C,globalX:n.x,globalY:n.y,bayerPattern:r.bayerPattern})}else me=gx(r.data,r.width,r.height,n,{greenOnly:C,globalX:n.x,globalY:n.y,bayerPattern:r.bayerPattern});me?u(Ae=>[...Ae,me]):alert("Could not detect valid edge.")}catch(me){console.error(me),alert("Error processing ROI")}}},ne=()=>{u([]),E(null),N(1)},H=()=>{if(!M)return;const me=parseFloat(f),Xe=`data:text/csv;charset=utf-8,Frequency (${!isNaN(me)&&me>0?"lp/mm":"cy/px"}),MTF
`+M.freqs.map((Yt,bt)=>`${Yt.toFixed(6)},${M.mtf[bt].toFixed(6)}`).join(`
`),kt=encodeURI(Xe),xt=document.createElement("a");xt.setAttribute("href",kt),xt.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(xt),xt.click(),document.body.removeChild(xt)},ue=()=>{if(!(M!=null&&M.mtf50)||!n)return;const me=n.x+n.w/2,Ae=n.y+n.h/2,Re=`{${me.toFixed(1)},${Ae.toFixed(1)},${M.mtf50.toFixed(4)}}`;navigator.clipboard.writeText(Re)};P.useEffect(()=>{if(l.length===0){E(null);return}const me=parseFloat(f),Ae=!isNaN(me)&&me>0?me:null,Xe=xN(l,w?-1:b,Ae,y);E(Xe)},[l,b,w,y,f]),P.useEffect(()=>{e&&ie&&l.length===0&&n&&r&&ge()},[e]);const ve=me=>{i&&i(),!(me.target.closest("button")||me.target.closest("input"))&&(z(!0),L.current={x:me.clientX-R.x,y:me.clientY-R.y})},ee=me=>{me.stopPropagation(),me.preventDefault(),I(!0),L.current={x:me.clientX,y:me.clientY},W.current={w:D.w,h:D.h}};P.useEffect(()=>{const me=Re=>{if(G)T({x:Re.clientX-L.current.x,y:Re.clientY-L.current.y});else if(F){const Xe=Re.clientX-L.current.x,kt=Re.clientY-L.current.y;B({w:Math.max(600,W.current.w+Xe),h:Math.max(500,W.current.h+kt)})}},Ae=()=>{z(!1),I(!1)};return(G||F)&&(window.addEventListener("mousemove",me),window.addEventListener("mouseup",Ae)),()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",Ae)}},[G,F]);const Oe=P.useMemo(()=>{if(!(M!=null&&M.mtf50)||!p)return null;const me=parseFloat(p);if(isNaN(me)||me<=0)return null;let Ae=M.mtf50;const Re=parseFloat(f);return!isNaN(Re)&&Re>0&&(Ae=M.mtf50*(Re/1e3)),Ae*2*me},[M,p,f]);if(!e)return null;const Te=M?M.lsfCropped.map((me,Ae)=>({x:Ae,y:me})):[],pe=M?M.esf.map((me,Ae)=>({x:Ae,y:me})):[],Me=M?M.mtf.map((me,Ae)=>({freq:M.freqs[Ae],mtf:me})).filter(me=>me.freq<=(parseFloat(f)?200:1)):[],Se=f?"lp/mm":"cy/px";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden",style:{left:R.x,top:R.y,width:D.w,height:K?"auto":D.h,zIndex:a??100},onMouseDownCapture:i,children:[c.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${G?"cursor-grabbing":"cursor-grab"}`,onMouseDown:ve,children:[c.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[l.length," ROI",l.length!==1?"s":""]})]}),c.jsx("button",{onClick:()=>ae(!K),className:"text-gray-400 hover:text-orange-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),!K&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),c.jsx("input",{type:"number",value:f,onChange:me=>d(me.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),c.jsx("input",{type:"number",value:p,onChange:me=>m(me.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",title:"Auto-calculated based on ROI size",children:[c.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),re?c.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[re.toFixed(3),"px",c.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",Q,"x)"]})]}):c.jsx("span",{className:"text-gray-400 italic",children:"..."})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[300px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",title:"Linearly subtract vignetting trend (4x width distance)",children:[c.jsx("input",{type:"checkbox",checked:y,onChange:me=>k(me.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:"Deshading"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",title:"Only use Green channel pixels for projection",children:[c.jsx("input",{type:"checkbox",checked:C,onChange:me=>j(me.target.checked),className:"w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:"G-Only"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:me=>{const Ae=me.target.checked;v(Ae),Ae||x(le)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's official NR"})]}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:w?"Calculated:":"Manual:"}),c.jsxs("span",{className:`font-mono font-bold ${w?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[w&&(M!=null&&M.calcRadius)?M.calcRadius.toFixed(2):b.toFixed(1)," px"]})]}),c.jsx("input",{type:"range",min:"2",max:le,step:"0.5",value:b,onChange:me=>{x(parseFloat(me.target.value)),v(!1)},disabled:w,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${w?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:ge,disabled:!ie,title:ie?"":"Scalar Unmixing must be active. Run Unmixing in Sidebar first.",className:`px-3 py-1.5 text-white font-bold rounded shadow-sm transition-transform active:scale-95 ${ie?"bg-orange-600 hover:bg-orange-500":"bg-gray-400 cursor-not-allowed"}`,children:ie?"Add Current ROI":"Unmixing Required"}),c.jsx("button",{onClick:ue,disabled:!M||!M.mtf50||!n,className:"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Copy Pos/MTF50"}),c.jsx("button",{onClick:H,disabled:!M,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),c.jsx("button",{onClick:ne,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[c.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(tc,{data:pe,children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Na,{dataKey:"x",hide:!0})," ",c.jsx(Oa,{hide:!0,domain:["auto","auto"]})," ",c.jsx(En,{contentStyle:{fontSize:"10px"}}),c.jsx(mn,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",S>1?`(x${S.toFixed(0)})`:""]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),c.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:S,onChange:me=>N(parseFloat(me.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(tc,{data:Te,children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Vo,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),c.jsx(Na,{dataKey:"x",hide:!0}),c.jsx(Oa,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[me=>me,me=>me/S],allowDataOverflow:!0,tickFormatter:me=>me.toFixed(3)}),c.jsx(En,{contentStyle:{fontSize:"10px"},formatter:me=>[me.toFixed(5),"Amplitude"]}),c.jsx(mn,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col min-h-[250px]",children:[c.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF / Spatial Frequency Response"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[(M==null?void 0:M.mtf50)&&c.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",c.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[M.mtf50.toFixed(2)," ",Se]})]}),Oe!==null&&c.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(Oe)," LW/PH"]})]})]}),c.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 400 60",className:"w-[40rem] h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),c.jsx(go,{width:"100%",height:"100%",children:c.jsxs(tc,{data:Me,margin:{top:10,right:30,left:10,bottom:20},children:[c.jsx(Vi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),c.jsx(Na,{dataKey:"freq",type:"number",tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${Se})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),c.jsx(Oa,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),c.jsx(En,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:me=>`Freq: ${Number(me).toFixed(3)}`,formatter:me=>[me.toFixed(4),"MTF"]}),c.jsx(zi,{verticalAlign:"top",height:20}),c.jsx(mn,{type:"monotone",dataKey:"mtf",name:"SFR",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1}),(M==null?void 0:M.mtf50)&&c.jsx(ld,{x:M.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:c.jsx(Hn,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]})]})]}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:ee})]})},ene=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations to prevent premature overflow and allow negative offsets
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,tne=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=P.useState(!0),[l,u]=P.useState(!1),f=P.useRef(null),[d,p]=P.useState(4),[m,b]=P.useState(0),[x,w]=P.useState(""),[v,y]=P.useState(""),[k,C]=P.useState("RGGB"),j=P.useMemo(()=>Object.keys(cc).sort(),[]);P.useEffect(()=>{e&&!f.current&&(async()=>{try{const M=await window.loadPyodide();await M.loadPackage("numpy"),await M.runPythonAsync(ene),f.current=M,s(!1)}catch(M){console.error("Pyodide Init Failed",M)}})()},[e]),P.useEffect(()=>{if(e&&r){const N=r.whiteLevel;N>1e4?p(2):N>3e3?p(4):N>6e4&&p(0);const M=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(M)?C(M):C("RGGB")}},[e,r]);const S=async()=>{if(!(!r||!f.current)){u(!0);try{const N=f.current,M=x.trim()?x.trim().split(/\s+/).map(Number):[0,0,0,0];if(M.length===1&&!isNaN(M[0])&&M.push(M[0],M[0],M[0]),M.length<4)for(;M.length<4;)M.push(0);const E=v.trim()?v.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(E.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const R=k;N.globals.set("js_raw_bytes",new Uint8Array(r.data.buffer,r.data.byteOffset,r.data.byteLength)),N.globals.set("js_width",r.width),N.globals.set("js_height",r.height),N.globals.set("js_cfa",R),N.globals.set("js_bl_list",M),N.globals.set("js_shift",d),N.globals.set("js_linear_shift",m),N.globals.set("js_cm_flat",E);const T=await N.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift,
                    js_linear_shift,
                    js_cm_flat.to_py()
                )
            `),D=T.toJs();T.destroy();const B=new Blob([D],{type:"image/x-adobe-dng"}),G=URL.createObjectURL(B),z=document.createElement("a");z.href=G;const F=n.substring(0,n.lastIndexOf("."))||"image";z.download=`${F}_16bit_manual.dng`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(G)}catch(N){console.error(N),alert("Export Failed: "+N.message)}finally{u(!1)}}};return e?c.jsxs(vl,{initialPosition:{x:window.innerWidth/2-250,y:150},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),c.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Bit Shift (<<)"}),c.jsx("input",{type:"number",value:d,onChange:N=>p(parseInt(N.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase",children:"Offset (+)"}),c.jsx("input",{type:"number",value:m,onChange:N=>b(parseInt(N.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),c.jsxs("select",{value:k,onChange:N=>C(N.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),c.jsx("div",{className:"mt-[-10px] grid grid-cols-3 gap-4",children:c.jsx("div",{className:"text-[9px] text-gray-400 dark:text-gray-500 col-span-2",children:"Shift: 4=12bit(x16), 2=14bit(x4). Added after shift."})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level (Manual Fill)"}),c.jsx("input",{type:"text",value:x,onChange:N=>w(N.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:N=>{const M=cc[N.target.value];M&&y(M),N.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),j.map(N=>c.jsx("option",{value:N,children:N},N))]})]}),c.jsx("textarea",{value:v,onChange:N=>y(N.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),c.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),c.jsx("button",{onClick:S,disabled:l,className:`w-full py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${l?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:l?"Processing Kernel...":"Convert & Download DNG"})]})})]}):null};async function bN(e={}){var Pb,Nb,Ob;var t,r=e,n=!!globalThis.window,a=!!globalThis.WorkerGlobalScope,i=((Nb=(Pb=globalThis.process)==null?void 0:Pb.versions)==null?void 0:Nb.node)&&((Ob=globalThis.process)==null?void 0:Ob.type)!="renderer";if(i){const{createRequire:h}=await bj(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);var o=h(import.meta.url)}var s="./this.program",l=(h,g)=>{throw g},u=import.meta.url,f="";function d(h){return r.locateFile?r.locateFile(h,f):f+h}var p,m;if(i){var b=o("fs");u.startsWith("file:")&&(f=o("path").dirname(o("url").fileURLToPath(u))+"/"),m=h=>{h=k(h)?new URL(h):h;var g=b.readFileSync(h);return g},p=async(h,g=!0)=>{h=k(h)?new URL(h):h;var _=b.readFileSync(h,g?void 0:"utf8");return _},process.argv.length>1&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),l=(h,g)=>{throw process.exitCode=h,g}}else if(n||a){try{f=new URL(".",u).href}catch{}a&&(m=h=>{var g=new XMLHttpRequest;return g.open("GET",h,!1),g.responseType="arraybuffer",g.send(null),new Uint8Array(g.response)}),p=async h=>{if(k(h))return new Promise((_,O)=>{var $=new XMLHttpRequest;$.open("GET",h,!0),$.responseType="arraybuffer",$.onload=()=>{if($.status==200||$.status==0&&$.response){_($.response);return}O($.status)},$.onerror=O,$.send(null)});var g=await fetch(h,{credentials:"same-origin"});if(g.ok)return g.arrayBuffer();throw new Error(g.status+" : "+g.url)}}var x=console.log.bind(console),w=console.error.bind(console),v,y=!1,k=h=>h.startsWith("file://"),C,j,S,N,M,E,R,T,D,B,G,z,F=!1;function I(){var h=Ji.buffer;S=new Int8Array(h),M=new Int16Array(h),N=new Uint8Array(h),E=new Uint16Array(h),R=new Int32Array(h),T=new Uint32Array(h),D=new Float32Array(h),B=new Float64Array(h),G=new BigInt64Array(h),z=new BigUint64Array(h)}function L(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)pe(r.preRun.shift());ve(Te)}function W(){F=!0,!r.noFSInit&&!A.initialized&&A.init(),ks.da(),A.ignorePermissions=!1}function K(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Oe(r.postRun.shift());ve(ee)}function ae(h){var _;(_=r.onAbort)==null||_.call(r,h),h="Aborted("+h+")",w(h),y=!0,h+=". Build with -sASSERTIONS for more info.";var g=new WebAssembly.RuntimeError(h);throw j==null||j(g),g}var re;function Q(){return r.locateFile?d("joraw.wasm"):new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href}function le(h){if(h==re&&v)return new Uint8Array(v);if(m)return m(h);throw"both async and sync fetching of the wasm failed"}async function Ne(h){if(!v)try{var g=await p(h);return new Uint8Array(g)}catch{}return le(h)}async function ie(h,g){try{var _=await Ne(h),O=await WebAssembly.instantiate(_,g);return O}catch($){w(`failed to asynchronously prepare wasm: ${$}`),ae($)}}async function ge(h,g,_){if(!h&&!k(g)&&!i)try{var O=fetch(g,{credentials:"same-origin"}),$=await WebAssembly.instantiateStreaming(O,_);return $}catch(U){w(`wasm streaming compile failed: ${U}`),w("falling back to ArrayBuffer instantiation")}return ie(g,_)}function ne(){var h={a:jN};return h}async function H(){function h(U,V){return ks=U.exports,ks=EN(ks),SN(ks),I(),ks}function g(U){return h(U.instance)}var _=ne();if(r.instantiateWasm)return new Promise((U,V)=>{r.instantiateWasm(_,(Z,ce)=>{U(h(Z))})});re??(re=Q());var O=await ge(v,re,_),$=g(O);return $}class ue{constructor(g){Pr(this,"name","ExitStatus");this.message=`Program terminated with exit(${g})`,this.status=g}}var ve=h=>{for(;h.length>0;)h.shift()(r)},ee=[],Oe=h=>ee.push(h),Te=[],pe=h=>Te.push(h),Me=!0,Se=h=>yd(h),me=()=>ws(),Ae=9007199254740992,Re=-9007199254740992,Xe=h=>h<Re||h>Ae?NaN:Number(h),kt=globalThis.TextDecoder&&new TextDecoder,xt=(h,g,_,O)=>{var $=g+_;if(O)return $;for(;h[g]&&!(g>=$);)++g;return g},Yt=(h,g=0,_,O)=>{g>>>=0;var $=xt(h,g,_,O);if($-g>16&&h.buffer&&kt)return kt.decode(h.subarray(g,$));for(var U="";g<$;){var V=h[g++];if(!(V&128)){U+=String.fromCharCode(V);continue}var Z=h[g++]&63;if((V&224)==192){U+=String.fromCharCode((V&31)<<6|Z);continue}var ce=h[g++]&63;if((V&240)==224?V=(V&15)<<12|Z<<6|ce:V=(V&7)<<18|Z<<12|ce<<6|h[g++]&63,V<65536)U+=String.fromCharCode(V);else{var _e=V-65536;U+=String.fromCharCode(55296|_e>>10,56320|_e&1023)}}return U},bt=(h,g,_)=>(h>>>=0,h?Yt(N,h,g,_):"");function yr(h,g,_,O){return h>>>=0,g>>>=0,O>>>=0,ae(`Assertion failed: ${bt(h)}, at: `+[g?bt(g):"unknown filename",_,O?bt(O):"unknown function"])}class _t{constructor(g){this.excPtr=g,this.ptr=g-24}set_type(g){T[this.ptr+4>>>2>>>0]=g}get_type(){return T[this.ptr+4>>>2>>>0]}set_destructor(g){T[this.ptr+8>>>2>>>0]=g}get_destructor(){return T[this.ptr+8>>>2>>>0]}set_caught(g){g=g?1:0,S[this.ptr+12>>>0]=g}get_caught(){return S[this.ptr+12>>>0]!=0}set_rethrown(g){g=g?1:0,S[this.ptr+13>>>0]=g}get_rethrown(){return S[this.ptr+13>>>0]!=0}init(g,_){this.set_adjusted_ptr(0),this.set_type(g),this.set_destructor(_)}set_adjusted_ptr(g){T[this.ptr+16>>>2>>>0]=g}get_adjusted_ptr(){return T[this.ptr+16>>>2>>>0]}}var ar=0;function Sr(h,g,_){h>>>=0,g>>>=0,_>>>=0;var O=new _t(h);throw O.init(g,_),ar=h,ar}var ir=()=>{var h=R[+Ee.varargs>>>2>>>0];return Ee.varargs+=4,h},Gt=ir,Qe={isAbs:h=>h.charAt(0)==="/",splitPath:h=>{var g=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return g.exec(h).slice(1)},normalizeArray:(h,g)=>{for(var _=0,O=h.length-1;O>=0;O--){var $=h[O];$==="."?h.splice(O,1):$===".."?(h.splice(O,1),_++):_&&(h.splice(O,1),_--)}if(g)for(;_;_--)h.unshift("..");return h},normalize:h=>{var g=Qe.isAbs(h),_=h.slice(-1)==="/";return h=Qe.normalizeArray(h.split("/").filter(O=>!!O),!g).join("/"),!h&&!g&&(h="."),h&&_&&(h+="/"),(g?"/":"")+h},dirname:h=>{var g=Qe.splitPath(h),_=g[0],O=g[1];return!_&&!O?".":(O&&(O=O.slice(0,-1)),_+O)},basename:h=>h&&h.match(/([^\/]+|\/)\/*$/)[1],join:(...h)=>Qe.normalize(h.join("/")),join2:(h,g)=>Qe.normalize(h+"/"+g)},lt=()=>{if(i){var h=o("crypto");return g=>h.randomFillSync(g)}return g=>crypto.getRandomValues(g)},Wt=h=>{(Wt=lt())(h)},Vt={resolve:(...h)=>{for(var g="",_=!1,O=h.length-1;O>=-1&&!_;O--){var $=O>=0?h[O]:A.cwd();if(typeof $!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!$)return"";g=$+"/"+g,_=Qe.isAbs($)}return g=Qe.normalizeArray(g.split("/").filter(U=>!!U),!_).join("/"),(_?"/":"")+g||"."},relative:(h,g)=>{h=Vt.resolve(h).slice(1),g=Vt.resolve(g).slice(1);function _(_e){for(var We=0;We<_e.length&&_e[We]==="";We++);for(var tt=_e.length-1;tt>=0&&_e[tt]==="";tt--);return We>tt?[]:_e.slice(We,tt-We+1)}for(var O=_(h.split("/")),$=_(g.split("/")),U=Math.min(O.length,$.length),V=U,Z=0;Z<U;Z++)if(O[Z]!==$[Z]){V=Z;break}for(var ce=[],Z=V;Z<O.length;Z++)ce.push("..");return ce=ce.concat($.slice(V)),ce.join("/")}},Tr=[],vr=h=>{for(var g=0,_=0;_<h.length;++_){var O=h.charCodeAt(_);O<=127?g++:O<=2047?g+=2:O>=55296&&O<=57343?(g+=4,++_):g+=3}return g},Qr=(h,g,_,O)=>{if(_>>>=0,!(O>0))return 0;for(var $=_,U=_+O-1,V=0;V<h.length;++V){var Z=h.codePointAt(V);if(Z<=127){if(_>=U)break;g[_++>>>0]=Z}else if(Z<=2047){if(_+1>=U)break;g[_++>>>0]=192|Z>>6,g[_++>>>0]=128|Z&63}else if(Z<=65535){if(_+2>=U)break;g[_++>>>0]=224|Z>>12,g[_++>>>0]=128|Z>>6&63,g[_++>>>0]=128|Z&63}else{if(_+3>=U)break;g[_++>>>0]=240|Z>>18,g[_++>>>0]=128|Z>>12&63,g[_++>>>0]=128|Z>>6&63,g[_++>>>0]=128|Z&63,V++}}return g[_>>>0]=0,_-$},Ft=(h,g,_)=>{var O=vr(h)+1,$=new Array(O),U=Qr(h,$,0,$.length);return $.length=U,$},Jr=()=>{var U;if(!Tr.length){var h=null;if(i){var g=256,_=Buffer.alloc(g),O=0,$=process.stdin.fd;try{O=b.readSync($,_,0,g)}catch(V){if(V.toString().includes("EOF"))O=0;else throw V}O>0&&(h=_.slice(0,O).toString("utf-8"))}else(U=globalThis.window)!=null&&U.prompt&&(h=window.prompt("Input: "),h!==null&&(h+=`
`));if(!h)return null;Tr=Ft(h)}return Tr.shift()},mt={ttys:[],init(){},shutdown(){},register(h,g){mt.ttys[h]={input:[],output:[],ops:g},A.registerDevice(h,mt.stream_ops)},stream_ops:{open(h){var g=mt.ttys[h.node.rdev];if(!g)throw new A.ErrnoError(43);h.tty=g,h.seekable=!1},close(h){h.tty.ops.fsync(h.tty)},fsync(h){h.tty.ops.fsync(h.tty)},read(h,g,_,O,$){if(!h.tty||!h.tty.ops.get_char)throw new A.ErrnoError(60);for(var U=0,V=0;V<O;V++){var Z;try{Z=h.tty.ops.get_char(h.tty)}catch{throw new A.ErrnoError(29)}if(Z===void 0&&U===0)throw new A.ErrnoError(6);if(Z==null)break;U++,g[_+V]=Z}return U&&(h.node.atime=Date.now()),U},write(h,g,_,O,$){if(!h.tty||!h.tty.ops.put_char)throw new A.ErrnoError(60);try{for(var U=0;U<O;U++)h.tty.ops.put_char(h.tty,g[_+U])}catch{throw new A.ErrnoError(29)}return O&&(h.node.mtime=h.node.ctime=Date.now()),U}},default_tty_ops:{get_char(h){return Jr()},put_char(h,g){g===null||g===10?(x(Yt(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;((g=h.output)==null?void 0:g.length)>0&&(x(Yt(h.output)),h.output=[])},ioctl_tcgets(h){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(h,g,_){return 0},ioctl_tiocgwinsz(h){return[24,80]}},default_tty1_ops:{put_char(h,g){g===null||g===10?(w(Yt(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;((g=h.output)==null?void 0:g.length)>0&&(w(Yt(h.output)),h.output=[])}}},zr=h=>{ae()},Be={ops_table:null,mount(h){return Be.createNode(null,"/",16895,0)},createNode(h,g,_,O){if(A.isBlkdev(_)||A.isFIFO(_))throw new A.ErrnoError(63);Be.ops_table||(Be.ops_table={dir:{node:{getattr:Be.node_ops.getattr,setattr:Be.node_ops.setattr,lookup:Be.node_ops.lookup,mknod:Be.node_ops.mknod,rename:Be.node_ops.rename,unlink:Be.node_ops.unlink,rmdir:Be.node_ops.rmdir,readdir:Be.node_ops.readdir,symlink:Be.node_ops.symlink},stream:{llseek:Be.stream_ops.llseek}},file:{node:{getattr:Be.node_ops.getattr,setattr:Be.node_ops.setattr},stream:{llseek:Be.stream_ops.llseek,read:Be.stream_ops.read,write:Be.stream_ops.write,mmap:Be.stream_ops.mmap,msync:Be.stream_ops.msync}},link:{node:{getattr:Be.node_ops.getattr,setattr:Be.node_ops.setattr,readlink:Be.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Be.node_ops.getattr,setattr:Be.node_ops.setattr},stream:A.chrdev_stream_ops}});var $=A.createNode(h,g,_,O);return A.isDir($.mode)?($.node_ops=Be.ops_table.dir.node,$.stream_ops=Be.ops_table.dir.stream,$.contents={}):A.isFile($.mode)?($.node_ops=Be.ops_table.file.node,$.stream_ops=Be.ops_table.file.stream,$.usedBytes=0,$.contents=null):A.isLink($.mode)?($.node_ops=Be.ops_table.link.node,$.stream_ops=Be.ops_table.link.stream):A.isChrdev($.mode)&&($.node_ops=Be.ops_table.chrdev.node,$.stream_ops=Be.ops_table.chrdev.stream),$.atime=$.mtime=$.ctime=Date.now(),h&&(h.contents[g]=$,h.atime=h.mtime=h.ctime=$.atime),$},getFileDataAsTypedArray(h){return h.contents?h.contents.subarray?h.contents.subarray(0,h.usedBytes):new Uint8Array(h.contents):new Uint8Array(0)},expandFileStorage(h,g){var _=h.contents?h.contents.length:0;if(!(_>=g)){var O=1024*1024;g=Math.max(g,_*(_<O?2:1.125)>>>0),_!=0&&(g=Math.max(g,256));var $=h.contents;h.contents=new Uint8Array(g),h.usedBytes>0&&h.contents.set($.subarray(0,h.usedBytes),0)}},resizeFileStorage(h,g){if(h.usedBytes!=g)if(g==0)h.contents=null,h.usedBytes=0;else{var _=h.contents;h.contents=new Uint8Array(g),_&&h.contents.set(_.subarray(0,Math.min(g,h.usedBytes))),h.usedBytes=g}},node_ops:{getattr(h){var g={};return g.dev=A.isChrdev(h.mode)?h.id:1,g.ino=h.id,g.mode=h.mode,g.nlink=1,g.uid=0,g.gid=0,g.rdev=h.rdev,A.isDir(h.mode)?g.size=4096:A.isFile(h.mode)?g.size=h.usedBytes:A.isLink(h.mode)?g.size=h.link.length:g.size=0,g.atime=new Date(h.atime),g.mtime=new Date(h.mtime),g.ctime=new Date(h.ctime),g.blksize=4096,g.blocks=Math.ceil(g.size/g.blksize),g},setattr(h,g){for(const _ of["mode","atime","mtime","ctime"])g[_]!=null&&(h[_]=g[_]);g.size!==void 0&&Be.resizeFileStorage(h,g.size)},lookup(h,g){throw Be.doesNotExistError||(Be.doesNotExistError=new A.ErrnoError(44),Be.doesNotExistError.stack="<generic error, no stack>"),Be.doesNotExistError},mknod(h,g,_,O){return Be.createNode(h,g,_,O)},rename(h,g,_){var O;try{O=A.lookupNode(g,_)}catch{}if(O){if(A.isDir(h.mode))for(var $ in O.contents)throw new A.ErrnoError(55);A.hashRemoveNode(O)}delete h.parent.contents[h.name],g.contents[_]=h,h.name=_,g.ctime=g.mtime=h.parent.ctime=h.parent.mtime=Date.now()},unlink(h,g){delete h.contents[g],h.ctime=h.mtime=Date.now()},rmdir(h,g){var _=A.lookupNode(h,g);for(var O in _.contents)throw new A.ErrnoError(55);delete h.contents[g],h.ctime=h.mtime=Date.now()},readdir(h){return[".","..",...Object.keys(h.contents)]},symlink(h,g,_){var O=Be.createNode(h,g,41471,0);return O.link=_,O},readlink(h){if(!A.isLink(h.mode))throw new A.ErrnoError(28);return h.link}},stream_ops:{read(h,g,_,O,$){var U=h.node.contents;if($>=h.node.usedBytes)return 0;var V=Math.min(h.node.usedBytes-$,O);if(V>8&&U.subarray)g.set(U.subarray($,$+V),_);else for(var Z=0;Z<V;Z++)g[_+Z]=U[$+Z];return V},write(h,g,_,O,$,U){if(g.buffer===S.buffer&&(U=!1),!O)return 0;var V=h.node;if(V.mtime=V.ctime=Date.now(),g.subarray&&(!V.contents||V.contents.subarray)){if(U)return V.contents=g.subarray(_,_+O),V.usedBytes=O,O;if(V.usedBytes===0&&$===0)return V.contents=g.slice(_,_+O),V.usedBytes=O,O;if($+O<=V.usedBytes)return V.contents.set(g.subarray(_,_+O),$),O}if(Be.expandFileStorage(V,$+O),V.contents.subarray&&g.subarray)V.contents.set(g.subarray(_,_+O),$);else for(var Z=0;Z<O;Z++)V.contents[$+Z]=g[_+Z];return V.usedBytes=Math.max(V.usedBytes,$+O),O},llseek(h,g,_){var O=g;if(_===1?O+=h.position:_===2&&A.isFile(h.node.mode)&&(O+=h.node.usedBytes),O<0)throw new A.ErrnoError(28);return O},mmap(h,g,_,O,$){if(!A.isFile(h.node.mode))throw new A.ErrnoError(43);var U,V,Z=h.node.contents;if(!($&2)&&Z&&Z.buffer===S.buffer)V=!1,U=Z.byteOffset;else{if(V=!0,U=zr(),!U)throw new A.ErrnoError(48);Z&&((_>0||_+g<Z.length)&&(Z.subarray?Z=Z.subarray(_,_+g):Z=Array.prototype.slice.call(Z,_,_+g)),S.set(Z,U>>>0))}return{ptr:U,allocated:V}},msync(h,g,_,O,$){return Be.stream_ops.write(h,g,0,O,_,!1),0}}},jr=h=>{var g={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},_=g[h];if(typeof _>"u")throw new Error(`Unknown file open mode: ${h}`);return _},Ur=(h,g)=>{var _=0;return h&&(_|=365),g&&(_|=146),_},ln=async h=>{var g=await p(h);return new Uint8Array(g)},Gr=(...h)=>A.createDataFile(...h),lr=0,en=null,In=h=>{var _;if(lr--,(_=r.monitorRunDependencies)==null||_.call(r,lr),lr==0&&en){var g=en;en=null,g()}},Cn=h=>{var g;lr++,(g=r.monitorRunDependencies)==null||g.call(r,lr)},ya=[],xr=async(h,g)=>{typeof Browser<"u"&&Browser.init();for(var _ of ya)if(_.canHandle(g))return _.handle(h,g);return h},_r=async(h,g,_,O,$,U,V,Z)=>{var ce=g?Vt.resolve(Qe.join2(h,g)):h;Cn();try{var _e=_;typeof _=="string"&&(_e=await ln(_)),_e=await xr(_e,ce),Z==null||Z(),U||Gr(h,g,_e,O,$,V)}finally{In()}},cr=(h,g,_,O,$,U,V,Z,ce,_e)=>{_r(h,g,_,O,$,Z,ce,_e).then(U).catch(V)},A={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{constructor(h){Pr(this,"name","ErrnoError");this.errno=h}},FSStream:class{constructor(){Pr(this,"shared",{})}get object(){return this.node}set object(h){this.node=h}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(h){this.shared.flags=h}get position(){return this.shared.position}set position(h){this.shared.position=h}},FSNode:class{constructor(h,g,_,O){Pr(this,"node_ops",{});Pr(this,"stream_ops",{});Pr(this,"readMode",365);Pr(this,"writeMode",146);Pr(this,"mounted",null);h||(h=this),this.parent=h,this.mount=h.mount,this.id=A.nextInode++,this.name=g,this.mode=_,this.rdev=O,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(h){h?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(h){h?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return A.isDir(this.mode)}get isDevice(){return A.isChrdev(this.mode)}},lookupPath(h,g={}){if(!h)throw new A.ErrnoError(44);g.follow_mount??(g.follow_mount=!0),Qe.isAbs(h)||(h=A.cwd()+"/"+h);e:for(var _=0;_<40;_++){for(var O=h.split("/").filter(_e=>!!_e),$=A.root,U="/",V=0;V<O.length;V++){var Z=V===O.length-1;if(Z&&g.parent)break;if(O[V]!=="."){if(O[V]===".."){if(U=Qe.dirname(U),A.isRoot($)){h=U+"/"+O.slice(V+1).join("/"),_--;continue e}else $=$.parent;continue}U=Qe.join2(U,O[V]);try{$=A.lookupNode($,O[V])}catch(_e){if((_e==null?void 0:_e.errno)===44&&Z&&g.noent_okay)return{path:U};throw _e}if(A.isMountpoint($)&&(!Z||g.follow_mount)&&($=$.mounted.root),A.isLink($.mode)&&(!Z||g.follow)){if(!$.node_ops.readlink)throw new A.ErrnoError(52);var ce=$.node_ops.readlink($);Qe.isAbs(ce)||(ce=Qe.dirname(U)+"/"+ce),h=ce+"/"+O.slice(V+1).join("/");continue e}}}return{path:U,node:$}}throw new A.ErrnoError(32)},getPath(h){for(var g;;){if(A.isRoot(h)){var _=h.mount.mountpoint;return g?_[_.length-1]!=="/"?`${_}/${g}`:_+g:_}g=g?`${h.name}/${g}`:h.name,h=h.parent}},hashName(h,g){for(var _=0,O=0;O<g.length;O++)_=(_<<5)-_+g.charCodeAt(O)|0;return(h+_>>>0)%A.nameTable.length},hashAddNode(h){var g=A.hashName(h.parent.id,h.name);h.name_next=A.nameTable[g],A.nameTable[g]=h},hashRemoveNode(h){var g=A.hashName(h.parent.id,h.name);if(A.nameTable[g]===h)A.nameTable[g]=h.name_next;else for(var _=A.nameTable[g];_;){if(_.name_next===h){_.name_next=h.name_next;break}_=_.name_next}},lookupNode(h,g){var _=A.mayLookup(h);if(_)throw new A.ErrnoError(_);for(var O=A.hashName(h.id,g),$=A.nameTable[O];$;$=$.name_next){var U=$.name;if($.parent.id===h.id&&U===g)return $}return A.lookup(h,g)},createNode(h,g,_,O){var $=new A.FSNode(h,g,_,O);return A.hashAddNode($),$},destroyNode(h){A.hashRemoveNode(h)},isRoot(h){return h===h.parent},isMountpoint(h){return!!h.mounted},isFile(h){return(h&61440)===32768},isDir(h){return(h&61440)===16384},isLink(h){return(h&61440)===40960},isChrdev(h){return(h&61440)===8192},isBlkdev(h){return(h&61440)===24576},isFIFO(h){return(h&61440)===4096},isSocket(h){return(h&49152)===49152},flagsToPermissionString(h){var g=["r","w","rw"][h&3];return h&512&&(g+="w"),g},nodePermissions(h,g){return A.ignorePermissions?0:g.includes("r")&&!(h.mode&292)||g.includes("w")&&!(h.mode&146)||g.includes("x")&&!(h.mode&73)?2:0},mayLookup(h){if(!A.isDir(h.mode))return 54;var g=A.nodePermissions(h,"x");return g||(h.node_ops.lookup?0:2)},mayCreate(h,g){if(!A.isDir(h.mode))return 54;try{var _=A.lookupNode(h,g);return 20}catch{}return A.nodePermissions(h,"wx")},mayDelete(h,g,_){var O;try{O=A.lookupNode(h,g)}catch(U){return U.errno}var $=A.nodePermissions(h,"wx");if($)return $;if(_){if(!A.isDir(O.mode))return 54;if(A.isRoot(O)||A.getPath(O)===A.cwd())return 10}else if(A.isDir(O.mode))return 31;return 0},mayOpen(h,g){return h?A.isLink(h.mode)?32:A.isDir(h.mode)&&(A.flagsToPermissionString(g)!=="r"||g&576)?31:A.nodePermissions(h,A.flagsToPermissionString(g)):44},checkOpExists(h,g){if(!h)throw new A.ErrnoError(g);return h},MAX_OPEN_FDS:4096,nextfd(){for(var h=0;h<=A.MAX_OPEN_FDS;h++)if(!A.streams[h])return h;throw new A.ErrnoError(33)},getStreamChecked(h){var g=A.getStream(h);if(!g)throw new A.ErrnoError(8);return g},getStream:h=>A.streams[h],createStream(h,g=-1){return h=Object.assign(new A.FSStream,h),g==-1&&(g=A.nextfd()),h.fd=g,A.streams[g]=h,h},closeStream(h){A.streams[h]=null},dupStream(h,g=-1){var O,$;var _=A.createStream(h,g);return($=(O=_.stream_ops)==null?void 0:O.dup)==null||$.call(O,_),_},doSetAttr(h,g,_){var O=h==null?void 0:h.stream_ops.setattr,$=O?h:g;O??(O=g.node_ops.setattr),A.checkOpExists(O,63),O($,_)},chrdev_stream_ops:{open(h){var _,O;var g=A.getDevice(h.node.rdev);h.stream_ops=g.stream_ops,(O=(_=h.stream_ops).open)==null||O.call(_,h)},llseek(){throw new A.ErrnoError(70)}},major:h=>h>>8,minor:h=>h&255,makedev:(h,g)=>h<<8|g,registerDevice(h,g){A.devices[h]={stream_ops:g}},getDevice:h=>A.devices[h],getMounts(h){for(var g=[],_=[h];_.length;){var O=_.pop();g.push(O),_.push(...O.mounts)}return g},syncfs(h,g){typeof h=="function"&&(g=h,h=!1),A.syncFSRequests++,A.syncFSRequests>1&&w(`warning: ${A.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var _=A.getMounts(A.root.mount),O=0;function $(Z){return A.syncFSRequests--,g(Z)}function U(Z){if(Z)return U.errored?void 0:(U.errored=!0,$(Z));++O>=_.length&&$(null)}for(var V of _)V.type.syncfs?V.type.syncfs(V,h,U):U(null)},mount(h,g,_){var O=_==="/",$=!_,U;if(O&&A.root)throw new A.ErrnoError(10);if(!O&&!$){var V=A.lookupPath(_,{follow_mount:!1});if(_=V.path,U=V.node,A.isMountpoint(U))throw new A.ErrnoError(10);if(!A.isDir(U.mode))throw new A.ErrnoError(54)}var Z={type:h,opts:g,mountpoint:_,mounts:[]},ce=h.mount(Z);return ce.mount=Z,Z.root=ce,O?A.root=ce:U&&(U.mounted=Z,U.mount&&U.mount.mounts.push(Z)),ce},unmount(h){var g=A.lookupPath(h,{follow_mount:!1});if(!A.isMountpoint(g.node))throw new A.ErrnoError(28);var _=g.node,O=_.mounted,$=A.getMounts(O);for(var[U,V]of Object.entries(A.nameTable))for(;V;){var Z=V.name_next;$.includes(V.mount)&&A.destroyNode(V),V=Z}_.mounted=null;var ce=_.mount.mounts.indexOf(O);_.mount.mounts.splice(ce,1)},lookup(h,g){return h.node_ops.lookup(h,g)},mknod(h,g,_){var O=A.lookupPath(h,{parent:!0}),$=O.node,U=Qe.basename(h);if(!U)throw new A.ErrnoError(28);if(U==="."||U==="..")throw new A.ErrnoError(20);var V=A.mayCreate($,U);if(V)throw new A.ErrnoError(V);if(!$.node_ops.mknod)throw new A.ErrnoError(63);return $.node_ops.mknod($,U,g,_)},statfs(h){return A.statfsNode(A.lookupPath(h,{follow:!0}).node)},statfsStream(h){return A.statfsNode(h.node)},statfsNode(h){var g={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:A.nextInode,ffree:A.nextInode-1,fsid:42,flags:2,namelen:255};return h.node_ops.statfs&&Object.assign(g,h.node_ops.statfs(h.mount.opts.root)),g},create(h,g=438){return g&=4095,g|=32768,A.mknod(h,g,0)},mkdir(h,g=511){return g&=1023,g|=16384,A.mknod(h,g,0)},mkdirTree(h,g){var _=h.split("/"),O="";for(var $ of _)if($){(O||Qe.isAbs(h))&&(O+="/"),O+=$;try{A.mkdir(O,g)}catch(U){if(U.errno!=20)throw U}}},mkdev(h,g,_){return typeof _>"u"&&(_=g,g=438),g|=8192,A.mknod(h,g,_)},symlink(h,g){if(!Vt.resolve(h))throw new A.ErrnoError(44);var _=A.lookupPath(g,{parent:!0}),O=_.node;if(!O)throw new A.ErrnoError(44);var $=Qe.basename(g),U=A.mayCreate(O,$);if(U)throw new A.ErrnoError(U);if(!O.node_ops.symlink)throw new A.ErrnoError(63);return O.node_ops.symlink(O,$,h)},rename(h,g){var _=Qe.dirname(h),O=Qe.dirname(g),$=Qe.basename(h),U=Qe.basename(g),V,Z,ce;if(V=A.lookupPath(h,{parent:!0}),Z=V.node,V=A.lookupPath(g,{parent:!0}),ce=V.node,!Z||!ce)throw new A.ErrnoError(44);if(Z.mount!==ce.mount)throw new A.ErrnoError(75);var _e=A.lookupNode(Z,$),We=Vt.relative(h,O);if(We.charAt(0)!==".")throw new A.ErrnoError(28);if(We=Vt.relative(g,_),We.charAt(0)!==".")throw new A.ErrnoError(55);var tt;try{tt=A.lookupNode(ce,U)}catch{}if(_e!==tt){var Ye=A.isDir(_e.mode),De=A.mayDelete(Z,$,Ye);if(De)throw new A.ErrnoError(De);if(De=tt?A.mayDelete(ce,U,Ye):A.mayCreate(ce,U),De)throw new A.ErrnoError(De);if(!Z.node_ops.rename)throw new A.ErrnoError(63);if(A.isMountpoint(_e)||tt&&A.isMountpoint(tt))throw new A.ErrnoError(10);if(ce!==Z&&(De=A.nodePermissions(Z,"w"),De))throw new A.ErrnoError(De);A.hashRemoveNode(_e);try{Z.node_ops.rename(_e,ce,U),_e.parent=ce}catch(Ot){throw Ot}finally{A.hashAddNode(_e)}}},rmdir(h){var g=A.lookupPath(h,{parent:!0}),_=g.node,O=Qe.basename(h),$=A.lookupNode(_,O),U=A.mayDelete(_,O,!0);if(U)throw new A.ErrnoError(U);if(!_.node_ops.rmdir)throw new A.ErrnoError(63);if(A.isMountpoint($))throw new A.ErrnoError(10);_.node_ops.rmdir(_,O),A.destroyNode($)},readdir(h){var g=A.lookupPath(h,{follow:!0}),_=g.node,O=A.checkOpExists(_.node_ops.readdir,54);return O(_)},unlink(h){var g=A.lookupPath(h,{parent:!0}),_=g.node;if(!_)throw new A.ErrnoError(44);var O=Qe.basename(h),$=A.lookupNode(_,O),U=A.mayDelete(_,O,!1);if(U)throw new A.ErrnoError(U);if(!_.node_ops.unlink)throw new A.ErrnoError(63);if(A.isMountpoint($))throw new A.ErrnoError(10);_.node_ops.unlink(_,O),A.destroyNode($)},readlink(h){var g=A.lookupPath(h),_=g.node;if(!_)throw new A.ErrnoError(44);if(!_.node_ops.readlink)throw new A.ErrnoError(28);return _.node_ops.readlink(_)},stat(h,g){var _=A.lookupPath(h,{follow:!g}),O=_.node,$=A.checkOpExists(O.node_ops.getattr,63);return $(O)},fstat(h){var g=A.getStreamChecked(h),_=g.node,O=g.stream_ops.getattr,$=O?g:_;return O??(O=_.node_ops.getattr),A.checkOpExists(O,63),O($)},lstat(h){return A.stat(h,!0)},doChmod(h,g,_,O){A.doSetAttr(h,g,{mode:_&4095|g.mode&-4096,ctime:Date.now(),dontFollow:O})},chmod(h,g,_){var O;if(typeof h=="string"){var $=A.lookupPath(h,{follow:!_});O=$.node}else O=h;A.doChmod(null,O,g,_)},lchmod(h,g){A.chmod(h,g,!0)},fchmod(h,g){var _=A.getStreamChecked(h);A.doChmod(_,_.node,g,!1)},doChown(h,g,_){A.doSetAttr(h,g,{timestamp:Date.now(),dontFollow:_})},chown(h,g,_,O){var $;if(typeof h=="string"){var U=A.lookupPath(h,{follow:!O});$=U.node}else $=h;A.doChown(null,$,O)},lchown(h,g,_){A.chown(h,g,_,!0)},fchown(h,g,_){var O=A.getStreamChecked(h);A.doChown(O,O.node,!1)},doTruncate(h,g,_){if(A.isDir(g.mode))throw new A.ErrnoError(31);if(!A.isFile(g.mode))throw new A.ErrnoError(28);var O=A.nodePermissions(g,"w");if(O)throw new A.ErrnoError(O);A.doSetAttr(h,g,{size:_,timestamp:Date.now()})},truncate(h,g){if(g<0)throw new A.ErrnoError(28);var _;if(typeof h=="string"){var O=A.lookupPath(h,{follow:!0});_=O.node}else _=h;A.doTruncate(null,_,g)},ftruncate(h,g){var _=A.getStreamChecked(h);if(g<0||!(_.flags&2097155))throw new A.ErrnoError(28);A.doTruncate(_,_.node,g)},utime(h,g,_){var O=A.lookupPath(h,{follow:!0}),$=O.node,U=A.checkOpExists($.node_ops.setattr,63);U($,{atime:g,mtime:_})},open(h,g,_=438){if(h==="")throw new A.ErrnoError(44);g=typeof g=="string"?jr(g):g,g&64?_=_&4095|32768:_=0;var O,$;if(typeof h=="object")O=h;else{$=h.endsWith("/");var U=A.lookupPath(h,{follow:!(g&131072),noent_okay:!0});O=U.node,h=U.path}var V=!1;if(g&64)if(O){if(g&128)throw new A.ErrnoError(20)}else{if($)throw new A.ErrnoError(31);O=A.mknod(h,_|511,0),V=!0}if(!O)throw new A.ErrnoError(44);if(A.isChrdev(O.mode)&&(g&=-513),g&65536&&!A.isDir(O.mode))throw new A.ErrnoError(54);if(!V){var Z=A.mayOpen(O,g);if(Z)throw new A.ErrnoError(Z)}g&512&&!V&&A.truncate(O,0),g&=-131713;var ce=A.createStream({node:O,path:A.getPath(O),flags:g,seekable:!0,position:0,stream_ops:O.stream_ops,ungotten:[],error:!1});return ce.stream_ops.open&&ce.stream_ops.open(ce),V&&A.chmod(O,_&511),r.logReadFiles&&!(g&1)&&(h in A.readFiles||(A.readFiles[h]=1)),ce},close(h){if(A.isClosed(h))throw new A.ErrnoError(8);h.getdents&&(h.getdents=null);try{h.stream_ops.close&&h.stream_ops.close(h)}catch(g){throw g}finally{A.closeStream(h.fd)}h.fd=null},isClosed(h){return h.fd===null},llseek(h,g,_){if(A.isClosed(h))throw new A.ErrnoError(8);if(!h.seekable||!h.stream_ops.llseek)throw new A.ErrnoError(70);if(_!=0&&_!=1&&_!=2)throw new A.ErrnoError(28);return h.position=h.stream_ops.llseek(h,g,_),h.ungotten=[],h.position},read(h,g,_,O,$){if(O<0||$<0)throw new A.ErrnoError(28);if(A.isClosed(h))throw new A.ErrnoError(8);if((h.flags&2097155)===1)throw new A.ErrnoError(8);if(A.isDir(h.node.mode))throw new A.ErrnoError(31);if(!h.stream_ops.read)throw new A.ErrnoError(28);var U=typeof $<"u";if(!U)$=h.position;else if(!h.seekable)throw new A.ErrnoError(70);var V=h.stream_ops.read(h,g,_,O,$);return U||(h.position+=V),V},write(h,g,_,O,$,U){if(O<0||$<0)throw new A.ErrnoError(28);if(A.isClosed(h))throw new A.ErrnoError(8);if(!(h.flags&2097155))throw new A.ErrnoError(8);if(A.isDir(h.node.mode))throw new A.ErrnoError(31);if(!h.stream_ops.write)throw new A.ErrnoError(28);h.seekable&&h.flags&1024&&A.llseek(h,0,2);var V=typeof $<"u";if(!V)$=h.position;else if(!h.seekable)throw new A.ErrnoError(70);var Z=h.stream_ops.write(h,g,_,O,$,U);return V||(h.position+=Z),Z},mmap(h,g,_,O,$){if(O&2&&!($&2)&&(h.flags&2097155)!==2)throw new A.ErrnoError(2);if((h.flags&2097155)===1)throw new A.ErrnoError(2);if(!h.stream_ops.mmap)throw new A.ErrnoError(43);if(!g)throw new A.ErrnoError(28);return h.stream_ops.mmap(h,g,_,O,$)},msync(h,g,_,O,$){return h.stream_ops.msync?h.stream_ops.msync(h,g,_,O,$):0},ioctl(h,g,_){if(!h.stream_ops.ioctl)throw new A.ErrnoError(59);return h.stream_ops.ioctl(h,g,_)},readFile(h,g={}){g.flags=g.flags||0,g.encoding=g.encoding||"binary",g.encoding!=="utf8"&&g.encoding!=="binary"&&ae(`Invalid encoding type "${g.encoding}"`);var _=A.open(h,g.flags),O=A.stat(h),$=O.size,U=new Uint8Array($);return A.read(_,U,0,$,0),g.encoding==="utf8"&&(U=Yt(U)),A.close(_),U},writeFile(h,g,_={}){_.flags=_.flags||577;var O=A.open(h,_.flags,_.mode);typeof g=="string"&&(g=new Uint8Array(Ft(g))),ArrayBuffer.isView(g)?A.write(O,g,0,g.byteLength,void 0,_.canOwn):ae("Unsupported data type"),A.close(O)},cwd:()=>A.currentPath,chdir(h){var g=A.lookupPath(h,{follow:!0});if(g.node===null)throw new A.ErrnoError(44);if(!A.isDir(g.node.mode))throw new A.ErrnoError(54);var _=A.nodePermissions(g.node,"x");if(_)throw new A.ErrnoError(_);A.currentPath=g.path},createDefaultDirectories(){A.mkdir("/tmp"),A.mkdir("/home"),A.mkdir("/home/web_user")},createDefaultDevices(){A.mkdir("/dev"),A.registerDevice(A.makedev(1,3),{read:()=>0,write:(O,$,U,V,Z)=>V,llseek:()=>0}),A.mkdev("/dev/null",A.makedev(1,3)),mt.register(A.makedev(5,0),mt.default_tty_ops),mt.register(A.makedev(6,0),mt.default_tty1_ops),A.mkdev("/dev/tty",A.makedev(5,0)),A.mkdev("/dev/tty1",A.makedev(6,0));var h=new Uint8Array(1024),g=0,_=()=>(g===0&&(Wt(h),g=h.byteLength),h[--g]);A.createDevice("/dev","random",_),A.createDevice("/dev","urandom",_),A.mkdir("/dev/shm"),A.mkdir("/dev/shm/tmp")},createSpecialDirectories(){A.mkdir("/proc");var h=A.mkdir("/proc/self");A.mkdir("/proc/self/fd"),A.mount({mount(){var g=A.createNode(h,"fd",16895,73);return g.stream_ops={llseek:Be.stream_ops.llseek},g.node_ops={lookup(_,O){var $=+O,U=A.getStreamChecked($),V={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>U.path},id:$+1};return V.parent=V,V},readdir(){return Array.from(A.streams.entries()).filter(([_,O])=>O).map(([_,O])=>_.toString())}},g}},{},"/proc/self/fd")},createStandardStreams(h,g,_){h?A.createDevice("/dev","stdin",h):A.symlink("/dev/tty","/dev/stdin"),g?A.createDevice("/dev","stdout",null,g):A.symlink("/dev/tty","/dev/stdout"),_?A.createDevice("/dev","stderr",null,_):A.symlink("/dev/tty1","/dev/stderr"),A.open("/dev/stdin",0),A.open("/dev/stdout",1),A.open("/dev/stderr",1)},staticInit(){A.nameTable=new Array(4096),A.mount(Be,{},"/"),A.createDefaultDirectories(),A.createDefaultDevices(),A.createSpecialDirectories(),A.filesystems={MEMFS:Be}},init(h,g,_){A.initialized=!0,h??(h=r.stdin),g??(g=r.stdout),_??(_=r.stderr),A.createStandardStreams(h,g,_)},quit(){A.initialized=!1;for(var h of A.streams)h&&A.close(h)},findObject(h,g){var _=A.analyzePath(h,g);return _.exists?_.object:null},analyzePath(h,g){try{var _=A.lookupPath(h,{follow:!g});h=_.path}catch{}var O={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var _=A.lookupPath(h,{parent:!0});O.parentExists=!0,O.parentPath=_.path,O.parentObject=_.node,O.name=Qe.basename(h),_=A.lookupPath(h,{follow:!g}),O.exists=!0,O.path=_.path,O.object=_.node,O.name=_.node.name,O.isRoot=_.path==="/"}catch($){O.error=$.errno}return O},createPath(h,g,_,O){h=typeof h=="string"?h:A.getPath(h);for(var $=g.split("/").reverse();$.length;){var U=$.pop();if(U){var V=Qe.join2(h,U);try{A.mkdir(V)}catch(Z){if(Z.errno!=20)throw Z}h=V}}return V},createFile(h,g,_,O,$){var U=Qe.join2(typeof h=="string"?h:A.getPath(h),g),V=Ur(O,$);return A.create(U,V)},createDataFile(h,g,_,O,$,U){var V=g;h&&(h=typeof h=="string"?h:A.getPath(h),V=g?Qe.join2(h,g):h);var Z=Ur(O,$),ce=A.create(V,Z);if(_){if(typeof _=="string"){for(var _e=new Array(_.length),We=0,tt=_.length;We<tt;++We)_e[We]=_.charCodeAt(We);_=_e}A.chmod(ce,Z|146);var Ye=A.open(ce,577);A.write(Ye,_,0,_.length,0,U),A.close(Ye),A.chmod(ce,Z)}},createDevice(h,g,_,O){var Z;var $=Qe.join2(typeof h=="string"?h:A.getPath(h),g),U=Ur(!!_,!!O);(Z=A.createDevice).major??(Z.major=64);var V=A.makedev(A.createDevice.major++,0);return A.registerDevice(V,{open(ce){ce.seekable=!1},close(ce){var _e;(_e=O==null?void 0:O.buffer)!=null&&_e.length&&O(10)},read(ce,_e,We,tt,Ye){for(var De=0,Ot=0;Ot<tt;Ot++){var Qt;try{Qt=_()}catch{throw new A.ErrnoError(29)}if(Qt===void 0&&De===0)throw new A.ErrnoError(6);if(Qt==null)break;De++,_e[We+Ot]=Qt}return De&&(ce.node.atime=Date.now()),De},write(ce,_e,We,tt,Ye){for(var De=0;De<tt;De++)try{O(_e[We+De])}catch{throw new A.ErrnoError(29)}return tt&&(ce.node.mtime=ce.node.ctime=Date.now()),De}}),A.mkdev($,U,V)},forceLoadFile(h){if(h.isDevice||h.isFolder||h.link||h.contents)return!0;if(globalThis.XMLHttpRequest)ae("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else try{h.contents=m(h.url)}catch{throw new A.ErrnoError(29)}},createLazyFile(h,g,_,O,$){class U{constructor(){Pr(this,"lengthKnown",!1);Pr(this,"chunks",[])}get(Ye){if(!(Ye>this.length-1||Ye<0)){var De=Ye%this.chunkSize,Ot=Ye/this.chunkSize|0;return this.getter(Ot)[De]}}setDataGetter(Ye){this.getter=Ye}cacheLength(){var Ye=new XMLHttpRequest;Ye.open("HEAD",_,!1),Ye.send(null),Ye.status>=200&&Ye.status<300||Ye.status===304||ae("Couldn't load "+_+". Status: "+Ye.status);var De=Number(Ye.getResponseHeader("Content-length")),Ot,Qt=(Ot=Ye.getResponseHeader("Accept-Ranges"))&&Ot==="bytes",Xr=(Ot=Ye.getResponseHeader("Content-Encoding"))&&Ot==="gzip",Kr=1024*1024;Qt||(Kr=De);var ca=(Va,eo)=>{Va>eo&&ae("invalid range ("+Va+", "+eo+") or no bytes requested!"),eo>De-1&&ae("only "+De+" bytes available! programmer error!");var dn=new XMLHttpRequest;return dn.open("GET",_,!1),De!==Kr&&dn.setRequestHeader("Range","bytes="+Va+"-"+eo),dn.responseType="arraybuffer",dn.overrideMimeType&&dn.overrideMimeType("text/plain; charset=x-user-defined"),dn.send(null),dn.status>=200&&dn.status<300||dn.status===304||ae("Couldn't load "+_+". Status: "+dn.status),dn.response!==void 0?new Uint8Array(dn.response||[]):Ft(dn.responseText||"")},Zn=this;Zn.setDataGetter(Va=>{var eo=Va*Kr,dn=(Va+1)*Kr-1;return dn=Math.min(dn,De-1),typeof Zn.chunks[Va]>"u"&&(Zn.chunks[Va]=ca(eo,dn)),typeof Zn.chunks[Va]>"u"&&ae("doXHR failed!"),Zn.chunks[Va]}),(Xr||!De)&&(Kr=De=1,De=this.getter(0).length,Kr=De,x("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=De,this._chunkSize=Kr,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(globalThis.XMLHttpRequest){a||ae("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var V=new U,Z={isDevice:!1,contents:V}}else var Z={isDevice:!1,url:_};var ce=A.createFile(h,g,Z,O,$);Z.contents?ce.contents=Z.contents:Z.url&&(ce.contents=null,ce.url=Z.url),Object.defineProperties(ce,{usedBytes:{get:function(){return this.contents.length}}});var _e={};for(const[tt,Ye]of Object.entries(ce.stream_ops))_e[tt]=(...De)=>(A.forceLoadFile(ce),Ye(...De));function We(tt,Ye,De,Ot,Qt){var Xr=tt.node.contents;if(Qt>=Xr.length)return 0;var Kr=Math.min(Xr.length-Qt,Ot);if(Xr.slice)for(var ca=0;ca<Kr;ca++)Ye[De+ca]=Xr[Qt+ca];else for(var ca=0;ca<Kr;ca++)Ye[De+ca]=Xr.get(Qt+ca);return Kr}return _e.read=(tt,Ye,De,Ot,Qt)=>(A.forceLoadFile(ce),We(tt,Ye,De,Ot,Qt)),_e.mmap=(tt,Ye,De,Ot,Qt)=>{A.forceLoadFile(ce);var Xr=zr();if(!Xr)throw new A.ErrnoError(48);return We(tt,S,Xr,Ye,De),{ptr:Xr,allocated:!0}},ce.stream_ops=_e,ce}},Ee={DEFAULT_POLLMASK:5,calculateAt(h,g,_){if(Qe.isAbs(g))return g;var O;if(h===-100)O=A.cwd();else{var $=Ee.getStreamFromFD(h);O=$.path}if(g.length==0){if(!_)throw new A.ErrnoError(44);return O}return O+"/"+g},writeStat(h,g){T[h>>>2>>>0]=g.dev,T[h+4>>>2>>>0]=g.mode,T[h+8>>>2>>>0]=g.nlink,T[h+12>>>2>>>0]=g.uid,T[h+16>>>2>>>0]=g.gid,T[h+20>>>2>>>0]=g.rdev,G[h+24>>>3>>>0]=BigInt(g.size),R[h+32>>>2>>>0]=4096,R[h+36>>>2>>>0]=g.blocks;var _=g.atime.getTime(),O=g.mtime.getTime(),$=g.ctime.getTime();return G[h+40>>>3>>>0]=BigInt(Math.floor(_/1e3)),T[h+48>>>2>>>0]=_%1e3*1e3*1e3,G[h+56>>>3>>>0]=BigInt(Math.floor(O/1e3)),T[h+64>>>2>>>0]=O%1e3*1e3*1e3,G[h+72>>>3>>>0]=BigInt(Math.floor($/1e3)),T[h+80>>>2>>>0]=$%1e3*1e3*1e3,G[h+88>>>3>>>0]=BigInt(g.ino),0},writeStatFs(h,g){T[h+4>>>2>>>0]=g.bsize,T[h+60>>>2>>>0]=g.bsize,G[h+8>>>3>>>0]=BigInt(g.blocks),G[h+16>>>3>>>0]=BigInt(g.bfree),G[h+24>>>3>>>0]=BigInt(g.bavail),G[h+32>>>3>>>0]=BigInt(g.files),G[h+40>>>3>>>0]=BigInt(g.ffree),T[h+48>>>2>>>0]=g.fsid,T[h+64>>>2>>>0]=g.flags,T[h+56>>>2>>>0]=g.namelen},doMsync(h,g,_,O,$){if(!A.isFile(g.node.mode))throw new A.ErrnoError(43);if(O&2)return 0;var U=N.slice(h,h+_);A.msync(g,U,$,_,O)},getStreamFromFD(h){var g=A.getStreamChecked(h);return g},varargs:void 0,getStr(h){var g=bt(h);return g}};function ot(h,g,_){_>>>=0,Ee.varargs=_;try{var O=Ee.getStreamFromFD(h);switch(g){case 0:{var $=ir();if($<0)return-28;for(;A.streams[$];)$++;var U;return U=A.dupStream(O,$),U.fd}case 1:case 2:return 0;case 3:return O.flags;case 4:{var $=ir();return O.flags|=$,0}case 12:{var $=Gt(),V=0;return M[$+V>>>1>>>0]=2,0}case 13:case 14:return 0}return-28}catch(Z){if(typeof A>"u"||Z.name!=="ErrnoError")throw Z;return-Z.errno}}function gt(h,g,_){_>>>=0,Ee.varargs=_;try{var O=Ee.getStreamFromFD(h);switch(g){case 21509:return O.tty?0:-59;case 21505:{if(!O.tty)return-59;if(O.tty.ops.ioctl_tcgets){var $=O.tty.ops.ioctl_tcgets(O),U=Gt();R[U>>>2>>>0]=$.c_iflag||0,R[U+4>>>2>>>0]=$.c_oflag||0,R[U+8>>>2>>>0]=$.c_cflag||0,R[U+12>>>2>>>0]=$.c_lflag||0;for(var V=0;V<32;V++)S[U+V+17>>>0]=$.c_cc[V]||0;return 0}return 0}case 21510:case 21511:case 21512:return O.tty?0:-59;case 21506:case 21507:case 21508:{if(!O.tty)return-59;if(O.tty.ops.ioctl_tcsets){for(var U=Gt(),Z=R[U>>>2>>>0],ce=R[U+4>>>2>>>0],_e=R[U+8>>>2>>>0],We=R[U+12>>>2>>>0],tt=[],V=0;V<32;V++)tt.push(S[U+V+17>>>0]);return O.tty.ops.ioctl_tcsets(O.tty,g,{c_iflag:Z,c_oflag:ce,c_cflag:_e,c_lflag:We,c_cc:tt})}return 0}case 21519:{if(!O.tty)return-59;var U=Gt();return R[U>>>2>>>0]=0,0}case 21520:return O.tty?-28:-59;case 21537:case 21531:{var U=Gt();return A.ioctl(O,g,U)}case 21523:{if(!O.tty)return-59;if(O.tty.ops.ioctl_tiocgwinsz){var Ye=O.tty.ops.ioctl_tiocgwinsz(O.tty),U=Gt();M[U>>>1>>>0]=Ye[0],M[U+2>>>1>>>0]=Ye[1]}return 0}case 21524:return O.tty?0:-59;case 21515:return O.tty?0:-59;default:return-28}}catch(De){if(typeof A>"u"||De.name!=="ErrnoError")throw De;return-De.errno}}function St(h,g,_,O){g>>>=0,O>>>=0,Ee.varargs=O;try{g=Ee.getStr(g),g=Ee.calculateAt(h,g);var $=O?ir():0;return A.open(g,_,$).fd}catch(U){if(typeof A>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}function At(h){h>>>=0;try{return h=Ee.getStr(h),A.rmdir(h),0}catch(g){if(typeof A>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function qt(h,g,_){g>>>=0;try{if(g=Ee.getStr(g),g=Ee.calculateAt(h,g),!_)A.unlink(g);else if(_===512)A.rmdir(g);else return-28;return 0}catch(O){if(typeof A>"u"||O.name!=="ErrnoError")throw O;return-O.errno}}var er=()=>ae(""),qe=h=>{h>>>=0;for(var g="";;){var _=N[h++>>>0];if(!_)return g;g+=String.fromCharCode(_)}},Ct={},$t={},zt={},Lt=class extends Error{constructor(g){super(g),this.name="BindingError"}},we=h=>{throw new Lt(h)};function Wr(h,g,_={}){var O=g.name;if(h||we(`type "${O}" must have a positive integer typeid pointer`),$t.hasOwnProperty(h)){if(_.ignoreDuplicateRegistrations)return;we(`Cannot register type '${O}' twice`)}if($t[h]=g,delete zt[h],Ct.hasOwnProperty(h)){var $=Ct[h];delete Ct[h],$.forEach(U=>U())}}function tn(h,g,_={}){return Wr(h,g,_)}var rn=(h,g,_)=>{switch(g){case 1:return _?O=>S[O>>>0]:O=>N[O>>>0];case 2:return _?O=>M[O>>>1>>>0]:O=>E[O>>>1>>>0];case 4:return _?O=>R[O>>>2>>>0]:O=>T[O>>>2>>>0];case 8:return _?O=>G[O>>>3>>>0]:O=>z[O>>>3>>>0];default:throw new TypeError(`invalid integer width (${g}): ${h}`)}},ia=function(h,g,_,O,$){h>>>=0,g>>>=0,_>>>=0,g=qe(g);const U=O===0n;let V=Z=>Z;if(U){const Z=_*8;V=ce=>BigInt.asUintN(Z,ce),$=V($)}tn(h,{name:g,fromWireType:V,toWireType:(Z,ce)=>(typeof ce=="number"&&(ce=BigInt(ce)),ce),readValueFromPointer:rn(g,_,!U),destructorFunction:null})};function xl(h,g,_,O){h>>>=0,g>>>=0,g=qe(g),tn(h,{name:g,fromWireType:function($){return!!$},toWireType:function($,U){return U?_:O},readValueFromPointer:function($){return this.fromWireType(N[$>>>0])},destructorFunction:null})}var bl=h=>({count:h.count,deleteScheduled:h.deleteScheduled,preservePointerOnDelete:h.preservePointerOnDelete,ptr:h.ptr,ptrType:h.ptrType,smartPtr:h.smartPtr,smartPtrType:h.smartPtrType}),Pn=h=>{function g(_){return _.$$.ptrType.registeredClass.name}we(g(h)+" instance already deleted")},li=!1,va=h=>{},ci=h=>{h.smartPtr?h.smartPtrType.rawDestructor(h.smartPtr):h.ptrType.registeredClass.rawDestructor(h.ptr)},Zi=h=>{h.count.value-=1;var g=h.count.value===0;g&&ci(h)},Vr=h=>globalThis.FinalizationRegistry?(li=new FinalizationRegistry(g=>{Zi(g.$$)}),Vr=g=>{var _=g.$$,O=!!_.smartPtr;if(O){var $={$$:_};li.register(g,$,g)}return g},va=g=>li.unregister(g),Vr(h)):(Vr=g=>g,h),qn=()=>{let h=Nn.prototype;Object.assign(h,{isAliasOf(_){if(!(this instanceof Nn)||!(_ instanceof Nn))return!1;var O=this.$$.ptrType.registeredClass,$=this.$$.ptr;_.$$=_.$$;for(var U=_.$$.ptrType.registeredClass,V=_.$$.ptr;O.baseClass;)$=O.upcast($),O=O.baseClass;for(;U.baseClass;)V=U.upcast(V),U=U.baseClass;return O===U&&$===V},clone(){if(this.$$.ptr||Pn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var _=Vr(Object.create(Object.getPrototypeOf(this),{$$:{value:bl(this.$$)}}));return _.$$.count.value+=1,_.$$.deleteScheduled=!1,_},delete(){this.$$.ptr||Pn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&we("Object already scheduled for deletion"),va(this),Zi(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Pn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&we("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const g=Symbol.dispose;g&&(h[g]=h.delete)};function Nn(){}var Aa=(h,g)=>Object.defineProperty(g,"name",{value:h}),ui={},fi=(h,g,_)=>{if(h[g].overloadTable===void 0){var O=h[g];h[g]=function(...$){return h[g].overloadTable.hasOwnProperty($.length)||we(`Function '${_}' called with an invalid number of arguments (${$.length}) - expects one of (${h[g].overloadTable})!`),h[g].overloadTable[$.length].apply(this,$)},h[g].overloadTable=[],h[g].overloadTable[O.argCount]=O}},Mi=(h,g,_)=>{r.hasOwnProperty(h)?(we(`Cannot register public name '${h}' twice`),fi(r,h,h),r[h].overloadTable.hasOwnProperty(_)&&we(`Cannot register multiple overloads of a function with the same number of arguments (${_})!`),r[h].overloadTable[_]=g):(r[h]=g,r[h].argCount=_)},di=48,xa=57,ys=h=>{h=h.replace(/[^a-zA-Z0-9_]/g,"$");var g=h.charCodeAt(0);return g>=di&&g<=xa?`_${h}`:h};function oa(h,g,_,O,$,U,V,Z){this.name=h,this.constructor=g,this.instancePrototype=_,this.rawDestructor=O,this.baseClass=$,this.getActualType=U,this.upcast=V,this.downcast=Z,this.pureVirtualFunctions=[]}var hi=(h,g,_)=>{for(;g!==_;)g.upcast||we(`Expected null or instance of ${_.name}, got an instance of ${g.name}`),h=g.upcast(h),g=g.baseClass;return h},Ln=h=>{if(h===null)return"null";var g=typeof h;return g==="object"||g==="array"||g==="function"?h.toString():""+h};function vs(h,g){if(g===null)return this.isReference&&we(`null is not a valid ${this.name}`),0;g.$$||we(`Cannot pass "${Ln(g)}" as a ${this.name}`),g.$$.ptr||we(`Cannot pass deleted object as a pointer of type ${this.name}`);var _=g.$$.ptrType.registeredClass,O=hi(g.$$.ptr,_,this.registeredClass);return O}function q(h,g){var _;if(g===null)return this.isReference&&we(`null is not a valid ${this.name}`),this.isSmartPointer?(_=this.rawConstructor(),h!==null&&h.push(this.rawDestructor,_),_):0;(!g||!g.$$)&&we(`Cannot pass "${Ln(g)}" as a ${this.name}`),g.$$.ptr||we(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&g.$$.ptrType.isConst&&we(`Cannot convert argument of type ${g.$$.smartPtrType?g.$$.smartPtrType.name:g.$$.ptrType.name} to parameter type ${this.name}`);var O=g.$$.ptrType.registeredClass;if(_=hi(g.$$.ptr,O,this.registeredClass),this.isSmartPointer)switch(g.$$.smartPtr===void 0&&we("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:g.$$.smartPtrType===this?_=g.$$.smartPtr:we(`Cannot convert argument of type ${g.$$.smartPtrType?g.$$.smartPtrType.name:g.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:_=g.$$.smartPtr;break;case 2:if(g.$$.smartPtrType===this)_=g.$$.smartPtr;else{var $=g.clone();_=this.rawShare(_,rr.toHandle(()=>$.delete())),h!==null&&h.push(this.rawDestructor,_)}break;default:we("Unsupporting sharing policy")}return _}function de(h,g){if(g===null)return this.isReference&&we(`null is not a valid ${this.name}`),0;g.$$||we(`Cannot pass "${Ln(g)}" as a ${this.name}`),g.$$.ptr||we(`Cannot pass deleted object as a pointer of type ${this.name}`),g.$$.ptrType.isConst&&we(`Cannot convert argument of type ${g.$$.ptrType.name} to parameter type ${this.name}`);var _=g.$$.ptrType.registeredClass,O=hi(g.$$.ptr,_,this.registeredClass);return O}function ye(h){return this.fromWireType(T[h>>>2>>>0])}var X=(h,g,_)=>{if(g===_)return h;if(_.baseClass===void 0)return null;var O=X(h,g,_.baseClass);return O===null?null:_.downcast(O)},je={},Ze=(h,g)=>{for(g===void 0&&we("ptr should not be undefined");h.baseClass;)g=h.upcast(g),h=h.baseClass;return g},it=(h,g)=>(g=Ze(h,g),je[g]),dt=class extends Error{constructor(g){super(g),this.name="InternalError"}},pt=h=>{throw new dt(h)},ct=(h,g)=>{(!g.ptrType||!g.ptr)&&pt("makeClassHandle requires ptr and ptrType");var _=!!g.smartPtrType,O=!!g.smartPtr;return _!==O&&pt("Both smartPtrType and smartPtr must be specified"),g.count={value:1},Vr(Object.create(h,{$$:{value:g,writable:!0}}))};function Ht(h){var g=this.getPointee(h);if(!g)return this.destructor(h),null;var _=it(this.registeredClass,g);if(_!==void 0){if(_.$$.count.value===0)return _.$$.ptr=g,_.$$.smartPtr=h,_.clone();var O=_.clone();return this.destructor(h),O}function $(){return this.isSmartPointer?ct(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:g,smartPtrType:this,smartPtr:h}):ct(this.registeredClass.instancePrototype,{ptrType:this,ptr:h})}var U=this.registeredClass.getActualType(g),V=ui[U];if(!V)return $.call(this);var Z;this.isConst?Z=V.constPointerType:Z=V.pointerType;var ce=X(g,this.registeredClass,Z.registeredClass);return ce===null?$.call(this):this.isSmartPointer?ct(Z.registeredClass.instancePrototype,{ptrType:Z,ptr:ce,smartPtrType:this,smartPtr:h}):ct(Z.registeredClass.instancePrototype,{ptrType:Z,ptr:ce})}var Ve=()=>{Object.assign(Ut.prototype,{getPointee(h){return this.rawGetPointee&&(h=this.rawGetPointee(h)),h},destructor(h){var g;(g=this.rawDestructor)==null||g.call(this,h)},readValueFromPointer:ye,fromWireType:Ht})};function Ut(h,g,_,O,$,U,V,Z,ce,_e,We){this.name=h,this.registeredClass=g,this.isReference=_,this.isConst=O,this.isSmartPointer=$,this.pointeeType=U,this.sharingPolicy=V,this.rawGetPointee=Z,this.rawConstructor=ce,this.rawShare=_e,this.rawDestructor=We,!$&&g.baseClass===void 0?O?(this.toWireType=vs,this.destructorFunction=null):(this.toWireType=de,this.destructorFunction=null):this.toWireType=q}var Je=(h,g,_)=>{r.hasOwnProperty(h)||pt("Replacing nonexistent public symbol"),r[h].overloadTable!==void 0&&_!==void 0||(r[h]=g,r[h].argCount=_)},be=[],nt=h=>{var g=be[h];return g||(be[h]=g=vd.get(h)),g},Ke=(h,g,_=[],O=!1)=>{var $=nt(g),U=$(..._);function V(Z){return h[0]=="p"?Z>>>0:Z}return V(U)},J=(h,g,_=!1)=>(...O)=>Ke(h,g,O,_),xe=(h,g,_=!1)=>{h=qe(h);function O(){if(h.includes("p"))return J(h,g,_);var U=nt(g);return U}var $=O();return typeof $!="function"&&we(`unknown function pointer with signature ${h}: ${g}`),$};class st extends Error{}var et=h=>{var g=Ei(h),_=qe(g);return dr(g),_},yt=(h,g)=>{var _=[],O={};function $(U){if(!O[U]&&!$t[U]){if(zt[U]){zt[U].forEach($);return}_.push(U),O[U]=!0}}throw g.forEach($),new st(`${h}: `+_.map(et).join([", "]))},Dt=(h,g,_)=>{h.forEach(Z=>zt[Z]=g);function O(Z){var ce=_(Z);ce.length!==h.length&&pt("Mismatched type converter count");for(var _e=0;_e<h.length;++_e)tn(h[_e],ce[_e])}var $=new Array(g.length),U=[],V=0;for(let[Z,ce]of g.entries())$t.hasOwnProperty(ce)?$[Z]=$t[ce]:(U.push(ce),Ct.hasOwnProperty(ce)||(Ct[ce]=[]),Ct[ce].push(()=>{$[Z]=$t[ce],++V,V===U.length&&O($)}));U.length===0&&O($)};function Er(h,g,_,O,$,U,V,Z,ce,_e,We,tt,Ye){h>>>=0,g>>>=0,_>>>=0,O>>>=0,$>>>=0,U>>>=0,V>>>=0,Z>>>=0,ce>>>=0,_e>>>=0,We>>>=0,tt>>>=0,Ye>>>=0,We=qe(We),U=xe($,U),Z&&(Z=xe(V,Z)),_e&&(_e=xe(ce,_e)),Ye=xe(tt,Ye);var De=ys(We);Mi(De,function(){yt(`Cannot construct ${We} due to unbound types`,[O])}),Dt([h,g,_],O?[O]:[],Ot=>{var Mb;Ot=Ot[0];var Qt,Xr;O?(Qt=Ot.registeredClass,Xr=Qt.instancePrototype):Xr=Nn.prototype;var Kr=Aa(We,function(...kg){if(Object.getPrototypeOf(this)!==ca)throw new Lt(`Use 'new' to construct ${We}`);if(Zn.constructor_body===void 0)throw new Lt(`${We} has no accessible constructor`);var Ab=Zn.constructor_body[kg.length];if(Ab===void 0)throw new Lt(`Tried to invoke ctor of ${We} with invalid number of parameters (${kg.length}) - expected (${Object.keys(Zn.constructor_body).toString()}) parameters instead!`);return Ab.apply(this,kg)}),ca=Object.create(Xr,{constructor:{value:Kr}});Kr.prototype=ca;var Zn=new oa(We,Kr,ca,Ye,Qt,U,Z,_e);Zn.baseClass&&((Mb=Zn.baseClass).__derivedClasses??(Mb.__derivedClasses=[]),Zn.baseClass.__derivedClasses.push(Zn));var Va=new Ut(We,Zn,!0,!1,!1),eo=new Ut(We+"*",Zn,!1,!1,!1),dn=new Ut(We+" const*",Zn,!1,!0,!1);return ui[h]={pointerType:eo,constPointerType:dn},Je(De,Kr),[Va,eo,dn]})}var cn=(h,g)=>{for(var _=[],O=0;O<h;O++)_.push(T[g+O*4>>>2>>>0]);return _},On=h=>{for(;h.length;){var g=h.pop(),_=h.pop();_(g)}};function Bn(h){for(var g=1;g<h.length;++g)if(h[g]!==null&&h[g].destructorFunction===void 0)return!0;return!1}function un(h,g,_,O){var $=Bn(h),U=h.length-2,V=[],Z=["fn"];g&&Z.push("thisWired");for(var ce=0;ce<U;++ce)V.push(`arg${ce}`),Z.push(`arg${ce}Wired`);V=V.join(","),Z=Z.join(",");var _e=`return function (${V}) {
`;$&&(_e+=`var destructors = [];
`);var We=$?"destructors":"null",tt=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];g&&(_e+=`var thisWired = toClassParamWire(${We}, this);
`);for(var ce=0;ce<U;++ce){var Ye=`toArg${ce}Wire`;_e+=`var arg${ce}Wired = ${Ye}(${We}, arg${ce});
`,tt.push(Ye)}if(_e+=(_||O?"var rv = ":"")+`invoker(${Z});
`,$)_e+=`runDestructors(destructors);
`;else for(var ce=g?1:2;ce<h.length;++ce){var De=ce===1?"thisWired":"arg"+(ce-2)+"Wired";h[ce].destructorFunction!==null&&(_e+=`${De}_dtor(${De});
`,tt.push(`${De}_dtor`))}return _&&(_e+=`var ret = fromRetWire(rv);
return ret;
`),_e+=`}
`,new Function(tt,_e)}function sa(h,g,_,O,$,U){var V=g.length;V<2&&we("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Z=g[1]!==null&&_!==null,ce=Bn(g),_e=!g[0].isVoid,We=g[0],tt=g[1],Ye=[h,we,O,$,On,We.fromWireType.bind(We),tt==null?void 0:tt.toWireType.bind(tt)],De=2;De<V;++De){var Ot=g[De];Ye.push(Ot.toWireType.bind(Ot))}if(!ce)for(var De=Z?1:2;De<g.length;++De)g[De].destructorFunction!==null&&Ye.push(g[De].destructorFunction);var Xr=un(g,Z,_e,U)(...Ye);return Aa(h,Xr)}var tr=function(h,g,_,O,$,U){h>>>=0,_>>>=0,O>>>=0,$>>>=0,U>>>=0;var V=cn(g,_);$=xe(O,$),Dt([],[h],Z=>{Z=Z[0];var ce=`constructor ${Z.name}`;if(Z.registeredClass.constructor_body===void 0&&(Z.registeredClass.constructor_body=[]),Z.registeredClass.constructor_body[g-1]!==void 0)throw new Lt(`Cannot register multiple constructors with identical number of parameters (${g-1}) for class '${Z.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Z.registeredClass.constructor_body[g-1]=()=>{yt(`Cannot construct ${Z.name} due to unbound types`,V)},Dt([],V,_e=>(_e.splice(1,0,null),Z.registeredClass.constructor_body[g-1]=sa(ce,_e,null,$,U),[])),[]})},Ai=h=>{h=h.trim();const g=h.indexOf("(");return g===-1?h:h.slice(0,g)},tu=function(h,g,_,O,$,U,V,Z,ce,_e){h>>>=0,g>>>=0,O>>>=0,$>>>=0,U>>>=0,V>>>=0;var We=cn(_,O);g=qe(g),g=Ai(g),U=xe($,U,ce),Dt([],[h],tt=>{tt=tt[0];var Ye=`${tt.name}.${g}`;g.startsWith("@@")&&(g=Symbol[g.substring(2)]),Z&&tt.registeredClass.pureVirtualFunctions.push(g);function De(){yt(`Cannot call ${Ye} due to unbound types`,We)}var Ot=tt.registeredClass.instancePrototype,Qt=Ot[g];return Qt===void 0||Qt.overloadTable===void 0&&Qt.className!==tt.name&&Qt.argCount===_-2?(De.argCount=_-2,De.className=tt.name,Ot[g]=De):(fi(Ot,g,Ye),Ot[g].overloadTable[_-2]=De),Dt([],We,Xr=>{var Kr=sa(Ye,Xr,tt,U,V,ce);return Ot[g].overloadTable===void 0?(Kr.argCount=_-2,Ot[g]=Kr):Ot[g].overloadTable[_-2]=Kr,[]}),[]})},wl=[],la=[0,1,,1,null,1,!0,1,!1,1];function Qi(h){h>>>=0,h>9&&--la[h+1]===0&&(la[h]=void 0,wl.push(h))}var rr={toValue:h=>(h||we(`Cannot use deleted val. handle = ${h}`),la[h]),toHandle:h=>{switch(h){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const g=wl.pop()||la.length;return la[g]=h,la[g+1]=1,g}}}},xs={name:"emscripten::val",fromWireType:h=>{var g=rr.toValue(h);return Qi(h),g},toWireType:(h,g)=>rr.toHandle(g),readValueFromPointer:ye,destructorFunction:null};function ru(h){return h>>>=0,tn(h,xs)}var bs=(h,g)=>{switch(g){case 4:return function(_){return this.fromWireType(D[_>>>2>>>0])};case 8:return function(_){return this.fromWireType(B[_>>>3>>>0])};default:throw new TypeError(`invalid float width (${g}): ${h}`)}},Fe=function(h,g,_){h>>>=0,g>>>=0,_>>>=0,g=qe(g),tn(h,{name:g,fromWireType:O=>O,toWireType:(O,$)=>$,readValueFromPointer:bs(g,_),destructorFunction:null})},Tt=function(h,g,_,O,$){h>>>=0,g>>>=0,_>>>=0,g=qe(g);const U=O===0;let V=ce=>ce;if(U){var Z=32-8*_;V=ce=>ce<<Z>>>Z,$=V($)}tn(h,{name:g,fromWireType:V,toWireType:(ce,_e)=>_e,readValueFromPointer:rn(g,_,O!==0),destructorFunction:null})};function Mt(h,g,_){h>>>=0,_>>>=0;var O=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],$=O[g];function U(V){var Z=T[V>>>2>>>0],ce=T[V+4>>>2>>>0];return new $(S.buffer,ce,Z)}_=qe(_),tn(h,{name:_,fromWireType:U,readValueFromPointer:U},{ignoreDuplicateRegistrations:!0})}var Pt=Object.assign({optional:!0},xs);function Fn(h,g){h>>>=0,tn(h,Pt)}var nn=(h,g,_)=>Qr(h,N,g,_);function zn(h,g){h>>>=0,g>>>=0,g=qe(g),tn(h,{name:g,fromWireType(_){var O=T[_>>>2>>>0],$=_+4,U;return U=bt($,O,!0),dr(_),U},toWireType(_,O){O instanceof ArrayBuffer&&(O=new Uint8Array(O));var $,U=typeof O=="string";U||ArrayBuffer.isView(O)&&O.BYTES_PER_ELEMENT==1||we("Cannot pass non-string to std::string"),U?$=vr(O):$=O.length;var V=Wa(4+$+1),Z=V+4;return T[V>>>2>>>0]=$,U?nn(O,Z,$+1):N.set(O,Z>>>0),_!==null&&_.push(dr,V),V},readValueFromPointer:ye,destructorFunction(_){dr(_)}})}var Ua=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,Ti=(h,g,_)=>{var O=h>>>1,$=xt(E,O,g/2,_);if($-O>16&&Ua)return Ua.decode(E.subarray(O>>>0,$>>>0));for(var U="",V=O;V<$;++V){var Z=E[V>>>0];U+=String.fromCharCode(Z)}return U},Ga=(h,g,_)=>{if(_??(_=2147483647),_<2)return 0;_-=2;for(var O=g,$=_<h.length*2?_/2:h.length,U=0;U<$;++U){var V=h.charCodeAt(U);M[g>>>1>>>0]=V,g+=2}return M[g>>>1>>>0]=0,g-O},Cr=h=>h.length*2,nu=(h,g,_)=>{for(var O="",$=h>>>2,U=0;!(U>=g/4);U++){var V=T[$+U>>>0];if(!V&&!_)break;O+=String.fromCodePoint(V)}return O},No=(h,g,_)=>{if(g>>>=0,_??(_=2147483647),_<4)return 0;for(var O=g,$=O+_-4,U=0;U<h.length;++U){var V=h.codePointAt(U);if(V>65535&&U++,R[g>>>2>>>0]=V,g+=4,g+4>$)break}return R[g>>>2>>>0]=0,g-O},kl=h=>{for(var g=0,_=0;_<h.length;++_){var O=h.codePointAt(_);O>65535&&_++,g+=4}return g};function ud(h,g,_){h>>>=0,g>>>=0,_>>>=0,_=qe(_);var O,$,U;g===2?(O=Ti,$=Ga,U=Cr):(O=nu,$=No,U=kl),tn(h,{name:_,fromWireType:V=>{var Z=T[V>>>2>>>0],ce=O(V+4,Z*g,!0);return dr(V),ce},toWireType:(V,Z)=>{typeof Z!="string"&&we(`Cannot pass non-string to C++ string type ${_}`);var ce=U(Z),_e=Wa(4+ce+g);return T[_e>>>2>>>0]=ce/g,$(Z,_e+4,ce+g),V!==null&&V.push(dr,_e),_e},readValueFromPointer:ye,destructorFunction(V){dr(V)}})}var og=function(h,g){h>>>=0,g>>>=0,g=qe(g),tn(h,{isVoid:!0,name:g,fromWireType:()=>{},toWireType:(_,O)=>{}})},sg=()=>{throw 1/0},au=[],fd=h=>{var g=au.length;return au.push(h),g},lg=(h,g)=>{var _=$t[h];return _===void 0&&we(`${g} has unknown type ${et(h)}`),_},dd=(h,g)=>{for(var _=new Array(h),O=0;O<h;++O)_[O]=lg(T[g+O*4>>>2>>>0],`parameter ${O}`);return _},cg=(h,g,_)=>{var O=[],$=h(O,_);return O.length&&(T[g>>>2>>>0]=rr.toHandle(O)),$},ug={},iu=h=>{var g=ug[h];return g===void 0?qe(h):g},fg=function(h,g,_){g>>>=0;var O=8,[$,...U]=dd(h,g),V=$.toWireType.bind($),Z=U.map(De=>De.readValueFromPointer.bind(De));h--;var ce={toValue:rr.toValue},_e=Z.map((De,Ot)=>{var Qt=`argFromPtr${Ot}`;return ce[Qt]=De,`${Qt}(args${Ot?"+"+Ot*O:""})`}),We;switch(_){case 0:We="toValue(handle)";break;case 2:We="new (toValue(handle))";break;case 3:We="";break;case 1:ce.getStringOrSymbol=iu,We="toValue(handle)[getStringOrSymbol(methodName)]";break}We+=`(${_e})`,$.isVoid||(ce.toReturnWire=V,ce.emval_returnValue=cg,We=`return emval_returnValue(toReturnWire, destructorsRef, ${We})`),We=`return function (handle, methodName, destructorsRef, args) {
  ${We}
  }`;var tt=new Function(Object.keys(ce),We)(...Object.values(ce)),Ye=`methodCaller<(${U.map(De=>De.name)}) => ${$.name}>`;return fd(Aa(Ye,tt))};function hd(h){return h>>>=0,h?(h=iu(h),rr.toHandle(globalThis[h])):rr.toHandle(globalThis)}function dg(h,g){return h>>>=0,g>>>=0,h=rr.toValue(h),g=rr.toValue(g),rr.toHandle(h[g])}function hg(h){h>>>=0,h>9&&(la[h+1]+=1)}function pg(h,g){return h>>>=0,g>>>=0,h=rr.toValue(h),g=rr.toValue(g),h instanceof g}function gg(h,g,_,O,$){return h>>>=0,g>>>=0,_>>>=0,O>>>=0,$>>>=0,au[h](g,_,O,$)}function mg(){return rr.toHandle([])}function yg(h){return h>>>=0,rr.toHandle(iu(h))}function pd(){return rr.toHandle({})}function vg(h){h>>>=0;var g=rr.toValue(h);On(g),Qi(h)}function xg(h,g,_){h>>>=0,g>>>=0,_>>>=0,h=rr.toValue(h),g=rr.toValue(g),_=rr.toValue(_),h[g]=_}function bg(h){return h>>>=0,h=rr.toValue(h),rr.toHandle(typeof h)}function Sl(h,g){h=Xe(h),g>>>=0;var _=new Date(h*1e3);R[g>>>2>>>0]=_.getUTCSeconds(),R[g+4>>>2>>>0]=_.getUTCMinutes(),R[g+8>>>2>>>0]=_.getUTCHours(),R[g+12>>>2>>>0]=_.getUTCDate(),R[g+16>>>2>>>0]=_.getUTCMonth(),R[g+20>>>2>>>0]=_.getUTCFullYear()-1900,R[g+24>>>2>>>0]=_.getUTCDay();var O=Date.UTC(_.getUTCFullYear(),0,1,0,0,0,0),$=(_.getTime()-O)/(1e3*60*60*24)|0;R[g+28>>>2>>>0]=$}var gd=h=>h%4===0&&(h%100!==0||h%400===0),md=[0,31,60,91,121,152,182,213,244,274,305,335],te=[0,31,59,90,120,151,181,212,243,273,304,334],oe=h=>{var g=gd(h.getFullYear()),_=g?md:te,O=_[h.getMonth()]+h.getDate()-1;return O};function se(h,g){h=Xe(h),g>>>=0;var _=new Date(h*1e3);R[g>>>2>>>0]=_.getSeconds(),R[g+4>>>2>>>0]=_.getMinutes(),R[g+8>>>2>>>0]=_.getHours(),R[g+12>>>2>>>0]=_.getDate(),R[g+16>>>2>>>0]=_.getMonth(),R[g+20>>>2>>>0]=_.getFullYear()-1900,R[g+24>>>2>>>0]=_.getDay();var O=oe(_)|0;R[g+28>>>2>>>0]=O,R[g+36>>>2>>>0]=-(_.getTimezoneOffset()*60);var $=new Date(_.getFullYear(),0,1),U=new Date(_.getFullYear(),6,1).getTimezoneOffset(),V=$.getTimezoneOffset(),Z=(U!=V&&_.getTimezoneOffset()==Math.min(V,U))|0;R[g+32>>>2>>>0]=Z}var fe=function(h){h>>>=0;var g=(()=>{var _=new Date(R[h+20>>>2>>>0]+1900,R[h+16>>>2>>>0],R[h+12>>>2>>>0],R[h+8>>>2>>>0],R[h+4>>>2>>>0],R[h>>>2>>>0],0),O=R[h+32>>>2>>>0],$=_.getTimezoneOffset(),U=new Date(_.getFullYear(),0,1),V=new Date(_.getFullYear(),6,1).getTimezoneOffset(),Z=U.getTimezoneOffset(),ce=Math.min(Z,V);if(O<0)R[h+32>>>2>>>0]=+(V!=Z&&ce==$);else if(O>0!=(ce==$)){var _e=Math.max(Z,V),We=O>0?ce:_e;_.setTime(_.getTime()+(We-$)*6e4)}R[h+24>>>2>>>0]=_.getDay();var tt=oe(_)|0;R[h+28>>>2>>>0]=tt,R[h>>>2>>>0]=_.getSeconds(),R[h+4>>>2>>>0]=_.getMinutes(),R[h+8>>>2>>>0]=_.getHours(),R[h+12>>>2>>>0]=_.getDate(),R[h+16>>>2>>>0]=_.getMonth(),R[h+20>>>2>>>0]=_.getYear();var Ye=_.getTime();return isNaN(Ye)?-1:Ye/1e3})();return BigInt(g)},$e=function(h,g,_,O){h>>>=0,g>>>=0,_>>>=0,O>>>=0;var $=new Date().getFullYear(),U=new Date($,0,1),V=new Date($,6,1),Z=U.getTimezoneOffset(),ce=V.getTimezoneOffset(),_e=Math.max(Z,ce);T[h>>>2>>>0]=_e*60,R[g>>>2>>>0]=+(Z!=ce);var We=De=>{var Ot=De>=0?"-":"+",Qt=Math.abs(De),Xr=String(Math.floor(Qt/60)).padStart(2,"0"),Kr=String(Qt%60).padStart(2,"0");return`UTC${Ot}${Xr}${Kr}`},tt=We(Z),Ye=We(ce);ce<Z?(nn(tt,_,17),nn(Ye,O,17)):(nn(tt,O,17),nn(Ye,_,17))},Pe=()=>Date.now(),ze=()=>4294901760,He=(h,g)=>Math.ceil(h/g)*g,at=h=>{var g=Ji.buffer.byteLength,_=(h-g+65535)/65536|0;try{return Ji.grow(_),I(),1}catch{}};function Le(h){h>>>=0;var g=N.length,_=ze();if(h>_)return!1;for(var O=1;O<=4;O*=2){var $=g*(1+.2/O);$=Math.min($,h+100663296);var U=Math.min(_,He(Math.max(h,$),65536)),V=at(U);if(V)return!0}return!1}var rt={},Nt=()=>s||"./this.program",Et=()=>{if(!Et.strings){var h=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:h,_:Nt()};for(var _ in rt)rt[_]===void 0?delete g[_]:g[_]=rt[_];var O=[];for(var _ in g)O.push(`${_}=${g[_]}`);Et.strings=O}return Et.strings};function ur(h,g){h>>>=0,g>>>=0;var _=0,O=0;for(var $ of Et()){var U=g+_;T[h+O>>>2>>>0]=U,_+=nn($,U,1/0)+1,O+=4}return 0}function Rr(h,g){h>>>=0,g>>>=0;var _=Et();T[h>>>2>>>0]=_.length;var O=0;for(var $ of _)O+=vr($)+1;return T[g>>>2>>>0]=O,0}var Hr=0,br=()=>Me||Hr>0,ft=h=>{var g;br()||((g=r.onExit)==null||g.call(r,h),y=!0),l(h,new ue(h))},Bt=(h,g)=>{ft(h)},fr=Bt;function Ir(h){try{var g=Ee.getStreamFromFD(h);return A.close(g),0}catch(_){if(typeof A>"u"||_.name!=="ErrnoError")throw _;return _.errno}}var fn=(h,g,_,O)=>{for(var $=0,U=0;U<_;U++){var V=T[g>>>2>>>0],Z=T[g+4>>>2>>>0];g+=8;var ce=A.read(h,S,V,Z,O);if(ce<0)return-1;if($+=ce,ce<Z)break}return $};function Zt(h,g,_,O){g>>>=0,_>>>=0,O>>>=0;try{var $=Ee.getStreamFromFD(h),U=fn($,g,_);return T[O>>>2>>>0]=U,0}catch(V){if(typeof A>"u"||V.name!=="ErrnoError")throw V;return V.errno}}function pr(h,g,_,O){g=Xe(g),O>>>=0;try{if(isNaN(g))return 61;var $=Ee.getStreamFromFD(h);return A.llseek($,g,_),G[O>>>3>>>0]=BigInt($.position),$.getdents&&g===0&&_===0&&($.getdents=null),0}catch(U){if(typeof A>"u"||U.name!=="ErrnoError")throw U;return U.errno}}var Un=(h,g,_,O)=>{for(var $=0,U=0;U<_;U++){var V=T[g>>>2>>>0],Z=T[g+4>>>2>>>0];g+=8;var ce=A.write(h,S,V,Z,O);if(ce<0)return-1;if($+=ce,ce<Z)break}return $};function Mn(h,g,_,O){g>>>=0,_>>>=0,O>>>=0;try{var $=Ee.getStreamFromFD(h),U=Un($,g,_);return T[O>>>2>>>0]=U,0}catch(V){if(typeof A>"u"||V.name!=="ErrnoError")throw V;return V.errno}}if(A.createPreloadedFile=cr,A.preloadFile=_r,A.staticInit(),qn(),Ve(),r.noExitRuntime&&(Me=r.noExitRuntime),r.preloadPlugins&&(ya=r.preloadPlugins),r.print&&(x=r.print),r.printErr&&(w=r.printErr),r.wasmBinary&&(v=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(s=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()();var Ei,dr,Wa,Gn,yd,ws,Ji,vd;function SN(h){Ei=h.ea,dr=h.fa,Wa=h.ga,Gn=h.ia,yd=h.ja,ws=h.ka,Ji=h.ca,vd=h.ha}var jN={g:yr,b:Sr,A:ot,V:gt,W:St,L:At,M:qt,J:er,C:ia,aa:xl,F:Er,E:tr,o:tu,_:ru,B:Fe,p:Tt,m:Mt,X:Fn,$:zn,x:ud,ba:og,H:sg,f:fg,a:Qi,q:hd,i:dg,j:hg,D:pg,e:gg,k:mg,c:yg,l:pd,d:vg,h:xg,t:bg,N:Sl,O:se,P:fe,Q:$e,Y:Pe,K:Le,S:ur,T:Rr,Z:fr,y:Ir,U:Zt,R:pr,z:Mn,G:TN,u:AN,n:PN,s:NN,v:CN,I:_N,r:ON,w:MN};function _N(h){var g=me();try{nt(h)()}catch(_){if(Se(g),_!==_+0)throw _;Gn(1,0)}}function CN(h,g){var _=me();try{return nt(h)(g)}catch(O){if(Se(_),O!==O+0)throw O;return Gn(1,0),0n}}function PN(h,g,_,O,$){var U=me();try{return nt(h)(g,_,O,$)}catch(V){if(Se(U),V!==V+0)throw V;Gn(1,0)}}function NN(h,g,_,O){var $=me();try{return nt(h)(g,_,O)}catch(U){if(Se($),U!==U+0)throw U;Gn(1,0)}}function ON(h,g){var _=me();try{nt(h)(g)}catch(O){if(Se(_),O!==O+0)throw O;Gn(1,0)}}function MN(h,g,_,O){var $=me();try{nt(h)(g,_,O)}catch(U){if(Se($),U!==U+0)throw U;Gn(1,0)}}function AN(h,g,_,O){var $=me();try{return nt(h)(g,_,O)}catch(U){if(Se($),U!==U+0)throw U;Gn(1,0)}}function TN(h,g,_){var O=me();try{return nt(h)(g,_)}catch($){if(Se(O),$!==$+0)throw $;Gn(1,0)}}function EN(h){h=Object.assign({},h);var g=O=>$=>O($)>>>0,_=O=>()=>O()>>>0;return h.ea=g(h.ea),h.ga=g(h.ga),h._emscripten_stack_alloc=g(h._emscripten_stack_alloc),h.ka=_(h.ka),h}function wg(){if(lr>0){en=wg;return}if(L(),lr>0){en=wg;return}function h(){var g;r.calledRun=!0,!y&&(W(),C==null||C(r),(g=r.onRuntimeInitialized)==null||g.call(r),K())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),h()},1)):h()}var ks;return ks=await H(),wg(),F?t=r:t=new Promise((h,g)=>{C=h,j=g}),t}const rne=Object.freeze(Object.defineProperty({__proto__:null,default:bN},Symbol.toStringTag,{value:"Module"})),nne=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Ascii = (2,1); Byte = (1,1)
    Srational = (10,8)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevelRepeatDim = (50713, Type.Short)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 10:
            flat = [item for sublist in value for item in sublist]  # [[num,den]...]
            return struct.pack('<%sl' % len(flat), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def pack_dng_from_u16(raw_u16_bytes_le, width, height, cfa_str, black_level_list, cm_flat, make_str, model_str, unique_model_str):
    raw_data = np.frombuffer(raw_u16_bytes_le, dtype=np.uint16).copy()
    raw_data = raw_data.astype(np.int32)
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    white_level = 65019
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]
    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}

    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]),
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, make_str),
        dngTag(Tag.Model, model_str),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]),
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, unique_model_str),
    ]

    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0]))
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)

    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size

    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC

    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break

    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))

    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12

    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)

    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`;let Im=null;async function ane(e){return Im||(Im=(async()=>{if(!window.loadPyodide)throw new Error("Pyodide missing: window.loadPyodide not found.");e==null||e("Loading Pyodide...");const t=await window.loadPyodide();return e==null||e("Loading numpy..."),await t.loadPackage("numpy"),e==null||e("Init DNG writer kernel..."),await t.runPythonAsync(nne),t})()),Im}let Lm=null;async function ine(){Lm||(Lm=bN({locateFile:(t,r)=>t.endsWith("joraw.wasm")?new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href:r+t}));const e=await Lm;return e.LibRaw||e.JoRaw}function one(e,t,r,n){const a=t*r,i=new Float32Array(a);let o=0;for(let s=0;s<r;s++){const l=(s&1)<<1;for(let u=0;u<t;u++){const f=l|u&1;i[o]=e[o]-n[f],o++}}return i}function sne(e,t,r,n){const a=t*r,i=new Uint16Array(a);let o=0;for(let s=0;s<r;s++){const l=(s&1)<<1;for(let u=0;u<t;u++){const f=l|u&1;let d=e[o]+n[f];d<0&&(d=0),d>65535&&(d=65535),i[o]=d+.5|0,o++}}return i}function lne(e){const t=new Uint16Array([255]);if(new Uint8Array(t.buffer)[0]===255)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);const n=new Uint8Array(e.length*2),a=new DataView(n.buffer);for(let i=0;i<e.length;i++)a.setUint16(i*2,e[i],!0);return n}function cne(e){const t=e.trim(),r=[];let n=0;const a=f=>f>="0"&&f<="9",i=f=>f>="A"&&f<="Z"||f>="a"&&f<="z";for(;n<t.length;){const f=t[n];if(f<=" "){n++;continue}if(f==="("){r.push({t:"lp"}),n++;continue}if(f===")"){r.push({t:"rp"}),n++;continue}if(f===","){r.push({t:"comma"}),n++;continue}if(f==="+"&&t[n+1]==="+"){r.push({t:"op",v:"++"}),n+=2;continue}if(f==="+"){r.push({t:"op",v:"+"}),n++;continue}if(f==="-"){r.push({t:"op",v:"-"}),n++;continue}if(f==="*"){r.push({t:"op",v:"*"}),n++;continue}if(f==="/"){r.push({t:"op",v:"/"}),n++;continue}if(a(f)||f==="."){let d=n+1;for(;d<t.length&&(a(t[d])||t[d]===".");)d++;const p=Number(t.slice(n,d));if(!Number.isFinite(p))throw new Error(`Bad number: ${t.slice(n,d)}`);r.push({t:"num",v:p}),n=d;continue}if(i(f)){let d=n+1;for(;d<t.length&&i(t[d]);)d++;const p=t.slice(n,d).toUpperCase();let m=d;for(;m<t.length&&t[m]<=" ";)m++;t[m]==="("&&(p==="MAX"||p==="MIN"||p==="MID")?r.push({t:"func",name:p}):r.push({t:"id",v:p}),n=d;continue}throw new Error(`Unexpected char at ${n}: ${f}`)}const o=[];for(let f=0;f<r.length;f++){const d=r[f],p=o[o.length-1],m=!p||p.t==="op"||p.t==="lp"||p.t==="comma";if(d.t==="op"&&(d.v==="-"||d.v==="+")&&m){o.push({t:"num",v:0}),o.push(d);continue}o.push(d)}const s=[],l=f=>f.t==="num"||f.t==="id"||f.t==="rp",u=f=>f.t==="num"||f.t==="id"||f.t==="lp"||f.t==="func";for(let f=0;f<o.length;f++){const d=o[f],p=s[s.length-1];p&&l(p)&&u(d)&&s.push({t:"op",v:"*"}),s.push(d)}return s}function n4(e){return e==="*"||e==="/"?2:1}function une(e){const t=[],r=[],n=[];for(const a of e){if(a.t==="num"||a.t==="id"){t.push(a);continue}if(a.t==="func"){r.push(a),n.push(1);continue}if(a.t==="comma"){for(;r.length&&r[r.length-1].t!=="lp";)t.push(r.pop());if(!r.length)throw new Error("Comma found outside parentheses.");if(!n.length)throw new Error("Comma found but no function context.");n[n.length-1]+=1;continue}if(a.t==="lp"){r.push(a);continue}if(a.t==="rp"){for(;r.length&&r[r.length-1].t!=="lp";)t.push(r.pop());if(!r.length)throw new Error("Mismatched parentheses");if(r.pop(),r.length&&r[r.length-1].t==="func"){const i=r.pop(),o=n.pop()??1;t.push({t:"func",name:i.name,argc:o})}continue}if(a.t==="op"){for(;r.length;){const i=r[r.length-1];if(i.t!=="op")break;const o=n4(a.v);if(n4(i.v)>=o)t.push(r.pop());else break}r.push(a);continue}}for(;r.length;){const a=r.pop();if(a.t==="lp"||a.t==="rp")throw new Error("Mismatched parentheses");if(a.t==="func"){const i=n.pop()??1;t.push({t:"func",name:a.name,argc:i})}else t.push(a)}if(n.length!==0)throw new Error("Internal error: argCountStack not empty.");return t}function fne(e,t){for(let n=1;n<t;n++){const a=e[n];let i=n-1;for(;i>=0&&e[i]>a;)e[i+1]=e[i],i--;e[i+1]=a}const r=t-1>>1;return e[r]}function dne(e,t,r){if(t.size===0)throw new Error("No RAW loaded.");const n=t.values().next().value,a=n.width,i=n.height,o=a*i,s=new Map,l=v=>{const y=t.get(v);if(!y)throw new Error(`Unknown RAW key: ${v}`);if(y.width!==a||y.height!==i)throw new Error("Dimension mismatch among RAWs.");let k=s.get(v);if(!k){k=new Float64Array(o);const C=y.workF32;for(let j=0;j<o;j++)k[j]=C[j];s.set(v,k)}return{kind:"img",v:k,w:a,h:i,firstId:v}},u=v=>({kind:"scalar",v}),f=v=>{if(v.kind==="img")return v;const y=new Float64Array(o);return y.fill(v.v),{kind:"img",v:y,w:a,h:i,firstId:void 0}},d=(v,y)=>v??y,p=[];for(const v of e){if(v.t==="num"){p.push(u(v.v));continue}if(v.t==="id"){p.push(l(v.v));continue}if(v.t==="func"){const y=v.argc??1;if(y<1)throw new Error(`${v.name.toLowerCase()}(...) requires at least 1 argument.`);const k=[];for(let M=0;M<y;M++){const E=p.pop();if(!E)throw new Error(`${v.name.toLowerCase()}(...) missing argument(s).`);k.push(E)}if(k.reverse(),k.every(M=>M.kind==="scalar")){const M=k.map(E=>E.v);for(let E=1;E<M.length;E++){const R=M[E];let T=E-1;for(;T>=0&&M[T]>R;)M[T+1]=M[T],T--;M[T+1]=R}if(v.name==="MAX")p.push(u(M[M.length-1]));else if(v.name==="MIN")p.push(u(M[0]));else{const E=M.length-1>>1;p.push(u(M[E]))}continue}const j=k.map(f),S=j.reduce((M,E)=>d(M,E.firstId),void 0),N=new Float64Array(o);if(v.name==="MAX"||v.name==="MIN"){const M=j[0].v;for(let E=0;E<o;E++)N[E]=M[E];if(v.name==="MAX")for(let E=1;E<j.length;E++){const R=j[E].v;for(let T=0;T<o;T++)R[T]>N[T]&&(N[T]=R[T])}else for(let E=1;E<j.length;E++){const R=j[E].v;for(let T=0;T<o;T++)R[T]<N[T]&&(N[T]=R[T])}p.push({kind:"img",v:N,w:a,h:i,firstId:S});continue}if(v.name==="MID"){const M=j.length,E=new Float64Array(M);for(let R=0;R<o;R++){for(let T=0;T<M;T++)E[T]=j[T].v[R];N[R]=fne(E,M)}p.push({kind:"img",v:N,w:a,h:i,firstId:S});continue}throw new Error(`Unknown function: ${v.name}`)}if(v.t==="op"){const y=v.v,k=p.pop(),C=p.pop();if(!C||!k)throw new Error(`Operator ${y} missing operands`);if(y==="++"){if(!r)throw new Error("Formula uses '++' but ppRange is null.");const R=f(C),T=f(k),D=T.firstId;if(!D){p.push(R);continue}const B=t.get(D);if(!B)throw new Error(`Mask source RAW not found: ${D}`);const G=R.v,z=T.v,F=new Float64Array(o),I=r.min,L=r.max,W=B.origU16;for(let K=0;K<o;K++){const ae=W[K];F[K]=ae>=I&&ae<=L?z[K]:G[K]}p.push({kind:"img",v:F,w:a,h:i,firstId:d(R.firstId,D)});continue}if(C.kind==="scalar"&&k.kind==="scalar"){if(y==="+")p.push(u(C.v+k.v));else if(y==="-")p.push(u(C.v-k.v));else if(y==="*")p.push(u(C.v*k.v));else if(y==="/")p.push(u(C.v/k.v));else throw new Error(`Unsupported op ${y}`);continue}const j=f(C),S=f(k),N=j.v,M=S.v,E=new Float64Array(o);if(y==="+")for(let R=0;R<o;R++)E[R]=N[R]+M[R];else if(y==="-")for(let R=0;R<o;R++)E[R]=N[R]-M[R];else if(y==="*")for(let R=0;R<o;R++)E[R]=N[R]*M[R];else if(y==="/")for(let R=0;R<o;R++)E[R]=N[R]/M[R];else throw new Error(`Unsupported op ${y}`);p.push({kind:"img",v:E,w:a,h:i,firstId:d(j.firstId,S.firstId)});continue}}if(p.length!==1)throw new Error("Expression did not reduce to a single value.");const m=p[0],b=m.kind==="img"?m:f(m),x=new Float32Array(o),w=b.v;for(let v=0;v<o;v++)x[v]=w[v];return x}async function hne(e,t,r,n,a,i,o,s,l){if(Object.keys(e).length===0)throw new Error("No files loaded.");if(!t.trim())throw new Error("Formula empty.");const f=t.includes("++");if(f&&!o)throw new Error("Formula contains '++' but ++Range is not provided.");l==null||l("Parsing formula...");const d=cne(t),p=une(d),m=new Set;for(const D of d)D.t==="id"&&m.add(D.v);for(const D of m)if(!e[D])throw new Error(`Formula references "${D}" but it is not loaded.`);l==null||l("Initializing joraw...");const b=await ine(),x=[];let w=0,v=0;const y=Array.from(m);for(let D=0;D<y.length;D++){const B=y[D],G=e[B];l==null||l(`Decoding ${B}: ${G.name} ...`);const z=await G.arrayBuffer(),F=new b;try{await F.open(new Uint8Array(z));const I=F.getRawImage(),L=I.width,W=I.height,K=new Uint16Array(I.data),ae=one(K,L,W,r);if(x.length===0)w=L,v=W;else if(L!==w||W!==v)throw new Error(`Dimension mismatch: ${B} is ${L}x${W}, expected ${w}x${v}.`);x.push({key:B,file:G,width:L,height:W,origU16:K,workF32:ae})}finally{F.delete?F.delete():F.close&&F.close()}}if(x.length===0)throw new Error("No referenced RAWs loaded.");l==null||l("Evaluating expression (float domain)...");const k=new Map(x.map(D=>[D.key,D])),C=dne(p,k,f?o:null);if(s){let D=-1/0;for(let B=0;B<C.length;B++)C[B]>D&&(D=C[B]);if(D>1e-6){const z=(65019-Math.max(...n))/D;l==null||l(`Auto-filling 16bit: Max=${D.toFixed(2)}, Factor=${z.toFixed(4)}`);for(let F=0;F<C.length;F++)C[F]*=z}}l==null||l("Finalizing to 16-bit (add OutputBL pedestal + clip)...");const j=sne(C,w,v,n),S=lne(j),N=a&&a.length===9?a:[1,0,0,0,1,0,0,0,1],M=await ane(l);l==null||l("Packing DNG container..."),M.globals.set("js_raw_u16_le",S),M.globals.set("js_width",w),M.globals.set("js_height",v),M.globals.set("js_cfa",String(i||"RGGB")),M.globals.set("js_bl_out",Array.from(n)),M.globals.set("js_cm_flat",N),M.globals.set("js_make","JO-Workstation"),M.globals.set("js_model","StackingTool"),M.globals.set("js_unique_model","JO StackingTool 16bit");const E=await M.runPythonAsync(`
pack_dng_from_u16(
  js_raw_u16_le.to_py(),
  js_width,
  js_height,
  js_cfa,
  js_bl_out.to_py(),
  js_cm_flat.to_py(),
  js_make,
  js_model,
  js_unique_model
)
  `),R=E.toJs();E.destroy&&E.destroy();const T=new Uint8Array(R.byteLength);return T.set(R),T.buffer}const pne=({isOpen:e,onClose:t,zIndex:r,onFocus:n})=>{const[a,i]=P.useState({}),[o,s]=P.useState(0),[l,u]=P.useState("0 0 0 0"),[f,d]=P.useState("0 0 0 0"),[p,m]=P.useState(()=>localStorage.getItem("stacking_formula")||""),[b,x]=P.useState(!0),[w,v]=P.useState("0-14000"),[y,k]=P.useState(!0),[C,j]=P.useState(""),[S,N]=P.useState("RGGB"),[M,E]=P.useState("Idle"),[R,T]=P.useState(!1),[D,B]=P.useState(null),G=P.useRef(null),z=P.useMemo(()=>Object.keys(cc).sort(),[]);P.useEffect(()=>{localStorage.setItem("stacking_formula",p)},[p]);const F=re=>{let Q="",le=re;for(;le>=0;)Q=String.fromCharCode(le%26+65)+Q,le=Math.floor(le/26)-1;return Q},I=re=>{if(re.target.files&&re.target.files.length>0){const Q={...a};let le=o;Array.from(re.target.files).forEach(Ne=>{const ie=F(le++);Q[ie]=Ne}),i(Q),s(le)}re.target.value=""},L=()=>{i({}),s(0),B(null),E("Idle")},W=(re,Q)=>{const le=re.trim().split(/[\s,]+/).map(Number);if(le.length<1||le.some(isNaN))throw new Error(`Invalid ${Q} Black Level format.`);return[le[0],le.length>1?le[1]:le[0],le.length>2?le[2]:le[0],le.length>3?le[3]:le[0]]},K=async()=>{if(Object.keys(a).length===0){B("No files loaded.");return}if(!p.trim()){B("Please enter a formula.");return}let re,Q;try{re=W(l,"Input"),Q=W(f,"Output")}catch(ie){B(ie.message);return}let le=null;if(b){const ie=w.split("-").map(ge=>parseFloat(ge.trim()));if(ie.length===2&&!isNaN(ie[0])&&!isNaN(ie[1]))le={min:Math.min(ie[0],ie[1]),max:Math.max(ie[0],ie[1])};else{B("Invalid ++Range format. Use min-max (e.g., 0-14000).");return}}else if(p.includes("++")){B("Formula contains '++' operator but ++Range is disabled.");return}let Ne=null;if(C.trim()&&(Ne=C.trim().split(/[\s,\n]+/).map(Number),Ne.length!==9||Ne.some(isNaN))){B("Color Matrix must be 9 numbers.");return}T(!0),B(null),E("Starting...");try{await new Promise(ue=>setTimeout(ue,50));const ie=await hne(a,p,re,Q,Ne,S,le,y,ue=>E(ue));E("Creating Download...");const ge=new Blob([ie],{type:"image/x-adobe-dng"}),ne=URL.createObjectURL(ge),H=document.createElement("a");H.href=ne,H.download=`Stacked_Result_${Date.now()}.dng`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(ne),E("Done!")}catch(ie){console.error(ie),B(ie.message),E("Failed")}finally{T(!1)}},ae=()=>{d(l)};return e?c.jsxs(vl,{initialPosition:{x:window.innerWidth/2-250,y:100},onClose:t,zIndex:r,onFocus:n,className:"w-[500px] bg-white dark:bg-slate-900 border-2 border-black dark:border-white shadow-2xl flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-emerald-700 text-white",children:[c.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest",children:"Advanced Math Stacking Tool"}),c.jsx("button",{onClick:t,className:"hover:text-red-300 transition-colors",children:""})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4 overflow-y-auto max-h-[80vh]",children:[c.jsx("div",{className:"h-28 border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-black/30 rounded p-2 overflow-y-auto",children:Object.keys(a).length===0?c.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-xs",children:"No files loaded. Click 'Add Files' below."}):c.jsx("div",{className:"space-y-1",children:Object.entries(a).map(([re,Q])=>{const le=Q;return c.jsxs("div",{className:"flex justify-between text-xs border-b border-gray-200 dark:border-slate-800 pb-1 last:border-0",children:[c.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400 w-8",children:re}),c.jsx("span",{className:"truncate text-gray-700 dark:text-slate-300 flex-1",children:le.name}),c.jsxs("span",{className:"text-gray-400",children:[(le.size/1024/1024).toFixed(1),"MB"]})]},re)})})}),c.jsxs("div",{className:"flex flex-col gap-3 flex-shrink-0",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"file",ref:G,multiple:!0,className:"hidden",onChange:I,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var re;return(re=G.current)==null?void 0:re.click()},className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-slate-800 dark:hover:bg-slate-700 py-1 rounded text-xs font-bold transition-colors",children:"Add Files"}),c.jsx("button",{onClick:L,className:"px-3 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 py-1 rounded text-xs font-bold transition-colors",children:"Clear"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Input BL (Subtract)"}),c.jsx("input",{type:"text",value:l,onChange:re=>u(re.target.value),className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none"}),c.jsx("div",{className:"text-[9px] text-gray-400 mt-0.5",children:"(0,0), (0,1), (1,0), (1,1)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Output BL (Add to Result)"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("input",{type:"text",value:f,onChange:re=>d(re.target.value),className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none"}),c.jsx("button",{onClick:ae,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 rounded text-[9px]",title:"Copy Input to Output",children:""})]})]})]}),c.jsxs("div",{className:"flex flex-col justify-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Options"}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer mb-2",children:[c.jsx("input",{type:"checkbox",checked:y,onChange:re=>k(re.target.checked),className:"rounded text-emerald-600 focus:ring-emerald-500"}),c.jsx("span",{className:"text-[10px] font-bold uppercase text-emerald-600 dark:text-emerald-400",children:"16bit (Auto Fill)"})]}),c.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:re=>x(re.target.checked),className:"rounded",title:"Enable Conditional ++ Operator"}),c.jsx("span",{className:`text-[9px] font-bold uppercase ${b?"text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"++Range:"}),c.jsx("input",{type:"text",value:w,onChange:re=>v(re.target.value),disabled:!b,placeholder:"min-max",className:"w-full text-[10px] px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none disabled:opacity-50"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Math Formula ( + - * / and ++ )"}),c.jsx("textarea",{value:p,onChange:re=>m(re.target.value),placeholder:"e.g. (A+B)/2 or A ++ 4*B",className:"w-full h-14 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none resize-none font-mono"}),c.jsxs("p",{className:"text-[9px] text-gray-400 mt-1 leading-tight",children:["Operators: +, -, *, /, ( ). ",c.jsx("br",{}),c.jsx("span",{className:"text-indigo-400 font-bold",children:"++"})," Operator: ",c.jsx("code",{children:"A ++ B"}),' means "Use B if B is in range, else use A". ',c.jsx("br",{}),"Inputs are linearized float32 (Raw - InputBL)."]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Color Matrix (9 vals)"}),c.jsxs("select",{className:"text-[9px] bg-gray-100 dark:bg-slate-800 border border-black dark:border-slate-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer",onChange:re=>{const Q=cc[re.target.value];Q&&j(Q),re.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Presets..."}),z.map(re=>c.jsx("option",{value:re,children:re},re))]})]}),c.jsx("input",{type:"text",value:C,onChange:re=>j(re.target.value),placeholder:"e.g. 1 0 0 0 1 0 0 0 1",className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"CFA Pattern"}),c.jsxs("select",{value:S,onChange:re=>N(re.target.value),className:"w-full bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-1 text-xs font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),D&&c.jsx("div",{className:"text-red-500 text-xs bg-red-50 dark:bg-red-900/20 p-2 rounded text-center font-bold",children:D}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("div",{className:"flex-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold truncate",children:M}),c.jsx("button",{onClick:K,disabled:R,className:`px-6 py-2 text-sm font-bold uppercase tracking-wide text-white rounded shadow-md transition-all active:scale-95 ${R?"bg-gray-400 cursor-wait":"bg-emerald-600 hover:bg-emerald-500"}`,children:"Process & Save DNG"})]})]})]})]}):null},gne="http://localhost:5428",mne=(e=!1)=>{const[t,r]=P.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return P.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${gne}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const l=await s.json(),u=`Connected (${l.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===l.exiftool&&f.hasDngConverter===!!l.dng_converter?f:{isConnected:!0,message:u,version:l.exiftool,hasDngConverter:!!l.dng_converter})}else r(l=>l.isConnected===!1&&l.message==="Service Error"?l:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},yne="JTR_BlobStore",Ki="raw_files",vne=1,ig=()=>new Promise((e,t)=>{const r=indexedDB.open(yne,vne);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(Ki)||a.createObjectStore(Ki)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),a4=async(e,t)=>{const r=await ig();return new Promise((n,a)=>{const i=r.transaction(Ki,"readwrite");i.objectStore(Ki).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},xne=async e=>{const t=await ig();return new Promise((r,n)=>{const o=t.transaction(Ki,"readonly").objectStore(Ki).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},bne=async()=>{const e=await ig();return new Promise((t,r)=>{const n=e.transaction(Ki,"readwrite");n.objectStore(Ki).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},wN="jtr_workspace_index",wne=e=>{try{const t=JSON.stringify(e);localStorage.setItem(wN,t)}catch(t){console.error("Failed to save workspace index",t)}},kne=()=>{try{const e=localStorage.getItem(wN);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},Sne=async e=>{const n=(await ig()).transaction(Ki,"readwrite").objectStore(Ki),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},jne=[{x:3050,y:1973},{x:4245,y:1980},{x:3043,y:2870},{x:4243,y:2876}],_ne=1195,i4=150,o4=50,Cne=[{x:3528,y:2437.5,ori:2},{x:3775,y:2419,ori:2},{x:3638.5,y:2303,ori:1},{x:3653,y:2548.5,ori:1},{x:3082,y:2413,ori:2},{x:2825,y:2427,ori:2},{x:2946,y:2300.5,ori:1},{x:2966,y:2550,ori:1},{x:3638.5,y:3e3,ori:1},{x:3657.5,y:3248.5,ori:1},{x:3521.5,y:3135,ori:2},{x:3770,y:3108.5,ori:2},{x:4375.5,y:3064.5,ori:2},{x:4620.5,y:3040,ori:2},{x:4486.5,y:2934,ori:1},{x:4509.5,y:3182.5,ori:1},{x:2066.5,y:1726,ori:2},{x:2176.5,y:1597,ori:1},{x:2194.5,y:1843,ori:1},{x:2313.5,y:1705,ori:2},{x:2675.5,y:1799.5,ori:2},{x:2789.5,y:1674,ori:1},{x:2926,y:1787.5,ori:2},{x:2810.5,y:1921.5,ori:1},{x:4380.5,y:1816,ori:2},{x:4497.5,y:1687,ori:1},{x:4513,y:1934.5,ori:1},{x:4628,y:1799.5,ori:2},{x:5099,y:1622.5,ori:1},{x:4985.5,y:1751,ori:2},{x:5122,y:1867.5,ori:1},{x:5229,y:1732,ori:2},{x:2194.5,y:2428,ori:2},{x:2305.5,y:2295.5,ori:1},{x:2327,y:2544,ori:1},{x:2442,y:2405,ori:2},{x:3530.5,y:1741.5,ori:2},{x:3640.5,y:1610,ori:1},{x:3777.5,y:1719.5,ori:2},{x:3666,y:1856.5,ori:1},{x:4222,y:2443.5,ori:2},{x:4470.5,y:2422,ori:2},{x:4334.5,y:2309,ori:1},{x:4356.5,y:2554,ori:1},{x:4965,y:2313,ori:1},{x:4852.5,y:2446,ori:2},{x:4987,y:2561,ori:1},{x:5097,y:2427,ori:2},{x:4981.5,y:3141.5,ori:2},{x:5096,y:3009,ori:1},{x:5222.5,y:3122.5,ori:2},{x:5115.5,y:3256.5,ori:1},{x:2779,y:2928,ori:1},{x:2667,y:3064.5,ori:2},{x:2799,y:3173.5,ori:1},{x:2917.5,y:3043,ori:2},{x:2167.5,y:2993,ori:1},{x:2052,y:3130,ori:2},{x:2187.5,y:3243.5,ori:1},{x:2304.5,y:3108.5,ori:2}];function Pne(e,t){let r=[],n=[];for(let o=0;o<4;o++){let s=e[o].x,l=e[o].y,u=t[o].x,f=t[o].y;r.push([s,l,1,0,0,0,-s*u,-l*u]),r.push([0,0,0,s,l,1,-s*f,-l*f]),n.push(u),n.push(f)}const a=8;for(let o=0;o<a;o++){let s=o;for(let l=o+1;l<a;l++)Math.abs(r[l][o])>Math.abs(r[s][o])&&(s=l);[r[o],r[s]]=[r[s],r[o]],[n[o],n[s]]=[n[s],n[o]];for(let l=o+1;l<a;l++){const u=r[l][o]/r[o][o];n[l]-=u*n[o];for(let f=o;f<a;f++)r[l][f]-=u*r[o][f]}}const i=new Array(a).fill(0);for(let o=a-1;o>=0;o--){let s=0;for(let l=o+1;l<a;l++)s+=r[o][l]*i[l];i[o]=(n[o]-s)/r[o][o]}return[[i[0],i[1],i[2]],[i[3],i[4],i[5]],[i[6],i[7],1]]}function Nne(e,t,r){const n=e[2][0]*t+e[2][1]*r+e[2][2];return{x:(e[0][0]*t+e[0][1]*r+e[0][2])/n,y:(e[1][0]*t+e[1][1]*r+e[1][2])/n}}function One(e){if(e.length!==4)return[];const t=Pne(jne,e),n=Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y)/_ne;return Cne.map(a=>{const i=Nne(t,a.x,a.y);let o,s;return a.ori===1?(o=i4*n,s=o4*n):(o=o4*n,s=i4*n),{x:i.x-o/2,y:i.y-s/2,w:o,h:s,ori:a.ori}})}const ea=1024,s4=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,l=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),p=f*t*4,m=d*n*4;for(let b=0;b<t;b++){const w=Math.floor(b*l)*4,v=p+b*4,y=m+w;s[v]=o[y],s[v+1]=o[y+1],s[v+2]=o[y+2],s[v+3]=o[y+3]}}return i},Mne=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(p=>d[p]=l),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d.some(p=>p>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},Ane=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:l,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],p=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,m=P.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:k,y:C,width:j,height:S}=e,N=x1(u,{x:k,y:C,w:j,h:S},o),M=[0,0,0,0],E=[0,0,0,0],R=Math.floor(C),T=Math.floor(k);for(let D=0;D<N.height;D++){const B=D*N.width;for(let G=0;G<N.width;G++){const z=N.data[B+G],F=R+D,I=T+G,L=F%2,W=I%2,K=L*2+W;M[K]+=z,E[K]++}}return M.map((D,B)=>E[B]>0?D/E[B]:0)}catch(k){return console.error("Unmix calc error",k),null}},[e,u,o]),b=(k,C,j)=>f?C<=1e-4?0:(k-j)/C:null,x=(k,C)=>p?k-d[C]:k,w=()=>{if(!p){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let k,C,j,S;n?(S=0,C=1,j=2,k=3):(k=0,C=1,j=2,S=3);const N=E=>e.means[E]-d[E],M=E=>e.stdDevs[E];localStorage.setItem("import_signal_r",N(k).toString()),localStorage.setItem("import_signal_g1",N(C).toString()),localStorage.setItem("import_signal_g2",N(j).toString()),localStorage.setItem("import_signal_b",N(S).toString()),localStorage.setItem("import_sigma_r",M(k).toString()),localStorage.setItem("import_sigma_g1",M(C).toString()),localStorage.setItem("import_sigma_g2",M(j).toString()),localStorage.setItem("import_sigma_b",M(S).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},v=n?[{name:"B",desc:"(0,0)",mean:x(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:b(e.means[0],e.stdDevs[0],d[0]),unmixed:m?m[0]:null},{name:"G1",desc:"(0,1)",mean:x(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:b(e.means[1],e.stdDevs[1],d[1]),unmixed:m?m[1]:null},{name:"G2",desc:"(1,0)",mean:x(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:b(e.means[2],e.stdDevs[2],d[2]),unmixed:m?m[2]:null},{name:"R",desc:"(1,1)",mean:x(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:b(e.means[3],e.stdDevs[3],d[3]),unmixed:m?m[3]:null}]:[{name:"R",desc:"(0,0)",mean:x(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:b(e.means[0],e.stdDevs[0],d[0]),unmixed:m?m[0]:null},{name:"G1",desc:"(0,1)",mean:x(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:b(e.means[1],e.stdDevs[1],d[1]),unmixed:m?m[1]:null},{name:"G2",desc:"(1,0)",mean:x(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:b(e.means[2],e.stdDevs[2],d[2]),unmixed:m?m[2]:null},{name:"B",desc:"(1,1)",mean:x(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:b(e.means[3],e.stdDevs[3],d[3]),unmixed:m?m[3]:null}],y=m?"w-96":f?"w-80":"w-60";return c.jsxs(vl,{className:`${y} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:l,initialPosition:{x:20,y:80},children:[c.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",c.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),c.jsx("br",{}),"Y: ",Math.round(e.y)]}),c.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),c.jsxs("table",{className:"w-full mb-3",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[c.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),c.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",p?"*":""]}),c.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&c.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),m&&c.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),c.jsx("tbody",{className:"font-mono text-xs",children:v.map((k,C)=>c.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[c.jsxs("td",{className:"py-1",children:[c.jsx("span",{className:`font-bold ${k.color}`,children:k.name}),c.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:k.desc})]}),c.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",children:k.mean.toFixed(2)}),c.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:k.std.toFixed(2)}),f&&c.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:k.snr!==null?k.snr.toFixed(2):"-"}),m&&c.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:k.unmixed!==null?k.unmixed.toFixed(1):"-"})]},C))})]}),p&&c.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Hist"}),c.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Quant"}),c.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"FFT"}),c.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"PCC"}),c.jsx("button",{onClick:w,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"ColorN"})]})]})]})},Tne=()=>{var md;const[e,t]=P.useState("init"),[r,n]=P.useState("Checking storage..."),[a,i]=P.useState(null),o=P.useRef(!1),[s,l]=P.useState("dark");P.useEffect(()=>{const te=window.document.documentElement;te.classList.remove(s==="dark"?"light":"dark"),te.classList.add(s)},[s]);const[u,f]=P.useState(!1),[d,p]=P.useState(!1),[m,b]=P.useState(!1),[x,w]=P.useState(!1),[v,y]=P.useState(!1),k=mne(u||d||m),[C,j]=P.useState(!1),[S,N]=P.useState([]),[M,E]=P.useState(-1),[R,T]=P.useState([]),D=P.useMemo(()=>S[M],[S,M]),B=P.useRef(null);P.useEffect(()=>{B.current=D||null},[D]);const G=(D==null?void 0:D.file)||null,z=(D==null?void 0:D.imageElement)||null,F=(D==null?void 0:D.rawImageData)||null,I=(D==null?void 0:D.rawFileBuffer)||null,L=(D==null?void 0:D.renderedRawImageData)||null,W=(D==null?void 0:D.referenceImageData)||null,K=(D==null?void 0:D.sampledImageData)||null,ae=(D==null?void 0:D.exifData)||null,re=(D==null?void 0:D.isThreePlane)||!1,Q=(D==null?void 0:D.xtransPhase)||{x:0,y:0},le=(D==null?void 0:D.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[Ne,ie]=P.useState(!1),[ge,ne]=P.useState(null),[H,ue]=P.useState(!1),[ve,ee]=P.useState(!1),[Oe,Te]=P.useState(null),[pe,Me]=P.useState([]),[Se,me]=P.useState(100),[Ae,Re]=P.useState(!0),[Xe,kt]=P.useState(!1),[xt,Yt]=P.useState(null),[bt,yr]=P.useState(!1),[_t,ar]=P.useState(!1),[Sr,ir]=P.useState(!1),[Gt,Qe]=P.useState(!1),[lt,Wt]=P.useState(!1),[Vt,Tr]=P.useState("1.0"),[vr,Qr]=P.useState(!1),[Ft,Jr]=P.useState(!1),[mt,zr]=P.useState(!1),[Be,jr]=P.useState([]),[Ur,ln]=P.useState(!1),[Gr,lr]=P.useState(0),[en,In]=P.useState([]),[Cn,ya]=P.useState(!1),[xr,_r]=P.useState({x:0,y:0}),[cr,A]=P.useState(!1),[Ee,ot]=P.useState(!1),[gt,St]=P.useState([]),[At,qt]=P.useState(0),[er,qe]=P.useState(null),[Ct,$t]=P.useState(!1),[zt,Lt]=P.useState([]),[we,Wr]=P.useState(.5),[tn,rn]=P.useState(!1),[ia,xl]=P.useState(2),[bl,Pn]=P.useState(1),[li,va]=P.useState([]),[ci,Zi]=P.useState(null),[Vr,qn]=P.useState(0),[Nn,Aa]=P.useState([]),[ui,fi]=P.useState([]),[Mi,di]=P.useState(64),[xa,ys]=P.useState(10),[oa,hi]=P.useState(10),[Ln,vs]=P.useState(4),[q,de]=P.useState(1),[ye,X]=P.useState(0),[je,Ze]=P.useState("processed"),[it,dt]=P.useState(!1),pt=P.useMemo(()=>le.blackLevel?le.blackLevel:F!=null&&F.blackLevels?[F.blackLevels[0],F.blackLevels[1],F.blackLevels[2],F.blackLevels[3]]:[0,0,0,0],[le.blackLevel,F]),ct=(ae==null?void 0:ae.ImageHeight)||(ae==null?void 0:ae.ExifImageHeight)||(F==null?void 0:F.height)||0,[Ht,Ve]=P.useState(null),[Ut,Je]=P.useState(null),[be,nt]=P.useState({x:0,y:0}),[Ke,J]=P.useState(1),[xe,st]=P.useState("pan"),et=P.useRef(null),yt=P.useRef(null);P.useEffect(()=>{const te=kne();te&&te.sessions.length>0?(i(te),t("prompt")):t("idle")},[]),P.useCallback(async()=>{o.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await bne()}catch(te){console.error("Failed to clear DB",te)}t("idle"),i(null),o.current=!1},[]),P.useCallback(async()=>{if(!a)return;t("restoring"),n("Restoring layout...");const te=a;if(l(te.theme),Re(te.sidebarOpen),te.sessions.length>0){n(`Restoring ${te.sessions.length} images...`);const oe=[];for(const se of te.sessions){if(o.current)return;await new Promise(fe=>setTimeout(fe,50));try{const fe=await xne(se.id);if(fe){const $e={id:se.id,fileName:se.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:fe,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:se.isThreePlane,displaySettings:se.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:Pe,analysisData:ze}=await Ss(fe);let He=null;if(ze)try{se.displaySettings.renderMode==="zero-dependency"?He=await nm(fe,se.displaySettings):se.displaySettings.renderMode==="advanced-zero-dep"?He=await XA(fe,se.displaySettings):se.displaySettings.renderMode==="zero-dep-color"?He=await HA(fe,se.displaySettings):He=await lw(fe,se.displaySettings)}catch(rt){console.error("Render failed",rt),He=await nm(fe,se.displaySettings)}const at=URL.createObjectURL(Pe),Le=new Image;Le.src=at,await new Promise(rt=>{Le.onload=()=>rt()}),oe.push({...$e,rawImageData:ze,renderedRawImageData:He,previewUrl:at,imageElement:Le,exifData:ze.metadata})}}catch(fe){console.error(`Failed to restore session ${se.id}`,fe)}}if(o.current)return;if(N(oe),te.activeSessionId){const se=oe.findIndex(fe=>fe.id===te.activeSessionId);se>=0?E(se):oe.length>0&&E(0)}Me(te.windows)}o.current||t("idle")},[a]);const Dt=P.useCallback(async()=>{},[I,D,le,Gt,lt]),Er=P.useCallback(()=>{!I||!D||ir(!0)},[I,D]),cn=P.useCallback(async()=>{},[F,D,Vt,pt]);P.useEffect(()=>{const te=oe=>{(oe.ctrlKey||oe.metaKey)&&oe.key.toLowerCase()==="s"&&(oe.preventDefault(),Er())};return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[Er]);const On=P.useRef(null),Bn=P.useCallback(()=>{e==="idle"&&(On.current&&clearTimeout(On.current),On.current=window.setTimeout(async()=>{var se;const te={version:1,timestamp:Date.now(),activeSessionId:((se=S[M])==null?void 0:se.id)||null,theme:s,sidebarOpen:Ae,sessions:S.map(fe=>({id:fe.id,fileName:fe.fileName,fileType:fe.file?fe.file.type:"application/octet-stream",fileSize:fe.rawFileBuffer?fe.rawFileBuffer.byteLength:0,displaySettings:fe.displaySettings,isThreePlane:fe.isThreePlane})),windows:pe.map(fe=>({id:fe.id,type:fe.type,roi:fe.roi,zIndex:fe.zIndex,initialPosition:fe.initialPosition,sessionId:fe.sessionId,isBGGR:fe.isBGGR,isMinimized:fe.isMinimized||!1,internalState:fe.internalState}))};wne(te);const oe=S.map(fe=>fe.id);Sne(oe)},1e3))},[S,pe,M,s,Ae,e]);P.useEffect(()=>{Bn()},[Bn]);const un=P.useCallback(te=>{N(oe=>oe.map((se,fe)=>fe===M?{...se,...te}:se))},[M]);P.useEffect(()=>{if(F&&ge){const te=js(F.data,F.width,F.height,ge.x,ge.y,ge.width,ge.height);ne(te)}},[F]);const sa=te=>{if(!ge||!D)return;const oe=Date.now().toString()+Math.random().toString().slice(2,5),se=Math.max(Se,...pe.map(Pe=>Pe.zIndex),100),fe=pe.length%10*30,$e=te==="fft"?{x:50,y:50}:te==="histogram"?{x:100,y:100}:{x:150,y:150};Me(Pe=>[...Pe,{id:oe,type:te,roi:{x:ge.x,y:ge.y,w:ge.width,h:ge.height},zIndex:se+1,initialPosition:{x:$e.x+fe,y:$e.y+fe},sessionId:D.id,isBGGR:H,isMinimized:!1,stackFiles:(te==="fft"||te==="pearson"||te==="histogram")&&R.length>0?R:void 0}])},tr=te=>{Me(oe=>oe.filter(se=>se.id!==te))},Ai=te=>{Me(oe=>oe.map(se=>se.id===te?{...se,isMinimized:!0}:se))},tu=te=>{Me(oe=>{const se=Math.max(Se,...oe.map(fe=>fe.zIndex));return oe.map(fe=>fe.id===te?{...fe,zIndex:se+1}:fe)})},wl=(te,oe)=>{Me(se=>se.map(fe=>fe.id===te?{...fe,internalState:{...fe.internalState,...oe}}:fe))},la=()=>{const te=Math.max(Se,...pe.map(oe=>oe.zIndex));me(te+1)},Qi=(te,oe)=>{Me(se=>se.map(fe=>fe.id===te?{...fe,roi:oe}:fe))};P.useEffect(()=>{if(!ae)return;const te=ae.CFAPattern2||ae.CFAPattern;if(te){let oe="";Array.isArray(te)?oe=te.join(""):typeof te=="string"?oe=te.replace(/[\s,]+/g,""):typeof te=="number"&&(oe=String(te)),oe==="0112"?ue(!1):oe==="2110"&&ue(!0)}},[ae]),P.useEffect(()=>{let te;const oe=()=>{if(tn&&Cn){const se=Date.now()/1e3,fe=.55+.45*Math.sin(se*ia);Pn(fe),te=requestAnimationFrame(oe)}else Pn(1)};return tn&&Cn?oe():Pn(1),()=>{te&&cancelAnimationFrame(te)}},[tn,Cn,ia]),P.useEffect(()=>{const te=oe=>{oe.key==="Escape"&&Cn&&(ya(!1),_r({x:0,y:0}),rn(!1))};return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[Cn]),P.useEffect(()=>()=>{S.forEach(te=>{te.previewUrl&&URL.revokeObjectURL(te.previewUrl)}),yt.current&&yt.current.terminate()},[]);const rr=async(te,oe=!0)=>{oe&&(nt({x:0,y:0}),J(1),qn(0),Aa([]),fi([]),kt(!1),Yt(null),ie(!1),ot(!1),St([]),Lt([]),qt(0),jr([]));let se=null;if(k.isConnected){const He=new FormData;He.append("file",te);try{const Le=await(await fetch("http://localhost:5428/read",{method:"POST",body:He})).json();if(Le.success){let rt=Le.data;Array.isArray(rt)&&rt.length===1&&(rt=rt[0]),se=rt}}catch(at){console.warn("Auto Exif fetch failed",at)}}const fe=te.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(te.type)||fe)){Ve("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let Pe={file:te,exifData:se};if(fe||te.type==="image/x-adobe-dng")try{oe?Je("Processing RAW file (this may take a moment)..."):dt(!0);const He=await te.arrayBuffer();Pe.rawFileBuffer=He;const{previewBlob:at,analysisData:Le}=await Ss(He);Pe.rawImageData=Le,!se&&Le.metadata&&(Pe.exifData=Le.metadata),Pe.isThreePlane=Le.isThreePlane||!1,Le.isThreePlane&&oe&&ie(!0);let rt=!1,Nt=null,Et=!1;if(Le.isXTrans){Et=!0,Nt=He;const Hr=(await Fd(He,0,0)).dngBuffer,br=await Ss(Hr);Pe.rawFileBuffer=Hr,Pe.rawImageData=br.analysisData,Pe.previewUrl=URL.createObjectURL(br.previewBlob),rt=!0}else Pe.previewUrl=URL.createObjectURL(at);Pe.originalRawFileBuffer=Nt,Pe.isXTransOriginal=Et,Pe.isXTransConverted=rt,Pe.xtransPhase={x:0,y:0};const ur=new Image;if(ur.src=Pe.previewUrl||"",await new Promise((Rr,Hr)=>{ur.onload=()=>{Pe.imageElement=ur,Rr()},ur.onerror=()=>{Rr()}}),oe){const Rr=Pe.rawImageData||Le,Hr=Mne(Rr,se||Rr.metadata);let br;Hr&&Hr.some(fr=>fr>0)&&(br=Hr);const ft={exposure:0,demosaicMethod:-1,blackLevel:br,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},Bt=Pe.rawFileBuffer;if(Bt&&(fe||te.type==="image/x-adobe-dng"))try{const fr=await nm(Bt,ft);Pe.renderedRawImageData=fr,Pe.displaySettings=ft}catch(fr){console.error("Initial Zero-Dep Render Failed",fr)}}}catch(He){Ve(`Failed to process RAW file: ${He.message}`),Je(null),dt(!1);return}else try{Je("Processing image...");const{previewBlob:He,analysisData:at}=await LA(te);Pe.rawImageData=at,!se&&at.metadata&&(Pe.exifData=at.metadata),Pe.rawFileBuffer=await te.arrayBuffer(),Pe.isThreePlane=at.isThreePlane||!1,Pe.isXTransOriginal=!1,Pe.isXTransConverted=!1,Pe.originalRawFileBuffer=null;const Le=URL.createObjectURL(He);Pe.previewUrl=Le;const rt=new Image;rt.src=Le,await new Promise(Nt=>{rt.onload=()=>{Pe.imageElement=rt,Nt()},rt.onerror=()=>{Ve("Could not load the image file."),Nt()}})}catch(He){Ve(`Failed to process image: ${He.message}`),Je(null);return}const ze=Date.now().toString()+Math.random();if(Pe.rawFileBuffer&&await a4(ze,Pe.rawFileBuffer),oe){const He={exposure:0,demosaicMethod:-1,blackLevel:void 0,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},at={id:ze,fileName:te.name,file:te,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:He,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...Pe};N(Le=>{const rt=[...Le,at];return E(rt.length-1),rt})}else un(Pe);Je(null),dt(!1)},xs=async te=>{Je("Converting to DNG...");try{const oe=new FormData;oe.append("file",te);const se=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:oe}),fe=se.headers.get("content-type")||"";if(se.ok)if(fe.includes("application/json")){const $e=await se.json();throw new Error($e.error||"Conversion failed")}else{const $e=await se.blob(),Pe=URL.createObjectURL($e),ze=document.createElement("a");ze.href=Pe;const He=te.name,at=He.substring(0,He.lastIndexOf("."))+".dng"||"converted.dng";ze.download=at,document.body.appendChild(ze),ze.click(),document.body.removeChild(ze),URL.revokeObjectURL(Pe);const Le=new File([$e],at,{type:"image/x-adobe-dng"});await rr(Le,!0)}else{const $e=await se.text();throw new Error(`HTTP ${se.status}: ${$e}`)}}catch(oe){Je(null),Ve(`Conversion Error: ${oe.message}`)}},ru=(te,oe)=>{te&&(oe==="direct"?rr(te,!0):xs(te))},bs=async te=>{var se;const oe=(se=te.target.files)==null?void 0:se[0];oe&&(await rr(oe,!0),te.target.value="")},Fe=async(te,oe,se,fe)=>{!te||!oe||(Je("Processing Pair Difference (May take a while)..."),Ve(null),setTimeout(async()=>{try{const $e=await te.arrayBuffer(),Pe=await oe.arrayBuffer(),ze=await rm($e,Pe,se,fe),He=h0(ze.width,ze.height,ze.rawData),at=new File([He],`Diff_${te.name}_${oe.name}.dng`,{type:"image/x-adobe-dng"});await rr(at,!0),sa("fft")}catch($e){console.error("Pair Processing Error",$e),Ve("Pair Processing Failed: "+$e.message)}finally{Je(null)}},100))},Tt=async te=>{if(te.length<2){Ve("Need at least 2 files for Batch Diff.");return}Je(`Batch Processing 0/${Math.floor(te.length/2)} pairs...`);const oe=Array.from(te).sort((se,fe)=>se.name.localeCompare(fe.name,void 0,{numeric:!0}));try{for(let se=0;se<oe.length-1;se+=2){const fe=oe[se],$e=oe[se+1];Je(`Batch Processing Pair ${Math.floor(se/2)+1}/${Math.floor(oe.length/2)}: ${fe.name} & ${$e.name}`);const Pe=await fe.arrayBuffer(),ze=await $e.arrayBuffer(),He=await rm(Pe,ze,!1,!1),at=h0(He.width,He.height,He.rawData),Le=new Blob([at],{type:"image/x-adobe-dng"}),rt=URL.createObjectURL(Le),Nt=document.createElement("a");Nt.href=rt,Nt.download=`Diff_${fe.name}_${$e.name}.dng`,document.body.appendChild(Nt),Nt.click(),document.body.removeChild(Nt),URL.revokeObjectURL(rt)}}catch(se){console.error("FFT Batch Error",se),Ve("Batch Processing Failed: "+se.message)}finally{Je(null)}},Mt=async te=>{if(te.length<1)return;const oe=Array.from(te).sort((se,fe)=>se.name.localeCompare(fe.name,void 0,{numeric:!0}));T(oe),await rr(oe[0],!0)},Pt=async()=>{dt(!0);const te=128,oe=te,se=te,fe=oe*se,$e=new Uint16Array(fe),Pe=ft=>{const Bt=ft/Ln+ye;return Math.sin(2*Math.PI*Bt)>=0?1:0},ze=32,He=q*.5,at=Math.max(1e-4,q/ze);for(let ft=0;ft<se;ft++){let Bt=0;const Ir=ft+.5-He;for(let pr=0;pr<ze;pr++){const Un=Ir+(pr+.5)*at;Bt+=Pe(Un)}const fn=Bt/ze,Zt=Math.round(fn*65535);for(let pr=0;pr<oe;pr++)$e[ft*oe+pr]=Zt}const Le=new ImageData(ea,ea),rt=ea/oe,Nt=q/2;for(let ft=0;ft<ea;ft++){const Bt=ft/rt,fr=Math.floor(Bt),Ir=Bt-fr,fn=Ir>=.5-Nt&&Ir<.5+Nt;for(let Zt=0;Zt<ea;Zt++){const pr=Zt/rt,Un=Math.floor(pr),Mn=pr-Un,Ei=Mn>=.5-Nt&&Mn<.5+Nt,dr=(ft*ea+Zt)*4;if(Un>=oe||fr>=se){Le.data[dr]=30,Le.data[dr+1]=34,Le.data[dr+2]=40,Le.data[dr+3]=255;continue}if(fn&&Ei){const Wa=$e[fr*oe+Un],Gn=Math.round(Wa/257);Le.data[dr]=Gn,Le.data[dr+1]=Gn,Le.data[dr+2]=Gn,Le.data[dr+3]=255}else Le.data[dr]=30,Le.data[dr+1]=34,Le.data[dr+2]=40,Le.data[dr+3]=255}}const Et=new ImageData(ea,ea),ur=se/ea;for(let ft=0;ft<ea;ft++){const Bt=(ft+.5)*ur,Ir=Pe(Bt)>.5?255:0,fn=ft*ea*4;for(let Zt=0;Zt<ea;Zt++){const pr=fn+Zt*4;Et.data[pr]=Ir,Et.data[pr+1]=Ir,Et.data[pr+2]=Ir,Et.data[pr+3]=255}}const Rr=h0(oe,se,$e),Hr=new File([Rr],"pattern_test.dng",{type:"image/x-adobe-dng"}),br=Date.now().toString();try{const{previewBlob:ft,analysisData:Bt}=await Ss(Rr.slice(0)),fr=await lw(Rr.slice(0),le),Ir=s4(fr,ea,ea),fn=URL.createObjectURL(ft),Zt=new Image;Zt.src=fn,await new Promise(Un=>{Zt.onload=()=>Un()}),await a4(br,Rr);const pr={id:br,fileName:"pattern_test.dng",file:Hr,imageElement:Zt,rawImageData:Bt,rawFileBuffer:Rr,renderedRawImageData:Ir,referenceImageData:Et,sampledImageData:Le,exifData:null,isThreePlane:!1,previewUrl:fn,displaySettings:le,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(G==null?void 0:G.name)==="pattern_test.dng"?un(pr):N(Un=>{const Mn=[...Un,pr];return E(Mn.length-1),Mn})}catch(ft){console.error("Error generating pattern:",ft),Ve(`Error generating pattern: ${ft.message}`)}dt(!1),Je(null)},Fn=()=>{yr(!0)},nn=()=>{yr(!1),Ze("sampled"),Je("Generating..."),setTimeout(()=>Pt(),50)},zn=P.useRef({period:Ln,fill:q,phase:ye});P.useEffect(()=>{(G==null?void 0:G.name)==="pattern_test.dng"&&(zn.current.period!==Ln||zn.current.fill!==q||zn.current.phase!==ye)&&(zn.current={period:Ln,fill:q,phase:ye},Pt())},[Ln,q,ye,G]);const Ua=P.useCallback(te=>{if(un({displaySettings:te}),!I)return;dt(!0),yt.current&&yt.current.terminate();const oe=new Worker(new URL("/assets/renderWorker-DjzFrYUC.js",import.meta.url),{type:"module"});yt.current=oe,oe.onmessage=se=>{const{success:fe,imageData:$e,error:Pe}=se.data;if(fe){let ze=$e;(G==null?void 0:G.name)==="pattern_test.dng"&&(ze=s4($e,ea,ea)),un({renderedRawImageData:ze})}else Ve(Pe||"Unknown worker error");dt(!1),oe.terminate(),yt.current=null},oe.postMessage({buffer:I.slice(0),settings:te})},[I,G,un]),Ti=async(te,oe)=>{Je("Re-sampling X-Trans with new Phase...");try{const fe=(await Fd(oe,te.x,te.y)).dngBuffer,$e=await Ss(fe),Pe=URL.createObjectURL($e.previewBlob),ze=new Image;ze.src=Pe,await new Promise(He=>{ze.onload=()=>He()}),D!=null&&D.previewUrl&&URL.revokeObjectURL(D.previewUrl),un({rawFileBuffer:fe,rawImageData:$e.analysisData,previewUrl:Pe,imageElement:ze,xtransPhase:te}),ne(null)}catch(se){console.error("X-Trans Phase Update Failed",se),Ve("Phase Update Failed: "+se.message)}finally{Je(null)}},Ga=te=>{if(!D||!D.originalRawFileBuffer||!D.isXTransConverted)return;const oe={...D.xtransPhase,...te};Ti(oe,D.originalRawFileBuffer)},Cr=P.useCallback(async te=>{if(D)if(te){if(D.isXTransConverted)return;const oe=D.originalRawFileBuffer||D.rawFileBuffer;if(!oe)return;Je("Converting X-Trans to Pseudo-Bayer DNG...");try{const se=D.xtransPhase||{x:0,y:0},$e=(await Fd(oe,se.x,se.y)).dngBuffer,Pe=await Ss($e),ze=URL.createObjectURL(Pe.previewBlob),He=new Image;He.src=ze,await new Promise(at=>{He.onload=()=>at()}),D.previewUrl&&URL.revokeObjectURL(D.previewUrl),un({rawFileBuffer:$e,rawImageData:Pe.analysisData,previewUrl:ze,imageElement:He,isXTransConverted:!0,originalRawFileBuffer:oe}),ne(null)}catch(se){console.error("X-Trans Conversion Failed",se),Ve("Failed to convert X-Trans: "+se.message)}finally{Je(null)}}else{if(!D.isXTransConverted)return;const oe=D.originalRawFileBuffer;if(!oe){Ve("Original X-Trans buffer lost. Cannot revert.");return}Je("Reverting to Native X-Trans...");try{const se=await Ss(oe),fe=URL.createObjectURL(se.previewBlob),$e=new Image;$e.src=fe,await new Promise(Pe=>{$e.onload=()=>Pe()}),D.previewUrl&&URL.revokeObjectURL(D.previewUrl),un({rawFileBuffer:oe,rawImageData:se.analysisData,previewUrl:fe,imageElement:$e,isXTransConverted:!1}),ne(null)}catch(se){console.error("X-Trans Revert Failed",se),Ve("Failed to revert X-Trans: "+se.message)}finally{Je(null)}}},[D,un]),nu=te=>{if(et.current){const oe=et.current,{width:se,height:fe}=oe.getBoundingClientRect(),$e=se/2,Pe=fe/2,ze=te/Ke,He=$e-($e-be.x)*ze,at=Pe-(Pe-be.y)*ze;nt({x:He,y:at})}J(te)},No=te=>{if(!te)return;if(!F){ne(null);return}if(Ur){te.w>0&&te.h>0&&jr(se=>[...se,te]);return}ve&&ee(!1);const oe=js(F.data,F.width,F.height,te.x,te.y,te.w,te.h);ne(oe)},kl=te=>{Te(te),No(te)},ud=()=>{st(te=>te==="pan"?"select":"pan")},og=(te,oe,se)=>{jr(fe=>{if(fe.length===0)return fe;if(te==="move")return fe.map($e=>({...$e,x:$e.x+oe,y:$e.y+se}));if(te==="scale"){const $e=fe.reduce((ze,He)=>ze+He.x+He.w/2,0)/fe.length,Pe=fe.reduce((ze,He)=>ze+He.y+He.h/2,0)/fe.length;return fe.map(ze=>{const He=ze.x+ze.w/2,at=ze.y+ze.h/2,Le=$e+(He-$e)*oe,rt=Pe+(at-Pe)*se,Nt=ze.w*oe,Et=ze.h*se;return{...ze,x:Le-Nt/2,y:rt-Et/2,w:Nt,h:Et}})}return fe})},sg=()=>{if(Be.length===0){Ve("No ROIs to save.");return}let te=`Index,X,Y,W,H,Orientation
`;Be.forEach(($e,Pe)=>{te+=`${Pe+1},${$e.x.toFixed(2)},${$e.y.toFixed(2)},${$e.w.toFixed(2)},${$e.h.toFixed(2)},${$e.ori||0}
`});const oe=new Blob([te],{type:"text/csv;charset=utf-8;"}),se=URL.createObjectURL(oe),fe=document.createElement("a");fe.setAttribute("href",se),fe.setAttribute("download",`sfr_plate_template_${Date.now()}.csv`),document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(se)},au=te=>{if(!te||te.length===0){Ve("No valid ROIs found in file.");return}jr(oe=>[...oe,...te])},fd=te=>{if(Be.length===0){Ve("ROIs ");return}if(!F||le.renderMode!=="advanced-zero-dep"){Ve("Advanced Zero-Dep (Unmixed) mode required for scalar SFR calc.");return}Je("Computing Batch SFR..."),setTimeout(()=>{try{const oe=[];for(const se of Be){const fe=x1(F,se,le),$e=gx(fe.data,fe.width,fe.height,{x:0,y:0,w:fe.width,h:fe.height},{greenOnly:te.greenOnly,globalX:se.x,globalY:se.y,bayerPattern:F.bayerPattern});if($e){const Pe=te.useNR?-1:12,ze=xN([$e],Pe,null,te.useDeshading);ze&&ze.mtf50!==null&&oe.push({x:se.x+se.w/2,y:se.y+se.h/2,mtf50:ze.mtf50,orientation:$e.orientation})}}if(oe.length>0){const se=oe.map(fe=>`{${fe.x.toFixed(1)},${fe.y.toFixed(1)},${fe.mtf50.toFixed(4)},${fe.orientation}}`).join("");navigator.clipboard.writeText(se).then(()=>alert(`Computed ${oe.length}/${Be.length} ROIs. Copied results to clipboard.`)).catch(fe=>Ve("Failed to copy results: "+fe))}else Ve("Failed to compute valid SFR for any selected ROIs.")}catch(oe){Ve("Batch Compute Failed: "+oe.message)}finally{Je(null)}},100)},lg=te=>{if(Vr===0||Vr>4)return;const oe=[...Nn,te];Aa(oe),Vr===4?(cg(oe),qn(0)):qn(Vr+1)},dd=(te,oe,se,fe)=>{const $e=te[0],Pe=te[1],ze=te[2],He=te[3],at=oe/2,Le=[];for(let rt=0;rt<se;rt++){const Nt=se>1?rt/(se-1):.5;for(let Et=0;Et<fe;Et++){const ur=fe>1?Et/(fe-1):.5,Rr=$e.x*(1-ur)+Pe.x*ur,Hr=$e.y*(1-ur)+Pe.y*ur,br=ze.x*(1-ur)+He.x*ur,ft=ze.y*(1-ur)+He.y*ur,Bt=Rr*(1-Nt)+br*Nt,fr=Hr*(1-Nt)+ft*Nt,Ir=Bt-at,fn=fr-at;Le.push({x:Ir,y:fn,w:oe,h:oe})}}return Le},cg=te=>{!F||!D||(Je("Calculating DR Lab Grid..."),setTimeout(()=>{try{const oe=dd(te,Mi,xa,oa);fi(oe);const Pe=[...[`#BlackLevel: ${(le.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${F.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],ze=`img${D.fileName||"image"}`;oe.forEach((Nt,Et)=>{const ur=Math.floor(Et/oa)+1,Rr=Et%oa+1,Hr=js(F.data,F.width,F.height,Nt.x,Nt.y,Nt.w,Nt.h),br=Hr.means,ft=Hr.stdDevs,Bt=`${ze},${ur},${Rr},${br[0].toFixed(4)},${br[1].toFixed(4)},${br[2].toFixed(4)},${br[3].toFixed(4)},${ft[0].toFixed(4)},${ft[1].toFixed(4)},${ft[2].toFixed(4)},${ft[3].toFixed(4)}`;Pe.push(Bt)});const He=Pe.join(`
`),at=new Blob([He],{type:"text/csv;charset=utf-8;"}),Le=URL.createObjectURL(at),rt=document.createElement("a");rt.setAttribute("href",Le),rt.setAttribute("download","dr_lab_results.csv"),document.body.appendChild(rt),rt.click(),document.body.removeChild(rt),URL.revokeObjectURL(Le),Aa([])}catch(oe){Ve("DR Lab Error: "+oe.message)}finally{Je(null)}},100))},ug=async(te,oe)=>{if(Nn.length<4&&ui.length<1){Ve("Please mark the grid on an image first before running batch processing.");return}let se=ui;if(se.length===0&&Nn.length===4&&(se=dd(Nn,Mi,xa,oa)),se.length===0){Ve("No grid definitions found. Mark corners first.");return}Je(oe==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const $e=(le.blackLevel||[0,0,0,0]).join(","),Pe=F?F.height:0,He=[...[`#BlackLevel: ${$e}`,`#ImageHeight: ${Pe}`,oe==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],at=Array.from(te).sort((Et,ur)=>Et.name.localeCompare(ur.name,void 0,{numeric:!0}));if(oe==="pair"&&at.length<2){Ve("Need at least 2 files for Pair processing."),Je(null);return}const Le=B.current,rt=(Le==null?void 0:Le.isXTransConverted)||!1,Nt=(Le==null?void 0:Le.xtransPhase)||{x:0,y:0};try{const Et=async ft=>{let Bt=await ft.arrayBuffer();return rt&&(Bt=(await Fd(Bt,Nt.x,Nt.y)).dngBuffer),Bt};if(oe==="single")for(let ft=0;ft<at.length;ft++){const Bt=at[ft];Je(`Processing ${ft+1}/${at.length}: ${Bt.name}...`);const fr=await Et(Bt),Ir=await X0(fr),fn=`img${Bt.name}`;se.forEach((Zt,pr)=>{const Un=Math.floor(pr/xa)+1,Mn=pr%oa+1,Ei=js(Ir.data,Ir.width,Ir.height,Zt.x,Zt.y,Zt.w,Zt.h),dr=Ei.means,Wa=Ei.stdDevs,Gn=`${fn},${Un},${Mn},${dr[0].toFixed(4)},${dr[1].toFixed(4)},${dr[2].toFixed(4)},${dr[3].toFixed(4)},${Wa[0].toFixed(4)},${Wa[1].toFixed(4)},${Wa[2].toFixed(4)},${Wa[3].toFixed(4)}`;He.push(Gn)})}else for(let ft=0;ft<at.length-1;ft+=2){const Bt=at[ft],fr=at[ft+1],Ir=`img${Bt.name} & ${fr.name}`;Je(`Processing Pair ${Math.floor(ft/2)+1}/${Math.floor(at.length/2)}: ${Bt.name} & ${fr.name}...`);const fn=await Et(Bt),Zt=await X0(fn),pr=await Et(fr),Un=await rm(fn,pr,!1,!0);se.forEach((Mn,Ei)=>{const dr=Math.floor(Ei/xa)+1,Wa=Ei%oa+1,Gn=js(Zt.data,Zt.width,Zt.height,Mn.x,Mn.y,Mn.w,Mn.h),yd=js(Un.rawData,Un.width,Un.height,Mn.x,Mn.y,Mn.w,Mn.h),ws=Gn.means,Ji=yd.stdDevs,vd=`${Ir},${dr},${Wa},${ws[0].toFixed(4)},${ws[1].toFixed(4)},${ws[2].toFixed(4)},${ws[3].toFixed(4)},${Ji[0].toFixed(4)},${Ji[1].toFixed(4)},${Ji[2].toFixed(4)},${Ji[3].toFixed(4)}`;He.push(vd)})}const ur=He.join(`
`),Rr=new Blob([ur],{type:"text/csv;charset=utf-8;"}),Hr=URL.createObjectURL(Rr),br=document.createElement("a");br.href=Hr,br.setAttribute("download",`dr_lab_batch_${oe}_${new Date().getTime()}.csv`),document.body.appendChild(br),br.click(),document.body.removeChild(br),URL.revokeObjectURL(Hr)}catch(Et){console.error("Batch Error",Et),Ve("Batch Processing Failed: "+Et.message)}finally{Je(null)}},iu=()=>{St([]),qt(1)},fg=te=>{if(!Ee||At===0)return;const oe=[...gt,te];St(oe),oe.length===4&&F?(hd(oe,we),qt(0)):qt(se=>se+1)},hd=(te,oe)=>{F&&(Je("Analyzing Color Chart..."),setTimeout(()=>{try{const se=Vre(te[0],te[1],te[2],te[3],F.width,F.height,oe);Lt(se);const $e=se.map((Pe,ze)=>{const He=js(F.data,F.width,F.height,Pe.x,Pe.y,Pe.w,Pe.h);return{id:ze,rawMeans:He.means,refRGB:[0,0,0]}}).map((Pe,ze)=>({...Pe,refRGB:px[ze]||[0,0,0]}));qe($e),$t(!0)}catch(se){Ve("Color Lab Error: "+se.message)}finally{Je(null)}},100))},dg=te=>{Wr(te),gt.length===4&&hd(gt,te)},hg=()=>{$t(!1)},pg=()=>{ae||Yt("No EXIF data found. The file might not contain metadata or it was stripped during processing."),kt(!0)},gg=async te=>{Je("Parsing PTC Data...");const oe=[];let se=null;try{for(let fe=0;fe<te.length;fe++){const Pe=(await te[fe].text()).split(`
`);let ze=!0;for(const He of Pe){const at=He.trim();if(!at)continue;if(at.startsWith("#")){if(at.includes("BlackLevel:")){const Zt=at.split(":")[1].trim().split(",");if(Zt.length>=4){const pr=Zt.map(Number);se||(se={}),se.blackLevel=pr}}if(at.includes("ImageHeight:")){const Zt=parseInt(at.split(":")[1].trim());isNaN(Zt)||(se||(se={}),se.height=Zt)}continue}if(ze){at.toLowerCase().includes("mean")&&at.toLowerCase().includes("std")&&(ze=!1);continue}const Le=at.split(",");if(Le.length<5)continue;let rt=0,Nt;isNaN(parseFloat(Le[0]))&&(Nt=Le[0],rt=1);const Et=parseInt(Le[rt]),ur=parseInt(Le[rt+1]),Rr=parseFloat(Le[rt+2]),Hr=parseFloat(Le[rt+3]),br=parseFloat(Le[rt+4]),ft=parseFloat(Le[rt+5]),Bt=parseFloat(Le[rt+6]),fr=parseFloat(Le[rt+7]),Ir=parseFloat(Le[rt+8]),fn=parseFloat(Le[rt+9]);!isNaN(Rr)&&!isNaN(Bt)&&oe.push({channel:"R",mean:Rr,std:Bt,filename:Nt,row:Et,col:ur}),!isNaN(Hr)&&!isNaN(fr)&&oe.push({channel:"G1",mean:Hr,std:fr,filename:Nt,row:Et,col:ur}),!isNaN(br)&&!isNaN(Ir)&&oe.push({channel:"G2",mean:br,std:Ir,filename:Nt,row:Et,col:ur}),!isNaN(ft)&&!isNaN(fn)&&oe.push({channel:"B",mean:ft,std:fn,filename:Nt,row:Et,col:ur})}}va(oe),Zi(se),f(!0)}catch(fe){console.error("PTC Parse Error",fe),Ve("Failed to parse CSV files: "+fe.message)}finally{Je(null)}},mg=()=>{if(!I||!D)return;const te=new Blob([I],{type:"image/x-adobe-dng"}),oe=URL.createObjectURL(te),se=document.createElement("a");se.href=oe;const fe=D.fileName||"image.dng",$e=fe.toLowerCase().endsWith(".dng")?fe:fe.replace(/\.[^/.]+$/,"")+".dng";se.download=$e,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(oe)},yg=()=>{qn(1),Aa([]),fi([])},pd=()=>{window.open("https://github.com/y-g-jiang/y-g-jiang.github.io/blob/main/drtest.png","_blank")},vg=P.useMemo(()=>er?er.map((te,oe)=>({...te,refRGB:px[oe]||[0,0,0]})):[],[er]),xg=()=>{lr(1),In([]),jr([])},bg=te=>{if(Gr===0)return;const oe=[...en,te];if(In(oe),oe.length===4){lr(0);try{const se=One(oe);jr(se),fd({useNR:!0,useDeshading:!0,greenOnly:!1})}catch(se){console.error("Standard Chart Gen Error",se),Ve("Failed to generate chart ROIs.")}}else lr(se=>se+1)};let Sl=L||z;je==="reference"&&W?Sl=W:je==="sampled"&&K&&(Sl=K);const gd=Ut||it;return c.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[c.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:c.jsx(lA,{onLoadImage:bs,onFileSelected:ru,onGenerateFakeDng:Fn,fileName:G?G.name:null,hasGeneratedData:(G==null?void 0:G.name)==="pattern_test.dng",viewMode:je,onSetViewMode:Ze,patternPeriod:Ln,onPatternPeriodChange:vs,fillFactor:q,onFillFactorChange:de,patternPhase:ye,onPatternPhaseChange:X,showPatternControls:(G==null?void 0:G.name)==="pattern_test.dng",onOpenAbout:()=>ar(!0),onShowExif:pg,bridgeStatus:k,onBridgeClick:()=>j(!0),isDrLabOpen:vr,onToggleDrLab:()=>{Qr(!vr),qn(0),Aa([]),fi([]),Ft&&Jr(!1),Ee&&ot(!1),mt&&zr(!1),qt(0),Lt([]),jr([]),ln(!1),lr(0)},isColorLabOpen:Ee,onToggleColorLab:()=>{ot(!Ee),St([]),qt(0),Lt([]),vr&&Qr(!1),Ft&&Jr(!1),mt&&zr(!1),jr([]),ln(!1),lr(0)},isFftLabOpen:Ft,onToggleFftLab:()=>{Jr(!Ft),vr&&Qr(!1),Ee&&ot(!1),mt&&zr(!1),qt(0),Lt([]),jr([]),ln(!1),lr(0)},isSfrLabOpen:mt,onToggleSfrLab:()=>{zr(!mt),vr&&Qr(!1),Ee&&ot(!1),Ft&&Jr(!1),qt(0),Lt([]),jr([]),ln(!1),lr(0)},onGenerateTestPic:pd,onPTCFilesSelected:gg,onDownloadDng:mg,isThreePlane:re,onOpenDatabase:()=>p(!0),isSidebarOpen:Ae,onToggleSidebar:()=>Re(!Ae),stretchMultiplier:Vt,onStretchMultiplierChange:Tr,onStretchDngExport:cn,isRawLoaded:!!F})}),c.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[c.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:et,children:[gd&&c.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:Ut||"Processing..."})]}),c.jsx($re,{isOpen:_t,onClose:()=>ar(!1)}),c.jsx(Dre,{isOpen:Xe,onClose:()=>kt(!1),data:ae,fileName:G?G.name:"",warning:xt}),c.jsx(Ire,{isOpen:u,onClose:()=>f(!1),data:li,blackLevel:pt,imageHeight:ct,isBGGR:H,importedMetadata:ci||void 0,theme:s,initialCameraModel:(ae==null?void 0:ae.Model)||"",initialISO:(ae==null?void 0:ae.ISO)||((md=ae==null?void 0:ae.ISOSpeedRatings)==null?void 0:md.toString())||""}),c.jsx(Ure,{isOpen:d,onClose:()=>p(!1),theme:s}),c.jsx(Gre,{isOpen:m,onClose:()=>b(!1),zIndex:200}),c.jsx(Yre,{isOpen:Ct,onClose:hg,patchStats:vg,initialIsBGGR:H,sizeRatio:we,onSizeChange:dg}),c.jsx(Jre,{isOpen:mt,isSfrLabOpen:mt,onClose:()=>{},rawImageData:F,roi:ge?{x:ge.x,y:ge.y,w:ge.width,h:ge.height}:null,zIndex:200,onFocus:la,displaySettings:le}),c.jsx(tne,{isOpen:x,onClose:()=>w(!1),rawImageData:F,fileName:(G==null?void 0:G.name)||"image.dng",zIndex:300,onFocus:la}),c.jsx(pne,{isOpen:v,onClose:()=>y(!1),zIndex:350,onFocus:la}),c.jsx(ts,{isOpen:bt,onClose:()=>yr(!1),onConfirm:nn,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),c.jsx("p",{className:"text-xs text-gray-500"})]})}),c.jsx(ts,{isOpen:C,onClose:()=>j(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),j(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),c.jsx(ts,{isOpen:Sr,onClose:()=>ir(!1),onConfirm:Dt,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),c.jsx("div",{onClick:()=>Qe(!Gt),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Gt?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Gt?"translate-x-6":""}`})})]}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),c.jsx("div",{onClick:()=>Wt(!lt),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${lt?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${lt?"translate-x-6":""}`})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[Gt&&!lt&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!Gt&&lt&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",Gt&&lt&&"Mode: Ready-to-Use. Conventional 16-bit development.",!Gt&&!lt&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!ve&&c.jsx(Ane,{stats:ge,onClose:()=>{ne(null),Te(null)},onMinimize:()=>ee(!0),isBGGR:H,onToggleBGGR:ue,onOpenWindow:sa,displaySettings:le,zIndex:Se,onFocus:la,rawImageData:F}),pe.map(te=>{if(te.isMinimized)return null;const oe=S.find($e=>$e.id===te.sessionId),se=oe==null?void 0:oe.rawImageData;if(!se)return null;const fe={key:te.id,isOpen:!0,onClose:()=>tr(te.id),onMinimize:()=>Ai(te.id),rawImageData:se,roi:te.roi,isBGGR:te.isBGGR,zIndex:te.zIndex,onFocus:()=>tu(te.id),initialPosition:te.initialPosition,initialInternalState:te.internalState,onUpdateState:$e=>wl(te.id,$e),stackFiles:te.stackFiles};return te.type==="histogram"?c.jsx(_re,{...fe}):te.type==="fft"?c.jsx(Ore,{...fe,onUpdateROI:$e=>Qi(te.id,$e)}):te.type==="quant"?c.jsx(Mre,{...fe}):te.type==="pearson"?c.jsx(Are,{...fe}):null}),Ht&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:c.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[c.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),c.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:Ht}),c.jsx("button",{onClick:()=>Ve(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!Sl&&!gd&&!Ht&&c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:c.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),c.jsx(cA,{image:Sl,zoom:Ke,pan:be,onPanChange:nt,onZoomChange:nu,onSelectionChange:No,forcedSelection:Oe,theme:s,touchAction:xe,isMarking:Vr>0||Ee&&At>0||Gr>0,onPointClick:te=>{Vr>0?lg(te):Ee&&At>0?fg(te):Gr>0&&bg(te)},markers:Nn,gridRects:ui,colorLabPoints:gt,colorLabRects:zt,sfrRects:Be}),Gr>0&&en.map((te,oe)=>c.jsxs("div",{className:"absolute pointer-events-none z-30",style:{left:te.x*Ke+be.x,top:te.y*Ke+be.y,transform:"translate(-50%, -50%)"},children:[c.jsx("div",{className:"w-3 h-3 border-2 border-cyan-400 rounded-full flex items-center justify-center bg-transparent",children:c.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})}),c.jsx("div",{className:"text-[10px] font-bold text-cyan-400 absolute top-3 left-1/2 -translate-x-1/2 bg-black/50 px-1 rounded",children:oe+1})]},oe)),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),F&&!Vr&&!Ee&&!Ur&&!Gr&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",c.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),Ur&&c.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-red-500 bg-black/80 px-4 py-2 rounded-full border border-red-500 animate-pulse shadow-lg",children:"Manual Batch Marking Active (Shift+Drag to add)"}),Gr>0&&c.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-emerald-500 bg-black/80 px-4 py-2 rounded-full border border-emerald-500 animate-pulse shadow-lg",children:["Calibration: Click Corner ",Gr,"/4"]}),Ee&&At>0&&c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[gt.length===0&&"Click Top-Left Corner of Chart",gt.length===1&&"Click Top-Right Corner",gt.length===2&&"Click Bottom-Left Corner",gt.length===3&&"Click Bottom-Right Corner",gt.length===4&&"Processing..."]}),c.jsx(o6,{zoom:Ke,onZoomChange:nu,onResetView:()=>{J(1),nt({x:0,y:0})},touchAction:xe,onToggleTouchAction:ud})]}),Ae&&c.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:c.jsx(QA,{rawImageData:F,displaySettings:le,onApplyDisplaySettings:Ua,onSetSelection:kl,exifData:ae,isBridgeConnected:k.isConnected,isDrLabOpen:vr,drMarkingStep:Vr,onStartMarking:yg,onGenerateTestPic:pd,drRoiSize:Mi,onDrRoiSizeChange:di,drGridRows:xa,onDrGridRowsChange:ys,drGridCols:oa,onDrGridColsChange:hi,onBatchDrLab:ug,hasDrMarkers:ui.length>0,isFftLabOpen:Ft,onProcessPair:Fe,onProcessBatchDiff:Tt,onProcessStackFft:Mt,onOpenCrossCalc:()=>b(!0),isThreePlane:re,onToggleXTrans:Cr,xtransPhase:Q,onXTransPhaseChange:Ga,isXTransConverted:D==null?void 0:D.isXTransConverted,roiStats:ge,isBGGR:H,isColorLabOpen:Ee,colorLabMarkingStep:At,onStartColorLabMarking:iu,isSfrLabOpen:mt,onOpenDngExport:()=>w(!0),sfrRectCount:Be.length,isBatchMarkingMode:Ur,onToggleBatchMarking:()=>ln(!Ur),onClearBatchMarks:()=>jr([]),onBatchCompute:fd,stdChartStep:Gr,onStartStandardCalibration:xg,onSaveBatchTemplate:sg,onImportBatchTemplate:au,onBatchTransform:og,onOpenStackingTool:()=>y(!0)})}),c.jsx(s6,{theme:s,setTheme:l})]})]})},kN=document.getElementById("root");if(!kN)throw new Error("Could not find root element to mount to");const Ene=Bm.createRoot(kN);Ene.render(c.jsx(Y.StrictMode,{children:c.jsx(Tne,{})}));
