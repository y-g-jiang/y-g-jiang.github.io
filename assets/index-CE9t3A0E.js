var LN=Object.defineProperty;var BN=(e,t,r)=>t in e?LN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var bn=(e,t,r)=>BN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s5={exports:{}},fh={},l5={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf=Symbol.for("react.element"),FN=Symbol.for("react.portal"),zN=Symbol.for("react.fragment"),GN=Symbol.for("react.strict_mode"),UN=Symbol.for("react.profiler"),WN=Symbol.for("react.provider"),VN=Symbol.for("react.context"),HN=Symbol.for("react.forward_ref"),XN=Symbol.for("react.suspense"),KN=Symbol.for("react.memo"),YN=Symbol.for("react.lazy"),T1=Symbol.iterator;function qN(e){return e===null||typeof e!="object"?null:(e=T1&&e[T1]||e["@@iterator"],typeof e=="function"?e:null)}var c5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u5=Object.assign,f5={};function Xl(e,t,r){this.props=e,this.context=t,this.refs=f5,this.updater=r||c5}Xl.prototype.isReactComponent={};Xl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function d5(){}d5.prototype=Xl.prototype;function mv(e,t,r){this.props=e,this.context=t,this.refs=f5,this.updater=r||c5}var yv=mv.prototype=new d5;yv.constructor=mv;u5(yv,Xl.prototype);yv.isPureReactComponent=!0;var E1=Array.isArray,h5=Object.prototype.hasOwnProperty,vv={current:null},p5={key:!0,ref:!0,__self:!0,__source:!0};function g5(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)h5.call(t,n)&&!p5.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:pf,type:e,key:i,ref:o,props:a,_owner:vv.current}}function ZN(e,t){return{$$typeof:pf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xv(e){return typeof e=="object"&&e!==null&&e.$$typeof===pf}function QN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $1=/\/+/g;function Cp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QN(""+e.key):t.toString(36)}function pd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case pf:case FN:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Cp(o,0):n,E1(a)?(r="",e!=null&&(r=e.replace($1,"$&/")+"/"),pd(a,t,r,"",function(u){return u})):a!=null&&(xv(a)&&(a=ZN(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace($1,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",E1(e))for(var s=0;s<e.length;s++){i=e[s];var l=n+Cp(i,s);o+=pd(i,t,r,l,a)}else if(l=qN(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=n+Cp(i,s++),o+=pd(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ef(e,t,r){if(e==null)return e;var n=[],a=0;return pd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function JN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pn={current:null},gd={transition:null},eO={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:gd,ReactCurrentOwner:vv};function m5(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Ef,forEach:function(e,t,r){Ef(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ef(e,function(){t++}),t},toArray:function(e){return Ef(e,function(t){return t})||[]},only:function(e){if(!xv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=Xl;at.Fragment=zN;at.Profiler=UN;at.PureComponent=mv;at.StrictMode=GN;at.Suspense=XN;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eO;at.act=m5;at.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=u5({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=vv.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)h5.call(t,l)&&!p5.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:pf,type:e.type,key:a,ref:i,props:n,_owner:o}};at.createContext=function(e){return e={$$typeof:VN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:WN,_context:e},e.Consumer=e};at.createElement=g5;at.createFactory=function(e){var t=g5.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:HN,render:e}};at.isValidElement=xv;at.lazy=function(e){return{$$typeof:YN,_payload:{_status:-1,_result:e},_init:JN}};at.memo=function(e,t){return{$$typeof:KN,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=gd.transition;gd.transition={};try{e()}finally{gd.transition=t}};at.unstable_act=m5;at.useCallback=function(e,t){return Pn.current.useCallback(e,t)};at.useContext=function(e){return Pn.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return Pn.current.useDeferredValue(e)};at.useEffect=function(e,t){return Pn.current.useEffect(e,t)};at.useId=function(){return Pn.current.useId()};at.useImperativeHandle=function(e,t,r){return Pn.current.useImperativeHandle(e,t,r)};at.useInsertionEffect=function(e,t){return Pn.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return Pn.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return Pn.current.useMemo(e,t)};at.useReducer=function(e,t,r){return Pn.current.useReducer(e,t,r)};at.useRef=function(e){return Pn.current.useRef(e)};at.useState=function(e){return Pn.current.useState(e)};at.useSyncExternalStore=function(e,t,r){return Pn.current.useSyncExternalStore(e,t,r)};at.useTransition=function(){return Pn.current.useTransition()};at.version="18.3.1";l5.exports=at;var j=l5.exports;const z=Rt(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO=j,rO=Symbol.for("react.element"),nO=Symbol.for("react.fragment"),aO=Object.prototype.hasOwnProperty,iO=tO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oO={key:!0,ref:!0,__self:!0,__source:!0};function y5(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)aO.call(t,n)&&!oO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:rO,type:e,key:i,ref:o,props:a,_owner:iO.current}}fh.Fragment=nO;fh.jsx=y5;fh.jsxs=y5;s5.exports=fh;var c=s5.exports,Bg={},v5={exports:{}},ea={},x5={exports:{}},b5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,L){var U=E.length;E.push(L);e:for(;0<U;){var J=U-1>>>1,K=E[J];if(0<a(K,L))E[J]=L,E[U]=K,U=J;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var L=E[0],U=E.pop();if(U!==L){E[0]=U;e:for(var J=0,K=E.length,F=K>>>1;J<F;){var ee=2*(J+1)-1,ue=E[ee],Q=ee+1,fe=E[Q];if(0>a(ue,U))Q<K&&0>a(fe,ue)?(E[J]=fe,E[Q]=U,J=Q):(E[J]=ue,E[ee]=U,J=ee);else if(Q<K&&0>a(fe,U))E[J]=fe,E[Q]=U,J=Q;else break e}}return L}function a(E,L){var U=E.sortIndex-L.sortIndex;return U!==0?U:E.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],f=1,d=null,h=3,p=!1,y=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=E)n(u),L.sortIndex=L.expirationTime,t(l,L);else break;L=r(u)}}function S(E){if(m=!1,b(E),!y)if(r(l)!==null)y=!0,B(k);else{var L=r(u);L!==null&&A(S,L.startTime-E)}}function k(E,L){y=!1,m&&(m=!1,v(P),P=-1),p=!0;var U=h;try{for(b(L),d=r(l);d!==null&&(!(d.expirationTime>L)||E&&!$());){var J=d.callback;if(typeof J=="function"){d.callback=null,h=d.priorityLevel;var K=J(d.expirationTime<=L);L=e.unstable_now(),typeof K=="function"?d.callback=K:d===r(l)&&n(l),b(L)}else n(l);d=r(l)}if(d!==null)var F=!0;else{var ee=r(u);ee!==null&&A(S,ee.startTime-L),F=!1}return F}finally{d=null,h=U,p=!1}}var w=!1,C=null,P=-1,O=5,N=-1;function $(){return!(e.unstable_now()-N<O)}function M(){if(C!==null){var E=e.unstable_now();N=E;var L=!0;try{L=C(!0,E)}finally{L?_():(w=!1,C=null)}}else w=!1}var _;if(typeof g=="function")_=function(){g(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,I=D.port2;D.port1.onmessage=M,_=function(){I.postMessage(null)}}else _=function(){x(M,0)};function B(E){C=E,w||(w=!0,_())}function A(E,L){P=x(function(){E(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,B(k))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(E){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var U=h;h=L;try{return E()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,L){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var U=h;h=E;try{return L()}finally{h=U}},e.unstable_scheduleCallback=function(E,L,U){var J=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?J+U:J):U=J,E){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=U+K,E={id:f++,callback:L,priorityLevel:E,startTime:U,expirationTime:K,sortIndex:-1},U>J?(E.sortIndex=U,t(u,E),r(l)===null&&E===r(u)&&(m?(v(P),P=-1):m=!0,A(S,U-J))):(E.sortIndex=K,t(l,E),y||p||(y=!0,B(k))),E},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(E){var L=h;return function(){var U=h;h=L;try{return E.apply(this,arguments)}finally{h=U}}}})(b5);x5.exports=b5;var sO=x5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lO=j,Jn=sO;function de(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w5=new Set,du={};function js(e,t){pl(e,t),pl(e+"Capture",t)}function pl(e,t){for(du[e]=t,e=0;e<t.length;e++)w5.add(t[e])}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fg=Object.prototype.hasOwnProperty,cO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D1={},R1={};function uO(e){return Fg.call(R1,e)?!0:Fg.call(D1,e)?!1:cO.test(e)?R1[e]=!0:(D1[e]=!0,!1)}function fO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dO(e,t,r,n){if(t===null||typeof t>"u"||fO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nn(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nn[e]=new Nn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nn[t]=new Nn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nn[e]=new Nn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nn[e]=new Nn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nn[e]=new Nn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nn[e]=new Nn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nn[e]=new Nn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nn[e]=new Nn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nn[e]=new Nn(e,5,!1,e.toLowerCase(),null,!1,!1)});var bv=/[\-:]([a-z])/g;function wv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bv,wv);nn[t]=new Nn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bv,wv);nn[t]=new Nn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bv,wv);nn[t]=new Nn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nn[e]=new Nn(e,1,!1,e.toLowerCase(),null,!1,!1)});nn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nn[e]=new Nn(e,1,!1,e.toLowerCase(),null,!0,!0)});function kv(e,t,r,n){var a=nn.hasOwnProperty(t)?nn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dO(t,r,a,n)&&(r=null),n||a===null?uO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Di=lO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$f=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),Sv=Symbol.for("react.strict_mode"),zg=Symbol.for("react.profiler"),k5=Symbol.for("react.provider"),S5=Symbol.for("react.context"),jv=Symbol.for("react.forward_ref"),Gg=Symbol.for("react.suspense"),Ug=Symbol.for("react.suspense_list"),Cv=Symbol.for("react.memo"),Hi=Symbol.for("react.lazy"),j5=Symbol.for("react.offscreen"),I1=Symbol.iterator;function jc(e){return e===null||typeof e!="object"?null:(e=I1&&e[I1]||e["@@iterator"],typeof e=="function"?e:null)}var or=Object.assign,Pp;function Wc(e){if(Pp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pp=t&&t[1]||""}return`
`+Pp+e}var Np=!1;function Op(e,t){if(!e||Np)return"";Np=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{Np=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wc(e):""}function hO(e){switch(e.tag){case 5:return Wc(e.type);case 16:return Wc("Lazy");case 13:return Wc("Suspense");case 19:return Wc("SuspenseList");case 0:case 2:case 15:return e=Op(e.type,!1),e;case 11:return e=Op(e.type.render,!1),e;case 1:return e=Op(e.type,!0),e;default:return""}}function Wg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Us:return"Fragment";case Gs:return"Portal";case zg:return"Profiler";case Sv:return"StrictMode";case Gg:return"Suspense";case Ug:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S5:return(e.displayName||"Context")+".Consumer";case k5:return(e._context.displayName||"Context")+".Provider";case jv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cv:return t=e.displayName||null,t!==null?t:Wg(e.type)||"Memo";case Hi:t=e._payload,e=e._init;try{return Wg(e(t))}catch{}}return null}function pO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wg(t);case 8:return t===Sv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gO(e){var t=C5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Df(e){e._valueTracker||(e._valueTracker=gO(e))}function P5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=C5(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Md(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vg(e,t){var r=t.checked;return or({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function L1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=wo(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function N5(e,t){t=t.checked,t!=null&&kv(e,"checked",t,!1)}function Hg(e,t){N5(e,t);var r=wo(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xg(e,t.type,wo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function B1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xg(e,t,r){(t!=="number"||Md(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Vc=Array.isArray;function nl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+wo(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Kg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(de(91));return or({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function F1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(de(92));if(Vc(r)){if(1<r.length)throw Error(de(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:wo(r)}}function O5(e,t){var r=wo(t.value),n=wo(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function z1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function M5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?M5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rf,_5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rf=Rf||document.createElement("div"),Rf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mO=["Webkit","ms","Moz","O"];Object.keys(Yc).forEach(function(e){mO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yc[t]=Yc[e]})});function A5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yc.hasOwnProperty(e)&&Yc[e]?(""+t).trim():t+"px"}function T5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=A5(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var yO=or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qg(e,t){if(t){if(yO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(de(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(de(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(de(61))}if(t.style!=null&&typeof t.style!="object")throw Error(de(62))}}function Zg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qg=null;function Pv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jg=null,al=null,il=null;function G1(e){if(e=yf(e)){if(typeof Jg!="function")throw Error(de(280));var t=e.stateNode;t&&(t=mh(t),Jg(e.stateNode,e.type,t))}}function E5(e){al?il?il.push(e):il=[e]:al=e}function $5(){if(al){var e=al,t=il;if(il=al=null,G1(e),t)for(e=0;e<t.length;e++)G1(t[e])}}function D5(e,t){return e(t)}function R5(){}var Mp=!1;function I5(e,t,r){if(Mp)return e(t,r);Mp=!0;try{return D5(e,t,r)}finally{Mp=!1,(al!==null||il!==null)&&(R5(),$5())}}function pu(e,t){var r=e.stateNode;if(r===null)return null;var n=mh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(de(231,t,typeof r));return r}var em=!1;if(Oi)try{var Cc={};Object.defineProperty(Cc,"passive",{get:function(){em=!0}}),window.addEventListener("test",Cc,Cc),window.removeEventListener("test",Cc,Cc)}catch{em=!1}function vO(e,t,r,n,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var qc=!1,_d=null,Ad=!1,tm=null,xO={onError:function(e){qc=!0,_d=e}};function bO(e,t,r,n,a,i,o,s,l){qc=!1,_d=null,vO.apply(xO,arguments)}function wO(e,t,r,n,a,i,o,s,l){if(bO.apply(this,arguments),qc){if(qc){var u=_d;qc=!1,_d=null}else throw Error(de(198));Ad||(Ad=!0,tm=u)}}function Cs(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function L5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function U1(e){if(Cs(e)!==e)throw Error(de(188))}function kO(e){var t=e.alternate;if(!t){if(t=Cs(e),t===null)throw Error(de(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return U1(a),e;if(i===n)return U1(a),t;i=i.sibling}throw Error(de(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(de(189))}}if(r.alternate!==n)throw Error(de(190))}if(r.tag!==3)throw Error(de(188));return r.stateNode.current===r?e:t}function B5(e){return e=kO(e),e!==null?F5(e):null}function F5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=F5(e);if(t!==null)return t;e=e.sibling}return null}var z5=Jn.unstable_scheduleCallback,W1=Jn.unstable_cancelCallback,SO=Jn.unstable_shouldYield,jO=Jn.unstable_requestPaint,vr=Jn.unstable_now,CO=Jn.unstable_getCurrentPriorityLevel,Nv=Jn.unstable_ImmediatePriority,G5=Jn.unstable_UserBlockingPriority,Td=Jn.unstable_NormalPriority,PO=Jn.unstable_LowPriority,U5=Jn.unstable_IdlePriority,dh=null,Qa=null;function NO(e){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(dh,e,void 0,(e.current.flags&128)===128)}catch{}}var Ia=Math.clz32?Math.clz32:_O,OO=Math.log,MO=Math.LN2;function _O(e){return e>>>=0,e===0?32:31-(OO(e)/MO|0)|0}var If=64,Lf=4194304;function Hc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ed(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Hc(s):(i&=o,i!==0&&(n=Hc(i)))}else o=r&~a,o!==0?n=Hc(o):i!==0&&(n=Hc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ia(t),a=1<<r,n|=e[r],t&=~a;return n}function AO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ia(i),s=1<<o,l=a[o];l===-1?(!(s&r)||s&n)&&(a[o]=AO(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function rm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function W5(){var e=If;return If<<=1,!(If&4194240)&&(If=64),e}function _p(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ia(t),e[t]=r}function EO(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ia(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Ov(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ia(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var At=0;function V5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var H5,Mv,X5,K5,Y5,nm=!1,Bf=[],lo=null,co=null,uo=null,gu=new Map,mu=new Map,Yi=[],$O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V1(e,t){switch(e){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":gu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(t.pointerId)}}function Pc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=yf(t),t!==null&&Mv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function DO(e,t,r,n,a){switch(t){case"focusin":return lo=Pc(lo,e,t,r,n,a),!0;case"dragenter":return co=Pc(co,e,t,r,n,a),!0;case"mouseover":return uo=Pc(uo,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return gu.set(i,Pc(gu.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,mu.set(i,Pc(mu.get(i)||null,e,t,r,n,a)),!0}return!1}function q5(e){var t=Ho(e.target);if(t!==null){var r=Cs(t);if(r!==null){if(t=r.tag,t===13){if(t=L5(r),t!==null){e.blockedOn=t,Y5(e.priority,function(){X5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function md(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=am(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Qg=n,r.target.dispatchEvent(n),Qg=null}else return t=yf(r),t!==null&&Mv(t),e.blockedOn=r,!1;t.shift()}return!0}function H1(e,t,r){md(e)&&r.delete(t)}function RO(){nm=!1,lo!==null&&md(lo)&&(lo=null),co!==null&&md(co)&&(co=null),uo!==null&&md(uo)&&(uo=null),gu.forEach(H1),mu.forEach(H1)}function Nc(e,t){e.blockedOn===t&&(e.blockedOn=null,nm||(nm=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,RO)))}function yu(e){function t(a){return Nc(a,e)}if(0<Bf.length){Nc(Bf[0],e);for(var r=1;r<Bf.length;r++){var n=Bf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(lo!==null&&Nc(lo,e),co!==null&&Nc(co,e),uo!==null&&Nc(uo,e),gu.forEach(t),mu.forEach(t),r=0;r<Yi.length;r++)n=Yi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Yi.length&&(r=Yi[0],r.blockedOn===null);)q5(r),r.blockedOn===null&&Yi.shift()}var ol=Di.ReactCurrentBatchConfig,$d=!0;function IO(e,t,r,n){var a=At,i=ol.transition;ol.transition=null;try{At=1,_v(e,t,r,n)}finally{At=a,ol.transition=i}}function LO(e,t,r,n){var a=At,i=ol.transition;ol.transition=null;try{At=4,_v(e,t,r,n)}finally{At=a,ol.transition=i}}function _v(e,t,r,n){if($d){var a=am(e,t,r,n);if(a===null)Fp(e,t,n,Dd,r),V1(e,n);else if(DO(a,e,t,r,n))n.stopPropagation();else if(V1(e,n),t&4&&-1<$O.indexOf(e)){for(;a!==null;){var i=yf(a);if(i!==null&&H5(i),i=am(e,t,r,n),i===null&&Fp(e,t,n,Dd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Fp(e,t,n,null,r)}}var Dd=null;function am(e,t,r,n){if(Dd=null,e=Pv(n),e=Ho(e),e!==null)if(t=Cs(e),t===null)e=null;else if(r=t.tag,r===13){if(e=L5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dd=e,null}function Z5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CO()){case Nv:return 1;case G5:return 4;case Td:case PO:return 16;case U5:return 536870912;default:return 16}default:return 16}}var Qi=null,Av=null,yd=null;function Q5(){if(yd)return yd;var e,t=Av,r=t.length,n,a="value"in Qi?Qi.value:Qi.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return yd=a.slice(e,1<n?1-n:void 0)}function vd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ff(){return!0}function X1(){return!1}function ta(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ff:X1,this.isPropagationStopped=X1,this}return or(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ff)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ff)},persist:function(){},isPersistent:Ff}),t}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tv=ta(Kl),mf=or({},Kl,{view:0,detail:0}),BO=ta(mf),Ap,Tp,Oc,hh=or({},mf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ev,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oc&&(Oc&&e.type==="mousemove"?(Ap=e.screenX-Oc.screenX,Tp=e.screenY-Oc.screenY):Tp=Ap=0,Oc=e),Ap)},movementY:function(e){return"movementY"in e?e.movementY:Tp}}),K1=ta(hh),FO=or({},hh,{dataTransfer:0}),zO=ta(FO),GO=or({},mf,{relatedTarget:0}),Ep=ta(GO),UO=or({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),WO=ta(UO),VO=or({},Kl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),HO=ta(VO),XO=or({},Kl,{data:0}),Y1=ta(XO),KO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qO[e])?!!t[e]:!1}function Ev(){return ZO}var QO=or({},mf,{key:function(e){if(e.key){var t=KO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?YO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ev,charCode:function(e){return e.type==="keypress"?vd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),JO=ta(QO),eM=or({},hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q1=ta(eM),tM=or({},mf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ev}),rM=ta(tM),nM=or({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aM=ta(nM),iM=or({},hh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oM=ta(iM),sM=[9,13,27,32],$v=Oi&&"CompositionEvent"in window,Zc=null;Oi&&"documentMode"in document&&(Zc=document.documentMode);var lM=Oi&&"TextEvent"in window&&!Zc,J5=Oi&&(!$v||Zc&&8<Zc&&11>=Zc),Z1=" ",Q1=!1;function e4(e,t){switch(e){case"keyup":return sM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function cM(e,t){switch(e){case"compositionend":return t4(t);case"keypress":return t.which!==32?null:(Q1=!0,Z1);case"textInput":return e=t.data,e===Z1&&Q1?null:e;default:return null}}function uM(e,t){if(Ws)return e==="compositionend"||!$v&&e4(e,t)?(e=Q5(),yd=Av=Qi=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J5&&t.locale!=="ko"?null:t.data;default:return null}}var fM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fM[e.type]:t==="textarea"}function r4(e,t,r,n){E5(n),t=Rd(t,"onChange"),0<t.length&&(r=new Tv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qc=null,vu=null;function dM(e){h4(e,0)}function ph(e){var t=Xs(e);if(P5(t))return e}function hM(e,t){if(e==="change")return t}var n4=!1;if(Oi){var $p;if(Oi){var Dp="oninput"in document;if(!Dp){var eb=document.createElement("div");eb.setAttribute("oninput","return;"),Dp=typeof eb.oninput=="function"}$p=Dp}else $p=!1;n4=$p&&(!document.documentMode||9<document.documentMode)}function tb(){Qc&&(Qc.detachEvent("onpropertychange",a4),vu=Qc=null)}function a4(e){if(e.propertyName==="value"&&ph(vu)){var t=[];r4(t,vu,e,Pv(e)),I5(dM,t)}}function pM(e,t,r){e==="focusin"?(tb(),Qc=t,vu=r,Qc.attachEvent("onpropertychange",a4)):e==="focusout"&&tb()}function gM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ph(vu)}function mM(e,t){if(e==="click")return ph(t)}function yM(e,t){if(e==="input"||e==="change")return ph(t)}function vM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ba=typeof Object.is=="function"?Object.is:vM;function xu(e,t){if(Ba(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Fg.call(t,a)||!Ba(e[a],t[a]))return!1}return!0}function rb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nb(e,t){var r=rb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rb(r)}}function i4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?i4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function o4(){for(var e=window,t=Md();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Md(e.document)}return t}function Dv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xM(e){var t=o4(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&i4(r.ownerDocument.documentElement,r)){if(n!==null&&Dv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=nb(r,i);var o=nb(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bM=Oi&&"documentMode"in document&&11>=document.documentMode,Vs=null,im=null,Jc=null,om=!1;function ab(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;om||Vs==null||Vs!==Md(n)||(n=Vs,"selectionStart"in n&&Dv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jc&&xu(Jc,n)||(Jc=n,n=Rd(im,"onSelect"),0<n.length&&(t=new Tv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Vs)))}function zf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hs={animationend:zf("Animation","AnimationEnd"),animationiteration:zf("Animation","AnimationIteration"),animationstart:zf("Animation","AnimationStart"),transitionend:zf("Transition","TransitionEnd")},Rp={},s4={};Oi&&(s4=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function gh(e){if(Rp[e])return Rp[e];if(!Hs[e])return e;var t=Hs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in s4)return Rp[e]=t[r];return e}var l4=gh("animationend"),c4=gh("animationiteration"),u4=gh("animationstart"),f4=gh("transitionend"),d4=new Map,ib="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(e,t){d4.set(e,t),js(t,[e])}for(var Ip=0;Ip<ib.length;Ip++){var Lp=ib[Ip],wM=Lp.toLowerCase(),kM=Lp[0].toUpperCase()+Lp.slice(1);So(wM,"on"+kM)}So(l4,"onAnimationEnd");So(c4,"onAnimationIteration");So(u4,"onAnimationStart");So("dblclick","onDoubleClick");So("focusin","onFocus");So("focusout","onBlur");So(f4,"onTransitionEnd");pl("onMouseEnter",["mouseout","mouseover"]);pl("onMouseLeave",["mouseout","mouseover"]);pl("onPointerEnter",["pointerout","pointerover"]);pl("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xc));function ob(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,wO(n,t,void 0,e),e.currentTarget=null}function h4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;ob(a,s,u),i=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;ob(a,s,u),i=l}}}if(Ad)throw e=tm,Ad=!1,tm=null,e}function Vt(e,t){var r=t[fm];r===void 0&&(r=t[fm]=new Set);var n=e+"__bubble";r.has(n)||(p4(t,e,2,!1),r.add(n))}function Bp(e,t,r){var n=0;t&&(n|=4),p4(r,e,n,t)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function bu(e){if(!e[Gf]){e[Gf]=!0,w5.forEach(function(r){r!=="selectionchange"&&(SM.has(r)||Bp(r,!1,e),Bp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gf]||(t[Gf]=!0,Bp("selectionchange",!1,t))}}function p4(e,t,r,n){switch(Z5(t)){case 1:var a=IO;break;case 4:a=LO;break;default:a=_v}r=a.bind(null,t,r,e),a=void 0,!em||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Fp(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=Ho(s),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}s=s.parentNode}}n=n.return}I5(function(){var u=i,f=Pv(r),d=[];e:{var h=d4.get(e);if(h!==void 0){var p=Tv,y=e;switch(e){case"keypress":if(vd(r)===0)break e;case"keydown":case"keyup":p=JO;break;case"focusin":y="focus",p=Ep;break;case"focusout":y="blur",p=Ep;break;case"beforeblur":case"afterblur":p=Ep;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=K1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=zO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=rM;break;case l4:case c4:case u4:p=WO;break;case f4:p=aM;break;case"scroll":p=BO;break;case"wheel":p=oM;break;case"copy":case"cut":case"paste":p=HO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=q1}var m=(t&4)!==0,x=!m&&e==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var g=u,b;g!==null;){b=g;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=pu(g,v),S!=null&&m.push(wu(g,S,b)))),x)break;g=g.return}0<m.length&&(h=new p(h,y,null,r,f),d.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Qg&&(y=r.relatedTarget||r.fromElement)&&(Ho(y)||y[Mi]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?Ho(y):null,y!==null&&(x=Cs(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(m=K1,S="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=q1,S="onPointerLeave",v="onPointerEnter",g="pointer"),x=p==null?h:Xs(p),b=y==null?h:Xs(y),h=new m(S,g+"leave",p,r,f),h.target=x,h.relatedTarget=b,S=null,Ho(f)===u&&(m=new m(v,g+"enter",y,r,f),m.target=b,m.relatedTarget=x,S=m),x=S,p&&y)t:{for(m=p,v=y,g=0,b=m;b;b=Rs(b))g++;for(b=0,S=v;S;S=Rs(S))b++;for(;0<g-b;)m=Rs(m),g--;for(;0<b-g;)v=Rs(v),b--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=Rs(m),v=Rs(v)}m=null}else m=null;p!==null&&sb(d,h,p,m,!1),y!==null&&x!==null&&sb(d,x,y,m,!0)}}e:{if(h=u?Xs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=hM;else if(J1(h))if(n4)k=yM;else{k=gM;var w=pM}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=mM);if(k&&(k=k(e,u))){r4(d,k,r,f);break e}w&&w(e,h,u),e==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Xg(h,"number",h.value)}switch(w=u?Xs(u):window,e){case"focusin":(J1(w)||w.contentEditable==="true")&&(Vs=w,im=u,Jc=null);break;case"focusout":Jc=im=Vs=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,ab(d,r,f);break;case"selectionchange":if(bM)break;case"keydown":case"keyup":ab(d,r,f)}var C;if($v)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ws?e4(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(J5&&r.locale!=="ko"&&(Ws||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ws&&(C=Q5()):(Qi=f,Av="value"in Qi?Qi.value:Qi.textContent,Ws=!0)),w=Rd(u,P),0<w.length&&(P=new Y1(P,e,null,r,f),d.push({event:P,listeners:w}),C?P.data=C:(C=t4(r),C!==null&&(P.data=C)))),(C=lM?cM(e,r):uM(e,r))&&(u=Rd(u,"onBeforeInput"),0<u.length&&(f=new Y1("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=C))}h4(d,t)})}function wu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Rd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=pu(e,r),i!=null&&n.unshift(wu(e,i,a)),i=pu(e,t),i!=null&&n.push(wu(e,i,a))),e=e.return}return n}function Rs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sb(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,a?(l=pu(r,i),l!=null&&o.unshift(wu(r,l,s))):a||(l=pu(r,i),l!=null&&o.push(wu(r,l,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var jM=/\r\n?/g,CM=/\u0000|\uFFFD/g;function lb(e){return(typeof e=="string"?e:""+e).replace(jM,`
`).replace(CM,"")}function Uf(e,t,r){if(t=lb(t),lb(e)!==t&&r)throw Error(de(425))}function Id(){}var sm=null,lm=null;function cm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var um=typeof setTimeout=="function"?setTimeout:void 0,PM=typeof clearTimeout=="function"?clearTimeout:void 0,cb=typeof Promise=="function"?Promise:void 0,NM=typeof queueMicrotask=="function"?queueMicrotask:typeof cb<"u"?function(e){return cb.resolve(null).then(e).catch(OM)}:um;function OM(e){setTimeout(function(){throw e})}function zp(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),yu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);yu(t)}function fo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ub(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),Ya="__reactFiber$"+Yl,ku="__reactProps$"+Yl,Mi="__reactContainer$"+Yl,fm="__reactEvents$"+Yl,MM="__reactListeners$"+Yl,_M="__reactHandles$"+Yl;function Ho(e){var t=e[Ya];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mi]||r[Ya]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ub(e);e!==null;){if(r=e[Ya])return r;e=ub(e)}return t}e=r,r=e.parentNode}return null}function yf(e){return e=e[Ya]||e[Mi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(de(33))}function mh(e){return e[ku]||null}var dm=[],Ks=-1;function jo(e){return{current:e}}function Kt(e){0>Ks||(e.current=dm[Ks],dm[Ks]=null,Ks--)}function Gt(e,t){Ks++,dm[Ks]=e.current,e.current=t}var ko={},gn=jo(ko),Dn=jo(!1),ls=ko;function gl(e,t){var r=e.type.contextTypes;if(!r)return ko;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rn(e){return e=e.childContextTypes,e!=null}function Ld(){Kt(Dn),Kt(gn)}function fb(e,t,r){if(gn.current!==ko)throw Error(de(168));Gt(gn,t),Gt(Dn,r)}function g4(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(de(108,pO(e)||"Unknown",a));return or({},r,n)}function Bd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ko,ls=gn.current,Gt(gn,e),Gt(Dn,Dn.current),!0}function db(e,t,r){var n=e.stateNode;if(!n)throw Error(de(169));r?(e=g4(e,t,ls),n.__reactInternalMemoizedMergedChildContext=e,Kt(Dn),Kt(gn),Gt(gn,e)):Kt(Dn),Gt(Dn,r)}var yi=null,yh=!1,Gp=!1;function m4(e){yi===null?yi=[e]:yi.push(e)}function AM(e){yh=!0,m4(e)}function Co(){if(!Gp&&yi!==null){Gp=!0;var e=0,t=At;try{var r=yi;for(At=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}yi=null,yh=!1}catch(a){throw yi!==null&&(yi=yi.slice(e+1)),z5(Nv,Co),a}finally{At=t,Gp=!1}}return null}var Ys=[],qs=0,Fd=null,zd=0,ca=[],ua=0,cs=null,vi=1,xi="";function zo(e,t){Ys[qs++]=zd,Ys[qs++]=Fd,Fd=e,zd=t}function y4(e,t,r){ca[ua++]=vi,ca[ua++]=xi,ca[ua++]=cs,cs=e;var n=vi;e=xi;var a=32-Ia(n)-1;n&=~(1<<a),r+=1;var i=32-Ia(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,vi=1<<32-Ia(t)+a|r<<a|n,xi=i+e}else vi=1<<i|r<<a|n,xi=e}function Rv(e){e.return!==null&&(zo(e,1),y4(e,1,0))}function Iv(e){for(;e===Fd;)Fd=Ys[--qs],Ys[qs]=null,zd=Ys[--qs],Ys[qs]=null;for(;e===cs;)cs=ca[--ua],ca[ua]=null,xi=ca[--ua],ca[ua]=null,vi=ca[--ua],ca[ua]=null}var Qn=null,Zn=null,Jt=!1,Ea=null;function v4(e,t){var r=fa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qn=e,Zn=fo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qn=e,Zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cs!==null?{id:vi,overflow:xi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qn=e,Zn=null,!0):!1;default:return!1}}function hm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pm(e){if(Jt){var t=Zn;if(t){var r=t;if(!hb(e,t)){if(hm(e))throw Error(de(418));t=fo(r.nextSibling);var n=Qn;t&&hb(e,t)?v4(n,r):(e.flags=e.flags&-4097|2,Jt=!1,Qn=e)}}else{if(hm(e))throw Error(de(418));e.flags=e.flags&-4097|2,Jt=!1,Qn=e}}}function pb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qn=e}function Wf(e){if(e!==Qn)return!1;if(!Jt)return pb(e),Jt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cm(e.type,e.memoizedProps)),t&&(t=Zn)){if(hm(e))throw x4(),Error(de(418));for(;t;)v4(e,t),t=fo(t.nextSibling)}if(pb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(de(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Zn=fo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Zn=null}}else Zn=Qn?fo(e.stateNode.nextSibling):null;return!0}function x4(){for(var e=Zn;e;)e=fo(e.nextSibling)}function ml(){Zn=Qn=null,Jt=!1}function Lv(e){Ea===null?Ea=[e]:Ea.push(e)}var TM=Di.ReactCurrentBatchConfig;function Mc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(de(309));var n=r.stateNode}if(!n)throw Error(de(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(de(284));if(!r._owner)throw Error(de(290,e))}return e}function Vf(e,t){throw e=Object.prototype.toString.call(t),Error(de(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gb(e){var t=e._init;return t(e._payload)}function b4(e){function t(v,g){if(e){var b=v.deletions;b===null?(v.deletions=[g],v.flags|=16):b.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function a(v,g){return v=mo(v,g),v.index=0,v.sibling=null,v}function i(v,g,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<g?(v.flags|=2,g):b):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,g,b,S){return g===null||g.tag!==6?(g=Yp(b,v.mode,S),g.return=v,g):(g=a(g,b),g.return=v,g)}function l(v,g,b,S){var k=b.type;return k===Us?f(v,g,b.props.children,S,b.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Hi&&gb(k)===g.type)?(S=a(g,b.props),S.ref=Mc(v,g,b),S.return=v,S):(S=Cd(b.type,b.key,b.props,null,v.mode,S),S.ref=Mc(v,g,b),S.return=v,S)}function u(v,g,b,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=qp(b,v.mode,S),g.return=v,g):(g=a(g,b.children||[]),g.return=v,g)}function f(v,g,b,S,k){return g===null||g.tag!==7?(g=as(b,v.mode,S,k),g.return=v,g):(g=a(g,b),g.return=v,g)}function d(v,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Yp(""+g,v.mode,b),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $f:return b=Cd(g.type,g.key,g.props,null,v.mode,b),b.ref=Mc(v,null,g),b.return=v,b;case Gs:return g=qp(g,v.mode,b),g.return=v,g;case Hi:var S=g._init;return d(v,S(g._payload),b)}if(Vc(g)||jc(g))return g=as(g,v.mode,b,null),g.return=v,g;Vf(v,g)}return null}function h(v,g,b,S){var k=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:s(v,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $f:return b.key===k?l(v,g,b,S):null;case Gs:return b.key===k?u(v,g,b,S):null;case Hi:return k=b._init,h(v,g,k(b._payload),S)}if(Vc(b)||jc(b))return k!==null?null:f(v,g,b,S,null);Vf(v,b)}return null}function p(v,g,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,s(g,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $f:return v=v.get(S.key===null?b:S.key)||null,l(g,v,S,k);case Gs:return v=v.get(S.key===null?b:S.key)||null,u(g,v,S,k);case Hi:var w=S._init;return p(v,g,b,w(S._payload),k)}if(Vc(S)||jc(S))return v=v.get(b)||null,f(g,v,S,k,null);Vf(g,S)}return null}function y(v,g,b,S){for(var k=null,w=null,C=g,P=g=0,O=null;C!==null&&P<b.length;P++){C.index>P?(O=C,C=null):O=C.sibling;var N=h(v,C,b[P],S);if(N===null){C===null&&(C=O);break}e&&C&&N.alternate===null&&t(v,C),g=i(N,g,P),w===null?k=N:w.sibling=N,w=N,C=O}if(P===b.length)return r(v,C),Jt&&zo(v,P),k;if(C===null){for(;P<b.length;P++)C=d(v,b[P],S),C!==null&&(g=i(C,g,P),w===null?k=C:w.sibling=C,w=C);return Jt&&zo(v,P),k}for(C=n(v,C);P<b.length;P++)O=p(C,v,P,b[P],S),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?P:O.key),g=i(O,g,P),w===null?k=O:w.sibling=O,w=O);return e&&C.forEach(function($){return t(v,$)}),Jt&&zo(v,P),k}function m(v,g,b,S){var k=jc(b);if(typeof k!="function")throw Error(de(150));if(b=k.call(b),b==null)throw Error(de(151));for(var w=k=null,C=g,P=g=0,O=null,N=b.next();C!==null&&!N.done;P++,N=b.next()){C.index>P?(O=C,C=null):O=C.sibling;var $=h(v,C,N.value,S);if($===null){C===null&&(C=O);break}e&&C&&$.alternate===null&&t(v,C),g=i($,g,P),w===null?k=$:w.sibling=$,w=$,C=O}if(N.done)return r(v,C),Jt&&zo(v,P),k;if(C===null){for(;!N.done;P++,N=b.next())N=d(v,N.value,S),N!==null&&(g=i(N,g,P),w===null?k=N:w.sibling=N,w=N);return Jt&&zo(v,P),k}for(C=n(v,C);!N.done;P++,N=b.next())N=p(C,v,P,N.value,S),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?P:N.key),g=i(N,g,P),w===null?k=N:w.sibling=N,w=N);return e&&C.forEach(function(M){return t(v,M)}),Jt&&zo(v,P),k}function x(v,g,b,S){if(typeof b=="object"&&b!==null&&b.type===Us&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $f:e:{for(var k=b.key,w=g;w!==null;){if(w.key===k){if(k=b.type,k===Us){if(w.tag===7){r(v,w.sibling),g=a(w,b.props.children),g.return=v,v=g;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Hi&&gb(k)===w.type){r(v,w.sibling),g=a(w,b.props),g.ref=Mc(v,w,b),g.return=v,v=g;break e}r(v,w);break}else t(v,w);w=w.sibling}b.type===Us?(g=as(b.props.children,v.mode,S,b.key),g.return=v,v=g):(S=Cd(b.type,b.key,b.props,null,v.mode,S),S.ref=Mc(v,g,b),S.return=v,v=S)}return o(v);case Gs:e:{for(w=b.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(v,g.sibling),g=a(g,b.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=qp(b,v.mode,S),g.return=v,v=g}return o(v);case Hi:return w=b._init,x(v,g,w(b._payload),S)}if(Vc(b))return y(v,g,b,S);if(jc(b))return m(v,g,b,S);Vf(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(v,g.sibling),g=a(g,b),g.return=v,v=g):(r(v,g),g=Yp(b,v.mode,S),g.return=v,v=g),o(v)):r(v,g)}return x}var yl=b4(!0),w4=b4(!1),Gd=jo(null),Ud=null,Zs=null,Bv=null;function Fv(){Bv=Zs=Ud=null}function zv(e){var t=Gd.current;Kt(Gd),e._currentValue=t}function gm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function sl(e,t){Ud=e,Bv=Zs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(En=!0),e.firstContext=null)}function ma(e){var t=e._currentValue;if(Bv!==e)if(e={context:e,memoizedValue:t,next:null},Zs===null){if(Ud===null)throw Error(de(308));Zs=e,Ud.dependencies={lanes:0,firstContext:e}}else Zs=Zs.next=e;return t}var Xo=null;function Gv(e){Xo===null?Xo=[e]:Xo.push(e)}function k4(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Gv(t)):(r.next=a.next,a.next=r),t.interleaved=r,_i(e,n)}function _i(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xi=!1;function Uv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Si(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,_i(e,r)}return a=n.interleaved,a===null?(t.next=t,Gv(n)):(t.next=a.next,a.next=t),n.interleaved=t,_i(e,r)}function xd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ov(e,r)}}function mb(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wd(e,t,r,n){var a=e.updateQueue;Xi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,f=u=l=null,s=i;do{var h=s.lane,p=s.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=e,m=s;switch(h=t,p=r,m.tag){case 1:if(y=m.payload,typeof y=="function"){d=y.call(p,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,h=typeof y=="function"?y.call(p,d,h):y,h==null)break e;d=or({},d,h);break e;case 2:Xi=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=p,l=d):f=f.next=p,o|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;h=s,s=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);fs|=o,e.lanes=o,e.memoizedState=d}}function yb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(de(191,a));a.call(n)}}}var vf={},Ja=jo(vf),Su=jo(vf),ju=jo(vf);function Ko(e){if(e===vf)throw Error(de(174));return e}function Wv(e,t){switch(Gt(ju,t),Gt(Su,e),Gt(Ja,vf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yg(t,e)}Kt(Ja),Gt(Ja,t)}function vl(){Kt(Ja),Kt(Su),Kt(ju)}function j4(e){Ko(ju.current);var t=Ko(Ja.current),r=Yg(t,e.type);t!==r&&(Gt(Su,e),Gt(Ja,r))}function Vv(e){Su.current===e&&(Kt(Ja),Kt(Su))}var ar=jo(0);function Vd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Up=[];function Hv(){for(var e=0;e<Up.length;e++)Up[e]._workInProgressVersionPrimary=null;Up.length=0}var bd=Di.ReactCurrentDispatcher,Wp=Di.ReactCurrentBatchConfig,us=0,ir=null,Ir=null,Hr=null,Hd=!1,eu=!1,Cu=0,EM=0;function cn(){throw Error(de(321))}function Xv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ba(e[r],t[r]))return!1;return!0}function Kv(e,t,r,n,a,i){if(us=i,ir=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bd.current=e===null||e.memoizedState===null?IM:LM,e=r(n,a),eu){i=0;do{if(eu=!1,Cu=0,25<=i)throw Error(de(301));i+=1,Hr=Ir=null,t.updateQueue=null,bd.current=BM,e=r(n,a)}while(eu)}if(bd.current=Xd,t=Ir!==null&&Ir.next!==null,us=0,Hr=Ir=ir=null,Hd=!1,t)throw Error(de(300));return e}function Yv(){var e=Cu!==0;return Cu=0,e}function Ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?ir.memoizedState=Hr=e:Hr=Hr.next=e,Hr}function ya(){if(Ir===null){var e=ir.alternate;e=e!==null?e.memoizedState:null}else e=Ir.next;var t=Hr===null?ir.memoizedState:Hr.next;if(t!==null)Hr=t,Ir=e;else{if(e===null)throw Error(de(310));Ir=e,e={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Hr===null?ir.memoizedState=Hr=e:Hr=Hr.next=e}return Hr}function Pu(e,t){return typeof t=="function"?t(e):t}function Vp(e){var t=ya(),r=t.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=e;var n=Ir,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,l=null,u=i;do{var f=u.lane;if((us&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,ir.lanes|=f,fs|=f}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=s,Ba(n,t.memoizedState)||(En=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ir.lanes|=i,fs|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hp(e){var t=ya(),r=t.queue;if(r===null)throw Error(de(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ba(i,t.memoizedState)||(En=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function C4(){}function P4(e,t){var r=ir,n=ya(),a=t(),i=!Ba(n.memoizedState,a);if(i&&(n.memoizedState=a,En=!0),n=n.queue,qv(M4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Hr!==null&&Hr.memoizedState.tag&1){if(r.flags|=2048,Nu(9,O4.bind(null,r,n,a,t),void 0,null),Kr===null)throw Error(de(349));us&30||N4(r,t,a)}return a}function N4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ir.updateQueue,t===null?(t={lastEffect:null,stores:null},ir.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function O4(e,t,r,n){t.value=r,t.getSnapshot=n,_4(t)&&A4(e)}function M4(e,t,r){return r(function(){_4(t)&&A4(e)})}function _4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ba(e,r)}catch{return!0}}function A4(e){var t=_i(e,1);t!==null&&La(t,e,1,-1)}function vb(e){var t=Ka();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pu,lastRenderedState:e},t.queue=e,e=e.dispatch=RM.bind(null,ir,e),[t.memoizedState,e]}function Nu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ir.updateQueue,t===null?(t={lastEffect:null,stores:null},ir.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function T4(){return ya().memoizedState}function wd(e,t,r,n){var a=Ka();ir.flags|=e,a.memoizedState=Nu(1|t,r,void 0,n===void 0?null:n)}function vh(e,t,r,n){var a=ya();n=n===void 0?null:n;var i=void 0;if(Ir!==null){var o=Ir.memoizedState;if(i=o.destroy,n!==null&&Xv(n,o.deps)){a.memoizedState=Nu(t,r,i,n);return}}ir.flags|=e,a.memoizedState=Nu(1|t,r,i,n)}function xb(e,t){return wd(8390656,8,e,t)}function qv(e,t){return vh(2048,8,e,t)}function E4(e,t){return vh(4,2,e,t)}function $4(e,t){return vh(4,4,e,t)}function D4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function R4(e,t,r){return r=r!=null?r.concat([e]):null,vh(4,4,D4.bind(null,t,e),r)}function Zv(){}function I4(e,t){var r=ya();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function L4(e,t){var r=ya();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function B4(e,t,r){return us&21?(Ba(r,t)||(r=W5(),ir.lanes|=r,fs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,En=!0),e.memoizedState=r)}function $M(e,t){var r=At;At=r!==0&&4>r?r:4,e(!0);var n=Wp.transition;Wp.transition={};try{e(!1),t()}finally{At=r,Wp.transition=n}}function F4(){return ya().memoizedState}function DM(e,t,r){var n=go(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},z4(e))G4(t,r);else if(r=k4(e,t,r,n),r!==null){var a=Cn();La(r,e,n,a),U4(r,t,n)}}function RM(e,t,r){var n=go(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(z4(e))G4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Ba(s,o)){var l=t.interleaved;l===null?(a.next=a,Gv(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=k4(e,t,a,n),r!==null&&(a=Cn(),La(r,e,n,a),U4(r,t,n))}}function z4(e){var t=e.alternate;return e===ir||t!==null&&t===ir}function G4(e,t){eu=Hd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function U4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ov(e,r)}}var Xd={readContext:ma,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},IM={readContext:ma,useCallback:function(e,t){return Ka().memoizedState=[e,t===void 0?null:t],e},useContext:ma,useEffect:xb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,wd(4194308,4,D4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return wd(4194308,4,e,t)},useInsertionEffect:function(e,t){return wd(4,2,e,t)},useMemo:function(e,t){var r=Ka();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ka();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=DM.bind(null,ir,e),[n.memoizedState,e]},useRef:function(e){var t=Ka();return e={current:e},t.memoizedState=e},useState:vb,useDebugValue:Zv,useDeferredValue:function(e){return Ka().memoizedState=e},useTransition:function(){var e=vb(!1),t=e[0];return e=$M.bind(null,e[1]),Ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ir,a=Ka();if(Jt){if(r===void 0)throw Error(de(407));r=r()}else{if(r=t(),Kr===null)throw Error(de(349));us&30||N4(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,xb(M4.bind(null,n,i,e),[e]),n.flags|=2048,Nu(9,O4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ka(),t=Kr.identifierPrefix;if(Jt){var r=xi,n=vi;r=(n&~(1<<32-Ia(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=EM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LM={readContext:ma,useCallback:I4,useContext:ma,useEffect:qv,useImperativeHandle:R4,useInsertionEffect:E4,useLayoutEffect:$4,useMemo:L4,useReducer:Vp,useRef:T4,useState:function(){return Vp(Pu)},useDebugValue:Zv,useDeferredValue:function(e){var t=ya();return B4(t,Ir.memoizedState,e)},useTransition:function(){var e=Vp(Pu)[0],t=ya().memoizedState;return[e,t]},useMutableSource:C4,useSyncExternalStore:P4,useId:F4,unstable_isNewReconciler:!1},BM={readContext:ma,useCallback:I4,useContext:ma,useEffect:qv,useImperativeHandle:R4,useInsertionEffect:E4,useLayoutEffect:$4,useMemo:L4,useReducer:Hp,useRef:T4,useState:function(){return Hp(Pu)},useDebugValue:Zv,useDeferredValue:function(e){var t=ya();return Ir===null?t.memoizedState=e:B4(t,Ir.memoizedState,e)},useTransition:function(){var e=Hp(Pu)[0],t=ya().memoizedState;return[e,t]},useMutableSource:C4,useSyncExternalStore:P4,useId:F4,unstable_isNewReconciler:!1};function Ma(e,t){if(e&&e.defaultProps){t=or({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function mm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:or({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var xh={isMounted:function(e){return(e=e._reactInternals)?Cs(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Cn(),a=go(e),i=Si(n,a);i.payload=t,r!=null&&(i.callback=r),t=ho(e,i,a),t!==null&&(La(t,e,a,n),xd(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Cn(),a=go(e),i=Si(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ho(e,i,a),t!==null&&(La(t,e,a,n),xd(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Cn(),n=go(e),a=Si(r,n);a.tag=2,t!=null&&(a.callback=t),t=ho(e,a,n),t!==null&&(La(t,e,n,r),xd(t,e,n))}};function bb(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!xu(r,n)||!xu(a,i):!0}function W4(e,t,r){var n=!1,a=ko,i=t.contextType;return typeof i=="object"&&i!==null?i=ma(i):(a=Rn(t)?ls:gn.current,n=t.contextTypes,i=(n=n!=null)?gl(e,a):ko),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function wb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&xh.enqueueReplaceState(t,t.state,null)}function ym(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Uv(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ma(i):(i=Rn(t)?ls:gn.current,a.context=gl(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(mm(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&xh.enqueueReplaceState(a,a.state,null),Wd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function xl(e,t){try{var r="",n=t;do r+=hO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Xp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function vm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var FM=typeof WeakMap=="function"?WeakMap:Map;function V4(e,t,r){r=Si(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Yd||(Yd=!0,Om=n),vm(e,t)},r}function H4(e,t,r){r=Si(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){vm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){vm(e,t),typeof n!="function"&&(po===null?po=new Set([this]):po.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function kb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new FM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=e_.bind(null,e,t,r),t.then(e,e))}function Sb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jb(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Si(-1,1),t.tag=2,ho(r,t,1))),r.lanes|=1),e)}var zM=Di.ReactCurrentOwner,En=!1;function Sn(e,t,r,n){t.child=e===null?w4(t,null,r,n):yl(t,e.child,r,n)}function Cb(e,t,r,n,a){r=r.render;var i=t.ref;return sl(t,a),n=Kv(e,t,r,n,i,a),r=Yv(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ai(e,t,a)):(Jt&&r&&Rv(t),t.flags|=1,Sn(e,t,n,a),t.child)}function Pb(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!ix(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,X4(e,t,i,n,a)):(e=Cd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:xu,r(o,n)&&e.ref===t.ref)return Ai(e,t,a)}return t.flags|=1,e=mo(i,n),e.ref=t.ref,e.return=t,t.child=e}function X4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(xu(i,n)&&e.ref===t.ref)if(En=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(En=!0);else return t.lanes=e.lanes,Ai(e,t,a)}return xm(e,t,r,n,a)}function K4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Js,Kn),Kn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(Js,Kn),Kn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Gt(Js,Kn),Kn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Gt(Js,Kn),Kn|=n;return Sn(e,t,a,r),t.child}function Y4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xm(e,t,r,n,a){var i=Rn(r)?ls:gn.current;return i=gl(t,i),sl(t,a),r=Kv(e,t,r,n,i,a),n=Yv(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ai(e,t,a)):(Jt&&n&&Rv(t),t.flags|=1,Sn(e,t,r,a),t.child)}function Nb(e,t,r,n,a){if(Rn(r)){var i=!0;Bd(t)}else i=!1;if(sl(t,a),t.stateNode===null)kd(e,t),W4(t,r,n),ym(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ma(u):(u=Rn(r)?ls:gn.current,u=gl(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&wb(t,o,n,u),Xi=!1;var h=t.memoizedState;o.state=h,Wd(t,n,o,a),l=t.memoizedState,s!==n||h!==l||Dn.current||Xi?(typeof f=="function"&&(mm(t,r,f,n),l=t.memoizedState),(s=Xi||bb(t,r,s,n,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,S4(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ma(t.type,s),o.props=u,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ma(l):(l=Rn(r)?ls:gn.current,l=gl(t,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||h!==l)&&wb(t,o,n,l),Xi=!1,h=t.memoizedState,o.state=h,Wd(t,n,o,a);var y=t.memoizedState;s!==d||h!==y||Dn.current||Xi?(typeof p=="function"&&(mm(t,r,p,n),y=t.memoizedState),(u=Xi||bb(t,r,u,n,h,y,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return bm(e,t,r,n,i,a)}function bm(e,t,r,n,a,i){Y4(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&db(t,r,!1),Ai(e,t,i);n=t.stateNode,zM.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=yl(t,e.child,null,i),t.child=yl(t,null,s,i)):Sn(e,t,s,i),t.memoizedState=n.state,a&&db(t,r,!0),t.child}function q4(e){var t=e.stateNode;t.pendingContext?fb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fb(e,t.context,!1),Wv(e,t.containerInfo)}function Ob(e,t,r,n,a){return ml(),Lv(a),t.flags|=256,Sn(e,t,r,n),t.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function km(e){return{baseLanes:e,cachePool:null,transitions:null}}function Z4(e,t,r){var n=t.pendingProps,a=ar.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Gt(ar,a&1),e===null)return pm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=kh(o,n,0,null),e=as(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=km(r),t.memoizedState=wm,e):Qv(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return GM(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=mo(a,l),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=mo(s,i):(i=as(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?km(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=wm,n}return i=e.child,e=i.sibling,n=mo(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Qv(e,t){return t=kh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hf(e,t,r,n){return n!==null&&Lv(n),yl(t,e.child,null,r),e=Qv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GM(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Xp(Error(de(422))),Hf(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=kh({mode:"visible",children:n.children},a,0,null),i=as(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&yl(t,e.child,null,o),t.child.memoizedState=km(o),t.memoizedState=wm,i);if(!(t.mode&1))return Hf(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(de(419)),n=Xp(i,n,void 0),Hf(e,t,o,n)}if(s=(o&e.childLanes)!==0,En||s){if(n=Kr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,_i(e,a),La(n,e,a,-1))}return ax(),n=Xp(Error(de(421))),Hf(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=t_.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Zn=fo(a.nextSibling),Qn=t,Jt=!0,Ea=null,e!==null&&(ca[ua++]=vi,ca[ua++]=xi,ca[ua++]=cs,vi=e.id,xi=e.overflow,cs=t),t=Qv(t,n.children),t.flags|=4096,t)}function Mb(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gm(e.return,t,r)}function Kp(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Q4(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Sn(e,t,n.children,r),n=ar.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mb(e,r,t);else if(e.tag===19)Mb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Gt(ar,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Vd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Kp(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Vd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Kp(t,!0,r,null,i);break;case"together":Kp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ai(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(de(153));if(t.child!==null){for(e=t.child,r=mo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function UM(e,t,r){switch(t.tag){case 3:q4(t),ml();break;case 5:j4(t);break;case 1:Rn(t.type)&&Bd(t);break;case 4:Wv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Gt(Gd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Gt(ar,ar.current&1),t.flags|=128,null):r&t.child.childLanes?Z4(e,t,r):(Gt(ar,ar.current&1),e=Ai(e,t,r),e!==null?e.sibling:null);Gt(ar,ar.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Q4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Gt(ar,ar.current),n)break;return null;case 22:case 23:return t.lanes=0,K4(e,t,r)}return Ai(e,t,r)}var J4,Sm,e3,t3;J4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sm=function(){};e3=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ko(Ja.current);var i=null;switch(r){case"input":a=Vg(e,a),n=Vg(e,n),i=[];break;case"select":a=or({},a,{value:void 0}),n=or({},n,{value:void 0}),i=[];break;case"textarea":a=Kg(e,a),n=Kg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Id)}qg(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(du.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(du.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Vt("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};t3=function(e,t,r,n){r!==n&&(t.flags|=4)};function _c(e,t){if(!Jt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function WM(e,t,r){var n=t.pendingProps;switch(Iv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return Rn(t.type)&&Ld(),un(t),null;case 3:return n=t.stateNode,vl(),Kt(Dn),Kt(gn),Hv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ea!==null&&(Am(Ea),Ea=null))),Sm(e,t),un(t),null;case 5:Vv(t);var a=Ko(ju.current);if(r=t.type,e!==null&&t.stateNode!=null)e3(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(de(166));return un(t),null}if(e=Ko(Ja.current),Wf(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ya]=t,n[ku]=i,e=(t.mode&1)!==0,r){case"dialog":Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":case"embed":Vt("load",n);break;case"video":case"audio":for(a=0;a<Xc.length;a++)Vt(Xc[a],n);break;case"source":Vt("error",n);break;case"img":case"image":case"link":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"input":L1(n,i),Vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Vt("invalid",n);break;case"textarea":F1(n,i),Vt("invalid",n)}qg(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&Uf(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Uf(n.textContent,s,e),a=["children",""+s]):du.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Vt("scroll",n)}switch(r){case"input":Df(n),B1(n,i,!0);break;case"textarea":Df(n),z1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Id)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=M5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ya]=t,e[ku]=n,J4(e,t,!1,!1),t.stateNode=e;e:{switch(o=Zg(r,n),r){case"dialog":Vt("cancel",e),Vt("close",e),a=n;break;case"iframe":case"object":case"embed":Vt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Xc.length;a++)Vt(Xc[a],e);a=n;break;case"source":Vt("error",e),a=n;break;case"img":case"image":case"link":Vt("error",e),Vt("load",e),a=n;break;case"details":Vt("toggle",e),a=n;break;case"input":L1(e,n),a=Vg(e,n),Vt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=or({},n,{value:void 0}),Vt("invalid",e);break;case"textarea":F1(e,n),a=Kg(e,n),Vt("invalid",e);break;default:a=n}qg(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?T5(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_5(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&hu(e,l):typeof l=="number"&&hu(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(du.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Vt("scroll",e):l!=null&&kv(e,i,l,o))}switch(r){case"input":Df(e),B1(e,n,!1);break;case"textarea":Df(e),z1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+wo(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?nl(e,!!n.multiple,i,!1):n.defaultValue!=null&&nl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Id)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return un(t),null;case 6:if(e&&t.stateNode!=null)t3(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(de(166));if(r=Ko(ju.current),Ko(Ja.current),Wf(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ya]=t,(i=n.nodeValue!==r)&&(e=Qn,e!==null))switch(e.tag){case 3:Uf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Uf(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ya]=t,t.stateNode=n}return un(t),null;case 13:if(Kt(ar),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Jt&&Zn!==null&&t.mode&1&&!(t.flags&128))x4(),ml(),t.flags|=98560,i=!1;else if(i=Wf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(de(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));i[Ya]=t}else ml(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),i=!1}else Ea!==null&&(Am(Ea),Ea=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ar.current&1?Lr===0&&(Lr=3):ax())),t.updateQueue!==null&&(t.flags|=4),un(t),null);case 4:return vl(),Sm(e,t),e===null&&bu(t.stateNode.containerInfo),un(t),null;case 10:return zv(t.type._context),un(t),null;case 17:return Rn(t.type)&&Ld(),un(t),null;case 19:if(Kt(ar),i=t.memoizedState,i===null)return un(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)_c(i,!1);else{if(Lr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Vd(e),o!==null){for(t.flags|=128,_c(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Gt(ar,ar.current&1|2),t.child}e=e.sibling}i.tail!==null&&vr()>bl&&(t.flags|=128,n=!0,_c(i,!1),t.lanes=4194304)}else{if(!n)if(e=Vd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),_c(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Jt)return un(t),null}else 2*vr()-i.renderingStartTime>bl&&r!==1073741824&&(t.flags|=128,n=!0,_c(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=vr(),t.sibling=null,r=ar.current,Gt(ar,n?r&1|2:r&1),t):(un(t),null);case 22:case 23:return nx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Kn&1073741824&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),null;case 24:return null;case 25:return null}throw Error(de(156,t.tag))}function VM(e,t){switch(Iv(t),t.tag){case 1:return Rn(t.type)&&Ld(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vl(),Kt(Dn),Kt(gn),Hv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vv(t),null;case 13:if(Kt(ar),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(de(340));ml()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(ar),null;case 4:return vl(),null;case 10:return zv(t.type._context),null;case 22:case 23:return nx(),null;case 24:return null;default:return null}}var Xf=!1,hn=!1,HM=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Qs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dr(e,t,n)}else r.current=null}function jm(e,t,r){try{r()}catch(n){dr(e,t,n)}}var _b=!1;function XM(e,t){if(sm=$d,e=o4(),Dv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===a&&(s=o),h===i&&++f===n&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(lm={focusedElem:e,selectionRange:r},$d=!1,Se=t;Se!==null;)if(t=Se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Se=e;else for(;Se!==null;){t=Se;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,x=y.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ma(t.type,m),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(S){dr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Se=e;break}Se=t.return}return y=_b,_b=!1,y}function tu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&jm(t,r,i)}a=a.next}while(a!==n)}}function bh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Cm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function r3(e){var t=e.alternate;t!==null&&(e.alternate=null,r3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ya],delete t[ku],delete t[fm],delete t[MM],delete t[_M])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function n3(e){return e.tag===5||e.tag===3||e.tag===4}function Ab(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||n3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Id));else if(n!==4&&(e=e.child,e!==null))for(Pm(e,t,r),e=e.sibling;e!==null;)Pm(e,t,r),e=e.sibling}function Nm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Nm(e,t,r),e=e.sibling;e!==null;)Nm(e,t,r),e=e.sibling}var Jr=null,_a=!1;function Wi(e,t,r){for(r=r.child;r!==null;)a3(e,t,r),r=r.sibling}function a3(e,t,r){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(dh,r)}catch{}switch(r.tag){case 5:hn||Qs(r,t);case 6:var n=Jr,a=_a;Jr=null,Wi(e,t,r),Jr=n,_a=a,Jr!==null&&(_a?(e=Jr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(_a?(e=Jr,r=r.stateNode,e.nodeType===8?zp(e.parentNode,r):e.nodeType===1&&zp(e,r),yu(e)):zp(Jr,r.stateNode));break;case 4:n=Jr,a=_a,Jr=r.stateNode.containerInfo,_a=!0,Wi(e,t,r),Jr=n,_a=a;break;case 0:case 11:case 14:case 15:if(!hn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jm(r,t,o),a=a.next}while(a!==n)}Wi(e,t,r);break;case 1:if(!hn&&(Qs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){dr(r,t,s)}Wi(e,t,r);break;case 21:Wi(e,t,r);break;case 22:r.mode&1?(hn=(n=hn)||r.memoizedState!==null,Wi(e,t,r),hn=n):Wi(e,t,r);break;default:Wi(e,t,r)}}function Tb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new HM),t.forEach(function(n){var a=r_.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Na(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Jr=s.stateNode,_a=!1;break e;case 3:Jr=s.stateNode.containerInfo,_a=!0;break e;case 4:Jr=s.stateNode.containerInfo,_a=!0;break e}s=s.return}if(Jr===null)throw Error(de(160));a3(i,o,a),Jr=null,_a=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){dr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)i3(t,e),t=t.sibling}function i3(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Na(t,e),Xa(e),n&4){try{tu(3,e,e.return),bh(3,e)}catch(m){dr(e,e.return,m)}try{tu(5,e,e.return)}catch(m){dr(e,e.return,m)}}break;case 1:Na(t,e),Xa(e),n&512&&r!==null&&Qs(r,r.return);break;case 5:if(Na(t,e),Xa(e),n&512&&r!==null&&Qs(r,r.return),e.flags&32){var a=e.stateNode;try{hu(a,"")}catch(m){dr(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&N5(a,i),Zg(s,o);var u=Zg(s,i);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?T5(a,d):f==="dangerouslySetInnerHTML"?_5(a,d):f==="children"?hu(a,d):kv(a,f,d,u)}switch(s){case"input":Hg(a,i);break;case"textarea":O5(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?nl(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?nl(a,!!i.multiple,i.defaultValue,!0):nl(a,!!i.multiple,i.multiple?[]:"",!1))}a[ku]=i}catch(m){dr(e,e.return,m)}}break;case 6:if(Na(t,e),Xa(e),n&4){if(e.stateNode===null)throw Error(de(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){dr(e,e.return,m)}}break;case 3:if(Na(t,e),Xa(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{yu(t.containerInfo)}catch(m){dr(e,e.return,m)}break;case 4:Na(t,e),Xa(e);break;case 13:Na(t,e),Xa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(tx=vr())),n&4&&Tb(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(hn=(u=hn)||f,Na(t,e),hn=u):Na(t,e),Xa(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Se=e,f=e.child;f!==null;){for(d=Se=f;Se!==null;){switch(h=Se,p=h.child,h.tag){case 0:case 11:case 14:case 15:tu(4,h,h.return);break;case 1:Qs(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){dr(n,r,m)}}break;case 5:Qs(h,h.return);break;case 22:if(h.memoizedState!==null){$b(d);continue}}p!==null?(p.return=h,Se=p):$b(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=A5("display",o))}catch(m){dr(e,e.return,m)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){dr(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Na(t,e),Xa(e),n&4&&Tb(e);break;case 21:break;default:Na(t,e),Xa(e)}}function Xa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(n3(r)){var n=r;break e}r=r.return}throw Error(de(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(hu(a,""),n.flags&=-33);var i=Ab(e);Nm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=Ab(e);Pm(e,s,o);break;default:throw Error(de(161))}}catch(l){dr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function KM(e,t,r){Se=e,o3(e)}function o3(e,t,r){for(var n=(e.mode&1)!==0;Se!==null;){var a=Se,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Xf;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||hn;s=Xf;var u=hn;if(Xf=o,(hn=l)&&!u)for(Se=a;Se!==null;)o=Se,l=o.child,o.tag===22&&o.memoizedState!==null?Db(a):l!==null?(l.return=o,Se=l):Db(a);for(;i!==null;)Se=i,o3(i),i=i.sibling;Se=a,Xf=s,hn=u}Eb(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Se=i):Eb(e)}}function Eb(e){for(;Se!==null;){var t=Se;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||bh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!hn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ma(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&yb(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}yb(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&yu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}hn||t.flags&512&&Cm(t)}catch(h){dr(t,t.return,h)}}if(t===e){Se=null;break}if(r=t.sibling,r!==null){r.return=t.return,Se=r;break}Se=t.return}}function $b(e){for(;Se!==null;){var t=Se;if(t===e){Se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Se=r;break}Se=t.return}}function Db(e){for(;Se!==null;){var t=Se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{bh(4,t)}catch(l){dr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){dr(t,a,l)}}var i=t.return;try{Cm(t)}catch(l){dr(t,i,l)}break;case 5:var o=t.return;try{Cm(t)}catch(l){dr(t,o,l)}}}catch(l){dr(t,t.return,l)}if(t===e){Se=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Se=s;break}Se=t.return}}var YM=Math.ceil,Kd=Di.ReactCurrentDispatcher,Jv=Di.ReactCurrentOwner,pa=Di.ReactCurrentBatchConfig,pt=0,Kr=null,Nr=null,rn=0,Kn=0,Js=jo(0),Lr=0,Ou=null,fs=0,wh=0,ex=0,ru=null,An=null,tx=0,bl=1/0,mi=null,Yd=!1,Om=null,po=null,Kf=!1,Ji=null,qd=0,nu=0,Mm=null,Sd=-1,jd=0;function Cn(){return pt&6?vr():Sd!==-1?Sd:Sd=vr()}function go(e){return e.mode&1?pt&2&&rn!==0?rn&-rn:TM.transition!==null?(jd===0&&(jd=W5()),jd):(e=At,e!==0||(e=window.event,e=e===void 0?16:Z5(e.type)),e):1}function La(e,t,r,n){if(50<nu)throw nu=0,Mm=null,Error(de(185));gf(e,r,n),(!(pt&2)||e!==Kr)&&(e===Kr&&(!(pt&2)&&(wh|=r),Lr===4&&qi(e,rn)),In(e,n),r===1&&pt===0&&!(t.mode&1)&&(bl=vr()+500,yh&&Co()))}function In(e,t){var r=e.callbackNode;TO(e,t);var n=Ed(e,e===Kr?rn:0);if(n===0)r!==null&&W1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&W1(r),t===1)e.tag===0?AM(Rb.bind(null,e)):m4(Rb.bind(null,e)),NM(function(){!(pt&6)&&Co()}),r=null;else{switch(V5(n)){case 1:r=Nv;break;case 4:r=G5;break;case 16:r=Td;break;case 536870912:r=U5;break;default:r=Td}r=p3(r,s3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function s3(e,t){if(Sd=-1,jd=0,pt&6)throw Error(de(327));var r=e.callbackNode;if(ll()&&e.callbackNode!==r)return null;var n=Ed(e,e===Kr?rn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zd(e,n);else{t=n;var a=pt;pt|=2;var i=c3();(Kr!==e||rn!==t)&&(mi=null,bl=vr()+500,ns(e,t));do try{QM();break}catch(s){l3(e,s)}while(!0);Fv(),Kd.current=i,pt=a,Nr!==null?t=0:(Kr=null,rn=0,t=Lr)}if(t!==0){if(t===2&&(a=rm(e),a!==0&&(n=a,t=_m(e,a))),t===1)throw r=Ou,ns(e,0),qi(e,n),In(e,vr()),r;if(t===6)qi(e,n);else{if(a=e.current.alternate,!(n&30)&&!qM(a)&&(t=Zd(e,n),t===2&&(i=rm(e),i!==0&&(n=i,t=_m(e,i))),t===1))throw r=Ou,ns(e,0),qi(e,n),In(e,vr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(de(345));case 2:Go(e,An,mi);break;case 3:if(qi(e,n),(n&130023424)===n&&(t=tx+500-vr(),10<t)){if(Ed(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Cn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=um(Go.bind(null,e,An,mi),t);break}Go(e,An,mi);break;case 4:if(qi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ia(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=vr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*YM(n/1960))-n,10<n){e.timeoutHandle=um(Go.bind(null,e,An,mi),n);break}Go(e,An,mi);break;case 5:Go(e,An,mi);break;default:throw Error(de(329))}}}return In(e,vr()),e.callbackNode===r?s3.bind(null,e):null}function _m(e,t){var r=ru;return e.current.memoizedState.isDehydrated&&(ns(e,t).flags|=256),e=Zd(e,t),e!==2&&(t=An,An=r,t!==null&&Am(t)),e}function Am(e){An===null?An=e:An.push.apply(An,e)}function qM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ba(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qi(e,t){for(t&=~ex,t&=~wh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ia(t),n=1<<r;e[r]=-1,t&=~n}}function Rb(e){if(pt&6)throw Error(de(327));ll();var t=Ed(e,0);if(!(t&1))return In(e,vr()),null;var r=Zd(e,t);if(e.tag!==0&&r===2){var n=rm(e);n!==0&&(t=n,r=_m(e,n))}if(r===1)throw r=Ou,ns(e,0),qi(e,t),In(e,vr()),r;if(r===6)throw Error(de(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Go(e,An,mi),In(e,vr()),null}function rx(e,t){var r=pt;pt|=1;try{return e(t)}finally{pt=r,pt===0&&(bl=vr()+500,yh&&Co())}}function ds(e){Ji!==null&&Ji.tag===0&&!(pt&6)&&ll();var t=pt;pt|=1;var r=pa.transition,n=At;try{if(pa.transition=null,At=1,e)return e()}finally{At=n,pa.transition=r,pt=t,!(pt&6)&&Co()}}function nx(){Kn=Js.current,Kt(Js)}function ns(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PM(r)),Nr!==null)for(r=Nr.return;r!==null;){var n=r;switch(Iv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ld();break;case 3:vl(),Kt(Dn),Kt(gn),Hv();break;case 5:Vv(n);break;case 4:vl();break;case 13:Kt(ar);break;case 19:Kt(ar);break;case 10:zv(n.type._context);break;case 22:case 23:nx()}r=r.return}if(Kr=e,Nr=e=mo(e.current,null),rn=Kn=t,Lr=0,Ou=null,ex=wh=fs=0,An=ru=null,Xo!==null){for(t=0;t<Xo.length;t++)if(r=Xo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Xo=null}return e}function l3(e,t){do{var r=Nr;try{if(Fv(),bd.current=Xd,Hd){for(var n=ir.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Hd=!1}if(us=0,Hr=Ir=ir=null,eu=!1,Cu=0,Jv.current=null,r===null||r.return===null){Lr=1,Ou=t,Nr=null;break}e:{var i=e,o=r.return,s=r,l=t;if(t=rn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Sb(o);if(p!==null){p.flags&=-257,jb(p,o,s,i,t),p.mode&1&&kb(i,u,t),t=p,l=u;var y=t.updateQueue;if(y===null){var m=new Set;m.add(l),t.updateQueue=m}else y.add(l);break e}else{if(!(t&1)){kb(i,u,t),ax();break e}l=Error(de(426))}}else if(Jt&&s.mode&1){var x=Sb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),jb(x,o,s,i,t),Lv(xl(l,s));break e}}i=l=xl(l,s),Lr!==4&&(Lr=2),ru===null?ru=[i]:ru.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=V4(i,l,t);mb(i,v);break e;case 1:s=l;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(po===null||!po.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=H4(i,s,t);mb(i,S);break e}}i=i.return}while(i!==null)}f3(r)}catch(k){t=k,Nr===r&&r!==null&&(Nr=r=r.return);continue}break}while(!0)}function c3(){var e=Kd.current;return Kd.current=Xd,e===null?Xd:e}function ax(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),Kr===null||!(fs&268435455)&&!(wh&268435455)||qi(Kr,rn)}function Zd(e,t){var r=pt;pt|=2;var n=c3();(Kr!==e||rn!==t)&&(mi=null,ns(e,t));do try{ZM();break}catch(a){l3(e,a)}while(!0);if(Fv(),pt=r,Kd.current=n,Nr!==null)throw Error(de(261));return Kr=null,rn=0,Lr}function ZM(){for(;Nr!==null;)u3(Nr)}function QM(){for(;Nr!==null&&!SO();)u3(Nr)}function u3(e){var t=h3(e.alternate,e,Kn);e.memoizedProps=e.pendingProps,t===null?f3(e):Nr=t,Jv.current=null}function f3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=VM(r,t),r!==null){r.flags&=32767,Nr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Lr=6,Nr=null;return}}else if(r=WM(r,t,Kn),r!==null){Nr=r;return}if(t=t.sibling,t!==null){Nr=t;return}Nr=t=e}while(t!==null);Lr===0&&(Lr=5)}function Go(e,t,r){var n=At,a=pa.transition;try{pa.transition=null,At=1,JM(e,t,r,n)}finally{pa.transition=a,At=n}return null}function JM(e,t,r,n){do ll();while(Ji!==null);if(pt&6)throw Error(de(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(de(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(EO(e,i),e===Kr&&(Nr=Kr=null,rn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Kf||(Kf=!0,p3(Td,function(){return ll(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=pa.transition,pa.transition=null;var o=At;At=1;var s=pt;pt|=4,Jv.current=null,XM(e,r),i3(r,e),xM(lm),$d=!!sm,lm=sm=null,e.current=r,KM(r),jO(),pt=s,At=o,pa.transition=i}else e.current=r;if(Kf&&(Kf=!1,Ji=e,qd=a),i=e.pendingLanes,i===0&&(po=null),NO(r.stateNode),In(e,vr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Yd)throw Yd=!1,e=Om,Om=null,e;return qd&1&&e.tag!==0&&ll(),i=e.pendingLanes,i&1?e===Mm?nu++:(nu=0,Mm=e):nu=0,Co(),null}function ll(){if(Ji!==null){var e=V5(qd),t=pa.transition,r=At;try{if(pa.transition=null,At=16>e?16:e,Ji===null)var n=!1;else{if(e=Ji,Ji=null,qd=0,pt&6)throw Error(de(331));var a=pt;for(pt|=4,Se=e.current;Se!==null;){var i=Se,o=i.child;if(Se.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Se=u;Se!==null;){var f=Se;switch(f.tag){case 0:case 11:case 15:tu(8,f,i)}var d=f.child;if(d!==null)d.return=f,Se=d;else for(;Se!==null;){f=Se;var h=f.sibling,p=f.return;if(r3(f),f===u){Se=null;break}if(h!==null){h.return=p,Se=h;break}Se=p}}}var y=i.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}Se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Se=o;else e:for(;Se!==null;){if(i=Se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:tu(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Se=v;break e}Se=i.return}}var g=e.current;for(Se=g;Se!==null;){o=Se;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Se=b;else e:for(o=g;Se!==null;){if(s=Se,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:bh(9,s)}}catch(k){dr(s,s.return,k)}if(s===o){Se=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Se=S;break e}Se=s.return}}if(pt=a,Co(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(dh,e)}catch{}n=!0}return n}finally{At=r,pa.transition=t}}return!1}function Ib(e,t,r){t=xl(r,t),t=V4(e,t,1),e=ho(e,t,1),t=Cn(),e!==null&&(gf(e,1,t),In(e,t))}function dr(e,t,r){if(e.tag===3)Ib(e,e,r);else for(;t!==null;){if(t.tag===3){Ib(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(po===null||!po.has(n))){e=xl(r,e),e=H4(t,e,1),t=ho(t,e,1),e=Cn(),t!==null&&(gf(t,1,e),In(t,e));break}}t=t.return}}function e_(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Cn(),e.pingedLanes|=e.suspendedLanes&r,Kr===e&&(rn&r)===r&&(Lr===4||Lr===3&&(rn&130023424)===rn&&500>vr()-tx?ns(e,0):ex|=r),In(e,t)}function d3(e,t){t===0&&(e.mode&1?(t=Lf,Lf<<=1,!(Lf&130023424)&&(Lf=4194304)):t=1);var r=Cn();e=_i(e,t),e!==null&&(gf(e,t,r),In(e,r))}function t_(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),d3(e,r)}function r_(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(de(314))}n!==null&&n.delete(t),d3(e,r)}var h3;h3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dn.current)En=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return En=!1,UM(e,t,r);En=!!(e.flags&131072)}else En=!1,Jt&&t.flags&1048576&&y4(t,zd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;kd(e,t),e=t.pendingProps;var a=gl(t,gn.current);sl(t,r),a=Kv(null,t,n,e,a,r);var i=Yv();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(n)?(i=!0,Bd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Uv(t),a.updater=xh,t.stateNode=a,a._reactInternals=t,ym(t,n,e,r),t=bm(null,t,n,!0,i,r)):(t.tag=0,Jt&&i&&Rv(t),Sn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(kd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=a_(n),e=Ma(n,e),a){case 0:t=xm(null,t,n,e,r);break e;case 1:t=Nb(null,t,n,e,r);break e;case 11:t=Cb(null,t,n,e,r);break e;case 14:t=Pb(null,t,n,Ma(n.type,e),r);break e}throw Error(de(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ma(n,a),xm(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ma(n,a),Nb(e,t,n,a,r);case 3:e:{if(q4(t),e===null)throw Error(de(387));n=t.pendingProps,i=t.memoizedState,a=i.element,S4(e,t),Wd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=xl(Error(de(423)),t),t=Ob(e,t,n,r,a);break e}else if(n!==a){a=xl(Error(de(424)),t),t=Ob(e,t,n,r,a);break e}else for(Zn=fo(t.stateNode.containerInfo.firstChild),Qn=t,Jt=!0,Ea=null,r=w4(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ml(),n===a){t=Ai(e,t,r);break e}Sn(e,t,n,r)}t=t.child}return t;case 5:return j4(t),e===null&&pm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,cm(n,a)?o=null:i!==null&&cm(n,i)&&(t.flags|=32),Y4(e,t),Sn(e,t,o,r),t.child;case 6:return e===null&&pm(t),null;case 13:return Z4(e,t,r);case 4:return Wv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=yl(t,null,n,r):Sn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ma(n,a),Cb(e,t,n,a,r);case 7:return Sn(e,t,t.pendingProps,r),t.child;case 8:return Sn(e,t,t.pendingProps.children,r),t.child;case 12:return Sn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Gt(Gd,n._currentValue),n._currentValue=o,i!==null)if(Ba(i.value,o)){if(i.children===a.children&&!Dn.current){t=Ai(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Si(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),gm(i.return,r,t),s.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(de(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),gm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,sl(t,r),a=ma(a),n=n(a),t.flags|=1,Sn(e,t,n,r),t.child;case 14:return n=t.type,a=Ma(n,t.pendingProps),a=Ma(n.type,a),Pb(e,t,n,a,r);case 15:return X4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ma(n,a),kd(e,t),t.tag=1,Rn(n)?(e=!0,Bd(t)):e=!1,sl(t,r),W4(t,n,a),ym(t,n,a,r),bm(null,t,n,!0,e,r);case 19:return Q4(e,t,r);case 22:return K4(e,t,r)}throw Error(de(156,t.tag))};function p3(e,t){return z5(e,t)}function n_(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,t,r,n){return new n_(e,t,r,n)}function ix(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a_(e){if(typeof e=="function")return ix(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jv)return 11;if(e===Cv)return 14}return 2}function mo(e,t){var r=e.alternate;return r===null?(r=fa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cd(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")ix(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Us:return as(r.children,a,i,t);case Sv:o=8,a|=8;break;case zg:return e=fa(12,r,t,a|2),e.elementType=zg,e.lanes=i,e;case Gg:return e=fa(13,r,t,a),e.elementType=Gg,e.lanes=i,e;case Ug:return e=fa(19,r,t,a),e.elementType=Ug,e.lanes=i,e;case j5:return kh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k5:o=10;break e;case S5:o=9;break e;case jv:o=11;break e;case Cv:o=14;break e;case Hi:o=16,n=null;break e}throw Error(de(130,e==null?e:typeof e,""))}return t=fa(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function as(e,t,r,n){return e=fa(7,e,n,t),e.lanes=r,e}function kh(e,t,r,n){return e=fa(22,e,n,t),e.elementType=j5,e.lanes=r,e.stateNode={isHidden:!1},e}function Yp(e,t,r){return e=fa(6,e,null,t),e.lanes=r,e}function qp(e,t,r){return t=fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function i_(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_p(0),this.expirationTimes=_p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_p(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ox(e,t,r,n,a,i,o,s,l){return e=new i_(e,t,r,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=fa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uv(i),e}function o_(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function g3(e){if(!e)return ko;e=e._reactInternals;e:{if(Cs(e)!==e||e.tag!==1)throw Error(de(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(de(171))}if(e.tag===1){var r=e.type;if(Rn(r))return g4(e,r,t)}return t}function m3(e,t,r,n,a,i,o,s,l){return e=ox(r,n,!0,e,a,i,o,s,l),e.context=g3(null),r=e.current,n=Cn(),a=go(r),i=Si(n,a),i.callback=t??null,ho(r,i,a),e.current.lanes=a,gf(e,a,n),In(e,n),e}function Sh(e,t,r,n){var a=t.current,i=Cn(),o=go(a);return r=g3(r),t.context===null?t.context=r:t.pendingContext=r,t=Si(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ho(a,t,o),e!==null&&(La(e,a,o,i),xd(e,a,o)),o}function Qd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function sx(e,t){Lb(e,t),(e=e.alternate)&&Lb(e,t)}function s_(){return null}var y3=typeof reportError=="function"?reportError:function(e){console.error(e)};function lx(e){this._internalRoot=e}jh.prototype.render=lx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(de(409));Sh(e,t,null,null)};jh.prototype.unmount=lx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ds(function(){Sh(null,e,null,null)}),t[Mi]=null}};function jh(e){this._internalRoot=e}jh.prototype.unstable_scheduleHydration=function(e){if(e){var t=K5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yi.length&&t!==0&&t<Yi[r].priority;r++);Yi.splice(r,0,e),r===0&&q5(e)}};function cx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ch(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bb(){}function l_(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Qd(o);i.call(u)}}var o=m3(t,n,e,0,null,!1,!1,"",Bb);return e._reactRootContainer=o,e[Mi]=o.current,bu(e.nodeType===8?e.parentNode:e),ds(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=Qd(l);s.call(u)}}var l=ox(e,0,!1,null,null,!1,!1,"",Bb);return e._reactRootContainer=l,e[Mi]=l.current,bu(e.nodeType===8?e.parentNode:e),ds(function(){Sh(t,l,r,n)}),l}function Ph(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Qd(o);s.call(l)}}Sh(t,o,e,a)}else o=l_(r,t,e,a,n);return Qd(o)}H5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hc(t.pendingLanes);r!==0&&(Ov(t,r|1),In(t,vr()),!(pt&6)&&(bl=vr()+500,Co()))}break;case 13:ds(function(){var n=_i(e,1);if(n!==null){var a=Cn();La(n,e,1,a)}}),sx(e,1)}};Mv=function(e){if(e.tag===13){var t=_i(e,134217728);if(t!==null){var r=Cn();La(t,e,134217728,r)}sx(e,134217728)}};X5=function(e){if(e.tag===13){var t=go(e),r=_i(e,t);if(r!==null){var n=Cn();La(r,e,t,n)}sx(e,t)}};K5=function(){return At};Y5=function(e,t){var r=At;try{return At=e,t()}finally{At=r}};Jg=function(e,t,r){switch(t){case"input":if(Hg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=mh(n);if(!a)throw Error(de(90));P5(n),Hg(n,a)}}}break;case"textarea":O5(e,r);break;case"select":t=r.value,t!=null&&nl(e,!!r.multiple,t,!1)}};D5=rx;R5=ds;var c_={usingClientEntryPoint:!1,Events:[yf,Xs,mh,E5,$5,rx]},Ac={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u_={bundleType:Ac.bundleType,version:Ac.version,rendererPackageName:Ac.rendererPackageName,rendererConfig:Ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Di.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=B5(e),e===null?null:e.stateNode},findFiberByHostInstance:Ac.findFiberByHostInstance||s_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{dh=Yf.inject(u_),Qa=Yf}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c_;ea.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cx(t))throw Error(de(200));return o_(e,t,null,r)};ea.createRoot=function(e,t){if(!cx(e))throw Error(de(299));var r=!1,n="",a=y3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ox(e,1,!1,null,null,r,!1,n,a),e[Mi]=t.current,bu(e.nodeType===8?e.parentNode:e),new lx(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(de(188)):(e=Object.keys(e).join(","),Error(de(268,e)));return e=B5(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return ds(e)};ea.hydrate=function(e,t,r){if(!Ch(t))throw Error(de(200));return Ph(null,e,t,!0,r)};ea.hydrateRoot=function(e,t,r){if(!cx(e))throw Error(de(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=y3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=m3(t,null,e,1,r??null,a,!1,i,o),e[Mi]=t.current,bu(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new jh(t)};ea.render=function(e,t,r){if(!Ch(t))throw Error(de(200));return Ph(null,e,t,!1,r)};ea.unmountComponentAtNode=function(e){if(!Ch(e))throw Error(de(40));return e._reactRootContainer?(ds(function(){Ph(null,null,e,!1,function(){e._reactRootContainer=null,e[Mi]=null})}),!0):!1};ea.unstable_batchedUpdates=rx;ea.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ch(r))throw Error(de(200));if(e==null||e._reactInternals===void 0)throw Error(de(38));return Ph(e,t,r,!1,n)};ea.version="18.3.1-next-f1338f8080-20240426";function v3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v3)}catch(e){console.error(e)}}v3(),v5.exports=ea;var f_=v5.exports,Fb=f_;Bg.createRoot=Fb.createRoot,Bg.hydrateRoot=Fb.hydrateRoot;const yo=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[c.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,d_=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:l,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:h,onOpenAbout:p,onShowExif:y,bridgeStatus:m,onBridgeClick:x,isDrLabOpen:v,onToggleDrLab:g,isColorLabOpen:b,onToggleColorLab:S,isFftLabOpen:k,onToggleFftLab:w,isSfrLabOpen:C,onToggleSfrLab:P,onGenerateTestPic:O,onPTCFilesSelected:N,onDownloadDng:$,isThreePlane:M,onOpenDatabase:_,isSidebarOpen:D,onToggleSidebar:I})=>{const B=j.useRef(null),A=j.useRef(null),[E,L]=j.useState(!1),[U,J]=j.useState(!1),[K,F]=j.useState(!1),[ee,ue]=j.useState("direct"),Q=j.useRef(null),fe=j.useRef(null);j.useEffect(()=>{const H=pe=>{Q.current&&!Q.current.contains(pe.target)&&J(!1),fe.current&&!fe.current.contains(pe.target)&&F(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]);const W=H=>{var pe,Z;J(!1),H==="direct"?(ue("direct"),(pe=B.current)==null||pe.click()):!m.isConnected||!m.hasDngConverter?L(!0):(ue("convert"),(Z=B.current)==null||Z.click())},X=H=>{var Z;const pe=(Z=H.target.files)==null?void 0:Z[0];pe&&e(pe,ee),H.target.value=""},se=H=>{H.target.files&&H.target.files.length>0&&N(H.target.files),H.target.value=""},ce=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return c.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[c.jsx(yo,{isOpen:E,onClose:()=>L(!1),onConfirm:()=>L(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),M&&c.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:m.isConnected?void 0:x,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${m.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:m.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[c.jsx("span",{className:`w-2 h-2 ${m.isConnected?"bg-emerald-600":"bg-pink-600"}`}),m.isConnected?`JiangBridge Ready ${m.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),v&&c.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),b&&c.jsxs("button",{onClick:S,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),k&&c.jsxs("button",{onClick:w,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),C&&c.jsxs("button",{onClick:P,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&c.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[c.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),c.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),c.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),ce&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:H=>s(parseFloat(H.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:H=>{const pe=parseFloat(H.target.value);isNaN(pe)||s(pe)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:H=>d(parseFloat(H.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:H=>{const pe=parseFloat(H.target.value);isNaN(pe)||d(pe)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:l*100,onChange:H=>u(parseInt(H.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(l*100),onChange:H=>{const pe=parseInt(H.target.value);isNaN(pe)||u(Math.min(100,Math.max(1,pe))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),c.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),c.jsxs("button",{onClick:$,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[c.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),c.jsx("input",{type:"file",ref:B,onChange:X,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("input",{type:"file",ref:A,onChange:se,className:"hidden",multiple:!0,accept:".csv"}),c.jsxs("div",{className:"relative inline-block text-left",ref:fe,children:[c.jsxs("button",{onClick:()=>F(!K),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${K?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),K&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{F(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:"Generate Pattern DNG"})]}),c.jsxs("button",{onClick:()=>{F(!1),v||g(),k&&w(),b&&S&&S(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsxs("span",{children:["DR Lab ",v?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{F(!1),S&&!b&&S(),v&&g(),k&&w(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${b?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:["Color Lab ",b?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{F(!1),P&&!C&&P(),v&&g(),k&&w(),b&&S&&S()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${C?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsxs("span",{children:["SFR Lab ",C?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{F(!1),k||w(),v&&g(),b&&S&&S(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${k?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsxs("span",{children:["FFT Lab ",k?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{var H;F(!1),(H=A.current)==null||H.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),c.jsx("span",{children:"Generate PTC & TargetSNR"})]})]})})]}),c.jsxs("div",{className:"relative inline-block text-left",ref:Q,children:[c.jsxs("button",{onClick:()=>J(!U),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${U?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),U&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>W("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.jsx("span",{children:"Load Image (Direct)"})]}),c.jsxs("button",{onClick:()=>W("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&y&&c.jsxs("button",{onClick:y,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),c.jsx("button",{onClick:p,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),c.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),c.jsxs("button",{onClick:I,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${D?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:D?"Hide Control Panel":"Show Control Panel",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:D?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),c.jsx("span",{className:"hidden sm:inline",children:D?"Hide Panel":"Show Panel"})]})]})]})},h_=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:l="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:h=[],colorLabPoints:p=[],colorLabRects:y=[],sfrRects:m=[]})=>{var Q;const x=j.useRef(null),v=j.useRef(document.createElement("canvas")),[g,b]=j.useState(!1),[S,k]=j.useState({x:0,y:0}),w=j.useRef(null),C=j.useRef(null),P=j.useRef(null),[O,N]=j.useState(!1),[$,M]=j.useState(null),[_,D]=j.useState(null);j.useEffect(()=>{o!==void 0&&D(o)},[o]);const I=j.useCallback(()=>{const fe=x.current,W=fe==null?void 0:fe.getContext("2d");return{canvas:fe,ctx:W}},[]);j.useEffect(()=>{const fe=v.current,W=fe.getContext("2d");if(!e||!W)return;let X=0,se=0;e instanceof ImageData?(X=e.width,se=e.height):e instanceof HTMLImageElement&&(X=e.naturalWidth,se=e.naturalHeight),!(X===0||se===0)&&((fe.width!==X||fe.height!==se)&&(fe.width=X,fe.height=se),e instanceof ImageData?W.putImageData(e,0,0):(W.clearRect(0,0,X,se),W.drawImage(e,0,0)))},[e]);const B=j.useCallback(()=>{const{canvas:fe,ctx:W}=I();if(!(!fe||!W||!e)){if(W.setTransform(1,0,0,1,0,0),W.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",W.fillRect(0,0,fe.width,fe.height),W.setTransform(t,0,0,t,r.x,r.y),v.current.width>0&&(W.imageSmoothingEnabled=!1,W.drawImage(v.current,0,0)),_){W.strokeStyle="#06b6d4",W.lineWidth=1/t,W.fillStyle="rgba(6, 182, 212, 0.2)",W.beginPath(),W.rect(_.x,_.y,_.w,_.h),W.fill(),W.stroke(),W.save(),W.fillStyle="#fff";const X=Math.max(10,14/t);W.font=`${X}px monospace`,W.shadowColor="rgba(0,0,0,0.8)",W.shadowBlur=4,W.shadowOffsetX=1,W.shadowOffsetY=1,W.fillText(`${Math.round(_.w)}x${Math.round(_.h)}`,_.x,_.y-5/t),W.restore()}if(h&&h.length>0){W.save(),W.strokeStyle="#f59e0b",W.lineWidth=1/t,W.globalAlpha=.8,W.beginPath(),h.forEach(ce=>{W.rect(ce.x,ce.y,ce.w,ce.h)}),W.stroke();const X=h[0];W.fillStyle="#f59e0b";const se=Math.max(10,12/t);W.font=`${se}px monospace`,W.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t),W.restore()}if(d&&d.length>0){W.save();const X=6/t,se=Math.max(12,16/t);W.font=`bold ${se}px sans-serif`,W.textAlign="center",W.textBaseline="middle",d.forEach((ce,H)=>{W.beginPath(),W.arc(ce.x,ce.y,X,0,2*Math.PI),W.fillStyle="white",W.fill(),W.strokeStyle="#4338ca",W.lineWidth=2/t,W.stroke(),W.fillStyle="#4338ca",W.fillText((H+1).toString(),ce.x,ce.y-12/t)}),W.restore()}if(p&&p.length>0){W.save();const X=5/t,se=Math.max(10,14/t);W.font=`bold ${se}px sans-serif`,W.textAlign="center",W.textBaseline="middle",p.forEach((ce,H)=>{W.fillStyle="yellow",W.fillRect(ce.x-X,ce.y-X,X*2,X*2),W.strokeStyle="black",W.lineWidth=1/t,W.strokeRect(ce.x-X,ce.y-X,X*2,X*2),W.fillStyle="yellow",W.shadowColor="black",W.shadowBlur=2,W.fillText((H+1).toString(),ce.x,ce.y-10/t)}),W.restore()}if(y&&y.length>0){if(W.save(),W.strokeStyle="yellow",W.lineWidth=1/t,W.globalAlpha=.9,W.beginPath(),y.forEach(X=>{W.rect(X.x,X.y,X.w,X.h)}),W.stroke(),y[0]){const X=y[0];W.fillStyle="yellow",W.shadowColor="black",W.shadowBlur=3;const se=Math.max(10,12/t);W.font=`${se}px monospace`,W.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t)}W.restore()}m&&m.length>0&&(W.save(),W.strokeStyle="#ef4444",W.lineWidth=2/t,W.globalAlpha=.9,W.beginPath(),m.forEach(X=>{W.rect(X.x,X.y,X.w,X.h)}),W.stroke(),W.restore())}},[I,e,t,r,s,_,h,d,p,y,m]);j.useEffect(()=>{const{canvas:fe}=I();if(!fe)return;const W=new ResizeObserver(()=>{fe.width=fe.clientWidth,fe.height=fe.clientHeight,B()});return W.observe(fe),()=>W.disconnect()},[I,B]),j.useEffect(()=>{B()},[B,e,r,t,s,_,h,d,p,y,m]);const A=fe=>{const{canvas:W}=I();if(!W)return{x:0,y:0};const X=W.getBoundingClientRect();return{x:fe.clientX-X.left,y:fe.clientY-X.top}},E=(fe,W)=>({x:(fe-r.x)/t,y:(W-r.y)/t}),L=fe=>{fe.preventDefault();const W=A(fe);if(u&&f){const X=E(W.x,W.y);f(X);return}if(l==="select"||fe.shiftKey){N(!0);const X=E(W.x,W.y),se={x:Math.floor(X.x),y:Math.floor(X.y)};M(se),D(null),i&&i(null)}else b(!0),k({x:W.x-r.x,y:W.y-r.y})},U=fe=>{const W=A(fe);if(O&&$){const X=E(W.x,W.y),se=Math.floor(X.x),ce=Math.floor(X.y),H=Math.min($.x,se),pe=Math.min($.y,ce),Z=Math.max($.x,se),te=Math.max($.y,ce),ge=Z-H+1,me=te-pe+1;D({x:H,y:pe,w:ge,h:me})}else g&&n({x:W.x-S.x,y:W.y-S.y})},J=()=>{O&&(N(!1),_&&i&&_.w>0&&_.h>0&&i(_)),b(!1)},K=fe=>{var W;if(fe.touches.length===1){const X=fe.touches[0],se=(W=x.current)==null?void 0:W.getBoundingClientRect();if(!se)return;const ce=X.clientX-se.left,H=X.clientY-se.top;if(u&&f){const pe=E(ce,H);f(pe);return}if(l==="select"){const pe=E(ce,H),Z={x:Math.floor(pe.x),y:Math.floor(pe.y)};M(Z),N(!0),D(null),i&&i(null)}else P.current={x:ce,y:H},k({x:ce-r.x,y:H-r.y}),b(!0)}else if(fe.touches.length===2){const X=Math.hypot(fe.touches[0].clientX-fe.touches[1].clientX,fe.touches[0].clientY-fe.touches[1].clientY);w.current=X,C.current=t,b(!1),N(!1)}},F=fe=>{var W;if(fe.touches.length===1){const X=fe.touches[0],se=(W=x.current)==null?void 0:W.getBoundingClientRect();if(!se)return;const ce=X.clientX-se.left,H=X.clientY-se.top;if(u)return;if(O&&$){const pe=E(ce,H),Z=Math.floor(pe.x),te=Math.floor(pe.y),ge=Math.min($.x,Z),me=Math.min($.y,te),He=Math.max($.x,Z),Ae=Math.max($.y,te),_e=He-ge+1,Re=Ae-me+1;D({x:ge,y:me,w:_e,h:Re})}else g&&n({x:ce-S.x,y:H-S.y})}else if(fe.touches.length===2&&w.current&&C.current&&a){const se=Math.hypot(fe.touches[0].clientX-fe.touches[1].clientX,fe.touches[0].clientY-fe.touches[1].clientY)/w.current;a(C.current*se)}},ee=()=>{O&&(N(!1),_&&i&&_.w>0&&_.h>0&&i(_)),b(!1),w.current=null,C.current=null,P.current=null},ue=u||l==="select"||(Q=window.event)!=null&&Q.shiftKey?"cursor-crosshair":"cursor-grab active:cursor-grabbing";return c.jsx("canvas",{ref:x,className:`w-full h-full block touch-none ${ue}`,onMouseDown:L,onMouseMove:U,onMouseUp:J,onMouseLeave:J,onTouchStart:K,onTouchMove:F,onTouchEnd:ee,onTouchCancel:ee,tabIndex:0})},Jd={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},p_="modulepreload",g_=function(e){return"/"+e},zb={},m_=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=g_(l),l in zb)return;zb[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":p_,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function Mu(e){const[[t,r,n],[a,i,o],[s,l,u]]=e,f=t*(i*u-o*l)-r*(a*u-o*s)+n*(a*l-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*l)*d,(n*l-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*l-i*s)*d,(r*s-t*l)*d,(t*i-r*a)*d]]}function e0(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class hs{constructor(t){bn(this,"size");bn(this,"isPowerOfTwo");bn(this,"_real");bn(this,"_imag");bn(this,"_scratch",null);bn(this,"_rev",null);bn(this,"_m",0);bn(this,"_internalFFT",null);bn(this,"_chirpReal",null);bn(this,"_chirpImag",null);bn(this,"_bReal",null);bn(this,"_bImag",null);bn(this,"_hanning",null);bn(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new hs(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const l=a[s];if(s<l){const u=i[s],f=o[s];i[s]=i[l],o[s]=o[l],i[l]=u,o[l]=f}}else for(let s=0;s<n;s++){const l=a[s];i[s]=t[l],o[s]=r?r[l]:0}for(let s=2;s<=n;s*=2){const l=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let h=0;h<n;h+=s){let p=1,y=0;for(let m=0;m<l;m++){const x=h+m,v=h+m+l,g=p*i[v]-y*o[v],b=p*o[v]+y*i[v],S=i[x],k=o[x];i[x]=S+g,o[x]=k+b,i[v]=S-g,o[v]=k-b;const w=p*f-y*d,C=p*d+y*f;p=w,y=C}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const h=t[d],p=r?r[d]:0,y=this._chirpReal[d],m=this._chirpImag[d];o[d]=h*y-p*m,s[d]=h*m+p*y}i.transformRadix2(o,s);for(let d=0;d<a;d++){const h=i._real[d],p=i._imag[d],y=this._bReal[d],m=this._bImag[d];i._real[d]=h*y-p*m,i._imag[d]=h*m+p*y}const l=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(l,u);const f=1/a;for(let d=0;d<n;d++){const h=i._real[d]*f,p=-i._imag[d]*f,y=this._chirpReal[d],m=this._chirpImag[d];this._real[d]=h*y-p*m,this._imag[d]=h*m+p*y}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const l=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<l;f++){const d=this._real[f],h=this._imag[f];r[f]+=(d*d+h*h)*u}}}function y_(e,t,r,n=!1){const a=new hs(t),i=new hs(r),o=t*r,s=new Float32Array(o),l=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let m=0;m<t;m++)u[m]=.5*(1-Math.cos(2*Math.PI*m/(t-1)));f=new Float32Array(r);for(let m=0;m<r;m++)f[m]=.5*(1-Math.cos(2*Math.PI*m/(r-1)))}for(let m=0;m<r;m++){const x=m*t,v=a._real;let g=0;for(let S=0;S<t;S++)g+=e[x+S];const b=g/t;if(u)for(let S=0;S<t;S++)v[S]=(e[x+S]-b)*u[S];else for(let S=0;S<t;S++)v[S]=e[x+S]-b;a.transform(v);for(let S=0;S<t;S++)s[x+S]=a._real[S],l[x+S]=a._imag[S]}for(let m=0;m<t;m++){const x=i._real,v=i._imag;for(let g=0;g<r;g++){const b=g*t+m;let S=s[b],k=l[b];f&&(S*=f[g],k*=f[g]),x[g]=S,v[g]=k}i.transform(x,v);for(let g=0;g<r;g++){const b=g*t+m;s[b]=i._real[g],l[b]=i._imag[g]}}const d=new Float32Array(o);let h=1,p=t,y=r;if(n&&u&&f){p=0;for(let m=0;m<t;m++)p+=u[m]*u[m];y=0;for(let m=0;m<r;m++)y+=f[m]*f[m]}h=1/(p*y);for(let m=0;m<o;m++)d[m]=(s[m]*s[m]+l[m]*l[m])*h;return d}function v_(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const l=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+l;n[d]=e[f]}return n}function Pd(e,t,r,n=[0,0,0,0],a=65535,i="RGGB"){const s=e*t*2,l=8,u=l+s,f="Fake",d="StretchedNoiseCam",h="StretchedNoiseCam",p=_=>{const D=new Uint8Array(_.length+1);for(let I=0;I<_.length;I++)D[I]=_.charCodeAt(I);return D[_.length]=0,D},y=p(f),m=p(d),x=p(h),v=_=>{const D=[0,0,0,0],I={R:0,G:1,B:2},B=_.toUpperCase();for(let A=0;A<4;A++)D[A]=I[B[A]]??1;return D},g=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:y.length,value:y},{id:272,type:2,count:m.length,value:m},{id:273,type:4,count:1,value:l},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:s},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:v(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(_=>Math.round(_))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:x.length,value:x}],b=2+g.length*12+4;let S=0;const k=g.map(_=>{let D=1;_.type===3&&(D=2),_.type===4&&(D=4);const I=_.count*D,B=I<=4;let A=0;return B||(A=S,S+=I,S%2!==0&&S++),{..._,fits:B,totalBytes:I,extraOffset:A}}),w=u+b,C=w+S,P=new ArrayBuffer(C),O=new DataView(P),N=new Uint8Array(P);O.setUint16(0,18761,!0),O.setUint16(2,42,!0),O.setUint32(4,u,!0);const $=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);N.set($,l);let M=u;return O.setUint16(M,g.length,!0),M+=2,k.forEach(_=>{if(O.setUint16(M,_.id,!0),O.setUint16(M+2,_.type,!0),O.setUint32(M+4,_.count,!0),_.fits){const D=M+8;Array.isArray(_.value)?_.value.forEach((I,B)=>{_.type===1&&O.setUint8(D+B,I),_.type===3&&O.setUint16(D+B*2,I,!0)}):(_.type===3&&O.setUint16(D,_.value,!0),_.type===4&&O.setUint32(D,_.value,!0))}else{const D=w+_.extraOffset;O.setUint32(M+8,D,!0),_.value instanceof Uint8Array?N.set(_.value,D):Array.isArray(_.value)&&_.value.forEach((I,B)=>{_.type===1&&O.setUint8(D+B,I),_.type===3&&O.setUint16(D+B*2,I,!0)})}M+=12}),O.setUint32(M,0,!0),P}var Nh=typeof self<"u"?self:global;const _u=typeof navigator<"u",x_=_u&&typeof HTMLImageElement>"u",t0=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Oh=Nh.Buffer,qf=Nh.BigInt,Mh=!!Oh,b_=e=>e;function r0(e,t=b_){if(t0)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let ux=Nh.fetch;const w_=e=>ux=e;if(!Nh.fetch){const e=r0("http",n=>n),t=r0("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:l,pathname:u,protocol:f,search:d}=new URL(n);const h={method:"GET",hostname:l,path:encodeURI(u)+d,headers:a};s!==""&&(h.port=Number(s));const p=(f==="https:"?await t:await e).request(h,y=>{if(y.statusCode===301||y.statusCode===302){let m=new URL(y.headers.location,n).toString();return r(m,{headers:a}).then(i).catch(o)}i({status:y.statusCode,arrayBuffer:()=>new Promise(m=>{let x=[];y.on("data",v=>x.push(v)),y.on("end",()=>m(Buffer.concat(x)))})})});p.on("error",o),p.end()});w_(r)}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const n0=e=>x3(e)?void 0:e,k_=e=>e!==void 0;function x3(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(k_).length===0)}function Mr(e){let t=new Error(e);throw delete t.stack,t}function Yo(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function Tm(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Em=e=>String.fromCharCode.apply(null,e),Gb=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function b3(e){return Gb?Gb.decode(e):Mh?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Em(e)))}class Tn{static from(t,r){return t instanceof this&&t.le===r?t:new Tn(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Tn){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&Mr("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Mr("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=Tn){return t instanceof DataView||t instanceof Tn?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Mr("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new Tn(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return b3(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return Em(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return Em(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function $m(e,t){Mr(`${e} '${t}' was not loaded, try using full build of exifr.`)}let fx=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||$m(this.kind,t),r&&(t in r||function(n,a){Mr(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||$m(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var ii=new fx("file parser"),Pr=new fx("segment parser"),li=new fx("file reader");function S_(e,t){return typeof e=="string"?Ub(e,t):_u&&!x_&&e instanceof HTMLImageElement?Ub(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Tn(e):_u&&e instanceof Blob?Dm(e,t,"blob",gs):void Mr("Invalid input argument")}function Ub(e,t){return(r=e).startsWith("data:")||r.length>1e4?Rm(e,t,"base64"):t0&&e.includes("://")?Dm(e,t,"url",ps):t0?Rm(e,t,"fs"):_u?Dm(e,t,"url",ps):void Mr("Invalid input argument");var r}async function Dm(e,t,r,n){return li.has(r)?Rm(e,t,r):n?async function(a,i){let o=await i(a);return new Tn(o)}(e,n):void Mr(`Parser ${r} is not loaded`)}async function Rm(e,t,r){let n=new(li.get(r))(e,t);return await n.read(),n}const ps=e=>ux(e).then(t=>t.arrayBuffer()),gs=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class j_ extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function br(e,t,r){let n=new j_;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function ms(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Yr=new Map,za=new Map,vo=new Map,eo=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ql=["jfif","xmp","icc","iptc","ihdr"],ys=["tiff",...ql],fr=["ifd0","ifd1","exif","gps","interop"],to=[...ys,...fr],ro=["makerNote","userComment"],Zl=["translateKeys","translateValues","reviveValues","multiSegment"],no=[...Zl,"sanitize","mergeOutput","silentErrors"];class w3{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Tc extends w3{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),Ue(this,"enabled",!1),Ue(this,"skip",new Set),Ue(this,"pick",new Set),Ue(this,"deps",new Set),Ue(this,"translateKeys",!1),Ue(this,"translateValues",!1),Ue(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=fr.includes(t),this.canBeFiltered&&(this.dict=Yr.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Mr(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of Zl)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,a0(this.pick,this.deps)):this.enabled&&this.pick.size>0&&a0(this.pick,this.deps)}}var wn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Wb=new Map;let Ps=class extends w3{static useCached(t){let r=Wb.get(t);return r!==void 0||(r=new this(t),Wb.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Mr(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=_u?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of eo)this[t]=wn[t];for(t of no)this[t]=wn[t];for(t of ro)this[t]=wn[t];for(t of to)this[t]=new Tc(t,wn[t],void 0,this)}setupFromTrue(){let t;for(t of eo)this[t]=wn[t];for(t of no)this[t]=wn[t];for(t of ro)this[t]=!0;for(t of to)this[t]=new Tc(t,!0,void 0,this)}setupFromArray(t){let r;for(r of eo)this[r]=wn[r];for(r of no)this[r]=wn[r];for(r of ro)this[r]=wn[r];for(r of to)this[r]=new Tc(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,fr)}setupFromObject(t){let r;for(r of(fr.ifd0=fr.ifd0||fr.image,fr.ifd1=fr.ifd1||fr.thumbnail,Object.assign(this,t),eo))this[r]=Zp(t[r],wn[r]);for(r of no)this[r]=Zp(t[r],wn[r]);for(r of ro)this[r]=Zp(t[r],wn[r]);for(r of ys)this[r]=new Tc(r,wn[r],t[r],this);for(r of fr)this[r]=new Tc(r,wn[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,fr,to),t.tiff===!0?this.batchEnableWithBool(fr,!0):t.tiff===!1?this.batchEnableWithUserValue(fr,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,fr):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,fr)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=Vb(t,n);for(let[o,s]of i)a0(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=Vb(r,n);for(let[o,s]of i)a0(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=fr.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of fr)this[i].finalizeFilters()}get onlyTiff(){return!ql.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of ys)this[t].enabled&&!Pr.has(t)&&$m("segment parser",t)}};function Vb(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Yr.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function Zp(e,t){return e!==void 0?e:t!==void 0?t:void 0}function a0(e,t){for(let r of t)e.add(r)}Ue(Ps,"default",wn);class Po{constructor(t){Ue(this,"parsers",{}),Ue(this,"output",{}),Ue(this,"errors",[]),Ue(this,"pushToErrors",r=>this.errors.push(r)),this.options=Ps.useCached(t)}async read(t){this.file=await S_(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of ii)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),Mr("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),n0(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=Pr.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function _h(e,t){let r=new Po(t);return await r.read(e),r.parse()}var C_=Object.freeze({__proto__:null,parse:_h,Exifr:Po,fileParsers:ii,segmentParsers:Pr,fileReaders:li,tagKeys:Yr,tagValues:za,tagRevivers:vo,createDictionary:br,extendDictionary:ms,fetchUrlAsArrayBuffer:ps,readBlobAsArrayBuffer:gs,chunkedProps:eo,otherSegments:ql,segments:ys,tiffBlocks:fr,segmentsAndBlocks:to,tiffExtractables:ro,inheritables:Zl,allFormatters:no,Options:Ps});class Ah{constructor(t,r,n){Ue(this,"errors",[]),Ue(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){Mr(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Mr("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(Pr.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}let Da=class{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new Ps({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof Tn?t:new Tn(t)}constructor(t,r={},n){Ue(this,"errors",[]),Ue(this,"raw",new Map),Ue(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=vo.get(r),a=za.get(r),i=Yr.get(r),o=this.options[r],s=o.reviveValues&&!!n,l=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,h]of t)s&&n.has(d)?h=n.get(d)(h):l&&a.has(d)&&(h=this.translateValue(h,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=h;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}};Ue(Da,"headerLength",4),Ue(Da,"type",void 0),Ue(Da,"multiSegment",!1),Ue(Da,"canHandle",()=>!1);function P_(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function N_(e){return e>=224&&e<=239}function O_(e,t,r){for(let[n,a]of Pr)if(a.canHandle(e,t,r))return n}class Hb extends Ah{constructor(...t){super(...t),Ue(this,"appSegments",[]),Ue(this,"jpegSegments",[]),Ue(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(Pr.keyList())):(t=t===void 0?Pr.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&Pr.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let l=Pr.get(s),u=this.options[s];return l.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>l&&!u?!await n.readNextChunk(t):!await n.readNextChunk(l),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,l,{file:u,findAll:f,wanted:d,remaining:h,options:p}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),N_(n)){if(a=u.getUint16(t+2),i=O_(u,t,a),i&&d.has(i)&&(o=Pr.get(i),s=o.findPosition(u,t),l=p[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||h.delete(i)):h.delete(i),h.size===0)))break;p.recordUnknownSegments&&(s=Da.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(P_(n)){if(a=u.getUint16(t+2),n===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let l=0;l<r.length;l++)a=r[l],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=Pr.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}Ue(Hb,"type","jpeg"),ii.set("jpeg",Hb);const M_=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class __ extends Da{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,l=this.chunk.getUint16(t);t+=2;for(let u=0;u<l;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=M_[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Mr(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Mr(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return Yo(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let l=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)l[f]=this.parseTagValue(i,t),t+=u;return l}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Mr(`Invalid tiff type ${t}`)}}}class Qp extends __{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Mr("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Mr(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,Tm(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Tm(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Xb(...t.get(2),t.get(1))),t.set("longitude",Xb(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of fr)if(t=this[r],!x3(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function Xb(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Ue(Qp,"type","tiff"),Ue(Qp,"headerLength",10),Pr.set("tiff",Qp);var A_=Object.freeze({__proto__:null,default:C_,Exifr:Po,fileParsers:ii,segmentParsers:Pr,fileReaders:li,tagKeys:Yr,tagValues:za,tagRevivers:vo,createDictionary:br,extendDictionary:ms,fetchUrlAsArrayBuffer:ps,readBlobAsArrayBuffer:gs,chunkedProps:eo,otherSegments:ql,segments:ys,tiffBlocks:fr,segmentsAndBlocks:to,tiffExtractables:ro,inheritables:Zl,allFormatters:no,Options:Ps,parse:_h});const dx={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},hx=Object.assign({},dx,{firstChunkSize:4e4,gps:[1,2,3,4]});async function k3(e){let t=new Po(hx);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const px=Object.assign({},dx,{tiff:!1,ifd1:!0,mergeOutput:!1});async function S3(e){let t=new Po(px);await t.read(e);let r=await t.extractThumbnail();return r&&Mh?Oh.from(r):r}async function j3(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const gx=Object.assign({},dx,{firstChunkSize:4e4,ifd0:[274]});async function mx(e){let t=new Po(gx);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const yx=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let qo=!0,Zo=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;qo=Number(r)+.1*Number(n)<13.4,Zo=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);qo=Zo=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);qo=Zo=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);qo=Zo=Number(t)<77}}async function C3(e){let t=await mx(e);return Object.assign({canvas:qo,css:Zo},yx[t])}class T_ extends Tn{constructor(...t){super(...t),Ue(this,"ranges",new E_),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=Mh?Oh.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class E_{constructor(){Ue(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>Kb(t,o.offset,a)||Kb(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function Kb(e,t,r){return e<=t&&t<=r}class Th extends T_{constructor(t,r){super(0),Ue(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}li.set("blob",class extends Th{async readWhole(){this.chunked=!1;let e=await gs(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await gs(n);return this.set(a,e,!0)}});var $_=Object.freeze({__proto__:null,default:A_,Exifr:Po,fileParsers:ii,segmentParsers:Pr,fileReaders:li,tagKeys:Yr,tagValues:za,tagRevivers:vo,createDictionary:br,extendDictionary:ms,fetchUrlAsArrayBuffer:ps,readBlobAsArrayBuffer:gs,chunkedProps:eo,otherSegments:ql,segments:ys,tiffBlocks:fr,segmentsAndBlocks:to,tiffExtractables:ro,inheritables:Zl,allFormatters:no,Options:Ps,parse:_h,gpsOnlyOptions:hx,gps:k3,thumbnailOnlyOptions:px,thumbnail:S3,thumbnailUrl:j3,orientationOnlyOptions:gx,orientation:mx,rotations:yx,get rotateCanvas(){return qo},get rotateCss(){return Zo},rotation:C3});li.set("url",class extends Th{async readWhole(){this.chunked=!1;let e=await ps(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await ux(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});Tn.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof qf!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),qf(t)<<qf(32)|qf(r)):void Mr("Trying to read 64b value but JS can only handle 53b numbers.")};class D_ extends Ah{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class P3 extends D_{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let l=4+this.file.getUint32(o);o+=l,s-=l,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),l=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,h=this.file.getUintBytes(n,d);for(n+=d;h--;){let p=this.file.getUintBytes(n,l);n+=l+u+2+o;let y=this.file.getUint16(n);if(n+=2,p===r)return y>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=y*f}}}class N3 extends P3{}Ue(N3,"type","heic");class Yb extends P3{}Ue(Yb,"type","avif"),ii.set("heic",N3),ii.set("avif",Yb),br(Yr,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),br(Yr,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),br(Yr,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),br(za,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let au=br(za,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const qb={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};au.set(37392,qb),au.set(41488,qb);const Jp={0:"Normal",1:"Low",2:"High"};function Zb(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function Qb(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function eg(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function Ec(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(Jb(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(Jb(e[r],e[r+1]));return Yo(String.fromCodePoint(...t))}function Jb(e,t){return e<<8|t}au.set(41992,Jp),au.set(41993,Jp),au.set(41994,Jp),br(vo,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?b3(e):e}],[306,eg],[40091,Ec],[40092,Ec],[40093,Ec],[40094,Ec],[40095,Ec]]),br(vo,"exif",[[40960,Qb],[36864,Qb],[36867,eg],[36868,eg],[40962,Zb],[40963,Zb]]),br(vo,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class tg extends Da{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:Tn.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let l of A3)o[l]=[],s[l]=0;return i.replace(B_,(l,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${l}#${d}`}return`${l}#${o[f].pop()}`})}(t);let r=cl.findAll(t,"rdf","Description");r.length===0&&r.push(new cl("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=L_(o.ns,a),O3(o,n);return function(i){let o;for(let s in i)o=i[s]=n0(i[s]),o===void 0&&delete i[s];return n0(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}Ue(tg,"type","xmp"),Ue(tg,"multiSegment",!0),Pr.set("xmp",tg);class i0{static findAll(t){return M3(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(i0.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=_3(a),new i0(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class cl{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return M3(t,a).map(cl.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new cl(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=i0.findAll(n),this.children=cl.findAll(a),this.value=this.children.length===0?_3(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return I_(this.children.map(R_));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)O3(r,t);return this.value!==void 0&&(t.value=this.value),n0(t)}}function O3(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var R_=e=>e.serialize(),I_=e=>e.length===1?e[0]:e,L_=(e,t)=>t[e]?t[e]:t[e]={};function M3(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function _3(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const A3=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],B_=new RegExp(`(<|\\/)(${A3.join("|")})`,"g");var T3=Object.freeze({__proto__:null,default:$_,Exifr:Po,fileParsers:ii,segmentParsers:Pr,fileReaders:li,tagKeys:Yr,tagValues:za,tagRevivers:vo,createDictionary:br,extendDictionary:ms,fetchUrlAsArrayBuffer:ps,readBlobAsArrayBuffer:gs,chunkedProps:eo,otherSegments:ql,segments:ys,tiffBlocks:fr,segmentsAndBlocks:to,tiffExtractables:ro,inheritables:Zl,allFormatters:no,Options:Ps,parse:_h,gpsOnlyOptions:hx,gps:k3,thumbnailOnlyOptions:px,thumbnail:S3,thumbnailUrl:j3,orientationOnlyOptions:gx,orientation:mx,rotations:yx,get rotateCanvas(){return qo},get rotateCss(){return Zo},rotation:C3});let e2=r0("fs",e=>e.promises);li.set("fs",class extends Th{async readWhole(){this.chunked=!1,this.fs=await e2;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await e2,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});li.set("base64",class extends Th{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(Mh){let l=Oh.from(a,"base64").slice(n,n+s);return this.set(l,e,!0)}{let l=this.subarray(e,s,!0),u=atob(a),f=l.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return l}}});class t2 extends Ah{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(Tm(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}Ue(t2,"type","tiff"),ii.set("tiff",t2);let F_=r0("zlib");const z_=["ihdr","iccp","text","itxt","exif"];class r2 extends Ah{constructor(...t){super(...t),Ue(this,"catchError",r=>this.errors.push(r)),Ue(this,"metaChunks",[]),Ue(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,l={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};z_.includes(o)?this.metaChunks.push(l):this.unknownChunks.push(l),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),t0){let s=await F_,l=r.getUint8Array(i);l=s.inflateSync(l),this.injectSegment("icc",l)}}}Ue(r2,"type","png"),ii.set("png",r2),br(Yr,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),ms(Yr,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let n2=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];ms(Yr,"ifd0",n2),ms(Yr,"exif",n2),br(za,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class rg extends Da{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Ue(rg,"type","jfif"),Ue(rg,"headerLength",9),Pr.set("jfif",rg),br(Yr,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class a2 extends Da{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Ue(a2,"type","ihdr"),Pr.set("ihdr",a2),br(Yr,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),br(za,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Nd extends Da{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),l=0;for(let u of a)s.set(u,l),l+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new Tn(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&Mr("ICC header is too short");for(let[r,n]of Object.entries(G_)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(l,4),r=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),l+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return Yo(this.chunk.getString(t+12,r))}parseText(t,r){return Yo(this.chunk.getString(t+8,r-8))}parseSig(t){return Yo(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let l=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,h=Yo(r.getUnicodeString(d,f));o.push({lang:l,country:u,text:h}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}Ue(Nd,"type","icc"),Ue(Nd,"multiSegment",!0),Ue(Nd,"headerLength",18);const G_={4:hi,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:hi,16:hi,20:hi,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:hi,40:hi,48:hi,52:hi,64:(e,t)=>e.getUint32(t),80:hi};function hi(e,t){return Yo(e.getString(t,4))}Pr.set("icc",Nd),br(Yr,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Zf={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},i2={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};br(za,"icc",[[4,Zf],[12,i2],[40,Object.assign({},Zf,i2)],[48,Zf],[80,Zf],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Qf extends Da{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}Ue(Qf,"type","iptc"),Ue(Qf,"translateValues",!1),Ue(Qf,"reviveValues",!1),Pr.set("iptc",Qf),br(Yr,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),br(za,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let ng=null;async function Ns(){if(!ng)try{const n=(await m_(()=>import("./joraw-BhZYK3Be.js"),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;ng=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await ng,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const vx=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],xo=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function Jf(e,t=0,r=0){const n=await Ns(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,l=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((l-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let p=0;p<f/2;p++){const y=p*6+r;if(y+3>=l)break;const m=y*s,x=(y+3)*s,v=p*2,g=v*u,b=(v+1)*u;for(let S=0;S<u/2;S++){const k=S*6+t;if(k+1>=s)break;const w=S*2;d[g+w]=o[m+k+1],d[g+w+1]=o[m+k+0],d[b+w]=o[x+k+0],d[b+w+1]=o[x+k+1]}}return{dngBuffer:Pd(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function U_(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,l=r*n,u=new Uint16Array(l);for(let h=0;h<n;h++)for(let p=0;p<r;p++){const y=(h*r+p)*4,m=h*r+p,x=h%2===0,v=p%2===0;let g=0;x&&v?g=s[y]:!x&&!v?g=s[y+2]:g=s[y+1],u[m]=g*64}const f=await new Promise(h=>a.toBlob(h,"image/png"));let d={description:"Standard image (non-RAW)"};try{const h=await T3.parse(e);h&&(d={...d,...h})}catch(h){console.warn("EXIF parsing failed for standard image",h)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const W_=async e=>{const t=await Ns(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const l=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const h=d*3,p=d*4;l.data[p]=u[h],l.data[p+1]=u[h+1],l.data[p+2]=u[h+2],l.data[p+3]=255}s.putImageData(l,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},o0=async e=>{var n,a,i,o,s,l,u,f,d;const t=await Ns(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const h=r.getRawImage();let p=new Uint16Array(h.data);const y=await r.metadata(!0);let m={...y};try{const w=await T3.parse(e.buffer);w&&(m={...m,...w})}catch(w){console.warn("exifr parsing failed for RAW buffer",w)}const x=((n=y.idata)==null?void 0:n.filters)||0,v=((a=y.idata)==null?void 0:a.colors)||0,g=x===0&&v===3,b=x===9;let S=[0,0,0,0],k=!1;if(r.getBlackLevels)try{const w=r.getBlackLevels();w.dng_cblack&&w.dng_cblack.length===4&&Array.from(w.dng_cblack).some(C=>C>0)?(S=Array.from(w.dng_cblack).map(Number),k=!0):w.cblack&&w.cblack.length===4&&Array.from(w.cblack).some(C=>C>0)?(S=Array.from(w.cblack).map(Number),k=!0):typeof w.black=="number"&&w.black>0&&(S=[w.black,w.black,w.black,w.black],k=!0)}catch(w){console.warn("getBlackLevels binding failed",w)}if(!k){let w=[];if((i=y.color_data)!=null&&i.cblack_rawpy_style)w=y.color_data.cblack_rawpy_style;else if((s=(o=y.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)w=y.color_data.dng_levels.dng_cblack;else if(((l=y.black_level_per_channel)==null?void 0:l.length)>=4)w=y.black_level_per_channel;else if(((u=y.cblack)==null?void 0:u.length)>=4)w=y.cblack;else if(((d=(f=y.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)w=y.color.cblack;else{const C=y.black_level||y.color_data&&y.color_data.black||0;w=[C,C,C,C]}S=[Number(w[0])||0,Number(w[1])||0,Number(w[2])||0,Number(w[3])||0]}return{data:p,width:h.width,height:h.height,bayerPattern:y.color_desc||"RGGB",blackLevels:S,whiteLevel:y.white_level||16383,metadata:m,isThreePlane:g,isXTrans:b}}finally{r.delete?r.delete():r.close()}};async function Lo(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([W_(t),o0(r)]);return{previewBlob:n,analysisData:a}}async function s0(e){const t=new Uint8Array(e);return o0(t)}const o2=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function ag(e,t,r,n=!0){const a=await o0(new Uint8Array(e)),i=await o0(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,l=r?o2(o):o,u=r?o2(s):s,f=l*u,d=new Uint16Array(f),h=6e4,p=1.41421356;for(let y=0;y<s;y++){const m=y*o,x=y*l;for(let v=0;v<o;v++){const g=a.data[m+v],b=i.data[m+v];let S=g-b;n&&(S/=p);let k=S+h;k=Math.max(0,Math.min(65535,k)),d[x+v]=Math.round(k)}}return{rawData:d,width:l,height:u,metadata:a.metadata}}function Bo(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),l=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],h=[0,0,0,0],p=[0,0,0,0];for(let x=l;x<f;x++){const v=x*t,g=x%2;for(let b=s;b<u;b++){const S=b%2,k=e[v+b],w=g*2+S;d[w]+=k,h[w]+=k*k,p[w]++}}const y=[0,0,0,0],m=[0,0,0,0];for(let x=0;x<4;x++)if(p[x]>0){const v=d[x]/p[x];y[x]=v;const b=h[x]/p[x]-v*v;m[x]=Math.sqrt(Math.max(0,b))}return{x:s,y:l,width:u-s,height:f-l,means:y,stdDevs:m,pixelCount:p.reduce((x,v)=>x+v,0)}}function V_(e,t,r,n,a,i=!1){const o=Math.floor(Math.max(0,r.x)),s=Math.floor(Math.max(0,r.y)),l=Math.ceil(Math.min(t,r.x+r.w)),u=e.length/t,f=Math.ceil(Math.min(u,r.y+r.h)),d=[0,0,0,0],h=[0,0,0,0];for(let I=s;I<f;I++){const B=I*t,A=I%2;for(let E=o;E<l;E++){const L=E%2,U=A*2+L,J=e[B+E],K=n[U]||0;d[U]+=Math.max(0,J-K),h[U]++}}let p=0,y=3;i&&(p=3,y=0);const m=h[p]>0?d[p]/h[p]:1,x=(d[1]+d[2])/(h[1]+h[2]||1),v=h[y]>0?d[y]/h[y]:1;if(m<1||x<1||v<1)return[1,1];const g=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]],b=Mu(g);if(!b)return console.warn("Color Matrix is not invertible, falling back to standard WB"),[x/m,x/v];const S=e0(vx,b),k=Mu(S);let w=1,C=1,P=1;if(k)w=k[0][0]+k[0][1]+k[0][2],C=k[1][0]+k[1][1]+k[1][2],P=k[2][0]+k[2][1]+k[2][2],Math.abs(C)<1e-6&&(C=1);else return console.warn("Final Matrix is not invertible"),[x/m,x/v];const O=x/m,N=x/v,$=w/C,M=P/C,_=O*$,D=N*M;return[Math.max(0,_),Math.max(0,D)]}function s2(e,t,r,n,a,i,o=0,s=0){const l=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),h=a>>1,p=a&1,y=(i>>1)+o,m=(i&1)+s;let x=0,v=0,g=0;for(let P=u;P<d-2;P+=2)for(let O=l;O<f-2;O+=2){const N=(P+h)*t+(O+p),$=(P+y)*t+(O+m);P+y>=r||O+m>=t||(x+=e[N],v+=e[$],g++)}if(g<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const b=x/g,S=v/g;let k=0,w=0,C=0;for(let P=u;P<d-2;P+=2)for(let O=l;O<f-2;O+=2){const N=(P+h)*t+(O+p),$=(P+y)*t+(O+m);if(P+y>=r||O+m>=t)continue;const M=e[N],_=e[$],D=M-b,I=_-S;k+=D*I,w+=D*D,C+=I*I}return{sumCov:k,sumVar1:w,sumVar2:C,n:g}}function H_(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function X_(e,t,r,n,a,i,o,s,l,u,f){if(u<=l)return[];const d=Math.max(0,Math.floor(n)),h=Math.max(0,Math.floor(a)),p=Math.min(t,Math.ceil(n+i)),y=Math.min(r,Math.ceil(a+o)),m=u-l,x=f?Math.floor(m)+1:s,v=m/x,g=[new Uint32Array(x),new Uint32Array(x),new Uint32Array(x),new Uint32Array(x)];for(let S=h;S<y;S++){const k=S*t,w=S%2;for(let C=d;C<p;C++){const P=C%2,O=e[k+C];if(O<l||O>u)continue;const N=w*2+P;let $;f?$=Math.floor(O-l):$=Math.floor((O-l)/v),$<0&&($=0),$>=x&&($=x-1),g[N][$]++}}const b=[];for(let S=0;S<x;S++){const k=l+(f?S:S*v);b.push({binStart:k,c0:g[0][S],c1:g[1][S],c2:g[2][S],c3:g[3][S]})}return b}function K_(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},l=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),h=Math.min(t,Math.ceil(n.x+n.w)),p=Math.min(r,Math.ceil(n.y+n.h)),y=h-f,m=p-d;if(y<=1||m<=1)return null;let x=0;for(let $=f;$<h;$++)$%2===(a&1)&&x++;let v=0;for(let $=d;$<p;$++)$%2===a>>1&&v++;if(x<4||v<4)return null;const g=Math.max(1,u),b=Math.floor(2*x/(g+1)),S=Math.floor(2*v/(g+1));if(b<4||S<4)return null;const k=new hs(b),w=new hs(S),C=new Float32Array(Math.floor(b/2)+1),P=new Float32Array(Math.floor(S/2)+1);let O=0,N=0;for(let $=d;$<p;$++){const M=$%2;if(a>>1!==M||s.rows&&($>>1&1)!==s.rowGroup)continue;const _=$*t,D=new Float32Array(x);let I=0;for(let B=f;B<h;B++)B%2===(a&1)&&I<x&&(D[I++]=e[_+B]);for(let B=0;B<g;B++){const A=Math.floor(B*b/2);if(A+b>x)break;const E=D.slice(A,A+b);k.calculateSpectrum(E,C,o),O++}if(!l)break}for(let $=f;$<h;$++){const M=$%2;if((a&1)!==M||s.cols&&($>>1&1)!==s.rowGroup)continue;const _=new Float32Array(v);let D=0;for(let I=d;I<p;I++)I%2===a>>1&&D<v&&(_[D++]=e[I*t+$]);for(let I=0;I<g;I++){const B=Math.floor(I*S/2);if(B+S>v)break;const A=_.slice(B,B+S);w.calculateSpectrum(A,P,o),N++}if(!l)break}if(O>0)for(let $=0;$<C.length;$++)C[$]/=O;if(N>0)for(let $=0;$<P.length;$++)P[$]/=N;return{avgHoriz:Array.from(C),avgVert:Array.from(P),sampleCount:{h:O,v:N}}}function Y_(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),l=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let g=s;g<u;g++)if(g%2===a>>1){f=g;break}if(f===-1)return null;let d=-1;for(let g=o;g<l;g++)if(g%2===(a&1)){d=g;break}if(d===-1)return null;const h=[];for(let g=f;g<u;g+=2){const b=g*t,S=[];for(let k=d;k<l;k+=2)S.push(e[b+k]);h.push(S)}const p=h.length;if(p===0)return null;const y=h[0].length;if(y===0)return null;const m=new Float32Array(y*p);for(let g=0;g<p;g++){const b=h[g];for(let S=0;S<y;S++)m[g*y+S]=b[S]}const x=y_(m,y,p,i),v=v_(x,y,p);return{width:y,height:p,data:v}}function q_(e,t,r,n,a,i,o){const{x:s,y:l,w:u,h:f}=n,d=[],h=Math.max(0,Math.floor(s)),p=Math.max(0,Math.floor(l)),y=Math.min(t,Math.ceil(s+u)),m=Math.min(r,Math.ceil(l+f)),x=a>>1,v=a&1;for(let w=p;w<m;w++){if(w%2!==x)continue;const C=w*t;for(let P=h;P<y;P++){if(P%2!==v)continue;const O=e[C+P];O>=i&&O<=o&&d.push(O-i)}}if(d.length===0)return null;d.sort((w,C)=>w-C);const g=[d[0]];for(let w=1;w<d.length;w++)d[w]!==d[w-1]&&g.push(d[w]);const b=[],S=[],k={};for(let w=0;w<g.length-1;w++){const C=g[w],O=g[w+1]-C;b.push(O),S.push({x:C,y:O}),k[O]=(k[O]||0)+1}return{uniqueCount:g.length,diffCount:b.length,stepCounts:k,plotData:S}}function xx(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:l}=e,u=a.map((b,S)=>Math.max(0,b-n[S])),f=i.map((b,S)=>Math.max(0,b-n[S])),d=(u[1]+u[3])/2,h=(f[1]+f[3])/2,p=Math.floor(t.x),y=Math.floor(t.y),m=Math.floor(t.w),x=Math.floor(t.h),v=Math.pow(2,r.exposure),g=new Uint16Array(m*x);for(let b=0;b<x;b++){const S=y+b;if(S<0||S>=e.height)continue;const k=S%2,w=S*s,C=b*m;for(let P=0;P<m;P++){const O=p+P;if(O<0||O>=s)continue;const N=O%2;let $=0;!k&&!N?$=0:!k&&N?$=1:k&&!N?$=3:$=2;const M=o[w+O],_=n[$],D=u[$],I=f[$],B=Math.max(M-_,0),A=I-D||1e-9,E=(B-D)/A;let L;E<0?L=B*(d/Math.max(D,1e-9)):E>1?L=B*(h/Math.max(I,1e-9)):L=(1-E)*d+E*h,L*=v,g[C+P]=Math.max(0,Math.min(65535,Math.round(L)))}}return{data:g,width:m,height:x}}async function l2(e,t){const r=await Ns(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const h=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],p=Mu(h);if(p){const y=t.wbGains?t.wbGains[0]:1,m=t.wbGains?t.wbGains[1]:1,v=e0(p,[[y,0,0],[0,1,0],[0,0,m]]),g=e0(vx,v);o=[g[0][0],g[0][1],g[0][2],g[1][0],g[1][1],g[1][2],g[2][0],g[2][1],g[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(h=>{const p=Math.round(h);return p===0?1:p})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const l=await n.imageData(),u=new ImageData(l.width,l.height),f=u.data,d=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2);if(i&&o.length===9){const h=o,y=Math.pow(2,t.exposure)*.25;for(let m=0;m<d.length;m+=3){const x=d[m]/65535,v=d[m+1]/65535,g=d[m+2]/65535;let b=h[0]*x+h[1]*v+h[2]*g,S=h[3]*x+h[4]*v+h[5]*g,k=h[6]*x+h[7]*v+h[8]*g;b*=y,S*=y,k*=y,b=Math.max(0,Math.min(1,b)),S=Math.max(0,Math.min(1,S)),k=Math.max(0,Math.min(1,k)),b=xo(b),S=xo(S),k=xo(k);const w=m/3*4;f[w]=Math.round(b*255),f[w+1]=Math.round(S*255),f[w+2]=Math.round(k*255),f[w+3]=255}}else for(let h=0;h<d.length;h+=3){const p=h/3*4;f[p]=d[h]>>8,f[p+1]=d[h+1]>>8,f[p+2]=d[h+2]>>8,f[p+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function ig(e,t){const r=await Ns(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const m=await n.metadata(!0);m&&m.white_level&&(a=m.white_level)}catch(m){console.warn("Metadata error",m)}const i=n.getRawImage(),o=i.width,s=i.height,l=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1;for(let m=0;m<s;m++){const x=m%2;for(let v=0;v<o;v++){const g=v%2,b=x*2+g,S=l[m*o+v],k=d[b];let w=(S-k)/(h-k);w=Math.max(0,Math.min(1,w)),t.exposure!==0&&(w*=Math.pow(2,t.exposure),w=Math.min(1,w)),b===0?w*=p:b===3&&(w*=y);const C=Math.round(xo(Math.min(1,w))*255),P=(m*o+v)*4;f[P]=C,f[P+1]=C,f[P+2]=C,f[P+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function Z_(e,t){const r=await Ns(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const $=await n.metadata(!0);$&&$.white_level&&(a=$.white_level)}catch{}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1,m=Math.pow(2,t.exposure);let x=[[1,0,0],[0,1,0],[0,0,1]];if(t.customMatrix&&t.customMatrix.length===9){const $=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],M=Mu($);M&&(x=e0(vx,M))}const v=x[0][0],g=x[0][1],b=x[0][2],S=x[1][0],k=x[1][1],w=x[1][2],C=x[2][0],P=x[2][1],O=x[2][2],N=new Float32Array(o*s);for(let $=0;$<o*s;$++){const M=Math.floor($/o),_=$%o,D=M%2,I=_%2,B=D*2+I,A=l[$],E=d[B];let L=(A-E)/(h-E);L=Math.max(0,L),B===0?L*=p:B===3&&(L*=y),N[$]=L}for(let $=1;$<s-1;$++){const M=$%2,_=$*o;for(let D=1;D<o-1;D++){const I=D%2,B=_+D;let A=0,E=0,L=0;!M&&!I?(A=N[B],E=(N[B-1]+N[B+1]+N[B-o]+N[B+o])*.25,L=(N[B-o-1]+N[B-o+1]+N[B+o-1]+N[B+o+1])*.25):M&&I?(L=N[B],E=(N[B-1]+N[B+1]+N[B-o]+N[B+o])*.25,A=(N[B-o-1]+N[B-o+1]+N[B+o-1]+N[B+o+1])*.25):(E=N[B],!M&&I?(A=(N[B-1]+N[B+1])*.5,L=(N[B-o]+N[B+o])*.5):(L=(N[B-1]+N[B+1])*.5,A=(N[B-o]+N[B+o])*.5));let U=v*A+g*E+b*L,J=S*A+k*E+w*L,K=C*A+P*E+O*L;U*=m,J*=m,K*=m,U=Math.max(0,Math.min(1,U)),J=Math.max(0,Math.min(1,J)),K=Math.max(0,Math.min(1,K)),U=xo(U),J=xo(J),K=xo(K);const F=B*4;f[F]=Math.round(U*255),f[F+1]=Math.round(J*255),f[F+2]=Math.round(K*255),f[F+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function Q_(e,t){const r=await Ns(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const g=await n.metadata(!0);g&&g.white_level&&(a=g.white_level)}catch(g){console.warn("Metadata error",g)}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data;if(!t.advancedZeroDep)throw new Error("Missing advanced settings");const{bl:d,bg:h,fg:p}=t.advancedZeroDep,y=h.map((g,b)=>Math.max(0,g-d[b])),m=p.map((g,b)=>Math.max(0,g-d[b])),x=(y[1]+y[3])/2,v=(m[1]+m[3])/2;for(let g=0;g<s;g++){const b=g%2;for(let S=0;S<o;S++){const k=S%2;let w=0;!b&&!k?w=0:!b&&k?w=1:b&&!k?w=3:w=2;const C=l[g*o+S],P=d[w],O=y[w],N=m[w],$=Math.max(C-P,0),M=N-O||1e-9,_=($-O)/M;let D;_<0?D=$*(x/Math.max(O,1e-9)):_>1?D=$*(v/Math.max(N,1e-9)):D=(1-_)*x+_*v;let I=D/65535;I=Math.max(0,Math.min(1,I));const B=Math.round(xo(I)*255),A=(g*o+S)*4;f[A]=B,f[A+1]=B,f[A+2]=B,f[A+3]=255}}return u}finally{n.delete?n.delete():n.close()}}const Is=({title:e,children:t})=>c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[c.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:c.jsx("span",{children:e})}),c.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),J_=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],og=({checked:e,onChange:t,label:r})=>c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),c.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:c.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),sg=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},eA=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:l,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:h,drGridRows:p,onDrGridRowsChange:y,drGridCols:m,onDrGridColsChange:x,onBatchDrLab:v,hasDrMarkers:g,isFftLabOpen:b,onProcessPair:S,onProcessBatchDiff:k,onProcessStackFft:w,onOpenCrossCalc:C,isThreePlane:P,onToggleXTrans:O,xtransPhase:N,onXTransPhaseChange:$,isXTransConverted:M,onCommand:_,isColorLabOpen:D,colorLabMarkingStep:I,onStartColorLabMarking:B,isSfrLabOpen:A,roiStats:E,isBGGR:L,onOpenDngExport:U,sfrRectCount:J,isBatchMarkingMode:K,onToggleBatchMarking:F,onClearBatchMarks:ee,onBatchCompute:ue,stdChartStep:Q,onStartStandardCalibration:fe}=e,W=!!t,X=!!(t!=null&&t.isXTrans),se=!!O,[ce,H]=j.useState(r.exposure.toString()),[pe,Z]=j.useState(""),[te,ge]=j.useState("0 0 0 0"),[me,He]=j.useState("1.0"),[Ae,_e]=j.useState("1.0"),[Re,lt]=j.useState(r.demosaicMethod),[gt,sr]=j.useState(!!r.showKadc),[Je,tr]=j.useState(!!r.subtractBlackLevelFromStats),[tt,Yt]=j.useState("64"),[It,rr]=j.useState(!1),[$t,wt]=j.useState(""),[Ye,kt]=j.useState(""),[St,qt]=j.useState(""),[wr,Gr]=j.useState(!1),[jt,Ar]=j.useState(!1),[ct,Zt]=j.useState(!1),[Tr,an]=j.useState(!1),[kr,Er]=j.useState("single"),[on,Gn]=j.useState(!1),[Ur,Un]=j.useState(!0),[wa,Ua]=j.useState(!0),lr=j.useMemo(()=>Object.keys(Jd).sort(),[]),cr=j.useRef(null),rt=j.useRef(null),le=j.useRef(null),Oe=j.useRef(null),[Ee,Qe]=j.useState(null),[Be,Ct]=j.useState(null),[ur,pr]=j.useState(!1),[We,ut]=j.useState(!0),ft=j.useRef(null),Pt=j.useRef(null);j.useEffect(()=>{if(H(r.exposure.toString()),r.customMatrix?Z(r.customMatrix.join(" ")):Z(""),r.blackLevel&&r.blackLevel.length===4)ge(r.blackLevel.join(" "));else{const R=sg(t,i);R&&R.some(T=>T!==0)?ge(R.join(" ")):ge("")}He(r.wbGains?r.wbGains[0].toString():"1.0"),_e(r.wbGains?r.wbGains[1].toString():"1.0"),lt(r.demosaicMethod),sr(!!r.showKadc),tr(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(wt(r.advancedZeroDep.bl.join(" ")),kt(r.advancedZeroDep.bg.join(" ")),qt(r.advancedZeroDep.fg.join(" ")),rr(!0))},[r,t,i]);const Ut=j.useRef(!1),be=j.useRef(null);j.useEffect(()=>{t!==be.current&&(Ut.current=!1,be.current=t)},[t]),j.useEffect(()=>{if(o&&t&&!Ut.current){Ut.current=!0;const R=sg(t,i),T=R&&R.some(ie=>ie>0);if(R&&T){console.log("[AutoApply] Detected Black Levels via Bridge:",R);const ie={...r,blackLevel:R,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(ie)}}},[o,t,i,r,n]);const sn=R=>H(R),Bi=R=>He(R),ra=R=>_e(R),ka=R=>lt(parseInt(R.target.value,10)),Eo=R=>Z(R.target.value),Es=()=>{H("0"),lt(3),He("1.0"),_e("1.0"),sr(!0),tr(!0),Z(""),rr(!1);const R=sg(t,i);ge(R&&R.some(T=>T!==0)?R.join(" "):"")},Sa=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),_==null||_("sel full"))},$o=()=>{if(!t||!a)return;const R=parseInt(tt,10);if(isNaN(R)||R<=0)return;const T=Math.min(R,t.width),ie=Math.min(R,t.height),ve=Math.floor((t.width-T)/2),Ce=Math.floor((t.height-ie)/2);a({x:ve,y:Ce,w:T,h:ie}),_==null||_(`sel center ${R}`)},ui=()=>{if(!t||!E){alert("Please select a region on the image first.");return}const R=Zr()||[0,0,0,0],T=pe.trim().replace(/[\s,\n]+/g," "),ie=T?T.split(" ").map(Number):[1,0,0,0,1,0,0,0,1];if(ie.length!==9){alert("Matrix must be 3x3 (9 values).");return}const[ve,Ce]=V_(t.data,t.width,{x:E.x,y:E.y,w:E.width,h:E.height},R,ie,L);He(ve.toFixed(4)),_e(Ce.toFixed(4)),_==null||_(`wb ${ve.toFixed(4)} ${Ce.toFixed(4)} (Spot)`)},Zr=()=>{const T=te.split(/[\s,]+/).filter(ie=>ie.trim()!=="").map(Number);if(T.length===1&&!isNaN(T[0]))return[T[0],T[0],T[0],T[0]];if(T.length>=4&&!T.slice(0,4).some(isNaN))return[T[0],T[1],T[2],T[3]]},ja=R=>{const T=R.trim().split(/[\s,]+/).map(Number);return T.length===4&&!T.some(isNaN)?T:T.length===1&&!isNaN(T[0])?[T[0],T[0],T[0],T[0]]:null},Ca=()=>{_&&(ce!=="0"&&_(`ev ${ce}`),(me!=="1.0"||Ae!=="1.0")&&_(`wb ${me} ${Ae}`),te!=="0 0 0 0"&&te!==""&&_(`bl ${te}`),Re!==3&&_(`demo ${Re}`),pe.trim().length>0&&_(`matrix ${pe.replace(/\s+/g," ")}`),_("render"));const R={...r},T=parseFloat(ce);isNaN(T)||(R.exposure=T);const ie=parseFloat(me),ve=parseFloat(Ae);!isNaN(ie)&&!isNaN(ve)&&(R.wbGains=[ie,ve]),R.demosaicMethod=Re,R.renderMode="standard";const Ce=Zr();Ce?R.blackLevel=Ce:delete R.blackLevel;const Fe=pe.trim().replace(/[\s,\n]+/g," ");if(Fe){const Ie=Fe.split(" ").map(Number);Ie.length===9&&!Ie.some(isNaN)?R.customMatrix=Ie:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete R.customMatrix;R.showKadc=gt,R.subtractBlackLevelFromStats=Je,n(R)},Wn=()=>{Ar(!0)},na=R=>{_&&(ce!=="0"&&_(`ev ${ce}`),(me!=="1.0"||Ae!=="1.0")&&_(`wb ${me} ${Ae}`),te!=="0 0 0 0"&&te!==""&&_(`bl ${te}`),_(R==="bilinear"?"render zero color":"render zero"));const T={...r},ie=Zr();ie&&(T.blackLevel=ie);const ve=parseFloat(me),Ce=parseFloat(Ae);!isNaN(ve)&&!isNaN(Ce)&&(T.wbGains=[ve,Ce]);const Fe=parseFloat(ce);if(isNaN(Fe)||(T.exposure=Fe),R==="bilinear"){const Ie=pe.trim().replace(/[\s,\n]+/g," ");if(Ie){const xe=Ie.split(" ").map(Number);xe.length===9&&!xe.some(isNaN)&&(T.customMatrix=xe)}}T.renderMode=R==="mosaic"?"zero-dependency":"zero-dep-color",T.showKadc=gt,T.subtractBlackLevelFromStats=Je,Ar(!1),n(T)},Fi=()=>{const R=ja($t),T=ja(Ye),ie=ja(St);if(!R||!T||!ie){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}_&&(ce!=="0"&&_(`ev ${ce}`),_(`render unmix ${R.join(" ")} ${T.join(" ")} ${ie.join(" ")}`));const ve={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:R,bg:T,fg:ie}};ve.showKadc=gt,ve.subtractBlackLevelFromStats=Je,n(ve)},Do=()=>{if(E){const R=E.means,T=[R[0],R[1],R[3],R[2]].map(ie=>ie.toFixed(1));kt(T.join(" "))}else alert("Please select an ROI on the image first.")},hc=()=>{if(E){const R=E.means,T=[R[0],R[1],R[3],R[2]].map(ie=>ie.toFixed(1));qt(T.join(" "))}else alert("Please select an ROI on the image first.")},Wa=R=>{R.target.files&&R.target.files.length>0&&v&&(v(R.target.files,kr),_==null||_(`drlab batch ${kr}`)),R.target.value="",an(!1)},fi=async R=>{var ie;const T=(ie=R.target.files)==null?void 0:ie[0];if(T){try{const Ce=(await T.text()).split(`
`),Fe=[];Fe.push("#BlackLevel: 0,0,0,0"),Fe.push("#ImageHeight: 0"),Fe.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let Ie=1;for(let dt=0;dt<Ce.length;dt++){const Nt=Ce[dt].trim();if(!Nt||Nt.includes("R_mean")||Nt.includes("R_std"))continue;const oe=Nt.split(/\s+/).map(Number);if(oe.length<8||oe.some(isNaN))continue;const qe=[Ie,1,oe[0],oe[2],oe[6],oe[4],oe[1],oe[3],oe[7],oe[5]].join(",");Fe.push(qe),Ie++}const xe=new Blob([Fe.join(`
`)],{type:"text/csv"}),yt=URL.createObjectURL(xe),ke=document.createElement("a");ke.href=yt,ke.download=T.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(yt)}catch(ve){console.error("Conversion failed",ve),alert("Failed to convert file.")}R.target.value=""}},On=R=>{R.target.files&&R.target.files[0]&&(Qe(R.target.files[0]),_==null||_("fft load a"))},pc=R=>{R.target.files&&R.target.files[0]&&(Ct(R.target.files[0]),_==null||_("fft load b"))},aa=()=>{Ee&&Be&&S&&(S(Ee,Be,ur,We),_==null||_("fft run"))},gc=R=>{R.target.files&&R.target.files.length>0&&k&&(k(R.target.files),_==null||_("fft batch")),R.target.value=""},Vn=R=>{R.target.files&&R.target.files.length>0&&w&&(w(R.target.files),_==null||_("fft stack")),R.target.value=""},mc=()=>{ue&&(ue({useNR:Ur,useDeshading:wa}),_==null||_("batch compute"))},G=$t.trim()!==""&&Ye.trim()!==""&&St.trim()!=="",re=r.renderMode==="advanced-zero-dep";return c.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[P&&c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[c.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),c.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),X&&!M&&c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),c.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),M&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),c.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),A&&c.jsx(Is,{title:"SFR Lab Tools (Scalar Unmixing)",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),c.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),re&&c.jsxs("div",{className:"border-t border-orange-200 dark:border-orange-800 pt-3",children:[c.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>Gn(!on),children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase",children:" (Batch Ops)"}),c.jsx("svg",{className:`w-4 h-4 text-orange-500 transition-transform ${on?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),on&&c.jsxs("div",{className:"mt-3 space-y-3 bg-white/50 dark:bg-black/20 p-2 rounded animate-in slide-in-from-top-1",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Manual Mark)"}),J!==void 0&&J>0&&c.jsxs("span",{className:"text-[9px] text-orange-500 font-bold",children:[J," Selected"]})]}),c.jsx("button",{onClick:F,className:`w-full py-2 font-bold text-xs rounded shadow transition-all ${K?"bg-orange-600 hover:bg-orange-500 text-white ring-2 ring-orange-300":"bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:K?"Stop Marking (Active)":"Start Batch Marking"}),K&&c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:"Hold Shift + Drag on canvas to add multiple ROIs."}),c.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Ur,onChange:R=>Un(R.target.checked),className:"rounded text-orange-500"}),"Jiang Official NR"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:wa,onChange:R=>Ua(R.target.checked),className:"rounded text-purple-500"}),"Deshading"]})]}),c.jsxs("button",{onClick:mc,disabled:!J,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold text-xs rounded shadow transition-transform active:scale-95",children:["Calculate & Copy (",J||0,")"]}),c.jsx("button",{onClick:ee,disabled:!J,className:"w-full py-1.5 bg-gray-200 dark:bg-slate-700 hover:bg-red-100 hover:text-red-600 text-[10px] font-bold rounded transition-colors disabled:opacity-50",children:"Clear All Marks"})]}),c.jsx("div",{className:"h-px bg-gray-300 dark:bg-slate-600 w-full"}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Standard Chart)"}),c.jsx("button",{onClick:fe,disabled:!!Q&&Q>0,className:`w-full py-2 border font-bold text-xs rounded transition-all ${Q&&Q>0?"bg-emerald-600 text-white border-emerald-500 animate-pulse":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:Q&&Q>0?`Click ${Q===1?"TL":Q===2?"TR":Q===3?"BL":"BR"}`:"Start Calibration (4-Pts)"}),!!Q&&Q>0&&c.jsx("p",{className:"text-[9px] text-emerald-600 dark:text-emerald-400 font-bold text-center",children:"Click corners: TopLeft  TopRight  BottomLeft  BottomRight"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsx(og,{checked:It,onChange:rr,label:" (Scalar Unmixing)"}),It&&c.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[c.jsx("div",{className:"col-span-1",children:"Param"}),c.jsx("div",{className:"text-center",children:"Ch0(R)"}),c.jsx("div",{className:"text-center",children:"Ch1(G1)"}),c.jsx("div",{className:"text-center",children:"Ch2(B)"}),c.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),c.jsx("input",{type:"text",value:$t,onChange:R=>wt(R.target.value),placeholder:"0 0 0 0",className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Ye,onChange:R=>kt(R.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:Do,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:St,onChange:R=>qt(R.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:hc,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsx("button",{onClick:Fi,disabled:!W||!G,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed",children:"RUN UNMIXING (ADV ZERO-DEP)"}),c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),b&&c.jsx(Is,{title:"FFT Lab (Noise Profile)",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:cr,className:"hidden",onChange:On,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var R;return(R=cr.current)==null?void 0:R.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${Ee?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:Ee?`A: ${Ee.name}`:"Load Image A"}),c.jsx("input",{type:"file",ref:rt,className:"hidden",onChange:pc,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var R;return(R=rt.current)==null?void 0:R.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${Be?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:Be?`B: ${Be.name}`:"Load Image B"})]}),c.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:We,onChange:R=>ut(R.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:aa,disabled:!Ee||!Be,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),c.jsx("input",{type:"file",ref:le,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:gc}),c.jsx("button",{onClick:()=>{var R;return(R=le.current)==null?void 0:R.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:Oe,className:"hidden",multiple:!0,onChange:Vn,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var R;return(R=Oe.current)==null?void 0:R.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),c.jsx("div",{className:"flex flex-col gap-2 pt-2",children:c.jsx("button",{onClick:()=>{C==null||C(),_==null||_("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"})})]})}),s&&c.jsx(Is,{title:"DR Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>{f==null||f(),_==null||_("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),h&&d!==void 0&&c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),c.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:R=>h(parseInt(R.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),c.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),y&&x&&p!==void 0&&m!==void 0&&c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:"Layout:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"1",max:"50",value:p,onChange:R=>y(Math.max(1,parseInt(R.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),c.jsx("span",{className:"text-xs text-gray-400",children:"x"}),c.jsx("input",{type:"number",min:"1",max:"50",value:m,onChange:R=>x(Math.max(1,parseInt(R.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>{u==null||u(),_==null||_("mark")},disabled:!W||l!==void 0&&l>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${W?l&&l>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l>0?"Marking Active...":"Mark Corners"}),v&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",ref:ft,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Wa}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>an(!Tr),disabled:!g,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),Tr&&c.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var R;Er("single"),(R=ft.current)==null||R.click()},children:"1. Independent Frames"}),c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var R;Er("pair"),(R=ft.current)==null||R.click()},children:"2. Pair Difference (A-B)"})]})]})]}),c.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("input",{type:"file",ref:Pt,className:"hidden",accept:".txt",onChange:fi}),c.jsx("button",{onClick:()=>{var R;return(R=Pt.current)==null?void 0:R.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),l!==void 0&&l>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[l===1&&"Click Top-Left Center",l===2&&"Click Top-Right Center",l===3&&"Click Bottom-Left Center",l===4&&"Click Bottom-Right Center"]})})]})]})}),D&&c.jsx(Is,{title:"Color Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),c.jsx("button",{onClick:()=>{B==null||B(),_==null||_("cl mark")},disabled:!W||I!==void 0&&I>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${W?I&&I>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:I&&I>0?"Marking Active...":"Mark 24-Patch Chart"}),I!==void 0&&I>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[I===1&&"Click Top-Left (Brown)",I===2&&"Click Top-Right (Cyanish)",I===3&&"Click Bottom-Left (White)",I===4&&"Click Bottom-Right (Black)"]})})]})}),c.jsx(Is,{title:"Selection Tools",children:c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),c.jsx("input",{type:"number",min:"1",value:tt,onChange:R=>Yt(R.target.value),disabled:!W,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:$o,disabled:!W,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),c.jsx("button",{onClick:Sa,disabled:!W,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),c.jsx(Is,{title:"Display Controls",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",c.jsx("b",{children:"Apply"}),"."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!W,value:parseFloat(ce)||0,onChange:R=>sn(R.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{id:"exposure",type:"number",step:"0.1",value:ce,onChange:R=>sn(R.target.value),disabled:!W,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),se&&c.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[c.jsx(og,{checked:!!M,onChange:R=>{O&&O(R),_==null||_(`xtrans ${R?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),M&&N&&$&&c.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:N.x,onChange:R=>{const T=Math.min(5,Math.max(0,parseInt(R.target.value)||0));$({x:T}),_==null||_(`xtrans phase ${T} ${N.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:N.y,onChange:R=>{const T=Math.min(5,Math.max(0,parseInt(R.target.value)||0));$({y:T}),_==null||_(`xtrans phase ${N.x} ${T}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),c.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx(og,{checked:gt,onChange:sr,label:"Show k"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),c.jsxs("div",{children:[c.jsxs("button",{onClick:ui,disabled:!W||!E,className:"w-full mb-3 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded shadow-sm transition-all active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",title:"Calculate Gains to make the selected area neutral gray, accounting for Color Matrix",children:[c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Spot WB (Matrix-Aware)"]}),c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),c.jsx("input",{type:"number",step:"0.01",value:me,onChange:R=>Bi(R.target.value),disabled:!W,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),c.jsx("input",{type:"number",step:"0.01",value:Ae,onChange:R=>ra(R.target.value),disabled:!W,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",c.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),c.jsx("button",{onClick:()=>Gr(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[c.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),c.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${Je?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>tr(!Je),children:c.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${Je?"translate-x-4":"translate-x-0"}`})})]})]}),c.jsx("input",{type:"text",value:te,onChange:R=>ge(R.target.value),disabled:!W,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[c.jsx("span",{children:"Custom Color Matrix"}),c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:R=>{const T=Jd[R.target.value];T&&Z(T),R.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),lr.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsx("textarea",{id:"customMatrix",value:pe,onChange:Eo,disabled:!W,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[c.jsx("button",{onClick:Wn,disabled:!W,className:"w-full text-sm font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-4 rounded-xl flex items-center justify-center border-2 border-slate-500 shadow-lg",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:c.jsxs("span",{className:"text-center leading-tight",children:["Apply Settings/Render",c.jsx("br",{}),c.jsx("span",{className:"text-xs font-normal opacity-90",children:"CM"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>Zt(!0),disabled:!W,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed py-3 px-2 rounded-lg transition-all active:scale-95 border border-gray-700",children:["",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] font-normal opacity-75",children:""})]}),c.jsx("button",{onClick:()=>U==null?void 0:U(),disabled:!W,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-all py-3 rounded-lg flex items-center justify-center border border-gray-700 active:scale-95",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:"Generate 16bit DNG"})]}),c.jsx("div",{className:"text-center pt-1",children:c.jsx("button",{onClick:Es,disabled:!W,className:"text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors underline decoration-gray-300 hover:decoration-gray-600 underline-offset-2",children:"Reset Defaults (Local)"})})]})]})})]}),c.jsx(yo,{isOpen:wr,onClose:()=>Gr(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),Gr(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[c.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("p",{className:"leading-relaxed",children:["Autofills. If no result is found or it's wrong or not precise enough, please check the ",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame(close the lens cap) with the same ISO/speed setting to calculate the average (using jiangtherapee) and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),c.jsx(yo,{isOpen:jt,onClose:()=>Ar(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>na("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),c.jsxs("button",{onClick:()=>na("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),c.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),c.jsx(yo,{isOpen:ct,onClose:()=>Zt(!1),onConfirm:()=>{Ca(),Zt(!1)},title:"Official Render Options",confirmText:"Render",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),c.jsx("select",{id:"demosaic-modal",value:Re,onChange:ka,disabled:!W||P||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:J_.map(R=>c.jsx("option",{value:R.value,children:R.label},R.value))}),P&&c.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&c.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},tA=j.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:l,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:h,onToggleXTrans:p,onXTransPhaseChange:y}=e,[m,x]=j.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[v,g]=j.useState(""),[b,S]=j.useState([]),[k,w]=j.useState(-1),C=j.useRef(null),P=j.useRef(null),O=j.useRef(null),N=j.useRef(null),$=j.useRef(null),M=j.useRef(null),_=j.useRef(null),D=j.useRef(null);j.useRef(null);const I=j.useRef({...n});j.useEffect(()=>{I.current={...n}},[n.exposure,n.demosaicMethod]);const B=j.useRef({fileA:null,fileB:null});j.useLayoutEffect(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},[m]);const A=(F,ee="out")=>{x(ue=>[...ue,{id:Date.now().toString()+Math.random(),type:ee,text:F}])};j.useImperativeHandle(t,()=>({log:(F,ee="in")=>{const ue=ee;let Q=F;ee==="in"&&!F.startsWith(">")&&(Q=`> ${F}`),A(Q,ue)}}));const E=j.useRef(null);j.useEffect(()=>{if(e.roiStats&&e.roiStats!==E.current){const F=e.roiStats,ee=Math.round(F.x),ue=Math.round(F.y),Q=Math.round(F.width),fe=Math.round(F.height);A(`> sel ${ee} ${ue} ${Q} ${fe}`,"in");const W=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],X=c.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[c.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",ee,", ",ue,", ",Q,"x",fe,"]:"]}),c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[c.jsx("div",{children:"Ch"}),c.jsx("div",{className:"text-right",children:"Mean"}),c.jsx("div",{className:"text-right",children:"StdDev"})]}),W.map(se=>c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[c.jsx("div",{className:se.name==="R"?"text-red-500":se.name==="B"?"text-blue-500":"text-green-500",children:se.name}),c.jsx("div",{className:"text-right text-gray-300",children:F.means[se.idx].toFixed(2)}),c.jsx("div",{className:"text-right text-gray-400",children:F.stdDevs[se.idx].toFixed(2)})]},se.name))]});A(X,"out"),E.current=F}},[e.roiStats,e.isBGGR]);const L=F=>{var fe,W,X,se,ce,H,pe;const ee=F.trim().split(/\s+/),ue=ee[0].toLowerCase(),Q=ee.slice(1);switch(ue){case"help":A("Available Commands:","info"),A("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),A("  wb <r> <b>        Set WB Gains","info"),A("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),A("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),A("  matrix <n1..n9>   Set Custom Color Matrix","info"),A("  xtrans <on|off>   Force X-Trans Mode","info"),A("  xtrans phase <x> <y>  Set X-Trans Phase","info"),A("  render            Apply settings & Render","info"),A("  render zero       Zero-Dependency Render","info"),A("  render unmix      Advanced Unmixing Render","info"),A("  sel <full|center> Select ROI","info"),A("  sel <x> <y> <w> <h> Select ROI manually","info"),A("  mark              Start DR Lab Corner Marking","info"),A("  gen test          Generate Test Pattern","info"),A("  fft load <a>      Load FFT Pair Image A","info"),A("  fft load <b>      Load FFT Pair Image B","info"),A("  fft run           Run FFT Pair Diff","info"),A("  cls               Clear Screen","info");break;case"cls":case"clear":x([]);break;case"ev":case"exposure":if(Q.length<1){A(`Current EV: ${I.current.exposure}`,"info");return}const Z=parseFloat(Q[0]);if(isNaN(Z)){A("Invalid EV value","err");return}I.current.exposure=Z,A(`EV set to ${Z} (run 'render' to apply)`);break;case"wb":if(Q.length<2){A("Usage: wb <red_gain> <blue_gain>","err");return}const te=parseFloat(Q[0]),ge=parseFloat(Q[1]);if(isNaN(te)||isNaN(ge)){A("Invalid gains","err");return}I.current.wbGains=[te,ge],A(`WB set to R:${te} B:${ge}`);break;case"bl":case"black":if(Q.length===0){A(`Current BL: ${((fe=I.current.blackLevel)==null?void 0:fe.join(" "))||"Auto"}`,"info");return}let me=Q.map(Number);if(me.some(isNaN)){A("Invalid numbers","err");return}if(me.length===1&&(me=[me[0],me[0],me[0],me[0]]),me.length<4){A("Need 1 or 4 values","err");return}I.current.blackLevel=[me[0],me[1],me[2],me[3]],I.current.subtractBlackLevelFromStats=!0,I.current.showKadc=!0,A(`Black Level set: ${me.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if(Q.length===0){A("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const He=parseInt(Q[0]);if(isNaN(He)){A("Invalid method ID","err");return}I.current.demosaicMethod=He,A(`Demosaic set to ID ${He}`);break;case"matrix":if(Q.length!==9){A("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const Ae=Q.map(Number);if(Ae.some(isNaN)){A("Invalid matrix values","err");return}I.current.customMatrix=Ae,A("Custom Color Matrix set.");break;case"xtrans":if(Q[0]==="on"||Q[0]==="true")p?(p(!0),A("X-Trans conversion ON")):A("Feature not available","err");else if(Q[0]==="off"||Q[0]==="false")p?(p(!1),A("X-Trans conversion OFF")):A("Feature not available","err");else if(Q[0]==="phase"){if(Q.length<3){A("Usage: xtrans phase <x> <y>","err");return}const _e=parseInt(Q[1]),Re=parseInt(Q[2]);y&&(y({x:_e,y:Re}),A(`X-Trans Phase set to (${_e}, ${Re})`))}else A("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if(Q[0]==="zero"){const _e=Q[1]==="color"?"zero-dep-color":"zero-dependency";I.current.renderMode=_e,A(`Rendering Zero-Dependency (${_e})...`)}else if(Q[0]==="unmix"){if(Q.length<13){A("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const _e=Q.slice(1).map(Number);if(_e.some(isNaN)){A("Invalid params","err");return}I.current.renderMode="advanced-zero-dep",I.current.advancedZeroDep={bl:[_e[0],_e[1],_e[2],_e[3]],bg:[_e[4],_e[5],_e[6],_e[7]],fg:[_e[8],_e[9],_e[10],_e[11]]},A("Rendering Advanced Unmix...")}else I.current.renderMode="standard",A("Rendering Standard Pipeline...");a({...I.current});break;case"sel":case"select":if(!r||!i){A("No image loaded","err");return}if(Q[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if(Q[0]==="center"){const _e=parseInt(Q[1])||64,Re=Math.floor((r.width-_e)/2),lt=Math.floor((r.height-_e)/2);i({x:Re,y:lt,w:_e,h:_e})}else if(Q.length===4){const[_e,Re,lt,gt]=Q.map(Number);if([_e,Re,lt,gt].some(isNaN)){A("Invalid coordinates","err");return}i({x:_e,y:Re,w:lt,h:gt})}else A("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),A("Interactive marking started. Click 4 corners on canvas."));break;case"gen":(Q[0]==="test"||Q[0]==="pattern")&&s&&(s(),A("Generated Test Pattern"));break;case"drlab":if(Q[0]==="config"){const[_e,Re,lt]=Q.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(_e||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(Re||10),e.onDrGridColsChange&&e.onDrGridColsChange(lt||10),A(`DR Grid Configured: Size=${_e}, Grid=${Re}x${lt}`)}else Q[0]==="batch"&&(Q[1]==="pair"?(A("Select file pairs for DR Lab..."),(W=N.current)==null||W.click()):(A("Select single files for DR Lab..."),(X=O.current)==null||X.click()));break;case"fft":Q[0]==="load"?Q[1]==="a"?(se=$.current)==null||se.click():Q[1]==="b"?(ce=M.current)==null||ce.click():A("Usage: fft load <a|b>","err"):Q[0]==="run"?B.current.fileA&&B.current.fileB&&u?(A(`Processing Pair: ${B.current.fileA.name} - ${B.current.fileB.name}`),u(B.current.fileA,B.current.fileB,!1,!0)):A("Load both A and B first","err"):Q[0]==="stack"?(A("Select files for Stack FFT..."),(H=_.current)==null||H.click()):Q[0]==="batch"&&(A("Select files for Batch Diff...","info"),(pe=D.current)==null||pe.click());break;case"crosscalc":h&&(h(),A("Opened Cross-Calculator"));break;default:A(`Unknown command: ${ue}`,"err")}},U=F=>{if(F.key==="Enter"){const ee=v.trim();if(!ee)return;A(`> ${ee}`,"in"),ee.split(";").forEach(Q=>{Q.trim()&&L(Q.trim())}),S(Q=>[...Q,ee]),w(-1),g("")}else if(F.key==="ArrowUp"){if(F.preventDefault(),b.length>0){const ee=k===-1?b.length-1:Math.max(0,k-1);w(ee),g(b[ee])}}else if(F.key==="ArrowDown")if(F.preventDefault(),k!==-1){const ee=Math.min(b.length-1,k+1);w(ee),g(b[ee])}else g("")},J=(F,ee)=>{F.target.files&&F.target.files.length>0&&l&&(A(`Batch processing ${F.target.files.length} files in ${ee} mode...`),l(F.target.files,ee)),F.target.value=""},K=(F,ee)=>{var Q;const ue=(Q=F.target.files)==null?void 0:Q[0];ue&&(ee==="A"?B.current.fileA=ue:B.current.fileB=ue,A(`Loaded ${ee}: ${ue.name}`)),F.target.value=""};return c.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[c.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[c.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),c.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),c.jsx("div",{ref:C,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:m.map(F=>c.jsxs("div",{className:`mb-1 ${F.type==="in"?"opacity-50":""} ${F.type==="err"?"text-red-500":""} ${F.type==="info"?"text-cyan-400":""}`,children:[F.type!=="in"&&typeof F.text=="string"&&!F.text.startsWith(">")&&c.jsx("span",{className:"mr-2 opacity-50",children:">"}),F.text]},F.id))}),c.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[c.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),c.jsx("input",{ref:P,type:"text",value:v,onChange:F=>g(F.target.value),onKeyDown:U,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),c.jsx("input",{type:"file",ref:O,className:"hidden",multiple:!0,onChange:F=>J(F,"single")}),c.jsx("input",{type:"file",ref:N,className:"hidden",multiple:!0,onChange:F=>J(F,"pair")}),c.jsx("input",{type:"file",ref:$,className:"hidden",onChange:F=>K(F,"A")}),c.jsx("input",{type:"file",ref:M,className:"hidden",onChange:F=>K(F,"B")}),c.jsx("input",{type:"file",ref:_,className:"hidden",multiple:!0,onChange:F=>{e.onProcessStackFft&&F.target.files&&(A(`Loading ${F.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(F.target.files)),F.target.value=""}}),c.jsx("input",{type:"file",ref:D,className:"hidden",multiple:!0,onChange:F=>{e.onProcessBatchDiff&&F.target.files&&(A("Starting Batch Diff..."),e.onProcessBatchDiff(F.target.files)),F.target.value=""}})]})}),rA=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d.some(h=>h>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},nA=e=>{const[t,r]=j.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,l=j.useRef(null),u=j.useRef(!1),f=j.useRef(null);j.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),j.useEffect(()=>{var h;if(i&&n&&!u.current){u.current=!0;const p=rA(n,a),y=p&&p.some(m=>m>0);if(p&&y){console.log("[AutoApply] Detected Black Levels via Bridge:",p),(h=l.current)==null||h.log(`Auto-detected BL: ${p.join(" ")}`,"info");const m={...o,blackLevel:p,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};s(m)}}},[i,n,a,o,s]);const d=h=>{l.current&&l.current.log(h,"in")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[c.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),c.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),c.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[c.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:c.jsx(eA,{...e,onCommand:d})}),c.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:c.jsx(tA,{...e,ref:l})})]})]})},aA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),iA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),oA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),sA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),lA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Im=.1,Lm=16,cA=Math.log(Im),uA=Math.log(Lm),fA=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Im,Math.min(Lm,d)))},o=()=>{t(Math.min(Lm,e*1.25))},s=()=>{t(Math.max(Im,e/1.25))},l=Math.log(e);return c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[c.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:c.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?c.jsx(lA,{}):c.jsx(sA,{})})}),c.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[c.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:c.jsx(aA,{})}),c.jsx("input",{type:"range",min:cA,max:uA,step:"0.01",value:l,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),c.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:c.jsx(iA,{})}),c.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),c.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:c.jsx(oA,{})})]})]})},dA=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return c.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function E3(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=E3(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=E3(e))&&(n&&(n+=" "),n+=t);return n}var hA=Array.isArray,zn=hA,pA=typeof Tf=="object"&&Tf&&Tf.Object===Object&&Tf,$3=pA,gA=$3,mA=typeof self=="object"&&self&&self.Object===Object&&self,yA=gA||mA||Function("return this")(),ci=yA,vA=ci,xA=vA.Symbol,xf=xA,c2=xf,D3=Object.prototype,bA=D3.hasOwnProperty,wA=D3.toString,$c=c2?c2.toStringTag:void 0;function kA(e){var t=bA.call(e,$c),r=e[$c];try{e[$c]=void 0;var n=!0}catch{}var a=wA.call(e);return n&&(t?e[$c]=r:delete e[$c]),a}var SA=kA,jA=Object.prototype,CA=jA.toString;function PA(e){return CA.call(e)}var NA=PA,u2=xf,OA=SA,MA=NA,_A="[object Null]",AA="[object Undefined]",f2=u2?u2.toStringTag:void 0;function TA(e){return e==null?e===void 0?AA:_A:f2&&f2 in Object(e)?OA(e):MA(e)}var Ri=TA;function EA(e){return e!=null&&typeof e=="object"}var Ii=EA,$A=Ri,DA=Ii,RA="[object Symbol]";function IA(e){return typeof e=="symbol"||DA(e)&&$A(e)==RA}var Ql=IA,LA=zn,BA=Ql,FA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zA=/^\w*$/;function GA(e,t){if(LA(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||BA(e)?!0:zA.test(e)||!FA.test(e)||t!=null&&e in Object(t)}var bx=GA;function UA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var No=UA;const Jl=Rt(No);var WA=Ri,VA=No,HA="[object AsyncFunction]",XA="[object Function]",KA="[object GeneratorFunction]",YA="[object Proxy]";function qA(e){if(!VA(e))return!1;var t=WA(e);return t==XA||t==KA||t==HA||t==YA}var wx=qA;const Ze=Rt(wx);var ZA=ci,QA=ZA["__core-js_shared__"],JA=QA,lg=JA,d2=function(){var e=/[^.]+$/.exec(lg&&lg.keys&&lg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function e6(e){return!!d2&&d2 in e}var t6=e6,r6=Function.prototype,n6=r6.toString;function a6(e){if(e!=null){try{return n6.call(e)}catch{}try{return e+""}catch{}}return""}var R3=a6,i6=wx,o6=t6,s6=No,l6=R3,c6=/[\\^$.*+?()[\]{}|]/g,u6=/^\[object .+?Constructor\]$/,f6=Function.prototype,d6=Object.prototype,h6=f6.toString,p6=d6.hasOwnProperty,g6=RegExp("^"+h6.call(p6).replace(c6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m6(e){if(!s6(e)||o6(e))return!1;var t=i6(e)?g6:u6;return t.test(l6(e))}var y6=m6;function v6(e,t){return e==null?void 0:e[t]}var x6=v6,b6=y6,w6=x6;function k6(e,t){var r=w6(e,t);return b6(r)?r:void 0}var Os=k6,S6=Os,j6=S6(Object,"create"),Eh=j6,h2=Eh;function C6(){this.__data__=h2?h2(null):{},this.size=0}var P6=C6;function N6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var O6=N6,M6=Eh,_6="__lodash_hash_undefined__",A6=Object.prototype,T6=A6.hasOwnProperty;function E6(e){var t=this.__data__;if(M6){var r=t[e];return r===_6?void 0:r}return T6.call(t,e)?t[e]:void 0}var $6=E6,D6=Eh,R6=Object.prototype,I6=R6.hasOwnProperty;function L6(e){var t=this.__data__;return D6?t[e]!==void 0:I6.call(t,e)}var B6=L6,F6=Eh,z6="__lodash_hash_undefined__";function G6(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=F6&&t===void 0?z6:t,this}var U6=G6,W6=P6,V6=O6,H6=$6,X6=B6,K6=U6;function ec(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ec.prototype.clear=W6;ec.prototype.delete=V6;ec.prototype.get=H6;ec.prototype.has=X6;ec.prototype.set=K6;var Y6=ec;function q6(){this.__data__=[],this.size=0}var Z6=q6;function Q6(e,t){return e===t||e!==e&&t!==t}var kx=Q6,J6=kx;function e8(e,t){for(var r=e.length;r--;)if(J6(e[r][0],t))return r;return-1}var $h=e8,t8=$h,r8=Array.prototype,n8=r8.splice;function a8(e){var t=this.__data__,r=t8(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():n8.call(t,r,1),--this.size,!0}var i8=a8,o8=$h;function s8(e){var t=this.__data__,r=o8(t,e);return r<0?void 0:t[r][1]}var l8=s8,c8=$h;function u8(e){return c8(this.__data__,e)>-1}var f8=u8,d8=$h;function h8(e,t){var r=this.__data__,n=d8(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var p8=h8,g8=Z6,m8=i8,y8=l8,v8=f8,x8=p8;function tc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}tc.prototype.clear=g8;tc.prototype.delete=m8;tc.prototype.get=y8;tc.prototype.has=v8;tc.prototype.set=x8;var Dh=tc,b8=Os,w8=ci,k8=b8(w8,"Map"),Sx=k8,p2=Y6,S8=Dh,j8=Sx;function C8(){this.size=0,this.__data__={hash:new p2,map:new(j8||S8),string:new p2}}var P8=C8;function N8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var O8=N8,M8=O8;function _8(e,t){var r=e.__data__;return M8(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Rh=_8,A8=Rh;function T8(e){var t=A8(this,e).delete(e);return this.size-=t?1:0,t}var E8=T8,$8=Rh;function D8(e){return $8(this,e).get(e)}var R8=D8,I8=Rh;function L8(e){return I8(this,e).has(e)}var B8=L8,F8=Rh;function z8(e,t){var r=F8(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var G8=z8,U8=P8,W8=E8,V8=R8,H8=B8,X8=G8;function rc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}rc.prototype.clear=U8;rc.prototype.delete=W8;rc.prototype.get=V8;rc.prototype.has=H8;rc.prototype.set=X8;var jx=rc,I3=jx,K8="Expected a function";function Cx(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(K8);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Cx.Cache||I3),r}Cx.Cache=I3;var L3=Cx;const Y8=Rt(L3);var q8=L3,Z8=500;function Q8(e){var t=q8(e,function(n){return r.size===Z8&&r.clear(),n}),r=t.cache;return t}var J8=Q8,eT=J8,tT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rT=/\\(\\)?/g,nT=eT(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(tT,function(r,n,a,i){t.push(a?i.replace(rT,"$1"):n||r)}),t}),aT=nT;function iT(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Px=iT,g2=xf,oT=Px,sT=zn,lT=Ql,m2=g2?g2.prototype:void 0,y2=m2?m2.toString:void 0;function B3(e){if(typeof e=="string")return e;if(sT(e))return oT(e,B3)+"";if(lT(e))return y2?y2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var cT=B3,uT=cT;function fT(e){return e==null?"":uT(e)}var F3=fT,dT=zn,hT=bx,pT=aT,gT=F3;function mT(e,t){return dT(e)?e:hT(e,t)?[e]:pT(gT(e))}var z3=mT,yT=Ql;function vT(e){if(typeof e=="string"||yT(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ih=vT,xT=z3,bT=Ih;function wT(e,t){t=xT(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[bT(t[r++])];return r&&r==n?e:void 0}var Nx=wT,kT=Nx;function ST(e,t,r){var n=e==null?void 0:kT(e,t);return n===void 0?r:n}var G3=ST;const ga=Rt(G3);function jT(e){return e==null}var CT=jT;const Xe=Rt(CT);var PT=Ri,NT=zn,OT=Ii,MT="[object String]";function _T(e){return typeof e=="string"||!NT(e)&&OT(e)&&PT(e)==MT}var AT=_T;const vs=Rt(AT);var U3={exports:{}},Tt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox=Symbol.for("react.element"),Mx=Symbol.for("react.portal"),Lh=Symbol.for("react.fragment"),Bh=Symbol.for("react.strict_mode"),Fh=Symbol.for("react.profiler"),zh=Symbol.for("react.provider"),Gh=Symbol.for("react.context"),TT=Symbol.for("react.server_context"),Uh=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),Vh=Symbol.for("react.suspense_list"),Hh=Symbol.for("react.memo"),Xh=Symbol.for("react.lazy"),ET=Symbol.for("react.offscreen"),W3;W3=Symbol.for("react.module.reference");function xa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ox:switch(e=e.type,e){case Lh:case Fh:case Bh:case Wh:case Vh:return e;default:switch(e=e&&e.$$typeof,e){case TT:case Gh:case Uh:case Xh:case Hh:case zh:return e;default:return t}}case Mx:return t}}}Tt.ContextConsumer=Gh;Tt.ContextProvider=zh;Tt.Element=Ox;Tt.ForwardRef=Uh;Tt.Fragment=Lh;Tt.Lazy=Xh;Tt.Memo=Hh;Tt.Portal=Mx;Tt.Profiler=Fh;Tt.StrictMode=Bh;Tt.Suspense=Wh;Tt.SuspenseList=Vh;Tt.isAsyncMode=function(){return!1};Tt.isConcurrentMode=function(){return!1};Tt.isContextConsumer=function(e){return xa(e)===Gh};Tt.isContextProvider=function(e){return xa(e)===zh};Tt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ox};Tt.isForwardRef=function(e){return xa(e)===Uh};Tt.isFragment=function(e){return xa(e)===Lh};Tt.isLazy=function(e){return xa(e)===Xh};Tt.isMemo=function(e){return xa(e)===Hh};Tt.isPortal=function(e){return xa(e)===Mx};Tt.isProfiler=function(e){return xa(e)===Fh};Tt.isStrictMode=function(e){return xa(e)===Bh};Tt.isSuspense=function(e){return xa(e)===Wh};Tt.isSuspenseList=function(e){return xa(e)===Vh};Tt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Lh||e===Fh||e===Bh||e===Wh||e===Vh||e===ET||typeof e=="object"&&e!==null&&(e.$$typeof===Xh||e.$$typeof===Hh||e.$$typeof===zh||e.$$typeof===Gh||e.$$typeof===Uh||e.$$typeof===W3||e.getModuleId!==void 0)};Tt.typeOf=xa;U3.exports=Tt;var $T=U3.exports,DT=Ri,RT=Ii,IT="[object Number]";function LT(e){return typeof e=="number"||RT(e)&&DT(e)==IT}var V3=LT;const BT=Rt(V3);var FT=V3;function zT(e){return FT(e)&&e!=+e}var GT=zT;const nc=Rt(GT);var Ra=function(t){return t===0?0:t>0?1:-1},Qo=function(t){return vs(t)&&t.indexOf("%")===t.length-1},he=function(t){return BT(t)&&!nc(t)},UT=function(t){return Xe(t)},Br=function(t){return he(t)||vs(t)},WT=0,Ms=function(t){var r=++WT;return"".concat(t||"").concat(r)},xs=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!he(t)&&!vs(t))return n;var i;if(Qo(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return nc(i)&&(i=n),a&&i>r&&(i=r),i},Zi=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},VT=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},xr=function(t,r){return he(t)&&he(r)?function(n){return t+n*(r-t)}:function(){return r}};function l0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ga(n,t))===r})}var HT=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,l=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:l,a:h,b:(a-h*n)/r}},XT=function(t,r){return he(t)&&he(r)?t-r:vs(t)&&vs(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function ul(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}var KT=["viewBox","children"],YT=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],v2=["points","pathLength"],cg={svg:KT,polygon:v2,polyline:v2},_x=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],c0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),!Jl(n))return null;var a={};return Object.keys(n).forEach(function(i){_x.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},qT=function(t,r,n){return function(a){return t(r,n,a),null}},Au=function(t,r,n){if(!Jl(t)||Bm(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];_x.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=qT(o,r,n))}),a},ZT=["children"],QT=["children"];function x2(e,t){if(e==null)return{};var r=JT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}var b2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ji=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},w2=null,ug=null,Ax=function e(t){if(t===w2&&Array.isArray(ug))return ug;var r=[];return j.Children.forEach(t,function(n){Xe(n)||($T.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),ug=r,w2=t,r};function Ln(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return ji(a)}):n=[ji(t)],Ax(e).forEach(function(a){var i=ga(a,"type.displayName")||ga(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Yn(e,t){var r=Ln(e,t);return r&&r[0]}var k2=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!he(n)||n<=0||!he(a)||a<=0)},eE=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],tE=function(t){return t&&t.type&&vs(t.type)&&eE.indexOf(t.type)>=0},H3=function(t){return t&&Fm(t)==="object"&&"clipDot"in t},rE=function(t,r,n,a){var i,o=(i=cg==null?void 0:cg[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Ze(t)&&(a&&o.includes(r)||YT.includes(r))||n&&_x.includes(r)},Ke=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!Jl(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;rE((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},zm=function e(t,r){if(t===r)return!0;var n=j.Children.count(t);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return S2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!S2(i,o))return!1}return!0},S2=function(t,r){if(Xe(t)&&Xe(r))return!0;if(!Xe(t)&&!Xe(r)){var n=t.props||{},a=n.children,i=x2(n,ZT),o=r.props||{},s=o.children,l=x2(o,QT);return a&&s?ul(i,l)&&zm(a,s):!a&&!s?ul(i,l):!1}return!1},j2=function(t,r){var n=[],a={};return Ax(t).forEach(function(i,o){if(tE(i))n.push(i);else if(i){var s=ji(i.type),l=r[s]||{},u=l.handler,f=l.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},nE=function(t){var r=t&&t.type;return r&&b2[r]?b2[r]:null},aE=function(t,r){return Ax(r).indexOf(t)},iE=["children","width","height","viewBox","className","style","title","desc"];function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gm.apply(this,arguments)}function oE(e,t){if(e==null)return{};var r=sE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Um(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,u=oE(e,iE),f=a||{width:r,height:n,x:0,y:0},d=ot("recharts-surface",i);return z.createElement("svg",Gm({},Ke(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),z.createElement("title",null,s),z.createElement("desc",null,l),t)}var lE=["children","className"];function Wm(){return Wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wm.apply(this,arguments)}function cE(e,t){if(e==null)return{};var r=uE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var bt=z.forwardRef(function(e,t){var r=e.children,n=e.className,a=cE(e,lE),i=ot("recharts-layer",n);return z.createElement("g",Wm({className:i},Ke(a,!0),{ref:t}),r)}),Ci=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function fE(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var dE=fE,hE=dE;function pE(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:hE(e,t,r)}var gE=pE,mE="\\ud800-\\udfff",yE="\\u0300-\\u036f",vE="\\ufe20-\\ufe2f",xE="\\u20d0-\\u20ff",bE=yE+vE+xE,wE="\\ufe0e\\ufe0f",kE="\\u200d",SE=RegExp("["+kE+mE+bE+wE+"]");function jE(e){return SE.test(e)}var X3=jE;function CE(e){return e.split("")}var PE=CE,K3="\\ud800-\\udfff",NE="\\u0300-\\u036f",OE="\\ufe20-\\ufe2f",ME="\\u20d0-\\u20ff",_E=NE+OE+ME,AE="\\ufe0e\\ufe0f",TE="["+K3+"]",Vm="["+_E+"]",Hm="\\ud83c[\\udffb-\\udfff]",EE="(?:"+Vm+"|"+Hm+")",Y3="[^"+K3+"]",q3="(?:\\ud83c[\\udde6-\\uddff]){2}",Z3="[\\ud800-\\udbff][\\udc00-\\udfff]",$E="\\u200d",Q3=EE+"?",J3="["+AE+"]?",DE="(?:"+$E+"(?:"+[Y3,q3,Z3].join("|")+")"+J3+Q3+")*",RE=J3+Q3+DE,IE="(?:"+[Y3+Vm+"?",Vm,q3,Z3,TE].join("|")+")",LE=RegExp(Hm+"(?="+Hm+")|"+IE+RE,"g");function BE(e){return e.match(LE)||[]}var FE=BE,zE=PE,GE=X3,UE=FE;function WE(e){return GE(e)?UE(e):zE(e)}var VE=WE,HE=gE,XE=X3,KE=VE,YE=F3;function qE(e){return function(t){t=YE(t);var r=XE(t)?KE(t):void 0,n=r?r[0]:t.charAt(0),a=r?HE(r,1).join(""):t.slice(1);return n[e]()+a}}var ZE=qE,QE=ZE,JE=QE("toUpperCase"),e7=JE;const Kh=Rt(e7);function zt(e){return function(){return e}}const ej=Math.cos,u0=Math.sin,Ga=Math.sqrt,f0=Math.PI,Yh=2*f0,Xm=Math.PI,Km=2*Xm,Uo=1e-6,t7=Km-Uo;function tj(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function r7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tj;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class n7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tj:r7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,f=o-t,d=s-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Uo)if(!(Math.abs(d*l-u*f)>Uo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=a-s,m=l*l+u*u,x=p*p+y*y,v=Math.sqrt(m),g=Math.sqrt(h),b=i*Math.tan((Xm-Math.acos((m+h-x)/(2*v*g)))/2),S=b/g,k=b/v;Math.abs(S-1)>Uo&&this._append`L${t+S*f},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*p>f*y)},${this._x1=t+k*l},${this._y1=r+k*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,f=r+l,d=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Uo||Math.abs(this._y1-f)>Uo)&&this._append`L${u},${f}`,n&&(h<0&&(h=h%Km+Km),h>t7?this._append`A${n},${n},0,1,${d},${t-s},${r-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:h>Uo&&this._append`A${n},${n},0,${+(h>=Xm)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Tx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new n7(t)}function Ex(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rj(e){this._context=e}rj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qh(e){return new rj(e)}function nj(e){return e[0]}function aj(e){return e[1]}function ij(e,t){var r=zt(!0),n=null,a=qh,i=null,o=Tx(s);e=typeof e=="function"?e:e===void 0?nj:zt(e),t=typeof t=="function"?t:t===void 0?aj:zt(t);function s(l){var u,f=(l=Ex(l)).length,d,h=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=f;++u)!(u<f&&r(d=l[u],u,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(d,u,l),+t(d,u,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:zt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:zt(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:zt(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function ed(e,t,r){var n=null,a=zt(!0),i=null,o=qh,s=null,l=Tx(u);e=typeof e=="function"?e:e===void 0?nj:zt(+e),t=typeof t=="function"?t:zt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?aj:zt(+r);function u(d){var h,p,y,m=(d=Ex(d)).length,x,v=!1,g,b=new Array(m),S=new Array(m);for(i==null&&(s=o(g=l())),h=0;h<=m;++h){if(!(h<m&&a(x=d[h],h,d))===v)if(v=!v)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=h-1;y>=p;--y)s.point(b[y],S[y]);s.lineEnd(),s.areaEnd()}v&&(b[h]=+e(x,h,d),S[h]=+t(x,h,d),s.point(n?+n(x,h,d):b[h],r?+r(x,h,d):S[h]))}if(g)return s=null,g+""||null}function f(){return ij().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:zt(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:zt(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:zt(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:zt(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:zt(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:zt(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:zt(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class oj{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function a7(e){return new oj(e,!0)}function i7(e){return new oj(e,!1)}const $x={draw(e,t){const r=Ga(t/f0);e.moveTo(r,0),e.arc(0,0,r,0,Yh)}},o7={draw(e,t){const r=Ga(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},sj=Ga(1/3),s7=sj*2,l7={draw(e,t){const r=Ga(t/s7),n=r*sj;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},c7={draw(e,t){const r=Ga(t),n=-r/2;e.rect(n,n,r,r)}},u7=.8908130915292852,lj=u0(f0/10)/u0(7*f0/10),f7=u0(Yh/10)*lj,d7=-ej(Yh/10)*lj,h7={draw(e,t){const r=Ga(t*u7),n=f7*r,a=d7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Yh*i/5,s=ej(o),l=u0(o);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},fg=Ga(3),p7={draw(e,t){const r=-Ga(t/(fg*3));e.moveTo(0,r*2),e.lineTo(-fg*r,-r),e.lineTo(fg*r,-r),e.closePath()}},ia=-.5,oa=Ga(3)/2,Ym=1/Ga(12),g7=(Ym/2+1)*3,m7={draw(e,t){const r=Ga(t/g7),n=r/2,a=r*Ym,i=n,o=r*Ym+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(ia*n-oa*a,oa*n+ia*a),e.lineTo(ia*i-oa*o,oa*i+ia*o),e.lineTo(ia*s-oa*l,oa*s+ia*l),e.lineTo(ia*n+oa*a,ia*a-oa*n),e.lineTo(ia*i+oa*o,ia*o-oa*i),e.lineTo(ia*s+oa*l,ia*l-oa*s),e.closePath()}};function y7(e,t){let r=null,n=Tx(a);e=typeof e=="function"?e:zt(e||$x),t=typeof t=="function"?t:zt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:zt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:zt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function d0(){}function h0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cj(e){this._context=e}cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v7(e){return new cj(e)}function uj(e){this._context=e}uj.prototype={areaStart:d0,areaEnd:d0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:h0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function x7(e){return new uj(e)}function fj(e){this._context=e}fj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:h0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b7(e){return new fj(e)}function dj(e){this._context=e}dj.prototype={areaStart:d0,areaEnd:d0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function w7(e){return new dj(e)}function C2(e){return e<0?-1:1}function P2(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(C2(i)+C2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function N2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function dg(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function p0(e){this._context=e}p0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dg(this,this._t0,N2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dg(this,N2(this,r=P2(this,e,t)),r);break;default:dg(this,this._t0,r=P2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function hj(e){this._context=new pj(e)}(hj.prototype=Object.create(p0.prototype)).point=function(e,t){p0.prototype.point.call(this,t,e)};function pj(e){this._context=e}pj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function k7(e){return new p0(e)}function S7(e){return new hj(e)}function gj(e){this._context=e}gj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=O2(e),a=O2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function O2(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function j7(e){return new gj(e)}function Zh(e,t){this._context=e,this._t=t}Zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function C7(e){return new Zh(e,.5)}function P7(e){return new Zh(e,0)}function N7(e){return new Zh(e,1)}function wl(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function qm(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function O7(e,t){return e[t]}function M7(e){const t=[];return t.key=e,t}function _7(){var e=zt([]),t=qm,r=wl,n=O7;function a(i){var o=Array.from(e.apply(this,arguments),M7),s,l=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=Ex(t(o));s<l;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:zt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:zt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?qm:typeof i=="function"?i:zt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??wl,a):r},a}function A7(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}wl(e,t)}}function T7(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}wl(e,t)}}function E7(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,y=0;y<s;++y){var m=e[t[y]],x=m[n][1]||0,v=m[n-1][1]||0;p+=x-v}l+=d,u+=p*d}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,wl(e,t)}}function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}var $7=["type","size","sizeType"];function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zm.apply(this,arguments)}function M2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M2(Object(r),!0).forEach(function(n){D7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D7(e,t,r){return t=R7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7(e){var t=I7(e,"string");return Tu(t)=="symbol"?t:t+""}function I7(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L7(e,t){if(e==null)return{};var r=B7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function B7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mj={symbolCircle:$x,symbolCross:o7,symbolDiamond:l7,symbolSquare:c7,symbolStar:h7,symbolTriangle:p7,symbolWye:m7},F7=Math.PI/180,z7=function(t){var r="symbol".concat(Kh(t));return mj[r]||$x},G7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*F7;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},U7=function(t,r){mj["symbol".concat(Kh(t))]=r},Qh=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=L7(t,$7),u=_2(_2({},l),{},{type:n,size:i,sizeType:s}),f=function(){var x=z7(n),v=y7().type(x).size(G7(i,s,n));return v()},d=u.className,h=u.cx,p=u.cy,y=Ke(u,!0);return h===+h&&p===+p&&i===+i?z.createElement("path",Zm({},y,{className:ot("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};Qh.registerSymbol=U7;function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function Qm(){return Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qm.apply(this,arguments)}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(r),!0).forEach(function(n){Eu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vj(n.key),n)}}function X7(e,t,r){return t&&H7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function K7(e,t,r){return t=g0(t),Y7(e,yj()?Reflect.construct(t,r||[],g0(e).constructor):t.apply(e,r))}function Y7(e,t){if(t&&(kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q7(e)}function q7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yj=function(){return!!e})()}function g0(e){return g0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g0(e)}function Z7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jm(e,t)}function Jm(e,t){return Jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jm(e,t)}function Eu(e,t,r){return t=vj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vj(e){var t=Q7(e,"string");return kl(t)=="symbol"?t:t+""}function Q7(e,t){if(kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sa=32,Dx=function(e){function t(){return V7(this,t),K7(this,t,arguments)}return Z7(t,e),X7(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=sa/2,o=sa/6,s=sa/3,l=n.inactive?a:n.color;if(n.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:sa,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(sa,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return z.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(sa/8,"h").concat(sa,"v").concat(sa*3/4,"h").concat(-sa,"z"),className:"recharts-legend-icon"});if(z.isValidElement(n.legendIcon)){var u=W7({},n);return delete u.legendIcon,z.cloneElement(n.legendIcon,u)}return z.createElement(Qh,{fill:l,cx:i,cy:i,size:sa,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:sa,height:sa},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var m=p.formatter||l,x=ot(Eu(Eu({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=Ze(p.value)?null:p.value;Ci(!Ze(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?u:p.color;return z.createElement("li",Qm({className:x,style:d,key:"legend-item-".concat(y)},Au(n.props,p,y)),z.createElement(Um,{width:o,height:o,viewBox:f,style:h},n.renderIcon(p)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},m?m(v,p,y):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(j.PureComponent);Eu(Dx,"displayName","Legend");Eu(Dx,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var J7=Dh;function e9(){this.__data__=new J7,this.size=0}var t9=e9;function r9(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var n9=r9;function a9(e){return this.__data__.get(e)}var i9=a9;function o9(e){return this.__data__.has(e)}var s9=o9,l9=Dh,c9=Sx,u9=jx,f9=200;function d9(e,t){var r=this.__data__;if(r instanceof l9){var n=r.__data__;if(!c9||n.length<f9-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new u9(n)}return r.set(e,t),this.size=r.size,this}var h9=d9,p9=Dh,g9=t9,m9=n9,y9=i9,v9=s9,x9=h9;function ac(e){var t=this.__data__=new p9(e);this.size=t.size}ac.prototype.clear=g9;ac.prototype.delete=m9;ac.prototype.get=y9;ac.prototype.has=v9;ac.prototype.set=x9;var xj=ac,b9="__lodash_hash_undefined__";function w9(e){return this.__data__.set(e,b9),this}var k9=w9;function S9(e){return this.__data__.has(e)}var j9=S9,C9=jx,P9=k9,N9=j9;function m0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new C9;++t<r;)this.add(e[t])}m0.prototype.add=m0.prototype.push=P9;m0.prototype.has=N9;var bj=m0;function O9(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var wj=O9;function M9(e,t){return e.has(t)}var kj=M9,_9=bj,A9=wj,T9=kj,E9=1,$9=2;function D9(e,t,r,n,a,i){var o=r&E9,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=r&$9?new _9:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var y=e[d],m=t[d];if(n)var x=o?n(m,y,d,t,e,i):n(y,m,d,e,t,i);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!A9(t,function(v,g){if(!T9(p,g)&&(y===v||a(y,v,r,n,i)))return p.push(g)})){h=!1;break}}else if(!(y===m||a(y,m,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var Sj=D9,R9=ci,I9=R9.Uint8Array,L9=I9;function B9(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var F9=B9;function z9(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Rx=z9,T2=xf,E2=L9,G9=kx,U9=Sj,W9=F9,V9=Rx,H9=1,X9=2,K9="[object Boolean]",Y9="[object Date]",q9="[object Error]",Z9="[object Map]",Q9="[object Number]",J9="[object RegExp]",e$="[object Set]",t$="[object String]",r$="[object Symbol]",n$="[object ArrayBuffer]",a$="[object DataView]",$2=T2?T2.prototype:void 0,hg=$2?$2.valueOf:void 0;function i$(e,t,r,n,a,i,o){switch(r){case a$:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case n$:return!(e.byteLength!=t.byteLength||!i(new E2(e),new E2(t)));case K9:case Y9:case Q9:return G9(+e,+t);case q9:return e.name==t.name&&e.message==t.message;case J9:case t$:return e==t+"";case Z9:var s=W9;case e$:var l=n&H9;if(s||(s=V9),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=X9,o.set(e,t);var f=U9(s(e),s(t),n,a,i,o);return o.delete(e),f;case r$:if(hg)return hg.call(e)==hg.call(t)}return!1}var o$=i$;function s$(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var jj=s$,l$=jj,c$=zn;function u$(e,t,r){var n=t(e);return c$(e)?n:l$(n,r(e))}var f$=u$;function d$(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var h$=d$;function p$(){return[]}var g$=p$,m$=h$,y$=g$,v$=Object.prototype,x$=v$.propertyIsEnumerable,D2=Object.getOwnPropertySymbols,b$=D2?function(e){return e==null?[]:(e=Object(e),m$(D2(e),function(t){return x$.call(e,t)}))}:y$,w$=b$;function k$(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var S$=k$,j$=Ri,C$=Ii,P$="[object Arguments]";function N$(e){return C$(e)&&j$(e)==P$}var O$=N$,R2=O$,M$=Ii,Cj=Object.prototype,_$=Cj.hasOwnProperty,A$=Cj.propertyIsEnumerable,T$=R2(function(){return arguments}())?R2:function(e){return M$(e)&&_$.call(e,"callee")&&!A$.call(e,"callee")},Ix=T$,y0={exports:{}};function E$(){return!1}var $$=E$;y0.exports;(function(e,t){var r=ci,n=$$,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(y0,y0.exports);var Pj=y0.exports,D$=9007199254740991,R$=/^(?:0|[1-9]\d*)$/;function I$(e,t){var r=typeof e;return t=t??D$,!!t&&(r=="number"||r!="symbol"&&R$.test(e))&&e>-1&&e%1==0&&e<t}var Lx=I$,L$=9007199254740991;function B$(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=L$}var Bx=B$,F$=Ri,z$=Bx,G$=Ii,U$="[object Arguments]",W$="[object Array]",V$="[object Boolean]",H$="[object Date]",X$="[object Error]",K$="[object Function]",Y$="[object Map]",q$="[object Number]",Z$="[object Object]",Q$="[object RegExp]",J$="[object Set]",eD="[object String]",tD="[object WeakMap]",rD="[object ArrayBuffer]",nD="[object DataView]",aD="[object Float32Array]",iD="[object Float64Array]",oD="[object Int8Array]",sD="[object Int16Array]",lD="[object Int32Array]",cD="[object Uint8Array]",uD="[object Uint8ClampedArray]",fD="[object Uint16Array]",dD="[object Uint32Array]",Ht={};Ht[aD]=Ht[iD]=Ht[oD]=Ht[sD]=Ht[lD]=Ht[cD]=Ht[uD]=Ht[fD]=Ht[dD]=!0;Ht[U$]=Ht[W$]=Ht[rD]=Ht[V$]=Ht[nD]=Ht[H$]=Ht[X$]=Ht[K$]=Ht[Y$]=Ht[q$]=Ht[Z$]=Ht[Q$]=Ht[J$]=Ht[eD]=Ht[tD]=!1;function hD(e){return G$(e)&&z$(e.length)&&!!Ht[F$(e)]}var pD=hD;function gD(e){return function(t){return e(t)}}var Nj=gD,v0={exports:{}};v0.exports;(function(e,t){var r=$3,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(v0,v0.exports);var mD=v0.exports,yD=pD,vD=Nj,I2=mD,L2=I2&&I2.isTypedArray,xD=L2?vD(L2):yD,Oj=xD,bD=S$,wD=Ix,kD=zn,SD=Pj,jD=Lx,CD=Oj,PD=Object.prototype,ND=PD.hasOwnProperty;function OD(e,t){var r=kD(e),n=!r&&wD(e),a=!r&&!n&&SD(e),i=!r&&!n&&!a&&CD(e),o=r||n||a||i,s=o?bD(e.length,String):[],l=s.length;for(var u in e)(t||ND.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jD(u,l)))&&s.push(u);return s}var MD=OD,_D=Object.prototype;function AD(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||_D;return e===r}var TD=AD;function ED(e,t){return function(r){return e(t(r))}}var Mj=ED,$D=Mj,DD=$D(Object.keys,Object),RD=DD,ID=TD,LD=RD,BD=Object.prototype,FD=BD.hasOwnProperty;function zD(e){if(!ID(e))return LD(e);var t=[];for(var r in Object(e))FD.call(e,r)&&r!="constructor"&&t.push(r);return t}var GD=zD,UD=wx,WD=Bx;function VD(e){return e!=null&&WD(e.length)&&!UD(e)}var bf=VD,HD=MD,XD=GD,KD=bf;function YD(e){return KD(e)?HD(e):XD(e)}var Jh=YD,qD=f$,ZD=w$,QD=Jh;function JD(e){return qD(e,QD,ZD)}var eR=JD,B2=eR,tR=1,rR=Object.prototype,nR=rR.hasOwnProperty;function aR(e,t,r,n,a,i){var o=r&tR,s=B2(e),l=s.length,u=B2(t),f=u.length;if(l!=f&&!o)return!1;for(var d=l;d--;){var h=s[d];if(!(o?h in t:nR.call(t,h)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=o;++d<l;){h=s[d];var v=e[h],g=t[h];if(n)var b=o?n(g,v,h,t,e,i):n(v,g,h,e,t,i);if(!(b===void 0?v===g||a(v,g,r,n,i):b)){m=!1;break}x||(x=h=="constructor")}if(m&&!x){var S=e.constructor,k=t.constructor;S!=k&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var iR=aR,oR=Os,sR=ci,lR=oR(sR,"DataView"),cR=lR,uR=Os,fR=ci,dR=uR(fR,"Promise"),hR=dR,pR=Os,gR=ci,mR=pR(gR,"Set"),_j=mR,yR=Os,vR=ci,xR=yR(vR,"WeakMap"),bR=xR,ey=cR,ty=Sx,ry=hR,ny=_j,ay=bR,Aj=Ri,ic=R3,F2="[object Map]",wR="[object Object]",z2="[object Promise]",G2="[object Set]",U2="[object WeakMap]",W2="[object DataView]",kR=ic(ey),SR=ic(ty),jR=ic(ry),CR=ic(ny),PR=ic(ay),Wo=Aj;(ey&&Wo(new ey(new ArrayBuffer(1)))!=W2||ty&&Wo(new ty)!=F2||ry&&Wo(ry.resolve())!=z2||ny&&Wo(new ny)!=G2||ay&&Wo(new ay)!=U2)&&(Wo=function(e){var t=Aj(e),r=t==wR?e.constructor:void 0,n=r?ic(r):"";if(n)switch(n){case kR:return W2;case SR:return F2;case jR:return z2;case CR:return G2;case PR:return U2}return t});var NR=Wo,pg=xj,OR=Sj,MR=o$,_R=iR,V2=NR,H2=zn,X2=Pj,AR=Oj,TR=1,K2="[object Arguments]",Y2="[object Array]",td="[object Object]",ER=Object.prototype,q2=ER.hasOwnProperty;function $R(e,t,r,n,a,i){var o=H2(e),s=H2(t),l=o?Y2:V2(e),u=s?Y2:V2(t);l=l==K2?td:l,u=u==K2?td:u;var f=l==td,d=u==td,h=l==u;if(h&&X2(e)){if(!X2(t))return!1;o=!0,f=!1}if(h&&!f)return i||(i=new pg),o||AR(e)?OR(e,t,r,n,a,i):MR(e,t,l,r,n,a,i);if(!(r&TR)){var p=f&&q2.call(e,"__wrapped__"),y=d&&q2.call(t,"__wrapped__");if(p||y){var m=p?e.value():e,x=y?t.value():t;return i||(i=new pg),a(m,x,r,n,i)}}return h?(i||(i=new pg),_R(e,t,r,n,a,i)):!1}var DR=$R,RR=DR,Z2=Ii;function Tj(e,t,r,n,a){return e===t?!0:e==null||t==null||!Z2(e)&&!Z2(t)?e!==e&&t!==t:RR(e,t,r,n,Tj,a)}var Fx=Tj,IR=xj,LR=Fx,BR=1,FR=2;function zR(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var l=s[0],u=e[l],f=s[1];if(o&&s[2]){if(u===void 0&&!(l in e))return!1}else{var d=new IR;if(n)var h=n(u,f,l,e,t,d);if(!(h===void 0?LR(f,u,BR|FR,n,d):h))return!1}}return!0}var GR=zR,UR=No;function WR(e){return e===e&&!UR(e)}var Ej=WR,VR=Ej,HR=Jh;function XR(e){for(var t=HR(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,VR(a)]}return t}var KR=XR;function YR(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var $j=YR,qR=GR,ZR=KR,QR=$j;function JR(e){var t=ZR(e);return t.length==1&&t[0][2]?QR(t[0][0],t[0][1]):function(r){return r===e||qR(r,e,t)}}var eI=JR;function tI(e,t){return e!=null&&t in Object(e)}var rI=tI,nI=z3,aI=Ix,iI=zn,oI=Lx,sI=Bx,lI=Ih;function cI(e,t,r){t=nI(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=lI(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&sI(a)&&oI(o,a)&&(iI(e)||aI(e)))}var uI=cI,fI=rI,dI=uI;function hI(e,t){return e!=null&&dI(e,t,fI)}var pI=hI,gI=Fx,mI=G3,yI=pI,vI=bx,xI=Ej,bI=$j,wI=Ih,kI=1,SI=2;function jI(e,t){return vI(e)&&xI(t)?bI(wI(e),t):function(r){var n=mI(r,e);return n===void 0&&n===t?yI(r,e):gI(t,n,kI|SI)}}var CI=jI;function PI(e){return e}var oc=PI;function NI(e){return function(t){return t==null?void 0:t[e]}}var OI=NI,MI=Nx;function _I(e){return function(t){return MI(t,e)}}var AI=_I,TI=OI,EI=AI,$I=bx,DI=Ih;function RI(e){return $I(e)?TI(DI(e)):EI(e)}var II=RI,LI=eI,BI=CI,FI=oc,zI=zn,GI=II;function UI(e){return typeof e=="function"?e:e==null?FI:typeof e=="object"?zI(e)?BI(e[0],e[1]):LI(e):GI(e)}var Oo=UI;function WI(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Dj=WI;function VI(e){return e!==e}var HI=VI;function XI(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var KI=XI,YI=Dj,qI=HI,ZI=KI;function QI(e,t,r){return t===t?ZI(e,t,r):YI(e,qI,r)}var JI=QI,eL=JI;function tL(e,t){var r=e==null?0:e.length;return!!r&&eL(e,t,0)>-1}var rL=tL;function nL(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var aL=nL;function iL(){}var oL=iL,gg=_j,sL=oL,lL=Rx,cL=1/0,uL=gg&&1/lL(new gg([,-0]))[1]==cL?function(e){return new gg(e)}:sL,fL=uL,dL=bj,hL=rL,pL=aL,gL=kj,mL=fL,yL=Rx,vL=200;function xL(e,t,r){var n=-1,a=hL,i=e.length,o=!0,s=[],l=s;if(r)o=!1,a=pL;else if(i>=vL){var u=t?null:mL(e);if(u)return yL(u);o=!1,a=gL,l=new dL}else l=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(f)}else a(l,d,r)||(l!==s&&l.push(d),s.push(f))}return s}var bL=xL,wL=Oo,kL=bL;function SL(e,t){return e&&e.length?kL(e,wL(t)):[]}var jL=SL;const Q2=Rt(jL);function Rj(e,t,r){return t===!0?Q2(e,r):Ze(t)?Q2(e,t):e}function Sl(e){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(e)}var CL=["ref"];function J2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(r),!0).forEach(function(n){ep(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ew(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lj(n.key),n)}}function NL(e,t,r){return t&&ew(e.prototype,t),r&&ew(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OL(e,t,r){return t=x0(t),ML(e,Ij()?Reflect.construct(t,r||[],x0(e).constructor):t.apply(e,r))}function ML(e,t){if(t&&(Sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _L(e)}function _L(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ij(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ij=function(){return!!e})()}function x0(e){return x0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x0(e)}function AL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iy(e,t)}function iy(e,t){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iy(e,t)}function ep(e,t,r){return t=Lj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lj(e){var t=TL(e,"string");return Sl(t)=="symbol"?t:t+""}function TL(e,t){if(Sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function EL(e,t){if(e==null)return{};var r=$L(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $L(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function DL(e){return e.value}function RL(e,t){if(z.isValidElement(e))return z.cloneElement(e,t);if(typeof e=="function")return z.createElement(e,t);t.ref;var r=EL(t,CL);return z.createElement(Dx,r)}var tw=1,ei=function(e){function t(){var r;PL(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=OL(this,t,[].concat(a)),ep(r,"lastBoundingBox",{width:-1,height:-1}),r}return AL(t,e),NL(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>tw||Math.abs(a.height-this.lastBoundingBox.height)>tw)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?pi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();h={top:((f||0)-y.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return pi(pi({},d),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=pi(pi({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},RL(i,pi(pi({},this.props),{},{payload:Rj(f,u,DL)})))}}],[{key:"getWithHeight",value:function(n,a){var i=pi(pi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&he(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);ep(ei,"displayName","Legend");ep(ei,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var rw=xf,IL=Ix,LL=zn,nw=rw?rw.isConcatSpreadable:void 0;function BL(e){return LL(e)||IL(e)||!!(nw&&e&&e[nw])}var FL=BL,zL=jj,GL=FL;function Bj(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=GL),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?Bj(s,t-1,r,n,a):zL(a,s):n||(a[a.length]=s)}return a}var Fj=Bj;function UL(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(r(i[l],l,i)===!1)break}return t}}var WL=UL,VL=WL,HL=VL(),XL=HL,KL=XL,YL=Jh;function qL(e,t){return e&&KL(e,t,YL)}var zj=qL,ZL=bf;function QL(e,t){return function(r,n){if(r==null)return r;if(!ZL(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var JL=QL,eB=zj,tB=JL,rB=tB(eB),zx=rB,nB=zx,aB=bf;function iB(e,t){var r=-1,n=aB(e)?Array(e.length):[];return nB(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var Gj=iB;function oB(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var sB=oB,aw=Ql;function lB(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=aw(e),o=t!==void 0,s=t===null,l=t===t,u=aw(t);if(!s&&!u&&!i&&e>t||i&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!l)return-1}return 0}var cB=lB,uB=cB;function fB(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var l=uB(a[n],i[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var dB=fB,mg=Px,hB=Nx,pB=Oo,gB=Gj,mB=sB,yB=Nj,vB=dB,xB=oc,bB=zn;function wB(e,t,r){t.length?t=mg(t,function(i){return bB(i)?function(o){return hB(o,i.length===1?i[0]:i)}:i}):t=[xB];var n=-1;t=mg(t,yB(pB));var a=gB(e,function(i,o,s){var l=mg(t,function(u){return u(i)});return{criteria:l,index:++n,value:i}});return mB(a,function(i,o){return vB(i,o,r)})}var kB=wB;function SB(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var jB=SB,CB=jB,iw=Math.max;function PB(e,t,r){return t=iw(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=iw(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),CB(e,this,s)}}var NB=PB;function OB(e){return function(){return e}}var MB=OB,_B=Os,AB=function(){try{var e=_B(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Uj=AB,TB=MB,ow=Uj,EB=oc,$B=ow?function(e,t){return ow(e,"toString",{configurable:!0,enumerable:!1,value:TB(t),writable:!0})}:EB,DB=$B,RB=800,IB=16,LB=Date.now;function BB(e){var t=0,r=0;return function(){var n=LB(),a=IB-(n-r);if(r=n,a>0){if(++t>=RB)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var FB=BB,zB=DB,GB=FB,UB=GB(zB),WB=UB,VB=oc,HB=NB,XB=WB;function KB(e,t){return XB(HB(e,t,VB),e+"")}var YB=KB,qB=kx,ZB=bf,QB=Lx,JB=No;function eF(e,t,r){if(!JB(r))return!1;var n=typeof t;return(n=="number"?ZB(r)&&QB(t,r.length):n=="string"&&t in r)?qB(r[t],e):!1}var tp=eF,tF=Fj,rF=kB,nF=YB,sw=tp,aF=nF(function(e,t){if(e==null)return[];var r=t.length;return r>1&&sw(e,t[0],t[1])?t=[]:r>2&&sw(t[0],t[1],t[2])&&(t=[t[0]]),rF(e,tF(t,1),[])}),iF=aF;const Gx=Rt(iF);function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(this,arguments)}function oF(e,t){return uF(e)||cF(e,t)||lF(e,t)||sF()}function sF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lF(e,t){if(e){if(typeof e=="string")return lw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lw(e,t)}}function lw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cF(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function uF(e){if(Array.isArray(e))return e}function cw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(r),!0).forEach(function(n){fF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fF(e,t,r){return t=dF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dF(e){var t=hF(e,"string");return $u(t)=="symbol"?t:t+""}function hF(e,t){if($u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pF(e){return Array.isArray(e)&&Br(e[0])&&Br(e[1])?e.join(" ~ "):e}var gF=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,m=t.label,x=t.labelFormatter,v=t.accessibilityLayer,g=v===void 0?!1:v,b=function(){if(f&&f.length){var M={padding:0,margin:0},_=(h?Gx(f,h):f).map(function(D,I){if(D.type==="none")return null;var B=yg({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s),A=D.formatter||d||pF,E=D.value,L=D.name,U=E,J=L;if(A&&U!=null&&J!=null){var K=A(E,L,D,I,f);if(Array.isArray(K)){var F=oF(K,2);U=F[0],J=F[1]}else U=K}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:B},Br(J)?z.createElement("span",{className:"recharts-tooltip-item-name"},J):null,Br(J)?z.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,z.createElement("span",{className:"recharts-tooltip-item-value"},U),z.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:M},_)}return null},S=yg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),k=yg({margin:0},u),w=!Xe(m),C=w?m:"",P=ot("recharts-default-tooltip",p),O=ot("recharts-tooltip-label",y);w&&x&&f!==void 0&&f!==null&&(C=x(m,f));var N=g?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",oy({className:P,style:S},N),z.createElement("p",{className:O,style:k},z.isValidElement(C)?C:"".concat(C)),b())};function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function rd(e,t,r){return t=mF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mF(e){var t=yF(e,"string");return Du(t)=="symbol"?t:t+""}function yF(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dc="recharts-tooltip-wrapper",vF={visibility:"hidden"};function xF(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ot(Dc,rd(rd(rd(rd({},"".concat(Dc,"-right"),he(r)&&t&&he(t.x)&&r>=t.x),"".concat(Dc,"-left"),he(r)&&t&&he(t.x)&&r<t.x),"".concat(Dc,"-bottom"),he(n)&&t&&he(t.y)&&n>=t.y),"".concat(Dc,"-top"),he(n)&&t&&he(t.y)&&n<t.y))}function uw(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(i&&he(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var h=f,p=l[n];return h<p?Math.max(d,l[n]):Math.max(f,l[n])}var y=d+s,m=l[n]+u;return y>m?Math.max(f,l[n]):Math.max(d,l[n])}function bF(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function wF(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=uw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=uw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=bF({translateX:f,translateY:d,useTranslate3d:s})):u=vF,{cssProperties:u,cssClasses:xF({translateX:f,translateY:d,coordinate:r})}}function jl(e){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(r),!0).forEach(function(n){ly(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vj(n.key),n)}}function jF(e,t,r){return t&&SF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CF(e,t,r){return t=b0(t),PF(e,Wj()?Reflect.construct(t,r||[],b0(e).constructor):t.apply(e,r))}function PF(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NF(e)}function NF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wj=function(){return!!e})()}function b0(e){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b0(e)}function OF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}function sy(e,t){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sy(e,t)}function ly(e,t,r){return t=Vj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vj(e){var t=MF(e,"string");return jl(t)=="symbol"?t:t+""}function MF(e,t){if(jl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hw=1,_F=function(e){function t(){var r;kF(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=CF(this,t,[].concat(a)),ly(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ly(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return OF(t,e),jF(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>hw||Math.abs(n.height-this.state.lastBoundingBox.height)>hw)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,p=a.offset,y=a.position,m=a.reverseDirection,x=a.useTranslate3d,v=a.viewBox,g=a.wrapperStyle,b=wF({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:y,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:v}),S=b.cssClasses,k=b.cssProperties,w=dw(dw({transition:h&&i?"transform ".concat(s,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},g);return z.createElement("div",{tabIndex:-1,className:S,style:w,ref:function(P){n.wrapperNode=P}},u)}}])}(j.PureComponent),AF=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Mo={isSsr:AF()};function Cl(e){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cl(e)}function pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(r),!0).forEach(function(n){Ux(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xj(n.key),n)}}function $F(e,t,r){return t&&EF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DF(e,t,r){return t=w0(t),RF(e,Hj()?Reflect.construct(t,r||[],w0(e).constructor):t.apply(e,r))}function RF(e,t){if(t&&(Cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IF(e)}function IF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hj=function(){return!!e})()}function w0(e){return w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w0(e)}function LF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}function cy(e,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cy(e,t)}function Ux(e,t,r){return t=Xj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xj(e){var t=BF(e,"string");return Cl(t)=="symbol"?t:t+""}function BF(e,t){if(Cl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function FF(e){return e.dataKey}function zF(e,t){return z.isValidElement(e)?z.cloneElement(e,t):typeof e=="function"?z.createElement(e,t):z.createElement(gF,t)}var Xr=function(e){function t(){return TF(this,t),DF(this,t,arguments)}return LF(t,e),$F(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,p=a.offset,y=a.payload,m=a.payloadUniqBy,x=a.position,v=a.reverseDirection,g=a.useTranslate3d,b=a.viewBox,S=a.wrapperStyle,k=y??[];d&&k.length&&(k=Rj(y.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),m,FF));var w=k.length>0;return z.createElement(_F,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:i,coordinate:f,hasPayload:w,offset:p,position:x,reverseDirection:v,useTranslate3d:g,viewBox:b,wrapperStyle:S},zF(u,gw(gw({},this.props),{},{payload:k})))}}])}(j.PureComponent);Ux(Xr,"displayName","Tooltip");Ux(Xr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Mo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var GF=ci,UF=function(){return GF.Date.now()},WF=UF,VF=/\s/;function HF(e){for(var t=e.length;t--&&VF.test(e.charAt(t)););return t}var XF=HF,KF=XF,YF=/^\s+/;function qF(e){return e&&e.slice(0,KF(e)+1).replace(YF,"")}var ZF=qF,QF=ZF,mw=No,JF=Ql,yw=NaN,ez=/^[-+]0x[0-9a-f]+$/i,tz=/^0b[01]+$/i,rz=/^0o[0-7]+$/i,nz=parseInt;function az(e){if(typeof e=="number")return e;if(JF(e))return yw;if(mw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=mw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=QF(e);var r=tz.test(e);return r||rz.test(e)?nz(e.slice(2),r?2:8):ez.test(e)?yw:+e}var Kj=az,iz=No,vg=WF,vw=Kj,oz="Expected a function",sz=Math.max,lz=Math.min;function cz(e,t,r){var n,a,i,o,s,l,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(oz);t=vw(t)||0,iz(r)&&(f=!!r.leading,d="maxWait"in r,i=d?sz(vw(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function p(w){var C=n,P=a;return n=a=void 0,u=w,o=e.apply(P,C),o}function y(w){return u=w,s=setTimeout(v,t),f?p(w):o}function m(w){var C=w-l,P=w-u,O=t-C;return d?lz(O,i-P):O}function x(w){var C=w-l,P=w-u;return l===void 0||C>=t||C<0||d&&P>=i}function v(){var w=vg();if(x(w))return g(w);s=setTimeout(v,m(w))}function g(w){return s=void 0,h&&n?p(w):(n=a=void 0,o)}function b(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function S(){return s===void 0?o:g(vg())}function k(){var w=vg(),C=x(w);if(n=arguments,a=this,l=w,C){if(s===void 0)return y(l);if(d)return clearTimeout(s),s=setTimeout(v,t),p(l)}return s===void 0&&(s=setTimeout(v,t)),o}return k.cancel=b,k.flush=S,k}var uz=cz,fz=uz,dz=No,hz="Expected a function";function pz(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(hz);return dz(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),fz(e,t,{leading:n,maxWait:t,trailing:a})}var gz=pz;const Yj=Rt(gz);function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(r),!0).forEach(function(n){mz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mz(e,t,r){return t=yz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yz(e){var t=vz(e,"string");return Ru(t)=="symbol"?t:t+""}function vz(e,t){if(Ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xz(e,t){return Sz(e)||kz(e,t)||wz(e,t)||bz()}function bz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wz(e,t){if(e){if(typeof e=="string")return bw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bw(e,t)}}function bw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Sz(e){if(Array.isArray(e))return e}var Pi=j.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,p=e.children,y=e.debounce,m=y===void 0?0:y,x=e.id,v=e.className,g=e.onResize,b=e.style,S=b===void 0?{}:b,k=j.useRef(null),w=j.useRef();w.current=g,j.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var C=j.useState({containerWidth:a.width,containerHeight:a.height}),P=xz(C,2),O=P[0],N=P[1],$=j.useCallback(function(_,D){N(function(I){var B=Math.round(_),A=Math.round(D);return I.containerWidth===B&&I.containerHeight===A?I:{containerWidth:B,containerHeight:A}})},[]);j.useEffect(function(){var _=function(L){var U,J=L[0].contentRect,K=J.width,F=J.height;$(K,F),(U=w.current)===null||U===void 0||U.call(w,K,F)};m>0&&(_=Yj(_,m,{trailing:!0,leading:!1}));var D=new ResizeObserver(_),I=k.current.getBoundingClientRect(),B=I.width,A=I.height;return $(B,A),D.observe(k.current),function(){D.disconnect()}},[$,m]);var M=j.useMemo(function(){var _=O.containerWidth,D=O.containerHeight;if(_<0||D<0)return null;Ci(Qo(o)||Qo(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Ci(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=Qo(o)?_:o,B=Qo(l)?D:l;r&&r>0&&(I?B=I/r:B&&(I=B*r),h&&B>h&&(B=h)),Ci(I>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,B,o,l,f,d,r);var A=!Array.isArray(p)&&ji(p.type).endsWith("Chart");return z.Children.map(p,function(E){return z.isValidElement(E)?j.cloneElement(E,nd({width:I,height:B},A?{style:nd({height:"100%",width:"100%",maxHeight:B,maxWidth:I},E.props.style)}:{})):E})},[r,p,l,h,d,f,O,o]);return z.createElement("div",{id:x?"".concat(x):void 0,className:ot("recharts-responsive-container",v),style:nd(nd({},S),{},{width:o,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:k},M)}),Wx=function(t){return null};Wx.displayName="Cell";function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){jz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jz(e,t,r){return t=Cz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cz(e){var t=Pz(e,"string");return Iu(t)=="symbol"?t:t+""}function Pz(e,t){if(Iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ls={widthCache:{},cacheCount:0},Nz=2e3,Oz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kw="recharts_measurement_span";function Mz(e){var t=uy({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var iu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Mo.isSsr)return{width:0,height:0};var n=Mz(r),a=JSON.stringify({text:t,copyStyle:n});if(Ls.widthCache[a])return Ls.widthCache[a];try{var i=document.getElementById(kw);i||(i=document.createElement("span"),i.setAttribute("id",kw),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=uy(uy({},Oz),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Ls.widthCache[a]=l,++Ls.cacheCount>Nz&&(Ls.cacheCount=0,Ls.widthCache={}),l}catch{return{width:0,height:0}}},_z=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function k0(e,t){return $z(e)||Ez(e,t)||Tz(e,t)||Az()}function Az(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tz(e,t){if(e){if(typeof e=="string")return Sw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sw(e,t)}}function Sw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ez(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function $z(e){if(Array.isArray(e))return e}function Dz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Iz(n.key),n)}}function Rz(e,t,r){return t&&jw(e.prototype,t),r&&jw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Iz(e){var t=Lz(e,"string");return Lu(t)=="symbol"?t:t+""}function Lz(e,t){if(Lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Pw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Fz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zz=Object.keys(qj),el="NaN";function Gz(e,t){return e*qj[t]}var ad=function(){function e(t,r){Dz(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Bz.test(r)&&(this.num=NaN,this.unit=""),zz.includes(r)&&(this.num=Gz(t,r),this.unit="px")}return Rz(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Fz.exec(r))!==null&&n!==void 0?n:[],i=k0(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function Zj(e){if(e.includes(el))return el;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Cw.exec(t))!==null&&r!==void 0?r:[],a=k0(n,4),i=a[1],o=a[2],s=a[3],l=ad.parse(i??""),u=ad.parse(s??""),f=o==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return el;t=t.replace(Cw,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=Pw.exec(t))!==null&&d!==void 0?d:[],p=k0(h,4),y=p[1],m=p[2],x=p[3],v=ad.parse(y??""),g=ad.parse(x??""),b=m==="+"?v.add(g):v.subtract(g);if(b.isNaN())return el;t=t.replace(Pw,b.toString())}return t}var Nw=/\(([^()]*)\)/;function Uz(e){for(var t=e;t.includes("(");){var r=Nw.exec(t),n=k0(r,2),a=n[1];t=t.replace(Nw,Zj(a))}return t}function Wz(e){var t=e.replace(/\s+/g,"");return t=Uz(t),t=Zj(t),t}function Vz(e){try{return Wz(e)}catch{return el}}function xg(e){var t=Vz(e.slice(5,-1));return t===el?"":t}var Hz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Xz=["dx","dy","angle","className","breakAll"];function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(this,arguments)}function Ow(e,t){if(e==null)return{};var r=Kz(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Mw(e,t){return Qz(e)||Zz(e,t)||qz(e,t)||Yz()}function Yz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qz(e,t){if(e){if(typeof e=="string")return _w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _w(e,t)}}function _w(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Qz(e){if(Array.isArray(e))return e}var Qj=/[ \f\n\r\t\v\u2028\u2029]+/,Jj=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Xe(r)||(n?i=r.toString().split(""):i=r.toString().split(Qj));var o=i.map(function(l){return{word:l,width:iu(l,a).width}}),s=n?0:iu("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Jz=function(t,r,n,a,i){var o=t.maxLines,s=t.children,l=t.style,u=t.breakAll,f=he(o),d=s,h=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(B,A){var E=A.word,L=A.width,U=B[B.length-1];if(U&&(a==null||i||U.width+L+n<Number(a)))U.words.push(E),U.width+=L+n;else{var J={words:[E],width:L};B.push(J)}return B},[])},p=h(r),y=function(I){return I.reduce(function(B,A){return B.width>A.width?B:A})};if(!f)return p;for(var m="",x=function(I){var B=d.slice(0,I),A=Jj({breakAll:u,style:l,children:B+m}).wordsWithComputedWidth,E=h(A),L=E.length>o||y(E).width>Number(a);return[L,E]},v=0,g=d.length-1,b=0,S;v<=g&&b<=d.length-1;){var k=Math.floor((v+g)/2),w=k-1,C=x(w),P=Mw(C,2),O=P[0],N=P[1],$=x(k),M=Mw($,1),_=M[0];if(!O&&!_&&(v=k+1),O&&_&&(g=k-1),!O&&_){S=N;break}b++}return S||p},Aw=function(t){var r=Xe(t)?[]:t.toString().split(Qj);return[{words:r}]},eG=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!Mo.isSsr){var l,u,f=Jj({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,u=h}else return Aw(a);return Jz({breakAll:o,children:a,maxLines:s,style:i},l,u,r,n)}return Aw(a)},Tw="#808080",S0=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,y=t.verticalAnchor,m=y===void 0?"end":y,x=t.fill,v=x===void 0?Tw:x,g=Ow(t,Hz),b=j.useMemo(function(){return eG({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),S=g.dx,k=g.dy,w=g.angle,C=g.className,P=g.breakAll,O=Ow(g,Xz);if(!Br(n)||!Br(i))return null;var N=n+(he(S)?S:0),$=i+(he(k)?k:0),M;switch(m){case"start":M=xg("calc(".concat(u,")"));break;case"middle":M=xg("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:M=xg("calc(".concat(b.length-1," * -").concat(s,")"));break}var _=[];if(d){var D=b[0].width,I=g.width;_.push("scale(".concat((he(I)?I/D:1)/D,")"))}return w&&_.push("rotate(".concat(w,", ").concat(N,", ").concat($,")")),_.length&&(O.transform=_.join(" ")),z.createElement("text",fy({},Ke(O,!0),{x:N,y:$,className:ot("recharts-text",C),textAnchor:p,fill:v.includes("url")?Tw:v}),b.map(function(B,A){var E=B.words.join(P?"":" ");return z.createElement("tspan",{x:N,dy:A===0?M:s,key:"".concat(E,"-").concat(A)},E)}))};function bo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vx(e){let t,r,n;e.length!==2?(t=bo,r=(s,l)=>bo(e(s),l),n=(s,l)=>e(s)-l):(t=e===bo||e===tG?e:rG,r=e,n=e);function a(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){const d=a(s,l,u,f-1);return d>u&&n(s[d-1],l)>-n(s[d],l)?d-1:d}return{left:a,center:o,right:i}}function rG(){return 0}function eC(e){return e===null?NaN:+e}function*nG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const aG=Vx(bo),wf=aG.right;Vx(eC).center;class Ew extends Map{constructor(t,r=sG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get($w(this,t))}has(t){return super.has($w(this,t))}set(t,r){return super.set(iG(this,t),r)}delete(t){return super.delete(oG(this,t))}}function $w({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function iG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function oG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function sG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function lG(e=bo){if(e===bo)return tC;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function tC(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cG=Math.sqrt(50),uG=Math.sqrt(10),fG=Math.sqrt(2);function j0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=cG?10:i>=uG?5:i>=fG?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?j0(e,t,r*2):[s,l,u]}function dy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?j0(t,e,r):j0(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function hy(e,t,r){return t=+t,e=+e,r=+r,j0(e,t,r)[2]}function py(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?hy(t,e,r):hy(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Dw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Rw(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function rC(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?tC:lG(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/l+h)),y=Math.min(n,Math.floor(t+(l-u)*d/l+h));rC(e,t,p,y,a)}const i=e[t];let o=r,s=n;for(Rc(e,r,t),a(e[n],i)>0&&Rc(e,r,n);o<s;){for(Rc(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?Rc(e,r,s):(++s,Rc(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function Rc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function dG(e,t,r){if(e=Float64Array.from(nG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Rw(e);if(t>=1)return Dw(e);var n,a=(n-1)*t,i=Math.floor(a),o=Dw(rC(e,i).subarray(0,i+1)),s=Rw(e.subarray(i+1));return o+(s-o)*(a-i)}}function hG(e,t,r=eC){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function pG(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function ba(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Li(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const gy=Symbol("implicit");function Hx(){var e=new Ew,t=[],r=[],n=gy;function a(i){let o=e.get(i);if(o===void 0){if(n!==gy)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Ew;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Hx(t,r).unknown(n)},ba.apply(a,arguments),a}function Bu(){var e=Hx().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,p=a<n,y=p?a:n,m=p?n:a;i=(m-y)/Math.max(1,h-l+u*2),s&&(i=Math.floor(i)),y+=(m-y-i*(h-l))*f,o=i*(1-l),s&&(y=Math.round(y),o=Math.round(o));var x=pG(h).map(function(v){return y+i*v});return r(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return Bu(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},ba.apply(d(),arguments)}function nC(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return nC(t())},e}function ou(){return nC(Bu.apply(null,arguments).paddingInner(1))}function Xx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function aC(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function kf(){}var Fu=.7,C0=1/Fu,fl="\\s*([+-]?\\d+)\\s*",zu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gG=/^#([0-9a-f]{3,8})$/,mG=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),yG=new RegExp(`^rgb\\(${ti},${ti},${ti}\\)$`),vG=new RegExp(`^rgba\\(${fl},${fl},${fl},${zu}\\)$`),xG=new RegExp(`^rgba\\(${ti},${ti},${ti},${zu}\\)$`),bG=new RegExp(`^hsl\\(${zu},${ti},${ti}\\)$`),wG=new RegExp(`^hsla\\(${zu},${ti},${ti},${zu}\\)$`),Iw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xx(kf,Gu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lw,formatHex:Lw,formatHex8:kG,formatHsl:SG,formatRgb:Bw,toString:Bw});function Lw(){return this.rgb().formatHex()}function kG(){return this.rgb().formatHex8()}function SG(){return iC(this).formatHsl()}function Bw(){return this.rgb().formatRgb()}function Gu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=gG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Fw(t):r===3?new $n(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?id(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?id(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mG.exec(e))?new $n(t[1],t[2],t[3],1):(t=yG.exec(e))?new $n(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vG.exec(e))?id(t[1],t[2],t[3],t[4]):(t=xG.exec(e))?id(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bG.exec(e))?Uw(t[1],t[2]/100,t[3]/100,1):(t=wG.exec(e))?Uw(t[1],t[2]/100,t[3]/100,t[4]):Iw.hasOwnProperty(e)?Fw(Iw[e]):e==="transparent"?new $n(NaN,NaN,NaN,0):null}function Fw(e){return new $n(e>>16&255,e>>8&255,e&255,1)}function id(e,t,r,n){return n<=0&&(e=t=r=NaN),new $n(e,t,r,n)}function jG(e){return e instanceof kf||(e=Gu(e)),e?(e=e.rgb(),new $n(e.r,e.g,e.b,e.opacity)):new $n}function my(e,t,r,n){return arguments.length===1?jG(e):new $n(e,t,r,n??1)}function $n(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Xx($n,my,aC(kf,{brighter(e){return e=e==null?C0:Math.pow(C0,e),new $n(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fu:Math.pow(Fu,e),new $n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $n(is(this.r),is(this.g),is(this.b),P0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zw,formatHex:zw,formatHex8:CG,formatRgb:Gw,toString:Gw}));function zw(){return`#${Jo(this.r)}${Jo(this.g)}${Jo(this.b)}`}function CG(){return`#${Jo(this.r)}${Jo(this.g)}${Jo(this.b)}${Jo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gw(){const e=P0(this.opacity);return`${e===1?"rgb(":"rgba("}${is(this.r)}, ${is(this.g)}, ${is(this.b)}${e===1?")":`, ${e})`}`}function P0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function is(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jo(e){return e=is(e),(e<16?"0":"")+e.toString(16)}function Uw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new $a(e,t,r,n)}function iC(e){if(e instanceof $a)return new $a(e.h,e.s,e.l,e.opacity);if(e instanceof kf||(e=Gu(e)),!e)return new $a;if(e instanceof $a)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new $a(o,s,l,e.opacity)}function PG(e,t,r,n){return arguments.length===1?iC(e):new $a(e,t,r,n??1)}function $a(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Xx($a,PG,aC(kf,{brighter(e){return e=e==null?C0:Math.pow(C0,e),new $a(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fu:Math.pow(Fu,e),new $a(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new $n(bg(e>=240?e-240:e+120,a,n),bg(e,a,n),bg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new $a(Ww(this.h),od(this.s),od(this.l),P0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=P0(this.opacity);return`${e===1?"hsl(":"hsla("}${Ww(this.h)}, ${od(this.s)*100}%, ${od(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ww(e){return e=(e||0)%360,e<0?e+360:e}function od(e){return Math.max(0,Math.min(1,e||0))}function bg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Kx=e=>()=>e;function NG(e,t){return function(r){return e+r*t}}function OG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function MG(e){return(e=+e)==1?oC:function(t,r){return r-t?OG(t,r,e):Kx(isNaN(t)?r:t)}}function oC(e,t){var r=t-e;return r?NG(e,r):Kx(isNaN(e)?t:e)}const Vw=function e(t){var r=MG(t);function n(a,i){var o=r((a=my(a)).r,(i=my(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=oC(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function _G(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function AG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function TG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=sc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function EG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function N0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function $G(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=sc(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var yy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wg=new RegExp(yy.source,"g");function DG(e){return function(){return e}}function RG(e){return function(t){return e(t)+""}}function IG(e,t){var r=yy.lastIndex=wg.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=yy.exec(e))&&(a=wg.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:N0(n,a)})),r=wg.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?RG(l[0].x):DG(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function sc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Kx(t):(r==="number"?N0:r==="string"?(n=Gu(t))?(t=n,Vw):IG:t instanceof Gu?Vw:t instanceof Date?EG:AG(t)?_G:Array.isArray(t)?TG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$G:N0)(e,t)}function Yx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function LG(e,t){t===void 0&&(t=e,e=sc);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function BG(e){return function(){return e}}function O0(e){return+e}var Hw=[0,1];function jn(e){return e}function vy(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:BG(isNaN(t)?NaN:.5)}function FG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function zG(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=vy(a,n),i=r(o,i)):(n=vy(n,a),i=r(i,o)),function(s){return i(n(s))}}function GG(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=vy(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=wf(e,s,1,n)-1;return i[l](a[l](s))}}function Sf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rp(){var e=Hw,t=Hw,r=sc,n,a,i,o=jn,s,l,u;function f(){var h=Math.min(e.length,t.length);return o!==jn&&(o=FG(e[0],e[h-1])),s=h>2?GG:zG,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=s(e.map(n),t,r)))(n(o(h)))}return d.invert=function(h){return o(a((u||(u=s(t,e.map(n),N0)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,O0),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=Yx,f()},d.clamp=function(h){return arguments.length?(o=h?!0:jn,f()):o!==jn},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,p){return n=h,a=p,f()}}function qx(){return rp()(jn,jn)}function UG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function M0(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Pl(e){return e=M0(Math.abs(e)),e?e[1]:NaN}function WG(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function VG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var HG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uu(e){if(!(t=HG.exec(e)))throw new Error("invalid format: "+e);var t;return new Zx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uu.prototype=Zx.prototype;function Zx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function XG(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var _0;function KG(e,t){var r=M0(e,t);if(!r)return _0=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(_0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+M0(e,Math.max(0,t+i-1))[0]}function Xw(e,t){var r=M0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Kw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Xw(e*100,t),r:Xw,s:KG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yw(e){return e}var qw=Array.prototype.map,Zw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function YG(e){var t=e.grouping===void 0||e.thousands===void 0?Yw:WG(qw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Yw:VG(qw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d,h){d=Uu(d);var p=d.fill,y=d.align,m=d.sign,x=d.symbol,v=d.zero,g=d.width,b=d.comma,S=d.precision,k=d.trim,w=d.type;w==="n"?(b=!0,w="g"):Kw[w]||(S===void 0&&(S=12),k=!0,w="g"),(v||p==="0"&&y==="=")&&(v=!0,p="0",y="=");var C=(h&&h.prefix!==void 0?h.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),P=(x==="$"?n:/[%p]/.test(w)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),O=Kw[w],N=/[defgprs%]/.test(w);S=S===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function $(M){var _=C,D=P,I,B,A;if(w==="c")D=O(M)+D,M="";else{M=+M;var E=M<0||1/M<0;if(M=isNaN(M)?l:O(Math.abs(M),S),k&&(M=XG(M)),E&&+M==0&&m!=="+"&&(E=!1),_=(E?m==="("?m:s:m==="-"||m==="("?"":m)+_,D=(w==="s"&&!isNaN(M)&&_0!==void 0?Zw[8+_0/3]:"")+D+(E&&m==="("?")":""),N){for(I=-1,B=M.length;++I<B;)if(A=M.charCodeAt(I),48>A||A>57){D=(A===46?a+M.slice(I+1):M.slice(I))+D,M=M.slice(0,I);break}}}b&&!v&&(M=t(M,1/0));var L=_.length+M.length+D.length,U=L<g?new Array(g-L+1).join(p):"";switch(b&&v&&(M=t(U+M,U.length?g-D.length:1/0),U=""),y){case"<":M=_+M+D+U;break;case"=":M=_+U+M+D;break;case"^":M=U.slice(0,L=U.length>>1)+_+M+D+U.slice(L);break;default:M=U+_+M+D;break}return i(M)}return $.toString=function(){return d+""},$}function f(d,h){var p=Math.max(-8,Math.min(8,Math.floor(Pl(h)/3)))*3,y=Math.pow(10,-p),m=u((d=Uu(d),d.type="f",d),{suffix:Zw[8+p/3]});return function(x){return m(y*x)}}return{format:u,formatPrefix:f}}var sd,Qx,sC;qG({thousands:",",grouping:[3],currency:["$",""]});function qG(e){return sd=YG(e),Qx=sd.format,sC=sd.formatPrefix,sd}function ZG(e){return Math.max(0,-Pl(Math.abs(e)))}function QG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pl(t)/3)))*3-Pl(Math.abs(e)))}function JG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Pl(t)-Pl(e))+1}function lC(e,t,r,n){var a=py(e,t,r),i;switch(n=Uu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=QG(a,o))&&(n.precision=i),sC(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=JG(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=ZG(a))&&(n.precision=i-(n.type==="%")*2);break}}return Qx(n)}function _o(e){var t=e.domain;return e.ticks=function(r){var n=t();return dy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return lC(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=hy(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function A0(){var e=qx();return e.copy=function(){return Sf(e,A0())},ba.apply(e,arguments),_o(e)}function cC(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,O0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return cC(e).unknown(t)},e=arguments.length?Array.from(e,O0):[0,1],_o(r)}function uC(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Qw(e){return Math.log(e)}function Jw(e){return Math.exp(e)}function eU(e){return-Math.log(-e)}function tU(e){return-Math.exp(-e)}function rU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function nU(e){return e===10?rU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function aU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ek(e){return(t,r)=>-e(-t,r)}function Jx(e){const t=e(Qw,Jw),r=t.domain;let n=10,a,i;function o(){return a=aU(n),i=nU(n),r()[0]<0?(a=ek(a),i=ek(i),e(eU,tU)):e(Qw,Jw),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),p=a(f),y,m;const x=s==null?10:+s;let v=[];if(!(n%1)&&p-h<x){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(y=1;y<n;++y)if(m=h<0?y/i(-h):y*i(h),!(m<u)){if(m>f)break;v.push(m)}}else for(;h<=p;++h)for(y=n-1;y>=1;--y)if(m=h>0?y/i(-h):y*i(h),!(m<u)){if(m>f)break;v.push(m)}v.length*2<x&&(v=dy(u,f,x))}else v=dy(h,p,Math.min(p-h,x)).map(i);return d?v.reverse():v},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Uu(l)).precision==null&&(l.trim=!0),l=Qx(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?l(f):""}},t.nice=()=>r(uC(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function fC(){const e=Jx(rp()).domain([1,10]);return e.copy=()=>Sf(e,fC()).base(e.base()),ba.apply(e,arguments),e}function tk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function e1(e){var t=1,r=e(tk(t),rk(t));return r.constant=function(n){return arguments.length?e(tk(t=+n),rk(t)):t},_o(r)}function dC(){var e=e1(rp());return e.copy=function(){return Sf(e,dC()).constant(e.constant())},ba.apply(e,arguments)}function nk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function oU(e){return e<0?-e*e:e*e}function t1(e){var t=e(jn,jn),r=1;function n(){return r===1?e(jn,jn):r===.5?e(iU,oU):e(nk(r),nk(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},_o(t)}function r1(){var e=t1(rp());return e.copy=function(){return Sf(e,r1()).exponent(e.exponent())},ba.apply(e,arguments),e}function sU(){return r1.apply(null,arguments).exponent(.5)}function ak(e){return Math.sign(e)*e*e}function lU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hC(){var e=qx(),t=[0,1],r=!1,n;function a(i){var o=lU(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(ak(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,O0)).map(ak)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return hC(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ba.apply(a,arguments),_o(a)}function pC(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=hG(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[wf(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(bo),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return pC().domain(e).range(t).unknown(n)},ba.apply(i,arguments)}function gC(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[wf(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return gC().domain([e,t]).range(a).unknown(i)},ba.apply(_o(o),arguments)}function mC(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[wf(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return mC().domain(e).range(t).unknown(r)},ba.apply(a,arguments)}const kg=new Date,Sg=new Date;function zr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>zr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(kg.setTime(+i),Sg.setTime(+o),e(kg),e(Sg),Math.floor(r(kg,Sg))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const T0=zr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);T0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):T0);T0.range;const bi=1e3,da=bi*60,wi=da*60,Ti=wi*24,n1=Ti*7,ik=Ti*30,jg=Ti*365,es=zr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getUTCSeconds());es.range;const a1=zr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bi)},(e,t)=>{e.setTime(+e+t*da)},(e,t)=>(t-e)/da,e=>e.getMinutes());a1.range;const i1=zr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*da)},(e,t)=>(t-e)/da,e=>e.getUTCMinutes());i1.range;const o1=zr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bi-e.getMinutes()*da)},(e,t)=>{e.setTime(+e+t*wi)},(e,t)=>(t-e)/wi,e=>e.getHours());o1.range;const s1=zr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*wi)},(e,t)=>(t-e)/wi,e=>e.getUTCHours());s1.range;const jf=zr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*da)/Ti,e=>e.getDate()-1);jf.range;const np=zr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ti,e=>e.getUTCDate()-1);np.range;const yC=zr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ti,e=>Math.floor(e/Ti));yC.range;function _s(e){return zr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*da)/n1)}const ap=_s(0),E0=_s(1),cU=_s(2),uU=_s(3),Nl=_s(4),fU=_s(5),dU=_s(6);ap.range;E0.range;cU.range;uU.range;Nl.range;fU.range;dU.range;function As(e){return zr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/n1)}const ip=As(0),$0=As(1),hU=As(2),pU=As(3),Ol=As(4),gU=As(5),mU=As(6);ip.range;$0.range;hU.range;pU.range;Ol.range;gU.range;mU.range;const l1=zr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());l1.range;const c1=zr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());c1.range;const Ei=zr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ei.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ei.range;const $i=zr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$i.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});$i.range;function vC(e,t,r,n,a,i){const o=[[es,1,bi],[es,5,5*bi],[es,15,15*bi],[es,30,30*bi],[i,1,da],[i,5,5*da],[i,15,15*da],[i,30,30*da],[a,1,wi],[a,3,3*wi],[a,6,6*wi],[a,12,12*wi],[n,1,Ti],[n,2,2*Ti],[r,1,n1],[t,1,ik],[t,3,3*ik],[e,1,jg]];function s(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:l(u,f,d),y=p?p.range(u,+f+1):[];return h?y.reverse():y}function l(u,f,d){const h=Math.abs(f-u)/d,p=Vx(([,,x])=>x).right(o,h);if(p===o.length)return e.every(py(u/jg,f/jg,d));if(p===0)return T0.every(Math.max(py(u,f,d),1));const[y,m]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return y.every(m)}return[s,l]}const[yU,vU]=vC($i,c1,ip,yC,s1,i1),[xU,bU]=vC(Ei,l1,ap,jf,o1,a1);function Cg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Pg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ic(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function wU(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=Lc(a),f=Bc(a),d=Lc(i),h=Bc(i),p=Lc(o),y=Bc(o),m=Lc(s),x=Bc(s),v=Lc(l),g=Bc(l),b={a:A,A:E,b:L,B:U,c:null,d:fk,e:fk,f:WU,g:eW,G:rW,H:zU,I:GU,j:UU,L:xC,m:VU,M:HU,p:J,q:K,Q:pk,s:gk,S:XU,u:KU,U:YU,V:qU,w:ZU,W:QU,x:null,X:null,y:JU,Y:tW,Z:nW,"%":hk},S={a:F,A:ee,b:ue,B:Q,c:null,d:dk,e:dk,f:sW,g:yW,G:xW,H:aW,I:iW,j:oW,L:wC,m:lW,M:cW,p:fe,q:W,Q:pk,s:gk,S:uW,u:fW,U:dW,V:hW,w:pW,W:gW,x:null,X:null,y:mW,Y:vW,Z:bW,"%":hk},k={a:N,A:$,b:M,B:_,c:D,d:ck,e:ck,f:IU,g:lk,G:sk,H:uk,I:uk,j:EU,L:RU,m:TU,M:$U,p:O,q:AU,Q:BU,s:FU,S:DU,u:PU,U:NU,V:OU,w:CU,W:MU,x:I,X:B,y:lk,Y:sk,Z:_U,"%":LU};b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),S.x=w(r,S),S.X=w(n,S),S.c=w(t,S);function w(X,se){return function(ce){var H=[],pe=-1,Z=0,te=X.length,ge,me,He;for(ce instanceof Date||(ce=new Date(+ce));++pe<te;)X.charCodeAt(pe)===37&&(H.push(X.slice(Z,pe)),(me=ok[ge=X.charAt(++pe)])!=null?ge=X.charAt(++pe):me=ge==="e"?" ":"0",(He=se[ge])&&(ge=He(ce,me)),H.push(ge),Z=pe+1);return H.push(X.slice(Z,pe)),H.join("")}}function C(X,se){return function(ce){var H=Ic(1900,void 0,1),pe=P(H,X,ce+="",0),Z,te;if(pe!=ce.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(se&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(Z=Pg(Ic(H.y,0,1)),te=Z.getUTCDay(),Z=te>4||te===0?$0.ceil(Z):$0(Z),Z=np.offset(Z,(H.V-1)*7),H.y=Z.getUTCFullYear(),H.m=Z.getUTCMonth(),H.d=Z.getUTCDate()+(H.w+6)%7):(Z=Cg(Ic(H.y,0,1)),te=Z.getDay(),Z=te>4||te===0?E0.ceil(Z):E0(Z),Z=jf.offset(Z,(H.V-1)*7),H.y=Z.getFullYear(),H.m=Z.getMonth(),H.d=Z.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),te="Z"in H?Pg(Ic(H.y,0,1)).getUTCDay():Cg(Ic(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(te+5)%7:H.w+H.U*7-(te+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,Pg(H)):Cg(H)}}function P(X,se,ce,H){for(var pe=0,Z=se.length,te=ce.length,ge,me;pe<Z;){if(H>=te)return-1;if(ge=se.charCodeAt(pe++),ge===37){if(ge=se.charAt(pe++),me=k[ge in ok?se.charAt(pe++):ge],!me||(H=me(X,ce,H))<0)return-1}else if(ge!=ce.charCodeAt(H++))return-1}return H}function O(X,se,ce){var H=u.exec(se.slice(ce));return H?(X.p=f.get(H[0].toLowerCase()),ce+H[0].length):-1}function N(X,se,ce){var H=p.exec(se.slice(ce));return H?(X.w=y.get(H[0].toLowerCase()),ce+H[0].length):-1}function $(X,se,ce){var H=d.exec(se.slice(ce));return H?(X.w=h.get(H[0].toLowerCase()),ce+H[0].length):-1}function M(X,se,ce){var H=v.exec(se.slice(ce));return H?(X.m=g.get(H[0].toLowerCase()),ce+H[0].length):-1}function _(X,se,ce){var H=m.exec(se.slice(ce));return H?(X.m=x.get(H[0].toLowerCase()),ce+H[0].length):-1}function D(X,se,ce){return P(X,t,se,ce)}function I(X,se,ce){return P(X,r,se,ce)}function B(X,se,ce){return P(X,n,se,ce)}function A(X){return o[X.getDay()]}function E(X){return i[X.getDay()]}function L(X){return l[X.getMonth()]}function U(X){return s[X.getMonth()]}function J(X){return a[+(X.getHours()>=12)]}function K(X){return 1+~~(X.getMonth()/3)}function F(X){return o[X.getUTCDay()]}function ee(X){return i[X.getUTCDay()]}function ue(X){return l[X.getUTCMonth()]}function Q(X){return s[X.getUTCMonth()]}function fe(X){return a[+(X.getUTCHours()>=12)]}function W(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var se=w(X+="",b);return se.toString=function(){return X},se},parse:function(X){var se=C(X+="",!1);return se.toString=function(){return X},se},utcFormat:function(X){var se=w(X+="",S);return se.toString=function(){return X},se},utcParse:function(X){var se=C(X+="",!0);return se.toString=function(){return X},se}}}var ok={"-":"",_:" ",0:"0"},qr=/^\s*\d+/,kU=/^%/,SU=/[\\^$*+?|[\]().{}]/g;function mt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function jU(e){return e.replace(SU,"\\$&")}function Lc(e){return new RegExp("^(?:"+e.map(jU).join("|")+")","i")}function Bc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function CU(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function PU(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function NU(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function OU(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function MU(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function sk(e,t,r){var n=qr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function lk(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _U(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function AU(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function TU(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ck(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function EU(e,t,r){var n=qr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function uk(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function $U(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function DU(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function RU(e,t,r){var n=qr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function IU(e,t,r){var n=qr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function LU(e,t,r){var n=kU.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function BU(e,t,r){var n=qr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function FU(e,t,r){var n=qr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function fk(e,t){return mt(e.getDate(),t,2)}function zU(e,t){return mt(e.getHours(),t,2)}function GU(e,t){return mt(e.getHours()%12||12,t,2)}function UU(e,t){return mt(1+jf.count(Ei(e),e),t,3)}function xC(e,t){return mt(e.getMilliseconds(),t,3)}function WU(e,t){return xC(e,t)+"000"}function VU(e,t){return mt(e.getMonth()+1,t,2)}function HU(e,t){return mt(e.getMinutes(),t,2)}function XU(e,t){return mt(e.getSeconds(),t,2)}function KU(e){var t=e.getDay();return t===0?7:t}function YU(e,t){return mt(ap.count(Ei(e)-1,e),t,2)}function bC(e){var t=e.getDay();return t>=4||t===0?Nl(e):Nl.ceil(e)}function qU(e,t){return e=bC(e),mt(Nl.count(Ei(e),e)+(Ei(e).getDay()===4),t,2)}function ZU(e){return e.getDay()}function QU(e,t){return mt(E0.count(Ei(e)-1,e),t,2)}function JU(e,t){return mt(e.getFullYear()%100,t,2)}function eW(e,t){return e=bC(e),mt(e.getFullYear()%100,t,2)}function tW(e,t){return mt(e.getFullYear()%1e4,t,4)}function rW(e,t){var r=e.getDay();return e=r>=4||r===0?Nl(e):Nl.ceil(e),mt(e.getFullYear()%1e4,t,4)}function nW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mt(t/60|0,"0",2)+mt(t%60,"0",2)}function dk(e,t){return mt(e.getUTCDate(),t,2)}function aW(e,t){return mt(e.getUTCHours(),t,2)}function iW(e,t){return mt(e.getUTCHours()%12||12,t,2)}function oW(e,t){return mt(1+np.count($i(e),e),t,3)}function wC(e,t){return mt(e.getUTCMilliseconds(),t,3)}function sW(e,t){return wC(e,t)+"000"}function lW(e,t){return mt(e.getUTCMonth()+1,t,2)}function cW(e,t){return mt(e.getUTCMinutes(),t,2)}function uW(e,t){return mt(e.getUTCSeconds(),t,2)}function fW(e){var t=e.getUTCDay();return t===0?7:t}function dW(e,t){return mt(ip.count($i(e)-1,e),t,2)}function kC(e){var t=e.getUTCDay();return t>=4||t===0?Ol(e):Ol.ceil(e)}function hW(e,t){return e=kC(e),mt(Ol.count($i(e),e)+($i(e).getUTCDay()===4),t,2)}function pW(e){return e.getUTCDay()}function gW(e,t){return mt($0.count($i(e)-1,e),t,2)}function mW(e,t){return mt(e.getUTCFullYear()%100,t,2)}function yW(e,t){return e=kC(e),mt(e.getUTCFullYear()%100,t,2)}function vW(e,t){return mt(e.getUTCFullYear()%1e4,t,4)}function xW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ol(e):Ol.ceil(e),mt(e.getUTCFullYear()%1e4,t,4)}function bW(){return"+0000"}function hk(){return"%"}function pk(e){return+e}function gk(e){return Math.floor(+e/1e3)}var Bs,SC,jC;wW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wW(e){return Bs=wU(e),SC=Bs.format,Bs.parse,jC=Bs.utcFormat,Bs.utcParse,Bs}function kW(e){return new Date(e)}function SW(e){return e instanceof Date?+e:+new Date(+e)}function u1(e,t,r,n,a,i,o,s,l,u){var f=qx(),d=f.invert,h=f.domain,p=u(".%L"),y=u(":%S"),m=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),g=u("%b %d"),b=u("%B"),S=u("%Y");function k(w){return(l(w)<w?p:s(w)<w?y:o(w)<w?m:i(w)<w?x:n(w)<w?a(w)<w?v:g:r(w)<w?b:S)(w)}return f.invert=function(w){return new Date(d(w))},f.domain=function(w){return arguments.length?h(Array.from(w,SW)):h().map(kW)},f.ticks=function(w){var C=h();return e(C[0],C[C.length-1],w??10)},f.tickFormat=function(w,C){return C==null?k:u(C)},f.nice=function(w){var C=h();return(!w||typeof w.range!="function")&&(w=t(C[0],C[C.length-1],w??10)),w?h(uC(C,w)):f},f.copy=function(){return Sf(f,u1(e,t,r,n,a,i,o,s,l,u))},f}function jW(){return ba.apply(u1(xU,bU,Ei,l1,ap,jf,o1,a1,es,SC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function CW(){return ba.apply(u1(yU,vU,$i,c1,ip,np,s1,i1,es,jC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function op(){var e=0,t=1,r,n,a,i,o=jn,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var p,y;return arguments.length?([p,y]=h,o=d(p,y),u):[o(0),o(1)]}}return u.range=f(sc),u.rangeRound=f(Yx),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function Ao(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function CC(){var e=_o(op()(jn));return e.copy=function(){return Ao(e,CC())},Li.apply(e,arguments)}function PC(){var e=Jx(op()).domain([1,10]);return e.copy=function(){return Ao(e,PC()).base(e.base())},Li.apply(e,arguments)}function NC(){var e=e1(op());return e.copy=function(){return Ao(e,NC()).constant(e.constant())},Li.apply(e,arguments)}function f1(){var e=t1(op());return e.copy=function(){return Ao(e,f1()).exponent(e.exponent())},Li.apply(e,arguments)}function PW(){return f1.apply(null,arguments).exponent(.5)}function OC(){var e=[],t=jn;function r(n){if(n!=null&&!isNaN(n=+n))return t((wf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(bo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>dG(e,i/n))},r.copy=function(){return OC(t).domain(e)},Li.apply(r,arguments)}function sp(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=jn,f,d=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+f(m))-i)*(n*m<n*i?s:l),u(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(u=m,p):u};function y(m){return function(x){var v,g,b;return arguments.length?([v,g,b]=x,u=LG(m,[v,g,b]),p):[u(0),u(.5),u(1)]}}return p.range=y(sc),p.rangeRound=y(Yx),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return f=m,a=m(e),i=m(t),o=m(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function MC(){var e=_o(sp()(jn));return e.copy=function(){return Ao(e,MC())},Li.apply(e,arguments)}function _C(){var e=Jx(sp()).domain([.1,1,10]);return e.copy=function(){return Ao(e,_C()).base(e.base())},Li.apply(e,arguments)}function AC(){var e=e1(sp());return e.copy=function(){return Ao(e,AC()).constant(e.constant())},Li.apply(e,arguments)}function d1(){var e=t1(sp());return e.copy=function(){return Ao(e,d1()).exponent(e.exponent())},Li.apply(e,arguments)}function NW(){return d1.apply(null,arguments).exponent(.5)}const mk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Bu,scaleDiverging:MC,scaleDivergingLog:_C,scaleDivergingPow:d1,scaleDivergingSqrt:NW,scaleDivergingSymlog:AC,scaleIdentity:cC,scaleImplicit:gy,scaleLinear:A0,scaleLog:fC,scaleOrdinal:Hx,scalePoint:ou,scalePow:r1,scaleQuantile:pC,scaleQuantize:gC,scaleRadial:hC,scaleSequential:CC,scaleSequentialLog:PC,scaleSequentialPow:f1,scaleSequentialQuantile:OC,scaleSequentialSqrt:PW,scaleSequentialSymlog:NC,scaleSqrt:sU,scaleSymlog:dC,scaleThreshold:mC,scaleTime:jW,scaleUtc:CW,tickFormat:lC},Symbol.toStringTag,{value:"Module"}));var OW=Ql;function MW(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!OW(o):r(o,s)))var s=o,l=i}return l}var TC=MW;function _W(e,t){return e>t}var AW=_W,TW=TC,EW=AW,$W=oc;function DW(e){return e&&e.length?TW(e,$W,EW):void 0}var RW=DW;const ao=Rt(RW);function IW(e,t){return e<t}var LW=IW,BW=TC,FW=LW,zW=oc;function GW(e){return e&&e.length?BW(e,zW,FW):void 0}var UW=GW;const lp=Rt(UW);var WW=Px,VW=Oo,HW=Gj,XW=zn;function KW(e,t){var r=XW(e)?WW:HW;return r(e,VW(t))}var YW=KW,qW=Fj,ZW=YW;function QW(e,t){return qW(ZW(e,t),1)}var JW=QW;const eV=Rt(JW);var tV=Fx;function rV(e,t){return tV(e,t)}var nV=rV;const bs=Rt(nV);var lc=1e9,aV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},p1,er=!0,va="[DecimalError] ",os=va+"Invalid argument: ",h1=va+"Exponent out of range: ",cc=Math.floor,Vo=Math.pow,iV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qn,Vr=1e7,Xt=7,EC=9007199254740991,D0=cc(EC/Xt),je={};je.absoluteValue=je.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};je.comparedTo=je.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};je.decimalPlaces=je.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Xt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};je.dividedBy=je.div=function(e){return Ni(this,new this.constructor(e))};je.dividedToIntegerBy=je.idiv=function(e){var t=this,r=t.constructor;return Dt(Ni(t,new r(e),0,1),r.precision)};je.equals=je.eq=function(e){return!this.cmp(e)};je.exponent=function(){return _r(this)};je.greaterThan=je.gt=function(e){return this.cmp(e)>0};je.greaterThanOrEqualTo=je.gte=function(e){return this.cmp(e)>=0};je.isInteger=je.isint=function(){return this.e>this.d.length-2};je.isNegative=je.isneg=function(){return this.s<0};je.isPositive=je.ispos=function(){return this.s>0};je.isZero=function(){return this.s===0};je.lessThan=je.lt=function(e){return this.cmp(e)<0};je.lessThanOrEqualTo=je.lte=function(e){return this.cmp(e)<1};je.logarithm=je.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(qn))throw Error(va+"NaN");if(r.s<1)throw Error(va+(r.s?"NaN":"-Infinity"));return r.eq(qn)?new n(0):(er=!1,t=Ni(Wu(r,i),Wu(e,i),i),er=!0,Dt(t,a))};je.minus=je.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RC(t,e):$C(t,(e.s=-e.s,e))};je.modulo=je.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(va+"NaN");return r.s?(er=!1,t=Ni(r,e,0,1).times(e),er=!0,r.minus(t)):Dt(new n(r),a)};je.naturalExponential=je.exp=function(){return DC(this)};je.naturalLogarithm=je.ln=function(){return Wu(this)};je.negated=je.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};je.plus=je.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$C(t,e):RC(t,(e.s=-e.s,e))};je.precision=je.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(os+e);if(t=_r(a)+1,n=a.d.length-1,r=n*Xt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};je.squareRoot=je.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(va+"NaN")}for(e=_r(s),er=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=qa(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=cc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus(Ni(s,i,o+2)).times(.5),qa(i.d).slice(0,o)===(t=qa(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Dt(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return er=!0,Dt(n,r)};je.times=je.mul=function(e){var t,r,n,a,i,o,s,l,u,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,l=h.length,u=p.length,l<u&&(i=h,h=p,p=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+p[n]*h[a-n-1]+t,i[a--]=s%Vr|0,t=s/Vr|0;i[a]=(i[a]+t)%Vr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,er?Dt(e,d.precision):e};je.toDecimalPlaces=je.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(oi(e,0,lc),t===void 0?t=n.rounding:oi(t,0,8),Dt(r,e+_r(r)+1,t))};je.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ws(n,!0):(oi(e,0,lc),t===void 0?t=a.rounding:oi(t,0,8),n=Dt(new a(n),e+1,t),r=ws(n,!0,e+1)),r};je.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?ws(a):(oi(e,0,lc),t===void 0?t=i.rounding:oi(t,0,8),n=Dt(new i(a),e+_r(a)+1,t),r=ws(n.abs(),!1,e+_r(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};je.toInteger=je.toint=function(){var e=this,t=e.constructor;return Dt(new t(e),_r(e)+1,t.rounding)};je.toNumber=function(){return+this};je.toPower=je.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,f=+(e=new l(e));if(!e.s)return new l(qn);if(s=new l(s),!s.s){if(e.s<1)throw Error(va+"Infinity");return s}if(s.eq(qn))return s;if(n=l.precision,e.eq(qn))return Dt(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=EC){for(a=new l(qn),t=Math.ceil(n/Xt+4),er=!1;r%2&&(a=a.times(s),vk(a.d,t)),r=cc(r/2),r!==0;)s=s.times(s),vk(s.d,t);return er=!0,e.s<0?new l(qn).div(a):Dt(a,n)}}else if(i<0)throw Error(va+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,er=!1,a=e.times(Wu(s,n+u)),er=!0,a=DC(a),a.s=i,a};je.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=_r(a),n=ws(a,r<=i.toExpNeg||r>=i.toExpPos)):(oi(e,1,lc),t===void 0?t=i.rounding:oi(t,0,8),a=Dt(new i(a),e,t),r=_r(a),n=ws(a,e<=r||r<=i.toExpNeg,e)),n};je.toSignificantDigits=je.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(oi(e,1,lc),t===void 0?t=n.rounding:oi(t,0,8)),Dt(new n(r),e,t)};je.toString=je.valueOf=je.val=je.toJSON=je[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=_r(e),r=e.constructor;return ws(e,t<=r.toExpNeg||t>=r.toExpPos)};function $C(e,t){var r,n,a,i,o,s,l,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),er?Dt(t,d):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(d/Xt),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/Vr|0,l[i]%=Vr;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,er?Dt(t,d):t}function oi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(os+e)}function qa(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Xt-n.length,r&&(i+=Ki(r)),i+=n;o=e[t],n=o+"",r=Xt-n.length,r&&(i+=Ki(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ni=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Vr|0,o=i/Vr|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Vr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,f,d,h,p,y,m,x,v,g,b,S,k,w,C,P,O=n.constructor,N=n.s==a.s?1:-1,$=n.d,M=a.d;if(!n.s)return new O(n);if(!a.s)throw Error(va+"Division by zero");for(l=n.e-a.e,C=M.length,k=$.length,p=new O(N),y=p.d=[],u=0;M[u]==($[u]||0);)++u;if(M[u]>($[u]||0)&&--l,i==null?g=i=O.precision:o?g=i+(_r(n)-_r(a))+1:g=i,g<0)return new O(0);if(g=g/Xt+2|0,u=0,C==1)for(f=0,M=M[0],g++;(u<k||f)&&g--;u++)b=f*Vr+($[u]||0),y[u]=b/M|0,f=b%M|0;else{for(f=Vr/(M[0]+1)|0,f>1&&(M=e(M,f),$=e($,f),C=M.length,k=$.length),S=C,m=$.slice(0,C),x=m.length;x<C;)m[x++]=0;P=M.slice(),P.unshift(0),w=M[0],M[1]>=Vr/2&&++w;do f=0,s=t(M,m,C,x),s<0?(v=m[0],C!=x&&(v=v*Vr+(m[1]||0)),f=v/w|0,f>1?(f>=Vr&&(f=Vr-1),d=e(M,f),h=d.length,x=m.length,s=t(d,m,h,x),s==1&&(f--,r(d,C<h?P:M,h))):(f==0&&(s=f=1),d=M.slice()),h=d.length,h<x&&d.unshift(0),r(m,d,x),s==-1&&(x=m.length,s=t(M,m,C,x),s<1&&(f++,r(m,C<x?P:M,x))),x=m.length):s===0&&(f++,m=[0]),y[u++]=f,s&&m[0]?m[x++]=$[S]||0:(m=[$[S]],x=1);while((S++<k||m[0]!==void 0)&&g--)}return y[0]||y.shift(),p.e=l,Dt(p,o?i+_r(p)+1:i)}}();function DC(e,t){var r,n,a,i,o,s,l=0,u=0,f=e.constructor,d=f.precision;if(_r(e)>16)throw Error(h1+_r(e));if(!e.s)return new f(qn);for(er=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Vo(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(qn),f.precision=s;;){if(a=Dt(a.times(e),s),r=r.times(++l),o=i.plus(Ni(a,r,s)),qa(o.d).slice(0,s)===qa(i.d).slice(0,s)){for(;u--;)i=Dt(i.times(i),s);return f.precision=d,t==null?(er=!0,Dt(i,d)):i}i=o}}function _r(e){for(var t=e.e*Xt,r=e.d[0];r>=10;r/=10)t++;return t}function Ng(e,t,r){if(t>e.LN10.sd())throw er=!0,r&&(e.precision=r),Error(va+"LN10 precision limit exceeded");return Dt(new e(e.LN10),t)}function Ki(e){for(var t="";e--;)t+="0";return t}function Wu(e,t){var r,n,a,i,o,s,l,u,f,d=1,h=10,p=e,y=p.d,m=p.constructor,x=m.precision;if(p.s<1)throw Error(va+(p.s?"NaN":"-Infinity"));if(p.eq(qn))return new m(0);if(t==null?(er=!1,u=x):u=t,p.eq(10))return t==null&&(er=!0),Ng(m,u);if(u+=h,m.precision=u,r=qa(y),n=r.charAt(0),i=_r(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=qa(p.d),n=r.charAt(0),d++;i=_r(p),n>1?(p=new m("0."+r),i++):p=new m(n+"."+r.slice(1))}else return l=Ng(m,u+2,x).times(i+""),p=Wu(new m(n+"."+r.slice(1)),u-h).plus(l),m.precision=x,t==null?(er=!0,Dt(p,x)):p;for(s=o=p=Ni(p.minus(qn),p.plus(qn),u),f=Dt(p.times(p),u),a=3;;){if(o=Dt(o.times(f),u),l=s.plus(Ni(o,new m(a),u)),qa(l.d).slice(0,u)===qa(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Ng(m,u+2,x).times(i+""))),s=Ni(s,new m(d),u),m.precision=x,t==null?(er=!0,Dt(s,x)):s;s=l,a+=2}}function yk(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=cc(r/Xt),e.d=[],n=(r+1)%Xt,r<0&&(n+=Xt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Xt;n<a;)e.d.push(+t.slice(n,n+=Xt));t=t.slice(n),n=Xt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),er&&(e.e>D0||e.e<-D0))throw Error(h1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Dt(e,t,r){var n,a,i,o,s,l,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Xt,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Xt),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Xt,a=n-Xt+o}if(r!==void 0&&(i=Vo(10,o-a-1),s=u/i%10|0,l=t<0||d[f+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Vo(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(i=_r(e),d.length=1,t=t-i-1,d[0]=Vo(10,(Xt-t%Xt)%Xt),e.e=cc(-t/Xt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=Vo(10,Xt-n),d[f]=a>0?(u/Vo(10,o-a)%Vo(10,a)|0)*i:0),l)for(;;)if(f==0){(d[0]+=i)==Vr&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Vr)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(er&&(e.e>D0||e.e<-D0))throw Error(h1+_r(e));return e}function RC(e,t){var r,n,a,i,o,s,l,u,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),er?Dt(t,p):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(f=o<0,f?(r=l,o=-o,s=d.length):(r=d,n=u,s=l.length),a=Math.max(Math.ceil(p/Xt),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){f=l[a]<d[a];break}o=0}for(f&&(r=l,l=d,d=r,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>o;){if(l[--a]<d[a]){for(i=a;i&&l[--i]===0;)l[i]=Vr-1;--l[i],l[a]+=Vr}l[a]-=d[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,er?Dt(t,p):t):new h(0)}function ws(e,t,r){var n,a=_r(e),i=qa(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ki(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Ki(-a-1)+i,r&&(n=r-o)>0&&(i+=Ki(n))):a>=o?(i+=Ki(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Ki(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Ki(n))),e.s<0?"-"+i:i}function vk(e,t){if(e.length>t)return e.length=t,!0}function IC(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(os+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return yk(o,i.toString())}else if(typeof i!="string")throw Error(os+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,iV.test(i))yk(o,i);else throw Error(os+i)}if(a.prototype=je,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=IC,a.config=a.set=oV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function oV(e){if(!e||typeof e!="object")throw Error(va+"Object expected");var t,r,n,a=["precision",1,lc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(cc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(os+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(os+r+": "+n);return this}var p1=IC(aV);qn=new p1(1);const Et=p1;function sV(e){return fV(e)||uV(e)||cV(e)||lV()}function lV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cV(e,t){if(e){if(typeof e=="string")return xy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xy(e,t)}}function uV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function fV(e){if(Array.isArray(e))return xy(e)}function xy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dV=function(t){return t},LC={},BC=function(t){return t===LC},xk=function(t){return function r(){return arguments.length===0||arguments.length===1&&BC(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},hV=function e(t,r){return t===1?r:xk(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==LC}).length;return o>=t?r.apply(void 0,a):e(t-o,xk(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var f=a.map(function(d){return BC(d)?l.shift():d});return r.apply(void 0,sV(f).concat(l))}))})},cp=function(t){return hV(t.length,t)},by=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},pV=cp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),gV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return dV;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},wy=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},FC=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,l){return s===r[l]})||(r=i,n=t.apply(void 0,i)),n}};function mV(e){var t;return e===0?t=1:t=Math.floor(new Et(e).abs().log(10).toNumber())+1,t}function yV(e,t,r){for(var n=new Et(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var vV=cp(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),xV=cp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),bV=cp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const up={rangeStep:yV,getDigitCount:mV,interpolateNumber:vV,uninterpolateNumber:xV,uninterpolateTruncation:bV};function ky(e){return SV(e)||kV(e)||zC(e)||wV()}function wV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function SV(e){if(Array.isArray(e))return Sy(e)}function Vu(e,t){return PV(e)||CV(e,t)||zC(e,t)||jV()}function jV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zC(e,t){if(e){if(typeof e=="string")return Sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sy(e,t)}}function Sy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function PV(e){if(Array.isArray(e))return e}function GC(e){var t=Vu(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function UC(e,t,r){if(e.lte(0))return new Et(0);var n=up.getDigitCount(e.toNumber()),a=new Et(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new Et(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?l:new Et(Math.ceil(l))}function NV(e,t,r){var n=1,a=new Et(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Et(10).pow(up.getDigitCount(e)-1),a=new Et(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Et(Math.floor(e)))}else e===0?a=new Et(Math.floor((t-1)/2)):r||(a=new Et(Math.floor(e)));var o=Math.floor((t-1)/2),s=gV(pV(function(l){return a.add(new Et(l-o).mul(n)).toNumber()}),by);return s(0,t)}function WC(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Et(0),tickMin:new Et(0),tickMax:new Et(0)};var i=UC(new Et(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Et(0):(o=new Et(e).add(t).div(2),o=o.sub(new Et(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new Et(t).sub(o).div(i).toNumber()),u=s+l+1;return u>r?WC(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new Et(s).mul(i)),tickMax:o.add(new Et(l).mul(i))})}function OV(e){var t=Vu(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=GC([r,n]),l=Vu(s,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(ky(by(0,a-1).map(function(){return 1/0}))):[].concat(ky(by(0,a-1).map(function(){return-1/0})),[f]);return r>n?wy(d):d}if(u===f)return NV(u,a,i);var h=WC(u,f,o,i),p=h.step,y=h.tickMin,m=h.tickMax,x=up.rangeStep(y,m.add(new Et(.1).mul(p)),p);return r>n?wy(x):x}function MV(e,t){var r=Vu(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=GC([n,a]),s=Vu(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var f=Math.max(t,2),d=UC(new Et(u).sub(l).div(f-1),i,0),h=[].concat(ky(up.rangeStep(new Et(l),new Et(u).sub(new Et(.99).mul(d)),d)),[u]);return n>a?wy(h):h}var _V=FC(OV),AV=FC(MV),TV="Invariant failed";function ks(e,t){throw new Error(TV)}var EV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ml(e){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(e)}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(this,arguments)}function $V(e,t){return LV(e)||IV(e,t)||RV(e,t)||DV()}function DV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RV(e,t){if(e){if(typeof e=="string")return bk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bk(e,t)}}function bk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function LV(e){if(Array.isArray(e))return e}function BV(e,t){if(e==null)return{};var r=FV(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XC(n.key),n)}}function UV(e,t,r){return t&&GV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WV(e,t,r){return t=I0(t),VV(e,VC()?Reflect.construct(t,r||[],I0(e).constructor):t.apply(e,r))}function VV(e,t){if(t&&(Ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HV(e)}function HV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VC=function(){return!!e})()}function I0(e){return I0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I0(e)}function XV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jy(e,t)}function jy(e,t){return jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jy(e,t)}function HC(e,t,r){return t=XC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XC(e){var t=KV(e,"string");return Ml(t)=="symbol"?t:t+""}function KV(e,t){if(Ml(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uc=function(e){function t(){return zV(this,t),WV(this,t,arguments)}return XV(t,e),UV(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=BV(n,EV),p=Ke(h,!1);this.props.direction==="x"&&f.type!=="number"&&ks();var y=l.map(function(m){var x=u(m,s),v=x.x,g=x.y,b=x.value,S=x.errorVal;if(!S)return null;var k=[],w,C;if(Array.isArray(S)){var P=$V(S,2);w=P[0],C=P[1]}else w=C=S;if(i==="vertical"){var O=f.scale,N=g+a,$=N+o,M=N-o,_=O(b-w),D=O(b+C);k.push({x1:D,y1:$,x2:D,y2:M}),k.push({x1:_,y1:N,x2:D,y2:N}),k.push({x1:_,y1:$,x2:_,y2:M})}else if(i==="horizontal"){var I=d.scale,B=v+a,A=B-o,E=B+o,L=I(b-w),U=I(b+C);k.push({x1:A,y1:U,x2:E,y2:U}),k.push({x1:B,y1:L,x2:B,y2:U}),k.push({x1:A,y1:L,x2:E,y2:L})}return z.createElement(bt,R0({className:"recharts-errorBar",key:"bar-".concat(k.map(function(J){return"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))},p),k.map(function(J){return z.createElement("line",R0({},J,{key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))}))});return z.createElement(bt,{className:"recharts-errorBars"},y)}}])}(z.Component);HC(uc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});HC(uc,"displayName","ErrorBar");function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(n){YV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YV(e,t,r){return t=qV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qV(e){var t=ZV(e,"string");return Hu(t)=="symbol"?t:t+""}function ZV(e,t){if(Hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KC=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Yn(r,ei);if(!o)return null;var s=ei.defaultProps,l=s!==void 0?Fo(Fo({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,y=p.sectors||p.data||[];return f.concat(y.map(function(m){return{type:o.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?Fo(Fo({},h),d.props):{},y=p.dataKey,m=p.name,x=p.legendType,v=p.hide;return{inactive:v,dataKey:y,type:l.iconType||x||"square",color:g1(d),value:m||y,payload:p}}),Fo(Fo(Fo({},l),ei.getWithHeight(o,a)),{},{payload:u,item:o})};function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function kk(e){return tH(e)||eH(e)||JV(e)||QV()}function QV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JV(e,t){if(e){if(typeof e=="string")return Cy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(e,t)}}function eH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tH(e){if(Array.isArray(e))return Cy(e)}function Cy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sk(Object(r),!0).forEach(function(n){dl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dl(e,t,r){return t=rH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=nH(e,"string");return Xu(t)=="symbol"?t:t+""}function nH(e,t){if(Xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fr(e,t,r){return Xe(e)||Xe(t)?r:Br(t)?ga(e,t,r):Ze(t)?t(e):r}function su(e,t,r,n){var a=eV(e,function(s){return Fr(s,t)});if(r==="number"){var i=a.filter(function(s){return he(s)||parseFloat(s)});return i.length?[lp(i),ao(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!Xe(s)}):a;return o.map(function(s){return Br(s)||s instanceof Date?s:""})}var aH=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,h=u>=s-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(Ra(d-f)!==Ra(h-d)){var y=[];if(Ra(h-d)===Ra(l[1]-l[0])){p=h;var m=d+l[1]-l[0];y[0]=Math.min(m,(m+f)/2),y[1]=Math.max(m,(m+f)/2)}else{p=f;var x=h+l[1]-l[0];y[0]=Math.min(d,(x+d)/2),y[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>v[0]&&t<=v[1]||t>=y[0]&&t<=y[1]){o=a[u].index;break}}else{var g=Math.min(f,h),b=Math.max(f,h);if(t>(g+d)/2&&t<=(b+d)/2){o=a[u].index;break}}}else for(var S=0;S<s;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},g1=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?hr(hr({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},iH=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,u=s.length;l<u;l++)for(var f=i[s[l]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var y=f[d[h]],m=y.items,x=y.cateAxisId,v=m.filter(function(C){return ji(C.type).indexOf("Bar")>=0});if(v&&v.length){var g=v[0].type.defaultProps,b=g!==void 0?hr(hr({},g),v[0].props):v[0].props,S=b.barSize,k=b[x];o[k]||(o[k]=[]);var w=Xe(S)?r:S;o[k].push({item:v[0],stackList:v.slice(1),barSize:Xe(w)?void 0:xs(w,n,0)})}}return o},oH=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var u=xs(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/l,y=o.reduce(function(S,k){return S+k.barSize||0},0);y+=(l-1)*u,y>=a&&(y-=(l-1)*u,u=0),y>=a&&p>0&&(h=!0,p*=.9,y=l*p);var m=(a-y)/2>>0,x={offset:m-u,size:0};f=o.reduce(function(S,k){var w={item:k.item,position:{offset:x.offset+x.size+u,size:h?p:k.barSize}},C=[].concat(kk(S),[w]);return x=C[C.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){C.push({item:P,position:x})}),C},d)}else{var v=xs(n,a,0,!0);a-2*v-(l-1)*u<=0&&(u=0);var g=(a-2*v-(l-1)*u)/l;g>1&&(g>>=0);var b=s===+s?Math.min(g,s):g;f=o.reduce(function(S,k,w){var C=[].concat(kk(S),[{item:k.item,position:{offset:v+(g+u)*w+(g-b)/2,size:b}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){C.push({item:P,position:C[C.length-1].position})}),C},d)}return f},sH=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=KC({children:i,legendWidth:l});if(u){var f=a||{},d=f.width,h=f.height,p=u.align,y=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&y==="middle")&&p!=="center"&&he(t[p]))return hr(hr({},t),{},dl({},p,t[p]+(d||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&y!=="middle"&&he(t[y]))return hr(hr({},t),{},dl({},y,t[y]+(h||0)))}return t},lH=function(t,r,n){return Xe(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},YC=function(t,r,n,a,i){var o=r.props.children,s=Ln(o,uc).filter(function(u){return lH(a,i,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Fr(f,n);if(Xe(d))return u;var h=Array.isArray(d)?[lp(d),ao(d)]:[d,d],p=l.reduce(function(y,m){var x=Fr(f,m,0),v=h[0]-Math.abs(Array.isArray(x)?x[0]:x),g=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(v,y[0]),Math.max(g,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},cH=function(t,r,n,a,i){var o=r.map(function(s){return YC(t,s,n,i,a)}).filter(function(s){return!Xe(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},qC=function(t,r,n,a,i){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&YC(t,l,u,a)||su(t,u,n,i)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,l.push(u[f]));return l},[])},ZC=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},QC=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===r&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate});return i||s.push(r),o||s.push(n),s},ki=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Ra(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=i?i.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!nc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:i?i[d]:d,index:h,offset:u}})},Og=new WeakMap,ld=function(t,r){if(typeof r!="function")return t;Og.has(t)||Og.set(t,new WeakMap);var n=Og.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},uH=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Bu(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:A0(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:ou(),realScaleType:"point"}:i==="category"?{scale:Bu(),realScaleType:"band"}:{scale:A0(),realScaleType:"linear"};if(vs(a)){var l="scale".concat(Kh(a));return{scale:(mk[l]||ou)(),realScaleType:mk[l]?l:"point"}}return Ze(a)?{scale:a}:{scale:ou(),realScaleType:"point"}},jk=1e-4,fH=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-jk,o=Math.max(a[0],a[1])+jk,s=t(r[0]),l=t(r[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([r[0],r[n-1]])}},dH=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},hH=function(t,r){if(!r||r.length!==2||!he(r[0])||!he(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!he(t[0])||t[0]<n)&&(i[0]=n),(!he(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},pH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var l=nc(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},gH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=nc(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},mH={sign:pH,expand:A7,none:wl,silhouette:T7,wiggle:E7,positive:gH},yH=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=mH[n],o=_7().keys(a).value(function(s,l){return+Fr(s,l,0)}).order(qm).offset(i);return o(t)},vH=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(d,h){var p,y=(p=h.type)!==null&&p!==void 0&&p.defaultProps?hr(hr({},h.type.defaultProps),h.props):h.props,m=y.stackId,x=y.hide;if(x)return d;var v=y[n],g=d[v]||{hasStack:!1,stackGroups:{}};if(Br(m)){var b=g.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(h),g.hasStack=!0,g.stackGroups[m]=b}else g.stackGroups[Ms("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return hr(hr({},d),{},dl({},v,g))},l),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,x){var v=p.stackGroups[x];return hr(hr({},m),{},dl({},x,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:yH(t,v.items,i)}))},y)}return hr(hr({},d),{},dl({},h,p))},f)},xH=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=_V(u,i,s);return t.domain([lp(f),ao(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),h=AV(d,i,s);return{niceTicks:h}}return null};function _l(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Xe(a[t.dataKey])){var s=l0(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Fr(a,Xe(o)?t.dataKey:o);return Xe(l)?null:t.scale(l)}var Ck=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=Fr(o,r.dataKey,r.domain[s]);return Xe(l)?null:r.scale(l)-i/2+a},bH=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},wH=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?hr(hr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Br(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},kH=function(t){return t.reduce(function(r,n){return[lp(n.concat([r[0]]).filter(he)),ao(n.concat([r[1]]).filter(he))]},[1/0,-1/0])},JC=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(u,f){var d=kH(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Pk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Nk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Py=function(t,r,n){if(Ze(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(he(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(Pk.test(t[0])){var i=+Pk.exec(t[0])[1];a[0]=r[0]-i}else Ze(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(he(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(Nk.test(t[1])){var o=+Nk.exec(t[1])[1];a[1]=r[1]+o}else Ze(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},L0=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=Gx(r,function(d){return d.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},Ok=function(t,r,n){return!t||!t.length||bs(t,ga(n,"type.defaultProps.domain"))?r:t},eP=function(t,r){var n=t.type.defaultProps?hr(hr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,f=n.hide;return hr(hr({},Ke(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:g1(t),value:Fr(r,a),type:l,payload:r,chartType:u,hide:f})};function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function Mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mk(Object(r),!0).forEach(function(n){SH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SH(e,t,r){return t=jH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jH(e){var t=CH(e,"string");return Ku(t)=="symbol"?t:t+""}function CH(e,t){if(Ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B0=Math.PI/180,PH=function(t){return t*180/Math.PI},tn=function(t,r,n,a){return{x:t+Math.cos(-B0*a)*n,y:r+Math.sin(-B0*a)*n}},NH=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},OH=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=NH({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(n-i)/s,u=Math.acos(l);return a>o&&(u=2*Math.PI-u),{radius:s,angle:PH(u),angleInRadian:u}},MH=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},_H=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},Ak=function(t,r){var n=t.x,a=t.y,i=OH({x:n,y:a},r),o=i.radius,s=i.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var f=MH(r),d=f.startAngle,h=f.endAngle,p=s,y;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;y=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=d}return y?_k(_k({},r),{},{radius:o,angle:_H(p,r)}):null};function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}var AH=["offset"];function TH(e){return RH(e)||DH(e)||$H(e)||EH()}function EH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $H(e,t){if(e){if(typeof e=="string")return Ny(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ny(e,t)}}function DH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RH(e){if(Array.isArray(e))return Ny(e)}function Ny(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IH(e,t){if(e==null)return{};var r=LH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){BH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BH(e,t,r){return t=FH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FH(e){var t=zH(e,"string");return Yu(t)=="symbol"?t:t+""}function zH(e,t){if(Yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qu.apply(this,arguments)}var GH=function(t){var r=t.value,n=t.formatter,a=Xe(t.children)?r:t.children;return Ze(n)?n(a):a},UH=function(t,r){var n=Ra(r-t),a=Math.min(Math.abs(r-t),360);return n*a},WH=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,u=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,y=l.endAngle,m=l.clockWise,x=(d+h)/2,v=UH(p,y),g=v>=0?1:-1,b,S;a==="insideStart"?(b=p+g*o,S=m):a==="insideEnd"?(b=y-g*o,S=!m):a==="end"&&(b=y+g*o,S=m),S=v<=0?S:!S;var k=tn(u,f,x,b),w=tn(u,f,x,b+(S?1:-1)*359),C="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),P=Xe(t.id)?Ms("recharts-radial-line-"):t.id;return z.createElement("text",qu({},n,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",s)}),z.createElement("defs",null,z.createElement("path",{id:P,d:C})),z.createElement("textPath",{xlinkHref:"#".concat(P)},r))},VH=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,l=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,h=(f+d)/2;if(a==="outside"){var p=tn(o,s,u+n,h),y=p.x,m=p.y;return{x:y,y:m,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,v=tn(o,s,x,h),g=v.x,b=v.y;return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},HH=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,l=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,p=d>0?"end":"start",y=d>0?"start":"end",m=u>=0?1:-1,x=m*a,v=m>0?"end":"start",g=m>0?"start":"end";if(i==="top"){var b={x:s+u/2,y:l-d*a,textAnchor:"middle",verticalAnchor:p};return Rr(Rr({},b),n?{height:Math.max(l-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:s+u/2,y:l+f+h,textAnchor:"middle",verticalAnchor:y};return Rr(Rr({},S),n?{height:Math.max(n.y+n.height-(l+f),0),width:u}:{})}if(i==="left"){var k={x:s-x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"};return Rr(Rr({},k),n?{width:Math.max(k.x-n.x,0),height:f}:{})}if(i==="right"){var w={x:s+u+x,y:l+f/2,textAnchor:g,verticalAnchor:"middle"};return Rr(Rr({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:f}:{})}var C=n?{width:u,height:f}:{};return i==="insideLeft"?Rr({x:s+x,y:l+f/2,textAnchor:g,verticalAnchor:"middle"},C):i==="insideRight"?Rr({x:s+u-x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"},C):i==="insideTop"?Rr({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:y},C):i==="insideBottom"?Rr({x:s+u/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},C):i==="insideTopLeft"?Rr({x:s+x,y:l+h,textAnchor:g,verticalAnchor:y},C):i==="insideTopRight"?Rr({x:s+u-x,y:l+h,textAnchor:v,verticalAnchor:y},C):i==="insideBottomLeft"?Rr({x:s+x,y:l+f-h,textAnchor:g,verticalAnchor:p},C):i==="insideBottomRight"?Rr({x:s+u-x,y:l+f-h,textAnchor:v,verticalAnchor:p},C):Jl(i)&&(he(i.x)||Qo(i.x))&&(he(i.y)||Qo(i.y))?Rr({x:s+xs(i.x,u),y:l+xs(i.y,f),textAnchor:"end",verticalAnchor:"end"},C):Rr({x:s+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},XH=function(t){return"cx"in t&&he(t.cx)};function en(e){var t=e.offset,r=t===void 0?5:t,n=IH(e,AH),a=Rr({offset:r},n),i=a.viewBox,o=a.position,s=a.value,l=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!i||Xe(s)&&Xe(l)&&!j.isValidElement(u)&&!Ze(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var p;if(Ze(u)){if(p=j.createElement(u,a),j.isValidElement(p))return p}else p=GH(a);var y=XH(i),m=Ke(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return WH(a,p,m);var x=y?VH(a):HH(a);return z.createElement(S0,qu({className:ot("recharts-label",d)},m,x,{breakAll:h}),p)}en.displayName="Label";var tP=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,y=t.left,m=t.width,x=t.height,v=t.clockWise,g=t.labelViewBox;if(g)return g;if(he(m)&&he(x)){if(he(d)&&he(h))return{x:d,y:h,width:m,height:x};if(he(p)&&he(y))return{x:p,y,width:m,height:x}}return he(d)&&he(h)?{x:d,y:h,width:0,height:0}:he(r)&&he(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||l||s||0,clockWise:v}:t.viewBox?t.viewBox:{}},KH=function(t,r){return t?t===!0?z.createElement(en,{key:"label-implicit",viewBox:r}):Br(t)?z.createElement(en,{key:"label-implicit",viewBox:r,value:t}):j.isValidElement(t)?t.type===en?j.cloneElement(t,{key:"label-implicit",viewBox:r}):z.createElement(en,{key:"label-implicit",content:t,viewBox:r}):Ze(t)?z.createElement(en,{key:"label-implicit",content:t,viewBox:r}):Jl(t)?z.createElement(en,qu({viewBox:r},t,{key:"label-implicit"})):null:null},YH=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=tP(t),o=Ln(a,en).map(function(l,u){return j.cloneElement(l,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=KH(t.label,r||i);return[s].concat(TH(o))};en.parseViewBox=tP;en.renderCallByParent=YH;function qH(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var ZH=qH;const QH=Rt(ZH);function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}var JH=["valueAccessor"],eX=["data","dataKey","clockWise","id","textBreakAll"];function tX(e){return iX(e)||aX(e)||nX(e)||rX()}function rX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nX(e,t){if(e){if(typeof e=="string")return Oy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oy(e,t)}}function aX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iX(e){if(Array.isArray(e))return Oy(e)}function Oy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}function Ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ek(Object(r),!0).forEach(function(n){oX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ek(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oX(e,t,r){return t=sX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sX(e){var t=lX(e,"string");return Zu(t)=="symbol"?t:t+""}function lX(e,t){if(Zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dk(e,t){if(e==null)return{};var r=cX(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var uX=function(t){return Array.isArray(t.value)?QH(t.value):t.value};function ri(e){var t=e.valueAccessor,r=t===void 0?uX:t,n=Dk(e,JH),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=Dk(n,eX);return!a||!a.length?null:z.createElement(bt,{className:"recharts-label-list"},a.map(function(f,d){var h=Xe(i)?r(f,d):Fr(f&&f.payload,i),p=Xe(s)?{}:{id:"".concat(s,"-").concat(d)};return z.createElement(en,F0({},Ke(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:en.parseViewBox(Xe(o)?f:$k($k({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ri.displayName="LabelList";function fX(e,t){return e?e===!0?z.createElement(ri,{key:"labelList-implicit",data:t}):z.isValidElement(e)||Ze(e)?z.createElement(ri,{key:"labelList-implicit",data:t,content:e}):Jl(e)?z.createElement(ri,F0({data:t},e,{key:"labelList-implicit"})):null:null}function dX(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Ln(n,ri).map(function(o,s){return j.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=fX(e.label,t);return[i].concat(tX(a))}ri.renderCallByParent=dX;function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function My(){return My=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},My.apply(this,arguments)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(n){hX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hX(e,t,r){return t=pX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=gX(e,"string");return Qu(t)=="symbol"?t:t+""}function gX(e,t){if(Qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mX=function(t,r){var n=Ra(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},cd=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,f=l*(s?1:-1)+a,d=Math.asin(l/f)/B0,h=u?i:i+o*d,p=tn(r,n,f,h),y=tn(r,n,a,h),m=u?i-o*d:i,x=tn(r,n,f*Math.cos(d*B0),m);return{center:p,circleTangency:y,lineTangency:x,theta:d}},rP=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=mX(o,s),u=o+l,f=tn(r,n,i,o),d=tn(r,n,i,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=tn(r,n,a,o),y=tn(r,n,a,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},yX=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Ra(f-u),h=cd({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),p=h.circleTangency,y=h.lineTangency,m=h.theta,x=cd({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:l}),v=x.circleTangency,g=x.lineTangency,b=x.theta,S=l?Math.abs(u-f):Math.abs(u-f)-m-b;if(S<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):rP({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var k="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var w=cd({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),C=w.circleTangency,P=w.lineTangency,O=w.theta,N=cd({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),$=N.circleTangency,M=N.lineTangency,_=N.theta,D=l?Math.abs(u-f):Math.abs(u-f)-O-_;if(D<0&&o===0)return"".concat(k,"L").concat(r,",").concat(n,"Z");k+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat($.x,",").concat($.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(D>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else k+="L".concat(r,",").concat(n,"Z");return k},vX={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nP=function(t){var r=Ik(Ik({},vX),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(o<i||f===d)return null;var p=ot("recharts-sector",h),y=o-i,m=xs(s,y,0,!0),x;return m>0&&Math.abs(f-d)<360?x=yX({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}):x=rP({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),z.createElement("path",My({},Ke(r,!0),{className:p,d:x,role:"img"}))};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_y.apply(this,arguments)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){xX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xX(e,t,r){return t=bX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=wX(e,"string");return Ju(t)=="symbol"?t:t+""}function wX(e,t){if(Ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fk={curveBasisClosed:x7,curveBasisOpen:b7,curveBasis:v7,curveBumpX:a7,curveBumpY:i7,curveLinearClosed:w7,curveLinear:qh,curveMonotoneX:k7,curveMonotoneY:S7,curveNatural:j7,curveStep:C7,curveStepAfter:N7,curveStepBefore:P7},ud=function(t){return t.x===+t.x&&t.y===+t.y},Fc=function(t){return t.x},zc=function(t){return t.y},kX=function(t,r){if(Ze(t))return t;var n="curve".concat(Kh(t));return(n==="curveMonotone"||n==="curveBump")&&r?Fk["".concat(n).concat(r==="vertical"?"Y":"X")]:Fk[n]||qh},SX=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,f=kX(n,s),d=u?i.filter(function(m){return ud(m)}):i,h;if(Array.isArray(o)){var p=u?o.filter(function(m){return ud(m)}):o,y=d.map(function(m,x){return Bk(Bk({},m),{},{base:p[x]})});return s==="vertical"?h=ed().y(zc).x1(Fc).x0(function(m){return m.base.x}):h=ed().x(Fc).y1(zc).y0(function(m){return m.base.y}),h.defined(ud).curve(f),h(y)}return s==="vertical"&&he(o)?h=ed().y(zc).x1(Fc).x0(o):he(o)?h=ed().x(Fc).y1(zc).y0(o):h=ij().x(Fc).y(zc),h.defined(ud).curve(f),h(d)},ss=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?SX(t):a;return j.createElement("path",_y({},Ke(t,!1),c0(t),{className:ot("recharts-curve",r),d:o,ref:i}))},aP={exports:{}},jX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CX=jX,PX=CX;function iP(){}function oP(){}oP.resetWarningCache=iP;var NX=function(){function e(n,a,i,o,s,l){if(l!==PX){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:oP,resetWarningCache:iP};return r.PropTypes=r,r};aP.exports=NX();var OX=aP.exports;const Ot=Rt(OX),{getOwnPropertyNames:MX,getOwnPropertySymbols:_X}=Object,{hasOwnProperty:AX}=Object.prototype;function Mg(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function fd(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const l=e(r,n,a);return i.delete(r),i.delete(n),l}}function TX(e){return e!=null?e[Symbol.toStringTag]:void 0}function zk(e){return MX(e).concat(_X(e))}const EX=Object.hasOwn||((e,t)=>AX.call(e,t));function Ts(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const $X="__v",DX="__o",RX="_owner",{getOwnPropertyDescriptor:Gk,keys:Uk}=Object;function IX(e,t){return e.byteLength===t.byteLength&&z0(new Uint8Array(e),new Uint8Array(t))}function LX(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function BX(e,t){return e.byteLength===t.byteLength&&z0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function FX(e,t){return Ts(e.getTime(),t.getTime())}function zX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function GX(e,t){return e===t}function Wk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,l=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const h=o.value,p=s.value;if(r.equals(h[0],p[0],l,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;l++}return!0}const UX=Ts;function WX(e,t,r){const n=Uk(e);let a=n.length;if(Uk(t).length!==a)return!1;for(;a-- >0;)if(!sP(e,t,r,n[a]))return!1;return!0}function Gc(e,t,r){const n=zk(e);let a=n.length;if(zk(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!sP(e,t,r,i)||(o=Gk(e,i),s=Gk(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function VX(e,t){return Ts(e.valueOf(),t.valueOf())}function HX(e,t){return e.source===t.source&&e.flags===t.flags}function Vk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const l=t.values();let u=!1,f=0;for(;(s=l.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function z0(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function XX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function sP(e,t,r,n){return(n===RX||n===DX||n===$X)&&(e.$$typeof||t.$$typeof)?!0:EX(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const KX="[object ArrayBuffer]",YX="[object Arguments]",qX="[object Boolean]",ZX="[object DataView]",QX="[object Date]",JX="[object Error]",eK="[object Map]",tK="[object Number]",rK="[object Object]",nK="[object RegExp]",aK="[object Set]",iK="[object String]",oK={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},sK="[object URL]",lK=Object.prototype.toString;function cK({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:y}){return function(x,v,g){if(x===v)return!0;if(x==null||v==null)return!1;const b=typeof x;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?s(x,v,g):b==="function"?i(x,v,g):!1;const S=x.constructor;if(S!==v.constructor)return!1;if(S===Object)return l(x,v,g);if(Array.isArray(x))return t(x,v,g);if(S===Date)return n(x,v,g);if(S===RegExp)return f(x,v,g);if(S===Map)return o(x,v,g);if(S===Set)return d(x,v,g);const k=lK.call(x);if(k===QX)return n(x,v,g);if(k===nK)return f(x,v,g);if(k===eK)return o(x,v,g);if(k===aK)return d(x,v,g);if(k===rK)return typeof x.then!="function"&&typeof v.then!="function"&&l(x,v,g);if(k===sK)return p(x,v,g);if(k===JX)return a(x,v,g);if(k===YX)return l(x,v,g);if(oK[k])return h(x,v,g);if(k===KX)return e(x,v,g);if(k===ZX)return r(x,v,g);if(k===qX||k===tK||k===iK)return u(x,v,g);if(y){let w=y[k];if(!w){const C=TX(x);C&&(w=y[C])}if(w)return w(x,v,g)}return!1}}function uK({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:IX,areArraysEqual:r?Gc:LX,areDataViewsEqual:BX,areDatesEqual:FX,areErrorsEqual:zX,areFunctionsEqual:GX,areMapsEqual:r?Mg(Wk,Gc):Wk,areNumbersEqual:UX,areObjectsEqual:r?Gc:WX,arePrimitiveWrappersEqual:VX,areRegExpsEqual:HX,areSetsEqual:r?Mg(Vk,Gc):Vk,areTypedArraysEqual:r?Mg(z0,Gc):z0,areUrlsEqual:XX,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=fd(n.areArraysEqual),i=fd(n.areMapsEqual),o=fd(n.areObjectsEqual),s=fd(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function fK(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function dK({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,l){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,l,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,l){return t(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,l){return t(s,l,i)}}const hK=To();To({strict:!0});To({circular:!0});To({circular:!0,strict:!0});To({createInternalComparator:()=>Ts});To({strict:!0,createInternalComparator:()=>Ts});To({circular:!0,createInternalComparator:()=>Ts});To({circular:!0,createInternalComparator:()=>Ts,strict:!0});function To(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=uK(e),o=cK(i),s=r?r(o):fK(o);return dK({circular:t,comparator:o,createState:n,equals:s,strict:a})}function pK(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Hk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):pK(a)};requestAnimationFrame(n)}function Ay(e){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(e)}function gK(e){return xK(e)||vK(e)||yK(e)||mK()}function mK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yK(e,t){if(e){if(typeof e=="string")return Xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xk(e,t)}}function Xk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xK(e){if(Array.isArray(e))return e}function bK(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=gK(o),l=s[0],u=s.slice(1);if(typeof l=="number"){Hk(a.bind(null,u),l);return}a(l),Hk(a.bind(null,u));return}Ay(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function Kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kk(Object(r),!0).forEach(function(n){lP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lP(e,t,r){return t=wK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wK(e){var t=kK(e,"string");return ef(t)==="symbol"?t:String(t)}function kK(e,t){if(ef(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ef(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SK=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},jK=function(t){return t},CK=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},lu=function(t,r){return Object.keys(r).reduce(function(n,a){return Yk(Yk({},n),{},lP({},a,t(a,r[a])))},{})},qk=function(t,r,n){return t.map(function(a){return"".concat(CK(a)," ").concat(r,"ms ").concat(n)}).join(",")};function PK(e,t){return MK(e)||OK(e,t)||cP(e,t)||NK()}function NK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function MK(e){if(Array.isArray(e))return e}function _K(e){return EK(e)||TK(e)||cP(e)||AK()}function AK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cP(e,t){if(e){if(typeof e=="string")return Ty(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ty(e,t)}}function TK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EK(e){if(Array.isArray(e))return Ty(e)}function Ty(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G0=1e-4,uP=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},fP=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},Zk=function(t,r){return function(n){var a=uP(t,r);return fP(a,n)}},$K=function(t,r){return function(n){var a=uP(t,r),i=[].concat(_K(a.map(function(o,s){return o*s}).slice(1)),[0]);return fP(i,n)}},Qk=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=PK(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=Zk(a,o),h=Zk(i,s),p=$K(a,o),y=function(v){return v>1?1:v<0?0:v},m=function(v){for(var g=v>1?1:v,b=g,S=0;S<8;++S){var k=d(b)-g,w=p(b);if(Math.abs(k-g)<G0||w<G0)return h(b);b=y(b-k/w)}return h(b)};return m.isStepper=!1,m},DK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(f,d,h){var p=-(f-d)*n,y=h*i,m=h+(p-y)*s/1e3,x=h*s/1e3+f;return Math.abs(x-d)<G0&&Math.abs(m)<G0?[d,0]:[x,m]};return l.isStepper=!0,l.dt=s,l},RK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Qk(a);case"spring":return DK();default:if(a.split("(")[0]==="cubic-bezier")return Qk(a)}return typeof a=="function"?a:null};function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function Jk(e){return BK(e)||LK(e)||dP(e)||IK()}function IK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BK(e){if(Array.isArray(e))return $y(e)}function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(n){Ey(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ey(e,t,r){return t=FK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FK(e){var t=zK(e,"string");return tf(t)==="symbol"?t:String(t)}function zK(e,t){if(tf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GK(e,t){return VK(e)||WK(e,t)||dP(e,t)||UK()}function UK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dP(e,t){if(e){if(typeof e=="string")return $y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $y(e,t)}}function $y(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function VK(e){if(Array.isArray(e))return e}var U0=function(t,r,n){return t+(r-t)*n},Dy=function(t){var r=t.from,n=t.to;return r!==n},HK=function e(t,r,n){var a=lu(function(i,o){if(Dy(o)){var s=t(o.from,o.to,o.velocity),l=GK(s,2),u=l[0],f=l[1];return Qr(Qr({},o),{},{from:u,velocity:f})}return o},r);return n<1?lu(function(i,o){return Dy(o)?Qr(Qr({},o),{},{velocity:U0(o.velocity,a[i].velocity,n),from:U0(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const XK=function(e,t,r,n,a){var i=SK(e,t),o=i.reduce(function(x,v){return Qr(Qr({},x),{},Ey({},v,[e[v],t[v]]))},{}),s=i.reduce(function(x,v){return Qr(Qr({},x),{},Ey({},v,{from:e[v],velocity:0,to:t[v]}))},{}),l=-1,u,f,d=function(){return null},h=function(){return lu(function(v,g){return g.from},s)},p=function(){return!Object.values(s).filter(Dy).length},y=function(v){u||(u=v);var g=v-u,b=g/r.dt;s=HK(r,s,b),a(Qr(Qr(Qr({},e),t),h())),u=v,p()||(l=requestAnimationFrame(d))},m=function(v){f||(f=v);var g=(v-f)/n,b=lu(function(k,w){return U0.apply(void 0,Jk(w).concat([r(g)]))},o);if(a(Qr(Qr(Qr({},e),t),b)),g<1)l=requestAnimationFrame(d);else{var S=lu(function(k,w){return U0.apply(void 0,Jk(w).concat([r(1)]))},o);a(Qr(Qr(Qr({},e),t),S))}};return d=r.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}var KK=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function YK(e,t){if(e==null)return{};var r=qK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qK(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function _g(e){return eY(e)||JK(e)||QK(e)||ZK()}function ZK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QK(e,t){if(e){if(typeof e=="string")return Ry(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ry(e,t)}}function JK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eY(e){if(Array.isArray(e))return Ry(e)}function Ry(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tS(Object(r),!0).forEach(function(n){Kc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kc(e,t,r){return t=hP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hP(n.key),n)}}function nY(e,t,r){return t&&rY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hP(e){var t=aY(e,"string");return Al(t)==="symbol"?t:String(t)}function aY(e,t){if(Al(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Al(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iy(e,t)}function Iy(e,t){return Iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Iy(e,t)}function oY(e){var t=sY();return function(){var n=W0(e),a;if(t){var i=W0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Ly(this,a)}}function Ly(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return By(e)}function By(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W0(e){return W0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W0(e)}var Fa=function(e){iY(r,e);var t=oY(r);function r(n,a){var i;tY(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,l=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(By(i)),i.changeStyle=i.changeStyle.bind(By(i)),!s||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:f}),Ly(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Ly(i);i.state={style:l?Kc({},l,u):u}}else i.state={style:{}};return i}return nY(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,h=this.state.style;if(s){if(!o){var p={style:l?Kc({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(hK(a.to,f)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=y||u?d:a.to;if(this.state&&h){var x={style:l?Kc({},l,m):m};(l&&h[l]!==m||!l&&h!==m)&&this.setState(x)}this.runAnimation(Oa(Oa({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,p=XK(o,s,RK(u),l,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([h,f,y,l,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(m,x,v){if(v===0)return m;var g=x.duration,b=x.easing,S=b===void 0?"ease":b,k=x.style,w=x.properties,C=x.onAnimationEnd,P=v>0?o[v-1]:x,O=w||Object.keys(k);if(typeof S=="function"||S==="spring")return[].concat(_g(m),[i.runJSAnimation.bind(i,{from:P.style,to:k,duration:g,easing:S}),g]);var N=qk(O,g,S),$=Oa(Oa(Oa({},P.style),k),{},{transition:N});return[].concat(_g(m),[$,g,C]).filter(jK)};return this.manager.start([l].concat(_g(o.reduce(p,[f,Math.max(h,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=bK());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,p=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var m=s?Kc({},s,l):l,x=qk(Object.keys(m),o,u);y.start([f,i,Oa(Oa({},m),{},{transition:x}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=YK(a,KK),u=j.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(p){var y=p.props,m=y.style,x=m===void 0?{}:m,v=y.className,g=j.cloneElement(p,Oa(Oa({},l),{},{style:Oa(Oa({},x),f),className:v}));return g};return u===1?d(j.Children.only(i)):z.createElement("div",null,j.Children.map(i,function(h){return d(h)}))}}]),r}(j.PureComponent);Fa.displayName="Animate";Fa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Fa.propTypes={from:Ot.oneOfType([Ot.object,Ot.string]),to:Ot.oneOfType([Ot.object,Ot.string]),attributeName:Ot.string,duration:Ot.number,begin:Ot.number,easing:Ot.oneOfType([Ot.string,Ot.func]),steps:Ot.arrayOf(Ot.shape({duration:Ot.number.isRequired,style:Ot.object.isRequired,easing:Ot.oneOfType([Ot.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ot.func]),properties:Ot.arrayOf("string"),onAnimationEnd:Ot.func})),children:Ot.oneOfType([Ot.node,Ot.func]),isActive:Ot.bool,canBegin:Ot.bool,onAnimationEnd:Ot.func,shouldReAnimate:Ot.bool,onAnimationStart:Ot.func,onAnimationReStart:Ot.func};function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(this,arguments)}function lY(e,t){return dY(e)||fY(e,t)||uY(e,t)||cY()}function cY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uY(e,t){if(e){if(typeof e=="string")return rS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rS(e,t)}}function rS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function dY(e){if(Array.isArray(e))return e}function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nS(Object(r),!0).forEach(function(n){hY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hY(e,t,r){return t=pY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pY(e){var t=gY(e,"string");return rf(t)=="symbol"?t:t+""}function gY(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iS=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=i[h]>o?o:i[h];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+l*d[0],",").concat(r)),f+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-l*d[2],",").concat(r+a)),f+="L ".concat(t+l*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);f="M ".concat(t,",").concat(r+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+l*y,",").concat(r,`
            L `).concat(t+n-l*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*y,`
            L `).concat(t+n,",").concat(r+a-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-l*y,",").concat(r+a,`
            L `).concat(t+l*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*y," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},mY=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=f&&a>=d&&a<=h}return!1},yY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},m1=function(t){var r=aS(aS({},yY),t),n=j.useRef(),a=j.useState(-1),i=lY(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch{}},[]);var l=r.x,u=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,v=r.isAnimationActive,g=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var b=ot("recharts-rectangle",p);return g?z.createElement(Fa,{canBegin:o>0,from:{width:f,height:d,x:l,y:u},to:{width:f,height:d,x:l,y:u},duration:m,animationEasing:y,isActive:g},function(S){var k=S.width,w=S.height,C=S.x,P=S.y;return z.createElement(Fa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,isActive:v,easing:y},z.createElement("path",V0({},Ke(r,!0),{className:b,d:iS(C,P,k,w,h),ref:n})))}):z.createElement("path",V0({},Ke(r,!0),{className:b,d:iS(l,u,f,d,h)}))};function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fy.apply(this,arguments)}var fp=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=ot("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",Fy({},Ke(t,!1),c0(t),{className:o,cx:r,cy:n,r:a})):null};function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}var vY=["x","y","top","left","width","height","className"];function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zy.apply(this,arguments)}function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(n){bY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bY(e,t,r){return t=wY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wY(e){var t=kY(e,"string");return nf(t)=="symbol"?t:t+""}function kY(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SY(e,t){if(e==null)return{};var r=jY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var CY=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},PY=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,u=l===void 0?0:l,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,y=t.className,m=SY(t,vY),x=xY({x:n,y:i,top:s,left:u,width:d,height:p},m);return!he(n)||!he(i)||!he(d)||!he(p)||!he(s)||!he(u)?null:z.createElement("path",zy({},Ke(x,!0),{className:ot("recharts-cross",y),d:CY(n,i,d,p,s,u)}))},NY=Mj,OY=NY(Object.getPrototypeOf,Object),MY=OY,_Y=Ri,AY=MY,TY=Ii,EY="[object Object]",$Y=Function.prototype,DY=Object.prototype,pP=$Y.toString,RY=DY.hasOwnProperty,IY=pP.call(Object);function LY(e){if(!TY(e)||_Y(e)!=EY)return!1;var t=AY(e);if(t===null)return!0;var r=RY.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&pP.call(r)==IY}var BY=LY;const FY=Rt(BY);var zY=Ri,GY=Ii,UY="[object Boolean]";function WY(e){return e===!0||e===!1||GY(e)&&zY(e)==UY}var VY=WY;const HY=Rt(VY);function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H0.apply(this,arguments)}function XY(e,t){return ZY(e)||qY(e,t)||YY(e,t)||KY()}function KY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YY(e,t){if(e){if(typeof e=="string")return sS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sS(e,t)}}function sS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function ZY(e){if(Array.isArray(e))return e}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(n){QY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QY(e,t,r){return t=JY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JY(e){var t=eq(e,"string");return af(t)=="symbol"?t:t+""}function eq(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uS=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},tq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rq=function(t){var r=cS(cS({},tq),t),n=j.useRef(),a=j.useState(-1),i=XY(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&s(b)}catch{}},[]);var l=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,v=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var g=ot("recharts-trapezoid",p);return v?z.createElement(Fa,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:u},duration:m,animationEasing:y,isActive:v},function(b){var S=b.upperWidth,k=b.lowerWidth,w=b.height,C=b.x,P=b.y;return z.createElement(Fa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,easing:y},z.createElement("path",H0({},Ke(r,!0),{className:g,d:uS(C,P,S,k,w),ref:n})))}):z.createElement("g",null,z.createElement("path",H0({},Ke(r,!0),{className:g,d:uS(l,u,f,d,h)})))},nq=["option","shapeType","propTransformer","activeClassName","isActive"];function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function aq(e,t){if(e==null)return{};var r=iq(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function X0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(r),!0).forEach(function(n){oq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oq(e,t,r){return t=sq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sq(e){var t=lq(e,"string");return of(t)=="symbol"?t:t+""}function lq(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cq(e,t){return X0(X0({},t),e)}function uq(e,t){return e==="symbols"}function dS(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return z.createElement(m1,r);case"trapezoid":return z.createElement(rq,r);case"sector":return z.createElement(nP,r);case"symbols":if(uq(t))return z.createElement(Qh,r);break;default:return null}}function fq(e){return j.isValidElement(e)?e.props:e}function Gy(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?cq:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=aq(e,nq),u;if(j.isValidElement(t))u=j.cloneElement(t,X0(X0({},l),fq(t)));else if(Ze(t))u=t(l);else if(FY(t)&&!HY(t)){var f=a(t,l);u=z.createElement(dS,{shapeType:r,elementProps:f})}else{var d=l;u=z.createElement(dS,{shapeType:r,elementProps:d})}return s?z.createElement(bt,{className:o},u):u}function dp(e,t){return t!=null&&"trapezoids"in e.props}function hp(e,t){return t!=null&&"sectors"in e.props}function sf(e,t){return t!=null&&"points"in e.props}function dq(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function hq(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function pq(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function gq(e,t){var r;return dp(e,t)?r=dq:hp(e,t)?r=hq:sf(e,t)&&(r=pq),r}function mq(e,t){var r;return dp(e,t)?r="trapezoids":hp(e,t)?r="sectors":sf(e,t)&&(r="points"),r}function yq(e,t){if(dp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(hp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return sf(e,t)?t.payload:{}}function vq(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=mq(r,t),i=yq(r,t),o=n.filter(function(l,u){var f=bs(i,l),d=r.props[a].filter(function(y){var m=gq(r,t);return m(y,t)}),h=r.props[a].indexOf(d[d.length-1]),p=u===h;return f&&p}),s=n.indexOf(o[o.length-1]);return s}var xq=Math.ceil,bq=Math.max;function wq(e,t,r,n){for(var a=-1,i=bq(xq((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var kq=wq,Sq=Kj,hS=1/0,jq=17976931348623157e292;function Cq(e){if(!e)return e===0?e:0;if(e=Sq(e),e===hS||e===-hS){var t=e<0?-1:1;return t*jq}return e===e?e:0}var gP=Cq,Pq=kq,Nq=tp,Ag=gP;function Oq(e){return function(t,r,n){return n&&typeof n!="number"&&Nq(t,r,n)&&(r=n=void 0),t=Ag(t),r===void 0?(r=t,t=0):r=Ag(r),n=n===void 0?t<r?1:-1:Ag(n),Pq(t,r,n,e)}}var Mq=Oq,_q=Mq,Aq=_q(),Tq=Aq;const K0=Rt(Tq);function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){mP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mP(e,t,r){return t=Eq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eq(e){var t=$q(e,"string");return lf(t)=="symbol"?t:t+""}function $q(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dq=["Webkit","Moz","O","ms"],Rq=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Dq.reduce(function(i,o){return gS(gS({},i),{},mP({},o+n,r))},{});return a[t]=r,a};function Tl(e){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function Y0(){return Y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y0.apply(this,arguments)}function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(n){Xn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vP(n.key),n)}}function Lq(e,t,r){return t&&yS(e.prototype,t),r&&yS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bq(e,t,r){return t=q0(t),Fq(e,yP()?Reflect.construct(t,r||[],q0(e).constructor):t.apply(e,r))}function Fq(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zq(e)}function zq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yP=function(){return!!e})()}function q0(e){return q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q0(e)}function Gq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uy(e,t)}function Xn(e,t,r){return t=vP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vP(e){var t=Uq(e,"string");return Tl(t)=="symbol"?t:t+""}function Uq(e,t){if(Tl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wq=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=ou().domain(K0(0,l)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},vS=function(t){return t.changedTouches&&!!t.changedTouches.length},El=function(e){function t(r){var n;return Iq(this,t),n=Bq(this,t,[r]),Xn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Xn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Xn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),Xn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Xn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Xn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Xn(n,"handleSlideDragStart",function(a){var i=vS(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Gq(t,e),Lq(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(o,d),y=t.getIndexInRange(o,h);return{startIndex:p-p%l,endIndex:y===f?f:y-y%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=Fr(i[n],s,n);return Ze(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,u=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,y=l.onChange,m=n.pageX-i;m>0?m=Math.min(m,u+f-d-s,u+f-d-o):m<0&&(m=Math.max(m,u-o,u-s));var x=this.getIndex({startX:o+m,endX:s+m});(x.startIndex!==h||x.endIndex!==p)&&y&&y(x),this.setState({startX:o+m,endX:s+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=vS(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,y=f.onChange,m=f.gap,x=f.data,v={startX:this.state.startX,endX:this.state.endX},g=n.pageX-i;g>0?g=Math.min(g,d+h-p-u):g<0&&(g=Math.max(g,d-u)),v[o]=u+g;var b=this.getIndex(v),S=b.startIndex,k=b.endIndex,w=function(){var P=x.length-1;return o==="startX"&&(s>l?S%m===0:k%m===0)||s<l&&k===P||o==="endX"&&(s>l?k%m===0:S%m===0)||s>l&&k===P};this.setState(Xn(Xn({},o,u+g),"brushMoveStartX",n.pageX),function(){y&&w()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=s.length)){var p=s[h];a==="startX"&&p>=u||a==="endX"&&p<=l||this.setState(Xn({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return z.createElement("rect",{stroke:u,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.data,u=n.children,f=n.padding,d=j.Children.only(u);return d?z.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,l=this.props,u=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,y=l.data,m=l.startIndex,x=l.endIndex,v=Math.max(n,this.props.x),g=Tg(Tg({},Ke(this.props,!1)),{},{x:v,y:u,width:f,height:d}),b=p||"Min value: ".concat((i=y[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[x])===null||o===void 0?void 0:o.name);return z.createElement(bt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),s.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,g))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,y={pointerEvents:"none",fill:u};return z.createElement(bt,{className:"recharts-brush-texts"},z.createElement(S0,Y0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:o+s/2},y),this.getTextOfTick(a)),z.createElement(S0,Y0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:o+s/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,l=n.y,u=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,y=h.endX,m=h.isTextActive,x=h.isSlideMoving,v=h.isTravellerMoving,g=h.isTravellerFocused;if(!a||!a.length||!he(s)||!he(l)||!he(u)||!he(f)||u<=0||f<=0)return null;var b=ot("recharts-brush",i),S=z.Children.count(o)===1,k=Rq("userSelect","none");return z.createElement(bt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(m||x||v||g||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(i+s/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),z.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return z.isValidElement(n)?i=z.cloneElement(n,a):Ze(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Tg({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?Wq({data:i,width:o,x:s,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>a?s=l:o=l}return a>=n[s]?s:o}}])}(j.PureComponent);Xn(El,"displayName","Brush");Xn(El,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Vq=zx;function Hq(e,t){var r;return Vq(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Xq=Hq,Kq=wj,Yq=Oo,qq=Xq,Zq=zn,Qq=tp;function Jq(e,t,r){var n=Zq(e)?Kq:qq;return r&&Qq(e,t,r)&&(t=void 0),n(e,Yq(t))}var eZ=Jq;const tZ=Rt(eZ);var ni=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},xS=Uj;function rZ(e,t,r){t=="__proto__"&&xS?xS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var nZ=rZ,aZ=nZ,iZ=zj,oZ=Oo;function sZ(e,t){var r={};return t=oZ(t),iZ(e,function(n,a,i){aZ(r,a,t(n,a,i))}),r}var lZ=sZ;const cZ=Rt(lZ);function uZ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var fZ=uZ,dZ=zx;function hZ(e,t){var r=!0;return dZ(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var pZ=hZ,gZ=fZ,mZ=pZ,yZ=Oo,vZ=zn,xZ=tp;function bZ(e,t,r){var n=vZ(e)?gZ:mZ;return r&&xZ(e,t,r)&&(t=void 0),n(e,yZ(t))}var wZ=bZ;const xP=Rt(wZ);var kZ=["x","y"];function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(this,arguments)}function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(n){SZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SZ(e,t,r){return t=jZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jZ(e){var t=CZ(e,"string");return cf(t)=="symbol"?t:t+""}function CZ(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PZ(e,t){if(e==null)return{};var r=NZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function OZ(e,t){var r=e.x,n=e.y,a=PZ(e,kZ),i="".concat(r),o=parseInt(i,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Uc(Uc(Uc(Uc(Uc({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function wS(e){return z.createElement(Gy,Wy({shapeType:"rectangle",propTransformer:OZ,activeClassName:"recharts-active-bar"},e))}var MZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=he(n)||UT(n);return i?t(n,a):(i||ks(),r)}},_Z=["value","background"],bP;function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function AZ(e,t){if(e==null)return{};var r=TZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function TZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Z0(){return Z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z0.apply(this,arguments)}function kS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kS(Object(r),!0).forEach(function(n){io(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kP(n.key),n)}}function $Z(e,t,r){return t&&SS(e.prototype,t),r&&SS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DZ(e,t,r){return t=Q0(t),RZ(e,wP()?Reflect.construct(t,r||[],Q0(e).constructor):t.apply(e,r))}function RZ(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IZ(e)}function IZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wP=function(){return!!e})()}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q0(e)}function LZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vy(e,t)}function Vy(e,t){return Vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vy(e,t)}function io(e,t,r){return t=kP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kP(e){var t=BZ(e,"string");return $l(t)=="symbol"?t:t+""}function BZ(e,t){if($l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cf=function(e){function t(){var r;EZ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=DZ(this,t,[].concat(a)),io(r,"state",{isAnimationFinished:!1}),io(r,"id",Ms("recharts-bar-")),io(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),io(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return LZ(t,e),$Z(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,u=i.activeBar,f=Ke(this.props,!1);return n&&n.map(function(d,h){var p=h===l,y=p?u:o,m=Cr(Cr(Cr({},f),d),{},{isActive:p,option:y,index:h,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return z.createElement(bt,Z0({className:"recharts-bar-rectangle"},Au(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),z.createElement(wS,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return z.createElement(Fa,{begin:l,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,m=i.map(function(x,v){var g=h&&h[v];if(g){var b=xr(g.x,x.x),S=xr(g.y,x.y),k=xr(g.width,x.width),w=xr(g.height,x.height);return Cr(Cr({},x),{},{x:b(y),y:S(y),width:k(y),height:w(y)})}if(o==="horizontal"){var C=xr(0,x.height),P=C(y);return Cr(Cr({},x),{},{y:x.y+x.height-P,height:P})}var O=xr(0,x.width),N=O(y);return Cr(Cr({},x),{},{width:N})});return z.createElement(bt,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!bs(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=Ke(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,h=AZ(u,_Z);if(!d)return null;var p=Cr(Cr(Cr(Cr(Cr({},h),{},{fill:"#eee"},d),l),Au(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return z.createElement(wS,Z0({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Ln(f,uc);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(x,v){var g=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:g,errorVal:Fr(x,v)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return z.createElement(bt,y,d.map(function(m){return z.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,f=n.top,d=n.width,h=n.height,p=n.isAnimationActive,y=n.background,m=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,v=ot("recharts-bar",o),g=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,S=g||b,k=Xe(m)?this.id:m;return z.createElement(bt,{className:v},g||b?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(k)},z.createElement("rect",{x:g?u:u-d/2,y:b?f:f-h/2,width:g?d:d*2,height:b?h:h*2}))):null,z.createElement(bt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(k,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,k),(!p||x)&&ri.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);bP=Cf;io(Cf,"displayName","Bar");io(Cf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Mo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});io(Cf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=dH(n,r);if(!p)return null;var y=t.layout,m=r.type.defaultProps,x=m!==void 0?Cr(Cr({},m),r.props):r.props,v=x.dataKey,g=x.children,b=x.minPointSize,S=y==="horizontal"?o:i,k=u?S.scale.domain():null,w=bH({numericAxis:S}),C=Ln(g,Wx),P=d.map(function(O,N){var $,M,_,D,I,B;u?$=hH(u[f+N],k):($=Fr(O,v),Array.isArray($)||($=[w,$]));var A=MZ(b,bP.defaultProps.minPointSize)($[1],N);if(y==="horizontal"){var E,L=[o.scale($[0]),o.scale($[1])],U=L[0],J=L[1];M=Ck({axis:i,ticks:s,bandSize:a,offset:p.offset,entry:O,index:N}),_=(E=J??U)!==null&&E!==void 0?E:void 0,D=p.size;var K=U-J;if(I=Number.isNaN(K)?0:K,B={x:M,y:o.y,width:D,height:o.height},Math.abs(A)>0&&Math.abs(I)<Math.abs(A)){var F=Ra(I||A)*(Math.abs(A)-Math.abs(I));_-=F,I+=F}}else{var ee=[i.scale($[0]),i.scale($[1])],ue=ee[0],Q=ee[1];if(M=ue,_=Ck({axis:o,ticks:l,bandSize:a,offset:p.offset,entry:O,index:N}),D=Q-ue,I=p.size,B={x:i.x,y:_,width:i.width,height:I},Math.abs(A)>0&&Math.abs(D)<Math.abs(A)){var fe=Ra(D||A)*(Math.abs(A)-Math.abs(D));D+=fe}}return Cr(Cr(Cr({},O),{},{x:M,y:_,width:D,height:I,value:u?$:$[1],payload:O,background:B},C&&C[N]&&C[N].props),{},{tooltipPayload:[eP(r,O)],tooltipPosition:{x:M+D/2,y:_+I/2}})});return Cr({data:P,layout:y},h)});function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function FZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SP(n.key),n)}}function zZ(e,t,r){return t&&jS(e.prototype,t),r&&jS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(n){pp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pp(e,t,r){return t=SP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SP(e){var t=GZ(e,"string");return uf(t)=="symbol"?t:t+""}function GZ(e,t){if(uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y1=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!Yn(u,Cf);return f.reduce(function(p,y){var m=r[y],x=m.orientation,v=m.domain,g=m.padding,b=g===void 0?{}:g,S=m.mirror,k=m.reversed,w="".concat(x).concat(S?"Mirror":""),C,P,O,N,$;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var M=v[1]-v[0],_=1/0,D=m.categoricalDomain.sort(XT);if(D.forEach(function(ee,ue){ue>0&&(_=Math.min((ee||0)-(D[ue-1]||0),_))}),Number.isFinite(_)){var I=_/M,B=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(C=I*B/2),m.padding==="no-gap"){var A=xs(t.barCategoryGap,I*B),E=I*B/2;C=E-A-(E-A)/B*A}}}a==="xAxis"?P=[n.left+(b.left||0)+(C||0),n.left+n.width-(b.right||0)-(C||0)]:a==="yAxis"?P=l==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(C||0),n.top+n.height-(b.bottom||0)-(C||0)]:P=m.range,k&&(P=[P[1],P[0]]);var L=uH(m,i,h),U=L.scale,J=L.realScaleType;U.domain(v).range(P),fH(U);var K=xH(U,Aa(Aa({},m),{},{realScaleType:J}));a==="xAxis"?($=x==="top"&&!S||x==="bottom"&&S,O=n.left,N=d[w]-$*m.height):a==="yAxis"&&($=x==="left"&&!S||x==="right"&&S,O=d[w]-$*m.width,N=n.top);var F=Aa(Aa(Aa({},m),K),{},{realScaleType:J,x:O,y:N,scale:U,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return F.bandSize=L0(F,K),!m.hide&&a==="xAxis"?d[w]+=($?-1:1)*F.height:m.hide||(d[w]+=($?-1:1)*F.width),Aa(Aa({},p),{},pp({},y,F))},{})},jP=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},UZ=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return jP({x:r,y:n},{x:a,y:i})},CP=function(){function e(t){FZ(this,e),this.scale=t}return zZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();pp(CP,"EPS",1e-4);var v1=function(t){var r=Object.keys(t).reduce(function(n,a){return Aa(Aa({},n),{},pp({},a,CP.create(t[a])))},{});return Aa(Aa({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return cZ(a,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return xP(a,function(i,o){return r[o].isInRange(i)})}})};function WZ(e){return(e%180+180)%180}var VZ=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=WZ(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},HZ=Oo,XZ=bf,KZ=Jh;function YZ(e){return function(t,r,n){var a=Object(t);if(!XZ(t)){var i=HZ(r);t=KZ(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var qZ=YZ,ZZ=gP;function QZ(e){var t=ZZ(e),r=t%1;return t===t?r?t-r:t:0}var JZ=QZ,eQ=Dj,tQ=Oo,rQ=JZ,nQ=Math.max;function aQ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:rQ(r);return a<0&&(a=nQ(n+a,0)),eQ(e,tQ(t),a)}var iQ=aQ,oQ=qZ,sQ=iQ,lQ=oQ(sQ),cQ=lQ;const uQ=Rt(cQ);var fQ=Y8(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),x1=j.createContext(void 0),b1=j.createContext(void 0),PP=j.createContext(void 0),NP=j.createContext({}),OP=j.createContext(void 0),MP=j.createContext(0),_P=j.createContext(0),PS=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,l=t.width,u=t.height,f=fQ(i);return z.createElement(x1.Provider,{value:n},z.createElement(b1.Provider,{value:a},z.createElement(NP.Provider,{value:i},z.createElement(PP.Provider,{value:f},z.createElement(OP.Provider,{value:o},z.createElement(MP.Provider,{value:u},z.createElement(_P.Provider,{value:l},s)))))))},dQ=function(){return j.useContext(OP)},AP=function(t){var r=j.useContext(x1);r==null&&ks();var n=r[t];return n==null&&ks(),n},hQ=function(){var t=j.useContext(x1);return Zi(t)},pQ=function(){var t=j.useContext(b1),r=uQ(t,function(n){return xP(n.domain,Number.isFinite)});return r||Zi(t)},TP=function(t){var r=j.useContext(b1);r==null&&ks();var n=r[t];return n==null&&ks(),n},gQ=function(){var t=j.useContext(PP);return t},mQ=function(){return j.useContext(NP)},w1=function(){return j.useContext(_P)},k1=function(){return j.useContext(MP)};function Dl(e){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function yQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$P(n.key),n)}}function xQ(e,t,r){return t&&vQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bQ(e,t,r){return t=J0(t),wQ(e,EP()?Reflect.construct(t,r||[],J0(e).constructor):t.apply(e,r))}function wQ(e,t){if(t&&(Dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kQ(e)}function kQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EP=function(){return!!e})()}function J0(e){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J0(e)}function SQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hy(e,t)}function Hy(e,t){return Hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hy(e,t)}function NS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function OS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(r),!0).forEach(function(n){S1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S1(e,t,r){return t=$P(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $P(e){var t=jQ(e,"string");return Dl(t)=="symbol"?t:t+""}function jQ(e,t){if(Dl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CQ(e,t){return MQ(e)||OQ(e,t)||NQ(e,t)||PQ()}function PQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NQ(e,t){if(e){if(typeof e=="string")return MS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MS(e,t)}}function MS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function MQ(e){if(Array.isArray(e))return e}function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(this,arguments)}var _Q=function(t,r){var n;return z.isValidElement(t)?n=z.cloneElement(t,r):Ze(t)?n=t(r):n=z.createElement("line",Xy({},r,{className:"recharts-reference-line-line"})),n},AQ=function(t,r,n,a,i,o,s,l,u){var f=i.x,d=i.y,h=i.width,p=i.height;if(n){var y=u.y,m=t.y.apply(y,{position:o});if(ni(u,"discard")&&!t.y.isInRange(m))return null;var x=[{x:f+h,y:m},{x:f,y:m}];return l==="left"?x.reverse():x}if(r){var v=u.x,g=t.x.apply(v,{position:o});if(ni(u,"discard")&&!t.x.isInRange(g))return null;var b=[{x:g,y:d+p},{x:g,y:d}];return s==="top"?b.reverse():b}if(a){var S=u.segment,k=S.map(function(w){return t.apply(w,{position:o})});return ni(u,"discard")&&tZ(k,function(w){return!t.isInRange(w)})?null:k}return null};function TQ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,u=dQ(),f=AP(a),d=TP(i),h=gQ();if(!u||!h)return null;Ci(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=v1({x:f.scale,y:d.scale}),y=Br(t),m=Br(r),x=n&&n.length===2,v=AQ(p,y,m,x,h,e.position,f.orientation,d.orientation,e);if(!v)return null;var g=CQ(v,2),b=g[0],S=b.x,k=b.y,w=g[1],C=w.x,P=w.y,O=ni(e,"hidden")?"url(#".concat(u,")"):void 0,N=OS(OS({clipPath:O},Ke(e,!0)),{},{x1:S,y1:k,x2:C,y2:P});return z.createElement(bt,{className:ot("recharts-reference-line",s)},_Q(o,N),en.renderCallByParent(e,UZ({x1:S,y1:k,x2:C,y2:P})))}var oo=function(e){function t(){return yQ(this,t),bQ(this,t,arguments)}return SQ(t,e),xQ(t,[{key:"render",value:function(){return z.createElement(TQ,this.props)}}])}(z.Component);S1(oo,"displayName","ReferenceLine");S1(oo,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ky.apply(this,arguments)}function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function _S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_S(Object(r),!0).forEach(function(n){gp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RP(n.key),n)}}function DQ(e,t,r){return t&&$Q(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RQ(e,t,r){return t=eh(t),IQ(e,DP()?Reflect.construct(t,r||[],eh(e).constructor):t.apply(e,r))}function IQ(e,t){if(t&&(Rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LQ(e)}function LQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DP=function(){return!!e})()}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eh(e)}function BQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yy(e,t)}function Yy(e,t){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yy(e,t)}function gp(e,t,r){return t=RP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RP(e){var t=FQ(e,"string");return Rl(t)=="symbol"?t:t+""}function FQ(e,t){if(Rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zQ=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=v1({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return ni(t,"discard")&&!o.isInRange(s)?null:s},Pf=function(e){function t(){return EQ(this,t),RQ(this,t,arguments)}return BQ(t,e),DQ(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=Br(a),f=Br(i);if(Ci(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=zQ(this.props);if(!d)return null;var h=d.x,p=d.y,y=this.props,m=y.shape,x=y.className,v=ni(this.props,"hidden")?"url(#".concat(l,")"):void 0,g=AS(AS({clipPath:v},Ke(this.props,!0)),{},{cx:h,cy:p});return z.createElement(bt,{className:ot("recharts-reference-dot",x)},t.renderDot(m,g),en.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(z.Component);gp(Pf,"displayName","ReferenceDot");gp(Pf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gp(Pf,"renderDot",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Ze(e)?r=e(t):r=z.createElement(fp,Ky({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qy.apply(this,arguments)}function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ES(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(n){mp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LP(n.key),n)}}function WQ(e,t,r){return t&&UQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VQ(e,t,r){return t=th(t),HQ(e,IP()?Reflect.construct(t,r||[],th(e).constructor):t.apply(e,r))}function HQ(e,t){if(t&&(Il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XQ(e)}function XQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IP=function(){return!!e})()}function th(e){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},th(e)}function KQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zy(e,t)}function Zy(e,t){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zy(e,t)}function mp(e,t,r){return t=LP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LP(e){var t=YQ(e,"string");return Il(t)=="symbol"?t:t+""}function YQ(e,t){if(Il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qQ=function(t,r,n,a,i){var o=i.x1,s=i.x2,l=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var h=v1({x:f.scale,y:d.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ni(i,"discard")&&(!h.isInRange(p)||!h.isInRange(y))?null:jP(p,y)},Nf=function(e){function t(){return GQ(this,t),VQ(this,t,arguments)}return KQ(t,e),WQ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,f=n.clipPathId;Ci(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Br(a),h=Br(i),p=Br(o),y=Br(s),m=this.props.shape;if(!d&&!h&&!p&&!y&&!m)return null;var x=qQ(d,h,p,y,this.props);if(!x&&!m)return null;var v=ni(this.props,"hidden")?"url(#".concat(f,")"):void 0;return z.createElement(bt,{className:ot("recharts-reference-area",l)},t.renderRect(m,ES(ES({clipPath:v},Ke(this.props,!0)),x)),en.renderCallByParent(this.props,x))}}])}(z.Component);mp(Nf,"displayName","ReferenceArea");mp(Nf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});mp(Nf,"renderRect",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Ze(e)?r=e(t):r=z.createElement(m1,qy({},t,{className:"recharts-reference-area-rect"})),r});function BP(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function ZQ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return VZ(n,r)}function QQ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function rh(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function JQ(e,t){return BP(e,t+1)}function eJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,l=0,u=1,f=o,d=function(){var y=n==null?void 0:n[l];if(y===void 0)return{v:BP(n,u)};var m=l,x,v=function(){return x===void 0&&(x=r(y,m)),x},g=y.coordinate,b=l===0||rh(e,g,v,f,s);b||(l=0,f=o,u+=1),b&&(f=g+e*(v()/2+a),l+=u)},h;u<=i.length;)if(h=d(),h)return h.v;return[]}function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){tJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tJ(e,t,r){return t=rJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rJ(e){var t=nJ(e,"string");return ff(t)=="symbol"?t:t+""}function nJ(e,t){if(ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,l=t.end,u=function(h){var p=i[h],y,m=function(){return y===void 0&&(y=r(p,h)),y};if(h===o-1){var x=e*(p.coordinate+e*m()/2-l);i[h]=p=dn(dn({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate})}else i[h]=p=dn(dn({},p),{},{tickCoord:p.coordinate});var v=rh(e,p.tickCoord,m,s,l);v&&(l=p.tickCoord-e*(m()/2+a),i[h]=dn(dn({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function iJ(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,l=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),h=e*(f.coordinate+e*d/2-u);o[s-1]=f=dn(dn({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var p=rh(e,f.tickCoord,function(){return d},l,u);p&&(u=f.tickCoord-e*(d/2+a),o[s-1]=dn(dn({},f),{},{isShow:!0}))}for(var y=i?s-1:s,m=function(g){var b=o[g],S,k=function(){return S===void 0&&(S=r(b,g)),S};if(g===0){var w=e*(b.coordinate-e*k()/2-l);o[g]=b=dn(dn({},b),{},{tickCoord:w<0?b.coordinate-w*e:b.coordinate})}else o[g]=b=dn(dn({},b),{},{tickCoord:b.coordinate});var C=rh(e,b.tickCoord,k,l,u);C&&(l=b.tickCoord+e*(k()/2+a),o[g]=dn(dn({},b),{},{isShow:!0}))},x=0;x<y;x++)m(x);return o}function j1(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(he(l)||Mo.isSsr)return JQ(a,typeof l=="number"&&he(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",y=f&&p==="width"?iu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,S){var k=Ze(u)?u(b.value,S):b.value;return p==="width"?ZQ(iu(k,{fontSize:t,letterSpacing:r}),y,d):iu(k,{fontSize:t,letterSpacing:r})[p]},x=a.length>=2?Ra(a[1].coordinate-a[0].coordinate):1,v=QQ(i,x,p);return l==="equidistantPreserveStart"?eJ(x,v,m,a,o):(l==="preserveStart"||l==="preserveStartEnd"?h=iJ(x,v,m,a,o,l==="preserveStartEnd"):h=aJ(x,v,m,a,o),h.filter(function(g){return g.isShow}))}var oJ=["viewBox"],sJ=["viewBox"],lJ=["ticks"];function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tl.apply(this,arguments)}function DS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DS(Object(r),!0).forEach(function(n){C1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eg(e,t){if(e==null)return{};var r=cJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zP(n.key),n)}}function fJ(e,t,r){return t&&RS(e.prototype,t),r&&RS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function dJ(e,t,r){return t=nh(t),hJ(e,FP()?Reflect.construct(t,r||[],nh(e).constructor):t.apply(e,r))}function hJ(e,t){if(t&&(Ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pJ(e)}function pJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FP=function(){return!!e})()}function nh(e){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(e)}function gJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qy(e,t)}function C1(e,t,r){return t=zP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zP(e){var t=mJ(e,"string");return Ll(t)=="symbol"?t:t+""}function mJ(e,t){if(Ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fc=function(e){function t(r){var n;return uJ(this,t),n=dJ(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return gJ(t,e),fJ(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Eg(n,oJ),s=this.props,l=s.viewBox,u=Eg(s,sJ);return!ul(i,l)||!ul(o,u)||!ul(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,p,y,m,x,v,g,b=d?-1:1,S=n.tickSize||f,k=he(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=y=n.coordinate,x=o+ +!d*l,m=x-b*S,g=m-b*h,v=k;break;case"left":m=x=n.coordinate,y=i+ +!d*s,p=y-b*S,v=p-b*h,g=k;break;case"right":m=x=n.coordinate,y=i+ +d*s,p=y+b*S,v=p+b*h,g=k;break;default:p=y=n.coordinate,x=o+ +d*l,m=x+b*S,g=m+b*h,v=k;break}return{line:{x1:p,y1:m,x2:y,y2:x},tick:{x:v,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,f=n.axisLine,d=Dr(Dr(Dr({},Ke(this.props,!1)),Ke(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=Dr(Dr({},d),{},{x1:a,y1:i+h*s,x2:a+o,y2:i+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);d=Dr(Dr({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+s})}return z.createElement("line",tl({},d,{className:ot("recharts-cartesian-axis-line",ga(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,l=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,h=s.unit,p=j1(Dr(Dr({},this.props),{},{ticks:n}),a,i),y=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),x=Ke(this.props,!1),v=Ke(f,!1),g=Dr(Dr({},x),{},{fill:"none"},Ke(l,!1)),b=p.map(function(S,k){var w=o.getTickLineCoord(S),C=w.line,P=w.tick,O=Dr(Dr(Dr(Dr({textAnchor:y,verticalAnchor:m},x),{},{stroke:"none",fill:u},v),P),{},{index:k,payload:S,visibleTicksCount:p.length,tickFormatter:d});return z.createElement(bt,tl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Au(o.props,S,k)),l&&z.createElement("line",tl({},g,C,{className:ot("recharts-cartesian-axis-tick-line",ga(l,"className"))})),f&&t.renderTickItem(f,O,"".concat(Ze(d)?d(S.value,k):S.value).concat(h||"")))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,p=Eg(d,lJ),y=h;return Ze(l)&&(y=h&&h.length>0?l(this.props):l(p)),o<=0||s<=0||!y||!y.length?null:z.createElement(bt,{className:ot("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),en.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=ot(a.className,"recharts-cartesian-axis-tick-value");return z.isValidElement(n)?o=z.cloneElement(n,Dr(Dr({},a),{},{className:s})):Ze(n)?o=n(Dr(Dr({},a),{},{className:s})):o=z.createElement(S0,tl({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);C1(fc,"displayName","CartesianAxis");C1(fc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var yJ=["x1","y1","x2","y2","key"],vJ=["offset"];function Ss(e){"@babel/helpers - typeof";return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ss(e)}function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){xJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xJ(e,t,r){return t=bJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(e){var t=wJ(e,"string");return Ss(t)=="symbol"?t:t+""}function wJ(e,t){if(Ss(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ss(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ts(){return ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ts.apply(this,arguments)}function LS(e,t){if(e==null)return{};var r=kJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var SJ=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return z.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function GP(e,t){var r;if(z.isValidElement(e))r=z.cloneElement(e,t);else if(Ze(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=LS(t,yJ),u=Ke(l,!1);u.offset;var f=LS(u,vJ);r=z.createElement("line",ts({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function jJ(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=pn(pn({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return GP(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function CJ(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=pn(pn({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return GP(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function PJ(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var f=s.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var y=!f[p+1],m=y?a+o-h:f[p+1]-h;if(m<=0)return null;var x=p%t.length;return z.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:m,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function NJ(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var y=!f[p+1],m=y?i+s-h:f[p+1]-h;if(m<=0)return null;var x=p%n.length;return z.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:m,height:l,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var OJ=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return QC(j1(pn(pn(pn({},fc.defaultProps),n),{},{ticks:ki(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},MJ=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return QC(j1(pn(pn(pn({},fc.defaultProps),n),{},{ticks:ki(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Fs={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ai(e){var t,r,n,a,i,o,s=w1(),l=k1(),u=mQ(),f=pn(pn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Fs.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Fs.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Fs.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Fs.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Fs.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Fs.verticalFill,x:he(e.x)?e.x:u.left,y:he(e.y)?e.y:u.top,width:he(e.width)?e.width:u.width,height:he(e.height)?e.height:u.height}),d=f.x,h=f.y,p=f.width,y=f.height,m=f.syncWithTicks,x=f.horizontalValues,v=f.verticalValues,g=hQ(),b=pQ();if(!he(p)||p<=0||!he(y)||y<=0||!he(d)||d!==+d||!he(h)||h!==+h)return null;var S=f.verticalCoordinatesGenerator||OJ,k=f.horizontalCoordinatesGenerator||MJ,w=f.horizontalPoints,C=f.verticalPoints;if((!w||!w.length)&&Ze(k)){var P=x&&x.length,O=k({yAxis:b?pn(pn({},b),{},{ticks:P?x:b.ticks}):void 0,width:s,height:l,offset:u},P?!0:m);Ci(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ss(O),"]")),Array.isArray(O)&&(w=O)}if((!C||!C.length)&&Ze(S)){var N=v&&v.length,$=S({xAxis:g?pn(pn({},g),{},{ticks:N?v:g.ticks}):void 0,width:s,height:l,offset:u},N?!0:m);Ci(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ss($),"]")),Array.isArray($)&&(C=$)}return z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(SJ,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),z.createElement(jJ,ts({},f,{offset:u,horizontalPoints:w,xAxis:g,yAxis:b})),z.createElement(CJ,ts({},f,{offset:u,verticalPoints:C,xAxis:g,yAxis:b})),z.createElement(PJ,ts({},f,{horizontalPoints:w})),z.createElement(NJ,ts({},f,{verticalPoints:C})))}ai.displayName="CartesianGrid";var _J=["type","layout","connectNulls","ref"],AJ=["key"];function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function BS(e,t){if(e==null)return{};var r=TJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function TJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(this,arguments)}function FS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FS(Object(r),!0).forEach(function(n){Ta(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zs(e){return RJ(e)||DJ(e)||$J(e)||EJ()}function EJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $J(e,t){if(e){if(typeof e=="string")return Jy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jy(e,t)}}function DJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RJ(e){if(Array.isArray(e))return Jy(e)}function Jy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WP(n.key),n)}}function LJ(e,t,r){return t&&zS(e.prototype,t),r&&zS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function BJ(e,t,r){return t=ah(t),FJ(e,UP()?Reflect.construct(t,r||[],ah(e).constructor):t.apply(e,r))}function FJ(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zJ(e)}function zJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UP=function(){return!!e})()}function ah(e){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ah(e)}function GJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}function ev(e,t){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ev(e,t)}function Ta(e,t,r){return t=WP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WP(e){var t=UJ(e,"string");return Bl(t)=="symbol"?t:t+""}function UJ(e,t){if(Bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Or=function(e){function t(){var r;IJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=BJ(this,t,[].concat(a)),Ta(r,"state",{isAnimationFinished:!0,totalLength:0}),Ta(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),Ta(r,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(v,g){return v+g});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,h=s-o,p=[],y=0,m=0;y<l.length;m+=l[y],++y)if(m+l[y]>d){p=[].concat(zs(l.slice(0,y)),[d-m]);break}var x=p.length%2===0?[0,h]:[h];return[].concat(zs(t.repeat(l,f)),zs(p),x).map(function(v){return"".concat(v,"px")}).join(", ")}),Ta(r,"id",Ms("recharts-line-")),Ta(r,"pathRef",function(o){r.mainCurve=o}),Ta(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ta(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return GJ(t,e),LJ(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Ln(f,uc);if(!d)return null;var h=function(m,x){return{x:m.x,y:m.y,value:m.value,errorVal:Fr(m.payload,x)}},p={clipPath:n?"url(#clipPath-".concat(a,")"):null};return z.createElement(bt,p,d.map(function(y){return z.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,f=s.dataKey,d=Ke(this.props,!1),h=Ke(l,!0),p=u.map(function(m,x){var v=Hn(Hn(Hn({key:"dot-".concat(x),r:3},d),h),{},{index:x,cx:m.x,cy:m.y,value:m.value,dataKey:f,payload:m.payload,points:u});return t.renderDotItem(l,v)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return z.createElement(bt,cu({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,l=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=BS(s,_J),h=Hn(Hn(Hn({},Ke(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:l,layout:u,connectNulls:f});return z.createElement(ss,cu({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,y=o.animateNewValues,m=o.width,x=o.height,v=this.state,g=v.prevPoints,b=v.totalLength;return z.createElement(Fa,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var k=S.t;if(g){var w=g.length/s.length,C=s.map(function(M,_){var D=Math.floor(_*w);if(g[D]){var I=g[D],B=xr(I.x,M.x),A=xr(I.y,M.y);return Hn(Hn({},M),{},{x:B(k),y:A(k)})}if(y){var E=xr(m*2,M.x),L=xr(x/2,M.y);return Hn(Hn({},M),{},{x:E(k),y:L(k)})}return Hn(Hn({},M),{},{x:M.x,y:M.y})});return i.renderCurveStatically(C,n,a)}var P=xr(0,b),O=P(k),N;if(l){var $="".concat(l).split(/[,\s]+/gim).map(function(M){return parseFloat(M)});N=i.getStrokeDasharray(O,b,$)}else N=i.generateSimpleStrokeDasharray(b,O);return i.renderCurveStatically(s,n,a,{strokeDasharray:N})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return s&&o&&o.length&&(!u&&f>0||!bs(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.xAxis,f=a.yAxis,d=a.top,h=a.left,p=a.width,y=a.height,m=a.isAnimationActive,x=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=s.length===1,b=ot("recharts-line",l),S=u&&u.allowDataOverflow,k=f&&f.allowDataOverflow,w=S||k,C=Xe(x)?this.id:x,P=(n=Ke(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=P.r,N=O===void 0?3:O,$=P.strokeWidth,M=$===void 0?2:$,_=H3(o)?o:{},D=_.clipDot,I=D===void 0?!0:D,B=N*2+M;return z.createElement(bt,{className:b},S||k?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(C)},z.createElement("rect",{x:S?h:h-p/2,y:k?d:d-y/2,width:S?p:p*2,height:k?y:y*2})),!I&&z.createElement("clipPath",{id:"clipPath-dots-".concat(C)},z.createElement("rect",{x:h-B/2,y:d-B/2,width:p+B,height:y+B}))):null,!g&&this.renderCurve(w,C),this.renderErrorBar(w,C),(g||o)&&this.renderDots(w,I,C),(!m||v)&&ri.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(zs(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(zs(o),zs(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(z.isValidElement(n))i=z.cloneElement(n,a);else if(Ze(n))i=n(a);else{var o=a.key,s=BS(a,AJ),l=ot("recharts-line-dot",typeof n!="boolean"?n.className:"");i=z.createElement(fp,cu({key:o},s,{className:l}))}return i}}])}(j.PureComponent);Ta(Or,"displayName","Line");Ta(Or,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Mo.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ta(Or,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,f=t.layout,d=l.map(function(h,p){var y=Fr(h,o);return f==="horizontal"?{x:_l({axis:r,ticks:a,bandSize:s,entry:h,index:p}),y:Xe(y)?null:n.scale(y),value:y,payload:h}:{x:Xe(y)?null:r.scale(y),y:_l({axis:n,ticks:i,bandSize:s,entry:h,index:p}),value:y,payload:h}});return Hn({points:d,layout:f},u)});var WJ=["layout","type","stroke","connectNulls","isRange","ref"],VJ=["key"],VP;function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function HP(e,t){if(e==null)return{};var r=HJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rs(){return rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rs.apply(this,arguments)}function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){Za(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function US(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KP(n.key),n)}}function KJ(e,t,r){return t&&US(e.prototype,t),r&&US(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function YJ(e,t,r){return t=ih(t),qJ(e,XP()?Reflect.construct(t,r||[],ih(e).constructor):t.apply(e,r))}function qJ(e,t){if(t&&(Fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZJ(e)}function ZJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XP=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(e)}function QJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}function tv(e,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tv(e,t)}function Za(e,t,r){return t=KP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KP(e){var t=JJ(e,"string");return Fl(t)=="symbol"?t:t+""}function JJ(e,t){if(Fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ha=function(e){function t(){var r;XJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=YJ(this,t,[].concat(a)),Za(r,"state",{isAnimationFinished:!0}),Za(r,"id",Ms("recharts-area-")),Za(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ze(o)&&o()}),Za(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ze(o)&&o()}),r}return QJ(t,e),KJ(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,f=l.points,d=l.dataKey,h=Ke(this.props,!1),p=Ke(u,!0),y=f.map(function(x,v){var g=Vi(Vi(Vi({key:"dot-".concat(v),r:3},h),p),{},{index:v,cx:x.x,cy:x.y,dataKey:d,value:x.value,payload:x.payload,points:f});return t.renderDotItem(u,g)}),m={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return z.createElement(bt,rs({className:"recharts-area-dots"},m),y)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,u=o[o.length-1].x,f=n*Math.abs(l-u),d=ao(o.map(function(h){return h.y||0}));return he(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(ao(i.map(function(h){return h.y||0})),d)),he(d)?z.createElement("rect",{x:l<u?l:l-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,u=o[o.length-1].y,f=n*Math.abs(l-u),d=ao(o.map(function(h){return h.x||0}));return he(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(ao(i.map(function(h){return h.x||0})),d)),he(d)?z.createElement("rect",{x:0,y:l<u?l:l-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,l=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,h=s.isRange;s.ref;var p=HP(s,WJ);return z.createElement(bt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},z.createElement(ss,rs({},Ke(p,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&z.createElement(ss,rs({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&h&&z.createElement(ss,rs({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,y=this.state,m=y.prevPoints,x=y.prevBaseLine;return z.createElement(Fa,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var g=v.t;if(m){var b=m.length/s.length,S=s.map(function(P,O){var N=Math.floor(O*b);if(m[N]){var $=m[N],M=xr($.x,P.x),_=xr($.y,P.y);return Vi(Vi({},P),{},{x:M(g),y:_(g)})}return P}),k;if(he(l)&&typeof l=="number"){var w=xr(x,l);k=w(g)}else if(Xe(l)||nc(l)){var C=xr(x,0);k=C(g)}else k=l.map(function(P,O){var N=Math.floor(O*b);if(x[N]){var $=x[N],M=xr($.x,P.x),_=xr($.y,P.y);return Vi(Vi({},P),{},{x:M(g),y:_(g)})}return P});return i.renderAreaStatically(S,k,n,a)}return z.createElement(bt,null,z.createElement("defs",null,z.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(g))),z.createElement(bt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,l,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&o&&o.length&&(!f&&h>0||!bs(f,o)||!bs(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.top,f=a.left,d=a.xAxis,h=a.yAxis,p=a.width,y=a.height,m=a.isAnimationActive,x=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=s.length===1,b=ot("recharts-area",l),S=d&&d.allowDataOverflow,k=h&&h.allowDataOverflow,w=S||k,C=Xe(x)?this.id:x,P=(n=Ke(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=P.r,N=O===void 0?3:O,$=P.strokeWidth,M=$===void 0?2:$,_=H3(o)?o:{},D=_.clipDot,I=D===void 0?!0:D,B=N*2+M;return z.createElement(bt,{className:b},S||k?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(C)},z.createElement("rect",{x:S?f:f-p/2,y:k?u:u-y/2,width:S?p:p*2,height:k?y:y*2})),!I&&z.createElement("clipPath",{id:"clipPath-dots-".concat(C)},z.createElement("rect",{x:f-B/2,y:u-B/2,width:p+B,height:y+B}))):null,g?null:this.renderArea(w,C),(o||g)&&this.renderDots(w,I,C),(!m||v)&&ri.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(j.PureComponent);VP=ha;Za(ha,"displayName","Area");Za(ha,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Mo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Za(ha,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(he(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Za(ha,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=t.layout,y=u&&u.length,m=VP.getBaseValue(t,r,n,a),x=p==="horizontal",v=!1,g=d.map(function(S,k){var w;y?w=u[f+k]:(w=Fr(S,l),Array.isArray(w)?v=!0:w=[m,w]);var C=w[1]==null||y&&Fr(S,l)==null;return x?{x:_l({axis:n,ticks:i,bandSize:s,entry:S,index:k}),y:C?null:a.scale(w[1]),value:w,payload:S}:{x:C?null:n.scale(w[1]),y:_l({axis:a,ticks:o,bandSize:s,entry:S,index:k}),value:w,payload:S}}),b;return y||v?b=g.map(function(S){var k=Array.isArray(S.value)?S.value[0]:null;return x?{x:S.x,y:k!=null&&S.y!=null?a.scale(k):null}:{x:k!=null?n.scale(k):null,y:S.y}}):b=x?a.scale(m):n.scale(m),Vi({points:g,baseLine:b,layout:p,isRange:v},h)});Za(ha,"renderDotItem",function(e,t){var r;if(z.isValidElement(e))r=z.cloneElement(e,t);else if(Ze(e))r=e(t);else{var n=ot("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=HP(t,VJ);r=z.createElement(fp,rs({},i,{key:a,className:n}))}return r});function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function eee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZP(n.key),n)}}function ree(e,t,r){return t&&tee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nee(e,t,r){return t=oh(t),aee(e,YP()?Reflect.construct(t,r||[],oh(e).constructor):t.apply(e,r))}function aee(e,t){if(t&&(zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iee(e)}function iee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YP=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(e)}function oee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rv(e,t)}function rv(e,t){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rv(e,t)}function qP(e,t,r){return t=ZP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZP(e){var t=see(e,"string");return zl(t)=="symbol"?t:t+""}function see(e,t){if(zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yp=function(e){function t(){return eee(this,t),nee(this,t,arguments)}return oee(t,e),ree(t,[{key:"render",value:function(){return null}}])}(j.Component);qP(yp,"displayName","ZAxis");qP(yp,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var lee=["option","isActive"];function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uu.apply(this,arguments)}function cee(e,t){if(e==null)return{};var r=uee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fee(e){var t=e.option,r=e.isActive,n=cee(e,lee);return typeof t=="string"?j.createElement(Gy,uu({option:j.createElement(Qh,uu({type:t},n)),isActive:r,shapeType:"symbols"},n)):j.createElement(Gy,uu({option:t,isActive:r,shapeType:"symbols"},n))}function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fu.apply(this,arguments)}function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(r),!0).forEach(function(n){so(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JP(n.key),n)}}function hee(e,t,r){return t&&VS(e.prototype,t),r&&VS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pee(e,t,r){return t=sh(t),gee(e,QP()?Reflect.construct(t,r||[],sh(e).constructor):t.apply(e,r))}function gee(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mee(e)}function mee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QP=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sh(e)}function yee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nv(e,t)}function nv(e,t){return nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nv(e,t)}function so(e,t,r){return t=JP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JP(e){var t=vee(e,"string");return Gl(t)=="symbol"?t:t+""}function vee(e,t){if(Gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kn=function(e){function t(){var r;dee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=pee(this,t,[].concat(a)),so(r,"state",{isAnimationFinished:!1}),so(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),so(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),so(r,"id",Ms("recharts-scatter-")),r}return yee(t,e),hee(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,l=i.activeIndex,u=Ke(this.props,!1);return n.map(function(f,d){var h=l===d,p=h?s:o,y=la(la({},u),f);return z.createElement(bt,fu({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},Au(a.props,f,d),{role:"img"}),z.createElement(fee,fu({option:p,isActive:h,key:"symbol-".concat(d)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return z.createElement(Fa,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,y=i.map(function(m,x){var v=d&&d[x];if(v){var g=xr(v.cx,m.cx),b=xr(v.cy,m.cy),S=xr(v.size,m.size);return la(la({},m),{},{cx:g(p),cy:b(p),size:S(p)})}var k=xr(0,m.size);return la(la({},m),{},{size:k(p)})});return z.createElement(bt,null,n.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!bs(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,l=a.children,u=Ln(l,uc);return u?u.map(function(f,d){var h=f.props,p=h.direction,y=h.dataKey;return z.cloneElement(f,{key:"".concat(p,"-").concat(y,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(x,v){return{x:x.cx,y:x.cy,value:p==="x"?+x.node.x:+x.node.y,errorVal:Fr(x,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,l=Ke(this.props,!1),u=Ke(i,!1),f,d;if(o==="joint")f=a.map(function(b){return{x:b.cx,y:b.cy}});else if(o==="fitting"){var h=HT(a),p=h.xmin,y=h.xmax,m=h.a,x=h.b,v=function(S){return m*S+x};f=[{x:p,y:v(p)},{x:y,y:v(y)}]}var g=la(la(la({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:f});return z.isValidElement(i)?d=z.cloneElement(i,g):Ze(i)?d=i(g):d=z.createElement(ss,fu({},g,{type:s})),z.createElement(bt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,l=n.xAxis,u=n.yAxis,f=n.left,d=n.top,h=n.width,p=n.height,y=n.id,m=n.isAnimationActive;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,v=ot("recharts-scatter",s),g=l&&l.allowDataOverflow,b=u&&u.allowDataOverflow,S=g||b,k=Xe(y)?this.id:y;return z.createElement(bt,{className:v,clipPath:S?"url(#clipPath-".concat(k,")"):null},g||b?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(k)},z.createElement("rect",{x:g?f:f-h/2,y:b?d:d-p/2,width:g?h:h*2,height:b?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),z.createElement(bt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||x)&&ri.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(j.PureComponent);so(kn,"displayName","Scatter");so(kn,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Mo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});so(kn,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=a.props.tooltipType,f=Ln(a.props.children,Wx),d=Xe(t.dataKey)?a.props.dataKey:t.dataKey,h=Xe(r.dataKey)?a.props.dataKey:r.dataKey,p=n&&n.dataKey,y=n?n.range:yp.defaultProps.range,m=y&&y[0],x=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,g=i.map(function(b,S){var k=Fr(b,d),w=Fr(b,h),C=!Xe(p)&&Fr(b,p)||"-",P=[{name:Xe(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:k,payload:b,dataKey:d,type:u},{name:Xe(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:w,payload:b,dataKey:h,type:u}];C!=="-"&&P.push({name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:b,dataKey:p,type:u});var O=_l({axis:t,ticks:o,bandSize:x,entry:b,index:S,dataKey:d}),N=_l({axis:r,ticks:s,bandSize:v,entry:b,index:S,dataKey:h}),$=C!=="-"?n.scale(C):m,M=Math.sqrt(Math.max($,0)/Math.PI);return la(la({},b),{},{cx:O,cy:N,x:O-M,y:N-M,xAxis:t,yAxis:r,zAxis:n,width:2*M,height:2*M,size:$,node:{x:k,y:w,z:C},tooltipPayload:P,tooltipPosition:{x:O,y:N},payload:b},f&&f[S]&&f[S].props)});return la({points:g},l)});function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function xee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rN(n.key),n)}}function wee(e,t,r){return t&&bee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kee(e,t,r){return t=lh(t),See(e,eN()?Reflect.construct(t,r||[],lh(e).constructor):t.apply(e,r))}function See(e,t){if(t&&(Ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jee(e)}function jee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lh(e)}function Cee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&av(e,t)}function av(e,t){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},av(e,t)}function tN(e,t,r){return t=rN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rN(e){var t=Pee(e,"string");return Ul(t)=="symbol"?t:t+""}function Pee(e,t){if(Ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(this,arguments)}function Nee(e){var t=e.xAxisId,r=w1(),n=k1(),a=AP(t);return a==null?null:j.createElement(fc,iv({},a,{className:ot("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ki(o,!0)}}))}var Bn=function(e){function t(){return xee(this,t),kee(this,t,arguments)}return Cee(t,e),wee(t,[{key:"render",value:function(){return j.createElement(Nee,this.props)}}])}(j.Component);tN(Bn,"displayName","XAxis");tN(Bn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function Oee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iN(n.key),n)}}function _ee(e,t,r){return t&&Mee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aee(e,t,r){return t=ch(t),Tee(e,nN()?Reflect.construct(t,r||[],ch(e).constructor):t.apply(e,r))}function Tee(e,t){if(t&&(Wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eee(e)}function Eee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nN=function(){return!!e})()}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ch(e)}function $ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ov(e,t)}function ov(e,t){return ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ov(e,t)}function aN(e,t,r){return t=iN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iN(e){var t=Dee(e,"string");return Wl(t)=="symbol"?t:t+""}function Dee(e,t){if(Wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sv.apply(this,arguments)}var Ree=function(t){var r=t.yAxisId,n=w1(),a=k1(),i=TP(r);return i==null?null:j.createElement(fc,sv({},i,{className:ot("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return ki(s,!0)}}))},Fn=function(e){function t(){return Oee(this,t),Aee(this,t,arguments)}return $ee(t,e),_ee(t,[{key:"render",value:function(){return j.createElement(Ree,this.props)}}])}(j.Component);aN(Fn,"displayName","YAxis");aN(Fn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function HS(e){return Fee(e)||Bee(e)||Lee(e)||Iee()}function Iee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lee(e,t){if(e){if(typeof e=="string")return lv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lv(e,t)}}function Bee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fee(e){if(Array.isArray(e))return lv(e)}function lv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cv=function(t,r,n,a,i){var o=Ln(t,oo),s=Ln(t,Pf),l=[].concat(HS(o),HS(s)),u=Ln(t,Nf),f="".concat(a,"Id"),d=a[0],h=r;if(l.length&&(h=l.reduce(function(m,x){if(x.props[f]===n&&ni(x.props,"extendDomain")&&he(x.props[d])){var v=x.props[d];return[Math.min(m[0],v),Math.max(m[1],v)]}return m},h)),u.length){var p="".concat(d,"1"),y="".concat(d,"2");h=u.reduce(function(m,x){if(x.props[f]===n&&ni(x.props,"extendDomain")&&he(x.props[p])&&he(x.props[y])){var v=x.props[p],g=x.props[y];return[Math.min(m[0],v,g),Math.max(m[1],v,g)]}return m},h)}return i&&i.length&&(h=i.reduce(function(m,x){return he(x)?[Math.min(m[0],x),Math.max(m[1],x)]:m},h)),h},oN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function i(l,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new a(f,d||l,h),y=r?r+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],p]:l._events[y].push(p):(l._events[y]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,y=new Array(p);h<p;h++)y[h]=d[h].fn;return y},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,h,p,y){var m=r?r+u:u;if(!this._events[m])return!1;var x=this._events[m],v=arguments.length,g,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,p),!0;case 6:return x.fn.call(x.context,f,d,h,p,y),!0}for(b=1,g=new Array(v-1);b<v;b++)g[b-1]=arguments[b];x.fn.apply(x.context,g)}else{var S=x.length,k;for(b=0;b<S;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),v){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,f);break;case 3:x[b].fn.call(x[b].context,f,d);break;case 4:x[b].fn.call(x[b].context,f,d,h);break;default:if(!g)for(k=1,g=new Array(v-1);k<v;k++)g[k-1]=arguments[k];x[b].fn.apply(x[b].context,g)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===f&&(!h||y.once)&&(!d||y.context===d)&&o(this,p);else{for(var m=0,x=[],v=y.length;m<v;m++)(y[m].fn!==f||h&&!y[m].once||d&&y[m].context!==d)&&x.push(y[m]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(oN);var zee=oN.exports;const Gee=Rt(zee);var $g=new Gee,Dg="recharts.syncMouseEvents";function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function Uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sN(n.key),n)}}function Vee(e,t,r){return t&&Wee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rg(e,t,r){return t=sN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sN(e){var t=Hee(e,"string");return df(t)=="symbol"?t:t+""}function Hee(e,t){if(df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xee=function(){function e(){Uee(this,e),Rg(this,"activeIndex",0),Rg(this,"coordinateList",[]),Rg(this,"layout","horizontal")}return Vee(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+l+u,h=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Kee(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&he(n)&&he(a))return!0}return!1}function Yee(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function lN(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=tn(t,r,n,a),s=tn(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function qee(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=tn(s,l,u,d),p=tn(s,l,f,d);n=h.x,a=h.y,i=p.x,o=p.y}else return lN(t);return[{x:n,y:a},{x:i,y:o}]}function hf(e){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hf(e)}function XS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(r),!0).forEach(function(n){Zee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zee(e,t,r){return t=Qee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qee(e){var t=Jee(e,"string");return hf(t)=="symbol"?t:t+""}function Jee(e,t){if(hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ete(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var y,m=ss;if(h==="ScatterChart")y=o,m=PY;else if(h==="BarChart")y=Yee(d,o,l,f),m=m1;else if(d==="radial"){var x=lN(o),v=x.cx,g=x.cy,b=x.radius,S=x.startAngle,k=x.endAngle;y={cx:v,cy:g,startAngle:S,endAngle:k,innerRadius:b,outerRadius:b},m=nP}else y={points:qee(d,o,l)},m=ss;var w=dd(dd(dd(dd({stroke:"#ccc",pointerEvents:"none"},l),y),Ke(p,!1)),{},{payload:s,payloadIndex:u,className:ot("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,w):j.createElement(m,w)}var tte=["item"],rte=["children","className","width","height","style","compact","title","desc"];function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rl.apply(this,arguments)}function KS(e,t){return ite(e)||ate(e,t)||uN(e,t)||nte()}function nte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ate(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function ite(e){if(Array.isArray(e))return e}function YS(e,t){if(e==null)return{};var r=ote(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ote(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fN(n.key),n)}}function cte(e,t,r){return t&&lte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ute(e,t,r){return t=uh(t),fte(e,cN()?Reflect.construct(t,r||[],uh(e).constructor):t.apply(e,r))}function fte(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dte(e)}function dte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cN=function(){return!!e})()}function uh(e){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uh(e)}function hte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uv(e,t)}function uv(e,t){return uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uv(e,t)}function Hl(e){return mte(e)||gte(e)||uN(e)||pte()}function pte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uN(e,t){if(e){if(typeof e=="string")return fv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fv(e,t)}}function gte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mte(e){if(Array.isArray(e))return fv(e)}function fv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(r),!0).forEach(function(n){Ge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ge(e,t,r){return t=fN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fN(e){var t=yte(e,"string");return Vl(t)=="symbol"?t:t+""}function yte(e,t){if(Vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vte={xAxis:["bottom","top"],yAxis:["left","right"]},xte={width:"100%",height:"100%"},dN={x:0,y:0};function hd(e){return e}var bte=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},wte=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return ne(ne(ne({},a),tn(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,u=a.angle;return ne(ne(ne({},a),tn(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return dN},vp=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Hl(s),Hl(u)):s},[]);return o.length>0?o:t&&t.length&&he(a)&&he(i)?t.slice(a,i+1):[]};function hN(e){return e==="number"?[0,"auto"]:void 0}var dv=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=vp(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(l,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?s:d;h=l0(p,o.dataKey,a)}else h=d&&d[n]||s[n];return h?[].concat(Hl(l),[eP(u,h)]):l},[])},ZS=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=bte(i,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,f=aH(o,s,u,l);if(f>=0&&u){var d=u[f]&&u[f].value,h=dv(t,r,f,d),p=wte(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},kte=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=ZC(f,i);return n.reduce(function(y,m){var x,v=m.type.defaultProps!==void 0?ne(ne({},m.type.defaultProps),m.props):m.props,g=v.type,b=v.dataKey,S=v.allowDataOverflow,k=v.allowDuplicatedCategory,w=v.scale,C=v.ticks,P=v.includeHidden,O=v[o];if(y[O])return y;var N=vp(t.data,{graphicalItems:a.filter(function(K){var F,ee=o in K.props?K.props[o]:(F=K.type.defaultProps)===null||F===void 0?void 0:F[o];return ee===O}),dataStartIndex:l,dataEndIndex:u}),$=N.length,M,_,D;Kee(v.domain,S,g)&&(M=Py(v.domain,null,S),p&&(g==="number"||w!=="auto")&&(D=su(N,b,"category")));var I=hN(g);if(!M||M.length===0){var B,A=(B=v.domain)!==null&&B!==void 0?B:I;if(b){if(M=su(N,b,g),g==="category"&&p){var E=VT(M);k&&E?(_=M,M=K0(0,$)):k||(M=Ok(A,M,m).reduce(function(K,F){return K.indexOf(F)>=0?K:[].concat(Hl(K),[F])},[]))}else if(g==="category")k?M=M.filter(function(K){return K!==""&&!Xe(K)}):M=Ok(A,M,m).reduce(function(K,F){return K.indexOf(F)>=0||F===""||Xe(F)?K:[].concat(Hl(K),[F])},[]);else if(g==="number"){var L=cH(N,a.filter(function(K){var F,ee,ue=o in K.props?K.props[o]:(F=K.type.defaultProps)===null||F===void 0?void 0:F[o],Q="hide"in K.props?K.props.hide:(ee=K.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return ue===O&&(P||!Q)}),b,i,f);L&&(M=L)}p&&(g==="number"||w!=="auto")&&(D=su(N,b,"category"))}else p?M=K0(0,$):s&&s[O]&&s[O].hasStack&&g==="number"?M=h==="expand"?[0,1]:JC(s[O].stackGroups,l,u):M=qC(N,a.filter(function(K){var F=o in K.props?K.props[o]:K.type.defaultProps[o],ee="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return F===O&&(P||!ee)}),g,f,!0);if(g==="number")M=cv(d,M,O,i,C),A&&(M=Py(A,M,S));else if(g==="category"&&A){var U=A,J=M.every(function(K){return U.indexOf(K)>=0});J&&(M=U)}}return ne(ne({},y),{},Ge({},O,ne(ne({},v),{},{axisType:i,domain:M,categoricalDomain:D,duplicateDomain:_,originalDomain:(x=v.domain)!==null&&x!==void 0?x:I,isCategorical:p,layout:f})))},{})},Ste=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=vp(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=h.length,y=ZC(f,i),m=-1;return n.reduce(function(x,v){var g=v.type.defaultProps!==void 0?ne(ne({},v.type.defaultProps),v.props):v.props,b=g[o],S=hN("number");if(!x[b]){m++;var k;return y?k=K0(0,p):s&&s[b]&&s[b].hasStack?(k=JC(s[b].stackGroups,l,u),k=cv(d,k,b,i)):(k=Py(S,qC(h,n.filter(function(w){var C,P,O=o in w.props?w.props[o]:(C=w.type.defaultProps)===null||C===void 0?void 0:C[o],N="hide"in w.props?w.props.hide:(P=w.type.defaultProps)===null||P===void 0?void 0:P.hide;return O===b&&!N}),"number",f),a.defaultProps.allowDataOverflow),k=cv(d,k,b,i)),ne(ne({},x),{},Ge({},b,ne(ne({axisType:i},a.defaultProps),{},{hide:!0,orientation:ga(vte,"".concat(i,".").concat(m%2),null),domain:k,originalDomain:S,isCategorical:y,layout:f})))}return x},{})},jte=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Ln(f,i),p={};return h&&h.length?p=kte(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(p=Ste(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},Cte=function(t){var r=Zi(t),n=ki(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Gx(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:L0(r,n)}},QS=function(t){var r=t.children,n=t.defaultShowTooltip,a=Yn(r,El),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Pte=function(t){return!t||!t.length?!1:t.some(function(r){var n=ji(r&&r.type);return n&&n.indexOf("Bar")>=0})},JS=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Nte=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,h=n.margin||{},p=Yn(d,El),y=Yn(d,ei),m=Object.keys(l).reduce(function(k,w){var C=l[w],P=C.orientation;return!C.mirror&&!C.hide?ne(ne({},k),{},Ge({},P,k[P]+C.width)):k},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(k,w){var C=o[w],P=C.orientation;return!C.mirror&&!C.hide?ne(ne({},k),{},Ge({},P,ga(k,"".concat(P))+C.height)):k},{top:h.top||0,bottom:h.bottom||0}),v=ne(ne({},x),m),g=v.bottom;p&&(v.bottom+=p.props.height||El.defaultProps.height),y&&r&&(v=sH(v,a,n,r));var b=u-v.left-v.right,S=f-v.top-v.bottom;return ne(ne({brushBottom:g},v),{},{width:Math.max(b,0),height:Math.max(S,0)})},Ote=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},P1=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(v,g){var b=g.graphicalItems,S=g.stackGroups,k=g.offset,w=g.updateId,C=g.dataStartIndex,P=g.dataEndIndex,O=v.barSize,N=v.layout,$=v.barGap,M=v.barCategoryGap,_=v.maxBarSize,D=JS(N),I=D.numericAxisName,B=D.cateAxisName,A=Pte(b),E=[];return b.forEach(function(L,U){var J=vp(v.data,{graphicalItems:[L],dataStartIndex:C,dataEndIndex:P}),K=L.type.defaultProps!==void 0?ne(ne({},L.type.defaultProps),L.props):L.props,F=K.dataKey,ee=K.maxBarSize,ue=K["".concat(I,"Id")],Q=K["".concat(B,"Id")],fe={},W=l.reduce(function(Re,lt){var gt=g["".concat(lt.axisType,"Map")],sr=K["".concat(lt.axisType,"Id")];gt&&gt[sr]||lt.axisType==="zAxis"||ks();var Je=gt[sr];return ne(ne({},Re),{},Ge(Ge({},lt.axisType,Je),"".concat(lt.axisType,"Ticks"),ki(Je)))},fe),X=W[B],se=W["".concat(B,"Ticks")],ce=S&&S[ue]&&S[ue].hasStack&&wH(L,S[ue].stackGroups),H=ji(L.type).indexOf("Bar")>=0,pe=L0(X,se),Z=[],te=A&&iH({barSize:O,stackGroups:S,totalSize:Ote(W,B)});if(H){var ge,me,He=Xe(ee)?_:ee,Ae=(ge=(me=L0(X,se,!0))!==null&&me!==void 0?me:He)!==null&&ge!==void 0?ge:0;Z=oH({barGap:$,barCategoryGap:M,bandSize:Ae!==pe?Ae:pe,sizeList:te[Q],maxBarSize:He}),Ae!==pe&&(Z=Z.map(function(Re){return ne(ne({},Re),{},{position:ne(ne({},Re.position),{},{offset:Re.position.offset-Ae/2})})}))}var _e=L&&L.type&&L.type.getComposedData;_e&&E.push({props:ne(ne({},_e(ne(ne({},W),{},{displayedData:J,props:v,dataKey:F,item:L,bandSize:pe,barPosition:Z,offset:k,stackedData:ce,layout:N,dataStartIndex:C,dataEndIndex:P}))),{},Ge(Ge(Ge({key:L.key||"item-".concat(U)},I,W[I]),B,W[B]),"animationId",w)),childIndex:aE(L,v.children),item:L})}),E},p=function(v,g){var b=v.props,S=v.dataStartIndex,k=v.dataEndIndex,w=v.updateId;if(!k2({props:b}))return null;var C=b.children,P=b.layout,O=b.stackOffset,N=b.data,$=b.reverseStackOrder,M=JS(P),_=M.numericAxisName,D=M.cateAxisName,I=Ln(C,n),B=vH(N,I,"".concat(_,"Id"),"".concat(D,"Id"),O,$),A=l.reduce(function(K,F){var ee="".concat(F.axisType,"Map");return ne(ne({},K),{},Ge({},ee,jte(b,ne(ne({},F),{},{graphicalItems:I,stackGroups:F.axisType===_&&B,dataStartIndex:S,dataEndIndex:k}))))},{}),E=Nte(ne(ne({},A),{},{props:b,graphicalItems:I}),g==null?void 0:g.legendBBox);Object.keys(A).forEach(function(K){A[K]=f(b,A[K],E,K.replace("Map",""),r)});var L=A["".concat(D,"Map")],U=Cte(L),J=h(b,ne(ne({},A),{},{dataStartIndex:S,dataEndIndex:k,updateId:w,graphicalItems:I,stackGroups:B,offset:E}));return ne(ne({formattedGraphicalItems:J,graphicalItems:I,offset:E,stackGroups:B},U),A)},y=function(x){function v(g){var b,S,k;return ste(this,v),k=ute(this,v,[g]),Ge(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ge(k,"accessibilityManager",new Xee),Ge(k,"handleLegendBBoxUpdate",function(w){if(w){var C=k.state,P=C.dataStartIndex,O=C.dataEndIndex,N=C.updateId;k.setState(ne({legendBBox:w},p({props:k.props,dataStartIndex:P,dataEndIndex:O,updateId:N},ne(ne({},k.state),{},{legendBBox:w}))))}}),Ge(k,"handleReceiveSyncEvent",function(w,C,P){if(k.props.syncId===w){if(P===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(C)}}),Ge(k,"handleBrushChange",function(w){var C=w.startIndex,P=w.endIndex;if(C!==k.state.dataStartIndex||P!==k.state.dataEndIndex){var O=k.state.updateId;k.setState(function(){return ne({dataStartIndex:C,dataEndIndex:P},p({props:k.props,dataStartIndex:C,dataEndIndex:P,updateId:O},k.state))}),k.triggerSyncEvent({dataStartIndex:C,dataEndIndex:P})}}),Ge(k,"handleMouseEnter",function(w){var C=k.getMouseInfo(w);if(C){var P=ne(ne({},C),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var O=k.props.onMouseEnter;Ze(O)&&O(P,w)}}),Ge(k,"triggeredAfterMouseMove",function(w){var C=k.getMouseInfo(w),P=C?ne(ne({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(P),k.triggerSyncEvent(P);var O=k.props.onMouseMove;Ze(O)&&O(P,w)}),Ge(k,"handleItemMouseEnter",function(w){k.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),Ge(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Ge(k,"handleMouseMove",function(w){w.persist(),k.throttleTriggeredAfterMouseMove(w)}),Ge(k,"handleMouseLeave",function(w){k.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};k.setState(C),k.triggerSyncEvent(C);var P=k.props.onMouseLeave;Ze(P)&&P(C,w)}),Ge(k,"handleOuterEvent",function(w){var C=nE(w),P=ga(k.props,"".concat(C));if(C&&Ze(P)){var O,N;/.*touch.*/i.test(C)?N=k.getMouseInfo(w.changedTouches[0]):N=k.getMouseInfo(w),P((O=N)!==null&&O!==void 0?O:{},w)}}),Ge(k,"handleClick",function(w){var C=k.getMouseInfo(w);if(C){var P=ne(ne({},C),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var O=k.props.onClick;Ze(O)&&O(P,w)}}),Ge(k,"handleMouseDown",function(w){var C=k.props.onMouseDown;if(Ze(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"handleMouseUp",function(w){var C=k.props.onMouseUp;if(Ze(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),Ge(k,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.handleMouseDown(w.changedTouches[0])}),Ge(k,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.handleMouseUp(w.changedTouches[0])}),Ge(k,"handleDoubleClick",function(w){var C=k.props.onDoubleClick;if(Ze(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"handleContextMenu",function(w){var C=k.props.onContextMenu;if(Ze(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"triggerSyncEvent",function(w){k.props.syncId!==void 0&&$g.emit(Dg,k.props.syncId,w,k.eventEmitterSymbol)}),Ge(k,"applySyncEvent",function(w){var C=k.props,P=C.layout,O=C.syncMethod,N=k.state.updateId,$=w.dataStartIndex,M=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)k.setState(ne({dataStartIndex:$,dataEndIndex:M},p({props:k.props,dataStartIndex:$,dataEndIndex:M,updateId:N},k.state)));else if(w.activeTooltipIndex!==void 0){var _=w.chartX,D=w.chartY,I=w.activeTooltipIndex,B=k.state,A=B.offset,E=B.tooltipTicks;if(!A)return;if(typeof O=="function")I=O(E,w);else if(O==="value"){I=-1;for(var L=0;L<E.length;L++)if(E[L].value===w.activeLabel){I=L;break}}var U=ne(ne({},A),{},{x:A.left,y:A.top}),J=Math.min(_,U.x+U.width),K=Math.min(D,U.y+U.height),F=E[I]&&E[I].value,ee=dv(k.state,k.props.data,I),ue=E[I]?{x:P==="horizontal"?E[I].coordinate:J,y:P==="horizontal"?K:E[I].coordinate}:dN;k.setState(ne(ne({},w),{},{activeLabel:F,activeCoordinate:ue,activePayload:ee,activeTooltipIndex:I}))}else k.setState(w)}),Ge(k,"renderCursor",function(w){var C,P=k.state,O=P.isTooltipActive,N=P.activeCoordinate,$=P.activePayload,M=P.offset,_=P.activeTooltipIndex,D=P.tooltipAxisBandSize,I=k.getTooltipEventType(),B=(C=w.props.active)!==null&&C!==void 0?C:O,A=k.props.layout,E=w.key||"_recharts-cursor";return z.createElement(ete,{key:E,activeCoordinate:N,activePayload:$,activeTooltipIndex:_,chartName:r,element:w,isActive:B,layout:A,offset:M,tooltipAxisBandSize:D,tooltipEventType:I})}),Ge(k,"renderPolarAxis",function(w,C,P){var O=ga(w,"type.axisType"),N=ga(k.state,"".concat(O,"Map")),$=w.type.defaultProps,M=$!==void 0?ne(ne({},$),w.props):w.props,_=N&&N[M["".concat(O,"Id")]];return j.cloneElement(w,ne(ne({},_),{},{className:ot(O,_.className),key:w.key||"".concat(C,"-").concat(P),ticks:ki(_,!0)}))}),Ge(k,"renderPolarGrid",function(w){var C=w.props,P=C.radialLines,O=C.polarAngles,N=C.polarRadius,$=k.state,M=$.radiusAxisMap,_=$.angleAxisMap,D=Zi(M),I=Zi(_),B=I.cx,A=I.cy,E=I.innerRadius,L=I.outerRadius;return j.cloneElement(w,{polarAngles:Array.isArray(O)?O:ki(I,!0).map(function(U){return U.coordinate}),polarRadius:Array.isArray(N)?N:ki(D,!0).map(function(U){return U.coordinate}),cx:B,cy:A,innerRadius:E,outerRadius:L,key:w.key||"polar-grid",radialLines:P})}),Ge(k,"renderLegend",function(){var w=k.state.formattedGraphicalItems,C=k.props,P=C.children,O=C.width,N=C.height,$=k.props.margin||{},M=O-($.left||0)-($.right||0),_=KC({children:P,formattedGraphicalItems:w,legendWidth:M,legendContent:u});if(!_)return null;var D=_.item,I=YS(_,tte);return j.cloneElement(D,ne(ne({},I),{},{chartWidth:O,chartHeight:N,margin:$,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Ge(k,"renderTooltip",function(){var w,C=k.props,P=C.children,O=C.accessibilityLayer,N=Yn(P,Xr);if(!N)return null;var $=k.state,M=$.isTooltipActive,_=$.activeCoordinate,D=$.activePayload,I=$.activeLabel,B=$.offset,A=(w=N.props.active)!==null&&w!==void 0?w:M;return j.cloneElement(N,{viewBox:ne(ne({},B),{},{x:B.left,y:B.top}),active:A,label:I,payload:A?D:[],coordinate:_,accessibilityLayer:O})}),Ge(k,"renderBrush",function(w){var C=k.props,P=C.margin,O=C.data,N=k.state,$=N.offset,M=N.dataStartIndex,_=N.dataEndIndex,D=N.updateId;return j.cloneElement(w,{key:w.key||"_recharts-brush",onChange:ld(k.handleBrushChange,w.props.onChange),data:O,x:he(w.props.x)?w.props.x:$.left,y:he(w.props.y)?w.props.y:$.top+$.height+$.brushBottom-(P.bottom||0),width:he(w.props.width)?w.props.width:$.width,startIndex:M,endIndex:_,updateId:"brush-".concat(D)})}),Ge(k,"renderReferenceElement",function(w,C,P){if(!w)return null;var O=k,N=O.clipPathId,$=k.state,M=$.xAxisMap,_=$.yAxisMap,D=$.offset,I=w.type.defaultProps||{},B=w.props,A=B.xAxisId,E=A===void 0?I.xAxisId:A,L=B.yAxisId,U=L===void 0?I.yAxisId:L;return j.cloneElement(w,{key:w.key||"".concat(C,"-").concat(P),xAxis:M[E],yAxis:_[U],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:N})}),Ge(k,"renderActivePoints",function(w){var C=w.item,P=w.activePoint,O=w.basePoint,N=w.childIndex,$=w.isRange,M=[],_=C.props.key,D=C.item.type.defaultProps!==void 0?ne(ne({},C.item.type.defaultProps),C.item.props):C.item.props,I=D.activeDot,B=D.dataKey,A=ne(ne({index:N,dataKey:B,cx:P.x,cy:P.y,r:4,fill:g1(C.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ke(I,!1)),c0(I));return M.push(v.renderActiveDot(I,A,"".concat(_,"-activePoint-").concat(N))),O?M.push(v.renderActiveDot(I,ne(ne({},A),{},{cx:O.x,cy:O.y}),"".concat(_,"-basePoint-").concat(N))):$&&M.push(null),M}),Ge(k,"renderGraphicChild",function(w,C,P){var O=k.filterFormatItem(w,C,P);if(!O)return null;var N=k.getTooltipEventType(),$=k.state,M=$.isTooltipActive,_=$.tooltipAxis,D=$.activeTooltipIndex,I=$.activeLabel,B=k.props.children,A=Yn(B,Xr),E=O.props,L=E.points,U=E.isRange,J=E.baseLine,K=O.item.type.defaultProps!==void 0?ne(ne({},O.item.type.defaultProps),O.item.props):O.item.props,F=K.activeDot,ee=K.hide,ue=K.activeBar,Q=K.activeShape,fe=!!(!ee&&M&&A&&(F||ue||Q)),W={};N!=="axis"&&A&&A.props.trigger==="click"?W={onClick:ld(k.handleItemMouseEnter,w.props.onClick)}:N!=="axis"&&(W={onMouseLeave:ld(k.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:ld(k.handleItemMouseEnter,w.props.onMouseEnter)});var X=j.cloneElement(w,ne(ne({},O.props),W));function se(lt){return typeof _.dataKey=="function"?_.dataKey(lt.payload):null}if(fe)if(D>=0){var ce,H;if(_.dataKey&&!_.allowDuplicatedCategory){var pe=typeof _.dataKey=="function"?se:"payload.".concat(_.dataKey.toString());ce=l0(L,pe,I),H=U&&J&&l0(J,pe,I)}else ce=L==null?void 0:L[D],H=U&&J&&J[D];if(Q||ue){var Z=w.props.activeIndex!==void 0?w.props.activeIndex:D;return[j.cloneElement(w,ne(ne(ne({},O.props),W),{},{activeIndex:Z})),null,null]}if(!Xe(ce))return[X].concat(Hl(k.renderActivePoints({item:O,activePoint:ce,basePoint:H,childIndex:D,isRange:U})))}else{var te,ge=(te=k.getItemByXY(k.state.activeCoordinate))!==null&&te!==void 0?te:{graphicalItem:X},me=ge.graphicalItem,He=me.item,Ae=He===void 0?w:He,_e=me.childIndex,Re=ne(ne(ne({},O.props),W),{},{activeIndex:_e});return[j.cloneElement(Ae,Re),null,null]}return U?[X,null,null]:[X,null]}),Ge(k,"renderCustomized",function(w,C,P){return j.cloneElement(w,ne(ne({key:"recharts-customized-".concat(P)},k.props),k.state))}),Ge(k,"renderMap",{CartesianGrid:{handler:hd,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:hd},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:hd},YAxis:{handler:hd},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=g.id)!==null&&b!==void 0?b:Ms("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=Yj(k.triggeredAfterMouseMove,(S=g.throttleDelay)!==null&&S!==void 0?S:1e3/60),k.state={},k}return hte(v,x),cte(v,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,k=b.data,w=b.height,C=b.layout,P=Yn(S,Xr);if(P){var O=P.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var N=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,$=dv(this.state,k,O,N),M=this.state.tooltipTicks[O].coordinate,_=(this.state.offset.top+w)/2,D=C==="horizontal",I=D?{x:M,y:_}:{y:M,x:_},B=this.state.formattedGraphicalItems.find(function(E){var L=E.item;return L.type.name==="Scatter"});B&&(I=ne(ne({},I),B.props.points[O].tooltipPosition),$=B.props.points[O].tooltipPayload);var A={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:N,activePayload:$,activeCoordinate:I};this.setState(A),this.renderCursor(P),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,w;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){zm([Yn(b.children,Xr)],[Yn(this.props.children,Xr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Yn(this.props.children,Xr);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return s.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,k=S.getBoundingClientRect(),w=_z(k),C={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},P=k.width/S.offsetWidth||1,O=this.inRange(C.chartX,C.chartY,P);if(!O)return null;var N=this.state,$=N.xAxisMap,M=N.yAxisMap,_=this.getTooltipEventType(),D=ZS(this.state,this.props.data,this.props.layout,O);if(_!=="axis"&&$&&M){var I=Zi($).scale,B=Zi(M).scale,A=I&&I.invert?I.invert(C.chartX):null,E=B&&B.invert?B.invert(C.chartY):null;return ne(ne({},C),{},{xValue:A,yValue:E},D)}return D?ne(ne({},C),D):null}},{key:"inRange",value:function(b,S){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,C=b/k,P=S/k;if(w==="horizontal"||w==="vertical"){var O=this.state.offset,N=C>=O.left&&C<=O.left+O.width&&P>=O.top&&P<=O.top+O.height;return N?{x:C,y:P}:null}var $=this.state,M=$.angleAxisMap,_=$.radiusAxisMap;if(M&&_){var D=Zi(M);return Ak({x:C,y:P},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),k=Yn(b,Xr),w={};k&&S==="axis"&&(k.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=c0(this.props,this.handleOuterEvent);return ne(ne({},C),w)}},{key:"addListener",value:function(){$g.on(Dg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){$g.removeListener(Dg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,k){for(var w=this.state.formattedGraphicalItems,C=0,P=w.length;C<P;C++){var O=w[C];if(O.item===b||O.props.key===b.key||S===ji(O.item.type)&&k===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,k=S.left,w=S.top,C=S.height,P=S.width;return z.createElement("defs",null,z.createElement("clipPath",{id:b},z.createElement("rect",{x:k,y:w,height:C,width:P})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,k){var w=KS(k,2),C=w[0],P=w[1];return ne(ne({},S),{},Ge({},C,P.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,k){var w=KS(k,2),C=w[0],P=w[1];return ne(ne({},S),{},Ge({},C,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,k=S.formattedGraphicalItems,w=S.activeItem;if(k&&k.length)for(var C=0,P=k.length;C<P;C++){var O=k[C],N=O.props,$=O.item,M=$.type.defaultProps!==void 0?ne(ne({},$.type.defaultProps),$.props):$.props,_=ji($.type);if(_==="Bar"){var D=(N.data||[]).find(function(E){return mY(b,E)});if(D)return{graphicalItem:O,payload:D}}else if(_==="RadialBar"){var I=(N.data||[]).find(function(E){return Ak(b,E)});if(I)return{graphicalItem:O,payload:I}}else if(dp(O,w)||hp(O,w)||sf(O,w)){var B=vq({graphicalItem:O,activeTooltipItem:w,itemData:M.data}),A=M.activeIndex===void 0?B:M.activeIndex;return{graphicalItem:ne(ne({},O),{},{childIndex:A}),payload:sf(O,w)?M.data[B]:O.props.data[B]}}}return null}},{key:"render",value:function(){var b=this;if(!k2(this))return null;var S=this.props,k=S.children,w=S.className,C=S.width,P=S.height,O=S.style,N=S.compact,$=S.title,M=S.desc,_=YS(S,rte),D=Ke(_,!1);if(N)return z.createElement(PS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(Um,rl({},D,{width:C,height:P,title:$,desc:M}),this.renderClipPath(),j2(k,this.renderMap)));if(this.props.accessibilityLayer){var I,B;D.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,D.role=(B=this.props.role)!==null&&B!==void 0?B:"application",D.onKeyDown=function(E){b.accessibilityManager.keyboardEvent(E)},D.onFocus=function(){b.accessibilityManager.focus()}}var A=this.parseEventsOfWrapper();return z.createElement(PS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",rl({className:ot("recharts-wrapper",w),style:ne({position:"relative",cursor:"default",width:C,height:P},O)},A,{ref:function(L){b.container=L}}),z.createElement(Um,rl({},D,{width:C,height:P,title:$,desc:M,style:xte}),this.renderClipPath(),j2(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Ge(y,"displayName",r),Ge(y,"defaultProps",ne({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Ge(y,"getDerivedStateFromProps",function(x,v){var g=x.dataKey,b=x.data,S=x.children,k=x.width,w=x.height,C=x.layout,P=x.stackOffset,O=x.margin,N=v.dataStartIndex,$=v.dataEndIndex;if(v.updateId===void 0){var M=QS(x);return ne(ne(ne({},M),{},{updateId:0},p(ne(ne({props:x},M),{},{updateId:0}),v)),{},{prevDataKey:g,prevData:b,prevWidth:k,prevHeight:w,prevLayout:C,prevStackOffset:P,prevMargin:O,prevChildren:S})}if(g!==v.prevDataKey||b!==v.prevData||k!==v.prevWidth||w!==v.prevHeight||C!==v.prevLayout||P!==v.prevStackOffset||!ul(O,v.prevMargin)){var _=QS(x),D={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},I=ne(ne({},ZS(v,b,C)),{},{updateId:v.updateId+1}),B=ne(ne(ne({},_),D),I);return ne(ne(ne({},B),p(ne({props:x},B),v)),{},{prevDataKey:g,prevData:b,prevWidth:k,prevHeight:w,prevLayout:C,prevStackOffset:P,prevMargin:O,prevChildren:S})}if(!zm(S,v.prevChildren)){var A,E,L,U,J=Yn(S,El),K=J&&(A=(E=J.props)===null||E===void 0?void 0:E.startIndex)!==null&&A!==void 0?A:N,F=J&&(L=(U=J.props)===null||U===void 0?void 0:U.endIndex)!==null&&L!==void 0?L:$,ee=K!==N||F!==$,ue=!Xe(b),Q=ue&&!ee?v.updateId:v.updateId+1;return ne(ne({updateId:Q},p(ne(ne({props:x},v),{},{updateId:Q,dataStartIndex:K,dataEndIndex:F}),v)),{},{prevChildren:S,dataStartIndex:K,dataEndIndex:F})}return null}),Ge(y,"renderActiveDot",function(x,v,g){var b;return j.isValidElement(x)?b=j.cloneElement(x,v):Ze(x)?b=x(v):b=z.createElement(fp,v),z.createElement(bt,{className:"recharts-active-dot",key:g},b)});var m=j.forwardRef(function(v,g){return z.createElement(y,rl({},v,{ref:g}))});return m.displayName=y.displayName,m},hl=P1({chartName:"LineChart",GraphicalChild:Or,axisComponents:[{axisType:"xAxis",AxisComp:Bn},{axisType:"yAxis",AxisComp:Fn}],formatAxisMap:y1}),Mte=P1({chartName:"ScatterChart",GraphicalChild:kn,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Bn},{axisType:"yAxis",AxisComp:Fn},{axisType:"zAxis",AxisComp:yp}],formatAxisMap:y1}),pN=P1({chartName:"AreaChart",GraphicalChild:ha,axisComponents:[{axisType:"xAxis",AxisComp:Bn},{axisType:"yAxis",AxisComp:Fn}],formatAxisMap:y1});const gi=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},_te=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[h,p]=j.useState(()=>(u==null?void 0:u.channelMode)??gi("hist_mode","All")),[y,m]=j.useState(()=>(u==null?void 0:u.minVal)??gi("hist_min",0)),[x,v]=j.useState(()=>(u==null?void 0:u.maxVal)??gi("hist_max",16383)),[g,b]=j.useState(()=>(u==null?void 0:u.binCount)??gi("hist_bins",100)),[S,k]=j.useState(()=>(u==null?void 0:u.pointToPoint)??gi("hist_ptp",!1)),[w,C]=j.useState(()=>(u==null?void 0:u.showTheo)??gi("hist_show_theo",!1)),[P,O]=j.useState(()=>(u==null?void 0:u.theoMean)??gi("hist_theo_mean","512")),[N,$]=j.useState(()=>(u==null?void 0:u.theoSigma)??gi("hist_theo_sigma","10")),[M,_]=j.useState(()=>(u==null?void 0:u.theoAmp)??gi("hist_theo_amp","1000")),[D,I]=j.useState(!1),[B,A]=j.useState(0),[E,L]=j.useState([]),[U,J]=j.useState(null),[K,F]=j.useState(l||{x:100,y:100}),[ee,ue]=j.useState(!1),Q=j.useRef({x:0,y:0});j.useEffect(()=>{localStorage.setItem("hist_mode",h),localStorage.setItem("hist_min",String(y)),localStorage.setItem("hist_max",String(x)),localStorage.setItem("hist_bins",String(g)),localStorage.setItem("hist_ptp",String(S)),localStorage.setItem("hist_show_theo",String(w)),localStorage.setItem("hist_theo_mean",P),localStorage.setItem("hist_theo_sigma",N),localStorage.setItem("hist_theo_amp",M),f&&f({channelMode:h,minVal:y,maxVal:x,binCount:g,pointToPoint:S,showTheo:w,theoMean:P,theoSigma:N,theoAmp:M})},[h,y,x,g,S,w,P,N,M]),j.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(x<=y){J("Invalid range: Max must be greater than Min");return}J(null),I(!0),A(0);const te=new AbortController,ge=[],He=setTimeout(async()=>{try{let Ae=[];if(d&&d.length>1){const _e=Math.min(d.length,navigator.hardwareConcurrency||4);for(let Je=0;Je<_e;Je++){const tr=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});ge.push(tr)}let Re=0,lt=0;const gt=[],sr=async Je=>{for(;Re<d.length;){if(te.signal.aborted)return;const tr=Re++,tt=d[tr];try{const Yt=await tt.arrayBuffer();await new Promise((It,rr)=>{Je.onmessage=$t=>{const{success:wt,hist:Ye,error:kt}=$t.data;wt?(gt.push(Ye),lt++,A(lt),It()):(console.error(`Error processing ${tt.name}:`,kt),It())},Je.onerror=$t=>{console.error("Worker Error",$t),It()},Je.postMessage({buffer:Yt,roi:a,binCount:g,minVal:y,maxVal:x,pointToPoint:S},[Yt])})}catch(Yt){console.error("File Read Error",Yt)}}};if(await Promise.all(ge.map(Je=>sr(Je))),ge.forEach(Je=>Je.terminate()),ge.length=0,gt.length>0){Ae=gt[0];for(let Je=1;Je<gt.length;Je++){const tr=gt[Je];for(let tt=0;tt<tr.length;tt++)Ae[tt]&&(Ae[tt].c0+=tr[tt].c0,Ae[tt].c1+=tr[tt].c1,Ae[tt].c2+=tr[tt].c2,Ae[tt].c3+=tr[tt].c3)}}}else n&&(Ae=X_(n.data,n.width,n.height,a.x,a.y,a.w,a.h,g,y,x,S));te.signal.aborted||L(Ae)}catch(Ae){console.error("Histogram calc error:",Ae),J("Error calculating histogram")}finally{te.signal.aborted||I(!1)}},50);return()=>{clearTimeout(He),te.abort(),ge.length>0&&(console.log(`Terminating ${ge.length} active histogram workers...`),ge.forEach(Ae=>Ae.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,g,y,x,S,d]);const fe=j.useMemo(()=>{if(!w)return E;const te=parseFloat(P),ge=parseFloat(N),me=parseFloat(M);return isNaN(te)||isNaN(ge)||isNaN(me)||ge<=0?E:E.map(He=>{const Ae=He.binStart,_e=-Math.pow(Ae-te,2)/(2*Math.pow(ge,2)),Re=me*Math.exp(_e);return{...He,theory:Re}})},[E,w,P,N,M]),W=()=>{if(E.length===0)return;let te=0,ge=0;if(E.forEach(me=>{const He=Math.max(me.c0||0,me.c1||0,me.c2||0,me.c3||0);He>te&&(te=He,ge=me.binStart)}),O(ge.toFixed(2)),_(te.toString()),parseFloat(N)===0||isNaN(parseFloat(N))){const me=x-y;$((me/20).toFixed(2))}},X=(te,ge,me)=>{s&&s(),!(me.closest("button")||me.closest("input")||me.closest("select"))&&(ue(!0),Q.current={x:te-K.x,y:ge-K.y})},se=te=>{X(te.clientX,te.clientY,te.target)},ce=te=>{const ge=te.touches[0];X(ge.clientX,ge.clientY,te.target)};if(j.useEffect(()=>{const te=me=>{if(ee){const He="touches"in me?me.touches[0].clientX:me.clientX,Ae="touches"in me?me.touches[0].clientY:me.clientY;F({x:He-Q.current.x,y:Ae-Q.current.y})}},ge=()=>ue(!1);return ee&&(window.addEventListener("mousemove",te),window.addEventListener("mouseup",ge),window.addEventListener("touchmove",te,{passive:!1}),window.addEventListener("touchend",ge)),()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",ge),window.removeEventListener("touchmove",te),window.removeEventListener("touchend",ge)}},[ee]),!e)return null;const H=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},pe=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Z="step";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:K.x,top:K.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${ee?"cursor-grabbing":"cursor-grab"}`,onMouseDown:se,onTouchStart:ce,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&c.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),c.jsxs("select",{value:h,onChange:te=>p(te.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[c.jsx("option",{value:"All",children:"All Colors"}),c.jsx("option",{value:"0",children:H.c0}),c.jsx("option",{value:"1",children:H.c1}),c.jsx("option",{value:"2",children:H.c2}),c.jsx("option",{value:"3",children:H.c3})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),c.jsx("input",{type:"number",value:y,onChange:te=>m(Number(te.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",value:x,onChange:te=>v(Number(te.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:te=>k(te.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),c.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!S&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),c.jsx("input",{type:"number",value:g,onChange:te=>b(Math.max(1,Number(te.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${w?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:te=>C(te.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),c.jsx("span",{className:`font-bold uppercase tracking-tight ${w?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),w&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),c.jsx("input",{type:"text",value:P,onChange:te=>O(te.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),c.jsx("input",{type:"text",value:N,onChange:te=>$(te.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),c.jsx("input",{type:"text",value:M,onChange:te=>_(te.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsx("button",{onClick:W,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),D&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${B}/${d.length}`:"Calculating Histogram..."})]}),U?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:U}):c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(hl,{data:fe,children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),c.jsx(Bn,{dataKey:"binStart",type:"number",domain:[y,x],tickFormatter:te=>Math.floor(te).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),c.jsx(Fn,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),c.jsx(Xr,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:te=>`DN: ${Math.round(Number(te))}`,formatter:(te,ge)=>[Math.round(te),ge]}),c.jsx(ei,{wrapperStyle:{paddingTop:"10px"}}),w&&c.jsx(Or,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(h==="All"||h==="0")&&c.jsx(Or,{type:Z,dataKey:"c0",name:H.c0,stroke:pe.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="1")&&c.jsx(Or,{type:Z,dataKey:"c1",name:H.c1,stroke:pe.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="2")&&c.jsx(Or,{type:Z,dataKey:"c2",name:H.c2,stroke:pe.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="3")&&c.jsx(Or,{type:Z,dataKey:"c3",name:H.c3,stroke:pe.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},dc=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=j.useState(e),[l,u]=j.useState(!1),[f,d]=j.useState({x:0,y:0}),h=j.useRef(null),p=(x,v,g)=>{i&&i(),!(g.closest("button")||g.closest("input"))&&(u(!0),d({x:x-o.x,y:v-o.y}))},y=x=>{p(x.clientX,x.clientY,x.target)},m=x=>{const v=x.touches[0];p(v.clientX,v.clientY,x.target)};return j.useEffect(()=>{const x=g=>{var b,S;if(l){g.cancelable&&g.preventDefault();const k="touches"in g?g.touches[0].clientX:g.clientX,w="touches"in g?g.touches[0].clientY:g.clientY,C=k-f.x,P=w-f.y,O=window.innerWidth-(((b=h.current)==null?void 0:b.offsetWidth)||100),N=window.innerHeight-(((S=h.current)==null?void 0:S.offsetHeight)||100);s({x:Math.max(0,Math.min(C,O)),y:Math.max(0,Math.min(P,N))})}},v=()=>{u(!1)};return l&&(window.addEventListener("mousemove",x),window.addEventListener("mouseup",v),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",v)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",v)}},[l,f]),c.jsxs("div",{ref:h,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${l?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[c.jsx("div",{onMouseDown:y,onTouchStart:m,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),c.jsx("div",{className:"relative z-10 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:t})})]})},Ate=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:l})=>{const u=j.useRef(null),[f,d]=j.useState(!1),[h,p]=j.useState(null),[y,m]=j.useState(null),[x,v]=j.useState(!0),[g,b]=j.useState(!0),[S,k]=j.useState("-1"),[w,C]=j.useState("8"),[P,O]=j.useState(64),[N,$]=j.useState(45),[M,_]=j.useState(60),D=j.useRef(!1),I=j.useRef({x:0,y:0});j.useEffect(()=>{!e||!r||!n||(d(!0),m(null),setTimeout(()=>{try{const L=Y_(r.data,r.width,r.height,n,a,g);L?p(L):m("Could not extract valid data from ROI.")}catch(L){console.error("2D FFT Error",L),m("Calculation Error: "+L.message)}finally{d(!1)}},50))},[e,r,n,a,g]),j.useEffect(()=>{if(!h||!u.current)return;const L=u.current,U=L.getContext("2d");if(!U)return;const J=L.width,K=L.height;U.clearRect(0,0,J,K),U.fillStyle="#0f172a",U.fillRect(0,0,J,K);const F=h.width,ee=h.height,ue=h.data,Q=Math.pow(10,parseFloat(S)||-1),fe=Math.pow(10,parseFloat(w)||8);let W=Q,X=fe;x&&(W=Math.log10(Math.max(1e-10,Q)),X=Math.log10(Math.max(1e-10,fe)));const se=X-W||1,ce=J/2,H=K/2+50,pe=Math.min(J,K)*.4,Z=.6,te=N*Math.PI/180,ge=M*Math.PI/180,me=Math.cos(te),He=Math.sin(te),Ae=Math.cos(ge),_e=Math.sin(ge),Re=(Ye,kt,St)=>{const qt=Ye*me-kt*He,wr=Ye*He+kt*me,Gr=wr*Ae-St*_e,jt=wr*_e+St*Ae;return{x:ce+qt*pe,y:H-Gr*pe,depth:jt}},lt=Math.max(16,P),gt=Math.max(1,Math.floor(F/lt)),sr=Math.max(1,Math.floor(ee/lt)),Je=(Ye,kt)=>{let St=ue[kt*F+Ye];return x&&(St=Math.log10(Math.max(1e-10,St))),St=Math.max(W,Math.min(X,St)),(St-W)/se},tr=Ye=>`hsl(${(1-Ye)*240}, 80%, 50%)`,tt=[];for(let Ye=0;Ye<ee-sr;Ye+=sr)for(let kt=0;kt<F-gt;kt+=gt){const St=kt,qt=Ye,wr=kt+gt,Gr=Ye,jt=kt+gt,Ar=Ye+sr,ct=kt,Zt=Ye+sr,Tr=Je(St,qt),an=Je(wr,Gr),kr=Je(jt,Ar),Er=Je(ct,Zt),on=(Tr+an+kr+Er)/4,Gn=Re(St/(F-1)-.5,qt/(ee-1)-.5,Tr*Z),Ur=Re(wr/(F-1)-.5,Gr/(ee-1)-.5,an*Z),Un=Re(jt/(F-1)-.5,Ar/(ee-1)-.5,kr*Z),wa=Re(ct/(F-1)-.5,Zt/(ee-1)-.5,Er*Z),Ua=(Gn.depth+Ur.depth+Un.depth+wa.depth)/4;tt.push({pts:[{x:Gn.x,y:Gn.y},{x:Ur.x,y:Ur.y},{x:Un.x,y:Un.y},{x:wa.x,y:wa.y}],avgDepth:Ua,avgZ:on})}tt.sort((Ye,kt)=>Ye.avgDepth-kt.avgDepth),U.lineWidth=.5,tt.forEach(Ye=>{U.fillStyle=tr(Ye.avgZ),U.beginPath(),U.moveTo(Ye.pts[0].x,Ye.pts[0].y),U.lineTo(Ye.pts[1].x,Ye.pts[1].y),U.lineTo(Ye.pts[2].x,Ye.pts[2].y),U.lineTo(Ye.pts[3].x,Ye.pts[3].y),U.closePath(),U.fill()}),U.fillStyle="#aaa",U.font="10px monospace";const Yt=Re(-.5,-.5,0),It=Re(.5,-.5,0),rr=Re(-.5,.5,0),$t=Re(.5,.5,0);U.strokeStyle="#666",U.beginPath(),U.moveTo(Yt.x,Yt.y),U.lineTo(It.x,It.y),U.lineTo($t.x,$t.y),U.lineTo(rr.x,rr.y),U.closePath(),U.stroke(),U.fillText("0",Yt.x-10,Yt.y+10),U.fillText("Fx",It.x+5,It.y),U.fillText("Fy",rr.x-15,rr.y);const wt=Re(-.5,-.5,Z);U.strokeStyle="#fff",U.beginPath(),U.moveTo(Yt.x,Yt.y),U.lineTo(wt.x,wt.y),U.stroke(),U.fillText(`10^${w}`,wt.x-25,wt.y),U.fillText(`10^${S}`,Yt.x-25,Yt.y)},[h,x,N,M,S,w,P]);const B=L=>{D.current=!0,I.current={x:L.clientX,y:L.clientY}},A=L=>{if(!D.current)return;const U=L.clientX-I.current.x,J=L.clientY-I.current.y;$(K=>K-U*.5),_(K=>Math.max(0,Math.min(90,K+J*.5))),I.current={x:L.clientX,y:L.clientY}},E=()=>{D.current=!1};return e?c.jsxs(dc,{initialPosition:l||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,h&&c.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[h.width,"x",h.height," (Chirp-Z)"]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),c.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),c.jsx("input",{type:"number",value:S,onChange:L=>k(L.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),c.jsx("span",{className:"text-slate-500",children:"to"}),c.jsx("input",{type:"number",value:w,onChange:L=>C(L.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),c.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:P,onChange:L=>O(Number(L.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),c.jsx("span",{className:"text-slate-300 w-6 text-right",children:P})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:L=>v(L.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:L=>b(L.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),c.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),y&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:y}),c.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:B,onMouseMove:A,onMouseUp:E,onMouseLeave:E}),c.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},Tte=.5,hv=1e-10,e5=(e,t)=>{const r=e.length-1;if(r<0)return hv;const n=t/Tte*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,hv)},Ete=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},$te=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:l,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:h})=>{const[p,y]=j.useState((f==null?void 0:f.selectedChannel)??0),[m,x]=j.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[v,g]=j.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[b,S]=j.useState((f==null?void 0:f.useHanning)??!0),[k,w]=j.useState((f==null?void 0:f.doAverage)??!0),[C,P]=j.useState((f==null?void 0:f.welchSegments)??1),[O,N]=j.useState((f==null?void 0:f.showH)??!0),[$,M]=j.useState((f==null?void 0:f.showV)??!0),[_,D]=j.useState((f==null?void 0:f.interlaceRows)??!1),[I,B]=j.useState((f==null?void 0:f.rowGroup)??0),[A,E]=j.useState((f==null?void 0:f.interlaceCols)??!1),[L,U]=j.useState((f==null?void 0:f.colGroup)??0),[J,K]=j.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[F,ee]=j.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[ue,Q]=j.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[fe,W]=j.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[X,se]=j.useState((f==null?void 0:f.intStart)||"0"),[ce,H]=j.useState((f==null?void 0:f.intEnd)||"0.5"),[pe,Z]=j.useState(!1),[te,ge]=j.useState([]),[me,He]=j.useState(!1),[Ae,_e]=j.useState(0),[Re,lt]=j.useState(null),[gt,sr]=j.useState(!1),[Je,tr]=j.useState(!1),[tt,Yt]=j.useState(null),[It,rr]=j.useState(!1),[$t,wt]=j.useState(null),[Ye,kt]=j.useState(u||{x:50,y:50}),[St,qt]=j.useState(!1),[wr,Gr]=j.useState(null),[jt,Ar]=j.useState({}),ct=j.useRef({x:0,y:0}),Zt=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Tr=j.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);j.useEffect(()=>{localStorage.setItem("fft_y_min",m),localStorage.setItem("fft_y_max",v),localStorage.setItem("fft_theo_sigma",J),localStorage.setItem("fft_theo_ksize",F),localStorage.setItem("fft_theo_noise",ue),localStorage.setItem("fft_theo_scale",fe)},[m,v,J,F,ue,fe]),j.useEffect(()=>{if(!e||!n||!a)return;He(!0),lt(null),_e(0);const le=setTimeout(async()=>{try{const Oe=p===-1?[0,1,2,3]:[p],Ee=h&&h.length>1?h:[null],Qe=Ee.length,Be={};let Ct={h:0,v:0};for(let We=0;We<Qe;We++){_e(We+1);let ut;if(Ee[We]){const ft=await Ee[We].arrayBuffer();ut=await s0(ft)}else ut=n;for(const ft of Oe){const Pt=K_(ut.data,ut.width,ut.height,a,ft,!1,b,{rows:_,rowGroup:I,cols:A,colGroup:L},k,C);Pt&&(Be[ft]||(Be[ft]={h:new Array(Pt.avgHoriz.length).fill(0),v:new Array(Pt.avgVert.length).fill(0)}),Pt.avgHoriz.forEach((Ut,be)=>Be[ft].h[be]+=Ut/Qe),Pt.avgVert.forEach((Ut,be)=>Be[ft].v[be]+=Ut/Qe),Ct=Pt.sampleCount)}}if(Object.keys(Be).length===0)throw new Error("ROI too small or no data found.");const ur=1024,pr=[];for(let We=0;We<ur;We++){const ut=We/(ur-1)*.5,ft={freq:parseFloat(ut.toFixed(6))};for(const Pt of Oe)Be[Pt]&&(ft[`c${Pt}_h`]=e5(Be[Pt].h,ut),ft[`c${Pt}_v`]=e5(Be[Pt].v,ut));pr.push(ft)}Gr(Ct),ge(pr)}catch(Oe){console.error("FFT Loop Failed:",Oe),lt(Oe.message||"Unknown error during FFT processing")}finally{He(!1)}},100);return()=>clearTimeout(le)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,p,b,k,C,_,I,A,L,h]);const an=()=>{const le=parseFloat(X),Oe=parseFloat(ce);if(isNaN(le)||isNaN(Oe))return;const Ee={},Qe=p===-1?[0,1,2,3]:[p],Be=te.filter(Ct=>Ct.freq>=le&&Ct.freq<=Oe);if(Be.length===0){Ar({});return}Qe.forEach(Ct=>{let ur=0,pr=0;Be.forEach(We=>{const ut=We[`c${Ct}_h`],ft=We[`c${Ct}_v`];typeof ut=="number"&&(ur+=ut),typeof ft=="number"&&(pr+=ft)}),Ee[Ct]={h:ur/Be.length,v:pr/Be.length,count:Be.length}}),Ar(Ee)},kr=j.useMemo(()=>{const le=parseFloat(J),Oe=parseInt(F),Ee=parseFloat(ue),Qe=parseFloat(fe);if(isNaN(le)||isNaN(Oe)||isNaN(Ee)||isNaN(Qe)||te.length===0)return te;const Be=Ete(Oe,le),Ct=Be.reduce((We,ut)=>We+ut*ut,0),ur=(Oe-1)/2,pr=Ee*Ee*Qe;return te.map(We=>{const ut=We.freq,ft=2*Math.PI*ut;let Pt=0,Ut=0;for(let sn=0;sn<Oe;sn++){const Bi=sn-ur,ra=Be[sn],ka=-ft*Bi;Pt+=ra*Math.cos(ka),Ut+=ra*Math.sin(ka)}const be=Pt*Pt+Ut*Ut;return{...We,theory:Math.max(hv,pr*Ct*be)}})},[te,J,F,ue,fe]),Er=le=>{le&&le.activeLabel!==void 0&&(rr(!0),wt(Number(le.activeLabel)),Yt(null))},on=le=>{if(It&&$t!==null&&le&&le.activeLabel!==void 0){const Oe=Number(le.activeLabel);Yt([Math.min($t,Oe),Math.max($t,Oe)])}},Gn=()=>rr(!1),Ur=(le,Oe,Ee)=>{l&&l(),!(Ee.closest("button")||Ee.closest("input"))&&(qt(!0),ct.current={x:le-Ye.x,y:Oe-Ye.y})},Un=le=>{Ur(le.clientX,le.clientY,le.target)},wa=le=>{const Oe=le.touches[0];Ur(Oe.clientX,Oe.clientY,le.target)};j.useEffect(()=>{const le=Ee=>{if(St){const Qe="touches"in Ee?Ee.touches[0].clientX:Ee.clientX,Be="touches"in Ee?Ee.touches[0].clientY:Ee.clientY;kt({x:Qe-ct.current.x,y:Be-ct.current.y})}},Oe=()=>qt(!1);return St&&(window.addEventListener("mousemove",le),window.addEventListener("mouseup",Oe),window.addEventListener("touchmove",le,{passive:!1}),window.addEventListener("touchend",Oe)),()=>{window.removeEventListener("mousemove",le),window.removeEventListener("mouseup",Oe),window.removeEventListener("touchmove",le),window.removeEventListener("touchend",Oe)}},[St]);const Ua=j.useMemo(()=>{if(!tt||te.length===0)return null;const[le,Oe]=tt,Ee=te.filter(Ct=>Ct.freq>=le&&Ct.freq<=Oe);if(Ee.length===0)return null;const Qe=p===-1?[0,1,2,3]:[p],Be={};return Qe.forEach(Ct=>{["h","v"].forEach(ur=>{const pr=`c${Ct}_${ur}`;let We=0,ut=0;for(const ft of Ee){const Pt=ft[pr];typeof Pt=="number"&&(We+=Pt,ut++)}ut>0&&(Be[`${pr}_sigma`]=Math.sqrt(We/ut))})}),{count:Ee.length,stats:Be}},[tt,te,p]),lr=()=>{if(te.length===0)return;let le=1/0,Oe=-1/0;if(te.forEach(ur=>{ur.freq<.01||ur.freq>.49||Object.keys(ur).forEach(pr=>{if(pr==="freq"||pr==="theory")return;const We=ur[pr];typeof We=="number"&&We>0&&(We<le&&(le=We),We>Oe&&(Oe=We))})}),le===1/0)return;const Ee=Math.log10(le),Qe=Math.log10(Oe),Be=Qe-Ee,Ct=(Be===0?1:Be)*.1;x((Ee-Ct).toFixed(2)),g((Qe+Ct).toFixed(2))},cr=(le,Oe)=>{a&&o&&o({...a,x:a.x+le,y:a.y+Oe})},rt=(le,Oe)=>{a&&o&&o({...a,w:Math.max(2,a.w+le),h:Math.max(2,a.h+Oe)})};return e?c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:Ye.x,top:Ye.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:l,children:[c.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${St?"cursor-grabbing":"cursor-grab"}`,onMouseDown:Un,onTouchStart:wa,children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:h&&h.length>1?`Stack Avg (${h.length} frames)`:"Single Mode"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[c.jsx("button",{onClick:()=>y(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(le=>c.jsx("button",{onClick:()=>y(le),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===le?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:Tr[le]},le))]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[c.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),c.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:F,set:ee,w:"w-10"},{label:"Sigma",val:J,set:K,w:"w-12"},{label:"Noise()",val:ue,set:Q,w:"w-12"},{label:"Scale",val:fe,set:W,w:"w-12"}].map(le=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:le.label}),c.jsx("input",{type:"text",value:le.val,onChange:Oe=>le.set(Oe.target.value),className:`${le.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},le.label))})]})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),c.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:C,onChange:le=>P(parseInt(le.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),c.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:C})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:_,onChange:le=>D(le.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:A,onChange:le=>E(le.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),c.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${b?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:b&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:b,onChange:le=>S(le.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${k?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:k&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:k,onChange:le=>w(le.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),c.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("button",{onClick:()=>N(!O),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${O?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-cyan-400":"bg-gray-400"}`})," H"]}),c.jsxs("button",{onClick:()=>M(!$),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${$?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:()=>tr(!Je),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${Je?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),c.jsx("button",{onClick:()=>sr(!gt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${gt?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[c.jsx("button",{onClick:lr,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",c.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[c.jsx("input",{type:"text",value:m,onChange:le=>x(le.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),c.jsx("span",{className:"px-2 text-gray-400",children:"to"}),c.jsx("input",{type:"text",value:v,onChange:le=>g(le.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),me&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),h&&h.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",Ae," / ",h.length]})]}),Re?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:Re}):c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[c.jsx("div",{className:"flex-1 relative z-10",onMouseDown:Er,onMouseMove:on,onMouseUp:Gn,style:{cursor:It?"col-resize":"crosshair"},children:c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(hl,{data:kr,margin:{top:10,right:10,bottom:20,left:0},children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),c.jsx(Bn,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),c.jsx(Fn,{scale:"log",domain:[Math.pow(10,parseFloat(m)),Math.pow(10,parseFloat(v))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:le=>Number(le).toExponential(0),width:45}),c.jsx(Xr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:le=>[Number(le).toExponential(3),""],labelFormatter:le=>`Freq: ${Number(le).toFixed(4)}`}),c.jsx(ei,{wrapperStyle:{fontSize:"10px"}}),c.jsx(Or,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(le=>{if(p!==-1&&p!==le)return[];const Oe=`c${le}_h`,Ee=`c${le}_v`,Qe=Zt[`c${le}`],Be=[];return O&&Be.push(c.jsx(Or,{type:"linear",dataKey:Oe,name:`${Tr[le]} (H)`,stroke:Qe,strokeWidth:1,dot:!1,isAnimationActive:!1},`${le}_h`)),$&&Be.push(c.jsx(Or,{type:"linear",dataKey:Ee,name:`${Tr[le]} (V)`,stroke:Qe,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${le}_v`)),Be}),tt&&c.jsx(Nf,{x1:tt[0],x2:tt[1],fill:"#8884d8",fillOpacity:.15})]})})}),Ua&&tt&&c.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[c.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",tt[0].toFixed(3),"-",tt[1].toFixed(3)]}),Object.entries(Ua.stats).map(([le,Oe])=>c.jsxs("div",{className:"flex justify-between gap-4",children:[c.jsxs("span",{className:"text-slate-400",children:[le,":"]}),c.jsx("span",{className:"font-bold text-cyan-400",children:Oe.toFixed(5)})]},le))]})]})]}),Je&&c.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[c.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("input",{type:"number",step:"0.01",value:X,onChange:le=>se(le.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.01",value:ce,onChange:le=>H(le.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("button",{onClick:an,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(le=>{const Oe=jt[le];if(!Oe)return null;const Ee=Zt[`c${le}`];return c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:Ee},children:[Tr[le]," ",c.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Oe.count," pts)"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[c.jsxs("div",{children:["H: ",Oe.h.toExponential(3)]}),c.jsxs("div",{children:["V: ",Oe.v.toExponential(3)]})]})]},le)})})]}),gt&&c.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>cr(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>cr(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>cr(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>cr(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx("button",{onClick:()=>rt(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),c.jsx("button",{onClick:()=>rt(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),c.jsx("button",{onClick:()=>rt(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),c.jsx("button",{onClick:()=>rt(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),c.jsx(Ate,{isOpen:pe,onClose:()=>Z(!1),rawImageData:n,roi:a,selectedChannel:p===-1?0:p,channelName:p===-1?"Red (Default)":Tr[p],zIndex:s?s+2:102,onFocus:l})]}):null},Dte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f})=>{const[d,h]=j.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[p,y]=j.useState((u==null?void 0:u.blackLevel)??0),[m,x]=j.useState((u==null?void 0:u.whiteLevel)??16383),[v,g]=j.useState(null),[b,S]=j.useState(!1),[k,w]=j.useState(null),[C,P]=j.useState(l||{x:150,y:150}),[O,N]=j.useState(!1),$=j.useRef({x:0,y:0});j.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:p,whiteLevel:m})},[d,p,m]),j.useEffect(()=>{if(e&&n&&!u){const A=n.blackLevels?Math.floor(n.blackLevels[1]):0;y(A),x(n.whiteLevel||16383),g(null)}},[e,n]);const M=()=>{if(!n||!a)return;w(null),S(!0);const E=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const L=q_(n.data,n.width,n.height,a,E,p,m);L?g(L):(w("No data found in selection with current filters."),g(null))}catch(L){console.error("Analysis failed:",L),w(L.message||"Analysis error")}finally{S(!1)}},50)},_=(A,E,L)=>{s&&s(),!(L.closest("button")||L.closest("input")||L.closest("select"))&&(N(!0),$.current={x:A-C.x,y:E-C.y})},D=A=>{_(A.clientX,A.clientY,A.target)},I=A=>{const E=A.touches[0];_(E.clientX,E.clientY,A.target)};if(j.useEffect(()=>{const A=L=>{if(O){const U="touches"in L?L.touches[0].clientX:L.clientX,J="touches"in L?L.touches[0].clientY:L.clientY;P({x:U-$.current.x,y:J-$.current.y})}},E=()=>N(!1);return O&&(window.addEventListener("mousemove",A),window.addEventListener("mouseup",E),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",E)),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",E),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",E)}},[O]),!e)return null;const B=i?["B","G1","G2","R"]:["R","G1","G2","B"];return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:C.x,top:C.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${O?"cursor-grabbing":"cursor-grab"}`,onMouseDown:D,onTouchStart:I,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),c.jsx("select",{value:d,onChange:A=>h(A.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:B.map(A=>c.jsx("option",{value:A,children:A},A))})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),c.jsx("input",{type:"number",value:p,onChange:A=>y(Number(A.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),c.jsx("input",{type:"number",value:m,onChange:A=>x(Number(A.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsx("button",{onClick:M,disabled:b,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:b?"Analyzing...":"Run Analysis"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[k&&c.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:k}),!v&&!b&&!k&&c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:c.jsx("p",{children:"Configure parameters and click Run Analysis"})}),v&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.uniqueCount})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.diffCount})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[c.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),c.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(v.stepCounts).sort((A,E)=>parseFloat(A[0])-parseFloat(E[0])).map(([A,E])=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",A,":"]}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(E)})]},A))})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[c.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(hl,{data:v.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Bn,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),c.jsx(Fn,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),c.jsx(Xr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:A=>`Val: ${A}`,formatter:A=>[A,"Step Size"]}),c.jsx(Or,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},Rte=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:l})=>{const[u,f]=j.useState("cross"),[d,h]=j.useState("R"),[p,y]=j.useState("B"),[m,x]=j.useState("H"),[v,g]=j.useState(null),[b,S]=j.useState(!1),[k,w]=j.useState(0),[C,P]=j.useState(0),[O,N]=j.useState("single"),$=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},M=a?["B","G1","G2","R"]:["R","G1","G2","B"],_=async D=>{if(!r||!n)return;S(!0),N(D),w(0),g(null);let I=$[d],B=u==="cross"?$[p]:I,A=0,E=0;u==="self"&&(m==="H"?E=2:A=2),setTimeout(async()=>{try{let L={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(D==="single")L=s2(r.data,r.width,r.height,n,I,B,A,E);else if(l&&l.length>0)for(let U=0;U<l.length;U++){w(U+1);const J=await l[U].arrayBuffer(),K=await s0(J),F=s2(K.data,K.width,K.height,n,I,B,A,E);L.sumCov+=F.sumCov,L.sumVar1+=F.sumVar1,L.sumVar2+=F.sumVar2,L.n+=F.n}P(L.n),g(H_(L))}catch(L){console.error("Pearson calculation failed",L),alert("Calculation error: "+L.message)}finally{S(!1)}},50)};return e?c.jsxs(dc,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),c.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),c.jsx("select",{value:d,onChange:D=>h(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:M.map(D=>c.jsx("option",{value:D,children:D},D))})]}),c.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?c.jsx("select",{value:p,onChange:D=>y(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:M.map(D=>c.jsx("option",{value:D,children:D},D))}):c.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[c.jsx("button",{onClick:()=>x("H"),className:`flex-1 text-[9px] font-bold rounded ${m==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),c.jsx("button",{onClick:()=>x("V"),className:`flex-1 text-[9px] font-bold rounded ${m==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:()=>_("single"),disabled:b,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:b&&O==="single"?"Calculating...":"Calc Current Frame"}),l&&l.length>0&&c.jsxs("button",{onClick:()=>_("stack"),disabled:b,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[c.jsx("span",{children:"Calc Stack Concatenated"}),b&&O==="stack"&&c.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",k," / ",l.length]})]})]}),v!==null&&c.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${m})`," r"]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:v.toFixed(5)}),c.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",C.toLocaleString()," pairs"]}),c.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(v)>.5?c.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(v)>.1?c.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):c.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),c.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${m==="V"?"+2":""}, c${m==="H"?"+2":""}) in the same channel.`})]}):null},Ite=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],Lte=["5","9","0","8","2","1","4","7","3","6"],t5=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:Lte[r]}).join(""),Bte=({isOpen:e,onClose:t})=>{const[r,n]=j.useState({pv:"--",uv:"--"});return j.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[c.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:c.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[c.jsx("span",{className:"font-bold mr-2",children:"about:"}),c.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),c.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Ite.map(a=>c.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),c.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),c.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:c.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[c.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:t5(r.pv)}),c.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:t5(r.uv)})]})})})]})]})}):null},Fte=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=j.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(h,p)=>{if(typeof p=="bigint")return p.toString()+"n";if(typeof p=="object"&&p!==null){if(d.has(p))return"[Circular]";if(d.add(p),ArrayBuffer.isView(p))return`[${p.constructor.name}]`}return p})}catch{return"[Unable to serialize object]"}},l=j.useMemo(()=>{if(!r)return[];const f=[],d=(h,p=0)=>{if(p>5)return"...";if(h==null)return String(h);if(h instanceof Date)return h.toLocaleString();if(typeof h=="number")return h.toString();if(typeof h=="string")return h;if(typeof h=="bigint")return h.toString()+"n";if(ArrayBuffer.isView(h))return`<${h.constructor.name} len=${h.length} bytes=${h.byteLength}>`;if(h instanceof ArrayBuffer)return`<ArrayBuffer bytes=${h.byteLength}>`;if(typeof h=="object"){if(Array.isArray(h))return h.length===0?"[]":h.length>20?`[${h.slice(0,10).map(x=>typeof x=="number"?x.toFixed(2):d(x,p+1)).join(", ")}, ... (+${h.length-10} more)]`:`[${h.map(m=>typeof m=="number"?Number.isInteger(m)?m:m.toFixed(4):d(m,p+1)).join(", ")}]`;try{const y=Object.keys(h);return y.length>5?`{Object with ${y.length} keys}`:s(h)}catch{return"<Complex Object>"}}return String(h)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(p=>{if(p==="MakerNote"||p==="UserComment"||p.includes("Strip")||p.includes("Offset")){f.push({key:p,value:"<Binary/Internal Data>"});return}const y=r[p];f.push({key:p,value:d(y)})})}catch(h){console.error("Error processing EXIF data:",h),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=l.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:c.jsxs("div",{className:"relative",children:[c.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?c.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[c.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),c.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):c.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:c.jsxs("p",{children:['No tags found matching "',i,'"']})})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},zte=100,Ig=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},r5=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=j.useRef(null),s=j.useRef(null),l=j.useCallback(g=>{const b=i?Math.max(1e-6,e):e,S=i?Math.max(b*1.0001,t):t,k=Math.max(b,Math.min(S,g));if(i){const w=Math.log10(b),C=Math.log10(S);return(Math.log10(k)-w)/(C-w)}return(k-b)/(S-b)},[e,t,i]),u=j.useCallback(g=>{const b=i?Math.max(1e-6,e):e,S=i?Math.max(b*1.0001,t):t;if(i){const k=Math.log10(b),w=Math.log10(S);return Math.pow(10,k+g*(w-k))}return b+g*(S-b)},[e,t,i]),f=(g,b)=>{g.preventDefault(),g.stopPropagation(),s.current=b;const S=w=>{if(!s.current||!o.current)return;const C=o.current.getBoundingClientRect();let P=0;a?P=(C.bottom-w.clientY)/C.height:P=(w.clientX-C.left)/C.width,P=Math.max(0,Math.min(1,P));const O=u(P);if(s.current==="min"){const N=r[1];n([Math.min(O,N),N])}else{const N=r[0];n([N,Math.max(O,N)])}},k=()=>{s.current=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",k)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",k)},d=l(r[0])*100,h=l(r[1])*100,p=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},y=a?{left:"50%",bottom:`${d}%`,height:`${h-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${h-d}%`,height:"4px",transform:"translateY(-50%)"},m="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",x=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},v=a?{left:"50%",bottom:`${h}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${h}%`,transform:"translate(-50%, -50%)"};return c.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[c.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:p}),c.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:y}),c.jsx("div",{className:m,style:x,onMouseDown:g=>f(g,"min")}),c.jsx("div",{className:m,style:v,onMouseDown:g=>f(g,"max")})]})},Gte=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:l,initialISO:u})=>{const[f,d]=j.useState("Noise"),[h,p]=j.useState(!0),[y,m]=j.useState(null),[x,v]=j.useState("default"),[g,b]=j.useState(!1),[S,k]=j.useState(!1),[w,C]=j.useState({R:!0,G1:!0,G2:!0,B:!0}),[P,O]=j.useState(""),[N,$]=j.useState(""),[M,_]=j.useState(""),[D,I]=j.useState(""),[B,A]=j.useState("10"),[E,L]=j.useState(""),[U,J]=j.useState("0 0 0 0"),[K,F]=j.useState("0 0 0 0"),[ee,ue]=j.useState(!1),[Q,fe]=j.useState(null),[W,X]=j.useState(!1),[se,ce]=j.useState(0),[H,pe]=j.useState([]),[Z,te]=j.useState(""),[ge,me]=j.useState(""),He=()=>{const G=parseFloat(Z),re=parseFloat(ge);!isNaN(G)&&!isNaN(re)&&(pe([...H,{id:Date.now(),x:G,y:re}]),te(""),me(""))},[Ae,_e]=j.useState(()=>localStorage.getItem("ptc_tester_name")||""),[Re,lt]=j.useState(""),[gt,sr]=j.useState("");j.useEffect(()=>{localStorage.setItem("ptc_tester_name",Ae)},[Ae]);const Je=j.useRef(ee),tr=j.useRef(W),tt=j.useRef(se);j.useEffect(()=>{Je.current=ee,tr.current=W,tt.current=se},[ee,W,se]);const[Yt,It]=j.useState(null),[rr,$t]=j.useState({min:.01,max:90}),[wt,Ye]=j.useState({readNoise:0,gain:1,prnu:.5}),[kt,St]=j.useState(2e6),qt=j.useRef(wt),wr=j.useRef(rr),Gr=j.useRef(kt);j.useEffect(()=>{qt.current=wt,wr.current=rr,Gr.current=kt},[wt,rr,kt]);const[jt,Ar]=j.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[ct,Zt]=j.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[Tr,an]=j.useState(!1),[kr,Er]=j.useState([]),[on,Gn]=j.useState(null),[Ur,Un]=j.useState(""),wa=j.useMemo(()=>n?n.join(","):"",[n]);j.useEffect(()=>{if(e){let G="0 0 0 0";o&&o.blackLevel?G=o.blackLevel.join(" "):G=n&&n.length===4?n.join(" "):"0 0 0 0",J(G),F(G);let re="";if(o&&o.height?re=o.height.toString():a&&(re=a.toString()),L(re),re){const T=parseFloat(re);!isNaN(T)&&T>0?A((2309.4/T).toFixed(2)):A("10")}else A("10");fe(null),ue(!1),X(!1),ce(0),Er([]),Gn(null),$t({min:.01,max:90}),Ar({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const R={readNoise:0,gain:0,prnu:0};Ye(R),qt.current=R,O(""),$(""),_(""),I(""),d("Noise"),It(null),St(2e6),Un(""),k(!1),pe([]),lt(T=>T.trim()===""&&l?l:T),sr(T=>T.trim()===""&&u?u:T)}},[e,wa,o,a,r,l,u]);const Ua=G=>{if(G.key==="Enter"){const re=parseFloat(E);if(!isNaN(re)&&re>0){const R=(2309.4/re).toFixed(2);A(R)}G.target.blur()}},lr=j.useMemo(()=>{let re=K.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(re.length===1&&(re=[re[0],re[0],re[0],re[0]]);re.length<4;)re.push(0);const R=T=>{switch(T){case"R":return re[0];case"G1":return re[1];case"G2":return re[2];case"B":return re[3];default:return 0}};return r.map(T=>{const ie=T.mean-R(T.channel),ve=T.std>0?ie/T.std:0;return{...T,x:ie,std:T.std,snr:ve}}).filter(T=>T.std>0)},[r,K]),cr=j.useMemo(()=>{const G=wt.readNoise,re=G*G;return lr.map(R=>{let T=0;if(f==="Noise")T=R.std;else if(f==="SNR")T=R.snr;else if(f==="Linear"){const ve=R.std*R.std-re;T=R.x!==0?ve/R.x:0}return{...R,y:T}})},[lr,f,wt.readNoise]),rt=j.useMemo(()=>{if(lr.length===0)return"G1";const G={R:0,G1:0,G2:0,B:0},re={R:0,G1:0,G2:0,B:0};for(const ie of lr)G[ie.channel]+=ie.x,re[ie.channel]++;let R="G1",T=-1/0;return Object.keys(G).forEach(ie=>{const ve=re[ie],Ce=ve>0?G[ie]/ve:-1/0;Ce>T&&(T=Ce,R=ie)}),R},[lr]),le=j.useCallback(()=>{let G=1/0,re=-1/0;if(lr.length===0)return{min:.1,max:1};for(let R=0;R<lr.length;R++){const T=lr[R].x;h&&T<=0||(T<G&&(G=T),T>re&&(re=T))}return G===1/0?{min:.1,max:1}:{min:G,max:re}},[lr,h]),Oe=j.useCallback(()=>{let G=1/0,re=-1/0;if(cr.length===0)return{min:.1,max:1};for(let R=0;R<cr.length;R++){const T=cr[R].y;h&&T<=0||(T<G&&(G=T),T>re&&(re=T))}return G===1/0?{min:.1,max:1}:{min:G*.9,max:re*1.1}},[cr,h]),{min:Ee,max:Qe}=le(),{min:Be,max:Ct}=Oe(),ur=Qe*(rr.min/100),pr=Qe*(rr.max/100),We=j.useMemo(()=>{if(!h&&cr.length===0)return{shot:[],read:[],prnu:[],total:[]};const G=P?parseFloat(P):Ee,re=N?parseFloat(N):Qe,R=100,T=Math.max(.1,G),ie=Math.max(1,re);if(T>=ie)return{shot:[],read:[],prnu:[],total:[]};const ve=Math.log10(T),Fe=(Math.log10(ie)-ve)/R,Ie=wt.readNoise,xe=wt.gain>0?wt.gain:1,yt=wt.prnu/100,ke=[],dt=[],Nt=[],oe=[];for(let qe=0;qe<=R;qe++){const Te=Math.pow(10,ve+qe*Fe);if(f==="Linear"){const Lt=1/xe,vt=yt*yt,Sr=Lt+vt*Te;oe.push({x:Te,y:Sr}),ke.push({x:Te,y:Lt}),Nt.push({x:Te,y:vt*Te})}else{const Lt=Ie,vt=Math.sqrt(Te/xe),Sr=yt*Te,xt=Math.sqrt(Lt*Lt+vt*vt+Sr*Sr);f==="Noise"?(ke.push({x:Te,y:vt}),dt.push({x:Te,y:Lt}),Nt.push({x:Te,y:Sr}),oe.push({x:Te,y:xt})):(vt>0&&ke.push({x:Te,y:Te/vt}),Lt>0&&dt.push({x:Te,y:Te/Lt}),Sr>0&&Nt.push({x:Te,y:Te/Sr}),xt>0&&oe.push({x:Te,y:Te/xt}))}}return{shot:ke,read:dt,prnu:Nt,total:oe}},[cr,h,P,N,wt,f,Ee,Qe]),ut=j.useMemo(()=>{if(f==="Linear")return[];const G=parseFloat(B);if(isNaN(G)||G<=0)return[];const re=P?parseFloat(P):Ee,R=N?parseFloat(N):Qe;return f==="SNR"?[{x:re,y:G},{x:R,y:G}]:[{x:re,y:re/G},{x:R,y:R/G}]},[cr,B,f,P,N,Ee,Qe]),ft=j.useCallback((G,re)=>{if(!re||re.length===0)return null;const R=[...re].sort((T,ie)=>T.x-ie.x);for(let T=0;T<R.length-1;T++){const ie=R[T],ve=R[T+1];if(ie.snr<=G&&ve.snr>=G||ie.snr>=G&&ve.snr<=G){const Ce=(G-ie.snr)/(ve.snr-ie.snr);return ie.x+Ce*(ve.x-ie.x)}}return null},[]),Pt=j.useMemo(()=>{const G=lr,re=1e3,R=ie=>{if(ie.length===0)return[];if(ie.length<=re)return ie;const ve=[...ie].sort((Ie,xe)=>Ie.x-xe.x),Ce=[],Fe=ve.length/re;for(let Ie=0;Ie<re;Ie++){const xe=Math.floor(Ie*Fe),yt=Math.floor((Ie+1)*Fe),ke=ve.slice(xe,yt);if(ke.length===0)continue;ke.sort((Nt,oe)=>Nt.std-oe.std);const dt=Math.floor(ke.length/2);Ce.push(ke[dt])}return Ce},T={R:[],G1:[],G2:[],B:[]};return G.forEach(ie=>{T[ie.channel]&&T[ie.channel].push(ie)}),{R:R(T.R),G1:R(T.G1),G2:R(T.G2),B:R(T.B)}},[lr]),Ut=j.useMemo(()=>Q&&wt.gain?Q*wt.gain:null,[Q,wt.gain]),be=j.useMemo(()=>{if(Q===null||Q===0)return null;const G=parseFloat(B);let re=null;if(!isNaN(G)&&G>0){let Ce=0,Fe=0;if(["R","G1","G2","B"].forEach(Ie=>{const xe=ft(G,Pt[Ie]);xe!==null&&(Ce+=xe,Fe++)}),Fe>0){const Ie=Ce/Fe;re=Math.log2(Q/Ie)}}const R=parseFloat(E);let T=null,ie=NaN;if(!isNaN(R)&&R>0){ie=16e3/R;let Ce=0,Fe=0;if(["R","G1","G2","B"].forEach(Ie=>{const xe=ft(ie,Pt[Ie]);xe!==null&&(Ce+=xe,Fe++)}),Fe>0){const Ie=Ce/Fe;T=Math.log2(Q/Ie)}}let ve=null;if(!isNaN(R)&&R>0){const Ce=ft(ie,Pt[rt]);Ce!==null&&(ve=Math.log2(Q/Ce))}return{manualDR:re,ptpDR:T,d55DR:ve,manualTarget:G,ptpTarget:ie,saturationSignal:Q,dominantChannel:rt}},[Q,B,E,Pt,ft,rt]),sn=j.useMemo(()=>{if(f==="Linear"||!be||!be.ptpTarget||isNaN(be.ptpTarget))return[];const G=be.ptpTarget,re=P?parseFloat(P):Ee,R=N?parseFloat(N):Qe;return f==="SNR"?[{x:re,y:G},{x:R,y:G}]:[{x:re,y:re/G},{x:R,y:R/G}]},[f,be,P,N,Ee,Qe]),Bi=j.useCallback(()=>{const R=document.createElement("canvas");R.width=2048,R.height=1536;const T=R.getContext("2d");if(!T)return;const ie=s==="dark",ve=ie?"#0f172a":"#ffffff",Ce=ie?"#ffffff":"#000000",Fe=ie?"#475569":"#cbd5e1",Ie=ie?"#1e293b":"#f1f5f9",xe=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};T.fillStyle=ve,T.fillRect(0,0,2048,1536);let yt=P?parseFloat(P):Ee,ke=N?parseFloat(N):Qe,dt=M?parseFloat(M):Be,Nt=D?parseFloat(D):Ct;isNaN(yt)&&(yt=.1),isNaN(ke)&&(ke=1e4),isNaN(dt)&&(dt=.1),isNaN(Nt)&&(Nt=1e3);const oe={top:80,right:80,bottom:100,left:120},qe=2048-oe.left-oe.right,Te=1536-oe.top-oe.bottom,Lt=Pe=>{if(h){const it=Math.log10(Math.max(1e-9,yt)),nt=Math.log10(Math.max(1e-9,ke)),et=Math.log10(Math.max(1e-9,Pe));return oe.left+(et-it)/(nt-it)*qe}else return oe.left+(Pe-yt)/(ke-yt)*qe},vt=Pe=>{if(h){const it=Math.log10(Math.max(1e-9,dt)),nt=Math.log10(Math.max(1e-9,Nt)),et=Math.log10(Math.max(1e-9,Pe));return oe.top+Te-(et-it)/(nt-it)*Te}else return oe.top+Te-(Pe-dt)/(Nt-dt)*Te};if(T.beginPath(),h){const Pe=(it,nt,et)=>{const yn=Math.log10(Math.max(1e-9,it)),_n=Math.log10(Math.max(1e-9,nt)),vn=Math.floor(yn),di=Math.ceil(_n);for(let Gi=vn;Gi<=di;Gi++){const Ha=Math.pow(10,Gi);let nr=et?Lt(Ha):vt(Ha);(et?nr>=oe.left-1&&nr<=oe.left+qe+1:nr>=oe.top-1&&nr<=oe.top+Te+1)&&(T.lineWidth=1.5,T.strokeStyle=Fe,T.beginPath(),et?(T.moveTo(nr,oe.top),T.lineTo(nr,oe.top+Te)):(T.moveTo(oe.left,nr),T.lineTo(oe.left+qe,nr)),T.stroke()),T.lineWidth=.5,T.strokeStyle=Ie;for(let Ds=2;Ds<10;Ds++){const Sc=Ds*Ha;nr=et?Lt(Sc):vt(Sc),(et?nr>=oe.left&&nr<=oe.left+qe:nr>=oe.top&&nr<=oe.top+Te)&&(T.beginPath(),et?(T.moveTo(nr,oe.top),T.lineTo(nr,oe.top+Te)):(T.moveTo(oe.left,nr),T.lineTo(oe.left+qe,nr)),T.stroke())}}};Pe(yt,ke,!0),Pe(dt,Nt,!1)}else{T.strokeStyle=Fe,T.lineWidth=1;for(let Pe=0;Pe<=5;Pe++){const it=oe.left+qe*Pe/5;T.beginPath(),T.moveTo(it,oe.top),T.lineTo(it,oe.top+Te),T.stroke();const nt=oe.top+Te*Pe/5;T.beginPath(),T.moveTo(oe.left,nt),T.lineTo(oe.left+qe,nt),T.stroke()}}T.strokeStyle=Ce,T.lineWidth=2,T.strokeRect(oe.left,oe.top,qe,Te);const Sr=(Pe,it,nt)=>{Pe<oe.left||Pe>oe.left+qe||it<oe.top||it>oe.top+Te||(T.fillStyle=nt,T.fillRect(Pe-1.5,it-1.5,3,3))},xt=cr.filter(Pe=>!(h&&(Pe.x<=0||Pe.y<=0)));xt.forEach(Pe=>{w[Pe.channel]&&Pe.channel!==rt&&Sr(Lt(Pe.x),vt(Pe.y),xe[Pe.channel])}),xt.forEach(Pe=>{w[Pe.channel]&&Pe.channel===rt&&Sr(Lt(Pe.x),vt(Pe.y),xe[Pe.channel])}),H.forEach(Pe=>{const it=Lt(Pe.x),nt=vt(Pe.y);if(it<oe.left||it>oe.left+qe||nt<oe.top||nt>oe.top+Te)return;T.strokeStyle="#d946ef",T.lineWidth=2.5;const et=6;T.beginPath(),T.moveTo(it-et,nt-et),T.lineTo(it+et,nt+et),T.moveTo(it+et,nt-et),T.lineTo(it-et,nt+et),T.stroke()});const gr=(Pe,it,nt=[])=>{if(Pe.length<2)return;T.beginPath(),T.strokeStyle=it,T.lineWidth=3,T.setLineDash(nt);let et=!1;for(const yn of Pe){const _n=Lt(yn.x),vn=vt(yn.y);if(_n<oe.left-100||_n>oe.left+qe+100||vn<oe.top-100||vn>oe.top+Te+100){et=!1;continue}et?T.lineTo(_n,vn):(T.moveTo(_n,vn),et=!0)}T.stroke(),T.setLineDash([])},mn=ie?"#ffffff":"#000000";if(ct.shot&&gr(We.shot,"#94a3b8",[5,5]),ct.read&&gr(We.read,"#f43f5e",[3,3]),ct.prnu&&gr(We.prnu,"#f59e0b",[3,3]),ct.total&&gr(We.total,mn,[]),ut.length===2){const Pe="#6366f1";gr(ut,Pe,[4,2]);const it=ut[1],nt=vt(it.y);nt>=oe.top&&nt<=oe.top+Te&&(T.fillStyle=Pe,T.font="bold 20px sans-serif",T.textAlign="right",T.textBaseline="bottom",T.fillText(`M.Tgt=${B}`,oe.left+qe-10,nt-8))}if(sn.length===2&&(be!=null&&be.ptpTarget)){const Pe="#10b981";gr(sn,Pe,[4,4]);const it=sn[1],nt=vt(it.y);if(nt>=oe.top&&nt<=oe.top+Te){T.fillStyle=Pe,T.font="bold 20px sans-serif",T.textAlign="right",T.textBaseline="bottom";const et=be.ptpTarget.toFixed(1),yn=ut.length===2?vt(ut[1].y):-100,_n=Math.abs(nt-yn)<25?25:0;T.fillText(`PTP=${et}`,oe.left+qe-10,nt-8-_n)}}if(ct.fitRange||W){const Pe=(it,nt)=>{const et=Lt(it);et>=oe.left&&et<=oe.left+qe&&(T.beginPath(),T.strokeStyle=nt,T.lineWidth=2,T.setLineDash([8,8]),T.moveTo(et,oe.top),T.lineTo(et,oe.top+Te),T.stroke(),T.setLineDash([]))};Pe(ur,"#22d3ee"),Pe(pr,"#22d3ee")}if(Q){const Pe=Lt(Q);Pe>=oe.left&&Pe<=oe.left+qe&&(T.strokeStyle="#ef4444",T.lineWidth=3,T.setLineDash([10,10]),T.beginPath(),T.moveTo(Pe,oe.top),T.lineTo(Pe,oe.top+Te),T.stroke(),T.setLineDash([]),T.fillStyle="#ef4444",T.font="bold 24px sans-serif",T.textAlign="center",T.fillText("Sat",Pe,oe.top-10))}T.fillStyle=Ce,T.font="28px monospace",T.textAlign="center",T.fillText(yt.toExponential(1),oe.left,oe.top+Te+40),T.fillText(ke.toExponential(1),oe.left+qe,oe.top+Te+40),T.fillText("Signal (DN)",oe.left+qe/2,oe.top+Te+80),T.textAlign="right",T.textBaseline="middle",T.fillText(dt.toExponential(1),oe.left-20,oe.top+Te),T.fillText(Nt.toExponential(1),oe.left-20,oe.top),T.save(),T.translate(oe.left-80,oe.top+Te/2),T.rotate(-Math.PI/2),T.textAlign="center",T.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),T.restore(),T.save(),T.translate(2048/2,1536/2),T.rotate(-Math.PI/6),T.textAlign="center",T.textBaseline="middle",T.fillStyle=ie?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",T.font="bold 150px sans-serif",T.fillText(" y-g-jiang.github.io",0,0),T.restore(),T.fillStyle=Ce,T.font="bold 36px sans-serif",T.textAlign="left",T.textBaseline="top",T.fillText(`PTC Export: ${f} Mode`,oe.left,20),T.font="24px sans-serif",T.fillStyle=ie?"#94a3b8":"#64748b",T.fillText(`Points: ${cr.length} | Sat Channel: ${rt}`,oe.left,65);const Va=oe.left+30,yc=oe.top+30,vc=70,xc=Pe=>{if(!Q||Pe<=0)return"--";const it=wt.readNoise,nt=wt.gain,et=wt.prnu/100;if(nt<=0)return"--";const yn=Pe*Pe,_n=it*it,vn=1-yn*et*et,di=-(yn/nt),Gi=-(yn*_n);let Ha=0;if(Math.abs(vn)<1e-8)Math.abs(di)>1e-8&&(Ha=-Gi/di);else{const nr=di*di-4*vn*Gi;nr>=0&&(Ha=(-di+Math.sqrt(nr))/(2*vn))}return Ha>0?Math.log2(Q/Ha).toFixed(2)+" EV":"--"},Pa=be!=null&&be.ptpTarget&&!isNaN(be.ptpTarget)?xc(be.ptpTarget):"--",Of=B?xc(parseFloat(B)):"--";T.font="bold 48px monospace",T.textAlign="left",T.textBaseline="top",T.shadowColor=ie?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",T.shadowBlur=4,T.shadowOffsetX=1,T.shadowOffsetY=1;const Mn=(Pe,it,nt,et)=>{const yn=yc+nt*vc;T.fillStyle=Ce,T.fillText(Pe,Va,yn);const _n=T.measureText(Pe).width;T.fillStyle=et||Ce,T.fillText(it,Va+_n,yn)},bp=jt.read,wp=parseFloat(jt.gain).toFixed(3),kp=parseFloat(jt.prnu).toFixed(2)+"%";let $s=`M.DR@SNR${B}: `;const bc=parseFloat(E);if(!isNaN(bc)&&bc>0){const Pe=(2309.4/bc).toFixed(2);Math.abs(parseFloat(B)-parseFloat(Pe))<.05&&($s="8mpSNR=1 DR: ")}Mn("Tester: ",Ae||"N/A",0),Mn("Model : ",Re||"Unknown",1),Mn("ISO   : ",gt||"N/A",2),Mn("RN/FPN: ",bp,3,"#f43f5e"),Mn("KADC  : ",wp,4,"#06b6d4"),Mn("PRNU  : ",kp,5,"#f59e0b"),Mn("PTP DR: ",be!=null&&be.ptpDR?be.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),Mn("D55 DR: ",be!=null&&be.d55DR?be.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),Mn("FWC   : ",Ut?Ut>1e4?(Ut/1e3).toFixed(1)+"k":Math.round(Ut).toString():"--",8,"#f97316"),Mn($s,be!=null&&be.manualDR?be.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),Mn("PTCFitDR(PTP): ",Pa,10,"#10b981"),Mn("PTCFitDR(Man): ",Of,11,"#06b6d4"),T.save(),T.textAlign="right",T.textBaseline="bottom",T.fillStyle="#3b82f6",T.font="bold 80px sans-serif",T.shadowColor=ie?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",T.shadowBlur=4,T.shadowOffsetX=2,T.shadowOffsetY=2;const zi=1988,Mf=1476,Sp=90;T.fillText("Online",zi,Mf),T.fillText("Jiangtherapee",zi,Mf-Sp),T.restore();const wc=document.createElement("a");wc.download=`ptc_complete_${f}_${Date.now()}.jpg`,wc.href=R.toDataURL("image/jpeg",.9),wc.click()},[cr,rt,w,P,N,M,D,Ee,Qe,Be,Ct,h,s,f,Q,i,ct,We,ur,pr,rr,W,Ae,Re,gt,be,Ut,B,ut,sn,jt,E,H]),ra=j.useMemo(()=>{let G=cr;if(h&&(G=G.filter(ie=>ie.y>0&&ie.x>0)),x==="top3"){const ie=[...G].sort((Ce,Fe)=>Fe.x-Ce.x),ve=Math.max(50,Math.ceil(ie.length*.03));G=ie.slice(0,ve)}const re={R:[],G1:[],G2:[],B:[]};if(G.forEach(ie=>{re[ie.channel]&&re[ie.channel].push(ie)}),x==="raw")return re;const R=x==="top3"?500:zte,T=ie=>{if(ie.length<=R)return ie;const ve=[...ie].sort((Ie,xe)=>Ie.x-xe.x),Ce=[],Fe=ve.length/R;for(let Ie=0;Ie<R;Ie++){const xe=Math.floor(Ie*Fe),yt=Math.floor((Ie+1)*Fe),ke=ve.slice(xe,yt);if(ke.length===0)continue;ke.sort((Nt,oe)=>Nt.y-oe.y);const dt=Math.floor(ke.length/2);Ce.push(ke[dt])}return Ce};return{R:T(re.R),G1:T(re.G1),G2:T(re.G2),B:T(re.B)}},[cr,x,h]),ka=j.useMemo(()=>{if(lr.length<5)return[];const G=lr.filter(R=>R.channel===rt);return[...G.length>20?G:lr].sort((R,T)=>R.x-T.x).map(R=>({mean:R.x,std:R.std}))},[lr,rt]),Eo=G=>{const re=G.length;if(re===0)return[];const R=G.reduce((qe,Te)=>qe+Te,0)/re,T=G.reduce((qe,Te)=>qe+Math.pow(Te-R,2),0)/(re-1||1),ie=Math.sqrt(T);if(ie===0)return[{x:R-.001,density:0},{x:R,density:1},{x:R+.001,density:0}];const ve=1.06*ie*Math.pow(re,-.2),Ce=Math.min(...G),Fe=Math.max(...G),Ie=(Fe-Ce)*.2||Ce*.1,xe=Math.max(0,Ce-Ie),yt=Fe+Ie,ke=100,dt=(yt-xe)/(ke-1),Nt=qe=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*qe*qe),oe=[];for(let qe=0;qe<ke;qe++){const Te=xe+qe*dt;let Lt=0;for(let vt=0;vt<re;vt++)Lt+=Nt((Te-G[vt])/ve);Lt/=re*ve,oe.push({x:Te,density:Lt})}return oe},Es=j.useCallback((G,re,R,T)=>{if(G.length<5)return{gain:0,prnu:0};const ie=G[G.length-1].mean,ve=ie*(R.min/100),Ce=ie*(R.max/100),Fe=G.filter(xt=>xt.mean>=ve&&xt.mean<=Ce);if(Fe.length<5)return{gain:0,prnu:0};It({nPoints:Fe.length});const Ie=re*re,xe=[],yt=[];if(Fe.forEach(xt=>{const mn=xt.std*xt.std-Ie;if(xt.mean>1&&mn>0){const Va=xt.mean,yc=mn/xt.mean;xe.push({x:Va,y:yc}),yt.push(xt.mean/mn)}}),xe.length<5)return{gain:0,prnu:0};const ke=[],dt=xe.length,Nt=T,oe=dt*(dt-1)/2;if(oe<=Nt)for(let xt=0;xt<dt;xt++)for(let gr=xt+1;gr<dt;gr++){const mn=xe[gr].x-xe[xt].x;Math.abs(mn)>1e-5&&ke.push((xe[gr].y-xe[xt].y)/mn)}else{const xt=Math.max(1,Math.floor(oe/Nt));for(let gr=0;gr<dt;gr++)for(let mn=gr+1;mn<dt;mn+=xt){const Va=xe[mn].x-xe[gr].x;Math.abs(Va)>1e-5&&ke.push((xe[mn].y-xe[gr].y)/Va)}}const qe=Ig(ke),Te=xe.map(xt=>xt.y-qe*xt.x),Lt=Ig(Te);let vt=0,Sr=0;if(Lt>1e-6?vt=1/Lt:vt=Ig(yt),qe>0&&(Sr=Math.sqrt(qe)*100),yt.length>0){const xt=Eo(yt);Er(xt),Gn(vt)}else Er([]);return{gain:vt,prnu:Sr}},[]),Sa=j.useCallback(G=>{let re=G.read??qt.current.readNoise;const R=G.gRange??wr.current,T=Gr.current;if((G.read!==void 0||G.gRange!==void 0)&&G.gain===void 0&&G.prnu===void 0&&ka.length>0&&re>=0)k(!0),setTimeout(()=>{const ve=Es(ka,re,R,T);let Ce=qt.current.gain,Fe=qt.current.prnu;ve.gain>0&&(Ce=ve.gain,Fe=ve.prnu),Ye({readNoise:re,gain:Ce,prnu:Fe}),G.gRange!==void 0&&$t(G.gRange),Ar(Ie=>{var xe,yt;return{...Ie,read:re.toString(),gain:Ce>0?Ce.toFixed(3):"0",prnu:Fe.toFixed(2),rangeMin:(((xe=G.gRange)==null?void 0:xe.min)??Ie.rangeMin).toString(),rangeMax:(((yt=G.gRange)==null?void 0:yt.max)??Ie.rangeMax).toString()}}),k(!1)},50);else{let ve=G.gain!==void 0?G.gain:qt.current.gain,Ce=G.prnu!==void 0?G.prnu:qt.current.prnu;Ye({readNoise:re,gain:ve,prnu:Ce}),G.gRange!==void 0&&$t(G.gRange),Ar(Fe=>{var Ie,xe;return{...Fe,read:re.toString(),gain:ve>0?ve.toFixed(3):"0",prnu:Ce.toFixed(2),rangeMin:(((Ie=G.gRange)==null?void 0:Ie.min)??Fe.rangeMin).toString(),rangeMax:(((xe=G.gRange)==null?void 0:xe.max)??Fe.rangeMax).toString()}})}},[ka,Es]),$o=`${K}-${r.length}`;j.useEffect(()=>{if(!e||!r||r.length===0)return;const G=ra[rt];if(!G||G.length===0||Ur===$o)return;C({R:rt==="R",G1:rt==="G1",G2:rt==="G2",B:rt==="B"});const re=[...G].sort((ve,Ce)=>ve.x-Ce.x);let R=0;re.length>0&&(R=re[0].std);const T=lr.filter(ve=>ve.channel===rt);let ie=-1/0;for(const ve of T)ve.x>ie&&(ie=ve.x);ie!==-1/0&&fe(ie),Sa({read:R}),Un($o)},[e,r,Ur,$o,ra,rt,Sa,lr]);const ui=(G,re)=>{Ar(R=>({...R,[G]:re}))},Zr=G=>{let re=parseFloat(jt[G]);isNaN(re)||re<0||Sa({[G]:re})},ja=()=>{F(U),Un("")},Ca=()=>{const G=parseFloat(jt.rangeMin),re=parseFloat(jt.rangeMax);!isNaN(G)&&!isNaN(re)&&G<re&&G>=0&&re<=100&&Sa({gRange:{min:G,max:re}})},Wn=(G,re)=>{G.key==="Enter"&&(re==="rangeMin"||re==="rangeMax"?Ca():Zr(re),G.target.blur())};j.useEffect(()=>{e&&ka.length>0&&Sa({})},[e,kt,ka]);const na=G=>{C(re=>({...re,[G]:!re[G]}))},Fi=()=>{v(G=>G==="top3"?"default":"top3")},Do=()=>{x==="raw"?v("default"):b(!0)},hc=()=>{b(!1),v("raw")},Wa=(G,re)=>{const R=parseFloat(G),T=parseFloat(re);let ie=isNaN(R)?"auto":R,ve=isNaN(T)?"auto":T;return h&&typeof ie=="number"&&ie<=0&&(ie="auto"),[ie,ve]},fi=G=>{if(!G||!G.payload)return;const re=G.payload;if(m(re),Je.current&&(fe(re.x),ue(!1)),tr.current){const R=wr.current.min,T=wr.current.max,{max:ie}=le();if(ie<=0)return;const ve=Math.max(0,Math.min(100,re.x/ie*100));if(tt.current===1){const Ce=Math.min(ve,T-.5);Sa({gRange:{min:Ce,max:T}}),ce(2)}else if(tt.current===2){const Ce=Math.max(ve,R+.5);Sa({gRange:{min:R,max:Ce}}),ce(0),X(!1)}}},On=j.useCallback(G=>{const{cx:re,cy:R,fill:T}=G;return c.jsx("circle",{cx:re,cy:R,r:3,fill:T,stroke:"none",style:{cursor:"pointer"}})},[]),pc=({active:G,payload:re})=>{if(G&&re&&re.length){const R=re[0].payload;return c.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[c.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:R.channel}),c.jsxs("div",{children:["Signal: ",R.x.toFixed(2)]}),c.jsxs("div",{children:[f,": ",R.y.toFixed(4)]}),R.row!==void 0&&R.col!==void 0&&!isNaN(R.row)&&!isNaN(R.col)&&c.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",R.row,", Col ",R.col]}),R.filename&&c.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:R.filename,children:R.filename})]})}return null},aa=G=>{d(G),G==="Linear"&&p(!1)};if(!e)return null;const gc=s==="dark"?"#ffffff":"#000000";let Vn=f;f==="Linear"&&(Vn="(Var - RN) / Mean");const mc=U!==K;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:G=>{G.stopPropagation()},children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:G=>G.stopPropagation(),children:[c.jsx(yo,{isOpen:g,onClose:()=>b(!1),onConfirm:hc,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),y&&c.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),c.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),c.jsx("span",{className:"font-bold",children:y.channel}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),c.jsx("span",{children:y.x.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),c.jsx("span",{children:y.std.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),c.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(y.x/y.std).toFixed(2)})]})})]}),Tr&&c.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[c.jsx("button",{onClick:()=>an(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"mb-4 text-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:on==null?void 0:on.toFixed(4)}),c.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",kr.length>0?"Density Curve Generated":"No Data"]})]}),c.jsx("div",{className:"flex-1 min-h-0",children:kr.length>0?c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(pN,{data:kr,margin:{top:10,right:30,left:0,bottom:20},children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),c.jsx(Bn,{dataKey:"x",tickFormatter:G=>G.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),c.jsx(Fn,{tick:{fill:"#9ca3af",fontSize:10}}),c.jsx(Xr,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),c.jsx(ha,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),on!==null&&c.jsx(oo,{x:on,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",c.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("button",{onClick:Bi,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),c.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>aa("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),c.jsx("button",{onClick:()=>aa("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),c.jsx("button",{onClick:()=>aa("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:G=>p(G.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[c.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),c.jsx("input",{type:"number",placeholder:"Min",value:P,onChange:G=>O(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:N,onChange:G=>$(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),c.jsx("input",{type:"number",placeholder:"Min",value:M,onChange:G=>_(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:D,onChange:G=>I(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsx("button",{onClick:()=>{O(""),$(""),_(""),I("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>na("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),c.jsx("button",{onClick:()=>na("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),c.jsx("button",{onClick:()=>na("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),c.jsx("button",{onClick:()=>na("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),c.jsx("input",{type:"text",value:U,onChange:G=>J(G.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),c.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),c.jsx("button",{onClick:()=>{X(!W),ce(W?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${W?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:W?se===1?"Pick Min":"Pick Max":"Select"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx("input",{type:"number",step:"0.1",value:jt.rangeMin,onChange:G=>ui("rangeMin",G.target.value),onBlur:Ca,onKeyDown:G=>Wn(G,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.1",value:jt.rangeMax,onChange:G=>ui("rangeMax",G.target.value),onBlur:Ca,onKeyDown:G=>Wn(G,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),c.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),c.jsx("input",{type:"number",value:E,onChange:G=>L(G.target.value),onKeyDown:Ua,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),c.jsx("input",{type:"number",value:B,onChange:G=>A(G.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[c.jsx("button",{onClick:()=>{ue(!ee),Q&&fe(null)},disabled:W,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${ee?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:ee?"Pick Point":"Select Linear Limit"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Fi,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${x==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),c.jsx("button",{onClick:Do,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${x==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:Ae,onChange:G=>_e(G.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:Re,onChange:G=>lt(G.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:gt,onChange:G=>sr(G.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",value:Z,onChange:G=>te(G.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("input",{type:"number",value:ge,onChange:G=>me(G.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("button",{onClick:He,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),H.length>0&&c.jsx("button",{onClick:()=>pe([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[H.length," pts"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ct.shot,onChange:G=>Zt({...ct,shot:G.target.checked}),className:"rounded text-gray-500"})," ",c.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ct.read,onChange:G=>Zt({...ct,read:G.target.checked}),className:"rounded text-rose-500"})," ",c.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ct.prnu,onChange:G=>Zt({...ct,prnu:G.target.checked}),className:"rounded text-amber-500"})," ",c.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ct.total,onChange:G=>Zt({...ct,total:G.target.checked}),className:"rounded text-white"})," ",c.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),c.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",rt,")",S&&c.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:ja,disabled:S,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${S?"bg-gray-400 cursor-wait":mc?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:S?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),c.jsxs("select",{value:kt,onChange:G=>St(Number(G.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[c.jsx("option",{value:1e5,children:"100k Pairs"}),c.jsx("option",{value:5e5,children:"500k Pairs"}),c.jsx("option",{value:2e6,children:"2M Pairs"}),c.jsx("option",{value:5e6,children:"5M Pairs"}),c.jsx("option",{value:1e7,children:"10M Pairs"})]}),Yt&&c.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",Yt.nPoints]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),c.jsx("input",{type:"text",inputMode:"decimal",value:jt.read,onChange:G=>ui("read",G.target.value),onBlur:()=>Zr("read"),onKeyDown:G=>Wn(G,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center relative group",children:[c.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",c.jsx("button",{onClick:()=>an(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),c.jsx("input",{type:"text",inputMode:"decimal",value:jt.gain,onChange:G=>ui("gain",G.target.value),onBlur:()=>Zr("gain"),onKeyDown:G=>Wn(G,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),c.jsx("input",{type:"text",inputMode:"decimal",value:jt.prnu,onChange:G=>ui("prnu",G.target.value),onBlur:()=>Zr("prnu"),onKeyDown:G=>Wn(G,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[c.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(be==null?void 0:be.manualTarget)||B}`,children:["M.DR @ SNR=",(be==null?void 0:be.manualTarget)||B]}),c.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:be!=null&&be.manualDR?`${be.manualDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((be==null?void 0:be.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${E||"H"})`,children:[c.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),c.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:be!=null&&be.ptpDR?`${be.ptpDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((be==null?void 0:be.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${E||"H"} on ${be==null?void 0:be.dominantChannel} Channel)`,children:[c.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",be==null?void 0:be.dominantChannel,")"]}),c.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:be!=null&&be.d55DR?`${be.d55DR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),c.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:Ut!==null?`${Math.round(Ut)}`:"",children:Ut!==null?Ut>1e4?`${(Ut/1e3).toFixed(1)}k`:`${Math.round(Ut)}`:"--"})]})]}),Q===null&&c.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),c.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${ee||W?"cursor-crosshair":""}`,children:[c.jsx("div",{className:"row-start-1 col-start-1 h-full",children:c.jsx(r5,{vertical:!0,min:Be,max:Ct,value:[M?parseFloat(M):Be,D?parseFloat(D):Ct],onChange:([G,re])=>{_(G.toString()),I(re.toString())},logScale:h})}),c.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[cr.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(Mte,{margin:{top:20,right:20,bottom:0,left:0},onClick:fi,children:[c.jsx("defs",{children:c.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[c.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),c.jsx(Bn,{type:"number",dataKey:"x",name:"Signal",scale:h?"log":"linear",domain:Wa(P,N),allowDataOverflow:!0,hide:!0}),c.jsx(Fn,{type:"number",dataKey:"y",name:f,scale:h?"log":"linear",domain:Wa(M,D),label:{value:Vn,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),c.jsx(Xr,{content:c.jsx(pc,{}),cursor:{strokeDasharray:"3 3"}}),Q&&c.jsx(oo,{x:Q,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(ct.fitRange||W)&&c.jsxs(c.Fragment,{children:[c.jsx(oo,{x:ur,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${rr.min}%`,fill:"#22d3ee",fontSize:9}}),c.jsx(oo,{x:pr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${rr.max}%`,fill:"#22d3ee",fontSize:9}})]}),w.R&&c.jsx(kn,{name:"Red",data:ra.R,fill:"#ef4444",shape:On,onClick:fi,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),w.G1&&c.jsx(kn,{name:"Green 1",data:ra.G1,fill:"#22c55e",shape:On,onClick:fi,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),w.G2&&c.jsx(kn,{name:"Green 2",data:ra.G2,fill:"#4ade80",shape:On,onClick:fi,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),w.B&&c.jsx(kn,{name:"Blue",data:ra.B,fill:"#3b82f6",shape:On,onClick:fi,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),ct.shot&&We.shot.length>0&&c.jsx(kn,{name:"Shot Noise (Ideal)",data:We.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),ct.read&&We.read.length>0&&c.jsx(kn,{name:"Read Noise Floor",data:We.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),ct.prnu&&We.prnu.length>0&&c.jsx(kn,{name:"PRNU (Non-uniformity)",data:We.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),ct.total&&We.total.length>0&&c.jsx(kn,{name:"Total Noise Model",data:We.total,line:{stroke:gc,strokeWidth:2},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),ut.length>0&&c.jsx(kn,{name:`Target SNR=${B}`,data:ut,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),sn.length>0&&c.jsx(kn,{name:`PTP Target SNR=${be!=null&&be.ptpTarget?be.ptpTarget.toFixed(1):"?"}`,data:sn,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),H.length>0&&c.jsx(kn,{name:"Manual Markers",data:H,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),c.jsx("div",{className:"row-start-2 col-start-2 w-full",children:c.jsx(r5,{min:Ee,max:Qe,value:[P?parseFloat(P):Ee,N?parseFloat(N):Qe],onChange:([G,re])=>{O(G.toString()),$(re.toString())},logScale:h})})]})]})})},Ute=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>c.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"relative md:col-span-3",children:[c.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>c.jsx("option",{value:s,children:s},s))}),c.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[c.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>c.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),Wte=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return c.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[c.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),c.jsx("div",{className:"mt-2 space-y-1 text-sm",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),c.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),c.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),c.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},Vte=({data:e,theme:t="dark"})=>{const r=j.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=j.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(y=>[...y.R_range,...y.G1_range,...y.G2_range,...y.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),l=Math.max(...o);const u=.25,f=l-s;if(f<u){const y=u-f;s-=y/2,l+=y/2}const d=(l-s)*.1,h=s-d,p=l+d;return[h,p]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:c.jsx("p",{children:"No data available for this mode."})}):c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(pN,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:a}),c.jsx(Bn,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),c.jsx(Fn,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),c.jsx(Xr,{content:c.jsx(Wte,{theme:t})}),c.jsx(ei,{wrapperStyle:{fontSize:"14px",color:i}}),c.jsx(ha,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),c.jsx(Or,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),c.jsx(ha,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),c.jsx(Or,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),c.jsx(ha,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),c.jsx(Or,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),c.jsx(ha,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),c.jsx(Or,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},Hte=z.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=j.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=j.useState(n[0]||""),{chartData:o,tableData:s}=j.useMemo(()=>{const d=e.shootingModes.find(y=>y.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const h=d.data.map(y=>({iso:y.iso,R_range:y.r.range,R_avg:y.r.avg,G1_range:y.g1.range,G1_avg:y.g1.avg,B_range:y.b.range,B_avg:y.b.avg,G2_range:y.g2.range,G2_avg:y.g2.avg})),p=d.data.map(y=>({iso:y.iso,levels:[y.r.avg,y.g1.avg,y.g2.avg,y.b.avg],clipping:y.clipping}));return{chartData:h,tableData:p}},[e.shootingModes,a]),l=`Raw Data (${a})`,u=j.useRef(null),f=j.useRef(null);return j.useEffect(()=>{const d=u.current,h=f.current;if(!d||!h)return;const p=new ResizeObserver(y=>{for(let m of y){const{width:x}=m.contentRect,g=Math.max(8,x/35);h.style.fontSize=`${g}px`}});return p.observe(d),()=>p.disconnect()},[]),c.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),c.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),c.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>c.jsx("option",{value:d,children:d},d))})]}),c.jsxs("div",{ref:u,className:"h-64 relative",children:[c.jsx(Vte,{data:o,theme:t},a),c.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:c.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:l})}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),c.jsx("tbody",{children:s.map(({iso:d,levels:h,clipping:p})=>c.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[c.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,p&&c.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),c.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:h[0].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:h[1].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:h[3].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:h[2].toFixed(2)})]},d))})]})]})]})}),we=(e,t,r)=>({avg:e,range:[t,r]}),Lg=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:we(512.1,511.95,512.25),g1:we(512.05,511.9,512.2),b:we(512.12,511.98,512.28),g2:we(512.06,511.92,512.22)},{iso:200,r:we(512.15,512,512.3),g1:we(512.1,511.95,512.25),b:we(512.18,512.05,512.35),g2:we(512.12,511.98,512.28)},{iso:400,r:we(512.25,512.1,512.45),g1:we(512.2,512.05,512.4),b:we(512.3,512.15,512.5),g2:we(512.22,512.08,512.42)},{iso:800,r:we(512.5,512.2,512.8),g1:we(512.45,512.15,512.75),b:we(512.55,512.25,512.85),g2:we(512.48,512.18,512.78)},{iso:1600,r:we(513.1,512.8,513.4),g1:we(513.05,512.75,513.35),b:we(513.15,512.85,513.45),g2:we(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:we(512.02,511.98,512.05),g1:we(512.01,511.97,512.04),b:we(512.03,511.99,512.06),g2:we(512.01,511.97,512.04)},{iso:640,r:we(512.15,512.05,512.25),g1:we(512.12,512.02,512.22),b:we(512.18,512.08,512.28),g2:we(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:we(512,511.8,512.2),g1:we(512,511.8,512.2),b:we(512,511.8,512.2),g2:we(512,511.8,512.2)},{iso:400,r:we(512,511.7,512.3),g1:we(512,511.7,512.3),b:we(512,511.7,512.3),g2:we(512,511.7,512.3)},{iso:1600,r:we(512.2,511.5,512.8),g1:we(512.2,511.5,512.8),b:we(512.2,511.5,512.8),g2:we(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:we(511.95,511.8,512.1),g1:we(511.95,511.8,512.1),b:we(511.95,511.8,512.1),g2:we(511.95,511.8,512.1)},{iso:800,r:we(512.1,511.9,512.3),g1:we(512.1,511.9,512.3),b:we(512.1,511.9,512.3),g2:we(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:we(400,399.9,400.1),g1:we(400,399.9,400.1),b:we(400,399.9,400.1),g2:we(400,399.9,400.1)},{iso:100,r:we(400,399.9,400.1),g1:we(400,399.9,400.1),b:we(400,399.9,400.1),g2:we(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:we(400.1,399.8,400.3),g1:we(400.1,399.8,400.3),b:we(400.1,399.8,400.3),g2:we(400.1,399.8,400.3)},{iso:800,r:we(400.3,399.5,401.1),g1:we(400.3,399.5,401.1),b:we(400.3,399.5,401.1),g2:we(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:we(1024,1023.8,1024.2),g1:we(1024,1023.8,1024.2),b:we(1024,1023.8,1024.2),g2:we(1024,1023.8,1024.2)},{iso:800,r:we(1024.2,1023.5,1025),g1:we(1024.2,1023.5,1025),b:we(1024.2,1023.5,1025),g2:we(1024.2,1023.5,1025)}]}]}],Xte=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=j.useState(""),[i,o]=j.useState("All"),s=j.useMemo(()=>["All",...Array.from(new Set(Lg.map(d=>d.manufacturer))).sort()],[]),l=j.useMemo(()=>Lg.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),h=i==="All"||f.manufacturer===i;return d&&h}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",c.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Lg.length," Models"]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:c.jsx(Ute,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:l,onCameraSelect:u})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[l.map(f=>c.jsx("div",{id:`camera-${f.id}`,children:c.jsx(Hte,{camera:f,theme:r})},f.id)),l.length===0&&c.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:c.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Kte=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=j.useState(""),[i,o]=j.useState(""),[s,l]=j.useState(""),[u,f]=j.useState(""),[d,h]=j.useState(null),p=()=>{const y=parseFloat(n),m=parseFloat(i),x=parseFloat(s),v=parseFloat(u);if(isNaN(y)||isNaN(m)||isNaN(x)||isNaN(v)){h(null);return}const g=y,b=m,S=x*x,k=v*v,w=(g+b)/2;if(w<=1e-9){h(0);return}const C=S*k/w,P=Math.sqrt(C);h(P)};return e?c.jsxs(dc,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:n,onChange:y=>a(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:i,onChange:y=>o(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:s,onChange:y=>l(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:u,onChange:y=>f(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsx("button",{onClick:p,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&c.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[c.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),c.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},pv=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],Yte=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function qte(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),h=Math.hypot(n.x-r.x,n.y-r.y),p=Math.hypot(r.x-e.x,r.y-e.y),y=Math.hypot(n.x-t.x,n.y-t.y),m=(d+h)/2/5,x=(p+y)/2/3,v=m*f,g=x*f;for(let b=0;b<4;b++)for(let S=0;S<6;S++){const k=S/5,w=b/3,C=(1-k)*(1-w)*e.x+k*(1-w)*t.x+(1-k)*w*r.x+k*w*n.x,P=(1-k)*(1-w)*e.y+k*(1-w)*t.y+(1-k)*w*r.y+k*w*n.y;u.push({x:C-v/2,y:P-g/2,w:v,h:g})}return u}function gN(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function Od(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let l=0;l<i;l++)for(let u=0;u<n;u++)o[s][l]+=e[s][u]*t[u][l];return o}function Zte(e,t){const r=gN(e),n=Od(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=Mu(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=Od(r,t);return Od(o,s)}function Qte(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const l=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=l*r[n][u]}}return r.map(n=>n.slice(t))}function Jte(e,t,r){const n=[...e].sort((m,x)=>m.id-x.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(m=>{const x=m.rawMeans,v=[x[0]-t[0],x[1]-t[1],x[2]-t[2],x[3]-t[3]];let g,b,S;r?(S=v[0],b=(v[1]+v[2])/2,g=v[3]):(g=v[0],b=(v[1]+v[2])/2,S=v[3]),g=Math.max(0,g),b=Math.max(0,b),S=Math.max(0,S),a.push([g,b,S])});const o=a[18],s=(o[0]+o[1]+o[2])/3,l=1/Math.max(1e-9,s),u=a.map(m=>[m[0]*l,m[1]*l,m[2]*l]),d=Zte(u,pv),h=gN(d);let p;try{p=Qte(h)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:Od(p,Yte)}}const ere=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,l]=j.useState(n),[u,f]=j.useState(["0","0","0","0"]),[d,h]=j.useState(null),[p,y]=j.useState(null);if(j.useEffect(()=>{if(e&&r&&r.length===24){const w=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([w[0].toFixed(2),w[1].toFixed(2),w[2].toFixed(2),w[3].toFixed(2)])}},[e,r]),j.useEffect(()=>{if(!e||!r||r.length!==24)return;const k=u.map(w=>parseFloat(w));if(!k.some(isNaN))try{const w=Jte(r,k,s);h(w),y(null)}catch(w){y(w.message)}},[e,r,s,u]),!e)return null;const m=(k,w)=>{f(C=>{const P=[...C];return P[k]=w,P})},x=k=>{navigator.clipboard.writeText(k)},v=k=>k?k.map(w=>w.map(C=>C.toFixed(4))):[],g=d?v(d.matrix).flat().join(" "):"",b=s?["B","G1","G2","R"]:["R","G1","G2","B"],S=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return c.jsxs(dc,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),c.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:k=>o(parseFloat(k.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>l(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),c.jsx("button",{onClick:()=>l(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(k=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:`text-[10px] font-bold mb-1 ${S[k]}`,children:b[k]}),c.jsx("input",{type:"number",step:"0.01",value:u[k],onChange:w=>m(k,w.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},k))})]}),p?c.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:p}):d?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),c.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:v(d.matrix).map((k,w)=>c.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[c.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:k[0]}),c.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:k[1]}),c.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:k[2]})]},w))}),c.jsx("button",{onClick:()=>x(g),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):c.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function mN(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let l=0;l<r;l++)n+=e[l],a+=t[l],i+=e[l]*t[l],o+=e[l]*e[l];const s=r*o-n*n;return s===0?{slope:0,intercept:0}:{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function tre(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function gv(e,t,r,n){const a=Math.floor(n.x),i=Math.floor(n.y),o=Math.floor(n.w),s=Math.floor(n.h);if(o<8||s<8)return null;let l=[];for(let F=0;F<s;F++){const ee=[],ue=(i+F)*t;for(let Q=0;Q<o;Q++)ee.push(e[ue+a+Q]);l.push(ee)}let u=0,f=0;for(let F=1;F<s-1;F+=2)for(let ee=1;ee<o-1;ee+=2)u+=Math.abs(l[F][ee+1]-l[F][ee-1]),f+=Math.abs(l[F+1][ee]-l[F-1][ee]);let d=o,h=s,p=l,y=2;if(f>u){y=1,p=Array(o).fill(0).map(()=>Array(s).fill(0));for(let F=0;F<s;F++)for(let ee=0;ee<o;ee++)p[ee][s-1-F]=l[F][ee];d=s,h=o}else y=2;const m=[],x=[];for(let F=0;F<h;F++){const ee=p[F],ue=ee.map((W,X)=>X===0?0:Math.abs(W-ee[X-1])),Q=Math.max(...ue),fe=ue.indexOf(Q);if(Q>1){const W=Math.max(0,fe-3),X=Math.min(d,fe+4);let se=0,ce=0;for(let H=W;H<X;H++)se+=ue[H],ce+=H*ue[H];se>0&&(m.push(ce/se),x.push(F))}}if(m.length<h*.4)return null;const{slope:v,intercept:g}=mN(x,m),b=Math.cos(Math.atan(v)),S=[],k=[];for(let F=0;F<h;F++){const ee=v*F+g;for(let ue=0;ue<d;ue++)S.push((ue-ee)*b),k.push(p[F][ue])}const C=Math.min(o,s)/2;let P=0;for(const F of S)Math.abs(F)<=C&&P++;let O=.125;if(P>0){const F=40*C/P;O=Math.max(.01,Math.min(.125,F))}const N=O,$=Array.from(S.keys()).sort((F,ee)=>S[F]-S[ee]),M=$.map(F=>S[F]),_=$.map(F=>k[F]),D=M[0],I=M[M.length-1],B=Math.floor((I-D)/N),A=new Array(B).fill(0),E=new Array(B).fill(0);for(let F=0;F<M.length;F++){const ee=Math.floor((M[F]-D)/N);ee>=0&&ee<B&&(A[ee]+=_[F],E[ee]++)}let L=_[0];for(let F=0;F<B;F++)E[F]>0?(A[F]/=E[F],L=A[F]):A[F]=L;const U=A.slice(0,10).reduce((F,ee)=>F+ee,0)/10,J=A.slice(-10).reduce((F,ee)=>F+ee,0)/10;if(U>J){const F=Math.max(...A),ee=Math.min(...A);for(let ue=0;ue<A.length;ue++)A[ue]=F-A[ue]+ee}const K=tre(A,N);return{esf:A,lsfFull:K,binSize:N,orientation:y}}function yN(e,t,r,n=!1){if(e.length===0)return null;const a=4096,i=new hs(a),o=r?1e3/r:1,s=new Float32Array(501);for(let m=0;m<=500;m++)s[m]=m/500*o;const l=new Float32Array(501).fill(0);let u=0,f=[],d=[],h=0;for(const m of e){let x=[...m.lsfFull];const v=m.binSize;let g=0,b=-1/0;for(let E=0;E<x.length;E++)x[E]>b&&(b=x[E],g=E);const S=b*.2;let k=0,w=x.length-1;for(let E=g;E>=0;E--)if(x[E]<S){k=E;break}for(let E=g;E<x.length;E++)if(x[E]<S){w=E;break}const C=w-k;let P=!1;if(n&&C>0){const E=C*4,L=[],U=[];for(let J=0;J<Math.max(0,g-E);J++)L.push(J),U.push(x[J]);for(let J=Math.min(x.length,g+E);J<x.length;J++)L.push(J),U.push(x[J]);if(L.length>5){const{slope:J,intercept:K}=mN(L,U);for(let F=0;F<x.length;F++)x[F]=x[F]-(J*F+K);b=-1/0;for(let F=0;F<x.length;F++)x[F]>b&&(b=x[F],g=F);P=!0}}let O=0,N=0;if(t>0)N=t,O=Math.round(t/v);else{const E=b*.2;let L=0,U=x.length-1;for(let ee=g;ee>=0;ee--)if(x[ee]<E){L=ee;break}for(let ee=g;ee<x.length;ee++)if(x[ee]<E){U=ee;break}let F=(U-L)*v*8;F=Math.max(2,F),N=F,O=Math.round(F/v)}h+=N;const $=Math.max(0,g-O),M=Math.min(x.length,g+O),_=x.slice($,M);if(_.length<8)continue;if(f.length===0)if(f=_,P){const E=new Array(x.length).fill(0);let L=0;for(let U=0;U<x.length;U++)L+=x[U],E[U]=L;d=E}else d=m.esf;const D=new Float32Array(a).fill(0);for(let E=0;E<_.length;E++){const L=.54-.46*Math.cos(2*Math.PI*E/(_.length-1));D[E]=_[E]*L}i.transform(D);const I=[],B=[];for(let E=0;E<=a/2;E++){const L=Math.sqrt(i._real[E]**2+i._imag[E]**2);I.push(L),B.push(E/(a*v)*o)}const A=I[0];if(A>0){for(let E=0;E<=500;E++){const L=s[E];l[E]+=rre(L,B,I)/A}u++}}if(u===0)return null;const p=Array.from(l).map(m=>m/u);let y=null;for(let m=0;m<p.length-1;m++)if(p[m]>=.5&&p[m+1]<.5){y=s[m]+(.5-p[m])*(s[m+1]-s[m])/(p[m+1]-p[m]);break}return{esf:d,lsf:[],lsfCropped:f,mtf:p,freqs:Array.from(s),mtf50:y,calcRadius:h/u}}function rre(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const nre=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o,isSfrLabOpen:s})=>{const[l,u]=j.useState([]),[f,d]=j.useState(""),[h,p]=j.useState(""),[y,m]=j.useState(12),[x,v]=j.useState(!0),[g,b]=j.useState(!1),[S,k]=j.useState(1),[w,C]=j.useState(null),[P,O]=j.useState({x:100,y:50}),[N,$]=j.useState({w:1e3,h:800}),[M,_]=j.useState(!1),[D,I]=j.useState(!1),B=j.useRef({x:0,y:0}),A=j.useRef({w:0,h:0}),E=l.length>0?l[l.length-1].binSize:null,L=E?(1/E).toFixed(1):"-",U=j.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),K=(o==null?void 0:o.renderMode)==="advanced-zero-dep",F=()=>{if(!(!r||!n)){if(!K){alert("Scalar Unmixing is required. Please configure Background/Foreground/BlackLevel in the Sidebar and click 'RUN UNMIXING' first.");return}try{let Z;if(o!=null&&o.advancedZeroDep){const te=xx(r,n,o);Z=gv(te.data,te.width,te.height,{x:0,y:0,w:te.width,h:te.height})}else Z=gv(r.data,r.width,r.height,n);Z?u(te=>[...te,Z]):alert("Could not detect valid edge.")}catch(Z){console.error(Z),alert("Error processing ROI")}}},ee=()=>{u([]),C(null),k(1)},ue=()=>{if(!w)return;const Z=parseFloat(f),me=`data:text/csv;charset=utf-8,Frequency (${!isNaN(Z)&&Z>0?"lp/mm":"cy/px"}),MTF
`+w.freqs.map((_e,Re)=>`${_e.toFixed(6)},${w.mtf[Re].toFixed(6)}`).join(`
`),He=encodeURI(me),Ae=document.createElement("a");Ae.setAttribute("href",He),Ae.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae)},Q=()=>{if(!(w!=null&&w.mtf50)||!n)return;const Z=n.x+n.w/2,te=n.y+n.h/2,ge=`{${Z.toFixed(1)},${te.toFixed(1)},${w.mtf50.toFixed(4)}}`;navigator.clipboard.writeText(ge)};j.useEffect(()=>{if(l.length===0){C(null);return}const Z=parseFloat(f),te=!isNaN(Z)&&Z>0?Z:null,me=yN(l,x?-1:y,te,g);C(me)},[l,y,x,g,f]),j.useEffect(()=>{e&&K&&l.length===0&&n&&r&&F()},[e]);const fe=Z=>{i&&i(),!(Z.target.closest("button")||Z.target.closest("input"))&&(_(!0),B.current={x:Z.clientX-P.x,y:Z.clientY-P.y})},W=Z=>{Z.stopPropagation(),Z.preventDefault(),I(!0),B.current={x:Z.clientX,y:Z.clientY},A.current={w:N.w,h:N.h}};j.useEffect(()=>{const Z=ge=>{if(M)O({x:ge.clientX-B.current.x,y:ge.clientY-B.current.y});else if(D){const me=ge.clientX-B.current.x,He=ge.clientY-B.current.y;$({w:Math.max(600,A.current.w+me),h:Math.max(500,A.current.h+He)})}},te=()=>{_(!1),I(!1)};return(M||D)&&(window.addEventListener("mousemove",Z),window.addEventListener("mouseup",te)),()=>{window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",te)}},[M,D]);const X=j.useMemo(()=>{if(!(w!=null&&w.mtf50)||!h)return null;const Z=parseFloat(h);if(isNaN(Z)||Z<=0)return null;let te=w.mtf50;const ge=parseFloat(f);return!isNaN(ge)&&ge>0&&(te=w.mtf50*(ge/1e3)),te*2*Z},[w,h,f]);if(!e)return null;const se=w?w.lsfCropped.map((Z,te)=>({x:te,y:Z})):[],ce=w?w.esf.map((Z,te)=>({x:te,y:Z})):[],H=w?w.mtf.map((Z,te)=>({freq:w.freqs[te],mtf:Z})).filter(Z=>Z.freq<=(parseFloat(f)?200:1)):[],pe=f?"lp/mm":"cy/px";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden",style:{left:P.x,top:P.y,width:N.w,height:N.h,zIndex:a??100},onMouseDownCapture:i,children:[c.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${M?"cursor-grabbing":"cursor-grab"}`,onMouseDown:fe,children:[c.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[l.length," ROI",l.length!==1?"s":""]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),c.jsx("input",{type:"number",value:f,onChange:Z=>d(Z.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),c.jsx("input",{type:"number",value:h,onChange:Z=>p(Z.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",title:"Auto-calculated based on ROI size",children:[c.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),E?c.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[E.toFixed(3),"px",c.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",L,"x)"]})]}):c.jsx("span",{className:"text-gray-400 italic",children:"..."})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[300px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",title:"Linearly subtract vignetting trend (4x width distance)",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:Z=>b(Z.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:"Deshading"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:Z=>{const te=Z.target.checked;v(te),te||m(U)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's official NR"})]}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:x?"Calculated:":"Manual:"}),c.jsxs("span",{className:`font-mono font-bold ${x?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[x&&(w!=null&&w.calcRadius)?w.calcRadius.toFixed(2):y.toFixed(1)," px"]})]}),c.jsx("input",{type:"range",min:"2",max:U,step:"0.5",value:y,onChange:Z=>{m(parseFloat(Z.target.value)),v(!1)},disabled:x,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${x?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:F,disabled:!K,title:K?"":"Scalar Unmixing must be active. Run Unmixing in Sidebar first.",className:`px-3 py-1.5 text-white font-bold rounded shadow-sm transition-transform active:scale-95 ${K?"bg-orange-600 hover:bg-orange-500":"bg-gray-400 cursor-not-allowed"}`,children:K?"Add Current ROI":"Unmixing Required"}),c.jsx("button",{onClick:Q,disabled:!w||!w.mtf50||!n,className:"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Copy Pos/MTF50"}),c.jsx("button",{onClick:ue,disabled:!w,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),c.jsx("button",{onClick:ee,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[c.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(hl,{data:ce,children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Bn,{dataKey:"x",hide:!0})," ",c.jsx(Fn,{hide:!0,domain:["auto","auto"]})," ",c.jsx(Xr,{contentStyle:{fontSize:"10px"}}),c.jsx(Or,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",S>1?`(x${S.toFixed(0)})`:""]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),c.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:S,onChange:Z=>k(parseFloat(Z.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(hl,{data:se,children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(oo,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),c.jsx(Bn,{dataKey:"x",hide:!0}),c.jsx(Fn,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[Z=>Z,Z=>Z/S],allowDataOverflow:!0,tickFormatter:Z=>Z.toFixed(3)}),c.jsx(Xr,{contentStyle:{fontSize:"10px"},formatter:Z=>[Z.toFixed(5),"Amplitude"]}),c.jsx(Or,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col min-h-[250px]",children:[c.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF / Spatial Frequency Response"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[(w==null?void 0:w.mtf50)&&c.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",c.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[w.mtf50.toFixed(2)," ",pe]})]}),X!==null&&c.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(X)," LW/PH"]})]})]}),c.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 400 60",className:"w-[40rem] h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),c.jsx(Pi,{width:"100%",height:"100%",children:c.jsxs(hl,{data:H,margin:{top:10,right:30,left:10,bottom:20},children:[c.jsx(ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),c.jsx(Bn,{dataKey:"freq",type:"number",tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${pe})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),c.jsx(Fn,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),c.jsx(Xr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:Z=>`Freq: ${Number(Z).toFixed(3)}`,formatter:Z=>[Z.toFixed(4),"MTF"]}),c.jsx(ei,{verticalAlign:"top",height:20}),c.jsx(Or,{type:"monotone",dataKey:"mtf",name:"SFR",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1}),(w==null?void 0:w.mtf50)&&c.jsx(Pf,{x:w.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:c.jsx(en,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]})]}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:W})]})},are=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations to prevent premature overflow and allow negative offsets
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,ire=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=j.useState(!0),[l,u]=j.useState(!1),f=j.useRef(null),[d,h]=j.useState(4),[p,y]=j.useState(0),[m,x]=j.useState(""),[v,g]=j.useState(""),[b,S]=j.useState("RGGB"),k=j.useMemo(()=>Object.keys(Jd).sort(),[]);j.useEffect(()=>{e&&!f.current&&(async()=>{try{const P=await window.loadPyodide();await P.loadPackage("numpy"),await P.runPythonAsync(are),f.current=P,s(!1)}catch(P){console.error("Pyodide Init Failed",P)}})()},[e]),j.useEffect(()=>{if(e&&r){const C=r.whiteLevel;C>1e4?h(2):C>3e3?h(4):C>6e4&&h(0);const P=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(P)?S(P):S("RGGB")}},[e,r]);const w=async()=>{if(!(!r||!f.current)){u(!0);try{const C=f.current,P=m.trim()?m.trim().split(/\s+/).map(Number):[0,0,0,0];if(P.length===1&&!isNaN(P[0])&&P.push(P[0],P[0],P[0]),P.length<4)for(;P.length<4;)P.push(0);const O=v.trim()?v.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(O.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const N=b;C.globals.set("js_raw_bytes",new Uint8Array(r.data.buffer,r.data.byteOffset,r.data.byteLength)),C.globals.set("js_width",r.width),C.globals.set("js_height",r.height),C.globals.set("js_cfa",N),C.globals.set("js_bl_list",P),C.globals.set("js_shift",d),C.globals.set("js_linear_shift",p),C.globals.set("js_cm_flat",O);const $=await C.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift,
                    js_linear_shift,
                    js_cm_flat.to_py()
                )
            `),M=$.toJs();$.destroy();const _=new Blob([M],{type:"image/x-adobe-dng"}),D=URL.createObjectURL(_),I=document.createElement("a");I.href=D;const B=n.substring(0,n.lastIndexOf("."))||"image";I.download=`${B}_16bit_manual.dng`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(D)}catch(C){console.error(C),alert("Export Failed: "+C.message)}finally{u(!1)}}};return e?c.jsxs(dc,{initialPosition:{x:window.innerWidth/2-250,y:150},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),c.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Bit Shift (<<)"}),c.jsx("input",{type:"number",value:d,onChange:C=>h(parseInt(C.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase",children:"Offset (+)"}),c.jsx("input",{type:"number",value:p,onChange:C=>y(parseInt(C.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),c.jsxs("select",{value:b,onChange:C=>S(C.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),c.jsx("div",{className:"mt-[-10px] grid grid-cols-3 gap-4",children:c.jsx("div",{className:"text-[9px] text-gray-400 dark:text-gray-500 col-span-2",children:"Shift: 4=12bit(x16), 2=14bit(x4). Added after shift."})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level (Manual Fill)"}),c.jsx("input",{type:"text",value:m,onChange:C=>x(C.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:C=>{const P=Jd[C.target.value];P&&g(P),C.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),k.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsx("textarea",{value:v,onChange:C=>g(C.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),c.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),c.jsx("button",{onClick:w,disabled:l,className:`w-full py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${l?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:l?"Processing Kernel...":"Convert & Download DNG"})]})})]}):null},ore="http://localhost:5428",sre=(e=!1)=>{const[t,r]=j.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return j.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${ore}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const l=await s.json(),u=`Connected (${l.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===l.exiftool&&f.hasDngConverter===!!l.dng_converter?f:{isConnected:!0,message:u,version:l.exiftool,hasDngConverter:!!l.dng_converter})}else r(l=>l.isConnected===!1&&l.message==="Service Error"?l:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},lre="JTR_BlobStore",si="raw_files",cre=1,xp=()=>new Promise((e,t)=>{const r=indexedDB.open(lre,cre);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(si)||a.createObjectStore(si)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),n5=async(e,t)=>{const r=await xp();return new Promise((n,a)=>{const i=r.transaction(si,"readwrite");i.objectStore(si).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},ure=async e=>{const t=await xp();return new Promise((r,n)=>{const o=t.transaction(si,"readonly").objectStore(si).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},fre=async()=>{const e=await xp();return new Promise((t,r)=>{const n=e.transaction(si,"readwrite");n.objectStore(si).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},vN="jtr_workspace_index",dre=e=>{try{const t=JSON.stringify(e);localStorage.setItem(vN,t)}catch(t){console.error("Failed to save workspace index",t)}},hre=()=>{try{const e=localStorage.getItem(vN);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},pre=async e=>{const n=(await xp()).transaction(si,"readwrite").objectStore(si),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},gre=[{x:3050,y:1973},{x:4245,y:1980},{x:3043,y:2870},{x:4243,y:2876}],mre=1195,a5=150,i5=50,yre=[{x:3528,y:2437.5,ori:2},{x:3775,y:2419,ori:2},{x:3638.5,y:2303,ori:1},{x:3653,y:2548.5,ori:1},{x:3082,y:2413,ori:2},{x:2825,y:2427,ori:2},{x:2946,y:2300.5,ori:1},{x:2966,y:2550,ori:1},{x:3638.5,y:3e3,ori:1},{x:3657.5,y:3248.5,ori:1},{x:3521.5,y:3135,ori:2},{x:3770,y:3108.5,ori:2},{x:4375.5,y:3064.5,ori:2},{x:4620.5,y:3040,ori:2},{x:4486.5,y:2934,ori:1},{x:4509.5,y:3182.5,ori:1},{x:2066.5,y:1726,ori:2},{x:2176.5,y:1597,ori:1},{x:2194.5,y:1843,ori:1},{x:2313.5,y:1705,ori:2},{x:2675.5,y:1799.5,ori:2},{x:2789.5,y:1674,ori:1},{x:2926,y:1787.5,ori:2},{x:2810.5,y:1921.5,ori:1},{x:4380.5,y:1816,ori:2},{x:4497.5,y:1687,ori:1},{x:4513,y:1934.5,ori:1},{x:4628,y:1799.5,ori:2},{x:5099,y:1622.5,ori:1},{x:4985.5,y:1751,ori:2},{x:5122,y:1867.5,ori:1},{x:5229,y:1732,ori:2},{x:2194.5,y:2428,ori:2},{x:2305.5,y:2295.5,ori:1},{x:2327,y:2544,ori:1},{x:2442,y:2405,ori:2},{x:3530.5,y:1741.5,ori:2},{x:3640.5,y:1610,ori:1},{x:3777.5,y:1719.5,ori:2},{x:3666,y:1856.5,ori:1},{x:4222,y:2443.5,ori:2},{x:4470.5,y:2422,ori:2},{x:4334.5,y:2309,ori:1},{x:4356.5,y:2554,ori:1},{x:4965,y:2313,ori:1},{x:4852.5,y:2446,ori:2},{x:4987,y:2561,ori:1},{x:5097,y:2427,ori:2},{x:4981.5,y:3141.5,ori:2},{x:5096,y:3009,ori:1},{x:5222.5,y:3122.5,ori:2},{x:5115.5,y:3256.5,ori:1},{x:2779,y:2928,ori:1},{x:2667,y:3064.5,ori:2},{x:2799,y:3173.5,ori:1},{x:2917.5,y:3043,ori:2},{x:2167.5,y:2993,ori:1},{x:2052,y:3130,ori:2},{x:2187.5,y:3243.5,ori:1},{x:2304.5,y:3108.5,ori:2}];function vre(e,t){let r=[],n=[];for(let o=0;o<4;o++){let s=e[o].x,l=e[o].y,u=t[o].x,f=t[o].y;r.push([s,l,1,0,0,0,-s*u,-l*u]),r.push([0,0,0,s,l,1,-s*f,-l*f]),n.push(u),n.push(f)}const a=8;for(let o=0;o<a;o++){let s=o;for(let l=o+1;l<a;l++)Math.abs(r[l][o])>Math.abs(r[s][o])&&(s=l);[r[o],r[s]]=[r[s],r[o]],[n[o],n[s]]=[n[s],n[o]];for(let l=o+1;l<a;l++){const u=r[l][o]/r[o][o];n[l]-=u*n[o];for(let f=o;f<a;f++)r[l][f]-=u*r[o][f]}}const i=new Array(a).fill(0);for(let o=a-1;o>=0;o--){let s=0;for(let l=o+1;l<a;l++)s+=r[o][l]*i[l];i[o]=(n[o]-s)/r[o][o]}return[[i[0],i[1],i[2]],[i[3],i[4],i[5]],[i[6],i[7],1]]}function xre(e,t,r){const n=e[2][0]*t+e[2][1]*r+e[2][2];return{x:(e[0][0]*t+e[0][1]*r+e[0][2])/n,y:(e[1][0]*t+e[1][1]*r+e[1][2])/n}}function bre(e){if(e.length!==4)return[];const t=vre(gre,e),n=Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y)/mre;return yre.map(a=>{const i=xre(t,a.x,a.y);let o,s;return a.ori===1?(o=a5*n,s=i5*n):(o=i5*n,s=a5*n),{x:i.x-o/2,y:i.y-s/2,w:o,h:s,ori:a.ori}})}const fn=1024,o5=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,l=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),h=f*t*4,p=d*n*4;for(let y=0;y<t;y++){const x=Math.floor(y*l)*4,v=h+y*4,g=p+x;s[v]=o[g],s[v+1]=o[g+1],s[v+2]=o[g+2],s[v+3]=o[g+3]}}return i},wre=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>d[h]=f),d.some(h=>h>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},kre=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:l,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],h=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,p=j.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:b,y:S,width:k,height:w}=e,C=xx(u,{x:b,y:S,w:k,h:w},o),P=[0,0,0,0],O=[0,0,0,0],N=Math.floor(S),$=Math.floor(b);for(let M=0;M<C.height;M++){const _=M*C.width;for(let D=0;D<C.width;D++){const I=C.data[_+D],B=N+M,A=$+D,E=B%2,L=A%2,U=E*2+L;P[U]+=I,O[U]++}}return P.map((M,_)=>O[_]>0?M/O[_]:0)}catch(b){return console.error("Unmix calc error",b),null}},[e,u,o]),y=(b,S,k)=>f?S<=1e-4?0:(b-k)/S:null,m=(b,S)=>h?b-d[S]:b,x=()=>{if(!h){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let b,S,k,w;n?(w=0,S=1,k=2,b=3):(b=0,S=1,k=2,w=3);const C=O=>e.means[O]-d[O],P=O=>e.stdDevs[O];localStorage.setItem("import_signal_r",C(b).toString()),localStorage.setItem("import_signal_g1",C(S).toString()),localStorage.setItem("import_signal_g2",C(k).toString()),localStorage.setItem("import_signal_b",C(w).toString()),localStorage.setItem("import_sigma_r",P(b).toString()),localStorage.setItem("import_sigma_g1",P(S).toString()),localStorage.setItem("import_sigma_g2",P(k).toString()),localStorage.setItem("import_sigma_b",P(w).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},v=n?[{name:"B",desc:"(0,0)",mean:m(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:y(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:m(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:y(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:m(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:y(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"R",desc:"(1,1)",mean:m(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:y(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}]:[{name:"R",desc:"(0,0)",mean:m(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:y(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:m(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:y(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:m(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:y(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"B",desc:"(1,1)",mean:m(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:y(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}],g=p?"w-96":f?"w-80":"w-60";return c.jsxs(dc,{className:`${g} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:l,initialPosition:{x:20,y:80},children:[c.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",c.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),c.jsx("br",{}),"Y: ",Math.round(e.y)]}),c.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),c.jsxs("table",{className:"w-full mb-3",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[c.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),c.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",h?"*":""]}),c.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&c.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),p&&c.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),c.jsx("tbody",{className:"font-mono text-xs",children:v.map((b,S)=>c.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[c.jsxs("td",{className:"py-1",children:[c.jsx("span",{className:`font-bold ${b.color}`,children:b.name}),c.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:b.desc})]}),c.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",title:h?"Mean adjusted by Black Level":"Raw Mean",children:b.mean.toFixed(2)}),c.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:b.std.toFixed(2)}),f&&c.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:b.snr!==null?b.snr.toFixed(2):"-"}),p&&c.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:b.unmixed!==null?b.unmixed.toFixed(1):"-"})]},S))})]}),h&&c.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Histogram",children:"Hist"}),c.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Quantization Steps",children:"Quant"}),c.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Power Spectrum (FFT)",children:"FFT"}),c.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Pearson Correlation Analysis",children:"PCC"}),c.jsx("button",{onClick:x,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Color Noise Analysis (External Tool)",children:"ColorN"})]})]})]})},Sre=()=>{var A1;const[e,t]=j.useState("init"),[r,n]=j.useState("Checking storage..."),[a,i]=j.useState(null),o=j.useRef(!1),[s,l]=j.useState("dark");j.useEffect(()=>{const V=window.document.documentElement;V.classList.remove(s==="dark"?"light":"dark"),V.classList.add(s)},[s]);const[u,f]=j.useState(!1),[d,h]=j.useState(!1),[p,y]=j.useState(!1),[m,x]=j.useState(!1),v=sre(u||d||p),[g,b]=j.useState(!1),[S,k]=j.useState([]),[w,C]=j.useState(-1),[P,O]=j.useState([]),N=j.useMemo(()=>S[w],[S,w]),$=j.useRef(null);j.useEffect(()=>{$.current=N||null},[N]);const M=(N==null?void 0:N.file)||null,_=(N==null?void 0:N.imageElement)||null,D=(N==null?void 0:N.rawImageData)||null,I=(N==null?void 0:N.rawFileBuffer)||null,B=(N==null?void 0:N.renderedRawImageData)||null,A=(N==null?void 0:N.referenceImageData)||null,E=(N==null?void 0:N.sampledImageData)||null,L=(N==null?void 0:N.exifData)||null,U=(N==null?void 0:N.isThreePlane)||!1,J=(N==null?void 0:N.xtransPhase)||{x:0,y:0},K=(N==null?void 0:N.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[F,ee]=j.useState(!1),[ue,Q]=j.useState(null),[fe,W]=j.useState(!1),[X,se]=j.useState(!1),[ce,H]=j.useState(null),[pe,Z]=j.useState([]),[te,ge]=j.useState(100),[me,He]=j.useState(!0),[Ae,_e]=j.useState(!1),[Re,lt]=j.useState(null),[gt,sr]=j.useState(!1),[Je,tr]=j.useState(!1),[tt,Yt]=j.useState(!1),[It,rr]=j.useState(!1),[$t,wt]=j.useState(!1),[Ye,kt]=j.useState("1.0"),[St,qt]=j.useState(!1),[wr,Gr]=j.useState(!1),[jt,Ar]=j.useState(!1),[ct,Zt]=j.useState([]),[Tr,an]=j.useState(!1),[kr,Er]=j.useState(0),[on,Gn]=j.useState([]),[Ur,Un]=j.useState(!1),[wa,Ua]=j.useState({x:0,y:0}),[lr,cr]=j.useState(!1),[rt,le]=j.useState(!1),[Oe,Ee]=j.useState([]),[Qe,Be]=j.useState(0),[Ct,ur]=j.useState(null),[pr,We]=j.useState(!1),[ut,ft]=j.useState([]),[Pt,Ut]=j.useState(.5),[be,sn]=j.useState(!1),[Bi,ra]=j.useState(2),[ka,Eo]=j.useState(1),[Es,Sa]=j.useState([]),[$o,ui]=j.useState(null),[Zr,ja]=j.useState(0),[Ca,Wn]=j.useState([]),[na,Fi]=j.useState([]),[Do,hc]=j.useState(64),[Wa,fi]=j.useState(10),[On,pc]=j.useState(10),[aa,gc]=j.useState(4),[Vn,mc]=j.useState(1),[G,re]=j.useState(0),[R,T]=j.useState("processed"),[ie,ve]=j.useState(!1),Ce=j.useMemo(()=>K.blackLevel?K.blackLevel:D!=null&&D.blackLevels?[D.blackLevels[0],D.blackLevels[1],D.blackLevels[2],D.blackLevels[3]]:[0,0,0,0],[K.blackLevel,D]),Fe=(L==null?void 0:L.ImageHeight)||(L==null?void 0:L.ExifImageHeight)||(D==null?void 0:D.height)||0,[Ie,xe]=j.useState(null),[yt,ke]=j.useState(null),[dt,Nt]=j.useState({x:0,y:0}),[oe,qe]=j.useState(1),[Te,Lt]=j.useState("pan"),vt=j.useRef(null),Sr=j.useRef(null);j.useEffect(()=>{const V=hre();V&&V.sessions.length>0?(i(V),t("prompt")):t("idle")},[]);const xt=j.useCallback(async()=>{if(!a)return;t("restoring"),n("Restoring layout...");const V=a;if(l(V.theme),He(V.sidebarOpen),V.sessions.length>0){n(`Restoring ${V.sessions.length} images...`);const Y=[];for(const q of V.sessions){if(o.current)return;await new Promise(ae=>setTimeout(ae,50));try{const ae=await ure(q.id);if(ae){const Me={id:q.id,fileName:q.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:ae,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:q.isThreePlane,displaySettings:q.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:ye,analysisData:De}=await Lo(ae);let $e=null;if(De)try{q.displaySettings.renderMode==="zero-dependency"?$e=await ig(ae,q.displaySettings):q.displaySettings.renderMode==="advanced-zero-dep"?$e=await Q_(ae,q.displaySettings):q.displaySettings.renderMode==="zero-dep-color"?$e=await Z_(ae,q.displaySettings):$e=await l2(ae,q.displaySettings)}catch(ze){console.error("Render failed",ze),$e=await ig(ae,q.displaySettings)}const Le=URL.createObjectURL(ye),Ne=new Image;Ne.src=Le,await new Promise(ze=>{Ne.onload=()=>ze()}),Y.push({...Me,rawImageData:De,renderedRawImageData:$e,previewUrl:Le,imageElement:Ne,exifData:De.metadata})}}catch(ae){console.error(`Failed to restore session ${q.id}`,ae)}}if(o.current)return;if(k(Y),V.activeSessionId){const q=Y.findIndex(ae=>ae.id===V.activeSessionId);q>=0?C(q):Y.length>0&&C(0)}Z(V.windows)}o.current||t("idle")},[a]),gr=j.useCallback(async()=>{o.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await fre()}catch(V){console.error("Failed to clear DB",V)}t("idle"),i(null),o.current=!1},[]),mn=j.useCallback(async()=>{},[I,N,K,It,$t]),Va=j.useCallback(()=>{!I||!N||Yt(!0)},[I,N]),yc=j.useCallback(async()=>{},[D,N,Ye,Ce]);j.useEffect(()=>{const V=Y=>{(Y.ctrlKey||Y.metaKey)&&Y.key.toLowerCase()==="s"&&(Y.preventDefault(),Va())};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[Va]);const vc=j.useRef(null),xc=j.useCallback(()=>{e==="idle"&&(vc.current&&clearTimeout(vc.current),vc.current=window.setTimeout(async()=>{var q;const V={version:1,timestamp:Date.now(),activeSessionId:((q=S[w])==null?void 0:q.id)||null,theme:s,sidebarOpen:me,sessions:S.map(ae=>({id:ae.id,fileName:ae.fileName,fileType:ae.file?ae.file.type:"application/octet-stream",fileSize:ae.rawFileBuffer?ae.rawFileBuffer.byteLength:0,displaySettings:ae.displaySettings,isThreePlane:ae.isThreePlane})),windows:pe.map(ae=>({id:ae.id,type:ae.type,roi:ae.roi,zIndex:ae.zIndex,initialPosition:ae.initialPosition,sessionId:ae.sessionId,isBGGR:ae.isBGGR,isMinimized:ae.isMinimized||!1,internalState:ae.internalState}))};dre(V);const Y=S.map(ae=>ae.id);pre(Y)},1e3))},[S,pe,w,s,me,e]);j.useEffect(()=>{xc()},[xc]);const Pa=j.useCallback(V=>{k(Y=>Y.map((q,ae)=>ae===w?{...q,...V}:q))},[w]);j.useEffect(()=>{if(D&&ue){const V=Bo(D.data,D.width,D.height,ue.x,ue.y,ue.width,ue.height);Q(V)}},[D]);const Of=V=>{if(!ue||!N)return;const Y=Date.now().toString()+Math.random().toString().slice(2,5),q=Math.max(te,...pe.map(ye=>ye.zIndex),100),ae=pe.length%10*30,Me=V==="fft"?{x:50,y:50}:V==="histogram"?{x:100,y:100}:{x:150,y:150};Z(ye=>[...ye,{id:Y,type:V,roi:{x:ue.x,y:ue.y,w:ue.width,h:ue.height},zIndex:q+1,initialPosition:{x:Me.x+ae,y:Me.y+ae},sessionId:N.id,isBGGR:fe,isMinimized:!1,stackFiles:(V==="fft"||V==="pearson"||V==="histogram")&&P.length>0?P:void 0}])},Mn=V=>{Z(Y=>Y.filter(q=>q.id!==V))},bp=V=>{Z(Y=>Y.map(q=>q.id===V?{...q,isMinimized:!0}:q))},wp=V=>{Z(Y=>{const q=Math.max(te,...Y.map(ae=>ae.zIndex));return Y.map(ae=>ae.id===V?{...ae,zIndex:q+1}:ae)})},kp=(V,Y)=>{Z(q=>q.map(ae=>ae.id===V?{...ae,internalState:{...ae.internalState,...Y}}:ae))},$s=()=>{const V=Math.max(te,...pe.map(Y=>Y.zIndex));ge(V+1)},bc=(V,Y)=>{Z(q=>q.map(ae=>ae.id===V?{...ae,roi:Y}:ae))};j.useEffect(()=>{if(!L)return;const V=L.CFAPattern2||L.CFAPattern;if(V){let Y="";Array.isArray(V)?Y=V.join(""):typeof V=="string"?Y=V.replace(/[\s,]+/g,""):typeof V=="number"&&(Y=String(V)),Y==="0112"?W(!1):Y==="2110"&&W(!0)}},[L]),j.useEffect(()=>{let V;const Y=()=>{if(be&&Ur){const q=Date.now()/1e3,ae=.55+.45*Math.sin(q*Bi);Eo(ae),V=requestAnimationFrame(Y)}else Eo(1)};return be&&Ur?Y():Eo(1),()=>{V&&cancelAnimationFrame(V)}},[be,Ur,Bi]),j.useEffect(()=>{const V=Y=>{Y.key==="Escape"&&Ur&&(Un(!1),Ua({x:0,y:0}),sn(!1))};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[Ur]),j.useEffect(()=>()=>{S.forEach(V=>{V.previewUrl&&URL.revokeObjectURL(V.previewUrl)}),Sr.current&&Sr.current.terminate()},[]);const zi=async(V,Y=!0)=>{Y&&(Nt({x:0,y:0}),qe(1),ja(0),Wn([]),Fi([]),_e(!1),lt(null),ee(!1),le(!1),Ee([]),ft([]),Be(0),Zt([]));let q=null;if(v.isConnected){const $e=new FormData;$e.append("file",V);try{const Ne=await(await fetch("http://localhost:5428/read",{method:"POST",body:$e})).json();if(Ne.success){let ze=Ne.data;Array.isArray(ze)&&ze.length===1&&(ze=ze[0]),q=ze}}catch(Le){console.warn("Auto Exif fetch failed",Le)}}const ae=V.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(V.type)||ae)){xe("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let ye={file:V,exifData:q};if(ae||V.type==="image/x-adobe-dng")try{Y?ke("Processing RAW file (this may take a moment)..."):ve(!0);const $e=await V.arrayBuffer();ye.rawFileBuffer=$e;const{previewBlob:Le,analysisData:Ne}=await Lo($e);ye.rawImageData=Ne,!q&&Ne.metadata&&(ye.exifData=Ne.metadata),ye.isThreePlane=Ne.isThreePlane||!1,Ne.isThreePlane&&Y&&ee(!0);let ze=!1,st=null,Mt=!1;if(Ne.isXTrans){Mt=!0,st=$e;const jr=(await Jf($e,0,0)).dngBuffer,Qt=await Lo(jr);ye.rawFileBuffer=jr,ye.rawImageData=Qt.analysisData,ye.previewUrl=URL.createObjectURL(Qt.previewBlob),ze=!0}else ye.previewUrl=URL.createObjectURL(Le);ye.originalRawFileBuffer=st,ye.isXTransOriginal=Mt,ye.isXTransConverted=ze,ye.xtransPhase={x:0,y:0};const Bt=new Image;if(Bt.src=ye.previewUrl||"",await new Promise((mr,jr)=>{Bt.onload=()=>{ye.imageElement=Bt,mr()},Bt.onerror=()=>{mr()}}),Y){const mr=ye.rawImageData||Ne,jr=wre(mr,q||mr.metadata);let Qt;jr&&jr.some(Ft=>Ft>0)&&(Qt=jr);const Ve={exposure:0,demosaicMethod:-1,blackLevel:Qt,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ht=ye.rawFileBuffer;if(ht&&(ae||V.type==="image/x-adobe-dng"))try{const Ft=await ig(ht,Ve);ye.renderedRawImageData=Ft,ye.displaySettings=Ve}catch(Ft){console.error("Initial Zero-Dep Render Failed",Ft)}}}catch($e){xe(`Failed to process RAW file: ${$e.message}`),ke(null),ve(!1);return}else try{ke("Processing image...");const{previewBlob:$e,analysisData:Le}=await U_(V);ye.rawImageData=Le,!q&&Le.metadata&&(ye.exifData=Le.metadata),ye.rawFileBuffer=await V.arrayBuffer(),ye.isThreePlane=Le.isThreePlane||!1,ye.isXTransOriginal=!1,ye.isXTransConverted=!1,ye.originalRawFileBuffer=null;const Ne=URL.createObjectURL($e);ye.previewUrl=Ne;const ze=new Image;ze.src=Ne,await new Promise(st=>{ze.onload=()=>{ye.imageElement=ze,st()},ze.onerror=()=>{xe("Could not load the image file."),st()}})}catch($e){xe(`Failed to process image: ${$e.message}`),ke(null);return}const De=Date.now().toString()+Math.random();if(ye.rawFileBuffer&&await n5(De,ye.rawFileBuffer),Y){const $e={exposure:0,demosaicMethod:-1,blackLevel:void 0,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},Le={id:De,fileName:V.name,file:V,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:$e,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...ye};k(Ne=>{const ze=[...Ne,Le];return C(ze.length-1),ze})}else Pa(ye);ke(null),ve(!1)},Mf=async V=>{ke("Converting to DNG...");try{const Y=new FormData;Y.append("file",V);const q=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:Y}),ae=q.headers.get("content-type")||"";if(q.ok)if(ae.includes("application/json")){const Me=await q.json();throw new Error(Me.error||"Conversion failed")}else{const Me=await q.blob(),ye=URL.createObjectURL(Me),De=document.createElement("a");De.href=ye;const $e=V.name,Le=$e.substring(0,$e.lastIndexOf("."))+".dng"||"converted.dng";De.download=Le,document.body.appendChild(De),De.click(),document.body.removeChild(De),URL.revokeObjectURL(ye);const Ne=new File([Me],Le,{type:"image/x-adobe-dng"});await zi(Ne,!0)}else{const Me=await q.text();throw new Error(`HTTP ${q.status}: ${Me}`)}}catch(Y){ke(null),xe(`Conversion Error: ${Y.message}`)}},Sp=(V,Y)=>{V&&(Y==="direct"?zi(V,!0):Mf(V))},wc=async V=>{var q;const Y=(q=V.target.files)==null?void 0:q[0];Y&&(await zi(Y,!0),V.target.value="")},Pe=async(V,Y,q,ae)=>{!V||!Y||(ke("Processing Pair Difference (May take a while)..."),xe(null),setTimeout(async()=>{try{const Me=await V.arrayBuffer(),ye=await Y.arrayBuffer(),De=await ag(Me,ye,q,ae),$e=Pd(De.width,De.height,De.rawData),Le=new File([$e],`Diff_${V.name}_${Y.name}.dng`,{type:"image/x-adobe-dng"});await zi(Le,!0),Of("fft")}catch(Me){console.error("Pair Processing Error",Me),xe("Pair Processing Failed: "+Me.message)}finally{ke(null)}},100))},it=async V=>{if(V.length<2){xe("Need at least 2 files for Batch Diff.");return}ke(`Batch Processing 0/${Math.floor(V.length/2)} pairs...`);const Y=Array.from(V).sort((q,ae)=>q.name.localeCompare(ae.name,void 0,{numeric:!0}));try{for(let q=0;q<Y.length-1;q+=2){const ae=Y[q],Me=Y[q+1];ke(`Batch Processing Pair ${Math.floor(q/2)+1}/${Math.floor(Y.length/2)}: ${ae.name} & ${Me.name}`);const ye=await ae.arrayBuffer(),De=await Me.arrayBuffer(),$e=await ag(ye,De,!1,!1),Le=Pd($e.width,$e.height,$e.rawData),Ne=new Blob([Le],{type:"image/x-adobe-dng"}),ze=URL.createObjectURL(Ne),st=document.createElement("a");st.href=ze,st.download=`Diff_${ae.name}_${Me.name}.dng`,document.body.appendChild(st),st.click(),document.body.removeChild(st),URL.revokeObjectURL(ze)}}catch(q){console.error("FFT Batch Error",q),xe("Batch Processing Failed: "+q.message)}finally{ke(null)}},nt=async V=>{if(V.length<1)return;const Y=Array.from(V).sort((q,ae)=>q.name.localeCompare(ae.name,void 0,{numeric:!0}));O(Y),await zi(Y[0],!0)},et=async()=>{ve(!0);const V=128,Y=V,q=V,ae=Y*q,Me=new Uint16Array(ae),ye=Ve=>{const ht=Ve/aa+G;return Math.sin(2*Math.PI*ht)>=0?1:0},De=32,$e=Vn*.5,Le=Math.max(1e-4,Vn/De);for(let Ve=0;Ve<q;Ve++){let ht=0;const yr=Ve+.5-$e;for(let Wt=0;Wt<De;Wt++){const xn=yr+(Wt+.5)*Le;ht+=ye(xn)}const Wr=ht/De,_t=Math.round(Wr*65535);for(let Wt=0;Wt<Y;Wt++)Me[Ve*Y+Wt]=_t}const Ne=new ImageData(fn,fn),ze=fn/Y,st=Vn/2;for(let Ve=0;Ve<fn;Ve++){const ht=Ve/ze,Ft=Math.floor(ht),yr=ht-Ft,Wr=yr>=.5-st&&yr<.5+st;for(let _t=0;_t<fn;_t++){const Wt=_t/ze,xn=Math.floor(Wt),ln=Wt-xn,Ro=ln>=.5-st&&ln<.5+st,$r=(Ve*fn+_t)*4;if(xn>=Y||Ft>=q){Ne.data[$r]=30,Ne.data[$r+1]=34,Ne.data[$r+2]=40,Ne.data[$r+3]=255;continue}if(Wr&&Ro){const Ui=Me[Ft*Y+xn],Io=Math.round(Ui/257);Ne.data[$r]=Io,Ne.data[$r+1]=Io,Ne.data[$r+2]=Io,Ne.data[$r+3]=255}else Ne.data[$r]=30,Ne.data[$r+1]=34,Ne.data[$r+2]=40,Ne.data[$r+3]=255}}const Mt=new ImageData(fn,fn),Bt=q/fn;for(let Ve=0;Ve<fn;Ve++){const ht=(Ve+.5)*Bt,yr=ye(ht)>.5?255:0,Wr=Ve*fn*4;for(let _t=0;_t<fn;_t++){const Wt=Wr+_t*4;Mt.data[Wt]=yr,Mt.data[Wt+1]=yr,Mt.data[Wt+2]=yr,Mt.data[Wt+3]=255}}const mr=Pd(Y,q,Me),jr=new File([mr],"pattern_test.dng",{type:"image/x-adobe-dng"}),Qt=Date.now().toString();try{const{previewBlob:Ve,analysisData:ht}=await Lo(mr.slice(0)),Ft=await l2(mr.slice(0),K),yr=o5(Ft,fn,fn),Wr=URL.createObjectURL(Ve),_t=new Image;_t.src=Wr,await new Promise(xn=>{_t.onload=()=>xn()}),await n5(Qt,mr);const Wt={id:Qt,fileName:"pattern_test.dng",file:jr,imageElement:_t,rawImageData:ht,rawFileBuffer:mr,renderedRawImageData:yr,referenceImageData:Mt,sampledImageData:Ne,exifData:null,isThreePlane:!1,previewUrl:Wr,displaySettings:K,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(M==null?void 0:M.name)==="pattern_test.dng"?Pa(Wt):k(xn=>{const ln=[...xn,Wt];return C(ln.length-1),ln})}catch(Ve){console.error("Error generating pattern:",Ve),xe(`Error generating pattern: ${Ve.message}`)}ve(!1),ke(null)},yn=()=>{sr(!0)},_n=()=>{sr(!1),T("sampled"),ke("Generating..."),setTimeout(()=>et(),50)},vn=j.useRef({period:aa,fill:Vn,phase:G});j.useEffect(()=>{(M==null?void 0:M.name)==="pattern_test.dng"&&(vn.current.period!==aa||vn.current.fill!==Vn||vn.current.phase!==G)&&(vn.current={period:aa,fill:Vn,phase:G},et())},[aa,Vn,G,M]);const di=j.useCallback(V=>{if(Pa({displaySettings:V}),!I)return;ve(!0),Sr.current&&Sr.current.terminate();const Y=new Worker(new URL("/assets/renderWorker-D73_7lpj.js",import.meta.url),{type:"module"});Sr.current=Y,Y.onmessage=q=>{const{success:ae,imageData:Me,error:ye}=q.data;if(ae){let De=Me;(M==null?void 0:M.name)==="pattern_test.dng"&&(De=o5(Me,fn,fn)),Pa({renderedRawImageData:De})}else xe(ye||"Unknown worker error");ve(!1),Y.terminate(),Sr.current=null},Y.postMessage({buffer:I.slice(0),settings:V})},[I,M,Pa]),Gi=async(V,Y)=>{ke("Re-sampling X-Trans with new Phase...");try{const ae=(await Jf(Y,V.x,V.y)).dngBuffer,Me=await Lo(ae),ye=URL.createObjectURL(Me.previewBlob),De=new Image;De.src=ye,await new Promise($e=>{De.onload=()=>$e()}),N!=null&&N.previewUrl&&URL.revokeObjectURL(N.previewUrl),Pa({rawFileBuffer:ae,rawImageData:Me.analysisData,previewUrl:ye,imageElement:De,xtransPhase:V}),Q(null)}catch(q){console.error("X-Trans Phase Update Failed",q),xe("Phase Update Failed: "+q.message)}finally{ke(null)}},Ha=V=>{if(!N||!N.originalRawFileBuffer||!N.isXTransConverted)return;const Y={...N.xtransPhase,...V};Gi(Y,N.originalRawFileBuffer)},nr=j.useCallback(async V=>{if(N)if(V){if(N.isXTransConverted)return;const Y=N.originalRawFileBuffer||N.rawFileBuffer;if(!Y)return;ke("Converting X-Trans to Pseudo-Bayer DNG...");try{const q=N.xtransPhase||{x:0,y:0},Me=(await Jf(Y,q.x,q.y)).dngBuffer,ye=await Lo(Me),De=URL.createObjectURL(ye.previewBlob),$e=new Image;$e.src=De,await new Promise(Le=>{$e.onload=()=>Le()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),Pa({rawFileBuffer:Me,rawImageData:ye.analysisData,previewUrl:De,imageElement:$e,isXTransConverted:!0,originalRawFileBuffer:Y}),Q(null)}catch(q){console.error("X-Trans Conversion Failed",q),xe("Failed to convert X-Trans: "+q.message)}finally{ke(null)}}else{if(!N.isXTransConverted)return;const Y=N.originalRawFileBuffer;if(!Y){xe("Original X-Trans buffer lost. Cannot revert.");return}ke("Reverting to Native X-Trans...");try{const q=await Lo(Y),ae=URL.createObjectURL(q.previewBlob),Me=new Image;Me.src=ae,await new Promise(ye=>{Me.onload=()=>ye()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),Pa({rawFileBuffer:Y,rawImageData:q.analysisData,previewUrl:ae,imageElement:Me,isXTransConverted:!1}),Q(null)}catch(q){console.error("X-Trans Revert Failed",q),xe("Failed to revert X-Trans: "+q.message)}finally{ke(null)}}},[N,Pa]);let kc=B||_;R==="reference"&&A?kc=A:R==="sampled"&&E&&(kc=E);const Ds=yt||ie,Sc=V=>{if(vt.current){const Y=vt.current,{width:q,height:ae}=Y.getBoundingClientRect(),Me=q/2,ye=ae/2,De=V/oe,$e=Me-(Me-dt.x)*De,Le=ye-(ye-dt.y)*De;Nt({x:$e,y:Le})}qe(V)},jp=V=>{if(!V)return;if(!D){Q(null);return}if(Tr){V.w>0&&V.h>0&&Zt(q=>[...q,V]);return}X&&se(!1);const Y=Bo(D.data,D.width,D.height,V.x,V.y,V.w,V.h);Q(Y)},bN=V=>{H(V),jp(V)},wN=()=>{Lt(V=>V==="pan"?"select":"pan")},N1=V=>{if(ct.length===0){xe("ROIs ");return}if(!D||K.renderMode!=="advanced-zero-dep"){xe("Advanced Zero-Dep (Unmixed) mode required for scalar SFR calc.");return}ke("Computing Batch SFR..."),setTimeout(()=>{try{const Y=[];for(const q of ct){const ae=xx(D,q,K),Me=gv(ae.data,ae.width,ae.height,{x:0,y:0,w:ae.width,h:ae.height});if(Me){const ye=V.useNR?-1:12,De=yN([Me],ye,null,V.useDeshading);De&&De.mtf50!==null&&Y.push({x:q.x+q.w/2,y:q.y+q.h/2,mtf50:De.mtf50,orientation:Me.orientation})}}if(Y.length>0){const q=Y.map(ae=>`{${ae.x.toFixed(1)},${ae.y.toFixed(1)},${ae.mtf50.toFixed(4)},${ae.orientation}}`).join("");navigator.clipboard.writeText(q).then(()=>alert(`Computed ${Y.length}/${ct.length} ROIs. Copied results to clipboard.`)).catch(ae=>xe("Failed to copy results: "+ae))}else xe("Failed to compute valid SFR for any selected ROIs.")}catch(Y){xe("Batch Compute Failed: "+Y.message)}finally{ke(null)}},100)},kN=V=>{if(Zr===0||Zr>4)return;const Y=[...Ca,V];Wn(Y),Zr===4?(SN(Y),ja(0)):ja(Zr+1)},O1=(V,Y,q,ae)=>{const Me=V[0],ye=V[1],De=V[2],$e=V[3],Le=Y/2,Ne=[];for(let ze=0;ze<q;ze++){const st=q>1?ze/(q-1):.5;for(let Mt=0;Mt<ae;Mt++){const Bt=ae>1?Mt/(ae-1):.5,mr=Me.x*(1-Bt)+ye.x*Bt,jr=Me.y*(1-Bt)+ye.y*Bt,Qt=De.x*(1-Bt)+$e.x*Bt,Ve=De.y*(1-Bt)+$e.y*Bt,ht=mr*(1-st)+Qt*st,Ft=jr*(1-st)+Ve*st,yr=ht-Le,Wr=Ft-Le;Ne.push({x:yr,y:Wr,w:Y,h:Y})}}return Ne},SN=V=>{!D||!N||(ke("Calculating DR Lab Grid..."),setTimeout(()=>{try{const Y=O1(V,Do,Wa,On);Fi(Y);const ye=[...[`#BlackLevel: ${(K.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${D.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],De=`img${N.fileName||"image"}`;Y.forEach((st,Mt)=>{const Bt=Math.floor(Mt/On)+1,mr=Mt%On+1,jr=Bo(D.data,D.width,D.height,st.x,st.y,st.w,st.h),Qt=jr.means,Ve=jr.stdDevs,ht=`${De},${Bt},${mr},${Qt[0].toFixed(4)},${Qt[1].toFixed(4)},${Qt[2].toFixed(4)},${Qt[3].toFixed(4)},${Ve[0].toFixed(4)},${Ve[1].toFixed(4)},${Ve[2].toFixed(4)},${Ve[3].toFixed(4)}`;ye.push(ht)});const $e=ye.join(`
`),Le=new Blob([$e],{type:"text/csv;charset=utf-8;"}),Ne=URL.createObjectURL(Le),ze=document.createElement("a");ze.setAttribute("href",Ne),ze.setAttribute("download","dr_lab_results.csv"),document.body.appendChild(ze),ze.click(),document.body.removeChild(ze),URL.revokeObjectURL(Ne),Wn([])}catch(Y){xe("DR Lab Error: "+Y.message)}finally{ke(null)}},100))},jN=async(V,Y)=>{if(Ca.length<4&&na.length<1){xe("Please mark the grid on an image first before running batch processing.");return}let q=na;if(q.length===0&&Ca.length===4&&(q=O1(Ca,Do,Wa,On)),q.length===0){xe("No grid definitions found. Mark corners first.");return}ke(Y==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const Me=(K.blackLevel||[0,0,0,0]).join(","),ye=D?D.height:0,$e=[...[`#BlackLevel: ${Me}`,`#ImageHeight: ${ye}`,Y==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Le=Array.from(V).sort((Mt,Bt)=>Mt.name.localeCompare(Bt.name,void 0,{numeric:!0}));if(Y==="pair"&&Le.length<2){xe("Need at least 2 files for Pair processing."),ke(null);return}const Ne=$.current,ze=(Ne==null?void 0:Ne.isXTransConverted)||!1,st=(Ne==null?void 0:Ne.xtransPhase)||{x:0,y:0};try{const Mt=async Ve=>{let ht=await Ve.arrayBuffer();return ze&&(ht=(await Jf(ht,st.x,st.y)).dngBuffer),ht};if(Y==="single")for(let Ve=0;Ve<Le.length;Ve++){const ht=Le[Ve];ke(`Processing ${Ve+1}/${Le.length}: ${ht.name}...`);const Ft=await Mt(ht),yr=await s0(Ft),Wr=`img${ht.name}`;q.forEach((_t,Wt)=>{const xn=Math.floor(Wt/Wa)+1,ln=Wt%On+1,Ro=Bo(yr.data,yr.width,yr.height,_t.x,_t.y,_t.w,_t.h),$r=Ro.means,Ui=Ro.stdDevs,Io=`${Wr},${xn},${ln},${$r[0].toFixed(4)},${$r[1].toFixed(4)},${$r[2].toFixed(4)},${$r[3].toFixed(4)},${Ui[0].toFixed(4)},${Ui[1].toFixed(4)},${Ui[2].toFixed(4)},${Ui[3].toFixed(4)}`;$e.push(Io)})}else for(let Ve=0;Ve<Le.length-1;Ve+=2){const ht=Le[Ve],Ft=Le[Ve+1],yr=`img${ht.name} & ${Ft.name}`;ke(`Processing Pair ${Math.floor(Ve/2)+1}/${Math.floor(Le.length/2)}: ${ht.name} & ${Ft.name}...`);const Wr=await Mt(ht),_t=await s0(Wr),Wt=await Mt(Ft),xn=await ag(Wr,Wt,!1,!0);q.forEach((ln,Ro)=>{const $r=Math.floor(Ro/Wa)+1,Ui=Ro%On+1,Io=Bo(_t.data,_t.width,_t.height,ln.x,ln.y,ln.w,ln.h),RN=Bo(xn.rawData,xn.width,xn.height,ln.x,ln.y,ln.w,ln.h),_f=Io.means,Af=RN.stdDevs,IN=`${yr},${$r},${Ui},${_f[0].toFixed(4)},${_f[1].toFixed(4)},${_f[2].toFixed(4)},${_f[3].toFixed(4)},${Af[0].toFixed(4)},${Af[1].toFixed(4)},${Af[2].toFixed(4)},${Af[3].toFixed(4)}`;$e.push(IN)})}const Bt=$e.join(`
`),mr=new Blob([Bt],{type:"text/csv;charset=utf-8;"}),jr=URL.createObjectURL(mr),Qt=document.createElement("a");Qt.href=jr,Qt.setAttribute("download",`dr_lab_batch_${Y}_${new Date().getTime()}.csv`),document.body.appendChild(Qt),Qt.click(),document.body.removeChild(Qt),URL.revokeObjectURL(jr)}catch(Mt){console.error("Batch Error",Mt),xe("Batch Processing Failed: "+Mt.message)}finally{ke(null)}},CN=()=>{Ee([]),Be(1)},PN=V=>{if(!rt||Qe===0)return;const Y=[...Oe,V];Ee(Y),Y.length===4&&D?(M1(Y,Pt),Be(0)):Be(q=>q+1)},M1=(V,Y)=>{D&&(ke("Analyzing Color Chart..."),setTimeout(()=>{try{const q=qte(V[0],V[1],V[2],V[3],D.width,D.height,Y);ft(q);const Me=q.map((ye,De)=>{const $e=Bo(D.data,D.width,D.height,ye.x,ye.y,ye.w,ye.h);return{id:De,rawMeans:$e.means,refRGB:[0,0,0]}}).map((ye,De)=>({...ye,refRGB:pv[De]||[0,0,0]}));ur(Me),We(!0)}catch(q){xe("Color Lab Error: "+q.message)}finally{ke(null)}},100))},NN=V=>{Ut(V),Oe.length===4&&M1(Oe,V)},ON=()=>{We(!1)},MN=()=>{L||lt("No EXIF data found. The file might not contain metadata or it was stripped during processing."),_e(!0)},_N=async V=>{ke("Parsing PTC Data...");const Y=[];let q=null;try{for(let ae=0;ae<V.length;ae++){const ye=(await V[ae].text()).split(`
`);let De=!0;for(const $e of ye){const Le=$e.trim();if(!Le)continue;if(Le.startsWith("#")){if(Le.includes("BlackLevel:")){const _t=Le.split(":")[1].trim().split(",");if(_t.length>=4){const Wt=_t.map(Number);q||(q={}),q.blackLevel=Wt}}if(Le.includes("ImageHeight:")){const _t=parseInt(Le.split(":")[1].trim());isNaN(_t)||(q||(q={}),q.height=_t)}continue}if(De){Le.toLowerCase().includes("mean")&&Le.toLowerCase().includes("std")&&(De=!1);continue}const Ne=Le.split(",");if(Ne.length<5)continue;let ze=0,st;isNaN(parseFloat(Ne[0]))&&(st=Ne[0],ze=1);const Mt=parseInt(Ne[ze]),Bt=parseInt(Ne[ze+1]),mr=parseFloat(Ne[ze+2]),jr=parseFloat(Ne[ze+3]),Qt=parseFloat(Ne[ze+4]),Ve=parseFloat(Ne[ze+5]),ht=parseFloat(Ne[ze+6]),Ft=parseFloat(Ne[ze+7]),yr=parseFloat(Ne[ze+8]),Wr=parseFloat(Ne[ze+9]);!isNaN(mr)&&!isNaN(ht)&&Y.push({channel:"R",mean:mr,std:ht,filename:st,row:Mt,col:Bt}),!isNaN(jr)&&!isNaN(Ft)&&Y.push({channel:"G1",mean:jr,std:Ft,filename:st,row:Mt,col:Bt}),!isNaN(Qt)&&!isNaN(yr)&&Y.push({channel:"G2",mean:Qt,std:yr,filename:st,row:Mt,col:Bt}),!isNaN(Ve)&&!isNaN(Wr)&&Y.push({channel:"B",mean:Ve,std:Wr,filename:st,row:Mt,col:Bt})}}Sa(Y),ui(q),f(!0)}catch(ae){console.error("PTC Parse Error",ae),xe("Failed to parse CSV files: "+ae.message)}finally{ke(null)}},AN=()=>{if(!I||!N)return;const V=new Blob([I],{type:"image/x-adobe-dng"}),Y=URL.createObjectURL(V),q=document.createElement("a");q.href=Y;const ae=N.fileName||"image.dng",Me=ae.toLowerCase().endsWith(".dng")?ae:ae.replace(/\.[^/.]+$/,"")+".dng";q.download=Me,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(Y)},TN=()=>{ja(1),Wn([]),Fi([])},_1=()=>{window.open("https://github.com/y-g-jiang/y-g-jiang.github.io/blob/main/drtest.png","_blank")},EN=j.useMemo(()=>Ct?Ct.map((V,Y)=>({...V,refRGB:pv[Y]||[0,0,0]})):[],[Ct]),$N=()=>{Er(1),Gn([]),Zt([])},DN=V=>{if(kr===0)return;const Y=[...on,V];if(Gn(Y),Y.length===4){Er(0);try{const q=bre(Y);Zt(q),N1({useNR:!0,useDeshading:!0})}catch(q){console.error("Standard Chart Gen Error",q),xe("Failed to generate chart ROIs.")}}else Er(q=>q+1)};return e==="prompt"?c.jsx("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-200 dark:bg-[#111] text-black dark:text-gray-200 font-mono",children:c.jsxs("div",{className:"p-8 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] max-w-md w-full text-center",children:[c.jsx("h2",{className:"text-xl font-bold mb-4 uppercase tracking-wider",children:"Session Recovery"}),c.jsx("p",{className:"mb-6 text-sm",children:"A saved workspace was found. Would you like to restore your previous session?"}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx("button",{onClick:gr,className:"px-4 py-2 border-2 border-red-500 text-red-600 dark:text-red-400 font-bold hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-[2px_2px_0px_rgba(239,68,68,0.5)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",children:"Start Fresh"}),c.jsx("button",{onClick:xt,className:"px-4 py-2 bg-cyan-600 text-white font-bold hover:bg-cyan-500 border-2 border-black dark:border-white transition-colors shadow-[4px_4px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.5)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_rgba(0,0,0,1)] dark:active:shadow-[2px_2px_0px_rgba(255,255,255,0.5)]",children:"Restore Session"})]})]})}):e==="restoring"?c.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-300 dark:bg-[#111] text-black dark:text-white font-mono",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-black dark:border-white border-t-transparent animate-spin mb-4"}),c.jsx("h2",{className:"text-xl font-bold",children:r}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-6",children:"Reconstructing analysis environment..."}),c.jsx("button",{onClick:gr,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-bold border-2 border-black dark:border-gray-500 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:shadow-none active:translate-x-1 active:translate-y-1 transition-all text-sm",children:"Cancel Restore"})]}):c.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[c.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:c.jsx(d_,{onLoadImage:wc,onFileSelected:Sp,onGenerateFakeDng:yn,fileName:M?M.name:null,hasGeneratedData:(M==null?void 0:M.name)==="pattern_test.dng",viewMode:R,onSetViewMode:T,patternPeriod:aa,onPatternPeriodChange:gc,fillFactor:Vn,onFillFactorChange:mc,patternPhase:G,onPatternPhaseChange:re,showPatternControls:(M==null?void 0:M.name)==="pattern_test.dng",onOpenAbout:()=>tr(!0),onShowExif:MN,bridgeStatus:v,onBridgeClick:()=>b(!0),isDrLabOpen:St,onToggleDrLab:()=>{qt(!St),ja(0),Wn([]),Fi([]),wr&&Gr(!1),rt&&le(!1),jt&&Ar(!1),Be(0),ft([]),Zt([]),an(!1),Er(0)},isColorLabOpen:rt,onToggleColorLab:()=>{le(!rt),Ee([]),Be(0),ft([]),St&&qt(!1),wr&&Gr(!1),jt&&Ar(!1),Zt([]),an(!1),Er(0)},isFftLabOpen:wr,onToggleFftLab:()=>{Gr(!wr),St&&qt(!1),rt&&le(!1),jt&&Ar(!1),Be(0),ft([]),Zt([]),an(!1),Er(0)},isSfrLabOpen:jt,onToggleSfrLab:()=>{Ar(!jt),St&&qt(!1),rt&&le(!1),wr&&Gr(!1),Be(0),ft([]),Zt([]),an(!1),Er(0)},onGenerateTestPic:_1,onPTCFilesSelected:_N,onDownloadDng:AN,isThreePlane:U,onOpenDatabase:()=>h(!0),isSidebarOpen:me,onToggleSidebar:()=>He(!me),stretchMultiplier:Ye,onStretchMultiplierChange:kt,onStretchDngExport:yc,isRawLoaded:!!D})}),c.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[c.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:vt,children:[Ds&&c.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:yt||"Processing..."})]}),c.jsx(Bte,{isOpen:Je,onClose:()=>tr(!1)}),c.jsx(Fte,{isOpen:Ae,onClose:()=>_e(!1),data:L,fileName:M?M.name:"",warning:Re}),c.jsx(Gte,{isOpen:u,onClose:()=>f(!1),data:Es,blackLevel:Ce,imageHeight:Fe,isBGGR:fe,importedMetadata:$o||void 0,theme:s,initialCameraModel:(L==null?void 0:L.Model)||"",initialISO:(L==null?void 0:L.ISO)||((A1=L==null?void 0:L.ISOSpeedRatings)==null?void 0:A1.toString())||""}),c.jsx(Xte,{isOpen:d,onClose:()=>h(!1),theme:s}),c.jsx(Kte,{isOpen:p,onClose:()=>y(!1),zIndex:200}),c.jsx(ere,{isOpen:pr,onClose:ON,patchStats:EN,initialIsBGGR:fe,sizeRatio:Pt,onSizeChange:NN}),c.jsx(nre,{isOpen:jt,isSfrLabOpen:jt,onClose:()=>{},rawImageData:D,roi:ue?{x:ue.x,y:ue.y,w:ue.width,h:ue.height}:null,zIndex:200,onFocus:$s,displaySettings:K}),c.jsx(ire,{isOpen:m,onClose:()=>x(!1),rawImageData:D,fileName:(M==null?void 0:M.name)||"image.dng",zIndex:300,onFocus:$s}),c.jsx(yo,{isOpen:gt,onClose:()=>sr(!1),onConfirm:_n,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),c.jsx("p",{className:"text-xs text-gray-500"})]})}),c.jsx(yo,{isOpen:g,onClose:()=>b(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),b(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),c.jsx(yo,{isOpen:tt,onClose:()=>Yt(!1),onConfirm:mn,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),c.jsx("div",{onClick:()=>rr(!It),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${It?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${It?"translate-x-6":""}`})})]}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),c.jsx("div",{onClick:()=>wt(!$t),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${$t?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${$t?"translate-x-6":""}`})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[It&&!$t&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!It&&$t&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",It&&$t&&"Mode: Ready-to-Use. Conventional 16-bit development.",!It&&!$t&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!X&&c.jsx(kre,{stats:ue,onClose:()=>{Q(null),H(null)},onMinimize:()=>se(!0),isBGGR:fe,onToggleBGGR:W,onOpenWindow:Of,displaySettings:K,zIndex:te,onFocus:$s,rawImageData:D}),pe.map(V=>{if(V.isMinimized)return null;const Y=S.find(Me=>Me.id===V.sessionId),q=Y==null?void 0:Y.rawImageData;if(!q)return null;const ae={key:V.id,isOpen:!0,onClose:()=>Mn(V.id),onMinimize:()=>bp(V.id),rawImageData:q,roi:V.roi,isBGGR:V.isBGGR,zIndex:V.zIndex,onFocus:()=>wp(V.id),initialPosition:V.initialPosition,initialInternalState:V.internalState,onUpdateState:Me=>kp(V.id,Me),stackFiles:V.stackFiles};return V.type==="histogram"?c.jsx(_te,{...ae}):V.type==="fft"?c.jsx($te,{...ae,onUpdateROI:Me=>bc(V.id,Me)}):V.type==="quant"?c.jsx(Dte,{...ae}):V.type==="pearson"?c.jsx(Rte,{...ae}):null}),Ie&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:c.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[c.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),c.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:Ie}),c.jsx("button",{onClick:()=>xe(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!kc&&!Ds&&!Ie&&c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:c.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),c.jsx(h_,{image:kc,zoom:oe,pan:dt,onPanChange:Nt,onZoomChange:Sc,onSelectionChange:jp,forcedSelection:ce,theme:s,touchAction:Te,isMarking:Zr>0||rt&&Qe>0||kr>0,onPointClick:V=>{Zr>0?kN(V):rt&&Qe>0?PN(V):kr>0&&DN(V)},markers:Ca,gridRects:na,colorLabPoints:Oe,colorLabRects:ut,sfrRects:ct}),kr>0&&on.map((V,Y)=>c.jsxs("div",{className:"absolute pointer-events-none z-30",style:{left:V.x*oe+dt.x,top:V.y*oe+dt.y,transform:"translate(-50%, -50%)"},children:[c.jsx("div",{className:"w-3 h-3 border-2 border-cyan-400 rounded-full flex items-center justify-center bg-transparent",children:c.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})}),c.jsx("div",{className:"text-[10px] font-bold text-cyan-400 absolute top-3 left-1/2 -translate-x-1/2 bg-black/50 px-1 rounded",children:Y+1})]},Y)),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),D&&!Zr&&!rt&&!Tr&&!kr&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",c.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),Tr&&c.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-red-500 bg-black/80 px-4 py-2 rounded-full border border-red-500 animate-pulse shadow-lg",children:"Manual Batch Marking Active (Shift+Drag to add)"}),kr>0&&c.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-emerald-500 bg-black/80 px-4 py-2 rounded-full border border-emerald-500 animate-pulse shadow-lg",children:["Calibration: Click Corner ",kr,"/4"]}),rt&&Qe>0&&c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[Oe.length===0&&"Click Top-Left Corner of Chart",Oe.length===1&&"Click Top-Right Corner",Oe.length===2&&"Click Bottom-Left Corner",Oe.length===3&&"Click Bottom-Right Corner",Oe.length===4&&"Processing..."]}),c.jsx(fA,{zoom:oe,onZoomChange:Sc,onResetView:()=>{qe(1),Nt({x:0,y:0})},touchAction:Te,onToggleTouchAction:wN})]}),me&&c.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:c.jsx(nA,{rawImageData:D,displaySettings:K,onApplyDisplaySettings:di,onSetSelection:bN,exifData:L,isBridgeConnected:v.isConnected,isDrLabOpen:St,drMarkingStep:Zr,onStartMarking:TN,onGenerateTestPic:_1,drRoiSize:Do,onDrRoiSizeChange:hc,drGridRows:Wa,onDrGridRowsChange:fi,drGridCols:On,onDrGridColsChange:pc,onBatchDrLab:jN,hasDrMarkers:na.length>0,isFftLabOpen:wr,onProcessPair:Pe,onProcessBatchDiff:it,onProcessStackFft:nt,onOpenCrossCalc:()=>y(!0),isThreePlane:U,onToggleXTrans:nr,xtransPhase:J,onXTransPhaseChange:Ha,isXTransConverted:N==null?void 0:N.isXTransConverted,roiStats:ue,isBGGR:fe,isColorLabOpen:rt,colorLabMarkingStep:Qe,onStartColorLabMarking:CN,isSfrLabOpen:jt,onOpenDngExport:()=>x(!0),sfrRectCount:ct.length,isBatchMarkingMode:Tr,onToggleBatchMarking:()=>an(!Tr),onClearBatchMarks:()=>Zt([]),onBatchCompute:N1,stdChartStep:kr,onStartStandardCalibration:$N})}),c.jsx(dA,{theme:s,setTheme:l})]})]})},xN=document.getElementById("root");if(!xN)throw new Error("Could not find root element to mount to");const jre=Bg.createRoot(xN);jre.render(c.jsx(z.StrictMode,{children:c.jsx(Sre,{})}));export{m_ as _};
