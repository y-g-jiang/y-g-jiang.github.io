var MN=Object.defineProperty;var AN=(e,t,r)=>t in e?MN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var jn=(e,t,r)=>AN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wk={exports:{}},y0={},kk={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu=Symbol.for("react.element"),EN=Symbol.for("react.portal"),TN=Symbol.for("react.fragment"),$N=Symbol.for("react.strict_mode"),DN=Symbol.for("react.profiler"),RN=Symbol.for("react.provider"),IN=Symbol.for("react.context"),LN=Symbol.for("react.forward_ref"),BN=Symbol.for("react.suspense"),FN=Symbol.for("react.memo"),zN=Symbol.for("react.lazy"),cx=Symbol.iterator;function GN(e){return e===null||typeof e!="object"?null:(e=cx&&e[cx]||e["@@iterator"],typeof e=="function"?e:null)}var Sk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jk=Object.assign,Nk={};function bl(e,t,r){this.props=e,this.context=t,this.refs=Nk,this.updater=r||Sk}bl.prototype.isReactComponent={};bl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _k(){}_k.prototype=bl.prototype;function ay(e,t,r){this.props=e,this.context=t,this.refs=Nk,this.updater=r||Sk}var oy=ay.prototype=new _k;oy.constructor=ay;jk(oy,bl.prototype);oy.isPureReactComponent=!0;var ux=Array.isArray,Pk=Object.prototype.hasOwnProperty,iy={current:null},Ok={key:!0,ref:!0,__self:!0,__source:!0};function Ck(e,t,r){var n,a={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Pk.call(t,n)&&!Ok.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Pu,type:e,key:o,ref:i,props:a,_owner:iy.current}}function UN(e,t){return{$$typeof:Pu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pu}function WN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fx=/\/+/g;function Oh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WN(""+e.key):t.toString(36)}function Of(e,t,r,n,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Pu:case EN:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+Oh(i,0):n,ux(a)?(r="",e!=null&&(r=e.replace(fx,"$&/")+"/"),Of(a,t,r,"",function(u){return u})):a!=null&&(sy(a)&&(a=UN(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(fx,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",ux(e))for(var s=0;s<e.length;s++){o=e[s];var l=n+Oh(o,s);i+=Of(o,t,r,l,a)}else if(l=GN(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=n+Oh(o,s++),i+=Of(o,t,r,l,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ku(e,t,r){if(e==null)return e;var n=[],a=0;return Of(e,n,"","",function(o){return t.call(r,o,a++)}),n}function XN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cn={current:null},Cf={transition:null},HN={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:Cf,ReactCurrentOwner:iy};function Mk(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Ku,forEach:function(e,t,r){Ku(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ku(e,function(){t++}),t},toArray:function(e){return Ku(e,function(t){return t})||[]},only:function(e){if(!sy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=bl;nt.Fragment=TN;nt.Profiler=DN;nt.PureComponent=ay;nt.StrictMode=$N;nt.Suspense=BN;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HN;nt.act=Mk;nt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jk({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=iy.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)Pk.call(t,l)&&!Ok.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Pu,type:e.type,key:a,ref:o,props:n,_owner:i}};nt.createContext=function(e){return e={$$typeof:IN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:RN,_context:e},e.Consumer=e};nt.createElement=Ck;nt.createFactory=function(e){var t=Ck.bind(null,e);return t.type=e,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:LN,render:e}};nt.isValidElement=sy;nt.lazy=function(e){return{$$typeof:zN,_payload:{_status:-1,_result:e},_init:XN}};nt.memo=function(e,t){return{$$typeof:FN,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Cf.transition;Cf.transition={};try{e()}finally{Cf.transition=t}};nt.unstable_act=Mk;nt.useCallback=function(e,t){return Cn.current.useCallback(e,t)};nt.useContext=function(e){return Cn.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return Cn.current.useDeferredValue(e)};nt.useEffect=function(e,t){return Cn.current.useEffect(e,t)};nt.useId=function(){return Cn.current.useId()};nt.useImperativeHandle=function(e,t,r){return Cn.current.useImperativeHandle(e,t,r)};nt.useInsertionEffect=function(e,t){return Cn.current.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Cn.current.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Cn.current.useMemo(e,t)};nt.useReducer=function(e,t,r){return Cn.current.useReducer(e,t,r)};nt.useRef=function(e){return Cn.current.useRef(e)};nt.useState=function(e){return Cn.current.useState(e)};nt.useSyncExternalStore=function(e,t,r){return Cn.current.useSyncExternalStore(e,t,r)};nt.useTransition=function(){return Cn.current.useTransition()};nt.version="18.3.1";kk.exports=nt;var j=kk.exports;const L=Lt(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VN=j,KN=Symbol.for("react.element"),YN=Symbol.for("react.fragment"),qN=Object.prototype.hasOwnProperty,ZN=VN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QN={key:!0,ref:!0,__self:!0,__source:!0};function Ak(e,t,r){var n,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)qN.call(t,n)&&!QN.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:KN,type:e,key:o,ref:i,props:a,_owner:ZN.current}}y0.Fragment=YN;y0.jsx=Ak;y0.jsxs=Ak;wk.exports=y0;var c=wk.exports,Tp={},Ek={exports:{}},ta={},Tk={exports:{}},$k={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,z){var G=R.length;R.push(z);e:for(;0<G;){var ne=G-1>>>1,X=R[ne];if(0<a(X,z))R[ne]=z,R[G]=X,G=ne;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var z=R[0],G=R.pop();if(G!==z){R[0]=G;e:for(var ne=0,X=R.length,F=X>>>1;ne<F;){var re=2*(ne+1)-1,J=R[re],$=re+1,oe=R[$];if(0>a(J,G))$<X&&0>a(oe,J)?(R[ne]=oe,R[$]=G,ne=$):(R[ne]=J,R[re]=G,ne=re);else if($<X&&0>a(oe,G))R[ne]=oe,R[$]=G,ne=$;else break e}}return z}function a(R,z){var G=R.sortIndex-z.sortIndex;return G!==0?G:R.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var l=[],u=[],d=1,f=null,h=3,p=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=R)n(u),z.sortIndex=z.expirationTime,t(l,z);else break;z=r(u)}}function S(R){if(v=!1,y(R),!m)if(r(l)!==null)m=!0,B(b);else{var z=r(u);z!==null&&C(S,z.startTime-R)}}function b(R,z){m=!1,v&&(v=!1,x(N),N=-1),p=!0;var G=h;try{for(y(z),f=r(l);f!==null&&(!(f.expirationTime>z)||R&&!E());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,h=f.priorityLevel;var X=ne(f.expirationTime<=z);z=e.unstable_now(),typeof X=="function"?f.callback=X:f===r(l)&&n(l),y(z)}else n(l);f=r(l)}if(f!==null)var F=!0;else{var re=r(u);re!==null&&C(S,re.startTime-z),F=!1}return F}finally{f=null,h=G,p=!1}}var k=!1,_=null,N=-1,O=5,A=-1;function E(){return!(e.unstable_now()-A<O)}function P(){if(_!==null){var R=e.unstable_now();A=R;var z=!0;try{z=_(!0,R)}finally{z?M():(k=!1,_=null)}}else k=!1}var M;if(typeof g=="function")M=function(){g(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,T=D.port2;D.port1.onmessage=P,M=function(){T.postMessage(null)}}else M=function(){w(P,0)};function B(R){_=R,k||(k=!0,M())}function C(R,z){N=w(function(){R(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,B(b))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var G=h;h=z;try{return R()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=h;h=R;try{return z()}finally{h=G}},e.unstable_scheduleCallback=function(R,z,G){var ne=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ne+G:ne):G=ne,R){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=G+X,R={id:d++,callback:z,priorityLevel:R,startTime:G,expirationTime:X,sortIndex:-1},G>ne?(R.sortIndex=G,t(u,R),r(l)===null&&R===r(u)&&(v?(x(N),N=-1):v=!0,C(S,G-ne))):(R.sortIndex=X,t(l,R),m||p||(m=!0,B(b))),R},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(R){var z=h;return function(){var G=h;h=z;try{return R.apply(this,arguments)}finally{h=G}}}})($k);Tk.exports=$k;var JN=Tk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_=j,ea=JN;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dk=new Set,Oc={};function Ji(e,t){zs(e,t),zs(e+"Capture",t)}function zs(e,t){for(Oc[e]=t,e=0;e<t.length;e++)Dk.add(t[e])}var bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$p=Object.prototype.hasOwnProperty,t_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dx={},hx={};function r_(e){return $p.call(hx,e)?!0:$p.call(dx,e)?!1:t_.test(e)?hx[e]=!0:(dx[e]=!0,!1)}function n_(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function a_(e,t,r,n){if(t===null||typeof t>"u"||n_(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mn(e,t,r,n,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new Mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new Mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new Mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new Mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new Mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){an[e]=new Mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){an[e]=new Mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){an[e]=new Mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){an[e]=new Mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ly=/[\-:]([a-z])/g;function cy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ly,cy);an[t]=new Mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ly,cy);an[t]=new Mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ly,cy);an[t]=new Mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){an[e]=new Mn(e,1,!1,e.toLowerCase(),null,!1,!1)});an.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){an[e]=new Mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function uy(e,t,r,n){var a=an.hasOwnProperty(t)?an[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(a_(t,r,a,n)&&(r=null),n||a===null?r_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Po=e_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yu=Symbol.for("react.element"),ms=Symbol.for("react.portal"),ys=Symbol.for("react.fragment"),fy=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),Rk=Symbol.for("react.provider"),Ik=Symbol.for("react.context"),dy=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Ip=Symbol.for("react.suspense_list"),hy=Symbol.for("react.memo"),Lo=Symbol.for("react.lazy"),Lk=Symbol.for("react.offscreen"),px=Symbol.iterator;function zl(e){return e===null||typeof e!="object"?null:(e=px&&e[px]||e["@@iterator"],typeof e=="function"?e:null)}var fr=Object.assign,Ch;function oc(e){if(Ch===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ch=t&&t[1]||""}return`
`+Ch+e}var Mh=!1;function Ah(e,t){if(!e||Mh)return"";Mh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),o=n.stack.split(`
`),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(i!==1||s!==1)do if(i--,s--,0>s||a[i]!==o[s]){var l=`
`+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=s);break}}}finally{Mh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?oc(e):""}function o_(e){switch(e.tag){case 5:return oc(e.type);case 16:return oc("Lazy");case 13:return oc("Suspense");case 19:return oc("SuspenseList");case 0:case 2:case 15:return e=Ah(e.type,!1),e;case 11:return e=Ah(e.type.render,!1),e;case 1:return e=Ah(e.type,!0),e;default:return""}}function Lp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ys:return"Fragment";case ms:return"Portal";case Dp:return"Profiler";case fy:return"StrictMode";case Rp:return"Suspense";case Ip:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ik:return(e.displayName||"Context")+".Consumer";case Rk:return(e._context.displayName||"Context")+".Provider";case dy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hy:return t=e.displayName||null,t!==null?t:Lp(e.type)||"Memo";case Lo:t=e._payload,e=e._init;try{return Lp(e(t))}catch{}}return null}function i_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lp(t);case 8:return t===fy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ii(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s_(e){var t=Bk(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qu(e){e._valueTracker||(e._valueTracker=s_(e))}function Fk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Bk(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function zf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bp(e,t){var r=t.checked;return fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function gx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ii(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zk(e,t){t=t.checked,t!=null&&uy(e,"checked",t,!1)}function Fp(e,t){zk(e,t);var r=ii(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zp(e,t.type,r):t.hasOwnProperty("defaultValue")&&zp(e,t.type,ii(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function zp(e,t,r){(t!=="number"||zf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ic=Array.isArray;function As(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ii(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Gp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(fe(92));if(ic(r)){if(1<r.length)throw Error(fe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ii(r)}}function Gk(e,t){var r=ii(t.value),n=ii(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function vx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zu,Wk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var fc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l_=["Webkit","ms","Moz","O"];Object.keys(fc).forEach(function(e){l_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fc[t]=fc[e]})});function Xk(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||fc.hasOwnProperty(e)&&fc[e]?(""+t).trim():t+"px"}function Hk(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Xk(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var c_=fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wp(e,t){if(t){if(c_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function Xp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function py(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vp=null,Es=null,Ts=null;function xx(e){if(e=Mu(e)){if(typeof Vp!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=k0(t),Vp(e.stateNode,e.type,t))}}function Vk(e){Es?Ts?Ts.push(e):Ts=[e]:Es=e}function Kk(){if(Es){var e=Es,t=Ts;if(Ts=Es=null,xx(e),t)for(e=0;e<t.length;e++)xx(t[e])}}function Yk(e,t){return e(t)}function qk(){}var Eh=!1;function Zk(e,t,r){if(Eh)return e(t,r);Eh=!0;try{return Yk(e,t,r)}finally{Eh=!1,(Es!==null||Ts!==null)&&(qk(),Kk())}}function Mc(e,t){var r=e.stateNode;if(r===null)return null;var n=k0(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(fe(231,t,typeof r));return r}var Kp=!1;if(bo)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Kp=!1}function u_(e,t,r,n,a,o,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var dc=!1,Gf=null,Uf=!1,Yp=null,f_={onError:function(e){dc=!0,Gf=e}};function d_(e,t,r,n,a,o,i,s,l){dc=!1,Gf=null,u_.apply(f_,arguments)}function h_(e,t,r,n,a,o,i,s,l){if(d_.apply(this,arguments),dc){if(dc){var u=Gf;dc=!1,Gf=null}else throw Error(fe(198));Uf||(Uf=!0,Yp=u)}}function es(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bx(e){if(es(e)!==e)throw Error(fe(188))}function p_(e){var t=e.alternate;if(!t){if(t=es(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return bx(a),e;if(o===n)return bx(a),t;o=o.sibling}throw Error(fe(188))}if(r.return!==n.return)r=a,n=o;else{for(var i=!1,s=a.child;s;){if(s===r){i=!0,r=a,n=o;break}if(s===n){i=!0,n=a,r=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===r){i=!0,r=o,n=a;break}if(s===n){i=!0,n=o,r=a;break}s=s.sibling}if(!i)throw Error(fe(189))}}if(r.alternate!==n)throw Error(fe(190))}if(r.tag!==3)throw Error(fe(188));return r.stateNode.current===r?e:t}function Jk(e){return e=p_(e),e!==null?eS(e):null}function eS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eS(e);if(t!==null)return t;e=e.sibling}return null}var tS=ea.unstable_scheduleCallback,wx=ea.unstable_cancelCallback,g_=ea.unstable_shouldYield,m_=ea.unstable_requestPaint,Sr=ea.unstable_now,y_=ea.unstable_getCurrentPriorityLevel,gy=ea.unstable_ImmediatePriority,rS=ea.unstable_UserBlockingPriority,Wf=ea.unstable_NormalPriority,v_=ea.unstable_LowPriority,nS=ea.unstable_IdlePriority,v0=null,Va=null;function x_(e){if(Va&&typeof Va.onCommitFiberRoot=="function")try{Va.onCommitFiberRoot(v0,e,void 0,(e.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:k_,b_=Math.log,w_=Math.LN2;function k_(e){return e>>>=0,e===0?32:31-(b_(e)/w_|0)|0}var Qu=64,Ju=4194304;function sc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var s=i&~a;s!==0?n=sc(s):(o&=i,o!==0&&(n=sc(o)))}else i=r&~a,i!==0?n=sc(i):o!==0&&(n=sc(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Da(t),a=1<<r,n|=e[r],t&=~a;return n}function S_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j_(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Da(o),s=1<<i,l=a[i];l===-1?(!(s&r)||s&n)&&(a[i]=S_(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aS(){var e=Qu;return Qu<<=1,!(Qu&4194240)&&(Qu=64),e}function Th(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ou(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Da(t),e[t]=r}function N_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Da(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}function my(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Da(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ot=0;function oS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var iS,yy,sS,lS,cS,Zp=!1,ef=[],qo=null,Zo=null,Qo=null,Ac=new Map,Ec=new Map,zo=[],__="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kx(e,t){switch(e){case"focusin":case"focusout":qo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":Ac.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(t.pointerId)}}function Ul(e,t,r,n,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Mu(t),t!==null&&yy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function P_(e,t,r,n,a){switch(t){case"focusin":return qo=Ul(qo,e,t,r,n,a),!0;case"dragenter":return Zo=Ul(Zo,e,t,r,n,a),!0;case"mouseover":return Qo=Ul(Qo,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return Ac.set(o,Ul(Ac.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,Ec.set(o,Ul(Ec.get(o)||null,e,t,r,n,a)),!0}return!1}function uS(e){var t=Oi(e.target);if(t!==null){var r=es(t);if(r!==null){if(t=r.tag,t===13){if(t=Qk(r),t!==null){e.blockedOn=t,cS(e.priority,function(){sS(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Hp=n,r.target.dispatchEvent(n),Hp=null}else return t=Mu(r),t!==null&&yy(t),e.blockedOn=r,!1;t.shift()}return!0}function Sx(e,t,r){Mf(e)&&r.delete(t)}function O_(){Zp=!1,qo!==null&&Mf(qo)&&(qo=null),Zo!==null&&Mf(Zo)&&(Zo=null),Qo!==null&&Mf(Qo)&&(Qo=null),Ac.forEach(Sx),Ec.forEach(Sx)}function Wl(e,t){e.blockedOn===t&&(e.blockedOn=null,Zp||(Zp=!0,ea.unstable_scheduleCallback(ea.unstable_NormalPriority,O_)))}function Tc(e){function t(a){return Wl(a,e)}if(0<ef.length){Wl(ef[0],e);for(var r=1;r<ef.length;r++){var n=ef[r];n.blockedOn===e&&(n.blockedOn=null)}}for(qo!==null&&Wl(qo,e),Zo!==null&&Wl(Zo,e),Qo!==null&&Wl(Qo,e),Ac.forEach(t),Ec.forEach(t),r=0;r<zo.length;r++)n=zo[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<zo.length&&(r=zo[0],r.blockedOn===null);)uS(r),r.blockedOn===null&&zo.shift()}var $s=Po.ReactCurrentBatchConfig,Hf=!0;function C_(e,t,r,n){var a=Ot,o=$s.transition;$s.transition=null;try{Ot=1,vy(e,t,r,n)}finally{Ot=a,$s.transition=o}}function M_(e,t,r,n){var a=Ot,o=$s.transition;$s.transition=null;try{Ot=4,vy(e,t,r,n)}finally{Ot=a,$s.transition=o}}function vy(e,t,r,n){if(Hf){var a=Qp(e,t,r,n);if(a===null)Uh(e,t,n,Vf,r),kx(e,n);else if(P_(a,e,t,r,n))n.stopPropagation();else if(kx(e,n),t&4&&-1<__.indexOf(e)){for(;a!==null;){var o=Mu(a);if(o!==null&&iS(o),o=Qp(e,t,r,n),o===null&&Uh(e,t,n,Vf,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else Uh(e,t,n,null,r)}}var Vf=null;function Qp(e,t,r,n){if(Vf=null,e=py(n),e=Oi(e),e!==null)if(t=es(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qk(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vf=e,null}function fS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y_()){case gy:return 1;case rS:return 4;case Wf:case v_:return 16;case nS:return 536870912;default:return 16}default:return 16}}var Wo=null,xy=null,Af=null;function dS(){if(Af)return Af;var e,t=xy,r=t.length,n,a="value"in Wo?Wo.value:Wo.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return Af=a.slice(e,1<n?1-n:void 0)}function Ef(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tf(){return!0}function jx(){return!1}function ra(e){function t(r,n,a,o,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tf:jx,this.isPropagationStopped=jx,this}return fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tf)},persist:function(){},isPersistent:tf}),t}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},by=ra(wl),Cu=fr({},wl,{view:0,detail:0}),A_=ra(Cu),$h,Dh,Xl,x0=fr({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xl&&(Xl&&e.type==="mousemove"?($h=e.screenX-Xl.screenX,Dh=e.screenY-Xl.screenY):Dh=$h=0,Xl=e),$h)},movementY:function(e){return"movementY"in e?e.movementY:Dh}}),Nx=ra(x0),E_=fr({},x0,{dataTransfer:0}),T_=ra(E_),$_=fr({},Cu,{relatedTarget:0}),Rh=ra($_),D_=fr({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),R_=ra(D_),I_=fr({},wl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L_=ra(I_),B_=fr({},wl,{data:0}),_x=ra(B_),F_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G_[e])?!!t[e]:!1}function wy(){return U_}var W_=fr({},Cu,{key:function(e){if(e.key){var t=F_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ef(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?z_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wy,charCode:function(e){return e.type==="keypress"?Ef(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ef(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),X_=ra(W_),H_=fr({},x0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Px=ra(H_),V_=fr({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wy}),K_=ra(V_),Y_=fr({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),q_=ra(Y_),Z_=fr({},x0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q_=ra(Z_),J_=[9,13,27,32],ky=bo&&"CompositionEvent"in window,hc=null;bo&&"documentMode"in document&&(hc=document.documentMode);var eP=bo&&"TextEvent"in window&&!hc,hS=bo&&(!ky||hc&&8<hc&&11>=hc),Ox=" ",Cx=!1;function pS(e,t){switch(e){case"keyup":return J_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vs=!1;function tP(e,t){switch(e){case"compositionend":return gS(t);case"keypress":return t.which!==32?null:(Cx=!0,Ox);case"textInput":return e=t.data,e===Ox&&Cx?null:e;default:return null}}function rP(e,t){if(vs)return e==="compositionend"||!ky&&pS(e,t)?(e=dS(),Af=xy=Wo=null,vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hS&&t.locale!=="ko"?null:t.data;default:return null}}var nP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nP[e.type]:t==="textarea"}function mS(e,t,r,n){Vk(n),t=Kf(t,"onChange"),0<t.length&&(r=new by("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var pc=null,$c=null;function aP(e){PS(e,0)}function b0(e){var t=ws(e);if(Fk(t))return e}function oP(e,t){if(e==="change")return t}var yS=!1;if(bo){var Ih;if(bo){var Lh="oninput"in document;if(!Lh){var Ax=document.createElement("div");Ax.setAttribute("oninput","return;"),Lh=typeof Ax.oninput=="function"}Ih=Lh}else Ih=!1;yS=Ih&&(!document.documentMode||9<document.documentMode)}function Ex(){pc&&(pc.detachEvent("onpropertychange",vS),$c=pc=null)}function vS(e){if(e.propertyName==="value"&&b0($c)){var t=[];mS(t,$c,e,py(e)),Zk(aP,t)}}function iP(e,t,r){e==="focusin"?(Ex(),pc=t,$c=r,pc.attachEvent("onpropertychange",vS)):e==="focusout"&&Ex()}function sP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return b0($c)}function lP(e,t){if(e==="click")return b0(t)}function cP(e,t){if(e==="input"||e==="change")return b0(t)}function uP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:uP;function Dc(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!$p.call(t,a)||!Ia(e[a],t[a]))return!1}return!0}function Tx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $x(e,t){var r=Tx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tx(r)}}function xS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bS(){for(var e=window,t=zf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=zf(e.document)}return t}function Sy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fP(e){var t=bS(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&xS(r.ownerDocument.documentElement,r)){if(n!==null&&Sy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=$x(r,o);var i=$x(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dP=bo&&"documentMode"in document&&11>=document.documentMode,xs=null,Jp=null,gc=null,eg=!1;function Dx(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;eg||xs==null||xs!==zf(n)||(n=xs,"selectionStart"in n&&Sy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gc&&Dc(gc,n)||(gc=n,n=Kf(Jp,"onSelect"),0<n.length&&(t=new by("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xs)))}function rf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bs={animationend:rf("Animation","AnimationEnd"),animationiteration:rf("Animation","AnimationIteration"),animationstart:rf("Animation","AnimationStart"),transitionend:rf("Transition","TransitionEnd")},Bh={},wS={};bo&&(wS=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function w0(e){if(Bh[e])return Bh[e];if(!bs[e])return e;var t=bs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in wS)return Bh[e]=t[r];return e}var kS=w0("animationend"),SS=w0("animationiteration"),jS=w0("animationstart"),NS=w0("transitionend"),_S=new Map,Rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(e,t){_S.set(e,t),Ji(t,[e])}for(var Fh=0;Fh<Rx.length;Fh++){var zh=Rx[Fh],hP=zh.toLowerCase(),pP=zh[0].toUpperCase()+zh.slice(1);li(hP,"on"+pP)}li(kS,"onAnimationEnd");li(SS,"onAnimationIteration");li(jS,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li(NS,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gP=new Set("cancel close invalid load scroll toggle".split(" ").concat(lc));function Ix(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,h_(n,t,void 0,e),e.currentTarget=null}function PS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var s=n[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;Ix(a,s,u),o=l}else for(i=0;i<n.length;i++){if(s=n[i],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;Ix(a,s,u),o=l}}}if(Uf)throw e=Yp,Uf=!1,Yp=null,e}function Vt(e,t){var r=t[og];r===void 0&&(r=t[og]=new Set);var n=e+"__bubble";r.has(n)||(OS(t,e,2,!1),r.add(n))}function Gh(e,t,r){var n=0;t&&(n|=4),OS(r,e,n,t)}var nf="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[nf]){e[nf]=!0,Dk.forEach(function(r){r!=="selectionchange"&&(gP.has(r)||Gh(r,!1,e),Gh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nf]||(t[nf]=!0,Gh("selectionchange",!1,t))}}function OS(e,t,r,n){switch(fS(t)){case 1:var a=C_;break;case 4:a=M_;break;default:a=vy}r=a.bind(null,t,r,e),a=void 0,!Kp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Uh(e,t,r,n,a){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;i=i.return}for(;s!==null;){if(i=Oi(s),i===null)return;if(l=i.tag,l===5||l===6){n=o=i;continue e}s=s.parentNode}}n=n.return}Zk(function(){var u=o,d=py(r),f=[];e:{var h=_S.get(e);if(h!==void 0){var p=by,m=e;switch(e){case"keypress":if(Ef(r)===0)break e;case"keydown":case"keyup":p=X_;break;case"focusin":m="focus",p=Rh;break;case"focusout":m="blur",p=Rh;break;case"beforeblur":case"afterblur":p=Rh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Nx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=T_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=K_;break;case kS:case SS:case jS:p=R_;break;case NS:p=q_;break;case"scroll":p=A_;break;case"wheel":p=Q_;break;case"copy":case"cut":case"paste":p=L_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Px}var v=(t&4)!==0,w=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var g=u,y;g!==null;){y=g;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,x!==null&&(S=Mc(g,x),S!=null&&v.push(Ic(g,S,y)))),w)break;g=g.return}0<v.length&&(h=new p(h,m,null,r,d),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Hp&&(m=r.relatedTarget||r.fromElement)&&(Oi(m)||m[wo]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?Oi(m):null,m!==null&&(w=es(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Nx,S="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=Px,S="onPointerLeave",x="onPointerEnter",g="pointer"),w=p==null?h:ws(p),y=m==null?h:ws(m),h=new v(S,g+"leave",p,r,d),h.target=w,h.relatedTarget=y,S=null,Oi(d)===u&&(v=new v(x,g+"enter",m,r,d),v.target=y,v.relatedTarget=w,S=v),w=S,p&&m)t:{for(v=p,x=m,g=0,y=v;y;y=us(y))g++;for(y=0,S=x;S;S=us(S))y++;for(;0<g-y;)v=us(v),g--;for(;0<y-g;)x=us(x),y--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=us(v),x=us(x)}v=null}else v=null;p!==null&&Lx(f,h,p,v,!1),m!==null&&w!==null&&Lx(f,w,m,v,!0)}}e:{if(h=u?ws(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var b=oP;else if(Mx(h))if(yS)b=cP;else{b=sP;var k=iP}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=lP);if(b&&(b=b(e,u))){mS(f,b,r,d);break e}k&&k(e,h,u),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&zp(h,"number",h.value)}switch(k=u?ws(u):window,e){case"focusin":(Mx(k)||k.contentEditable==="true")&&(xs=k,Jp=u,gc=null);break;case"focusout":gc=Jp=xs=null;break;case"mousedown":eg=!0;break;case"contextmenu":case"mouseup":case"dragend":eg=!1,Dx(f,r,d);break;case"selectionchange":if(dP)break;case"keydown":case"keyup":Dx(f,r,d)}var _;if(ky)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else vs?pS(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(hS&&r.locale!=="ko"&&(vs||N!=="onCompositionStart"?N==="onCompositionEnd"&&vs&&(_=dS()):(Wo=d,xy="value"in Wo?Wo.value:Wo.textContent,vs=!0)),k=Kf(u,N),0<k.length&&(N=new _x(N,e,null,r,d),f.push({event:N,listeners:k}),_?N.data=_:(_=gS(r),_!==null&&(N.data=_)))),(_=eP?tP(e,r):rP(e,r))&&(u=Kf(u,"onBeforeInput"),0<u.length&&(d=new _x("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}PS(f,t)})}function Ic(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kf(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Mc(e,r),o!=null&&n.unshift(Ic(e,o,a)),o=Mc(e,t),o!=null&&n.push(Ic(e,o,a))),e=e.return}return n}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lx(e,t,r,n,a){for(var o=t._reactName,i=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,a?(l=Mc(r,o),l!=null&&i.unshift(Ic(r,l,s))):a||(l=Mc(r,o),l!=null&&i.push(Ic(r,l,s)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var mP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function Bx(e){return(typeof e=="string"?e:""+e).replace(mP,`
`).replace(yP,"")}function af(e,t,r){if(t=Bx(t),Bx(e)!==t&&r)throw Error(fe(425))}function Yf(){}var tg=null,rg=null;function ng(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ag=typeof setTimeout=="function"?setTimeout:void 0,vP=typeof clearTimeout=="function"?clearTimeout:void 0,Fx=typeof Promise=="function"?Promise:void 0,xP=typeof queueMicrotask=="function"?queueMicrotask:typeof Fx<"u"?function(e){return Fx.resolve(null).then(e).catch(bP)}:ag;function bP(e){setTimeout(function(){throw e})}function Wh(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Tc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Tc(t)}function Jo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var kl=Math.random().toString(36).slice(2),Wa="__reactFiber$"+kl,Lc="__reactProps$"+kl,wo="__reactContainer$"+kl,og="__reactEvents$"+kl,wP="__reactListeners$"+kl,kP="__reactHandles$"+kl;function Oi(e){var t=e[Wa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[wo]||r[Wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=zx(e);e!==null;){if(r=e[Wa])return r;e=zx(e)}return t}e=r,r=e.parentNode}return null}function Mu(e){return e=e[Wa]||e[wo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ws(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function k0(e){return e[Lc]||null}var ig=[],ks=-1;function ci(e){return{current:e}}function qt(e){0>ks||(e.current=ig[ks],ig[ks]=null,ks--)}function Gt(e,t){ks++,ig[ks]=e.current,e.current=t}var si={},pn=ci(si),In=ci(!1),zi=si;function Gs(e,t){var r=e.type.contextTypes;if(!r)return si;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ln(e){return e=e.childContextTypes,e!=null}function qf(){qt(In),qt(pn)}function Gx(e,t,r){if(pn.current!==si)throw Error(fe(168));Gt(pn,t),Gt(In,r)}function CS(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(fe(108,i_(e)||"Unknown",a));return fr({},r,n)}function Zf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||si,zi=pn.current,Gt(pn,e),Gt(In,In.current),!0}function Ux(e,t,r){var n=e.stateNode;if(!n)throw Error(fe(169));r?(e=CS(e,t,zi),n.__reactInternalMemoizedMergedChildContext=e,qt(In),qt(pn),Gt(pn,e)):qt(In),Gt(In,r)}var lo=null,S0=!1,Xh=!1;function MS(e){lo===null?lo=[e]:lo.push(e)}function SP(e){S0=!0,MS(e)}function ui(){if(!Xh&&lo!==null){Xh=!0;var e=0,t=Ot;try{var r=lo;for(Ot=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}lo=null,S0=!1}catch(a){throw lo!==null&&(lo=lo.slice(e+1)),tS(gy,ui),a}finally{Ot=t,Xh=!1}}return null}var Ss=[],js=0,Qf=null,Jf=0,fa=[],da=0,Gi=null,co=1,uo="";function Si(e,t){Ss[js++]=Jf,Ss[js++]=Qf,Qf=e,Jf=t}function AS(e,t,r){fa[da++]=co,fa[da++]=uo,fa[da++]=Gi,Gi=e;var n=co;e=uo;var a=32-Da(n)-1;n&=~(1<<a),r+=1;var o=32-Da(t)+a;if(30<o){var i=a-a%5;o=(n&(1<<i)-1).toString(32),n>>=i,a-=i,co=1<<32-Da(t)+a|r<<a|n,uo=o+e}else co=1<<o|r<<a|n,uo=e}function jy(e){e.return!==null&&(Si(e,1),AS(e,1,0))}function Ny(e){for(;e===Qf;)Qf=Ss[--js],Ss[js]=null,Jf=Ss[--js],Ss[js]=null;for(;e===Gi;)Gi=fa[--da],fa[da]=null,uo=fa[--da],fa[da]=null,co=fa[--da],fa[da]=null}var Jn=null,Qn=null,Jt=!1,Ea=null;function ES(e,t){var r=ha(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Wx(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=Jo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Gi!==null?{id:co,overflow:uo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ha(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jn=e,Qn=null,!0):!1;default:return!1}}function sg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lg(e){if(Jt){var t=Qn;if(t){var r=t;if(!Wx(e,t)){if(sg(e))throw Error(fe(418));t=Jo(r.nextSibling);var n=Jn;t&&Wx(e,t)?ES(n,r):(e.flags=e.flags&-4097|2,Jt=!1,Jn=e)}}else{if(sg(e))throw Error(fe(418));e.flags=e.flags&-4097|2,Jt=!1,Jn=e}}}function Xx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jn=e}function of(e){if(e!==Jn)return!1;if(!Jt)return Xx(e),Jt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ng(e.type,e.memoizedProps)),t&&(t=Qn)){if(sg(e))throw TS(),Error(fe(418));for(;t;)ES(e,t),t=Jo(t.nextSibling)}if(Xx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qn=Jo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qn=null}}else Qn=Jn?Jo(e.stateNode.nextSibling):null;return!0}function TS(){for(var e=Qn;e;)e=Jo(e.nextSibling)}function Us(){Qn=Jn=null,Jt=!1}function _y(e){Ea===null?Ea=[e]:Ea.push(e)}var jP=Po.ReactCurrentBatchConfig;function Hl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(fe(309));var n=r.stateNode}if(!n)throw Error(fe(147,e));var a=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var s=a.refs;i===null?delete s[o]:s[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(fe(284));if(!r._owner)throw Error(fe(290,e))}return e}function sf(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hx(e){var t=e._init;return t(e._payload)}function $S(e){function t(x,g){if(e){var y=x.deletions;y===null?(x.deletions=[g],x.flags|=16):y.push(g)}}function r(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function a(x,g){return x=ni(x,g),x.index=0,x.sibling=null,x}function o(x,g,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<g?(x.flags|=2,g):y):(x.flags|=2,g)):(x.flags|=1048576,g)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function s(x,g,y,S){return g===null||g.tag!==6?(g=Qh(y,x.mode,S),g.return=x,g):(g=a(g,y),g.return=x,g)}function l(x,g,y,S){var b=y.type;return b===ys?d(x,g,y.props.children,S,y.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Lo&&Hx(b)===g.type)?(S=a(g,y.props),S.ref=Hl(x,g,y),S.return=x,S):(S=Bf(y.type,y.key,y.props,null,x.mode,S),S.ref=Hl(x,g,y),S.return=x,S)}function u(x,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Jh(y,x.mode,S),g.return=x,g):(g=a(g,y.children||[]),g.return=x,g)}function d(x,g,y,S,b){return g===null||g.tag!==7?(g=Ii(y,x.mode,S,b),g.return=x,g):(g=a(g,y),g.return=x,g)}function f(x,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Qh(""+g,x.mode,y),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Yu:return y=Bf(g.type,g.key,g.props,null,x.mode,y),y.ref=Hl(x,null,g),y.return=x,y;case ms:return g=Jh(g,x.mode,y),g.return=x,g;case Lo:var S=g._init;return f(x,S(g._payload),y)}if(ic(g)||zl(g))return g=Ii(g,x.mode,y,null),g.return=x,g;sf(x,g)}return null}function h(x,g,y,S){var b=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:s(x,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yu:return y.key===b?l(x,g,y,S):null;case ms:return y.key===b?u(x,g,y,S):null;case Lo:return b=y._init,h(x,g,b(y._payload),S)}if(ic(y)||zl(y))return b!==null?null:d(x,g,y,S,null);sf(x,y)}return null}function p(x,g,y,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(y)||null,s(g,x,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yu:return x=x.get(S.key===null?y:S.key)||null,l(g,x,S,b);case ms:return x=x.get(S.key===null?y:S.key)||null,u(g,x,S,b);case Lo:var k=S._init;return p(x,g,y,k(S._payload),b)}if(ic(S)||zl(S))return x=x.get(y)||null,d(g,x,S,b,null);sf(g,S)}return null}function m(x,g,y,S){for(var b=null,k=null,_=g,N=g=0,O=null;_!==null&&N<y.length;N++){_.index>N?(O=_,_=null):O=_.sibling;var A=h(x,_,y[N],S);if(A===null){_===null&&(_=O);break}e&&_&&A.alternate===null&&t(x,_),g=o(A,g,N),k===null?b=A:k.sibling=A,k=A,_=O}if(N===y.length)return r(x,_),Jt&&Si(x,N),b;if(_===null){for(;N<y.length;N++)_=f(x,y[N],S),_!==null&&(g=o(_,g,N),k===null?b=_:k.sibling=_,k=_);return Jt&&Si(x,N),b}for(_=n(x,_);N<y.length;N++)O=p(_,x,N,y[N],S),O!==null&&(e&&O.alternate!==null&&_.delete(O.key===null?N:O.key),g=o(O,g,N),k===null?b=O:k.sibling=O,k=O);return e&&_.forEach(function(E){return t(x,E)}),Jt&&Si(x,N),b}function v(x,g,y,S){var b=zl(y);if(typeof b!="function")throw Error(fe(150));if(y=b.call(y),y==null)throw Error(fe(151));for(var k=b=null,_=g,N=g=0,O=null,A=y.next();_!==null&&!A.done;N++,A=y.next()){_.index>N?(O=_,_=null):O=_.sibling;var E=h(x,_,A.value,S);if(E===null){_===null&&(_=O);break}e&&_&&E.alternate===null&&t(x,_),g=o(E,g,N),k===null?b=E:k.sibling=E,k=E,_=O}if(A.done)return r(x,_),Jt&&Si(x,N),b;if(_===null){for(;!A.done;N++,A=y.next())A=f(x,A.value,S),A!==null&&(g=o(A,g,N),k===null?b=A:k.sibling=A,k=A);return Jt&&Si(x,N),b}for(_=n(x,_);!A.done;N++,A=y.next())A=p(_,x,N,A.value,S),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?N:A.key),g=o(A,g,N),k===null?b=A:k.sibling=A,k=A);return e&&_.forEach(function(P){return t(x,P)}),Jt&&Si(x,N),b}function w(x,g,y,S){if(typeof y=="object"&&y!==null&&y.type===ys&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Yu:e:{for(var b=y.key,k=g;k!==null;){if(k.key===b){if(b=y.type,b===ys){if(k.tag===7){r(x,k.sibling),g=a(k,y.props.children),g.return=x,x=g;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Lo&&Hx(b)===k.type){r(x,k.sibling),g=a(k,y.props),g.ref=Hl(x,k,y),g.return=x,x=g;break e}r(x,k);break}else t(x,k);k=k.sibling}y.type===ys?(g=Ii(y.props.children,x.mode,S,y.key),g.return=x,x=g):(S=Bf(y.type,y.key,y.props,null,x.mode,S),S.ref=Hl(x,g,y),S.return=x,x=S)}return i(x);case ms:e:{for(k=y.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){r(x,g.sibling),g=a(g,y.children||[]),g.return=x,x=g;break e}else{r(x,g);break}else t(x,g);g=g.sibling}g=Jh(y,x.mode,S),g.return=x,x=g}return i(x);case Lo:return k=y._init,w(x,g,k(y._payload),S)}if(ic(y))return m(x,g,y,S);if(zl(y))return v(x,g,y,S);sf(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(r(x,g.sibling),g=a(g,y),g.return=x,x=g):(r(x,g),g=Qh(y,x.mode,S),g.return=x,x=g),i(x)):r(x,g)}return w}var Ws=$S(!0),DS=$S(!1),ed=ci(null),td=null,Ns=null,Py=null;function Oy(){Py=Ns=td=null}function Cy(e){var t=ed.current;qt(ed),e._currentValue=t}function cg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ds(e,t){td=e,Py=Ns=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dn=!0),e.firstContext=null)}function va(e){var t=e._currentValue;if(Py!==e)if(e={context:e,memoizedValue:t,next:null},Ns===null){if(td===null)throw Error(fe(308));Ns=e,td.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ci=null;function My(e){Ci===null?Ci=[e]:Ci.push(e)}function RS(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,My(t)):(r.next=a.next,a.next=r),t.interleaved=r,ko(e,n)}function ko(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Bo=!1;function Ay(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function go(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ei(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ft&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ko(e,r)}return a=n.interleaved,a===null?(t.next=t,My(n)):(t.next=a.next,a.next=t),n.interleaved=t,ko(e,r)}function Tf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,my(e,r)}}function Vx(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rd(e,t,r,n){var a=e.updateQueue;Bo=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==i&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(o!==null){var f=a.baseState;i=0,d=u=l=null,s=o;do{var h=s.lane,p=s.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,v=s;switch(h=t,p=r,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=fr({},f,h);break e;case 2:Bo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,i|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;h=s,s=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(l=f),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Wi|=i,e.lanes=i,e.memoizedState=f}}function Kx(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(fe(191,a));a.call(n)}}}var Au={},Ka=ci(Au),Bc=ci(Au),Fc=ci(Au);function Mi(e){if(e===Au)throw Error(fe(174));return e}function Ey(e,t){switch(Gt(Fc,t),Gt(Bc,e),Gt(Ka,Au),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Up(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Up(t,e)}qt(Ka),Gt(Ka,t)}function Xs(){qt(Ka),qt(Bc),qt(Fc)}function LS(e){Mi(Fc.current);var t=Mi(Ka.current),r=Up(t,e.type);t!==r&&(Gt(Bc,e),Gt(Ka,r))}function Ty(e){Bc.current===e&&(qt(Ka),qt(Bc))}var cr=ci(0);function nd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hh=[];function $y(){for(var e=0;e<Hh.length;e++)Hh[e]._workInProgressVersionPrimary=null;Hh.length=0}var $f=Po.ReactCurrentDispatcher,Vh=Po.ReactCurrentBatchConfig,Ui=0,ur=null,Ir=null,Vr=null,ad=!1,mc=!1,zc=0,NP=0;function ln(){throw Error(fe(321))}function Dy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ia(e[r],t[r]))return!1;return!0}function Ry(e,t,r,n,a,o){if(Ui=o,ur=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$f.current=e===null||e.memoizedState===null?CP:MP,e=r(n,a),mc){o=0;do{if(mc=!1,zc=0,25<=o)throw Error(fe(301));o+=1,Vr=Ir=null,t.updateQueue=null,$f.current=AP,e=r(n,a)}while(mc)}if($f.current=od,t=Ir!==null&&Ir.next!==null,Ui=0,Vr=Ir=ur=null,ad=!1,t)throw Error(fe(300));return e}function Iy(){var e=zc!==0;return zc=0,e}function Ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?ur.memoizedState=Vr=e:Vr=Vr.next=e,Vr}function xa(){if(Ir===null){var e=ur.alternate;e=e!==null?e.memoizedState:null}else e=Ir.next;var t=Vr===null?ur.memoizedState:Vr.next;if(t!==null)Vr=t,Ir=e;else{if(e===null)throw Error(fe(310));Ir=e,e={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Vr===null?ur.memoizedState=Vr=e:Vr=Vr.next=e}return Vr}function Gc(e,t){return typeof t=="function"?t(e):t}function Kh(e){var t=xa(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var n=Ir,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var s=i=null,l=null,u=o;do{var d=u.lane;if((Ui&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,i=n):l=l.next=f,ur.lanes|=d,Wi|=d}u=u.next}while(u!==null&&u!==o);l===null?i=n:l.next=s,Ia(n,t.memoizedState)||(Dn=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do o=a.lane,ur.lanes|=o,Wi|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Yh(e){var t=xa(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);Ia(o,t.memoizedState)||(Dn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function BS(){}function FS(e,t){var r=ur,n=xa(),a=t(),o=!Ia(n.memoizedState,a);if(o&&(n.memoizedState=a,Dn=!0),n=n.queue,Ly(US.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Vr!==null&&Vr.memoizedState.tag&1){if(r.flags|=2048,Uc(9,GS.bind(null,r,n,a,t),void 0,null),Yr===null)throw Error(fe(349));Ui&30||zS(r,t,a)}return a}function zS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function GS(e,t,r,n){t.value=r,t.getSnapshot=n,WS(t)&&XS(e)}function US(e,t,r){return r(function(){WS(t)&&XS(e)})}function WS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ia(e,r)}catch{return!0}}function XS(e){var t=ko(e,1);t!==null&&Ra(t,e,1,-1)}function Yx(e){var t=Ua();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:e},t.queue=e,e=e.dispatch=OP.bind(null,ur,e),[t.memoizedState,e]}function Uc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function HS(){return xa().memoizedState}function Df(e,t,r,n){var a=Ua();ur.flags|=e,a.memoizedState=Uc(1|t,r,void 0,n===void 0?null:n)}function j0(e,t,r,n){var a=xa();n=n===void 0?null:n;var o=void 0;if(Ir!==null){var i=Ir.memoizedState;if(o=i.destroy,n!==null&&Dy(n,i.deps)){a.memoizedState=Uc(t,r,o,n);return}}ur.flags|=e,a.memoizedState=Uc(1|t,r,o,n)}function qx(e,t){return Df(8390656,8,e,t)}function Ly(e,t){return j0(2048,8,e,t)}function VS(e,t){return j0(4,2,e,t)}function KS(e,t){return j0(4,4,e,t)}function YS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qS(e,t,r){return r=r!=null?r.concat([e]):null,j0(4,4,YS.bind(null,t,e),r)}function By(){}function ZS(e,t){var r=xa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function QS(e,t){var r=xa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function JS(e,t,r){return Ui&21?(Ia(r,t)||(r=aS(),ur.lanes|=r,Wi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dn=!0),e.memoizedState=r)}function _P(e,t){var r=Ot;Ot=r!==0&&4>r?r:4,e(!0);var n=Vh.transition;Vh.transition={};try{e(!1),t()}finally{Ot=r,Vh.transition=n}}function e5(){return xa().memoizedState}function PP(e,t,r){var n=ri(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},t5(e))r5(t,r);else if(r=RS(e,t,r,n),r!==null){var a=On();Ra(r,e,n,a),n5(r,t,n)}}function OP(e,t,r){var n=ri(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(t5(e))r5(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,s=o(i,r);if(a.hasEagerState=!0,a.eagerState=s,Ia(s,i)){var l=t.interleaved;l===null?(a.next=a,My(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=RS(e,t,a,n),r!==null&&(a=On(),Ra(r,e,n,a),n5(r,t,n))}}function t5(e){var t=e.alternate;return e===ur||t!==null&&t===ur}function r5(e,t){mc=ad=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function n5(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,my(e,r)}}var od={readContext:va,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},CP={readContext:va,useCallback:function(e,t){return Ua().memoizedState=[e,t===void 0?null:t],e},useContext:va,useEffect:qx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Df(4194308,4,YS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Df(4194308,4,e,t)},useInsertionEffect:function(e,t){return Df(4,2,e,t)},useMemo:function(e,t){var r=Ua();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ua();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=PP.bind(null,ur,e),[n.memoizedState,e]},useRef:function(e){var t=Ua();return e={current:e},t.memoizedState=e},useState:Yx,useDebugValue:By,useDeferredValue:function(e){return Ua().memoizedState=e},useTransition:function(){var e=Yx(!1),t=e[0];return e=_P.bind(null,e[1]),Ua().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ur,a=Ua();if(Jt){if(r===void 0)throw Error(fe(407));r=r()}else{if(r=t(),Yr===null)throw Error(fe(349));Ui&30||zS(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,qx(US.bind(null,n,o,e),[e]),n.flags|=2048,Uc(9,GS.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Ua(),t=Yr.identifierPrefix;if(Jt){var r=uo,n=co;r=(n&~(1<<32-Da(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=zc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=NP++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},MP={readContext:va,useCallback:ZS,useContext:va,useEffect:Ly,useImperativeHandle:qS,useInsertionEffect:VS,useLayoutEffect:KS,useMemo:QS,useReducer:Kh,useRef:HS,useState:function(){return Kh(Gc)},useDebugValue:By,useDeferredValue:function(e){var t=xa();return JS(t,Ir.memoizedState,e)},useTransition:function(){var e=Kh(Gc)[0],t=xa().memoizedState;return[e,t]},useMutableSource:BS,useSyncExternalStore:FS,useId:e5,unstable_isNewReconciler:!1},AP={readContext:va,useCallback:ZS,useContext:va,useEffect:Ly,useImperativeHandle:qS,useInsertionEffect:VS,useLayoutEffect:KS,useMemo:QS,useReducer:Yh,useRef:HS,useState:function(){return Yh(Gc)},useDebugValue:By,useDeferredValue:function(e){var t=xa();return Ir===null?t.memoizedState=e:JS(t,Ir.memoizedState,e)},useTransition:function(){var e=Yh(Gc)[0],t=xa().memoizedState;return[e,t]},useMutableSource:BS,useSyncExternalStore:FS,useId:e5,unstable_isNewReconciler:!1};function Oa(e,t){if(e&&e.defaultProps){t=fr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ug(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:fr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var N0={isMounted:function(e){return(e=e._reactInternals)?es(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=On(),a=ri(e),o=go(n,a);o.payload=t,r!=null&&(o.callback=r),t=ei(e,o,a),t!==null&&(Ra(t,e,a,n),Tf(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=On(),a=ri(e),o=go(n,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ei(e,o,a),t!==null&&(Ra(t,e,a,n),Tf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=On(),n=ri(e),a=go(r,n);a.tag=2,t!=null&&(a.callback=t),t=ei(e,a,n),t!==null&&(Ra(t,e,n,r),Tf(t,e,n))}};function Zx(e,t,r,n,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!Dc(r,n)||!Dc(a,o):!0}function a5(e,t,r){var n=!1,a=si,o=t.contextType;return typeof o=="object"&&o!==null?o=va(o):(a=Ln(t)?zi:pn.current,n=t.contextTypes,o=(n=n!=null)?Gs(e,a):si),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=N0,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Qx(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&N0.enqueueReplaceState(t,t.state,null)}function fg(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ay(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=va(o):(o=Ln(t)?zi:pn.current,a.context=Gs(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ug(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&N0.enqueueReplaceState(a,a.state,null),rd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Hs(e,t){try{var r="",n=t;do r+=o_(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function qh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function dg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var EP=typeof WeakMap=="function"?WeakMap:Map;function o5(e,t,r){r=go(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){sd||(sd=!0,kg=n),dg(e,t)},r}function i5(e,t,r){r=go(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){dg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){dg(e,t),typeof n!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Jx(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new EP;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=HP.bind(null,e,t,r),t.then(e,e))}function e1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function t1(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=go(-1,1),t.tag=2,ei(r,t,1))),r.lanes|=1),e)}var TP=Po.ReactCurrentOwner,Dn=!1;function _n(e,t,r,n){t.child=e===null?DS(t,null,r,n):Ws(t,e.child,r,n)}function r1(e,t,r,n,a){r=r.render;var o=t.ref;return Ds(t,a),n=Ry(e,t,r,n,o,a),r=Iy(),e!==null&&!Dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,So(e,t,a)):(Jt&&r&&jy(t),t.flags|=1,_n(e,t,n,a),t.child)}function n1(e,t,r,n,a){if(e===null){var o=r.type;return typeof o=="function"&&!Vy(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,s5(e,t,o,n,a)):(e=Bf(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Dc,r(i,n)&&e.ref===t.ref)return So(e,t,a)}return t.flags|=1,e=ni(o,n),e.ref=t.ref,e.return=t,t.child=e}function s5(e,t,r,n,a){if(e!==null){var o=e.memoizedProps;if(Dc(o,n)&&e.ref===t.ref)if(Dn=!1,t.pendingProps=n=o,(e.lanes&a)!==0)e.flags&131072&&(Dn=!0);else return t.lanes=e.lanes,So(e,t,a)}return hg(e,t,r,n,a)}function l5(e,t,r){var n=t.pendingProps,a=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Ps,Yn),Yn|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(Ps,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Gt(Ps,Yn),Yn|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Gt(Ps,Yn),Yn|=n;return _n(e,t,a,r),t.child}function c5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hg(e,t,r,n,a){var o=Ln(r)?zi:pn.current;return o=Gs(t,o),Ds(t,a),r=Ry(e,t,r,n,o,a),n=Iy(),e!==null&&!Dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,So(e,t,a)):(Jt&&n&&jy(t),t.flags|=1,_n(e,t,r,a),t.child)}function a1(e,t,r,n,a){if(Ln(r)){var o=!0;Zf(t)}else o=!1;if(Ds(t,a),t.stateNode===null)Rf(e,t),a5(t,r,n),fg(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=va(u):(u=Ln(r)?zi:pn.current,u=Gs(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==n||l!==u)&&Qx(t,i,n,u),Bo=!1;var h=t.memoizedState;i.state=h,rd(t,n,i,a),l=t.memoizedState,s!==n||h!==l||In.current||Bo?(typeof d=="function"&&(ug(t,r,d,n),l=t.memoizedState),(s=Bo||Zx(t,r,s,n,h,l,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=u,n=s):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,IS(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Oa(t.type,s),i.props=u,f=t.pendingProps,h=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=va(l):(l=Ln(r)?zi:pn.current,l=Gs(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==f||h!==l)&&Qx(t,i,n,l),Bo=!1,h=t.memoizedState,i.state=h,rd(t,n,i,a);var m=t.memoizedState;s!==f||h!==m||In.current||Bo?(typeof p=="function"&&(ug(t,r,p,n),m=t.memoizedState),(u=Bo||Zx(t,r,u,n,h,m,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),i.props=n,i.state=m,i.context=l,n=u):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return pg(e,t,r,n,o,a)}function pg(e,t,r,n,a,o){c5(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&Ux(t,r,!1),So(e,t,o);n=t.stateNode,TP.current=t;var s=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Ws(t,e.child,null,o),t.child=Ws(t,null,s,o)):_n(e,t,s,o),t.memoizedState=n.state,a&&Ux(t,r,!0),t.child}function u5(e){var t=e.stateNode;t.pendingContext?Gx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gx(e,t.context,!1),Ey(e,t.containerInfo)}function o1(e,t,r,n,a){return Us(),_y(a),t.flags|=256,_n(e,t,r,n),t.child}var gg={dehydrated:null,treeContext:null,retryLane:0};function mg(e){return{baseLanes:e,cachePool:null,transitions:null}}function f5(e,t,r){var n=t.pendingProps,a=cr.current,o=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Gt(cr,a&1),e===null)return lg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=O0(i,n,0,null),e=Ii(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=mg(r),t.memoizedState=gg,e):Fy(t,i));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return $P(e,t,i,n,s,a,r);if(o){o=n.fallback,i=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=ni(a,l),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?o=ni(s,o):(o=Ii(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?mg(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=gg,n}return o=e.child,e=o.sibling,n=ni(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Fy(e,t){return t=O0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lf(e,t,r,n){return n!==null&&_y(n),Ws(t,e.child,null,r),e=Fy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $P(e,t,r,n,a,o,i){if(r)return t.flags&256?(t.flags&=-257,n=qh(Error(fe(422))),lf(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=O0({mode:"visible",children:n.children},a,0,null),o=Ii(o,a,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Ws(t,e.child,null,i),t.child.memoizedState=mg(i),t.memoizedState=gg,o);if(!(t.mode&1))return lf(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(fe(419)),n=qh(o,n,void 0),lf(e,t,i,n)}if(s=(i&e.childLanes)!==0,Dn||s){if(n=Yr,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,ko(e,a),Ra(n,e,a,-1))}return Hy(),n=qh(Error(fe(421))),lf(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=VP.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Qn=Jo(a.nextSibling),Jn=t,Jt=!0,Ea=null,e!==null&&(fa[da++]=co,fa[da++]=uo,fa[da++]=Gi,co=e.id,uo=e.overflow,Gi=t),t=Fy(t,n.children),t.flags|=4096,t)}function i1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),cg(e.return,t,r)}function Zh(e,t,r,n,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function d5(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(_n(e,t,n.children,r),n=cr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&i1(e,r,t);else if(e.tag===19)i1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Gt(cr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&nd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Zh(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&nd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Zh(t,!0,r,null,o);break;case"together":Zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Rf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function So(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Wi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,r=ni(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ni(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function DP(e,t,r){switch(t.tag){case 3:u5(t),Us();break;case 5:LS(t);break;case 1:Ln(t.type)&&Zf(t);break;case 4:Ey(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Gt(ed,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Gt(cr,cr.current&1),t.flags|=128,null):r&t.child.childLanes?f5(e,t,r):(Gt(cr,cr.current&1),e=So(e,t,r),e!==null?e.sibling:null);Gt(cr,cr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return d5(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Gt(cr,cr.current),n)break;return null;case 22:case 23:return t.lanes=0,l5(e,t,r)}return So(e,t,r)}var h5,yg,p5,g5;h5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yg=function(){};p5=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Mi(Ka.current);var o=null;switch(r){case"input":a=Bp(e,a),n=Bp(e,n),o=[];break;case"select":a=fr({},a,{value:void 0}),n=fr({},n,{value:void 0}),o=[];break;case"textarea":a=Gp(e,a),n=Gp(e,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Yf)}Wp(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(i in s)s.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Oc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Oc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Vt("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};g5=function(e,t,r,n){r!==n&&(t.flags|=4)};function Vl(e,t){if(!Jt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function RP(e,t,r){var n=t.pendingProps;switch(Ny(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return Ln(t.type)&&qf(),cn(t),null;case 3:return n=t.stateNode,Xs(),qt(In),qt(pn),$y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(of(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ea!==null&&(Ng(Ea),Ea=null))),yg(e,t),cn(t),null;case 5:Ty(t);var a=Mi(Fc.current);if(r=t.type,e!==null&&t.stateNode!=null)p5(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(fe(166));return cn(t),null}if(e=Mi(Ka.current),of(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Wa]=t,n[Lc]=o,e=(t.mode&1)!==0,r){case"dialog":Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":case"embed":Vt("load",n);break;case"video":case"audio":for(a=0;a<lc.length;a++)Vt(lc[a],n);break;case"source":Vt("error",n);break;case"img":case"image":case"link":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"input":gx(n,o),Vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Vt("invalid",n);break;case"textarea":yx(n,o),Vt("invalid",n)}Wp(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];i==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&af(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&af(n.textContent,s,e),a=["children",""+s]):Oc.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&Vt("scroll",n)}switch(r){case"input":qu(n),mx(n,o,!0);break;case"textarea":qu(n),vx(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Yf)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uk(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Wa]=t,e[Lc]=n,h5(e,t,!1,!1),t.stateNode=e;e:{switch(i=Xp(r,n),r){case"dialog":Vt("cancel",e),Vt("close",e),a=n;break;case"iframe":case"object":case"embed":Vt("load",e),a=n;break;case"video":case"audio":for(a=0;a<lc.length;a++)Vt(lc[a],e);a=n;break;case"source":Vt("error",e),a=n;break;case"img":case"image":case"link":Vt("error",e),Vt("load",e),a=n;break;case"details":Vt("toggle",e),a=n;break;case"input":gx(e,n),a=Bp(e,n),Vt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=fr({},n,{value:void 0}),Vt("invalid",e);break;case"textarea":yx(e,n),a=Gp(e,n),Vt("invalid",e);break;default:a=n}Wp(r,a),s=a;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?Hk(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Wk(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Cc(e,l):typeof l=="number"&&Cc(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Oc.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Vt("scroll",e):l!=null&&uy(e,o,l,i))}switch(r){case"input":qu(e),mx(e,n,!1);break;case"textarea":qu(e),vx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ii(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?As(e,!!n.multiple,o,!1):n.defaultValue!=null&&As(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Yf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cn(t),null;case 6:if(e&&t.stateNode!=null)g5(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(fe(166));if(r=Mi(Fc.current),Mi(Ka.current),of(t)){if(n=t.stateNode,r=t.memoizedProps,n[Wa]=t,(o=n.nodeValue!==r)&&(e=Jn,e!==null))switch(e.tag){case 3:af(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&af(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wa]=t,t.stateNode=n}return cn(t),null;case 13:if(qt(cr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Jt&&Qn!==null&&t.mode&1&&!(t.flags&128))TS(),Us(),t.flags|=98560,o=!1;else if(o=of(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(fe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(fe(317));o[Wa]=t}else Us(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),o=!1}else Ea!==null&&(Ng(Ea),Ea=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||cr.current&1?Lr===0&&(Lr=3):Hy())),t.updateQueue!==null&&(t.flags|=4),cn(t),null);case 4:return Xs(),yg(e,t),e===null&&Rc(t.stateNode.containerInfo),cn(t),null;case 10:return Cy(t.type._context),cn(t),null;case 17:return Ln(t.type)&&qf(),cn(t),null;case 19:if(qt(cr),o=t.memoizedState,o===null)return cn(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)Vl(o,!1);else{if(Lr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=nd(e),i!==null){for(t.flags|=128,Vl(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Gt(cr,cr.current&1|2),t.child}e=e.sibling}o.tail!==null&&Sr()>Vs&&(t.flags|=128,n=!0,Vl(o,!1),t.lanes=4194304)}else{if(!n)if(e=nd(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Jt)return cn(t),null}else 2*Sr()-o.renderingStartTime>Vs&&r!==1073741824&&(t.flags|=128,n=!0,Vl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Sr(),t.sibling=null,r=cr.current,Gt(cr,n?r&1|2:r&1),t):(cn(t),null);case 22:case 23:return Xy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Yn&1073741824&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function IP(e,t){switch(Ny(t),t.tag){case 1:return Ln(t.type)&&qf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xs(),qt(In),qt(pn),$y(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ty(t),null;case 13:if(qt(cr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));Us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qt(cr),null;case 4:return Xs(),null;case 10:return Cy(t.type._context),null;case 22:case 23:return Xy(),null;case 24:return null;default:return null}}var cf=!1,dn=!1,LP=typeof WeakSet=="function"?WeakSet:Set,ke=null;function _s(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){gr(e,t,n)}else r.current=null}function vg(e,t,r){try{r()}catch(n){gr(e,t,n)}}var s1=!1;function BP(e,t){if(tg=Hf,e=bS(),Sy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,s=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(s=i+a),f!==o||n!==0&&f.nodeType!==3||(l=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===a&&(s=i),h===o&&++d===n&&(l=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(rg={focusedElem:e,selectionRange:r},Hf=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Oa(t.type,v),w);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(S){gr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return m=s1,s1=!1,m}function yc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&vg(t,r,o)}a=a.next}while(a!==n)}}function _0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function xg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function m5(e){var t=e.alternate;t!==null&&(e.alternate=null,m5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wa],delete t[Lc],delete t[og],delete t[wP],delete t[kP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function y5(e){return e.tag===5||e.tag===3||e.tag===4}function l1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Yf));else if(n!==4&&(e=e.child,e!==null))for(bg(e,t,r),e=e.sibling;e!==null;)bg(e,t,r),e=e.sibling}function wg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(wg(e,t,r),e=e.sibling;e!==null;)wg(e,t,r),e=e.sibling}var en=null,Ca=!1;function Ro(e,t,r){for(r=r.child;r!==null;)v5(e,t,r),r=r.sibling}function v5(e,t,r){if(Va&&typeof Va.onCommitFiberUnmount=="function")try{Va.onCommitFiberUnmount(v0,r)}catch{}switch(r.tag){case 5:dn||_s(r,t);case 6:var n=en,a=Ca;en=null,Ro(e,t,r),en=n,Ca=a,en!==null&&(Ca?(e=en,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):en.removeChild(r.stateNode));break;case 18:en!==null&&(Ca?(e=en,r=r.stateNode,e.nodeType===8?Wh(e.parentNode,r):e.nodeType===1&&Wh(e,r),Tc(e)):Wh(en,r.stateNode));break;case 4:n=en,a=Ca,en=r.stateNode.containerInfo,Ca=!0,Ro(e,t,r),en=n,Ca=a;break;case 0:case 11:case 14:case 15:if(!dn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&vg(r,t,i),a=a.next}while(a!==n)}Ro(e,t,r);break;case 1:if(!dn&&(_s(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){gr(r,t,s)}Ro(e,t,r);break;case 21:Ro(e,t,r);break;case 22:r.mode&1?(dn=(n=dn)||r.memoizedState!==null,Ro(e,t,r),dn=n):Ro(e,t,r);break;default:Ro(e,t,r)}}function c1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new LP),t.forEach(function(n){var a=KP.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function _a(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,i=t,s=i;e:for(;s!==null;){switch(s.tag){case 5:en=s.stateNode,Ca=!1;break e;case 3:en=s.stateNode.containerInfo,Ca=!0;break e;case 4:en=s.stateNode.containerInfo,Ca=!0;break e}s=s.return}if(en===null)throw Error(fe(160));v5(o,i,a),en=null,Ca=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){gr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)x5(t,e),t=t.sibling}function x5(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_a(t,e),Ga(e),n&4){try{yc(3,e,e.return),_0(3,e)}catch(v){gr(e,e.return,v)}try{yc(5,e,e.return)}catch(v){gr(e,e.return,v)}}break;case 1:_a(t,e),Ga(e),n&512&&r!==null&&_s(r,r.return);break;case 5:if(_a(t,e),Ga(e),n&512&&r!==null&&_s(r,r.return),e.flags&32){var a=e.stateNode;try{Cc(a,"")}catch(v){gr(e,e.return,v)}}if(n&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&zk(a,o),Xp(s,i);var u=Xp(s,o);for(i=0;i<l.length;i+=2){var d=l[i],f=l[i+1];d==="style"?Hk(a,f):d==="dangerouslySetInnerHTML"?Wk(a,f):d==="children"?Cc(a,f):uy(a,d,f,u)}switch(s){case"input":Fp(a,o);break;case"textarea":Gk(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?As(a,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?As(a,!!o.multiple,o.defaultValue,!0):As(a,!!o.multiple,o.multiple?[]:"",!1))}a[Lc]=o}catch(v){gr(e,e.return,v)}}break;case 6:if(_a(t,e),Ga(e),n&4){if(e.stateNode===null)throw Error(fe(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){gr(e,e.return,v)}}break;case 3:if(_a(t,e),Ga(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Tc(t.containerInfo)}catch(v){gr(e,e.return,v)}break;case 4:_a(t,e),Ga(e);break;case 13:_a(t,e),Ga(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Uy=Sr())),n&4&&c1(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(dn=(u=dn)||d,_a(t,e),dn=u):_a(t,e),Ga(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ke=e,d=e.child;d!==null;){for(f=ke=d;ke!==null;){switch(h=ke,p=h.child,h.tag){case 0:case 11:case 14:case 15:yc(4,h,h.return);break;case 1:_s(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){gr(n,r,v)}}break;case 5:_s(h,h.return);break;case 22:if(h.memoizedState!==null){f1(f);continue}}p!==null?(p.return=h,ke=p):f1(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Xk("display",i))}catch(v){gr(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){gr(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_a(t,e),Ga(e),n&4&&c1(e);break;case 21:break;default:_a(t,e),Ga(e)}}function Ga(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(y5(r)){var n=r;break e}r=r.return}throw Error(fe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Cc(a,""),n.flags&=-33);var o=l1(e);wg(e,o,a);break;case 3:case 4:var i=n.stateNode.containerInfo,s=l1(e);bg(e,s,i);break;default:throw Error(fe(161))}}catch(l){gr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function FP(e,t,r){ke=e,b5(e)}function b5(e,t,r){for(var n=(e.mode&1)!==0;ke!==null;){var a=ke,o=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||cf;if(!i){var s=a.alternate,l=s!==null&&s.memoizedState!==null||dn;s=cf;var u=dn;if(cf=i,(dn=l)&&!u)for(ke=a;ke!==null;)i=ke,l=i.child,i.tag===22&&i.memoizedState!==null?d1(a):l!==null?(l.return=i,ke=l):d1(a);for(;o!==null;)ke=o,b5(o),o=o.sibling;ke=a,cf=s,dn=u}u1(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,ke=o):u1(e)}}function u1(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dn||_0(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Oa(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Kx(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Kx(t,i,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Tc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}dn||t.flags&512&&xg(t)}catch(h){gr(t,t.return,h)}}if(t===e){ke=null;break}if(r=t.sibling,r!==null){r.return=t.return,ke=r;break}ke=t.return}}function f1(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ke=r;break}ke=t.return}}function d1(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_0(4,t)}catch(l){gr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){gr(t,a,l)}}var o=t.return;try{xg(t)}catch(l){gr(t,o,l)}break;case 5:var i=t.return;try{xg(t)}catch(l){gr(t,i,l)}}}catch(l){gr(t,t.return,l)}if(t===e){ke=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ke=s;break}ke=t.return}}var zP=Math.ceil,id=Po.ReactCurrentDispatcher,zy=Po.ReactCurrentOwner,ma=Po.ReactCurrentBatchConfig,ft=0,Yr=null,Cr=null,nn=0,Yn=0,Ps=ci(0),Lr=0,Wc=null,Wi=0,P0=0,Gy=0,vc=null,$n=null,Uy=0,Vs=1/0,so=null,sd=!1,kg=null,ti=null,uf=!1,Xo=null,ld=0,xc=0,Sg=null,If=-1,Lf=0;function On(){return ft&6?Sr():If!==-1?If:If=Sr()}function ri(e){return e.mode&1?ft&2&&nn!==0?nn&-nn:jP.transition!==null?(Lf===0&&(Lf=aS()),Lf):(e=Ot,e!==0||(e=window.event,e=e===void 0?16:fS(e.type)),e):1}function Ra(e,t,r,n){if(50<xc)throw xc=0,Sg=null,Error(fe(185));Ou(e,r,n),(!(ft&2)||e!==Yr)&&(e===Yr&&(!(ft&2)&&(P0|=r),Lr===4&&Go(e,nn)),Bn(e,n),r===1&&ft===0&&!(t.mode&1)&&(Vs=Sr()+500,S0&&ui()))}function Bn(e,t){var r=e.callbackNode;j_(e,t);var n=Xf(e,e===Yr?nn:0);if(n===0)r!==null&&wx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&wx(r),t===1)e.tag===0?SP(h1.bind(null,e)):MS(h1.bind(null,e)),xP(function(){!(ft&6)&&ui()}),r=null;else{switch(oS(n)){case 1:r=gy;break;case 4:r=rS;break;case 16:r=Wf;break;case 536870912:r=nS;break;default:r=Wf}r=O5(r,w5.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function w5(e,t){if(If=-1,Lf=0,ft&6)throw Error(fe(327));var r=e.callbackNode;if(Rs()&&e.callbackNode!==r)return null;var n=Xf(e,e===Yr?nn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=cd(e,n);else{t=n;var a=ft;ft|=2;var o=S5();(Yr!==e||nn!==t)&&(so=null,Vs=Sr()+500,Ri(e,t));do try{WP();break}catch(s){k5(e,s)}while(!0);Oy(),id.current=o,ft=a,Cr!==null?t=0:(Yr=null,nn=0,t=Lr)}if(t!==0){if(t===2&&(a=qp(e),a!==0&&(n=a,t=jg(e,a))),t===1)throw r=Wc,Ri(e,0),Go(e,n),Bn(e,Sr()),r;if(t===6)Go(e,n);else{if(a=e.current.alternate,!(n&30)&&!GP(a)&&(t=cd(e,n),t===2&&(o=qp(e),o!==0&&(n=o,t=jg(e,o))),t===1))throw r=Wc,Ri(e,0),Go(e,n),Bn(e,Sr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(fe(345));case 2:ji(e,$n,so);break;case 3:if(Go(e,n),(n&130023424)===n&&(t=Uy+500-Sr(),10<t)){if(Xf(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){On(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ag(ji.bind(null,e,$n,so),t);break}ji(e,$n,so);break;case 4:if(Go(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Da(n);o=1<<i,i=t[i],i>a&&(a=i),n&=~o}if(n=a,n=Sr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zP(n/1960))-n,10<n){e.timeoutHandle=ag(ji.bind(null,e,$n,so),n);break}ji(e,$n,so);break;case 5:ji(e,$n,so);break;default:throw Error(fe(329))}}}return Bn(e,Sr()),e.callbackNode===r?w5.bind(null,e):null}function jg(e,t){var r=vc;return e.current.memoizedState.isDehydrated&&(Ri(e,t).flags|=256),e=cd(e,t),e!==2&&(t=$n,$n=r,t!==null&&Ng(t)),e}function Ng(e){$n===null?$n=e:$n.push.apply($n,e)}function GP(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!Ia(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Go(e,t){for(t&=~Gy,t&=~P0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Da(t),n=1<<r;e[r]=-1,t&=~n}}function h1(e){if(ft&6)throw Error(fe(327));Rs();var t=Xf(e,0);if(!(t&1))return Bn(e,Sr()),null;var r=cd(e,t);if(e.tag!==0&&r===2){var n=qp(e);n!==0&&(t=n,r=jg(e,n))}if(r===1)throw r=Wc,Ri(e,0),Go(e,t),Bn(e,Sr()),r;if(r===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ji(e,$n,so),Bn(e,Sr()),null}function Wy(e,t){var r=ft;ft|=1;try{return e(t)}finally{ft=r,ft===0&&(Vs=Sr()+500,S0&&ui())}}function Xi(e){Xo!==null&&Xo.tag===0&&!(ft&6)&&Rs();var t=ft;ft|=1;var r=ma.transition,n=Ot;try{if(ma.transition=null,Ot=1,e)return e()}finally{Ot=n,ma.transition=r,ft=t,!(ft&6)&&ui()}}function Xy(){Yn=Ps.current,qt(Ps)}function Ri(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,vP(r)),Cr!==null)for(r=Cr.return;r!==null;){var n=r;switch(Ny(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&qf();break;case 3:Xs(),qt(In),qt(pn),$y();break;case 5:Ty(n);break;case 4:Xs();break;case 13:qt(cr);break;case 19:qt(cr);break;case 10:Cy(n.type._context);break;case 22:case 23:Xy()}r=r.return}if(Yr=e,Cr=e=ni(e.current,null),nn=Yn=t,Lr=0,Wc=null,Gy=P0=Wi=0,$n=vc=null,Ci!==null){for(t=0;t<Ci.length;t++)if(r=Ci[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,n.next=i}r.pending=n}Ci=null}return e}function k5(e,t){do{var r=Cr;try{if(Oy(),$f.current=od,ad){for(var n=ur.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ad=!1}if(Ui=0,Vr=Ir=ur=null,mc=!1,zc=0,zy.current=null,r===null||r.return===null){Lr=1,Wc=t,Cr=null;break}e:{var o=e,i=r.return,s=r,l=t;if(t=nn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=e1(i);if(p!==null){p.flags&=-257,t1(p,i,s,o,t),p.mode&1&&Jx(o,u,t),t=p,l=u;var m=t.updateQueue;if(m===null){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}else{if(!(t&1)){Jx(o,u,t),Hy();break e}l=Error(fe(426))}}else if(Jt&&s.mode&1){var w=e1(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),t1(w,i,s,o,t),_y(Hs(l,s));break e}}o=l=Hs(l,s),Lr!==4&&(Lr=2),vc===null?vc=[o]:vc.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=o5(o,l,t);Vx(o,x);break e;case 1:s=l;var g=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ti===null||!ti.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=i5(o,s,t);Vx(o,S);break e}}o=o.return}while(o!==null)}N5(r)}catch(b){t=b,Cr===r&&r!==null&&(Cr=r=r.return);continue}break}while(!0)}function S5(){var e=id.current;return id.current=od,e===null?od:e}function Hy(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),Yr===null||!(Wi&268435455)&&!(P0&268435455)||Go(Yr,nn)}function cd(e,t){var r=ft;ft|=2;var n=S5();(Yr!==e||nn!==t)&&(so=null,Ri(e,t));do try{UP();break}catch(a){k5(e,a)}while(!0);if(Oy(),ft=r,id.current=n,Cr!==null)throw Error(fe(261));return Yr=null,nn=0,Lr}function UP(){for(;Cr!==null;)j5(Cr)}function WP(){for(;Cr!==null&&!g_();)j5(Cr)}function j5(e){var t=P5(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?N5(e):Cr=t,zy.current=null}function N5(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=IP(r,t),r!==null){r.flags&=32767,Cr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Lr=6,Cr=null;return}}else if(r=RP(r,t,Yn),r!==null){Cr=r;return}if(t=t.sibling,t!==null){Cr=t;return}Cr=t=e}while(t!==null);Lr===0&&(Lr=5)}function ji(e,t,r){var n=Ot,a=ma.transition;try{ma.transition=null,Ot=1,XP(e,t,r,n)}finally{ma.transition=a,Ot=n}return null}function XP(e,t,r,n){do Rs();while(Xo!==null);if(ft&6)throw Error(fe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(N_(e,o),e===Yr&&(Cr=Yr=null,nn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||uf||(uf=!0,O5(Wf,function(){return Rs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=ma.transition,ma.transition=null;var i=Ot;Ot=1;var s=ft;ft|=4,zy.current=null,BP(e,r),x5(r,e),fP(rg),Hf=!!tg,rg=tg=null,e.current=r,FP(r),m_(),ft=s,Ot=i,ma.transition=o}else e.current=r;if(uf&&(uf=!1,Xo=e,ld=a),o=e.pendingLanes,o===0&&(ti=null),x_(r.stateNode),Bn(e,Sr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(sd)throw sd=!1,e=kg,kg=null,e;return ld&1&&e.tag!==0&&Rs(),o=e.pendingLanes,o&1?e===Sg?xc++:(xc=0,Sg=e):xc=0,ui(),null}function Rs(){if(Xo!==null){var e=oS(ld),t=ma.transition,r=Ot;try{if(ma.transition=null,Ot=16>e?16:e,Xo===null)var n=!1;else{if(e=Xo,Xo=null,ld=0,ft&6)throw Error(fe(331));var a=ft;for(ft|=4,ke=e.current;ke!==null;){var o=ke,i=o.child;if(ke.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ke=u;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:yc(8,d,o)}var f=d.child;if(f!==null)f.return=d,ke=f;else for(;ke!==null;){d=ke;var h=d.sibling,p=d.return;if(m5(d),d===u){ke=null;break}if(h!==null){h.return=p,ke=h;break}ke=p}}}var m=o.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}ke=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,ke=i;else e:for(;ke!==null;){if(o=ke,o.flags&2048)switch(o.tag){case 0:case 11:case 15:yc(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ke=x;break e}ke=o.return}}var g=e.current;for(ke=g;ke!==null;){i=ke;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,ke=y;else e:for(i=g;ke!==null;){if(s=ke,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:_0(9,s)}}catch(b){gr(s,s.return,b)}if(s===i){ke=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,ke=S;break e}ke=s.return}}if(ft=a,ui(),Va&&typeof Va.onPostCommitFiberRoot=="function")try{Va.onPostCommitFiberRoot(v0,e)}catch{}n=!0}return n}finally{Ot=r,ma.transition=t}}return!1}function p1(e,t,r){t=Hs(r,t),t=o5(e,t,1),e=ei(e,t,1),t=On(),e!==null&&(Ou(e,1,t),Bn(e,t))}function gr(e,t,r){if(e.tag===3)p1(e,e,r);else for(;t!==null;){if(t.tag===3){p1(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ti===null||!ti.has(n))){e=Hs(r,e),e=i5(t,e,1),t=ei(t,e,1),e=On(),t!==null&&(Ou(t,1,e),Bn(t,e));break}}t=t.return}}function HP(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=On(),e.pingedLanes|=e.suspendedLanes&r,Yr===e&&(nn&r)===r&&(Lr===4||Lr===3&&(nn&130023424)===nn&&500>Sr()-Uy?Ri(e,0):Gy|=r),Bn(e,t)}function _5(e,t){t===0&&(e.mode&1?(t=Ju,Ju<<=1,!(Ju&130023424)&&(Ju=4194304)):t=1);var r=On();e=ko(e,t),e!==null&&(Ou(e,t,r),Bn(e,r))}function VP(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),_5(e,r)}function KP(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(fe(314))}n!==null&&n.delete(t),_5(e,r)}var P5;P5=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||In.current)Dn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Dn=!1,DP(e,t,r);Dn=!!(e.flags&131072)}else Dn=!1,Jt&&t.flags&1048576&&AS(t,Jf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Rf(e,t),e=t.pendingProps;var a=Gs(t,pn.current);Ds(t,r),a=Ry(null,t,n,e,a,r);var o=Iy();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ln(n)?(o=!0,Zf(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ay(t),a.updater=N0,t.stateNode=a,a._reactInternals=t,fg(t,n,e,r),t=pg(null,t,n,!0,o,r)):(t.tag=0,Jt&&o&&jy(t),_n(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Rf(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=qP(n),e=Oa(n,e),a){case 0:t=hg(null,t,n,e,r);break e;case 1:t=a1(null,t,n,e,r);break e;case 11:t=r1(null,t,n,e,r);break e;case 14:t=n1(null,t,n,Oa(n.type,e),r);break e}throw Error(fe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Oa(n,a),hg(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Oa(n,a),a1(e,t,n,a,r);case 3:e:{if(u5(t),e===null)throw Error(fe(387));n=t.pendingProps,o=t.memoizedState,a=o.element,IS(e,t),rd(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Hs(Error(fe(423)),t),t=o1(e,t,n,r,a);break e}else if(n!==a){a=Hs(Error(fe(424)),t),t=o1(e,t,n,r,a);break e}else for(Qn=Jo(t.stateNode.containerInfo.firstChild),Jn=t,Jt=!0,Ea=null,r=DS(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Us(),n===a){t=So(e,t,r);break e}_n(e,t,n,r)}t=t.child}return t;case 5:return LS(t),e===null&&lg(t),n=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,ng(n,a)?i=null:o!==null&&ng(n,o)&&(t.flags|=32),c5(e,t),_n(e,t,i,r),t.child;case 6:return e===null&&lg(t),null;case 13:return f5(e,t,r);case 4:return Ey(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ws(t,null,n,r):_n(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Oa(n,a),r1(e,t,n,a,r);case 7:return _n(e,t,t.pendingProps,r),t.child;case 8:return _n(e,t,t.pendingProps.children,r),t.child;case 12:return _n(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,Gt(ed,n._currentValue),n._currentValue=i,o!==null)if(Ia(o.value,i)){if(o.children===a.children&&!In.current){t=So(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){i=o.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=go(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),cg(o.return,r,t),s.lanes|=r;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(fe(341));i.lanes|=r,s=i.alternate,s!==null&&(s.lanes|=r),cg(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}_n(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ds(t,r),a=va(a),n=n(a),t.flags|=1,_n(e,t,n,r),t.child;case 14:return n=t.type,a=Oa(n,t.pendingProps),a=Oa(n.type,a),n1(e,t,n,a,r);case 15:return s5(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Oa(n,a),Rf(e,t),t.tag=1,Ln(n)?(e=!0,Zf(t)):e=!1,Ds(t,r),a5(t,n,a),fg(t,n,a,r),pg(null,t,n,!0,e,r);case 19:return d5(e,t,r);case 22:return l5(e,t,r)}throw Error(fe(156,t.tag))};function O5(e,t){return tS(e,t)}function YP(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(e,t,r,n){return new YP(e,t,r,n)}function Vy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qP(e){if(typeof e=="function")return Vy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dy)return 11;if(e===hy)return 14}return 2}function ni(e,t){var r=e.alternate;return r===null?(r=ha(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bf(e,t,r,n,a,o){var i=2;if(n=e,typeof e=="function")Vy(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ys:return Ii(r.children,a,o,t);case fy:i=8,a|=8;break;case Dp:return e=ha(12,r,t,a|2),e.elementType=Dp,e.lanes=o,e;case Rp:return e=ha(13,r,t,a),e.elementType=Rp,e.lanes=o,e;case Ip:return e=ha(19,r,t,a),e.elementType=Ip,e.lanes=o,e;case Lk:return O0(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rk:i=10;break e;case Ik:i=9;break e;case dy:i=11;break e;case hy:i=14;break e;case Lo:i=16,n=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=ha(i,r,t,a),t.elementType=e,t.type=n,t.lanes=o,t}function Ii(e,t,r,n){return e=ha(7,e,n,t),e.lanes=r,e}function O0(e,t,r,n){return e=ha(22,e,n,t),e.elementType=Lk,e.lanes=r,e.stateNode={isHidden:!1},e}function Qh(e,t,r){return e=ha(6,e,null,t),e.lanes=r,e}function Jh(e,t,r){return t=ha(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZP(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Th(0),this.expirationTimes=Th(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Th(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ky(e,t,r,n,a,o,i,s,l){return e=new ZP(e,t,r,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ha(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ay(o),e}function QP(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ms,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function C5(e){if(!e)return si;e=e._reactInternals;e:{if(es(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ln(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var r=e.type;if(Ln(r))return CS(e,r,t)}return t}function M5(e,t,r,n,a,o,i,s,l){return e=Ky(r,n,!0,e,a,o,i,s,l),e.context=C5(null),r=e.current,n=On(),a=ri(r),o=go(n,a),o.callback=t??null,ei(r,o,a),e.current.lanes=a,Ou(e,a,n),Bn(e,n),e}function C0(e,t,r,n){var a=t.current,o=On(),i=ri(a);return r=C5(r),t.context===null?t.context=r:t.pendingContext=r,t=go(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ei(a,t,i),e!==null&&(Ra(e,a,i,o),Tf(e,a,i)),i}function ud(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function g1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Yy(e,t){g1(e,t),(e=e.alternate)&&g1(e,t)}function JP(){return null}var A5=typeof reportError=="function"?reportError:function(e){console.error(e)};function qy(e){this._internalRoot=e}M0.prototype.render=qy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));C0(e,t,null,null)};M0.prototype.unmount=qy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xi(function(){C0(null,e,null,null)}),t[wo]=null}};function M0(e){this._internalRoot=e}M0.prototype.unstable_scheduleHydration=function(e){if(e){var t=lS();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zo.length&&t!==0&&t<zo[r].priority;r++);zo.splice(r,0,e),r===0&&uS(e)}};function Zy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function A0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function m1(){}function eO(e,t,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var u=ud(i);o.call(u)}}var i=M5(t,n,e,0,null,!1,!1,"",m1);return e._reactRootContainer=i,e[wo]=i.current,Rc(e.nodeType===8?e.parentNode:e),Xi(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=ud(l);s.call(u)}}var l=Ky(e,0,!1,null,null,!1,!1,"",m1);return e._reactRootContainer=l,e[wo]=l.current,Rc(e.nodeType===8?e.parentNode:e),Xi(function(){C0(t,l,r,n)}),l}function E0(e,t,r,n,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var s=a;a=function(){var l=ud(i);s.call(l)}}C0(t,i,e,a)}else i=eO(r,t,e,a,n);return ud(i)}iS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=sc(t.pendingLanes);r!==0&&(my(t,r|1),Bn(t,Sr()),!(ft&6)&&(Vs=Sr()+500,ui()))}break;case 13:Xi(function(){var n=ko(e,1);if(n!==null){var a=On();Ra(n,e,1,a)}}),Yy(e,1)}};yy=function(e){if(e.tag===13){var t=ko(e,134217728);if(t!==null){var r=On();Ra(t,e,134217728,r)}Yy(e,134217728)}};sS=function(e){if(e.tag===13){var t=ri(e),r=ko(e,t);if(r!==null){var n=On();Ra(r,e,t,n)}Yy(e,t)}};lS=function(){return Ot};cS=function(e,t){var r=Ot;try{return Ot=e,t()}finally{Ot=r}};Vp=function(e,t,r){switch(t){case"input":if(Fp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=k0(n);if(!a)throw Error(fe(90));Fk(n),Fp(n,a)}}}break;case"textarea":Gk(e,r);break;case"select":t=r.value,t!=null&&As(e,!!r.multiple,t,!1)}};Yk=Wy;qk=Xi;var tO={usingClientEntryPoint:!1,Events:[Mu,ws,k0,Vk,Kk,Wy]},Kl={findFiberByHostInstance:Oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rO={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jk(e),e===null?null:e.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||JP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{v0=ff.inject(rO),Va=ff}catch{}}ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tO;ta.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zy(t))throw Error(fe(200));return QP(e,t,null,r)};ta.createRoot=function(e,t){if(!Zy(e))throw Error(fe(299));var r=!1,n="",a=A5;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ky(e,1,!1,null,null,r,!1,n,a),e[wo]=t.current,Rc(e.nodeType===8?e.parentNode:e),new qy(t)};ta.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=Jk(t),e=e===null?null:e.stateNode,e};ta.flushSync=function(e){return Xi(e)};ta.hydrate=function(e,t,r){if(!A0(t))throw Error(fe(200));return E0(null,e,t,!0,r)};ta.hydrateRoot=function(e,t,r){if(!Zy(e))throw Error(fe(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",i=A5;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=M5(t,null,e,1,r??null,a,!1,o,i),e[wo]=t.current,Rc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new M0(t)};ta.render=function(e,t,r){if(!A0(t))throw Error(fe(200));return E0(null,e,t,!1,r)};ta.unmountComponentAtNode=function(e){if(!A0(e))throw Error(fe(40));return e._reactRootContainer?(Xi(function(){E0(null,null,e,!1,function(){e._reactRootContainer=null,e[wo]=null})}),!0):!1};ta.unstable_batchedUpdates=Wy;ta.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!A0(r))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return E0(e,t,r,!1,n)};ta.version="18.3.1-next-f1338f8080-20240426";function E5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E5)}catch(e){console.error(e)}}E5(),Ek.exports=ta;var nO=Ek.exports,y1=nO;Tp.createRoot=y1.createRoot,Tp.hydrateRoot=y1.hydrateRoot;const ai=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:o="I know the risk and insist to continue",cancelText:i="Cancel"})=>e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[c.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:i}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:o})]})]})}):null,aO=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:o,patternPeriod:i,onPatternPeriodChange:s,fillFactor:l,onFillFactorChange:u,patternPhase:d,onPatternPhaseChange:f,showPatternControls:h,onOpenAbout:p,onShowExif:m,bridgeStatus:v,onBridgeClick:w,isDrLabOpen:x,onToggleDrLab:g,isColorLabOpen:y,onToggleColorLab:S,isFftLabOpen:b,onToggleFftLab:k,isSfrLabOpen:_,onToggleSfrLab:N,onGenerateTestPic:O,onPTCFilesSelected:A,onDownloadDng:E,isThreePlane:P,onOpenDatabase:M,isSidebarOpen:D,onToggleSidebar:T})=>{const B=j.useRef(null),C=j.useRef(null),[R,z]=j.useState(!1),[G,ne]=j.useState(!1),[X,F]=j.useState(!1),[re,J]=j.useState(!1),[$,oe]=j.useState("direct"),q=j.useRef(null),H=j.useRef(null);j.useEffect(()=>{const Q=he=>{q.current&&!q.current.contains(he.target)&&F(!1),H.current&&!H.current.contains(he.target)&&J(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const le=Q=>{var he;F(!1),Q==="direct"?(oe("direct"),z(!0)):!v.isConnected||!v.hasDngConverter?ne(!0):(oe("convert"),(he=B.current)==null||he.click())},ce=()=>{var Q;z(!1),(Q=B.current)==null||Q.click()},Z=Q=>{var ve;const he=(ve=Q.target.files)==null?void 0:ve[0];he&&e(he,$),Q.target.value=""},_e=Q=>{Q.target.files&&Q.target.files.length>0&&A(Q.target.files),Q.target.value=""},be=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return c.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[c.jsx(ai,{isOpen:R,onClose:()=>z(!1),onConfirm:ce,title:"Format Compatibility Warning",confirmText:"Continue",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200 text-base",children:"Adobe DNG ConverterDNG"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Only 4-channel DNG files output by Adobe DNG Converter are fully guaranteed to be supported."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsx(ai,{isOpen:G,onClose:()=>ne(!1),onConfirm:()=>ne(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),P&&c.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:v.isConnected?void 0:w,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${v.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:v.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[c.jsx("span",{className:`w-2 h-2 ${v.isConnected?"bg-emerald-600":"bg-pink-600"}`}),v.isConnected?`JiangBridge Ready ${v.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),x&&c.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),y&&c.jsxs("button",{onClick:S,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),b&&c.jsxs("button",{onClick:k,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),_&&c.jsxs("button",{onClick:N,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&c.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[c.jsx("button",{onClick:()=>o("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),c.jsx("button",{onClick:()=>o("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),c.jsx("button",{onClick:()=>o("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),be&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:i,onChange:Q=>s(parseFloat(Q.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:i,onChange:Q=>{const he=parseFloat(Q.target.value);isNaN(he)||s(he)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:d,onChange:Q=>f(parseFloat(Q.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:d,onChange:Q=>{const he=parseFloat(Q.target.value);isNaN(he)||f(he)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:l*100,onChange:Q=>u(parseInt(Q.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(l*100),onChange:Q=>{const he=parseInt(Q.target.value);isNaN(he)||u(Math.min(100,Math.max(1,he))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),c.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),c.jsxs("button",{onClick:E,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[c.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),c.jsx("input",{type:"file",ref:B,onChange:Z,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("input",{type:"file",ref:C,onChange:_e,className:"hidden",multiple:!0,accept:".csv"}),c.jsxs("div",{className:"relative inline-block text-left",ref:H,children:[c.jsxs("button",{onClick:()=>J(!re),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${re?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),re&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{J(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:"Generate Pattern DNG"})]}),c.jsxs("button",{onClick:()=>{J(!1),x||g(),b&&k(),y&&S&&S(),_&&N&&N()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${x?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsxs("span",{children:["DR Lab ",x?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{J(!1),S&&!y&&S(),x&&g(),b&&k(),_&&N&&N()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${y?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:["Color Lab ",y?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{J(!1),N&&!_&&N(),x&&g(),b&&k(),y&&S&&S()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${_?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsxs("span",{children:["SFR Lab ",_?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{J(!1),b||k(),x&&g(),y&&S&&S(),_&&N&&N()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${b?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsxs("span",{children:["FFT Lab ",b?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{var Q;J(!1),(Q=C.current)==null||Q.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),c.jsx("span",{children:"Generate PTC & TargetSNR"})]})]})})]}),c.jsxs("div",{className:"relative inline-block text-left",ref:q,children:[c.jsxs("button",{onClick:()=>F(!X),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${X?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),X&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>le("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.jsx("span",{children:"Load Image (Direct)"})]}),c.jsxs("button",{onClick:()=>le("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&m&&c.jsxs("button",{onClick:m,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),c.jsx("button",{onClick:p,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),c.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),c.jsxs("button",{onClick:T,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${D?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:D?"Hide Control Panel":"Show Control Panel",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:D?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),c.jsx("span",{className:"hidden sm:inline",children:D?"Hide Panel":"Show Panel"})]})]})]})},oO=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:o,forcedSelection:i,theme:s,touchAction:l="pan",isMarking:u=!1,onPointClick:d,markers:f=[],gridRects:h=[],colorLabPoints:p=[],colorLabRects:m=[]})=>{var re;const v=j.useRef(null),w=j.useRef(document.createElement("canvas")),[x,g]=j.useState(!1),[y,S]=j.useState({x:0,y:0}),b=j.useRef(null),k=j.useRef(null),_=j.useRef(null),[N,O]=j.useState(!1),[A,E]=j.useState(null),[P,M]=j.useState(null);j.useEffect(()=>{i!==void 0&&M(i)},[i]);const D=j.useCallback(()=>{const J=v.current,$=J==null?void 0:J.getContext("2d");return{canvas:J,ctx:$}},[]);j.useEffect(()=>{const J=w.current,$=J.getContext("2d");if(!e||!$)return;let oe=0,q=0;e instanceof ImageData?(oe=e.width,q=e.height):e instanceof HTMLImageElement&&(oe=e.naturalWidth,q=e.naturalHeight),!(oe===0||q===0)&&((J.width!==oe||J.height!==q)&&(J.width=oe,J.height=q),e instanceof ImageData?$.putImageData(e,0,0):($.clearRect(0,0,oe,q),$.drawImage(e,0,0)))},[e]);const T=j.useCallback(()=>{const{canvas:J,ctx:$}=D();if(!(!J||!$||!e)){if($.setTransform(1,0,0,1,0,0),$.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",$.fillRect(0,0,J.width,J.height),$.setTransform(t,0,0,t,r.x,r.y),w.current.width>0&&($.imageSmoothingEnabled=!1,$.drawImage(w.current,0,0)),P){$.strokeStyle="#06b6d4",$.lineWidth=1/t,$.fillStyle="rgba(6, 182, 212, 0.2)",$.beginPath(),$.rect(P.x,P.y,P.w,P.h),$.fill(),$.stroke(),$.save(),$.fillStyle="#fff";const oe=Math.max(10,14/t);$.font=`${oe}px monospace`,$.shadowColor="rgba(0,0,0,0.8)",$.shadowBlur=4,$.shadowOffsetX=1,$.shadowOffsetY=1,$.fillText(`${Math.round(P.w)}x${Math.round(P.h)}`,P.x,P.y-5/t),$.restore()}if(h&&h.length>0){$.save(),$.strokeStyle="#f59e0b",$.lineWidth=1/t,$.globalAlpha=.8,$.beginPath(),h.forEach(H=>{$.rect(H.x,H.y,H.w,H.h)}),$.stroke();const oe=h[0];$.fillStyle="#f59e0b";const q=Math.max(10,12/t);$.font=`${q}px monospace`,$.fillText(`${oe.w}x${oe.h}`,oe.x,oe.y-4/t),$.restore()}if(f&&f.length>0){$.save();const oe=6/t,q=Math.max(12,16/t);$.font=`bold ${q}px sans-serif`,$.textAlign="center",$.textBaseline="middle",f.forEach((H,le)=>{$.beginPath(),$.arc(H.x,H.y,oe,0,2*Math.PI),$.fillStyle="white",$.fill(),$.strokeStyle="#4338ca",$.lineWidth=2/t,$.stroke(),$.fillStyle="#4338ca",$.fillText((le+1).toString(),H.x,H.y-12/t)}),$.restore()}if(p&&p.length>0){$.save();const oe=5/t,q=Math.max(10,14/t);$.font=`bold ${q}px sans-serif`,$.textAlign="center",$.textBaseline="middle",p.forEach((H,le)=>{$.fillStyle="yellow",$.fillRect(H.x-oe,H.y-oe,oe*2,oe*2),$.strokeStyle="black",$.lineWidth=1/t,$.strokeRect(H.x-oe,H.y-oe,oe*2,oe*2),$.fillStyle="yellow",$.shadowColor="black",$.shadowBlur=2,$.fillText((le+1).toString(),H.x,H.y-10/t)}),$.restore()}if(m&&m.length>0){if($.save(),$.strokeStyle="yellow",$.lineWidth=1/t,$.globalAlpha=.9,$.beginPath(),m.forEach(oe=>{$.rect(oe.x,oe.y,oe.w,oe.h)}),$.stroke(),m[0]){const oe=m[0];$.fillStyle="yellow",$.shadowColor="black",$.shadowBlur=3;const q=Math.max(10,12/t);$.font=`${q}px monospace`,$.fillText(`${Math.round(oe.w)}x${Math.round(oe.h)}`,oe.x,oe.y-4/t)}$.restore()}}},[D,e,t,r,s,P,f,h,p,m]);j.useEffect(()=>{const{canvas:J}=D();if(!J)return;const $=new ResizeObserver(()=>{J.width=J.clientWidth,J.height=J.clientHeight,T()});return $.observe(J),()=>$.disconnect()},[D,T]),j.useEffect(()=>{T()},[T,e,r,t,s,P,f,h,p,m]);const B=J=>{const{canvas:$}=D();if(!$)return{x:0,y:0};const oe=$.getBoundingClientRect();return{x:J.clientX-oe.left,y:J.clientY-oe.top}},C=(J,$)=>({x:(J-r.x)/t,y:($-r.y)/t}),R=J=>{J.preventDefault();const $=B(J);if(u){const oe=C($.x,$.y);d&&d(oe);return}if(J.shiftKey||l==="select"){O(!0);const oe=C($.x,$.y),q={x:Math.floor(oe.x),y:Math.floor(oe.y)};E(q),M(null),o&&o(null)}else g(!0),S({x:$.x-r.x,y:$.y-r.y})},z=J=>{const $=B(J);if(N&&A){const oe=C($.x,$.y),q=Math.floor(oe.x),H=Math.floor(oe.y),le=Math.min(A.x,q),ce=Math.min(A.y,H),Z=Math.max(A.x,q),_e=Math.max(A.y,H),be=Z-le+1,Q=_e-ce+1;M({x:le,y:ce,w:be,h:Q})}else x&&n({x:$.x-y.x,y:$.y-y.y})},G=()=>{N&&(O(!1),P&&o&&P.w>0&&P.h>0&&o(P)),g(!1)},ne=J=>{var $;if(J.touches.length===1){const oe=J.touches[0],q=($=v.current)==null?void 0:$.getBoundingClientRect();if(!q)return;const H=oe.clientX-q.left,le=oe.clientY-q.top;if(u){const ce=C(H,le);d&&d(ce);return}if(l==="select"){const ce=C(H,le),Z={x:Math.floor(ce.x),y:Math.floor(ce.y)};E(Z),O(!0),M(null),o&&o(null)}else _.current={x:H,y:le},S({x:H-r.x,y:le-r.y}),g(!0)}else if(J.touches.length===2){const oe=Math.hypot(J.touches[0].clientX-J.touches[1].clientX,J.touches[0].clientY-J.touches[1].clientY);b.current=oe,k.current=t,g(!1),O(!1)}},X=J=>{var $;if(J.touches.length===1){const oe=J.touches[0],q=($=v.current)==null?void 0:$.getBoundingClientRect();if(!q)return;const H=oe.clientX-q.left,le=oe.clientY-q.top;if(u)return;if(N&&A){const ce=C(H,le),Z=Math.floor(ce.x),_e=Math.floor(ce.y),be=Math.min(A.x,Z),Q=Math.min(A.y,_e),he=Math.max(A.x,Z),ve=Math.max(A.y,_e),Ye=he-be+1,We=ve-Q+1;M({x:be,y:Q,w:Ye,h:We})}else x&&n({x:H-y.x,y:le-y.y})}else if(J.touches.length===2&&b.current&&k.current&&a){const q=Math.hypot(J.touches[0].clientX-J.touches[1].clientX,J.touches[0].clientY-J.touches[1].clientY)/b.current;a(k.current*q)}},F=()=>{N&&(O(!1),P&&o&&P.w>0&&P.h>0&&o(P)),g(!1),b.current=null,k.current=null,_.current=null};return c.jsx("canvas",{ref:v,className:`w-full h-full block touch-none ${u||N||(re=window.event)!=null&&re.shiftKey||l==="select"?"cursor-crosshair":"cursor-grab active:cursor-grabbing"}`,onMouseDown:R,onMouseMove:z,onMouseUp:G,onMouseLeave:G,onTouchStart:ne,onTouchMove:X,onTouchEnd:F,onTouchCancel:F,tabIndex:0})},fd={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},fs=({title:e,children:t})=>c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[c.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:c.jsx("span",{children:e})}),c.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),iO=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],df=({checked:e,onChange:t,label:r})=>c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),c.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:c.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),v1=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let d=0;d<4;d++)r[d]===l&&u.push(d);return u},a=t.BlackLevelRed,o=t.BlackLevelGreen,i=t.BlackLevelBlue;if(a!==void 0&&o!==void 0&&i!==void 0){const l=parseFloat(a),u=parseFloat(o),d=parseFloat(i);if(!isNaN(l)&&!isNaN(u)&&!isNaN(d)){const f=[0,0,0,0];return f.fill(u),n("R").forEach(h=>f[h]=l),n("G").forEach(h=>f[h]=u),n("B").forEach(h=>d),f}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},sO=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:o,isBridgeConnected:i,isDrLabOpen:s,drMarkingStep:l,onStartMarking:u,onGenerateTestPic:d,drRoiSize:f,onDrRoiSizeChange:h,drGridRows:p,onDrGridRowsChange:m,drGridCols:v,onDrGridColsChange:w,onBatchDrLab:x,hasDrMarkers:g,isFftLabOpen:y,onProcessPair:S,onProcessBatchDiff:b,onProcessStackFft:k,onOpenCrossCalc:_,isThreePlane:N,onToggleXTrans:O,xtransPhase:A,onXTransPhaseChange:E,isXTransConverted:P,onCommand:M,isColorLabOpen:D,colorLabMarkingStep:T,onStartColorLabMarking:B,isSfrLabOpen:C,roiStats:R,onOpenDngExport:z}=e,G=!!t,ne=!!(t!=null&&t.isXTrans),X=!!O,[F,re]=j.useState(r.exposure.toString()),[J,$]=j.useState(""),[oe,q]=j.useState("0 0 0 0"),[H,le]=j.useState("1.0"),[ce,Z]=j.useState("1.0"),[_e,be]=j.useState(r.demosaicMethod),[Q,he]=j.useState(!!r.showKadc),[ve,Ye]=j.useState(!!r.subtractBlackLevelFromStats),[We,Te]=j.useState("64"),[Be,it]=j.useState(!1),[xt,yr]=j.useState(!1),[st,tr]=j.useState("0 0 0 0"),[ze,Ut]=j.useState("2840 6303 3935 6303"),[$t,rr]=j.useState("780 1720 1101 1720"),[Nr,mt]=j.useState(!1),[Ge,lt]=j.useState(!1),[jt,nr]=j.useState(!1),[ar,Zr]=j.useState("single"),Dt=j.useMemo(()=>Object.keys(fd).sort(),[]),gn=j.useRef(null),bt=j.useRef(null),mn=j.useRef(null),An=j.useRef(null),[yn,dr]=j.useState(null),[vr,xr]=j.useState(null),[vn,on]=j.useState(!1),[br,Wn]=j.useState(!0),na=j.useRef(null),Zt=j.useRef(null);j.useEffect(()=>{if(re(r.exposure.toString()),r.customMatrix?($(r.customMatrix.join(" ")),it(!0)):$(""),r.blackLevel&&r.blackLevel.length===4)q(r.blackLevel.join(" "));else{const Y=v1(t,o);q(Y?Y.join(" "):"0 0 0 0")}le(r.wbGains?r.wbGains[0].toString():"1.0"),Z(r.wbGains?r.wbGains[1].toString():"1.0"),be(r.demosaicMethod),he(!!r.showKadc),Ye(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(tr(r.advancedZeroDep.bl.join(" ")),Ut(r.advancedZeroDep.bg.join(" ")),rr(r.advancedZeroDep.fg.join(" ")),yr(!0))},[r,t,o]);const Qt=Y=>re(Y),Bt=Y=>le(Y),se=Y=>Z(Y),Ce=Y=>be(parseInt(Y.target.value,10)),Fe=Y=>$(Y.target.value),et=()=>{re("0"),be(3),le("1.0"),Z("1.0"),he(!0),Ye(!0),$(""),it(!1),yr(!1);const Y=v1(t,o);q(Y?Y.join(" "):"0 0 0 0")},Qe=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),M==null||M("sel full"))},Nt=()=>{if(!t||!a)return;const Y=parseInt(We,10);if(isNaN(Y)||Y<=0)return;const we=Math.min(Y,t.width),Wt=Math.min(Y,t.height),sr=Math.floor((t.width-we)/2),Gr=Math.floor((t.height-Wt)/2);a({x:sr,y:Gr,w:we,h:Wt}),M==null||M(`sel center ${Y}`)},hr=()=>{const we=oe.split(/[\s,]+/).filter(Wt=>Wt.trim()!=="").map(Number);if(we.length===1&&!isNaN(we[0]))return[we[0],we[0],we[0],we[0]];if(we.length>=4&&!we.slice(0,4).some(isNaN))return[we[0],we[1],we[2],we[3]]},or=Y=>{const we=Y.trim().split(/[\s,]+/).map(Number);return we.length===4&&!we.some(isNaN)?we:we.length===1&&!isNaN(we[0])?[we[0],we[0],we[0],we[0]]:null},Le=()=>{M&&(F!=="0"&&M(`ev ${F}`),(H!=="1.0"||ce!=="1.0")&&M(`wb ${H} ${ce}`),oe!=="0 0 0 0"&&M(`bl ${oe}`),_e!==3&&M(`demo ${_e}`),J.trim().length>0&&M(`matrix ${J.replace(/\s+/g," ")}`),M("render"));const Y={...r},we=parseFloat(F);isNaN(we)||(Y.exposure=we);const Wt=parseFloat(H),sr=parseFloat(ce);if(!isNaN(Wt)&&!isNaN(sr)&&(Y.wbGains=[Wt,sr]),Y.demosaicMethod=_e,Y.renderMode="standard",Be){const Gr=hr();Gr&&(Y.blackLevel=Gr);const Xt=J.trim().replace(/[\s,\n]+/g," ");if(Xt){const Xn=Xt.split(" ").map(Number);Xn.length===9&&!Xn.some(isNaN)?Y.customMatrix=Xn:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete Y.customMatrix;Y.showKadc=Q,Y.subtractBlackLevelFromStats=ve}else delete Y.customMatrix,delete Y.blackLevel,delete Y.showKadc,delete Y.subtractBlackLevelFromStats;n(Y)},ct=()=>{lt(!0)},Mt=Y=>{M&&(F!=="0"&&M(`ev ${F}`),(H!=="1.0"||ce!=="1.0")&&M(`wb ${H} ${ce}`),oe!=="0 0 0 0"&&M(`bl ${oe}`),M(Y==="bilinear"?"render zero color":"render zero"));const we={...r},Wt=hr();Wt&&(we.blackLevel=Wt);const sr=parseFloat(H),Gr=parseFloat(ce);!isNaN(sr)&&!isNaN(Gr)&&(we.wbGains=[sr,Gr]);const Xt=parseFloat(F);if(isNaN(Xt)||(we.exposure=Xt),Y==="bilinear"){const Xn=J.trim().replace(/[\s,\n]+/g," ");if(Xn){const En=Xn.split(" ").map(Number);En.length===9&&!En.some(isNaN)&&(we.customMatrix=En)}}we.renderMode=Y==="mosaic"?"zero-dependency":"zero-dep-color",lt(!1),n(we)},At=()=>{const Y=or(st),we=or(ze),Wt=or($t);if(!Y||!we||!Wt){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}M&&(F!=="0"&&M(`ev ${F}`),M(`render unmix ${Y.join(" ")} ${we.join(" ")} ${Wt.join(" ")}`));const sr={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:Y,bg:we,fg:Wt}};n(sr)},ir=()=>{if(R){const Y=R.means,we=[Y[0],Y[1],Y[3],Y[2]].map(Wt=>Wt.toFixed(1));Ut(we.join(" "))}else alert("Please select an ROI on the image first.")},ge=()=>{if(R){const Y=R.means,we=[Y[0],Y[1],Y[3],Y[2]].map(Wt=>Wt.toFixed(1));rr(we.join(" "))}else alert("Please select an ROI on the image first.")},Er=Y=>{Y.target.files&&Y.target.files.length>0&&x&&(x(Y.target.files,ar),M==null||M(`drlab batch ${ar}`)),Y.target.value="",nr(!1)},Sa=async Y=>{var Wt;const we=(Wt=Y.target.files)==null?void 0:Wt[0];if(we){try{const Gr=(await we.text()).split(`
`),Xt=[];Xt.push("#BlackLevel: 0,0,0,0"),Xt.push("#ImageHeight: 0"),Xt.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let Xn=1;for(let ia=0;ia<Gr.length;ia++){const Na=Gr[ia].trim();if(!Na||Na.includes("R_mean")||Na.includes("R_std"))continue;const _r=Na.split(/\s+/).map(Number);if(_r.length<8||_r.some(isNaN))continue;const no=[Xn,1,_r[0],_r[2],_r[6],_r[4],_r[1],_r[3],_r[7],_r[5]].join(",");Xt.push(no),Xn++}const En=new Blob([Xt.join(`
`)],{type:"text/csv"}),is=URL.createObjectURL(En),oa=document.createElement("a");oa.href=is,oa.download=we.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(oa),oa.click(),document.body.removeChild(oa),URL.revokeObjectURL(is)}catch(sr){console.error("Conversion failed",sr),alert("Failed to convert file.")}Y.target.value=""}},Qr=Y=>{Y.target.files&&Y.target.files[0]&&(dr(Y.target.files[0]),M==null||M("fft load a"))},xn=Y=>{Y.target.files&&Y.target.files[0]&&(xr(Y.target.files[0]),M==null||M("fft load b"))},Ao=()=>{yn&&vr&&S&&(S(yn,vr,vn,br),M==null||M("fft run"))},Eo=Y=>{Y.target.files&&Y.target.files.length>0&&b&&(b(Y.target.files),M==null||M("fft batch")),Y.target.value=""},ja=Y=>{Y.target.files&&Y.target.files.length>0&&k&&(k(Y.target.files),M==null||M("fft stack")),Y.target.value=""},aa=!!P;return c.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[N&&c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[c.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),c.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),ne&&!P&&c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),c.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),P&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),c.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),C&&c.jsx(fs,{title:"SFR Lab Tools (Scalar Unmixing)",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),c.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsx(df,{checked:xt,onChange:yr,label:" (Scalar Unmixing)"}),xt&&c.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[c.jsx("div",{className:"col-span-1",children:"Param"}),c.jsx("div",{className:"text-center",children:"Ch0(R)"}),c.jsx("div",{className:"text-center",children:"Ch1(G1)"}),c.jsx("div",{className:"text-center",children:"Ch2(B)"}),c.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),c.jsx("input",{type:"text",value:st,onChange:Y=>tr(Y.target.value),className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:ze,onChange:Y=>Ut(Y.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:ir,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:$t,onChange:Y=>rr(Y.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:ge,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsx("button",{onClick:At,disabled:!G,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95",children:"RUN UNMIXING (ADV ZERO-DEP)"}),c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),y&&c.jsx(fs,{title:"FFT Lab (Noise Profile)",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:gn,className:"hidden",onChange:Qr,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var Y;return(Y=gn.current)==null?void 0:Y.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${yn?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:yn?`A: ${yn.name}`:"Load Image A"}),c.jsx("input",{type:"file",ref:bt,className:"hidden",onChange:xn,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var Y;return(Y=bt.current)==null?void 0:Y.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${vr?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:vr?`B: ${vr.name}`:"Load Image B"})]}),c.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:br,onChange:Y=>Wn(Y.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:Ao,disabled:!yn||!vr,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),c.jsx("input",{type:"file",ref:mn,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Eo}),c.jsx("button",{onClick:()=>{var Y;return(Y=mn.current)==null?void 0:Y.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:An,className:"hidden",multiple:!0,onChange:ja,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var Y;return(Y=An.current)==null?void 0:Y.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),c.jsx("div",{className:"flex flex-col gap-2 pt-2",children:c.jsx("button",{onClick:()=>{_==null||_(),M==null||M("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"})})]})}),s&&c.jsx(fs,{title:"DR Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>{d==null||d(),M==null||M("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),h&&f!==void 0&&c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),c.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:f,onChange:Y=>h(parseInt(Y.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),c.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),m&&w&&p!==void 0&&v!==void 0&&c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Layout:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"1",max:"50",value:p,onChange:Y=>m(Math.max(1,parseInt(Y.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),c.jsx("span",{className:"text-xs text-gray-400",children:"x"}),c.jsx("input",{type:"number",min:"1",max:"50",value:v,onChange:Y=>w(Math.max(1,parseInt(Y.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>{u==null||u(),M==null||M("mark")},disabled:!G||l!==void 0&&l>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${G?l&&l>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l>0?"Marking Active...":"Mark Corners"}),x&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",ref:na,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Er}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>nr(!jt),disabled:!g,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),jt&&c.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var Y;Zr("single"),(Y=na.current)==null||Y.click()},children:"1. Independent Frames"}),c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var Y;Zr("pair"),(Y=na.current)==null||Y.click()},children:"2. Pair Difference (A-B)"})]})]})]}),c.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("input",{type:"file",ref:Zt,className:"hidden",accept:".txt",onChange:Sa}),c.jsx("button",{onClick:()=>{var Y;return(Y=Zt.current)==null?void 0:Y.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),l!==void 0&&l>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[l===1&&"Click Top-Left Center",l===2&&"Click Top-Right Center",l===3&&"Click Bottom-Left Center",l===4&&"Click Bottom-Right Center"]})})]})]})}),D&&c.jsx(fs,{title:"Color Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),c.jsx("button",{onClick:()=>{B==null||B(),M==null||M("cl mark")},disabled:!G||T!==void 0&&T>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${G?T&&T>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:T&&T>0?"Marking Active...":"Mark 24-Patch Chart"}),T!==void 0&&T>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[T===1&&"Click Top-Left (Brown)",T===2&&"Click Top-Right (Cyanish)",T===3&&"Click Bottom-Left (White)",T===4&&"Click Bottom-Right (Black)"]})})]})}),c.jsx(fs,{title:"Selection Tools",children:c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),c.jsx("input",{type:"number",min:"1",value:We,onChange:Y=>Te(Y.target.value),disabled:!G,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:Nt,disabled:!G,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),c.jsx("button",{onClick:Qe,disabled:!G,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),c.jsx(fs,{title:"Display Controls",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",c.jsx("b",{children:"Apply"}),"."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!G,value:parseFloat(F)||0,onChange:Y=>Qt(Y.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{id:"exposure",type:"number",step:"0.1",value:F,onChange:Y=>Qt(Y.target.value),disabled:!G,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"demosaic",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2 flex justify-between",children:[c.jsx("span",{children:"Demosaic Method"}),(N||(t==null?void 0:t.isXTrans))&&c.jsx("span",{className:"text-[9px] text-red-500 font-bold bg-red-100 dark:bg-red-900/30 px-1 rounded",children:"DISABLED"})]}),c.jsx("select",{id:"demosaic",value:_e,onChange:Ce,disabled:!G||N||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:iO.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))}),N&&c.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&c.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer below."})]}),X&&c.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[c.jsx(df,{checked:!!aa,onChange:Y=>{O&&O(Y),M==null||M(`xtrans ${Y?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),aa&&A&&E&&c.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:A.x,onChange:Y=>{const we=Math.min(5,Math.max(0,parseInt(Y.target.value)||0));E({x:we}),M==null||M(`xtrans phase ${we} ${A.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:A.y,onChange:Y=>{const we=Math.min(5,Math.max(0,parseInt(Y.target.value)||0));E({y:we}),M==null||M(`xtrans phase ${A.x} ${we}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),c.jsx("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-2",children:c.jsx(df,{checked:Be,onChange:it,label:"Advanced Settings"})}),Be&&c.jsxs("div",{className:"space-y-5 pl-2 border-l-2 border-gray-200 dark:border-slate-700 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{children:[c.jsx(df,{checked:Q,onChange:he,label:"Show Kadc"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Requires manual Black Levellinear PTC zoneabsolutely uniform image ."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),c.jsx("input",{type:"number",step:"0.01",value:H,onChange:Y=>Bt(Y.target.value),disabled:!G,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),c.jsx("input",{type:"number",step:"0.01",value:ce,onChange:Y=>se(Y.target.value),disabled:!G,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",c.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),c.jsx("button",{onClick:()=>mt(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[c.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),c.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${ve?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>Ye(!ve),children:c.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${ve?"translate-x-4":"translate-x-0"}`})})]})]}),c.jsx("input",{type:"text",value:oe,onChange:Y=>q(Y.target.value),disabled:!G,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block",children:["Custom Color Matrix",c.jsx("span",{className:"block text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case mt-0.5",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-slate-600 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:Y=>{const we=fd[Y.target.value];we&&$(we),Y.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),Dt.map(Y=>c.jsx("option",{value:Y,children:Y},Y))]})]}),c.jsx("textarea",{id:"customMatrix",value:J,onChange:Fe,disabled:!G,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[c.jsx("button",{onClick:Le,disabled:!G,className:"w-full text-base bg-cyan-500 hover:bg-cyan-600 dark:bg-cyan-600 dark:hover:bg-cyan-500 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 dark:disabled:text-slate-500 disabled:cursor-not-allowed text-white font-bold py-3 px-3 rounded-lg shadow-lg shadow-cyan-500/20 dark:shadow-cyan-900/20 transition-all active:scale-95",children:""}),c.jsxs("button",{onClick:ct,disabled:!G,className:"w-full text-xs font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-colors py-2 rounded-lg flex items-center justify-center gap-1.5 border border-slate-600",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:[c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"",c.jsx("br",{}),"CM"]}),c.jsxs("button",{onClick:()=>z==null?void 0:z(),disabled:!G,className:"w-full text-sm font-bold bg-indigo-600 hover:bg-indigo-500 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-3 rounded-lg flex items-center justify-center gap-1.5 border-2 border-black shadow-[4px_4px_0px_black] active:translate-x-1 active:translate-y-1 active:shadow-none",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Generate 16bit DNG"]}),c.jsx("button",{onClick:et,disabled:!G,className:"w-full text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors mt-1",children:"Reset Defaults (Local)"})]})]})})]}),c.jsx(ai,{isOpen:Nr,onClose:()=>mt(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),mt(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[c.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/JiangBridge",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("p",{className:"leading-relaxed",children:["Autofills when JiangBridge is detected. If no result is found or JiangBridge is missing, please check the ",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame with identical settings to calculate and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),c.jsx(ai,{isOpen:Ge,onClose:()=>lt(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>Mt("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("h4",{className:"font-bold text-gray-800 dark:text-slate-200 mb-1",children:"Mosaic (Gray)"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 text-center",children:"Original Bayer pattern. No demosaic. 1:1 pixel mapping. Pure DN visualization."})]}),c.jsxs("button",{onClick:()=>Mt("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/20 dark:hover:bg-indigo-900/40 border-2 border-transparent hover:border-indigo-400 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-200 dark:bg-indigo-800 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-indigo-700 dark:text-indigo-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),c.jsx("h4",{className:"font-bold text-indigo-800 dark:text-indigo-300 mb-1",children:"Bilinear (Color)"}),c.jsx("p",{className:"text-[10px] text-indigo-600/80 dark:text-indigo-400/80 text-center",children:"Basic JS Demosaic + Matrix + Gamma. Bypass JOraw pipeline."})]})]}),c.jsx("button",{onClick:()=>lt(!1),className:"mt-2 w-full py-2 text-xs font-bold text-gray-500 hover:text-gray-700 dark:text-slate-400 dark:hover:text-slate-200 transition-colors",children:"Cancel"})]})})]})},lO=j.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:o,onStartMarking:i,onGenerateTestPic:s,onBatchDrLab:l,onProcessPair:u,onProcessBatchDiff:d,onProcessStackFft:f,onOpenCrossCalc:h,onToggleXTrans:p,onXTransPhaseChange:m}=e,[v,w]=j.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[x,g]=j.useState(""),[y,S]=j.useState([]),[b,k]=j.useState(-1),_=j.useRef(null),N=j.useRef(null),O=j.useRef(null),A=j.useRef(null),E=j.useRef(null),P=j.useRef(null),M=j.useRef(null),D=j.useRef(null);j.useRef(null);const T=j.useRef({...n});j.useEffect(()=>{T.current={...n}},[n.exposure,n.demosaicMethod]);const B=j.useRef({fileA:null,fileB:null});j.useLayoutEffect(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[v]);const C=(F,re="out")=>{w(J=>[...J,{id:Date.now().toString()+Math.random(),type:re,text:F}])};j.useImperativeHandle(t,()=>({log:(F,re="in")=>{const J=re;let $=F;re==="in"&&!F.startsWith(">")&&($=`> ${F}`),C($,J)}}));const R=j.useRef(null);j.useEffect(()=>{if(e.roiStats&&e.roiStats!==R.current){const F=e.roiStats,re=Math.round(F.x),J=Math.round(F.y),$=Math.round(F.width),oe=Math.round(F.height);C(`> sel ${re} ${J} ${$} ${oe}`,"in");const q=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],H=c.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[c.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",re,", ",J,", ",$,"x",oe,"]:"]}),c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[c.jsx("div",{children:"Ch"}),c.jsx("div",{className:"text-right",children:"Mean"}),c.jsx("div",{className:"text-right",children:"StdDev"})]}),q.map(le=>c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[c.jsx("div",{className:le.name==="R"?"text-red-500":le.name==="B"?"text-blue-500":"text-green-500",children:le.name}),c.jsx("div",{className:"text-right text-gray-300",children:F.means[le.idx].toFixed(2)}),c.jsx("div",{className:"text-right text-gray-400",children:F.stdDevs[le.idx].toFixed(2)})]},le.name))]});C(H,"out"),R.current=F}},[e.roiStats,e.isBGGR]);const z=F=>{var oe,q,H,le,ce,Z,_e;const re=F.trim().split(/\s+/),J=re[0].toLowerCase(),$=re.slice(1);switch(J){case"help":C("Available Commands:","info"),C("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),C("  wb <r> <b>        Set WB Gains","info"),C("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),C("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),C("  matrix <n1..n9>   Set Custom Color Matrix","info"),C("  xtrans <on|off>   Force X-Trans Mode","info"),C("  xtrans phase <x> <y>  Set X-Trans Phase","info"),C("  render            Apply settings & Render","info"),C("  render zero       Zero-Dependency Render","info"),C("  render unmix      Advanced Unmixing Render","info"),C("  sel <full|center> Select ROI","info"),C("  sel <x> <y> <w> <h> Select ROI manually","info"),C("  mark              Start DR Lab Corner Marking","info"),C("  gen test          Generate Test Pattern","info"),C("  fft load <a>      Load FFT Pair Image A","info"),C("  fft load <b>      Load FFT Pair Image B","info"),C("  fft run           Run FFT Pair Diff","info"),C("  cls               Clear Screen","info");break;case"cls":case"clear":w([]);break;case"ev":case"exposure":if($.length<1){C(`Current EV: ${T.current.exposure}`,"info");return}const be=parseFloat($[0]);if(isNaN(be)){C("Invalid EV value","err");return}T.current.exposure=be,C(`EV set to ${be} (run 'render' to apply)`);break;case"wb":if($.length<2){C("Usage: wb <red_gain> <blue_gain>","err");return}const Q=parseFloat($[0]),he=parseFloat($[1]);if(isNaN(Q)||isNaN(he)){C("Invalid gains","err");return}T.current.wbGains=[Q,he],C(`WB set to R:${Q} B:${he}`);break;case"bl":case"black":if($.length===0){C(`Current BL: ${((oe=T.current.blackLevel)==null?void 0:oe.join(" "))||"Auto"}`,"info");return}let ve=$.map(Number);if(ve.some(isNaN)){C("Invalid numbers","err");return}if(ve.length===1&&(ve=[ve[0],ve[0],ve[0],ve[0]]),ve.length<4){C("Need 1 or 4 values","err");return}T.current.blackLevel=[ve[0],ve[1],ve[2],ve[3]],T.current.subtractBlackLevelFromStats=!0,T.current.showKadc=!0,C(`Black Level set: ${ve.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if($.length===0){C("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const Ye=parseInt($[0]);if(isNaN(Ye)){C("Invalid method ID","err");return}T.current.demosaicMethod=Ye,C(`Demosaic set to ID ${Ye}`);break;case"matrix":if($.length!==9){C("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const We=$.map(Number);if(We.some(isNaN)){C("Invalid matrix values","err");return}T.current.customMatrix=We,C("Custom Color Matrix set.");break;case"xtrans":if($[0]==="on"||$[0]==="true")p?(p(!0),C("X-Trans conversion ON")):C("Feature not available","err");else if($[0]==="off"||$[0]==="false")p?(p(!1),C("X-Trans conversion OFF")):C("Feature not available","err");else if($[0]==="phase"){if($.length<3){C("Usage: xtrans phase <x> <y>","err");return}const Te=parseInt($[1]),Be=parseInt($[2]);m&&(m({x:Te,y:Be}),C(`X-Trans Phase set to (${Te}, ${Be})`))}else C("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if($[0]==="zero"){const Te=$[1]==="color"?"zero-dep-color":"zero-dependency";T.current.renderMode=Te,C(`Rendering Zero-Dependency (${Te})...`)}else if($[0]==="unmix"){if($.length<13){C("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const Te=$.slice(1).map(Number);if(Te.some(isNaN)){C("Invalid params","err");return}T.current.renderMode="advanced-zero-dep",T.current.advancedZeroDep={bl:[Te[0],Te[1],Te[2],Te[3]],bg:[Te[4],Te[5],Te[6],Te[7]],fg:[Te[8],Te[9],Te[10],Te[11]]},C("Rendering Advanced Unmix...")}else T.current.renderMode="standard",C("Rendering Standard Pipeline...");a({...T.current});break;case"sel":case"select":if(!r||!o){C("No image loaded","err");return}if($[0]==="full")o({x:0,y:0,w:r.width,h:r.height});else if($[0]==="center"){const Te=parseInt($[1])||64,Be=Math.floor((r.width-Te)/2),it=Math.floor((r.height-Te)/2);o({x:Be,y:it,w:Te,h:Te})}else if($.length===4){const[Te,Be,it,xt]=$.map(Number);if([Te,Be,it,xt].some(isNaN)){C("Invalid coordinates","err");return}o({x:Te,y:Be,w:it,h:xt})}else C("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":i&&(i(),C("Interactive marking started. Click 4 corners on canvas."));break;case"gen":($[0]==="test"||$[0]==="pattern")&&s&&(s(),C("Generated Test Pattern"));break;case"drlab":if($[0]==="config"){const[Te,Be,it]=$.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(Te||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(Be||10),e.onDrGridColsChange&&e.onDrGridColsChange(it||10),C(`DR Grid Configured: Size=${Te}, Grid=${Be}x${it}`)}else $[0]==="batch"&&($[1]==="pair"?(C("Select file pairs for DR Lab..."),(q=A.current)==null||q.click()):(C("Select single files for DR Lab..."),(H=O.current)==null||H.click()));break;case"fft":$[0]==="load"?$[1]==="a"?(le=E.current)==null||le.click():$[1]==="b"?(ce=P.current)==null||ce.click():C("Usage: fft load <a|b>","err"):$[0]==="run"?B.current.fileA&&B.current.fileB&&u?(C(`Processing Pair: ${B.current.fileA.name} - ${B.current.fileB.name}`),u(B.current.fileA,B.current.fileB,!1,!0)):C("Load both A and B first","err"):$[0]==="stack"?(C("Select files for Stack FFT..."),(Z=M.current)==null||Z.click()):$[0]==="batch"&&(C("Select files for Batch Diff...","info"),(_e=D.current)==null||_e.click());break;case"crosscalc":h&&(h(),C("Opened Cross-Calculator"));break;default:C(`Unknown command: ${J}`,"err")}},G=F=>{if(F.key==="Enter"){const re=x.trim();if(!re)return;C(`> ${re}`,"in"),re.split(";").forEach($=>{$.trim()&&z($.trim())}),S($=>[...$,re]),k(-1),g("")}else if(F.key==="ArrowUp"){if(F.preventDefault(),y.length>0){const re=b===-1?y.length-1:Math.max(0,b-1);k(re),g(y[re])}}else if(F.key==="ArrowDown")if(F.preventDefault(),b!==-1){const re=Math.min(y.length-1,b+1);k(re),g(y[re])}else g("")},ne=(F,re)=>{F.target.files&&F.target.files.length>0&&l&&(C(`Batch processing ${F.target.files.length} files in ${re} mode...`),l(F.target.files,re)),F.target.value=""},X=(F,re)=>{var $;const J=($=F.target.files)==null?void 0:$[0];J&&(re==="A"?B.current.fileA=J:B.current.fileB=J,C(`Loaded ${re}: ${J.name}`)),F.target.value=""};return c.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[c.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[c.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),c.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),c.jsx("div",{ref:_,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:v.map(F=>c.jsxs("div",{className:`mb-1 ${F.type==="in"?"opacity-50":""} ${F.type==="err"?"text-red-500":""} ${F.type==="info"?"text-cyan-400":""}`,children:[F.type!=="in"&&typeof F.text=="string"&&!F.text.startsWith(">")&&c.jsx("span",{className:"mr-2 opacity-50",children:">"}),F.text]},F.id))}),c.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[c.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),c.jsx("input",{ref:N,type:"text",value:x,onChange:F=>g(F.target.value),onKeyDown:G,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),c.jsx("input",{type:"file",ref:O,className:"hidden",multiple:!0,onChange:F=>ne(F,"single")}),c.jsx("input",{type:"file",ref:A,className:"hidden",multiple:!0,onChange:F=>ne(F,"pair")}),c.jsx("input",{type:"file",ref:E,className:"hidden",onChange:F=>X(F,"A")}),c.jsx("input",{type:"file",ref:P,className:"hidden",onChange:F=>X(F,"B")}),c.jsx("input",{type:"file",ref:M,className:"hidden",multiple:!0,onChange:F=>{e.onProcessStackFft&&F.target.files&&(C(`Loading ${F.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(F.target.files)),F.target.value=""}}),c.jsx("input",{type:"file",ref:D,className:"hidden",multiple:!0,onChange:F=>{e.onProcessBatchDiff&&F.target.files&&(C("Starting Batch Diff..."),e.onProcessBatchDiff(F.target.files)),F.target.value=""}})]})}),cO=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let d=0;d<4;d++)r[d]===l&&u.push(d);return u},a=t.BlackLevelRed,o=t.BlackLevelGreen,i=t.BlackLevelBlue;if(a!==void 0&&o!==void 0&&i!==void 0){const l=parseFloat(a),u=parseFloat(o),d=parseFloat(i);if(!isNaN(l)&&!isNaN(u)&&!isNaN(d)){const f=[0,0,0,0];return f.fill(u),n("R").forEach(h=>f[h]=l),n("G").forEach(h=>f[h]=u),n("B").forEach(h=>d),f}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},uO=e=>{const[t,r]=j.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:o,displaySettings:i,onApplyDisplaySettings:s}=e,l=j.useRef(null),u=j.useRef(!1),d=j.useRef(null);j.useEffect(()=>{n!==d.current&&(u.current=!1,d.current=n)},[n]),j.useEffect(()=>{var h;if(o&&n&&!u.current){u.current=!0;const p=cO(n,a),m=p&&p.some(v=>v>0);if(p&&m){console.log("[AutoApply] Detected Black Levels via Bridge:",p),(h=l.current)==null||h.log(`Auto-detected BL: ${p.join(" ")}`,"info");const v={...i,blackLevel:p,showKadc:!0,subtractBlackLevelFromStats:!0,exposure:i.exposure,wbGains:i.wbGains||[1,1],demosaicMethod:i.demosaicMethod,renderMode:"standard"};s(v)}}},[o,n,a,i,s]);const f=h=>{l.current&&l.current.log(h,"in")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[c.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),c.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),c.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[c.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:c.jsx(sO,{...e,onCommand:f})}),c.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:c.jsx(lO,{...e,ref:l})})]})]})},fO=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),dO=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),hO=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),pO=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),gO=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),_g=.1,Pg=16,mO=Math.log(_g),yO=Math.log(Pg),vO=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const o=u=>{const d=parseFloat(u.target.value),f=Math.exp(d);t(Math.max(_g,Math.min(Pg,f)))},i=()=>{t(Math.min(Pg,e*1.25))},s=()=>{t(Math.max(_g,e/1.25))},l=Math.log(e);return c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[c.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:c.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?c.jsx(gO,{}):c.jsx(pO,{})})}),c.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[c.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:c.jsx(fO,{})}),c.jsx("input",{type:"range",min:mO,max:yO,step:"0.01",value:l,onChange:o,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),c.jsx("button",{onClick:i,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:c.jsx(dO,{})}),c.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),c.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:c.jsx(hO,{})})]})]})},xO=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return c.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function T5(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=T5(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=T5(e))&&(n&&(n+=" "),n+=t);return n}var bO=Array.isArray,Un=bO,wO=typeof Vu=="object"&&Vu&&Vu.Object===Object&&Vu,$5=wO,kO=$5,SO=typeof self=="object"&&self&&self.Object===Object&&self,jO=kO||SO||Function("return this")(),ro=jO,NO=ro,_O=NO.Symbol,Eu=_O,x1=Eu,D5=Object.prototype,PO=D5.hasOwnProperty,OO=D5.toString,Yl=x1?x1.toStringTag:void 0;function CO(e){var t=PO.call(e,Yl),r=e[Yl];try{e[Yl]=void 0;var n=!0}catch{}var a=OO.call(e);return n&&(t?e[Yl]=r:delete e[Yl]),a}var MO=CO,AO=Object.prototype,EO=AO.toString;function TO(e){return EO.call(e)}var $O=TO,b1=Eu,DO=MO,RO=$O,IO="[object Null]",LO="[object Undefined]",w1=b1?b1.toStringTag:void 0;function BO(e){return e==null?e===void 0?LO:IO:w1&&w1 in Object(e)?DO(e):RO(e)}var Oo=BO;function FO(e){return e!=null&&typeof e=="object"}var Co=FO,zO=Oo,GO=Co,UO="[object Symbol]";function WO(e){return typeof e=="symbol"||GO(e)&&zO(e)==UO}var Sl=WO,XO=Un,HO=Sl,VO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,KO=/^\w*$/;function YO(e,t){if(XO(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||HO(e)?!0:KO.test(e)||!VO.test(e)||t!=null&&e in Object(t)}var Qy=YO;function qO(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var fi=qO;const jl=Lt(fi);var ZO=Oo,QO=fi,JO="[object AsyncFunction]",eC="[object Function]",tC="[object GeneratorFunction]",rC="[object Proxy]";function nC(e){if(!QO(e))return!1;var t=ZO(e);return t==eC||t==tC||t==JO||t==rC}var Jy=nC;const Ve=Lt(Jy);var aC=ro,oC=aC["__core-js_shared__"],iC=oC,ep=iC,k1=function(){var e=/[^.]+$/.exec(ep&&ep.keys&&ep.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function sC(e){return!!k1&&k1 in e}var lC=sC,cC=Function.prototype,uC=cC.toString;function fC(e){if(e!=null){try{return uC.call(e)}catch{}try{return e+""}catch{}}return""}var R5=fC,dC=Jy,hC=lC,pC=fi,gC=R5,mC=/[\\^$.*+?()[\]{}|]/g,yC=/^\[object .+?Constructor\]$/,vC=Function.prototype,xC=Object.prototype,bC=vC.toString,wC=xC.hasOwnProperty,kC=RegExp("^"+bC.call(wC).replace(mC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SC(e){if(!pC(e)||hC(e))return!1;var t=dC(e)?kC:yC;return t.test(gC(e))}var jC=SC;function NC(e,t){return e==null?void 0:e[t]}var _C=NC,PC=jC,OC=_C;function CC(e,t){var r=OC(e,t);return PC(r)?r:void 0}var ts=CC,MC=ts,AC=MC(Object,"create"),T0=AC,S1=T0;function EC(){this.__data__=S1?S1(null):{},this.size=0}var TC=EC;function $C(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var DC=$C,RC=T0,IC="__lodash_hash_undefined__",LC=Object.prototype,BC=LC.hasOwnProperty;function FC(e){var t=this.__data__;if(RC){var r=t[e];return r===IC?void 0:r}return BC.call(t,e)?t[e]:void 0}var zC=FC,GC=T0,UC=Object.prototype,WC=UC.hasOwnProperty;function XC(e){var t=this.__data__;return GC?t[e]!==void 0:WC.call(t,e)}var HC=XC,VC=T0,KC="__lodash_hash_undefined__";function YC(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=VC&&t===void 0?KC:t,this}var qC=YC,ZC=TC,QC=DC,JC=zC,eM=HC,tM=qC;function Nl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Nl.prototype.clear=ZC;Nl.prototype.delete=QC;Nl.prototype.get=JC;Nl.prototype.has=eM;Nl.prototype.set=tM;var rM=Nl;function nM(){this.__data__=[],this.size=0}var aM=nM;function oM(e,t){return e===t||e!==e&&t!==t}var ev=oM,iM=ev;function sM(e,t){for(var r=e.length;r--;)if(iM(e[r][0],t))return r;return-1}var $0=sM,lM=$0,cM=Array.prototype,uM=cM.splice;function fM(e){var t=this.__data__,r=lM(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():uM.call(t,r,1),--this.size,!0}var dM=fM,hM=$0;function pM(e){var t=this.__data__,r=hM(t,e);return r<0?void 0:t[r][1]}var gM=pM,mM=$0;function yM(e){return mM(this.__data__,e)>-1}var vM=yM,xM=$0;function bM(e,t){var r=this.__data__,n=xM(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var wM=bM,kM=aM,SM=dM,jM=gM,NM=vM,_M=wM;function _l(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_l.prototype.clear=kM;_l.prototype.delete=SM;_l.prototype.get=jM;_l.prototype.has=NM;_l.prototype.set=_M;var D0=_l,PM=ts,OM=ro,CM=PM(OM,"Map"),tv=CM,j1=rM,MM=D0,AM=tv;function EM(){this.size=0,this.__data__={hash:new j1,map:new(AM||MM),string:new j1}}var TM=EM;function $M(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var DM=$M,RM=DM;function IM(e,t){var r=e.__data__;return RM(t)?r[typeof t=="string"?"string":"hash"]:r.map}var R0=IM,LM=R0;function BM(e){var t=LM(this,e).delete(e);return this.size-=t?1:0,t}var FM=BM,zM=R0;function GM(e){return zM(this,e).get(e)}var UM=GM,WM=R0;function XM(e){return WM(this,e).has(e)}var HM=XM,VM=R0;function KM(e,t){var r=VM(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var YM=KM,qM=TM,ZM=FM,QM=UM,JM=HM,eA=YM;function Pl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Pl.prototype.clear=qM;Pl.prototype.delete=ZM;Pl.prototype.get=QM;Pl.prototype.has=JM;Pl.prototype.set=eA;var rv=Pl,I5=rv,tA="Expected a function";function nv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(tA);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(nv.Cache||I5),r}nv.Cache=I5;var L5=nv;const rA=Lt(L5);var nA=L5,aA=500;function oA(e){var t=nA(e,function(n){return r.size===aA&&r.clear(),n}),r=t.cache;return t}var iA=oA,sA=iA,lA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cA=/\\(\\)?/g,uA=sA(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(lA,function(r,n,a,o){t.push(a?o.replace(cA,"$1"):n||r)}),t}),fA=uA;function dA(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var av=dA,N1=Eu,hA=av,pA=Un,gA=Sl,_1=N1?N1.prototype:void 0,P1=_1?_1.toString:void 0;function B5(e){if(typeof e=="string")return e;if(pA(e))return hA(e,B5)+"";if(gA(e))return P1?P1.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var mA=B5,yA=mA;function vA(e){return e==null?"":yA(e)}var F5=vA,xA=Un,bA=Qy,wA=fA,kA=F5;function SA(e,t){return xA(e)?e:bA(e,t)?[e]:wA(kA(e))}var z5=SA,jA=Sl;function NA(e){if(typeof e=="string"||jA(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var I0=NA,_A=z5,PA=I0;function OA(e,t){t=_A(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[PA(t[r++])];return r&&r==n?e:void 0}var ov=OA,CA=ov;function MA(e,t,r){var n=e==null?void 0:CA(e,t);return n===void 0?r:n}var G5=MA;const ya=Lt(G5);function AA(e){return e==null}var EA=AA;const Ue=Lt(EA);var TA=Oo,$A=Un,DA=Co,RA="[object String]";function IA(e){return typeof e=="string"||!$A(e)&&DA(e)&&TA(e)==RA}var LA=IA;const Hi=Lt(LA);var U5={exports:{}},Ct={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=Symbol.for("react.element"),sv=Symbol.for("react.portal"),L0=Symbol.for("react.fragment"),B0=Symbol.for("react.strict_mode"),F0=Symbol.for("react.profiler"),z0=Symbol.for("react.provider"),G0=Symbol.for("react.context"),BA=Symbol.for("react.server_context"),U0=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),X0=Symbol.for("react.suspense_list"),H0=Symbol.for("react.memo"),V0=Symbol.for("react.lazy"),FA=Symbol.for("react.offscreen"),W5;W5=Symbol.for("react.module.reference");function wa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iv:switch(e=e.type,e){case L0:case F0:case B0:case W0:case X0:return e;default:switch(e=e&&e.$$typeof,e){case BA:case G0:case U0:case V0:case H0:case z0:return e;default:return t}}case sv:return t}}}Ct.ContextConsumer=G0;Ct.ContextProvider=z0;Ct.Element=iv;Ct.ForwardRef=U0;Ct.Fragment=L0;Ct.Lazy=V0;Ct.Memo=H0;Ct.Portal=sv;Ct.Profiler=F0;Ct.StrictMode=B0;Ct.Suspense=W0;Ct.SuspenseList=X0;Ct.isAsyncMode=function(){return!1};Ct.isConcurrentMode=function(){return!1};Ct.isContextConsumer=function(e){return wa(e)===G0};Ct.isContextProvider=function(e){return wa(e)===z0};Ct.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iv};Ct.isForwardRef=function(e){return wa(e)===U0};Ct.isFragment=function(e){return wa(e)===L0};Ct.isLazy=function(e){return wa(e)===V0};Ct.isMemo=function(e){return wa(e)===H0};Ct.isPortal=function(e){return wa(e)===sv};Ct.isProfiler=function(e){return wa(e)===F0};Ct.isStrictMode=function(e){return wa(e)===B0};Ct.isSuspense=function(e){return wa(e)===W0};Ct.isSuspenseList=function(e){return wa(e)===X0};Ct.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===L0||e===F0||e===B0||e===W0||e===X0||e===FA||typeof e=="object"&&e!==null&&(e.$$typeof===V0||e.$$typeof===H0||e.$$typeof===z0||e.$$typeof===G0||e.$$typeof===U0||e.$$typeof===W5||e.getModuleId!==void 0)};Ct.typeOf=wa;U5.exports=Ct;var zA=U5.exports,GA=Oo,UA=Co,WA="[object Number]";function XA(e){return typeof e=="number"||UA(e)&&GA(e)==WA}var X5=XA;const HA=Lt(X5);var VA=X5;function KA(e){return VA(e)&&e!=+e}var YA=KA;const Ol=Lt(YA);var $a=function(t){return t===0?0:t>0?1:-1},Ai=function(t){return Hi(t)&&t.indexOf("%")===t.length-1},de=function(t){return HA(t)&&!Ol(t)},qA=function(t){return Ue(t)},Br=function(t){return de(t)||Hi(t)},ZA=0,rs=function(t){var r=++ZA;return"".concat(t||"").concat(r)},Vi=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&!Hi(t))return n;var o;if(Ai(t)){var i=t.indexOf("%");o=r*parseFloat(t.slice(0,i))/100}else o=+t;return Ol(o)&&(o=n),a&&o>r&&(o=r),o},Uo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},QA=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},jr=function(t,r){return de(t)&&de(r)?function(n){return t+n*(r-t)}:function(){return r}};function dd(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ya(n,t))===r})}var JA=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,o=0,i=0,s=1/0,l=-1/0,u=0,d=0,f=0;f<r;f++)u=t[f].cx||0,d=t[f].cy||0,n+=u,a+=d,o+=u*d,i+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=r*i!==n*n?(r*o-n*a)/(r*i-n*n):0;return{xmin:s,xmax:l,a:h,b:(a-h*n)/r}},e6=function(t,r){return de(t)&&de(r)?t-r:Hi(t)&&Hi(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Is(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}var t6=["viewBox","children"],r6=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],O1=["points","pathLength"],tp={svg:t6,polygon:O1,polyline:O1},lv=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],hd=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),!jl(n))return null;var a={};return Object.keys(n).forEach(function(o){lv.includes(o)&&(a[o]=r||function(i){return n[o](n,i)})}),a},n6=function(t,r,n){return function(a){return t(r,n,a),null}},Xc=function(t,r,n){if(!jl(t)||Og(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(o){var i=t[o];lv.includes(o)&&typeof i=="function"&&(a||(a={}),a[o]=n6(i,r,n))}),a},a6=["children"],o6=["children"];function C1(e,t){if(e==null)return{};var r=i6(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i6(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}var M1={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},mo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},A1=null,rp=null,cv=function e(t){if(t===A1&&Array.isArray(rp))return rp;var r=[];return j.Children.forEach(t,function(n){Ue(n)||(zA.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),rp=r,A1=t,r};function Fn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return mo(a)}):n=[mo(t)],cv(e).forEach(function(a){var o=ya(a,"type.displayName")||ya(a,"type.name");n.indexOf(o)!==-1&&r.push(a)}),r}function qn(e,t){var r=Fn(e,t);return r&&r[0]}var E1=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!de(n)||n<=0||!de(a)||a<=0)},s6=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],l6=function(t){return t&&t.type&&Hi(t.type)&&s6.indexOf(t.type)>=0},H5=function(t){return t&&Cg(t)==="object"&&"clipDot"in t},c6=function(t,r,n,a){var o,i=(o=tp==null?void 0:tp[a])!==null&&o!==void 0?o:[];return r.startsWith("data-")||!Ve(t)&&(a&&i.includes(r)||r6.includes(r))||n&&lv.includes(r)},He=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!jl(a))return null;var o={};return Object.keys(a).forEach(function(i){var s;c6((s=a)===null||s===void 0?void 0:s[i],i,r,n)&&(o[i]=a[i])}),o},Mg=function e(t,r){if(t===r)return!0;var n=j.Children.count(t);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return T1(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var o=t[a],i=r[a];if(Array.isArray(o)||Array.isArray(i)){if(!e(o,i))return!1}else if(!T1(o,i))return!1}return!0},T1=function(t,r){if(Ue(t)&&Ue(r))return!0;if(!Ue(t)&&!Ue(r)){var n=t.props||{},a=n.children,o=C1(n,a6),i=r.props||{},s=i.children,l=C1(i,o6);return a&&s?Is(o,l)&&Mg(a,s):!a&&!s?Is(o,l):!1}return!1},$1=function(t,r){var n=[],a={};return cv(t).forEach(function(o,i){if(l6(o))n.push(o);else if(o){var s=mo(o.type),l=r[s]||{},u=l.handler,d=l.once;if(u&&(!d||!a[s])){var f=u(o,s,i);n.push(f),a[s]=!0}}}),n},u6=function(t){var r=t&&t.type;return r&&M1[r]?M1[r]:null},f6=function(t,r){return cv(r).indexOf(t)},d6=["children","width","height","viewBox","className","style","title","desc"];function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ag.apply(this,arguments)}function h6(e,t){if(e==null)return{};var r=p6(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p6(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Eg(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,o=e.className,i=e.style,s=e.title,l=e.desc,u=h6(e,d6),d=a||{width:r,height:n,x:0,y:0},f=ot("recharts-surface",o);return L.createElement("svg",Ag({},He(u,!0,"svg"),{className:f,width:r,height:n,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),L.createElement("title",null,s),L.createElement("desc",null,l),t)}var g6=["children","className"];function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(this,arguments)}function m6(e,t){if(e==null)return{};var r=y6(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function y6(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vt=L.forwardRef(function(e,t){var r=e.children,n=e.className,a=m6(e,g6),o=ot("recharts-layer",n);return L.createElement("g",Tg({className:o},He(a,!0),{ref:t}),r)}),yo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o]};function v6(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}var x6=v6,b6=x6;function w6(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:b6(e,t,r)}var k6=w6,S6="\\ud800-\\udfff",j6="\\u0300-\\u036f",N6="\\ufe20-\\ufe2f",_6="\\u20d0-\\u20ff",P6=j6+N6+_6,O6="\\ufe0e\\ufe0f",C6="\\u200d",M6=RegExp("["+C6+S6+P6+O6+"]");function A6(e){return M6.test(e)}var V5=A6;function E6(e){return e.split("")}var T6=E6,K5="\\ud800-\\udfff",$6="\\u0300-\\u036f",D6="\\ufe20-\\ufe2f",R6="\\u20d0-\\u20ff",I6=$6+D6+R6,L6="\\ufe0e\\ufe0f",B6="["+K5+"]",$g="["+I6+"]",Dg="\\ud83c[\\udffb-\\udfff]",F6="(?:"+$g+"|"+Dg+")",Y5="[^"+K5+"]",q5="(?:\\ud83c[\\udde6-\\uddff]){2}",Z5="[\\ud800-\\udbff][\\udc00-\\udfff]",z6="\\u200d",Q5=F6+"?",J5="["+L6+"]?",G6="(?:"+z6+"(?:"+[Y5,q5,Z5].join("|")+")"+J5+Q5+")*",U6=J5+Q5+G6,W6="(?:"+[Y5+$g+"?",$g,q5,Z5,B6].join("|")+")",X6=RegExp(Dg+"(?="+Dg+")|"+W6+U6,"g");function H6(e){return e.match(X6)||[]}var V6=H6,K6=T6,Y6=V5,q6=V6;function Z6(e){return Y6(e)?q6(e):K6(e)}var Q6=Z6,J6=k6,eE=V5,tE=Q6,rE=F5;function nE(e){return function(t){t=rE(t);var r=eE(t)?tE(t):void 0,n=r?r[0]:t.charAt(0),a=r?J6(r,1).join(""):t.slice(1);return n[e]()+a}}var aE=nE,oE=aE,iE=oE("toUpperCase"),sE=iE;const K0=Lt(sE);function zt(e){return function(){return e}}const ej=Math.cos,pd=Math.sin,Ba=Math.sqrt,gd=Math.PI,Y0=2*gd,Rg=Math.PI,Ig=2*Rg,Ni=1e-6,lE=Ig-Ni;function tj(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function cE(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tj;const r=10**t;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class uE{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tj:cE(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,o,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(t,r,n,a,o){if(t=+t,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,s=this._y1,l=n-t,u=a-r,d=i-t,f=s-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Ni)if(!(Math.abs(f*l-u*d)>Ni)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,m=a-s,v=l*l+u*u,w=p*p+m*m,x=Math.sqrt(v),g=Math.sqrt(h),y=o*Math.tan((Rg-Math.acos((v+h-w)/(2*x*g)))/2),S=y/g,b=y/x;Math.abs(S-1)>Ni&&this._append`L${t+S*d},${r+S*f}`,this._append`A${o},${o},0,0,${+(f*p>d*m)},${this._x1=t+b*l},${this._y1=r+b*u}`}}arc(t,r,n,a,o,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,d=r+l,f=1^i,h=i?a-o:o-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ni||Math.abs(this._y1-d)>Ni)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Ig+Ig),h>lE?this._append`A${n},${n},0,1,${f},${t-s},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Ni&&this._append`A${n},${n},0,${+(h>=Rg)},${f},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function uv(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new uE(t)}function fv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rj(e){this._context=e}rj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function q0(e){return new rj(e)}function nj(e){return e[0]}function aj(e){return e[1]}function oj(e,t){var r=zt(!0),n=null,a=q0,o=null,i=uv(s);e=typeof e=="function"?e:e===void 0?nj:zt(e),t=typeof t=="function"?t:t===void 0?aj:zt(t);function s(l){var u,d=(l=fv(l)).length,f,h=!1,p;for(n==null&&(o=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(f,u,l),+t(f,u,l));if(p)return o=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:zt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:zt(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:zt(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(o=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=o=null:o=a(n=l),s):n},s}function hf(e,t,r){var n=null,a=zt(!0),o=null,i=q0,s=null,l=uv(u);e=typeof e=="function"?e:e===void 0?nj:zt(+e),t=typeof t=="function"?t:zt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?aj:zt(+r);function u(f){var h,p,m,v=(f=fv(f)).length,w,x=!1,g,y=new Array(v),S=new Array(v);for(o==null&&(s=i(g=l())),h=0;h<=v;++h){if(!(h<v&&a(w=f[h],h,f))===x)if(x=!x)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=p;--m)s.point(y[m],S[m]);s.lineEnd(),s.areaEnd()}x&&(y[h]=+e(w,h,f),S[h]=+t(w,h,f),s.point(n?+n(w,h,f):y[h],r?+r(w,h,f):S[h]))}if(g)return s=null,g+""||null}function d(){return oj().defined(a).curve(i).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:zt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:zt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:zt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:zt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:zt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:zt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:zt(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,o!=null&&(s=i(o)),u):i},u.context=function(f){return arguments.length?(f==null?o=s=null:s=i(o=f),u):o},u}class ij{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function fE(e){return new ij(e,!0)}function dE(e){return new ij(e,!1)}const dv={draw(e,t){const r=Ba(t/gd);e.moveTo(r,0),e.arc(0,0,r,0,Y0)}},hE={draw(e,t){const r=Ba(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},sj=Ba(1/3),pE=sj*2,gE={draw(e,t){const r=Ba(t/pE),n=r*sj;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},mE={draw(e,t){const r=Ba(t),n=-r/2;e.rect(n,n,r,r)}},yE=.8908130915292852,lj=pd(gd/10)/pd(7*gd/10),vE=pd(Y0/10)*lj,xE=-ej(Y0/10)*lj,bE={draw(e,t){const r=Ba(t*yE),n=vE*r,a=xE*r;e.moveTo(0,-r),e.lineTo(n,a);for(let o=1;o<5;++o){const i=Y0*o/5,s=ej(i),l=pd(i);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},np=Ba(3),wE={draw(e,t){const r=-Ba(t/(np*3));e.moveTo(0,r*2),e.lineTo(-np*r,-r),e.lineTo(np*r,-r),e.closePath()}},sa=-.5,la=Ba(3)/2,Lg=1/Ba(12),kE=(Lg/2+1)*3,SE={draw(e,t){const r=Ba(t/kE),n=r/2,a=r*Lg,o=n,i=r*Lg+r,s=-o,l=i;e.moveTo(n,a),e.lineTo(o,i),e.lineTo(s,l),e.lineTo(sa*n-la*a,la*n+sa*a),e.lineTo(sa*o-la*i,la*o+sa*i),e.lineTo(sa*s-la*l,la*s+sa*l),e.lineTo(sa*n+la*a,sa*a-la*n),e.lineTo(sa*o+la*i,sa*i-la*o),e.lineTo(sa*s+la*l,sa*l-la*s),e.closePath()}};function jE(e,t){let r=null,n=uv(a);e=typeof e=="function"?e:zt(e||dv),t=typeof t=="function"?t:zt(t===void 0?64:+t);function a(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return a.type=function(o){return arguments.length?(e=typeof o=="function"?o:zt(o),a):e},a.size=function(o){return arguments.length?(t=typeof o=="function"?o:zt(+o),a):t},a.context=function(o){return arguments.length?(r=o??null,a):r},a}function md(){}function yd(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cj(e){this._context=e}cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NE(e){return new cj(e)}function uj(e){this._context=e}uj.prototype={areaStart:md,areaEnd:md,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _E(e){return new uj(e)}function fj(e){this._context=e}fj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PE(e){return new fj(e)}function dj(e){this._context=e}dj.prototype={areaStart:md,areaEnd:md,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function OE(e){return new dj(e)}function D1(e){return e<0?-1:1}function R1(e,t,r){var n=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),s=(o*a+i*n)/(n+a);return(D1(o)+D1(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(s))||0}function I1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ap(e,t,r){var n=e._x0,a=e._y0,o=e._x1,i=e._y1,s=(o-n)/3;e._context.bezierCurveTo(n+s,a+s*t,o-s,i-s*r,o,i)}function vd(e){this._context=e}vd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ap(this,this._t0,I1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ap(this,I1(this,r=R1(this,e,t)),r);break;default:ap(this,this._t0,r=R1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function hj(e){this._context=new pj(e)}(hj.prototype=Object.create(vd.prototype)).point=function(e,t){vd.prototype.point.call(this,t,e)};function pj(e){this._context=e}pj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,o){this._context.bezierCurveTo(t,e,n,r,o,a)}};function CE(e){return new vd(e)}function ME(e){return new hj(e)}function gj(e){this._context=e}gj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=L1(e),a=L1(t),o=0,i=1;i<r;++o,++i)this._context.bezierCurveTo(n[0][o],a[0][o],n[1][o],a[1][o],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function L1(e){var t,r=e.length-1,n,a=new Array(r),o=new Array(r),i=new Array(r);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function AE(e){return new gj(e)}function Z0(e,t){this._context=e,this._t=t}Z0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function EE(e){return new Z0(e,.5)}function TE(e){return new Z0(e,0)}function $E(e){return new Z0(e,1)}function Ks(e,t){if((i=e.length)>1)for(var r=1,n,a,o=e[t[0]],i,s=o.length;r<i;++r)for(a=o,o=e[t[r]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Bg(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function DE(e,t){return e[t]}function RE(e){const t=[];return t.key=e,t}function IE(){var e=zt([]),t=Bg,r=Ks,n=DE;function a(o){var i=Array.from(e.apply(this,arguments),RE),s,l=i.length,u=-1,d;for(const f of o)for(s=0,++u;s<l;++s)(i[s][u]=[0,+n(f,i[s].key,u,o)]).data=f;for(s=0,d=fv(t(i));s<l;++s)i[d[s]].index=s;return r(i,d),i}return a.keys=function(o){return arguments.length?(e=typeof o=="function"?o:zt(Array.from(o)),a):e},a.value=function(o){return arguments.length?(n=typeof o=="function"?o:zt(+o),a):n},a.order=function(o){return arguments.length?(t=o==null?Bg:typeof o=="function"?o:zt(Array.from(o)),a):t},a.offset=function(o){return arguments.length?(r=o??Ks,a):r},a}function LE(e,t){if((n=e.length)>0){for(var r,n,a=0,o=e[0].length,i;a<o;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Ks(e,t)}}function BE(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,o=n.length;r<o;++r){for(var i=0,s=0;i<a;++i)s+=e[i][r][1]||0;n[r][1]+=n[r][0]=-s/2}Ks(e,t)}}function FE(e,t){if(!(!((i=e.length)>0)||!((o=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,o,i;n<o;++n){for(var s=0,l=0,u=0;s<i;++s){for(var d=e[t[s]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,m=0;m<s;++m){var v=e[t[m]],w=v[n][1]||0,x=v[n-1][1]||0;p+=w-x}l+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,Ks(e,t)}}function Hc(e){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}var zE=["type","size","sizeType"];function Fg(){return Fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fg.apply(this,arguments)}function B1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function F1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B1(Object(r),!0).forEach(function(n){GE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GE(e,t,r){return t=UE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UE(e){var t=WE(e,"string");return Hc(t)=="symbol"?t:t+""}function WE(e,t){if(Hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XE(e,t){if(e==null)return{};var r=HE(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mj={symbolCircle:dv,symbolCross:hE,symbolDiamond:gE,symbolSquare:mE,symbolStar:bE,symbolTriangle:wE,symbolWye:SE},VE=Math.PI/180,KE=function(t){var r="symbol".concat(K0(t));return mj[r]||dv},YE=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*VE;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},qE=function(t,r){mj["symbol".concat(K0(t))]=r},Q0=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,o=a===void 0?64:a,i=t.sizeType,s=i===void 0?"area":i,l=XE(t,zE),u=F1(F1({},l),{},{type:n,size:o,sizeType:s}),d=function(){var w=KE(n),x=jE().type(w).size(YE(o,s,n));return x()},f=u.className,h=u.cx,p=u.cy,m=He(u,!0);return h===+h&&p===+p&&o===+o?L.createElement("path",Fg({},m,{className:ot("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};Q0.registerSymbol=qE;function Ys(e){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(this,arguments)}function z1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z1(Object(r),!0).forEach(function(n){Vc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vj(n.key),n)}}function e8(e,t,r){return t&&JE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function t8(e,t,r){return t=xd(t),r8(e,yj()?Reflect.construct(t,r||[],xd(e).constructor):t.apply(e,r))}function r8(e,t){if(t&&(Ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n8(e)}function n8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yj=function(){return!!e})()}function xd(e){return xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xd(e)}function a8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gg(e,t)}function Gg(e,t){return Gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gg(e,t)}function Vc(e,t,r){return t=vj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vj(e){var t=o8(e,"string");return Ys(t)=="symbol"?t:t+""}function o8(e,t){if(Ys(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ca=32,hv=function(e){function t(){return QE(this,t),t8(this,t,arguments)}return a8(t,e),e8(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,o=ca/2,i=ca/6,s=ca/3,l=n.inactive?a:n.color;if(n.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:ca,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(ca,"M").concat(2*s,",").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return L.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ca/8,"h").concat(ca,"v").concat(ca*3/4,"h").concat(-ca,"z"),className:"recharts-legend-icon"});if(L.isValidElement(n.legendIcon)){var u=ZE({},n);return delete u.legendIcon,L.cloneElement(n.legendIcon,u)}return L.createElement(Q0,{fill:l,cx:o,cy:o,size:ca,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,o=a.payload,i=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ca,height:ca},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,m){var v=p.formatter||l,w=ot(Vc(Vc({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=Ve(p.value)?null:p.value;yo(!Ve(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?u:p.color;return L.createElement("li",zg({className:w,style:f,key:"legend-item-".concat(m)},Xc(n.props,p,m)),L.createElement(Eg,{width:i,height:i,viewBox:d,style:h},n.renderIcon(p)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},v?v(x,p,m):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,o=n.layout,i=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?i:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(j.PureComponent);Vc(hv,"displayName","Legend");Vc(hv,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var i8=D0;function s8(){this.__data__=new i8,this.size=0}var l8=s8;function c8(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var u8=c8;function f8(e){return this.__data__.get(e)}var d8=f8;function h8(e){return this.__data__.has(e)}var p8=h8,g8=D0,m8=tv,y8=rv,v8=200;function x8(e,t){var r=this.__data__;if(r instanceof g8){var n=r.__data__;if(!m8||n.length<v8-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new y8(n)}return r.set(e,t),this.size=r.size,this}var b8=x8,w8=D0,k8=l8,S8=u8,j8=d8,N8=p8,_8=b8;function Cl(e){var t=this.__data__=new w8(e);this.size=t.size}Cl.prototype.clear=k8;Cl.prototype.delete=S8;Cl.prototype.get=j8;Cl.prototype.has=N8;Cl.prototype.set=_8;var xj=Cl,P8="__lodash_hash_undefined__";function O8(e){return this.__data__.set(e,P8),this}var C8=O8;function M8(e){return this.__data__.has(e)}var A8=M8,E8=rv,T8=C8,$8=A8;function bd(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new E8;++t<r;)this.add(e[t])}bd.prototype.add=bd.prototype.push=T8;bd.prototype.has=$8;var bj=bd;function D8(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var wj=D8;function R8(e,t){return e.has(t)}var kj=R8,I8=bj,L8=wj,B8=kj,F8=1,z8=2;function G8(e,t,r,n,a,o){var i=r&F8,s=e.length,l=t.length;if(s!=l&&!(i&&l>s))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,p=r&z8?new I8:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var m=e[f],v=t[f];if(n)var w=i?n(v,m,f,t,e,o):n(m,v,f,e,t,o);if(w!==void 0){if(w)continue;h=!1;break}if(p){if(!L8(t,function(x,g){if(!B8(p,g)&&(m===x||a(m,x,r,n,o)))return p.push(g)})){h=!1;break}}else if(!(m===v||a(m,v,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var Sj=G8,U8=ro,W8=U8.Uint8Array,X8=W8;function H8(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var V8=H8;function K8(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var pv=K8,G1=Eu,U1=X8,Y8=ev,q8=Sj,Z8=V8,Q8=pv,J8=1,eT=2,tT="[object Boolean]",rT="[object Date]",nT="[object Error]",aT="[object Map]",oT="[object Number]",iT="[object RegExp]",sT="[object Set]",lT="[object String]",cT="[object Symbol]",uT="[object ArrayBuffer]",fT="[object DataView]",W1=G1?G1.prototype:void 0,op=W1?W1.valueOf:void 0;function dT(e,t,r,n,a,o,i){switch(r){case fT:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case uT:return!(e.byteLength!=t.byteLength||!o(new U1(e),new U1(t)));case tT:case rT:case oT:return Y8(+e,+t);case nT:return e.name==t.name&&e.message==t.message;case iT:case lT:return e==t+"";case aT:var s=Z8;case sT:var l=n&J8;if(s||(s=Q8),e.size!=t.size&&!l)return!1;var u=i.get(e);if(u)return u==t;n|=eT,i.set(e,t);var d=q8(s(e),s(t),n,a,o,i);return i.delete(e),d;case cT:if(op)return op.call(e)==op.call(t)}return!1}var hT=dT;function pT(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var jj=pT,gT=jj,mT=Un;function yT(e,t,r){var n=t(e);return mT(e)?n:gT(n,r(e))}var vT=yT;function xT(e,t){for(var r=-1,n=e==null?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o}var bT=xT;function wT(){return[]}var kT=wT,ST=bT,jT=kT,NT=Object.prototype,_T=NT.propertyIsEnumerable,X1=Object.getOwnPropertySymbols,PT=X1?function(e){return e==null?[]:(e=Object(e),ST(X1(e),function(t){return _T.call(e,t)}))}:jT,OT=PT;function CT(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var MT=CT,AT=Oo,ET=Co,TT="[object Arguments]";function $T(e){return ET(e)&&AT(e)==TT}var DT=$T,H1=DT,RT=Co,Nj=Object.prototype,IT=Nj.hasOwnProperty,LT=Nj.propertyIsEnumerable,BT=H1(function(){return arguments}())?H1:function(e){return RT(e)&&IT.call(e,"callee")&&!LT.call(e,"callee")},gv=BT,wd={exports:{}};function FT(){return!1}var zT=FT;wd.exports;(function(e,t){var r=ro,n=zT,a=t&&!t.nodeType&&t,o=a&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===a,s=i?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(wd,wd.exports);var _j=wd.exports,GT=9007199254740991,UT=/^(?:0|[1-9]\d*)$/;function WT(e,t){var r=typeof e;return t=t??GT,!!t&&(r=="number"||r!="symbol"&&UT.test(e))&&e>-1&&e%1==0&&e<t}var mv=WT,XT=9007199254740991;function HT(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=XT}var yv=HT,VT=Oo,KT=yv,YT=Co,qT="[object Arguments]",ZT="[object Array]",QT="[object Boolean]",JT="[object Date]",e$="[object Error]",t$="[object Function]",r$="[object Map]",n$="[object Number]",a$="[object Object]",o$="[object RegExp]",i$="[object Set]",s$="[object String]",l$="[object WeakMap]",c$="[object ArrayBuffer]",u$="[object DataView]",f$="[object Float32Array]",d$="[object Float64Array]",h$="[object Int8Array]",p$="[object Int16Array]",g$="[object Int32Array]",m$="[object Uint8Array]",y$="[object Uint8ClampedArray]",v$="[object Uint16Array]",x$="[object Uint32Array]",Kt={};Kt[f$]=Kt[d$]=Kt[h$]=Kt[p$]=Kt[g$]=Kt[m$]=Kt[y$]=Kt[v$]=Kt[x$]=!0;Kt[qT]=Kt[ZT]=Kt[c$]=Kt[QT]=Kt[u$]=Kt[JT]=Kt[e$]=Kt[t$]=Kt[r$]=Kt[n$]=Kt[a$]=Kt[o$]=Kt[i$]=Kt[s$]=Kt[l$]=!1;function b$(e){return YT(e)&&KT(e.length)&&!!Kt[VT(e)]}var w$=b$;function k$(e){return function(t){return e(t)}}var Pj=k$,kd={exports:{}};kd.exports;(function(e,t){var r=$5,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===n,i=o&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s})(kd,kd.exports);var S$=kd.exports,j$=w$,N$=Pj,V1=S$,K1=V1&&V1.isTypedArray,_$=K1?N$(K1):j$,Oj=_$,P$=MT,O$=gv,C$=Un,M$=_j,A$=mv,E$=Oj,T$=Object.prototype,$$=T$.hasOwnProperty;function D$(e,t){var r=C$(e),n=!r&&O$(e),a=!r&&!n&&M$(e),o=!r&&!n&&!a&&E$(e),i=r||n||a||o,s=i?P$(e.length,String):[],l=s.length;for(var u in e)(t||$$.call(e,u))&&!(i&&(u=="length"||a&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||A$(u,l)))&&s.push(u);return s}var R$=D$,I$=Object.prototype;function L$(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||I$;return e===r}var B$=L$;function F$(e,t){return function(r){return e(t(r))}}var Cj=F$,z$=Cj,G$=z$(Object.keys,Object),U$=G$,W$=B$,X$=U$,H$=Object.prototype,V$=H$.hasOwnProperty;function K$(e){if(!W$(e))return X$(e);var t=[];for(var r in Object(e))V$.call(e,r)&&r!="constructor"&&t.push(r);return t}var Y$=K$,q$=Jy,Z$=yv;function Q$(e){return e!=null&&Z$(e.length)&&!q$(e)}var Tu=Q$,J$=R$,e7=Y$,t7=Tu;function r7(e){return t7(e)?J$(e):e7(e)}var J0=r7,n7=vT,a7=OT,o7=J0;function i7(e){return n7(e,o7,a7)}var s7=i7,Y1=s7,l7=1,c7=Object.prototype,u7=c7.hasOwnProperty;function f7(e,t,r,n,a,o){var i=r&l7,s=Y1(e),l=s.length,u=Y1(t),d=u.length;if(l!=d&&!i)return!1;for(var f=l;f--;){var h=s[f];if(!(i?h in t:u7.call(t,h)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var v=!0;o.set(e,t),o.set(t,e);for(var w=i;++f<l;){h=s[f];var x=e[h],g=t[h];if(n)var y=i?n(g,x,h,t,e,o):n(x,g,h,e,t,o);if(!(y===void 0?x===g||a(x,g,r,n,o):y)){v=!1;break}w||(w=h=="constructor")}if(v&&!w){var S=e.constructor,b=t.constructor;S!=b&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof b=="function"&&b instanceof b)&&(v=!1)}return o.delete(e),o.delete(t),v}var d7=f7,h7=ts,p7=ro,g7=h7(p7,"DataView"),m7=g7,y7=ts,v7=ro,x7=y7(v7,"Promise"),b7=x7,w7=ts,k7=ro,S7=w7(k7,"Set"),Mj=S7,j7=ts,N7=ro,_7=j7(N7,"WeakMap"),P7=_7,Ug=m7,Wg=tv,Xg=b7,Hg=Mj,Vg=P7,Aj=Oo,Ml=R5,q1="[object Map]",O7="[object Object]",Z1="[object Promise]",Q1="[object Set]",J1="[object WeakMap]",eb="[object DataView]",C7=Ml(Ug),M7=Ml(Wg),A7=Ml(Xg),E7=Ml(Hg),T7=Ml(Vg),_i=Aj;(Ug&&_i(new Ug(new ArrayBuffer(1)))!=eb||Wg&&_i(new Wg)!=q1||Xg&&_i(Xg.resolve())!=Z1||Hg&&_i(new Hg)!=Q1||Vg&&_i(new Vg)!=J1)&&(_i=function(e){var t=Aj(e),r=t==O7?e.constructor:void 0,n=r?Ml(r):"";if(n)switch(n){case C7:return eb;case M7:return q1;case A7:return Z1;case E7:return Q1;case T7:return J1}return t});var $7=_i,ip=xj,D7=Sj,R7=hT,I7=d7,tb=$7,rb=Un,nb=_j,L7=Oj,B7=1,ab="[object Arguments]",ob="[object Array]",pf="[object Object]",F7=Object.prototype,ib=F7.hasOwnProperty;function z7(e,t,r,n,a,o){var i=rb(e),s=rb(t),l=i?ob:tb(e),u=s?ob:tb(t);l=l==ab?pf:l,u=u==ab?pf:u;var d=l==pf,f=u==pf,h=l==u;if(h&&nb(e)){if(!nb(t))return!1;i=!0,d=!1}if(h&&!d)return o||(o=new ip),i||L7(e)?D7(e,t,r,n,a,o):R7(e,t,l,r,n,a,o);if(!(r&B7)){var p=d&&ib.call(e,"__wrapped__"),m=f&&ib.call(t,"__wrapped__");if(p||m){var v=p?e.value():e,w=m?t.value():t;return o||(o=new ip),a(v,w,r,n,o)}}return h?(o||(o=new ip),I7(e,t,r,n,a,o)):!1}var G7=z7,U7=G7,sb=Co;function Ej(e,t,r,n,a){return e===t?!0:e==null||t==null||!sb(e)&&!sb(t)?e!==e&&t!==t:U7(e,t,r,n,Ej,a)}var vv=Ej,W7=xj,X7=vv,H7=1,V7=2;function K7(e,t,r,n){var a=r.length,o=a,i=!n;if(e==null)return!o;for(e=Object(e);a--;){var s=r[a];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<o;){s=r[a];var l=s[0],u=e[l],d=s[1];if(i&&s[2]){if(u===void 0&&!(l in e))return!1}else{var f=new W7;if(n)var h=n(u,d,l,e,t,f);if(!(h===void 0?X7(d,u,H7|V7,n,f):h))return!1}}return!0}var Y7=K7,q7=fi;function Z7(e){return e===e&&!q7(e)}var Tj=Z7,Q7=Tj,J7=J0;function e9(e){for(var t=J7(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Q7(a)]}return t}var t9=e9;function r9(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var $j=r9,n9=Y7,a9=t9,o9=$j;function i9(e){var t=a9(e);return t.length==1&&t[0][2]?o9(t[0][0],t[0][1]):function(r){return r===e||n9(r,e,t)}}var s9=i9;function l9(e,t){return e!=null&&t in Object(e)}var c9=l9,u9=z5,f9=gv,d9=Un,h9=mv,p9=yv,g9=I0;function m9(e,t,r){t=u9(t,e);for(var n=-1,a=t.length,o=!1;++n<a;){var i=g9(t[n]);if(!(o=e!=null&&r(e,i)))break;e=e[i]}return o||++n!=a?o:(a=e==null?0:e.length,!!a&&p9(a)&&h9(i,a)&&(d9(e)||f9(e)))}var y9=m9,v9=c9,x9=y9;function b9(e,t){return e!=null&&x9(e,t,v9)}var w9=b9,k9=vv,S9=G5,j9=w9,N9=Qy,_9=Tj,P9=$j,O9=I0,C9=1,M9=2;function A9(e,t){return N9(e)&&_9(t)?P9(O9(e),t):function(r){var n=S9(r,e);return n===void 0&&n===t?j9(r,e):k9(t,n,C9|M9)}}var E9=A9;function T9(e){return e}var Al=T9;function $9(e){return function(t){return t==null?void 0:t[e]}}var D9=$9,R9=ov;function I9(e){return function(t){return R9(t,e)}}var L9=I9,B9=D9,F9=L9,z9=Qy,G9=I0;function U9(e){return z9(e)?B9(G9(e)):F9(e)}var W9=U9,X9=s9,H9=E9,V9=Al,K9=Un,Y9=W9;function q9(e){return typeof e=="function"?e:e==null?V9:typeof e=="object"?K9(e)?H9(e[0],e[1]):X9(e):Y9(e)}var di=q9;function Z9(e,t,r,n){for(var a=e.length,o=r+(n?1:-1);n?o--:++o<a;)if(t(e[o],o,e))return o;return-1}var Dj=Z9;function Q9(e){return e!==e}var J9=Q9;function eD(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var tD=eD,rD=Dj,nD=J9,aD=tD;function oD(e,t,r){return t===t?aD(e,t,r):rD(e,nD,r)}var iD=oD,sD=iD;function lD(e,t){var r=e==null?0:e.length;return!!r&&sD(e,t,0)>-1}var cD=lD;function uD(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var fD=uD;function dD(){}var hD=dD,sp=Mj,pD=hD,gD=pv,mD=1/0,yD=sp&&1/gD(new sp([,-0]))[1]==mD?function(e){return new sp(e)}:pD,vD=yD,xD=bj,bD=cD,wD=fD,kD=kj,SD=vD,jD=pv,ND=200;function _D(e,t,r){var n=-1,a=bD,o=e.length,i=!0,s=[],l=s;if(r)i=!1,a=wD;else if(o>=ND){var u=t?null:SD(e);if(u)return jD(u);i=!1,a=kD,l=new xD}else l=t?[]:s;e:for(;++n<o;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,i&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;t&&l.push(f),s.push(d)}else a(l,f,r)||(l!==s&&l.push(f),s.push(d))}return s}var PD=_D,OD=di,CD=PD;function MD(e,t){return e&&e.length?CD(e,OD(t)):[]}var AD=MD;const lb=Lt(AD);function Rj(e,t,r){return t===!0?lb(e,r):Ve(t)?lb(e,t):e}function qs(e){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(e)}var ED=["ref"];function cb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cb(Object(r),!0).forEach(function(n){eh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ub(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lj(n.key),n)}}function $D(e,t,r){return t&&ub(e.prototype,t),r&&ub(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DD(e,t,r){return t=Sd(t),RD(e,Ij()?Reflect.construct(t,r||[],Sd(e).constructor):t.apply(e,r))}function RD(e,t){if(t&&(qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ID(e)}function ID(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ij(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ij=function(){return!!e})()}function Sd(e){return Sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sd(e)}function LD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kg(e,t)}function Kg(e,t){return Kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Kg(e,t)}function eh(e,t,r){return t=Lj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lj(e){var t=BD(e,"string");return qs(t)=="symbol"?t:t+""}function BD(e,t){if(qs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function FD(e,t){if(e==null)return{};var r=zD(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zD(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function GD(e){return e.value}function UD(e,t){if(L.isValidElement(e))return L.cloneElement(e,t);if(typeof e=="function")return L.createElement(e,t);t.ref;var r=FD(t,ED);return L.createElement(hv,r)}var fb=1,Ya=function(e){function t(){var r;TD(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=DD(this,t,[].concat(a)),eh(r,"lastBoundingBox",{width:-1,height:-1}),r}return LD(t,e),$D(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>fb||Math.abs(a.height-this.lastBoundingBox.height)>fb)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?oo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,o=a.layout,i=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(i==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=i==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();h={top:((d||0)-m.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return oo(oo({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,o=a.content,i=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=oo(oo({position:"absolute",width:i||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return L.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},UD(o,oo(oo({},this.props),{},{payload:Rj(d,u,GD)})))}}],[{key:"getWithHeight",value:function(n,a){var o=oo(oo({},this.defaultProps),n.props),i=o.layout;return i==="vertical"&&de(n.props.height)?{height:n.props.height}:i==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);eh(Ya,"displayName","Legend");eh(Ya,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var db=Eu,WD=gv,XD=Un,hb=db?db.isConcatSpreadable:void 0;function HD(e){return XD(e)||WD(e)||!!(hb&&e&&e[hb])}var VD=HD,KD=jj,YD=VD;function Bj(e,t,r,n,a){var o=-1,i=e.length;for(r||(r=YD),a||(a=[]);++o<i;){var s=e[o];t>0&&r(s)?t>1?Bj(s,t-1,r,n,a):KD(a,s):n||(a[a.length]=s)}return a}var Fj=Bj;function qD(e){return function(t,r,n){for(var a=-1,o=Object(t),i=n(t),s=i.length;s--;){var l=i[e?s:++a];if(r(o[l],l,o)===!1)break}return t}}var ZD=qD,QD=ZD,JD=QD(),eR=JD,tR=eR,rR=J0;function nR(e,t){return e&&tR(e,t,rR)}var zj=nR,aR=Tu;function oR(e,t){return function(r,n){if(r==null)return r;if(!aR(r))return e(r,n);for(var a=r.length,o=t?a:-1,i=Object(r);(t?o--:++o<a)&&n(i[o],o,i)!==!1;);return r}}var iR=oR,sR=zj,lR=iR,cR=lR(sR),xv=cR,uR=xv,fR=Tu;function dR(e,t){var r=-1,n=fR(e)?Array(e.length):[];return uR(e,function(a,o,i){n[++r]=t(a,o,i)}),n}var Gj=dR;function hR(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var pR=hR,pb=Sl;function gR(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,o=pb(e),i=t!==void 0,s=t===null,l=t===t,u=pb(t);if(!s&&!u&&!o&&e>t||o&&i&&l&&!s&&!u||n&&i&&l||!r&&l||!a)return 1;if(!n&&!o&&!u&&e<t||u&&r&&a&&!n&&!o||s&&r&&a||!i&&a||!l)return-1}return 0}var mR=gR,yR=mR;function vR(e,t,r){for(var n=-1,a=e.criteria,o=t.criteria,i=a.length,s=r.length;++n<i;){var l=yR(a[n],o[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var xR=vR,lp=av,bR=ov,wR=di,kR=Gj,SR=pR,jR=Pj,NR=xR,_R=Al,PR=Un;function OR(e,t,r){t.length?t=lp(t,function(o){return PR(o)?function(i){return bR(i,o.length===1?o[0]:o)}:o}):t=[_R];var n=-1;t=lp(t,jR(wR));var a=kR(e,function(o,i,s){var l=lp(t,function(u){return u(o)});return{criteria:l,index:++n,value:o}});return SR(a,function(o,i){return NR(o,i,r)})}var CR=OR;function MR(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var AR=MR,ER=AR,gb=Math.max;function TR(e,t,r){return t=gb(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,o=gb(n.length-t,0),i=Array(o);++a<o;)i[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(i),ER(e,this,s)}}var $R=TR;function DR(e){return function(){return e}}var RR=DR,IR=ts,LR=function(){try{var e=IR(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Uj=LR,BR=RR,mb=Uj,FR=Al,zR=mb?function(e,t){return mb(e,"toString",{configurable:!0,enumerable:!1,value:BR(t),writable:!0})}:FR,GR=zR,UR=800,WR=16,XR=Date.now;function HR(e){var t=0,r=0;return function(){var n=XR(),a=WR-(n-r);if(r=n,a>0){if(++t>=UR)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var VR=HR,KR=GR,YR=VR,qR=YR(KR),ZR=qR,QR=Al,JR=$R,eI=ZR;function tI(e,t){return eI(JR(e,t,QR),e+"")}var rI=tI,nI=ev,aI=Tu,oI=mv,iI=fi;function sI(e,t,r){if(!iI(r))return!1;var n=typeof t;return(n=="number"?aI(r)&&oI(t,r.length):n=="string"&&t in r)?nI(r[t],e):!1}var th=sI,lI=Fj,cI=CR,uI=rI,yb=th,fI=uI(function(e,t){if(e==null)return[];var r=t.length;return r>1&&yb(e,t[0],t[1])?t=[]:r>2&&yb(t[0],t[1],t[2])&&(t=[t[0]]),cI(e,lI(t,1),[])}),dI=fI;const bv=Lt(dI);function Kc(e){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(e)}function Yg(){return Yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yg.apply(this,arguments)}function hI(e,t){return yI(e)||mI(e,t)||gI(e,t)||pI()}function pI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gI(e,t){if(e){if(typeof e=="string")return vb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vb(e,t)}}function vb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mI(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function yI(e){if(Array.isArray(e))return e}function xb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xb(Object(r),!0).forEach(function(n){vI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vI(e,t,r){return t=xI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xI(e){var t=bI(e,"string");return Kc(t)=="symbol"?t:t+""}function bI(e,t){if(Kc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wI(e){return Array.isArray(e)&&Br(e[0])&&Br(e[1])?e.join(" ~ "):e}var kI=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,o=a===void 0?{}:a,i=t.itemStyle,s=i===void 0?{}:i,l=t.labelStyle,u=l===void 0?{}:l,d=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,m=t.labelClassName,v=t.label,w=t.labelFormatter,x=t.accessibilityLayer,g=x===void 0?!1:x,y=function(){if(d&&d.length){var P={padding:0,margin:0},M=(h?bv(d,h):d).map(function(D,T){if(D.type==="none")return null;var B=cp({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s),C=D.formatter||f||wI,R=D.value,z=D.name,G=R,ne=z;if(C&&G!=null&&ne!=null){var X=C(R,z,D,T,d);if(Array.isArray(X)){var F=hI(X,2);G=F[0],ne=F[1]}else G=X}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:B},Br(ne)?L.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,Br(ne)?L.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,L.createElement("span",{className:"recharts-tooltip-item-value"},G),L.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:P},M)}return null},S=cp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),b=cp({margin:0},u),k=!Ue(v),_=k?v:"",N=ot("recharts-default-tooltip",p),O=ot("recharts-tooltip-label",m);k&&w&&d!==void 0&&d!==null&&(_=w(v,d));var A=g?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",Yg({className:N,style:S},A),L.createElement("p",{className:O,style:b},L.isValidElement(_)?_:"".concat(_)),y())};function Yc(e){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(e)}function gf(e,t,r){return t=SI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SI(e){var t=jI(e,"string");return Yc(t)=="symbol"?t:t+""}function jI(e,t){if(Yc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ql="recharts-tooltip-wrapper",NI={visibility:"hidden"};function _I(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ot(ql,gf(gf(gf(gf({},"".concat(ql,"-right"),de(r)&&t&&de(t.x)&&r>=t.x),"".concat(ql,"-left"),de(r)&&t&&de(t.x)&&r<t.x),"".concat(ql,"-bottom"),de(n)&&t&&de(t.y)&&n>=t.y),"".concat(ql,"-top"),de(n)&&t&&de(t.y)&&n<t.y))}function bb(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,o=e.position,i=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(o&&de(o[n]))return o[n];var d=r[n]-s-a,f=r[n]+a;if(t[n])return i[n]?d:f;if(i[n]){var h=d,p=l[n];return h<p?Math.max(f,l[n]):Math.max(d,l[n])}var m=f+s,v=l[n]+u;return m>v?Math.max(d,l[n]):Math.max(f,l[n])}function PI(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function OI(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,o=e.reverseDirection,i=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,d,f;return i.height>0&&i.width>0&&r?(d=bb({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:o,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=bb({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:o,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=PI({translateX:d,translateY:f,useTranslate3d:s})):u=NI,{cssProperties:u,cssClasses:_I({translateX:d,translateY:f,coordinate:r})}}function Zs(e){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zs(e)}function wb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wb(Object(r),!0).forEach(function(n){Zg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xj(n.key),n)}}function AI(e,t,r){return t&&MI(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EI(e,t,r){return t=jd(t),TI(e,Wj()?Reflect.construct(t,r||[],jd(e).constructor):t.apply(e,r))}function TI(e,t){if(t&&(Zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $I(e)}function $I(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wj=function(){return!!e})()}function jd(e){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jd(e)}function DI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qg(e,t)}function qg(e,t){return qg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qg(e,t)}function Zg(e,t,r){return t=Xj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xj(e){var t=RI(e,"string");return Zs(t)=="symbol"?t:t+""}function RI(e,t){if(Zs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sb=1,II=function(e){function t(){var r;CI(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=EI(this,t,[].concat(a)),Zg(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Zg(r,"handleKeyDown",function(i){if(i.key==="Escape"){var s,l,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return DI(t,e),AI(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Sb||Math.abs(n.height-this.state.lastBoundingBox.height)>Sb)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,o=a.active,i=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,m=a.position,v=a.reverseDirection,w=a.useTranslate3d,x=a.viewBox,g=a.wrapperStyle,y=OI({allowEscapeViewBox:i,coordinate:d,offsetTopLeft:p,position:m,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:x}),S=y.cssClasses,b=y.cssProperties,k=kb(kb({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},g);return L.createElement("div",{tabIndex:-1,className:S,style:k,ref:function(N){n.wrapperNode=N}},u)}}])}(j.PureComponent),LI=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},hi={isSsr:LI()};function Qs(e){"@babel/helpers - typeof";return Qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qs(e)}function jb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jb(Object(r),!0).forEach(function(n){wv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vj(n.key),n)}}function zI(e,t,r){return t&&FI(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GI(e,t,r){return t=Nd(t),UI(e,Hj()?Reflect.construct(t,r||[],Nd(e).constructor):t.apply(e,r))}function UI(e,t){if(t&&(Qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WI(e)}function WI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hj=function(){return!!e})()}function Nd(e){return Nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nd(e)}function XI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qg(e,t)}function Qg(e,t){return Qg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qg(e,t)}function wv(e,t,r){return t=Vj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vj(e){var t=HI(e,"string");return Qs(t)=="symbol"?t:t+""}function HI(e,t){if(Qs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function VI(e){return e.dataKey}function KI(e,t){return L.isValidElement(e)?L.cloneElement(e,t):typeof e=="function"?L.createElement(e,t):L.createElement(kI,t)}var Kr=function(e){function t(){return BI(this,t),GI(this,t,arguments)}return XI(t,e),zI(t,[{key:"render",value:function(){var n=this,a=this.props,o=a.active,i=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,m=a.payload,v=a.payloadUniqBy,w=a.position,x=a.reverseDirection,g=a.useTranslate3d,y=a.viewBox,S=a.wrapperStyle,b=m??[];f&&b.length&&(b=Rj(m.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),v,VI));var k=b.length>0;return L.createElement(II,{allowEscapeViewBox:i,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:d,hasPayload:k,offset:p,position:w,reverseDirection:x,useTranslate3d:g,viewBox:y,wrapperStyle:S},KI(u,Nb(Nb({},this.props),{},{payload:b})))}}])}(j.PureComponent);wv(Kr,"displayName","Tooltip");wv(Kr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!hi.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var YI=ro,qI=function(){return YI.Date.now()},ZI=qI,QI=/\s/;function JI(e){for(var t=e.length;t--&&QI.test(e.charAt(t)););return t}var eL=JI,tL=eL,rL=/^\s+/;function nL(e){return e&&e.slice(0,tL(e)+1).replace(rL,"")}var aL=nL,oL=aL,_b=fi,iL=Sl,Pb=NaN,sL=/^[-+]0x[0-9a-f]+$/i,lL=/^0b[01]+$/i,cL=/^0o[0-7]+$/i,uL=parseInt;function fL(e){if(typeof e=="number")return e;if(iL(e))return Pb;if(_b(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=_b(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=oL(e);var r=lL.test(e);return r||cL.test(e)?uL(e.slice(2),r?2:8):sL.test(e)?Pb:+e}var Kj=fL,dL=fi,up=ZI,Ob=Kj,hL="Expected a function",pL=Math.max,gL=Math.min;function mL(e,t,r){var n,a,o,i,s,l,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(hL);t=Ob(t)||0,dL(r)&&(d=!!r.leading,f="maxWait"in r,o=f?pL(Ob(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function p(k){var _=n,N=a;return n=a=void 0,u=k,i=e.apply(N,_),i}function m(k){return u=k,s=setTimeout(x,t),d?p(k):i}function v(k){var _=k-l,N=k-u,O=t-_;return f?gL(O,o-N):O}function w(k){var _=k-l,N=k-u;return l===void 0||_>=t||_<0||f&&N>=o}function x(){var k=up();if(w(k))return g(k);s=setTimeout(x,v(k))}function g(k){return s=void 0,h&&n?p(k):(n=a=void 0,i)}function y(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function S(){return s===void 0?i:g(up())}function b(){var k=up(),_=w(k);if(n=arguments,a=this,l=k,_){if(s===void 0)return m(l);if(f)return clearTimeout(s),s=setTimeout(x,t),p(l)}return s===void 0&&(s=setTimeout(x,t)),i}return b.cancel=y,b.flush=S,b}var yL=mL,vL=yL,xL=fi,bL="Expected a function";function wL(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(bL);return xL(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),vL(e,t,{leading:n,maxWait:t,trailing:a})}var kL=wL;const Yj=Lt(kL);function qc(e){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(e)}function Cb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cb(Object(r),!0).forEach(function(n){SL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SL(e,t,r){return t=jL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jL(e){var t=NL(e,"string");return qc(t)=="symbol"?t:t+""}function NL(e,t){if(qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _L(e,t){return ML(e)||CL(e,t)||OL(e,t)||PL()}function PL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OL(e,t){if(e){if(typeof e=="string")return Mb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mb(e,t)}}function Mb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function ML(e){if(Array.isArray(e))return e}var vo=j.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,o=e.width,i=o===void 0?"100%":o,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,p=e.children,m=e.debounce,v=m===void 0?0:m,w=e.id,x=e.className,g=e.onResize,y=e.style,S=y===void 0?{}:y,b=j.useRef(null),k=j.useRef();k.current=g,j.useImperativeHandle(t,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var _=j.useState({containerWidth:a.width,containerHeight:a.height}),N=_L(_,2),O=N[0],A=N[1],E=j.useCallback(function(M,D){A(function(T){var B=Math.round(M),C=Math.round(D);return T.containerWidth===B&&T.containerHeight===C?T:{containerWidth:B,containerHeight:C}})},[]);j.useEffect(function(){var M=function(z){var G,ne=z[0].contentRect,X=ne.width,F=ne.height;E(X,F),(G=k.current)===null||G===void 0||G.call(k,X,F)};v>0&&(M=Yj(M,v,{trailing:!0,leading:!1}));var D=new ResizeObserver(M),T=b.current.getBoundingClientRect(),B=T.width,C=T.height;return E(B,C),D.observe(b.current),function(){D.disconnect()}},[E,v]);var P=j.useMemo(function(){var M=O.containerWidth,D=O.containerHeight;if(M<0||D<0)return null;yo(Ai(i)||Ai(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),yo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=Ai(i)?M:i,B=Ai(l)?D:l;r&&r>0&&(T?B=T/r:B&&(T=B*r),h&&B>h&&(B=h)),yo(T>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,B,i,l,d,f,r);var C=!Array.isArray(p)&&mo(p.type).endsWith("Chart");return L.Children.map(p,function(R){return L.isValidElement(R)?j.cloneElement(R,mf({width:T,height:B},C?{style:mf({height:"100%",width:"100%",maxHeight:B,maxWidth:T},R.props.style)}:{})):R})},[r,p,l,h,f,d,O,i]);return L.createElement("div",{id:w?"".concat(w):void 0,className:ot("recharts-responsive-container",x),style:mf(mf({},S),{},{width:i,height:l,minWidth:d,minHeight:f,maxHeight:h}),ref:b},P)}),kv=function(t){return null};kv.displayName="Cell";function Zc(e){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}function Ab(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ab(Object(r),!0).forEach(function(n){AL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ab(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AL(e,t,r){return t=EL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EL(e){var t=TL(e,"string");return Zc(t)=="symbol"?t:t+""}function TL(e,t){if(Zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ds={widthCache:{},cacheCount:0},$L=2e3,DL={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Eb="recharts_measurement_span";function RL(e){var t=Jg({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var bc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hi.isSsr)return{width:0,height:0};var n=RL(r),a=JSON.stringify({text:t,copyStyle:n});if(ds.widthCache[a])return ds.widthCache[a];try{var o=document.getElementById(Eb);o||(o=document.createElement("span"),o.setAttribute("id",Eb),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=Jg(Jg({},DL),n);Object.assign(o.style,i),o.textContent="".concat(t);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return ds.widthCache[a]=l,++ds.cacheCount>$L&&(ds.cacheCount=0,ds.widthCache={}),l}catch{return{width:0,height:0}}},IL=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Qc(e){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function _d(e,t){return zL(e)||FL(e,t)||BL(e,t)||LL()}function LL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BL(e,t){if(e){if(typeof e=="string")return Tb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tb(e,t)}}function Tb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function zL(e){if(Array.isArray(e))return e}function GL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WL(n.key),n)}}function UL(e,t,r){return t&&$b(e.prototype,t),r&&$b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WL(e){var t=XL(e,"string");return Qc(t)=="symbol"?t:t+""}function XL(e,t){if(Qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Db=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rb=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HL=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,VL=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KL=Object.keys(qj),Os="NaN";function YL(e,t){return e*qj[t]}var yf=function(){function e(t,r){GL(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!HL.test(r)&&(this.num=NaN,this.unit=""),KL.includes(r)&&(this.num=YL(t,r),this.unit="px")}return UL(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=VL.exec(r))!==null&&n!==void 0?n:[],o=_d(a,3),i=o[1],s=o[2];return new e(parseFloat(i),s??"")}}])}();function Zj(e){if(e.includes(Os))return Os;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Db.exec(t))!==null&&r!==void 0?r:[],a=_d(n,4),o=a[1],i=a[2],s=a[3],l=yf.parse(o??""),u=yf.parse(s??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Os;t=t.replace(Db,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=Rb.exec(t))!==null&&f!==void 0?f:[],p=_d(h,4),m=p[1],v=p[2],w=p[3],x=yf.parse(m??""),g=yf.parse(w??""),y=v==="+"?x.add(g):x.subtract(g);if(y.isNaN())return Os;t=t.replace(Rb,y.toString())}return t}var Ib=/\(([^()]*)\)/;function qL(e){for(var t=e;t.includes("(");){var r=Ib.exec(t),n=_d(r,2),a=n[1];t=t.replace(Ib,Zj(a))}return t}function ZL(e){var t=e.replace(/\s+/g,"");return t=qL(t),t=Zj(t),t}function QL(e){try{return ZL(e)}catch{return Os}}function fp(e){var t=QL(e.slice(5,-1));return t===Os?"":t}var JL=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],eB=["dx","dy","angle","className","breakAll"];function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(this,arguments)}function Lb(e,t){if(e==null)return{};var r=tB(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tB(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Bb(e,t){return oB(e)||aB(e,t)||nB(e,t)||rB()}function rB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nB(e,t){if(e){if(typeof e=="string")return Fb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fb(e,t)}}function Fb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aB(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function oB(e){if(Array.isArray(e))return e}var Qj=/[ \f\n\r\t\v\u2028\u2029]+/,Jj=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var o=[];Ue(r)||(n?o=r.toString().split(""):o=r.toString().split(Qj));var i=o.map(function(l){return{word:l,width:bc(l,a).width}}),s=n?0:bc("",a).width;return{wordsWithComputedWidth:i,spaceWidth:s}}catch{return null}},iB=function(t,r,n,a,o){var i=t.maxLines,s=t.children,l=t.style,u=t.breakAll,d=de(i),f=s,h=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce(function(B,C){var R=C.word,z=C.width,G=B[B.length-1];if(G&&(a==null||o||G.width+z+n<Number(a)))G.words.push(R),G.width+=z+n;else{var ne={words:[R],width:z};B.push(ne)}return B},[])},p=h(r),m=function(T){return T.reduce(function(B,C){return B.width>C.width?B:C})};if(!d)return p;for(var v="",w=function(T){var B=f.slice(0,T),C=Jj({breakAll:u,style:l,children:B+v}).wordsWithComputedWidth,R=h(C),z=R.length>i||m(R).width>Number(a);return[z,R]},x=0,g=f.length-1,y=0,S;x<=g&&y<=f.length-1;){var b=Math.floor((x+g)/2),k=b-1,_=w(k),N=Bb(_,2),O=N[0],A=N[1],E=w(b),P=Bb(E,1),M=P[0];if(!O&&!M&&(x=b+1),O&&M&&(g=b-1),!O&&M){S=A;break}y++}return S||p},zb=function(t){var r=Ue(t)?[]:t.toString().split(Qj);return[{words:r}]},sB=function(t){var r=t.width,n=t.scaleToFit,a=t.children,o=t.style,i=t.breakAll,s=t.maxLines;if((r||n)&&!hi.isSsr){var l,u,d=Jj({breakAll:i,children:a,style:o});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;l=f,u=h}else return zb(a);return iB({breakAll:i,children:a,maxLines:s,style:o},l,u,r,n)}return zb(a)},Gb="#808080",Pd=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,o=a===void 0?0:a,i=t.lineHeight,s=i===void 0?"1em":i,l=t.capHeight,u=l===void 0?"0.71em":l,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,p=h===void 0?"start":h,m=t.verticalAnchor,v=m===void 0?"end":m,w=t.fill,x=w===void 0?Gb:w,g=Lb(t,JL),y=j.useMemo(function(){return sB({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),S=g.dx,b=g.dy,k=g.angle,_=g.className,N=g.breakAll,O=Lb(g,eB);if(!Br(n)||!Br(o))return null;var A=n+(de(S)?S:0),E=o+(de(b)?b:0),P;switch(v){case"start":P=fp("calc(".concat(u,")"));break;case"middle":P=fp("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:P=fp("calc(".concat(y.length-1," * -").concat(s,")"));break}var M=[];if(f){var D=y[0].width,T=g.width;M.push("scale(".concat((de(T)?T/D:1)/D,")"))}return k&&M.push("rotate(".concat(k,", ").concat(A,", ").concat(E,")")),M.length&&(O.transform=M.join(" ")),L.createElement("text",em({},He(O,!0),{x:A,y:E,className:ot("recharts-text",_),textAnchor:p,fill:x.includes("url")?Gb:x}),y.map(function(B,C){var R=B.words.join(N?"":" ");return L.createElement("tspan",{x:A,dy:C===0?P:s,key:"".concat(R,"-").concat(C)},R)}))};function oi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lB(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sv(e){let t,r,n;e.length!==2?(t=oi,r=(s,l)=>oi(e(s),l),n=(s,l)=>e(s)-l):(t=e===oi||e===lB?e:cB,r=e,n=e);function a(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<0?u=f+1:d=f}while(u<d)}return u}function o(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(s,l,u=0,d=s.length){const f=a(s,l,u,d-1);return f>u&&n(s[f-1],l)>-n(s[f],l)?f-1:f}return{left:a,center:i,right:o}}function cB(){return 0}function e4(e){return e===null?NaN:+e}function*uB(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const fB=Sv(oi),$u=fB.right;Sv(e4).center;class Ub extends Map{constructor(t,r=pB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Wb(this,t))}has(t){return super.has(Wb(this,t))}set(t,r){return super.set(dB(this,t),r)}delete(t){return super.delete(hB(this,t))}}function Wb({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function dB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function hB({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function pB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gB(e=oi){if(e===oi)return t4;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function t4(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const mB=Math.sqrt(50),yB=Math.sqrt(10),vB=Math.sqrt(2);function Od(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),o=n/Math.pow(10,a),i=o>=mB?10:o>=yB?5:o>=vB?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/i,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*i,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?Od(e,t,r*2):[s,l,u]}function tm(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,o,i]=n?Od(t,e,r):Od(e,t,r);if(!(o>=a))return[];const s=o-a+1,l=new Array(s);if(n)if(i<0)for(let u=0;u<s;++u)l[u]=(o-u)/-i;else for(let u=0;u<s;++u)l[u]=(o-u)*i;else if(i<0)for(let u=0;u<s;++u)l[u]=(a+u)/-i;else for(let u=0;u<s;++u)l[u]=(a+u)*i;return l}function rm(e,t,r){return t=+t,e=+e,r=+r,Od(e,t,r)[2]}function nm(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?rm(t,e,r):rm(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Xb(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Hb(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function r4(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?t4:gB(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+h)),m=Math.min(n,Math.floor(t+(l-u)*f/l+h));r4(e,t,p,m,a)}const o=e[t];let i=r,s=n;for(Zl(e,r,t),a(e[n],o)>0&&Zl(e,r,n);i<s;){for(Zl(e,i,s),++i,--s;a(e[i],o)<0;)++i;for(;a(e[s],o)>0;)--s}a(e[r],o)===0?Zl(e,r,s):(++s,Zl(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function Zl(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function xB(e,t,r){if(e=Float64Array.from(uB(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Hb(e);if(t>=1)return Xb(e);var n,a=(n-1)*t,o=Math.floor(a),i=Xb(r4(e,o).subarray(0,o+1)),s=Hb(e.subarray(o+1));return i+(s-i)*(a-o)}}function bB(e,t,r=e4){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,o=Math.floor(a),i=+r(e[o],o,e),s=+r(e[o+1],o+1,e);return i+(s-i)*(a-o)}}function wB(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(a);++n<a;)o[n]=e+n*r;return o}function ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Mo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const am=Symbol("implicit");function jv(){var e=new Ub,t=[],r=[],n=am;function a(o){let i=e.get(o);if(i===void 0){if(n!==am)return n;e.set(o,i=t.push(o)-1)}return r[i%r.length]}return a.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Ub;for(const i of o)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return jv(t,r).unknown(n)},ka.apply(a,arguments),a}function Jc(){var e=jv().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,o,i,s=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,m=p?a:n,v=p?n:a;o=(v-m)/Math.max(1,h-l+u*2),s&&(o=Math.floor(o)),m+=(v-m-o*(h-l))*d,i=o*(1-l),s&&(m=Math.round(m),i=Math.round(i));var w=wB(h).map(function(x){return m+o*x});return r(p?w.reverse():w)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,s=!0,f()},e.bandwidth=function(){return i},e.step=function(){return o},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Jc(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(d)},ka.apply(f(),arguments)}function n4(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return n4(t())},e}function wc(){return n4(Jc.apply(null,arguments).paddingInner(1))}function Nv(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function a4(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Du(){}var eu=.7,Cd=1/eu,Ls="\\s*([+-]?\\d+)\\s*",tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kB=/^#([0-9a-f]{3,8})$/,SB=new RegExp(`^rgb\\(${Ls},${Ls},${Ls}\\)$`),jB=new RegExp(`^rgb\\(${qa},${qa},${qa}\\)$`),NB=new RegExp(`^rgba\\(${Ls},${Ls},${Ls},${tu}\\)$`),_B=new RegExp(`^rgba\\(${qa},${qa},${qa},${tu}\\)$`),PB=new RegExp(`^hsl\\(${tu},${qa},${qa}\\)$`),OB=new RegExp(`^hsla\\(${tu},${qa},${qa},${tu}\\)$`),Vb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nv(Du,ru,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kb,formatHex:Kb,formatHex8:CB,formatHsl:MB,formatRgb:Yb,toString:Yb});function Kb(){return this.rgb().formatHex()}function CB(){return this.rgb().formatHex8()}function MB(){return o4(this).formatHsl()}function Yb(){return this.rgb().formatRgb()}function ru(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=kB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?qb(t):r===3?new Rn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?vf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?vf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=SB.exec(e))?new Rn(t[1],t[2],t[3],1):(t=jB.exec(e))?new Rn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=NB.exec(e))?vf(t[1],t[2],t[3],t[4]):(t=_B.exec(e))?vf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=PB.exec(e))?Jb(t[1],t[2]/100,t[3]/100,1):(t=OB.exec(e))?Jb(t[1],t[2]/100,t[3]/100,t[4]):Vb.hasOwnProperty(e)?qb(Vb[e]):e==="transparent"?new Rn(NaN,NaN,NaN,0):null}function qb(e){return new Rn(e>>16&255,e>>8&255,e&255,1)}function vf(e,t,r,n){return n<=0&&(e=t=r=NaN),new Rn(e,t,r,n)}function AB(e){return e instanceof Du||(e=ru(e)),e?(e=e.rgb(),new Rn(e.r,e.g,e.b,e.opacity)):new Rn}function om(e,t,r,n){return arguments.length===1?AB(e):new Rn(e,t,r,n??1)}function Rn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Nv(Rn,om,a4(Du,{brighter(e){return e=e==null?Cd:Math.pow(Cd,e),new Rn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eu:Math.pow(eu,e),new Rn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rn(Li(this.r),Li(this.g),Li(this.b),Md(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zb,formatHex:Zb,formatHex8:EB,formatRgb:Qb,toString:Qb}));function Zb(){return`#${Ei(this.r)}${Ei(this.g)}${Ei(this.b)}`}function EB(){return`#${Ei(this.r)}${Ei(this.g)}${Ei(this.b)}${Ei((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qb(){const e=Md(this.opacity);return`${e===1?"rgb(":"rgba("}${Li(this.r)}, ${Li(this.g)}, ${Li(this.b)}${e===1?")":`, ${e})`}`}function Md(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Li(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ei(e){return e=Li(e),(e<16?"0":"")+e.toString(16)}function Jb(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ta(e,t,r,n)}function o4(e){if(e instanceof Ta)return new Ta(e.h,e.s,e.l,e.opacity);if(e instanceof Du||(e=ru(e)),!e)return new Ta;if(e instanceof Ta)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),o=Math.max(t,r,n),i=NaN,s=o-a,l=(o+a)/2;return s?(t===o?i=(r-n)/s+(r<n)*6:r===o?i=(n-t)/s+2:i=(t-r)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new Ta(i,s,l,e.opacity)}function TB(e,t,r,n){return arguments.length===1?o4(e):new Ta(e,t,r,n??1)}function Ta(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Nv(Ta,TB,a4(Du,{brighter(e){return e=e==null?Cd:Math.pow(Cd,e),new Ta(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eu:Math.pow(eu,e),new Ta(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Rn(dp(e>=240?e-240:e+120,a,n),dp(e,a,n),dp(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ta(e2(this.h),xf(this.s),xf(this.l),Md(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Md(this.opacity);return`${e===1?"hsl(":"hsla("}${e2(this.h)}, ${xf(this.s)*100}%, ${xf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function e2(e){return e=(e||0)%360,e<0?e+360:e}function xf(e){return Math.max(0,Math.min(1,e||0))}function dp(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const _v=e=>()=>e;function $B(e,t){return function(r){return e+r*t}}function DB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function RB(e){return(e=+e)==1?i4:function(t,r){return r-t?DB(t,r,e):_v(isNaN(t)?r:t)}}function i4(e,t){var r=t-e;return r?$B(e,r):_v(isNaN(e)?t:e)}const t2=function e(t){var r=RB(t);function n(a,o){var i=r((a=om(a)).r,(o=om(o)).r),s=r(a.g,o.g),l=r(a.b,o.b),u=i4(a.opacity,o.opacity);return function(d){return a.r=i(d),a.g=s(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function IB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(o){for(a=0;a<r;++a)n[a]=e[a]*(1-o)+t[a]*o;return n}}function LB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function BB(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)a[i]=El(e[i],t[i]);for(;i<r;++i)o[i]=t[i];return function(s){for(i=0;i<n;++i)o[i]=a[i](s);return o}}function FB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ad(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function zB(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=El(e[a],t[a]):n[a]=t[a];return function(o){for(a in r)n[a]=r[a](o);return n}}var im=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hp=new RegExp(im.source,"g");function GB(e){return function(){return e}}function UB(e){return function(t){return e(t)+""}}function WB(e,t){var r=im.lastIndex=hp.lastIndex=0,n,a,o,i=-1,s=[],l=[];for(e=e+"",t=t+"";(n=im.exec(e))&&(a=hp.exec(t));)(o=a.index)>r&&(o=t.slice(r,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,l.push({i,x:Ad(n,a)})),r=hp.lastIndex;return r<t.length&&(o=t.slice(r),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?UB(l[0].x):GB(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)s[(f=l[d]).i]=f.x(u);return s.join("")})}function El(e,t){var r=typeof t,n;return t==null||r==="boolean"?_v(t):(r==="number"?Ad:r==="string"?(n=ru(t))?(t=n,t2):WB:t instanceof ru?t2:t instanceof Date?FB:LB(t)?IB:Array.isArray(t)?BB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zB:Ad)(e,t)}function Pv(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function XB(e,t){t===void 0&&(t=e,e=El);for(var r=0,n=t.length-1,a=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(a,a=t[++r]);return function(i){var s=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return o[s](i-s)}}function HB(e){return function(){return e}}function Ed(e){return+e}var r2=[0,1];function Pn(e){return e}function sm(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:HB(isNaN(t)?NaN:.5)}function VB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function KB(e,t,r){var n=e[0],a=e[1],o=t[0],i=t[1];return a<n?(n=sm(a,n),o=r(i,o)):(n=sm(n,a),o=r(o,i)),function(s){return o(n(s))}}function YB(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),o=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=sm(e[i],e[i+1]),o[i]=r(t[i],t[i+1]);return function(s){var l=$u(e,s,1,n)-1;return o[l](a[l](s))}}function Ru(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rh(){var e=r2,t=r2,r=El,n,a,o,i=Pn,s,l,u;function d(){var h=Math.min(e.length,t.length);return i!==Pn&&(i=VB(e[0],e[h-1])),s=h>2?YB:KB,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=s(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=s(t,e.map(n),Ad)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Ed),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=Pv,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Pn,d()):i!==Pn},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return n=h,a=p,d()}}function Ov(){return rh()(Pn,Pn)}function qB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Td(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Js(e){return e=Td(Math.abs(e)),e?e[1]:NaN}function ZB(e,t){return function(r,n){for(var a=r.length,o=[],i=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[i=(i+1)%e.length];return o.reverse().join(t)}}function QB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var JB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nu(e){if(!(t=JB.exec(e)))throw new Error("invalid format: "+e);var t;return new Cv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nu.prototype=Cv.prototype;function Cv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Cv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eF(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var $d;function tF(e,t){var r=Td(e,t);if(!r)return $d=void 0,e.toPrecision(t);var n=r[0],a=r[1],o=a-($d=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Td(e,Math.max(0,t+o-1))[0]}function n2(e,t){var r=Td(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const a2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>n2(e*100,t),r:n2,s:tF,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function o2(e){return e}var i2=Array.prototype.map,s2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rF(e){var t=e.grouping===void 0||e.thousands===void 0?o2:ZB(i2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?o2:QB(i2.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f,h){f=nu(f);var p=f.fill,m=f.align,v=f.sign,w=f.symbol,x=f.zero,g=f.width,y=f.comma,S=f.precision,b=f.trim,k=f.type;k==="n"?(y=!0,k="g"):a2[k]||(S===void 0&&(S=12),b=!0,k="g"),(x||p==="0"&&m==="=")&&(x=!0,p="0",m="=");var _=(h&&h.prefix!==void 0?h.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),N=(w==="$"?n:/[%p]/.test(k)?i:"")+(h&&h.suffix!==void 0?h.suffix:""),O=a2[k],A=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function E(P){var M=_,D=N,T,B,C;if(k==="c")D=O(P)+D,P="";else{P=+P;var R=P<0||1/P<0;if(P=isNaN(P)?l:O(Math.abs(P),S),b&&(P=eF(P)),R&&+P==0&&v!=="+"&&(R=!1),M=(R?v==="("?v:s:v==="-"||v==="("?"":v)+M,D=(k==="s"&&!isNaN(P)&&$d!==void 0?s2[8+$d/3]:"")+D+(R&&v==="("?")":""),A){for(T=-1,B=P.length;++T<B;)if(C=P.charCodeAt(T),48>C||C>57){D=(C===46?a+P.slice(T+1):P.slice(T))+D,P=P.slice(0,T);break}}}y&&!x&&(P=t(P,1/0));var z=M.length+P.length+D.length,G=z<g?new Array(g-z+1).join(p):"";switch(y&&x&&(P=t(G+P,G.length?g-D.length:1/0),G=""),m){case"<":P=M+P+D+G;break;case"=":P=M+G+P+D;break;case"^":P=G.slice(0,z=G.length>>1)+M+P+D+G.slice(z);break;default:P=G+M+P+D;break}return o(P)}return E.toString=function(){return f+""},E}function d(f,h){var p=Math.max(-8,Math.min(8,Math.floor(Js(h)/3)))*3,m=Math.pow(10,-p),v=u((f=nu(f),f.type="f",f),{suffix:s2[8+p/3]});return function(w){return v(m*w)}}return{format:u,formatPrefix:d}}var bf,Mv,s4;nF({thousands:",",grouping:[3],currency:["$",""]});function nF(e){return bf=rF(e),Mv=bf.format,s4=bf.formatPrefix,bf}function aF(e){return Math.max(0,-Js(Math.abs(e)))}function oF(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Js(t)/3)))*3-Js(Math.abs(e)))}function iF(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Js(t)-Js(e))+1}function l4(e,t,r,n){var a=nm(e,t,r),o;switch(n=nu(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=oF(a,i))&&(n.precision=o),s4(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=iF(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=aF(a))&&(n.precision=o-(n.type==="%")*2);break}}return Mv(n)}function pi(e){var t=e.domain;return e.ticks=function(r){var n=t();return tm(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return l4(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,o=n.length-1,i=n[a],s=n[o],l,u,d=10;for(s<i&&(u=i,i=s,s=u,u=a,a=o,o=u);d-- >0;){if(u=rm(i,s,r),u===l)return n[a]=i,n[o]=s,t(n);if(u>0)i=Math.floor(i/u)*u,s=Math.ceil(s/u)*u;else if(u<0)i=Math.ceil(i*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function Dd(){var e=Ov();return e.copy=function(){return Ru(e,Dd())},ka.apply(e,arguments),pi(e)}function c4(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Ed),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return c4(e).unknown(t)},e=arguments.length?Array.from(e,Ed):[0,1],pi(r)}function u4(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],o=e[n],i;return o<a&&(i=r,r=n,n=i,i=a,a=o,o=i),e[r]=t.floor(a),e[n]=t.ceil(o),e}function l2(e){return Math.log(e)}function c2(e){return Math.exp(e)}function sF(e){return-Math.log(-e)}function lF(e){return-Math.exp(-e)}function cF(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uF(e){return e===10?cF:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fF(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function u2(e){return(t,r)=>-e(-t,r)}function Av(e){const t=e(l2,c2),r=t.domain;let n=10,a,o;function i(){return a=fF(n),o=uF(n),r()[0]<0?(a=u2(a),o=u2(o),e(sF,lF)):e(l2,c2),t}return t.base=function(s){return arguments.length?(n=+s,i()):n},t.domain=function(s){return arguments.length?(r(s),i()):r()},t.ticks=s=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),m,v;const w=s==null?10:+s;let x=[];if(!(n%1)&&p-h<w){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<n;++m)if(v=h<0?m/o(-h):m*o(h),!(v<u)){if(v>d)break;x.push(v)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(v=h>0?m/o(-h):m*o(h),!(v<u)){if(v>d)break;x.push(v)}x.length*2<w&&(x=tm(u,d,w))}else x=tm(h,p,Math.min(p-h,w)).map(o);return f?x.reverse():x},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=nu(l)).precision==null&&(l.trim=!0),l=Mv(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return d=>{let f=d/o(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(u4(r(),{floor:s=>o(Math.floor(a(s))),ceil:s=>o(Math.ceil(a(s)))})),t}function f4(){const e=Av(rh()).domain([1,10]);return e.copy=()=>Ru(e,f4()).base(e.base()),ka.apply(e,arguments),e}function f2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function d2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ev(e){var t=1,r=e(f2(t),d2(t));return r.constant=function(n){return arguments.length?e(f2(t=+n),d2(t)):t},pi(r)}function d4(){var e=Ev(rh());return e.copy=function(){return Ru(e,d4()).constant(e.constant())},ka.apply(e,arguments)}function h2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dF(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hF(e){return e<0?-e*e:e*e}function Tv(e){var t=e(Pn,Pn),r=1;function n(){return r===1?e(Pn,Pn):r===.5?e(dF,hF):e(h2(r),h2(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},pi(t)}function $v(){var e=Tv(rh());return e.copy=function(){return Ru(e,$v()).exponent(e.exponent())},ka.apply(e,arguments),e}function pF(){return $v.apply(null,arguments).exponent(.5)}function p2(e){return Math.sign(e)*e*e}function gF(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function h4(){var e=Ov(),t=[0,1],r=!1,n;function a(o){var i=gF(e(o));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(o){return e.invert(p2(o))},a.domain=function(o){return arguments.length?(e.domain(o),a):e.domain()},a.range=function(o){return arguments.length?(e.range((t=Array.from(o,Ed)).map(p2)),a):t.slice()},a.rangeRound=function(o){return a.range(o).round(!0)},a.round=function(o){return arguments.length?(r=!!o,a):r},a.clamp=function(o){return arguments.length?(e.clamp(o),a):e.clamp()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return h4(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ka.apply(a,arguments),pi(a)}function p4(){var e=[],t=[],r=[],n;function a(){var i=0,s=Math.max(1,t.length);for(r=new Array(s-1);++i<s;)r[i-1]=bB(e,i/s);return o}function o(i){return i==null||isNaN(i=+i)?n:t[$u(r,i)]}return o.invertExtent=function(i){var s=t.indexOf(i);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},o.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let s of i)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(oi),a()},o.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},o.unknown=function(i){return arguments.length?(n=i,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return p4().domain(e).range(t).unknown(n)},ka.apply(o,arguments)}function g4(){var e=0,t=1,r=1,n=[.5],a=[0,1],o;function i(l){return l!=null&&l<=l?a[$u(n,l,0,r)]:o}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},i.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},i.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(o=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return g4().domain([e,t]).range(a).unknown(o)},ka.apply(pi(i),arguments)}function m4(){var e=[.5],t=[0,1],r,n=1;function a(o){return o!=null&&o<=o?t[$u(e,o,0,n)]:r}return a.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(o){var i=t.indexOf(o);return[e[i-1],e[i]]},a.unknown=function(o){return arguments.length?(r=o,a):r},a.copy=function(){return m4().domain(e).range(t).unknown(r)},ka.apply(a,arguments)}const pp=new Date,gp=new Date;function zr(e,t,r,n){function a(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(e(o=new Date(+o)),o),a.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),a.round=o=>{const i=a(o),s=a.ceil(o);return o-i<s-o?i:s},a.offset=(o,i)=>(t(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,s)=>{const l=[];if(o=a.ceil(o),s=s==null?1:Math.floor(s),!(o<i)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<i);return l},a.filter=o=>zr(i=>{if(i>=i)for(;e(i),!o(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!o(i););else for(;--s>=0;)for(;t(i,1),!o(i););}),r&&(a.count=(o,i)=>(pp.setTime(+o),gp.setTime(+i),e(pp),e(gp),Math.floor(r(pp,gp))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(n?i=>n(i)%o===0:i=>a.count(0,i)%o===0):a)),a}const Rd=zr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Rd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Rd);Rd.range;const fo=1e3,pa=fo*60,ho=pa*60,jo=ho*24,Dv=jo*7,g2=jo*30,mp=jo*365,Ti=zr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getUTCSeconds());Ti.range;const Rv=zr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo)},(e,t)=>{e.setTime(+e+t*pa)},(e,t)=>(t-e)/pa,e=>e.getMinutes());Rv.range;const Iv=zr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pa)},(e,t)=>(t-e)/pa,e=>e.getUTCMinutes());Iv.range;const Lv=zr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fo-e.getMinutes()*pa)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getHours());Lv.range;const Bv=zr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getUTCHours());Bv.range;const Iu=zr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pa)/jo,e=>e.getDate()-1);Iu.range;const nh=zr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jo,e=>e.getUTCDate()-1);nh.range;const y4=zr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jo,e=>Math.floor(e/jo));y4.range;function ns(e){return zr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*pa)/Dv)}const ah=ns(0),Id=ns(1),mF=ns(2),yF=ns(3),el=ns(4),vF=ns(5),xF=ns(6);ah.range;Id.range;mF.range;yF.range;el.range;vF.range;xF.range;function as(e){return zr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Dv)}const oh=as(0),Ld=as(1),bF=as(2),wF=as(3),tl=as(4),kF=as(5),SF=as(6);oh.range;Ld.range;bF.range;wF.range;tl.range;kF.range;SF.range;const Fv=zr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fv.range;const zv=zr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());zv.range;const No=zr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());No.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});No.range;const _o=zr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_o.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});_o.range;function v4(e,t,r,n,a,o){const i=[[Ti,1,fo],[Ti,5,5*fo],[Ti,15,15*fo],[Ti,30,30*fo],[o,1,pa],[o,5,5*pa],[o,15,15*pa],[o,30,30*pa],[a,1,ho],[a,3,3*ho],[a,6,6*ho],[a,12,12*ho],[n,1,jo],[n,2,2*jo],[r,1,Dv],[t,1,g2],[t,3,3*g2],[e,1,mp]];function s(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),m=p?p.range(u,+d+1):[];return h?m.reverse():m}function l(u,d,f){const h=Math.abs(d-u)/f,p=Sv(([,,w])=>w).right(i,h);if(p===i.length)return e.every(nm(u/mp,d/mp,f));if(p===0)return Rd.every(Math.max(nm(u,d,f),1));const[m,v]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return m.every(v)}return[s,l]}const[jF,NF]=v4(_o,zv,oh,y4,Bv,Iv),[_F,PF]=v4(No,Fv,ah,Iu,Lv,Rv);function yp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function vp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ql(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function OF(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,l=e.shortMonths,u=Jl(a),d=ec(a),f=Jl(o),h=ec(o),p=Jl(i),m=ec(i),v=Jl(s),w=ec(s),x=Jl(l),g=ec(l),y={a:C,A:R,b:z,B:G,c:null,d:w2,e:w2,f:ZF,g:sz,G:cz,H:KF,I:YF,j:qF,L:x4,m:QF,M:JF,p:ne,q:X,Q:j2,s:N2,S:ez,u:tz,U:rz,V:nz,w:az,W:oz,x:null,X:null,y:iz,Y:lz,Z:uz,"%":S2},S={a:F,A:re,b:J,B:$,c:null,d:k2,e:k2,f:pz,g:jz,G:_z,H:fz,I:dz,j:hz,L:w4,m:gz,M:mz,p:oe,q,Q:j2,s:N2,S:yz,u:vz,U:xz,V:bz,w:wz,W:kz,x:null,X:null,y:Sz,Y:Nz,Z:Pz,"%":S2},b={a:A,A:E,b:P,B:M,c:D,d:x2,e:x2,f:WF,g:v2,G:y2,H:b2,I:b2,j:FF,L:UF,m:BF,M:zF,p:O,q:LF,Q:HF,s:VF,S:GF,u:TF,U:$F,V:DF,w:EF,W:RF,x:T,X:B,y:v2,Y:y2,Z:IF,"%":XF};y.x=k(r,y),y.X=k(n,y),y.c=k(t,y),S.x=k(r,S),S.X=k(n,S),S.c=k(t,S);function k(H,le){return function(ce){var Z=[],_e=-1,be=0,Q=H.length,he,ve,Ye;for(ce instanceof Date||(ce=new Date(+ce));++_e<Q;)H.charCodeAt(_e)===37&&(Z.push(H.slice(be,_e)),(ve=m2[he=H.charAt(++_e)])!=null?he=H.charAt(++_e):ve=he==="e"?" ":"0",(Ye=le[he])&&(he=Ye(ce,ve)),Z.push(he),be=_e+1);return Z.push(H.slice(be,_e)),Z.join("")}}function _(H,le){return function(ce){var Z=Ql(1900,void 0,1),_e=N(Z,H,ce+="",0),be,Q;if(_e!=ce.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(be=vp(Ql(Z.y,0,1)),Q=be.getUTCDay(),be=Q>4||Q===0?Ld.ceil(be):Ld(be),be=nh.offset(be,(Z.V-1)*7),Z.y=be.getUTCFullYear(),Z.m=be.getUTCMonth(),Z.d=be.getUTCDate()+(Z.w+6)%7):(be=yp(Ql(Z.y,0,1)),Q=be.getDay(),be=Q>4||Q===0?Id.ceil(be):Id(be),be=Iu.offset(be,(Z.V-1)*7),Z.y=be.getFullYear(),Z.m=be.getMonth(),Z.d=be.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),Q="Z"in Z?vp(Ql(Z.y,0,1)).getUTCDay():yp(Ql(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(Q+5)%7:Z.w+Z.U*7-(Q+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,vp(Z)):yp(Z)}}function N(H,le,ce,Z){for(var _e=0,be=le.length,Q=ce.length,he,ve;_e<be;){if(Z>=Q)return-1;if(he=le.charCodeAt(_e++),he===37){if(he=le.charAt(_e++),ve=b[he in m2?le.charAt(_e++):he],!ve||(Z=ve(H,ce,Z))<0)return-1}else if(he!=ce.charCodeAt(Z++))return-1}return Z}function O(H,le,ce){var Z=u.exec(le.slice(ce));return Z?(H.p=d.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function A(H,le,ce){var Z=p.exec(le.slice(ce));return Z?(H.w=m.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function E(H,le,ce){var Z=f.exec(le.slice(ce));return Z?(H.w=h.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function P(H,le,ce){var Z=x.exec(le.slice(ce));return Z?(H.m=g.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function M(H,le,ce){var Z=v.exec(le.slice(ce));return Z?(H.m=w.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function D(H,le,ce){return N(H,t,le,ce)}function T(H,le,ce){return N(H,r,le,ce)}function B(H,le,ce){return N(H,n,le,ce)}function C(H){return i[H.getDay()]}function R(H){return o[H.getDay()]}function z(H){return l[H.getMonth()]}function G(H){return s[H.getMonth()]}function ne(H){return a[+(H.getHours()>=12)]}function X(H){return 1+~~(H.getMonth()/3)}function F(H){return i[H.getUTCDay()]}function re(H){return o[H.getUTCDay()]}function J(H){return l[H.getUTCMonth()]}function $(H){return s[H.getUTCMonth()]}function oe(H){return a[+(H.getUTCHours()>=12)]}function q(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var le=k(H+="",y);return le.toString=function(){return H},le},parse:function(H){var le=_(H+="",!1);return le.toString=function(){return H},le},utcFormat:function(H){var le=k(H+="",S);return le.toString=function(){return H},le},utcParse:function(H){var le=_(H+="",!0);return le.toString=function(){return H},le}}}var m2={"-":"",_:" ",0:"0"},qr=/^\s*\d+/,CF=/^%/,MF=/[\\^$*+?|[\]().{}]/g;function gt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",o=a.length;return n+(o<r?new Array(r-o+1).join(t)+a:a)}function AF(e){return e.replace(MF,"\\$&")}function Jl(e){return new RegExp("^(?:"+e.map(AF).join("|")+")","i")}function ec(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function EF(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function TF(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function $F(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function DF(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function RF(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function y2(e,t,r){var n=qr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function v2(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function IF(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function LF(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function BF(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function x2(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function FF(e,t,r){var n=qr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function b2(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function zF(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function GF(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function UF(e,t,r){var n=qr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function WF(e,t,r){var n=qr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function XF(e,t,r){var n=CF.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function HF(e,t,r){var n=qr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function VF(e,t,r){var n=qr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function w2(e,t){return gt(e.getDate(),t,2)}function KF(e,t){return gt(e.getHours(),t,2)}function YF(e,t){return gt(e.getHours()%12||12,t,2)}function qF(e,t){return gt(1+Iu.count(No(e),e),t,3)}function x4(e,t){return gt(e.getMilliseconds(),t,3)}function ZF(e,t){return x4(e,t)+"000"}function QF(e,t){return gt(e.getMonth()+1,t,2)}function JF(e,t){return gt(e.getMinutes(),t,2)}function ez(e,t){return gt(e.getSeconds(),t,2)}function tz(e){var t=e.getDay();return t===0?7:t}function rz(e,t){return gt(ah.count(No(e)-1,e),t,2)}function b4(e){var t=e.getDay();return t>=4||t===0?el(e):el.ceil(e)}function nz(e,t){return e=b4(e),gt(el.count(No(e),e)+(No(e).getDay()===4),t,2)}function az(e){return e.getDay()}function oz(e,t){return gt(Id.count(No(e)-1,e),t,2)}function iz(e,t){return gt(e.getFullYear()%100,t,2)}function sz(e,t){return e=b4(e),gt(e.getFullYear()%100,t,2)}function lz(e,t){return gt(e.getFullYear()%1e4,t,4)}function cz(e,t){var r=e.getDay();return e=r>=4||r===0?el(e):el.ceil(e),gt(e.getFullYear()%1e4,t,4)}function uz(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gt(t/60|0,"0",2)+gt(t%60,"0",2)}function k2(e,t){return gt(e.getUTCDate(),t,2)}function fz(e,t){return gt(e.getUTCHours(),t,2)}function dz(e,t){return gt(e.getUTCHours()%12||12,t,2)}function hz(e,t){return gt(1+nh.count(_o(e),e),t,3)}function w4(e,t){return gt(e.getUTCMilliseconds(),t,3)}function pz(e,t){return w4(e,t)+"000"}function gz(e,t){return gt(e.getUTCMonth()+1,t,2)}function mz(e,t){return gt(e.getUTCMinutes(),t,2)}function yz(e,t){return gt(e.getUTCSeconds(),t,2)}function vz(e){var t=e.getUTCDay();return t===0?7:t}function xz(e,t){return gt(oh.count(_o(e)-1,e),t,2)}function k4(e){var t=e.getUTCDay();return t>=4||t===0?tl(e):tl.ceil(e)}function bz(e,t){return e=k4(e),gt(tl.count(_o(e),e)+(_o(e).getUTCDay()===4),t,2)}function wz(e){return e.getUTCDay()}function kz(e,t){return gt(Ld.count(_o(e)-1,e),t,2)}function Sz(e,t){return gt(e.getUTCFullYear()%100,t,2)}function jz(e,t){return e=k4(e),gt(e.getUTCFullYear()%100,t,2)}function Nz(e,t){return gt(e.getUTCFullYear()%1e4,t,4)}function _z(e,t){var r=e.getUTCDay();return e=r>=4||r===0?tl(e):tl.ceil(e),gt(e.getUTCFullYear()%1e4,t,4)}function Pz(){return"+0000"}function S2(){return"%"}function j2(e){return+e}function N2(e){return Math.floor(+e/1e3)}var hs,S4,j4;Oz({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Oz(e){return hs=OF(e),S4=hs.format,hs.parse,j4=hs.utcFormat,hs.utcParse,hs}function Cz(e){return new Date(e)}function Mz(e){return e instanceof Date?+e:+new Date(+e)}function Gv(e,t,r,n,a,o,i,s,l,u){var d=Ov(),f=d.invert,h=d.domain,p=u(".%L"),m=u(":%S"),v=u("%I:%M"),w=u("%I %p"),x=u("%a %d"),g=u("%b %d"),y=u("%B"),S=u("%Y");function b(k){return(l(k)<k?p:s(k)<k?m:i(k)<k?v:o(k)<k?w:n(k)<k?a(k)<k?x:g:r(k)<k?y:S)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?h(Array.from(k,Mz)):h().map(Cz)},d.ticks=function(k){var _=h();return e(_[0],_[_.length-1],k??10)},d.tickFormat=function(k,_){return _==null?b:u(_)},d.nice=function(k){var _=h();return(!k||typeof k.range!="function")&&(k=t(_[0],_[_.length-1],k??10)),k?h(u4(_,k)):d},d.copy=function(){return Ru(d,Gv(e,t,r,n,a,o,i,s,l,u))},d}function Az(){return ka.apply(Gv(_F,PF,No,Fv,ah,Iu,Lv,Rv,Ti,S4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ez(){return ka.apply(Gv(jF,NF,_o,zv,oh,nh,Bv,Iv,Ti,j4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ih(){var e=0,t=1,r,n,a,o,i=Pn,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(a===0?.5:(f=(o(f)-r)*a,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=o(e=+e),n=o(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,m;return arguments.length?([p,m]=h,i=f(p,m),u):[i(0),i(1)]}}return u.range=d(El),u.rangeRound=d(Pv),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function gi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function N4(){var e=pi(ih()(Pn));return e.copy=function(){return gi(e,N4())},Mo.apply(e,arguments)}function _4(){var e=Av(ih()).domain([1,10]);return e.copy=function(){return gi(e,_4()).base(e.base())},Mo.apply(e,arguments)}function P4(){var e=Ev(ih());return e.copy=function(){return gi(e,P4()).constant(e.constant())},Mo.apply(e,arguments)}function Uv(){var e=Tv(ih());return e.copy=function(){return gi(e,Uv()).exponent(e.exponent())},Mo.apply(e,arguments)}function Tz(){return Uv.apply(null,arguments).exponent(.5)}function O4(){var e=[],t=Pn;function r(n){if(n!=null&&!isNaN(n=+n))return t(($u(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(oi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,o)=>xB(e,o/n))},r.copy=function(){return O4(t).domain(e)},Mo.apply(r,arguments)}function sh(){var e=0,t=.5,r=1,n=1,a,o,i,s,l,u=Pn,d,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-o)*(n*v<n*o?s:l),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),o=d(t=+t),i=d(r=+r),s=a===o?0:.5/(o-a),l=o===i?0:.5/(i-o),n=o<a?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function m(v){return function(w){var x,g,y;return arguments.length?([x,g,y]=w,u=XB(v,[x,g,y]),p):[u(0),u(.5),u(1)]}}return p.range=m(El),p.rangeRound=m(Pv),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return d=v,a=v(e),o=v(t),i=v(r),s=a===o?0:.5/(o-a),l=o===i?0:.5/(i-o),n=o<a?-1:1,p}}function C4(){var e=pi(sh()(Pn));return e.copy=function(){return gi(e,C4())},Mo.apply(e,arguments)}function M4(){var e=Av(sh()).domain([.1,1,10]);return e.copy=function(){return gi(e,M4()).base(e.base())},Mo.apply(e,arguments)}function A4(){var e=Ev(sh());return e.copy=function(){return gi(e,A4()).constant(e.constant())},Mo.apply(e,arguments)}function Wv(){var e=Tv(sh());return e.copy=function(){return gi(e,Wv()).exponent(e.exponent())},Mo.apply(e,arguments)}function $z(){return Wv.apply(null,arguments).exponent(.5)}const _2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Jc,scaleDiverging:C4,scaleDivergingLog:M4,scaleDivergingPow:Wv,scaleDivergingSqrt:$z,scaleDivergingSymlog:A4,scaleIdentity:c4,scaleImplicit:am,scaleLinear:Dd,scaleLog:f4,scaleOrdinal:jv,scalePoint:wc,scalePow:$v,scaleQuantile:p4,scaleQuantize:g4,scaleRadial:h4,scaleSequential:N4,scaleSequentialLog:_4,scaleSequentialPow:Uv,scaleSequentialQuantile:O4,scaleSequentialSqrt:Tz,scaleSequentialSymlog:P4,scaleSqrt:pF,scaleSymlog:d4,scaleThreshold:m4,scaleTime:Az,scaleUtc:Ez,tickFormat:l4},Symbol.toStringTag,{value:"Module"}));var Dz=Sl;function Rz(e,t,r){for(var n=-1,a=e.length;++n<a;){var o=e[n],i=t(o);if(i!=null&&(s===void 0?i===i&&!Dz(i):r(i,s)))var s=i,l=o}return l}var E4=Rz;function Iz(e,t){return e>t}var Lz=Iz,Bz=E4,Fz=Lz,zz=Al;function Gz(e){return e&&e.length?Bz(e,zz,Fz):void 0}var Uz=Gz;const Ho=Lt(Uz);function Wz(e,t){return e<t}var Xz=Wz,Hz=E4,Vz=Xz,Kz=Al;function Yz(e){return e&&e.length?Hz(e,Kz,Vz):void 0}var qz=Yz;const lh=Lt(qz);var Zz=av,Qz=di,Jz=Gj,eG=Un;function tG(e,t){var r=eG(e)?Zz:Jz;return r(e,Qz(t))}var rG=tG,nG=Fj,aG=rG;function oG(e,t){return nG(aG(e,t),1)}var iG=oG;const sG=Lt(iG);var lG=vv;function cG(e,t){return lG(e,t)}var uG=cG;const Ki=Lt(uG);var Tl=1e9,fG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Hv,er=!0,ba="[DecimalError] ",Bi=ba+"Invalid argument: ",Xv=ba+"Exponent out of range: ",$l=Math.floor,Pi=Math.pow,dG=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zn,Hr=1e7,Yt=7,T4=9007199254740991,Bd=$l(T4/Yt),Se={};Se.absoluteValue=Se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Se.comparedTo=Se.cmp=function(e){var t,r,n,a,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===a?0:n>a^o.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Yt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Se.dividedBy=Se.div=function(e){return xo(this,new this.constructor(e))};Se.dividedToIntegerBy=Se.idiv=function(e){var t=this,r=t.constructor;return It(xo(t,new r(e),0,1),r.precision)};Se.equals=Se.eq=function(e){return!this.cmp(e)};Se.exponent=function(){return Ar(this)};Se.greaterThan=Se.gt=function(e){return this.cmp(e)>0};Se.greaterThanOrEqualTo=Se.gte=function(e){return this.cmp(e)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(e){return this.cmp(e)<0};Se.lessThanOrEqualTo=Se.lte=function(e){return this.cmp(e)<1};Se.logarithm=Se.log=function(e){var t,r=this,n=r.constructor,a=n.precision,o=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Zn))throw Error(ba+"NaN");if(r.s<1)throw Error(ba+(r.s?"NaN":"-Infinity"));return r.eq(Zn)?new n(0):(er=!1,t=xo(au(r,o),au(e,o),o),er=!0,It(t,a))};Se.minus=Se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?R4(t,e):$4(t,(e.s=-e.s,e))};Se.modulo=Se.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ba+"NaN");return r.s?(er=!1,t=xo(r,e,0,1).times(e),er=!0,r.minus(t)):It(new n(r),a)};Se.naturalExponential=Se.exp=function(){return D4(this)};Se.naturalLogarithm=Se.ln=function(){return au(this)};Se.negated=Se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Se.plus=Se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$4(t,e):R4(t,(e.s=-e.s,e))};Se.precision=Se.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bi+e);if(t=Ar(a)+1,n=a.d.length-1,r=n*Yt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Se.squareRoot=Se.sqrt=function(){var e,t,r,n,a,o,i,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(ba+"NaN")}for(e=Ar(s),er=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Xa(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=$l((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=i=r+3;;)if(o=n,n=o.plus(xo(s,o,i+2)).times(.5),Xa(o.d).slice(0,i)===(t=Xa(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(It(o,r+1,0),o.times(o).eq(s)){n=o;break}}else if(t!="9999")break;i+=4}return er=!0,It(n,r)};Se.times=Se.mul=function(e){var t,r,n,a,o,i,s,l,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=p.length,l<u&&(o=h,h=p,p=o,i=l,l=u,u=i),o=[],i=l+u,n=i;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=o[a]+p[n]*h[a-n-1]+t,o[a--]=s%Hr|0,t=s/Hr|0;o[a]=(o[a]+t)%Hr|0}for(;!o[--i];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,er?It(e,f.precision):e};Se.toDecimalPlaces=Se.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(eo(e,0,Tl),t===void 0?t=n.rounding:eo(t,0,8),It(r,e+Ar(r)+1,t))};Se.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Yi(n,!0):(eo(e,0,Tl),t===void 0?t=a.rounding:eo(t,0,8),n=It(new a(n),e+1,t),r=Yi(n,!0,e+1)),r};Se.toFixed=function(e,t){var r,n,a=this,o=a.constructor;return e===void 0?Yi(a):(eo(e,0,Tl),t===void 0?t=o.rounding:eo(t,0,8),n=It(new o(a),e+Ar(a)+1,t),r=Yi(n.abs(),!1,e+Ar(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Se.toInteger=Se.toint=function(){var e=this,t=e.constructor;return It(new t(e),Ar(e)+1,t.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(e){var t,r,n,a,o,i,s=this,l=s.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Zn);if(s=new l(s),!s.s){if(e.s<1)throw Error(ba+"Infinity");return s}if(s.eq(Zn))return s;if(n=l.precision,e.eq(Zn))return It(s,n);if(t=e.e,r=e.d.length-1,i=t>=r,o=s.s,i){if((r=d<0?-d:d)<=T4){for(a=new l(Zn),t=Math.ceil(n/Yt+4),er=!1;r%2&&(a=a.times(s),O2(a.d,t)),r=$l(r/2),r!==0;)s=s.times(s),O2(s.d,t);return er=!0,e.s<0?new l(Zn).div(a):It(a,n)}}else if(o<0)throw Error(ba+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,er=!1,a=e.times(au(s,n+u)),er=!0,a=D4(a),a.s=o,a};Se.toPrecision=function(e,t){var r,n,a=this,o=a.constructor;return e===void 0?(r=Ar(a),n=Yi(a,r<=o.toExpNeg||r>=o.toExpPos)):(eo(e,1,Tl),t===void 0?t=o.rounding:eo(t,0,8),a=It(new o(a),e,t),r=Ar(a),n=Yi(a,e<=r||r<=o.toExpNeg,e)),n};Se.toSignificantDigits=Se.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(eo(e,1,Tl),t===void 0?t=n.rounding:eo(t,0,8)),It(new n(r),e,t)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ar(e),r=e.constructor;return Yi(e,t<=r.toExpNeg||t>=r.toExpPos)};function $4(e,t){var r,n,a,o,i,s,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),er?It(t,f):t;if(l=e.d,u=t.d,i=e.e,a=t.e,l=l.slice(),o=i-a,o){for(o<0?(n=l,o=-o,s=u.length):(n=u,a=i,s=l.length),i=Math.ceil(f/Yt),s=i>s?i+1:s+1,o>s&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(s=l.length,o=u.length,s-o<0&&(o=s,n=u,u=l,l=n),r=0;o;)r=(l[--o]=l[o]+u[o]+r)/Hr|0,l[o]%=Hr;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,er?It(t,f):t}function eo(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Bi+e)}function Xa(e){var t,r,n,a=e.length-1,o="",i=e[0];if(a>0){for(o+=i,t=1;t<a;t++)n=e[t]+"",r=Yt-n.length,r&&(o+=Fo(r)),o+=n;i=e[t],n=i+"",r=Yt-n.length,r&&(o+=Fo(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return o+i}var xo=function(){function e(n,a){var o,i=0,s=n.length;for(n=n.slice();s--;)o=n[s]*a+i,n[s]=o%Hr|0,i=o/Hr|0;return i&&n.unshift(i),n}function t(n,a,o,i){var s,l;if(o!=i)l=o>i?1:-1;else for(s=l=0;s<o;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,o){for(var i=0;o--;)n[o]-=i,i=n[o]<a[o]?1:0,n[o]=i*Hr+n[o]-a[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,o,i){var s,l,u,d,f,h,p,m,v,w,x,g,y,S,b,k,_,N,O=n.constructor,A=n.s==a.s?1:-1,E=n.d,P=a.d;if(!n.s)return new O(n);if(!a.s)throw Error(ba+"Division by zero");for(l=n.e-a.e,_=P.length,b=E.length,p=new O(A),m=p.d=[],u=0;P[u]==(E[u]||0);)++u;if(P[u]>(E[u]||0)&&--l,o==null?g=o=O.precision:i?g=o+(Ar(n)-Ar(a))+1:g=o,g<0)return new O(0);if(g=g/Yt+2|0,u=0,_==1)for(d=0,P=P[0],g++;(u<b||d)&&g--;u++)y=d*Hr+(E[u]||0),m[u]=y/P|0,d=y%P|0;else{for(d=Hr/(P[0]+1)|0,d>1&&(P=e(P,d),E=e(E,d),_=P.length,b=E.length),S=_,v=E.slice(0,_),w=v.length;w<_;)v[w++]=0;N=P.slice(),N.unshift(0),k=P[0],P[1]>=Hr/2&&++k;do d=0,s=t(P,v,_,w),s<0?(x=v[0],_!=w&&(x=x*Hr+(v[1]||0)),d=x/k|0,d>1?(d>=Hr&&(d=Hr-1),f=e(P,d),h=f.length,w=v.length,s=t(f,v,h,w),s==1&&(d--,r(f,_<h?N:P,h))):(d==0&&(s=d=1),f=P.slice()),h=f.length,h<w&&f.unshift(0),r(v,f,w),s==-1&&(w=v.length,s=t(P,v,_,w),s<1&&(d++,r(v,_<w?N:P,w))),w=v.length):s===0&&(d++,v=[0]),m[u++]=d,s&&v[0]?v[w++]=E[S]||0:(v=[E[S]],w=1);while((S++<b||v[0]!==void 0)&&g--)}return m[0]||m.shift(),p.e=l,It(p,i?o+Ar(p)+1:o)}}();function D4(e,t){var r,n,a,o,i,s,l=0,u=0,d=e.constructor,f=d.precision;if(Ar(e)>16)throw Error(Xv+Ar(e));if(!e.s)return new d(Zn);for(er=!1,s=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Pi(2,u))/Math.LN10*2+5|0,s+=n,r=a=o=new d(Zn),d.precision=s;;){if(a=It(a.times(e),s),r=r.times(++l),i=o.plus(xo(a,r,s)),Xa(i.d).slice(0,s)===Xa(o.d).slice(0,s)){for(;u--;)o=It(o.times(o),s);return d.precision=f,t==null?(er=!0,It(o,f)):o}o=i}}function Ar(e){for(var t=e.e*Yt,r=e.d[0];r>=10;r/=10)t++;return t}function xp(e,t,r){if(t>e.LN10.sd())throw er=!0,r&&(e.precision=r),Error(ba+"LN10 precision limit exceeded");return It(new e(e.LN10),t)}function Fo(e){for(var t="";e--;)t+="0";return t}function au(e,t){var r,n,a,o,i,s,l,u,d,f=1,h=10,p=e,m=p.d,v=p.constructor,w=v.precision;if(p.s<1)throw Error(ba+(p.s?"NaN":"-Infinity"));if(p.eq(Zn))return new v(0);if(t==null?(er=!1,u=w):u=t,p.eq(10))return t==null&&(er=!0),xp(v,u);if(u+=h,v.precision=u,r=Xa(m),n=r.charAt(0),o=Ar(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Xa(p.d),n=r.charAt(0),f++;o=Ar(p),n>1?(p=new v("0."+r),o++):p=new v(n+"."+r.slice(1))}else return l=xp(v,u+2,w).times(o+""),p=au(new v(n+"."+r.slice(1)),u-h).plus(l),v.precision=w,t==null?(er=!0,It(p,w)):p;for(s=i=p=xo(p.minus(Zn),p.plus(Zn),u),d=It(p.times(p),u),a=3;;){if(i=It(i.times(d),u),l=s.plus(xo(i,new v(a),u)),Xa(l.d).slice(0,u)===Xa(s.d).slice(0,u))return s=s.times(2),o!==0&&(s=s.plus(xp(v,u+2,w).times(o+""))),s=xo(s,new v(f),u),v.precision=w,t==null?(er=!0,It(s,w)):s;s=l,a+=2}}function P2(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=$l(r/Yt),e.d=[],n=(r+1)%Yt,r<0&&(n+=Yt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Yt;n<a;)e.d.push(+t.slice(n,n+=Yt));t=t.slice(n),n=Yt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),er&&(e.e>Bd||e.e<-Bd))throw Error(Xv+r)}else e.s=0,e.e=0,e.d=[0];return e}function It(e,t,r){var n,a,o,i,s,l,u,d,f=e.d;for(i=1,o=f[0];o>=10;o/=10)i++;if(n=t-i,n<0)n+=Yt,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Yt),o=f.length,d>=o)return e;for(u=o=f[d],i=1;o>=10;o/=10)i++;n%=Yt,a=n-Yt+i}if(r!==void 0&&(o=Pi(10,i-a-1),s=u/o%10|0,l=t<0||f[d+1]!==void 0||u%o,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Pi(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(o=Ar(e),f.length=1,t=t-o-1,f[0]=Pi(10,(Yt-t%Yt)%Yt),e.e=$l(-t/Yt)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,o=1,d--):(f.length=d+1,o=Pi(10,Yt-n),f[d]=a>0?(u/Pi(10,i-a)%Pi(10,a)|0)*o:0),l)for(;;)if(d==0){(f[0]+=o)==Hr&&(f[0]=1,++e.e);break}else{if(f[d]+=o,f[d]!=Hr)break;f[d--]=0,o=1}for(n=f.length;f[--n]===0;)f.pop();if(er&&(e.e>Bd||e.e<-Bd))throw Error(Xv+Ar(e));return e}function R4(e,t){var r,n,a,o,i,s,l,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),er?It(t,p):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,s=f.length):(r=f,n=u,s=l.length),a=Math.max(Math.ceil(p/Yt),s)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=f.length,d=a<s,d&&(s=a),a=0;a<s;a++)if(l[a]!=f[a]){d=l[a]<f[a];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),s=l.length,a=f.length-s;a>0;--a)l[s++]=0;for(a=f.length;a>i;){if(l[--a]<f[a]){for(o=a;o&&l[--o]===0;)l[o]=Hr-1;--l[o],l[a]+=Hr}l[a]-=f[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,er?It(t,p):t):new h(0)}function Yi(e,t,r){var n,a=Ar(e),o=Xa(e.d),i=o.length;return t?(r&&(n=r-i)>0?o=o.charAt(0)+"."+o.slice(1)+Fo(n):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+Fo(-a-1)+o,r&&(n=r-i)>0&&(o+=Fo(n))):a>=i?(o+=Fo(a+1-i),r&&(n=r-a-1)>0&&(o=o+"."+Fo(n))):((n=a+1)<i&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(o+="."),o+=Fo(n))),e.s<0?"-"+o:o}function O2(e,t){if(e.length>t)return e.length=t,!0}function I4(e){var t,r,n;function a(o){var i=this;if(!(i instanceof a))return new a(o);if(i.constructor=a,o instanceof a){i.s=o.s,i.e=o.e,i.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Bi+o);if(o>0)i.s=1;else if(o<0)o=-o,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(o===~~o&&o<1e7){i.e=0,i.d=[o];return}return P2(i,o.toString())}else if(typeof o!="string")throw Error(Bi+o);if(o.charCodeAt(0)===45?(o=o.slice(1),i.s=-1):i.s=1,dG.test(o))P2(i,o);else throw Error(Bi+o)}if(a.prototype=Se,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=I4,a.config=a.set=hG,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function hG(e){if(!e||typeof e!="object")throw Error(ba+"Object expected");var t,r,n,a=["precision",1,Tl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if($l(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Bi+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Bi+r+": "+n);return this}var Hv=I4(fG);Zn=new Hv(1);const Tt=Hv;function pG(e){return vG(e)||yG(e)||mG(e)||gG()}function gG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mG(e,t){if(e){if(typeof e=="string")return lm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lm(e,t)}}function yG(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function vG(e){if(Array.isArray(e))return lm(e)}function lm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xG=function(t){return t},L4={},B4=function(t){return t===L4},C2=function(t){return function r(){return arguments.length===0||arguments.length===1&&B4(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},bG=function e(t,r){return t===1?r:C2(function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];var i=a.filter(function(s){return s!==L4}).length;return i>=t?r.apply(void 0,a):e(t-i,C2(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var d=a.map(function(f){return B4(f)?l.shift():f});return r.apply(void 0,pG(d).concat(l))}))})},ch=function(t){return bG(t.length,t)},cm=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},wG=ch(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),kG=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return xG;var a=r.reverse(),o=a[0],i=a.slice(1);return function(){return i.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},um=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},F4=function(t){var r=null,n=null;return function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return r&&o.every(function(s,l){return s===r[l]})||(r=o,n=t.apply(void 0,o)),n}};function SG(e){var t;return e===0?t=1:t=Math.floor(new Tt(e).abs().log(10).toNumber())+1,t}function jG(e,t,r){for(var n=new Tt(e),a=0,o=[];n.lt(t)&&a<1e5;)o.push(n.toNumber()),n=n.add(r),a++;return o}var NG=ch(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),_G=ch(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),PG=ch(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const uh={rangeStep:jG,getDigitCount:SG,interpolateNumber:NG,uninterpolateNumber:_G,uninterpolateTruncation:PG};function fm(e){return MG(e)||CG(e)||z4(e)||OG()}function OG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CG(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function MG(e){if(Array.isArray(e))return dm(e)}function ou(e,t){return TG(e)||EG(e,t)||z4(e,t)||AG()}function AG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4(e,t){if(e){if(typeof e=="string")return dm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dm(e,t)}}function dm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EG(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,o=void 0;try{for(var i=e[Symbol.iterator](),s;!(n=(s=i.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,o=l}finally{try{!n&&i.return!=null&&i.return()}finally{if(a)throw o}}return r}}function TG(e){if(Array.isArray(e))return e}function G4(e){var t=ou(e,2),r=t[0],n=t[1],a=r,o=n;return r>n&&(a=n,o=r),[a,o]}function U4(e,t,r){if(e.lte(0))return new Tt(0);var n=uh.getDigitCount(e.toNumber()),a=new Tt(10).pow(n),o=e.div(a),i=n!==1?.05:.1,s=new Tt(Math.ceil(o.div(i).toNumber())).add(r).mul(i),l=s.mul(a);return t?l:new Tt(Math.ceil(l))}function $G(e,t,r){var n=1,a=new Tt(e);if(!a.isint()&&r){var o=Math.abs(e);o<1?(n=new Tt(10).pow(uh.getDigitCount(e)-1),a=new Tt(Math.floor(a.div(n).toNumber())).mul(n)):o>1&&(a=new Tt(Math.floor(e)))}else e===0?a=new Tt(Math.floor((t-1)/2)):r||(a=new Tt(Math.floor(e)));var i=Math.floor((t-1)/2),s=kG(wG(function(l){return a.add(new Tt(l-i).mul(n)).toNumber()}),cm);return s(0,t)}function W4(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Tt(0),tickMin:new Tt(0),tickMax:new Tt(0)};var o=U4(new Tt(t).sub(e).div(r-1),n,a),i;e<=0&&t>=0?i=new Tt(0):(i=new Tt(e).add(t).div(2),i=i.sub(new Tt(i).mod(o)));var s=Math.ceil(i.sub(e).div(o).toNumber()),l=Math.ceil(new Tt(t).sub(i).div(o).toNumber()),u=s+l+1;return u>r?W4(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:o,tickMin:i.sub(new Tt(s).mul(o)),tickMax:i.add(new Tt(l).mul(o))})}function DG(e){var t=ou(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),s=G4([r,n]),l=ou(s,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(fm(cm(0,a-1).map(function(){return 1/0}))):[].concat(fm(cm(0,a-1).map(function(){return-1/0})),[d]);return r>n?um(f):f}if(u===d)return $G(u,a,o);var h=W4(u,d,i,o),p=h.step,m=h.tickMin,v=h.tickMax,w=uh.rangeStep(m,v.add(new Tt(.1).mul(p)),p);return r>n?um(w):w}function RG(e,t){var r=ou(e,2),n=r[0],a=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=G4([n,a]),s=ou(i,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var d=Math.max(t,2),f=U4(new Tt(u).sub(l).div(d-1),o,0),h=[].concat(fm(uh.rangeStep(new Tt(l),new Tt(u).sub(new Tt(.99).mul(f)),f)),[u]);return n>a?um(h):h}var IG=F4(DG),LG=F4(RG),BG="Invariant failed";function qi(e,t){throw new Error(BG)}var FG=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function rl(e){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fd.apply(this,arguments)}function zG(e,t){return XG(e)||WG(e,t)||UG(e,t)||GG()}function GG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UG(e,t){if(e){if(typeof e=="string")return M2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M2(e,t)}}function M2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function XG(e){if(Array.isArray(e))return e}function HG(e,t){if(e==null)return{};var r=VG(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function KG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V4(n.key),n)}}function qG(e,t,r){return t&&YG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZG(e,t,r){return t=zd(t),QG(e,X4()?Reflect.construct(t,r||[],zd(e).constructor):t.apply(e,r))}function QG(e,t){if(t&&(rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JG(e)}function JG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X4=function(){return!!e})()}function zd(e){return zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zd(e)}function eU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hm(e,t)}function hm(e,t){return hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hm(e,t)}function H4(e,t,r){return t=V4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V4(e){var t=tU(e,"string");return rl(t)=="symbol"?t:t+""}function tU(e,t){if(rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Dl=function(e){function t(){return KG(this,t),ZG(this,t,arguments)}return eU(t,e),qG(t,[{key:"render",value:function(){var n=this.props,a=n.offset,o=n.layout,i=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=HG(n,FG),p=He(h,!1);this.props.direction==="x"&&d.type!=="number"&&qi();var m=l.map(function(v){var w=u(v,s),x=w.x,g=w.y,y=w.value,S=w.errorVal;if(!S)return null;var b=[],k,_;if(Array.isArray(S)){var N=zG(S,2);k=N[0],_=N[1]}else k=_=S;if(o==="vertical"){var O=d.scale,A=g+a,E=A+i,P=A-i,M=O(y-k),D=O(y+_);b.push({x1:D,y1:E,x2:D,y2:P}),b.push({x1:M,y1:A,x2:D,y2:A}),b.push({x1:M,y1:E,x2:M,y2:P})}else if(o==="horizontal"){var T=f.scale,B=x+a,C=B-i,R=B+i,z=T(y-k),G=T(y+_);b.push({x1:C,y1:G,x2:R,y2:G}),b.push({x1:B,y1:z,x2:B,y2:G}),b.push({x1:C,y1:z,x2:R,y2:z})}return L.createElement(vt,Fd({className:"recharts-errorBar",key:"bar-".concat(b.map(function(ne){return"".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))},p),b.map(function(ne){return L.createElement("line",Fd({},ne,{key:"line-".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))}))});return L.createElement(vt,{className:"recharts-errorBars"},m)}}])}(L.Component);H4(Dl,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});H4(Dl,"displayName","ErrorBar");function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(r),!0).forEach(function(n){rU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rU(e,t,r){return t=nU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nU(e){var t=aU(e,"string");return iu(t)=="symbol"?t:t+""}function aU(e,t){if(iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K4=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,o=t.legendContent,i=qn(r,Ya);if(!i)return null;var s=Ya.defaultProps,l=s!==void 0?bi(bi({},s),i.props):{},u;return i.props&&i.props.payload?u=i.props&&i.props.payload:o==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,p=f.props,m=p.sectors||p.data||[];return d.concat(m.map(function(v){return{type:i.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?bi(bi({},h),f.props):{},m=p.dataKey,v=p.name,w=p.legendType,x=p.hide;return{inactive:x,dataKey:m,type:l.iconType||w||"square",color:Vv(f),value:v||m,payload:p}}),bi(bi(bi({},l),Ya.getWithHeight(i,a)),{},{payload:u,item:i})};function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function E2(e){return lU(e)||sU(e)||iU(e)||oU()}function oU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iU(e,t){if(e){if(typeof e=="string")return pm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pm(e,t)}}function sU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lU(e){if(Array.isArray(e))return pm(e)}function pm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T2(Object(r),!0).forEach(function(n){Bs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bs(e,t,r){return t=cU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cU(e){var t=uU(e,"string");return su(t)=="symbol"?t:t+""}function uU(e,t){if(su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fr(e,t,r){return Ue(e)||Ue(t)?r:Br(t)?ya(e,t,r):Ve(t)?t(e):r}function kc(e,t,r,n){var a=sG(e,function(s){return Fr(s,t)});if(r==="number"){var o=a.filter(function(s){return de(s)||parseFloat(s)});return o.length?[lh(o),Ho(o)]:[1/0,-1/0]}var i=n?a.filter(function(s){return!Ue(s)}):a;return i.map(function(s){return Br(s)||s instanceof Date?s:""})}var fU=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<s;u++){var d=u>0?a[u-1].coordinate:a[s-1].coordinate,f=a[u].coordinate,h=u>=s-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if($a(f-d)!==$a(h-f)){var m=[];if($a(h-f)===$a(l[1]-l[0])){p=h;var v=f+l[1]-l[0];m[0]=Math.min(v,(v+d)/2),m[1]=Math.max(v,(v+d)/2)}else{p=d;var w=h+l[1]-l[0];m[0]=Math.min(f,(w+f)/2),m[1]=Math.max(f,(w+f)/2)}var x=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>x[0]&&t<=x[1]||t>=m[0]&&t<=m[1]){i=a[u].index;break}}else{var g=Math.min(d,h),y=Math.max(d,h);if(t>(g+f)/2&&t<=(y+f)/2){i=a[u].index;break}}}else for(var S=0;S<s;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){i=n[S].index;break}return i},Vv=function(t){var r,n=t,a=n.type.displayName,o=(r=t.type)!==null&&r!==void 0&&r.defaultProps?mr(mr({},t.type.defaultProps),t.props):t.props,i=o.stroke,s=o.fill,l;switch(a){case"Line":l=i;break;case"Area":case"Radar":l=i&&i!=="none"?i:s;break;default:l=s;break}return l},dU=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,o=a===void 0?{}:a;if(!o)return{};for(var i={},s=Object.keys(o),l=0,u=s.length;l<u;l++)for(var d=o[s[l]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var m=d[f[h]],v=m.items,w=m.cateAxisId,x=v.filter(function(_){return mo(_.type).indexOf("Bar")>=0});if(x&&x.length){var g=x[0].type.defaultProps,y=g!==void 0?mr(mr({},g),x[0].props):x[0].props,S=y.barSize,b=y[w];i[b]||(i[b]=[]);var k=Ue(S)?r:S;i[b].push({item:x[0],stackList:x.slice(1),barSize:Ue(k)?void 0:Vi(k,n,0)})}}return i},hU=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,o=t.sizeList,i=o===void 0?[]:o,s=t.maxBarSize,l=i.length;if(l<1)return null;var u=Vi(r,a,0,!0),d,f=[];if(i[0].barSize===+i[0].barSize){var h=!1,p=a/l,m=i.reduce(function(S,b){return S+b.barSize||0},0);m+=(l-1)*u,m>=a&&(m-=(l-1)*u,u=0),m>=a&&p>0&&(h=!0,p*=.9,m=l*p);var v=(a-m)/2>>0,w={offset:v-u,size:0};d=i.reduce(function(S,b){var k={item:b.item,position:{offset:w.offset+w.size+u,size:h?p:b.barSize}},_=[].concat(E2(S),[k]);return w=_[_.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(N){_.push({item:N,position:w})}),_},f)}else{var x=Vi(n,a,0,!0);a-2*x-(l-1)*u<=0&&(u=0);var g=(a-2*x-(l-1)*u)/l;g>1&&(g>>=0);var y=s===+s?Math.min(g,s):g;d=i.reduce(function(S,b,k){var _=[].concat(E2(S),[{item:b.item,position:{offset:x+(g+u)*k+(g-y)/2,size:y}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(N){_.push({item:N,position:_[_.length-1].position})}),_},f)}return d},pU=function(t,r,n,a){var o=n.children,i=n.width,s=n.margin,l=i-(s.left||0)-(s.right||0),u=K4({children:o,legendWidth:l});if(u){var d=a||{},f=d.width,h=d.height,p=u.align,m=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&m==="middle")&&p!=="center"&&de(t[p]))return mr(mr({},t),{},Bs({},p,t[p]+(f||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&m!=="middle"&&de(t[m]))return mr(mr({},t),{},Bs({},m,t[m]+(h||0)))}return t},gU=function(t,r,n){return Ue(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Y4=function(t,r,n,a,o){var i=r.props.children,s=Fn(i,Dl).filter(function(u){return gU(a,o,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Fr(d,n);if(Ue(f))return u;var h=Array.isArray(f)?[lh(f),Ho(f)]:[f,f],p=l.reduce(function(m,v){var w=Fr(d,v,0),x=h[0]-Math.abs(Array.isArray(w)?w[0]:w),g=h[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(x,m[0]),Math.max(g,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},mU=function(t,r,n,a,o){var i=r.map(function(s){return Y4(t,s,n,o,a)}).filter(function(s){return!Ue(s)});return i&&i.length?i.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},q4=function(t,r,n,a,o){var i=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&Y4(t,l,u,a)||kc(t,u,n,o)});if(n==="number")return i.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return i.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)s[u[d]]||(s[u[d]]=!0,l.push(u[d]));return l},[])},Z4=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Q4=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var o,i,s=t.map(function(l){return l.coordinate===r&&(o=!0),l.coordinate===n&&(i=!0),l.coordinate});return o||s.push(r),i||s.push(n),s},po=function(t,r,n){if(!t)return null;var a=t.scale,o=t.duplicateDomain,i=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&i==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?$a(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Ol(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:o?o[f]:f,index:h,offset:u}})},bp=new WeakMap,wf=function(t,r){if(typeof r!="function")return t;bp.has(t)||bp.set(t,new WeakMap);var n=bp.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},yU=function(t,r,n){var a=t.scale,o=t.type,i=t.layout,s=t.axisType;if(a==="auto")return i==="radial"&&s==="radiusAxis"?{scale:Jc(),realScaleType:"band"}:i==="radial"&&s==="angleAxis"?{scale:Dd(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:wc(),realScaleType:"point"}:o==="category"?{scale:Jc(),realScaleType:"band"}:{scale:Dd(),realScaleType:"linear"};if(Hi(a)){var l="scale".concat(K0(a));return{scale:(_2[l]||wc)(),realScaleType:_2[l]?l:"point"}}return Ve(a)?{scale:a}:{scale:wc(),realScaleType:"point"}},$2=1e-4,vU=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),o=Math.min(a[0],a[1])-$2,i=Math.max(a[0],a[1])+$2,s=t(r[0]),l=t(r[n-1]);(s<o||s>i||l<o||l>i)&&t.domain([r[0],r[n-1]])}},xU=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},bU=function(t,r){if(!r||r.length!==2||!de(r[0])||!de(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),o=[t[0],t[1]];return(!de(t[0])||t[0]<n)&&(o[0]=n),(!de(t[1])||t[1]>a)&&(o[1]=a),o[0]>a&&(o[0]=a),o[1]<n&&(o[1]=n),o},wU=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var o=0,i=0,s=0;s<r;++s){var l=Ol(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1]):(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1])}},kU=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var o=0,i=0;i<r;++i){var s=Ol(t[i][n][1])?t[i][n][0]:t[i][n][1];s>=0?(t[i][n][0]=o,t[i][n][1]=o+s,o=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},SU={sign:wU,expand:LE,none:Ks,silhouette:BE,wiggle:FE,positive:kU},jU=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),o=SU[n],i=IE().keys(a).value(function(s,l){return+Fr(s,l,0)}).order(Bg).offset(o);return i(t)},NU=function(t,r,n,a,o,i){if(!t)return null;var s=i?r.reverse():r,l={},u=s.reduce(function(f,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?mr(mr({},h.type.defaultProps),h.props):h.props,v=m.stackId,w=m.hide;if(w)return f;var x=m[n],g=f[x]||{hasStack:!1,stackGroups:{}};if(Br(v)){var y=g.stackGroups[v]||{numericAxisId:n,cateAxisId:a,items:[]};y.items.push(h),g.hasStack=!0,g.stackGroups[v]=y}else g.stackGroups[rs("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return mr(mr({},f),{},Bs({},x,g))},l),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,w){var x=p.stackGroups[w];return mr(mr({},v),{},Bs({},w,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:jU(t,x.items,o)}))},m)}return mr(mr({},f),{},Bs({},h,p))},d)},_U=function(t,r){var n=r.realScaleType,a=r.type,o=r.tickCount,i=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&a==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=IG(u,o,s);return t.domain([lh(d),Ho(d)]),{niceTicks:d}}if(o&&a==="number"){var f=t.domain(),h=LG(f,o,s);return{niceTicks:h}}return null};function nl(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,o=e.index,i=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ue(a[t.dataKey])){var s=dd(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var l=Fr(a,Ue(i)?t.dataKey:i);return Ue(l)?null:t.scale(l)}var D2=function(t){var r=t.axis,n=t.ticks,a=t.offset,o=t.bandSize,i=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=Fr(i,r.dataKey,r.domain[s]);return Ue(l)?null:r.scale(l)-o/2+a},PU=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return a<=0&&o>=0?0:o<0?o:a}return n[0]},OU=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?mr(mr({},t.type.defaultProps),t.props):t.props,o=a.stackId;if(Br(o)){var i=r[o];if(i){var s=i.items.indexOf(t);return s>=0?i.stackedData[s]:null}}return null},CU=function(t){return t.reduce(function(r,n){return[lh(n.concat([r[0]]).filter(de)),Ho(n.concat([r[1]]).filter(de))]},[1/0,-1/0])},J4=function(t,r,n){return Object.keys(t).reduce(function(a,o){var i=t[o],s=i.stackedData,l=s.reduce(function(u,d){var f=CU(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},R2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gm=function(t,r,n){if(Ve(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(de(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(R2.test(t[0])){var o=+R2.exec(t[0])[1];a[0]=r[0]-o}else Ve(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(de(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(I2.test(t[1])){var i=+I2.exec(t[1])[1];a[1]=r[1]+i}else Ve(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Gd=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var o=bv(r,function(f){return f.coordinate}),i=1/0,s=1,l=o.length;s<l;s++){var u=o[s],d=o[s-1];i=Math.min((u.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},L2=function(t,r,n){return!t||!t.length||Ki(t,ya(n,"type.defaultProps.domain"))?r:t},e3=function(t,r){var n=t.type.defaultProps?mr(mr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,o=n.name,i=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,d=n.hide;return mr(mr({},He(t,!1)),{},{dataKey:a,unit:i,formatter:s,name:o||a,color:Vv(t),value:Fr(r,a),type:l,payload:r,chartType:u,hide:d})};function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}function B2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function F2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(r),!0).forEach(function(n){MU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MU(e,t,r){return t=AU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AU(e){var t=EU(e,"string");return lu(t)=="symbol"?t:t+""}function EU(e,t){if(lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ud=Math.PI/180,TU=function(t){return t*180/Math.PI},rn=function(t,r,n,a){return{x:t+Math.cos(-Ud*a)*n,y:r+Math.sin(-Ud*a)*n}},$U=function(t,r){var n=t.x,a=t.y,o=r.x,i=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(a-i,2))},DU=function(t,r){var n=t.x,a=t.y,o=r.cx,i=r.cy,s=$U({x:n,y:a},{x:o,y:i});if(s<=0)return{radius:s};var l=(n-o)/s,u=Math.acos(l);return a>i&&(u=2*Math.PI-u),{radius:s,angle:TU(u),angleInRadian:u}},RU=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),o=Math.floor(n/360),i=Math.min(a,o);return{startAngle:r-i*360,endAngle:n-i*360}},IU=function(t,r){var n=r.startAngle,a=r.endAngle,o=Math.floor(n/360),i=Math.floor(a/360),s=Math.min(o,i);return t+s*360},z2=function(t,r){var n=t.x,a=t.y,o=DU({x:n,y:a},r),i=o.radius,s=o.angle,l=r.innerRadius,u=r.outerRadius;if(i<l||i>u)return!1;if(i===0)return!0;var d=RU(r),f=d.startAngle,h=d.endAngle,p=s,m;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}return m?F2(F2({},r),{},{radius:i,angle:IU(p,r)}):null};function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}var LU=["offset"];function BU(e){return UU(e)||GU(e)||zU(e)||FU()}function FU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zU(e,t){if(e){if(typeof e=="string")return mm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mm(e,t)}}function GU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UU(e){if(Array.isArray(e))return mm(e)}function mm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WU(e,t){if(e==null)return{};var r=XU(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XU(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function G2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(r),!0).forEach(function(n){HU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HU(e,t,r){return t=VU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VU(e){var t=KU(e,"string");return cu(t)=="symbol"?t:t+""}function KU(e,t){if(cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uu.apply(this,arguments)}var YU=function(t){var r=t.value,n=t.formatter,a=Ue(t.children)?r:t.children;return Ve(n)?n(a):a},qU=function(t,r){var n=$a(r-t),a=Math.min(Math.abs(r-t),360);return n*a},ZU=function(t,r,n){var a=t.position,o=t.viewBox,i=t.offset,s=t.className,l=o,u=l.cx,d=l.cy,f=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,v=l.clockWise,w=(f+h)/2,x=qU(p,m),g=x>=0?1:-1,y,S;a==="insideStart"?(y=p+g*i,S=v):a==="insideEnd"?(y=m-g*i,S=!v):a==="end"&&(y=m+g*i,S=v),S=x<=0?S:!S;var b=rn(u,d,w,y),k=rn(u,d,w,y+(S?1:-1)*359),_="M".concat(b.x,",").concat(b.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),N=Ue(t.id)?rs("recharts-radial-line-"):t.id;return L.createElement("text",uu({},n,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",s)}),L.createElement("defs",null,L.createElement("path",{id:N,d:_})),L.createElement("textPath",{xlinkHref:"#".concat(N)},r))},QU=function(t){var r=t.viewBox,n=t.offset,a=t.position,o=r,i=o.cx,s=o.cy,l=o.innerRadius,u=o.outerRadius,d=o.startAngle,f=o.endAngle,h=(d+f)/2;if(a==="outside"){var p=rn(i,s,u+n,h),m=p.x,v=p.y;return{x:m,y:v,textAnchor:m>=i?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:i,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:i,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:i,y:s,textAnchor:"middle",verticalAnchor:"end"};var w=(l+u)/2,x=rn(i,s,w,h),g=x.x,y=x.y;return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},JU=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,o=t.position,i=r,s=i.x,l=i.y,u=i.width,d=i.height,f=d>=0?1:-1,h=f*a,p=f>0?"end":"start",m=f>0?"start":"end",v=u>=0?1:-1,w=v*a,x=v>0?"end":"start",g=v>0?"start":"end";if(o==="top"){var y={x:s+u/2,y:l-f*a,textAnchor:"middle",verticalAnchor:p};return Rr(Rr({},y),n?{height:Math.max(l-n.y,0),width:u}:{})}if(o==="bottom"){var S={x:s+u/2,y:l+d+h,textAnchor:"middle",verticalAnchor:m};return Rr(Rr({},S),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(o==="left"){var b={x:s-w,y:l+d/2,textAnchor:x,verticalAnchor:"middle"};return Rr(Rr({},b),n?{width:Math.max(b.x-n.x,0),height:d}:{})}if(o==="right"){var k={x:s+u+w,y:l+d/2,textAnchor:g,verticalAnchor:"middle"};return Rr(Rr({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:d}:{})}var _=n?{width:u,height:d}:{};return o==="insideLeft"?Rr({x:s+w,y:l+d/2,textAnchor:g,verticalAnchor:"middle"},_):o==="insideRight"?Rr({x:s+u-w,y:l+d/2,textAnchor:x,verticalAnchor:"middle"},_):o==="insideTop"?Rr({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:m},_):o==="insideBottom"?Rr({x:s+u/2,y:l+d-h,textAnchor:"middle",verticalAnchor:p},_):o==="insideTopLeft"?Rr({x:s+w,y:l+h,textAnchor:g,verticalAnchor:m},_):o==="insideTopRight"?Rr({x:s+u-w,y:l+h,textAnchor:x,verticalAnchor:m},_):o==="insideBottomLeft"?Rr({x:s+w,y:l+d-h,textAnchor:g,verticalAnchor:p},_):o==="insideBottomRight"?Rr({x:s+u-w,y:l+d-h,textAnchor:x,verticalAnchor:p},_):jl(o)&&(de(o.x)||Ai(o.x))&&(de(o.y)||Ai(o.y))?Rr({x:s+Vi(o.x,u),y:l+Vi(o.y,d),textAnchor:"end",verticalAnchor:"end"},_):Rr({x:s+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)},eW=function(t){return"cx"in t&&de(t.cx)};function tn(e){var t=e.offset,r=t===void 0?5:t,n=WU(e,LU),a=Rr({offset:r},n),o=a.viewBox,i=a.position,s=a.value,l=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!o||Ue(s)&&Ue(l)&&!j.isValidElement(u)&&!Ve(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var p;if(Ve(u)){if(p=j.createElement(u,a),j.isValidElement(p))return p}else p=YU(a);var m=eW(o),v=He(a,!0);if(m&&(i==="insideStart"||i==="insideEnd"||i==="end"))return ZU(a,p,v);var w=m?QU(a):JU(a);return L.createElement(Pd,uu({className:ot("recharts-label",f)},v,w,{breakAll:h}),p)}tn.displayName="Label";var t3=function(t){var r=t.cx,n=t.cy,a=t.angle,o=t.startAngle,i=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,p=t.top,m=t.left,v=t.width,w=t.height,x=t.clockWise,g=t.labelViewBox;if(g)return g;if(de(v)&&de(w)){if(de(f)&&de(h))return{x:f,y:h,width:v,height:w};if(de(p)&&de(m))return{x:p,y:m,width:v,height:w}}return de(f)&&de(h)?{x:f,y:h,width:0,height:0}:de(r)&&de(n)?{cx:r,cy:n,startAngle:o||a||0,endAngle:i||a||0,innerRadius:u||0,outerRadius:d||l||s||0,clockWise:x}:t.viewBox?t.viewBox:{}},tW=function(t,r){return t?t===!0?L.createElement(tn,{key:"label-implicit",viewBox:r}):Br(t)?L.createElement(tn,{key:"label-implicit",viewBox:r,value:t}):j.isValidElement(t)?t.type===tn?j.cloneElement(t,{key:"label-implicit",viewBox:r}):L.createElement(tn,{key:"label-implicit",content:t,viewBox:r}):Ve(t)?L.createElement(tn,{key:"label-implicit",content:t,viewBox:r}):jl(t)?L.createElement(tn,uu({viewBox:r},t,{key:"label-implicit"})):null:null},rW=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,o=t3(t),i=Fn(a,tn).map(function(l,u){return j.cloneElement(l,{viewBox:r||o,key:"label-".concat(u)})});if(!n)return i;var s=tW(t.label,r||o);return[s].concat(BU(i))};tn.parseViewBox=t3;tn.renderCallByParent=rW;function nW(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var aW=nW;const oW=Lt(aW);function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}var iW=["valueAccessor"],sW=["data","dataKey","clockWise","id","textBreakAll"];function lW(e){return dW(e)||fW(e)||uW(e)||cW()}function cW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uW(e,t){if(e){if(typeof e=="string")return ym(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ym(e,t)}}function fW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dW(e){if(Array.isArray(e))return ym(e)}function ym(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wd(){return Wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wd.apply(this,arguments)}function U2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U2(Object(r),!0).forEach(function(n){hW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hW(e,t,r){return t=pW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pW(e){var t=gW(e,"string");return fu(t)=="symbol"?t:t+""}function gW(e,t){if(fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X2(e,t){if(e==null)return{};var r=mW(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var yW=function(t){return Array.isArray(t.value)?oW(t.value):t.value};function Za(e){var t=e.valueAccessor,r=t===void 0?yW:t,n=X2(e,iW),a=n.data,o=n.dataKey,i=n.clockWise,s=n.id,l=n.textBreakAll,u=X2(n,sW);return!a||!a.length?null:L.createElement(vt,{className:"recharts-label-list"},a.map(function(d,f){var h=Ue(o)?r(d,f):Fr(d&&d.payload,o),p=Ue(s)?{}:{id:"".concat(s,"-").concat(f)};return L.createElement(tn,Wd({},He(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:tn.parseViewBox(Ue(i)?d:W2(W2({},d),{},{clockWise:i})),key:"label-".concat(f),index:f}))}))}Za.displayName="LabelList";function vW(e,t){return e?e===!0?L.createElement(Za,{key:"labelList-implicit",data:t}):L.isValidElement(e)||Ve(e)?L.createElement(Za,{key:"labelList-implicit",data:t,content:e}):jl(e)?L.createElement(Za,Wd({data:t},e,{key:"labelList-implicit"})):null:null}function xW(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Fn(n,Za).map(function(i,s){return j.cloneElement(i,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var o=vW(e.label,t);return[o].concat(lW(a))}Za.renderCallByParent=xW;function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vm.apply(this,arguments)}function H2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function V2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(r),!0).forEach(function(n){bW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bW(e,t,r){return t=wW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wW(e){var t=kW(e,"string");return du(t)=="symbol"?t:t+""}function kW(e,t){if(du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SW=function(t,r){var n=$a(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},kf=function(t){var r=t.cx,n=t.cy,a=t.radius,o=t.angle,i=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,d=l*(s?1:-1)+a,f=Math.asin(l/d)/Ud,h=u?o:o+i*f,p=rn(r,n,d,h),m=rn(r,n,a,h),v=u?o-i*f:o,w=rn(r,n,d*Math.cos(f*Ud),v);return{center:p,circleTangency:m,lineTangency:w,theta:f}},r3=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,o=t.outerRadius,i=t.startAngle,s=t.endAngle,l=SW(i,s),u=i+l,d=rn(r,n,o,i),f=rn(r,n,o,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=rn(r,n,a,i),m=rn(r,n,a,u);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},jW=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,o=t.outerRadius,i=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=$a(d-u),h=kf({cx:r,cy:n,radius:o,angle:u,sign:f,cornerRadius:i,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,v=h.theta,w=kf({cx:r,cy:n,radius:o,angle:d,sign:-f,cornerRadius:i,cornerIsExternal:l}),x=w.circleTangency,g=w.lineTangency,y=w.theta,S=l?Math.abs(u-d):Math.abs(u-d)-v-y;if(S<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):r3({cx:r,cy:n,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d});var b="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var k=kf({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),_=k.circleTangency,N=k.lineTangency,O=k.theta,A=kf({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),E=A.circleTangency,P=A.lineTangency,M=A.theta,D=l?Math.abs(u-d):Math.abs(u-d)-O-M;if(D<0&&i===0)return"".concat(b,"L").concat(r,",").concat(n,"Z");b+="L".concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(D>180),",").concat(+(f>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(r,",").concat(n,"Z");return b},NW={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},n3=function(t){var r=V2(V2({},NW),t),n=r.cx,a=r.cy,o=r.innerRadius,i=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(i<o||d===f)return null;var p=ot("recharts-sector",h),m=i-o,v=Vi(s,m,0,!0),w;return v>0&&Math.abs(d-f)<360?w=jW({cx:n,cy:a,innerRadius:o,outerRadius:i,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):w=r3({cx:n,cy:a,innerRadius:o,outerRadius:i,startAngle:d,endAngle:f}),L.createElement("path",vm({},He(r,!0),{className:p,d:w,role:"img"}))};function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xm.apply(this,arguments)}function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(n){_W(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _W(e,t,r){return t=PW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PW(e){var t=OW(e,"string");return hu(t)=="symbol"?t:t+""}function OW(e,t){if(hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q2={curveBasisClosed:_E,curveBasisOpen:PE,curveBasis:NE,curveBumpX:fE,curveBumpY:dE,curveLinearClosed:OE,curveLinear:q0,curveMonotoneX:CE,curveMonotoneY:ME,curveNatural:AE,curveStep:EE,curveStepAfter:$E,curveStepBefore:TE},Sf=function(t){return t.x===+t.x&&t.y===+t.y},tc=function(t){return t.x},rc=function(t){return t.y},CW=function(t,r){if(Ve(t))return t;var n="curve".concat(K0(t));return(n==="curveMonotone"||n==="curveBump")&&r?q2["".concat(n).concat(r==="vertical"?"Y":"X")]:q2[n]||q0},MW=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,o=a===void 0?[]:a,i=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,d=CW(n,s),f=u?o.filter(function(v){return Sf(v)}):o,h;if(Array.isArray(i)){var p=u?i.filter(function(v){return Sf(v)}):i,m=f.map(function(v,w){return Y2(Y2({},v),{},{base:p[w]})});return s==="vertical"?h=hf().y(rc).x1(tc).x0(function(v){return v.base.x}):h=hf().x(tc).y1(rc).y0(function(v){return v.base.y}),h.defined(Sf).curve(d),h(m)}return s==="vertical"&&de(i)?h=hf().y(rc).x1(tc).x0(i):de(i)?h=hf().x(tc).y1(rc).y0(i):h=oj().x(tc).y(rc),h.defined(Sf).curve(d),h(f)},Fi=function(t){var r=t.className,n=t.points,a=t.path,o=t.pathRef;if((!n||!n.length)&&!a)return null;var i=n&&n.length?MW(t):a;return j.createElement("path",xm({},He(t,!1),hd(t),{className:ot("recharts-curve",r),d:i,ref:o}))},a3={exports:{}},AW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",EW=AW,TW=EW;function o3(){}function i3(){}i3.resetWarningCache=o3;var $W=function(){function e(n,a,o,i,s,l){if(l!==TW){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i3,resetWarningCache:o3};return r.PropTypes=r,r};a3.exports=$W();var DW=a3.exports;const St=Lt(DW),{getOwnPropertyNames:RW,getOwnPropertySymbols:IW}=Object,{hasOwnProperty:LW}=Object.prototype;function wp(e,t){return function(n,a,o){return e(n,a,o)&&t(n,a,o)}}function jf(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:o}=a,i=o.get(r),s=o.get(n);if(i&&s)return i===n&&s===r;o.set(r,n),o.set(n,r);const l=e(r,n,a);return o.delete(r),o.delete(n),l}}function BW(e){return e!=null?e[Symbol.toStringTag]:void 0}function Z2(e){return RW(e).concat(IW(e))}const FW=Object.hasOwn||((e,t)=>LW.call(e,t));function os(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const zW="__v",GW="__o",UW="_owner",{getOwnPropertyDescriptor:Q2,keys:J2}=Object;function WW(e,t){return e.byteLength===t.byteLength&&Xd(new Uint8Array(e),new Uint8Array(t))}function XW(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function HW(e,t){return e.byteLength===t.byteLength&&Xd(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function VW(e,t){return os(e.getTime(),t.getTime())}function KW(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function YW(e,t){return e===t}function ew(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),o=e.entries();let i,s,l=0;for(;(i=o.next())&&!i.done;){const u=t.entries();let d=!1,f=0;for(;(s=u.next())&&!s.done;){if(a[f]){f++;continue}const h=i.value,p=s.value;if(r.equals(h[0],p[0],l,f,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;l++}return!0}const qW=os;function ZW(e,t,r){const n=J2(e);let a=n.length;if(J2(t).length!==a)return!1;for(;a-- >0;)if(!s3(e,t,r,n[a]))return!1;return!0}function nc(e,t,r){const n=Z2(e);let a=n.length;if(Z2(t).length!==a)return!1;let o,i,s;for(;a-- >0;)if(o=n[a],!s3(e,t,r,o)||(i=Q2(e,o),s=Q2(t,o),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function QW(e,t){return os(e.valueOf(),t.valueOf())}function JW(e,t){return e.source===t.source&&e.flags===t.flags}function tw(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),o=e.values();let i,s;for(;(i=o.next())&&!i.done;){const l=t.values();let u=!1,d=0;for(;(s=l.next())&&!s.done;){if(!a[d]&&r.equals(i.value,s.value,i.value,s.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Xd(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function eX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function s3(e,t,r,n){return(n===UW||n===GW||n===zW)&&(e.$$typeof||t.$$typeof)?!0:FW(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const tX="[object ArrayBuffer]",rX="[object Arguments]",nX="[object Boolean]",aX="[object DataView]",oX="[object Date]",iX="[object Error]",sX="[object Map]",lX="[object Number]",cX="[object Object]",uX="[object RegExp]",fX="[object Set]",dX="[object String]",hX={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},pX="[object URL]",gX=Object.prototype.toString;function mX({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:o,areMapsEqual:i,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:m}){return function(w,x,g){if(w===x)return!0;if(w==null||x==null)return!1;const y=typeof w;if(y!==typeof x)return!1;if(y!=="object")return y==="number"?s(w,x,g):y==="function"?o(w,x,g):!1;const S=w.constructor;if(S!==x.constructor)return!1;if(S===Object)return l(w,x,g);if(Array.isArray(w))return t(w,x,g);if(S===Date)return n(w,x,g);if(S===RegExp)return d(w,x,g);if(S===Map)return i(w,x,g);if(S===Set)return f(w,x,g);const b=gX.call(w);if(b===oX)return n(w,x,g);if(b===uX)return d(w,x,g);if(b===sX)return i(w,x,g);if(b===fX)return f(w,x,g);if(b===cX)return typeof w.then!="function"&&typeof x.then!="function"&&l(w,x,g);if(b===pX)return p(w,x,g);if(b===iX)return a(w,x,g);if(b===rX)return l(w,x,g);if(hX[b])return h(w,x,g);if(b===tX)return e(w,x,g);if(b===aX)return r(w,x,g);if(b===nX||b===lX||b===dX)return u(w,x,g);if(m){let k=m[b];if(!k){const _=BW(w);_&&(k=m[_])}if(k)return k(w,x,g)}return!1}}function yX({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:WW,areArraysEqual:r?nc:XW,areDataViewsEqual:HW,areDatesEqual:VW,areErrorsEqual:KW,areFunctionsEqual:YW,areMapsEqual:r?wp(ew,nc):ew,areNumbersEqual:qW,areObjectsEqual:r?nc:ZW,arePrimitiveWrappersEqual:QW,areRegExpsEqual:JW,areSetsEqual:r?wp(tw,nc):tw,areTypedArraysEqual:r?wp(Xd,nc):Xd,areUrlsEqual:eX,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=jf(n.areArraysEqual),o=jf(n.areMapsEqual),i=jf(n.areObjectsEqual),s=jf(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:i,areSetsEqual:s})}return n}function vX(e){return function(t,r,n,a,o,i,s){return e(t,r,s)}}function xX({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,l){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(s,l,{cache:u,equals:n,meta:d,strict:a})};if(e)return function(s,l){return t(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const o={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,l){return t(s,l,o)}}const bX=mi();mi({strict:!0});mi({circular:!0});mi({circular:!0,strict:!0});mi({createInternalComparator:()=>os});mi({strict:!0,createInternalComparator:()=>os});mi({circular:!0,createInternalComparator:()=>os});mi({circular:!0,createInternalComparator:()=>os,strict:!0});function mi(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,o=yX(e),i=mX(o),s=r?r(i):vX(i);return xX({circular:t,comparator:i,createState:n,equals:s,strict:a})}function wX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function rw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(o){r<0&&(r=o),o-r>t?(e(o),r=-1):wX(a)};requestAnimationFrame(n)}function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function kX(e){return _X(e)||NX(e)||jX(e)||SX()}function SX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jX(e,t){if(e){if(typeof e=="string")return nw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nw(e,t)}}function nw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _X(e){if(Array.isArray(e))return e}function PX(){var e={},t=function(){return null},r=!1,n=function a(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var i=o,s=kX(i),l=s[0],u=s.slice(1);if(typeof l=="number"){rw(a.bind(null,u),l);return}a(l),rw(a.bind(null,u));return}bm(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ow(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(r),!0).forEach(function(n){l3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l3(e,t,r){return t=OX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OX(e){var t=CX(e,"string");return pu(t)==="symbol"?t:String(t)}function CX(e,t){if(pu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MX=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(o){return a.includes(o)})})},AX=function(t){return t},EX=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Sc=function(t,r){return Object.keys(r).reduce(function(n,a){return ow(ow({},n),{},l3({},a,t(a,r[a])))},{})},iw=function(t,r,n){return t.map(function(a){return"".concat(EX(a)," ").concat(r,"ms ").concat(n)}).join(",")};function TX(e,t){return RX(e)||DX(e,t)||c3(e,t)||$X()}function $X(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function RX(e){if(Array.isArray(e))return e}function IX(e){return FX(e)||BX(e)||c3(e)||LX()}function LX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c3(e,t){if(e){if(typeof e=="string")return wm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wm(e,t)}}function BX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FX(e){if(Array.isArray(e))return wm(e)}function wm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hd=1e-4,u3=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},f3=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},sw=function(t,r){return function(n){var a=u3(t,r);return f3(a,n)}},zX=function(t,r){return function(n){var a=u3(t,r),o=[].concat(IX(a.map(function(i,s){return i*s}).slice(1)),[0]);return f3(o,n)}},lw=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],o=r[1],i=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,o=0,i=1,s=1;break;case"ease":a=.25,o=.1,i=.25,s=1;break;case"ease-in":a=.42,o=0,i=1,s=1;break;case"ease-out":a=.42,o=0,i=.58,s=1;break;case"ease-in-out":a=0,o=0,i=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),d=TX(u,4);a=d[0],o=d[1],i=d[2],s=d[3]}}}var f=sw(a,i),h=sw(o,s),p=zX(a,i),m=function(x){return x>1?1:x<0?0:x},v=function(x){for(var g=x>1?1:x,y=g,S=0;S<8;++S){var b=f(y)-g,k=p(y);if(Math.abs(b-g)<Hd||k<Hd)return h(y);y=m(y-b/k)}return h(y)};return v.isStepper=!1,v},GX=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,o=a===void 0?8:a,i=t.dt,s=i===void 0?17:i,l=function(d,f,h){var p=-(d-f)*n,m=h*o,v=h+(p-m)*s/1e3,w=h*s/1e3+d;return Math.abs(w-f)<Hd&&Math.abs(v)<Hd?[f,0]:[w,v]};return l.isStepper=!0,l.dt=s,l},UX=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lw(a);case"spring":return GX();default:if(a.split("(")[0]==="cubic-bezier")return lw(a)}return typeof a=="function"?a:null};function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function cw(e){return HX(e)||XX(e)||d3(e)||WX()}function WX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HX(e){if(Array.isArray(e))return Sm(e)}function uw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uw(Object(r),!0).forEach(function(n){km(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function km(e,t,r){return t=VX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VX(e){var t=KX(e,"string");return gu(t)==="symbol"?t:String(t)}function KX(e,t){if(gu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YX(e,t){return QX(e)||ZX(e,t)||d3(e,t)||qX()}function qX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d3(e,t){if(e){if(typeof e=="string")return Sm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sm(e,t)}}function Sm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function QX(e){if(Array.isArray(e))return e}var Vd=function(t,r,n){return t+(r-t)*n},jm=function(t){var r=t.from,n=t.to;return r!==n},JX=function e(t,r,n){var a=Sc(function(o,i){if(jm(i)){var s=t(i.from,i.to,i.velocity),l=YX(s,2),u=l[0],d=l[1];return Jr(Jr({},i),{},{from:u,velocity:d})}return i},r);return n<1?Sc(function(o,i){return jm(i)?Jr(Jr({},i),{},{velocity:Vd(i.velocity,a[o].velocity,n),from:Vd(i.from,a[o].from,n)}):i},r):e(t,a,n-1)};const eH=function(e,t,r,n,a){var o=MX(e,t),i=o.reduce(function(w,x){return Jr(Jr({},w),{},km({},x,[e[x],t[x]]))},{}),s=o.reduce(function(w,x){return Jr(Jr({},w),{},km({},x,{from:e[x],velocity:0,to:t[x]}))},{}),l=-1,u,d,f=function(){return null},h=function(){return Sc(function(x,g){return g.from},s)},p=function(){return!Object.values(s).filter(jm).length},m=function(x){u||(u=x);var g=x-u,y=g/r.dt;s=JX(r,s,y),a(Jr(Jr(Jr({},e),t),h())),u=x,p()||(l=requestAnimationFrame(f))},v=function(x){d||(d=x);var g=(x-d)/n,y=Sc(function(b,k){return Vd.apply(void 0,cw(k).concat([r(g)]))},i);if(a(Jr(Jr(Jr({},e),t),y)),g<1)l=requestAnimationFrame(f);else{var S=Sc(function(b,k){return Vd.apply(void 0,cw(k).concat([r(1)]))},i);a(Jr(Jr(Jr({},e),t),S))}};return f=r.isStepper?m:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function al(e){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},al(e)}var tH=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function rH(e,t){if(e==null)return{};var r=nH(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nH(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function kp(e){return sH(e)||iH(e)||oH(e)||aH()}function aH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oH(e,t){if(e){if(typeof e=="string")return Nm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nm(e,t)}}function iH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sH(e){if(Array.isArray(e))return Nm(e)}function Nm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(r),!0).forEach(function(n){cc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cc(e,t,r){return t=h3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h3(n.key),n)}}function uH(e,t,r){return t&&cH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h3(e){var t=fH(e,"string");return al(t)==="symbol"?t:String(t)}function fH(e,t){if(al(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(al(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_m(e,t)}function _m(e,t){return _m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_m(e,t)}function hH(e){var t=pH();return function(){var n=Kd(e),a;if(t){var o=Kd(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return Pm(this,a)}}function Pm(e,t){if(t&&(al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Om(e)}function Om(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kd(e){return Kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kd(e)}var La=function(e){dH(r,e);var t=hH(r);function r(n,a){var o;lH(this,r),o=t.call(this,n,a);var i=o.props,s=i.isActive,l=i.attributeName,u=i.from,d=i.to,f=i.steps,h=i.children,p=i.duration;if(o.handleStyleChange=o.handleStyleChange.bind(Om(o)),o.changeStyle=o.changeStyle.bind(Om(o)),!s||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:d}),Pm(o);if(f&&f.length)o.state={style:f[0].style};else if(u){if(typeof h=="function")return o.state={style:u},Pm(o);o.state={style:l?cc({},l,u):u}}else o.state={style:{}};return o}return uH(r,[{key:"componentDidMount",value:function(){var a=this.props,o=a.isActive,i=a.canBegin;this.mounted=!0,!(!o||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var o=this.props,i=o.isActive,s=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,d=o.to,f=o.from,h=this.state.style;if(s){if(!i){var p={style:l?cc({},l,d):d};this.state&&h&&(l&&h[l]!==d||!l&&h!==d)&&this.setState(p);return}if(!(bX(a.to,d)&&a.canBegin&&a.isActive)){var m=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=m||u?f:a.to;if(this.state&&h){var w={style:l?cc({},l,v):v};(l&&h[l]!==v||!l&&h!==v)&&this.setState(w)}this.runAnimation(Pa(Pa({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var o=this,i=a.from,s=a.to,l=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=eH(i,s,UX(u),l,this.changeStyle),m=function(){o.stopJSAnimation=p()};this.manager.start([h,d,m,l,f])}},{key:"runStepAnimation",value:function(a){var o=this,i=a.steps,s=a.begin,l=a.onAnimationStart,u=i[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(v,w,x){if(x===0)return v;var g=w.duration,y=w.easing,S=y===void 0?"ease":y,b=w.style,k=w.properties,_=w.onAnimationEnd,N=x>0?i[x-1]:w,O=k||Object.keys(b);if(typeof S=="function"||S==="spring")return[].concat(kp(v),[o.runJSAnimation.bind(o,{from:N.style,to:b,duration:g,easing:S}),g]);var A=iw(O,g,S),E=Pa(Pa(Pa({},N.style),b),{},{transition:A});return[].concat(kp(v),[E,g,_]).filter(AX)};return this.manager.start([l].concat(kp(i.reduce(p,[d,Math.max(h,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=PX());var o=a.begin,i=a.duration,s=a.attributeName,l=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var v=s?cc({},s,l):l,w=iw(Object.keys(v),i,u);m.start([d,o,Pa(Pa({},v),{},{transition:w}),i,f])}},{key:"render",value:function(){var a=this.props,o=a.children;a.begin;var i=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=rH(a,tH),u=j.Children.count(o),d=this.state.style;if(typeof o=="function")return o(d);if(!s||u===0||i<=0)return o;var f=function(p){var m=p.props,v=m.style,w=v===void 0?{}:v,x=m.className,g=j.cloneElement(p,Pa(Pa({},l),{},{style:Pa(Pa({},w),d),className:x}));return g};return u===1?f(j.Children.only(o)):L.createElement("div",null,j.Children.map(o,function(h){return f(h)}))}}]),r}(j.PureComponent);La.displayName="Animate";La.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};La.propTypes={from:St.oneOfType([St.object,St.string]),to:St.oneOfType([St.object,St.string]),attributeName:St.string,duration:St.number,begin:St.number,easing:St.oneOfType([St.string,St.func]),steps:St.arrayOf(St.shape({duration:St.number.isRequired,style:St.object.isRequired,easing:St.oneOfType([St.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),St.func]),properties:St.arrayOf("string"),onAnimationEnd:St.func})),children:St.oneOfType([St.node,St.func]),isActive:St.bool,canBegin:St.bool,onAnimationEnd:St.func,shouldReAnimate:St.bool,onAnimationStart:St.func,onAnimationReStart:St.func};function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yd.apply(this,arguments)}function gH(e,t){return xH(e)||vH(e,t)||yH(e,t)||mH()}function mH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yH(e,t){if(e){if(typeof e=="string")return dw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dw(e,t)}}function dw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function xH(e){if(Array.isArray(e))return e}function hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(r),!0).forEach(function(n){bH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bH(e,t,r){return t=wH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wH(e){var t=kH(e,"string");return mu(t)=="symbol"?t:t+""}function kH(e,t){if(mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gw=function(t,r,n,a,o){var i=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(i>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=o[h]>i?i:o[h];d="M".concat(t,",").concat(r+s*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+l*f[0],",").concat(r)),d+="L ".concat(t+n-l*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*f[1])),d+="L ".concat(t+n,",").concat(r+a-s*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-l*f[2],",").concat(r+a)),d+="L ".concat(t+l*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*f[3])),d+="Z"}else if(i>0&&o===+o&&o>0){var m=Math.min(i,o);d="M ".concat(t,",").concat(r+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+l*m,",").concat(r,`
            L `).concat(t+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*m,`
            L `).concat(t+n,",").concat(r+a-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n-l*m,",").concat(r+a,`
            L `).concat(t+l*m,",").concat(r+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*m," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},SH=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,o=r.x,i=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(o,o+s),d=Math.max(o,o+s),f=Math.min(i,i+l),h=Math.max(i,i+l);return n>=u&&n<=d&&a>=f&&a<=h}return!1},jH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Kv=function(t){var r=pw(pw({},jH),t),n=j.useRef(),a=j.useState(-1),o=gH(a,2),i=o[0],s=o[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch{}},[]);var l=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,p=r.className,m=r.animationEasing,v=r.animationDuration,w=r.animationBegin,x=r.isAnimationActive,g=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var y=ot("recharts-rectangle",p);return g?L.createElement(La,{canBegin:i>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:v,animationEasing:m,isActive:g},function(S){var b=S.width,k=S.height,_=S.x,N=S.y;return L.createElement(La,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:v,isActive:x,easing:m},L.createElement("path",Yd({},He(r,!0),{className:y,d:gw(_,N,b,k,h),ref:n})))}):L.createElement("path",Yd({},He(r,!0),{className:y,d:gw(l,u,d,f,h)}))};function Cm(){return Cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cm.apply(this,arguments)}var fh=function(t){var r=t.cx,n=t.cy,a=t.r,o=t.className,i=ot("recharts-dot",o);return r===+r&&n===+n&&a===+a?j.createElement("circle",Cm({},He(t,!1),hd(t),{className:i,cx:r,cy:n,r:a})):null};function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}var NH=["x","y","top","left","width","height","className"];function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mm.apply(this,arguments)}function mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _H(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(r),!0).forEach(function(n){PH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PH(e,t,r){return t=OH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OH(e){var t=CH(e,"string");return yu(t)=="symbol"?t:t+""}function CH(e,t){if(yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MH(e,t){if(e==null)return{};var r=AH(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var EH=function(t,r,n,a,o,i){return"M".concat(t,",").concat(o,"v").concat(a,"M").concat(i,",").concat(r,"h").concat(n)},TH=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,o=a===void 0?0:a,i=t.top,s=i===void 0?0:i,l=t.left,u=l===void 0?0:l,d=t.width,f=d===void 0?0:d,h=t.height,p=h===void 0?0:h,m=t.className,v=MH(t,NH),w=_H({x:n,y:o,top:s,left:u,width:f,height:p},v);return!de(n)||!de(o)||!de(f)||!de(p)||!de(s)||!de(u)?null:L.createElement("path",Mm({},He(w,!0),{className:ot("recharts-cross",m),d:EH(n,o,f,p,s,u)}))},$H=Cj,DH=$H(Object.getPrototypeOf,Object),RH=DH,IH=Oo,LH=RH,BH=Co,FH="[object Object]",zH=Function.prototype,GH=Object.prototype,p3=zH.toString,UH=GH.hasOwnProperty,WH=p3.call(Object);function XH(e){if(!BH(e)||IH(e)!=FH)return!1;var t=LH(e);if(t===null)return!0;var r=UH.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&p3.call(r)==WH}var HH=XH;const VH=Lt(HH);var KH=Oo,YH=Co,qH="[object Boolean]";function ZH(e){return e===!0||e===!1||YH(e)&&KH(e)==qH}var QH=ZH;const JH=Lt(QH);function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}function qd(){return qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qd.apply(this,arguments)}function eV(e,t){return aV(e)||nV(e,t)||rV(e,t)||tV()}function tV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rV(e,t){if(e){if(typeof e=="string")return yw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yw(e,t)}}function yw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function aV(e){if(Array.isArray(e))return e}function vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vw(Object(r),!0).forEach(function(n){oV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oV(e,t,r){return t=iV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iV(e){var t=sV(e,"string");return vu(t)=="symbol"?t:t+""}function sV(e,t){if(vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bw=function(t,r,n,a,o){var i=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-i/2,",").concat(r+o),s+="L ".concat(t+n-i/2-a,",").concat(r+o),s+="L ".concat(t,",").concat(r," Z"),s},lV={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cV=function(t){var r=xw(xw({},lV),t),n=j.useRef(),a=j.useState(-1),o=eV(a,2),i=o[0],s=o[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&s(y)}catch{}},[]);var l=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,v=r.animationDuration,w=r.animationBegin,x=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var g=ot("recharts-trapezoid",p);return x?L.createElement(La,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:l,y:u},duration:v,animationEasing:m,isActive:x},function(y){var S=y.upperWidth,b=y.lowerWidth,k=y.height,_=y.x,N=y.y;return L.createElement(La,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:v,easing:m},L.createElement("path",qd({},He(r,!0),{className:g,d:bw(_,N,S,b,k),ref:n})))}):L.createElement("g",null,L.createElement("path",qd({},He(r,!0),{className:g,d:bw(l,u,d,f,h)})))},uV=["option","shapeType","propTransformer","activeClassName","isActive"];function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function fV(e,t){if(e==null)return{};var r=dV(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){hV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hV(e,t,r){return t=pV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pV(e){var t=gV(e,"string");return xu(t)=="symbol"?t:t+""}function gV(e,t){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mV(e,t){return Zd(Zd({},t),e)}function yV(e,t){return e==="symbols"}function kw(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return L.createElement(Kv,r);case"trapezoid":return L.createElement(cV,r);case"sector":return L.createElement(n3,r);case"symbols":if(yV(t))return L.createElement(Q0,r);break;default:return null}}function vV(e){return j.isValidElement(e)?e.props:e}function Am(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?mV:n,o=e.activeClassName,i=o===void 0?"recharts-active-shape":o,s=e.isActive,l=fV(e,uV),u;if(j.isValidElement(t))u=j.cloneElement(t,Zd(Zd({},l),vV(t)));else if(Ve(t))u=t(l);else if(VH(t)&&!JH(t)){var d=a(t,l);u=L.createElement(kw,{shapeType:r,elementProps:d})}else{var f=l;u=L.createElement(kw,{shapeType:r,elementProps:f})}return s?L.createElement(vt,{className:i},u):u}function dh(e,t){return t!=null&&"trapezoids"in e.props}function hh(e,t){return t!=null&&"sectors"in e.props}function bu(e,t){return t!=null&&"points"in e.props}function xV(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,o=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&o}function bV(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function wV(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function kV(e,t){var r;return dh(e,t)?r=xV:hh(e,t)?r=bV:bu(e,t)&&(r=wV),r}function SV(e,t){var r;return dh(e,t)?r="trapezoids":hh(e,t)?r="sectors":bu(e,t)&&(r="points"),r}function jV(e,t){if(dh(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(hh(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return bu(e,t)?t.payload:{}}function NV(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=SV(r,t),o=jV(r,t),i=n.filter(function(l,u){var d=Ki(o,l),f=r.props[a].filter(function(m){var v=kV(r,t);return v(m,t)}),h=r.props[a].indexOf(f[f.length-1]),p=u===h;return d&&p}),s=n.indexOf(i[i.length-1]);return s}var _V=Math.ceil,PV=Math.max;function OV(e,t,r,n){for(var a=-1,o=PV(_V((t-e)/(r||1)),0),i=Array(o);o--;)i[n?o:++a]=e,e+=r;return i}var CV=OV,MV=Kj,Sw=1/0,AV=17976931348623157e292;function EV(e){if(!e)return e===0?e:0;if(e=MV(e),e===Sw||e===-Sw){var t=e<0?-1:1;return t*AV}return e===e?e:0}var g3=EV,TV=CV,$V=th,Sp=g3;function DV(e){return function(t,r,n){return n&&typeof n!="number"&&$V(t,r,n)&&(r=n=void 0),t=Sp(t),r===void 0?(r=t,t=0):r=Sp(r),n=n===void 0?t<r?1:-1:Sp(n),TV(t,r,n,e)}}var RV=DV,IV=RV,LV=IV(),BV=LV;const Qd=Lt(BV);function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(r),!0).forEach(function(n){m3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m3(e,t,r){return t=FV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FV(e){var t=zV(e,"string");return wu(t)=="symbol"?t:t+""}function zV(e,t){if(wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GV=["Webkit","Moz","O","ms"],UV=function(t,r){var n=t.replace(/(\w)/,function(o){return o.toUpperCase()}),a=GV.reduce(function(o,i){return Nw(Nw({},o),{},m3({},i+n,r))},{});return a[t]=r,a};function ol(e){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}function Jd(){return Jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jd.apply(this,arguments)}function _w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(r),!0).forEach(function(n){Kn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_w(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v3(n.key),n)}}function XV(e,t,r){return t&&Pw(e.prototype,t),r&&Pw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function HV(e,t,r){return t=e0(t),VV(e,y3()?Reflect.construct(t,r||[],e0(e).constructor):t.apply(e,r))}function VV(e,t){if(t&&(ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KV(e)}function KV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y3=function(){return!!e})()}function e0(e){return e0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e0(e)}function YV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Em(e,t)}function Em(e,t){return Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Em(e,t)}function Kn(e,t,r){return t=v3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v3(e){var t=qV(e,"string");return ol(t)=="symbol"?t:t+""}function qV(e,t){if(ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZV=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,o=t.x,i=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=wc().domain(Qd(0,l)).range([o,o+i-s]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},Ow=function(t){return t.changedTouches&&!!t.changedTouches.length},il=function(e){function t(r){var n;return WV(this,t),n=HV(this,t,[r]),Kn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Kn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Kn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,o=a.endIndex,i=a.onDragEnd,s=a.startIndex;i==null||i({endIndex:o,startIndex:s})}),n.detachDragEndListener()}),Kn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Kn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Kn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Kn(n,"handleSlideDragStart",function(a){var o=Ow(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return YV(t,e),XV(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,o=n.endX,i=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,d=u.length-1,f=Math.min(a,o),h=Math.max(a,o),p=t.getIndexInRange(i,f),m=t.getIndexInRange(i,h);return{startIndex:p-p%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,o=a.data,i=a.tickFormatter,s=a.dataKey,l=Fr(o[n],s,n);return Ve(i)?i(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,o=a.slideMoveStartX,i=a.startX,s=a.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,h=l.startIndex,p=l.endIndex,m=l.onChange,v=n.pageX-o;v>0?v=Math.min(v,u+d-f-s,u+d-f-i):v<0&&(v=Math.max(v,u-i,u-s));var w=this.getIndex({startX:i+v,endX:s+v});(w.startIndex!==h||w.endIndex!==p)&&m&&m(w),this.setState({startX:i+v,endX:s+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var o=Ow(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,o=a.brushMoveStartX,i=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[i],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,m=d.onChange,v=d.gap,w=d.data,x={startX:this.state.startX,endX:this.state.endX},g=n.pageX-o;g>0?g=Math.min(g,f+h-p-u):g<0&&(g=Math.max(g,f-u)),x[i]=u+g;var y=this.getIndex(x),S=y.startIndex,b=y.endIndex,k=function(){var N=w.length-1;return i==="startX"&&(s>l?S%v===0:b%v===0)||s<l&&b===N||i==="endX"&&(s>l?b%v===0:S%v===0)||s>l&&b===N};this.setState(Kn(Kn({},i,u+g),"brushMoveStartX",n.pageX),function(){m&&k()&&m(y)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var o=this,i=this.state,s=i.scaleValues,l=i.startX,u=i.endX,d=this.state[a],f=s.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=s.length)){var p=s[h];a==="startX"&&p>=u||a==="endX"&&p<=l||this.setState(Kn({},a,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,o=n.y,i=n.width,s=n.height,l=n.fill,u=n.stroke;return L.createElement("rect",{stroke:u,fill:l,x:a,y:o,width:i,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,o=n.y,i=n.width,s=n.height,l=n.data,u=n.children,d=n.padding,f=j.Children.only(u);return f?L.cloneElement(f,{x:a,y:o,width:i,height:s,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var o,i,s=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,h=l.traveller,p=l.ariaLabel,m=l.data,v=l.startIndex,w=l.endIndex,x=Math.max(n,this.props.x),g=jp(jp({},He(this.props,!1)),{},{x,y:u,width:d,height:f}),y=p||"Min value: ".concat((o=m[v])===null||o===void 0?void 0:o.name,", Max value: ").concat((i=m[w])===null||i===void 0?void 0:i.name);return L.createElement(vt,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),s.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,g))}},{key:"renderSlide",value:function(n,a){var o=this.props,i=o.y,s=o.height,l=o.stroke,u=o.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:i,width:f,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,o=n.endIndex,i=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,p=5,m={pointerEvents:"none",fill:u};return L.createElement(vt,{className:"recharts-brush-texts"},L.createElement(Pd,Jd({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:i+s/2},m),this.getTextOfTick(a)),L.createElement(Pd,Jd({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+p,y:i+s/2},m),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,a=n.data,o=n.className,i=n.children,s=n.x,l=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,m=h.endX,v=h.isTextActive,w=h.isSlideMoving,x=h.isTravellerMoving,g=h.isTravellerFocused;if(!a||!a.length||!de(s)||!de(l)||!de(u)||!de(d)||u<=0||d<=0)return null;var y=ot("recharts-brush",o),S=L.Children.count(i)===1,b=UV("userSelect","none");return L.createElement(vt,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(v||w||x||g||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,o=n.y,i=n.width,s=n.height,l=n.stroke,u=Math.floor(o+s/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:a,y:o,width:i,height:s,fill:l,stroke:"none"}),L.createElement("line",{x1:a+1,y1:u,x2:a+i-1,y2:u,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:a+1,y1:u+2,x2:a+i-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var o;return L.isValidElement(n)?o=L.cloneElement(n,a):Ve(n)?o=n(a):o=t.renderDefaultTraveller(a),o}},{key:"getDerivedStateFromProps",value:function(n,a){var o=n.data,i=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(o!==a.prevData||u!==a.prevUpdateId)return jp({prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:i},o&&o.length?ZV({data:o,width:i,x:s,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(i!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+i-l]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:i,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var o=n.length,i=0,s=o-1;s-i>1;){var l=Math.floor((i+s)/2);n[l]>a?s=l:i=l}return a>=n[s]?s:i}}])}(j.PureComponent);Kn(il,"displayName","Brush");Kn(il,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var QV=xv;function JV(e,t){var r;return QV(e,function(n,a,o){return r=t(n,a,o),!r}),!!r}var eK=JV,tK=wj,rK=di,nK=eK,aK=Un,oK=th;function iK(e,t,r){var n=aK(e)?tK:nK;return r&&oK(e,t,r)&&(t=void 0),n(e,rK(t))}var sK=iK;const lK=Lt(sK);var Qa=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},Cw=Uj;function cK(e,t,r){t=="__proto__"&&Cw?Cw(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var uK=cK,fK=uK,dK=zj,hK=di;function pK(e,t){var r={};return t=hK(t),dK(e,function(n,a,o){fK(r,a,t(n,a,o))}),r}var gK=pK;const mK=Lt(gK);function yK(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var vK=yK,xK=xv;function bK(e,t){var r=!0;return xK(e,function(n,a,o){return r=!!t(n,a,o),r}),r}var wK=bK,kK=vK,SK=wK,jK=di,NK=Un,_K=th;function PK(e,t,r){var n=NK(e)?kK:SK;return r&&_K(e,t,r)&&(t=void 0),n(e,jK(t))}var OK=PK;const x3=Lt(OK);var CK=["x","y"];function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tm.apply(this,arguments)}function Mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ac(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(r),!0).forEach(function(n){MK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MK(e,t,r){return t=AK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AK(e){var t=EK(e,"string");return ku(t)=="symbol"?t:t+""}function EK(e,t){if(ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TK(e,t){if(e==null)return{};var r=$K(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $K(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function DK(e,t){var r=e.x,n=e.y,a=TK(e,CK),o="".concat(r),i=parseInt(o,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return ac(ac(ac(ac(ac({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Aw(e){return L.createElement(Am,Tm({shapeType:"rectangle",propTransformer:DK,activeClassName:"recharts-active-bar"},e))}var RK=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var o=de(n)||qA(n);return o?t(n,a):(o||qi(),r)}},IK=["value","background"],b3;function sl(e){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sl(e)}function LK(e,t){if(e==null)return{};var r=BK(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function t0(){return t0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t0.apply(this,arguments)}function Ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(r),!0).forEach(function(n){Vo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k3(n.key),n)}}function zK(e,t,r){return t&&Tw(e.prototype,t),r&&Tw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GK(e,t,r){return t=r0(t),UK(e,w3()?Reflect.construct(t,r||[],r0(e).constructor):t.apply(e,r))}function UK(e,t){if(t&&(sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WK(e)}function WK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w3=function(){return!!e})()}function r0(e){return r0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r0(e)}function XK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$m(e,t)}function $m(e,t){return $m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$m(e,t)}function Vo(e,t,r){return t=k3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k3(e){var t=HK(e,"string");return sl(t)=="symbol"?t:t+""}function HK(e,t){if(sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Lu=function(e){function t(){var r;FK(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=GK(this,t,[].concat(a)),Vo(r,"state",{isAnimationFinished:!1}),Vo(r,"id",rs("recharts-bar-")),Vo(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),i&&i()}),Vo(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),i&&i()}),r}return XK(t,e),zK(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,o=this.props,i=o.shape,s=o.dataKey,l=o.activeIndex,u=o.activeBar,d=He(this.props,!1);return n&&n.map(function(f,h){var p=h===l,m=p?u:i,v=Or(Or(Or({},d),f),{},{isActive:p,option:m,index:h,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return L.createElement(vt,t0({className:"recharts-bar-rectangle"},Xc(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),L.createElement(Aw,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,o=a.data,i=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return L.createElement(La,{begin:l,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,v=o.map(function(w,x){var g=h&&h[x];if(g){var y=jr(g.x,w.x),S=jr(g.y,w.y),b=jr(g.width,w.width),k=jr(g.height,w.height);return Or(Or({},w),{},{x:y(m),y:S(m),width:b(m),height:k(m)})}if(i==="horizontal"){var _=jr(0,w.height),N=_(m);return Or(Or({},w),{},{y:w.y+w.height-N,height:N})}var O=jr(0,w.width),A=O(m);return Or(Or({},w),{},{width:A})});return L.createElement(vt,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,o=n.isAnimationActive,i=this.state.prevData;return o&&a&&a.length&&(!i||!Ki(i,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,o=a.data,i=a.dataKey,s=a.activeIndex,l=He(this.props.background,!1);return o.map(function(u,d){u.value;var f=u.background,h=LK(u,IK);if(!f)return null;var p=Or(Or(Or(Or(Or({},h),{},{fill:"#eee"},f),l),Xc(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:i,index:d,className:"recharts-bar-background-rectangle"});return L.createElement(Aw,t0({key:"background-bar-".concat(d),option:n.props.background,isActive:d===s},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.data,s=o.xAxis,l=o.yAxis,u=o.layout,d=o.children,f=Fn(d,Dl);if(!f)return null;var h=u==="vertical"?i[0].height/2:i[0].width/2,p=function(w,x){var g=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:g,errorVal:Fr(w,x)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return L.createElement(vt,m,f.map(function(v){return L.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:i,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,o=n.data,i=n.className,s=n.xAxis,l=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,p=n.isAnimationActive,m=n.background,v=n.id;if(a||!o||!o.length)return null;var w=this.state.isAnimationFinished,x=ot("recharts-bar",i),g=s&&s.allowDataOverflow,y=l&&l.allowDataOverflow,S=g||y,b=Ue(v)?this.id:v;return L.createElement(vt,{className:x},g||y?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(b)},L.createElement("rect",{x:g?u:u-f/2,y:y?d:d-h/2,width:g?f:f*2,height:y?h:h*2}))):null,L.createElement(vt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(b,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,b),(!p||w)&&Za.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);b3=Lu;Vo(Lu,"displayName","Bar");Vo(Lu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!hi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Vo(Lu,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,o=e.xAxis,i=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,p=xU(n,r);if(!p)return null;var m=t.layout,v=r.type.defaultProps,w=v!==void 0?Or(Or({},v),r.props):r.props,x=w.dataKey,g=w.children,y=w.minPointSize,S=m==="horizontal"?i:o,b=u?S.scale.domain():null,k=PU({numericAxis:S}),_=Fn(g,kv),N=f.map(function(O,A){var E,P,M,D,T,B;u?E=bU(u[d+A],b):(E=Fr(O,x),Array.isArray(E)||(E=[k,E]));var C=RK(y,b3.defaultProps.minPointSize)(E[1],A);if(m==="horizontal"){var R,z=[i.scale(E[0]),i.scale(E[1])],G=z[0],ne=z[1];P=D2({axis:o,ticks:s,bandSize:a,offset:p.offset,entry:O,index:A}),M=(R=ne??G)!==null&&R!==void 0?R:void 0,D=p.size;var X=G-ne;if(T=Number.isNaN(X)?0:X,B={x:P,y:i.y,width:D,height:i.height},Math.abs(C)>0&&Math.abs(T)<Math.abs(C)){var F=$a(T||C)*(Math.abs(C)-Math.abs(T));M-=F,T+=F}}else{var re=[o.scale(E[0]),o.scale(E[1])],J=re[0],$=re[1];if(P=J,M=D2({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:O,index:A}),D=$-J,T=p.size,B={x:o.x,y:M,width:o.width,height:T},Math.abs(C)>0&&Math.abs(D)<Math.abs(C)){var oe=$a(D||C)*(Math.abs(C)-Math.abs(D));D+=oe}}return Or(Or(Or({},O),{},{x:P,y:M,width:D,height:T,value:u?E:E[1],payload:O,background:B},_&&_[A]&&_[A].props),{},{tooltipPayload:[e3(r,O)],tooltipPosition:{x:P+D/2,y:M+T/2}})});return Or({data:N,layout:m},h)});function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function VK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S3(n.key),n)}}function KK(e,t,r){return t&&$w(e.prototype,t),r&&$w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dw(Object(r),!0).forEach(function(n){ph(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ph(e,t,r){return t=S3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S3(e){var t=YK(e,"string");return Su(t)=="symbol"?t:t+""}function YK(e,t){if(Su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yv=function(t,r,n,a,o){var i=t.width,s=t.height,l=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!qn(u,Lu);return d.reduce(function(p,m){var v=r[m],w=v.orientation,x=v.domain,g=v.padding,y=g===void 0?{}:g,S=v.mirror,b=v.reversed,k="".concat(w).concat(S?"Mirror":""),_,N,O,A,E;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var P=x[1]-x[0],M=1/0,D=v.categoricalDomain.sort(e6);if(D.forEach(function(re,J){J>0&&(M=Math.min((re||0)-(D[J-1]||0),M))}),Number.isFinite(M)){var T=M/P,B=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(_=T*B/2),v.padding==="no-gap"){var C=Vi(t.barCategoryGap,T*B),R=T*B/2;_=R-C-(R-C)/B*C}}}a==="xAxis"?N=[n.left+(y.left||0)+(_||0),n.left+n.width-(y.right||0)-(_||0)]:a==="yAxis"?N=l==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(_||0),n.top+n.height-(y.bottom||0)-(_||0)]:N=v.range,b&&(N=[N[1],N[0]]);var z=yU(v,o,h),G=z.scale,ne=z.realScaleType;G.domain(x).range(N),vU(G);var X=_U(G,Ma(Ma({},v),{},{realScaleType:ne}));a==="xAxis"?(E=w==="top"&&!S||w==="bottom"&&S,O=n.left,A=f[k]-E*v.height):a==="yAxis"&&(E=w==="left"&&!S||w==="right"&&S,O=f[k]-E*v.width,A=n.top);var F=Ma(Ma(Ma({},v),X),{},{realScaleType:ne,x:O,y:A,scale:G,width:a==="xAxis"?n.width:v.width,height:a==="yAxis"?n.height:v.height});return F.bandSize=Gd(F,X),!v.hide&&a==="xAxis"?f[k]+=(E?-1:1)*F.height:v.hide||(f[k]+=(E?-1:1)*F.width),Ma(Ma({},p),{},ph({},m,F))},{})},j3=function(t,r){var n=t.x,a=t.y,o=r.x,i=r.y;return{x:Math.min(n,o),y:Math.min(a,i),width:Math.abs(o-n),height:Math.abs(i-a)}},qK=function(t){var r=t.x1,n=t.y1,a=t.x2,o=t.y2;return j3({x:r,y:n},{x:a,y:o})},N3=function(){function e(t){VK(this,e),this.scale=t}return KK(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],o=n[n.length-1];return a<=o?r>=a&&r<=o:r>=o&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();ph(N3,"EPS",1e-4);var qv=function(t){var r=Object.keys(t).reduce(function(n,a){return Ma(Ma({},n),{},ph({},a,N3.create(t[a])))},{});return Ma(Ma({},r),{},{apply:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.bandAware,s=o.position;return mK(a,function(l,u){return r[u].apply(l,{bandAware:i,position:s})})},isInRange:function(a){return x3(a,function(o,i){return r[i].isInRange(o)})}})};function ZK(e){return(e%180+180)%180}var QK=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=ZK(a),i=o*Math.PI/180,s=Math.atan(n/r),l=i>s&&i<Math.PI-s?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},JK=di,eY=Tu,tY=J0;function rY(e){return function(t,r,n){var a=Object(t);if(!eY(t)){var o=JK(r);t=tY(t),r=function(s){return o(a[s],s,a)}}var i=e(t,r,n);return i>-1?a[o?t[i]:i]:void 0}}var nY=rY,aY=g3;function oY(e){var t=aY(e),r=t%1;return t===t?r?t-r:t:0}var iY=oY,sY=Dj,lY=di,cY=iY,uY=Math.max;function fY(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:cY(r);return a<0&&(a=uY(n+a,0)),sY(e,lY(t),a)}var dY=fY,hY=nY,pY=dY,gY=hY(pY),mY=gY;const yY=Lt(mY);var vY=rA(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Zv=j.createContext(void 0),Qv=j.createContext(void 0),_3=j.createContext(void 0),P3=j.createContext({}),O3=j.createContext(void 0),C3=j.createContext(0),M3=j.createContext(0),Rw=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,o=r.offset,i=t.clipPathId,s=t.children,l=t.width,u=t.height,d=vY(o);return L.createElement(Zv.Provider,{value:n},L.createElement(Qv.Provider,{value:a},L.createElement(P3.Provider,{value:o},L.createElement(_3.Provider,{value:d},L.createElement(O3.Provider,{value:i},L.createElement(C3.Provider,{value:u},L.createElement(M3.Provider,{value:l},s)))))))},xY=function(){return j.useContext(O3)},A3=function(t){var r=j.useContext(Zv);r==null&&qi();var n=r[t];return n==null&&qi(),n},bY=function(){var t=j.useContext(Zv);return Uo(t)},wY=function(){var t=j.useContext(Qv),r=yY(t,function(n){return x3(n.domain,Number.isFinite)});return r||Uo(t)},E3=function(t){var r=j.useContext(Qv);r==null&&qi();var n=r[t];return n==null&&qi(),n},kY=function(){var t=j.useContext(_3);return t},SY=function(){return j.useContext(P3)},Jv=function(){return j.useContext(M3)},ex=function(){return j.useContext(C3)};function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function jY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$3(n.key),n)}}function _Y(e,t,r){return t&&NY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PY(e,t,r){return t=n0(t),OY(e,T3()?Reflect.construct(t,r||[],n0(e).constructor):t.apply(e,r))}function OY(e,t){if(t&&(ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CY(e)}function CY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T3=function(){return!!e})()}function n0(e){return n0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n0(e)}function MY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dm(e,t)}function Dm(e,t){return Dm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Dm(e,t)}function Iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iw(Object(r),!0).forEach(function(n){tx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tx(e,t,r){return t=$3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $3(e){var t=AY(e,"string");return ll(t)=="symbol"?t:t+""}function AY(e,t){if(ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function EY(e,t){return RY(e)||DY(e,t)||$Y(e,t)||TY()}function TY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Y(e,t){if(e){if(typeof e=="string")return Bw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bw(e,t)}}function Bw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function RY(e){if(Array.isArray(e))return e}function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rm.apply(this,arguments)}var IY=function(t,r){var n;return L.isValidElement(t)?n=L.cloneElement(t,r):Ve(t)?n=t(r):n=L.createElement("line",Rm({},r,{className:"recharts-reference-line-line"})),n},LY=function(t,r,n,a,o,i,s,l,u){var d=o.x,f=o.y,h=o.width,p=o.height;if(n){var m=u.y,v=t.y.apply(m,{position:i});if(Qa(u,"discard")&&!t.y.isInRange(v))return null;var w=[{x:d+h,y:v},{x:d,y:v}];return l==="left"?w.reverse():w}if(r){var x=u.x,g=t.x.apply(x,{position:i});if(Qa(u,"discard")&&!t.x.isInRange(g))return null;var y=[{x:g,y:f+p},{x:g,y:f}];return s==="top"?y.reverse():y}if(a){var S=u.segment,b=S.map(function(k){return t.apply(k,{position:i})});return Qa(u,"discard")&&lK(b,function(k){return!t.isInRange(k)})?null:b}return null};function BY(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,o=e.yAxisId,i=e.shape,s=e.className,l=e.alwaysShow,u=xY(),d=A3(a),f=E3(o),h=kY();if(!u||!h)return null;yo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=qv({x:d.scale,y:f.scale}),m=Br(t),v=Br(r),w=n&&n.length===2,x=LY(p,m,v,w,h,e.position,d.orientation,f.orientation,e);if(!x)return null;var g=EY(x,2),y=g[0],S=y.x,b=y.y,k=g[1],_=k.x,N=k.y,O=Qa(e,"hidden")?"url(#".concat(u,")"):void 0,A=Lw(Lw({clipPath:O},He(e,!0)),{},{x1:S,y1:b,x2:_,y2:N});return L.createElement(vt,{className:ot("recharts-reference-line",s)},IY(i,A),tn.renderCallByParent(e,qK({x1:S,y1:b,x2:_,y2:N})))}var Ko=function(e){function t(){return jY(this,t),PY(this,t,arguments)}return MY(t,e),_Y(t,[{key:"render",value:function(){return L.createElement(BY,this.props)}}])}(L.Component);tx(Ko,"displayName","ReferenceLine");tx(Ko,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Im.apply(this,arguments)}function cl(e){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(e)}function Fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fw(Object(r),!0).forEach(function(n){gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R3(n.key),n)}}function GY(e,t,r){return t&&zY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UY(e,t,r){return t=a0(t),WY(e,D3()?Reflect.construct(t,r||[],a0(e).constructor):t.apply(e,r))}function WY(e,t){if(t&&(cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XY(e)}function XY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D3=function(){return!!e})()}function a0(e){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a0(e)}function HY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lm(e,t)}function Lm(e,t){return Lm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Lm(e,t)}function gh(e,t,r){return t=R3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R3(e){var t=VY(e,"string");return cl(t)=="symbol"?t:t+""}function VY(e,t){if(cl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var KY=function(t){var r=t.x,n=t.y,a=t.xAxis,o=t.yAxis,i=qv({x:a.scale,y:o.scale}),s=i.apply({x:r,y:n},{bandAware:!0});return Qa(t,"discard")&&!i.isInRange(s)?null:s},Bu=function(e){function t(){return FY(this,t),UY(this,t,arguments)}return HY(t,e),GY(t,[{key:"render",value:function(){var n=this.props,a=n.x,o=n.y,i=n.r,s=n.alwaysShow,l=n.clipPathId,u=Br(a),d=Br(o);if(yo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=KY(this.props);if(!f)return null;var h=f.x,p=f.y,m=this.props,v=m.shape,w=m.className,x=Qa(this.props,"hidden")?"url(#".concat(l,")"):void 0,g=zw(zw({clipPath:x},He(this.props,!0)),{},{cx:h,cy:p});return L.createElement(vt,{className:ot("recharts-reference-dot",w)},t.renderDot(v,g),tn.renderCallByParent(this.props,{x:h-i,y:p-i,width:2*i,height:2*i}))}}])}(L.Component);gh(Bu,"displayName","ReferenceDot");gh(Bu,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gh(Bu,"renderDot",function(e,t){var r;return L.isValidElement(e)?r=L.cloneElement(e,t):Ve(e)?r=e(t):r=L.createElement(fh,Im({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(this,arguments)}function ul(e){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ul(e)}function Gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gw(Object(r),!0).forEach(function(n){mh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L3(n.key),n)}}function ZY(e,t,r){return t&&qY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QY(e,t,r){return t=o0(t),JY(e,I3()?Reflect.construct(t,r||[],o0(e).constructor):t.apply(e,r))}function JY(e,t){if(t&&(ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eq(e)}function eq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I3=function(){return!!e})()}function o0(e){return o0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o0(e)}function tq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fm(e,t)}function Fm(e,t){return Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fm(e,t)}function mh(e,t,r){return t=L3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L3(e){var t=rq(e,"string");return ul(t)=="symbol"?t:t+""}function rq(e,t){if(ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nq=function(t,r,n,a,o){var i=o.x1,s=o.x2,l=o.y1,u=o.y2,d=o.xAxis,f=o.yAxis;if(!d||!f)return null;var h=qv({x:d.scale,y:f.scale}),p={x:t?h.x.apply(i,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Qa(o,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:j3(p,m)},Fu=function(e){function t(){return YY(this,t),QY(this,t,arguments)}return tq(t,e),ZY(t,[{key:"render",value:function(){var n=this.props,a=n.x1,o=n.x2,i=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,d=n.clipPathId;yo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Br(a),h=Br(o),p=Br(i),m=Br(s),v=this.props.shape;if(!f&&!h&&!p&&!m&&!v)return null;var w=nq(f,h,p,m,this.props);if(!w&&!v)return null;var x=Qa(this.props,"hidden")?"url(#".concat(d,")"):void 0;return L.createElement(vt,{className:ot("recharts-reference-area",l)},t.renderRect(v,Uw(Uw({clipPath:x},He(this.props,!0)),w)),tn.renderCallByParent(this.props,w))}}])}(L.Component);mh(Fu,"displayName","ReferenceArea");mh(Fu,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});mh(Fu,"renderRect",function(e,t){var r;return L.isValidElement(e)?r=L.cloneElement(e,t):Ve(e)?r=e(t):r=L.createElement(Kv,Bm({},t,{className:"recharts-reference-area-rect"})),r});function B3(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function aq(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return QK(n,r)}function oq(e,t,r){var n=r==="width",a=e.x,o=e.y,i=e.width,s=e.height;return t===1?{start:n?a:o,end:n?a+i:o+s}:{start:n?a+i:o+s,end:n?a:o}}function i0(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-a)<=0}function iq(e,t){return B3(e,t+1)}function sq(e,t,r,n,a){for(var o=(n||[]).slice(),i=t.start,s=t.end,l=0,u=1,d=i,f=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:B3(n,u)};var v=l,w,x=function(){return w===void 0&&(w=r(m,v)),w},g=m.coordinate,y=l===0||i0(e,g,x,d,s);y||(l=0,d=i,u+=1),y&&(d=g+e*(x()/2+a),l+=u)},h;u<=o.length;)if(h=f(),h)return h.v;return[]}function ju(e){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(e)}function Ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(r),!0).forEach(function(n){lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lq(e,t,r){return t=cq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cq(e){var t=uq(e,"string");return ju(t)=="symbol"?t:t+""}function uq(e,t){if(ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fq(e,t,r,n,a){for(var o=(n||[]).slice(),i=o.length,s=t.start,l=t.end,u=function(h){var p=o[h],m,v=function(){return m===void 0&&(m=r(p,h)),m};if(h===i-1){var w=e*(p.coordinate+e*v()/2-l);o[h]=p=fn(fn({},p),{},{tickCoord:w>0?p.coordinate-w*e:p.coordinate})}else o[h]=p=fn(fn({},p),{},{tickCoord:p.coordinate});var x=i0(e,p.tickCoord,v,s,l);x&&(l=p.tickCoord-e*(v()/2+a),o[h]=fn(fn({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return o}function dq(e,t,r,n,a,o){var i=(n||[]).slice(),s=i.length,l=t.start,u=t.end;if(o){var d=n[s-1],f=r(d,s-1),h=e*(d.coordinate+e*f/2-u);i[s-1]=d=fn(fn({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=i0(e,d.tickCoord,function(){return f},l,u);p&&(u=d.tickCoord-e*(f/2+a),i[s-1]=fn(fn({},d),{},{isShow:!0}))}for(var m=o?s-1:s,v=function(g){var y=i[g],S,b=function(){return S===void 0&&(S=r(y,g)),S};if(g===0){var k=e*(y.coordinate-e*b()/2-l);i[g]=y=fn(fn({},y),{},{tickCoord:k<0?y.coordinate-k*e:y.coordinate})}else i[g]=y=fn(fn({},y),{},{tickCoord:y.coordinate});var _=i0(e,y.tickCoord,b,l,u);_&&(l=y.tickCoord+e*(b()/2+a),i[g]=fn(fn({},y),{},{isShow:!0}))},w=0;w<m;w++)v(w);return i}function rx(e,t,r){var n=e.tick,a=e.ticks,o=e.viewBox,i=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(de(l)||hi.isSsr)return iq(a,typeof l=="number"&&de(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",m=d&&p==="width"?bc(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(y,S){var b=Ve(u)?u(y.value,S):y.value;return p==="width"?aq(bc(b,{fontSize:t,letterSpacing:r}),m,f):bc(b,{fontSize:t,letterSpacing:r})[p]},w=a.length>=2?$a(a[1].coordinate-a[0].coordinate):1,x=oq(o,w,p);return l==="equidistantPreserveStart"?sq(w,x,v,a,i):(l==="preserveStart"||l==="preserveStartEnd"?h=dq(w,x,v,a,i,l==="preserveStartEnd"):h=fq(w,x,v,a,i),h.filter(function(g){return g.isShow}))}var hq=["viewBox"],pq=["viewBox"],gq=["ticks"];function fl(e){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function Cs(){return Cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cs.apply(this,arguments)}function Xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(r),!0).forEach(function(n){nx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Np(e,t){if(e==null)return{};var r=mq(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z3(n.key),n)}}function vq(e,t,r){return t&&Hw(e.prototype,t),r&&Hw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xq(e,t,r){return t=s0(t),bq(e,F3()?Reflect.construct(t,r||[],s0(e).constructor):t.apply(e,r))}function bq(e,t){if(t&&(fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wq(e)}function wq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F3=function(){return!!e})()}function s0(e){return s0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s0(e)}function kq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zm(e,t)}function zm(e,t){return zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zm(e,t)}function nx(e,t,r){return t=z3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z3(e){var t=Sq(e,"string");return fl(t)=="symbol"?t:t+""}function Sq(e,t){if(fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Rl=function(e){function t(r){var n;return yq(this,t),n=xq(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return kq(t,e),vq(t,[{key:"shouldComponentUpdate",value:function(n,a){var o=n.viewBox,i=Np(n,hq),s=this.props,l=s.viewBox,u=Np(s,pq);return!Is(o,l)||!Is(i,u)||!Is(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,o=a.x,i=a.y,s=a.width,l=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,p,m,v,w,x,g,y=f?-1:1,S=n.tickSize||d,b=de(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=m=n.coordinate,w=i+ +!f*l,v=w-y*S,g=v-y*h,x=b;break;case"left":v=w=n.coordinate,m=o+ +!f*s,p=m-y*S,x=p-y*h,g=b;break;case"right":v=w=n.coordinate,m=o+ +f*s,p=m+y*S,x=p+y*h,g=b;break;default:p=m=n.coordinate,w=i+ +f*l,v=w+y*S,g=v+y*h,x=b;break}return{line:{x1:p,y1:v,x2:m,y2:w},tick:{x,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,o=n.mirror,i;switch(a){case"left":i=o?"start":"end";break;case"right":i=o?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,o=n.mirror,i="end";switch(a){case"left":case"right":i="middle";break;case"top":i=o?"start":"end";break;default:i=o?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,o=n.y,i=n.width,s=n.height,l=n.orientation,u=n.mirror,d=n.axisLine,f=Dr(Dr(Dr({},He(this.props,!1)),He(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);f=Dr(Dr({},f),{},{x1:a,y1:o+h*s,x2:a+i,y2:o+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);f=Dr(Dr({},f),{},{x1:a+p*i,y1:o,x2:a+p*i,y2:o+s})}return L.createElement("line",Cs({},f,{className:ot("recharts-cartesian-axis-line",ya(d,"className"))}))}},{key:"renderTicks",value:function(n,a,o){var i=this,s=this.props,l=s.tickLine,u=s.stroke,d=s.tick,f=s.tickFormatter,h=s.unit,p=rx(Dr(Dr({},this.props),{},{ticks:n}),a,o),m=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),w=He(this.props,!1),x=He(d,!1),g=Dr(Dr({},w),{},{fill:"none"},He(l,!1)),y=p.map(function(S,b){var k=i.getTickLineCoord(S),_=k.line,N=k.tick,O=Dr(Dr(Dr(Dr({textAnchor:m,verticalAnchor:v},w),{},{stroke:"none",fill:u},x),N),{},{index:b,payload:S,visibleTicksCount:p.length,tickFormatter:f});return L.createElement(vt,Cs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Xc(i.props,S,b)),l&&L.createElement("line",Cs({},g,_,{className:ot("recharts-cartesian-axis-tick-line",ya(l,"className"))})),d&&t.renderTickItem(d,O,"".concat(Ve(f)?f(S.value,b):S.value).concat(h||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var n=this,a=this.props,o=a.axisLine,i=a.width,s=a.height,l=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,p=Np(f,gq),m=h;return Ve(l)&&(m=h&&h.length>0?l(this.props):l(p)),i<=0||s<=0||!m||!m.length?null:L.createElement(vt,{className:ot("recharts-cartesian-axis",u),ref:function(w){n.layerReference=w}},o&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),tn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,o){var i,s=ot(a.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(n)?i=L.cloneElement(n,Dr(Dr({},a),{},{className:s})):Ve(n)?i=n(Dr(Dr({},a),{},{className:s})):i=L.createElement(Pd,Cs({},a,{className:"recharts-cartesian-axis-tick-value"}),o),i}}])}(j.Component);nx(Rl,"displayName","CartesianAxis");nx(Rl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var jq=["x1","y1","x2","y2","key"],Nq=["offset"];function Zi(e){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(e)}function Vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vw(Object(r),!0).forEach(function(n){_q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _q(e,t,r){return t=Pq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pq(e){var t=Oq(e,"string");return Zi(t)=="symbol"?t:t+""}function Oq(e,t){if(Zi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$i.apply(this,arguments)}function Kw(e,t){if(e==null)return{};var r=Cq(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Mq=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,o=t.y,i=t.width,s=t.height,l=t.ry;return L.createElement("rect",{x:a,y:o,ry:l,width:i,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function G3(e,t){var r;if(L.isValidElement(e))r=L.cloneElement(e,t);else if(Ve(e))r=e(t);else{var n=t.x1,a=t.y1,o=t.x2,i=t.y2,s=t.key,l=Kw(t,jq),u=He(l,!1);u.offset;var d=Kw(u,Nq);r=L.createElement("line",$i({},d,{x1:n,y1:a,x2:o,y2:i,fill:"none",key:s}))}return r}function Aq(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,o=e.horizontalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(s,l){var u=hn(hn({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return G3(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Eq(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,o=e.verticalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(s,l){var u=hn(hn({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return G3(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Tq(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,o=e.width,i=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var d=s.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var m=!d[p+1],v=m?a+i-h:d[p+1]-h;if(v<=0)return null;var w=p%t.length;return L.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:v,width:o,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function $q(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,o=e.x,i=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+o-o)}).sort(function(h,p){return h-p});o!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var m=!d[p+1],v=m?o+s-h:d[p+1]-h;if(v<=0)return null;var w=p%n.length;return L.createElement("rect",{key:"react-".concat(p),x:h,y:i,width:v,height:l,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Dq=function(t,r){var n=t.xAxis,a=t.width,o=t.height,i=t.offset;return Q4(rx(hn(hn(hn({},Rl.defaultProps),n),{},{ticks:po(n,!0),viewBox:{x:0,y:0,width:a,height:o}})),i.left,i.left+i.width,r)},Rq=function(t,r){var n=t.yAxis,a=t.width,o=t.height,i=t.offset;return Q4(rx(hn(hn(hn({},Rl.defaultProps),n),{},{ticks:po(n,!0),viewBox:{x:0,y:0,width:a,height:o}})),i.top,i.top+i.height,r)},ps={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ja(e){var t,r,n,a,o,i,s=Jv(),l=ex(),u=SY(),d=hn(hn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:ps.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:ps.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:ps.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:ps.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:ps.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:ps.verticalFill,x:de(e.x)?e.x:u.left,y:de(e.y)?e.y:u.top,width:de(e.width)?e.width:u.width,height:de(e.height)?e.height:u.height}),f=d.x,h=d.y,p=d.width,m=d.height,v=d.syncWithTicks,w=d.horizontalValues,x=d.verticalValues,g=bY(),y=wY();if(!de(p)||p<=0||!de(m)||m<=0||!de(f)||f!==+f||!de(h)||h!==+h)return null;var S=d.verticalCoordinatesGenerator||Dq,b=d.horizontalCoordinatesGenerator||Rq,k=d.horizontalPoints,_=d.verticalPoints;if((!k||!k.length)&&Ve(b)){var N=w&&w.length,O=b({yAxis:y?hn(hn({},y),{},{ticks:N?w:y.ticks}):void 0,width:s,height:l,offset:u},N?!0:v);yo(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Zi(O),"]")),Array.isArray(O)&&(k=O)}if((!_||!_.length)&&Ve(S)){var A=x&&x.length,E=S({xAxis:g?hn(hn({},g),{},{ticks:A?x:g.ticks}):void 0,width:s,height:l,offset:u},A?!0:v);yo(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Zi(E),"]")),Array.isArray(E)&&(_=E)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(Mq,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),L.createElement(Aq,$i({},d,{offset:u,horizontalPoints:k,xAxis:g,yAxis:y})),L.createElement(Eq,$i({},d,{offset:u,verticalPoints:_,xAxis:g,yAxis:y})),L.createElement(Tq,$i({},d,{horizontalPoints:k})),L.createElement($q,$i({},d,{verticalPoints:_})))}Ja.displayName="CartesianGrid";var Iq=["type","layout","connectNulls","ref"],Lq=["key"];function dl(e){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dl(e)}function Yw(e,t){if(e==null)return{};var r=Bq(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jc(){return jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jc.apply(this,arguments)}function qw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qw(Object(r),!0).forEach(function(n){Aa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gs(e){return Uq(e)||Gq(e)||zq(e)||Fq()}function Fq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zq(e,t){if(e){if(typeof e=="string")return Gm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gm(e,t)}}function Gq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uq(e){if(Array.isArray(e))return Gm(e)}function Gm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W3(n.key),n)}}function Xq(e,t,r){return t&&Zw(e.prototype,t),r&&Zw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hq(e,t,r){return t=l0(t),Vq(e,U3()?Reflect.construct(t,r||[],l0(e).constructor):t.apply(e,r))}function Vq(e,t){if(t&&(dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kq(e)}function Kq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U3=function(){return!!e})()}function l0(e){return l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l0(e)}function Yq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Um(e,t)}function Um(e,t){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Um(e,t)}function Aa(e,t,r){return t=W3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W3(e){var t=qq(e,"string");return dl(t)=="symbol"?t:t+""}function qq(e,t){if(dl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mr=function(e){function t(){var r;Wq(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=Hq(this,t,[].concat(a)),Aa(r,"state",{isAnimationFinished:!0,totalLength:0}),Aa(r,"generateSimpleStrokeDasharray",function(i,s){return"".concat(s,"px ").concat(i-s,"px")}),Aa(r,"getStrokeDasharray",function(i,s,l){var u=l.reduce(function(x,g){return x+g});if(!u)return r.generateSimpleStrokeDasharray(s,i);for(var d=Math.floor(i/u),f=i%u,h=s-i,p=[],m=0,v=0;m<l.length;v+=l[m],++m)if(v+l[m]>f){p=[].concat(gs(l.slice(0,m)),[f-v]);break}var w=p.length%2===0?[0,h]:[h];return[].concat(gs(t.repeat(l,d)),gs(p),w).map(function(x){return"".concat(x,"px")}).join(", ")}),Aa(r,"id",rs("recharts-line-")),Aa(r,"pathRef",function(i){r.mainCurve=i}),Aa(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Aa(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Yq(t,e),Xq(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,s=o.xAxis,l=o.yAxis,u=o.layout,d=o.children,f=Fn(d,Dl);if(!f)return null;var h=function(v,w){return{x:v.x,y:v.y,value:v.value,errorVal:Fr(v.payload,w)}},p={clipPath:n?"url(#clipPath-".concat(a,")"):null};return L.createElement(vt,p,f.map(function(m){return L.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:i,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,d=s.dataKey,f=He(this.props,!1),h=He(l,!0),p=u.map(function(v,w){var x=Vn(Vn(Vn({key:"dot-".concat(w),r:3},f),h),{},{index:w,cx:v.x,cy:v.y,value:v.value,dataKey:d,payload:v.payload,points:u});return t.renderDotItem(l,x)}),m={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(o,")"):null};return L.createElement(vt,jc({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(n,a,o,i){var s=this.props,l=s.type,u=s.layout,d=s.connectNulls;s.ref;var f=Yw(s,Iq),h=Vn(Vn(Vn({},He(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(o,")"):null,points:n},i),{},{type:l,layout:u,connectNulls:d});return L.createElement(Fi,jc({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var o=this,i=this.props,s=i.points,l=i.strokeDasharray,u=i.isAnimationActive,d=i.animationBegin,f=i.animationDuration,h=i.animationEasing,p=i.animationId,m=i.animateNewValues,v=i.width,w=i.height,x=this.state,g=x.prevPoints,y=x.totalLength;return L.createElement(La,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var b=S.t;if(g){var k=g.length/s.length,_=s.map(function(P,M){var D=Math.floor(M*k);if(g[D]){var T=g[D],B=jr(T.x,P.x),C=jr(T.y,P.y);return Vn(Vn({},P),{},{x:B(b),y:C(b)})}if(m){var R=jr(v*2,P.x),z=jr(w/2,P.y);return Vn(Vn({},P),{},{x:R(b),y:z(b)})}return Vn(Vn({},P),{},{x:P.x,y:P.y})});return o.renderCurveStatically(_,n,a)}var N=jr(0,y),O=N(b),A;if(l){var E="".concat(l).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});A=o.getStrokeDasharray(O,y,E)}else A=o.generateSimpleStrokeDasharray(y,O);return o.renderCurveStatically(s,n,a,{strokeDasharray:A})})}},{key:"renderCurve",value:function(n,a){var o=this.props,i=o.points,s=o.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return s&&i&&i.length&&(!u&&d>0||!Ki(u,i))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(i,n,a)}},{key:"render",value:function(){var n,a=this.props,o=a.hide,i=a.dot,s=a.points,l=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,p=a.width,m=a.height,v=a.isAnimationActive,w=a.id;if(o||!s||!s.length)return null;var x=this.state.isAnimationFinished,g=s.length===1,y=ot("recharts-line",l),S=u&&u.allowDataOverflow,b=d&&d.allowDataOverflow,k=S||b,_=Ue(w)?this.id:w,N=(n=He(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=N.r,A=O===void 0?3:O,E=N.strokeWidth,P=E===void 0?2:E,M=H5(i)?i:{},D=M.clipDot,T=D===void 0?!0:D,B=A*2+P;return L.createElement(vt,{className:y},S||b?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(_)},L.createElement("rect",{x:S?h:h-p/2,y:b?f:f-m/2,width:S?p:p*2,height:b?m:m*2})),!T&&L.createElement("clipPath",{id:"clipPath-dots-".concat(_)},L.createElement("rect",{x:h-B/2,y:f-B/2,width:p+B,height:m+B}))):null,!g&&this.renderCurve(k,_),this.renderErrorBar(k,_),(g||i)&&this.renderDots(k,T,_),(!v||x)&&Za.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var o=n.length%2!==0?[].concat(gs(n),[0]):n,i=[],s=0;s<a;++s)i=[].concat(gs(i),gs(o));return i}},{key:"renderDotItem",value:function(n,a){var o;if(L.isValidElement(n))o=L.cloneElement(n,a);else if(Ve(n))o=n(a);else{var i=a.key,s=Yw(a,Lq),l=ot("recharts-line-dot",typeof n!="boolean"?n.className:"");o=L.createElement(fh,jc({key:i},s,{className:l}))}return o}}])}(j.PureComponent);Aa(Mr,"displayName","Line");Aa(Mr,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!hi.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Aa(Mr,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,i=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,d=t.layout,f=l.map(function(h,p){var m=Fr(h,i);return d==="horizontal"?{x:nl({axis:r,ticks:a,bandSize:s,entry:h,index:p}),y:Ue(m)?null:n.scale(m),value:m,payload:h}:{x:Ue(m)?null:r.scale(m),y:nl({axis:n,ticks:o,bandSize:s,entry:h,index:p}),value:m,payload:h}});return Vn({points:f,layout:d},u)});var Zq=["layout","type","stroke","connectNulls","isRange","ref"],Qq=["key"],X3;function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function H3(e,t){if(e==null)return{};var r=Jq(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(this,arguments)}function Qw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qw(Object(r),!0).forEach(function(n){Ha(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K3(n.key),n)}}function tZ(e,t,r){return t&&Jw(e.prototype,t),r&&Jw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rZ(e,t,r){return t=c0(t),nZ(e,V3()?Reflect.construct(t,r||[],c0(e).constructor):t.apply(e,r))}function nZ(e,t){if(t&&(hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aZ(e)}function aZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V3=function(){return!!e})()}function c0(e){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c0(e)}function oZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wm(e,t)}function Wm(e,t){return Wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wm(e,t)}function Ha(e,t,r){return t=K3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K3(e){var t=iZ(e,"string");return hl(t)=="symbol"?t:t+""}function iZ(e,t){if(hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ga=function(e){function t(){var r;eZ(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=rZ(this,t,[].concat(a)),Ha(r,"state",{isAnimationFinished:!0}),Ha(r,"id",rs("recharts-area-")),Ha(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ve(i)&&i()}),Ha(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ve(i)&&i()}),r}return oZ(t,e),tZ(t,[{key:"renderDots",value:function(n,a,o){var i=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(i&&!s)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,h=He(this.props,!1),p=He(u,!0),m=d.map(function(w,x){var g=Io(Io(Io({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:w.x,cy:w.y,dataKey:f,value:w.value,payload:w.payload,points:d});return t.renderDotItem(u,g)}),v={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(o,")"):null};return L.createElement(vt,Di({className:"recharts-area-dots"},v),m)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,o=a.baseLine,i=a.points,s=a.strokeWidth,l=i[0].x,u=i[i.length-1].x,d=n*Math.abs(l-u),f=Ho(i.map(function(h){return h.y||0}));return de(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Ho(o.map(function(h){return h.y||0})),f)),de(f)?L.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,o=a.baseLine,i=a.points,s=a.strokeWidth,l=i[0].y,u=i[i.length-1].y,d=n*Math.abs(l-u),f=Ho(i.map(function(h){return h.x||0}));return de(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Ho(o.map(function(h){return h.x||0})),f)),de(f)?L.createElement("rect",{x:0,y:l<u?l:l-d,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,o,i){var s=this.props,l=s.layout,u=s.type,d=s.stroke,f=s.connectNulls,h=s.isRange;s.ref;var p=H3(s,Zq);return L.createElement(vt,{clipPath:o?"url(#clipPath-".concat(i,")"):null},L.createElement(Fi,Di({},He(p,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&L.createElement(Fi,Di({},He(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&L.createElement(Fi,Di({},He(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var o=this,i=this.props,s=i.points,l=i.baseLine,u=i.isAnimationActive,d=i.animationBegin,f=i.animationDuration,h=i.animationEasing,p=i.animationId,m=this.state,v=m.prevPoints,w=m.prevBaseLine;return L.createElement(La,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t;if(v){var y=v.length/s.length,S=s.map(function(N,O){var A=Math.floor(O*y);if(v[A]){var E=v[A],P=jr(E.x,N.x),M=jr(E.y,N.y);return Io(Io({},N),{},{x:P(g),y:M(g)})}return N}),b;if(de(l)&&typeof l=="number"){var k=jr(w,l);b=k(g)}else if(Ue(l)||Ol(l)){var _=jr(w,0);b=_(g)}else b=l.map(function(N,O){var A=Math.floor(O*y);if(w[A]){var E=w[A],P=jr(E.x,N.x),M=jr(E.y,N.y);return Io(Io({},N),{},{x:P(g),y:M(g)})}return N});return o.renderAreaStatically(S,b,n,a)}return L.createElement(vt,null,L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(a)},o.renderClipRect(g))),L.createElement(vt,{clipPath:"url(#animationClipPath-".concat(a,")")},o.renderAreaStatically(s,l,n,a)))})}},{key:"renderArea",value:function(n,a){var o=this.props,i=o.points,s=o.baseLine,l=o.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return l&&i&&i.length&&(!d&&h>0||!Ki(d,i)||!Ki(f,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(i,s,n,a)}},{key:"render",value:function(){var n,a=this.props,o=a.hide,i=a.dot,s=a.points,l=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,p=a.width,m=a.height,v=a.isAnimationActive,w=a.id;if(o||!s||!s.length)return null;var x=this.state.isAnimationFinished,g=s.length===1,y=ot("recharts-area",l),S=f&&f.allowDataOverflow,b=h&&h.allowDataOverflow,k=S||b,_=Ue(w)?this.id:w,N=(n=He(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=N.r,A=O===void 0?3:O,E=N.strokeWidth,P=E===void 0?2:E,M=H5(i)?i:{},D=M.clipDot,T=D===void 0?!0:D,B=A*2+P;return L.createElement(vt,{className:y},S||b?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(_)},L.createElement("rect",{x:S?d:d-p/2,y:b?u:u-m/2,width:S?p:p*2,height:b?m:m*2})),!T&&L.createElement("clipPath",{id:"clipPath-dots-".concat(_)},L.createElement("rect",{x:d-B/2,y:u-B/2,width:p+B,height:m+B}))):null,g?null:this.renderArea(k,_),(i||g)&&this.renderDots(k,T,_),(!v||x)&&Za.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(j.PureComponent);X3=ga;Ha(ga,"displayName","Area");Ha(ga,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!hi.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ha(ga,"getBaseValue",function(e,t,r,n){var a=e.layout,o=e.baseValue,i=t.props.baseValue,s=i??o;if(de(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return s==="dataMin"?f:s==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Ha(ga,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,o=e.xAxisTicks,i=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,p=t.layout,m=u&&u.length,v=X3.getBaseValue(t,r,n,a),w=p==="horizontal",x=!1,g=f.map(function(S,b){var k;m?k=u[d+b]:(k=Fr(S,l),Array.isArray(k)?x=!0:k=[v,k]);var _=k[1]==null||m&&Fr(S,l)==null;return w?{x:nl({axis:n,ticks:o,bandSize:s,entry:S,index:b}),y:_?null:a.scale(k[1]),value:k,payload:S}:{x:_?null:n.scale(k[1]),y:nl({axis:a,ticks:i,bandSize:s,entry:S,index:b}),value:k,payload:S}}),y;return m||x?y=g.map(function(S){var b=Array.isArray(S.value)?S.value[0]:null;return w?{x:S.x,y:b!=null&&S.y!=null?a.scale(b):null}:{x:b!=null?n.scale(b):null,y:S.y}}):y=w?a.scale(v):n.scale(v),Io({points:g,baseLine:y,layout:p,isRange:x},h)});Ha(ga,"renderDotItem",function(e,t){var r;if(L.isValidElement(e))r=L.cloneElement(e,t);else if(Ve(e))r=e(t);else{var n=ot("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,o=H3(t,Qq);r=L.createElement(fh,Di({},o,{key:a,className:n}))}return r});function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function sZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z3(n.key),n)}}function cZ(e,t,r){return t&&lZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uZ(e,t,r){return t=u0(t),fZ(e,Y3()?Reflect.construct(t,r||[],u0(e).constructor):t.apply(e,r))}function fZ(e,t){if(t&&(pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dZ(e)}function dZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y3=function(){return!!e})()}function u0(e){return u0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u0(e)}function hZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xm(e,t)}function Xm(e,t){return Xm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xm(e,t)}function q3(e,t,r){return t=Z3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z3(e){var t=pZ(e,"string");return pl(t)=="symbol"?t:t+""}function pZ(e,t){if(pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yh=function(e){function t(){return sZ(this,t),uZ(this,t,arguments)}return hZ(t,e),cZ(t,[{key:"render",value:function(){return null}}])}(j.Component);q3(yh,"displayName","ZAxis");q3(yh,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var gZ=["option","isActive"];function Nc(){return Nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nc.apply(this,arguments)}function mZ(e,t){if(e==null)return{};var r=yZ(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vZ(e){var t=e.option,r=e.isActive,n=mZ(e,gZ);return typeof t=="string"?j.createElement(Am,Nc({option:j.createElement(Q0,Nc({type:t},n)),isActive:r,shapeType:"symbols"},n)):j.createElement(Am,Nc({option:t,isActive:r,shapeType:"symbols"},n))}function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function _c(){return _c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_c.apply(this,arguments)}function ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ek(Object(r),!0).forEach(function(n){Yo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J3(n.key),n)}}function bZ(e,t,r){return t&&tk(e.prototype,t),r&&tk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wZ(e,t,r){return t=f0(t),kZ(e,Q3()?Reflect.construct(t,r||[],f0(e).constructor):t.apply(e,r))}function kZ(e,t){if(t&&(gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SZ(e)}function SZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q3=function(){return!!e})()}function f0(e){return f0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f0(e)}function jZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hm(e,t)}function Hm(e,t){return Hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hm(e,t)}function Yo(e,t,r){return t=J3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J3(e){var t=NZ(e,"string");return gl(t)=="symbol"?t:t+""}function NZ(e,t){if(gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nn=function(e){function t(){var r;xZ(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=wZ(this,t,[].concat(a)),Yo(r,"state",{isAnimationFinished:!1}),Yo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Yo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Yo(r,"id",rs("recharts-scatter-")),r}return jZ(t,e),bZ(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,o=this.props,i=o.shape,s=o.activeShape,l=o.activeIndex,u=He(this.props,!1);return n.map(function(d,f){var h=l===f,p=h?s:i,m=ua(ua({},u),d);return L.createElement(vt,_c({className:"recharts-scatter-symbol",key:"symbol-".concat(d==null?void 0:d.cx,"-").concat(d==null?void 0:d.cy,"-").concat(d==null?void 0:d.size,"-").concat(f)},Xc(a.props,d,f),{role:"img"}),L.createElement(vZ,_c({option:p,isActive:h,key:"symbol-".concat(f)},m)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,o=a.points,i=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state.prevPoints;return L.createElement(La,{begin:s,duration:l,isActive:i,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=o.map(function(v,w){var x=f&&f[w];if(x){var g=jr(x.cx,v.cx),y=jr(x.cy,v.cy),S=jr(x.size,v.size);return ua(ua({},v),{},{cx:g(p),cy:y(p),size:S(p)})}var b=jr(0,v.size);return ua(ua({},v),{},{size:b(p)})});return L.createElement(vt,null,n.renderSymbolsStatically(m))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,o=n.isAnimationActive,i=this.state.prevPoints;return o&&a&&a.length&&(!i||!Ki(i,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,i=a.xAxis,s=a.yAxis,l=a.children,u=Fn(l,Dl);return u?u.map(function(d,f){var h=d.props,p=h.direction,m=h.dataKey;return L.cloneElement(d,{key:"".concat(p,"-").concat(m,"-").concat(o[f]),data:o,xAxis:i,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(w,x){return{x:w.cx,y:w.cy,value:p==="x"?+w.node.x:+w.node.y,errorVal:Fr(w,x)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,o=n.line,i=n.lineType,s=n.lineJointType,l=He(this.props,!1),u=He(o,!1),d,f;if(i==="joint")d=a.map(function(y){return{x:y.cx,y:y.cy}});else if(i==="fitting"){var h=JA(a),p=h.xmin,m=h.xmax,v=h.a,w=h.b,x=function(S){return v*S+w};d=[{x:p,y:x(p)},{x:m,y:x(m)}]}var g=ua(ua(ua({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:d});return L.isValidElement(o)?f=L.cloneElement(o,g):Ve(o)?f=o(g):f=L.createElement(Fi,_c({},g,{type:s})),L.createElement(vt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var n=this.props,a=n.hide,o=n.points,i=n.line,s=n.className,l=n.xAxis,u=n.yAxis,d=n.left,f=n.top,h=n.width,p=n.height,m=n.id,v=n.isAnimationActive;if(a||!o||!o.length)return null;var w=this.state.isAnimationFinished,x=ot("recharts-scatter",s),g=l&&l.allowDataOverflow,y=u&&u.allowDataOverflow,S=g||y,b=Ue(m)?this.id:m;return L.createElement(vt,{className:x,clipPath:S?"url(#clipPath-".concat(b,")"):null},g||y?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(b)},L.createElement("rect",{x:g?d:d-h/2,y:y?f:f-p/2,width:g?h:h*2,height:y?p:p*2}))):null,i&&this.renderLine(),this.renderErrorBar(),L.createElement(vt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!v||w)&&Za.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(j.PureComponent);Yo(Nn,"displayName","Scatter");Yo(Nn,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!hi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Yo(Nn,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,o=e.displayedData,i=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=a.props.tooltipType,d=Fn(a.props.children,kv),f=Ue(t.dataKey)?a.props.dataKey:t.dataKey,h=Ue(r.dataKey)?a.props.dataKey:r.dataKey,p=n&&n.dataKey,m=n?n.range:yh.defaultProps.range,v=m&&m[0],w=t.scale.bandwidth?t.scale.bandwidth():0,x=r.scale.bandwidth?r.scale.bandwidth():0,g=o.map(function(y,S){var b=Fr(y,f),k=Fr(y,h),_=!Ue(p)&&Fr(y,p)||"-",N=[{name:Ue(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:b,payload:y,dataKey:f,type:u},{name:Ue(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:y,dataKey:h,type:u}];_!=="-"&&N.push({name:n.name||n.dataKey,unit:n.unit||"",value:_,payload:y,dataKey:p,type:u});var O=nl({axis:t,ticks:i,bandSize:w,entry:y,index:S,dataKey:f}),A=nl({axis:r,ticks:s,bandSize:x,entry:y,index:S,dataKey:h}),E=_!=="-"?n.scale(_):v,P=Math.sqrt(Math.max(E,0)/Math.PI);return ua(ua({},y),{},{cx:O,cy:A,x:O-P,y:A-P,xAxis:t,yAxis:r,zAxis:n,width:2*P,height:2*P,size:E,node:{x:b,y:k,z:_},tooltipPayload:N,tooltipPosition:{x:O,y:A},payload:y},d&&d[S]&&d[S].props)});return ua({points:g},l)});function ml(e){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}function _Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rN(n.key),n)}}function OZ(e,t,r){return t&&PZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CZ(e,t,r){return t=d0(t),MZ(e,eN()?Reflect.construct(t,r||[],d0(e).constructor):t.apply(e,r))}function MZ(e,t){if(t&&(ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AZ(e)}function AZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!e})()}function d0(e){return d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d0(e)}function EZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vm(e,t)}function Vm(e,t){return Vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vm(e,t)}function tN(e,t,r){return t=rN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rN(e){var t=TZ(e,"string");return ml(t)=="symbol"?t:t+""}function TZ(e,t){if(ml(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Km.apply(this,arguments)}function $Z(e){var t=e.xAxisId,r=Jv(),n=ex(),a=A3(t);return a==null?null:j.createElement(Rl,Km({},a,{className:ot("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(i){return po(i,!0)}}))}var zn=function(e){function t(){return _Z(this,t),CZ(this,t,arguments)}return EZ(t,e),OZ(t,[{key:"render",value:function(){return j.createElement($Z,this.props)}}])}(j.Component);tN(zn,"displayName","XAxis");tN(zn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function yl(e){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(e)}function DZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oN(n.key),n)}}function IZ(e,t,r){return t&&RZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LZ(e,t,r){return t=h0(t),BZ(e,nN()?Reflect.construct(t,r||[],h0(e).constructor):t.apply(e,r))}function BZ(e,t){if(t&&(yl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FZ(e)}function FZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nN=function(){return!!e})()}function h0(e){return h0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h0(e)}function zZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ym(e,t)}function Ym(e,t){return Ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ym(e,t)}function aN(e,t,r){return t=oN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oN(e){var t=GZ(e,"string");return yl(t)=="symbol"?t:t+""}function GZ(e,t){if(yl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(this,arguments)}var UZ=function(t){var r=t.yAxisId,n=Jv(),a=ex(),o=E3(r);return o==null?null:j.createElement(Rl,qm({},o,{className:ot("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return po(s,!0)}}))},Gn=function(e){function t(){return DZ(this,t),LZ(this,t,arguments)}return zZ(t,e),IZ(t,[{key:"render",value:function(){return j.createElement(UZ,this.props)}}])}(j.Component);aN(Gn,"displayName","YAxis");aN(Gn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function rk(e){return VZ(e)||HZ(e)||XZ(e)||WZ()}function WZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XZ(e,t){if(e){if(typeof e=="string")return Zm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zm(e,t)}}function HZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VZ(e){if(Array.isArray(e))return Zm(e)}function Zm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qm=function(t,r,n,a,o){var i=Fn(t,Ko),s=Fn(t,Bu),l=[].concat(rk(i),rk(s)),u=Fn(t,Fu),d="".concat(a,"Id"),f=a[0],h=r;if(l.length&&(h=l.reduce(function(v,w){if(w.props[d]===n&&Qa(w.props,"extendDomain")&&de(w.props[f])){var x=w.props[f];return[Math.min(v[0],x),Math.max(v[1],x)]}return v},h)),u.length){var p="".concat(f,"1"),m="".concat(f,"2");h=u.reduce(function(v,w){if(w.props[d]===n&&Qa(w.props,"extendDomain")&&de(w.props[p])&&de(w.props[m])){var x=w.props[p],g=w.props[m];return[Math.min(v[0],x,g),Math.max(v[1],x,g)]}return v},h)}return o&&o.length&&(h=o.reduce(function(v,w){return de(w)?[Math.min(v[0],w),Math.max(v[1],w)]:v},h)),h},iN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function o(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||l,h),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},s.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,d,f,h,p,m){var v=r?r+u:u;if(!this._events[v])return!1;var w=this._events[v],x=arguments.length,g,y;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,f),!0;case 4:return w.fn.call(w.context,d,f,h),!0;case 5:return w.fn.call(w.context,d,f,h,p),!0;case 6:return w.fn.call(w.context,d,f,h,p,m),!0}for(y=1,g=new Array(x-1);y<x;y++)g[y-1]=arguments[y];w.fn.apply(w.context,g)}else{var S=w.length,b;for(y=0;y<S;y++)switch(w[y].once&&this.removeListener(u,w[y].fn,void 0,!0),x){case 1:w[y].fn.call(w[y].context);break;case 2:w[y].fn.call(w[y].context,d);break;case 3:w[y].fn.call(w[y].context,d,f);break;case 4:w[y].fn.call(w[y].context,d,f,h);break;default:if(!g)for(b=1,g=new Array(x-1);b<x;b++)g[b-1]=arguments[b];w[y].fn.apply(w[y].context,g)}}return!0},s.prototype.on=function(u,d,f){return o(this,u,d,f,!1)},s.prototype.once=function(u,d,f){return o(this,u,d,f,!0)},s.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&i(this,p);else{for(var v=0,w=[],x=m.length;v<x;v++)(m[v].fn!==d||h&&!m[v].once||f&&m[v].context!==f)&&w.push(m[v]);w.length?this._events[p]=w.length===1?w[0]:w:i(this,p)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(iN);var KZ=iN.exports;const YZ=Lt(KZ);var _p=new YZ,Pp="recharts.syncMouseEvents";function Nu(e){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nu(e)}function qZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sN(n.key),n)}}function QZ(e,t,r){return t&&ZZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Op(e,t,r){return t=sN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sN(e){var t=JZ(e,"string");return Nu(t)=="symbol"?t:t+""}function JZ(e,t){if(Nu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eQ=function(){function e(){qZ(this,e),Op(this,"activeIndex",0),Op(this,"coordinateList",[]),Op(this,"layout","horizontal")}return QZ(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,o=a===void 0?null:a,i=r.container,s=i===void 0?null:i,l=r.layout,u=l===void 0?null:l,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),o=a.x,i=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=o+l+u,h=i+this.offset.top+s/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function tQ(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&de(n)&&de(a))return!0}return!1}function rQ(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function lN(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,o=e.endAngle,i=rn(t,r,n,a),s=rn(t,r,n,o);return{points:[i,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:o}}function nQ(e,t,r){var n,a,o,i;if(e==="horizontal")n=t.x,o=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,o=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=rn(s,l,u,f),p=rn(s,l,d,f);n=h.x,a=h.y,o=p.x,i=p.y}else return lN(t);return[{x:n,y:a},{x:o,y:i}]}function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function nk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(r),!0).forEach(function(n){aQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aQ(e,t,r){return t=oQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oQ(e){var t=iQ(e,"string");return _u(t)=="symbol"?t:t+""}function iQ(e,t){if(_u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sQ(e){var t,r,n=e.element,a=e.tooltipEventType,o=e.isActive,i=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!o||!i||h!=="ScatterChart"&&a!=="axis")return null;var m,v=Fi;if(h==="ScatterChart")m=i,v=TH;else if(h==="BarChart")m=rQ(f,i,l,d),v=Kv;else if(f==="radial"){var w=lN(i),x=w.cx,g=w.cy,y=w.radius,S=w.startAngle,b=w.endAngle;m={cx:x,cy:g,startAngle:S,endAngle:b,innerRadius:y,outerRadius:y},v=n3}else m={points:nQ(f,i,l)},v=Fi;var k=Nf(Nf(Nf(Nf({stroke:"#ccc",pointerEvents:"none"},l),m),He(p,!1)),{},{payload:s,payloadIndex:u,className:ot("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,k):j.createElement(v,k)}var lQ=["item"],cQ=["children","className","width","height","style","compact","title","desc"];function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function Ms(){return Ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ms.apply(this,arguments)}function ak(e,t){return dQ(e)||fQ(e,t)||uN(e,t)||uQ()}function uQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}function dQ(e){if(Array.isArray(e))return e}function ok(e,t){if(e==null)return{};var r=hQ(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fN(n.key),n)}}function mQ(e,t,r){return t&&gQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yQ(e,t,r){return t=p0(t),vQ(e,cN()?Reflect.construct(t,r||[],p0(e).constructor):t.apply(e,r))}function vQ(e,t){if(t&&(vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xQ(e)}function xQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cN=function(){return!!e})()}function p0(e){return p0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p0(e)}function bQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jm(e,t)}function Jm(e,t){return Jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jm(e,t)}function xl(e){return SQ(e)||kQ(e)||uN(e)||wQ()}function wQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uN(e,t){if(e){if(typeof e=="string")return ey(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ey(e,t)}}function kQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SQ(e){if(Array.isArray(e))return ey(e)}function ey(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(r),!0).forEach(function(n){Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Re(e,t,r){return t=fN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fN(e){var t=jQ(e,"string");return vl(t)=="symbol"?t:t+""}function jQ(e,t){if(vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NQ={xAxis:["bottom","top"],yAxis:["left","right"]},_Q={width:"100%",height:"100%"},dN={x:0,y:0};function _f(e){return e}var PQ=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},OQ=function(t,r,n,a){var o=r.find(function(d){return d&&d.index===n});if(o){if(t==="horizontal")return{x:o.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:o.coordinate};if(t==="centric"){var i=o.coordinate,s=a.radius;return te(te(te({},a),rn(a.cx,a.cy,s,i)),{},{angle:i,radius:s})}var l=o.coordinate,u=a.angle;return te(te(te({},a),rn(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return dN},vh=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,o=r.dataEndIndex,i=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(xl(s),xl(u)):s},[]);return i.length>0?i:t&&t.length&&de(a)&&de(o)?t.slice(a,o+1):[]};function hN(e){return e==="number"?[0,"auto"]:void 0}var ty=function(t,r,n,a){var o=t.graphicalItems,i=t.tooltipAxis,s=vh(r,t);return n<0||!o||!o.length||n>=s.length?null:o.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(i.dataKey&&!i.allowDuplicatedCategory){var p=f===void 0?s:f;h=dd(p,i.dataKey,a)}else h=f&&f[n]||s[n];return h?[].concat(xl(l),[e3(u,h)]):l},[])},sk=function(t,r,n,a){var o=a||{x:t.chartX,y:t.chartY},i=PQ(o,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,d=fU(i,s,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,h=ty(t,r,d,f),p=OQ(n,s,d,o);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},CQ=function(t,r){var n=r.axes,a=r.graphicalItems,o=r.axisType,i=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,p=Z4(d,o);return n.reduce(function(m,v){var w,x=v.type.defaultProps!==void 0?te(te({},v.type.defaultProps),v.props):v.props,g=x.type,y=x.dataKey,S=x.allowDataOverflow,b=x.allowDuplicatedCategory,k=x.scale,_=x.ticks,N=x.includeHidden,O=x[i];if(m[O])return m;var A=vh(t.data,{graphicalItems:a.filter(function(X){var F,re=i in X.props?X.props[i]:(F=X.type.defaultProps)===null||F===void 0?void 0:F[i];return re===O}),dataStartIndex:l,dataEndIndex:u}),E=A.length,P,M,D;tQ(x.domain,S,g)&&(P=gm(x.domain,null,S),p&&(g==="number"||k!=="auto")&&(D=kc(A,y,"category")));var T=hN(g);if(!P||P.length===0){var B,C=(B=x.domain)!==null&&B!==void 0?B:T;if(y){if(P=kc(A,y,g),g==="category"&&p){var R=QA(P);b&&R?(M=P,P=Qd(0,E)):b||(P=L2(C,P,v).reduce(function(X,F){return X.indexOf(F)>=0?X:[].concat(xl(X),[F])},[]))}else if(g==="category")b?P=P.filter(function(X){return X!==""&&!Ue(X)}):P=L2(C,P,v).reduce(function(X,F){return X.indexOf(F)>=0||F===""||Ue(F)?X:[].concat(xl(X),[F])},[]);else if(g==="number"){var z=mU(A,a.filter(function(X){var F,re,J=i in X.props?X.props[i]:(F=X.type.defaultProps)===null||F===void 0?void 0:F[i],$="hide"in X.props?X.props.hide:(re=X.type.defaultProps)===null||re===void 0?void 0:re.hide;return J===O&&(N||!$)}),y,o,d);z&&(P=z)}p&&(g==="number"||k!=="auto")&&(D=kc(A,y,"category"))}else p?P=Qd(0,E):s&&s[O]&&s[O].hasStack&&g==="number"?P=h==="expand"?[0,1]:J4(s[O].stackGroups,l,u):P=q4(A,a.filter(function(X){var F=i in X.props?X.props[i]:X.type.defaultProps[i],re="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return F===O&&(N||!re)}),g,d,!0);if(g==="number")P=Qm(f,P,O,o,_),C&&(P=gm(C,P,S));else if(g==="category"&&C){var G=C,ne=P.every(function(X){return G.indexOf(X)>=0});ne&&(P=G)}}return te(te({},m),{},Re({},O,te(te({},x),{},{axisType:o,domain:P,categoricalDomain:D,duplicateDomain:M,originalDomain:(w=x.domain)!==null&&w!==void 0?w:T,isCategorical:p,layout:d})))},{})},MQ=function(t,r){var n=r.graphicalItems,a=r.Axis,o=r.axisType,i=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=vh(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=h.length,m=Z4(d,o),v=-1;return n.reduce(function(w,x){var g=x.type.defaultProps!==void 0?te(te({},x.type.defaultProps),x.props):x.props,y=g[i],S=hN("number");if(!w[y]){v++;var b;return m?b=Qd(0,p):s&&s[y]&&s[y].hasStack?(b=J4(s[y].stackGroups,l,u),b=Qm(f,b,y,o)):(b=gm(S,q4(h,n.filter(function(k){var _,N,O=i in k.props?k.props[i]:(_=k.type.defaultProps)===null||_===void 0?void 0:_[i],A="hide"in k.props?k.props.hide:(N=k.type.defaultProps)===null||N===void 0?void 0:N.hide;return O===y&&!A}),"number",d),a.defaultProps.allowDataOverflow),b=Qm(f,b,y,o)),te(te({},w),{},Re({},y,te(te({axisType:o},a.defaultProps),{},{hide:!0,orientation:ya(NQ,"".concat(o,".").concat(v%2),null),domain:b,originalDomain:S,isCategorical:m,layout:d})))}return w},{})},AQ=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,o=r.AxisComp,i=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=Fn(d,o),p={};return h&&h.length?p=CQ(t,{axes:h,graphicalItems:i,axisType:a,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):i&&i.length&&(p=MQ(t,{Axis:o,graphicalItems:i,axisType:a,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},EQ=function(t){var r=Uo(t),n=po(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:bv(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Gd(r,n)}},lk=function(t){var r=t.children,n=t.defaultShowTooltip,a=qn(r,il),o=0,i=0;return t.data&&t.data.length!==0&&(i=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(o=a.props.startIndex),a.props.endIndex>=0&&(i=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!n}},TQ=function(t){return!t||!t.length?!1:t.some(function(r){var n=mo(r&&r.type);return n&&n.indexOf("Bar")>=0})},ck=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$Q=function(t,r){var n=t.props,a=t.graphicalItems,o=t.xAxisMap,i=o===void 0?{}:o,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,d=n.height,f=n.children,h=n.margin||{},p=qn(f,il),m=qn(f,Ya),v=Object.keys(l).reduce(function(b,k){var _=l[k],N=_.orientation;return!_.mirror&&!_.hide?te(te({},b),{},Re({},N,b[N]+_.width)):b},{left:h.left||0,right:h.right||0}),w=Object.keys(i).reduce(function(b,k){var _=i[k],N=_.orientation;return!_.mirror&&!_.hide?te(te({},b),{},Re({},N,ya(b,"".concat(N))+_.height)):b},{top:h.top||0,bottom:h.bottom||0}),x=te(te({},w),v),g=x.bottom;p&&(x.bottom+=p.props.height||il.defaultProps.height),m&&r&&(x=pU(x,a,n,r));var y=u-x.left-x.right,S=d-x.top-x.bottom;return te(te({brushBottom:g},x),{},{width:Math.max(y,0),height:Math.max(S,0)})},DQ=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},ax=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,o=a===void 0?"axis":a,i=t.validateTooltipEventTypes,s=i===void 0?["axis"]:i,l=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(x,g){var y=g.graphicalItems,S=g.stackGroups,b=g.offset,k=g.updateId,_=g.dataStartIndex,N=g.dataEndIndex,O=x.barSize,A=x.layout,E=x.barGap,P=x.barCategoryGap,M=x.maxBarSize,D=ck(A),T=D.numericAxisName,B=D.cateAxisName,C=TQ(y),R=[];return y.forEach(function(z,G){var ne=vh(x.data,{graphicalItems:[z],dataStartIndex:_,dataEndIndex:N}),X=z.type.defaultProps!==void 0?te(te({},z.type.defaultProps),z.props):z.props,F=X.dataKey,re=X.maxBarSize,J=X["".concat(T,"Id")],$=X["".concat(B,"Id")],oe={},q=l.reduce(function(Be,it){var xt=g["".concat(it.axisType,"Map")],yr=X["".concat(it.axisType,"Id")];xt&&xt[yr]||it.axisType==="zAxis"||qi();var st=xt[yr];return te(te({},Be),{},Re(Re({},it.axisType,st),"".concat(it.axisType,"Ticks"),po(st)))},oe),H=q[B],le=q["".concat(B,"Ticks")],ce=S&&S[J]&&S[J].hasStack&&OU(z,S[J].stackGroups),Z=mo(z.type).indexOf("Bar")>=0,_e=Gd(H,le),be=[],Q=C&&dU({barSize:O,stackGroups:S,totalSize:DQ(q,B)});if(Z){var he,ve,Ye=Ue(re)?M:re,We=(he=(ve=Gd(H,le,!0))!==null&&ve!==void 0?ve:Ye)!==null&&he!==void 0?he:0;be=hU({barGap:E,barCategoryGap:P,bandSize:We!==_e?We:_e,sizeList:Q[$],maxBarSize:Ye}),We!==_e&&(be=be.map(function(Be){return te(te({},Be),{},{position:te(te({},Be.position),{},{offset:Be.position.offset-We/2})})}))}var Te=z&&z.type&&z.type.getComposedData;Te&&R.push({props:te(te({},Te(te(te({},q),{},{displayedData:ne,props:x,dataKey:F,item:z,bandSize:_e,barPosition:be,offset:b,stackedData:ce,layout:A,dataStartIndex:_,dataEndIndex:N}))),{},Re(Re(Re({key:z.key||"item-".concat(G)},T,q[T]),B,q[B]),"animationId",k)),childIndex:f6(z,x.children),item:z})}),R},p=function(x,g){var y=x.props,S=x.dataStartIndex,b=x.dataEndIndex,k=x.updateId;if(!E1({props:y}))return null;var _=y.children,N=y.layout,O=y.stackOffset,A=y.data,E=y.reverseStackOrder,P=ck(N),M=P.numericAxisName,D=P.cateAxisName,T=Fn(_,n),B=NU(A,T,"".concat(M,"Id"),"".concat(D,"Id"),O,E),C=l.reduce(function(X,F){var re="".concat(F.axisType,"Map");return te(te({},X),{},Re({},re,AQ(y,te(te({},F),{},{graphicalItems:T,stackGroups:F.axisType===M&&B,dataStartIndex:S,dataEndIndex:b}))))},{}),R=$Q(te(te({},C),{},{props:y,graphicalItems:T}),g==null?void 0:g.legendBBox);Object.keys(C).forEach(function(X){C[X]=d(y,C[X],R,X.replace("Map",""),r)});var z=C["".concat(D,"Map")],G=EQ(z),ne=h(y,te(te({},C),{},{dataStartIndex:S,dataEndIndex:b,updateId:k,graphicalItems:T,stackGroups:B,offset:R}));return te(te({formattedGraphicalItems:ne,graphicalItems:T,offset:R,stackGroups:B},G),C)},m=function(w){function x(g){var y,S,b;return pQ(this,x),b=yQ(this,x,[g]),Re(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(b,"accessibilityManager",new eQ),Re(b,"handleLegendBBoxUpdate",function(k){if(k){var _=b.state,N=_.dataStartIndex,O=_.dataEndIndex,A=_.updateId;b.setState(te({legendBBox:k},p({props:b.props,dataStartIndex:N,dataEndIndex:O,updateId:A},te(te({},b.state),{},{legendBBox:k}))))}}),Re(b,"handleReceiveSyncEvent",function(k,_,N){if(b.props.syncId===k){if(N===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(_)}}),Re(b,"handleBrushChange",function(k){var _=k.startIndex,N=k.endIndex;if(_!==b.state.dataStartIndex||N!==b.state.dataEndIndex){var O=b.state.updateId;b.setState(function(){return te({dataStartIndex:_,dataEndIndex:N},p({props:b.props,dataStartIndex:_,dataEndIndex:N,updateId:O},b.state))}),b.triggerSyncEvent({dataStartIndex:_,dataEndIndex:N})}}),Re(b,"handleMouseEnter",function(k){var _=b.getMouseInfo(k);if(_){var N=te(te({},_),{},{isTooltipActive:!0});b.setState(N),b.triggerSyncEvent(N);var O=b.props.onMouseEnter;Ve(O)&&O(N,k)}}),Re(b,"triggeredAfterMouseMove",function(k){var _=b.getMouseInfo(k),N=_?te(te({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(N),b.triggerSyncEvent(N);var O=b.props.onMouseMove;Ve(O)&&O(N,k)}),Re(b,"handleItemMouseEnter",function(k){b.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Re(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Re(b,"handleMouseMove",function(k){k.persist(),b.throttleTriggeredAfterMouseMove(k)}),Re(b,"handleMouseLeave",function(k){b.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};b.setState(_),b.triggerSyncEvent(_);var N=b.props.onMouseLeave;Ve(N)&&N(_,k)}),Re(b,"handleOuterEvent",function(k){var _=u6(k),N=ya(b.props,"".concat(_));if(_&&Ve(N)){var O,A;/.*touch.*/i.test(_)?A=b.getMouseInfo(k.changedTouches[0]):A=b.getMouseInfo(k),N((O=A)!==null&&O!==void 0?O:{},k)}}),Re(b,"handleClick",function(k){var _=b.getMouseInfo(k);if(_){var N=te(te({},_),{},{isTooltipActive:!0});b.setState(N),b.triggerSyncEvent(N);var O=b.props.onClick;Ve(O)&&O(N,k)}}),Re(b,"handleMouseDown",function(k){var _=b.props.onMouseDown;if(Ve(_)){var N=b.getMouseInfo(k);_(N,k)}}),Re(b,"handleMouseUp",function(k){var _=b.props.onMouseUp;if(Ve(_)){var N=b.getMouseInfo(k);_(N,k)}}),Re(b,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Re(b,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.handleMouseDown(k.changedTouches[0])}),Re(b,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.handleMouseUp(k.changedTouches[0])}),Re(b,"handleDoubleClick",function(k){var _=b.props.onDoubleClick;if(Ve(_)){var N=b.getMouseInfo(k);_(N,k)}}),Re(b,"handleContextMenu",function(k){var _=b.props.onContextMenu;if(Ve(_)){var N=b.getMouseInfo(k);_(N,k)}}),Re(b,"triggerSyncEvent",function(k){b.props.syncId!==void 0&&_p.emit(Pp,b.props.syncId,k,b.eventEmitterSymbol)}),Re(b,"applySyncEvent",function(k){var _=b.props,N=_.layout,O=_.syncMethod,A=b.state.updateId,E=k.dataStartIndex,P=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)b.setState(te({dataStartIndex:E,dataEndIndex:P},p({props:b.props,dataStartIndex:E,dataEndIndex:P,updateId:A},b.state)));else if(k.activeTooltipIndex!==void 0){var M=k.chartX,D=k.chartY,T=k.activeTooltipIndex,B=b.state,C=B.offset,R=B.tooltipTicks;if(!C)return;if(typeof O=="function")T=O(R,k);else if(O==="value"){T=-1;for(var z=0;z<R.length;z++)if(R[z].value===k.activeLabel){T=z;break}}var G=te(te({},C),{},{x:C.left,y:C.top}),ne=Math.min(M,G.x+G.width),X=Math.min(D,G.y+G.height),F=R[T]&&R[T].value,re=ty(b.state,b.props.data,T),J=R[T]?{x:N==="horizontal"?R[T].coordinate:ne,y:N==="horizontal"?X:R[T].coordinate}:dN;b.setState(te(te({},k),{},{activeLabel:F,activeCoordinate:J,activePayload:re,activeTooltipIndex:T}))}else b.setState(k)}),Re(b,"renderCursor",function(k){var _,N=b.state,O=N.isTooltipActive,A=N.activeCoordinate,E=N.activePayload,P=N.offset,M=N.activeTooltipIndex,D=N.tooltipAxisBandSize,T=b.getTooltipEventType(),B=(_=k.props.active)!==null&&_!==void 0?_:O,C=b.props.layout,R=k.key||"_recharts-cursor";return L.createElement(sQ,{key:R,activeCoordinate:A,activePayload:E,activeTooltipIndex:M,chartName:r,element:k,isActive:B,layout:C,offset:P,tooltipAxisBandSize:D,tooltipEventType:T})}),Re(b,"renderPolarAxis",function(k,_,N){var O=ya(k,"type.axisType"),A=ya(b.state,"".concat(O,"Map")),E=k.type.defaultProps,P=E!==void 0?te(te({},E),k.props):k.props,M=A&&A[P["".concat(O,"Id")]];return j.cloneElement(k,te(te({},M),{},{className:ot(O,M.className),key:k.key||"".concat(_,"-").concat(N),ticks:po(M,!0)}))}),Re(b,"renderPolarGrid",function(k){var _=k.props,N=_.radialLines,O=_.polarAngles,A=_.polarRadius,E=b.state,P=E.radiusAxisMap,M=E.angleAxisMap,D=Uo(P),T=Uo(M),B=T.cx,C=T.cy,R=T.innerRadius,z=T.outerRadius;return j.cloneElement(k,{polarAngles:Array.isArray(O)?O:po(T,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(A)?A:po(D,!0).map(function(G){return G.coordinate}),cx:B,cy:C,innerRadius:R,outerRadius:z,key:k.key||"polar-grid",radialLines:N})}),Re(b,"renderLegend",function(){var k=b.state.formattedGraphicalItems,_=b.props,N=_.children,O=_.width,A=_.height,E=b.props.margin||{},P=O-(E.left||0)-(E.right||0),M=K4({children:N,formattedGraphicalItems:k,legendWidth:P,legendContent:u});if(!M)return null;var D=M.item,T=ok(M,lQ);return j.cloneElement(D,te(te({},T),{},{chartWidth:O,chartHeight:A,margin:E,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Re(b,"renderTooltip",function(){var k,_=b.props,N=_.children,O=_.accessibilityLayer,A=qn(N,Kr);if(!A)return null;var E=b.state,P=E.isTooltipActive,M=E.activeCoordinate,D=E.activePayload,T=E.activeLabel,B=E.offset,C=(k=A.props.active)!==null&&k!==void 0?k:P;return j.cloneElement(A,{viewBox:te(te({},B),{},{x:B.left,y:B.top}),active:C,label:T,payload:C?D:[],coordinate:M,accessibilityLayer:O})}),Re(b,"renderBrush",function(k){var _=b.props,N=_.margin,O=_.data,A=b.state,E=A.offset,P=A.dataStartIndex,M=A.dataEndIndex,D=A.updateId;return j.cloneElement(k,{key:k.key||"_recharts-brush",onChange:wf(b.handleBrushChange,k.props.onChange),data:O,x:de(k.props.x)?k.props.x:E.left,y:de(k.props.y)?k.props.y:E.top+E.height+E.brushBottom-(N.bottom||0),width:de(k.props.width)?k.props.width:E.width,startIndex:P,endIndex:M,updateId:"brush-".concat(D)})}),Re(b,"renderReferenceElement",function(k,_,N){if(!k)return null;var O=b,A=O.clipPathId,E=b.state,P=E.xAxisMap,M=E.yAxisMap,D=E.offset,T=k.type.defaultProps||{},B=k.props,C=B.xAxisId,R=C===void 0?T.xAxisId:C,z=B.yAxisId,G=z===void 0?T.yAxisId:z;return j.cloneElement(k,{key:k.key||"".concat(_,"-").concat(N),xAxis:P[R],yAxis:M[G],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:A})}),Re(b,"renderActivePoints",function(k){var _=k.item,N=k.activePoint,O=k.basePoint,A=k.childIndex,E=k.isRange,P=[],M=_.props.key,D=_.item.type.defaultProps!==void 0?te(te({},_.item.type.defaultProps),_.item.props):_.item.props,T=D.activeDot,B=D.dataKey,C=te(te({index:A,dataKey:B,cx:N.x,cy:N.y,r:4,fill:Vv(_.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},He(T,!1)),hd(T));return P.push(x.renderActiveDot(T,C,"".concat(M,"-activePoint-").concat(A))),O?P.push(x.renderActiveDot(T,te(te({},C),{},{cx:O.x,cy:O.y}),"".concat(M,"-basePoint-").concat(A))):E&&P.push(null),P}),Re(b,"renderGraphicChild",function(k,_,N){var O=b.filterFormatItem(k,_,N);if(!O)return null;var A=b.getTooltipEventType(),E=b.state,P=E.isTooltipActive,M=E.tooltipAxis,D=E.activeTooltipIndex,T=E.activeLabel,B=b.props.children,C=qn(B,Kr),R=O.props,z=R.points,G=R.isRange,ne=R.baseLine,X=O.item.type.defaultProps!==void 0?te(te({},O.item.type.defaultProps),O.item.props):O.item.props,F=X.activeDot,re=X.hide,J=X.activeBar,$=X.activeShape,oe=!!(!re&&P&&C&&(F||J||$)),q={};A!=="axis"&&C&&C.props.trigger==="click"?q={onClick:wf(b.handleItemMouseEnter,k.props.onClick)}:A!=="axis"&&(q={onMouseLeave:wf(b.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:wf(b.handleItemMouseEnter,k.props.onMouseEnter)});var H=j.cloneElement(k,te(te({},O.props),q));function le(it){return typeof M.dataKey=="function"?M.dataKey(it.payload):null}if(oe)if(D>=0){var ce,Z;if(M.dataKey&&!M.allowDuplicatedCategory){var _e=typeof M.dataKey=="function"?le:"payload.".concat(M.dataKey.toString());ce=dd(z,_e,T),Z=G&&ne&&dd(ne,_e,T)}else ce=z==null?void 0:z[D],Z=G&&ne&&ne[D];if($||J){var be=k.props.activeIndex!==void 0?k.props.activeIndex:D;return[j.cloneElement(k,te(te(te({},O.props),q),{},{activeIndex:be})),null,null]}if(!Ue(ce))return[H].concat(xl(b.renderActivePoints({item:O,activePoint:ce,basePoint:Z,childIndex:D,isRange:G})))}else{var Q,he=(Q=b.getItemByXY(b.state.activeCoordinate))!==null&&Q!==void 0?Q:{graphicalItem:H},ve=he.graphicalItem,Ye=ve.item,We=Ye===void 0?k:Ye,Te=ve.childIndex,Be=te(te(te({},O.props),q),{},{activeIndex:Te});return[j.cloneElement(We,Be),null,null]}return G?[H,null,null]:[H,null]}),Re(b,"renderCustomized",function(k,_,N){return j.cloneElement(k,te(te({key:"recharts-customized-".concat(N)},b.props),b.state))}),Re(b,"renderMap",{CartesianGrid:{handler:_f,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:_f},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:_f},YAxis:{handler:_f},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((y=g.id)!==null&&y!==void 0?y:rs("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=Yj(b.triggeredAfterMouseMove,(S=g.throttleDelay)!==null&&S!==void 0?S:1e3/60),b.state={},b}return bQ(x,w),mQ(x,[{key:"componentDidMount",value:function(){var y,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,S=y.children,b=y.data,k=y.height,_=y.layout,N=qn(S,Kr);if(N){var O=N.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,E=ty(this.state,b,O,A),P=this.state.tooltipTicks[O].coordinate,M=(this.state.offset.top+k)/2,D=_==="horizontal",T=D?{x:P,y:M}:{y:P,x:M},B=this.state.formattedGraphicalItems.find(function(R){var z=R.item;return z.type.name==="Scatter"});B&&(T=te(te({},T),B.props.points[O].tooltipPosition),E=B.props.points[O].tooltipPayload);var C={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:A,activePayload:E,activeCoordinate:T};this.setState(C),this.renderCursor(N),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var b,k;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(y){Mg([qn(y.children,Kr)],[qn(this.props.children,Kr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=qn(this.props.children,Kr);if(y&&typeof y.props.shared=="boolean"){var S=y.props.shared?"axis":"item";return s.indexOf(S)>=0?S:o}return o}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var S=this.container,b=S.getBoundingClientRect(),k=IL(b),_={chartX:Math.round(y.pageX-k.left),chartY:Math.round(y.pageY-k.top)},N=b.width/S.offsetWidth||1,O=this.inRange(_.chartX,_.chartY,N);if(!O)return null;var A=this.state,E=A.xAxisMap,P=A.yAxisMap,M=this.getTooltipEventType(),D=sk(this.state,this.props.data,this.props.layout,O);if(M!=="axis"&&E&&P){var T=Uo(E).scale,B=Uo(P).scale,C=T&&T.invert?T.invert(_.chartX):null,R=B&&B.invert?B.invert(_.chartY):null;return te(te({},_),{},{xValue:C,yValue:R},D)}return D?te(te({},_),D):null}},{key:"inRange",value:function(y,S){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,_=y/b,N=S/b;if(k==="horizontal"||k==="vertical"){var O=this.state.offset,A=_>=O.left&&_<=O.left+O.width&&N>=O.top&&N<=O.top+O.height;return A?{x:_,y:N}:null}var E=this.state,P=E.angleAxisMap,M=E.radiusAxisMap;if(P&&M){var D=Uo(P);return z2({x:_,y:N},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,S=this.getTooltipEventType(),b=qn(y,Kr),k={};b&&S==="axis"&&(b.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=hd(this.props,this.handleOuterEvent);return te(te({},_),k)}},{key:"addListener",value:function(){_p.on(Pp,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){_p.removeListener(Pp,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,S,b){for(var k=this.state.formattedGraphicalItems,_=0,N=k.length;_<N;_++){var O=k[_];if(O.item===y||O.props.key===y.key||S===mo(O.item.type)&&b===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,S=this.state.offset,b=S.left,k=S.top,_=S.height,N=S.width;return L.createElement("defs",null,L.createElement("clipPath",{id:y},L.createElement("rect",{x:b,y:k,height:_,width:N})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(S,b){var k=ak(b,2),_=k[0],N=k[1];return te(te({},S),{},Re({},_,N.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(S,b){var k=ak(b,2),_=k[0],N=k[1];return te(te({},S),{},Re({},_,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[y])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(y){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[y])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(y){var S=this.state,b=S.formattedGraphicalItems,k=S.activeItem;if(b&&b.length)for(var _=0,N=b.length;_<N;_++){var O=b[_],A=O.props,E=O.item,P=E.type.defaultProps!==void 0?te(te({},E.type.defaultProps),E.props):E.props,M=mo(E.type);if(M==="Bar"){var D=(A.data||[]).find(function(R){return SH(y,R)});if(D)return{graphicalItem:O,payload:D}}else if(M==="RadialBar"){var T=(A.data||[]).find(function(R){return z2(y,R)});if(T)return{graphicalItem:O,payload:T}}else if(dh(O,k)||hh(O,k)||bu(O,k)){var B=NV({graphicalItem:O,activeTooltipItem:k,itemData:P.data}),C=P.activeIndex===void 0?B:P.activeIndex;return{graphicalItem:te(te({},O),{},{childIndex:C}),payload:bu(O,k)?P.data[B]:O.props.data[B]}}}return null}},{key:"render",value:function(){var y=this;if(!E1(this))return null;var S=this.props,b=S.children,k=S.className,_=S.width,N=S.height,O=S.style,A=S.compact,E=S.title,P=S.desc,M=ok(S,cQ),D=He(M,!1);if(A)return L.createElement(Rw,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement(Eg,Ms({},D,{width:_,height:N,title:E,desc:P}),this.renderClipPath(),$1(b,this.renderMap)));if(this.props.accessibilityLayer){var T,B;D.tabIndex=(T=this.props.tabIndex)!==null&&T!==void 0?T:0,D.role=(B=this.props.role)!==null&&B!==void 0?B:"application",D.onKeyDown=function(R){y.accessibilityManager.keyboardEvent(R)},D.onFocus=function(){y.accessibilityManager.focus()}}var C=this.parseEventsOfWrapper();return L.createElement(Rw,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",Ms({className:ot("recharts-wrapper",k),style:te({position:"relative",cursor:"default",width:_,height:N},O)},C,{ref:function(z){y.container=z}}),L.createElement(Eg,Ms({},D,{width:_,height:N,title:E,desc:P,style:_Q}),this.renderClipPath(),$1(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Re(m,"displayName",r),Re(m,"defaultProps",te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Re(m,"getDerivedStateFromProps",function(w,x){var g=w.dataKey,y=w.data,S=w.children,b=w.width,k=w.height,_=w.layout,N=w.stackOffset,O=w.margin,A=x.dataStartIndex,E=x.dataEndIndex;if(x.updateId===void 0){var P=lk(w);return te(te(te({},P),{},{updateId:0},p(te(te({props:w},P),{},{updateId:0}),x)),{},{prevDataKey:g,prevData:y,prevWidth:b,prevHeight:k,prevLayout:_,prevStackOffset:N,prevMargin:O,prevChildren:S})}if(g!==x.prevDataKey||y!==x.prevData||b!==x.prevWidth||k!==x.prevHeight||_!==x.prevLayout||N!==x.prevStackOffset||!Is(O,x.prevMargin)){var M=lk(w),D={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},T=te(te({},sk(x,y,_)),{},{updateId:x.updateId+1}),B=te(te(te({},M),D),T);return te(te(te({},B),p(te({props:w},B),x)),{},{prevDataKey:g,prevData:y,prevWidth:b,prevHeight:k,prevLayout:_,prevStackOffset:N,prevMargin:O,prevChildren:S})}if(!Mg(S,x.prevChildren)){var C,R,z,G,ne=qn(S,il),X=ne&&(C=(R=ne.props)===null||R===void 0?void 0:R.startIndex)!==null&&C!==void 0?C:A,F=ne&&(z=(G=ne.props)===null||G===void 0?void 0:G.endIndex)!==null&&z!==void 0?z:E,re=X!==A||F!==E,J=!Ue(y),$=J&&!re?x.updateId:x.updateId+1;return te(te({updateId:$},p(te(te({props:w},x),{},{updateId:$,dataStartIndex:X,dataEndIndex:F}),x)),{},{prevChildren:S,dataStartIndex:X,dataEndIndex:F})}return null}),Re(m,"renderActiveDot",function(w,x,g){var y;return j.isValidElement(w)?y=j.cloneElement(w,x):Ve(w)?y=w(x):y=L.createElement(fh,x),L.createElement(vt,{className:"recharts-active-dot",key:g},y)});var v=j.forwardRef(function(x,g){return L.createElement(m,Ms({},x,{ref:g}))});return v.displayName=m.displayName,v},Fs=ax({chartName:"LineChart",GraphicalChild:Mr,axisComponents:[{axisType:"xAxis",AxisComp:zn},{axisType:"yAxis",AxisComp:Gn}],formatAxisMap:Yv}),RQ=ax({chartName:"ScatterChart",GraphicalChild:Nn,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:zn},{axisType:"yAxis",AxisComp:Gn},{axisType:"zAxis",AxisComp:yh}],formatAxisMap:Yv}),pN=ax({chartName:"AreaChart",GraphicalChild:ga,axisComponents:[{axisType:"xAxis",AxisComp:zn},{axisType:"yAxis",AxisComp:Gn}],formatAxisMap:Yv});const IQ="modulepreload",LQ=function(e){return"/"+e},uk={},BQ=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=LQ(l),l in uk)return;uk[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":IQ,u||(f.as="script"),f.crossOrigin="",f.href=l,s&&f.setAttribute("nonce",s),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return a.then(i=>{for(const s of i||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})};function gN(e){const[[t,r,n],[a,o,i],[s,l,u]]=e,d=t*(o*u-i*l)-r*(a*u-i*s)+n*(a*l-o*s);if(Math.abs(d)<1e-10)return null;const f=1/d;return[[(o*u-i*l)*f,(n*l-r*u)*f,(r*i-n*o)*f],[(i*s-a*u)*f,(t*u-n*s)*f,(n*a-t*i)*f],[(a*l-o*s)*f,(r*s-t*l)*f,(t*o-r*a)*f]]}function fk(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let o=0;o<3;o++)r[n][a]+=e[n][o]*t[o][a];return r}class Qi{constructor(t){jn(this,"size");jn(this,"isPowerOfTwo");jn(this,"_real");jn(this,"_imag");jn(this,"_scratch",null);jn(this,"_rev",null);jn(this,"_m",0);jn(this,"_internalFFT",null);jn(this,"_chirpReal",null);jn(this,"_chirpImag",null);jn(this,"_bReal",null);jn(this,"_bImag",null);jn(this,"_hanning",null);jn(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,o=n;for(let i=0;i<r;i++)a=a<<1|o&1,o>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new Qi(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const o=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(o),this._chirpImag[a]=Math.sin(o)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,o=this._real,i=this._imag;if(t===o)for(let s=0;s<n;s++){const l=a[s];if(s<l){const u=o[s],d=i[s];o[s]=o[l],i[s]=i[l],o[l]=u,i[l]=d}}else for(let s=0;s<n;s++){const l=a[s];o[s]=t[l],i[s]=r?r[l]:0}for(let s=2;s<=n;s*=2){const l=s/2,u=-2*Math.PI/s,d=Math.cos(u),f=Math.sin(u);for(let h=0;h<n;h+=s){let p=1,m=0;for(let v=0;v<l;v++){const w=h+v,x=h+v+l,g=p*o[x]-m*i[x],y=p*i[x]+m*o[x],S=o[w],b=i[w];o[w]=S+g,i[w]=b+y,o[x]=S-g,i[x]=b-y;const k=p*d-m*f,_=p*f+m*d;p=k,m=_}}}}transformBluestein(t,r){const n=this.size,a=this._m,o=this._internalFFT,i=o._real,s=o._imag;i.fill(0),s.fill(0);for(let f=0;f<n;f++){const h=t[f],p=r?r[f]:0,m=this._chirpReal[f],v=this._chirpImag[f];i[f]=h*m-p*v,s[f]=h*v+p*m}o.transformRadix2(i,s);for(let f=0;f<a;f++){const h=o._real[f],p=o._imag[f],m=this._bReal[f],v=this._bImag[f];o._real[f]=h*m-p*v,o._imag[f]=h*v+p*m}const l=o._real,u=o._imag;for(let f=0;f<a;f++)u[f]=-u[f];o.transformRadix2(l,u);const d=1/a;for(let f=0;f<n;f++){const h=o._real[f]*d,p=-o._imag[f]*d,m=this._chirpReal[f],v=this._chirpImag[f];this._real[f]=h*m-p*v,this._imag[f]=h*v+p*m}}calculateSpectrum(t,r,n=!1){const a=this.size;let o=0;for(let d=0;d<a;d++)o+=t[d];const i=o/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const d=this._hanning;for(let f=0;f<a;f++)s[f]=(t[f]-i)*d[f]}else for(let d=0;d<a;d++)s[d]=t[d]-i;this.transform(s);const l=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let d=0;d<l;d++){const f=this._real[d],h=this._imag[d];r[d]+=(f*f+h*h)*u}}}function FQ(e,t,r,n=!1){const a=new Qi(t),o=new Qi(r),i=t*r,s=new Float32Array(i),l=new Float32Array(i);let u=null,d=null;if(n){u=new Float32Array(t);for(let v=0;v<t;v++)u[v]=.5*(1-Math.cos(2*Math.PI*v/(t-1)));d=new Float32Array(r);for(let v=0;v<r;v++)d[v]=.5*(1-Math.cos(2*Math.PI*v/(r-1)))}for(let v=0;v<r;v++){const w=v*t,x=a._real;let g=0;for(let S=0;S<t;S++)g+=e[w+S];const y=g/t;if(u)for(let S=0;S<t;S++)x[S]=(e[w+S]-y)*u[S];else for(let S=0;S<t;S++)x[S]=e[w+S]-y;a.transform(x);for(let S=0;S<t;S++)s[w+S]=a._real[S],l[w+S]=a._imag[S]}for(let v=0;v<t;v++){const w=o._real,x=o._imag;for(let g=0;g<r;g++){const y=g*t+v;let S=s[y],b=l[y];d&&(S*=d[g],b*=d[g]),w[g]=S,x[g]=b}o.transform(w,x);for(let g=0;g<r;g++){const y=g*t+v;s[y]=o._real[g],l[y]=o._imag[g]}}const f=new Float32Array(i);let h=1,p=t,m=r;if(n&&u&&d){p=0;for(let v=0;v<t;v++)p+=u[v]*u[v];m=0;for(let v=0;v<r;v++)m+=d[v]*d[v]}h=1/(p*m);for(let v=0;v<i;v++)f[v]=(s[v]*s[v]+l[v]*l[v])*h;return f}function zQ(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),o=Math.floor(r/2);for(let i=0;i<r;i++)for(let s=0;s<t;s++){const l=(s+a)%t,u=(i+o)%r,d=i*t+s,f=u*t+l;n[f]=e[d]}return n}function uc(e,t,r,n=[0,0,0,0],a=65535,o="RGGB"){const s=e*t*2,l=8,u=l+s,d="Fake",f="StretchedNoiseCam",h="StretchedNoiseCam",p=M=>{const D=new Uint8Array(M.length+1);for(let T=0;T<M.length;T++)D[T]=M.charCodeAt(T);return D[M.length]=0,D},m=p(d),v=p(f),w=p(h),x=M=>{const D=[0,0,0,0],T={R:0,G:1,B:2},B=M.toUpperCase();for(let C=0;C<4;C++)D[C]=T[B[C]]??1;return D},g=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:m.length,value:m},{id:272,type:2,count:v.length,value:v},{id:273,type:4,count:1,value:l},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:s},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:x(o)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(M=>Math.round(M))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:w.length,value:w}],y=2+g.length*12+4;let S=0;const b=g.map(M=>{let D=1;M.type===3&&(D=2),M.type===4&&(D=4);const T=M.count*D,B=T<=4;let C=0;return B||(C=S,S+=T,S%2!==0&&S++),{...M,fits:B,totalBytes:T,extraOffset:C}}),k=u+y,_=k+S,N=new ArrayBuffer(_),O=new DataView(N),A=new Uint8Array(N);O.setUint16(0,18761,!0),O.setUint16(2,42,!0),O.setUint32(4,u,!0);const E=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);A.set(E,l);let P=u;return O.setUint16(P,g.length,!0),P+=2,b.forEach(M=>{if(O.setUint16(P,M.id,!0),O.setUint16(P+2,M.type,!0),O.setUint32(P+4,M.count,!0),M.fits){const D=P+8;Array.isArray(M.value)?M.value.forEach((T,B)=>{M.type===1&&O.setUint8(D+B,T),M.type===3&&O.setUint16(D+B*2,T,!0)}):(M.type===3&&O.setUint16(D,M.value,!0),M.type===4&&O.setUint32(D,M.value,!0))}else{const D=k+M.extraOffset;O.setUint32(P+8,D,!0),M.value instanceof Uint8Array?A.set(M.value,D):Array.isArray(M.value)&&M.value.forEach((T,B)=>{M.type===1&&O.setUint8(D+B,T),M.type===3&&O.setUint16(D+B*2,T,!0)})}P+=12}),O.setUint32(P,0,!0),N}let Cp=null;async function zu(){if(!Cp)try{const n=(await BQ(()=>import("./joraw-B7UQw8BN.js"),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-BUh50ws_.wasm",import.meta.url).href;Cp=n({locateFile:(o,i)=>o.endsWith("joraw.wasm")?a:i+o})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await Cp,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const GQ=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],Pc=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function Pf(e,t=0,r=0){const n=await zu(),a=new n;try{await a.open(new Uint8Array(e));const o=a.getRawImage(),i=new Uint16Array(o.data),s=o.width,l=o.height,u=Math.floor((s-t)/6)*2,d=Math.floor((l-r)/6)*2;if(u<=0||d<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const f=new Uint16Array(u*d);for(let p=0;p<d/2;p++){const m=p*6+r;if(m+3>=l)break;const v=m*s,w=(m+3)*s,x=p*2,g=x*u,y=(x+1)*u;for(let S=0;S<u/2;S++){const b=S*6+t;if(b+1>=s)break;const k=S*2;f[g+k]=i[v+b+1],f[g+k+1]=i[v+b+0],f[y+k]=i[w+b+0],f[y+k+1]=i[w+b+1]}}return{dngBuffer:uc(u,d,f),width:u,height:d}}finally{a.delete?a.delete():a.close()}}async function UQ(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const o=a.getContext("2d");if(!o)throw new Error("Failed to create canvas context");o.drawImage(t,0,0);const s=o.getImageData(0,0,r,n).data,l=r*n,u=new Uint16Array(l);for(let f=0;f<n;f++)for(let h=0;h<r;h++){const p=(f*r+h)*4,m=f*r+h,v=f%2===0,w=h%2===0;let x=0;v&&w?x=s[p]:!v&&!w?x=s[p+2]:x=s[p+1],u[m]=x*64}return{previewBlob:await new Promise(f=>a.toBlob(f,"image/png"))||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:{description:"Standard image (non-RAW)"},isThreePlane:!0}}}const WQ=async e=>{const t=await zu(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,o)=>{const i=document.createElement("canvas");i.width=n.width,i.height=n.height;const s=i.getContext("2d");if(!s){o(new Error("Could not create canvas context"));return}const l=s.createImageData(n.width,n.height),u=n.data,d=n.width*n.height;for(let f=0;f<d;f++){const h=f*3,p=f*4;l.data[p]=u[h],l.data[p+1]=u[h+1],l.data[p+2]=u[h+2],l.data[p+3]=255}s.putImageData(l,0,0),i.toBlob(f=>{f?a(f):o(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},g0=async e=>{var n,a,o,i,s,l,u,d,f;const t=await zu(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const h=r.getRawImage();let p=new Uint16Array(h.data);const m=await r.metadata(!0),v=((n=m.idata)==null?void 0:n.filters)||0,w=((a=m.idata)==null?void 0:a.colors)||0,x=v===0&&w===3,g=v===9;let y=[];if((o=m.color_data)!=null&&o.cblack_rawpy_style)y=m.color_data.cblack_rawpy_style;else if((s=(i=m.color_data)==null?void 0:i.dng_levels)!=null&&s.dng_cblack)y=m.color_data.dng_levels.dng_cblack;else if(((l=m.black_level_per_channel)==null?void 0:l.length)>=4)y=m.black_level_per_channel;else if(((u=m.cblack)==null?void 0:u.length)>=4)y=m.cblack;else if(((f=(d=m.color)==null?void 0:d.cblack)==null?void 0:f.length)>=4)y=m.color.cblack;else{const b=m.black_level||m.color_data&&m.color_data.black||0;y=[b,b,b,b]}const S=[Number(y[0])||0,Number(y[1])||0,Number(y[2])||0,Number(y[3])||0];return{data:p,width:h.width,height:h.height,bayerPattern:m.color_desc||"RGGB",blackLevels:S,whiteLevel:m.white_level||16383,metadata:m,isThreePlane:x,isXTrans:g}}finally{r.delete?r.delete():r.close()}};async function wi(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([WQ(t),g0(r)]);return{previewBlob:n,analysisData:a}}async function m0(e){const t=new Uint8Array(e);return g0(t)}const dk=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function Mp(e,t,r,n=!0){const a=await g0(new Uint8Array(e)),o=await g0(new Uint8Array(t));if(a.width!==o.width||a.height!==o.height)throw new Error("Dimension Mismatch");const i=a.width,s=a.height,l=r?dk(i):i,u=r?dk(s):s,d=l*u,f=new Uint16Array(d),h=6e4,p=1.41421356;for(let m=0;m<s;m++){const v=m*i,w=m*l;for(let x=0;x<i;x++){const g=a.data[v+x],y=o.data[v+x];let S=g-y;n&&(S/=p);let b=S+h;b=Math.max(0,Math.min(65535,b)),f[w+x]=Math.round(b)}}return{rawData:f,width:l,height:u,metadata:a.metadata}}function ki(e,t,r,n,a,o,i){const s=Math.max(0,Math.floor(n)),l=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+o)),d=Math.min(r,Math.ceil(a+i)),f=[0,0,0,0],h=[0,0,0,0],p=[0,0,0,0];for(let w=l;w<d;w++){const x=w*t,g=w%2;for(let y=s;y<u;y++){const S=y%2,b=e[x+y],k=g*2+S;f[k]+=b,h[k]+=b*b,p[k]++}}const m=[0,0,0,0],v=[0,0,0,0];for(let w=0;w<4;w++)if(p[w]>0){const x=f[w]/p[w];m[w]=x;const y=h[w]/p[w]-x*x;v[w]=Math.sqrt(Math.max(0,y))}return{x:s,y:l,width:u-s,height:d-l,means:m,stdDevs:v,pixelCount:p.reduce((w,x)=>w+x,0)}}function hk(e,t,r,n,a,o,i=0,s=0){const l=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),d=Math.min(t,Math.ceil(n.x+n.w)),f=Math.min(r,Math.ceil(n.y+n.h)),h=a>>1,p=a&1,m=(o>>1)+i,v=(o&1)+s;let w=0,x=0,g=0;for(let N=u;N<f-2;N+=2)for(let O=l;O<d-2;O+=2){const A=(N+h)*t+(O+p),E=(N+m)*t+(O+v);N+m>=r||O+v>=t||(w+=e[A],x+=e[E],g++)}if(g<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const y=w/g,S=x/g;let b=0,k=0,_=0;for(let N=u;N<f-2;N+=2)for(let O=l;O<d-2;O+=2){const A=(N+h)*t+(O+p),E=(N+m)*t+(O+v);if(N+m>=r||O+v>=t)continue;const P=e[A],M=e[E],D=P-y,T=M-S;b+=D*T,k+=D*D,_+=T*T}return{sumCov:b,sumVar1:k,sumVar2:_,n:g}}function XQ(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function HQ(e,t,r,n,a,o,i,s,l,u,d){if(u<=l)return[];const f=Math.max(0,Math.floor(n)),h=Math.max(0,Math.floor(a)),p=Math.min(t,Math.ceil(n+o)),m=Math.min(r,Math.ceil(a+i)),v=u-l,w=d?Math.floor(v)+1:s,x=v/w,g=[new Uint32Array(w),new Uint32Array(w),new Uint32Array(w),new Uint32Array(w)];for(let S=h;S<m;S++){const b=S*t,k=S%2;for(let _=f;_<p;_++){const N=_%2,O=e[b+_];if(O<l||O>u)continue;const A=k*2+N;let E;d?E=Math.floor(O-l):E=Math.floor((O-l)/x),E<0&&(E=0),E>=w&&(E=w-1),g[A][E]++}}const y=[];for(let S=0;S<w;S++){const b=l+(d?S:S*x);y.push({binStart:b,c0:g[0][S],c1:g[1][S],c2:g[2][S],c3:g[3][S]})}return y}function VQ(e,t,r,n,a,o=!1,i=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},l=!0,u=1){const d=Math.max(0,Math.floor(n.x)),f=Math.max(0,Math.floor(n.y)),h=Math.min(t,Math.ceil(n.x+n.w)),p=Math.min(r,Math.ceil(n.y+n.h)),m=h-d,v=p-f;if(m<=1||v<=1)return null;let w=0;for(let E=d;E<h;E++)E%2===(a&1)&&w++;let x=0;for(let E=f;E<p;E++)E%2===a>>1&&x++;if(w<4||x<4)return null;const g=Math.max(1,u),y=Math.floor(2*w/(g+1)),S=Math.floor(2*x/(g+1));if(y<4||S<4)return null;const b=new Qi(y),k=new Qi(S),_=new Float32Array(Math.floor(y/2)+1),N=new Float32Array(Math.floor(S/2)+1);let O=0,A=0;for(let E=f;E<p;E++){const P=E%2;if(a>>1!==P||s.rows&&(E>>1&1)!==s.rowGroup)continue;const M=E*t,D=new Float32Array(w);let T=0;for(let B=d;B<h;B++)B%2===(a&1)&&T<w&&(D[T++]=e[M+B]);for(let B=0;B<g;B++){const C=Math.floor(B*y/2);if(C+y>w)break;const R=D.slice(C,C+y);b.calculateSpectrum(R,_,i),O++}if(!l)break}for(let E=d;E<h;E++){const P=E%2;if((a&1)!==P||s.cols&&(E>>1&1)!==s.rowGroup)continue;const M=new Float32Array(x);let D=0;for(let T=f;T<p;T++)T%2===a>>1&&D<x&&(M[D++]=e[T*t+E]);for(let T=0;T<g;T++){const B=Math.floor(T*S/2);if(B+S>x)break;const C=M.slice(B,B+S);k.calculateSpectrum(C,N,i),A++}if(!l)break}if(O>0)for(let E=0;E<_.length;E++)_[E]/=O;if(A>0)for(let E=0;E<N.length;E++)N[E]/=A;return{avgHoriz:Array.from(_),avgVert:Array.from(N),sampleCount:{h:O,v:A}}}function KQ(e,t,r,n,a,o=!1){const i=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),l=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let d=-1;for(let g=s;g<u;g++)if(g%2===a>>1){d=g;break}if(d===-1)return null;let f=-1;for(let g=i;g<l;g++)if(g%2===(a&1)){f=g;break}if(f===-1)return null;const h=[];for(let g=d;g<u;g+=2){const y=g*t,S=[];for(let b=f;b<l;b+=2)S.push(e[y+b]);h.push(S)}const p=h.length;if(p===0)return null;const m=h[0].length;if(m===0)return null;const v=new Float32Array(m*p);for(let g=0;g<p;g++){const y=h[g];for(let S=0;S<m;S++)v[g*m+S]=y[S]}const w=FQ(v,m,p,o),x=zQ(w,m,p);return{width:m,height:p,data:x}}function YQ(e,t,r,n,a,o,i){const{x:s,y:l,w:u,h:d}=n,f=[],h=Math.max(0,Math.floor(s)),p=Math.max(0,Math.floor(l)),m=Math.min(t,Math.ceil(s+u)),v=Math.min(r,Math.ceil(l+d)),w=a>>1,x=a&1;for(let k=p;k<v;k++){if(k%2!==w)continue;const _=k*t;for(let N=h;N<m;N++){if(N%2!==x)continue;const O=e[_+N];O>=o&&O<=i&&f.push(O-o)}}if(f.length===0)return null;f.sort((k,_)=>k-_);const g=[f[0]];for(let k=1;k<f.length;k++)f[k]!==f[k-1]&&g.push(f[k]);const y=[],S=[],b={};for(let k=0;k<g.length-1;k++){const _=g[k],O=g[k+1]-_;y.push(O),S.push({x:_,y:O}),b[O]=(b[O]||0)+1}return{uniqueCount:g.length,diffCount:y.length,stepCounts:b,plotData:S}}function mN(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:o}=r.advancedZeroDep,{data:i,width:s,whiteLevel:l}=e,u=a.map((y,S)=>Math.max(0,y-n[S])),d=o.map((y,S)=>Math.max(0,y-n[S])),f=(u[1]+u[3])/2,h=(d[1]+d[3])/2,p=Math.floor(t.x),m=Math.floor(t.y),v=Math.floor(t.w),w=Math.floor(t.h),x=Math.pow(2,r.exposure),g=new Uint16Array(v*w);for(let y=0;y<w;y++){const S=m+y;if(S<0||S>=e.height)continue;const b=S%2,k=S*s,_=y*v;for(let N=0;N<v;N++){const O=p+N;if(O<0||O>=s)continue;const A=O%2;let E=0;!b&&!A?E=0:!b&&A?E=1:b&&!A?E=3:E=2;const P=i[k+O],M=n[E],D=u[E],T=d[E],B=Math.max(P-M,0),C=T-D||1e-9,R=(B-D)/C;let z;R<0?z=B*(f/Math.max(D,1e-9)):R>1?z=B*(h/Math.max(T,1e-9)):z=(1-R)*f+R*h,z*=x,g[_+N]=Math.max(0,Math.min(65535,Math.round(z)))}}return{data:g,width:v,height:w}}async function pk(e,t){const r=await zu(),n=new r;try{const a=new Uint8Array(e.slice(0));let o=!1,i=[];if(t.customMatrix&&t.customMatrix.length===9){const h=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],p=gN(h);if(p){const m=t.wbGains?t.wbGains[0]:1,v=t.wbGains?t.wbGains[1]:1,x=fk(p,[[m,0,0],[0,1,0],[0,0,v]]),g=fk(GQ,x);i=[g[0][0],g[0][1],g[0][2],g[1][0],g[1][1],g[1][2],g[2][0],g[2][1],g[2][2]],o=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:o?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(h=>{const p=Math.round(h);return p===0?1:p})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,o?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const l=await n.imageData(),u=new ImageData(l.width,l.height),d=u.data,f=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2);if(o&&i.length===9){const h=i,m=Math.pow(2,t.exposure)*.25;for(let v=0;v<f.length;v+=3){const w=f[v]/65535,x=f[v+1]/65535,g=f[v+2]/65535;let y=h[0]*w+h[1]*x+h[2]*g,S=h[3]*w+h[4]*x+h[5]*g,b=h[6]*w+h[7]*x+h[8]*g;y*=m,S*=m,b*=m,y=Math.max(0,Math.min(1,y)),S=Math.max(0,Math.min(1,S)),b=Math.max(0,Math.min(1,b)),y=Pc(y),S=Pc(S),b=Pc(b);const k=v/3*4;d[k]=Math.round(y*255),d[k+1]=Math.round(S*255),d[k+2]=Math.round(b*255),d[k+3]=255}}else for(let h=0;h<f.length;h+=3){const p=h/3*4;d[p]=f[h]>>8,d[p+1]=f[h+1]>>8,d[p+2]=f[h+2]>>8,d[p+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function qQ(e,t,r=!1,n=!1){const a=await zu(),o=new a;try{if(t.renderMode==="zero-dependency"||t.renderMode==="advanced-zero-dep"){await o.open(new Uint8Array(e));const i=await o.metadata(!0),s=(i==null?void 0:i.white_level)||16383,l=o.getRawImage(),{width:u,height:d,data:f}=l,h=new Uint16Array(u*d),p=Math.pow(2,t.exposure);if(t.renderMode==="advanced-zero-dep"&&t.advancedZeroDep){const{bl:m,bg:v,fg:w}=t.advancedZeroDep,x=v.map((b,k)=>Math.max(0,b-m[k])),g=w.map((b,k)=>Math.max(0,b-m[k])),y=(x[1]+x[3])/2,S=(g[1]+g[3])/2;for(let b=0;b<d;b++){const k=b%2;for(let _=0;_<u;_++){const N=_%2;let O=0;!k&&!N?O=0:!k&&N?O=1:k&&!N?O=3:O=2;const A=f[b*u+_],E=m[O],P=x[O],M=g[O],D=Math.max(A-E,0),T=M-P||1e-9,B=(D-P)/T;let C;B<0?C=D*(y/Math.max(P,1e-9)):B>1?C=D*(S/Math.max(M,1e-9)):C=(1-B)*y+B*S,C*=p;let R;if(n){const z=Math.max(0,Math.min(1,C/65535));R=Pc(z)*65535}else R=C;h[b*u+_]=Math.round(Math.max(0,Math.min(65535,R)))}}}else{const m=t.blackLevel||[0,0,0,0],v=t.wbGains?t.wbGains[0]:1,w=t.wbGains?t.wbGains[1]:1;for(let x=0;x<d;x++){const g=x%2;for(let y=0;y<u;y++){const S=y%2,b=g*2+S,k=f[x*u+y],_=m[b];let N=k-_;b===0?N*=v:b===3&&(N*=w),N*=p;const O=Math.max(0,Math.min(1,N/(r?s-_:s))),A=n?Pc(O):O;h[x*u+y]=Math.round(A*65535)}}}return{data:h,width:u,height:d,channels:1}}else{const i=new Uint8Array(e.slice(0)),s={outputBps:16,noAutoBright:!r,bright:1,outputColor:n?1:0,useCameraWb:!0};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(f=>Math.max(1,Math.round(f)))),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,await o.open(i,s);const l=await o.imageData(),u=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2),d=Math.pow(2,t.exposure);if(d!==1)for(let f=0;f<u.length;f++)u[f]=Math.max(0,Math.min(65535,Math.round(u[f]*d)));return{data:u,width:l.width,height:l.height,channels:3}}}finally{o.delete?o.delete():o.close()}}const io=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},ZQ=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:o,zIndex:i,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:d,stackFiles:f})=>{const[h,p]=j.useState(()=>(u==null?void 0:u.channelMode)??io("hist_mode","All")),[m,v]=j.useState(()=>(u==null?void 0:u.minVal)??io("hist_min",0)),[w,x]=j.useState(()=>(u==null?void 0:u.maxVal)??io("hist_max",16383)),[g,y]=j.useState(()=>(u==null?void 0:u.binCount)??io("hist_bins",100)),[S,b]=j.useState(()=>(u==null?void 0:u.pointToPoint)??io("hist_ptp",!1)),[k,_]=j.useState(()=>(u==null?void 0:u.showTheo)??io("hist_show_theo",!1)),[N,O]=j.useState(()=>(u==null?void 0:u.theoMean)??io("hist_theo_mean","512")),[A,E]=j.useState(()=>(u==null?void 0:u.theoSigma)??io("hist_theo_sigma","10")),[P,M]=j.useState(()=>(u==null?void 0:u.theoAmp)??io("hist_theo_amp","1000")),[D,T]=j.useState(!1),[B,C]=j.useState(0),[R,z]=j.useState([]),[G,ne]=j.useState(null),[X,F]=j.useState(l||{x:100,y:100}),[re,J]=j.useState(!1),$=j.useRef({x:0,y:0});j.useEffect(()=>{localStorage.setItem("hist_mode",h),localStorage.setItem("hist_min",String(m)),localStorage.setItem("hist_max",String(w)),localStorage.setItem("hist_bins",String(g)),localStorage.setItem("hist_ptp",String(S)),localStorage.setItem("hist_show_theo",String(k)),localStorage.setItem("hist_theo_mean",N),localStorage.setItem("hist_theo_sigma",A),localStorage.setItem("hist_theo_amp",P),d&&d({channelMode:h,minVal:m,maxVal:w,binCount:g,pointToPoint:S,showTheo:k,theoMean:N,theoSigma:A,theoAmp:P})},[h,m,w,g,S,k,N,A,P]),j.useEffect(()=>{if(!e||!a||!n&&(!f||f.length===0))return;if(w<=m){ne("Invalid range: Max must be greater than Min");return}ne(null),T(!0),C(0);const Q=new AbortController,he=[],Ye=setTimeout(async()=>{try{let We=[];if(f&&f.length>1){const Te=Math.min(f.length,navigator.hardwareConcurrency||4);for(let st=0;st<Te;st++){const tr=new Worker(new URL("/assets/histogramWorker-By4HuKAV.js",import.meta.url),{type:"module"});he.push(tr)}let Be=0,it=0;const xt=[],yr=async st=>{for(;Be<f.length;){if(Q.signal.aborted)return;const tr=Be++,ze=f[tr];try{const Ut=await ze.arrayBuffer();await new Promise(($t,rr)=>{st.onmessage=Nr=>{const{success:mt,hist:Ge,error:lt}=Nr.data;mt?(xt.push(Ge),it++,C(it),$t()):(console.error(`Error processing ${ze.name}:`,lt),$t())},st.onerror=Nr=>{console.error("Worker Error",Nr),$t()},st.postMessage({buffer:Ut,roi:a,binCount:g,minVal:m,maxVal:w,pointToPoint:S},[Ut])})}catch(Ut){console.error("File Read Error",Ut)}}};if(await Promise.all(he.map(st=>yr(st))),he.forEach(st=>st.terminate()),he.length=0,xt.length>0){We=xt[0];for(let st=1;st<xt.length;st++){const tr=xt[st];for(let ze=0;ze<tr.length;ze++)We[ze]&&(We[ze].c0+=tr[ze].c0,We[ze].c1+=tr[ze].c1,We[ze].c2+=tr[ze].c2,We[ze].c3+=tr[ze].c3)}}}else n&&(We=HQ(n.data,n.width,n.height,a.x,a.y,a.w,a.h,g,m,w,S));Q.signal.aborted||z(We)}catch(We){console.error("Histogram calc error:",We),ne("Error calculating histogram")}finally{Q.signal.aborted||T(!1)}},50);return()=>{clearTimeout(Ye),Q.abort(),he.length>0&&(console.log(`Terminating ${he.length} active histogram workers...`),he.forEach(We=>We.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,g,m,w,S,f]);const oe=j.useMemo(()=>{if(!k)return R;const Q=parseFloat(N),he=parseFloat(A),ve=parseFloat(P);return isNaN(Q)||isNaN(he)||isNaN(ve)||he<=0?R:R.map(Ye=>{const We=Ye.binStart,Te=-Math.pow(We-Q,2)/(2*Math.pow(he,2)),Be=ve*Math.exp(Te);return{...Ye,theory:Be}})},[R,k,N,A,P]),q=()=>{if(R.length===0)return;let Q=0,he=0;if(R.forEach(ve=>{const Ye=Math.max(ve.c0||0,ve.c1||0,ve.c2||0,ve.c3||0);Ye>Q&&(Q=Ye,he=ve.binStart)}),O(he.toFixed(2)),M(Q.toString()),parseFloat(A)===0||isNaN(parseFloat(A))){const ve=w-m;E((ve/20).toFixed(2))}},H=(Q,he,ve)=>{s&&s(),!(ve.closest("button")||ve.closest("input")||ve.closest("select"))&&(J(!0),$.current={x:Q-X.x,y:he-X.y})},le=Q=>{H(Q.clientX,Q.clientY,Q.target)},ce=Q=>{const he=Q.touches[0];H(he.clientX,he.clientY,Q.target)};if(j.useEffect(()=>{const Q=ve=>{if(re){const Ye="touches"in ve?ve.touches[0].clientX:ve.clientX,We="touches"in ve?ve.touches[0].clientY:ve.clientY;F({x:Ye-$.current.x,y:We-$.current.y})}},he=()=>J(!1);return re&&(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",he),window.addEventListener("touchmove",Q,{passive:!1}),window.addEventListener("touchend",he)),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",he),window.removeEventListener("touchmove",Q),window.removeEventListener("touchend",he)}},[re]),!e)return null;const Z=o?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},_e=o?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},be="step";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:X.x,top:X.y,zIndex:i??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${re?"cursor-grabbing":"cursor-grab"}`,onMouseDown:le,onTouchStart:ce,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",f&&f.length>1&&c.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",f.length]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),c.jsxs("select",{value:h,onChange:Q=>p(Q.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[c.jsx("option",{value:"All",children:"All Colors"}),c.jsx("option",{value:"0",children:Z.c0}),c.jsx("option",{value:"1",children:Z.c1}),c.jsx("option",{value:"2",children:Z.c2}),c.jsx("option",{value:"3",children:Z.c3})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),c.jsx("input",{type:"number",value:m,onChange:Q=>v(Number(Q.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",value:w,onChange:Q=>x(Number(Q.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:Q=>b(Q.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),c.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!S&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),c.jsx("input",{type:"number",value:g,onChange:Q=>y(Math.max(1,Number(Q.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${k?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:k,onChange:Q=>_(Q.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),c.jsx("span",{className:`font-bold uppercase tracking-tight ${k?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),k&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),c.jsx("input",{type:"text",value:N,onChange:Q=>O(Q.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),c.jsx("input",{type:"text",value:A,onChange:Q=>E(Q.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),c.jsx("input",{type:"text",value:P,onChange:Q=>M(Q.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsx("button",{onClick:q,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),D&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:f&&f.length>1?`Stacking Histogram... ${B}/${f.length}`:"Calculating Histogram..."})]}),G?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:G}):c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(Fs,{data:oe,children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),c.jsx(zn,{dataKey:"binStart",type:"number",domain:[m,w],tickFormatter:Q=>Math.floor(Q).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),c.jsx(Gn,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),c.jsx(Kr,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:Q=>`DN: ${Math.round(Number(Q))}`,formatter:(Q,he)=>[Math.round(Q),he]}),c.jsx(Ya,{wrapperStyle:{paddingTop:"10px"}}),k&&c.jsx(Mr,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(h==="All"||h==="0")&&c.jsx(Mr,{type:be,dataKey:"c0",name:Z.c0,stroke:_e.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="1")&&c.jsx(Mr,{type:be,dataKey:"c1",name:Z.c1,stroke:_e.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="2")&&c.jsx(Mr,{type:be,dataKey:"c2",name:Z.c2,stroke:_e.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="3")&&c.jsx(Mr,{type:be,dataKey:"c3",name:Z.c3,stroke:_e.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},Il=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:o})=>{const[i,s]=j.useState(e),[l,u]=j.useState(!1),[d,f]=j.useState({x:0,y:0}),h=j.useRef(null),p=(w,x,g)=>{o&&o(),!(g.closest("button")||g.closest("input"))&&(u(!0),f({x:w-i.x,y:x-i.y}))},m=w=>{p(w.clientX,w.clientY,w.target)},v=w=>{const x=w.touches[0];p(x.clientX,x.clientY,w.target)};return j.useEffect(()=>{const w=g=>{var y,S;if(l){g.cancelable&&g.preventDefault();const b="touches"in g?g.touches[0].clientX:g.clientX,k="touches"in g?g.touches[0].clientY:g.clientY,_=b-d.x,N=k-d.y,O=window.innerWidth-(((y=h.current)==null?void 0:y.offsetWidth)||100),A=window.innerHeight-(((S=h.current)==null?void 0:S.offsetHeight)||100);s({x:Math.max(0,Math.min(_,O)),y:Math.max(0,Math.min(N,A))})}},x=()=>{u(!1)};return l&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",x),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",x)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",x),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",x)}},[l,d]),c.jsxs("div",{ref:h,style:{left:i.x,top:i.y,zIndex:a??90},onMouseDownCapture:o,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${l?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[c.jsx("div",{onMouseDown:m,onTouchStart:v,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),c.jsx("div",{className:"relative z-10 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:t})})]})},QQ=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:o,zIndex:i,onFocus:s,initialPosition:l})=>{const u=j.useRef(null),[d,f]=j.useState(!1),[h,p]=j.useState(null),[m,v]=j.useState(null),[w,x]=j.useState(!0),[g,y]=j.useState(!0),[S,b]=j.useState("-1"),[k,_]=j.useState("8"),[N,O]=j.useState(64),[A,E]=j.useState(45),[P,M]=j.useState(60),D=j.useRef(!1),T=j.useRef({x:0,y:0});j.useEffect(()=>{!e||!r||!n||(f(!0),v(null),setTimeout(()=>{try{const z=KQ(r.data,r.width,r.height,n,a,g);z?p(z):v("Could not extract valid data from ROI.")}catch(z){console.error("2D FFT Error",z),v("Calculation Error: "+z.message)}finally{f(!1)}},50))},[e,r,n,a,g]),j.useEffect(()=>{if(!h||!u.current)return;const z=u.current,G=z.getContext("2d");if(!G)return;const ne=z.width,X=z.height;G.clearRect(0,0,ne,X),G.fillStyle="#0f172a",G.fillRect(0,0,ne,X);const F=h.width,re=h.height,J=h.data,$=Math.pow(10,parseFloat(S)||-1),oe=Math.pow(10,parseFloat(k)||8);let q=$,H=oe;w&&(q=Math.log10(Math.max(1e-10,$)),H=Math.log10(Math.max(1e-10,oe)));const le=H-q||1,ce=ne/2,Z=X/2+50,_e=Math.min(ne,X)*.4,be=.6,Q=A*Math.PI/180,he=P*Math.PI/180,ve=Math.cos(Q),Ye=Math.sin(Q),We=Math.cos(he),Te=Math.sin(he),Be=(Ge,lt,jt)=>{const nr=Ge*ve-lt*Ye,ar=Ge*Ye+lt*ve,Zr=ar*We-jt*Te,Dt=ar*Te+jt*We;return{x:ce+nr*_e,y:Z-Zr*_e,depth:Dt}},it=Math.max(16,N),xt=Math.max(1,Math.floor(F/it)),yr=Math.max(1,Math.floor(re/it)),st=(Ge,lt)=>{let jt=J[lt*F+Ge];return w&&(jt=Math.log10(Math.max(1e-10,jt))),jt=Math.max(q,Math.min(H,jt)),(jt-q)/le},tr=Ge=>`hsl(${(1-Ge)*240}, 80%, 50%)`,ze=[];for(let Ge=0;Ge<re-yr;Ge+=yr)for(let lt=0;lt<F-xt;lt+=xt){const jt=lt,nr=Ge,ar=lt+xt,Zr=Ge,Dt=lt+xt,gn=Ge+yr,bt=lt,mn=Ge+yr,An=st(jt,nr),yn=st(ar,Zr),dr=st(Dt,gn),vr=st(bt,mn),xr=(An+yn+dr+vr)/4,vn=Be(jt/(F-1)-.5,nr/(re-1)-.5,An*be),on=Be(ar/(F-1)-.5,Zr/(re-1)-.5,yn*be),br=Be(Dt/(F-1)-.5,gn/(re-1)-.5,dr*be),Wn=Be(bt/(F-1)-.5,mn/(re-1)-.5,vr*be),na=(vn.depth+on.depth+br.depth+Wn.depth)/4;ze.push({pts:[{x:vn.x,y:vn.y},{x:on.x,y:on.y},{x:br.x,y:br.y},{x:Wn.x,y:Wn.y}],avgDepth:na,avgZ:xr})}ze.sort((Ge,lt)=>Ge.avgDepth-lt.avgDepth),G.lineWidth=.5,ze.forEach(Ge=>{G.fillStyle=tr(Ge.avgZ),G.beginPath(),G.moveTo(Ge.pts[0].x,Ge.pts[0].y),G.lineTo(Ge.pts[1].x,Ge.pts[1].y),G.lineTo(Ge.pts[2].x,Ge.pts[2].y),G.lineTo(Ge.pts[3].x,Ge.pts[3].y),G.closePath(),G.fill()}),G.fillStyle="#aaa",G.font="10px monospace";const Ut=Be(-.5,-.5,0),$t=Be(.5,-.5,0),rr=Be(-.5,.5,0),Nr=Be(.5,.5,0);G.strokeStyle="#666",G.beginPath(),G.moveTo(Ut.x,Ut.y),G.lineTo($t.x,$t.y),G.lineTo(Nr.x,Nr.y),G.lineTo(rr.x,rr.y),G.closePath(),G.stroke(),G.fillText("0",Ut.x-10,Ut.y+10),G.fillText("Fx",$t.x+5,$t.y),G.fillText("Fy",rr.x-15,rr.y);const mt=Be(-.5,-.5,be);G.strokeStyle="#fff",G.beginPath(),G.moveTo(Ut.x,Ut.y),G.lineTo(mt.x,mt.y),G.stroke(),G.fillText(`10^${k}`,mt.x-25,mt.y),G.fillText(`10^${S}`,Ut.x-25,Ut.y)},[h,w,A,P,S,k,N]);const B=z=>{D.current=!0,T.current={x:z.clientX,y:z.clientY}},C=z=>{if(!D.current)return;const G=z.clientX-T.current.x,ne=z.clientY-T.current.y;E(X=>X-G*.5),M(X=>Math.max(0,Math.min(90,X+ne*.5))),T.current={x:z.clientX,y:z.clientY}},R=()=>{D.current=!1};return e?c.jsxs(Il,{initialPosition:l||{x:100,y:100},onClose:t,zIndex:i,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",o,h&&c.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[h.width,"x",h.height," (Chirp-Z)"]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),c.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),c.jsx("input",{type:"number",value:S,onChange:z=>b(z.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),c.jsx("span",{className:"text-slate-500",children:"to"}),c.jsx("input",{type:"number",value:k,onChange:z=>_(z.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),c.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:N,onChange:z=>O(Number(z.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),c.jsx("span",{className:"text-slate-300 w-6 text-right",children:N})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:z=>x(z.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:z=>y(z.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),c.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[d&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),m&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:m}),c.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:B,onMouseMove:C,onMouseUp:R,onMouseLeave:R}),c.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},JQ=.5,ry=1e-10,gk=(e,t)=>{const r=e.length-1;if(r<0)return ry;const n=t/JQ*r,a=Math.round(n),o=e[Math.min(Math.max(0,a),r)]||0;return Math.max(o,ry)},eJ=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const o=a-(e-1)/2,i=Math.exp(-(o*o)/(2*t*t));r[a]=i,n+=i}for(let a=0;a<e;a++)r[a]/=n;return r},tJ=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:o,onUpdateROI:i,zIndex:s,onFocus:l,initialPosition:u,initialInternalState:d,onUpdateState:f,stackFiles:h})=>{const[p,m]=j.useState((d==null?void 0:d.selectedChannel)??0),[v,w]=j.useState(()=>(d==null?void 0:d.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[x,g]=j.useState(()=>(d==null?void 0:d.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[y,S]=j.useState((d==null?void 0:d.useHanning)??!0),[b,k]=j.useState((d==null?void 0:d.doAverage)??!0),[_,N]=j.useState((d==null?void 0:d.welchSegments)??1),[O,A]=j.useState((d==null?void 0:d.showH)??!0),[E,P]=j.useState((d==null?void 0:d.showV)??!0),[M,D]=j.useState((d==null?void 0:d.interlaceRows)??!1),[T,B]=j.useState((d==null?void 0:d.rowGroup)??0),[C,R]=j.useState((d==null?void 0:d.interlaceCols)??!1),[z,G]=j.useState((d==null?void 0:d.colGroup)??0),[ne,X]=j.useState(()=>(d==null?void 0:d.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[F,re]=j.useState(()=>(d==null?void 0:d.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[J,$]=j.useState(()=>(d==null?void 0:d.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[oe,q]=j.useState(()=>(d==null?void 0:d.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[H,le]=j.useState((d==null?void 0:d.intStart)||"0"),[ce,Z]=j.useState((d==null?void 0:d.intEnd)||"0.5"),[_e,be]=j.useState(!1),[Q,he]=j.useState([]),[ve,Ye]=j.useState(!1),[We,Te]=j.useState(0),[Be,it]=j.useState(null),[xt,yr]=j.useState(!1),[st,tr]=j.useState(!1),[ze,Ut]=j.useState(null),[$t,rr]=j.useState(!1),[Nr,mt]=j.useState(null),[Ge,lt]=j.useState(u||{x:50,y:50}),[jt,nr]=j.useState(!1),[ar,Zr]=j.useState(null),[Dt,gn]=j.useState({}),bt=j.useRef({x:0,y:0}),mn=o?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},An=j.useMemo(()=>o?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[o]);j.useEffect(()=>{localStorage.setItem("fft_y_min",v),localStorage.setItem("fft_y_max",x),localStorage.setItem("fft_theo_sigma",ne),localStorage.setItem("fft_theo_ksize",F),localStorage.setItem("fft_theo_noise",J),localStorage.setItem("fft_theo_scale",oe)},[v,x,ne,F,J,oe]),j.useEffect(()=>{if(!e||!n||!a)return;Ye(!0),it(null),Te(0);const se=setTimeout(async()=>{try{const Ce=p===-1?[0,1,2,3]:[p],Fe=h&&h.length>1?h:[null],et=Fe.length,Qe={};let Nt={h:0,v:0};for(let Le=0;Le<et;Le++){Te(Le+1);let ct;if(Fe[Le]){const Mt=await Fe[Le].arrayBuffer();ct=await m0(Mt)}else ct=n;for(const Mt of Ce){const At=VQ(ct.data,ct.width,ct.height,a,Mt,!1,y,{rows:M,rowGroup:T,cols:C,colGroup:z},b,_);At&&(Qe[Mt]||(Qe[Mt]={h:new Array(At.avgHoriz.length).fill(0),v:new Array(At.avgVert.length).fill(0)}),At.avgHoriz.forEach((ir,ge)=>Qe[Mt].h[ge]+=ir/et),At.avgVert.forEach((ir,ge)=>Qe[Mt].v[ge]+=ir/et),Nt=At.sampleCount)}}if(Object.keys(Qe).length===0)throw new Error("ROI too small or no data found.");const hr=1024,or=[];for(let Le=0;Le<hr;Le++){const ct=Le/(hr-1)*.5,Mt={freq:parseFloat(ct.toFixed(6))};for(const At of Ce)Qe[At]&&(Mt[`c${At}_h`]=gk(Qe[At].h,ct),Mt[`c${At}_v`]=gk(Qe[At].v,ct));or.push(Mt)}Zr(Nt),he(or)}catch(Ce){console.error("FFT Loop Failed:",Ce),it(Ce.message||"Unknown error during FFT processing")}finally{Ye(!1)}},100);return()=>clearTimeout(se)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,p,y,b,_,M,T,C,z,h]);const yn=()=>{const se=parseFloat(H),Ce=parseFloat(ce);if(isNaN(se)||isNaN(Ce))return;const Fe={},et=p===-1?[0,1,2,3]:[p],Qe=Q.filter(Nt=>Nt.freq>=se&&Nt.freq<=Ce);if(Qe.length===0){gn({});return}et.forEach(Nt=>{let hr=0,or=0;Qe.forEach(Le=>{const ct=Le[`c${Nt}_h`],Mt=Le[`c${Nt}_v`];typeof ct=="number"&&(hr+=ct),typeof Mt=="number"&&(or+=Mt)}),Fe[Nt]={h:hr/Qe.length,v:or/Qe.length,count:Qe.length}}),gn(Fe)},dr=j.useMemo(()=>{const se=parseFloat(ne),Ce=parseInt(F),Fe=parseFloat(J),et=parseFloat(oe);if(isNaN(se)||isNaN(Ce)||isNaN(Fe)||isNaN(et)||Q.length===0)return Q;const Qe=eJ(Ce,se),Nt=Qe.reduce((Le,ct)=>Le+ct*ct,0),hr=(Ce-1)/2,or=Fe*Fe*et;return Q.map(Le=>{const ct=Le.freq,Mt=2*Math.PI*ct;let At=0,ir=0;for(let Er=0;Er<Ce;Er++){const Sa=Er-hr,Qr=Qe[Er],xn=-Mt*Sa;At+=Qr*Math.cos(xn),ir+=Qr*Math.sin(xn)}const ge=At*At+ir*ir;return{...Le,theory:Math.max(ry,or*Nt*ge)}})},[Q,ne,F,J,oe]),vr=se=>{se&&se.activeLabel!==void 0&&(rr(!0),mt(Number(se.activeLabel)),Ut(null))},xr=se=>{if($t&&Nr!==null&&se&&se.activeLabel!==void 0){const Ce=Number(se.activeLabel);Ut([Math.min(Nr,Ce),Math.max(Nr,Ce)])}},vn=()=>rr(!1),on=(se,Ce,Fe)=>{l&&l(),!(Fe.closest("button")||Fe.closest("input"))&&(nr(!0),bt.current={x:se-Ge.x,y:Ce-Ge.y})},br=se=>{on(se.clientX,se.clientY,se.target)},Wn=se=>{const Ce=se.touches[0];on(Ce.clientX,Ce.clientY,se.target)};j.useEffect(()=>{const se=Fe=>{if(jt){const et="touches"in Fe?Fe.touches[0].clientX:Fe.clientX,Qe="touches"in Fe?Fe.touches[0].clientY:Fe.clientY;lt({x:et-bt.current.x,y:Qe-bt.current.y})}},Ce=()=>nr(!1);return jt&&(window.addEventListener("mousemove",se),window.addEventListener("mouseup",Ce),window.addEventListener("touchmove",se,{passive:!1}),window.addEventListener("touchend",Ce)),()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",Ce),window.removeEventListener("touchmove",se),window.removeEventListener("touchend",Ce)}},[jt]);const na=j.useMemo(()=>{if(!ze||Q.length===0)return null;const[se,Ce]=ze,Fe=Q.filter(Nt=>Nt.freq>=se&&Nt.freq<=Ce);if(Fe.length===0)return null;const et=p===-1?[0,1,2,3]:[p],Qe={};return et.forEach(Nt=>{["h","v"].forEach(hr=>{const or=`c${Nt}_${hr}`;let Le=0,ct=0;for(const Mt of Fe){const At=Mt[or];typeof At=="number"&&(Le+=At,ct++)}ct>0&&(Qe[`${or}_sigma`]=Math.sqrt(Le/ct))})}),{count:Fe.length,stats:Qe}},[ze,Q,p]),Zt=()=>{if(Q.length===0)return;let se=1/0,Ce=-1/0;if(Q.forEach(hr=>{hr.freq<.01||hr.freq>.49||Object.keys(hr).forEach(or=>{if(or==="freq"||or==="theory")return;const Le=hr[or];typeof Le=="number"&&Le>0&&(Le<se&&(se=Le),Le>Ce&&(Ce=Le))})}),se===1/0)return;const Fe=Math.log10(se),et=Math.log10(Ce),Qe=et-Fe,Nt=(Qe===0?1:Qe)*.1;w((Fe-Nt).toFixed(2)),g((et+Nt).toFixed(2))},Qt=(se,Ce)=>{a&&i&&i({...a,x:a.x+se,y:a.y+Ce})},Bt=(se,Ce)=>{a&&i&&i({...a,w:Math.max(2,a.w+se),h:Math.max(2,a.h+Ce)})};return e?c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:Ge.x,top:Ge.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:l,children:[c.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${jt?"cursor-grabbing":"cursor-grab"}`,onMouseDown:br,onTouchStart:Wn,children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:h&&h.length>1?`Stack Avg (${h.length} frames)`:"Single Mode"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[c.jsx("button",{onClick:()=>m(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(se=>c.jsx("button",{onClick:()=>m(se),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===se?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:An[se]},se))]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("button",{onClick:()=>be(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[c.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),c.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:F,set:re,w:"w-10"},{label:"Sigma",val:ne,set:X,w:"w-12"},{label:"Noise()",val:J,set:$,w:"w-12"},{label:"Scale",val:oe,set:q,w:"w-12"}].map(se=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:se.label}),c.jsx("input",{type:"text",value:se.val,onChange:Ce=>se.set(Ce.target.value),className:`${se.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},se.label))})]})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),c.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:_,onChange:se=>N(parseInt(se.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),c.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:_})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:M,onChange:se=>D(se.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:C,onChange:se=>R(se.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),c.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${y?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:y&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:y,onChange:se=>S(se.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${b?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:b&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:b,onChange:se=>k(se.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),c.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("button",{onClick:()=>A(!O),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${O?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-cyan-400":"bg-gray-400"}`})," H"]}),c.jsxs("button",{onClick:()=>P(!E),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${E?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:()=>tr(!st),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${st?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),c.jsx("button",{onClick:()=>yr(!xt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${xt?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[c.jsx("button",{onClick:Zt,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",c.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[c.jsx("input",{type:"text",value:v,onChange:se=>w(se.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),c.jsx("span",{className:"px-2 text-gray-400",children:"to"}),c.jsx("input",{type:"text",value:x,onChange:se=>g(se.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),ve&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),h&&h.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",We," / ",h.length]})]}),Be?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:Be}):c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[c.jsx("div",{className:"flex-1 relative z-10",onMouseDown:vr,onMouseMove:xr,onMouseUp:vn,style:{cursor:$t?"col-resize":"crosshair"},children:c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(Fs,{data:dr,margin:{top:10,right:10,bottom:20,left:0},children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),c.jsx(zn,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),c.jsx(Gn,{scale:"log",domain:[Math.pow(10,parseFloat(v)),Math.pow(10,parseFloat(x))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:se=>Number(se).toExponential(0),width:45}),c.jsx(Kr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:se=>[Number(se).toExponential(3),""],labelFormatter:se=>`Freq: ${Number(se).toFixed(4)}`}),c.jsx(Ya,{wrapperStyle:{fontSize:"10px"}}),c.jsx(Mr,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(se=>{if(p!==-1&&p!==se)return[];const Ce=`c${se}_h`,Fe=`c${se}_v`,et=mn[`c${se}`],Qe=[];return O&&Qe.push(c.jsx(Mr,{type:"linear",dataKey:Ce,name:`${An[se]} (H)`,stroke:et,strokeWidth:1,dot:!1,isAnimationActive:!1},`${se}_h`)),E&&Qe.push(c.jsx(Mr,{type:"linear",dataKey:Fe,name:`${An[se]} (V)`,stroke:et,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${se}_v`)),Qe}),ze&&c.jsx(Fu,{x1:ze[0],x2:ze[1],fill:"#8884d8",fillOpacity:.15})]})})}),na&&ze&&c.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[c.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",ze[0].toFixed(3),"-",ze[1].toFixed(3)]}),Object.entries(na.stats).map(([se,Ce])=>c.jsxs("div",{className:"flex justify-between gap-4",children:[c.jsxs("span",{className:"text-slate-400",children:[se,":"]}),c.jsx("span",{className:"font-bold text-cyan-400",children:Ce.toFixed(5)})]},se))]})]})]}),st&&c.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[c.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("input",{type:"number",step:"0.01",value:H,onChange:se=>le(se.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.01",value:ce,onChange:se=>Z(se.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("button",{onClick:yn,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(se=>{const Ce=Dt[se];if(!Ce)return null;const Fe=mn[`c${se}`];return c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:Fe},children:[An[se]," ",c.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Ce.count," pts)"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[c.jsxs("div",{children:["H: ",Ce.h.toExponential(3)]}),c.jsxs("div",{children:["V: ",Ce.v.toExponential(3)]})]})]},se)})})]}),xt&&c.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>Qt(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Qt(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Qt(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Qt(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx("button",{onClick:()=>Bt(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),c.jsx("button",{onClick:()=>Bt(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),c.jsx("button",{onClick:()=>Bt(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),c.jsx("button",{onClick:()=>Bt(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),c.jsx(QQ,{isOpen:_e,onClose:()=>be(!1),rawImageData:n,roi:a,selectedChannel:p===-1?0:p,channelName:p===-1?"Red (Default)":An[p],zIndex:s?s+2:102,onFocus:l})]}):null},rJ=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:o,zIndex:i,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:d})=>{const[f,h]=j.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[p,m]=j.useState((u==null?void 0:u.blackLevel)??0),[v,w]=j.useState((u==null?void 0:u.whiteLevel)??16383),[x,g]=j.useState(null),[y,S]=j.useState(!1),[b,k]=j.useState(null),[_,N]=j.useState(l||{x:150,y:150}),[O,A]=j.useState(!1),E=j.useRef({x:0,y:0});j.useEffect(()=>{d&&d({selectedChannelKey:f,blackLevel:p,whiteLevel:v})},[f,p,v]),j.useEffect(()=>{if(e&&n&&!u){const C=n.blackLevels?Math.floor(n.blackLevels[1]):0;m(C),w(n.whiteLevel||16383),g(null)}},[e,n]);const P=()=>{if(!n||!a)return;k(null),S(!0);const R=(o?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[f];setTimeout(()=>{try{const z=YQ(n.data,n.width,n.height,a,R,p,v);z?g(z):(k("No data found in selection with current filters."),g(null))}catch(z){console.error("Analysis failed:",z),k(z.message||"Analysis error")}finally{S(!1)}},50)},M=(C,R,z)=>{s&&s(),!(z.closest("button")||z.closest("input")||z.closest("select"))&&(A(!0),E.current={x:C-_.x,y:R-_.y})},D=C=>{M(C.clientX,C.clientY,C.target)},T=C=>{const R=C.touches[0];M(R.clientX,R.clientY,C.target)};if(j.useEffect(()=>{const C=z=>{if(O){const G="touches"in z?z.touches[0].clientX:z.clientX,ne="touches"in z?z.touches[0].clientY:z.clientY;N({x:G-E.current.x,y:ne-E.current.y})}},R=()=>A(!1);return O&&(window.addEventListener("mousemove",C),window.addEventListener("mouseup",R),window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",R)),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",R)}},[O]),!e)return null;const B=o?["B","G1","G2","R"]:["R","G1","G2","B"];return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:_.x,top:_.y,zIndex:i??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${O?"cursor-grabbing":"cursor-grab"}`,onMouseDown:D,onTouchStart:T,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),c.jsx("select",{value:f,onChange:C=>h(C.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:B.map(C=>c.jsx("option",{value:C,children:C},C))})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),c.jsx("input",{type:"number",value:p,onChange:C=>m(Number(C.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),c.jsx("input",{type:"number",value:v,onChange:C=>w(Number(C.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsx("button",{onClick:P,disabled:y,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:y?"Analyzing...":"Run Analysis"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[b&&c.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:b}),!x&&!y&&!b&&c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:c.jsx("p",{children:"Configure parameters and click Run Analysis"})}),x&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:x.uniqueCount})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:x.diffCount})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[c.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),c.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(x.stepCounts).sort((C,R)=>parseFloat(C[0])-parseFloat(R[0])).map(([C,R])=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",C,":"]}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(R)})]},C))})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[c.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(Fs,{data:x.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(zn,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),c.jsx(Gn,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),c.jsx(Kr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:C=>`Val: ${C}`,formatter:C=>[C,"Step Size"]}),c.jsx(Mr,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},nJ=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:o,onFocus:i,initialPosition:s,stackFiles:l})=>{const[u,d]=j.useState("cross"),[f,h]=j.useState("R"),[p,m]=j.useState("B"),[v,w]=j.useState("H"),[x,g]=j.useState(null),[y,S]=j.useState(!1),[b,k]=j.useState(0),[_,N]=j.useState(0),[O,A]=j.useState("single"),E=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},P=a?["B","G1","G2","R"]:["R","G1","G2","B"],M=async D=>{if(!r||!n)return;S(!0),A(D),k(0),g(null);let T=E[f],B=u==="cross"?E[p]:T,C=0,R=0;u==="self"&&(v==="H"?R=2:C=2),setTimeout(async()=>{try{let z={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(D==="single")z=hk(r.data,r.width,r.height,n,T,B,C,R);else if(l&&l.length>0)for(let G=0;G<l.length;G++){k(G+1);const ne=await l[G].arrayBuffer(),X=await m0(ne),F=hk(X.data,X.width,X.height,n,T,B,C,R);z.sumCov+=F.sumCov,z.sumVar1+=F.sumVar1,z.sumVar2+=F.sumVar2,z.n+=F.n}N(z.n),g(XQ(z))}catch(z){console.error("Pearson calculation failed",z),alert("Calculation error: "+z.message)}finally{S(!1)}},50)};return e?c.jsxs(Il,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:o,onFocus:i,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>d("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),c.jsx("button",{onClick:()=>d("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),c.jsx("select",{value:f,onChange:D=>h(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:P.map(D=>c.jsx("option",{value:D,children:D},D))})]}),c.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?c.jsx("select",{value:p,onChange:D=>m(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:P.map(D=>c.jsx("option",{value:D,children:D},D))}):c.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[c.jsx("button",{onClick:()=>w("H"),className:`flex-1 text-[9px] font-bold rounded ${v==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),c.jsx("button",{onClick:()=>w("V"),className:`flex-1 text-[9px] font-bold rounded ${v==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:()=>M("single"),disabled:y,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:y&&O==="single"?"Calculating...":"Calc Current Frame"}),l&&l.length>0&&c.jsxs("button",{onClick:()=>M("stack"),disabled:y,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[c.jsx("span",{children:"Calc Stack Concatenated"}),y&&O==="stack"&&c.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",b," / ",l.length]})]})]}),x!==null&&c.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${v})`," r"]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:x.toFixed(5)}),c.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",_.toLocaleString()," pairs"]}),c.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(x)>.5?c.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(x)>.1?c.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):c.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),c.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${v==="V"?"+2":""}, c${v==="H"?"+2":""}) in the same channel.`})]}):null},aJ=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],oJ=["5","9","0","8","2","1","4","7","3","6"],mk=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:oJ[r]}).join(""),iJ=({isOpen:e,onClose:t})=>{const[r,n]=j.useState({pv:"--",uv:"--"});return j.useEffect(()=>{if(e){const a=()=>{const i=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");i&&s&&n({pv:i.innerText||"--",uv:s.innerText||"--"})};a();const o=setTimeout(a,1e3);return()=>clearTimeout(o)}},[e]),e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[c.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:c.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[c.jsx("span",{className:"font-bold mr-2",children:"about:"}),c.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),c.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:aJ.map(a=>c.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),c.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),c.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:c.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[c.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:mk(r.pv)}),c.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:mk(r.uv)})]})})})]})]})}):null},sJ=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[o,i]=j.useState(""),s=d=>{const f=new WeakSet;try{return JSON.stringify(d,(h,p)=>{if(typeof p=="bigint")return p.toString()+"n";if(typeof p=="object"&&p!==null){if(f.has(p))return"[Circular]";if(f.add(p),ArrayBuffer.isView(p))return`[${p.constructor.name}]`}return p})}catch{return"[Unable to serialize object]"}},l=j.useMemo(()=>{if(!r)return[];const d=[],f=(h,p=0)=>{if(p>5)return"...";if(h==null)return String(h);if(h instanceof Date)return h.toLocaleString();if(typeof h=="number")return h.toString();if(typeof h=="string")return h;if(typeof h=="bigint")return h.toString()+"n";if(ArrayBuffer.isView(h))return`<${h.constructor.name} len=${h.length} bytes=${h.byteLength}>`;if(h instanceof ArrayBuffer)return`<ArrayBuffer bytes=${h.byteLength}>`;if(typeof h=="object"){if(Array.isArray(h))return h.length===0?"[]":h.length>20?`[${h.slice(0,10).map(w=>typeof w=="number"?w.toFixed(2):f(w,p+1)).join(", ")}, ... (+${h.length-10} more)]`:`[${h.map(v=>typeof v=="number"?Number.isInteger(v)?v:v.toFixed(4):f(v,p+1)).join(", ")}]`;try{const m=Object.keys(h);return m.length>5?`{Object with ${m.length} keys}`:s(h)}catch{return"<Complex Object>"}}return String(h)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(p=>{if(p==="MakerNote"||p==="UserComment"||p.includes("Strip")||p.includes("Offset")){d.push({key:p,value:"<Binary/Internal Data>"});return}const m=r[p];d.push({key:p,value:f(m)})})}catch(h){console.error("Error processing EXIF data:",h),d.push({key:"Error",value:"Failed to process metadata structure."})}return d},[r]);if(!e)return null;const u=l.filter(d=>d.key.toLowerCase().includes(o.toLowerCase())||d.value.toLowerCase().includes(o.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:c.jsxs("div",{className:"relative",children:[c.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search tags...",value:o,onChange:d=>i(d.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?c.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(d=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[c.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:d.key}),c.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:d.value})]},d.key))})]}):c.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:c.jsxs("p",{children:['No tags found matching "',o,'"']})})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},lJ=100,Ap=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,o=Math.floor(a/2);for(let i=0;i<=a-o;i++){const s=t[i+o-1]-t[i];s<r&&(r=s,n=i)}t=t.slice(n,n+o)}return t.reduce((r,n)=>r+n,0)/t.length},yk=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:o=!1})=>{const i=j.useRef(null),s=j.useRef(null),l=j.useCallback(g=>{const y=o?Math.max(1e-6,e):e,S=o?Math.max(y*1.0001,t):t,b=Math.max(y,Math.min(S,g));if(o){const k=Math.log10(y),_=Math.log10(S);return(Math.log10(b)-k)/(_-k)}return(b-y)/(S-y)},[e,t,o]),u=j.useCallback(g=>{const y=o?Math.max(1e-6,e):e,S=o?Math.max(y*1.0001,t):t;if(o){const b=Math.log10(y),k=Math.log10(S);return Math.pow(10,b+g*(k-b))}return y+g*(S-y)},[e,t,o]),d=(g,y)=>{g.preventDefault(),g.stopPropagation(),s.current=y;const S=k=>{if(!s.current||!i.current)return;const _=i.current.getBoundingClientRect();let N=0;a?N=(_.bottom-k.clientY)/_.height:N=(k.clientX-_.left)/_.width,N=Math.max(0,Math.min(1,N));const O=u(N);if(s.current==="min"){const A=r[1];n([Math.min(O,A),A])}else{const A=r[0];n([A,Math.max(O,A)])}},b=()=>{s.current=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",b)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",b)},f=l(r[0])*100,h=l(r[1])*100,p=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},m=a?{left:"50%",bottom:`${f}%`,height:`${h-f}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${f}%`,width:`${h-f}%`,height:"4px",transform:"translateY(-50%)"},v="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",w=a?{left:"50%",bottom:`${f}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${f}%`,transform:"translate(-50%, -50%)"},x=a?{left:"50%",bottom:`${h}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${h}%`,transform:"translate(-50%, -50%)"};return c.jsxs("div",{ref:i,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[c.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:p}),c.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:m}),c.jsx("div",{className:v,style:w,onMouseDown:g=>d(g,"min")}),c.jsx("div",{className:v,style:x,onMouseDown:g=>d(g,"max")})]})},cJ=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:o,importedMetadata:i,theme:s,initialCameraModel:l,initialISO:u})=>{const[d,f]=j.useState("Noise"),[h,p]=j.useState(!0),[m,v]=j.useState(null),[w,x]=j.useState("default"),[g,y]=j.useState(!1),[S,b]=j.useState(!1),[k,_]=j.useState({R:!0,G1:!0,G2:!0,B:!0}),[N,O]=j.useState(""),[A,E]=j.useState(""),[P,M]=j.useState(""),[D,T]=j.useState(""),[B,C]=j.useState("10"),[R,z]=j.useState(""),[G,ne]=j.useState("0 0 0 0"),[X,F]=j.useState("0 0 0 0"),[re,J]=j.useState(!1),[$,oe]=j.useState(null),[q,H]=j.useState(!1),[le,ce]=j.useState(0),[Z,_e]=j.useState([]),[be,Q]=j.useState(""),[he,ve]=j.useState(""),Ye=()=>{const U=parseFloat(be),V=parseFloat(he);!isNaN(U)&&!isNaN(V)&&(_e([...Z,{id:Date.now(),x:U,y:V}]),Q(""),ve(""))},[We,Te]=j.useState(()=>localStorage.getItem("ptc_tester_name")||""),[Be,it]=j.useState(""),[xt,yr]=j.useState("");j.useEffect(()=>{localStorage.setItem("ptc_tester_name",We)},[We]);const st=j.useRef(re),tr=j.useRef(q),ze=j.useRef(le);j.useEffect(()=>{st.current=re,tr.current=q,ze.current=le},[re,q,le]);const[Ut,$t]=j.useState(null),[rr,Nr]=j.useState({min:.01,max:90}),[mt,Ge]=j.useState({readNoise:0,gain:1,prnu:.5}),[lt,jt]=j.useState(2e6),nr=j.useRef(mt),ar=j.useRef(rr),Zr=j.useRef(lt);j.useEffect(()=>{nr.current=mt,ar.current=rr,Zr.current=lt},[mt,rr,lt]);const[Dt,gn]=j.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[bt,mn]=j.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[An,yn]=j.useState(!1),[dr,vr]=j.useState([]),[xr,vn]=j.useState(null),[on,br]=j.useState(""),Wn=j.useMemo(()=>n?n.join(","):"",[n]);j.useEffect(()=>{if(e){let U="0 0 0 0";i&&i.blackLevel?U=i.blackLevel.join(" "):U=n&&n.length===4?n.join(" "):"0 0 0 0",ne(U),F(U);let V="";if(i&&i.height?V=i.height.toString():a&&(V=a.toString()),z(V),V){const I=parseFloat(V);!isNaN(I)&&I>0?C((2309.4/I).toFixed(2)):C("10")}else C("10");oe(null),J(!1),H(!1),ce(0),vr([]),vn(null),Nr({min:.01,max:90}),gn({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const ie={readNoise:0,gain:0,prnu:0};Ge(ie),nr.current=ie,O(""),E(""),M(""),T(""),f("Noise"),$t(null),jt(2e6),br(""),b(!1),_e([]),it(I=>I.trim()===""&&l?l:I),yr(I=>I.trim()===""&&u?u:I)}},[e,Wn,i,a,r,l,u]);const na=U=>{if(U.key==="Enter"){const V=parseFloat(R);if(!isNaN(V)&&V>0){const ie=(2309.4/V).toFixed(2);C(ie)}U.target.blur()}},Zt=j.useMemo(()=>{let V=X.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(V.length===1&&(V=[V[0],V[0],V[0],V[0]]);V.length<4;)V.push(0);const ie=I=>{switch(I){case"R":return V[0];case"G1":return V[1];case"G2":return V[2];case"B":return V[3];default:return 0}};return r.map(I=>{const pe=I.mean-ie(I.channel),Oe=I.std>0?pe/I.std:0;return{...I,x:pe,std:I.std,snr:Oe}}).filter(I=>I.std>0)},[r,X]),Qt=j.useMemo(()=>{const U=mt.readNoise,V=U*U;return Zt.map(ie=>{let I=0;if(d==="Noise")I=ie.std;else if(d==="SNR")I=ie.snr;else if(d==="Linear"){const Oe=ie.std*ie.std-V;I=ie.x!==0?Oe/ie.x:0}return{...ie,y:I}})},[Zt,d,mt.readNoise]),Bt=j.useMemo(()=>{if(Zt.length===0)return"G1";const U={R:0,G1:0,G2:0,B:0},V={R:0,G1:0,G2:0,B:0};for(const pe of Zt)U[pe.channel]+=pe.x,V[pe.channel]++;let ie="G1",I=-1/0;return Object.keys(U).forEach(pe=>{const Oe=V[pe],De=Oe>0?U[pe]/Oe:-1/0;De>I&&(I=De,ie=pe)}),ie},[Zt]),se=j.useCallback(()=>{let U=1/0,V=-1/0;if(Zt.length===0)return{min:.1,max:1};for(let ie=0;ie<Zt.length;ie++){const I=Zt[ie].x;h&&I<=0||(I<U&&(U=I),I>V&&(V=I))}return U===1/0?{min:.1,max:1}:{min:U,max:V}},[Zt,h]),Ce=j.useCallback(()=>{let U=1/0,V=-1/0;if(Qt.length===0)return{min:.1,max:1};for(let ie=0;ie<Qt.length;ie++){const I=Qt[ie].y;h&&I<=0||(I<U&&(U=I),I>V&&(V=I))}return U===1/0?{min:.1,max:1}:{min:U*.9,max:V*1.1}},[Qt,h]),{min:Fe,max:et}=se(),{min:Qe,max:Nt}=Ce(),hr=et*(rr.min/100),or=et*(rr.max/100),Le=j.useMemo(()=>{if(!h&&Qt.length===0)return{shot:[],read:[],prnu:[],total:[]};const U=N?parseFloat(N):Fe,V=A?parseFloat(A):et,ie=100,I=Math.max(.1,U),pe=Math.max(1,V);if(I>=pe)return{shot:[],read:[],prnu:[],total:[]};const Oe=Math.log10(I),Je=(Math.log10(pe)-Oe)/ie,Ke=mt.readNoise,Ie=mt.gain>0?mt.gain:1,Rt=mt.prnu/100,yt=[],Ft=[],pr=[],ue=[];for(let qe=0;qe<=ie;qe++){const Me=Math.pow(10,Oe+qe*Je);if(d==="Linear"){const ut=1/Ie,_t=Rt*Rt,bn=ut+_t*Me;ue.push({x:Me,y:bn}),yt.push({x:Me,y:ut}),pr.push({x:Me,y:_t*Me})}else{const ut=Ke,_t=Math.sqrt(Me/Ie),bn=Rt*Me,dt=Math.sqrt(ut*ut+_t*_t+bn*bn);d==="Noise"?(yt.push({x:Me,y:_t}),Ft.push({x:Me,y:ut}),pr.push({x:Me,y:bn}),ue.push({x:Me,y:dt})):(_t>0&&yt.push({x:Me,y:Me/_t}),ut>0&&Ft.push({x:Me,y:Me/ut}),bn>0&&pr.push({x:Me,y:Me/bn}),dt>0&&ue.push({x:Me,y:Me/dt}))}}return{shot:yt,read:Ft,prnu:pr,total:ue}},[Qt,h,N,A,mt,d,Fe,et]),ct=j.useMemo(()=>{if(d==="Linear")return[];const U=parseFloat(B);if(isNaN(U)||U<=0)return[];const V=N?parseFloat(N):Fe,ie=A?parseFloat(A):et;return d==="SNR"?[{x:V,y:U},{x:ie,y:U}]:[{x:V,y:V/U},{x:ie,y:ie/U}]},[Qt,B,d,N,A,Fe,et]),Mt=j.useCallback((U,V)=>{if(!V||V.length===0)return null;const ie=[...V].sort((I,pe)=>I.x-pe.x);for(let I=0;I<ie.length-1;I++){const pe=ie[I],Oe=ie[I+1];if(pe.snr<=U&&Oe.snr>=U||pe.snr>=U&&Oe.snr<=U){const De=(U-pe.snr)/(Oe.snr-pe.snr);return pe.x+De*(Oe.x-pe.x)}}return null},[]),At=j.useMemo(()=>{const U=Zt,V=1e3,ie=pe=>{if(pe.length===0)return[];if(pe.length<=V)return pe;const Oe=[...pe].sort((Ke,Ie)=>Ke.x-Ie.x),De=[],Je=Oe.length/V;for(let Ke=0;Ke<V;Ke++){const Ie=Math.floor(Ke*Je),Rt=Math.floor((Ke+1)*Je),yt=Oe.slice(Ie,Rt);if(yt.length===0)continue;yt.sort((pr,ue)=>pr.std-ue.std);const Ft=Math.floor(yt.length/2);De.push(yt[Ft])}return De},I={R:[],G1:[],G2:[],B:[]};return U.forEach(pe=>{I[pe.channel]&&I[pe.channel].push(pe)}),{R:ie(I.R),G1:ie(I.G1),G2:ie(I.G2),B:ie(I.B)}},[Zt]),ir=j.useMemo(()=>$&&mt.gain?$*mt.gain:null,[$,mt.gain]),ge=j.useMemo(()=>{if($===null||$===0)return null;const U=parseFloat(B);let V=null;if(!isNaN(U)&&U>0){let De=0,Je=0;if(["R","G1","G2","B"].forEach(Ke=>{const Ie=Mt(U,At[Ke]);Ie!==null&&(De+=Ie,Je++)}),Je>0){const Ke=De/Je;V=Math.log2($/Ke)}}const ie=parseFloat(R);let I=null,pe=NaN;if(!isNaN(ie)&&ie>0){pe=16e3/ie;let De=0,Je=0;if(["R","G1","G2","B"].forEach(Ke=>{const Ie=Mt(pe,At[Ke]);Ie!==null&&(De+=Ie,Je++)}),Je>0){const Ke=De/Je;I=Math.log2($/Ke)}}let Oe=null;if(!isNaN(ie)&&ie>0){const De=Mt(pe,At[Bt]);De!==null&&(Oe=Math.log2($/De))}return{manualDR:V,ptpDR:I,d55DR:Oe,manualTarget:U,ptpTarget:pe,saturationSignal:$,dominantChannel:Bt}},[$,B,R,At,Mt,Bt]),Er=j.useMemo(()=>{if(d==="Linear"||!ge||!ge.ptpTarget||isNaN(ge.ptpTarget))return[];const U=ge.ptpTarget,V=N?parseFloat(N):Fe,ie=A?parseFloat(A):et;return d==="SNR"?[{x:V,y:U},{x:ie,y:U}]:[{x:V,y:V/U},{x:ie,y:ie/U}]},[d,ge,N,A,Fe,et]),Sa=j.useCallback(()=>{const ie=document.createElement("canvas");ie.width=2048,ie.height=1536;const I=ie.getContext("2d");if(!I)return;const pe=s==="dark",Oe=pe?"#0f172a":"#ffffff",De=pe?"#ffffff":"#000000",Je=pe?"#475569":"#cbd5e1",Ke=pe?"#1e293b":"#f1f5f9",Ie=o?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};I.fillStyle=Oe,I.fillRect(0,0,2048,1536);let Rt=N?parseFloat(N):Fe,yt=A?parseFloat(A):et,Ft=P?parseFloat(P):Qe,pr=D?parseFloat(D):Nt;isNaN(Rt)&&(Rt=.1),isNaN(yt)&&(yt=1e4),isNaN(Ft)&&(Ft=.1),isNaN(pr)&&(pr=1e3);const ue={top:80,right:80,bottom:100,left:120},qe=2048-ue.left-ue.right,Me=1536-ue.top-ue.bottom,ut=je=>{if(h){const at=Math.log10(Math.max(1e-9,Rt)),tt=Math.log10(Math.max(1e-9,yt)),rt=Math.log10(Math.max(1e-9,je));return ue.left+(rt-at)/(tt-at)*qe}else return ue.left+(je-Rt)/(yt-Rt)*qe},_t=je=>{if(h){const at=Math.log10(Math.max(1e-9,Ft)),tt=Math.log10(Math.max(1e-9,pr)),rt=Math.log10(Math.max(1e-9,je));return ue.top+Me-(rt-at)/(tt-at)*Me}else return ue.top+Me-(je-Ft)/(pr-Ft)*Me};if(I.beginPath(),h){const je=(at,tt,rt)=>{const Ur=Math.log10(Math.max(1e-9,at)),kn=Math.log10(Math.max(1e-9,tt)),Hn=Math.floor(Ur),Fa=Math.ceil(kn);for(let $o=Hn;$o<=Fa;$o++){const za=Math.pow(10,$o);let lr=rt?ut(za):_t(za);(rt?lr>=ue.left-1&&lr<=ue.left+qe+1:lr>=ue.top-1&&lr<=ue.top+Me+1)&&(I.lineWidth=1.5,I.strokeStyle=Je,I.beginPath(),rt?(I.moveTo(lr,ue.top),I.lineTo(lr,ue.top+Me)):(I.moveTo(ue.left,lr),I.lineTo(ue.left+qe,lr)),I.stroke()),I.lineWidth=.5,I.strokeStyle=Ke;for(let Fl=2;Fl<10;Fl++){const Wu=Fl*za;lr=rt?ut(Wu):_t(Wu),(rt?lr>=ue.left&&lr<=ue.left+qe:lr>=ue.top&&lr<=ue.top+Me)&&(I.beginPath(),rt?(I.moveTo(lr,ue.top),I.lineTo(lr,ue.top+Me)):(I.moveTo(ue.left,lr),I.lineTo(ue.left+qe,lr)),I.stroke())}}};je(Rt,yt,!0),je(Ft,pr,!1)}else{I.strokeStyle=Je,I.lineWidth=1;for(let je=0;je<=5;je++){const at=ue.left+qe*je/5;I.beginPath(),I.moveTo(at,ue.top),I.lineTo(at,ue.top+Me),I.stroke();const tt=ue.top+Me*je/5;I.beginPath(),I.moveTo(ue.left,tt),I.lineTo(ue.left+qe,tt),I.stroke()}}I.strokeStyle=De,I.lineWidth=2,I.strokeRect(ue.left,ue.top,qe,Me);const bn=(je,at,tt)=>{je<ue.left||je>ue.left+qe||at<ue.top||at>ue.top+Me||(I.fillStyle=tt,I.fillRect(je-1.5,at-1.5,3,3))},dt=Qt.filter(je=>!(h&&(je.x<=0||je.y<=0)));dt.forEach(je=>{k[je.channel]&&je.channel!==Bt&&bn(ut(je.x),_t(je.y),Ie[je.channel])}),dt.forEach(je=>{k[je.channel]&&je.channel===Bt&&bn(ut(je.x),_t(je.y),Ie[je.channel])}),Z.forEach(je=>{const at=ut(je.x),tt=_t(je.y);if(at<ue.left||at>ue.left+qe||tt<ue.top||tt>ue.top+Me)return;I.strokeStyle="#d946ef",I.lineWidth=2.5;const rt=6;I.beginPath(),I.moveTo(at-rt,tt-rt),I.lineTo(at+rt,tt+rt),I.moveTo(at+rt,tt-rt),I.lineTo(at-rt,tt+rt),I.stroke()});const wr=(je,at,tt=[])=>{if(je.length<2)return;I.beginPath(),I.strokeStyle=at,I.lineWidth=3,I.setLineDash(tt);let rt=!1;for(const Ur of je){const kn=ut(Ur.x),Hn=_t(Ur.y);if(kn<ue.left-100||kn>ue.left+qe+100||Hn<ue.top-100||Hn>ue.top+Me+100){rt=!1;continue}rt?I.lineTo(kn,Hn):(I.moveTo(kn,Hn),rt=!0)}I.stroke(),I.setLineDash([])},wn=pe?"#ffffff":"#000000";if(bt.shot&&wr(Le.shot,"#94a3b8",[5,5]),bt.read&&wr(Le.read,"#f43f5e",[3,3]),bt.prnu&&wr(Le.prnu,"#f59e0b",[3,3]),bt.total&&wr(Le.total,wn,[]),ct.length===2){const je="#6366f1";wr(ct,je,[4,2]);const at=ct[1],tt=_t(at.y);tt>=ue.top&&tt<=ue.top+Me&&(I.fillStyle=je,I.font="bold 20px sans-serif",I.textAlign="right",I.textBaseline="bottom",I.fillText(`M.Tgt=${B}`,ue.left+qe-10,tt-8))}if(Er.length===2&&(ge!=null&&ge.ptpTarget)){const je="#10b981";wr(Er,je,[4,4]);const at=Er[1],tt=_t(at.y);if(tt>=ue.top&&tt<=ue.top+Me){I.fillStyle=je,I.font="bold 20px sans-serif",I.textAlign="right",I.textBaseline="bottom";const rt=ge.ptpTarget.toFixed(1),Ur=ct.length===2?_t(ct[1].y):-100,kn=Math.abs(tt-Ur)<25?25:0;I.fillText(`PTP=${rt}`,ue.left+qe-10,tt-8-kn)}}if(bt.fitRange||q){const je=(at,tt)=>{const rt=ut(at);rt>=ue.left&&rt<=ue.left+qe&&(I.beginPath(),I.strokeStyle=tt,I.lineWidth=2,I.setLineDash([8,8]),I.moveTo(rt,ue.top),I.lineTo(rt,ue.top+Me),I.stroke(),I.setLineDash([]))};je(hr,"#22d3ee"),je(or,"#22d3ee")}if($){const je=ut($);je>=ue.left&&je<=ue.left+qe&&(I.strokeStyle="#ef4444",I.lineWidth=3,I.setLineDash([10,10]),I.beginPath(),I.moveTo(je,ue.top),I.lineTo(je,ue.top+Me),I.stroke(),I.setLineDash([]),I.fillStyle="#ef4444",I.font="bold 24px sans-serif",I.textAlign="center",I.fillText("Sat",je,ue.top-10))}I.fillStyle=De,I.font="28px monospace",I.textAlign="center",I.fillText(Rt.toExponential(1),ue.left,ue.top+Me+40),I.fillText(yt.toExponential(1),ue.left+qe,ue.top+Me+40),I.fillText("Signal (DN)",ue.left+qe/2,ue.top+Me+80),I.textAlign="right",I.textBaseline="middle",I.fillText(Ft.toExponential(1),ue.left-20,ue.top+Me),I.fillText(pr.toExponential(1),ue.left-20,ue.top),I.save(),I.translate(ue.left-80,ue.top+Me/2),I.rotate(-Math.PI/2),I.textAlign="center",I.fillText(d==="Linear"?"(Var - RN) / Mean":d,0,0),I.restore(),I.save(),I.translate(2048/2,1536/2),I.rotate(-Math.PI/6),I.textAlign="center",I.textBaseline="middle",I.fillStyle=pe?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",I.font="bold 150px sans-serif",I.fillText(" y-g-jiang.github.io",0,0),I.restore(),I.fillStyle=De,I.font="bold 36px sans-serif",I.textAlign="left",I.textBaseline="top",I.fillText(`PTC Export: ${d} Mode`,ue.left,20),I.font="24px sans-serif",I.fillStyle=pe?"#94a3b8":"#64748b",I.fillText(`Points: ${Qt.length} | Sat Channel: ${Bt}`,ue.left,65);const ao=ue.left+30,ls=ue.top+30,wh=70,cs=je=>{if(!$||je<=0)return"--";const at=mt.readNoise,tt=mt.gain,rt=mt.prnu/100;if(tt<=0)return"--";const Ur=je*je,kn=at*at,Hn=1-Ur*rt*rt,Fa=-(Ur/tt),$o=-(Ur*kn);let za=0;if(Math.abs(Hn)<1e-8)Math.abs(Fa)>1e-8&&(za=-$o/Fa);else{const lr=Fa*Fa-4*Hn*$o;lr>=0&&(za=(-Fa+Math.sqrt(lr))/(2*Hn))}return za>0?Math.log2($/za).toFixed(2)+" EV":"--"},kh=ge!=null&&ge.ptpTarget&&!isNaN(ge.ptpTarget)?cs(ge.ptpTarget):"--",yi=B?cs(parseFloat(B)):"--";I.font="bold 48px monospace",I.textAlign="left",I.textBaseline="top",I.shadowColor=pe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",I.shadowBlur=4,I.shadowOffsetX=1,I.shadowOffsetY=1;const Tn=(je,at,tt,rt)=>{const Ur=ls+tt*wh;I.fillStyle=De,I.fillText(je,ao,Ur);const kn=I.measureText(je).width;I.fillStyle=rt||De,I.fillText(at,ao+kn,Ur)},Sh=Dt.read,jh=parseFloat(Dt.gain).toFixed(3),Nh=parseFloat(Dt.prnu).toFixed(2)+"%";let Gu=`M.DR@SNR${B}: `;const Ll=parseFloat(R);if(!isNaN(Ll)&&Ll>0){const je=(2309.4/Ll).toFixed(2);Math.abs(parseFloat(B)-parseFloat(je))<.05&&(Gu="8mpSNR=1 DR: ")}Tn("Tester: ",We||"N/A",0),Tn("Model : ",Be||"Unknown",1),Tn("ISO   : ",xt||"N/A",2),Tn("RN/FPN: ",Sh,3,"#f43f5e"),Tn("KADC  : ",jh,4,"#06b6d4"),Tn("PRNU  : ",Nh,5,"#f59e0b"),Tn("PTP DR: ",ge!=null&&ge.ptpDR?ge.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),Tn("D55 DR: ",ge!=null&&ge.d55DR?ge.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),Tn("FWC   : ",ir?ir>1e4?(ir/1e3).toFixed(1)+"k":Math.round(ir).toString():"--",8,"#f97316"),Tn(Gu,ge!=null&&ge.manualDR?ge.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),Tn("PTCFitDR(PTP): ",kh,10,"#10b981"),Tn("PTCFitDR(Man): ",yi,11,"#06b6d4"),I.save(),I.textAlign="right",I.textBaseline="bottom",I.fillStyle="#3b82f6",I.font="bold 80px sans-serif",I.shadowColor=pe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",I.shadowBlur=4,I.shadowOffsetX=2,I.shadowOffsetY=2;const Bl=1988,Uu=1476,_h=90;I.fillText("Online",Bl,Uu),I.fillText("Jiangtherapee",Bl,Uu-_h),I.restore();const To=document.createElement("a");To.download=`ptc_complete_${d}_${Date.now()}.jpg`,To.href=ie.toDataURL("image/jpeg",.9),To.click()},[Qt,Bt,k,N,A,P,D,Fe,et,Qe,Nt,h,s,d,$,o,bt,Le,hr,or,rr,q,We,Be,xt,ge,ir,B,ct,Er,Dt,R,Z]),Qr=j.useMemo(()=>{let U=Qt;if(h&&(U=U.filter(pe=>pe.y>0&&pe.x>0)),w==="top3"){const pe=[...U].sort((De,Je)=>Je.x-De.x),Oe=Math.max(50,Math.ceil(pe.length*.03));U=pe.slice(0,Oe)}const V={R:[],G1:[],G2:[],B:[]};if(U.forEach(pe=>{V[pe.channel]&&V[pe.channel].push(pe)}),w==="raw")return V;const ie=w==="top3"?500:lJ,I=pe=>{if(pe.length<=ie)return pe;const Oe=[...pe].sort((Ke,Ie)=>Ke.x-Ie.x),De=[],Je=Oe.length/ie;for(let Ke=0;Ke<ie;Ke++){const Ie=Math.floor(Ke*Je),Rt=Math.floor((Ke+1)*Je),yt=Oe.slice(Ie,Rt);if(yt.length===0)continue;yt.sort((pr,ue)=>pr.y-ue.y);const Ft=Math.floor(yt.length/2);De.push(yt[Ft])}return De};return{R:I(V.R),G1:I(V.G1),G2:I(V.G2),B:I(V.B)}},[Qt,w,h]),xn=j.useMemo(()=>{if(Zt.length<5)return[];const U=Zt.filter(ie=>ie.channel===Bt);return[...U.length>20?U:Zt].sort((ie,I)=>ie.x-I.x).map(ie=>({mean:ie.x,std:ie.std}))},[Zt,Bt]),Ao=U=>{const V=U.length;if(V===0)return[];const ie=U.reduce((qe,Me)=>qe+Me,0)/V,I=U.reduce((qe,Me)=>qe+Math.pow(Me-ie,2),0)/(V-1||1),pe=Math.sqrt(I);if(pe===0)return[{x:ie-.001,density:0},{x:ie,density:1},{x:ie+.001,density:0}];const Oe=1.06*pe*Math.pow(V,-.2),De=Math.min(...U),Je=Math.max(...U),Ke=(Je-De)*.2||De*.1,Ie=Math.max(0,De-Ke),Rt=Je+Ke,yt=100,Ft=(Rt-Ie)/(yt-1),pr=qe=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*qe*qe),ue=[];for(let qe=0;qe<yt;qe++){const Me=Ie+qe*Ft;let ut=0;for(let _t=0;_t<V;_t++)ut+=pr((Me-U[_t])/Oe);ut/=V*Oe,ue.push({x:Me,density:ut})}return ue},Eo=j.useCallback((U,V,ie,I)=>{if(U.length<5)return{gain:0,prnu:0};const pe=U[U.length-1].mean,Oe=pe*(ie.min/100),De=pe*(ie.max/100),Je=U.filter(dt=>dt.mean>=Oe&&dt.mean<=De);if(Je.length<5)return{gain:0,prnu:0};$t({nPoints:Je.length});const Ke=V*V,Ie=[],Rt=[];if(Je.forEach(dt=>{const wn=dt.std*dt.std-Ke;if(dt.mean>1&&wn>0){const ao=dt.mean,ls=wn/dt.mean;Ie.push({x:ao,y:ls}),Rt.push(dt.mean/wn)}}),Ie.length<5)return{gain:0,prnu:0};const yt=[],Ft=Ie.length,pr=I,ue=Ft*(Ft-1)/2;if(ue<=pr)for(let dt=0;dt<Ft;dt++)for(let wr=dt+1;wr<Ft;wr++){const wn=Ie[wr].x-Ie[dt].x;Math.abs(wn)>1e-5&&yt.push((Ie[wr].y-Ie[dt].y)/wn)}else{const dt=Math.max(1,Math.floor(ue/pr));for(let wr=0;wr<Ft;wr++)for(let wn=wr+1;wn<Ft;wn+=dt){const ao=Ie[wn].x-Ie[wr].x;Math.abs(ao)>1e-5&&yt.push((Ie[wn].y-Ie[wr].y)/ao)}}const qe=Ap(yt),Me=Ie.map(dt=>dt.y-qe*dt.x),ut=Ap(Me);let _t=0,bn=0;if(ut>1e-6?_t=1/ut:_t=Ap(Rt),qe>0&&(bn=Math.sqrt(qe)*100),Rt.length>0){const dt=Ao(Rt);vr(dt),vn(_t)}else vr([]);return{gain:_t,prnu:bn}},[]),ja=j.useCallback(U=>{let V=U.read??nr.current.readNoise;const ie=U.gRange??ar.current,I=Zr.current;if((U.read!==void 0||U.gRange!==void 0)&&U.gain===void 0&&U.prnu===void 0&&xn.length>0&&V>=0)b(!0),setTimeout(()=>{const Oe=Eo(xn,V,ie,I);let De=nr.current.gain,Je=nr.current.prnu;Oe.gain>0&&(De=Oe.gain,Je=Oe.prnu),Ge({readNoise:V,gain:De,prnu:Je}),U.gRange!==void 0&&Nr(U.gRange),gn(Ke=>{var Ie,Rt;return{...Ke,read:V.toString(),gain:De>0?De.toFixed(3):"0",prnu:Je.toFixed(2),rangeMin:(((Ie=U.gRange)==null?void 0:Ie.min)??Ke.rangeMin).toString(),rangeMax:(((Rt=U.gRange)==null?void 0:Rt.max)??Ke.rangeMax).toString()}}),b(!1)},50);else{let Oe=U.gain!==void 0?U.gain:nr.current.gain,De=U.prnu!==void 0?U.prnu:nr.current.prnu;Ge({readNoise:V,gain:Oe,prnu:De}),U.gRange!==void 0&&Nr(U.gRange),gn(Je=>{var Ke,Ie;return{...Je,read:V.toString(),gain:Oe>0?Oe.toFixed(3):"0",prnu:De.toFixed(2),rangeMin:(((Ke=U.gRange)==null?void 0:Ke.min)??Je.rangeMin).toString(),rangeMax:(((Ie=U.gRange)==null?void 0:Ie.max)??Je.rangeMax).toString()}})}},[xn,Eo]),aa=`${X}-${r.length}`;j.useEffect(()=>{if(!e||!r||r.length===0)return;const U=Qr[Bt];if(!U||U.length===0||on===aa)return;_({R:Bt==="R",G1:Bt==="G1",G2:Bt==="G2",B:Bt==="B"});const V=[...U].sort((Oe,De)=>Oe.x-De.x);let ie=0;V.length>0&&(ie=V[0].std);const I=Zt.filter(Oe=>Oe.channel===Bt);let pe=-1/0;for(const Oe of I)Oe.x>pe&&(pe=Oe.x);pe!==-1/0&&oe(pe),ja({read:ie}),br(aa)},[e,r,on,aa,Qr,Bt,ja,Zt]);const Y=(U,V)=>{gn(ie=>({...ie,[U]:V}))},we=U=>{let V=parseFloat(Dt[U]);isNaN(V)||V<0||ja({[U]:V})},Wt=()=>{F(G),br("")},sr=()=>{const U=parseFloat(Dt.rangeMin),V=parseFloat(Dt.rangeMax);!isNaN(U)&&!isNaN(V)&&U<V&&U>=0&&V<=100&&ja({gRange:{min:U,max:V}})},Gr=(U,V)=>{U.key==="Enter"&&(V==="rangeMin"||V==="rangeMax"?sr():we(V),U.target.blur())};j.useEffect(()=>{e&&xn.length>0&&ja({})},[e,lt,xn]);const Xt=U=>{_(V=>({...V,[U]:!V[U]}))},Xn=()=>{x(U=>U==="top3"?"default":"top3")},En=()=>{w==="raw"?x("default"):y(!0)},is=()=>{y(!1),x("raw")},oa=(U,V)=>{const ie=parseFloat(U),I=parseFloat(V);let pe=isNaN(ie)?"auto":ie,Oe=isNaN(I)?"auto":I;return h&&typeof pe=="number"&&pe<=0&&(pe="auto"),[pe,Oe]},ia=U=>{if(!U||!U.payload)return;const V=U.payload;if(v(V),st.current&&(oe(V.x),J(!1)),tr.current){const ie=ar.current.min,I=ar.current.max,{max:pe}=se();if(pe<=0)return;const Oe=Math.max(0,Math.min(100,V.x/pe*100));if(ze.current===1){const De=Math.min(Oe,I-.5);ja({gRange:{min:De,max:I}}),ce(2)}else if(ze.current===2){const De=Math.max(Oe,ie+.5);ja({gRange:{min:ie,max:De}}),ce(0),H(!1)}}},Na=j.useCallback(U=>{const{cx:V,cy:ie,fill:I}=U;return c.jsx("circle",{cx:V,cy:ie,r:3,fill:I,stroke:"none",style:{cursor:"pointer"}})},[]),_r=({active:U,payload:V})=>{if(U&&V&&V.length){const ie=V[0].payload;return c.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[c.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:ie.channel}),c.jsxs("div",{children:["Signal: ",ie.x.toFixed(2)]}),c.jsxs("div",{children:[d,": ",ie.y.toFixed(4)]}),ie.row!==void 0&&ie.col!==void 0&&!isNaN(ie.row)&&!isNaN(ie.col)&&c.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",ie.row,", Col ",ie.col]}),ie.filename&&c.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:ie.filename,children:ie.filename})]})}return null},no=U=>{f(U),U==="Linear"&&p(!1)};if(!e)return null;const bh=s==="dark"?"#ffffff":"#000000";let ss=d;d==="Linear"&&(ss="(Var - RN) / Mean");const Et=G!==X;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:U=>{U.stopPropagation()},children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:U=>U.stopPropagation(),children:[c.jsx(ai,{isOpen:g,onClose:()=>y(!1),onConfirm:is,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),m&&c.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),c.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),c.jsx("span",{className:"font-bold",children:m.channel}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),c.jsx("span",{children:m.x.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),c.jsx("span",{children:m.std.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),c.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(m.x/m.std).toFixed(2)})]})})]}),An&&c.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[c.jsx("button",{onClick:()=>yn(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"mb-4 text-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:xr==null?void 0:xr.toFixed(4)}),c.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",dr.length>0?"Density Curve Generated":"No Data"]})]}),c.jsx("div",{className:"flex-1 min-h-0",children:dr.length>0?c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(pN,{data:dr,margin:{top:10,right:30,left:0,bottom:20},children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),c.jsx(zn,{dataKey:"x",tickFormatter:U=>U.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),c.jsx(Gn,{tick:{fill:"#9ca3af",fontSize:10}}),c.jsx(Kr,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),c.jsx(ga,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),xr!==null&&c.jsx(Ko,{x:xr,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",c.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("button",{onClick:Sa,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),c.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>no("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${d==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),c.jsx("button",{onClick:()=>no("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${d==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),c.jsx("button",{onClick:()=>no("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${d==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:U=>p(U.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[c.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),c.jsx("input",{type:"number",placeholder:"Min",value:N,onChange:U=>O(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:A,onChange:U=>E(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),c.jsx("input",{type:"number",placeholder:"Min",value:P,onChange:U=>M(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:D,onChange:U=>T(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsx("button",{onClick:()=>{O(""),E(""),M(""),T("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>Xt("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),c.jsx("button",{onClick:()=>Xt("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),c.jsx("button",{onClick:()=>Xt("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),c.jsx("button",{onClick:()=>Xt("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),c.jsx("input",{type:"text",value:G,onChange:U=>ne(U.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),c.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),c.jsx("button",{onClick:()=>{H(!q),ce(q?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${q?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:q?le===1?"Pick Min":"Pick Max":"Select"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx("input",{type:"number",step:"0.1",value:Dt.rangeMin,onChange:U=>Y("rangeMin",U.target.value),onBlur:sr,onKeyDown:U=>Gr(U,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.1",value:Dt.rangeMax,onChange:U=>Y("rangeMax",U.target.value),onBlur:sr,onKeyDown:U=>Gr(U,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),c.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),c.jsx("input",{type:"number",value:R,onChange:U=>z(U.target.value),onKeyDown:na,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),c.jsx("input",{type:"number",value:B,onChange:U=>C(U.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[c.jsx("button",{onClick:()=>{J(!re),$&&oe(null)},disabled:q,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${re?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:re?"Pick Point":"Select Linear Limit"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Xn,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),c.jsx("button",{onClick:En,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:We,onChange:U=>Te(U.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:Be,onChange:U=>it(U.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:xt,onChange:U=>yr(U.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",value:be,onChange:U=>Q(U.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("input",{type:"number",value:he,onChange:U=>ve(U.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("button",{onClick:Ye,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),Z.length>0&&c.jsx("button",{onClick:()=>_e([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[Z.length," pts"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:bt.shot,onChange:U=>mn({...bt,shot:U.target.checked}),className:"rounded text-gray-500"})," ",c.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:bt.read,onChange:U=>mn({...bt,read:U.target.checked}),className:"rounded text-rose-500"})," ",c.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:bt.prnu,onChange:U=>mn({...bt,prnu:U.target.checked}),className:"rounded text-amber-500"})," ",c.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:bt.total,onChange:U=>mn({...bt,total:U.target.checked}),className:"rounded text-white"})," ",c.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),c.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",Bt,")",S&&c.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:Wt,disabled:S,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${S?"bg-gray-400 cursor-wait":Et?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:S?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),c.jsxs("select",{value:lt,onChange:U=>jt(Number(U.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[c.jsx("option",{value:1e5,children:"100k Pairs"}),c.jsx("option",{value:5e5,children:"500k Pairs"}),c.jsx("option",{value:2e6,children:"2M Pairs"}),c.jsx("option",{value:5e6,children:"5M Pairs"}),c.jsx("option",{value:1e7,children:"10M Pairs"})]}),Ut&&c.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",Ut.nPoints]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),c.jsx("input",{type:"text",inputMode:"decimal",value:Dt.read,onChange:U=>Y("read",U.target.value),onBlur:()=>we("read"),onKeyDown:U=>Gr(U,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center relative group",children:[c.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",c.jsx("button",{onClick:()=>yn(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),c.jsx("input",{type:"text",inputMode:"decimal",value:Dt.gain,onChange:U=>Y("gain",U.target.value),onBlur:()=>we("gain"),onKeyDown:U=>Gr(U,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),c.jsx("input",{type:"text",inputMode:"decimal",value:Dt.prnu,onChange:U=>Y("prnu",U.target.value),onBlur:()=>we("prnu"),onKeyDown:U=>Gr(U,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[c.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(ge==null?void 0:ge.manualTarget)||B}`,children:["M.DR @ SNR=",(ge==null?void 0:ge.manualTarget)||B]}),c.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:ge!=null&&ge.manualDR?`${ge.manualDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((ge==null?void 0:ge.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${R||"H"})`,children:[c.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),c.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:ge!=null&&ge.ptpDR?`${ge.ptpDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((ge==null?void 0:ge.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${R||"H"} on ${ge==null?void 0:ge.dominantChannel} Channel)`,children:[c.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",ge==null?void 0:ge.dominantChannel,")"]}),c.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:ge!=null&&ge.d55DR?`${ge.d55DR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),c.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:ir!==null?`${Math.round(ir)}`:"",children:ir!==null?ir>1e4?`${(ir/1e3).toFixed(1)}k`:`${Math.round(ir)}`:"--"})]})]}),$===null&&c.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),c.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${re||q?"cursor-crosshair":""}`,children:[c.jsx("div",{className:"row-start-1 col-start-1 h-full",children:c.jsx(yk,{vertical:!0,min:Qe,max:Nt,value:[P?parseFloat(P):Qe,D?parseFloat(D):Nt],onChange:([U,V])=>{M(U.toString()),T(V.toString())},logScale:h})}),c.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[Qt.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(RQ,{margin:{top:20,right:20,bottom:0,left:0},onClick:ia,children:[c.jsx("defs",{children:c.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[c.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),c.jsx(zn,{type:"number",dataKey:"x",name:"Signal",scale:h?"log":"linear",domain:oa(N,A),allowDataOverflow:!0,hide:!0}),c.jsx(Gn,{type:"number",dataKey:"y",name:d,scale:h?"log":"linear",domain:oa(P,D),label:{value:ss,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),c.jsx(Kr,{content:c.jsx(_r,{}),cursor:{strokeDasharray:"3 3"}}),$&&c.jsx(Ko,{x:$,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(bt.fitRange||q)&&c.jsxs(c.Fragment,{children:[c.jsx(Ko,{x:hr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${rr.min}%`,fill:"#22d3ee",fontSize:9}}),c.jsx(Ko,{x:or,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${rr.max}%`,fill:"#22d3ee",fontSize:9}})]}),k.R&&c.jsx(Nn,{name:"Red",data:Qr.R,fill:"#ef4444",shape:Na,onClick:ia,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),k.G1&&c.jsx(Nn,{name:"Green 1",data:Qr.G1,fill:"#22c55e",shape:Na,onClick:ia,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),k.G2&&c.jsx(Nn,{name:"Green 2",data:Qr.G2,fill:"#4ade80",shape:Na,onClick:ia,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),k.B&&c.jsx(Nn,{name:"Blue",data:Qr.B,fill:"#3b82f6",shape:Na,onClick:ia,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),bt.shot&&Le.shot.length>0&&c.jsx(Nn,{name:"Shot Noise (Ideal)",data:Le.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),bt.read&&Le.read.length>0&&c.jsx(Nn,{name:"Read Noise Floor",data:Le.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),bt.prnu&&Le.prnu.length>0&&c.jsx(Nn,{name:"PRNU (Non-uniformity)",data:Le.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),bt.total&&Le.total.length>0&&c.jsx(Nn,{name:"Total Noise Model",data:Le.total,line:{stroke:bh,strokeWidth:2},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),ct.length>0&&c.jsx(Nn,{name:`Target SNR=${B}`,data:ct,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),Er.length>0&&c.jsx(Nn,{name:`PTP Target SNR=${ge!=null&&ge.ptpTarget?ge.ptpTarget.toFixed(1):"?"}`,data:Er,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),Z.length>0&&c.jsx(Nn,{name:"Manual Markers",data:Z,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),c.jsx("div",{className:"row-start-2 col-start-2 w-full",children:c.jsx(yk,{min:Fe,max:et,value:[N?parseFloat(N):Fe,A?parseFloat(A):et],onChange:([U,V])=>{O(U.toString()),E(V.toString())},logScale:h})})]})]})})},uJ=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:o,onCameraSelect:i})=>c.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"relative md:col-span-3",children:[c.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>c.jsx("option",{value:s,children:s},s))}),c.jsxs("select",{onChange:s=>i(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[c.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),o.map(s=>c.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),fJ=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,o=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return c.jsxs("div",{className:`${o} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[c.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),c.jsx("div",{className:"mt-2 space-y-1 text-sm",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),c.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),c.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),c.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},dJ=({data:e,theme:t="dark"})=>{const r=j.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(i=>i.iso))].sort((i,s)=>Number(i)-Number(s)),[e]),n=j.useMemo(()=>{if(!e||e.length===0)return[0,4096];const i=e.flatMap(m=>[...m.R_range,...m.G1_range,...m.G2_range,...m.B_range]);if(i.length===0)return[0,4096];let s=Math.min(...i),l=Math.max(...i);const u=.25,d=l-s;if(d<u){const m=u-d;s-=m/2,l+=m/2}const f=(l-s)*.1,h=s-f,p=l+f;return[h,p]},[e]),a=t==="dark"?"#475569":"#e5e7eb",o=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:c.jsx("p",{children:"No data available for this mode."})}):c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(pN,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:a}),c.jsx(zn,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:o,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),c.jsx(Gn,{tick:{fill:o,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:i=>Number(i).toFixed(3)}),c.jsx(Kr,{content:c.jsx(fJ,{theme:t})}),c.jsx(Ya,{wrapperStyle:{fontSize:"14px",color:o}}),c.jsx(ga,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),c.jsx(Mr,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),c.jsx(ga,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),c.jsx(Mr,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),c.jsx(ga,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),c.jsx(Mr,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),c.jsx(ga,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),c.jsx(Mr,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},hJ=L.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=j.useMemo(()=>e.shootingModes.map(f=>f.modeName),[e.shootingModes]),[a,o]=j.useState(n[0]||""),{chartData:i,tableData:s}=j.useMemo(()=>{const f=e.shootingModes.find(m=>m.modeName===a);if(!(f!=null&&f.data))return{chartData:[],tableData:[]};const h=f.data.map(m=>({iso:m.iso,R_range:m.r.range,R_avg:m.r.avg,G1_range:m.g1.range,G1_avg:m.g1.avg,B_range:m.b.range,B_avg:m.b.avg,G2_range:m.g2.range,G2_avg:m.g2.avg})),p=f.data.map(m=>({iso:m.iso,levels:[m.r.avg,m.g1.avg,m.g2.avg,m.b.avg],clipping:m.clipping}));return{chartData:h,tableData:p}},[e.shootingModes,a]),l=`Raw Data (${a})`,u=j.useRef(null),d=j.useRef(null);return j.useEffect(()=>{const f=u.current,h=d.current;if(!f||!h)return;const p=new ResizeObserver(m=>{for(let v of m){const{width:w}=v.contentRect,g=Math.max(8,w/35);h.style.fontSize=`${g}px`}});return p.observe(f),()=>p.disconnect()},[]),c.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),c.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),c.jsx("select",{value:a,onChange:f=>o(f.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(f=>c.jsx("option",{value:f,children:f},f))})]}),c.jsxs("div",{ref:u,className:"h-64 relative",children:[c.jsx(dJ,{data:i,theme:t},a),c.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:c.jsx("p",{ref:d,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:l})}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),c.jsx("tbody",{children:s.map(({iso:f,levels:h,clipping:p})=>c.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[c.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[f,p&&c.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),c.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:h[0].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:h[1].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:h[3].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:h[2].toFixed(2)})]},f))})]})]})]})}),ye=(e,t,r)=>({avg:e,range:[t,r]}),Ep=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:ye(512.1,511.95,512.25),g1:ye(512.05,511.9,512.2),b:ye(512.12,511.98,512.28),g2:ye(512.06,511.92,512.22)},{iso:200,r:ye(512.15,512,512.3),g1:ye(512.1,511.95,512.25),b:ye(512.18,512.05,512.35),g2:ye(512.12,511.98,512.28)},{iso:400,r:ye(512.25,512.1,512.45),g1:ye(512.2,512.05,512.4),b:ye(512.3,512.15,512.5),g2:ye(512.22,512.08,512.42)},{iso:800,r:ye(512.5,512.2,512.8),g1:ye(512.45,512.15,512.75),b:ye(512.55,512.25,512.85),g2:ye(512.48,512.18,512.78)},{iso:1600,r:ye(513.1,512.8,513.4),g1:ye(513.05,512.75,513.35),b:ye(513.15,512.85,513.45),g2:ye(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:ye(512.02,511.98,512.05),g1:ye(512.01,511.97,512.04),b:ye(512.03,511.99,512.06),g2:ye(512.01,511.97,512.04)},{iso:640,r:ye(512.15,512.05,512.25),g1:ye(512.12,512.02,512.22),b:ye(512.18,512.08,512.28),g2:ye(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:ye(512,511.8,512.2),g1:ye(512,511.8,512.2),b:ye(512,511.8,512.2),g2:ye(512,511.8,512.2)},{iso:400,r:ye(512,511.7,512.3),g1:ye(512,511.7,512.3),b:ye(512,511.7,512.3),g2:ye(512,511.7,512.3)},{iso:1600,r:ye(512.2,511.5,512.8),g1:ye(512.2,511.5,512.8),b:ye(512.2,511.5,512.8),g2:ye(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:ye(511.95,511.8,512.1),g1:ye(511.95,511.8,512.1),b:ye(511.95,511.8,512.1),g2:ye(511.95,511.8,512.1)},{iso:800,r:ye(512.1,511.9,512.3),g1:ye(512.1,511.9,512.3),b:ye(512.1,511.9,512.3),g2:ye(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:ye(400,399.9,400.1),g1:ye(400,399.9,400.1),b:ye(400,399.9,400.1),g2:ye(400,399.9,400.1)},{iso:100,r:ye(400,399.9,400.1),g1:ye(400,399.9,400.1),b:ye(400,399.9,400.1),g2:ye(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:ye(400.1,399.8,400.3),g1:ye(400.1,399.8,400.3),b:ye(400.1,399.8,400.3),g2:ye(400.1,399.8,400.3)},{iso:800,r:ye(400.3,399.5,401.1),g1:ye(400.3,399.5,401.1),b:ye(400.3,399.5,401.1),g2:ye(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:ye(1024,1023.8,1024.2),g1:ye(1024,1023.8,1024.2),b:ye(1024,1023.8,1024.2),g2:ye(1024,1023.8,1024.2)},{iso:800,r:ye(1024.2,1023.5,1025),g1:ye(1024.2,1023.5,1025),b:ye(1024.2,1023.5,1025),g2:ye(1024.2,1023.5,1025)}]}]}],pJ=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=j.useState(""),[o,i]=j.useState("All"),s=j.useMemo(()=>["All",...Array.from(new Set(Ep.map(f=>f.manufacturer))).sort()],[]),l=j.useMemo(()=>Ep.filter(d=>{const f=d.name.toLowerCase().includes(n.toLowerCase()),h=o==="All"||d.manufacturer===o;return f&&h}),[n,o]),u=d=>{const f=document.getElementById(`camera-${d}`);f&&f.scrollIntoView({behavior:"smooth"})};return e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",c.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Ep.length," Models"]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:c.jsx(uJ,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:o,onManufacturerChange:i,cameras:l,onCameraSelect:u})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[l.map(d=>c.jsx("div",{id:`camera-${d.id}`,children:c.jsx(hJ,{camera:d,theme:r})},d.id)),l.length===0&&c.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:c.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},gJ=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=j.useState(""),[o,i]=j.useState(""),[s,l]=j.useState(""),[u,d]=j.useState(""),[f,h]=j.useState(null),p=()=>{const m=parseFloat(n),v=parseFloat(o),w=parseFloat(s),x=parseFloat(u);if(isNaN(m)||isNaN(v)||isNaN(w)||isNaN(x)){h(null);return}const g=m,y=v,S=w*w,b=x*x,k=(g+y)/2;if(k<=1e-9){h(0);return}const _=S*b/k,N=Math.sqrt(_);h(N)};return e?c.jsxs(Il,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:n,onChange:m=>a(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:o,onChange:m=>i(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:s,onChange:m=>l(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:u,onChange:m=>d(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsx("button",{onClick:p,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),f!==null&&c.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[c.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),c.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:f.toFixed(5)})]})]})]}):null},ny=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],mJ=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function yJ(e,t,r,n,a,o,i=.5){const u=[],d=Math.max(.1,Math.min(.9,i)),f=Math.hypot(t.x-e.x,t.y-e.y),h=Math.hypot(n.x-r.x,n.y-r.y),p=Math.hypot(r.x-e.x,r.y-e.y),m=Math.hypot(n.x-t.x,n.y-t.y),v=(f+h)/2/5,w=(p+m)/2/3,x=v*d,g=w*d;for(let y=0;y<4;y++)for(let S=0;S<6;S++){const b=S/5,k=y/3,_=(1-b)*(1-k)*e.x+b*(1-k)*t.x+(1-b)*k*r.x+b*k*n.x,N=(1-b)*(1-k)*e.y+b*(1-k)*t.y+(1-b)*k*r.y+b*k*n.y;u.push({x:_-x/2,y:N-g/2,w:x,h:g})}return u}function yN(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function Ff(e,t){const r=e.length,n=e[0].length,a=t.length,o=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const i=Array(r).fill(0).map(()=>Array(o).fill(0));for(let s=0;s<r;s++)for(let l=0;l<o;l++)for(let u=0;u<n;u++)i[s][l]+=e[s][u]*t[u][l];return i}function vJ(e,t){const r=yN(e),n=Ff(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],o=gN(a);if(!o)throw new Error("Singular Matrix (Check Input Data)");const i=[[o[0][0],o[0][1],o[0][2]],[o[1][0],o[1][1],o[1][2]],[o[2][0],o[2][1],o[2][2]]],s=Ff(r,t);return Ff(i,s)}function xJ(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((o,i)=>a===i?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const o=r[n];r[n]=r[a],r[a]=o;const i=r[n][n];if(Math.abs(i)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=i;for(let s=0;s<t;s++)if(s!==n){const l=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=l*r[n][u]}}return r.map(n=>n.slice(t))}function bJ(e,t,r){const n=[...e].sort((v,w)=>v.id-w.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(v=>{const w=v.rawMeans,x=[w[0]-t[0],w[1]-t[1],w[2]-t[2],w[3]-t[3]];let g,y,S;r?(S=x[0],y=(x[1]+x[2])/2,g=x[3]):(g=x[0],y=(x[1]+x[2])/2,S=x[3]),g=Math.max(0,g),y=Math.max(0,y),S=Math.max(0,S),a.push([g,y,S])});const i=a[18],s=(i[0]+i[1]+i[2])/3,l=1/Math.max(1e-9,s),u=a.map(v=>[v[0]*l,v[1]*l,v[2]*l]),f=vJ(u,ny),h=yN(f);let p;try{p=xJ(h)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:Ff(p,mJ)}}const wJ=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:o,onSizeChange:i})=>{const[s,l]=j.useState(n),[u,d]=j.useState(["0","0","0","0"]),[f,h]=j.useState(null),[p,m]=j.useState(null);if(j.useEffect(()=>{if(e&&r&&r.length===24){const k=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&d([k[0].toFixed(2),k[1].toFixed(2),k[2].toFixed(2),k[3].toFixed(2)])}},[e,r]),j.useEffect(()=>{if(!e||!r||r.length!==24)return;const b=u.map(k=>parseFloat(k));if(!b.some(isNaN))try{const k=bJ(r,b,s);h(k),m(null)}catch(k){m(k.message)}},[e,r,s,u]),!e)return null;const v=(b,k)=>{d(_=>{const N=[..._];return N[b]=k,N})},w=b=>{navigator.clipboard.writeText(b)},x=b=>b?b.map(k=>k.map(_=>_.toFixed(4))):[],g=f?x(f.matrix).flat().join(" "):"",y=s?["B","G1","G2","R"]:["R","G1","G2","B"],S=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return c.jsxs(Il,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(o*100),"%"]})]}),c.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:o,onChange:b=>i(parseFloat(b.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>l(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),c.jsx("button",{onClick:()=>l(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(b=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:`text-[10px] font-bold mb-1 ${S[b]}`,children:y[b]}),c.jsx("input",{type:"number",step:"0.01",value:u[b],onChange:k=>v(b,k.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},b))})]}),p?c.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:p}):f?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),c.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:x(f.matrix).map((b,k)=>c.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[c.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:b[0]}),c.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:b[1]}),c.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:b[2]})]},k))}),c.jsx("button",{onClick:()=>w(g),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):c.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function kJ(e,t){const r=e.length;let n=0,a=0,o=0,i=0;for(let l=0;l<r;l++)n+=e[l],a+=t[l],o+=e[l]*t[l],i+=e[l]*e[l];const s=r*i-n*n;return{slope:(r*o-n*a)/s,intercept:(a*i-n*o)/s}}function SJ(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let o=0;o<r;o++){const i=o>0?e[o-1]:e[0],s=o<r-1?e[o+1]:e[r-1];n[o]=(s-i)/a}return n}function vk(e,t,r,n){const a=Math.floor(n.x),o=Math.floor(n.y),i=Math.floor(n.w),s=Math.floor(n.h);if(i<8||s<8)return null;let l=[];for(let X=0;X<s;X++){const F=[],re=(o+X)*t;for(let J=0;J<i;J++)F.push(e[re+a+J]);l.push(F)}let u=0,d=0;for(let X=1;X<s-1;X+=2)for(let F=1;F<i-1;F+=2)u+=Math.abs(l[X][F+1]-l[X][F-1]),d+=Math.abs(l[X+1][F]-l[X-1][F]);let f=i,h=s,p=l;if(d>u){p=Array(i).fill(0).map(()=>Array(s).fill(0));for(let X=0;X<s;X++)for(let F=0;F<i;F++)p[F][s-1-X]=l[X][F];f=s,h=i}const m=[],v=[];for(let X=0;X<h;X++){const F=p[X],re=F.map((oe,q)=>q===0?0:Math.abs(oe-F[q-1])),J=Math.max(...re),$=re.indexOf(J);if(J>1){const oe=Math.max(0,$-3),q=Math.min(f,$+4);let H=0,le=0;for(let ce=oe;ce<q;ce++)H+=re[ce],le+=ce*re[ce];H>0&&(m.push(le/H),v.push(X))}}if(m.length<h*.4)return null;const{slope:w,intercept:x}=kJ(v,m),g=Math.cos(Math.atan(w)),y=[],S=[];for(let X=0;X<h;X++){const F=w*X+x;for(let re=0;re<f;re++)y.push((re-F)*g),S.push(p[X][re])}const k=Math.min(i,s)/2;let _=0;for(const X of y)Math.abs(X)<=k&&_++;let N=.125;if(_>0){const X=40*k/_;N=Math.max(.01,Math.min(.125,X))}const O=N,A=Array.from(y.keys()).sort((X,F)=>y[X]-y[F]),E=A.map(X=>y[X]),P=A.map(X=>S[X]),M=E[0],D=E[E.length-1],T=Math.floor((D-M)/O),B=new Array(T).fill(0),C=new Array(T).fill(0);for(let X=0;X<E.length;X++){const F=Math.floor((E[X]-M)/O);F>=0&&F<T&&(B[F]+=P[X],C[F]++)}let R=P[0];for(let X=0;X<T;X++)C[X]>0?(B[X]/=C[X],R=B[X]):B[X]=R;const z=B.slice(0,10).reduce((X,F)=>X+F,0)/10,G=B.slice(-10).reduce((X,F)=>X+F,0)/10;if(z>G){const X=Math.max(...B),F=Math.min(...B);for(let re=0;re<B.length;re++)B[re]=X-B[re]+F}const ne=SJ(B,O);return{esf:B,lsfFull:ne,binSize:O}}function jJ(e,t,r){if(e.length===0)return null;const n=4096,a=new Qi(n),o=r?1e3/r:1,i=new Float32Array(501);for(let m=0;m<=500;m++)i[m]=m/500*o;const s=new Float32Array(501).fill(0);let l=0,u=[],d=[],f=0;for(const m of e){const v=m.lsfFull,w=m.binSize;let x=0,g=-1/0;for(let P=0;P<v.length;P++)v[P]>g&&(g=v[P],x=P);let y=0,S=0;if(t>0)S=t,y=Math.round(t/w);else{const P=g*.2;let M=0;for(let R=x;R>=0;R--)if(v[R]<P){M=R;break}let D=v.length-1;for(let R=x;R<v.length;R++)if(v[R]<P){D=R;break}let C=(D-M)*w*8;C=Math.max(2,C),S=C,y=Math.round(C/w)}f+=S;const b=Math.max(0,x-y),k=Math.min(v.length,x+y),_=v.slice(b,k);if(_.length<8)continue;u.length===0&&(u=_,d=m.esf);const N=new Float32Array(n).fill(0);for(let P=0;P<_.length;P++){const M=.54-.46*Math.cos(2*Math.PI*P/(_.length-1));N[P]=_[P]*M}a.transform(N);const O=[],A=[];for(let P=0;P<=n/2;P++){const M=Math.sqrt(a._real[P]**2+a._imag[P]**2);O.push(M),A.push(P/(n*w)*o)}const E=O[0];if(E>0){for(let P=0;P<=500;P++){const M=i[P];s[P]+=NJ(M,A,O)/E}l++}}if(l===0)return null;const h=Array.from(s).map(m=>m/l);let p=null;for(let m=0;m<h.length-1;m++)if(h[m]>=.5&&h[m+1]<.5){p=i[m]+(.5-h[m])*(i[m+1]-i[m])/(h[m+1]-h[m]);break}return{esf:d,lsf:[],lsfCropped:u,mtf:h,freqs:Array.from(i),mtf50:p,calcRadius:f/l}}function NJ(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const _J=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:o,displaySettings:i})=>{const[s,l]=j.useState([]),[u,d]=j.useState(""),[f,h]=j.useState(""),[p,m]=j.useState(12),[v,w]=j.useState(!1),[x,g]=j.useState(1),[y,S]=j.useState(null),[b,k]=j.useState({x:100,y:50}),[_,N]=j.useState({w:1e3,h:800}),[O,A]=j.useState(!1),[E,P]=j.useState(!1),M=j.useRef({x:0,y:0}),D=j.useRef({w:0,h:0});j.useEffect(()=>{if(e&&n&&!v){const q=Math.max(n.w,n.h);m(q)}},[e,n,v]);const T=s.length>0?s[s.length-1].binSize:null,B=T?(1/T).toFixed(1):"-",C=j.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),R=()=>{if(!(!r||!n))try{let q;if((i==null?void 0:i.renderMode)==="advanced-zero-dep"&&i.advancedZeroDep){const H=mN(r,n,i);q=vk(H.data,H.width,H.height,{x:0,y:0,w:H.width,h:H.height})}else q=vk(r.data,r.width,r.height,n);q?l(H=>[...H,q]):alert("Could not detect valid edge.")}catch(q){console.error(q),alert("Error processing ROI")}},z=()=>{l([]),S(null),g(1)},G=()=>{if(!y)return;const q=parseFloat(u),ce=`data:text/csv;charset=utf-8,Frequency (${!isNaN(q)&&q>0?"lp/mm":"cy/px"}),MTF
`+y.freqs.map((be,Q)=>`${be.toFixed(6)},${y.mtf[Q].toFixed(6)}`).join(`
`),Z=encodeURI(ce),_e=document.createElement("a");_e.setAttribute("href",Z),_e.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)};j.useEffect(()=>{if(s.length===0){S(null);return}const q=parseFloat(u),H=!isNaN(q)&&q>0?q:null,ce=jJ(s,v?-1:p,H);S(ce)},[s,p,v,u]),j.useEffect(()=>{e&&s.length===0&&n&&r&&R()},[e]);const ne=q=>{o&&o(),!(q.target.closest("button")||q.target.closest("input"))&&(A(!0),M.current={x:q.clientX-b.x,y:q.clientY-b.y})},X=q=>{q.stopPropagation(),q.preventDefault(),P(!0),M.current={x:q.clientX,y:q.clientY},D.current={w:_.w,h:_.h}};j.useEffect(()=>{const q=le=>{if(O)k({x:le.clientX-M.current.x,y:le.clientY-M.current.y});else if(E){const ce=le.clientX-M.current.x,Z=le.clientY-M.current.y;N({w:Math.max(600,D.current.w+ce),h:Math.max(500,D.current.h+Z)})}},H=()=>{A(!1),P(!1)};return(O||E)&&(window.addEventListener("mousemove",q),window.addEventListener("mouseup",H)),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",H)}},[O,E]);const F=j.useMemo(()=>{if(!(y!=null&&y.mtf50)||!f)return null;const q=parseFloat(f);if(isNaN(q)||q<=0)return null;let H=y.mtf50;const le=parseFloat(u);return!isNaN(le)&&le>0&&(H=y.mtf50*(le/1e3)),H*2*q},[y,f,u]);if(!e)return null;const re=y?y.lsfCropped.map((q,H)=>({x:H,y:q})):[],J=y?y.esf.map((q,H)=>({x:H,y:q})):[],$=y?y.mtf.map((q,H)=>({freq:y.freqs[H],mtf:q})).filter(q=>q.freq<=(parseFloat(u)?200:1)):[],oe=u?"lp/mm":"cy/px";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden",style:{left:b.x,top:b.y,width:_.w,height:_.h,zIndex:a??100},onMouseDownCapture:o,children:[c.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${O?"cursor-grabbing":"cursor-grab"}`,onMouseDown:ne,children:[c.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[s.length," ROI",s.length!==1?"s":""]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),c.jsx("input",{type:"number",value:u,onChange:q=>d(q.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),c.jsx("input",{type:"number",value:f,onChange:q=>h(q.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",title:"Auto-calculated based on ROI size",children:[c.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),T?c.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[T.toFixed(3),"px",c.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",B,"x)"]})]}):c.jsx("span",{className:"text-gray-400 italic",children:"..."})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[240px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:v,onChange:q=>{const H=q.target.checked;w(H),H||m(C)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's Official NR"})]}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:v?"Calculated:":"Manual:"}),c.jsxs("span",{className:`font-mono font-bold ${v?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[v&&(y!=null&&y.calcRadius)?y.calcRadius.toFixed(2):p.toFixed(1)," px"]})]}),c.jsx("input",{type:"range",min:"2",max:C,step:"0.5",value:p,onChange:q=>{const H=parseFloat(q.target.value);m(H),w(!1)},disabled:v,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${v?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:R,className:"px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Add Current ROI"}),c.jsx("button",{onClick:G,disabled:!y,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),c.jsx("button",{onClick:z,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[c.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(Fs,{data:J,children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(zn,{dataKey:"x",hide:!0})," ",c.jsx(Gn,{hide:!0,domain:["auto","auto"]})," ",c.jsx(Kr,{contentStyle:{fontSize:"10px"}}),c.jsx(Mr,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",x>1?`(x${x.toFixed(0)})`:""]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),c.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:x,onChange:q=>g(parseFloat(q.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(Fs,{data:re,children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Ko,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),c.jsx(zn,{dataKey:"x",hide:!0}),c.jsx(Gn,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[q=>q,q=>q/x],allowDataOverflow:!0,tickFormatter:q=>q.toFixed(3)}),c.jsx(Kr,{contentStyle:{fontSize:"10px"},formatter:q=>[q.toFixed(5),"Amplitude"]}),c.jsx(Mr,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col min-h-[250px]",children:[c.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF / Spatial Frequency Response"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[(y==null?void 0:y.mtf50)&&c.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",c.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[y.mtf50.toFixed(2)," ",oe]})]}),F!==null&&c.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(F)," LW/PH"]})]})]}),c.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 400 60",className:"w-[40rem] h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),c.jsx(vo,{width:"100%",height:"100%",children:c.jsxs(Fs,{data:$,margin:{top:10,right:30,left:10,bottom:20},children:[c.jsx(Ja,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),c.jsx(zn,{dataKey:"freq",type:"number",tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${oe})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),c.jsx(Gn,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),c.jsx(Kr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:q=>`Freq: ${Number(q).toFixed(3)}`,formatter:q=>[q.toFixed(4),"MTF"]}),c.jsx(Ya,{verticalAlign:"top",height:20}),c.jsx(Mr,{type:"monotone",dataKey:"mtf",name:"SFR",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1}),(y==null?void 0:y.mtf50)&&c.jsx(Bu,{x:y.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:c.jsx(tn,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]})]}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:X})]})},PJ=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    if shift > 0:
        raw_data = raw_data.astype(np.uint32) * (1 << shift)
        raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,OJ=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:o})=>{const[i,s]=j.useState(!0),[l,u]=j.useState(!1),d=j.useRef(null),[f,h]=j.useState(4),[p,m]=j.useState(""),[v,w]=j.useState(""),[x,g]=j.useState("RGGB"),y=j.useMemo(()=>Object.keys(fd).sort(),[]);j.useEffect(()=>{e&&!d.current&&(async()=>{try{const k=await window.loadPyodide();await k.loadPackage("numpy"),await k.runPythonAsync(PJ),d.current=k,s(!1)}catch(k){console.error("Pyodide Init Failed",k)}})()},[e]),j.useEffect(()=>{if(e&&r){const b=r.whiteLevel;b>1e4?h(2):b>3e3?h(4):b>6e4&&h(0);const k=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(k)?g(k):g("RGGB")}},[e,r]);const S=async()=>{if(!(!r||!d.current)){u(!0);try{const b=d.current,k=p.trim()?p.trim().split(/\s+/).map(Number):[0,0,0,0];if(k.length===1&&!isNaN(k[0])&&k.push(k[0],k[0],k[0]),k.length<4)for(;k.length<4;)k.push(0);const _=v.trim()?v.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(_.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const N=x;b.globals.set("js_raw_bytes",new Uint8Array(r.data.buffer,r.data.byteOffset,r.data.byteLength)),b.globals.set("js_width",r.width),b.globals.set("js_height",r.height),b.globals.set("js_cfa",N),b.globals.set("js_bl_list",k),b.globals.set("js_shift",f),b.globals.set("js_cm_flat",_);const O=await b.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift, 
                    js_cm_flat.to_py()
                )
            `),A=O.toJs();O.destroy();const E=new Blob([A],{type:"image/x-adobe-dng"}),P=URL.createObjectURL(E),M=document.createElement("a");M.href=P;const D=n.substring(0,n.lastIndexOf("."))||"image";M.download=`${D}_16bit_manual.dng`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(P)}catch(b){console.error(b),alert("Export Failed: "+b.message)}finally{u(!1)}}};return e?c.jsxs(Il,{initialPosition:{x:window.innerWidth/2-250,y:150},onClose:t,zIndex:a,onFocus:o,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),c.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 flex flex-col gap-6",children:i?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse",children:"Initializing Python Kernel (Joraw+STRUCT)..."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Shift"}),c.jsx("input",{type:"number",value:f,onChange:b=>h(parseInt(b.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),c.jsxs("select",{value:x,onChange:b=>g(b.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]}),c.jsxs("div",{className:"col-span-2 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level"}),c.jsx("input",{type:"text",value:p,onChange:b=>m(b.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]})]}),c.jsx("div",{className:"mt-[-15px]",children:c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-gray-500",children:"4 = 12bit (x16) | 2 = 14bit (x4)"})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:b=>{const k=fd[b.target.value];k&&w(k),b.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),y.map(b=>c.jsx("option",{value:b,children:b},b))]})]}),c.jsx("textarea",{value:v,onChange:b=>w(b.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),c.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),c.jsx("button",{onClick:S,disabled:l,className:`w-full py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${l?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:l?"Processing Kernel...":"Convert & Download DNG"})]})})]}):null};function CJ(e,t,r,n=3){const o=r.byteLength,i=8,s=i+o,l=[{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:n,value:n===1?16:[16,16,16]},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:n===1?1:2},{id:273,type:4,count:1,value:i},{id:277,type:3,count:1,value:n},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:o}],u=2+l.length*12+4;let d=0;const f=l.map(g=>{let y=g.type===3?2:4;const S=g.count*y,b=S<=4;let k=0;return b||(k=d,d+=S),{...g,fits:b,totalBytes:S,extraOffset:k}}),h=s+u+d,p=new ArrayBuffer(h),m=new DataView(p),v=new Uint8Array(p);m.setUint16(0,18761,!0),m.setUint16(2,42,!0),m.setUint32(4,s,!0),v.set(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),i);let w=s;m.setUint16(w,l.length,!0),w+=2;const x=s+u;return f.forEach(g=>{if(m.setUint16(w,g.id,!0),m.setUint16(w+2,g.type,!0),m.setUint32(w+4,g.count,!0),g.fits)Array.isArray(g.value)||(g.type===3?m.setUint16(w+8,g.value,!0):m.setUint32(w+8,g.value,!0));else{const y=x+g.extraOffset;m.setUint32(w+8,y,!0),Array.isArray(g.value)&&g.value.forEach((S,b)=>{m.setUint16(y+b*2,S,!0)})}w+=12}),m.setUint32(w,0,!0),p}const MJ="http://localhost:5428",AJ=(e=!1)=>{const[t,r]=j.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return j.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const o=new AbortController,i=setTimeout(()=>o.abort(),1e3),s=await fetch(`${MJ}/health`,{method:"GET",signal:o.signal});if(clearTimeout(i),s.ok){const l=await s.json(),u=`Connected (${l.exiftool||"Ready"})`;r(d=>d.isConnected===!0&&d.message===u&&d.version===l.exiftool&&d.hasDngConverter===!!l.dng_converter?d:{isConnected:!0,message:u,version:l.exiftool,hasDngConverter:!!l.dng_converter})}else r(l=>l.isConnected===!1&&l.message==="Service Error"?l:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(i=>i.isConnected===!1&&i.message==="Not Detected"?i:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},EJ="JTR_BlobStore",to="raw_files",TJ=1,xh=()=>new Promise((e,t)=>{const r=indexedDB.open(EJ,TJ);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(to)||a.createObjectStore(to)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),xk=async(e,t)=>{const r=await xh();return new Promise((n,a)=>{const o=r.transaction(to,"readwrite");o.objectStore(to).put(t,e),o.oncomplete=()=>n(),o.onerror=()=>a(o.error)})},$J=async e=>{const t=await xh();return new Promise((r,n)=>{const i=t.transaction(to,"readonly").objectStore(to).get(e);i.onsuccess=()=>r(i.result),i.onerror=()=>n(i.error)})},DJ=async()=>{const e=await xh();return new Promise((t,r)=>{const n=e.transaction(to,"readwrite");n.objectStore(to).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},vN="jtr_workspace_index",RJ=e=>{try{const t=JSON.stringify(e);localStorage.setItem(vN,t)}catch(t){console.error("Failed to save workspace index",t)}},IJ=()=>{try{const e=localStorage.getItem(vN);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},LJ=async e=>{const n=(await xh()).transaction(to,"readwrite").objectStore(to),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(i=>{e.includes(i)||n.delete(i)})}},un=1024,bk=(e,t,r)=>{const n=e.width,a=e.height,o=new ImageData(t,r),i=e.data,s=o.data,l=n/t,u=a/r;for(let d=0;d<r;d++){const f=Math.floor(d*u),h=d*t*4,p=f*n*4;for(let m=0;m<t;m++){const w=Math.floor(m*l)*4,x=h+m*4,g=p+w;s[x]=i[g],s[x+1]=i[g+1],s[x+2]=i[g+2],s[x+3]=i[g+3]}}return o},BJ=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:o,displaySettings:i,zIndex:s,onFocus:l,rawImageData:u})=>{if(!e)return null;const d=!!i.showKadc&&!!i.blackLevel,f=i.blackLevel||[0,0,0,0],h=!!i.subtractBlackLevelFromStats&&!!i.blackLevel,p=j.useMemo(()=>{if(!e||!u||!i.advancedZeroDep||i.renderMode!=="advanced-zero-dep")return null;try{const{x:y,y:S,width:b,height:k}=e,_=mN(u,{x:y,y:S,w:b,h:k},i),N=[0,0,0,0],O=[0,0,0,0],A=Math.floor(S),E=Math.floor(y);for(let P=0;P<_.height;P++){const M=P*_.width;for(let D=0;D<_.width;D++){const T=_.data[M+D],B=A+P,C=E+D,R=B%2,z=C%2,G=R*2+z;N[G]+=T,O[G]++}}return N.map((P,M)=>O[M]>0?P/O[M]:0)}catch(y){return console.error("Unmix calc error",y),null}},[e,u,i]),m=(y,S,b)=>{if(!d)return null;const k=S*S;return k<=1e-4?0:(y-b)/k},v=(y,S)=>h?y-f[S]:y,w=()=>{if(!h){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let y,S,b,k;n?(k=0,S=1,b=2,y=3):(y=0,S=1,b=2,k=3);const _=O=>e.means[O]-f[O],N=O=>e.stdDevs[O];localStorage.setItem("import_signal_r",_(y).toString()),localStorage.setItem("import_signal_g1",_(S).toString()),localStorage.setItem("import_signal_g2",_(b).toString()),localStorage.setItem("import_signal_b",_(k).toString()),localStorage.setItem("import_sigma_r",N(y).toString()),localStorage.setItem("import_sigma_g1",N(S).toString()),localStorage.setItem("import_sigma_g2",N(b).toString()),localStorage.setItem("import_sigma_b",N(k).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},x=n?[{name:"B",desc:"(0,0)",mean:v(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",k:m(e.means[0],e.stdDevs[0],f[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:v(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",k:m(e.means[1],e.stdDevs[1],f[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:v(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",k:m(e.means[2],e.stdDevs[2],f[2]),unmixed:p?p[2]:null},{name:"R",desc:"(1,1)",mean:v(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",k:m(e.means[3],e.stdDevs[3],f[3]),unmixed:p?p[3]:null}]:[{name:"R",desc:"(0,0)",mean:v(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",k:m(e.means[0],e.stdDevs[0],f[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:v(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",k:m(e.means[1],e.stdDevs[1],f[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:v(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",k:m(e.means[2],e.stdDevs[2],f[2]),unmixed:p?p[2]:null},{name:"B",desc:"(1,1)",mean:v(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",k:m(e.means[3],e.stdDevs[3],f[3]),unmixed:p?p[3]:null}],g=p?"w-96":d?"w-80":"w-60";return c.jsxs(Il,{className:`${g} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:l,initialPosition:{x:20,y:80},children:[c.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",c.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),c.jsx("br",{}),"Y: ",Math.round(e.y)]}),c.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),c.jsxs("table",{className:"w-full mb-3",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[c.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),c.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",h?"*":""]}),c.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),d&&c.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"K"}),p&&c.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),c.jsx("tbody",{className:"font-mono text-xs",children:x.map((y,S)=>c.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[c.jsxs("td",{className:"py-1",children:[c.jsx("span",{className:`font-bold ${y.color}`,children:y.name}),c.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:y.desc})]}),c.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",title:h?"Mean minus Black Level":"Raw Mean",children:y.mean.toFixed(2)}),c.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:y.std.toFixed(2)}),d&&c.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:y.k!==null?y.k.toFixed(3):"-"}),p&&c.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:y.unmixed!==null?y.unmixed.toFixed(1):"-"})]},S))})]}),h&&c.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>o("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Histogram",children:"Hist"}),c.jsx("button",{onClick:()=>o("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Quantization Steps",children:"Quant"}),c.jsx("button",{onClick:()=>o("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Power Spectrum (FFT)",children:"FFT"}),c.jsx("button",{onClick:()=>o("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Pearson Correlation Analysis",children:"PCC"}),c.jsx("button",{onClick:w,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Color Noise Analysis (External Tool)",children:"ColorN"})]})]})]})},FJ=()=>{var lx;const[e,t]=j.useState(!0),[r,n]=j.useState("Initializing..."),a=j.useRef(!1),[o,i]=j.useState("dark");j.useEffect(()=>{const W=window.document.documentElement;W.classList.remove(o==="dark"?"light":"dark"),W.classList.add(o)},[o]);const[s,l]=j.useState(!1),[u,d]=j.useState(!1),[f,h]=j.useState(!1),[p,m]=j.useState(!1),v=AJ(s||u||f),[w,x]=j.useState(!1),[g,y]=j.useState([]),[S,b]=j.useState(-1),[k,_]=j.useState([]),N=j.useMemo(()=>g[S],[g,S]),O=j.useRef(null);j.useEffect(()=>{O.current=N||null},[N]);const A=(N==null?void 0:N.file)||null,E=(N==null?void 0:N.imageElement)||null,P=(N==null?void 0:N.rawImageData)||null,M=(N==null?void 0:N.rawFileBuffer)||null,D=(N==null?void 0:N.renderedRawImageData)||null,T=(N==null?void 0:N.referenceImageData)||null,B=(N==null?void 0:N.sampledImageData)||null,C=(N==null?void 0:N.exifData)||null,R=(N==null?void 0:N.isThreePlane)||!1,z=(N==null?void 0:N.xtransPhase)||{x:0,y:0},G=(N==null?void 0:N.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[ne,X]=j.useState(!1),[F,re]=j.useState(null),[J,$]=j.useState(!1),[oe,q]=j.useState(!1),[H,le]=j.useState(null),[ce,Z]=j.useState([]),[_e,be]=j.useState(100),[Q,he]=j.useState(!0),[ve,Ye]=j.useState(!1),[We,Te]=j.useState(null),[Be,it]=j.useState(!1),[xt,yr]=j.useState(!1),[st,tr]=j.useState(!1),[ze,Ut]=j.useState(!1),[$t,rr]=j.useState(!1),[Nr,mt]=j.useState("1.0"),[Ge,lt]=j.useState(!1),[jt,nr]=j.useState(!1),[ar,Zr]=j.useState(!1),[Dt,gn]=j.useState(!1),[bt,mn]=j.useState({x:0,y:0}),[An,yn]=j.useState(!1),[dr,vr]=j.useState(!1),[xr,vn]=j.useState([]),[on,br]=j.useState(0),[Wn,na]=j.useState(null),[Zt,Qt]=j.useState(!1),[Bt,se]=j.useState([]),[Ce,Fe]=j.useState(.5),[et,Qe]=j.useState(!1),[Nt,hr]=j.useState(2),[or,Le]=j.useState(1),[ct,Mt]=j.useState([]),[At,ir]=j.useState(null),[ge,Er]=j.useState(0),[Sa,Qr]=j.useState([]),[xn,Ao]=j.useState([]),[Eo,ja]=j.useState(64),[aa,Y]=j.useState(10),[we,Wt]=j.useState(10),[sr,Gr]=j.useState(4),[Xt,Xn]=j.useState(1),[En,is]=j.useState(0),[oa,ia]=j.useState("processed"),[Na,_r]=j.useState(!1),no=j.useMemo(()=>G.blackLevel?G.blackLevel:P!=null&&P.blackLevels?[P.blackLevels[0],P.blackLevels[1],P.blackLevels[2],P.blackLevels[3]]:[0,0,0,0],[G.blackLevel,P]),bh=(C==null?void 0:C.ImageHeight)||(C==null?void 0:C.ExifImageHeight)||(P==null?void 0:P.height)||0,[ss,Et]=j.useState(null),[U,V]=j.useState(null),[ie,I]=j.useState({x:0,y:0}),[pe,Oe]=j.useState(1),[De,Je]=j.useState("pan"),Ke=j.useRef(null),Ie=j.useRef(null),Rt=j.useCallback(async()=>{if(!M||!N)return;tr(!1);const W=ze,K=$t;V(`Rendering 16-bit TIFF (${W?"Stretched":"Native DN"} | ${K?"sRGB":"Linear"})...`);try{const ee=await qQ(M.slice(0),G,W,K),ae=CJ(ee.width,ee.height,ee.data,ee.channels),xe=new Blob([ae],{type:"image/tiff"}),me=URL.createObjectURL(xe),Ae=document.createElement("a"),Pe=N.fileName||"rendered",Ee=Pe.substring(0,Pe.lastIndexOf("."))||Pe,Ne=[W?"stretch":"native",K?"srgb":"linear"].join("_");Ae.href=me,Ae.download=`${Ee}_${Ne}.tif`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(me)}catch(ee){Et("TIFF Export Failed: "+ee.message)}finally{V(null)}},[M,N,G,ze,$t]),yt=j.useCallback(()=>{!M||!N||tr(!0)},[M,N]),Ft=j.useCallback(async()=>{if(!P||!N)return;const W=parseFloat(Nr);if(isNaN(W)||W<=0){Et("Invalid multiplier for stretch.");return}V(`Stretching DNG by ${W}x...`);try{await new Promise(wt=>setTimeout(wt,50));const{width:K,height:ee,data:ae,blackLevels:xe,whiteLevel:me,bayerPattern:Ae}=P,Pe=new Uint16Array(ae.length);for(let wt=0;wt<ae.length;wt++)Pe[wt]=Math.min(65535,Math.round(ae[wt]*W));const Ee=no.map(wt=>wt*W),Ne=me*W,$e=uc(K,ee,Pe,Ee,Ne,Ae),Ze=new Blob([$e],{type:"image/x-adobe-dng"}),ht=URL.createObjectURL(Ze),pt=document.createElement("a");pt.href=ht;const Wr=(N.fileName||"image.dng").replace(/\.[^/.]+$/,"");pt.download=`${Wr}_stretched_${W}x.dng`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),URL.revokeObjectURL(ht),pr(`Successfully exported stretched DNG: ${W}x`,"info")}catch(K){Et(`Stretch Export Failed: ${K.message}`)}finally{V(null)}},[P,N,Nr,no]),pr=(W,K="info")=>{console.log(`[App] ${W}`)};j.useEffect(()=>{const W=K=>{(K.ctrlKey||K.metaKey)&&K.key.toLowerCase()==="s"&&(K.preventDefault(),yt())};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[yt]),j.useEffect(()=>{(async()=>{if(a.current)return;const K=IJ();if(K&&(n("Restoring layout..."),i(K.theme),he(K.sidebarOpen),K.sessions.length>0)){n(`Restoring ${K.sessions.length} images...`);const ee=[];for(const ae of K.sessions){if(a.current){console.log("Restoration cancelled.");return}await new Promise(xe=>setTimeout(xe,50));try{const xe=await $J(ae.id);if(xe){const me={id:ae.id,fileName:ae.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:xe,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:ae.isThreePlane,displaySettings:ae.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:Ae,analysisData:Pe}=await wi(xe);let Ee=null;Pe&&(Ee=await pk(xe,ae.displaySettings));const Ne=URL.createObjectURL(Ae),$e=new Image;$e.src=Ne,await new Promise(Ze=>{$e.onload=()=>Ze()}),ee.push({...me,rawImageData:Pe,renderedRawImageData:Ee,previewUrl:Ne,imageElement:$e,exifData:Pe.metadata})}}catch(xe){console.error(`Failed to restore session ${ae.id}`,xe)}}if(a.current)return;if(y(ee),K.activeSessionId){const ae=ee.findIndex(xe=>xe.id===K.activeSessionId);ae>=0?b(ae):ee.length>0&&b(0)}Z(K.windows)}a.current||t(!1)})()},[]);const ue=j.useRef(null),qe=j.useCallback(()=>{e||(ue.current&&clearTimeout(ue.current),ue.current=window.setTimeout(async()=>{var ee;const W={version:1,timestamp:Date.now(),activeSessionId:((ee=g[S])==null?void 0:ee.id)||null,theme:o,sidebarOpen:Q,sessions:g.map(ae=>({id:ae.id,fileName:ae.fileName,fileType:ae.file?ae.file.type:"application/octet-stream",fileSize:ae.rawFileBuffer?ae.rawFileBuffer.byteLength:0,displaySettings:ae.displaySettings,isThreePlane:ae.isThreePlane})),windows:ce.map(ae=>({id:ae.id,type:ae.type,roi:ae.roi,zIndex:ae.zIndex,initialPosition:ae.initialPosition,sessionId:ae.sessionId,isBGGR:ae.isBGGR,isMinimized:ae.isMinimized||!1,internalState:ae.internalState}))};RJ(W);const K=g.map(ae=>ae.id);LJ(K)},1e3))},[g,ce,S,o,Q,e]);j.useEffect(()=>{qe()},[qe]);const Me=j.useCallback(async()=>{a.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await DJ()}catch(W){console.error("Failed to clear DB",W)}window.location.reload()},[]),ut=j.useCallback(W=>{y(K=>K.map((ee,ae)=>ae===S?{...ee,...W}:ee))},[S]),_t=()=>b(W=>Math.min(W+1,g.length-1)),bn=()=>b(W=>Math.max(0,W-1));j.useEffect(()=>{if(P&&F){const W=ki(P.data,P.width,P.height,F.x,F.y,F.width,F.height);re(W)}},[P]);const dt=W=>{if(!F||!N)return;const K=Date.now().toString()+Math.random().toString().slice(2,5),ee=Math.max(_e,...ce.map(me=>me.zIndex),100),ae=ce.length%10*30,xe=W==="fft"?{x:50,y:50}:W==="histogram"?{x:100,y:100}:{x:150,y:150};Z(me=>[...me,{id:K,type:W,roi:{x:F.x,y:F.y,w:F.width,h:F.height},zIndex:ee+1,initialPosition:{x:xe.x+ae,y:xe.y+ae},sessionId:N.id,isBGGR:J,isMinimized:!1,stackFiles:(W==="fft"||W==="pearson"||W==="histogram")&&k.length>0?k:void 0}])},wr=W=>{Z(K=>K.filter(ee=>ee.id!==W))},wn=W=>{Z(K=>K.map(ee=>ee.id===W?{...ee,isMinimized:!0}:ee))},ao=W=>{Z(K=>K.map(ee=>ee.id===W?{...ee,isMinimized:!1}:ee)),ls(W)},ls=W=>{Z(K=>{const ee=Math.max(_e,...K.map(ae=>ae.zIndex));return K.map(ae=>ae.id===W?{...ae,zIndex:ee+1}:ae)})},wh=(W,K)=>{Z(ee=>ee.map(ae=>ae.id===W?{...ae,internalState:{...ae.internalState,...K}}:ae))},cs=()=>{const W=Math.max(_e,...ce.map(K=>K.zIndex));be(W+1)},kh=(W,K)=>{Z(ee=>ee.map(ae=>ae.id===W?{...ae,roi:K}:ae))};j.useEffect(()=>{if(!C)return;const W=C.CFAPattern2||C.CFAPattern;if(W){let K="";Array.isArray(W)?K=W.join(""):typeof W=="string"?K=W.replace(/[\s,]+/g,""):typeof W=="number"&&(K=String(W)),K==="0112"?$(!1):K==="2110"&&$(!0)}},[C]),j.useEffect(()=>{let W;const K=()=>{if(et&&Dt){const ee=Date.now()/1e3,ae=.55+.45*Math.sin(ee*Nt);Le(ae),W=requestAnimationFrame(K)}else Le(1)};return et&&Dt?K():Le(1),()=>{W&&cancelAnimationFrame(W)}},[et,Dt,Nt]),j.useEffect(()=>{const W=K=>{K.key==="Escape"&&Dt&&(gn(!1),mn({x:0,y:0}),Qe(!1))};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[Dt]),j.useEffect(()=>()=>{g.forEach(W=>{W.previewUrl&&URL.revokeObjectURL(W.previewUrl)}),Ie.current&&Ie.current.terminate()},[]);const yi=async(W,K=!0)=>{K&&(I({x:0,y:0}),Oe(1),Er(0),Qr([]),Ao([]),Ye(!1),Te(null),X(!1),vr(!1),vn([]),se([]),br(0));let ee=null;if(v.isConnected){const Pe=new FormData;Pe.append("file",W);try{const Ne=await(await fetch("http://localhost:5428/read",{method:"POST",body:Pe})).json();if(Ne.success){let $e=Ne.data;Array.isArray($e)&&$e.length===1&&($e=$e[0]),ee=$e}}catch(Ee){console.warn("Auto Exif fetch failed",Ee)}}const ae=W.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(W.type)||ae)){Et("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let me={file:W,exifData:ee};if(ae||W.type==="image/x-adobe-dng")try{K?V("Processing RAW file (this may take a moment)..."):_r(!0);const Pe=await W.arrayBuffer();me.rawFileBuffer=Pe;const{previewBlob:Ee,analysisData:Ne}=await wi(Pe);me.rawImageData=Ne,me.isThreePlane=Ne.isThreePlane||!1,Ne.isThreePlane&&K&&X(!0);let $e=!1,Ze=null,ht=!1;if(Ne.isXTrans){ht=!0,Ze=Pe;const Wr=(await Pf(Pe,0,0)).dngBuffer,wt=await wi(Wr);me.rawFileBuffer=Wr,me.rawImageData=wt.analysisData,me.previewUrl=URL.createObjectURL(wt.previewBlob),$e=!0}else me.previewUrl=URL.createObjectURL(Ee);me.originalRawFileBuffer=Ze,me.isXTransOriginal=ht,me.isXTransConverted=$e,me.xtransPhase={x:0,y:0};const pt=new Image;pt.src=me.previewUrl||"",await new Promise((Tr,Wr)=>{pt.onload=()=>{me.imageElement=pt,Tr()},pt.onerror=()=>{Tr()}})}catch(Pe){Et(`Failed to process RAW file: ${Pe.message}`),V(null),_r(!1);return}else try{V("Processing image...");const{previewBlob:Pe,analysisData:Ee}=await UQ(W);me.rawImageData=Ee,me.rawFileBuffer=await W.arrayBuffer(),me.isThreePlane=Ee.isThreePlane||!1,me.isXTransOriginal=!1,me.isXTransConverted=!1,me.originalRawFileBuffer=null;const Ne=URL.createObjectURL(Pe);me.previewUrl=Ne;const $e=new Image;$e.src=Ne,await new Promise(Ze=>{$e.onload=()=>{me.imageElement=$e,Ze()},$e.onerror=()=>{Et("Could not load the image file."),Ze()}})}catch(Pe){Et(`Failed to process image: ${Pe.message}`),V(null);return}const Ae=Date.now().toString()+Math.random();if(me.rawFileBuffer&&await xk(Ae,me.rawFileBuffer),K){const Pe={exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},Ee={id:Ae,fileName:W.name,file:W,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:Pe,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...me};y(Ne=>{const $e=[...Ne,Ee];return b($e.length-1),$e})}else ut(me);V(null),_r(!1)},Tn=async W=>{V("Converting to DNG...");try{const K=new FormData;K.append("file",W);const ee=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:K}),ae=ee.headers.get("content-type")||"";if(ee.ok)if(ae.includes("application/json")){const xe=await ee.json();throw new Error(xe.error||"Conversion failed")}else{const xe=await ee.blob(),me=URL.createObjectURL(xe),Ae=document.createElement("a");Ae.href=me;const Pe=W.name,Ee=Pe.substring(0,Pe.lastIndexOf("."))+".dng"||"converted.dng";Ae.download=Ee,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(me);const Ne=new File([xe],Ee,{type:"image/x-adobe-dng"});await yi(Ne,!0)}else{const xe=await ee.text();throw new Error(`HTTP ${ee.status}: ${xe}`)}}catch(K){V(null),Et(`Conversion Error: ${K.message}`)}},Sh=(W,K)=>{W&&(K==="direct"?yi(W,!0):Tn(W))},jh=async W=>{var ee;const K=(ee=W.target.files)==null?void 0:ee[0];K&&(await yi(K,!0),W.target.value="")},Nh=async(W,K,ee,ae)=>{!W||!K||(V("Processing Pair Difference (May take a while)..."),Et(null),setTimeout(async()=>{try{const xe=await W.arrayBuffer(),me=await K.arrayBuffer(),Ae=await Mp(xe,me,ee,ae),Pe=uc(Ae.width,Ae.height,Ae.rawData),Ee=new File([Pe],`Diff_${W.name}_${K.name}.dng`,{type:"image/x-adobe-dng"});await yi(Ee,!0),dt("fft")}catch(xe){console.error("Pair Processing Error",xe),Et("Pair Processing Failed: "+xe.message)}finally{V(null)}},100))},Gu=async W=>{if(W.length<2){Et("Need at least 2 files for Batch Diff.");return}V(`Batch Processing 0/${Math.floor(W.length/2)} pairs...`);const K=Array.from(W).sort((ee,ae)=>ee.name.localeCompare(ae.name,void 0,{numeric:!0}));try{for(let ee=0;ee<K.length-1;ee+=2){const ae=K[ee],xe=K[ee+1];V(`Batch Processing Pair ${Math.floor(ee/2)+1}/${Math.floor(K.length/2)}: ${ae.name} & ${xe.name}`);const me=await ae.arrayBuffer(),Ae=await xe.arrayBuffer(),Pe=await Mp(me,Ae,!1,!1),Ee=uc(Pe.width,Pe.height,Pe.rawData),Ne=new Blob([Ee],{type:"image/x-adobe-dng"}),$e=URL.createObjectURL(Ne),Ze=document.createElement("a");Ze.href=$e,Ze.download=`Diff_${ae.name}_${xe.name}.dng`,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),URL.revokeObjectURL($e)}}catch(ee){console.error("FFT Batch Error",ee),Et("Batch Processing Failed: "+ee.message)}finally{V(null)}},Ll=async W=>{if(W.length<1)return;const K=Array.from(W).sort((ee,ae)=>ee.name.localeCompare(ae.name,void 0,{numeric:!0}));_(K),await yi(K[0],!0)},Bl=async()=>{_r(!0);const W=128,K=W,ee=W,ae=K*ee,xe=new Uint16Array(ae),me=Xe=>{const kt=Xe/sr+En;return Math.sin(2*Math.PI*kt)>=0?1:0},Ae=32,Pe=Xt*.5,Ee=Math.max(1e-4,Xt/Ae);for(let Xe=0;Xe<ee;Xe++){let kt=0;const kr=Xe+.5-Pe;for(let Ht=0;Ht<Ae;Ht++){const Sn=kr+(Ht+.5)*Ee;kt+=me(Sn)}const Xr=kt/Ae,Pt=Math.round(Xr*65535);for(let Ht=0;Ht<K;Ht++)xe[Xe*K+Ht]=Pt}const Ne=new ImageData(un,un),$e=un/K,Ze=Xt/2;for(let Xe=0;Xe<un;Xe++){const kt=Xe/$e,Pr=Math.floor(kt),kr=kt-Pr,Xr=kr>=.5-Ze&&kr<.5+Ze;for(let Pt=0;Pt<un;Pt++){const Ht=Pt/$e,Sn=Math.floor(Ht),sn=Ht-Sn,vi=sn>=.5-Ze&&sn<.5+Ze,$r=(Xe*un+Pt)*4;if(Sn>=K||Pr>=ee){Ne.data[$r]=30,Ne.data[$r+1]=34,Ne.data[$r+2]=40,Ne.data[$r+3]=255;continue}if(Xr&&vi){const Do=xe[Pr*K+Sn],xi=Math.round(Do/257);Ne.data[$r]=xi,Ne.data[$r+1]=xi,Ne.data[$r+2]=xi,Ne.data[$r+3]=255}else Ne.data[$r]=30,Ne.data[$r+1]=34,Ne.data[$r+2]=40,Ne.data[$r+3]=255}}const ht=new ImageData(un,un),pt=ee/un;for(let Xe=0;Xe<un;Xe++){const kt=(Xe+.5)*pt,kr=me(kt)>.5?255:0,Xr=Xe*un*4;for(let Pt=0;Pt<un;Pt++){const Ht=Xr+Pt*4;ht.data[Ht]=kr,ht.data[Ht+1]=kr,ht.data[Ht+2]=kr,ht.data[Ht+3]=255}}const Tr=uc(K,ee,xe),Wr=new File([Tr],"pattern_test.dng",{type:"image/x-adobe-dng"}),wt=Date.now().toString();try{const{previewBlob:Xe,analysisData:kt}=await wi(Tr.slice(0)),Pr=await pk(Tr.slice(0),G),kr=bk(Pr,un,un),Xr=URL.createObjectURL(Xe),Pt=new Image;Pt.src=Xr,await new Promise(Sn=>{Pt.onload=()=>Sn()}),await xk(wt,Tr);const Ht={id:wt,fileName:"pattern_test.dng",file:Wr,imageElement:Pt,rawImageData:kt,rawFileBuffer:Tr,renderedRawImageData:kr,referenceImageData:ht,sampledImageData:Ne,exifData:null,isThreePlane:!1,previewUrl:Xr,displaySettings:G,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(A==null?void 0:A.name)==="pattern_test.dng"?ut(Ht):y(Sn=>{const sn=[...Sn,Ht];return b(sn.length-1),sn})}catch(Xe){console.error("Error generating pattern:",Xe),Et(`Error generating pattern: ${Xe.message}`)}_r(!1),V(null)},Uu=()=>{it(!0)},_h=()=>{it(!1),ia("sampled"),V("Generating..."),setTimeout(()=>Bl(),50)},To=j.useRef({period:sr,fill:Xt,phase:En});j.useEffect(()=>{(A==null?void 0:A.name)==="pattern_test.dng"&&(To.current.period!==sr||To.current.fill!==Xt||To.current.phase!==En)&&(To.current={period:sr,fill:Xt,phase:En},Bl())},[sr,Xt,En,A]);const je=j.useCallback(W=>{if(ut({displaySettings:W}),!M)return;_r(!0),Ie.current&&Ie.current.terminate();const K=new Worker(new URL("/assets/renderWorker-BhikMEl_.js",import.meta.url),{type:"module"});Ie.current=K,K.onmessage=ee=>{const{success:ae,imageData:xe,error:me}=ee.data;if(ae){let Ae=xe;(A==null?void 0:A.name)==="pattern_test.dng"&&(Ae=bk(xe,un,un)),ut({renderedRawImageData:Ae})}else Et(me||"Unknown worker error");_r(!1),K.terminate(),Ie.current=null},K.postMessage({buffer:M.slice(0),settings:W})},[M,A,ut]),at=async(W,K)=>{V("Re-sampling X-Trans with new Phase...");try{const ae=(await Pf(K,W.x,W.y)).dngBuffer,xe=await wi(ae),me=URL.createObjectURL(xe.previewBlob),Ae=new Image;Ae.src=me,await new Promise(Pe=>{Ae.onload=()=>Pe()}),N!=null&&N.previewUrl&&URL.revokeObjectURL(N.previewUrl),ut({rawFileBuffer:ae,rawImageData:xe.analysisData,previewUrl:me,imageElement:Ae,xtransPhase:W}),re(null)}catch(ee){console.error("X-Trans Phase Update Failed",ee),Et("Phase Update Failed: "+ee.message)}finally{V(null)}},tt=W=>{if(!N||!N.originalRawFileBuffer||!N.isXTransConverted)return;const K={...N.xtransPhase,...W};at(K,N.originalRawFileBuffer)},rt=j.useCallback(async W=>{if(N)if(W){if(N.isXTransConverted)return;const K=N.originalRawFileBuffer||N.rawFileBuffer;if(!K)return;V("Converting X-Trans to Pseudo-Bayer DNG...");try{const ee=N.xtransPhase||{x:0,y:0},xe=(await Pf(K,ee.x,ee.y)).dngBuffer,me=await wi(xe),Ae=URL.createObjectURL(me.previewBlob),Pe=new Image;Pe.src=Ae,await new Promise(Ee=>{Pe.onload=()=>Ee()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),ut({rawFileBuffer:xe,rawImageData:me.analysisData,previewUrl:Ae,imageElement:Pe,isXTransConverted:!0,originalRawFileBuffer:K}),re(null)}catch(ee){console.error("X-Trans Conversion Failed",ee),Et("Failed to convert X-Trans: "+ee.message)}finally{V(null)}}else{if(!N.isXTransConverted)return;const K=N.originalRawFileBuffer;if(!K){Et("Original X-Trans buffer lost. Cannot revert.");return}V("Reverting to Native X-Trans...");try{const ee=await wi(K),ae=URL.createObjectURL(ee.previewBlob),xe=new Image;xe.src=ae,await new Promise(me=>{xe.onload=()=>me()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),ut({rawFileBuffer:K,rawImageData:ee.analysisData,previewUrl:ae,imageElement:xe,isXTransConverted:!1}),re(null)}catch(ee){console.error("X-Trans Revert Failed",ee),Et("Failed to revert X-Trans: "+ee.message)}finally{V(null)}}},[N,ut]);let Ur=D||E;oa==="reference"&&T?Ur=T:oa==="sampled"&&B&&(Ur=B);const kn=U||Na,Hn=W=>{if(Ke.current){const K=Ke.current,{width:ee,height:ae}=K.getBoundingClientRect(),xe=ee/2,me=ae/2,Ae=W/pe,Pe=xe-(xe-ie.x)*Ae,Ee=me-(me-ie.y)*Ae;I({x:Pe,y:Ee})}Oe(W)},Fa=W=>{if(!W)return;if(!P){re(null);return}oe&&q(!1);const K=ki(P.data,P.width,P.height,W.x,W.y,W.w,W.h);re(K)},$o=W=>{le(W),Fa(W)},za=()=>{Je(W=>W==="pan"?"select":"pan")},lr=W=>{if(ge===0||ge>4)return;const K=[...Sa,W];Qr(K),ge===4?(Fl(K),Er(0)):Er(ge+1)},Ph=(W,K,ee,ae)=>{const xe=W[0],me=W[1],Ae=W[2],Pe=W[3],Ee=K/2,Ne=[];for(let $e=0;$e<ee;$e++){const Ze=ee>1?$e/(ee-1):.5;for(let ht=0;ht<ae;ht++){const pt=ae>1?ht/(ae-1):.5,Tr=xe.x*(1-pt)+me.x*pt,Wr=xe.y*(1-pt)+me.y*pt,wt=Ae.x*(1-pt)+Pe.x*pt,Xe=Ae.y*(1-pt)+Pe.y*pt,kt=Tr*(1-Ze)+wt*Ze,Pr=Wr*(1-Ze)+Xe*Ze,kr=kt-Ee,Xr=Pr-Ee;Ne.push({x:kr,y:Xr,w:K,h:K})}}return Ne},Fl=W=>{!P||!N||(V("Calculating DR Lab Grid..."),setTimeout(()=>{try{const K=Ph(W,Eo,aa,we);Ao(K);const me=[...[`#BlackLevel: ${(G.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${P.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Ae=`img${N.fileName||"image"}`;K.forEach((Ze,ht)=>{const pt=Math.floor(ht/we)+1,Tr=ht%we+1,Wr=ki(P.data,P.width,P.height,Ze.x,Ze.y,Ze.w,Ze.h),wt=Wr.means,Xe=Wr.stdDevs,kt=`${Ae},${pt},${Tr},${wt[0].toFixed(4)},${wt[1].toFixed(4)},${wt[2].toFixed(4)},${wt[3].toFixed(4)},${Xe[0].toFixed(4)},${Xe[1].toFixed(4)},${Xe[2].toFixed(4)},${Xe[3].toFixed(4)}`;me.push(kt)});const Pe=me.join(`
`),Ee=new Blob([Pe],{type:"text/csv;charset=utf-8;"}),Ne=URL.createObjectURL(Ee),$e=document.createElement("a");$e.setAttribute("href",Ne),$e.setAttribute("download","dr_lab_results.csv"),document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(Ne),Qr([])}catch(K){Et("DR Lab Error: "+K.message)}finally{V(null)}},100))},Wu=async(W,K)=>{if(Sa.length<4&&xn.length<1){Et("Please mark the grid on an image first before running batch processing.");return}let ee=xn;if(ee.length===0&&Sa.length===4&&(ee=Ph(Sa,Eo,aa,we)),ee.length===0){Et("No grid definitions found. Mark corners first.");return}V(K==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const xe=(G.blackLevel||[0,0,0,0]).join(","),me=P?P.height:0,Pe=[...[`#BlackLevel: ${xe}`,`#ImageHeight: ${me}`,K==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Ee=Array.from(W).sort((ht,pt)=>ht.name.localeCompare(pt.name,void 0,{numeric:!0}));if(K==="pair"&&Ee.length<2){Et("Need at least 2 files for Pair processing."),V(null);return}const Ne=O.current,$e=(Ne==null?void 0:Ne.isXTransConverted)||!1,Ze=(Ne==null?void 0:Ne.xtransPhase)||{x:0,y:0};try{const ht=async Xe=>{let kt=await Xe.arrayBuffer();return $e&&(kt=(await Pf(kt,Ze.x,Ze.y)).dngBuffer),kt};if(K==="single")for(let Xe=0;Xe<Ee.length;Xe++){const kt=Ee[Xe];V(`Processing ${Xe+1}/${Ee.length}: ${kt.name}...`);const Pr=await ht(kt),kr=await m0(Pr),Xr=`img${kt.name}`;ee.forEach((Pt,Ht)=>{const Sn=Math.floor(Ht/aa)+1,sn=Ht%we+1,vi=ki(kr.data,kr.width,kr.height,Pt.x,Pt.y,Pt.w,Pt.h),$r=vi.means,Do=vi.stdDevs,xi=`${Xr},${Sn},${sn},${$r[0].toFixed(4)},${$r[1].toFixed(4)},${$r[2].toFixed(4)},${$r[3].toFixed(4)},${Do[0].toFixed(4)},${Do[1].toFixed(4)},${Do[2].toFixed(4)},${Do[3].toFixed(4)}`;Pe.push(xi)})}else for(let Xe=0;Xe<Ee.length-1;Xe+=2){const kt=Ee[Xe],Pr=Ee[Xe+1],kr=`img${kt.name} & ${Pr.name}`;V(`Processing Pair ${Math.floor(Xe/2)+1}/${Math.floor(Ee.length/2)}: ${kt.name} & ${Pr.name}...`);const Xr=await ht(kt),Pt=await m0(Xr),Ht=await ht(Pr),Sn=await Mp(Xr,Ht,!1,!0);ee.forEach((sn,vi)=>{const $r=Math.floor(vi/aa)+1,Do=vi%we+1,xi=ki(Pt.data,Pt.width,Pt.height,sn.x,sn.y,sn.w,sn.h),ON=ki(Sn.rawData,Sn.width,Sn.height,sn.x,sn.y,sn.w,sn.h),Xu=xi.means,Hu=ON.stdDevs,CN=`${kr},${$r},${Do},${Xu[0].toFixed(4)},${Xu[1].toFixed(4)},${Xu[2].toFixed(4)},${Xu[3].toFixed(4)},${Hu[0].toFixed(4)},${Hu[1].toFixed(4)},${Hu[2].toFixed(4)},${Hu[3].toFixed(4)}`;Pe.push(CN)})}const pt=Pe.join(`
`),Tr=new Blob([pt],{type:"text/csv;charset=utf-8;"}),Wr=URL.createObjectURL(Tr),wt=document.createElement("a");wt.href=Wr,wt.setAttribute("download",`dr_lab_batch_${K}_${new Date().getTime()}.csv`),document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),URL.revokeObjectURL(Wr)}catch(ht){console.error("Batch Error",ht),Et("Batch Processing Failed: "+ht.message)}finally{V(null)}},ox=()=>{vn([]),br(1)},bN=W=>{if(!dr||on===0)return;const K=[...xr,W];vn(K),K.length===4&&P?(ix(K,Ce),br(0)):br(ee=>ee+1)},ix=(W,K)=>{P&&(V("Analyzing Color Chart..."),setTimeout(()=>{try{const ee=yJ(W[0],W[1],W[2],W[3],P.width,P.height,K);se(ee);const xe=ee.map((me,Ae)=>{const Pe=ki(P.data,P.width,P.height,me.x,me.y,me.w,me.h);return{id:Ae,rawMeans:Pe.means,refRGB:[0,0,0]}}).map((me,Ae)=>({...me,refRGB:ny[Ae]||[0,0,0]}));na(xe),Qt(!0)}catch(ee){Et("Color Lab Error: "+ee.message)}finally{V(null)}},100))},wN=W=>{Fe(W),xr.length===4&&ix(xr,W)},kN=()=>{Qt(!1)},SN=()=>{C||Te("No EXIF data found. The file might not contain metadata or it was stripped during processing."),Ye(!0)},jN=async W=>{V("Parsing PTC Data...");const K=[];let ee=null;try{for(let ae=0;ae<W.length;ae++){const me=(await W[ae].text()).split(`
`);let Ae=!0;for(const Pe of me){const Ee=Pe.trim();if(!Ee)continue;if(Ee.startsWith("#")){if(Ee.includes("BlackLevel:")){const Pt=Ee.split(":")[1].trim().split(",");if(Pt.length>=4){const Ht=Pt.map(Number);ee||(ee={}),ee.blackLevel=Ht}}if(Ee.includes("ImageHeight:")){const Pt=parseInt(Ee.split(":")[1].trim());isNaN(Pt)||(ee||(ee={}),ee.height=Pt)}continue}if(Ae){Ee.toLowerCase().includes("mean")&&Ee.toLowerCase().includes("std")&&(Ae=!1);continue}const Ne=Ee.split(",");if(Ne.length<5)continue;let $e=0,Ze;isNaN(parseFloat(Ne[0]))&&(Ze=Ne[0],$e=1);const ht=parseInt(Ne[$e]),pt=parseInt(Ne[$e+1]),Tr=parseFloat(Ne[$e+2]),Wr=parseFloat(Ne[$e+3]),wt=parseFloat(Ne[$e+4]),Xe=parseFloat(Ne[$e+5]),kt=parseFloat(Ne[$e+6]),Pr=parseFloat(Ne[$e+7]),kr=parseFloat(Ne[$e+8]),Xr=parseFloat(Ne[$e+9]);!isNaN(Tr)&&!isNaN(kt)&&K.push({channel:"R",mean:Tr,std:kt,filename:Ze,row:ht,col:pt}),!isNaN(Wr)&&!isNaN(Pr)&&K.push({channel:"G1",mean:Wr,std:Pr,filename:Ze,row:ht,col:pt}),!isNaN(wt)&&!isNaN(kr)&&K.push({channel:"G2",mean:wt,std:kr,filename:Ze,row:ht,col:pt}),!isNaN(Xe)&&!isNaN(Xr)&&K.push({channel:"B",mean:Xe,std:Xr,filename:Ze,row:ht,col:pt})}}Mt(K),ir(ee),l(!0)}catch(ae){console.error("PTC Parse Error",ae),Et("Failed to parse CSV files: "+ae.message)}finally{V(null)}},NN=()=>{if(!M||!N)return;const W=new Blob([M],{type:"image/x-adobe-dng"}),K=URL.createObjectURL(W),ee=document.createElement("a");ee.href=K;const ae=N.fileName||"image.dng",xe=ae.toLowerCase().endsWith(".dng")?ae:ae.replace(/\.[^/.]+$/,"")+".dng";ee.download=xe,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(K)},_N=()=>{Er(1),Qr([]),Ao([])},sx=()=>{window.open("https://github.com/y-g-jiang/y-g-jiang.github.io/blob/main/drtest.png","_blank")},PN=j.useMemo(()=>Wn?Wn.map((W,K)=>({...W,refRGB:ny[K]||[0,0,0]})):[],[Wn]);return e?c.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-300 dark:bg-[#111] text-black dark:text-white font-mono",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-black dark:border-white border-t-transparent animate-spin mb-4"}),c.jsx("h2",{className:"text-xl font-bold",children:r}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-6",children:"Loading stored buffers from database..."}),c.jsx("button",{onClick:Me,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-bold border-2 border-black dark:border-gray-500 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:shadow-none active:translate-x-1 active:translate-y-1 transition-all text-sm",children:"Abandon Saved Session (Start Fresh)"})]}):c.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[c.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:c.jsx(aO,{onLoadImage:jh,onFileSelected:Sh,onGenerateFakeDng:Uu,fileName:A?A.name:null,hasGeneratedData:(A==null?void 0:A.name)==="pattern_test.dng",viewMode:oa,onSetViewMode:ia,patternPeriod:sr,onPatternPeriodChange:Gr,fillFactor:Xt,onFillFactorChange:Xn,patternPhase:En,onPatternPhaseChange:is,showPatternControls:(A==null?void 0:A.name)==="pattern_test.dng",onOpenAbout:()=>yr(!0),onShowExif:SN,bridgeStatus:v,onBridgeClick:()=>x(!0),isDrLabOpen:Ge,onToggleDrLab:()=>{lt(!Ge),Er(0),Qr([]),Ao([]),jt&&nr(!1),dr&&vr(!1),ar&&Zr(!1),br(0),se([])},isColorLabOpen:dr,onToggleColorLab:()=>{vr(!dr),vn([]),br(0),se([]),Ge&&lt(!1),jt&&nr(!1),ar&&Zr(!1)},isFftLabOpen:jt,onToggleFftLab:()=>{nr(!jt),Ge&&lt(!1),dr&&vr(!1),ar&&Zr(!1),br(0),se([])},isSfrLabOpen:ar,onToggleSfrLab:()=>{Zr(!ar),Ge&&lt(!1),dr&&vr(!1),jt&&nr(!1),br(0),se([])},onGenerateTestPic:sx,onPTCFilesSelected:jN,onDownloadDng:NN,isThreePlane:R,onOpenDatabase:()=>d(!0),isSidebarOpen:Q,onToggleSidebar:()=>he(!Q),stretchMultiplier:Nr,onStretchMultiplierChange:mt,onStretchDngExport:Ft,isRawLoaded:!!P})}),c.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[c.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:Ke,children:[kn&&c.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:U||"Processing..."})]}),g.length>1&&c.jsxs("div",{className:"absolute bottom-4 right-20 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] text-sm font-bold text-black dark:text-white",children:[c.jsx("button",{onClick:bn,disabled:S<=0,className:"hover:text-gray-500 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Previous Image",children:"<"}),c.jsxs("span",{className:"min-w-[3rem] text-center select-none font-bold",children:[S+1," / ",g.length]}),c.jsx("button",{onClick:_t,disabled:S>=g.length-1,className:"hover:text-gray-500 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Next Image",children:">"})]}),c.jsx("div",{className:"absolute bottom-4 left-4 z-50 flex flex-col-reverse gap-2 items-start pointer-events-none",children:ce.filter(W=>W.isMinimized).map(W=>{let K="Window",ee="bg-gray-500";return W.type==="histogram"?(K="Histogram",ee="bg-black dark:bg-white"):W.type==="fft"?(K="FFT Spectrum",ee="bg-black dark:bg-white"):W.type==="quant"?(K="Quantization",ee="bg-black dark:bg-white"):W.type==="pearson"&&(K="Pearson",ee="bg-black dark:bg-white"),c.jsxs("div",{className:"pointer-events-auto flex items-center gap-1 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsxs("button",{onClick:()=>ao(W.id),className:"px-3 py-1.5 text-xs font-bold text-black dark:text-white hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors flex items-center gap-2",children:[c.jsx("span",{className:`w-2 h-2 ${ee}`}),K]}),c.jsx("button",{onClick:()=>wr(W.id),className:"px-2 py-1.5 text-black hover:text-red-600 hover:bg-gray-200 dark:hover:bg-gray-800 border-l-2 border-black dark:border-white transition-colors",children:""})]},W.id)})}),c.jsx(iJ,{isOpen:xt,onClose:()=>yr(!1)}),c.jsx(sJ,{isOpen:ve,onClose:()=>Ye(!1),data:C,fileName:A?A.name:"",warning:We}),c.jsx(cJ,{isOpen:s,onClose:()=>l(!1),data:ct,blackLevel:no,imageHeight:bh,isBGGR:J,importedMetadata:At||void 0,theme:o,initialCameraModel:(C==null?void 0:C.Model)||"",initialISO:(C==null?void 0:C.ISO)||((lx=C==null?void 0:C.ISOSpeedRatings)==null?void 0:lx.toString())||""}),c.jsx(pJ,{isOpen:u,onClose:()=>d(!1),theme:o}),c.jsx(gJ,{isOpen:f,onClose:()=>h(!1),zIndex:200}),c.jsx(wJ,{isOpen:Zt,onClose:kN,patchStats:PN,initialIsBGGR:J,sizeRatio:Ce,onSizeChange:wN}),c.jsx(_J,{isOpen:ar,isSfrLabOpen:ar,onClose:()=>{},rawImageData:P,roi:F?{x:F.x,y:F.y,w:F.width,h:F.height}:null,zIndex:200,onFocus:cs,displaySettings:G}),c.jsx(OJ,{isOpen:p,onClose:()=>m(!1),rawImageData:P,fileName:(A==null?void 0:A.name)||"image.dng",zIndex:300,onFocus:cs}),c.jsx(ai,{isOpen:Be,onClose:()=>it(!1),onConfirm:_h,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),c.jsx("p",{className:"text-xs text-gray-500"})]})}),c.jsx(ai,{isOpen:w,onClose:()=>x(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),x(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),c.jsx(ai,{isOpen:st,onClose:()=>tr(!1),onConfirm:Rt,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),c.jsx("div",{onClick:()=>Ut(!ze),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${ze?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${ze?"translate-x-6":""}`})})]}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),c.jsx("div",{onClick:()=>rr(!$t),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${$t?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${$t?"translate-x-6":""}`})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[ze&&!$t&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!ze&&$t&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",ze&&$t&&"Mode: Ready-to-Use. Conventional 16-bit development.",!ze&&!$t&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!oe&&c.jsx(BJ,{stats:F,onClose:()=>{re(null),le(null)},onMinimize:()=>q(!0),isBGGR:J,onToggleBGGR:$,onOpenWindow:dt,displaySettings:G,zIndex:_e,onFocus:cs,rawImageData:P}),ce.map(W=>{if(W.isMinimized)return null;const K=g.find(xe=>xe.id===W.sessionId),ee=K==null?void 0:K.rawImageData;if(!ee)return null;const ae={key:W.id,isOpen:!0,onClose:()=>wr(W.id),onMinimize:()=>wn(W.id),rawImageData:ee,roi:W.roi,isBGGR:W.isBGGR,zIndex:W.zIndex,onFocus:()=>ls(W.id),initialPosition:W.initialPosition,initialInternalState:W.internalState,onUpdateState:xe=>wh(W.id,xe),stackFiles:W.stackFiles};return W.type==="histogram"?c.jsx(ZQ,{...ae}):W.type==="fft"?c.jsx(tJ,{...ae,onUpdateROI:xe=>kh(W.id,xe)}):W.type==="quant"?c.jsx(rJ,{...ae}):W.type==="pearson"?c.jsx(nJ,{...ae}):null}),ss&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:c.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[c.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),c.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:ss}),c.jsx("button",{onClick:()=>Et(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!Ur&&!kn&&!ss&&c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:c.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),c.jsx(oO,{image:Ur,zoom:pe,pan:ie,onPanChange:I,onZoomChange:Hn,onSelectionChange:Fa,forcedSelection:H,theme:o,touchAction:De,isMarking:ge>0||dr&&on>0,onPointClick:W=>{ge>0?lr(W):dr&&on>0&&bN(W)},markers:Sa,gridRects:xn,colorLabPoints:xr,colorLabRects:Bt}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),P&&!ge&&!dr&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",c.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),dr&&on>0&&c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[xr.length===0&&"Click Top-Left Corner of Chart",xr.length===1&&"Click Top-Right Corner",xr.length===2&&"Click Bottom-Left Corner",xr.length===3&&"Click Bottom-Right Corner",xr.length===4&&"Processing..."]}),c.jsx(vO,{zoom:pe,onZoomChange:Hn,onResetView:()=>{Oe(1),I({x:0,y:0})},touchAction:De,onToggleTouchAction:za})]}),Q&&c.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:c.jsx(uO,{rawImageData:P,displaySettings:G,onApplyDisplaySettings:je,onSetSelection:$o,exifData:C,isBridgeConnected:v.isConnected,isDrLabOpen:Ge,drMarkingStep:ge,onStartMarking:_N,onGenerateTestPic:sx,drRoiSize:Eo,onDrRoiSizeChange:ja,drGridRows:aa,onDrGridRowsChange:Y,drGridCols:we,onDrGridColsChange:Wt,onBatchDrLab:Wu,hasDrMarkers:xn.length>0,isFftLabOpen:jt,onProcessPair:Nh,onProcessBatchDiff:Gu,onProcessStackFft:Ll,onOpenCrossCalc:()=>h(!0),isThreePlane:R,onToggleXTrans:rt,xtransPhase:z,onXTransPhaseChange:tt,isXTransConverted:N==null?void 0:N.isXTransConverted,roiStats:F,isBGGR:J,isColorLabOpen:dr,colorLabMarkingStep:on,onStartColorLabMarking:ox,isSfrLabOpen:ar,onOpenDngExport:()=>m(!0)})}),c.jsx(xO,{theme:o,setTheme:i})]})]})},xN=document.getElementById("root");if(!xN)throw new Error("Could not find root element to mount to");const zJ=Tp.createRoot(xN);zJ.render(c.jsx(L.StrictMode,{children:c.jsx(FJ,{})}));export{BQ as _};
