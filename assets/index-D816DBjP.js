var _N=Object.defineProperty;var AN=(e,t,r)=>t in e?_N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var kn=(e,t,r)=>AN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a5={exports:{}},lh={},i5={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf=Symbol.for("react.element"),TN=Symbol.for("react.portal"),EN=Symbol.for("react.fragment"),$N=Symbol.for("react.strict_mode"),DN=Symbol.for("react.profiler"),IN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),LN=Symbol.for("react.forward_ref"),BN=Symbol.for("react.suspense"),FN=Symbol.for("react.memo"),zN=Symbol.for("react.lazy"),A1=Symbol.iterator;function GN(e){return e===null||typeof e!="object"?null:(e=A1&&e[A1]||e["@@iterator"],typeof e=="function"?e:null)}var o5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s5=Object.assign,l5={};function Wl(e,t,r){this.props=e,this.context=t,this.refs=l5,this.updater=r||o5}Wl.prototype.isReactComponent={};Wl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c5(){}c5.prototype=Wl.prototype;function pv(e,t,r){this.props=e,this.context=t,this.refs=l5,this.updater=r||o5}var gv=pv.prototype=new c5;gv.constructor=pv;s5(gv,Wl.prototype);gv.isPureReactComponent=!0;var T1=Array.isArray,u5=Object.prototype.hasOwnProperty,mv={current:null},f5={key:!0,ref:!0,__self:!0,__source:!0};function d5(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)u5.call(t,n)&&!f5.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:lf,type:e,key:i,ref:o,props:a,_owner:mv.current}}function UN(e,t){return{$$typeof:lf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yv(e){return typeof e=="object"&&e!==null&&e.$$typeof===lf}function WN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var E1=/\/+/g;function Sp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WN(""+e.key):t.toString(36)}function fd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case lf:case TN:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Sp(o,0):n,T1(a)?(r="",e!=null&&(r=e.replace(E1,"$&/")+"/"),fd(a,t,r,"",function(u){return u})):a!=null&&(yv(a)&&(a=UN(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(E1,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",T1(e))for(var s=0;s<e.length;s++){i=e[s];var l=n+Sp(i,s);o+=fd(i,t,r,l,a)}else if(l=GN(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=n+Sp(i,s++),o+=fd(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _f(e,t,r){if(e==null)return e;var n=[],a=0;return fd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function VN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var On={current:null},dd={transition:null},HN={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:dd,ReactCurrentOwner:mv};function h5(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:_f,forEach:function(e,t,r){_f(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _f(e,function(){t++}),t},toArray:function(e){return _f(e,function(t){return t})||[]},only:function(e){if(!yv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=Wl;nt.Fragment=EN;nt.Profiler=DN;nt.PureComponent=pv;nt.StrictMode=$N;nt.Suspense=BN;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HN;nt.act=h5;nt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=s5({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=mv.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)u5.call(t,l)&&!f5.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:lf,type:e.type,key:a,ref:i,props:n,_owner:o}};nt.createContext=function(e){return e={$$typeof:RN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IN,_context:e},e.Consumer=e};nt.createElement=d5;nt.createFactory=function(e){var t=d5.bind(null,e);return t.type=e,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:LN,render:e}};nt.isValidElement=yv;nt.lazy=function(e){return{$$typeof:zN,_payload:{_status:-1,_result:e},_init:VN}};nt.memo=function(e,t){return{$$typeof:FN,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=dd.transition;dd.transition={};try{e()}finally{dd.transition=t}};nt.unstable_act=h5;nt.useCallback=function(e,t){return On.current.useCallback(e,t)};nt.useContext=function(e){return On.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return On.current.useDeferredValue(e)};nt.useEffect=function(e,t){return On.current.useEffect(e,t)};nt.useId=function(){return On.current.useId()};nt.useImperativeHandle=function(e,t,r){return On.current.useImperativeHandle(e,t,r)};nt.useInsertionEffect=function(e,t){return On.current.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return On.current.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return On.current.useMemo(e,t)};nt.useReducer=function(e,t,r){return On.current.useReducer(e,t,r)};nt.useRef=function(e){return On.current.useRef(e)};nt.useState=function(e){return On.current.useState(e)};nt.useSyncExternalStore=function(e,t,r){return On.current.useSyncExternalStore(e,t,r)};nt.useTransition=function(){return On.current.useTransition()};nt.version="18.3.1";i5.exports=nt;var j=i5.exports;const z=Bt(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XN=j,KN=Symbol.for("react.element"),YN=Symbol.for("react.fragment"),qN=Object.prototype.hasOwnProperty,ZN=XN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QN={key:!0,ref:!0,__self:!0,__source:!0};function p5(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)qN.call(t,n)&&!QN.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:KN,type:e,key:i,ref:o,props:a,_owner:ZN.current}}lh.Fragment=YN;lh.jsx=p5;lh.jsxs=p5;a5.exports=lh;var c=a5.exports,Rg={},g5={exports:{}},ta={},m5={exports:{}},y5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,I){var G=E.length;E.push(I);e:for(;0<G;){var J=G-1>>>1,K=E[J];if(0<a(K,I))E[J]=I,E[G]=K,G=J;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var I=E[0],G=E.pop();if(G!==I){E[0]=G;e:for(var J=0,K=E.length,F=K>>>1;J<F;){var ee=2*(J+1)-1,se=E[ee],Y=ee+1,le=E[Y];if(0>a(se,G))Y<K&&0>a(le,se)?(E[J]=le,E[Y]=G,J=Y):(E[J]=se,E[ee]=G,J=ee);else if(Y<K&&0>a(le,G))E[J]=le,E[Y]=G,J=Y;else break e}}return I}function a(E,I){var G=E.sortIndex-I.sortIndex;return G!==0?G:E.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],f=1,d=null,h=3,p=!1,y=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=E)n(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=r(u)}}function S(E){if(m=!1,b(E),!y)if(r(l)!==null)y=!0,L(k);else{var I=r(u);I!==null&&T(S,I.startTime-E)}}function k(E,I){y=!1,m&&(m=!1,v(C),C=-1),p=!0;var G=h;try{for(b(I),d=r(l);d!==null&&(!(d.expirationTime>I)||E&&!$());){var J=d.callback;if(typeof J=="function"){d.callback=null,h=d.priorityLevel;var K=J(d.expirationTime<=I);I=e.unstable_now(),typeof K=="function"?d.callback=K:d===r(l)&&n(l),b(I)}else n(l);d=r(l)}if(d!==null)var F=!0;else{var ee=r(u);ee!==null&&T(S,ee.startTime-I),F=!1}return F}finally{d=null,h=G,p=!1}}var w=!1,P=null,C=-1,M=5,N=-1;function $(){return!(e.unstable_now()-N<M)}function _(){if(P!==null){var E=e.unstable_now();N=E;var I=!0;try{I=P(!0,E)}finally{I?A():(w=!1,P=null)}}else w=!1}var A;if(typeof g=="function")A=function(){g(_)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,R=D.port2;D.port1.onmessage=_,A=function(){R.postMessage(null)}}else A=function(){x(_,0)};function L(E){P=E,w||(w=!0,A())}function T(E,I){C=x(function(){E(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,L(k))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(E){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var G=h;h=I;try{return E()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,I){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var G=h;h=E;try{return I()}finally{h=G}},e.unstable_scheduleCallback=function(E,I,G){var J=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,E){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,E={id:f++,callback:I,priorityLevel:E,startTime:G,expirationTime:K,sortIndex:-1},G>J?(E.sortIndex=G,t(u,E),r(l)===null&&E===r(u)&&(m?(v(C),C=-1):m=!0,T(S,G-J))):(E.sortIndex=K,t(l,E),y||p||(y=!0,L(k))),E},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(E){var I=h;return function(){var G=h;h=I;try{return E.apply(this,arguments)}finally{h=G}}}})(y5);m5.exports=y5;var JN=m5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO=j,ea=JN;function he(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v5=new Set,ou={};function ks(e,t){fl(e,t),fl(e+"Capture",t)}function fl(e,t){for(ou[e]=t,e=0;e<t.length;e++)v5.add(t[e])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lg=Object.prototype.hasOwnProperty,tO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$1={},D1={};function rO(e){return Lg.call(D1,e)?!0:Lg.call($1,e)?!1:tO.test(e)?D1[e]=!0:($1[e]=!0,!1)}function nO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function aO(e,t,r,n){if(t===null||typeof t>"u"||nO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mn(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rn[e]=new Mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rn[t]=new Mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rn[e]=new Mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rn[e]=new Mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rn[e]=new Mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rn[e]=new Mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rn[e]=new Mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rn[e]=new Mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rn[e]=new Mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var vv=/[\-:]([a-z])/g;function xv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vv,xv);rn[t]=new Mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vv,xv);rn[t]=new Mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vv,xv);rn[t]=new Mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rn[e]=new Mn(e,1,!1,e.toLowerCase(),null,!1,!1)});rn.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rn[e]=new Mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function bv(e,t,r,n){var a=rn.hasOwnProperty(t)?rn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(aO(t,r,a,n)&&(r=null),n||a===null?rO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ii=eO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Af=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),wv=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),x5=Symbol.for("react.provider"),b5=Symbol.for("react.context"),kv=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),zg=Symbol.for("react.suspense_list"),Sv=Symbol.for("react.memo"),Vi=Symbol.for("react.lazy"),w5=Symbol.for("react.offscreen"),I1=Symbol.iterator;function yc(e){return e===null||typeof e!="object"?null:(e=I1&&e[I1]||e["@@iterator"],typeof e=="function"?e:null)}var sr=Object.assign,jp;function Lc(e){if(jp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);jp=t&&t[1]||""}return`
`+jp+e}var Pp=!1;function Cp(e,t){if(!e||Pp)return"";Pp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{Pp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Lc(e):""}function iO(e){switch(e.tag){case 5:return Lc(e.type);case 16:return Lc("Lazy");case 13:return Lc("Suspense");case 19:return Lc("SuspenseList");case 0:case 2:case 15:return e=Cp(e.type,!1),e;case 11:return e=Cp(e.type.render,!1),e;case 1:return e=Cp(e.type,!0),e;default:return""}}function Gg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fs:return"Fragment";case Bs:return"Portal";case Bg:return"Profiler";case wv:return"StrictMode";case Fg:return"Suspense";case zg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case b5:return(e.displayName||"Context")+".Consumer";case x5:return(e._context.displayName||"Context")+".Provider";case kv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sv:return t=e.displayName||null,t!==null?t:Gg(e.type)||"Memo";case Vi:t=e._payload,e=e._init;try{return Gg(e(t))}catch{}}return null}function oO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gg(t);case 8:return t===wv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function k5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sO(e){var t=k5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tf(e){e._valueTracker||(e._valueTracker=sO(e))}function S5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=k5(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Cd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ug(e,t){var r=t.checked;return sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function R1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=bo(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function j5(e,t){t=t.checked,t!=null&&bv(e,"checked",t,!1)}function Wg(e,t){j5(e,t);var r=bo(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vg(e,t.type,bo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vg(e,t,r){(t!=="number"||Cd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Bc=Array.isArray;function el(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+bo(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Hg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(he(91));return sr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function B1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(he(92));if(Bc(r)){if(1<r.length)throw Error(he(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bo(r)}}function P5(e,t){var r=bo(t.value),n=bo(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function F1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function C5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?C5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ef,N5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ef=Ef||document.createElement("div"),Ef.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ef.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function su(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lO=["Webkit","ms","Moz","O"];Object.keys(Uc).forEach(function(e){lO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Uc[t]=Uc[e]})});function O5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Uc.hasOwnProperty(e)&&Uc[e]?(""+t).trim():t+"px"}function M5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=O5(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var cO=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kg(e,t){if(t){if(cO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(he(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(he(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(he(61))}if(t.style!=null&&typeof t.style!="object")throw Error(he(62))}}function Yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qg=null;function jv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zg=null,tl=null,rl=null;function z1(e){if(e=ff(e)){if(typeof Zg!="function")throw Error(he(280));var t=e.stateNode;t&&(t=hh(t),Zg(e.stateNode,e.type,t))}}function _5(e){tl?rl?rl.push(e):rl=[e]:tl=e}function A5(){if(tl){var e=tl,t=rl;if(rl=tl=null,z1(e),t)for(e=0;e<t.length;e++)z1(t[e])}}function T5(e,t){return e(t)}function E5(){}var Np=!1;function $5(e,t,r){if(Np)return e(t,r);Np=!0;try{return T5(e,t,r)}finally{Np=!1,(tl!==null||rl!==null)&&(E5(),A5())}}function lu(e,t){var r=e.stateNode;if(r===null)return null;var n=hh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(he(231,t,typeof r));return r}var Qg=!1;if(Mi)try{var vc={};Object.defineProperty(vc,"passive",{get:function(){Qg=!0}}),window.addEventListener("test",vc,vc),window.removeEventListener("test",vc,vc)}catch{Qg=!1}function uO(e,t,r,n,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Wc=!1,Nd=null,Od=!1,Jg=null,fO={onError:function(e){Wc=!0,Nd=e}};function dO(e,t,r,n,a,i,o,s,l){Wc=!1,Nd=null,uO.apply(fO,arguments)}function hO(e,t,r,n,a,i,o,s,l){if(dO.apply(this,arguments),Wc){if(Wc){var u=Nd;Wc=!1,Nd=null}else throw Error(he(198));Od||(Od=!0,Jg=u)}}function Ss(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function D5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G1(e){if(Ss(e)!==e)throw Error(he(188))}function pO(e){var t=e.alternate;if(!t){if(t=Ss(e),t===null)throw Error(he(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return G1(a),e;if(i===n)return G1(a),t;i=i.sibling}throw Error(he(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(he(189))}}if(r.alternate!==n)throw Error(he(190))}if(r.tag!==3)throw Error(he(188));return r.stateNode.current===r?e:t}function I5(e){return e=pO(e),e!==null?R5(e):null}function R5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=R5(e);if(t!==null)return t;e=e.sibling}return null}var L5=ea.unstable_scheduleCallback,U1=ea.unstable_cancelCallback,gO=ea.unstable_shouldYield,mO=ea.unstable_requestPaint,xr=ea.unstable_now,yO=ea.unstable_getCurrentPriorityLevel,Pv=ea.unstable_ImmediatePriority,B5=ea.unstable_UserBlockingPriority,Md=ea.unstable_NormalPriority,vO=ea.unstable_LowPriority,F5=ea.unstable_IdlePriority,ch=null,Ja=null;function xO(e){if(Ja&&typeof Ja.onCommitFiberRoot=="function")try{Ja.onCommitFiberRoot(ch,e,void 0,(e.current.flags&128)===128)}catch{}}var za=Math.clz32?Math.clz32:kO,bO=Math.log,wO=Math.LN2;function kO(e){return e>>>=0,e===0?32:31-(bO(e)/wO|0)|0}var $f=64,Df=4194304;function Fc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _d(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Fc(s):(i&=o,i!==0&&(n=Fc(i)))}else o=r&~a,o!==0?n=Fc(o):i!==0&&(n=Fc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-za(t),a=1<<r,n|=e[r],t&=~a;return n}function SO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-za(i),s=1<<o,l=a[o];l===-1?(!(s&r)||s&n)&&(a[o]=SO(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function em(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function z5(){var e=$f;return $f<<=1,!($f&4194240)&&($f=64),e}function Op(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function cf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-za(t),e[t]=r}function PO(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-za(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Cv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-za(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Mt=0;function G5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var U5,Nv,W5,V5,H5,tm=!1,If=[],so=null,lo=null,co=null,cu=new Map,uu=new Map,Ki=[],CO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W1(e,t){switch(e){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":cu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(t.pointerId)}}function xc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ff(t),t!==null&&Nv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function NO(e,t,r,n,a){switch(t){case"focusin":return so=xc(so,e,t,r,n,a),!0;case"dragenter":return lo=xc(lo,e,t,r,n,a),!0;case"mouseover":return co=xc(co,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return cu.set(i,xc(cu.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,uu.set(i,xc(uu.get(i)||null,e,t,r,n,a)),!0}return!1}function X5(e){var t=Wo(e.target);if(t!==null){var r=Ss(t);if(r!==null){if(t=r.tag,t===13){if(t=D5(r),t!==null){e.blockedOn=t,H5(e.priority,function(){W5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=rm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);qg=n,r.target.dispatchEvent(n),qg=null}else return t=ff(r),t!==null&&Nv(t),e.blockedOn=r,!1;t.shift()}return!0}function V1(e,t,r){hd(e)&&r.delete(t)}function OO(){tm=!1,so!==null&&hd(so)&&(so=null),lo!==null&&hd(lo)&&(lo=null),co!==null&&hd(co)&&(co=null),cu.forEach(V1),uu.forEach(V1)}function bc(e,t){e.blockedOn===t&&(e.blockedOn=null,tm||(tm=!0,ea.unstable_scheduleCallback(ea.unstable_NormalPriority,OO)))}function fu(e){function t(a){return bc(a,e)}if(0<If.length){bc(If[0],e);for(var r=1;r<If.length;r++){var n=If[r];n.blockedOn===e&&(n.blockedOn=null)}}for(so!==null&&bc(so,e),lo!==null&&bc(lo,e),co!==null&&bc(co,e),cu.forEach(t),uu.forEach(t),r=0;r<Ki.length;r++)n=Ki[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ki.length&&(r=Ki[0],r.blockedOn===null);)X5(r),r.blockedOn===null&&Ki.shift()}var nl=Ii.ReactCurrentBatchConfig,Ad=!0;function MO(e,t,r,n){var a=Mt,i=nl.transition;nl.transition=null;try{Mt=1,Ov(e,t,r,n)}finally{Mt=a,nl.transition=i}}function _O(e,t,r,n){var a=Mt,i=nl.transition;nl.transition=null;try{Mt=4,Ov(e,t,r,n)}finally{Mt=a,nl.transition=i}}function Ov(e,t,r,n){if(Ad){var a=rm(e,t,r,n);if(a===null)Lp(e,t,n,Td,r),W1(e,n);else if(NO(a,e,t,r,n))n.stopPropagation();else if(W1(e,n),t&4&&-1<CO.indexOf(e)){for(;a!==null;){var i=ff(a);if(i!==null&&U5(i),i=rm(e,t,r,n),i===null&&Lp(e,t,n,Td,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Lp(e,t,n,null,r)}}var Td=null;function rm(e,t,r,n){if(Td=null,e=jv(n),e=Wo(e),e!==null)if(t=Ss(e),t===null)e=null;else if(r=t.tag,r===13){if(e=D5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Td=e,null}function K5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yO()){case Pv:return 1;case B5:return 4;case Md:case vO:return 16;case F5:return 536870912;default:return 16}default:return 16}}var Zi=null,Mv=null,pd=null;function Y5(){if(pd)return pd;var e,t=Mv,r=t.length,n,a="value"in Zi?Zi.value:Zi.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return pd=a.slice(e,1<n?1-n:void 0)}function gd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rf(){return!0}function H1(){return!1}function ra(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rf:H1,this.isPropagationStopped=H1,this}return sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rf)},persist:function(){},isPersistent:Rf}),t}var Vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_v=ra(Vl),uf=sr({},Vl,{view:0,detail:0}),AO=ra(uf),Mp,_p,wc,uh=sr({},uf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Av,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wc&&(wc&&e.type==="mousemove"?(Mp=e.screenX-wc.screenX,_p=e.screenY-wc.screenY):_p=Mp=0,wc=e),Mp)},movementY:function(e){return"movementY"in e?e.movementY:_p}}),X1=ra(uh),TO=sr({},uh,{dataTransfer:0}),EO=ra(TO),$O=sr({},uf,{relatedTarget:0}),Ap=ra($O),DO=sr({},Vl,{animationName:0,elapsedTime:0,pseudoElement:0}),IO=ra(DO),RO=sr({},Vl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LO=ra(RO),BO=sr({},Vl,{data:0}),K1=ra(BO),FO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=GO[e])?!!t[e]:!1}function Av(){return UO}var WO=sr({},uf,{key:function(e){if(e.key){var t=FO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Av,charCode:function(e){return e.type==="keypress"?gd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),VO=ra(WO),HO=sr({},uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y1=ra(HO),XO=sr({},uf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Av}),KO=ra(XO),YO=sr({},Vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),qO=ra(YO),ZO=sr({},uh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),QO=ra(ZO),JO=[9,13,27,32],Tv=Mi&&"CompositionEvent"in window,Vc=null;Mi&&"documentMode"in document&&(Vc=document.documentMode);var eM=Mi&&"TextEvent"in window&&!Vc,q5=Mi&&(!Tv||Vc&&8<Vc&&11>=Vc),q1=" ",Z1=!1;function Z5(e,t){switch(e){case"keyup":return JO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zs=!1;function tM(e,t){switch(e){case"compositionend":return Q5(t);case"keypress":return t.which!==32?null:(Z1=!0,q1);case"textInput":return e=t.data,e===q1&&Z1?null:e;default:return null}}function rM(e,t){if(zs)return e==="compositionend"||!Tv&&Z5(e,t)?(e=Y5(),pd=Mv=Zi=null,zs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return q5&&t.locale!=="ko"?null:t.data;default:return null}}var nM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nM[e.type]:t==="textarea"}function J5(e,t,r,n){_5(n),t=Ed(t,"onChange"),0<t.length&&(r=new _v("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hc=null,du=null;function aM(e){u4(e,0)}function fh(e){var t=Ws(e);if(S5(t))return e}function iM(e,t){if(e==="change")return t}var e4=!1;if(Mi){var Tp;if(Mi){var Ep="oninput"in document;if(!Ep){var J1=document.createElement("div");J1.setAttribute("oninput","return;"),Ep=typeof J1.oninput=="function"}Tp=Ep}else Tp=!1;e4=Tp&&(!document.documentMode||9<document.documentMode)}function eb(){Hc&&(Hc.detachEvent("onpropertychange",t4),du=Hc=null)}function t4(e){if(e.propertyName==="value"&&fh(du)){var t=[];J5(t,du,e,jv(e)),$5(aM,t)}}function oM(e,t,r){e==="focusin"?(eb(),Hc=t,du=r,Hc.attachEvent("onpropertychange",t4)):e==="focusout"&&eb()}function sM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fh(du)}function lM(e,t){if(e==="click")return fh(t)}function cM(e,t){if(e==="input"||e==="change")return fh(t)}function uM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ua=typeof Object.is=="function"?Object.is:uM;function hu(e,t){if(Ua(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Lg.call(t,a)||!Ua(e[a],t[a]))return!1}return!0}function tb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rb(e,t){var r=tb(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tb(r)}}function r4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?r4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function n4(){for(var e=window,t=Cd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cd(e.document)}return t}function Ev(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fM(e){var t=n4(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&r4(r.ownerDocument.documentElement,r)){if(n!==null&&Ev(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=rb(r,i);var o=rb(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dM=Mi&&"documentMode"in document&&11>=document.documentMode,Gs=null,nm=null,Xc=null,am=!1;function nb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;am||Gs==null||Gs!==Cd(n)||(n=Gs,"selectionStart"in n&&Ev(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xc&&hu(Xc,n)||(Xc=n,n=Ed(nm,"onSelect"),0<n.length&&(t=new _v("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Gs)))}function Lf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Us={animationend:Lf("Animation","AnimationEnd"),animationiteration:Lf("Animation","AnimationIteration"),animationstart:Lf("Animation","AnimationStart"),transitionend:Lf("Transition","TransitionEnd")},$p={},a4={};Mi&&(a4=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function dh(e){if($p[e])return $p[e];if(!Us[e])return e;var t=Us[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in a4)return $p[e]=t[r];return e}var i4=dh("animationend"),o4=dh("animationiteration"),s4=dh("animationstart"),l4=dh("transitionend"),c4=new Map,ab="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ko(e,t){c4.set(e,t),ks(t,[e])}for(var Dp=0;Dp<ab.length;Dp++){var Ip=ab[Dp],hM=Ip.toLowerCase(),pM=Ip[0].toUpperCase()+Ip.slice(1);ko(hM,"on"+pM)}ko(i4,"onAnimationEnd");ko(o4,"onAnimationIteration");ko(s4,"onAnimationStart");ko("dblclick","onDoubleClick");ko("focusin","onFocus");ko("focusout","onBlur");ko(l4,"onTransitionEnd");fl("onMouseEnter",["mouseout","mouseover"]);fl("onMouseLeave",["mouseout","mouseover"]);fl("onPointerEnter",["pointerout","pointerover"]);fl("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gM=new Set("cancel close invalid load scroll toggle".split(" ").concat(zc));function ib(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,hO(n,t,void 0,e),e.currentTarget=null}function u4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;ib(a,s,u),i=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;ib(a,s,u),i=l}}}if(Od)throw e=Jg,Od=!1,Jg=null,e}function Xt(e,t){var r=t[cm];r===void 0&&(r=t[cm]=new Set);var n=e+"__bubble";r.has(n)||(f4(t,e,2,!1),r.add(n))}function Rp(e,t,r){var n=0;t&&(n|=4),f4(r,e,n,t)}var Bf="_reactListening"+Math.random().toString(36).slice(2);function pu(e){if(!e[Bf]){e[Bf]=!0,v5.forEach(function(r){r!=="selectionchange"&&(gM.has(r)||Rp(r,!1,e),Rp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bf]||(t[Bf]=!0,Rp("selectionchange",!1,t))}}function f4(e,t,r,n){switch(K5(t)){case 1:var a=MO;break;case 4:a=_O;break;default:a=Ov}r=a.bind(null,t,r,e),a=void 0,!Qg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Lp(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=Wo(s),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}s=s.parentNode}}n=n.return}$5(function(){var u=i,f=jv(r),d=[];e:{var h=c4.get(e);if(h!==void 0){var p=_v,y=e;switch(e){case"keypress":if(gd(r)===0)break e;case"keydown":case"keyup":p=VO;break;case"focusin":y="focus",p=Ap;break;case"focusout":y="blur",p=Ap;break;case"beforeblur":case"afterblur":p=Ap;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=X1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=EO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=KO;break;case i4:case o4:case s4:p=IO;break;case l4:p=qO;break;case"scroll":p=AO;break;case"wheel":p=QO;break;case"copy":case"cut":case"paste":p=LO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Y1}var m=(t&4)!==0,x=!m&&e==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var g=u,b;g!==null;){b=g;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=lu(g,v),S!=null&&m.push(gu(g,S,b)))),x)break;g=g.return}0<m.length&&(h=new p(h,y,null,r,f),d.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==qg&&(y=r.relatedTarget||r.fromElement)&&(Wo(y)||y[_i]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?Wo(y):null,y!==null&&(x=Ss(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(m=X1,S="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=Y1,S="onPointerLeave",v="onPointerEnter",g="pointer"),x=p==null?h:Ws(p),b=y==null?h:Ws(y),h=new m(S,g+"leave",p,r,f),h.target=x,h.relatedTarget=b,S=null,Wo(f)===u&&(m=new m(v,g+"enter",y,r,f),m.target=b,m.relatedTarget=x,S=m),x=S,p&&y)t:{for(m=p,v=y,g=0,b=m;b;b=$s(b))g++;for(b=0,S=v;S;S=$s(S))b++;for(;0<g-b;)m=$s(m),g--;for(;0<b-g;)v=$s(v),b--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=$s(m),v=$s(v)}m=null}else m=null;p!==null&&ob(d,h,p,m,!1),y!==null&&x!==null&&ob(d,x,y,m,!0)}}e:{if(h=u?Ws(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=iM;else if(Q1(h))if(e4)k=cM;else{k=sM;var w=oM}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=lM);if(k&&(k=k(e,u))){J5(d,k,r,f);break e}w&&w(e,h,u),e==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Vg(h,"number",h.value)}switch(w=u?Ws(u):window,e){case"focusin":(Q1(w)||w.contentEditable==="true")&&(Gs=w,nm=u,Xc=null);break;case"focusout":Xc=nm=Gs=null;break;case"mousedown":am=!0;break;case"contextmenu":case"mouseup":case"dragend":am=!1,nb(d,r,f);break;case"selectionchange":if(dM)break;case"keydown":case"keyup":nb(d,r,f)}var P;if(Tv)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else zs?Z5(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(q5&&r.locale!=="ko"&&(zs||C!=="onCompositionStart"?C==="onCompositionEnd"&&zs&&(P=Y5()):(Zi=f,Mv="value"in Zi?Zi.value:Zi.textContent,zs=!0)),w=Ed(u,C),0<w.length&&(C=new K1(C,e,null,r,f),d.push({event:C,listeners:w}),P?C.data=P:(P=Q5(r),P!==null&&(C.data=P)))),(P=eM?tM(e,r):rM(e,r))&&(u=Ed(u,"onBeforeInput"),0<u.length&&(f=new K1("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=P))}u4(d,t)})}function gu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ed(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=lu(e,r),i!=null&&n.unshift(gu(e,i,a)),i=lu(e,t),i!=null&&n.push(gu(e,i,a))),e=e.return}return n}function $s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ob(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,a?(l=lu(r,i),l!=null&&o.unshift(gu(r,l,s))):a||(l=lu(r,i),l!=null&&o.push(gu(r,l,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var mM=/\r\n?/g,yM=/\u0000|\uFFFD/g;function sb(e){return(typeof e=="string"?e:""+e).replace(mM,`
`).replace(yM,"")}function Ff(e,t,r){if(t=sb(t),sb(e)!==t&&r)throw Error(he(425))}function $d(){}var im=null,om=null;function sm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,vM=typeof clearTimeout=="function"?clearTimeout:void 0,lb=typeof Promise=="function"?Promise:void 0,xM=typeof queueMicrotask=="function"?queueMicrotask:typeof lb<"u"?function(e){return lb.resolve(null).then(e).catch(bM)}:lm;function bM(e){setTimeout(function(){throw e})}function Bp(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),fu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);fu(t)}function uo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hl=Math.random().toString(36).slice(2),qa="__reactFiber$"+Hl,mu="__reactProps$"+Hl,_i="__reactContainer$"+Hl,cm="__reactEvents$"+Hl,wM="__reactListeners$"+Hl,kM="__reactHandles$"+Hl;function Wo(e){var t=e[qa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_i]||r[qa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cb(e);e!==null;){if(r=e[qa])return r;e=cb(e)}return t}e=r,r=e.parentNode}return null}function ff(e){return e=e[qa]||e[_i],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ws(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(he(33))}function hh(e){return e[mu]||null}var um=[],Vs=-1;function So(e){return{current:e}}function qt(e){0>Vs||(e.current=um[Vs],um[Vs]=null,Vs--)}function Vt(e,t){Vs++,um[Vs]=e.current,e.current=t}var wo={},gn=So(wo),Dn=So(!1),os=wo;function dl(e,t){var r=e.type.contextTypes;if(!r)return wo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function In(e){return e=e.childContextTypes,e!=null}function Dd(){qt(Dn),qt(gn)}function ub(e,t,r){if(gn.current!==wo)throw Error(he(168));Vt(gn,t),Vt(Dn,r)}function d4(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(he(108,oO(e)||"Unknown",a));return sr({},r,n)}function Id(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wo,os=gn.current,Vt(gn,e),Vt(Dn,Dn.current),!0}function fb(e,t,r){var n=e.stateNode;if(!n)throw Error(he(169));r?(e=d4(e,t,os),n.__reactInternalMemoizedMergedChildContext=e,qt(Dn),qt(gn),Vt(gn,e)):qt(Dn),Vt(Dn,r)}var vi=null,ph=!1,Fp=!1;function h4(e){vi===null?vi=[e]:vi.push(e)}function SM(e){ph=!0,h4(e)}function jo(){if(!Fp&&vi!==null){Fp=!0;var e=0,t=Mt;try{var r=vi;for(Mt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vi=null,ph=!1}catch(a){throw vi!==null&&(vi=vi.slice(e+1)),L5(Pv,jo),a}finally{Mt=t,Fp=!1}}return null}var Hs=[],Xs=0,Rd=null,Ld=0,ga=[],ma=0,ss=null,xi=1,bi="";function Bo(e,t){Hs[Xs++]=Ld,Hs[Xs++]=Rd,Rd=e,Ld=t}function p4(e,t,r){ga[ma++]=xi,ga[ma++]=bi,ga[ma++]=ss,ss=e;var n=xi;e=bi;var a=32-za(n)-1;n&=~(1<<a),r+=1;var i=32-za(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,xi=1<<32-za(t)+a|r<<a|n,bi=i+e}else xi=1<<i|r<<a|n,bi=e}function $v(e){e.return!==null&&(Bo(e,1),p4(e,1,0))}function Dv(e){for(;e===Rd;)Rd=Hs[--Xs],Hs[Xs]=null,Ld=Hs[--Xs],Hs[Xs]=null;for(;e===ss;)ss=ga[--ma],ga[ma]=null,bi=ga[--ma],ga[ma]=null,xi=ga[--ma],ga[ma]=null}var Jn=null,Qn=null,tr=!1,Ra=null;function g4(e,t){var r=ya(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function db(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=uo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jn=e,Qn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ss!==null?{id:xi,overflow:bi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ya(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jn=e,Qn=null,!0):!1;default:return!1}}function fm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dm(e){if(tr){var t=Qn;if(t){var r=t;if(!db(e,t)){if(fm(e))throw Error(he(418));t=uo(r.nextSibling);var n=Jn;t&&db(e,t)?g4(n,r):(e.flags=e.flags&-4097|2,tr=!1,Jn=e)}}else{if(fm(e))throw Error(he(418));e.flags=e.flags&-4097|2,tr=!1,Jn=e}}}function hb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jn=e}function zf(e){if(e!==Jn)return!1;if(!tr)return hb(e),tr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sm(e.type,e.memoizedProps)),t&&(t=Qn)){if(fm(e))throw m4(),Error(he(418));for(;t;)g4(e,t),t=uo(t.nextSibling)}if(hb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(he(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qn=uo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qn=null}}else Qn=Jn?uo(e.stateNode.nextSibling):null;return!0}function m4(){for(var e=Qn;e;)e=uo(e.nextSibling)}function hl(){Qn=Jn=null,tr=!1}function Iv(e){Ra===null?Ra=[e]:Ra.push(e)}var jM=Ii.ReactCurrentBatchConfig;function kc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(he(309));var n=r.stateNode}if(!n)throw Error(he(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(he(284));if(!r._owner)throw Error(he(290,e))}return e}function Gf(e,t){throw e=Object.prototype.toString.call(t),Error(he(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pb(e){var t=e._init;return t(e._payload)}function y4(e){function t(v,g){if(e){var b=v.deletions;b===null?(v.deletions=[g],v.flags|=16):b.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function a(v,g){return v=go(v,g),v.index=0,v.sibling=null,v}function i(v,g,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<g?(v.flags|=2,g):b):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,g,b,S){return g===null||g.tag!==6?(g=Xp(b,v.mode,S),g.return=v,g):(g=a(g,b),g.return=v,g)}function l(v,g,b,S){var k=b.type;return k===Fs?f(v,g,b.props.children,S,b.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vi&&pb(k)===g.type)?(S=a(g,b.props),S.ref=kc(v,g,b),S.return=v,S):(S=kd(b.type,b.key,b.props,null,v.mode,S),S.ref=kc(v,g,b),S.return=v,S)}function u(v,g,b,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Kp(b,v.mode,S),g.return=v,g):(g=a(g,b.children||[]),g.return=v,g)}function f(v,g,b,S,k){return g===null||g.tag!==7?(g=rs(b,v.mode,S,k),g.return=v,g):(g=a(g,b),g.return=v,g)}function d(v,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Xp(""+g,v.mode,b),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Af:return b=kd(g.type,g.key,g.props,null,v.mode,b),b.ref=kc(v,null,g),b.return=v,b;case Bs:return g=Kp(g,v.mode,b),g.return=v,g;case Vi:var S=g._init;return d(v,S(g._payload),b)}if(Bc(g)||yc(g))return g=rs(g,v.mode,b,null),g.return=v,g;Gf(v,g)}return null}function h(v,g,b,S){var k=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:s(v,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Af:return b.key===k?l(v,g,b,S):null;case Bs:return b.key===k?u(v,g,b,S):null;case Vi:return k=b._init,h(v,g,k(b._payload),S)}if(Bc(b)||yc(b))return k!==null?null:f(v,g,b,S,null);Gf(v,b)}return null}function p(v,g,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,s(g,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Af:return v=v.get(S.key===null?b:S.key)||null,l(g,v,S,k);case Bs:return v=v.get(S.key===null?b:S.key)||null,u(g,v,S,k);case Vi:var w=S._init;return p(v,g,b,w(S._payload),k)}if(Bc(S)||yc(S))return v=v.get(b)||null,f(g,v,S,k,null);Gf(g,S)}return null}function y(v,g,b,S){for(var k=null,w=null,P=g,C=g=0,M=null;P!==null&&C<b.length;C++){P.index>C?(M=P,P=null):M=P.sibling;var N=h(v,P,b[C],S);if(N===null){P===null&&(P=M);break}e&&P&&N.alternate===null&&t(v,P),g=i(N,g,C),w===null?k=N:w.sibling=N,w=N,P=M}if(C===b.length)return r(v,P),tr&&Bo(v,C),k;if(P===null){for(;C<b.length;C++)P=d(v,b[C],S),P!==null&&(g=i(P,g,C),w===null?k=P:w.sibling=P,w=P);return tr&&Bo(v,C),k}for(P=n(v,P);C<b.length;C++)M=p(P,v,C,b[C],S),M!==null&&(e&&M.alternate!==null&&P.delete(M.key===null?C:M.key),g=i(M,g,C),w===null?k=M:w.sibling=M,w=M);return e&&P.forEach(function($){return t(v,$)}),tr&&Bo(v,C),k}function m(v,g,b,S){var k=yc(b);if(typeof k!="function")throw Error(he(150));if(b=k.call(b),b==null)throw Error(he(151));for(var w=k=null,P=g,C=g=0,M=null,N=b.next();P!==null&&!N.done;C++,N=b.next()){P.index>C?(M=P,P=null):M=P.sibling;var $=h(v,P,N.value,S);if($===null){P===null&&(P=M);break}e&&P&&$.alternate===null&&t(v,P),g=i($,g,C),w===null?k=$:w.sibling=$,w=$,P=M}if(N.done)return r(v,P),tr&&Bo(v,C),k;if(P===null){for(;!N.done;C++,N=b.next())N=d(v,N.value,S),N!==null&&(g=i(N,g,C),w===null?k=N:w.sibling=N,w=N);return tr&&Bo(v,C),k}for(P=n(v,P);!N.done;C++,N=b.next())N=p(P,v,C,N.value,S),N!==null&&(e&&N.alternate!==null&&P.delete(N.key===null?C:N.key),g=i(N,g,C),w===null?k=N:w.sibling=N,w=N);return e&&P.forEach(function(_){return t(v,_)}),tr&&Bo(v,C),k}function x(v,g,b,S){if(typeof b=="object"&&b!==null&&b.type===Fs&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Af:e:{for(var k=b.key,w=g;w!==null;){if(w.key===k){if(k=b.type,k===Fs){if(w.tag===7){r(v,w.sibling),g=a(w,b.props.children),g.return=v,v=g;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vi&&pb(k)===w.type){r(v,w.sibling),g=a(w,b.props),g.ref=kc(v,w,b),g.return=v,v=g;break e}r(v,w);break}else t(v,w);w=w.sibling}b.type===Fs?(g=rs(b.props.children,v.mode,S,b.key),g.return=v,v=g):(S=kd(b.type,b.key,b.props,null,v.mode,S),S.ref=kc(v,g,b),S.return=v,v=S)}return o(v);case Bs:e:{for(w=b.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(v,g.sibling),g=a(g,b.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=Kp(b,v.mode,S),g.return=v,v=g}return o(v);case Vi:return w=b._init,x(v,g,w(b._payload),S)}if(Bc(b))return y(v,g,b,S);if(yc(b))return m(v,g,b,S);Gf(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(v,g.sibling),g=a(g,b),g.return=v,v=g):(r(v,g),g=Xp(b,v.mode,S),g.return=v,v=g),o(v)):r(v,g)}return x}var pl=y4(!0),v4=y4(!1),Bd=So(null),Fd=null,Ks=null,Rv=null;function Lv(){Rv=Ks=Fd=null}function Bv(e){var t=Bd.current;qt(Bd),e._currentValue=t}function hm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function al(e,t){Fd=e,Rv=Ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(En=!0),e.firstContext=null)}function ka(e){var t=e._currentValue;if(Rv!==e)if(e={context:e,memoizedValue:t,next:null},Ks===null){if(Fd===null)throw Error(he(308));Ks=e,Fd.dependencies={lanes:0,firstContext:e}}else Ks=Ks.next=e;return t}var Vo=null;function Fv(e){Vo===null?Vo=[e]:Vo.push(e)}function x4(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Fv(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ai(e,n)}function Ai(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Hi=!1;function zv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ji(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ai(e,r)}return a=n.interleaved,a===null?(t.next=t,Fv(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ai(e,r)}function md(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Cv(e,r)}}function gb(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zd(e,t,r,n){var a=e.updateQueue;Hi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,f=u=l=null,s=i;do{var h=s.lane,p=s.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=e,m=s;switch(h=t,p=r,m.tag){case 1:if(y=m.payload,typeof y=="function"){d=y.call(p,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,h=typeof y=="function"?y.call(p,d,h):y,h==null)break e;d=sr({},d,h);break e;case 2:Hi=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=p,l=d):f=f.next=p,o|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;h=s,s=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);cs|=o,e.lanes=o,e.memoizedState=d}}function mb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(he(191,a));a.call(n)}}}var df={},ei=So(df),yu=So(df),vu=So(df);function Ho(e){if(e===df)throw Error(he(174));return e}function Gv(e,t){switch(Vt(vu,t),Vt(yu,e),Vt(ei,df),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xg(t,e)}qt(ei),Vt(ei,t)}function gl(){qt(ei),qt(yu),qt(vu)}function w4(e){Ho(vu.current);var t=Ho(ei.current),r=Xg(t,e.type);t!==r&&(Vt(yu,e),Vt(ei,r))}function Uv(e){yu.current===e&&(qt(ei),qt(yu))}var ir=So(0);function Gd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zp=[];function Wv(){for(var e=0;e<zp.length;e++)zp[e]._workInProgressVersionPrimary=null;zp.length=0}var yd=Ii.ReactCurrentDispatcher,Gp=Ii.ReactCurrentBatchConfig,ls=0,or=null,Dr=null,Wr=null,Ud=!1,Kc=!1,xu=0,PM=0;function cn(){throw Error(he(321))}function Vv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ua(e[r],t[r]))return!1;return!0}function Hv(e,t,r,n,a,i){if(ls=i,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yd.current=e===null||e.memoizedState===null?MM:_M,e=r(n,a),Kc){i=0;do{if(Kc=!1,xu=0,25<=i)throw Error(he(301));i+=1,Wr=Dr=null,t.updateQueue=null,yd.current=AM,e=r(n,a)}while(Kc)}if(yd.current=Wd,t=Dr!==null&&Dr.next!==null,ls=0,Wr=Dr=or=null,Ud=!1,t)throw Error(he(300));return e}function Xv(){var e=xu!==0;return xu=0,e}function Ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?or.memoizedState=Wr=e:Wr=Wr.next=e,Wr}function Sa(){if(Dr===null){var e=or.alternate;e=e!==null?e.memoizedState:null}else e=Dr.next;var t=Wr===null?or.memoizedState:Wr.next;if(t!==null)Wr=t,Dr=e;else{if(e===null)throw Error(he(310));Dr=e,e={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Wr===null?or.memoizedState=Wr=e:Wr=Wr.next=e}return Wr}function bu(e,t){return typeof t=="function"?t(e):t}function Up(e){var t=Sa(),r=t.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=e;var n=Dr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,l=null,u=i;do{var f=u.lane;if((ls&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,or.lanes|=f,cs|=f}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=s,Ua(n,t.memoizedState)||(En=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,or.lanes|=i,cs|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Wp(e){var t=Sa(),r=t.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ua(i,t.memoizedState)||(En=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function k4(){}function S4(e,t){var r=or,n=Sa(),a=t(),i=!Ua(n.memoizedState,a);if(i&&(n.memoizedState=a,En=!0),n=n.queue,Kv(C4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Wr!==null&&Wr.memoizedState.tag&1){if(r.flags|=2048,wu(9,P4.bind(null,r,n,a,t),void 0,null),Hr===null)throw Error(he(349));ls&30||j4(r,t,a)}return a}function j4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function P4(e,t,r,n){t.value=r,t.getSnapshot=n,N4(t)&&O4(e)}function C4(e,t,r){return r(function(){N4(t)&&O4(e)})}function N4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ua(e,r)}catch{return!0}}function O4(e){var t=Ai(e,1);t!==null&&Ga(t,e,1,-1)}function yb(e){var t=Ya();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:e},t.queue=e,e=e.dispatch=OM.bind(null,or,e),[t.memoizedState,e]}function wu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function M4(){return Sa().memoizedState}function vd(e,t,r,n){var a=Ya();or.flags|=e,a.memoizedState=wu(1|t,r,void 0,n===void 0?null:n)}function gh(e,t,r,n){var a=Sa();n=n===void 0?null:n;var i=void 0;if(Dr!==null){var o=Dr.memoizedState;if(i=o.destroy,n!==null&&Vv(n,o.deps)){a.memoizedState=wu(t,r,i,n);return}}or.flags|=e,a.memoizedState=wu(1|t,r,i,n)}function vb(e,t){return vd(8390656,8,e,t)}function Kv(e,t){return gh(2048,8,e,t)}function _4(e,t){return gh(4,2,e,t)}function A4(e,t){return gh(4,4,e,t)}function T4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function E4(e,t,r){return r=r!=null?r.concat([e]):null,gh(4,4,T4.bind(null,t,e),r)}function Yv(){}function $4(e,t){var r=Sa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function D4(e,t){var r=Sa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function I4(e,t,r){return ls&21?(Ua(r,t)||(r=z5(),or.lanes|=r,cs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,En=!0),e.memoizedState=r)}function CM(e,t){var r=Mt;Mt=r!==0&&4>r?r:4,e(!0);var n=Gp.transition;Gp.transition={};try{e(!1),t()}finally{Mt=r,Gp.transition=n}}function R4(){return Sa().memoizedState}function NM(e,t,r){var n=po(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},L4(e))B4(t,r);else if(r=x4(e,t,r,n),r!==null){var a=Nn();Ga(r,e,n,a),F4(r,t,n)}}function OM(e,t,r){var n=po(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(L4(e))B4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Ua(s,o)){var l=t.interleaved;l===null?(a.next=a,Fv(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=x4(e,t,a,n),r!==null&&(a=Nn(),Ga(r,e,n,a),F4(r,t,n))}}function L4(e){var t=e.alternate;return e===or||t!==null&&t===or}function B4(e,t){Kc=Ud=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function F4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Cv(e,r)}}var Wd={readContext:ka,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},MM={readContext:ka,useCallback:function(e,t){return Ya().memoizedState=[e,t===void 0?null:t],e},useContext:ka,useEffect:vb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vd(4194308,4,T4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vd(4194308,4,e,t)},useInsertionEffect:function(e,t){return vd(4,2,e,t)},useMemo:function(e,t){var r=Ya();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ya();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=NM.bind(null,or,e),[n.memoizedState,e]},useRef:function(e){var t=Ya();return e={current:e},t.memoizedState=e},useState:yb,useDebugValue:Yv,useDeferredValue:function(e){return Ya().memoizedState=e},useTransition:function(){var e=yb(!1),t=e[0];return e=CM.bind(null,e[1]),Ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=or,a=Ya();if(tr){if(r===void 0)throw Error(he(407));r=r()}else{if(r=t(),Hr===null)throw Error(he(349));ls&30||j4(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,vb(C4.bind(null,n,i,e),[e]),n.flags|=2048,wu(9,P4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ya(),t=Hr.identifierPrefix;if(tr){var r=bi,n=xi;r=(n&~(1<<32-za(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=xu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=PM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_M={readContext:ka,useCallback:$4,useContext:ka,useEffect:Kv,useImperativeHandle:E4,useInsertionEffect:_4,useLayoutEffect:A4,useMemo:D4,useReducer:Up,useRef:M4,useState:function(){return Up(bu)},useDebugValue:Yv,useDeferredValue:function(e){var t=Sa();return I4(t,Dr.memoizedState,e)},useTransition:function(){var e=Up(bu)[0],t=Sa().memoizedState;return[e,t]},useMutableSource:k4,useSyncExternalStore:S4,useId:R4,unstable_isNewReconciler:!1},AM={readContext:ka,useCallback:$4,useContext:ka,useEffect:Kv,useImperativeHandle:E4,useInsertionEffect:_4,useLayoutEffect:A4,useMemo:D4,useReducer:Wp,useRef:M4,useState:function(){return Wp(bu)},useDebugValue:Yv,useDeferredValue:function(e){var t=Sa();return Dr===null?t.memoizedState=e:I4(t,Dr.memoizedState,e)},useTransition:function(){var e=Wp(bu)[0],t=Sa().memoizedState;return[e,t]},useMutableSource:k4,useSyncExternalStore:S4,useId:R4,unstable_isNewReconciler:!1};function Ea(e,t){if(e&&e.defaultProps){t=sr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function pm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:sr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mh={isMounted:function(e){return(e=e._reactInternals)?Ss(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Nn(),a=po(e),i=ji(n,a);i.payload=t,r!=null&&(i.callback=r),t=fo(e,i,a),t!==null&&(Ga(t,e,a,n),md(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Nn(),a=po(e),i=ji(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=fo(e,i,a),t!==null&&(Ga(t,e,a,n),md(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Nn(),n=po(e),a=ji(r,n);a.tag=2,t!=null&&(a.callback=t),t=fo(e,a,n),t!==null&&(Ga(t,e,n,r),md(t,e,n))}};function xb(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!hu(r,n)||!hu(a,i):!0}function z4(e,t,r){var n=!1,a=wo,i=t.contextType;return typeof i=="object"&&i!==null?i=ka(i):(a=In(t)?os:gn.current,n=t.contextTypes,i=(n=n!=null)?dl(e,a):wo),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function bb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&mh.enqueueReplaceState(t,t.state,null)}function gm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},zv(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ka(i):(i=In(t)?os:gn.current,a.context=dl(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(pm(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&mh.enqueueReplaceState(a,a.state,null),zd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ml(e,t){try{var r="",n=t;do r+=iO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Vp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var TM=typeof WeakMap=="function"?WeakMap:Map;function G4(e,t,r){r=ji(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hd||(Hd=!0,Cm=n),mm(e,t)},r}function U4(e,t,r){r=ji(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){mm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){mm(e,t),typeof n!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function wb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new TM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=HM.bind(null,e,t,r),t.then(e,e))}function kb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sb(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ji(-1,1),t.tag=2,fo(r,t,1))),r.lanes|=1),e)}var EM=Ii.ReactCurrentOwner,En=!1;function Pn(e,t,r,n){t.child=e===null?v4(t,null,r,n):pl(t,e.child,r,n)}function jb(e,t,r,n,a){r=r.render;var i=t.ref;return al(t,a),n=Hv(e,t,r,n,i,a),r=Xv(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ti(e,t,a)):(tr&&r&&$v(t),t.flags|=1,Pn(e,t,n,a),t.child)}function Pb(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!nx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,W4(e,t,i,n,a)):(e=kd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:hu,r(o,n)&&e.ref===t.ref)return Ti(e,t,a)}return t.flags|=1,e=go(i,n),e.ref=t.ref,e.return=t,t.child=e}function W4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(hu(i,n)&&e.ref===t.ref)if(En=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(En=!0);else return t.lanes=e.lanes,Ti(e,t,a)}return ym(e,t,r,n,a)}function V4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(qs,Yn),Yn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(qs,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Vt(qs,Yn),Yn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Vt(qs,Yn),Yn|=n;return Pn(e,t,a,r),t.child}function H4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ym(e,t,r,n,a){var i=In(r)?os:gn.current;return i=dl(t,i),al(t,a),r=Hv(e,t,r,n,i,a),n=Xv(),e!==null&&!En?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ti(e,t,a)):(tr&&n&&$v(t),t.flags|=1,Pn(e,t,r,a),t.child)}function Cb(e,t,r,n,a){if(In(r)){var i=!0;Id(t)}else i=!1;if(al(t,a),t.stateNode===null)xd(e,t),z4(t,r,n),gm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ka(u):(u=In(r)?os:gn.current,u=dl(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&bb(t,o,n,u),Hi=!1;var h=t.memoizedState;o.state=h,zd(t,n,o,a),l=t.memoizedState,s!==n||h!==l||Dn.current||Hi?(typeof f=="function"&&(pm(t,r,f,n),l=t.memoizedState),(s=Hi||xb(t,r,s,n,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,b4(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ea(t.type,s),o.props=u,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ka(l):(l=In(r)?os:gn.current,l=dl(t,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||h!==l)&&bb(t,o,n,l),Hi=!1,h=t.memoizedState,o.state=h,zd(t,n,o,a);var y=t.memoizedState;s!==d||h!==y||Dn.current||Hi?(typeof p=="function"&&(pm(t,r,p,n),y=t.memoizedState),(u=Hi||xb(t,r,u,n,h,y,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return vm(e,t,r,n,i,a)}function vm(e,t,r,n,a,i){H4(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&fb(t,r,!1),Ti(e,t,i);n=t.stateNode,EM.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=pl(t,e.child,null,i),t.child=pl(t,null,s,i)):Pn(e,t,s,i),t.memoizedState=n.state,a&&fb(t,r,!0),t.child}function X4(e){var t=e.stateNode;t.pendingContext?ub(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ub(e,t.context,!1),Gv(e,t.containerInfo)}function Nb(e,t,r,n,a){return hl(),Iv(a),t.flags|=256,Pn(e,t,r,n),t.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function bm(e){return{baseLanes:e,cachePool:null,transitions:null}}function K4(e,t,r){var n=t.pendingProps,a=ir.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Vt(ir,a&1),e===null)return dm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xh(o,n,0,null),e=rs(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bm(r),t.memoizedState=xm,e):qv(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return $M(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=go(a,l),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=go(s,i):(i=rs(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?bm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=xm,n}return i=e.child,e=i.sibling,n=go(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function qv(e,t){return t=xh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Uf(e,t,r,n){return n!==null&&Iv(n),pl(t,e.child,null,r),e=qv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $M(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Vp(Error(he(422))),Uf(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=xh({mode:"visible",children:n.children},a,0,null),i=rs(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&pl(t,e.child,null,o),t.child.memoizedState=bm(o),t.memoizedState=xm,i);if(!(t.mode&1))return Uf(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(he(419)),n=Vp(i,n,void 0),Uf(e,t,o,n)}if(s=(o&e.childLanes)!==0,En||s){if(n=Hr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ai(e,a),Ga(n,e,a,-1))}return rx(),n=Vp(Error(he(421))),Uf(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=XM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qn=uo(a.nextSibling),Jn=t,tr=!0,Ra=null,e!==null&&(ga[ma++]=xi,ga[ma++]=bi,ga[ma++]=ss,xi=e.id,bi=e.overflow,ss=t),t=qv(t,n.children),t.flags|=4096,t)}function Ob(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),hm(e.return,t,r)}function Hp(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Y4(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Pn(e,t,n.children,r),n=ir.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ob(e,r,t);else if(e.tag===19)Ob(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Vt(ir,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Gd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Hp(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Gd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Hp(t,!0,r,null,i);break;case"together":Hp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ti(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),cs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(he(153));if(t.child!==null){for(e=t.child,r=go(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=go(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function DM(e,t,r){switch(t.tag){case 3:X4(t),hl();break;case 5:w4(t);break;case 1:In(t.type)&&Id(t);break;case 4:Gv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Vt(Bd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Vt(ir,ir.current&1),t.flags|=128,null):r&t.child.childLanes?K4(e,t,r):(Vt(ir,ir.current&1),e=Ti(e,t,r),e!==null?e.sibling:null);Vt(ir,ir.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Y4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Vt(ir,ir.current),n)break;return null;case 22:case 23:return t.lanes=0,V4(e,t,r)}return Ti(e,t,r)}var q4,wm,Z4,Q4;q4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wm=function(){};Z4=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ho(ei.current);var i=null;switch(r){case"input":a=Ug(e,a),n=Ug(e,n),i=[];break;case"select":a=sr({},a,{value:void 0}),n=sr({},n,{value:void 0}),i=[];break;case"textarea":a=Hg(e,a),n=Hg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=$d)}Kg(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ou.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ou.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xt("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Q4=function(e,t,r,n){r!==n&&(t.flags|=4)};function Sc(e,t){if(!tr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function IM(e,t,r){var n=t.pendingProps;switch(Dv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return In(t.type)&&Dd(),un(t),null;case 3:return n=t.stateNode,gl(),qt(Dn),qt(gn),Wv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(zf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ra!==null&&(Mm(Ra),Ra=null))),wm(e,t),un(t),null;case 5:Uv(t);var a=Ho(vu.current);if(r=t.type,e!==null&&t.stateNode!=null)Z4(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(he(166));return un(t),null}if(e=Ho(ei.current),zf(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[qa]=t,n[mu]=i,e=(t.mode&1)!==0,r){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(a=0;a<zc.length;a++)Xt(zc[a],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":R1(n,i),Xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Xt("invalid",n);break;case"textarea":B1(n,i),Xt("invalid",n)}Kg(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&Ff(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Ff(n.textContent,s,e),a=["children",""+s]):ou.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Xt("scroll",n)}switch(r){case"input":Tf(n),L1(n,i,!0);break;case"textarea":Tf(n),F1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=$d)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=C5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[qa]=t,e[mu]=n,q4(e,t,!1,!1),t.stateNode=e;e:{switch(o=Yg(r,n),r){case"dialog":Xt("cancel",e),Xt("close",e),a=n;break;case"iframe":case"object":case"embed":Xt("load",e),a=n;break;case"video":case"audio":for(a=0;a<zc.length;a++)Xt(zc[a],e);a=n;break;case"source":Xt("error",e),a=n;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),a=n;break;case"details":Xt("toggle",e),a=n;break;case"input":R1(e,n),a=Ug(e,n),Xt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=sr({},n,{value:void 0}),Xt("invalid",e);break;case"textarea":B1(e,n),a=Hg(e,n),Xt("invalid",e);break;default:a=n}Kg(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?M5(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&N5(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&su(e,l):typeof l=="number"&&su(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ou.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Xt("scroll",e):l!=null&&bv(e,i,l,o))}switch(r){case"input":Tf(e),L1(e,n,!1);break;case"textarea":Tf(e),F1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+bo(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?el(e,!!n.multiple,i,!1):n.defaultValue!=null&&el(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=$d)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return un(t),null;case 6:if(e&&t.stateNode!=null)Q4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(he(166));if(r=Ho(vu.current),Ho(ei.current),zf(t)){if(n=t.stateNode,r=t.memoizedProps,n[qa]=t,(i=n.nodeValue!==r)&&(e=Jn,e!==null))switch(e.tag){case 3:Ff(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ff(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[qa]=t,t.stateNode=n}return un(t),null;case 13:if(qt(ir),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tr&&Qn!==null&&t.mode&1&&!(t.flags&128))m4(),hl(),t.flags|=98560,i=!1;else if(i=zf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(he(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(he(317));i[qa]=t}else hl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),i=!1}else Ra!==null&&(Mm(Ra),Ra=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ir.current&1?Ir===0&&(Ir=3):rx())),t.updateQueue!==null&&(t.flags|=4),un(t),null);case 4:return gl(),wm(e,t),e===null&&pu(t.stateNode.containerInfo),un(t),null;case 10:return Bv(t.type._context),un(t),null;case 17:return In(t.type)&&Dd(),un(t),null;case 19:if(qt(ir),i=t.memoizedState,i===null)return un(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Sc(i,!1);else{if(Ir!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gd(e),o!==null){for(t.flags|=128,Sc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Vt(ir,ir.current&1|2),t.child}e=e.sibling}i.tail!==null&&xr()>yl&&(t.flags|=128,n=!0,Sc(i,!1),t.lanes=4194304)}else{if(!n)if(e=Gd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Sc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!tr)return un(t),null}else 2*xr()-i.renderingStartTime>yl&&r!==1073741824&&(t.flags|=128,n=!0,Sc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xr(),t.sibling=null,r=ir.current,Vt(ir,n?r&1|2:r&1),t):(un(t),null);case 22:case 23:return tx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Yn&1073741824&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),null;case 24:return null;case 25:return null}throw Error(he(156,t.tag))}function RM(e,t){switch(Dv(t),t.tag){case 1:return In(t.type)&&Dd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gl(),qt(Dn),qt(gn),Wv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uv(t),null;case 13:if(qt(ir),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(he(340));hl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qt(ir),null;case 4:return gl(),null;case 10:return Bv(t.type._context),null;case 22:case 23:return tx(),null;case 24:return null;default:return null}}var Wf=!1,hn=!1,LM=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Ys(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dr(e,t,n)}else r.current=null}function km(e,t,r){try{r()}catch(n){dr(e,t,n)}}var Mb=!1;function BM(e,t){if(im=Ad,e=n4(),Ev(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===a&&(s=o),h===i&&++f===n&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(om={focusedElem:e,selectionRange:r},Ad=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,x=y.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ea(t.type,m),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(S){dr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return y=Mb,Mb=!1,y}function Yc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&km(t,r,i)}a=a.next}while(a!==n)}}function yh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Sm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function J4(e){var t=e.alternate;t!==null&&(e.alternate=null,J4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qa],delete t[mu],delete t[cm],delete t[wM],delete t[kM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function e3(e){return e.tag===5||e.tag===3||e.tag===4}function _b(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||e3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=$d));else if(n!==4&&(e=e.child,e!==null))for(jm(e,t,r),e=e.sibling;e!==null;)jm(e,t,r),e=e.sibling}function Pm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Pm(e,t,r),e=e.sibling;e!==null;)Pm(e,t,r),e=e.sibling}var Qr=null,$a=!1;function Ui(e,t,r){for(r=r.child;r!==null;)t3(e,t,r),r=r.sibling}function t3(e,t,r){if(Ja&&typeof Ja.onCommitFiberUnmount=="function")try{Ja.onCommitFiberUnmount(ch,r)}catch{}switch(r.tag){case 5:hn||Ys(r,t);case 6:var n=Qr,a=$a;Qr=null,Ui(e,t,r),Qr=n,$a=a,Qr!==null&&($a?(e=Qr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Qr.removeChild(r.stateNode));break;case 18:Qr!==null&&($a?(e=Qr,r=r.stateNode,e.nodeType===8?Bp(e.parentNode,r):e.nodeType===1&&Bp(e,r),fu(e)):Bp(Qr,r.stateNode));break;case 4:n=Qr,a=$a,Qr=r.stateNode.containerInfo,$a=!0,Ui(e,t,r),Qr=n,$a=a;break;case 0:case 11:case 14:case 15:if(!hn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&km(r,t,o),a=a.next}while(a!==n)}Ui(e,t,r);break;case 1:if(!hn&&(Ys(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){dr(r,t,s)}Ui(e,t,r);break;case 21:Ui(e,t,r);break;case 22:r.mode&1?(hn=(n=hn)||r.memoizedState!==null,Ui(e,t,r),hn=n):Ui(e,t,r);break;default:Ui(e,t,r)}}function Ab(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new LM),t.forEach(function(n){var a=KM.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Aa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Qr=s.stateNode,$a=!1;break e;case 3:Qr=s.stateNode.containerInfo,$a=!0;break e;case 4:Qr=s.stateNode.containerInfo,$a=!0;break e}s=s.return}if(Qr===null)throw Error(he(160));t3(i,o,a),Qr=null,$a=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){dr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r3(t,e),t=t.sibling}function r3(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Aa(t,e),Ka(e),n&4){try{Yc(3,e,e.return),yh(3,e)}catch(m){dr(e,e.return,m)}try{Yc(5,e,e.return)}catch(m){dr(e,e.return,m)}}break;case 1:Aa(t,e),Ka(e),n&512&&r!==null&&Ys(r,r.return);break;case 5:if(Aa(t,e),Ka(e),n&512&&r!==null&&Ys(r,r.return),e.flags&32){var a=e.stateNode;try{su(a,"")}catch(m){dr(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&j5(a,i),Yg(s,o);var u=Yg(s,i);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?M5(a,d):f==="dangerouslySetInnerHTML"?N5(a,d):f==="children"?su(a,d):bv(a,f,d,u)}switch(s){case"input":Wg(a,i);break;case"textarea":P5(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?el(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?el(a,!!i.multiple,i.defaultValue,!0):el(a,!!i.multiple,i.multiple?[]:"",!1))}a[mu]=i}catch(m){dr(e,e.return,m)}}break;case 6:if(Aa(t,e),Ka(e),n&4){if(e.stateNode===null)throw Error(he(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){dr(e,e.return,m)}}break;case 3:if(Aa(t,e),Ka(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{fu(t.containerInfo)}catch(m){dr(e,e.return,m)}break;case 4:Aa(t,e),Ka(e);break;case 13:Aa(t,e),Ka(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Jv=xr())),n&4&&Ab(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(hn=(u=hn)||f,Aa(t,e),hn=u):Aa(t,e),Ka(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ke=e,f=e.child;f!==null;){for(d=ke=f;ke!==null;){switch(h=ke,p=h.child,h.tag){case 0:case 11:case 14:case 15:Yc(4,h,h.return);break;case 1:Ys(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){dr(n,r,m)}}break;case 5:Ys(h,h.return);break;case 22:if(h.memoizedState!==null){Eb(d);continue}}p!==null?(p.return=h,ke=p):Eb(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=O5("display",o))}catch(m){dr(e,e.return,m)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){dr(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Aa(t,e),Ka(e),n&4&&Ab(e);break;case 21:break;default:Aa(t,e),Ka(e)}}function Ka(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(e3(r)){var n=r;break e}r=r.return}throw Error(he(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(su(a,""),n.flags&=-33);var i=_b(e);Pm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=_b(e);jm(e,s,o);break;default:throw Error(he(161))}}catch(l){dr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function FM(e,t,r){ke=e,n3(e)}function n3(e,t,r){for(var n=(e.mode&1)!==0;ke!==null;){var a=ke,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Wf;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||hn;s=Wf;var u=hn;if(Wf=o,(hn=l)&&!u)for(ke=a;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?$b(a):l!==null?(l.return=o,ke=l):$b(a);for(;i!==null;)ke=i,n3(i),i=i.sibling;ke=a,Wf=s,hn=u}Tb(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ke=i):Tb(e)}}function Tb(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||yh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!hn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ea(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&mb(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}mb(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&fu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}hn||t.flags&512&&Sm(t)}catch(h){dr(t,t.return,h)}}if(t===e){ke=null;break}if(r=t.sibling,r!==null){r.return=t.return,ke=r;break}ke=t.return}}function Eb(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ke=r;break}ke=t.return}}function $b(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{yh(4,t)}catch(l){dr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){dr(t,a,l)}}var i=t.return;try{Sm(t)}catch(l){dr(t,i,l)}break;case 5:var o=t.return;try{Sm(t)}catch(l){dr(t,o,l)}}}catch(l){dr(t,t.return,l)}if(t===e){ke=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ke=s;break}ke=t.return}}var zM=Math.ceil,Vd=Ii.ReactCurrentDispatcher,Zv=Ii.ReactCurrentOwner,ba=Ii.ReactCurrentBatchConfig,pt=0,Hr=null,Cr=null,tn=0,Yn=0,qs=So(0),Ir=0,ku=null,cs=0,vh=0,Qv=0,qc=null,An=null,Jv=0,yl=1/0,yi=null,Hd=!1,Cm=null,ho=null,Vf=!1,Qi=null,Xd=0,Zc=0,Nm=null,bd=-1,wd=0;function Nn(){return pt&6?xr():bd!==-1?bd:bd=xr()}function po(e){return e.mode&1?pt&2&&tn!==0?tn&-tn:jM.transition!==null?(wd===0&&(wd=z5()),wd):(e=Mt,e!==0||(e=window.event,e=e===void 0?16:K5(e.type)),e):1}function Ga(e,t,r,n){if(50<Zc)throw Zc=0,Nm=null,Error(he(185));cf(e,r,n),(!(pt&2)||e!==Hr)&&(e===Hr&&(!(pt&2)&&(vh|=r),Ir===4&&Yi(e,tn)),Rn(e,n),r===1&&pt===0&&!(t.mode&1)&&(yl=xr()+500,ph&&jo()))}function Rn(e,t){var r=e.callbackNode;jO(e,t);var n=_d(e,e===Hr?tn:0);if(n===0)r!==null&&U1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&U1(r),t===1)e.tag===0?SM(Db.bind(null,e)):h4(Db.bind(null,e)),xM(function(){!(pt&6)&&jo()}),r=null;else{switch(G5(n)){case 1:r=Pv;break;case 4:r=B5;break;case 16:r=Md;break;case 536870912:r=F5;break;default:r=Md}r=f3(r,a3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function a3(e,t){if(bd=-1,wd=0,pt&6)throw Error(he(327));var r=e.callbackNode;if(il()&&e.callbackNode!==r)return null;var n=_d(e,e===Hr?tn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Kd(e,n);else{t=n;var a=pt;pt|=2;var i=o3();(Hr!==e||tn!==t)&&(yi=null,yl=xr()+500,ts(e,t));do try{WM();break}catch(s){i3(e,s)}while(!0);Lv(),Vd.current=i,pt=a,Cr!==null?t=0:(Hr=null,tn=0,t=Ir)}if(t!==0){if(t===2&&(a=em(e),a!==0&&(n=a,t=Om(e,a))),t===1)throw r=ku,ts(e,0),Yi(e,n),Rn(e,xr()),r;if(t===6)Yi(e,n);else{if(a=e.current.alternate,!(n&30)&&!GM(a)&&(t=Kd(e,n),t===2&&(i=em(e),i!==0&&(n=i,t=Om(e,i))),t===1))throw r=ku,ts(e,0),Yi(e,n),Rn(e,xr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(he(345));case 2:Fo(e,An,yi);break;case 3:if(Yi(e,n),(n&130023424)===n&&(t=Jv+500-xr(),10<t)){if(_d(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Nn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=lm(Fo.bind(null,e,An,yi),t);break}Fo(e,An,yi);break;case 4:if(Yi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-za(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=xr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zM(n/1960))-n,10<n){e.timeoutHandle=lm(Fo.bind(null,e,An,yi),n);break}Fo(e,An,yi);break;case 5:Fo(e,An,yi);break;default:throw Error(he(329))}}}return Rn(e,xr()),e.callbackNode===r?a3.bind(null,e):null}function Om(e,t){var r=qc;return e.current.memoizedState.isDehydrated&&(ts(e,t).flags|=256),e=Kd(e,t),e!==2&&(t=An,An=r,t!==null&&Mm(t)),e}function Mm(e){An===null?An=e:An.push.apply(An,e)}function GM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ua(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yi(e,t){for(t&=~Qv,t&=~vh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-za(t),n=1<<r;e[r]=-1,t&=~n}}function Db(e){if(pt&6)throw Error(he(327));il();var t=_d(e,0);if(!(t&1))return Rn(e,xr()),null;var r=Kd(e,t);if(e.tag!==0&&r===2){var n=em(e);n!==0&&(t=n,r=Om(e,n))}if(r===1)throw r=ku,ts(e,0),Yi(e,t),Rn(e,xr()),r;if(r===6)throw Error(he(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fo(e,An,yi),Rn(e,xr()),null}function ex(e,t){var r=pt;pt|=1;try{return e(t)}finally{pt=r,pt===0&&(yl=xr()+500,ph&&jo())}}function us(e){Qi!==null&&Qi.tag===0&&!(pt&6)&&il();var t=pt;pt|=1;var r=ba.transition,n=Mt;try{if(ba.transition=null,Mt=1,e)return e()}finally{Mt=n,ba.transition=r,pt=t,!(pt&6)&&jo()}}function tx(){Yn=qs.current,qt(qs)}function ts(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,vM(r)),Cr!==null)for(r=Cr.return;r!==null;){var n=r;switch(Dv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dd();break;case 3:gl(),qt(Dn),qt(gn),Wv();break;case 5:Uv(n);break;case 4:gl();break;case 13:qt(ir);break;case 19:qt(ir);break;case 10:Bv(n.type._context);break;case 22:case 23:tx()}r=r.return}if(Hr=e,Cr=e=go(e.current,null),tn=Yn=t,Ir=0,ku=null,Qv=vh=cs=0,An=qc=null,Vo!==null){for(t=0;t<Vo.length;t++)if(r=Vo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Vo=null}return e}function i3(e,t){do{var r=Cr;try{if(Lv(),yd.current=Wd,Ud){for(var n=or.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ud=!1}if(ls=0,Wr=Dr=or=null,Kc=!1,xu=0,Zv.current=null,r===null||r.return===null){Ir=1,ku=t,Cr=null;break}e:{var i=e,o=r.return,s=r,l=t;if(t=tn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=kb(o);if(p!==null){p.flags&=-257,Sb(p,o,s,i,t),p.mode&1&&wb(i,u,t),t=p,l=u;var y=t.updateQueue;if(y===null){var m=new Set;m.add(l),t.updateQueue=m}else y.add(l);break e}else{if(!(t&1)){wb(i,u,t),rx();break e}l=Error(he(426))}}else if(tr&&s.mode&1){var x=kb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Sb(x,o,s,i,t),Iv(ml(l,s));break e}}i=l=ml(l,s),Ir!==4&&(Ir=2),qc===null?qc=[i]:qc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=G4(i,l,t);gb(i,v);break e;case 1:s=l;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ho===null||!ho.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=U4(i,s,t);gb(i,S);break e}}i=i.return}while(i!==null)}l3(r)}catch(k){t=k,Cr===r&&r!==null&&(Cr=r=r.return);continue}break}while(!0)}function o3(){var e=Vd.current;return Vd.current=Wd,e===null?Wd:e}function rx(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),Hr===null||!(cs&268435455)&&!(vh&268435455)||Yi(Hr,tn)}function Kd(e,t){var r=pt;pt|=2;var n=o3();(Hr!==e||tn!==t)&&(yi=null,ts(e,t));do try{UM();break}catch(a){i3(e,a)}while(!0);if(Lv(),pt=r,Vd.current=n,Cr!==null)throw Error(he(261));return Hr=null,tn=0,Ir}function UM(){for(;Cr!==null;)s3(Cr)}function WM(){for(;Cr!==null&&!gO();)s3(Cr)}function s3(e){var t=u3(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?l3(e):Cr=t,Zv.current=null}function l3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=RM(r,t),r!==null){r.flags&=32767,Cr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ir=6,Cr=null;return}}else if(r=IM(r,t,Yn),r!==null){Cr=r;return}if(t=t.sibling,t!==null){Cr=t;return}Cr=t=e}while(t!==null);Ir===0&&(Ir=5)}function Fo(e,t,r){var n=Mt,a=ba.transition;try{ba.transition=null,Mt=1,VM(e,t,r,n)}finally{ba.transition=a,Mt=n}return null}function VM(e,t,r,n){do il();while(Qi!==null);if(pt&6)throw Error(he(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(he(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(PO(e,i),e===Hr&&(Cr=Hr=null,tn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vf||(Vf=!0,f3(Md,function(){return il(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ba.transition,ba.transition=null;var o=Mt;Mt=1;var s=pt;pt|=4,Zv.current=null,BM(e,r),r3(r,e),fM(om),Ad=!!im,om=im=null,e.current=r,FM(r),mO(),pt=s,Mt=o,ba.transition=i}else e.current=r;if(Vf&&(Vf=!1,Qi=e,Xd=a),i=e.pendingLanes,i===0&&(ho=null),xO(r.stateNode),Rn(e,xr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Hd)throw Hd=!1,e=Cm,Cm=null,e;return Xd&1&&e.tag!==0&&il(),i=e.pendingLanes,i&1?e===Nm?Zc++:(Zc=0,Nm=e):Zc=0,jo(),null}function il(){if(Qi!==null){var e=G5(Xd),t=ba.transition,r=Mt;try{if(ba.transition=null,Mt=16>e?16:e,Qi===null)var n=!1;else{if(e=Qi,Qi=null,Xd=0,pt&6)throw Error(he(331));var a=pt;for(pt|=4,ke=e.current;ke!==null;){var i=ke,o=i.child;if(ke.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ke=u;ke!==null;){var f=ke;switch(f.tag){case 0:case 11:case 15:Yc(8,f,i)}var d=f.child;if(d!==null)d.return=f,ke=d;else for(;ke!==null;){f=ke;var h=f.sibling,p=f.return;if(J4(f),f===u){ke=null;break}if(h!==null){h.return=p,ke=h;break}ke=p}}}var y=i.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ke=o;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ke=v;break e}ke=i.return}}var g=e.current;for(ke=g;ke!==null;){o=ke;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ke=b;else e:for(o=g;ke!==null;){if(s=ke,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:yh(9,s)}}catch(k){dr(s,s.return,k)}if(s===o){ke=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,ke=S;break e}ke=s.return}}if(pt=a,jo(),Ja&&typeof Ja.onPostCommitFiberRoot=="function")try{Ja.onPostCommitFiberRoot(ch,e)}catch{}n=!0}return n}finally{Mt=r,ba.transition=t}}return!1}function Ib(e,t,r){t=ml(r,t),t=G4(e,t,1),e=fo(e,t,1),t=Nn(),e!==null&&(cf(e,1,t),Rn(e,t))}function dr(e,t,r){if(e.tag===3)Ib(e,e,r);else for(;t!==null;){if(t.tag===3){Ib(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ho===null||!ho.has(n))){e=ml(r,e),e=U4(t,e,1),t=fo(t,e,1),e=Nn(),t!==null&&(cf(t,1,e),Rn(t,e));break}}t=t.return}}function HM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Nn(),e.pingedLanes|=e.suspendedLanes&r,Hr===e&&(tn&r)===r&&(Ir===4||Ir===3&&(tn&130023424)===tn&&500>xr()-Jv?ts(e,0):Qv|=r),Rn(e,t)}function c3(e,t){t===0&&(e.mode&1?(t=Df,Df<<=1,!(Df&130023424)&&(Df=4194304)):t=1);var r=Nn();e=Ai(e,t),e!==null&&(cf(e,t,r),Rn(e,r))}function XM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),c3(e,r)}function KM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(he(314))}n!==null&&n.delete(t),c3(e,r)}var u3;u3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dn.current)En=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return En=!1,DM(e,t,r);En=!!(e.flags&131072)}else En=!1,tr&&t.flags&1048576&&p4(t,Ld,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;xd(e,t),e=t.pendingProps;var a=dl(t,gn.current);al(t,r),a=Hv(null,t,n,e,a,r);var i=Xv();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(n)?(i=!0,Id(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zv(t),a.updater=mh,t.stateNode=a,a._reactInternals=t,gm(t,n,e,r),t=vm(null,t,n,!0,i,r)):(t.tag=0,tr&&i&&$v(t),Pn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(xd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=qM(n),e=Ea(n,e),a){case 0:t=ym(null,t,n,e,r);break e;case 1:t=Cb(null,t,n,e,r);break e;case 11:t=jb(null,t,n,e,r);break e;case 14:t=Pb(null,t,n,Ea(n.type,e),r);break e}throw Error(he(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),ym(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),Cb(e,t,n,a,r);case 3:e:{if(X4(t),e===null)throw Error(he(387));n=t.pendingProps,i=t.memoizedState,a=i.element,b4(e,t),zd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ml(Error(he(423)),t),t=Nb(e,t,n,r,a);break e}else if(n!==a){a=ml(Error(he(424)),t),t=Nb(e,t,n,r,a);break e}else for(Qn=uo(t.stateNode.containerInfo.firstChild),Jn=t,tr=!0,Ra=null,r=v4(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hl(),n===a){t=Ti(e,t,r);break e}Pn(e,t,n,r)}t=t.child}return t;case 5:return w4(t),e===null&&dm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,sm(n,a)?o=null:i!==null&&sm(n,i)&&(t.flags|=32),H4(e,t),Pn(e,t,o,r),t.child;case 6:return e===null&&dm(t),null;case 13:return K4(e,t,r);case 4:return Gv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=pl(t,null,n,r):Pn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),jb(e,t,n,a,r);case 7:return Pn(e,t,t.pendingProps,r),t.child;case 8:return Pn(e,t,t.pendingProps.children,r),t.child;case 12:return Pn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Vt(Bd,n._currentValue),n._currentValue=o,i!==null)if(Ua(i.value,o)){if(i.children===a.children&&!Dn.current){t=Ti(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=ji(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),hm(i.return,r,t),s.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(he(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),hm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,al(t,r),a=ka(a),n=n(a),t.flags|=1,Pn(e,t,n,r),t.child;case 14:return n=t.type,a=Ea(n,t.pendingProps),a=Ea(n.type,a),Pb(e,t,n,a,r);case 15:return W4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),xd(e,t),t.tag=1,In(n)?(e=!0,Id(t)):e=!1,al(t,r),z4(t,n,a),gm(t,n,a,r),vm(null,t,n,!0,e,r);case 19:return Y4(e,t,r);case 22:return V4(e,t,r)}throw Error(he(156,t.tag))};function f3(e,t){return L5(e,t)}function YM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(e,t,r,n){return new YM(e,t,r,n)}function nx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qM(e){if(typeof e=="function")return nx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kv)return 11;if(e===Sv)return 14}return 2}function go(e,t){var r=e.alternate;return r===null?(r=ya(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function kd(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")nx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Fs:return rs(r.children,a,i,t);case wv:o=8,a|=8;break;case Bg:return e=ya(12,r,t,a|2),e.elementType=Bg,e.lanes=i,e;case Fg:return e=ya(13,r,t,a),e.elementType=Fg,e.lanes=i,e;case zg:return e=ya(19,r,t,a),e.elementType=zg,e.lanes=i,e;case w5:return xh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case x5:o=10;break e;case b5:o=9;break e;case kv:o=11;break e;case Sv:o=14;break e;case Vi:o=16,n=null;break e}throw Error(he(130,e==null?e:typeof e,""))}return t=ya(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function rs(e,t,r,n){return e=ya(7,e,n,t),e.lanes=r,e}function xh(e,t,r,n){return e=ya(22,e,n,t),e.elementType=w5,e.lanes=r,e.stateNode={isHidden:!1},e}function Xp(e,t,r){return e=ya(6,e,null,t),e.lanes=r,e}function Kp(e,t,r){return t=ya(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZM(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Op(0),this.expirationTimes=Op(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Op(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ax(e,t,r,n,a,i,o,s,l){return e=new ZM(e,t,r,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ya(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zv(i),e}function QM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function d3(e){if(!e)return wo;e=e._reactInternals;e:{if(Ss(e)!==e||e.tag!==1)throw Error(he(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(he(171))}if(e.tag===1){var r=e.type;if(In(r))return d4(e,r,t)}return t}function h3(e,t,r,n,a,i,o,s,l){return e=ax(r,n,!0,e,a,i,o,s,l),e.context=d3(null),r=e.current,n=Nn(),a=po(r),i=ji(n,a),i.callback=t??null,fo(r,i,a),e.current.lanes=a,cf(e,a,n),Rn(e,n),e}function bh(e,t,r,n){var a=t.current,i=Nn(),o=po(a);return r=d3(r),t.context===null?t.context=r:t.pendingContext=r,t=ji(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fo(a,t,o),e!==null&&(Ga(e,a,o,i),md(e,a,o)),o}function Yd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ix(e,t){Rb(e,t),(e=e.alternate)&&Rb(e,t)}function JM(){return null}var p3=typeof reportError=="function"?reportError:function(e){console.error(e)};function ox(e){this._internalRoot=e}wh.prototype.render=ox.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(he(409));bh(e,t,null,null)};wh.prototype.unmount=ox.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;us(function(){bh(null,e,null,null)}),t[_i]=null}};function wh(e){this._internalRoot=e}wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=V5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ki.length&&t!==0&&t<Ki[r].priority;r++);Ki.splice(r,0,e),r===0&&X5(e)}};function sx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lb(){}function e_(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Yd(o);i.call(u)}}var o=h3(t,n,e,0,null,!1,!1,"",Lb);return e._reactRootContainer=o,e[_i]=o.current,pu(e.nodeType===8?e.parentNode:e),us(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=Yd(l);s.call(u)}}var l=ax(e,0,!1,null,null,!1,!1,"",Lb);return e._reactRootContainer=l,e[_i]=l.current,pu(e.nodeType===8?e.parentNode:e),us(function(){bh(t,l,r,n)}),l}function Sh(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Yd(o);s.call(l)}}bh(t,o,e,a)}else o=e_(r,t,e,a,n);return Yd(o)}U5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Fc(t.pendingLanes);r!==0&&(Cv(t,r|1),Rn(t,xr()),!(pt&6)&&(yl=xr()+500,jo()))}break;case 13:us(function(){var n=Ai(e,1);if(n!==null){var a=Nn();Ga(n,e,1,a)}}),ix(e,1)}};Nv=function(e){if(e.tag===13){var t=Ai(e,134217728);if(t!==null){var r=Nn();Ga(t,e,134217728,r)}ix(e,134217728)}};W5=function(e){if(e.tag===13){var t=po(e),r=Ai(e,t);if(r!==null){var n=Nn();Ga(r,e,t,n)}ix(e,t)}};V5=function(){return Mt};H5=function(e,t){var r=Mt;try{return Mt=e,t()}finally{Mt=r}};Zg=function(e,t,r){switch(t){case"input":if(Wg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=hh(n);if(!a)throw Error(he(90));S5(n),Wg(n,a)}}}break;case"textarea":P5(e,r);break;case"select":t=r.value,t!=null&&el(e,!!r.multiple,t,!1)}};T5=ex;E5=us;var t_={usingClientEntryPoint:!1,Events:[ff,Ws,hh,_5,A5,ex]},jc={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r_={bundleType:jc.bundleType,version:jc.version,rendererPackageName:jc.rendererPackageName,rendererConfig:jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=I5(e),e===null?null:e.stateNode},findFiberByHostInstance:jc.findFiberByHostInstance||JM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{ch=Hf.inject(r_),Ja=Hf}catch{}}ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t_;ta.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sx(t))throw Error(he(200));return QM(e,t,null,r)};ta.createRoot=function(e,t){if(!sx(e))throw Error(he(299));var r=!1,n="",a=p3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ax(e,1,!1,null,null,r,!1,n,a),e[_i]=t.current,pu(e.nodeType===8?e.parentNode:e),new ox(t)};ta.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(he(188)):(e=Object.keys(e).join(","),Error(he(268,e)));return e=I5(t),e=e===null?null:e.stateNode,e};ta.flushSync=function(e){return us(e)};ta.hydrate=function(e,t,r){if(!kh(t))throw Error(he(200));return Sh(null,e,t,!0,r)};ta.hydrateRoot=function(e,t,r){if(!sx(e))throw Error(he(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=p3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=h3(t,null,e,1,r??null,a,!1,i,o),e[_i]=t.current,pu(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new wh(t)};ta.render=function(e,t,r){if(!kh(t))throw Error(he(200));return Sh(null,e,t,!1,r)};ta.unmountComponentAtNode=function(e){if(!kh(e))throw Error(he(40));return e._reactRootContainer?(us(function(){Sh(null,null,e,!1,function(){e._reactRootContainer=null,e[_i]=null})}),!0):!1};ta.unstable_batchedUpdates=ex;ta.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!kh(r))throw Error(he(200));if(e==null||e._reactInternals===void 0)throw Error(he(38));return Sh(e,t,r,!1,n)};ta.version="18.3.1-next-f1338f8080-20240426";function g3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g3)}catch(e){console.error(e)}}g3(),g5.exports=ta;var n_=g5.exports,Bb=n_;Rg.createRoot=Bb.createRoot,Rg.hydrateRoot=Bb.hydrateRoot;const mo=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[c.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,a_=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:l,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:h,onOpenAbout:p,onShowExif:y,bridgeStatus:m,onBridgeClick:x,isDrLabOpen:v,onToggleDrLab:g,isColorLabOpen:b,onToggleColorLab:S,isFftLabOpen:k,onToggleFftLab:w,isSfrLabOpen:P,onToggleSfrLab:C,onGenerateTestPic:M,onPTCFilesSelected:N,onDownloadDng:$,isThreePlane:_,onOpenDatabase:A,isSidebarOpen:D,onToggleSidebar:R})=>{const L=j.useRef(null),T=j.useRef(null),[E,I]=j.useState(!1),[G,J]=j.useState(!1),[K,F]=j.useState(!1),[ee,se]=j.useState("direct"),Y=j.useRef(null),le=j.useRef(null);j.useEffect(()=>{const V=pe=>{Y.current&&!Y.current.contains(pe.target)&&J(!1),le.current&&!le.current.contains(pe.target)&&F(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const H=V=>{var pe,q;J(!1),V==="direct"?(se("direct"),(pe=L.current)==null||pe.click()):!m.isConnected||!m.hasDngConverter?I(!0):(se("convert"),(q=L.current)==null||q.click())},X=V=>{var q;const pe=(q=V.target.files)==null?void 0:q[0];pe&&e(pe,ee),V.target.value=""},oe=V=>{V.target.files&&V.target.files.length>0&&N(V.target.files),V.target.value=""},ue=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return c.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[c.jsx(mo,{isOpen:E,onClose:()=>I(!1),onConfirm:()=>I(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),_&&c.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:m.isConnected?void 0:x,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${m.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:m.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[c.jsx("span",{className:`w-2 h-2 ${m.isConnected?"bg-emerald-600":"bg-pink-600"}`}),m.isConnected?`JiangBridge Ready ${m.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),v&&c.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),b&&c.jsxs("button",{onClick:S,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),k&&c.jsxs("button",{onClick:w,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),P&&c.jsxs("button",{onClick:C,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&c.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[c.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),c.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),c.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),ue&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:V=>s(parseFloat(V.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:V=>{const pe=parseFloat(V.target.value);isNaN(pe)||s(pe)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:V=>d(parseFloat(V.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:V=>{const pe=parseFloat(V.target.value);isNaN(pe)||d(pe)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:l*100,onChange:V=>u(parseInt(V.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(l*100),onChange:V=>{const pe=parseInt(V.target.value);isNaN(pe)||u(Math.min(100,Math.max(1,pe))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),c.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),c.jsxs("button",{onClick:$,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[c.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),c.jsx("input",{type:"file",ref:L,onChange:X,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("input",{type:"file",ref:T,onChange:oe,className:"hidden",multiple:!0,accept:".csv"}),c.jsxs("div",{className:"relative inline-block text-left",ref:le,children:[c.jsxs("button",{onClick:()=>F(!K),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${K?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),K&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{F(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:"Generate Pattern DNG"})]}),c.jsxs("button",{onClick:()=>{F(!1),v||g(),k&&w(),b&&S&&S(),P&&C&&C()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsxs("span",{children:["DR Lab ",v?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{F(!1),S&&!b&&S(),v&&g(),k&&w(),P&&C&&C()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${b?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:["Color Lab ",b?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{F(!1),C&&!P&&C(),v&&g(),k&&w(),b&&S&&S()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${P?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsxs("span",{children:["SFR Lab ",P?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{F(!1),k||w(),v&&g(),b&&S&&S(),P&&C&&C()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${k?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsxs("span",{children:["FFT Lab ",k?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{var V;F(!1),(V=T.current)==null||V.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),c.jsx("span",{children:"Generate PTC & TargetSNR"})]})]})})]}),c.jsxs("div",{className:"relative inline-block text-left",ref:Y,children:[c.jsxs("button",{onClick:()=>J(!G),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${G?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),G&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>H("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.jsx("span",{children:"Load Image (Direct)"})]}),c.jsxs("button",{onClick:()=>H("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&y&&c.jsxs("button",{onClick:y,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),c.jsx("button",{onClick:p,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),c.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),c.jsxs("button",{onClick:R,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${D?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:D?"Hide Control Panel":"Show Control Panel",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:D?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),c.jsx("span",{className:"hidden sm:inline",children:D?"Hide Panel":"Show Panel"})]})]})]})},i_=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:l="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:h=[],colorLabPoints:p=[],colorLabRects:y=[],sfrRects:m=[]})=>{var Y;const x=j.useRef(null),v=j.useRef(document.createElement("canvas")),[g,b]=j.useState(!1),[S,k]=j.useState({x:0,y:0}),w=j.useRef(null),P=j.useRef(null),C=j.useRef(null),[M,N]=j.useState(!1),[$,_]=j.useState(null),[A,D]=j.useState(null);j.useEffect(()=>{o!==void 0&&D(o)},[o]);const R=j.useCallback(()=>{const le=x.current,H=le==null?void 0:le.getContext("2d");return{canvas:le,ctx:H}},[]);j.useEffect(()=>{const le=v.current,H=le.getContext("2d");if(!e||!H)return;let X=0,oe=0;e instanceof ImageData?(X=e.width,oe=e.height):e instanceof HTMLImageElement&&(X=e.naturalWidth,oe=e.naturalHeight),!(X===0||oe===0)&&((le.width!==X||le.height!==oe)&&(le.width=X,le.height=oe),e instanceof ImageData?H.putImageData(e,0,0):(H.clearRect(0,0,X,oe),H.drawImage(e,0,0)))},[e]);const L=j.useCallback(()=>{const{canvas:le,ctx:H}=R();if(!(!le||!H||!e)){if(H.setTransform(1,0,0,1,0,0),H.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",H.fillRect(0,0,le.width,le.height),H.setTransform(t,0,0,t,r.x,r.y),v.current.width>0&&(H.imageSmoothingEnabled=!1,H.drawImage(v.current,0,0)),A){H.strokeStyle="#06b6d4",H.lineWidth=1/t,H.fillStyle="rgba(6, 182, 212, 0.2)",H.beginPath(),H.rect(A.x,A.y,A.w,A.h),H.fill(),H.stroke(),H.save(),H.fillStyle="#fff";const X=Math.max(10,14/t);H.font=`${X}px monospace`,H.shadowColor="rgba(0,0,0,0.8)",H.shadowBlur=4,H.shadowOffsetX=1,H.shadowOffsetY=1,H.fillText(`${Math.round(A.w)}x${Math.round(A.h)}`,A.x,A.y-5/t),H.restore()}if(h&&h.length>0){H.save(),H.strokeStyle="#f59e0b",H.lineWidth=1/t,H.globalAlpha=.8,H.beginPath(),h.forEach(ue=>{H.rect(ue.x,ue.y,ue.w,ue.h)}),H.stroke();const X=h[0];H.fillStyle="#f59e0b";const oe=Math.max(10,12/t);H.font=`${oe}px monospace`,H.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t),H.restore()}if(d&&d.length>0){H.save();const X=6/t,oe=Math.max(12,16/t);H.font=`bold ${oe}px sans-serif`,H.textAlign="center",H.textBaseline="middle",d.forEach((ue,V)=>{H.beginPath(),H.arc(ue.x,ue.y,X,0,2*Math.PI),H.fillStyle="white",H.fill(),H.strokeStyle="#4338ca",H.lineWidth=2/t,H.stroke(),H.fillStyle="#4338ca",H.fillText((V+1).toString(),ue.x,ue.y-12/t)}),H.restore()}if(p&&p.length>0){H.save();const X=5/t,oe=Math.max(10,14/t);H.font=`bold ${oe}px sans-serif`,H.textAlign="center",H.textBaseline="middle",p.forEach((ue,V)=>{H.fillStyle="yellow",H.fillRect(ue.x-X,ue.y-X,X*2,X*2),H.strokeStyle="black",H.lineWidth=1/t,H.strokeRect(ue.x-X,ue.y-X,X*2,X*2),H.fillStyle="yellow",H.shadowColor="black",H.shadowBlur=2,H.fillText((V+1).toString(),ue.x,ue.y-10/t)}),H.restore()}if(y&&y.length>0){if(H.save(),H.strokeStyle="yellow",H.lineWidth=1/t,H.globalAlpha=.9,H.beginPath(),y.forEach(X=>{H.rect(X.x,X.y,X.w,X.h)}),H.stroke(),y[0]){const X=y[0];H.fillStyle="yellow",H.shadowColor="black",H.shadowBlur=3;const oe=Math.max(10,12/t);H.font=`${oe}px monospace`,H.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t)}H.restore()}m&&m.length>0&&(H.save(),H.strokeStyle="#ef4444",H.lineWidth=2/t,H.globalAlpha=.9,H.beginPath(),m.forEach(X=>{H.rect(X.x,X.y,X.w,X.h)}),H.stroke(),H.restore())}},[R,e,t,r,s,A,h,d,p,y,m]);j.useEffect(()=>{const{canvas:le}=R();if(!le)return;const H=new ResizeObserver(()=>{le.width=le.clientWidth,le.height=le.clientHeight,L()});return H.observe(le),()=>H.disconnect()},[R,L]),j.useEffect(()=>{L()},[L,e,r,t,s,A,h,d,p,y,m]);const T=le=>{const{canvas:H}=R();if(!H)return{x:0,y:0};const X=H.getBoundingClientRect();return{x:le.clientX-X.left,y:le.clientY-X.top}},E=(le,H)=>({x:(le-r.x)/t,y:(H-r.y)/t}),I=le=>{le.preventDefault();const H=T(le);if(u&&f){const X=E(H.x,H.y);f(X);return}if(l==="select"||le.shiftKey){N(!0);const X=E(H.x,H.y),oe={x:Math.floor(X.x),y:Math.floor(X.y)};_(oe),D(null),i&&i(null)}else b(!0),k({x:H.x-r.x,y:H.y-r.y})},G=le=>{const H=T(le);if(M&&$){const X=E(H.x,H.y),oe=Math.floor(X.x),ue=Math.floor(X.y),V=Math.min($.x,oe),pe=Math.min($.y,ue),q=Math.max($.x,oe),te=Math.max($.y,ue),ye=q-V+1,me=te-pe+1;D({x:V,y:pe,w:ye,h:me})}else g&&n({x:H.x-S.x,y:H.y-S.y})},J=()=>{M&&(N(!1),A&&i&&A.w>0&&A.h>0&&i(A)),b(!1)},K=le=>{var H;if(le.touches.length===1){const X=le.touches[0],oe=(H=x.current)==null?void 0:H.getBoundingClientRect();if(!oe)return;const ue=X.clientX-oe.left,V=X.clientY-oe.top;if(u&&f){const pe=E(ue,V);f(pe);return}if(l==="select"){const pe=E(ue,V),q={x:Math.floor(pe.x),y:Math.floor(pe.y)};_(q),N(!0),D(null),i&&i(null)}else C.current={x:ue,y:V},k({x:ue-r.x,y:V-r.y}),b(!0)}else if(le.touches.length===2){const X=Math.hypot(le.touches[0].clientX-le.touches[1].clientX,le.touches[0].clientY-le.touches[1].clientY);w.current=X,P.current=t,b(!1),N(!1)}},F=le=>{var H;if(le.touches.length===1){const X=le.touches[0],oe=(H=x.current)==null?void 0:H.getBoundingClientRect();if(!oe)return;const ue=X.clientX-oe.left,V=X.clientY-oe.top;if(u)return;if(M&&$){const pe=E(ue,V),q=Math.floor(pe.x),te=Math.floor(pe.y),ye=Math.min($.x,q),me=Math.min($.y,te),Ue=Math.max($.x,q),Te=Math.max($.y,te),Oe=Ue-ye+1,De=Te-me+1;D({x:ye,y:me,w:Oe,h:De})}else g&&n({x:ue-S.x,y:V-S.y})}else if(le.touches.length===2&&w.current&&P.current&&a){const oe=Math.hypot(le.touches[0].clientX-le.touches[1].clientX,le.touches[0].clientY-le.touches[1].clientY)/w.current;a(P.current*oe)}},ee=()=>{M&&(N(!1),A&&i&&A.w>0&&A.h>0&&i(A)),b(!1),w.current=null,P.current=null,C.current=null},se=u||l==="select"||(Y=window.event)!=null&&Y.shiftKey?"cursor-crosshair":"cursor-grab active:cursor-grabbing";return c.jsx("canvas",{ref:x,className:`w-full h-full block touch-none ${se}`,onMouseDown:I,onMouseMove:G,onMouseUp:J,onMouseLeave:J,onTouchStart:K,onTouchMove:F,onTouchEnd:ee,onTouchCancel:ee,tabIndex:0})},qd={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},o_="modulepreload",s_=function(e){return"/"+e},Fb={},l_=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=s_(l),l in Fb)return;Fb[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":o_,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function Su(e){const[[t,r,n],[a,i,o],[s,l,u]]=e,f=t*(i*u-o*l)-r*(a*u-o*s)+n*(a*l-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*l)*d,(n*l-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*l-i*s)*d,(r*s-t*l)*d,(t*i-r*a)*d]]}function Zd(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class fs{constructor(t){kn(this,"size");kn(this,"isPowerOfTwo");kn(this,"_real");kn(this,"_imag");kn(this,"_scratch",null);kn(this,"_rev",null);kn(this,"_m",0);kn(this,"_internalFFT",null);kn(this,"_chirpReal",null);kn(this,"_chirpImag",null);kn(this,"_bReal",null);kn(this,"_bImag",null);kn(this,"_hanning",null);kn(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new fs(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const l=a[s];if(s<l){const u=i[s],f=o[s];i[s]=i[l],o[s]=o[l],i[l]=u,o[l]=f}}else for(let s=0;s<n;s++){const l=a[s];i[s]=t[l],o[s]=r?r[l]:0}for(let s=2;s<=n;s*=2){const l=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let h=0;h<n;h+=s){let p=1,y=0;for(let m=0;m<l;m++){const x=h+m,v=h+m+l,g=p*i[v]-y*o[v],b=p*o[v]+y*i[v],S=i[x],k=o[x];i[x]=S+g,o[x]=k+b,i[v]=S-g,o[v]=k-b;const w=p*f-y*d,P=p*d+y*f;p=w,y=P}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const h=t[d],p=r?r[d]:0,y=this._chirpReal[d],m=this._chirpImag[d];o[d]=h*y-p*m,s[d]=h*m+p*y}i.transformRadix2(o,s);for(let d=0;d<a;d++){const h=i._real[d],p=i._imag[d],y=this._bReal[d],m=this._bImag[d];i._real[d]=h*y-p*m,i._imag[d]=h*m+p*y}const l=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(l,u);const f=1/a;for(let d=0;d<n;d++){const h=i._real[d]*f,p=-i._imag[d]*f,y=this._chirpReal[d],m=this._chirpImag[d];this._real[d]=h*y-p*m,this._imag[d]=h*m+p*y}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const l=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<l;f++){const d=this._real[f],h=this._imag[f];r[f]+=(d*d+h*h)*u}}}function c_(e,t,r,n=!1){const a=new fs(t),i=new fs(r),o=t*r,s=new Float32Array(o),l=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let m=0;m<t;m++)u[m]=.5*(1-Math.cos(2*Math.PI*m/(t-1)));f=new Float32Array(r);for(let m=0;m<r;m++)f[m]=.5*(1-Math.cos(2*Math.PI*m/(r-1)))}for(let m=0;m<r;m++){const x=m*t,v=a._real;let g=0;for(let S=0;S<t;S++)g+=e[x+S];const b=g/t;if(u)for(let S=0;S<t;S++)v[S]=(e[x+S]-b)*u[S];else for(let S=0;S<t;S++)v[S]=e[x+S]-b;a.transform(v);for(let S=0;S<t;S++)s[x+S]=a._real[S],l[x+S]=a._imag[S]}for(let m=0;m<t;m++){const x=i._real,v=i._imag;for(let g=0;g<r;g++){const b=g*t+m;let S=s[b],k=l[b];f&&(S*=f[g],k*=f[g]),x[g]=S,v[g]=k}i.transform(x,v);for(let g=0;g<r;g++){const b=g*t+m;s[b]=i._real[g],l[b]=i._imag[g]}}const d=new Float32Array(o);let h=1,p=t,y=r;if(n&&u&&f){p=0;for(let m=0;m<t;m++)p+=u[m]*u[m];y=0;for(let m=0;m<r;m++)y+=f[m]*f[m]}h=1/(p*y);for(let m=0;m<o;m++)d[m]=(s[m]*s[m]+l[m]*l[m])*h;return d}function u_(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const l=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+l;n[d]=e[f]}return n}function Sd(e,t,r,n=[0,0,0,0],a=65535,i="RGGB"){const s=e*t*2,l=8,u=l+s,f="Fake",d="StretchedNoiseCam",h="StretchedNoiseCam",p=A=>{const D=new Uint8Array(A.length+1);for(let R=0;R<A.length;R++)D[R]=A.charCodeAt(R);return D[A.length]=0,D},y=p(f),m=p(d),x=p(h),v=A=>{const D=[0,0,0,0],R={R:0,G:1,B:2},L=A.toUpperCase();for(let T=0;T<4;T++)D[T]=R[L[T]]??1;return D},g=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:y.length,value:y},{id:272,type:2,count:m.length,value:m},{id:273,type:4,count:1,value:l},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:s},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:v(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(A=>Math.round(A))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:x.length,value:x}],b=2+g.length*12+4;let S=0;const k=g.map(A=>{let D=1;A.type===3&&(D=2),A.type===4&&(D=4);const R=A.count*D,L=R<=4;let T=0;return L||(T=S,S+=R,S%2!==0&&S++),{...A,fits:L,totalBytes:R,extraOffset:T}}),w=u+b,P=w+S,C=new ArrayBuffer(P),M=new DataView(C),N=new Uint8Array(C);M.setUint16(0,18761,!0),M.setUint16(2,42,!0),M.setUint32(4,u,!0);const $=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);N.set($,l);let _=u;return M.setUint16(_,g.length,!0),_+=2,k.forEach(A=>{if(M.setUint16(_,A.id,!0),M.setUint16(_+2,A.type,!0),M.setUint32(_+4,A.count,!0),A.fits){const D=_+8;Array.isArray(A.value)?A.value.forEach((R,L)=>{A.type===1&&M.setUint8(D+L,R),A.type===3&&M.setUint16(D+L*2,R,!0)}):(A.type===3&&M.setUint16(D,A.value,!0),A.type===4&&M.setUint32(D,A.value,!0))}else{const D=w+A.extraOffset;M.setUint32(_+8,D,!0),A.value instanceof Uint8Array?N.set(A.value,D):Array.isArray(A.value)&&A.value.forEach((R,L)=>{A.type===1&&M.setUint8(D+L,R),A.type===3&&M.setUint16(D+L*2,R,!0)})}_+=12}),M.setUint32(_,0,!0),C}var jh=typeof self<"u"?self:global;const ju=typeof navigator<"u",f_=ju&&typeof HTMLImageElement>"u",Qd=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Ph=jh.Buffer,Xf=jh.BigInt,Ch=!!Ph,d_=e=>e;function Jd(e,t=d_){if(Qd)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let lx=jh.fetch;const h_=e=>lx=e;if(!jh.fetch){const e=Jd("http",n=>n),t=Jd("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:l,pathname:u,protocol:f,search:d}=new URL(n);const h={method:"GET",hostname:l,path:encodeURI(u)+d,headers:a};s!==""&&(h.port=Number(s));const p=(f==="https:"?await t:await e).request(h,y=>{if(y.statusCode===301||y.statusCode===302){let m=new URL(y.headers.location,n).toString();return r(m,{headers:a}).then(i).catch(o)}i({status:y.statusCode,arrayBuffer:()=>new Promise(m=>{let x=[];y.on("data",v=>x.push(v)),y.on("end",()=>m(Buffer.concat(x)))})})});p.on("error",o),p.end()});h_(r)}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const e0=e=>m3(e)?void 0:e,p_=e=>e!==void 0;function m3(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(p_).length===0)}function Or(e){let t=new Error(e);throw delete t.stack,t}function Xo(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function _m(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Am=e=>String.fromCharCode.apply(null,e),zb=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function y3(e){return zb?zb.decode(e):Ch?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Am(e)))}class Tn{static from(t,r){return t instanceof this&&t.le===r?t:new Tn(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Tn){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&Or("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Or("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=Tn){return t instanceof DataView||t instanceof Tn?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Or("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new Tn(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return y3(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return Am(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return Am(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function Tm(e,t){Or(`${e} '${t}' was not loaded, try using full build of exifr.`)}let cx=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||Tm(this.kind,t),r&&(t in r||function(n,a){Or(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||Tm(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var oi=new cx("file parser"),Pr=new cx("segment parser"),ci=new cx("file reader");function g_(e,t){return typeof e=="string"?Gb(e,t):ju&&!f_&&e instanceof HTMLImageElement?Gb(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Tn(e):ju&&e instanceof Blob?Em(e,t,"blob",hs):void Or("Invalid input argument")}function Gb(e,t){return(r=e).startsWith("data:")||r.length>1e4?$m(e,t,"base64"):Qd&&e.includes("://")?Em(e,t,"url",ds):Qd?$m(e,t,"fs"):ju?Em(e,t,"url",ds):void Or("Invalid input argument");var r}async function Em(e,t,r,n){return ci.has(r)?$m(e,t,r):n?async function(a,i){let o=await i(a);return new Tn(o)}(e,n):void Or(`Parser ${r} is not loaded`)}async function $m(e,t,r){let n=new(ci.get(r))(e,t);return await n.read(),n}const ds=e=>lx(e).then(t=>t.arrayBuffer()),hs=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class m_ extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function wr(e,t,r){let n=new m_;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function ps(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Xr=new Map,Va=new Map,yo=new Map,Ji=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Xl=["jfif","xmp","icc","iptc","ihdr"],gs=["tiff",...Xl],fr=["ifd0","ifd1","exif","gps","interop"],eo=[...gs,...fr],to=["makerNote","userComment"],Kl=["translateKeys","translateValues","reviveValues","multiSegment"],ro=[...Kl,"sanitize","mergeOutput","silentErrors"];class v3{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Pc extends v3{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),Fe(this,"enabled",!1),Fe(this,"skip",new Set),Fe(this,"pick",new Set),Fe(this,"deps",new Set),Fe(this,"translateKeys",!1),Fe(this,"translateValues",!1),Fe(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=fr.includes(t),this.canBeFiltered&&(this.dict=Xr.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Or(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of Kl)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,t0(this.pick,this.deps)):this.enabled&&this.pick.size>0&&t0(this.pick,this.deps)}}var Sn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ub=new Map;let js=class extends v3{static useCached(t){let r=Ub.get(t);return r!==void 0||(r=new this(t),Ub.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Or(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ju?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of Ji)this[t]=Sn[t];for(t of ro)this[t]=Sn[t];for(t of to)this[t]=Sn[t];for(t of eo)this[t]=new Pc(t,Sn[t],void 0,this)}setupFromTrue(){let t;for(t of Ji)this[t]=Sn[t];for(t of ro)this[t]=Sn[t];for(t of to)this[t]=!0;for(t of eo)this[t]=new Pc(t,!0,void 0,this)}setupFromArray(t){let r;for(r of Ji)this[r]=Sn[r];for(r of ro)this[r]=Sn[r];for(r of to)this[r]=Sn[r];for(r of eo)this[r]=new Pc(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,fr)}setupFromObject(t){let r;for(r of(fr.ifd0=fr.ifd0||fr.image,fr.ifd1=fr.ifd1||fr.thumbnail,Object.assign(this,t),Ji))this[r]=Yp(t[r],Sn[r]);for(r of ro)this[r]=Yp(t[r],Sn[r]);for(r of to)this[r]=Yp(t[r],Sn[r]);for(r of gs)this[r]=new Pc(r,Sn[r],t[r],this);for(r of fr)this[r]=new Pc(r,Sn[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,fr,eo),t.tiff===!0?this.batchEnableWithBool(fr,!0):t.tiff===!1?this.batchEnableWithUserValue(fr,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,fr):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,fr)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=Wb(t,n);for(let[o,s]of i)t0(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=Wb(r,n);for(let[o,s]of i)t0(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=fr.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of fr)this[i].finalizeFilters()}get onlyTiff(){return!Xl.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of gs)this[t].enabled&&!Pr.has(t)&&Tm("segment parser",t)}};function Wb(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Xr.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function Yp(e,t){return e!==void 0?e:t!==void 0?t:void 0}function t0(e,t){for(let r of t)e.add(r)}Fe(js,"default",Sn);class Po{constructor(t){Fe(this,"parsers",{}),Fe(this,"output",{}),Fe(this,"errors",[]),Fe(this,"pushToErrors",r=>this.errors.push(r)),this.options=js.useCached(t)}async read(t){this.file=await g_(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of oi)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),Or("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),e0(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=Pr.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function Nh(e,t){let r=new Po(t);return await r.read(e),r.parse()}var y_=Object.freeze({__proto__:null,parse:Nh,Exifr:Po,fileParsers:oi,segmentParsers:Pr,fileReaders:ci,tagKeys:Xr,tagValues:Va,tagRevivers:yo,createDictionary:wr,extendDictionary:ps,fetchUrlAsArrayBuffer:ds,readBlobAsArrayBuffer:hs,chunkedProps:Ji,otherSegments:Xl,segments:gs,tiffBlocks:fr,segmentsAndBlocks:eo,tiffExtractables:to,inheritables:Kl,allFormatters:ro,Options:js});class Oh{constructor(t,r,n){Fe(this,"errors",[]),Fe(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){Or(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Or("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(Pr.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}let Ba=class{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new js({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof Tn?t:new Tn(t)}constructor(t,r={},n){Fe(this,"errors",[]),Fe(this,"raw",new Map),Fe(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=yo.get(r),a=Va.get(r),i=Xr.get(r),o=this.options[r],s=o.reviveValues&&!!n,l=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,h]of t)s&&n.has(d)?h=n.get(d)(h):l&&a.has(d)&&(h=this.translateValue(h,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=h;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}};Fe(Ba,"headerLength",4),Fe(Ba,"type",void 0),Fe(Ba,"multiSegment",!1),Fe(Ba,"canHandle",()=>!1);function v_(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function x_(e){return e>=224&&e<=239}function b_(e,t,r){for(let[n,a]of Pr)if(a.canHandle(e,t,r))return n}class Vb extends Oh{constructor(...t){super(...t),Fe(this,"appSegments",[]),Fe(this,"jpegSegments",[]),Fe(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(Pr.keyList())):(t=t===void 0?Pr.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&Pr.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let l=Pr.get(s),u=this.options[s];return l.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>l&&!u?!await n.readNextChunk(t):!await n.readNextChunk(l),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,l,{file:u,findAll:f,wanted:d,remaining:h,options:p}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),x_(n)){if(a=u.getUint16(t+2),i=b_(u,t,a),i&&d.has(i)&&(o=Pr.get(i),s=o.findPosition(u,t),l=p[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||h.delete(i)):h.delete(i),h.size===0)))break;p.recordUnknownSegments&&(s=Ba.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(v_(n)){if(a=u.getUint16(t+2),n===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let l=0;l<r.length;l++)a=r[l],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=Pr.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}Fe(Vb,"type","jpeg"),oi.set("jpeg",Vb);const w_=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class k_ extends Ba{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,l=this.chunk.getUint16(t);t+=2;for(let u=0;u<l;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=w_[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Or(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Or(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return Xo(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let l=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)l[f]=this.parseTagValue(i,t),t+=u;return l}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Or(`Invalid tiff type ${t}`)}}}class qp extends k_{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Or("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Or(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,_m(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,_m(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Hb(...t.get(2),t.get(1))),t.set("longitude",Hb(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of fr)if(t=this[r],!m3(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function Hb(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Fe(qp,"type","tiff"),Fe(qp,"headerLength",10),Pr.set("tiff",qp);var S_=Object.freeze({__proto__:null,default:y_,Exifr:Po,fileParsers:oi,segmentParsers:Pr,fileReaders:ci,tagKeys:Xr,tagValues:Va,tagRevivers:yo,createDictionary:wr,extendDictionary:ps,fetchUrlAsArrayBuffer:ds,readBlobAsArrayBuffer:hs,chunkedProps:Ji,otherSegments:Xl,segments:gs,tiffBlocks:fr,segmentsAndBlocks:eo,tiffExtractables:to,inheritables:Kl,allFormatters:ro,Options:js,parse:Nh});const ux={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},fx=Object.assign({},ux,{firstChunkSize:4e4,gps:[1,2,3,4]});async function x3(e){let t=new Po(fx);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const dx=Object.assign({},ux,{tiff:!1,ifd1:!0,mergeOutput:!1});async function b3(e){let t=new Po(dx);await t.read(e);let r=await t.extractThumbnail();return r&&Ch?Ph.from(r):r}async function w3(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const hx=Object.assign({},ux,{firstChunkSize:4e4,ifd0:[274]});async function px(e){let t=new Po(hx);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const gx=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Ko=!0,Yo=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;Ko=Number(r)+.1*Number(n)<13.4,Yo=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Ko=Yo=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Ko=Yo=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Ko=Yo=Number(t)<77}}async function k3(e){let t=await px(e);return Object.assign({canvas:Ko,css:Yo},gx[t])}class j_ extends Tn{constructor(...t){super(...t),Fe(this,"ranges",new P_),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=Ch?Ph.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class P_{constructor(){Fe(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>Xb(t,o.offset,a)||Xb(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function Xb(e,t,r){return e<=t&&t<=r}class Mh extends j_{constructor(t,r){super(0),Fe(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ci.set("blob",class extends Mh{async readWhole(){this.chunked=!1;let e=await hs(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await hs(n);return this.set(a,e,!0)}});var C_=Object.freeze({__proto__:null,default:S_,Exifr:Po,fileParsers:oi,segmentParsers:Pr,fileReaders:ci,tagKeys:Xr,tagValues:Va,tagRevivers:yo,createDictionary:wr,extendDictionary:ps,fetchUrlAsArrayBuffer:ds,readBlobAsArrayBuffer:hs,chunkedProps:Ji,otherSegments:Xl,segments:gs,tiffBlocks:fr,segmentsAndBlocks:eo,tiffExtractables:to,inheritables:Kl,allFormatters:ro,Options:js,parse:Nh,gpsOnlyOptions:fx,gps:x3,thumbnailOnlyOptions:dx,thumbnail:b3,thumbnailUrl:w3,orientationOnlyOptions:hx,orientation:px,rotations:gx,get rotateCanvas(){return Ko},get rotateCss(){return Yo},rotation:k3});ci.set("url",class extends Mh{async readWhole(){this.chunked=!1;let e=await ds(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await lx(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});Tn.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof Xf!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Xf(t)<<Xf(32)|Xf(r)):void Or("Trying to read 64b value but JS can only handle 53b numbers.")};class N_ extends Oh{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class S3 extends N_{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let l=4+this.file.getUint32(o);o+=l,s-=l,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),l=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,h=this.file.getUintBytes(n,d);for(n+=d;h--;){let p=this.file.getUintBytes(n,l);n+=l+u+2+o;let y=this.file.getUint16(n);if(n+=2,p===r)return y>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=y*f}}}class j3 extends S3{}Fe(j3,"type","heic");class Kb extends S3{}Fe(Kb,"type","avif"),oi.set("heic",j3),oi.set("avif",Kb),wr(Xr,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),wr(Xr,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),wr(Xr,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),wr(Va,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Qc=wr(Va,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Yb={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Qc.set(37392,Yb),Qc.set(41488,Yb);const Zp={0:"Normal",1:"Low",2:"High"};function qb(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function Zb(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function Qp(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function Cc(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(Qb(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(Qb(e[r],e[r+1]));return Xo(String.fromCodePoint(...t))}function Qb(e,t){return e<<8|t}Qc.set(41992,Zp),Qc.set(41993,Zp),Qc.set(41994,Zp),wr(yo,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?y3(e):e}],[306,Qp],[40091,Cc],[40092,Cc],[40093,Cc],[40094,Cc],[40095,Cc]]),wr(yo,"exif",[[40960,Zb],[36864,Zb],[36867,Qp],[36868,Qp],[40962,qb],[40963,qb]]),wr(yo,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class Jp extends Ba{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:Tn.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let l of O3)o[l]=[],s[l]=0;return i.replace(A_,(l,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${l}#${d}`}return`${l}#${o[f].pop()}`})}(t);let r=ol.findAll(t,"rdf","Description");r.length===0&&r.push(new ol("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=__(o.ns,a),P3(o,n);return function(i){let o;for(let s in i)o=i[s]=e0(i[s]),o===void 0&&delete i[s];return e0(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}Fe(Jp,"type","xmp"),Fe(Jp,"multiSegment",!0),Pr.set("xmp",Jp);class r0{static findAll(t){return C3(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(r0.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=N3(a),new r0(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class ol{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return C3(t,a).map(ol.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new ol(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=r0.findAll(n),this.children=ol.findAll(a),this.value=this.children.length===0?N3(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return M_(this.children.map(O_));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)P3(r,t);return this.value!==void 0&&(t.value=this.value),e0(t)}}function P3(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var O_=e=>e.serialize(),M_=e=>e.length===1?e[0]:e,__=(e,t)=>t[e]?t[e]:t[e]={};function C3(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function N3(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const O3=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],A_=new RegExp(`(<|\\/)(${O3.join("|")})`,"g");var M3=Object.freeze({__proto__:null,default:C_,Exifr:Po,fileParsers:oi,segmentParsers:Pr,fileReaders:ci,tagKeys:Xr,tagValues:Va,tagRevivers:yo,createDictionary:wr,extendDictionary:ps,fetchUrlAsArrayBuffer:ds,readBlobAsArrayBuffer:hs,chunkedProps:Ji,otherSegments:Xl,segments:gs,tiffBlocks:fr,segmentsAndBlocks:eo,tiffExtractables:to,inheritables:Kl,allFormatters:ro,Options:js,parse:Nh,gpsOnlyOptions:fx,gps:x3,thumbnailOnlyOptions:dx,thumbnail:b3,thumbnailUrl:w3,orientationOnlyOptions:hx,orientation:px,rotations:gx,get rotateCanvas(){return Ko},get rotateCss(){return Yo},rotation:k3});let Jb=Jd("fs",e=>e.promises);ci.set("fs",class extends Mh{async readWhole(){this.chunked=!1,this.fs=await Jb;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await Jb,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});ci.set("base64",class extends Mh{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(Ch){let l=Ph.from(a,"base64").slice(n,n+s);return this.set(l,e,!0)}{let l=this.subarray(e,s,!0),u=atob(a),f=l.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return l}}});class e2 extends Oh{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(_m(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}Fe(e2,"type","tiff"),oi.set("tiff",e2);let T_=Jd("zlib");const E_=["ihdr","iccp","text","itxt","exif"];class t2 extends Oh{constructor(...t){super(...t),Fe(this,"catchError",r=>this.errors.push(r)),Fe(this,"metaChunks",[]),Fe(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,l={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};E_.includes(o)?this.metaChunks.push(l):this.unknownChunks.push(l),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),Qd){let s=await T_,l=r.getUint8Array(i);l=s.inflateSync(l),this.injectSegment("icc",l)}}}Fe(t2,"type","png"),oi.set("png",t2),wr(Xr,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),ps(Xr,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let r2=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];ps(Xr,"ifd0",r2),ps(Xr,"exif",r2),wr(Va,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class eg extends Ba{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Fe(eg,"type","jfif"),Fe(eg,"headerLength",9),Pr.set("jfif",eg),wr(Xr,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class n2 extends Ba{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Fe(n2,"type","ihdr"),Pr.set("ihdr",n2),wr(Xr,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),wr(Va,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class jd extends Ba{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),l=0;for(let u of a)s.set(u,l),l+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new Tn(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&Or("ICC header is too short");for(let[r,n]of Object.entries($_)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(l,4),r=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),l+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return Xo(this.chunk.getString(t+12,r))}parseText(t,r){return Xo(this.chunk.getString(t+8,r-8))}parseSig(t){return Xo(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let l=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,h=Xo(r.getUnicodeString(d,f));o.push({lang:l,country:u,text:h}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}Fe(jd,"type","icc"),Fe(jd,"multiSegment",!0),Fe(jd,"headerLength",18);const $_={4:pi,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:pi,16:pi,20:pi,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:pi,40:pi,48:pi,52:pi,64:(e,t)=>e.getUint32(t),80:pi};function pi(e,t){return Xo(e.getString(t,4))}Pr.set("icc",jd),wr(Xr,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Kf={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},a2={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};wr(Va,"icc",[[4,Kf],[12,a2],[40,Object.assign({},Kf,a2)],[48,Kf],[80,Kf],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Yf extends Ba{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}Fe(Yf,"type","iptc"),Fe(Yf,"translateValues",!1),Fe(Yf,"reviveValues",!1),Pr.set("iptc",Yf),wr(Xr,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),wr(Va,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let tg=null;async function Ps(){if(!tg)try{const n=(await l_(()=>import("./joraw-CkymzSa7.js"),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;tg=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await tg,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const mx=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],vo=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function qf(e,t=0,r=0){const n=await Ps(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,l=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((l-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let p=0;p<f/2;p++){const y=p*6+r;if(y+3>=l)break;const m=y*s,x=(y+3)*s,v=p*2,g=v*u,b=(v+1)*u;for(let S=0;S<u/2;S++){const k=S*6+t;if(k+1>=s)break;const w=S*2;d[g+w]=o[m+k+1],d[g+w+1]=o[m+k+0],d[b+w]=o[x+k+0],d[b+w+1]=o[x+k+1]}}return{dngBuffer:Sd(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function D_(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,l=r*n,u=new Uint16Array(l);for(let h=0;h<n;h++)for(let p=0;p<r;p++){const y=(h*r+p)*4,m=h*r+p,x=h%2===0,v=p%2===0;let g=0;x&&v?g=s[y]:!x&&!v?g=s[y+2]:g=s[y+1],u[m]=g*64}const f=await new Promise(h=>a.toBlob(h,"image/png"));let d={description:"Standard image (non-RAW)"};try{const h=await M3.parse(e);h&&(d={...d,...h})}catch(h){console.warn("EXIF parsing failed for standard image",h)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const I_=async e=>{const t=await Ps(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const l=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const h=d*3,p=d*4;l.data[p]=u[h],l.data[p+1]=u[h+1],l.data[p+2]=u[h+2],l.data[p+3]=255}s.putImageData(l,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},n0=async e=>{var n,a,i,o,s,l,u,f,d;const t=await Ps(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const h=r.getRawImage();let p=new Uint16Array(h.data);const y=await r.metadata(!0);let m={...y};try{const w=await M3.parse(e.buffer);w&&(m={...m,...w})}catch(w){console.warn("exifr parsing failed for RAW buffer",w)}const x=((n=y.idata)==null?void 0:n.filters)||0,v=((a=y.idata)==null?void 0:a.colors)||0,g=x===0&&v===3,b=x===9;let S=[0,0,0,0],k=!1;if(r.getBlackLevels)try{const w=r.getBlackLevels();w.dng_cblack&&w.dng_cblack.length===4&&Array.from(w.dng_cblack).some(P=>P>0)?(S=Array.from(w.dng_cblack).map(Number),k=!0):w.cblack&&w.cblack.length===4&&Array.from(w.cblack).some(P=>P>0)?(S=Array.from(w.cblack).map(Number),k=!0):typeof w.black=="number"&&w.black>0&&(S=[w.black,w.black,w.black,w.black],k=!0)}catch(w){console.warn("getBlackLevels binding failed",w)}if(!k){let w=[];if((i=y.color_data)!=null&&i.cblack_rawpy_style)w=y.color_data.cblack_rawpy_style;else if((s=(o=y.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)w=y.color_data.dng_levels.dng_cblack;else if(((l=y.black_level_per_channel)==null?void 0:l.length)>=4)w=y.black_level_per_channel;else if(((u=y.cblack)==null?void 0:u.length)>=4)w=y.cblack;else if(((d=(f=y.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)w=y.color.cblack;else{const P=y.black_level||y.color_data&&y.color_data.black||0;w=[P,P,P,P]}S=[Number(w[0])||0,Number(w[1])||0,Number(w[2])||0,Number(w[3])||0]}return{data:p,width:h.width,height:h.height,bayerPattern:y.color_desc||"RGGB",blackLevels:S,whiteLevel:y.white_level||16383,metadata:m,isThreePlane:g,isXTrans:b}}finally{r.delete?r.delete():r.close()}};async function Io(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([I_(t),n0(r)]);return{previewBlob:n,analysisData:a}}async function a0(e){const t=new Uint8Array(e);return n0(t)}const i2=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function rg(e,t,r,n=!0){const a=await n0(new Uint8Array(e)),i=await n0(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,l=r?i2(o):o,u=r?i2(s):s,f=l*u,d=new Uint16Array(f),h=6e4,p=1.41421356;for(let y=0;y<s;y++){const m=y*o,x=y*l;for(let v=0;v<o;v++){const g=a.data[m+v],b=i.data[m+v];let S=g-b;n&&(S/=p);let k=S+h;k=Math.max(0,Math.min(65535,k)),d[x+v]=Math.round(k)}}return{rawData:d,width:l,height:u,metadata:a.metadata}}function Ro(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),l=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],h=[0,0,0,0],p=[0,0,0,0];for(let x=l;x<f;x++){const v=x*t,g=x%2;for(let b=s;b<u;b++){const S=b%2,k=e[v+b],w=g*2+S;d[w]+=k,h[w]+=k*k,p[w]++}}const y=[0,0,0,0],m=[0,0,0,0];for(let x=0;x<4;x++)if(p[x]>0){const v=d[x]/p[x];y[x]=v;const b=h[x]/p[x]-v*v;m[x]=Math.sqrt(Math.max(0,b))}return{x:s,y:l,width:u-s,height:f-l,means:y,stdDevs:m,pixelCount:p.reduce((x,v)=>x+v,0)}}function R_(e,t,r,n,a,i=!1){const o=Math.floor(Math.max(0,r.x)),s=Math.floor(Math.max(0,r.y)),l=Math.ceil(Math.min(t,r.x+r.w)),u=e.length/t,f=Math.ceil(Math.min(u,r.y+r.h)),d=[0,0,0,0],h=[0,0,0,0];for(let R=s;R<f;R++){const L=R*t,T=R%2;for(let E=o;E<l;E++){const I=E%2,G=T*2+I,J=e[L+E],K=n[G]||0;d[G]+=Math.max(0,J-K),h[G]++}}let p=0,y=3;i&&(p=3,y=0);const m=h[p]>0?d[p]/h[p]:1,x=(d[1]+d[2])/(h[1]+h[2]||1),v=h[y]>0?d[y]/h[y]:1;if(m<1||x<1||v<1)return[1,1];const g=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]],b=Su(g);if(!b)return console.warn("Color Matrix is not invertible, falling back to standard WB"),[x/m,x/v];const S=Zd(mx,b),k=Su(S);let w=1,P=1,C=1;if(k)w=k[0][0]+k[0][1]+k[0][2],P=k[1][0]+k[1][1]+k[1][2],C=k[2][0]+k[2][1]+k[2][2],Math.abs(P)<1e-6&&(P=1);else return console.warn("Final Matrix is not invertible"),[x/m,x/v];const M=x/m,N=x/v,$=w/P,_=C/P,A=M*$,D=N*_;return[Math.max(0,A),Math.max(0,D)]}function o2(e,t,r,n,a,i,o=0,s=0){const l=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),h=a>>1,p=a&1,y=(i>>1)+o,m=(i&1)+s;let x=0,v=0,g=0;for(let C=u;C<d-2;C+=2)for(let M=l;M<f-2;M+=2){const N=(C+h)*t+(M+p),$=(C+y)*t+(M+m);C+y>=r||M+m>=t||(x+=e[N],v+=e[$],g++)}if(g<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const b=x/g,S=v/g;let k=0,w=0,P=0;for(let C=u;C<d-2;C+=2)for(let M=l;M<f-2;M+=2){const N=(C+h)*t+(M+p),$=(C+y)*t+(M+m);if(C+y>=r||M+m>=t)continue;const _=e[N],A=e[$],D=_-b,R=A-S;k+=D*R,w+=D*D,P+=R*R}return{sumCov:k,sumVar1:w,sumVar2:P,n:g}}function L_(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function B_(e,t,r,n,a,i,o,s,l,u,f){if(u<=l)return[];const d=Math.max(0,Math.floor(n)),h=Math.max(0,Math.floor(a)),p=Math.min(t,Math.ceil(n+i)),y=Math.min(r,Math.ceil(a+o)),m=u-l,x=f?Math.floor(m)+1:s,v=m/x,g=[new Uint32Array(x),new Uint32Array(x),new Uint32Array(x),new Uint32Array(x)];for(let S=h;S<y;S++){const k=S*t,w=S%2;for(let P=d;P<p;P++){const C=P%2,M=e[k+P];if(M<l||M>u)continue;const N=w*2+C;let $;f?$=Math.floor(M-l):$=Math.floor((M-l)/v),$<0&&($=0),$>=x&&($=x-1),g[N][$]++}}const b=[];for(let S=0;S<x;S++){const k=l+(f?S:S*v);b.push({binStart:k,c0:g[0][S],c1:g[1][S],c2:g[2][S],c3:g[3][S]})}return b}function F_(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},l=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),h=Math.min(t,Math.ceil(n.x+n.w)),p=Math.min(r,Math.ceil(n.y+n.h)),y=h-f,m=p-d;if(y<=1||m<=1)return null;let x=0;for(let $=f;$<h;$++)$%2===(a&1)&&x++;let v=0;for(let $=d;$<p;$++)$%2===a>>1&&v++;if(x<4||v<4)return null;const g=Math.max(1,u),b=Math.floor(2*x/(g+1)),S=Math.floor(2*v/(g+1));if(b<4||S<4)return null;const k=new fs(b),w=new fs(S),P=new Float32Array(Math.floor(b/2)+1),C=new Float32Array(Math.floor(S/2)+1);let M=0,N=0;for(let $=d;$<p;$++){const _=$%2;if(a>>1!==_||s.rows&&($>>1&1)!==s.rowGroup)continue;const A=$*t,D=new Float32Array(x);let R=0;for(let L=f;L<h;L++)L%2===(a&1)&&R<x&&(D[R++]=e[A+L]);for(let L=0;L<g;L++){const T=Math.floor(L*b/2);if(T+b>x)break;const E=D.slice(T,T+b);k.calculateSpectrum(E,P,o),M++}if(!l)break}for(let $=f;$<h;$++){const _=$%2;if((a&1)!==_||s.cols&&($>>1&1)!==s.rowGroup)continue;const A=new Float32Array(v);let D=0;for(let R=d;R<p;R++)R%2===a>>1&&D<v&&(A[D++]=e[R*t+$]);for(let R=0;R<g;R++){const L=Math.floor(R*S/2);if(L+S>v)break;const T=A.slice(L,L+S);w.calculateSpectrum(T,C,o),N++}if(!l)break}if(M>0)for(let $=0;$<P.length;$++)P[$]/=M;if(N>0)for(let $=0;$<C.length;$++)C[$]/=N;return{avgHoriz:Array.from(P),avgVert:Array.from(C),sampleCount:{h:M,v:N}}}function z_(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),l=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let g=s;g<u;g++)if(g%2===a>>1){f=g;break}if(f===-1)return null;let d=-1;for(let g=o;g<l;g++)if(g%2===(a&1)){d=g;break}if(d===-1)return null;const h=[];for(let g=f;g<u;g+=2){const b=g*t,S=[];for(let k=d;k<l;k+=2)S.push(e[b+k]);h.push(S)}const p=h.length;if(p===0)return null;const y=h[0].length;if(y===0)return null;const m=new Float32Array(y*p);for(let g=0;g<p;g++){const b=h[g];for(let S=0;S<y;S++)m[g*y+S]=b[S]}const x=c_(m,y,p,i),v=u_(x,y,p);return{width:y,height:p,data:v}}function G_(e,t,r,n,a,i,o){const{x:s,y:l,w:u,h:f}=n,d=[],h=Math.max(0,Math.floor(s)),p=Math.max(0,Math.floor(l)),y=Math.min(t,Math.ceil(s+u)),m=Math.min(r,Math.ceil(l+f)),x=a>>1,v=a&1;for(let w=p;w<m;w++){if(w%2!==x)continue;const P=w*t;for(let C=h;C<y;C++){if(C%2!==v)continue;const M=e[P+C];M>=i&&M<=o&&d.push(M-i)}}if(d.length===0)return null;d.sort((w,P)=>w-P);const g=[d[0]];for(let w=1;w<d.length;w++)d[w]!==d[w-1]&&g.push(d[w]);const b=[],S=[],k={};for(let w=0;w<g.length-1;w++){const P=g[w],M=g[w+1]-P;b.push(M),S.push({x:P,y:M}),k[M]=(k[M]||0)+1}return{uniqueCount:g.length,diffCount:b.length,stepCounts:k,plotData:S}}function yx(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:l}=e,u=a.map((b,S)=>Math.max(0,b-n[S])),f=i.map((b,S)=>Math.max(0,b-n[S])),d=(u[1]+u[3])/2,h=(f[1]+f[3])/2,p=Math.floor(t.x),y=Math.floor(t.y),m=Math.floor(t.w),x=Math.floor(t.h),v=Math.pow(2,r.exposure),g=new Uint16Array(m*x);for(let b=0;b<x;b++){const S=y+b;if(S<0||S>=e.height)continue;const k=S%2,w=S*s,P=b*m;for(let C=0;C<m;C++){const M=p+C;if(M<0||M>=s)continue;const N=M%2;let $=0;!k&&!N?$=0:!k&&N?$=1:k&&!N?$=3:$=2;const _=o[w+M],A=n[$],D=u[$],R=f[$],L=Math.max(_-A,0),T=R-D||1e-9,E=(L-D)/T;let I;E<0?I=L*(d/Math.max(D,1e-9)):E>1?I=L*(h/Math.max(R,1e-9)):I=(1-E)*d+E*h,I*=v,g[P+C]=Math.max(0,Math.min(65535,Math.round(I)))}}return{data:g,width:m,height:x}}async function s2(e,t){const r=await Ps(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const h=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],p=Su(h);if(p){const y=t.wbGains?t.wbGains[0]:1,m=t.wbGains?t.wbGains[1]:1,v=Zd(p,[[y,0,0],[0,1,0],[0,0,m]]),g=Zd(mx,v);o=[g[0][0],g[0][1],g[0][2],g[1][0],g[1][1],g[1][2],g[2][0],g[2][1],g[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(h=>{const p=Math.round(h);return p===0?1:p})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const l=await n.imageData(),u=new ImageData(l.width,l.height),f=u.data,d=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2);if(i&&o.length===9){const h=o,y=Math.pow(2,t.exposure)*.25;for(let m=0;m<d.length;m+=3){const x=d[m]/65535,v=d[m+1]/65535,g=d[m+2]/65535;let b=h[0]*x+h[1]*v+h[2]*g,S=h[3]*x+h[4]*v+h[5]*g,k=h[6]*x+h[7]*v+h[8]*g;b*=y,S*=y,k*=y,b=Math.max(0,Math.min(1,b)),S=Math.max(0,Math.min(1,S)),k=Math.max(0,Math.min(1,k)),b=vo(b),S=vo(S),k=vo(k);const w=m/3*4;f[w]=Math.round(b*255),f[w+1]=Math.round(S*255),f[w+2]=Math.round(k*255),f[w+3]=255}}else for(let h=0;h<d.length;h+=3){const p=h/3*4;f[p]=d[h]>>8,f[p+1]=d[h+1]>>8,f[p+2]=d[h+2]>>8,f[p+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function ng(e,t){const r=await Ps(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const m=await n.metadata(!0);m&&m.white_level&&(a=m.white_level)}catch(m){console.warn("Metadata error",m)}const i=n.getRawImage(),o=i.width,s=i.height,l=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1;for(let m=0;m<s;m++){const x=m%2;for(let v=0;v<o;v++){const g=v%2,b=x*2+g,S=l[m*o+v],k=d[b];let w=(S-k)/(h-k);w=Math.max(0,Math.min(1,w)),t.exposure!==0&&(w*=Math.pow(2,t.exposure),w=Math.min(1,w)),b===0?w*=p:b===3&&(w*=y);const P=Math.round(vo(Math.min(1,w))*255),C=(m*o+v)*4;f[C]=P,f[C+1]=P,f[C+2]=P,f[C+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function U_(e,t){const r=await Ps(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const $=await n.metadata(!0);$&&$.white_level&&(a=$.white_level)}catch{}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1,m=Math.pow(2,t.exposure);let x=[[1,0,0],[0,1,0],[0,0,1]];if(t.customMatrix&&t.customMatrix.length===9){const $=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],_=Su($);_&&(x=Zd(mx,_))}const v=x[0][0],g=x[0][1],b=x[0][2],S=x[1][0],k=x[1][1],w=x[1][2],P=x[2][0],C=x[2][1],M=x[2][2],N=new Float32Array(o*s);for(let $=0;$<o*s;$++){const _=Math.floor($/o),A=$%o,D=_%2,R=A%2,L=D*2+R,T=l[$],E=d[L];let I=(T-E)/(h-E);I=Math.max(0,I),L===0?I*=p:L===3&&(I*=y),N[$]=I}for(let $=1;$<s-1;$++){const _=$%2,A=$*o;for(let D=1;D<o-1;D++){const R=D%2,L=A+D;let T=0,E=0,I=0;!_&&!R?(T=N[L],E=(N[L-1]+N[L+1]+N[L-o]+N[L+o])*.25,I=(N[L-o-1]+N[L-o+1]+N[L+o-1]+N[L+o+1])*.25):_&&R?(I=N[L],E=(N[L-1]+N[L+1]+N[L-o]+N[L+o])*.25,T=(N[L-o-1]+N[L-o+1]+N[L+o-1]+N[L+o+1])*.25):(E=N[L],!_&&R?(T=(N[L-1]+N[L+1])*.5,I=(N[L-o]+N[L+o])*.5):(I=(N[L-1]+N[L+1])*.5,T=(N[L-o]+N[L+o])*.5));let G=v*T+g*E+b*I,J=S*T+k*E+w*I,K=P*T+C*E+M*I;G*=m,J*=m,K*=m,G=Math.max(0,Math.min(1,G)),J=Math.max(0,Math.min(1,J)),K=Math.max(0,Math.min(1,K)),G=vo(G),J=vo(J),K=vo(K);const F=L*4;f[F]=Math.round(G*255),f[F+1]=Math.round(J*255),f[F+2]=Math.round(K*255),f[F+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function W_(e,t){const r=await Ps(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const g=await n.metadata(!0);g&&g.white_level&&(a=g.white_level)}catch(g){console.warn("Metadata error",g)}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data;if(!t.advancedZeroDep)throw new Error("Missing advanced settings");const{bl:d,bg:h,fg:p}=t.advancedZeroDep,y=h.map((g,b)=>Math.max(0,g-d[b])),m=p.map((g,b)=>Math.max(0,g-d[b])),x=(y[1]+y[3])/2,v=(m[1]+m[3])/2;for(let g=0;g<s;g++){const b=g%2;for(let S=0;S<o;S++){const k=S%2;let w=0;!b&&!k?w=0:!b&&k?w=1:b&&!k?w=3:w=2;const P=l[g*o+S],C=d[w],M=y[w],N=m[w],$=Math.max(P-C,0),_=N-M||1e-9,A=($-M)/_;let D;A<0?D=$*(x/Math.max(M,1e-9)):A>1?D=$*(v/Math.max(N,1e-9)):D=(1-A)*x+A*v;let R=D/65535;R=Math.max(0,Math.min(1,R));const L=Math.round(vo(R)*255),T=(g*o+S)*4;f[T]=L,f[T+1]=L,f[T+2]=L,f[T+3]=255}}return u}finally{n.delete?n.delete():n.close()}}const Nc=({title:e,children:t})=>c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[c.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:c.jsx("span",{children:e})}),c.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),V_=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],ag=({checked:e,onChange:t,label:r})=>c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),c.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:c.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),ig=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},H_=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:l,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:h,drGridRows:p,onDrGridRowsChange:y,drGridCols:m,onDrGridColsChange:x,onBatchDrLab:v,hasDrMarkers:g,isFftLabOpen:b,onProcessPair:S,onProcessBatchDiff:k,onProcessStackFft:w,onOpenCrossCalc:P,isThreePlane:C,onToggleXTrans:M,xtransPhase:N,onXTransPhaseChange:$,isXTransConverted:_,onCommand:A,isColorLabOpen:D,colorLabMarkingStep:R,onStartColorLabMarking:L,isSfrLabOpen:T,roiStats:E,isBGGR:I,onOpenDngExport:G,sfrRectCount:J,isBatchMarkingMode:K,onToggleBatchMarking:F,onClearBatchMarks:ee,onBatchCompute:se}=e,Y=!!t,le=!!(t!=null&&t.isXTrans),H=!!M,[X,oe]=j.useState(r.exposure.toString()),[ue,V]=j.useState(""),[pe,q]=j.useState("0 0 0 0"),[te,ye]=j.useState("1.0"),[me,Ue]=j.useState("1.0"),[Te,Oe]=j.useState(r.demosaicMethod),[De,ct]=j.useState(!!r.showKadc),[ut,lr]=j.useState(!!r.subtractBlackLevelFromStats),[ft,pr]=j.useState("64"),[Je,Ft]=j.useState(!1),[$t,cr]=j.useState(""),[Dt,yt]=j.useState(""),[Ke,wt]=j.useState(""),[At,Zt]=j.useState(!1),[kr,Fr]=j.useState(!1),[kt,_r]=j.useState(!1),[ot,gr]=j.useState(!1),[Ar,nn]=j.useState("single"),[zr,na]=j.useState(!1),[Gn,aa]=j.useState(!0),[Un,ia]=j.useState(!0),mr=j.useMemo(()=>Object.keys(qd).sort(),[]),mn=j.useRef(null),gt=j.useRef(null),zt=j.useRef(null),vt=j.useRef(null),[ie,Me]=j.useState(null),[Ie,st]=j.useState(null),[Ze,It]=j.useState(!1),[Tt,nr]=j.useState(!0),ze=j.useRef(null),et=j.useRef(null);j.useEffect(()=>{if(oe(r.exposure.toString()),r.customMatrix?V(r.customMatrix.join(" ")):V(""),r.blackLevel&&r.blackLevel.length===4)q(r.blackLevel.join(" "));else{const O=ig(t,i);O&&O.some(U=>U!==0)?q(O.join(" ")):q("")}ye(r.wbGains?r.wbGains[0].toString():"1.0"),Ue(r.wbGains?r.wbGains[1].toString():"1.0"),Oe(r.demosaicMethod),ct(!!r.showKadc),lr(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(cr(r.advancedZeroDep.bl.join(" ")),yt(r.advancedZeroDep.bg.join(" ")),wt(r.advancedZeroDep.fg.join(" ")),Ft(!0))},[r,t,i]);const Pt=j.useRef(!1),St=j.useRef(null);j.useEffect(()=>{t!==St.current&&(Pt.current=!1,St.current=t)},[t]),j.useEffect(()=>{if(o&&t&&!Pt.current){Pt.current=!0;const O=ig(t,i),U=O&&O.some(re=>re>0);if(O&&U){console.log("[AutoApply] Detected Black Levels via Bridge:",O);const re={...r,blackLevel:O,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(re)}}},[o,t,i,r,n]);const ar=O=>oe(O),we=O=>ye(O),Yr=O=>Ue(O),To=O=>Oe(parseInt(O.target.value,10)),Wn=O=>V(O.target.value),oa=()=>{oe("0"),Oe(3),ye("1.0"),Ue("1.0"),ct(!0),lr(!0),V(""),Ft(!1);const O=ig(t,i);q(O&&O.some(U=>U!==0)?O.join(" "):"")},uc=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),A==null||A("sel full"))},Vn=()=>{if(!t||!a)return;const O=parseInt(ft,10);if(isNaN(O)||O<=0)return;const U=Math.min(O,t.width),re=Math.min(O,t.height),B=Math.floor((t.width-U)/2),ce=Math.floor((t.height-re)/2);a({x:B,y:ce,w:U,h:re}),A==null||A(`sel center ${O}`)},yn=()=>{if(!t||!E){alert("Please select a region on the image first.");return}const O=Hn()||[0,0,0,0],U=ue.trim().replace(/[\s,\n]+/g," "),re=U?U.split(" ").map(Number):[1,0,0,0,1,0,0,0,1];if(re.length!==9){alert("Matrix must be 3x3 (9 values).");return}const[B,ce]=R_(t.data,t.width,{x:E.x,y:E.y,w:E.width,h:E.height},O,re,I);ye(B.toFixed(4)),Ue(ce.toFixed(4)),A==null||A(`wb ${B.toFixed(4)} ${ce.toFixed(4)} (Spot)`)},Hn=()=>{const U=pe.split(/[\s,]+/).filter(re=>re.trim()!=="").map(Number);if(U.length===1&&!isNaN(U[0]))return[U[0],U[0],U[0],U[0]];if(U.length>=4&&!U.slice(0,4).some(isNaN))return[U[0],U[1],U[2],U[3]]},vn=O=>{const U=O.trim().split(/[\s,]+/).map(Number);return U.length===4&&!U.some(isNaN)?U:U.length===1&&!isNaN(U[0])?[U[0],U[0],U[0],U[0]]:null},Na=()=>{A&&(X!=="0"&&A(`ev ${X}`),(te!=="1.0"||me!=="1.0")&&A(`wb ${te} ${me}`),pe!=="0 0 0 0"&&pe!==""&&A(`bl ${pe}`),Te!==3&&A(`demo ${Te}`),ue.trim().length>0&&A(`matrix ${ue.replace(/\s+/g," ")}`),A("render"));const O={...r},U=parseFloat(X);isNaN(U)||(O.exposure=U);const re=parseFloat(te),B=parseFloat(me);!isNaN(re)&&!isNaN(B)&&(O.wbGains=[re,B]),O.demosaicMethod=Te,O.renderMode="standard";const ce=Hn();ce?O.blackLevel=ce:delete O.blackLevel;const de=ue.trim().replace(/[\s,\n]+/g," ");if(de){const Ne=de.split(" ").map(Number);Ne.length===9&&!Ne.some(isNaN)?O.customMatrix=Ne:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete O.customMatrix;O.showKadc=De,O.subtractBlackLevelFromStats=ut,n(O)},Fi=()=>{Fr(!0)},Xa=O=>{A&&(X!=="0"&&A(`ev ${X}`),(te!=="1.0"||me!=="1.0")&&A(`wb ${te} ${me}`),pe!=="0 0 0 0"&&pe!==""&&A(`bl ${pe}`),A(O==="bilinear"?"render zero color":"render zero"));const U={...r},re=Hn();re&&(U.blackLevel=re);const B=parseFloat(te),ce=parseFloat(me);!isNaN(B)&&!isNaN(ce)&&(U.wbGains=[B,ce]);const de=parseFloat(X);if(isNaN(de)||(U.exposure=de),O==="bilinear"){const Ne=ue.trim().replace(/[\s,\n]+/g," ");if(Ne){const xe=Ne.split(" ").map(Number);xe.length===9&&!xe.some(isNaN)&&(U.customMatrix=xe)}}U.renderMode=O==="mosaic"?"zero-dependency":"zero-dep-color",U.showKadc=De,U.subtractBlackLevelFromStats=ut,Fr(!1),n(U)},fi=()=>{const O=vn($t),U=vn(Dt),re=vn(Ke);if(!O||!U||!re){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}A&&(X!=="0"&&A(`ev ${X}`),A(`render unmix ${O.join(" ")} ${U.join(" ")} ${re.join(" ")}`));const B={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:O,bg:U,fg:re}};B.showKadc=De,B.subtractBlackLevelFromStats=ut,n(B)},sa=()=>{if(E){const O=E.means,U=[O[0],O[1],O[3],O[2]].map(re=>re.toFixed(1));yt(U.join(" "))}else alert("Please select an ROI on the image first.")},fc=()=>{if(E){const O=E.means,U=[O[0],O[1],O[3],O[2]].map(re=>re.toFixed(1));wt(U.join(" "))}else alert("Please select an ROI on the image first.")},Oa=O=>{O.target.files&&O.target.files.length>0&&v&&(v(O.target.files,Ar),A==null||A(`drlab batch ${Ar}`)),O.target.value="",gr(!1)},dc=async O=>{var re;const U=(re=O.target.files)==null?void 0:re[0];if(U){try{const ce=(await U.text()).split(`
`),de=[];de.push("#BlackLevel: 0,0,0,0"),de.push("#ImageHeight: 0"),de.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let Ne=1;for(let dt=0;dt<ce.length;dt++){const tt=ce[dt].trim();if(!tt||tt.includes("R_mean")||tt.includes("R_std"))continue;const Qe=tt.split(/\s+/).map(Number);if(Qe.length<8||Qe.some(isNaN))continue;const Qt=[Ne,1,Qe[0],Qe[2],Qe[6],Qe[4],Qe[1],Qe[3],Qe[7],Qe[5]].join(",");de.push(Qt),Ne++}const xe=new Blob([de.join(`
`)],{type:"text/csv"}),Ve=URL.createObjectURL(xe),Ee=document.createElement("a");Ee.href=Ve,Ee.download=U.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(Ve)}catch(B){console.error("Conversion failed",B),alert("Failed to convert file.")}O.target.value=""}},Ma=O=>{O.target.files&&O.target.files[0]&&(Me(O.target.files[0]),A==null||A("fft load a"))},di=O=>{O.target.files&&O.target.files[0]&&(st(O.target.files[0]),A==null||A("fft load b"))},xn=()=>{ie&&Ie&&S&&(S(ie,Ie,Ze,Tt),A==null||A("fft run"))},hc=O=>{O.target.files&&O.target.files.length>0&&k&&(k(O.target.files),A==null||A("fft batch")),O.target.value=""},la=O=>{O.target.files&&O.target.files.length>0&&w&&(w(O.target.files),A==null||A("fft stack")),O.target.value=""},pc=()=>{se&&(se({useNR:Gn,useDeshading:Un}),A==null||A("batch compute"))},zi=$t.trim()!==""&&Dt.trim()!==""&&Ke.trim()!=="",As=r.renderMode==="advanced-zero-dep";return c.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[C&&c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[c.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),c.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),le&&!_&&c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),c.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),_&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),c.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),T&&c.jsx(Nc,{title:"SFR Lab Tools (Scalar Unmixing)",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),c.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),As&&c.jsxs("div",{className:"border-t border-orange-200 dark:border-orange-800 pt-3",children:[c.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>na(!zr),children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase",children:" (Batch Ops)"}),c.jsx("svg",{className:`w-4 h-4 text-orange-500 transition-transform ${zr?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),zr&&c.jsxs("div",{className:"mt-3 space-y-3 bg-white/50 dark:bg-black/20 p-2 rounded animate-in slide-in-from-top-1",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Manual Mark)"}),J!==void 0&&J>0&&c.jsxs("span",{className:"text-[9px] text-orange-500 font-bold",children:[J," Selected"]})]}),c.jsx("button",{onClick:F,className:`w-full py-2 font-bold text-xs rounded shadow transition-all ${K?"bg-orange-600 hover:bg-orange-500 text-white ring-2 ring-orange-300":"bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:K?"Stop Marking (Active)":"Start Batch Marking"}),K&&c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:"Hold Shift + Drag on canvas to add multiple ROIs."}),c.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Gn,onChange:O=>aa(O.target.checked),className:"rounded text-orange-500"}),"Jiang Official NR"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Un,onChange:O=>ia(O.target.checked),className:"rounded text-purple-500"}),"Deshading"]})]}),c.jsxs("button",{onClick:pc,disabled:!J,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold text-xs rounded shadow transition-transform active:scale-95",children:["Calculate & Copy (",J||0,")"]}),c.jsx("button",{onClick:ee,disabled:!J,className:"w-full py-1.5 bg-gray-200 dark:bg-slate-700 hover:bg-red-100 hover:text-red-600 text-[10px] font-bold rounded transition-colors disabled:opacity-50",children:"Clear All Marks"})]}),c.jsx("div",{className:"h-px bg-gray-300 dark:bg-slate-600 w-full"}),c.jsxs("div",{className:"flex flex-col gap-2 opacity-50 pointer-events-none",title:"Coming Soon",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Standard Chart)"}),c.jsx("button",{className:"w-full py-2 bg-gray-100 dark:bg-slate-800 border border-dashed border-gray-400 text-gray-400 font-bold text-xs rounded",children:"Auto Calibrate (Soon)"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsx(ag,{checked:Je,onChange:Ft,label:" (Scalar Unmixing)"}),Je&&c.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[c.jsx("div",{className:"col-span-1",children:"Param"}),c.jsx("div",{className:"text-center",children:"Ch0(R)"}),c.jsx("div",{className:"text-center",children:"Ch1(G1)"}),c.jsx("div",{className:"text-center",children:"Ch2(B)"}),c.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),c.jsx("input",{type:"text",value:$t,onChange:O=>cr(O.target.value),placeholder:"0 0 0 0",className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Dt,onChange:O=>yt(O.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:sa,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Ke,onChange:O=>wt(O.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:fc,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsx("button",{onClick:fi,disabled:!Y||!zi,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed",children:"RUN UNMIXING (ADV ZERO-DEP)"}),c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),b&&c.jsx(Nc,{title:"FFT Lab (Noise Profile)",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:mn,className:"hidden",onChange:Ma,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var O;return(O=mn.current)==null?void 0:O.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${ie?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:ie?`A: ${ie.name}`:"Load Image A"}),c.jsx("input",{type:"file",ref:gt,className:"hidden",onChange:di,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var O;return(O=gt.current)==null?void 0:O.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${Ie?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:Ie?`B: ${Ie.name}`:"Load Image B"})]}),c.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Tt,onChange:O=>nr(O.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:xn,disabled:!ie||!Ie,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),c.jsx("input",{type:"file",ref:zt,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:hc}),c.jsx("button",{onClick:()=>{var O;return(O=zt.current)==null?void 0:O.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:vt,className:"hidden",multiple:!0,onChange:la,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var O;return(O=vt.current)==null?void 0:O.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),c.jsx("div",{className:"flex flex-col gap-2 pt-2",children:c.jsx("button",{onClick:()=>{P==null||P(),A==null||A("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"})})]})}),s&&c.jsx(Nc,{title:"DR Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>{f==null||f(),A==null||A("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),h&&d!==void 0&&c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),c.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:O=>h(parseInt(O.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),c.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),y&&x&&p!==void 0&&m!==void 0&&c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:"Layout:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"1",max:"50",value:p,onChange:O=>y(Math.max(1,parseInt(O.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),c.jsx("span",{className:"text-xs text-gray-400",children:"x"}),c.jsx("input",{type:"number",min:"1",max:"50",value:m,onChange:O=>x(Math.max(1,parseInt(O.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>{u==null||u(),A==null||A("mark")},disabled:!Y||l!==void 0&&l>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${Y?l&&l>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l>0?"Marking Active...":"Mark Corners"}),v&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",ref:ze,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Oa}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>gr(!ot),disabled:!g,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),ot&&c.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var O;nn("single"),(O=ze.current)==null||O.click()},children:"1. Independent Frames"}),c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var O;nn("pair"),(O=ze.current)==null||O.click()},children:"2. Pair Difference (A-B)"})]})]})]}),c.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("input",{type:"file",ref:et,className:"hidden",accept:".txt",onChange:dc}),c.jsx("button",{onClick:()=>{var O;return(O=et.current)==null?void 0:O.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),l!==void 0&&l>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[l===1&&"Click Top-Left Center",l===2&&"Click Top-Right Center",l===3&&"Click Bottom-Left Center",l===4&&"Click Bottom-Right Center"]})})]})]})}),c.jsx(Nc,{title:"Selection Tools",children:c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),c.jsx("input",{type:"number",min:"1",value:ft,onChange:O=>pr(O.target.value),disabled:!Y,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:Vn,disabled:!Y,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),c.jsx("button",{onClick:uc,disabled:!Y,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),c.jsx(Nc,{title:"Display Controls",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",c.jsx("b",{children:"Apply"}),"."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!Y,value:parseFloat(X)||0,onChange:O=>ar(O.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{id:"exposure",type:"number",step:"0.1",value:X,onChange:O=>ar(O.target.value),disabled:!Y,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),H&&c.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[c.jsx(ag,{checked:!!_,onChange:O=>{M&&M(O),A==null||A(`xtrans ${O?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),_&&N&&$&&c.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:N.x,onChange:O=>{const U=Math.min(5,Math.max(0,parseInt(O.target.value)||0));$({x:U}),A==null||A(`xtrans phase ${U} ${N.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:N.y,onChange:O=>{const U=Math.min(5,Math.max(0,parseInt(O.target.value)||0));$({y:U}),A==null||A(`xtrans phase ${N.x} ${U}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),c.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx(ag,{checked:De,onChange:ct,label:"Show k"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),c.jsxs("div",{children:[c.jsxs("button",{onClick:yn,disabled:!Y||!E,className:"w-full mb-3 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded shadow-sm transition-all active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",title:"Calculate Gains to make the selected area neutral gray, accounting for Color Matrix",children:[c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Spot WB (Matrix-Aware)"]}),c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),c.jsx("input",{type:"number",step:"0.01",value:te,onChange:O=>we(O.target.value),disabled:!Y,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),c.jsx("input",{type:"number",step:"0.01",value:me,onChange:O=>Yr(O.target.value),disabled:!Y,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",c.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),c.jsx("button",{onClick:()=>Zt(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[c.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),c.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${ut?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>lr(!ut),children:c.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${ut?"translate-x-4":"translate-x-0"}`})})]})]}),c.jsx("input",{type:"text",value:pe,onChange:O=>q(O.target.value),disabled:!Y,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[c.jsx("span",{children:"Custom Color Matrix"}),c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:O=>{const U=qd[O.target.value];U&&V(U),O.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),mr.map(O=>c.jsx("option",{value:O,children:O},O))]})]}),c.jsx("textarea",{id:"customMatrix",value:ue,onChange:Wn,disabled:!Y,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[c.jsx("button",{onClick:Fi,disabled:!Y,className:"w-full text-sm font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-4 rounded-xl flex items-center justify-center border-2 border-slate-500 shadow-lg",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:c.jsxs("span",{className:"text-center leading-tight",children:["Apply Settings/Render",c.jsx("br",{}),c.jsx("span",{className:"text-xs font-normal opacity-90",children:"CM"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>_r(!0),disabled:!Y,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed py-3 px-2 rounded-lg transition-all active:scale-95 border border-gray-700",children:["",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] font-normal opacity-75",children:""})]}),c.jsx("button",{onClick:()=>G==null?void 0:G(),disabled:!Y,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-all py-3 rounded-lg flex items-center justify-center border border-gray-700 active:scale-95",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:"Generate 16bit DNG"})]}),c.jsx("div",{className:"text-center pt-1",children:c.jsx("button",{onClick:oa,disabled:!Y,className:"text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors underline decoration-gray-300 hover:decoration-gray-600 underline-offset-2",children:"Reset Defaults (Local)"})})]})]})})]}),c.jsx(mo,{isOpen:At,onClose:()=>Zt(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),Zt(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[c.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("p",{className:"leading-relaxed",children:["Autofills. If no result is found or it's wrong or not precise enough, please check the ",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame(close the lens cap) with the same ISO/speed setting to calculate the average (using jiangtherapee) and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),c.jsx(mo,{isOpen:kr,onClose:()=>Fr(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>Xa("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),c.jsxs("button",{onClick:()=>Xa("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-cyan-600 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),c.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),c.jsx(mo,{isOpen:kt,onClose:()=>_r(!1),onConfirm:()=>{Na(),_r(!1)},title:"Official Render Options",confirmText:"Render",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),c.jsx("select",{id:"demosaic-modal",value:Te,onChange:To,disabled:!Y||C||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:V_.map(O=>c.jsx("option",{value:O.value,children:O.label},O.value))}),C&&c.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&c.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},X_=j.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:l,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:h,onToggleXTrans:p,onXTransPhaseChange:y}=e,[m,x]=j.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[v,g]=j.useState(""),[b,S]=j.useState([]),[k,w]=j.useState(-1),P=j.useRef(null),C=j.useRef(null),M=j.useRef(null),N=j.useRef(null),$=j.useRef(null),_=j.useRef(null),A=j.useRef(null),D=j.useRef(null);j.useRef(null);const R=j.useRef({...n});j.useEffect(()=>{R.current={...n}},[n.exposure,n.demosaicMethod]);const L=j.useRef({fileA:null,fileB:null});j.useLayoutEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[m]);const T=(F,ee="out")=>{x(se=>[...se,{id:Date.now().toString()+Math.random(),type:ee,text:F}])};j.useImperativeHandle(t,()=>({log:(F,ee="in")=>{const se=ee;let Y=F;ee==="in"&&!F.startsWith(">")&&(Y=`> ${F}`),T(Y,se)}}));const E=j.useRef(null);j.useEffect(()=>{if(e.roiStats&&e.roiStats!==E.current){const F=e.roiStats,ee=Math.round(F.x),se=Math.round(F.y),Y=Math.round(F.width),le=Math.round(F.height);T(`> sel ${ee} ${se} ${Y} ${le}`,"in");const H=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],X=c.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[c.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",ee,", ",se,", ",Y,"x",le,"]:"]}),c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[c.jsx("div",{children:"Ch"}),c.jsx("div",{className:"text-right",children:"Mean"}),c.jsx("div",{className:"text-right",children:"StdDev"})]}),H.map(oe=>c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[c.jsx("div",{className:oe.name==="R"?"text-red-500":oe.name==="B"?"text-blue-500":"text-green-500",children:oe.name}),c.jsx("div",{className:"text-right text-gray-300",children:F.means[oe.idx].toFixed(2)}),c.jsx("div",{className:"text-right text-gray-400",children:F.stdDevs[oe.idx].toFixed(2)})]},oe.name))]});T(X,"out"),E.current=F}},[e.roiStats,e.isBGGR]);const I=F=>{var le,H,X,oe,ue,V,pe;const ee=F.trim().split(/\s+/),se=ee[0].toLowerCase(),Y=ee.slice(1);switch(se){case"help":T("Available Commands:","info"),T("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),T("  wb <r> <b>        Set WB Gains","info"),T("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),T("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),T("  matrix <n1..n9>   Set Custom Color Matrix","info"),T("  xtrans <on|off>   Force X-Trans Mode","info"),T("  xtrans phase <x> <y>  Set X-Trans Phase","info"),T("  render            Apply settings & Render","info"),T("  render zero       Zero-Dependency Render","info"),T("  render unmix      Advanced Unmixing Render","info"),T("  sel <full|center> Select ROI","info"),T("  sel <x> <y> <w> <h> Select ROI manually","info"),T("  mark              Start DR Lab Corner Marking","info"),T("  gen test          Generate Test Pattern","info"),T("  fft load <a>      Load FFT Pair Image A","info"),T("  fft load <b>      Load FFT Pair Image B","info"),T("  fft run           Run FFT Pair Diff","info"),T("  cls               Clear Screen","info");break;case"cls":case"clear":x([]);break;case"ev":case"exposure":if(Y.length<1){T(`Current EV: ${R.current.exposure}`,"info");return}const q=parseFloat(Y[0]);if(isNaN(q)){T("Invalid EV value","err");return}R.current.exposure=q,T(`EV set to ${q} (run 'render' to apply)`);break;case"wb":if(Y.length<2){T("Usage: wb <red_gain> <blue_gain>","err");return}const te=parseFloat(Y[0]),ye=parseFloat(Y[1]);if(isNaN(te)||isNaN(ye)){T("Invalid gains","err");return}R.current.wbGains=[te,ye],T(`WB set to R:${te} B:${ye}`);break;case"bl":case"black":if(Y.length===0){T(`Current BL: ${((le=R.current.blackLevel)==null?void 0:le.join(" "))||"Auto"}`,"info");return}let me=Y.map(Number);if(me.some(isNaN)){T("Invalid numbers","err");return}if(me.length===1&&(me=[me[0],me[0],me[0],me[0]]),me.length<4){T("Need 1 or 4 values","err");return}R.current.blackLevel=[me[0],me[1],me[2],me[3]],R.current.subtractBlackLevelFromStats=!0,R.current.showKadc=!0,T(`Black Level set: ${me.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if(Y.length===0){T("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const Ue=parseInt(Y[0]);if(isNaN(Ue)){T("Invalid method ID","err");return}R.current.demosaicMethod=Ue,T(`Demosaic set to ID ${Ue}`);break;case"matrix":if(Y.length!==9){T("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const Te=Y.map(Number);if(Te.some(isNaN)){T("Invalid matrix values","err");return}R.current.customMatrix=Te,T("Custom Color Matrix set.");break;case"xtrans":if(Y[0]==="on"||Y[0]==="true")p?(p(!0),T("X-Trans conversion ON")):T("Feature not available","err");else if(Y[0]==="off"||Y[0]==="false")p?(p(!1),T("X-Trans conversion OFF")):T("Feature not available","err");else if(Y[0]==="phase"){if(Y.length<3){T("Usage: xtrans phase <x> <y>","err");return}const Oe=parseInt(Y[1]),De=parseInt(Y[2]);y&&(y({x:Oe,y:De}),T(`X-Trans Phase set to (${Oe}, ${De})`))}else T("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if(Y[0]==="zero"){const Oe=Y[1]==="color"?"zero-dep-color":"zero-dependency";R.current.renderMode=Oe,T(`Rendering Zero-Dependency (${Oe})...`)}else if(Y[0]==="unmix"){if(Y.length<13){T("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const Oe=Y.slice(1).map(Number);if(Oe.some(isNaN)){T("Invalid params","err");return}R.current.renderMode="advanced-zero-dep",R.current.advancedZeroDep={bl:[Oe[0],Oe[1],Oe[2],Oe[3]],bg:[Oe[4],Oe[5],Oe[6],Oe[7]],fg:[Oe[8],Oe[9],Oe[10],Oe[11]]},T("Rendering Advanced Unmix...")}else R.current.renderMode="standard",T("Rendering Standard Pipeline...");a({...R.current});break;case"sel":case"select":if(!r||!i){T("No image loaded","err");return}if(Y[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if(Y[0]==="center"){const Oe=parseInt(Y[1])||64,De=Math.floor((r.width-Oe)/2),ct=Math.floor((r.height-Oe)/2);i({x:De,y:ct,w:Oe,h:Oe})}else if(Y.length===4){const[Oe,De,ct,ut]=Y.map(Number);if([Oe,De,ct,ut].some(isNaN)){T("Invalid coordinates","err");return}i({x:Oe,y:De,w:ct,h:ut})}else T("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),T("Interactive marking started. Click 4 corners on canvas."));break;case"gen":(Y[0]==="test"||Y[0]==="pattern")&&s&&(s(),T("Generated Test Pattern"));break;case"drlab":if(Y[0]==="config"){const[Oe,De,ct]=Y.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(Oe||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(De||10),e.onDrGridColsChange&&e.onDrGridColsChange(ct||10),T(`DR Grid Configured: Size=${Oe}, Grid=${De}x${ct}`)}else Y[0]==="batch"&&(Y[1]==="pair"?(T("Select file pairs for DR Lab..."),(H=N.current)==null||H.click()):(T("Select single files for DR Lab..."),(X=M.current)==null||X.click()));break;case"fft":Y[0]==="load"?Y[1]==="a"?(oe=$.current)==null||oe.click():Y[1]==="b"?(ue=_.current)==null||ue.click():T("Usage: fft load <a|b>","err"):Y[0]==="run"?L.current.fileA&&L.current.fileB&&u?(T(`Processing Pair: ${L.current.fileA.name} - ${L.current.fileB.name}`),u(L.current.fileA,L.current.fileB,!1,!0)):T("Load both A and B first","err"):Y[0]==="stack"?(T("Select files for Stack FFT..."),(V=A.current)==null||V.click()):Y[0]==="batch"&&(T("Select files for Batch Diff...","info"),(pe=D.current)==null||pe.click());break;case"crosscalc":h&&(h(),T("Opened Cross-Calculator"));break;default:T(`Unknown command: ${se}`,"err")}},G=F=>{if(F.key==="Enter"){const ee=v.trim();if(!ee)return;T(`> ${ee}`,"in"),ee.split(";").forEach(Y=>{Y.trim()&&I(Y.trim())}),S(Y=>[...Y,ee]),w(-1),g("")}else if(F.key==="ArrowUp"){if(F.preventDefault(),b.length>0){const ee=k===-1?b.length-1:Math.max(0,k-1);w(ee),g(b[ee])}}else if(F.key==="ArrowDown")if(F.preventDefault(),k!==-1){const ee=Math.min(b.length-1,k+1);w(ee),g(b[ee])}else g("")},J=(F,ee)=>{F.target.files&&F.target.files.length>0&&l&&(T(`Batch processing ${F.target.files.length} files in ${ee} mode...`),l(F.target.files,ee)),F.target.value=""},K=(F,ee)=>{var Y;const se=(Y=F.target.files)==null?void 0:Y[0];se&&(ee==="A"?L.current.fileA=se:L.current.fileB=se,T(`Loaded ${ee}: ${se.name}`)),F.target.value=""};return c.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[c.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[c.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),c.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),c.jsx("div",{ref:P,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:m.map(F=>c.jsxs("div",{className:`mb-1 ${F.type==="in"?"opacity-50":""} ${F.type==="err"?"text-red-500":""} ${F.type==="info"?"text-cyan-400":""}`,children:[F.type!=="in"&&typeof F.text=="string"&&!F.text.startsWith(">")&&c.jsx("span",{className:"mr-2 opacity-50",children:">"}),F.text]},F.id))}),c.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[c.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),c.jsx("input",{ref:C,type:"text",value:v,onChange:F=>g(F.target.value),onKeyDown:G,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),c.jsx("input",{type:"file",ref:M,className:"hidden",multiple:!0,onChange:F=>J(F,"single")}),c.jsx("input",{type:"file",ref:N,className:"hidden",multiple:!0,onChange:F=>J(F,"pair")}),c.jsx("input",{type:"file",ref:$,className:"hidden",onChange:F=>K(F,"A")}),c.jsx("input",{type:"file",ref:_,className:"hidden",onChange:F=>K(F,"B")}),c.jsx("input",{type:"file",ref:A,className:"hidden",multiple:!0,onChange:F=>{e.onProcessStackFft&&F.target.files&&(T(`Loading ${F.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(F.target.files)),F.target.value=""}}),c.jsx("input",{type:"file",ref:D,className:"hidden",multiple:!0,onChange:F=>{e.onProcessBatchDiff&&F.target.files&&(T("Starting Batch Diff..."),e.onProcessBatchDiff(F.target.files)),F.target.value=""}})]})}),K_=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d.some(h=>h>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},Y_=e=>{const[t,r]=j.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,l=j.useRef(null),u=j.useRef(!1),f=j.useRef(null);j.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),j.useEffect(()=>{var h;if(i&&n&&!u.current){u.current=!0;const p=K_(n,a),y=p&&p.some(m=>m>0);if(p&&y){console.log("[AutoApply] Detected Black Levels via Bridge:",p),(h=l.current)==null||h.log(`Auto-detected BL: ${p.join(" ")}`,"info");const m={...o,blackLevel:p,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};s(m)}}},[i,n,a,o,s]);const d=h=>{l.current&&l.current.log(h,"in")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[c.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),c.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),c.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[c.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:c.jsx(H_,{...e,onCommand:d})}),c.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:c.jsx(X_,{...e,ref:l})})]})]})},q_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),Z_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),Q_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),J_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),eA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Dm=.1,Im=16,tA=Math.log(Dm),rA=Math.log(Im),nA=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Dm,Math.min(Im,d)))},o=()=>{t(Math.min(Im,e*1.25))},s=()=>{t(Math.max(Dm,e/1.25))},l=Math.log(e);return c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[c.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:c.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?c.jsx(eA,{}):c.jsx(J_,{})})}),c.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[c.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:c.jsx(q_,{})}),c.jsx("input",{type:"range",min:tA,max:rA,step:"0.01",value:l,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),c.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:c.jsx(Z_,{})}),c.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),c.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:c.jsx(Q_,{})})]})]})},aA=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return c.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function _3(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=_3(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function it(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=_3(e))&&(n&&(n+=" "),n+=t);return n}var iA=Array.isArray,zn=iA,oA=typeof Mf=="object"&&Mf&&Mf.Object===Object&&Mf,A3=oA,sA=A3,lA=typeof self=="object"&&self&&self.Object===Object&&self,cA=sA||lA||Function("return this")(),ui=cA,uA=ui,fA=uA.Symbol,hf=fA,l2=hf,T3=Object.prototype,dA=T3.hasOwnProperty,hA=T3.toString,Oc=l2?l2.toStringTag:void 0;function pA(e){var t=dA.call(e,Oc),r=e[Oc];try{e[Oc]=void 0;var n=!0}catch{}var a=hA.call(e);return n&&(t?e[Oc]=r:delete e[Oc]),a}var gA=pA,mA=Object.prototype,yA=mA.toString;function vA(e){return yA.call(e)}var xA=vA,c2=hf,bA=gA,wA=xA,kA="[object Null]",SA="[object Undefined]",u2=c2?c2.toStringTag:void 0;function jA(e){return e==null?e===void 0?SA:kA:u2&&u2 in Object(e)?bA(e):wA(e)}var Ri=jA;function PA(e){return e!=null&&typeof e=="object"}var Li=PA,CA=Ri,NA=Li,OA="[object Symbol]";function MA(e){return typeof e=="symbol"||NA(e)&&CA(e)==OA}var Yl=MA,_A=zn,AA=Yl,TA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,EA=/^\w*$/;function $A(e,t){if(_A(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||AA(e)?!0:EA.test(e)||!TA.test(e)||t!=null&&e in Object(t)}var vx=$A;function DA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Co=DA;const ql=Bt(Co);var IA=Ri,RA=Co,LA="[object AsyncFunction]",BA="[object Function]",FA="[object GeneratorFunction]",zA="[object Proxy]";function GA(e){if(!RA(e))return!1;var t=IA(e);return t==BA||t==FA||t==LA||t==zA}var xx=GA;const Ye=Bt(xx);var UA=ui,WA=UA["__core-js_shared__"],VA=WA,og=VA,f2=function(){var e=/[^.]+$/.exec(og&&og.keys&&og.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function HA(e){return!!f2&&f2 in e}var XA=HA,KA=Function.prototype,YA=KA.toString;function qA(e){if(e!=null){try{return YA.call(e)}catch{}try{return e+""}catch{}}return""}var E3=qA,ZA=xx,QA=XA,JA=Co,e6=E3,t6=/[\\^$.*+?()[\]{}|]/g,r6=/^\[object .+?Constructor\]$/,n6=Function.prototype,a6=Object.prototype,i6=n6.toString,o6=a6.hasOwnProperty,s6=RegExp("^"+i6.call(o6).replace(t6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l6(e){if(!JA(e)||QA(e))return!1;var t=ZA(e)?s6:r6;return t.test(e6(e))}var c6=l6;function u6(e,t){return e==null?void 0:e[t]}var f6=u6,d6=c6,h6=f6;function p6(e,t){var r=h6(e,t);return d6(r)?r:void 0}var Cs=p6,g6=Cs,m6=g6(Object,"create"),_h=m6,d2=_h;function y6(){this.__data__=d2?d2(null):{},this.size=0}var v6=y6;function x6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var b6=x6,w6=_h,k6="__lodash_hash_undefined__",S6=Object.prototype,j6=S6.hasOwnProperty;function P6(e){var t=this.__data__;if(w6){var r=t[e];return r===k6?void 0:r}return j6.call(t,e)?t[e]:void 0}var C6=P6,N6=_h,O6=Object.prototype,M6=O6.hasOwnProperty;function _6(e){var t=this.__data__;return N6?t[e]!==void 0:M6.call(t,e)}var A6=_6,T6=_h,E6="__lodash_hash_undefined__";function $6(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=T6&&t===void 0?E6:t,this}var D6=$6,I6=v6,R6=b6,L6=C6,B6=A6,F6=D6;function Zl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zl.prototype.clear=I6;Zl.prototype.delete=R6;Zl.prototype.get=L6;Zl.prototype.has=B6;Zl.prototype.set=F6;var z6=Zl;function G6(){this.__data__=[],this.size=0}var U6=G6;function W6(e,t){return e===t||e!==e&&t!==t}var bx=W6,V6=bx;function H6(e,t){for(var r=e.length;r--;)if(V6(e[r][0],t))return r;return-1}var Ah=H6,X6=Ah,K6=Array.prototype,Y6=K6.splice;function q6(e){var t=this.__data__,r=X6(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Y6.call(t,r,1),--this.size,!0}var Z6=q6,Q6=Ah;function J6(e){var t=this.__data__,r=Q6(t,e);return r<0?void 0:t[r][1]}var e8=J6,t8=Ah;function r8(e){return t8(this.__data__,e)>-1}var n8=r8,a8=Ah;function i8(e,t){var r=this.__data__,n=a8(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var o8=i8,s8=U6,l8=Z6,c8=e8,u8=n8,f8=o8;function Ql(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ql.prototype.clear=s8;Ql.prototype.delete=l8;Ql.prototype.get=c8;Ql.prototype.has=u8;Ql.prototype.set=f8;var Th=Ql,d8=Cs,h8=ui,p8=d8(h8,"Map"),wx=p8,h2=z6,g8=Th,m8=wx;function y8(){this.size=0,this.__data__={hash:new h2,map:new(m8||g8),string:new h2}}var v8=y8;function x8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var b8=x8,w8=b8;function k8(e,t){var r=e.__data__;return w8(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Eh=k8,S8=Eh;function j8(e){var t=S8(this,e).delete(e);return this.size-=t?1:0,t}var P8=j8,C8=Eh;function N8(e){return C8(this,e).get(e)}var O8=N8,M8=Eh;function _8(e){return M8(this,e).has(e)}var A8=_8,T8=Eh;function E8(e,t){var r=T8(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var $8=E8,D8=v8,I8=P8,R8=O8,L8=A8,B8=$8;function Jl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jl.prototype.clear=D8;Jl.prototype.delete=I8;Jl.prototype.get=R8;Jl.prototype.has=L8;Jl.prototype.set=B8;var kx=Jl,$3=kx,F8="Expected a function";function Sx(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(F8);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Sx.Cache||$3),r}Sx.Cache=$3;var D3=Sx;const z8=Bt(D3);var G8=D3,U8=500;function W8(e){var t=G8(e,function(n){return r.size===U8&&r.clear(),n}),r=t.cache;return t}var V8=W8,H8=V8,X8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K8=/\\(\\)?/g,Y8=H8(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(X8,function(r,n,a,i){t.push(a?i.replace(K8,"$1"):n||r)}),t}),q8=Y8;function Z8(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var jx=Z8,p2=hf,Q8=jx,J8=zn,eT=Yl,g2=p2?p2.prototype:void 0,m2=g2?g2.toString:void 0;function I3(e){if(typeof e=="string")return e;if(J8(e))return Q8(e,I3)+"";if(eT(e))return m2?m2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var tT=I3,rT=tT;function nT(e){return e==null?"":rT(e)}var R3=nT,aT=zn,iT=vx,oT=q8,sT=R3;function lT(e,t){return aT(e)?e:iT(e,t)?[e]:oT(sT(e))}var L3=lT,cT=Yl;function uT(e){if(typeof e=="string"||cT(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var $h=uT,fT=L3,dT=$h;function hT(e,t){t=fT(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[dT(t[r++])];return r&&r==n?e:void 0}var Px=hT,pT=Px;function gT(e,t,r){var n=e==null?void 0:pT(e,t);return n===void 0?r:n}var B3=gT;const wa=Bt(B3);function mT(e){return e==null}var yT=mT;const We=Bt(yT);var vT=Ri,xT=zn,bT=Li,wT="[object String]";function kT(e){return typeof e=="string"||!xT(e)&&bT(e)&&vT(e)==wT}var ST=kT;const ms=Bt(ST);var F3={exports:{}},_t={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx=Symbol.for("react.element"),Nx=Symbol.for("react.portal"),Dh=Symbol.for("react.fragment"),Ih=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),Bh=Symbol.for("react.context"),jT=Symbol.for("react.server_context"),Fh=Symbol.for("react.forward_ref"),zh=Symbol.for("react.suspense"),Gh=Symbol.for("react.suspense_list"),Uh=Symbol.for("react.memo"),Wh=Symbol.for("react.lazy"),PT=Symbol.for("react.offscreen"),z3;z3=Symbol.for("react.module.reference");function Pa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Cx:switch(e=e.type,e){case Dh:case Rh:case Ih:case zh:case Gh:return e;default:switch(e=e&&e.$$typeof,e){case jT:case Bh:case Fh:case Wh:case Uh:case Lh:return e;default:return t}}case Nx:return t}}}_t.ContextConsumer=Bh;_t.ContextProvider=Lh;_t.Element=Cx;_t.ForwardRef=Fh;_t.Fragment=Dh;_t.Lazy=Wh;_t.Memo=Uh;_t.Portal=Nx;_t.Profiler=Rh;_t.StrictMode=Ih;_t.Suspense=zh;_t.SuspenseList=Gh;_t.isAsyncMode=function(){return!1};_t.isConcurrentMode=function(){return!1};_t.isContextConsumer=function(e){return Pa(e)===Bh};_t.isContextProvider=function(e){return Pa(e)===Lh};_t.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cx};_t.isForwardRef=function(e){return Pa(e)===Fh};_t.isFragment=function(e){return Pa(e)===Dh};_t.isLazy=function(e){return Pa(e)===Wh};_t.isMemo=function(e){return Pa(e)===Uh};_t.isPortal=function(e){return Pa(e)===Nx};_t.isProfiler=function(e){return Pa(e)===Rh};_t.isStrictMode=function(e){return Pa(e)===Ih};_t.isSuspense=function(e){return Pa(e)===zh};_t.isSuspenseList=function(e){return Pa(e)===Gh};_t.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Dh||e===Rh||e===Ih||e===zh||e===Gh||e===PT||typeof e=="object"&&e!==null&&(e.$$typeof===Wh||e.$$typeof===Uh||e.$$typeof===Lh||e.$$typeof===Bh||e.$$typeof===Fh||e.$$typeof===z3||e.getModuleId!==void 0)};_t.typeOf=Pa;F3.exports=_t;var CT=F3.exports,NT=Ri,OT=Li,MT="[object Number]";function _T(e){return typeof e=="number"||OT(e)&&NT(e)==MT}var G3=_T;const AT=Bt(G3);var TT=G3;function ET(e){return TT(e)&&e!=+e}var $T=ET;const ec=Bt($T);var Fa=function(t){return t===0?0:t>0?1:-1},qo=function(t){return ms(t)&&t.indexOf("%")===t.length-1},ge=function(t){return AT(t)&&!ec(t)},DT=function(t){return We(t)},Rr=function(t){return ge(t)||ms(t)},IT=0,Ns=function(t){var r=++IT;return"".concat(t||"").concat(r)},ys=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ge(t)&&!ms(t))return n;var i;if(qo(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ec(i)&&(i=n),a&&i>r&&(i=r),i},qi=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},RT=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},br=function(t,r){return ge(t)&&ge(r)?function(n){return t+n*(r-t)}:function(){return r}};function i0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):wa(n,t))===r})}var LT=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,l=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:l,a:h,b:(a-h*n)/r}},BT=function(t,r){return ge(t)&&ge(r)?t-r:ms(t)&&ms(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function sl(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}var FT=["viewBox","children"],zT=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],y2=["points","pathLength"],sg={svg:FT,polygon:y2,polyline:y2},Ox=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],o0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),!ql(n))return null;var a={};return Object.keys(n).forEach(function(i){Ox.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},GT=function(t,r,n){return function(a){return t(r,n,a),null}},Pu=function(t,r,n){if(!ql(t)||Rm(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];Ox.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=GT(o,r,n))}),a},UT=["children"],WT=["children"];function v2(e,t){if(e==null)return{};var r=VT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}var x2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},b2=null,lg=null,Mx=function e(t){if(t===b2&&Array.isArray(lg))return lg;var r=[];return j.Children.forEach(t,function(n){We(n)||(CT.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),lg=r,b2=t,r};function Ln(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Pi(a)}):n=[Pi(t)],Mx(e).forEach(function(a){var i=wa(a,"type.displayName")||wa(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function qn(e,t){var r=Ln(e,t);return r&&r[0]}var w2=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!ge(n)||n<=0||!ge(a)||a<=0)},HT=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],XT=function(t){return t&&t.type&&ms(t.type)&&HT.indexOf(t.type)>=0},U3=function(t){return t&&Lm(t)==="object"&&"clipDot"in t},KT=function(t,r,n,a){var i,o=(i=sg==null?void 0:sg[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Ye(t)&&(a&&o.includes(r)||zT.includes(r))||n&&Ox.includes(r)},Xe=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!ql(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;KT((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},Bm=function e(t,r){if(t===r)return!0;var n=j.Children.count(t);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return k2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!k2(i,o))return!1}return!0},k2=function(t,r){if(We(t)&&We(r))return!0;if(!We(t)&&!We(r)){var n=t.props||{},a=n.children,i=v2(n,UT),o=r.props||{},s=o.children,l=v2(o,WT);return a&&s?sl(i,l)&&Bm(a,s):!a&&!s?sl(i,l):!1}return!1},S2=function(t,r){var n=[],a={};return Mx(t).forEach(function(i,o){if(XT(i))n.push(i);else if(i){var s=Pi(i.type),l=r[s]||{},u=l.handler,f=l.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},YT=function(t){var r=t&&t.type;return r&&x2[r]?x2[r]:null},qT=function(t,r){return Mx(r).indexOf(t)},ZT=["children","width","height","viewBox","className","style","title","desc"];function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fm.apply(this,arguments)}function QT(e,t){if(e==null)return{};var r=JT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zm(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,u=QT(e,ZT),f=a||{width:r,height:n,x:0,y:0},d=it("recharts-surface",i);return z.createElement("svg",Fm({},Xe(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),z.createElement("title",null,s),z.createElement("desc",null,l),t)}var eE=["children","className"];function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gm.apply(this,arguments)}function tE(e,t){if(e==null)return{};var r=rE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var bt=z.forwardRef(function(e,t){var r=e.children,n=e.className,a=tE(e,eE),i=it("recharts-layer",n);return z.createElement("g",Gm({className:i},Xe(a,!0),{ref:t}),r)}),Ci=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function nE(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var aE=nE,iE=aE;function oE(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:iE(e,t,r)}var sE=oE,lE="\\ud800-\\udfff",cE="\\u0300-\\u036f",uE="\\ufe20-\\ufe2f",fE="\\u20d0-\\u20ff",dE=cE+uE+fE,hE="\\ufe0e\\ufe0f",pE="\\u200d",gE=RegExp("["+pE+lE+dE+hE+"]");function mE(e){return gE.test(e)}var W3=mE;function yE(e){return e.split("")}var vE=yE,V3="\\ud800-\\udfff",xE="\\u0300-\\u036f",bE="\\ufe20-\\ufe2f",wE="\\u20d0-\\u20ff",kE=xE+bE+wE,SE="\\ufe0e\\ufe0f",jE="["+V3+"]",Um="["+kE+"]",Wm="\\ud83c[\\udffb-\\udfff]",PE="(?:"+Um+"|"+Wm+")",H3="[^"+V3+"]",X3="(?:\\ud83c[\\udde6-\\uddff]){2}",K3="[\\ud800-\\udbff][\\udc00-\\udfff]",CE="\\u200d",Y3=PE+"?",q3="["+SE+"]?",NE="(?:"+CE+"(?:"+[H3,X3,K3].join("|")+")"+q3+Y3+")*",OE=q3+Y3+NE,ME="(?:"+[H3+Um+"?",Um,X3,K3,jE].join("|")+")",_E=RegExp(Wm+"(?="+Wm+")|"+ME+OE,"g");function AE(e){return e.match(_E)||[]}var TE=AE,EE=vE,$E=W3,DE=TE;function IE(e){return $E(e)?DE(e):EE(e)}var RE=IE,LE=sE,BE=W3,FE=RE,zE=R3;function GE(e){return function(t){t=zE(t);var r=BE(t)?FE(t):void 0,n=r?r[0]:t.charAt(0),a=r?LE(r,1).join(""):t.slice(1);return n[e]()+a}}var UE=GE,WE=UE,VE=WE("toUpperCase"),HE=VE;const Vh=Bt(HE);function Wt(e){return function(){return e}}const Z3=Math.cos,s0=Math.sin,Ha=Math.sqrt,l0=Math.PI,Hh=2*l0,Vm=Math.PI,Hm=2*Vm,zo=1e-6,XE=Hm-zo;function Q3(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function KE(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Q3;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class YE{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Q3:KE(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,f=o-t,d=s-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>zo)if(!(Math.abs(d*l-u*f)>zo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=a-s,m=l*l+u*u,x=p*p+y*y,v=Math.sqrt(m),g=Math.sqrt(h),b=i*Math.tan((Vm-Math.acos((m+h-x)/(2*v*g)))/2),S=b/g,k=b/v;Math.abs(S-1)>zo&&this._append`L${t+S*f},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*p>f*y)},${this._x1=t+k*l},${this._y1=r+k*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,f=r+l,d=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>zo||Math.abs(this._y1-f)>zo)&&this._append`L${u},${f}`,n&&(h<0&&(h=h%Hm+Hm),h>XE?this._append`A${n},${n},0,1,${d},${t-s},${r-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:h>zo&&this._append`A${n},${n},0,${+(h>=Vm)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function _x(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new YE(t)}function Ax(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function J3(e){this._context=e}J3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xh(e){return new J3(e)}function ej(e){return e[0]}function tj(e){return e[1]}function rj(e,t){var r=Wt(!0),n=null,a=Xh,i=null,o=_x(s);e=typeof e=="function"?e:e===void 0?ej:Wt(e),t=typeof t=="function"?t:t===void 0?tj:Wt(t);function s(l){var u,f=(l=Ax(l)).length,d,h=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=f;++u)!(u<f&&r(d=l[u],u,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(d,u,l),+t(d,u,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Wt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Wt(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Wt(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function Zf(e,t,r){var n=null,a=Wt(!0),i=null,o=Xh,s=null,l=_x(u);e=typeof e=="function"?e:e===void 0?ej:Wt(+e),t=typeof t=="function"?t:Wt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?tj:Wt(+r);function u(d){var h,p,y,m=(d=Ax(d)).length,x,v=!1,g,b=new Array(m),S=new Array(m);for(i==null&&(s=o(g=l())),h=0;h<=m;++h){if(!(h<m&&a(x=d[h],h,d))===v)if(v=!v)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=h-1;y>=p;--y)s.point(b[y],S[y]);s.lineEnd(),s.areaEnd()}v&&(b[h]=+e(x,h,d),S[h]=+t(x,h,d),s.point(n?+n(x,h,d):b[h],r?+r(x,h,d):S[h]))}if(g)return s=null,g+""||null}function f(){return rj().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Wt(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Wt(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Wt(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Wt(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Wt(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Wt(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Wt(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class nj{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function qE(e){return new nj(e,!0)}function ZE(e){return new nj(e,!1)}const Tx={draw(e,t){const r=Ha(t/l0);e.moveTo(r,0),e.arc(0,0,r,0,Hh)}},QE={draw(e,t){const r=Ha(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},aj=Ha(1/3),JE=aj*2,e7={draw(e,t){const r=Ha(t/JE),n=r*aj;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},t7={draw(e,t){const r=Ha(t),n=-r/2;e.rect(n,n,r,r)}},r7=.8908130915292852,ij=s0(l0/10)/s0(7*l0/10),n7=s0(Hh/10)*ij,a7=-Z3(Hh/10)*ij,i7={draw(e,t){const r=Ha(t*r7),n=n7*r,a=a7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Hh*i/5,s=Z3(o),l=s0(o);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},cg=Ha(3),o7={draw(e,t){const r=-Ha(t/(cg*3));e.moveTo(0,r*2),e.lineTo(-cg*r,-r),e.lineTo(cg*r,-r),e.closePath()}},fa=-.5,da=Ha(3)/2,Xm=1/Ha(12),s7=(Xm/2+1)*3,l7={draw(e,t){const r=Ha(t/s7),n=r/2,a=r*Xm,i=n,o=r*Xm+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(fa*n-da*a,da*n+fa*a),e.lineTo(fa*i-da*o,da*i+fa*o),e.lineTo(fa*s-da*l,da*s+fa*l),e.lineTo(fa*n+da*a,fa*a-da*n),e.lineTo(fa*i+da*o,fa*o-da*i),e.lineTo(fa*s+da*l,fa*l-da*s),e.closePath()}};function c7(e,t){let r=null,n=_x(a);e=typeof e=="function"?e:Wt(e||Tx),t=typeof t=="function"?t:Wt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Wt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Wt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function c0(){}function u0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function oj(e){this._context=e}oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u7(e){return new oj(e)}function sj(e){this._context=e}sj.prototype={areaStart:c0,areaEnd:c0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:u0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function f7(e){return new sj(e)}function lj(e){this._context=e}lj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:u0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d7(e){return new lj(e)}function cj(e){this._context=e}cj.prototype={areaStart:c0,areaEnd:c0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function h7(e){return new cj(e)}function j2(e){return e<0?-1:1}function P2(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(j2(i)+j2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function C2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ug(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function f0(e){this._context=e}f0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ug(this,this._t0,C2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ug(this,C2(this,r=P2(this,e,t)),r);break;default:ug(this,this._t0,r=P2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function uj(e){this._context=new fj(e)}(uj.prototype=Object.create(f0.prototype)).point=function(e,t){f0.prototype.point.call(this,t,e)};function fj(e){this._context=e}fj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function p7(e){return new f0(e)}function g7(e){return new uj(e)}function dj(e){this._context=e}dj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=N2(e),a=N2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function N2(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function m7(e){return new dj(e)}function Kh(e,t){this._context=e,this._t=t}Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function y7(e){return new Kh(e,.5)}function v7(e){return new Kh(e,0)}function x7(e){return new Kh(e,1)}function vl(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Km(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function b7(e,t){return e[t]}function w7(e){const t=[];return t.key=e,t}function k7(){var e=Wt([]),t=Km,r=vl,n=b7;function a(i){var o=Array.from(e.apply(this,arguments),w7),s,l=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=Ax(t(o));s<l;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Wt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Wt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Km:typeof i=="function"?i:Wt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??vl,a):r},a}function S7(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}vl(e,t)}}function j7(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}vl(e,t)}}function P7(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,y=0;y<s;++y){var m=e[t[y]],x=m[n][1]||0,v=m[n-1][1]||0;p+=x-v}l+=d,u+=p*d}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,vl(e,t)}}function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}var C7=["type","size","sizeType"];function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(this,arguments)}function O2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function M2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(r),!0).forEach(function(n){N7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N7(e,t,r){return t=O7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7(e){var t=M7(e,"string");return Cu(t)=="symbol"?t:t+""}function M7(e,t){if(Cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _7(e,t){if(e==null)return{};var r=A7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function A7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var hj={symbolCircle:Tx,symbolCross:QE,symbolDiamond:e7,symbolSquare:t7,symbolStar:i7,symbolTriangle:o7,symbolWye:l7},T7=Math.PI/180,E7=function(t){var r="symbol".concat(Vh(t));return hj[r]||Tx},$7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*T7;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},D7=function(t,r){hj["symbol".concat(Vh(t))]=r},Yh=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=_7(t,C7),u=M2(M2({},l),{},{type:n,size:i,sizeType:s}),f=function(){var x=E7(n),v=c7().type(x).size($7(i,s,n));return v()},d=u.className,h=u.cx,p=u.cy,y=Xe(u,!0);return h===+h&&p===+p&&i===+i?z.createElement("path",Ym({},y,{className:it("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};Yh.registerSymbol=D7;function xl(e){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(this,arguments)}function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function I7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){Nu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gj(n.key),n)}}function B7(e,t,r){return t&&L7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F7(e,t,r){return t=d0(t),z7(e,pj()?Reflect.construct(t,r||[],d0(e).constructor):t.apply(e,r))}function z7(e,t){if(t&&(xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G7(e)}function G7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pj=function(){return!!e})()}function d0(e){return d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d0(e)}function U7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zm(e,t)}function Zm(e,t){return Zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zm(e,t)}function Nu(e,t,r){return t=gj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gj(e){var t=W7(e,"string");return xl(t)=="symbol"?t:t+""}function W7(e,t){if(xl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ha=32,Ex=function(e){function t(){return R7(this,t),F7(this,t,arguments)}return U7(t,e),B7(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ha/2,o=ha/6,s=ha/3,l=n.inactive?a:n.color;if(n.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ha,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(ha,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return z.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ha/8,"h").concat(ha,"v").concat(ha*3/4,"h").concat(-ha,"z"),className:"recharts-legend-icon"});if(z.isValidElement(n.legendIcon)){var u=I7({},n);return delete u.legendIcon,z.cloneElement(n.legendIcon,u)}return z.createElement(Yh,{fill:l,cx:i,cy:i,size:ha,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:ha,height:ha},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var m=p.formatter||l,x=it(Nu(Nu({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=Ye(p.value)?null:p.value;Ci(!Ye(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?u:p.color;return z.createElement("li",qm({className:x,style:d,key:"legend-item-".concat(y)},Pu(n.props,p,y)),z.createElement(zm,{width:o,height:o,viewBox:f,style:h},n.renderIcon(p)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},m?m(v,p,y):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(j.PureComponent);Nu(Ex,"displayName","Legend");Nu(Ex,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var V7=Th;function H7(){this.__data__=new V7,this.size=0}var X7=H7;function K7(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Y7=K7;function q7(e){return this.__data__.get(e)}var Z7=q7;function Q7(e){return this.__data__.has(e)}var J7=Q7,e$=Th,t$=wx,r$=kx,n$=200;function a$(e,t){var r=this.__data__;if(r instanceof e$){var n=r.__data__;if(!t$||n.length<n$-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new r$(n)}return r.set(e,t),this.size=r.size,this}var i$=a$,o$=Th,s$=X7,l$=Y7,c$=Z7,u$=J7,f$=i$;function tc(e){var t=this.__data__=new o$(e);this.size=t.size}tc.prototype.clear=s$;tc.prototype.delete=l$;tc.prototype.get=c$;tc.prototype.has=u$;tc.prototype.set=f$;var mj=tc,d$="__lodash_hash_undefined__";function h$(e){return this.__data__.set(e,d$),this}var p$=h$;function g$(e){return this.__data__.has(e)}var m$=g$,y$=kx,v$=p$,x$=m$;function h0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new y$;++t<r;)this.add(e[t])}h0.prototype.add=h0.prototype.push=v$;h0.prototype.has=x$;var yj=h0;function b$(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var vj=b$;function w$(e,t){return e.has(t)}var xj=w$,k$=yj,S$=vj,j$=xj,P$=1,C$=2;function N$(e,t,r,n,a,i){var o=r&P$,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=r&C$?new k$:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var y=e[d],m=t[d];if(n)var x=o?n(m,y,d,t,e,i):n(y,m,d,e,t,i);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!S$(t,function(v,g){if(!j$(p,g)&&(y===v||a(y,v,r,n,i)))return p.push(g)})){h=!1;break}}else if(!(y===m||a(y,m,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var bj=N$,O$=ui,M$=O$.Uint8Array,_$=M$;function A$(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var T$=A$;function E$(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var $x=E$,A2=hf,T2=_$,$$=bx,D$=bj,I$=T$,R$=$x,L$=1,B$=2,F$="[object Boolean]",z$="[object Date]",G$="[object Error]",U$="[object Map]",W$="[object Number]",V$="[object RegExp]",H$="[object Set]",X$="[object String]",K$="[object Symbol]",Y$="[object ArrayBuffer]",q$="[object DataView]",E2=A2?A2.prototype:void 0,fg=E2?E2.valueOf:void 0;function Z$(e,t,r,n,a,i,o){switch(r){case q$:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Y$:return!(e.byteLength!=t.byteLength||!i(new T2(e),new T2(t)));case F$:case z$:case W$:return $$(+e,+t);case G$:return e.name==t.name&&e.message==t.message;case V$:case X$:return e==t+"";case U$:var s=I$;case H$:var l=n&L$;if(s||(s=R$),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=B$,o.set(e,t);var f=D$(s(e),s(t),n,a,i,o);return o.delete(e),f;case K$:if(fg)return fg.call(e)==fg.call(t)}return!1}var Q$=Z$;function J$(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var wj=J$,e9=wj,t9=zn;function r9(e,t,r){var n=t(e);return t9(e)?n:e9(n,r(e))}var n9=r9;function a9(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var i9=a9;function o9(){return[]}var s9=o9,l9=i9,c9=s9,u9=Object.prototype,f9=u9.propertyIsEnumerable,$2=Object.getOwnPropertySymbols,d9=$2?function(e){return e==null?[]:(e=Object(e),l9($2(e),function(t){return f9.call(e,t)}))}:c9,h9=d9;function p9(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var g9=p9,m9=Ri,y9=Li,v9="[object Arguments]";function x9(e){return y9(e)&&m9(e)==v9}var b9=x9,D2=b9,w9=Li,kj=Object.prototype,k9=kj.hasOwnProperty,S9=kj.propertyIsEnumerable,j9=D2(function(){return arguments}())?D2:function(e){return w9(e)&&k9.call(e,"callee")&&!S9.call(e,"callee")},Dx=j9,p0={exports:{}};function P9(){return!1}var C9=P9;p0.exports;(function(e,t){var r=ui,n=C9,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(p0,p0.exports);var Sj=p0.exports,N9=9007199254740991,O9=/^(?:0|[1-9]\d*)$/;function M9(e,t){var r=typeof e;return t=t??N9,!!t&&(r=="number"||r!="symbol"&&O9.test(e))&&e>-1&&e%1==0&&e<t}var Ix=M9,_9=9007199254740991;function A9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_9}var Rx=A9,T9=Ri,E9=Rx,$9=Li,D9="[object Arguments]",I9="[object Array]",R9="[object Boolean]",L9="[object Date]",B9="[object Error]",F9="[object Function]",z9="[object Map]",G9="[object Number]",U9="[object Object]",W9="[object RegExp]",V9="[object Set]",H9="[object String]",X9="[object WeakMap]",K9="[object ArrayBuffer]",Y9="[object DataView]",q9="[object Float32Array]",Z9="[object Float64Array]",Q9="[object Int8Array]",J9="[object Int16Array]",eD="[object Int32Array]",tD="[object Uint8Array]",rD="[object Uint8ClampedArray]",nD="[object Uint16Array]",aD="[object Uint32Array]",Kt={};Kt[q9]=Kt[Z9]=Kt[Q9]=Kt[J9]=Kt[eD]=Kt[tD]=Kt[rD]=Kt[nD]=Kt[aD]=!0;Kt[D9]=Kt[I9]=Kt[K9]=Kt[R9]=Kt[Y9]=Kt[L9]=Kt[B9]=Kt[F9]=Kt[z9]=Kt[G9]=Kt[U9]=Kt[W9]=Kt[V9]=Kt[H9]=Kt[X9]=!1;function iD(e){return $9(e)&&E9(e.length)&&!!Kt[T9(e)]}var oD=iD;function sD(e){return function(t){return e(t)}}var jj=sD,g0={exports:{}};g0.exports;(function(e,t){var r=A3,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(g0,g0.exports);var lD=g0.exports,cD=oD,uD=jj,I2=lD,R2=I2&&I2.isTypedArray,fD=R2?uD(R2):cD,Pj=fD,dD=g9,hD=Dx,pD=zn,gD=Sj,mD=Ix,yD=Pj,vD=Object.prototype,xD=vD.hasOwnProperty;function bD(e,t){var r=pD(e),n=!r&&hD(e),a=!r&&!n&&gD(e),i=!r&&!n&&!a&&yD(e),o=r||n||a||i,s=o?dD(e.length,String):[],l=s.length;for(var u in e)(t||xD.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||mD(u,l)))&&s.push(u);return s}var wD=bD,kD=Object.prototype;function SD(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||kD;return e===r}var jD=SD;function PD(e,t){return function(r){return e(t(r))}}var Cj=PD,CD=Cj,ND=CD(Object.keys,Object),OD=ND,MD=jD,_D=OD,AD=Object.prototype,TD=AD.hasOwnProperty;function ED(e){if(!MD(e))return _D(e);var t=[];for(var r in Object(e))TD.call(e,r)&&r!="constructor"&&t.push(r);return t}var $D=ED,DD=xx,ID=Rx;function RD(e){return e!=null&&ID(e.length)&&!DD(e)}var pf=RD,LD=wD,BD=$D,FD=pf;function zD(e){return FD(e)?LD(e):BD(e)}var qh=zD,GD=n9,UD=h9,WD=qh;function VD(e){return GD(e,WD,UD)}var HD=VD,L2=HD,XD=1,KD=Object.prototype,YD=KD.hasOwnProperty;function qD(e,t,r,n,a,i){var o=r&XD,s=L2(e),l=s.length,u=L2(t),f=u.length;if(l!=f&&!o)return!1;for(var d=l;d--;){var h=s[d];if(!(o?h in t:YD.call(t,h)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=o;++d<l;){h=s[d];var v=e[h],g=t[h];if(n)var b=o?n(g,v,h,t,e,i):n(v,g,h,e,t,i);if(!(b===void 0?v===g||a(v,g,r,n,i):b)){m=!1;break}x||(x=h=="constructor")}if(m&&!x){var S=e.constructor,k=t.constructor;S!=k&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var ZD=qD,QD=Cs,JD=ui,eI=QD(JD,"DataView"),tI=eI,rI=Cs,nI=ui,aI=rI(nI,"Promise"),iI=aI,oI=Cs,sI=ui,lI=oI(sI,"Set"),Nj=lI,cI=Cs,uI=ui,fI=cI(uI,"WeakMap"),dI=fI,Qm=tI,Jm=wx,ey=iI,ty=Nj,ry=dI,Oj=Ri,rc=E3,B2="[object Map]",hI="[object Object]",F2="[object Promise]",z2="[object Set]",G2="[object WeakMap]",U2="[object DataView]",pI=rc(Qm),gI=rc(Jm),mI=rc(ey),yI=rc(ty),vI=rc(ry),Go=Oj;(Qm&&Go(new Qm(new ArrayBuffer(1)))!=U2||Jm&&Go(new Jm)!=B2||ey&&Go(ey.resolve())!=F2||ty&&Go(new ty)!=z2||ry&&Go(new ry)!=G2)&&(Go=function(e){var t=Oj(e),r=t==hI?e.constructor:void 0,n=r?rc(r):"";if(n)switch(n){case pI:return U2;case gI:return B2;case mI:return F2;case yI:return z2;case vI:return G2}return t});var xI=Go,dg=mj,bI=bj,wI=Q$,kI=ZD,W2=xI,V2=zn,H2=Sj,SI=Pj,jI=1,X2="[object Arguments]",K2="[object Array]",Qf="[object Object]",PI=Object.prototype,Y2=PI.hasOwnProperty;function CI(e,t,r,n,a,i){var o=V2(e),s=V2(t),l=o?K2:W2(e),u=s?K2:W2(t);l=l==X2?Qf:l,u=u==X2?Qf:u;var f=l==Qf,d=u==Qf,h=l==u;if(h&&H2(e)){if(!H2(t))return!1;o=!0,f=!1}if(h&&!f)return i||(i=new dg),o||SI(e)?bI(e,t,r,n,a,i):wI(e,t,l,r,n,a,i);if(!(r&jI)){var p=f&&Y2.call(e,"__wrapped__"),y=d&&Y2.call(t,"__wrapped__");if(p||y){var m=p?e.value():e,x=y?t.value():t;return i||(i=new dg),a(m,x,r,n,i)}}return h?(i||(i=new dg),kI(e,t,r,n,a,i)):!1}var NI=CI,OI=NI,q2=Li;function Mj(e,t,r,n,a){return e===t?!0:e==null||t==null||!q2(e)&&!q2(t)?e!==e&&t!==t:OI(e,t,r,n,Mj,a)}var Lx=Mj,MI=mj,_I=Lx,AI=1,TI=2;function EI(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var l=s[0],u=e[l],f=s[1];if(o&&s[2]){if(u===void 0&&!(l in e))return!1}else{var d=new MI;if(n)var h=n(u,f,l,e,t,d);if(!(h===void 0?_I(f,u,AI|TI,n,d):h))return!1}}return!0}var $I=EI,DI=Co;function II(e){return e===e&&!DI(e)}var _j=II,RI=_j,LI=qh;function BI(e){for(var t=LI(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,RI(a)]}return t}var FI=BI;function zI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Aj=zI,GI=$I,UI=FI,WI=Aj;function VI(e){var t=UI(e);return t.length==1&&t[0][2]?WI(t[0][0],t[0][1]):function(r){return r===e||GI(r,e,t)}}var HI=VI;function XI(e,t){return e!=null&&t in Object(e)}var KI=XI,YI=L3,qI=Dx,ZI=zn,QI=Ix,JI=Rx,eR=$h;function tR(e,t,r){t=YI(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=eR(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&JI(a)&&QI(o,a)&&(ZI(e)||qI(e)))}var rR=tR,nR=KI,aR=rR;function iR(e,t){return e!=null&&aR(e,t,nR)}var oR=iR,sR=Lx,lR=B3,cR=oR,uR=vx,fR=_j,dR=Aj,hR=$h,pR=1,gR=2;function mR(e,t){return uR(e)&&fR(t)?dR(hR(e),t):function(r){var n=lR(r,e);return n===void 0&&n===t?cR(r,e):sR(t,n,pR|gR)}}var yR=mR;function vR(e){return e}var nc=vR;function xR(e){return function(t){return t==null?void 0:t[e]}}var bR=xR,wR=Px;function kR(e){return function(t){return wR(t,e)}}var SR=kR,jR=bR,PR=SR,CR=vx,NR=$h;function OR(e){return CR(e)?jR(NR(e)):PR(e)}var MR=OR,_R=HI,AR=yR,TR=nc,ER=zn,$R=MR;function DR(e){return typeof e=="function"?e:e==null?TR:typeof e=="object"?ER(e)?AR(e[0],e[1]):_R(e):$R(e)}var No=DR;function IR(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Tj=IR;function RR(e){return e!==e}var LR=RR;function BR(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var FR=BR,zR=Tj,GR=LR,UR=FR;function WR(e,t,r){return t===t?UR(e,t,r):zR(e,GR,r)}var VR=WR,HR=VR;function XR(e,t){var r=e==null?0:e.length;return!!r&&HR(e,t,0)>-1}var KR=XR;function YR(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var qR=YR;function ZR(){}var QR=ZR,hg=Nj,JR=QR,eL=$x,tL=1/0,rL=hg&&1/eL(new hg([,-0]))[1]==tL?function(e){return new hg(e)}:JR,nL=rL,aL=yj,iL=KR,oL=qR,sL=xj,lL=nL,cL=$x,uL=200;function fL(e,t,r){var n=-1,a=iL,i=e.length,o=!0,s=[],l=s;if(r)o=!1,a=oL;else if(i>=uL){var u=t?null:lL(e);if(u)return cL(u);o=!1,a=sL,l=new aL}else l=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(f)}else a(l,d,r)||(l!==s&&l.push(d),s.push(f))}return s}var dL=fL,hL=No,pL=dL;function gL(e,t){return e&&e.length?pL(e,hL(t)):[]}var mL=gL;const Z2=Bt(mL);function Ej(e,t,r){return t===!0?Z2(e,r):Ye(t)?Z2(e,t):e}function bl(e){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(e)}var yL=["ref"];function Q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(r),!0).forEach(function(n){Zh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dj(n.key),n)}}function xL(e,t,r){return t&&J2(e.prototype,t),r&&J2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bL(e,t,r){return t=m0(t),wL(e,$j()?Reflect.construct(t,r||[],m0(e).constructor):t.apply(e,r))}function wL(e,t){if(t&&(bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kL(e)}function kL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($j=function(){return!!e})()}function m0(e){return m0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},m0(e)}function SL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ny(e,t)}function ny(e,t){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ny(e,t)}function Zh(e,t,r){return t=Dj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dj(e){var t=jL(e,"string");return bl(t)=="symbol"?t:t+""}function jL(e,t){if(bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function PL(e,t){if(e==null)return{};var r=CL(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function NL(e){return e.value}function OL(e,t){if(z.isValidElement(e))return z.cloneElement(e,t);if(typeof e=="function")return z.createElement(e,t);t.ref;var r=PL(t,yL);return z.createElement(Ex,r)}var ew=1,ti=function(e){function t(){var r;vL(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=bL(this,t,[].concat(a)),Zh(r,"lastBoundingBox",{width:-1,height:-1}),r}return SL(t,e),xL(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>ew||Math.abs(a.height-this.lastBoundingBox.height)>ew)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();h={top:((f||0)-y.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return gi(gi({},d),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=gi(gi({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},OL(i,gi(gi({},this.props),{},{payload:Ej(f,u,NL)})))}}],[{key:"getWithHeight",value:function(n,a){var i=gi(gi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&ge(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);Zh(ti,"displayName","Legend");Zh(ti,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var tw=hf,ML=Dx,_L=zn,rw=tw?tw.isConcatSpreadable:void 0;function AL(e){return _L(e)||ML(e)||!!(rw&&e&&e[rw])}var TL=AL,EL=wj,$L=TL;function Ij(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=$L),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?Ij(s,t-1,r,n,a):EL(a,s):n||(a[a.length]=s)}return a}var Rj=Ij;function DL(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(r(i[l],l,i)===!1)break}return t}}var IL=DL,RL=IL,LL=RL(),BL=LL,FL=BL,zL=qh;function GL(e,t){return e&&FL(e,t,zL)}var Lj=GL,UL=pf;function WL(e,t){return function(r,n){if(r==null)return r;if(!UL(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var VL=WL,HL=Lj,XL=VL,KL=XL(HL),Bx=KL,YL=Bx,qL=pf;function ZL(e,t){var r=-1,n=qL(e)?Array(e.length):[];return YL(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var Bj=ZL;function QL(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var JL=QL,nw=Yl;function eB(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=nw(e),o=t!==void 0,s=t===null,l=t===t,u=nw(t);if(!s&&!u&&!i&&e>t||i&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!l)return-1}return 0}var tB=eB,rB=tB;function nB(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var l=rB(a[n],i[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var aB=nB,pg=jx,iB=Px,oB=No,sB=Bj,lB=JL,cB=jj,uB=aB,fB=nc,dB=zn;function hB(e,t,r){t.length?t=pg(t,function(i){return dB(i)?function(o){return iB(o,i.length===1?i[0]:i)}:i}):t=[fB];var n=-1;t=pg(t,cB(oB));var a=sB(e,function(i,o,s){var l=pg(t,function(u){return u(i)});return{criteria:l,index:++n,value:i}});return lB(a,function(i,o){return uB(i,o,r)})}var pB=hB;function gB(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var mB=gB,yB=mB,aw=Math.max;function vB(e,t,r){return t=aw(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=aw(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),yB(e,this,s)}}var xB=vB;function bB(e){return function(){return e}}var wB=bB,kB=Cs,SB=function(){try{var e=kB(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Fj=SB,jB=wB,iw=Fj,PB=nc,CB=iw?function(e,t){return iw(e,"toString",{configurable:!0,enumerable:!1,value:jB(t),writable:!0})}:PB,NB=CB,OB=800,MB=16,_B=Date.now;function AB(e){var t=0,r=0;return function(){var n=_B(),a=MB-(n-r);if(r=n,a>0){if(++t>=OB)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var TB=AB,EB=NB,$B=TB,DB=$B(EB),IB=DB,RB=nc,LB=xB,BB=IB;function FB(e,t){return BB(LB(e,t,RB),e+"")}var zB=FB,GB=bx,UB=pf,WB=Ix,VB=Co;function HB(e,t,r){if(!VB(r))return!1;var n=typeof t;return(n=="number"?UB(r)&&WB(t,r.length):n=="string"&&t in r)?GB(r[t],e):!1}var Qh=HB,XB=Rj,KB=pB,YB=zB,ow=Qh,qB=YB(function(e,t){if(e==null)return[];var r=t.length;return r>1&&ow(e,t[0],t[1])?t=[]:r>2&&ow(t[0],t[1],t[2])&&(t=[t[0]]),KB(e,XB(t,1),[])}),ZB=qB;const Fx=Bt(ZB);function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ay.apply(this,arguments)}function QB(e,t){return rF(e)||tF(e,t)||eF(e,t)||JB()}function JB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eF(e,t){if(e){if(typeof e=="string")return sw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sw(e,t)}}function sw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tF(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function rF(e){if(Array.isArray(e))return e}function lw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(r),!0).forEach(function(n){nF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nF(e,t,r){return t=aF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aF(e){var t=iF(e,"string");return Ou(t)=="symbol"?t:t+""}function iF(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oF(e){return Array.isArray(e)&&Rr(e[0])&&Rr(e[1])?e.join(" ~ "):e}var sF=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,m=t.label,x=t.labelFormatter,v=t.accessibilityLayer,g=v===void 0?!1:v,b=function(){if(f&&f.length){var _={padding:0,margin:0},A=(h?Fx(f,h):f).map(function(D,R){if(D.type==="none")return null;var L=gg({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s),T=D.formatter||d||oF,E=D.value,I=D.name,G=E,J=I;if(T&&G!=null&&J!=null){var K=T(E,I,D,R,f);if(Array.isArray(K)){var F=QB(K,2);G=F[0],J=F[1]}else G=K}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:L},Rr(J)?z.createElement("span",{className:"recharts-tooltip-item-name"},J):null,Rr(J)?z.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,z.createElement("span",{className:"recharts-tooltip-item-value"},G),z.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:_},A)}return null},S=gg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),k=gg({margin:0},u),w=!We(m),P=w?m:"",C=it("recharts-default-tooltip",p),M=it("recharts-tooltip-label",y);w&&x&&f!==void 0&&f!==null&&(P=x(m,f));var N=g?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",ay({className:C,style:S},N),z.createElement("p",{className:M,style:k},z.isValidElement(P)?P:"".concat(P)),b())};function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function Jf(e,t,r){return t=lF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lF(e){var t=cF(e,"string");return Mu(t)=="symbol"?t:t+""}function cF(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mc="recharts-tooltip-wrapper",uF={visibility:"hidden"};function fF(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return it(Mc,Jf(Jf(Jf(Jf({},"".concat(Mc,"-right"),ge(r)&&t&&ge(t.x)&&r>=t.x),"".concat(Mc,"-left"),ge(r)&&t&&ge(t.x)&&r<t.x),"".concat(Mc,"-bottom"),ge(n)&&t&&ge(t.y)&&n>=t.y),"".concat(Mc,"-top"),ge(n)&&t&&ge(t.y)&&n<t.y))}function cw(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(i&&ge(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var h=f,p=l[n];return h<p?Math.max(d,l[n]):Math.max(f,l[n])}var y=d+s,m=l[n]+u;return y>m?Math.max(f,l[n]):Math.max(d,l[n])}function dF(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function hF(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=cw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=cw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=dF({translateX:f,translateY:d,useTranslate3d:s})):u=uF,{cssProperties:u,cssClasses:fF({translateX:f,translateY:d,coordinate:r})}}function wl(e){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function uw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uw(Object(r),!0).forEach(function(n){oy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gj(n.key),n)}}function mF(e,t,r){return t&&gF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yF(e,t,r){return t=y0(t),vF(e,zj()?Reflect.construct(t,r||[],y0(e).constructor):t.apply(e,r))}function vF(e,t){if(t&&(wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xF(e)}function xF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zj=function(){return!!e})()}function y0(e){return y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y0(e)}function bF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iy(e,t)}function iy(e,t){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iy(e,t)}function oy(e,t,r){return t=Gj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gj(e){var t=wF(e,"string");return wl(t)=="symbol"?t:t+""}function wF(e,t){if(wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dw=1,kF=function(e){function t(){var r;pF(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=yF(this,t,[].concat(a)),oy(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),oy(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return bF(t,e),mF(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>dw||Math.abs(n.height-this.state.lastBoundingBox.height)>dw)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,p=a.offset,y=a.position,m=a.reverseDirection,x=a.useTranslate3d,v=a.viewBox,g=a.wrapperStyle,b=hF({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:y,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:v}),S=b.cssClasses,k=b.cssProperties,w=fw(fw({transition:h&&i?"transform ".concat(s,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},g);return z.createElement("div",{tabIndex:-1,className:S,style:w,ref:function(C){n.wrapperNode=C}},u)}}])}(j.PureComponent),SF=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Oo={isSsr:SF()};function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(r),!0).forEach(function(n){zx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wj(n.key),n)}}function CF(e,t,r){return t&&PF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NF(e,t,r){return t=v0(t),OF(e,Uj()?Reflect.construct(t,r||[],v0(e).constructor):t.apply(e,r))}function OF(e,t){if(t&&(kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MF(e)}function MF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uj=function(){return!!e})()}function v0(e){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v0(e)}function _F(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}function sy(e,t){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sy(e,t)}function zx(e,t,r){return t=Wj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wj(e){var t=AF(e,"string");return kl(t)=="symbol"?t:t+""}function AF(e,t){if(kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function TF(e){return e.dataKey}function EF(e,t){return z.isValidElement(e)?z.cloneElement(e,t):typeof e=="function"?z.createElement(e,t):z.createElement(sF,t)}var Vr=function(e){function t(){return jF(this,t),NF(this,t,arguments)}return _F(t,e),CF(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,p=a.offset,y=a.payload,m=a.payloadUniqBy,x=a.position,v=a.reverseDirection,g=a.useTranslate3d,b=a.viewBox,S=a.wrapperStyle,k=y??[];d&&k.length&&(k=Ej(y.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),m,TF));var w=k.length>0;return z.createElement(kF,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:i,coordinate:f,hasPayload:w,offset:p,position:x,reverseDirection:v,useTranslate3d:g,viewBox:b,wrapperStyle:S},EF(u,pw(pw({},this.props),{},{payload:k})))}}])}(j.PureComponent);zx(Vr,"displayName","Tooltip");zx(Vr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Oo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $F=ui,DF=function(){return $F.Date.now()},IF=DF,RF=/\s/;function LF(e){for(var t=e.length;t--&&RF.test(e.charAt(t)););return t}var BF=LF,FF=BF,zF=/^\s+/;function GF(e){return e&&e.slice(0,FF(e)+1).replace(zF,"")}var UF=GF,WF=UF,gw=Co,VF=Yl,mw=NaN,HF=/^[-+]0x[0-9a-f]+$/i,XF=/^0b[01]+$/i,KF=/^0o[0-7]+$/i,YF=parseInt;function qF(e){if(typeof e=="number")return e;if(VF(e))return mw;if(gw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=gw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=WF(e);var r=XF.test(e);return r||KF.test(e)?YF(e.slice(2),r?2:8):HF.test(e)?mw:+e}var Vj=qF,ZF=Co,mg=IF,yw=Vj,QF="Expected a function",JF=Math.max,ez=Math.min;function tz(e,t,r){var n,a,i,o,s,l,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(QF);t=yw(t)||0,ZF(r)&&(f=!!r.leading,d="maxWait"in r,i=d?JF(yw(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function p(w){var P=n,C=a;return n=a=void 0,u=w,o=e.apply(C,P),o}function y(w){return u=w,s=setTimeout(v,t),f?p(w):o}function m(w){var P=w-l,C=w-u,M=t-P;return d?ez(M,i-C):M}function x(w){var P=w-l,C=w-u;return l===void 0||P>=t||P<0||d&&C>=i}function v(){var w=mg();if(x(w))return g(w);s=setTimeout(v,m(w))}function g(w){return s=void 0,h&&n?p(w):(n=a=void 0,o)}function b(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function S(){return s===void 0?o:g(mg())}function k(){var w=mg(),P=x(w);if(n=arguments,a=this,l=w,P){if(s===void 0)return y(l);if(d)return clearTimeout(s),s=setTimeout(v,t),p(l)}return s===void 0&&(s=setTimeout(v,t)),o}return k.cancel=b,k.flush=S,k}var rz=tz,nz=rz,az=Co,iz="Expected a function";function oz(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(iz);return az(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),nz(e,t,{leading:n,maxWait:t,trailing:a})}var sz=oz;const Hj=Bt(sz);function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ed(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vw(Object(r),!0).forEach(function(n){lz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lz(e,t,r){return t=cz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cz(e){var t=uz(e,"string");return _u(t)=="symbol"?t:t+""}function uz(e,t){if(_u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fz(e,t){return gz(e)||pz(e,t)||hz(e,t)||dz()}function dz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hz(e,t){if(e){if(typeof e=="string")return xw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xw(e,t)}}function xw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function gz(e){if(Array.isArray(e))return e}var Ni=j.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,p=e.children,y=e.debounce,m=y===void 0?0:y,x=e.id,v=e.className,g=e.onResize,b=e.style,S=b===void 0?{}:b,k=j.useRef(null),w=j.useRef();w.current=g,j.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var P=j.useState({containerWidth:a.width,containerHeight:a.height}),C=fz(P,2),M=C[0],N=C[1],$=j.useCallback(function(A,D){N(function(R){var L=Math.round(A),T=Math.round(D);return R.containerWidth===L&&R.containerHeight===T?R:{containerWidth:L,containerHeight:T}})},[]);j.useEffect(function(){var A=function(I){var G,J=I[0].contentRect,K=J.width,F=J.height;$(K,F),(G=w.current)===null||G===void 0||G.call(w,K,F)};m>0&&(A=Hj(A,m,{trailing:!0,leading:!1}));var D=new ResizeObserver(A),R=k.current.getBoundingClientRect(),L=R.width,T=R.height;return $(L,T),D.observe(k.current),function(){D.disconnect()}},[$,m]);var _=j.useMemo(function(){var A=M.containerWidth,D=M.containerHeight;if(A<0||D<0)return null;Ci(qo(o)||qo(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Ci(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=qo(o)?A:o,L=qo(l)?D:l;r&&r>0&&(R?L=R/r:L&&(R=L*r),h&&L>h&&(L=h)),Ci(R>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,L,o,l,f,d,r);var T=!Array.isArray(p)&&Pi(p.type).endsWith("Chart");return z.Children.map(p,function(E){return z.isValidElement(E)?j.cloneElement(E,ed({width:R,height:L},T?{style:ed({height:"100%",width:"100%",maxHeight:L,maxWidth:R},E.props.style)}:{})):E})},[r,p,l,h,d,f,M,o]);return z.createElement("div",{id:x?"".concat(x):void 0,className:it("recharts-responsive-container",v),style:ed(ed({},S),{},{width:o,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:k},_)}),Gx=function(t){return null};Gx.displayName="Cell";function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(r),!0).forEach(function(n){mz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mz(e,t,r){return t=yz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yz(e){var t=vz(e,"string");return Au(t)=="symbol"?t:t+""}function vz(e,t){if(Au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ds={widthCache:{},cacheCount:0},xz=2e3,bz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ww="recharts_measurement_span";function wz(e){var t=ly({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Jc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Oo.isSsr)return{width:0,height:0};var n=wz(r),a=JSON.stringify({text:t,copyStyle:n});if(Ds.widthCache[a])return Ds.widthCache[a];try{var i=document.getElementById(ww);i||(i=document.createElement("span"),i.setAttribute("id",ww),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=ly(ly({},bz),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Ds.widthCache[a]=l,++Ds.cacheCount>xz&&(Ds.cacheCount=0,Ds.widthCache={}),l}catch{return{width:0,height:0}}},kz=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function x0(e,t){return Cz(e)||Pz(e,t)||jz(e,t)||Sz()}function Sz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jz(e,t){if(e){if(typeof e=="string")return kw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kw(e,t)}}function kw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Cz(e){if(Array.isArray(e))return e}function Nz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mz(n.key),n)}}function Oz(e,t,r){return t&&Sw(e.prototype,t),r&&Sw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mz(e){var t=_z(e,"string");return Tu(t)=="symbol"?t:t+""}function _z(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Pw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Az=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Xj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ez=Object.keys(Xj),Zs="NaN";function $z(e,t){return e*Xj[t]}var td=function(){function e(t,r){Nz(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Az.test(r)&&(this.num=NaN,this.unit=""),Ez.includes(r)&&(this.num=$z(t,r),this.unit="px")}return Oz(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Tz.exec(r))!==null&&n!==void 0?n:[],i=x0(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function Kj(e){if(e.includes(Zs))return Zs;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=jw.exec(t))!==null&&r!==void 0?r:[],a=x0(n,4),i=a[1],o=a[2],s=a[3],l=td.parse(i??""),u=td.parse(s??""),f=o==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return Zs;t=t.replace(jw,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=Pw.exec(t))!==null&&d!==void 0?d:[],p=x0(h,4),y=p[1],m=p[2],x=p[3],v=td.parse(y??""),g=td.parse(x??""),b=m==="+"?v.add(g):v.subtract(g);if(b.isNaN())return Zs;t=t.replace(Pw,b.toString())}return t}var Cw=/\(([^()]*)\)/;function Dz(e){for(var t=e;t.includes("(");){var r=Cw.exec(t),n=x0(r,2),a=n[1];t=t.replace(Cw,Kj(a))}return t}function Iz(e){var t=e.replace(/\s+/g,"");return t=Dz(t),t=Kj(t),t}function Rz(e){try{return Iz(e)}catch{return Zs}}function yg(e){var t=Rz(e.slice(5,-1));return t===Zs?"":t}var Lz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Bz=["dx","dy","angle","className","breakAll"];function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(this,arguments)}function Nw(e,t){if(e==null)return{};var r=Fz(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ow(e,t){return Wz(e)||Uz(e,t)||Gz(e,t)||zz()}function zz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gz(e,t){if(e){if(typeof e=="string")return Mw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mw(e,t)}}function Mw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Uz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Wz(e){if(Array.isArray(e))return e}var Yj=/[ \f\n\r\t\v\u2028\u2029]+/,qj=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];We(r)||(n?i=r.toString().split(""):i=r.toString().split(Yj));var o=i.map(function(l){return{word:l,width:Jc(l,a).width}}),s=n?0:Jc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Vz=function(t,r,n,a,i){var o=t.maxLines,s=t.children,l=t.style,u=t.breakAll,f=ge(o),d=s,h=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(L,T){var E=T.word,I=T.width,G=L[L.length-1];if(G&&(a==null||i||G.width+I+n<Number(a)))G.words.push(E),G.width+=I+n;else{var J={words:[E],width:I};L.push(J)}return L},[])},p=h(r),y=function(R){return R.reduce(function(L,T){return L.width>T.width?L:T})};if(!f)return p;for(var m="",x=function(R){var L=d.slice(0,R),T=qj({breakAll:u,style:l,children:L+m}).wordsWithComputedWidth,E=h(T),I=E.length>o||y(E).width>Number(a);return[I,E]},v=0,g=d.length-1,b=0,S;v<=g&&b<=d.length-1;){var k=Math.floor((v+g)/2),w=k-1,P=x(w),C=Ow(P,2),M=C[0],N=C[1],$=x(k),_=Ow($,1),A=_[0];if(!M&&!A&&(v=k+1),M&&A&&(g=k-1),!M&&A){S=N;break}b++}return S||p},_w=function(t){var r=We(t)?[]:t.toString().split(Yj);return[{words:r}]},Hz=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!Oo.isSsr){var l,u,f=qj({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,u=h}else return _w(a);return Vz({breakAll:o,children:a,maxLines:s,style:i},l,u,r,n)}return _w(a)},Aw="#808080",b0=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,y=t.verticalAnchor,m=y===void 0?"end":y,x=t.fill,v=x===void 0?Aw:x,g=Nw(t,Lz),b=j.useMemo(function(){return Hz({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),S=g.dx,k=g.dy,w=g.angle,P=g.className,C=g.breakAll,M=Nw(g,Bz);if(!Rr(n)||!Rr(i))return null;var N=n+(ge(S)?S:0),$=i+(ge(k)?k:0),_;switch(m){case"start":_=yg("calc(".concat(u,")"));break;case"middle":_=yg("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:_=yg("calc(".concat(b.length-1," * -").concat(s,")"));break}var A=[];if(d){var D=b[0].width,R=g.width;A.push("scale(".concat((ge(R)?R/D:1)/D,")"))}return w&&A.push("rotate(".concat(w,", ").concat(N,", ").concat($,")")),A.length&&(M.transform=A.join(" ")),z.createElement("text",cy({},Xe(M,!0),{x:N,y:$,className:it("recharts-text",P),textAnchor:p,fill:v.includes("url")?Aw:v}),b.map(function(L,T){var E=L.words.join(C?"":" ");return z.createElement("tspan",{x:N,dy:T===0?_:s,key:"".concat(E,"-").concat(T)},E)}))};function xo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xz(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ux(e){let t,r,n;e.length!==2?(t=xo,r=(s,l)=>xo(e(s),l),n=(s,l)=>e(s)-l):(t=e===xo||e===Xz?e:Kz,r=e,n=e);function a(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){const d=a(s,l,u,f-1);return d>u&&n(s[d-1],l)>-n(s[d],l)?d-1:d}return{left:a,center:o,right:i}}function Kz(){return 0}function Zj(e){return e===null?NaN:+e}function*Yz(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const qz=Ux(xo),gf=qz.right;Ux(Zj).center;class Tw extends Map{constructor(t,r=Jz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Ew(this,t))}has(t){return super.has(Ew(this,t))}set(t,r){return super.set(Zz(this,t),r)}delete(t){return super.delete(Qz(this,t))}}function Ew({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Zz({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Qz({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Jz(e){return e!==null&&typeof e=="object"?e.valueOf():e}function eG(e=xo){if(e===xo)return Qj;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Qj(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const tG=Math.sqrt(50),rG=Math.sqrt(10),nG=Math.sqrt(2);function w0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=tG?10:i>=rG?5:i>=nG?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?w0(e,t,r*2):[s,l,u]}function uy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?w0(t,e,r):w0(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function fy(e,t,r){return t=+t,e=+e,r=+r,w0(e,t,r)[2]}function dy(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?fy(t,e,r):fy(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function $w(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Dw(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Jj(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Qj:eG(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/l+h)),y=Math.min(n,Math.floor(t+(l-u)*d/l+h));Jj(e,t,p,y,a)}const i=e[t];let o=r,s=n;for(_c(e,r,t),a(e[n],i)>0&&_c(e,r,n);o<s;){for(_c(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?_c(e,r,s):(++s,_c(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function _c(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function aG(e,t,r){if(e=Float64Array.from(Yz(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Dw(e);if(t>=1)return $w(e);var n,a=(n-1)*t,i=Math.floor(a),o=$w(Jj(e,i).subarray(0,i+1)),s=Dw(e.subarray(i+1));return o+(s-o)*(a-i)}}function iG(e,t,r=Zj){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function oG(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Ca(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hy=Symbol("implicit");function Wx(){var e=new Tw,t=[],r=[],n=hy;function a(i){let o=e.get(i);if(o===void 0){if(n!==hy)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Tw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Wx(t,r).unknown(n)},Ca.apply(a,arguments),a}function Eu(){var e=Wx().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,p=a<n,y=p?a:n,m=p?n:a;i=(m-y)/Math.max(1,h-l+u*2),s&&(i=Math.floor(i)),y+=(m-y-i*(h-l))*f,o=i*(1-l),s&&(y=Math.round(y),o=Math.round(o));var x=oG(h).map(function(v){return y+i*v});return r(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return Eu(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},Ca.apply(d(),arguments)}function eP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eP(t())},e}function eu(){return eP(Eu.apply(null,arguments).paddingInner(1))}function Vx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function mf(){}var $u=.7,k0=1/$u,ll="\\s*([+-]?\\d+)\\s*",Du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sG=/^#([0-9a-f]{3,8})$/,lG=new RegExp(`^rgb\\(${ll},${ll},${ll}\\)$`),cG=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),uG=new RegExp(`^rgba\\(${ll},${ll},${ll},${Du}\\)$`),fG=new RegExp(`^rgba\\(${ri},${ri},${ri},${Du}\\)$`),dG=new RegExp(`^hsl\\(${Du},${ri},${ri}\\)$`),hG=new RegExp(`^hsla\\(${Du},${ri},${ri},${Du}\\)$`),Iw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vx(mf,Iu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rw,formatHex:Rw,formatHex8:pG,formatHsl:gG,formatRgb:Lw,toString:Lw});function Rw(){return this.rgb().formatHex()}function pG(){return this.rgb().formatHex8()}function gG(){return rP(this).formatHsl()}function Lw(){return this.rgb().formatRgb()}function Iu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Bw(t):r===3?new $n(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?rd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?rd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lG.exec(e))?new $n(t[1],t[2],t[3],1):(t=cG.exec(e))?new $n(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uG.exec(e))?rd(t[1],t[2],t[3],t[4]):(t=fG.exec(e))?rd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dG.exec(e))?Gw(t[1],t[2]/100,t[3]/100,1):(t=hG.exec(e))?Gw(t[1],t[2]/100,t[3]/100,t[4]):Iw.hasOwnProperty(e)?Bw(Iw[e]):e==="transparent"?new $n(NaN,NaN,NaN,0):null}function Bw(e){return new $n(e>>16&255,e>>8&255,e&255,1)}function rd(e,t,r,n){return n<=0&&(e=t=r=NaN),new $n(e,t,r,n)}function mG(e){return e instanceof mf||(e=Iu(e)),e?(e=e.rgb(),new $n(e.r,e.g,e.b,e.opacity)):new $n}function py(e,t,r,n){return arguments.length===1?mG(e):new $n(e,t,r,n??1)}function $n(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Vx($n,py,tP(mf,{brighter(e){return e=e==null?k0:Math.pow(k0,e),new $n(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$u:Math.pow($u,e),new $n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $n(ns(this.r),ns(this.g),ns(this.b),S0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fw,formatHex:Fw,formatHex8:yG,formatRgb:zw,toString:zw}));function Fw(){return`#${Zo(this.r)}${Zo(this.g)}${Zo(this.b)}`}function yG(){return`#${Zo(this.r)}${Zo(this.g)}${Zo(this.b)}${Zo((isNaN(this.opacity)?1:this.opacity)*255)}`}function zw(){const e=S0(this.opacity);return`${e===1?"rgb(":"rgba("}${ns(this.r)}, ${ns(this.g)}, ${ns(this.b)}${e===1?")":`, ${e})`}`}function S0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ns(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zo(e){return e=ns(e),(e<16?"0":"")+e.toString(16)}function Gw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new La(e,t,r,n)}function rP(e){if(e instanceof La)return new La(e.h,e.s,e.l,e.opacity);if(e instanceof mf||(e=Iu(e)),!e)return new La;if(e instanceof La)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new La(o,s,l,e.opacity)}function vG(e,t,r,n){return arguments.length===1?rP(e):new La(e,t,r,n??1)}function La(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Vx(La,vG,tP(mf,{brighter(e){return e=e==null?k0:Math.pow(k0,e),new La(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$u:Math.pow($u,e),new La(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new $n(vg(e>=240?e-240:e+120,a,n),vg(e,a,n),vg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new La(Uw(this.h),nd(this.s),nd(this.l),S0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=S0(this.opacity);return`${e===1?"hsl(":"hsla("}${Uw(this.h)}, ${nd(this.s)*100}%, ${nd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Uw(e){return e=(e||0)%360,e<0?e+360:e}function nd(e){return Math.max(0,Math.min(1,e||0))}function vg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Hx=e=>()=>e;function xG(e,t){return function(r){return e+r*t}}function bG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function wG(e){return(e=+e)==1?nP:function(t,r){return r-t?bG(t,r,e):Hx(isNaN(t)?r:t)}}function nP(e,t){var r=t-e;return r?xG(e,r):Hx(isNaN(e)?t:e)}const Ww=function e(t){var r=wG(t);function n(a,i){var o=r((a=py(a)).r,(i=py(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=nP(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function kG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function SG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=ac(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function PG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function j0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function CG(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=ac(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var gy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xg=new RegExp(gy.source,"g");function NG(e){return function(){return e}}function OG(e){return function(t){return e(t)+""}}function MG(e,t){var r=gy.lastIndex=xg.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=gy.exec(e))&&(a=xg.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:j0(n,a)})),r=xg.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?OG(l[0].x):NG(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function ac(e,t){var r=typeof t,n;return t==null||r==="boolean"?Hx(t):(r==="number"?j0:r==="string"?(n=Iu(t))?(t=n,Ww):MG:t instanceof Iu?Ww:t instanceof Date?PG:SG(t)?kG:Array.isArray(t)?jG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?CG:j0)(e,t)}function Xx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function _G(e,t){t===void 0&&(t=e,e=ac);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function AG(e){return function(){return e}}function P0(e){return+e}var Vw=[0,1];function Cn(e){return e}function my(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:AG(isNaN(t)?NaN:.5)}function TG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function EG(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=my(a,n),i=r(o,i)):(n=my(n,a),i=r(i,o)),function(s){return i(n(s))}}function $G(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=my(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=gf(e,s,1,n)-1;return i[l](a[l](s))}}function yf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jh(){var e=Vw,t=Vw,r=ac,n,a,i,o=Cn,s,l,u;function f(){var h=Math.min(e.length,t.length);return o!==Cn&&(o=TG(e[0],e[h-1])),s=h>2?$G:EG,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=s(e.map(n),t,r)))(n(o(h)))}return d.invert=function(h){return o(a((u||(u=s(t,e.map(n),j0)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,P0),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=Xx,f()},d.clamp=function(h){return arguments.length?(o=h?!0:Cn,f()):o!==Cn},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,p){return n=h,a=p,f()}}function Kx(){return Jh()(Cn,Cn)}function DG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function C0(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Sl(e){return e=C0(Math.abs(e)),e?e[1]:NaN}function IG(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function RG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var LG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ru(e){if(!(t=LG.exec(e)))throw new Error("invalid format: "+e);var t;return new Yx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ru.prototype=Yx.prototype;function Yx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function BG(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var N0;function FG(e,t){var r=C0(e,t);if(!r)return N0=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(N0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+C0(e,Math.max(0,t+i-1))[0]}function Hw(e,t){var r=C0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Xw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:DG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Hw(e*100,t),r:Hw,s:FG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Kw(e){return e}var Yw=Array.prototype.map,qw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zG(e){var t=e.grouping===void 0||e.thousands===void 0?Kw:IG(Yw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Kw:RG(Yw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d,h){d=Ru(d);var p=d.fill,y=d.align,m=d.sign,x=d.symbol,v=d.zero,g=d.width,b=d.comma,S=d.precision,k=d.trim,w=d.type;w==="n"?(b=!0,w="g"):Xw[w]||(S===void 0&&(S=12),k=!0,w="g"),(v||p==="0"&&y==="=")&&(v=!0,p="0",y="=");var P=(h&&h.prefix!==void 0?h.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),C=(x==="$"?n:/[%p]/.test(w)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),M=Xw[w],N=/[defgprs%]/.test(w);S=S===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function $(_){var A=P,D=C,R,L,T;if(w==="c")D=M(_)+D,_="";else{_=+_;var E=_<0||1/_<0;if(_=isNaN(_)?l:M(Math.abs(_),S),k&&(_=BG(_)),E&&+_==0&&m!=="+"&&(E=!1),A=(E?m==="("?m:s:m==="-"||m==="("?"":m)+A,D=(w==="s"&&!isNaN(_)&&N0!==void 0?qw[8+N0/3]:"")+D+(E&&m==="("?")":""),N){for(R=-1,L=_.length;++R<L;)if(T=_.charCodeAt(R),48>T||T>57){D=(T===46?a+_.slice(R+1):_.slice(R))+D,_=_.slice(0,R);break}}}b&&!v&&(_=t(_,1/0));var I=A.length+_.length+D.length,G=I<g?new Array(g-I+1).join(p):"";switch(b&&v&&(_=t(G+_,G.length?g-D.length:1/0),G=""),y){case"<":_=A+_+D+G;break;case"=":_=A+G+_+D;break;case"^":_=G.slice(0,I=G.length>>1)+A+_+D+G.slice(I);break;default:_=G+A+_+D;break}return i(_)}return $.toString=function(){return d+""},$}function f(d,h){var p=Math.max(-8,Math.min(8,Math.floor(Sl(h)/3)))*3,y=Math.pow(10,-p),m=u((d=Ru(d),d.type="f",d),{suffix:qw[8+p/3]});return function(x){return m(y*x)}}return{format:u,formatPrefix:f}}var ad,qx,aP;GG({thousands:",",grouping:[3],currency:["$",""]});function GG(e){return ad=zG(e),qx=ad.format,aP=ad.formatPrefix,ad}function UG(e){return Math.max(0,-Sl(Math.abs(e)))}function WG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sl(t)/3)))*3-Sl(Math.abs(e)))}function VG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sl(t)-Sl(e))+1}function iP(e,t,r,n){var a=dy(e,t,r),i;switch(n=Ru(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=WG(a,o))&&(n.precision=i),aP(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=VG(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=UG(a))&&(n.precision=i-(n.type==="%")*2);break}}return qx(n)}function Mo(e){var t=e.domain;return e.ticks=function(r){var n=t();return uy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return iP(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=fy(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function O0(){var e=Kx();return e.copy=function(){return yf(e,O0())},Ca.apply(e,arguments),Mo(e)}function oP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,P0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return oP(e).unknown(t)},e=arguments.length?Array.from(e,P0):[0,1],Mo(r)}function sP(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Zw(e){return Math.log(e)}function Qw(e){return Math.exp(e)}function HG(e){return-Math.log(-e)}function XG(e){return-Math.exp(-e)}function KG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function YG(e){return e===10?KG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Jw(e){return(t,r)=>-e(-t,r)}function Zx(e){const t=e(Zw,Qw),r=t.domain;let n=10,a,i;function o(){return a=qG(n),i=YG(n),r()[0]<0?(a=Jw(a),i=Jw(i),e(HG,XG)):e(Zw,Qw),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),p=a(f),y,m;const x=s==null?10:+s;let v=[];if(!(n%1)&&p-h<x){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(y=1;y<n;++y)if(m=h<0?y/i(-h):y*i(h),!(m<u)){if(m>f)break;v.push(m)}}else for(;h<=p;++h)for(y=n-1;y>=1;--y)if(m=h>0?y/i(-h):y*i(h),!(m<u)){if(m>f)break;v.push(m)}v.length*2<x&&(v=uy(u,f,x))}else v=uy(h,p,Math.min(p-h,x)).map(i);return d?v.reverse():v},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Ru(l)).precision==null&&(l.trim=!0),l=qx(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?l(f):""}},t.nice=()=>r(sP(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function lP(){const e=Zx(Jh()).domain([1,10]);return e.copy=()=>yf(e,lP()).base(e.base()),Ca.apply(e,arguments),e}function ek(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Qx(e){var t=1,r=e(ek(t),tk(t));return r.constant=function(n){return arguments.length?e(ek(t=+n),tk(t)):t},Mo(r)}function cP(){var e=Qx(Jh());return e.copy=function(){return yf(e,cP()).constant(e.constant())},Ca.apply(e,arguments)}function rk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ZG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function QG(e){return e<0?-e*e:e*e}function Jx(e){var t=e(Cn,Cn),r=1;function n(){return r===1?e(Cn,Cn):r===.5?e(ZG,QG):e(rk(r),rk(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Mo(t)}function e1(){var e=Jx(Jh());return e.copy=function(){return yf(e,e1()).exponent(e.exponent())},Ca.apply(e,arguments),e}function JG(){return e1.apply(null,arguments).exponent(.5)}function nk(e){return Math.sign(e)*e*e}function eU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function uP(){var e=Kx(),t=[0,1],r=!1,n;function a(i){var o=eU(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(nk(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,P0)).map(nk)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return uP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ca.apply(a,arguments),Mo(a)}function fP(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=iG(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[gf(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(xo),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return fP().domain(e).range(t).unknown(n)},Ca.apply(i,arguments)}function dP(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[gf(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return dP().domain([e,t]).range(a).unknown(i)},Ca.apply(Mo(o),arguments)}function hP(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[gf(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return hP().domain(e).range(t).unknown(r)},Ca.apply(a,arguments)}const bg=new Date,wg=new Date;function Br(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>Br(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(bg.setTime(+i),wg.setTime(+o),e(bg),e(wg),Math.floor(r(bg,wg))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const M0=Br(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);M0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Br(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):M0);M0.range;const wi=1e3,va=wi*60,ki=va*60,Ei=ki*24,t1=Ei*7,ak=Ei*30,kg=Ei*365,Qo=Br(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wi)},(e,t)=>(t-e)/wi,e=>e.getUTCSeconds());Qo.range;const r1=Br(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wi)},(e,t)=>{e.setTime(+e+t*va)},(e,t)=>(t-e)/va,e=>e.getMinutes());r1.range;const n1=Br(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*va)},(e,t)=>(t-e)/va,e=>e.getUTCMinutes());n1.range;const a1=Br(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wi-e.getMinutes()*va)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getHours());a1.range;const i1=Br(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getUTCHours());i1.range;const vf=Br(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*va)/Ei,e=>e.getDate()-1);vf.range;const ep=Br(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ei,e=>e.getUTCDate()-1);ep.range;const pP=Br(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ei,e=>Math.floor(e/Ei));pP.range;function Os(e){return Br(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*va)/t1)}const tp=Os(0),_0=Os(1),tU=Os(2),rU=Os(3),jl=Os(4),nU=Os(5),aU=Os(6);tp.range;_0.range;tU.range;rU.range;jl.range;nU.range;aU.range;function Ms(e){return Br(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/t1)}const rp=Ms(0),A0=Ms(1),iU=Ms(2),oU=Ms(3),Pl=Ms(4),sU=Ms(5),lU=Ms(6);rp.range;A0.range;iU.range;oU.range;Pl.range;sU.range;lU.range;const o1=Br(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());o1.range;const s1=Br(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());s1.range;const $i=Br(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$i.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Br(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});$i.range;const Di=Br(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Di.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Br(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Di.range;function gP(e,t,r,n,a,i){const o=[[Qo,1,wi],[Qo,5,5*wi],[Qo,15,15*wi],[Qo,30,30*wi],[i,1,va],[i,5,5*va],[i,15,15*va],[i,30,30*va],[a,1,ki],[a,3,3*ki],[a,6,6*ki],[a,12,12*ki],[n,1,Ei],[n,2,2*Ei],[r,1,t1],[t,1,ak],[t,3,3*ak],[e,1,kg]];function s(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:l(u,f,d),y=p?p.range(u,+f+1):[];return h?y.reverse():y}function l(u,f,d){const h=Math.abs(f-u)/d,p=Ux(([,,x])=>x).right(o,h);if(p===o.length)return e.every(dy(u/kg,f/kg,d));if(p===0)return M0.every(Math.max(dy(u,f,d),1));const[y,m]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return y.every(m)}return[s,l]}const[cU,uU]=gP(Di,s1,rp,pP,i1,n1),[fU,dU]=gP($i,o1,tp,vf,a1,r1);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ac(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function hU(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=Tc(a),f=Ec(a),d=Tc(i),h=Ec(i),p=Tc(o),y=Ec(o),m=Tc(s),x=Ec(s),v=Tc(l),g=Ec(l),b={a:T,A:E,b:I,B:G,c:null,d:uk,e:uk,f:IU,g:HU,G:KU,H:EU,I:$U,j:DU,L:mP,m:RU,M:LU,p:J,q:K,Q:hk,s:pk,S:BU,u:FU,U:zU,V:GU,w:UU,W:WU,x:null,X:null,y:VU,Y:XU,Z:YU,"%":dk},S={a:F,A:ee,b:se,B:Y,c:null,d:fk,e:fk,f:JU,g:cW,G:fW,H:qU,I:ZU,j:QU,L:vP,m:eW,M:tW,p:le,q:H,Q:hk,s:pk,S:rW,u:nW,U:aW,V:iW,w:oW,W:sW,x:null,X:null,y:lW,Y:uW,Z:dW,"%":dk},k={a:N,A:$,b:_,B:A,c:D,d:lk,e:lk,f:MU,g:sk,G:ok,H:ck,I:ck,j:PU,L:OU,m:jU,M:CU,p:M,q:SU,Q:AU,s:TU,S:NU,u:vU,U:xU,V:bU,w:yU,W:wU,x:R,X:L,y:sk,Y:ok,Z:kU,"%":_U};b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),S.x=w(r,S),S.X=w(n,S),S.c=w(t,S);function w(X,oe){return function(ue){var V=[],pe=-1,q=0,te=X.length,ye,me,Ue;for(ue instanceof Date||(ue=new Date(+ue));++pe<te;)X.charCodeAt(pe)===37&&(V.push(X.slice(q,pe)),(me=ik[ye=X.charAt(++pe)])!=null?ye=X.charAt(++pe):me=ye==="e"?" ":"0",(Ue=oe[ye])&&(ye=Ue(ue,me)),V.push(ye),q=pe+1);return V.push(X.slice(q,pe)),V.join("")}}function P(X,oe){return function(ue){var V=Ac(1900,void 0,1),pe=C(V,X,ue+="",0),q,te;if(pe!=ue.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(oe&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(q=jg(Ac(V.y,0,1)),te=q.getUTCDay(),q=te>4||te===0?A0.ceil(q):A0(q),q=ep.offset(q,(V.V-1)*7),V.y=q.getUTCFullYear(),V.m=q.getUTCMonth(),V.d=q.getUTCDate()+(V.w+6)%7):(q=Sg(Ac(V.y,0,1)),te=q.getDay(),q=te>4||te===0?_0.ceil(q):_0(q),q=vf.offset(q,(V.V-1)*7),V.y=q.getFullYear(),V.m=q.getMonth(),V.d=q.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),te="Z"in V?jg(Ac(V.y,0,1)).getUTCDay():Sg(Ac(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(te+5)%7:V.w+V.U*7-(te+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,jg(V)):Sg(V)}}function C(X,oe,ue,V){for(var pe=0,q=oe.length,te=ue.length,ye,me;pe<q;){if(V>=te)return-1;if(ye=oe.charCodeAt(pe++),ye===37){if(ye=oe.charAt(pe++),me=k[ye in ik?oe.charAt(pe++):ye],!me||(V=me(X,ue,V))<0)return-1}else if(ye!=ue.charCodeAt(V++))return-1}return V}function M(X,oe,ue){var V=u.exec(oe.slice(ue));return V?(X.p=f.get(V[0].toLowerCase()),ue+V[0].length):-1}function N(X,oe,ue){var V=p.exec(oe.slice(ue));return V?(X.w=y.get(V[0].toLowerCase()),ue+V[0].length):-1}function $(X,oe,ue){var V=d.exec(oe.slice(ue));return V?(X.w=h.get(V[0].toLowerCase()),ue+V[0].length):-1}function _(X,oe,ue){var V=v.exec(oe.slice(ue));return V?(X.m=g.get(V[0].toLowerCase()),ue+V[0].length):-1}function A(X,oe,ue){var V=m.exec(oe.slice(ue));return V?(X.m=x.get(V[0].toLowerCase()),ue+V[0].length):-1}function D(X,oe,ue){return C(X,t,oe,ue)}function R(X,oe,ue){return C(X,r,oe,ue)}function L(X,oe,ue){return C(X,n,oe,ue)}function T(X){return o[X.getDay()]}function E(X){return i[X.getDay()]}function I(X){return l[X.getMonth()]}function G(X){return s[X.getMonth()]}function J(X){return a[+(X.getHours()>=12)]}function K(X){return 1+~~(X.getMonth()/3)}function F(X){return o[X.getUTCDay()]}function ee(X){return i[X.getUTCDay()]}function se(X){return l[X.getUTCMonth()]}function Y(X){return s[X.getUTCMonth()]}function le(X){return a[+(X.getUTCHours()>=12)]}function H(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var oe=w(X+="",b);return oe.toString=function(){return X},oe},parse:function(X){var oe=P(X+="",!1);return oe.toString=function(){return X},oe},utcFormat:function(X){var oe=w(X+="",S);return oe.toString=function(){return X},oe},utcParse:function(X){var oe=P(X+="",!0);return oe.toString=function(){return X},oe}}}var ik={"-":"",_:" ",0:"0"},Kr=/^\s*\d+/,pU=/^%/,gU=/[\\^$*+?|[\]().{}]/g;function mt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function mU(e){return e.replace(gU,"\\$&")}function Tc(e){return new RegExp("^(?:"+e.map(mU).join("|")+")","i")}function Ec(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yU(e,t,r){var n=Kr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function vU(e,t,r){var n=Kr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function xU(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function bU(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function wU(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ok(e,t,r){var n=Kr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function sk(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kU(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function SU(e,t,r){var n=Kr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function jU(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function lk(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function PU(e,t,r){var n=Kr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function ck(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function CU(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function NU(e,t,r){var n=Kr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function OU(e,t,r){var n=Kr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function MU(e,t,r){var n=Kr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _U(e,t,r){var n=pU.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function AU(e,t,r){var n=Kr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function TU(e,t,r){var n=Kr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function uk(e,t){return mt(e.getDate(),t,2)}function EU(e,t){return mt(e.getHours(),t,2)}function $U(e,t){return mt(e.getHours()%12||12,t,2)}function DU(e,t){return mt(1+vf.count($i(e),e),t,3)}function mP(e,t){return mt(e.getMilliseconds(),t,3)}function IU(e,t){return mP(e,t)+"000"}function RU(e,t){return mt(e.getMonth()+1,t,2)}function LU(e,t){return mt(e.getMinutes(),t,2)}function BU(e,t){return mt(e.getSeconds(),t,2)}function FU(e){var t=e.getDay();return t===0?7:t}function zU(e,t){return mt(tp.count($i(e)-1,e),t,2)}function yP(e){var t=e.getDay();return t>=4||t===0?jl(e):jl.ceil(e)}function GU(e,t){return e=yP(e),mt(jl.count($i(e),e)+($i(e).getDay()===4),t,2)}function UU(e){return e.getDay()}function WU(e,t){return mt(_0.count($i(e)-1,e),t,2)}function VU(e,t){return mt(e.getFullYear()%100,t,2)}function HU(e,t){return e=yP(e),mt(e.getFullYear()%100,t,2)}function XU(e,t){return mt(e.getFullYear()%1e4,t,4)}function KU(e,t){var r=e.getDay();return e=r>=4||r===0?jl(e):jl.ceil(e),mt(e.getFullYear()%1e4,t,4)}function YU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mt(t/60|0,"0",2)+mt(t%60,"0",2)}function fk(e,t){return mt(e.getUTCDate(),t,2)}function qU(e,t){return mt(e.getUTCHours(),t,2)}function ZU(e,t){return mt(e.getUTCHours()%12||12,t,2)}function QU(e,t){return mt(1+ep.count(Di(e),e),t,3)}function vP(e,t){return mt(e.getUTCMilliseconds(),t,3)}function JU(e,t){return vP(e,t)+"000"}function eW(e,t){return mt(e.getUTCMonth()+1,t,2)}function tW(e,t){return mt(e.getUTCMinutes(),t,2)}function rW(e,t){return mt(e.getUTCSeconds(),t,2)}function nW(e){var t=e.getUTCDay();return t===0?7:t}function aW(e,t){return mt(rp.count(Di(e)-1,e),t,2)}function xP(e){var t=e.getUTCDay();return t>=4||t===0?Pl(e):Pl.ceil(e)}function iW(e,t){return e=xP(e),mt(Pl.count(Di(e),e)+(Di(e).getUTCDay()===4),t,2)}function oW(e){return e.getUTCDay()}function sW(e,t){return mt(A0.count(Di(e)-1,e),t,2)}function lW(e,t){return mt(e.getUTCFullYear()%100,t,2)}function cW(e,t){return e=xP(e),mt(e.getUTCFullYear()%100,t,2)}function uW(e,t){return mt(e.getUTCFullYear()%1e4,t,4)}function fW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Pl(e):Pl.ceil(e),mt(e.getUTCFullYear()%1e4,t,4)}function dW(){return"+0000"}function dk(){return"%"}function hk(e){return+e}function pk(e){return Math.floor(+e/1e3)}var Is,bP,wP;hW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hW(e){return Is=hU(e),bP=Is.format,Is.parse,wP=Is.utcFormat,Is.utcParse,Is}function pW(e){return new Date(e)}function gW(e){return e instanceof Date?+e:+new Date(+e)}function l1(e,t,r,n,a,i,o,s,l,u){var f=Kx(),d=f.invert,h=f.domain,p=u(".%L"),y=u(":%S"),m=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),g=u("%b %d"),b=u("%B"),S=u("%Y");function k(w){return(l(w)<w?p:s(w)<w?y:o(w)<w?m:i(w)<w?x:n(w)<w?a(w)<w?v:g:r(w)<w?b:S)(w)}return f.invert=function(w){return new Date(d(w))},f.domain=function(w){return arguments.length?h(Array.from(w,gW)):h().map(pW)},f.ticks=function(w){var P=h();return e(P[0],P[P.length-1],w??10)},f.tickFormat=function(w,P){return P==null?k:u(P)},f.nice=function(w){var P=h();return(!w||typeof w.range!="function")&&(w=t(P[0],P[P.length-1],w??10)),w?h(sP(P,w)):f},f.copy=function(){return yf(f,l1(e,t,r,n,a,i,o,s,l,u))},f}function mW(){return Ca.apply(l1(fU,dU,$i,o1,tp,vf,a1,r1,Qo,bP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yW(){return Ca.apply(l1(cU,uU,Di,s1,rp,ep,i1,n1,Qo,wP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function np(){var e=0,t=1,r,n,a,i,o=Cn,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var p,y;return arguments.length?([p,y]=h,o=d(p,y),u):[o(0),o(1)]}}return u.range=f(ac),u.rangeRound=f(Xx),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function _o(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kP(){var e=Mo(np()(Cn));return e.copy=function(){return _o(e,kP())},Bi.apply(e,arguments)}function SP(){var e=Zx(np()).domain([1,10]);return e.copy=function(){return _o(e,SP()).base(e.base())},Bi.apply(e,arguments)}function jP(){var e=Qx(np());return e.copy=function(){return _o(e,jP()).constant(e.constant())},Bi.apply(e,arguments)}function c1(){var e=Jx(np());return e.copy=function(){return _o(e,c1()).exponent(e.exponent())},Bi.apply(e,arguments)}function vW(){return c1.apply(null,arguments).exponent(.5)}function PP(){var e=[],t=Cn;function r(n){if(n!=null&&!isNaN(n=+n))return t((gf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(xo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>aG(e,i/n))},r.copy=function(){return PP(t).domain(e)},Bi.apply(r,arguments)}function ap(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=Cn,f,d=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+f(m))-i)*(n*m<n*i?s:l),u(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(u=m,p):u};function y(m){return function(x){var v,g,b;return arguments.length?([v,g,b]=x,u=_G(m,[v,g,b]),p):[u(0),u(.5),u(1)]}}return p.range=y(ac),p.rangeRound=y(Xx),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return f=m,a=m(e),i=m(t),o=m(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function CP(){var e=Mo(ap()(Cn));return e.copy=function(){return _o(e,CP())},Bi.apply(e,arguments)}function NP(){var e=Zx(ap()).domain([.1,1,10]);return e.copy=function(){return _o(e,NP()).base(e.base())},Bi.apply(e,arguments)}function OP(){var e=Qx(ap());return e.copy=function(){return _o(e,OP()).constant(e.constant())},Bi.apply(e,arguments)}function u1(){var e=Jx(ap());return e.copy=function(){return _o(e,u1()).exponent(e.exponent())},Bi.apply(e,arguments)}function xW(){return u1.apply(null,arguments).exponent(.5)}const gk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Eu,scaleDiverging:CP,scaleDivergingLog:NP,scaleDivergingPow:u1,scaleDivergingSqrt:xW,scaleDivergingSymlog:OP,scaleIdentity:oP,scaleImplicit:hy,scaleLinear:O0,scaleLog:lP,scaleOrdinal:Wx,scalePoint:eu,scalePow:e1,scaleQuantile:fP,scaleQuantize:dP,scaleRadial:uP,scaleSequential:kP,scaleSequentialLog:SP,scaleSequentialPow:c1,scaleSequentialQuantile:PP,scaleSequentialSqrt:vW,scaleSequentialSymlog:jP,scaleSqrt:JG,scaleSymlog:cP,scaleThreshold:hP,scaleTime:mW,scaleUtc:yW,tickFormat:iP},Symbol.toStringTag,{value:"Module"}));var bW=Yl;function wW(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!bW(o):r(o,s)))var s=o,l=i}return l}var MP=wW;function kW(e,t){return e>t}var SW=kW,jW=MP,PW=SW,CW=nc;function NW(e){return e&&e.length?jW(e,CW,PW):void 0}var OW=NW;const no=Bt(OW);function MW(e,t){return e<t}var _W=MW,AW=MP,TW=_W,EW=nc;function $W(e){return e&&e.length?AW(e,EW,TW):void 0}var DW=$W;const ip=Bt(DW);var IW=jx,RW=No,LW=Bj,BW=zn;function FW(e,t){var r=BW(e)?IW:LW;return r(e,RW(t))}var zW=FW,GW=Rj,UW=zW;function WW(e,t){return GW(UW(e,t),1)}var VW=WW;const HW=Bt(VW);var XW=Lx;function KW(e,t){return XW(e,t)}var YW=KW;const vs=Bt(YW);var ic=1e9,qW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},d1,rr=!0,ja="[DecimalError] ",as=ja+"Invalid argument: ",f1=ja+"Exponent out of range: ",oc=Math.floor,Uo=Math.pow,ZW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zn,Ur=1e7,Yt=7,_P=9007199254740991,T0=oc(_P/Yt),Se={};Se.absoluteValue=Se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Se.comparedTo=Se.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Yt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Se.dividedBy=Se.div=function(e){return Oi(this,new this.constructor(e))};Se.dividedToIntegerBy=Se.idiv=function(e){var t=this,r=t.constructor;return Lt(Oi(t,new r(e),0,1),r.precision)};Se.equals=Se.eq=function(e){return!this.cmp(e)};Se.exponent=function(){return Mr(this)};Se.greaterThan=Se.gt=function(e){return this.cmp(e)>0};Se.greaterThanOrEqualTo=Se.gte=function(e){return this.cmp(e)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(e){return this.cmp(e)<0};Se.lessThanOrEqualTo=Se.lte=function(e){return this.cmp(e)<1};Se.logarithm=Se.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Zn))throw Error(ja+"NaN");if(r.s<1)throw Error(ja+(r.s?"NaN":"-Infinity"));return r.eq(Zn)?new n(0):(rr=!1,t=Oi(Lu(r,i),Lu(e,i),i),rr=!0,Lt(t,a))};Se.minus=Se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EP(t,e):AP(t,(e.s=-e.s,e))};Se.modulo=Se.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ja+"NaN");return r.s?(rr=!1,t=Oi(r,e,0,1).times(e),rr=!0,r.minus(t)):Lt(new n(r),a)};Se.naturalExponential=Se.exp=function(){return TP(this)};Se.naturalLogarithm=Se.ln=function(){return Lu(this)};Se.negated=Se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Se.plus=Se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?AP(t,e):EP(t,(e.s=-e.s,e))};Se.precision=Se.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(as+e);if(t=Mr(a)+1,n=a.d.length-1,r=n*Yt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Se.squareRoot=Se.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(ja+"NaN")}for(e=Mr(s),rr=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Za(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=oc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus(Oi(s,i,o+2)).times(.5),Za(i.d).slice(0,o)===(t=Za(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Lt(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return rr=!0,Lt(n,r)};Se.times=Se.mul=function(e){var t,r,n,a,i,o,s,l,u,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,l=h.length,u=p.length,l<u&&(i=h,h=p,p=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+p[n]*h[a-n-1]+t,i[a--]=s%Ur|0,t=s/Ur|0;i[a]=(i[a]+t)%Ur|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,rr?Lt(e,d.precision):e};Se.toDecimalPlaces=Se.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(si(e,0,ic),t===void 0?t=n.rounding:si(t,0,8),Lt(r,e+Mr(r)+1,t))};Se.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=xs(n,!0):(si(e,0,ic),t===void 0?t=a.rounding:si(t,0,8),n=Lt(new a(n),e+1,t),r=xs(n,!0,e+1)),r};Se.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?xs(a):(si(e,0,ic),t===void 0?t=i.rounding:si(t,0,8),n=Lt(new i(a),e+Mr(a)+1,t),r=xs(n.abs(),!1,e+Mr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Se.toInteger=Se.toint=function(){var e=this,t=e.constructor;return Lt(new t(e),Mr(e)+1,t.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,f=+(e=new l(e));if(!e.s)return new l(Zn);if(s=new l(s),!s.s){if(e.s<1)throw Error(ja+"Infinity");return s}if(s.eq(Zn))return s;if(n=l.precision,e.eq(Zn))return Lt(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=_P){for(a=new l(Zn),t=Math.ceil(n/Yt+4),rr=!1;r%2&&(a=a.times(s),yk(a.d,t)),r=oc(r/2),r!==0;)s=s.times(s),yk(s.d,t);return rr=!0,e.s<0?new l(Zn).div(a):Lt(a,n)}}else if(i<0)throw Error(ja+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,rr=!1,a=e.times(Lu(s,n+u)),rr=!0,a=TP(a),a.s=i,a};Se.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Mr(a),n=xs(a,r<=i.toExpNeg||r>=i.toExpPos)):(si(e,1,ic),t===void 0?t=i.rounding:si(t,0,8),a=Lt(new i(a),e,t),r=Mr(a),n=xs(a,e<=r||r<=i.toExpNeg,e)),n};Se.toSignificantDigits=Se.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(si(e,1,ic),t===void 0?t=n.rounding:si(t,0,8)),Lt(new n(r),e,t)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Mr(e),r=e.constructor;return xs(e,t<=r.toExpNeg||t>=r.toExpPos)};function AP(e,t){var r,n,a,i,o,s,l,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),rr?Lt(t,d):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(d/Yt),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/Ur|0,l[i]%=Ur;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,rr?Lt(t,d):t}function si(e,t,r){if(e!==~~e||e<t||e>r)throw Error(as+e)}function Za(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Yt-n.length,r&&(i+=Xi(r)),i+=n;o=e[t],n=o+"",r=Yt-n.length,r&&(i+=Xi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Oi=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Ur|0,o=i/Ur|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Ur+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,f,d,h,p,y,m,x,v,g,b,S,k,w,P,C,M=n.constructor,N=n.s==a.s?1:-1,$=n.d,_=a.d;if(!n.s)return new M(n);if(!a.s)throw Error(ja+"Division by zero");for(l=n.e-a.e,P=_.length,k=$.length,p=new M(N),y=p.d=[],u=0;_[u]==($[u]||0);)++u;if(_[u]>($[u]||0)&&--l,i==null?g=i=M.precision:o?g=i+(Mr(n)-Mr(a))+1:g=i,g<0)return new M(0);if(g=g/Yt+2|0,u=0,P==1)for(f=0,_=_[0],g++;(u<k||f)&&g--;u++)b=f*Ur+($[u]||0),y[u]=b/_|0,f=b%_|0;else{for(f=Ur/(_[0]+1)|0,f>1&&(_=e(_,f),$=e($,f),P=_.length,k=$.length),S=P,m=$.slice(0,P),x=m.length;x<P;)m[x++]=0;C=_.slice(),C.unshift(0),w=_[0],_[1]>=Ur/2&&++w;do f=0,s=t(_,m,P,x),s<0?(v=m[0],P!=x&&(v=v*Ur+(m[1]||0)),f=v/w|0,f>1?(f>=Ur&&(f=Ur-1),d=e(_,f),h=d.length,x=m.length,s=t(d,m,h,x),s==1&&(f--,r(d,P<h?C:_,h))):(f==0&&(s=f=1),d=_.slice()),h=d.length,h<x&&d.unshift(0),r(m,d,x),s==-1&&(x=m.length,s=t(_,m,P,x),s<1&&(f++,r(m,P<x?C:_,x))),x=m.length):s===0&&(f++,m=[0]),y[u++]=f,s&&m[0]?m[x++]=$[S]||0:(m=[$[S]],x=1);while((S++<k||m[0]!==void 0)&&g--)}return y[0]||y.shift(),p.e=l,Lt(p,o?i+Mr(p)+1:i)}}();function TP(e,t){var r,n,a,i,o,s,l=0,u=0,f=e.constructor,d=f.precision;if(Mr(e)>16)throw Error(f1+Mr(e));if(!e.s)return new f(Zn);for(rr=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Uo(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(Zn),f.precision=s;;){if(a=Lt(a.times(e),s),r=r.times(++l),o=i.plus(Oi(a,r,s)),Za(o.d).slice(0,s)===Za(i.d).slice(0,s)){for(;u--;)i=Lt(i.times(i),s);return f.precision=d,t==null?(rr=!0,Lt(i,d)):i}i=o}}function Mr(e){for(var t=e.e*Yt,r=e.d[0];r>=10;r/=10)t++;return t}function Pg(e,t,r){if(t>e.LN10.sd())throw rr=!0,r&&(e.precision=r),Error(ja+"LN10 precision limit exceeded");return Lt(new e(e.LN10),t)}function Xi(e){for(var t="";e--;)t+="0";return t}function Lu(e,t){var r,n,a,i,o,s,l,u,f,d=1,h=10,p=e,y=p.d,m=p.constructor,x=m.precision;if(p.s<1)throw Error(ja+(p.s?"NaN":"-Infinity"));if(p.eq(Zn))return new m(0);if(t==null?(rr=!1,u=x):u=t,p.eq(10))return t==null&&(rr=!0),Pg(m,u);if(u+=h,m.precision=u,r=Za(y),n=r.charAt(0),i=Mr(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Za(p.d),n=r.charAt(0),d++;i=Mr(p),n>1?(p=new m("0."+r),i++):p=new m(n+"."+r.slice(1))}else return l=Pg(m,u+2,x).times(i+""),p=Lu(new m(n+"."+r.slice(1)),u-h).plus(l),m.precision=x,t==null?(rr=!0,Lt(p,x)):p;for(s=o=p=Oi(p.minus(Zn),p.plus(Zn),u),f=Lt(p.times(p),u),a=3;;){if(o=Lt(o.times(f),u),l=s.plus(Oi(o,new m(a),u)),Za(l.d).slice(0,u)===Za(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Pg(m,u+2,x).times(i+""))),s=Oi(s,new m(d),u),m.precision=x,t==null?(rr=!0,Lt(s,x)):s;s=l,a+=2}}function mk(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=oc(r/Yt),e.d=[],n=(r+1)%Yt,r<0&&(n+=Yt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Yt;n<a;)e.d.push(+t.slice(n,n+=Yt));t=t.slice(n),n=Yt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),rr&&(e.e>T0||e.e<-T0))throw Error(f1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Lt(e,t,r){var n,a,i,o,s,l,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Yt,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Yt),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Yt,a=n-Yt+o}if(r!==void 0&&(i=Uo(10,o-a-1),s=u/i%10|0,l=t<0||d[f+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Uo(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(i=Mr(e),d.length=1,t=t-i-1,d[0]=Uo(10,(Yt-t%Yt)%Yt),e.e=oc(-t/Yt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=Uo(10,Yt-n),d[f]=a>0?(u/Uo(10,o-a)%Uo(10,a)|0)*i:0),l)for(;;)if(f==0){(d[0]+=i)==Ur&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Ur)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(rr&&(e.e>T0||e.e<-T0))throw Error(f1+Mr(e));return e}function EP(e,t){var r,n,a,i,o,s,l,u,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),rr?Lt(t,p):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(f=o<0,f?(r=l,o=-o,s=d.length):(r=d,n=u,s=l.length),a=Math.max(Math.ceil(p/Yt),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){f=l[a]<d[a];break}o=0}for(f&&(r=l,l=d,d=r,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>o;){if(l[--a]<d[a]){for(i=a;i&&l[--i]===0;)l[i]=Ur-1;--l[i],l[a]+=Ur}l[a]-=d[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,rr?Lt(t,p):t):new h(0)}function xs(e,t,r){var n,a=Mr(e),i=Za(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Xi(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Xi(-a-1)+i,r&&(n=r-o)>0&&(i+=Xi(n))):a>=o?(i+=Xi(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Xi(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Xi(n))),e.s<0?"-"+i:i}function yk(e,t){if(e.length>t)return e.length=t,!0}function $P(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(as+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return mk(o,i.toString())}else if(typeof i!="string")throw Error(as+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,ZW.test(i))mk(o,i);else throw Error(as+i)}if(a.prototype=Se,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=$P,a.config=a.set=QW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function QW(e){if(!e||typeof e!="object")throw Error(ja+"Object expected");var t,r,n,a=["precision",1,ic,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(oc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(as+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(as+r+": "+n);return this}var d1=$P(qW);Zn=new d1(1);const Et=d1;function JW(e){return nV(e)||rV(e)||tV(e)||eV()}function eV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tV(e,t){if(e){if(typeof e=="string")return yy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yy(e,t)}}function rV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function nV(e){if(Array.isArray(e))return yy(e)}function yy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var aV=function(t){return t},DP={},IP=function(t){return t===DP},vk=function(t){return function r(){return arguments.length===0||arguments.length===1&&IP(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},iV=function e(t,r){return t===1?r:vk(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==DP}).length;return o>=t?r.apply(void 0,a):e(t-o,vk(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var f=a.map(function(d){return IP(d)?l.shift():d});return r.apply(void 0,JW(f).concat(l))}))})},op=function(t){return iV(t.length,t)},vy=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},oV=op(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),sV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return aV;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},xy=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},RP=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,l){return s===r[l]})||(r=i,n=t.apply(void 0,i)),n}};function lV(e){var t;return e===0?t=1:t=Math.floor(new Et(e).abs().log(10).toNumber())+1,t}function cV(e,t,r){for(var n=new Et(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var uV=op(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),fV=op(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),dV=op(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const sp={rangeStep:cV,getDigitCount:lV,interpolateNumber:uV,uninterpolateNumber:fV,uninterpolateTruncation:dV};function by(e){return gV(e)||pV(e)||LP(e)||hV()}function hV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function gV(e){if(Array.isArray(e))return wy(e)}function Bu(e,t){return vV(e)||yV(e,t)||LP(e,t)||mV()}function mV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LP(e,t){if(e){if(typeof e=="string")return wy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wy(e,t)}}function wy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function vV(e){if(Array.isArray(e))return e}function BP(e){var t=Bu(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function FP(e,t,r){if(e.lte(0))return new Et(0);var n=sp.getDigitCount(e.toNumber()),a=new Et(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new Et(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?l:new Et(Math.ceil(l))}function xV(e,t,r){var n=1,a=new Et(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Et(10).pow(sp.getDigitCount(e)-1),a=new Et(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Et(Math.floor(e)))}else e===0?a=new Et(Math.floor((t-1)/2)):r||(a=new Et(Math.floor(e)));var o=Math.floor((t-1)/2),s=sV(oV(function(l){return a.add(new Et(l-o).mul(n)).toNumber()}),vy);return s(0,t)}function zP(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Et(0),tickMin:new Et(0),tickMax:new Et(0)};var i=FP(new Et(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Et(0):(o=new Et(e).add(t).div(2),o=o.sub(new Et(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new Et(t).sub(o).div(i).toNumber()),u=s+l+1;return u>r?zP(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new Et(s).mul(i)),tickMax:o.add(new Et(l).mul(i))})}function bV(e){var t=Bu(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=BP([r,n]),l=Bu(s,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(by(vy(0,a-1).map(function(){return 1/0}))):[].concat(by(vy(0,a-1).map(function(){return-1/0})),[f]);return r>n?xy(d):d}if(u===f)return xV(u,a,i);var h=zP(u,f,o,i),p=h.step,y=h.tickMin,m=h.tickMax,x=sp.rangeStep(y,m.add(new Et(.1).mul(p)),p);return r>n?xy(x):x}function wV(e,t){var r=Bu(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=BP([n,a]),s=Bu(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var f=Math.max(t,2),d=FP(new Et(u).sub(l).div(f-1),i,0),h=[].concat(by(sp.rangeStep(new Et(l),new Et(u).sub(new Et(.99).mul(d)),d)),[u]);return n>a?xy(h):h}var kV=RP(bV),SV=RP(wV),jV="Invariant failed";function bs(e,t){throw new Error(jV)}var PV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Cl(e){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cl(e)}function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E0.apply(this,arguments)}function CV(e,t){return _V(e)||MV(e,t)||OV(e,t)||NV()}function NV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OV(e,t){if(e){if(typeof e=="string")return xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xk(e,t)}}function xk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function _V(e){if(Array.isArray(e))return e}function AV(e,t){if(e==null)return{};var r=TV(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function TV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function EV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WP(n.key),n)}}function DV(e,t,r){return t&&$V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IV(e,t,r){return t=$0(t),RV(e,GP()?Reflect.construct(t,r||[],$0(e).constructor):t.apply(e,r))}function RV(e,t){if(t&&(Cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LV(e)}function LV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GP=function(){return!!e})()}function $0(e){return $0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$0(e)}function BV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ky(e,t)}function ky(e,t){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ky(e,t)}function UP(e,t,r){return t=WP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WP(e){var t=FV(e,"string");return Cl(t)=="symbol"?t:t+""}function FV(e,t){if(Cl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sc=function(e){function t(){return EV(this,t),IV(this,t,arguments)}return BV(t,e),DV(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=AV(n,PV),p=Xe(h,!1);this.props.direction==="x"&&f.type!=="number"&&bs();var y=l.map(function(m){var x=u(m,s),v=x.x,g=x.y,b=x.value,S=x.errorVal;if(!S)return null;var k=[],w,P;if(Array.isArray(S)){var C=CV(S,2);w=C[0],P=C[1]}else w=P=S;if(i==="vertical"){var M=f.scale,N=g+a,$=N+o,_=N-o,A=M(b-w),D=M(b+P);k.push({x1:D,y1:$,x2:D,y2:_}),k.push({x1:A,y1:N,x2:D,y2:N}),k.push({x1:A,y1:$,x2:A,y2:_})}else if(i==="horizontal"){var R=d.scale,L=v+a,T=L-o,E=L+o,I=R(b-w),G=R(b+P);k.push({x1:T,y1:G,x2:E,y2:G}),k.push({x1:L,y1:I,x2:L,y2:G}),k.push({x1:T,y1:I,x2:E,y2:I})}return z.createElement(bt,E0({className:"recharts-errorBar",key:"bar-".concat(k.map(function(J){return"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))},p),k.map(function(J){return z.createElement("line",E0({},J,{key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))}))});return z.createElement(bt,{className:"recharts-errorBars"},y)}}])}(z.Component);UP(sc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});UP(sc,"displayName","ErrorBar");function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(n){zV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zV(e,t,r){return t=GV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GV(e){var t=UV(e,"string");return Fu(t)=="symbol"?t:t+""}function UV(e,t){if(Fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VP=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=qn(r,ti);if(!o)return null;var s=ti.defaultProps,l=s!==void 0?Lo(Lo({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,y=p.sectors||p.data||[];return f.concat(y.map(function(m){return{type:o.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?Lo(Lo({},h),d.props):{},y=p.dataKey,m=p.name,x=p.legendType,v=p.hide;return{inactive:v,dataKey:y,type:l.iconType||x||"square",color:h1(d),value:m||y,payload:p}}),Lo(Lo(Lo({},l),ti.getWithHeight(o,a)),{},{payload:u,item:o})};function zu(e){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(e)}function wk(e){return XV(e)||HV(e)||VV(e)||WV()}function WV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VV(e,t){if(e){if(typeof e=="string")return Sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sy(e,t)}}function HV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XV(e){if(Array.isArray(e))return Sy(e)}function Sy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(n){cl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cl(e,t,r){return t=KV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KV(e){var t=YV(e,"string");return zu(t)=="symbol"?t:t+""}function YV(e,t){if(zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lr(e,t,r){return We(e)||We(t)?r:Rr(t)?wa(e,t,r):Ye(t)?t(e):r}function tu(e,t,r,n){var a=HW(e,function(s){return Lr(s,t)});if(r==="number"){var i=a.filter(function(s){return ge(s)||parseFloat(s)});return i.length?[ip(i),no(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!We(s)}):a;return o.map(function(s){return Rr(s)||s instanceof Date?s:""})}var qV=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,h=u>=s-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(Fa(d-f)!==Fa(h-d)){var y=[];if(Fa(h-d)===Fa(l[1]-l[0])){p=h;var m=d+l[1]-l[0];y[0]=Math.min(m,(m+f)/2),y[1]=Math.max(m,(m+f)/2)}else{p=f;var x=h+l[1]-l[0];y[0]=Math.min(d,(x+d)/2),y[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>v[0]&&t<=v[1]||t>=y[0]&&t<=y[1]){o=a[u].index;break}}else{var g=Math.min(f,h),b=Math.max(f,h);if(t>(g+d)/2&&t<=(b+d)/2){o=a[u].index;break}}}else for(var S=0;S<s;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},h1=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?hr(hr({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},ZV=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,u=s.length;l<u;l++)for(var f=i[s[l]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var y=f[d[h]],m=y.items,x=y.cateAxisId,v=m.filter(function(P){return Pi(P.type).indexOf("Bar")>=0});if(v&&v.length){var g=v[0].type.defaultProps,b=g!==void 0?hr(hr({},g),v[0].props):v[0].props,S=b.barSize,k=b[x];o[k]||(o[k]=[]);var w=We(S)?r:S;o[k].push({item:v[0],stackList:v.slice(1),barSize:We(w)?void 0:ys(w,n,0)})}}return o},QV=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var u=ys(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/l,y=o.reduce(function(S,k){return S+k.barSize||0},0);y+=(l-1)*u,y>=a&&(y-=(l-1)*u,u=0),y>=a&&p>0&&(h=!0,p*=.9,y=l*p);var m=(a-y)/2>>0,x={offset:m-u,size:0};f=o.reduce(function(S,k){var w={item:k.item,position:{offset:x.offset+x.size+u,size:h?p:k.barSize}},P=[].concat(wk(S),[w]);return x=P[P.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(C){P.push({item:C,position:x})}),P},d)}else{var v=ys(n,a,0,!0);a-2*v-(l-1)*u<=0&&(u=0);var g=(a-2*v-(l-1)*u)/l;g>1&&(g>>=0);var b=s===+s?Math.min(g,s):g;f=o.reduce(function(S,k,w){var P=[].concat(wk(S),[{item:k.item,position:{offset:v+(g+u)*w+(g-b)/2,size:b}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(C){P.push({item:C,position:P[P.length-1].position})}),P},d)}return f},JV=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=VP({children:i,legendWidth:l});if(u){var f=a||{},d=f.width,h=f.height,p=u.align,y=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&y==="middle")&&p!=="center"&&ge(t[p]))return hr(hr({},t),{},cl({},p,t[p]+(d||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&y!=="middle"&&ge(t[y]))return hr(hr({},t),{},cl({},y,t[y]+(h||0)))}return t},eH=function(t,r,n){return We(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},HP=function(t,r,n,a,i){var o=r.props.children,s=Ln(o,sc).filter(function(u){return eH(a,i,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Lr(f,n);if(We(d))return u;var h=Array.isArray(d)?[ip(d),no(d)]:[d,d],p=l.reduce(function(y,m){var x=Lr(f,m,0),v=h[0]-Math.abs(Array.isArray(x)?x[0]:x),g=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(v,y[0]),Math.max(g,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},tH=function(t,r,n,a,i){var o=r.map(function(s){return HP(t,s,n,i,a)}).filter(function(s){return!We(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},XP=function(t,r,n,a,i){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&HP(t,l,u,a)||tu(t,u,n,i)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,l.push(u[f]));return l},[])},KP=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},YP=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===r&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate});return i||s.push(r),o||s.push(n),s},Si=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Fa(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=i?i.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!ec(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:i?i[d]:d,index:h,offset:u}})},Cg=new WeakMap,id=function(t,r){if(typeof r!="function")return t;Cg.has(t)||Cg.set(t,new WeakMap);var n=Cg.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},rH=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Eu(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:O0(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:eu(),realScaleType:"point"}:i==="category"?{scale:Eu(),realScaleType:"band"}:{scale:O0(),realScaleType:"linear"};if(ms(a)){var l="scale".concat(Vh(a));return{scale:(gk[l]||eu)(),realScaleType:gk[l]?l:"point"}}return Ye(a)?{scale:a}:{scale:eu(),realScaleType:"point"}},Sk=1e-4,nH=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-Sk,o=Math.max(a[0],a[1])+Sk,s=t(r[0]),l=t(r[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([r[0],r[n-1]])}},aH=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},iH=function(t,r){if(!r||r.length!==2||!ge(r[0])||!ge(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ge(t[0])||t[0]<n)&&(i[0]=n),(!ge(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},oH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var l=ec(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},sH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=ec(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},lH={sign:oH,expand:S7,none:vl,silhouette:j7,wiggle:P7,positive:sH},cH=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=lH[n],o=k7().keys(a).value(function(s,l){return+Lr(s,l,0)}).order(Km).offset(i);return o(t)},uH=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(d,h){var p,y=(p=h.type)!==null&&p!==void 0&&p.defaultProps?hr(hr({},h.type.defaultProps),h.props):h.props,m=y.stackId,x=y.hide;if(x)return d;var v=y[n],g=d[v]||{hasStack:!1,stackGroups:{}};if(Rr(m)){var b=g.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(h),g.hasStack=!0,g.stackGroups[m]=b}else g.stackGroups[Ns("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return hr(hr({},d),{},cl({},v,g))},l),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,x){var v=p.stackGroups[x];return hr(hr({},m),{},cl({},x,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:cH(t,v.items,i)}))},y)}return hr(hr({},d),{},cl({},h,p))},f)},fH=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=kV(u,i,s);return t.domain([ip(f),no(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),h=SV(d,i,s);return{niceTicks:h}}return null};function Nl(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!We(a[t.dataKey])){var s=i0(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Lr(a,We(o)?t.dataKey:o);return We(l)?null:t.scale(l)}var jk=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=Lr(o,r.dataKey,r.domain[s]);return We(l)?null:r.scale(l)-i/2+a},dH=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},hH=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?hr(hr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Rr(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},pH=function(t){return t.reduce(function(r,n){return[ip(n.concat([r[0]]).filter(ge)),no(n.concat([r[1]]).filter(ge))]},[1/0,-1/0])},qP=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(u,f){var d=pH(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Pk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ck=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jy=function(t,r,n){if(Ye(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(ge(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(Pk.test(t[0])){var i=+Pk.exec(t[0])[1];a[0]=r[0]-i}else Ye(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(ge(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(Ck.test(t[1])){var o=+Ck.exec(t[1])[1];a[1]=r[1]+o}else Ye(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},D0=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=Fx(r,function(d){return d.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},Nk=function(t,r,n){return!t||!t.length||vs(t,wa(n,"type.defaultProps.domain"))?r:t},ZP=function(t,r){var n=t.type.defaultProps?hr(hr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,f=n.hide;return hr(hr({},Xe(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:h1(t),value:Lr(r,a),type:l,payload:r,chartType:u,hide:f})};function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(r),!0).forEach(function(n){gH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gH(e,t,r){return t=mH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mH(e){var t=yH(e,"string");return Gu(t)=="symbol"?t:t+""}function yH(e,t){if(Gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I0=Math.PI/180,vH=function(t){return t*180/Math.PI},en=function(t,r,n,a){return{x:t+Math.cos(-I0*a)*n,y:r+Math.sin(-I0*a)*n}},xH=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},bH=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=xH({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(n-i)/s,u=Math.acos(l);return a>o&&(u=2*Math.PI-u),{radius:s,angle:vH(u),angleInRadian:u}},wH=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},kH=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},_k=function(t,r){var n=t.x,a=t.y,i=bH({x:n,y:a},r),o=i.radius,s=i.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var f=wH(r),d=f.startAngle,h=f.endAngle,p=s,y;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;y=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=d}return y?Mk(Mk({},r),{},{radius:o,angle:kH(p,r)}):null};function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}var SH=["offset"];function jH(e){return OH(e)||NH(e)||CH(e)||PH()}function PH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CH(e,t){if(e){if(typeof e=="string")return Py(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Py(e,t)}}function NH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OH(e){if(Array.isArray(e))return Py(e)}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MH(e,t){if(e==null)return{};var r=_H(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _H(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(n){AH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AH(e,t,r){return t=TH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TH(e){var t=EH(e,"string");return Uu(t)=="symbol"?t:t+""}function EH(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wu.apply(this,arguments)}var $H=function(t){var r=t.value,n=t.formatter,a=We(t.children)?r:t.children;return Ye(n)?n(a):a},DH=function(t,r){var n=Fa(r-t),a=Math.min(Math.abs(r-t),360);return n*a},IH=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,u=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,y=l.endAngle,m=l.clockWise,x=(d+h)/2,v=DH(p,y),g=v>=0?1:-1,b,S;a==="insideStart"?(b=p+g*o,S=m):a==="insideEnd"?(b=y-g*o,S=!m):a==="end"&&(b=y+g*o,S=m),S=v<=0?S:!S;var k=en(u,f,x,b),w=en(u,f,x,b+(S?1:-1)*359),P="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),C=We(t.id)?Ns("recharts-radial-line-"):t.id;return z.createElement("text",Wu({},n,{dominantBaseline:"central",className:it("recharts-radial-bar-label",s)}),z.createElement("defs",null,z.createElement("path",{id:C,d:P})),z.createElement("textPath",{xlinkHref:"#".concat(C)},r))},RH=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,l=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,h=(f+d)/2;if(a==="outside"){var p=en(o,s,u+n,h),y=p.x,m=p.y;return{x:y,y:m,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,v=en(o,s,x,h),g=v.x,b=v.y;return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},LH=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,l=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,p=d>0?"end":"start",y=d>0?"start":"end",m=u>=0?1:-1,x=m*a,v=m>0?"end":"start",g=m>0?"start":"end";if(i==="top"){var b={x:s+u/2,y:l-d*a,textAnchor:"middle",verticalAnchor:p};return $r($r({},b),n?{height:Math.max(l-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:s+u/2,y:l+f+h,textAnchor:"middle",verticalAnchor:y};return $r($r({},S),n?{height:Math.max(n.y+n.height-(l+f),0),width:u}:{})}if(i==="left"){var k={x:s-x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"};return $r($r({},k),n?{width:Math.max(k.x-n.x,0),height:f}:{})}if(i==="right"){var w={x:s+u+x,y:l+f/2,textAnchor:g,verticalAnchor:"middle"};return $r($r({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:f}:{})}var P=n?{width:u,height:f}:{};return i==="insideLeft"?$r({x:s+x,y:l+f/2,textAnchor:g,verticalAnchor:"middle"},P):i==="insideRight"?$r({x:s+u-x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"},P):i==="insideTop"?$r({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:y},P):i==="insideBottom"?$r({x:s+u/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},P):i==="insideTopLeft"?$r({x:s+x,y:l+h,textAnchor:g,verticalAnchor:y},P):i==="insideTopRight"?$r({x:s+u-x,y:l+h,textAnchor:v,verticalAnchor:y},P):i==="insideBottomLeft"?$r({x:s+x,y:l+f-h,textAnchor:g,verticalAnchor:p},P):i==="insideBottomRight"?$r({x:s+u-x,y:l+f-h,textAnchor:v,verticalAnchor:p},P):ql(i)&&(ge(i.x)||qo(i.x))&&(ge(i.y)||qo(i.y))?$r({x:s+ys(i.x,u),y:l+ys(i.y,f),textAnchor:"end",verticalAnchor:"end"},P):$r({x:s+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},P)},BH=function(t){return"cx"in t&&ge(t.cx)};function Jr(e){var t=e.offset,r=t===void 0?5:t,n=MH(e,SH),a=$r({offset:r},n),i=a.viewBox,o=a.position,s=a.value,l=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!i||We(s)&&We(l)&&!j.isValidElement(u)&&!Ye(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var p;if(Ye(u)){if(p=j.createElement(u,a),j.isValidElement(p))return p}else p=$H(a);var y=BH(i),m=Xe(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return IH(a,p,m);var x=y?RH(a):LH(a);return z.createElement(b0,Wu({className:it("recharts-label",d)},m,x,{breakAll:h}),p)}Jr.displayName="Label";var QP=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,y=t.left,m=t.width,x=t.height,v=t.clockWise,g=t.labelViewBox;if(g)return g;if(ge(m)&&ge(x)){if(ge(d)&&ge(h))return{x:d,y:h,width:m,height:x};if(ge(p)&&ge(y))return{x:p,y,width:m,height:x}}return ge(d)&&ge(h)?{x:d,y:h,width:0,height:0}:ge(r)&&ge(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||l||s||0,clockWise:v}:t.viewBox?t.viewBox:{}},FH=function(t,r){return t?t===!0?z.createElement(Jr,{key:"label-implicit",viewBox:r}):Rr(t)?z.createElement(Jr,{key:"label-implicit",viewBox:r,value:t}):j.isValidElement(t)?t.type===Jr?j.cloneElement(t,{key:"label-implicit",viewBox:r}):z.createElement(Jr,{key:"label-implicit",content:t,viewBox:r}):Ye(t)?z.createElement(Jr,{key:"label-implicit",content:t,viewBox:r}):ql(t)?z.createElement(Jr,Wu({viewBox:r},t,{key:"label-implicit"})):null:null},zH=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=QP(t),o=Ln(a,Jr).map(function(l,u){return j.cloneElement(l,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=FH(t.label,r||i);return[s].concat(jH(o))};Jr.parseViewBox=QP;Jr.renderCallByParent=zH;function GH(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var UH=GH;const WH=Bt(UH);function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}var VH=["valueAccessor"],HH=["data","dataKey","clockWise","id","textBreakAll"];function XH(e){return ZH(e)||qH(e)||YH(e)||KH()}function KH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YH(e,t){if(e){if(typeof e=="string")return Cy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(e,t)}}function qH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZH(e){if(Array.isArray(e))return Cy(e)}function Cy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(this,arguments)}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ek(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){QH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QH(e,t,r){return t=JH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JH(e){var t=eX(e,"string");return Vu(t)=="symbol"?t:t+""}function eX(e,t){if(Vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $k(e,t){if(e==null)return{};var r=tX(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var rX=function(t){return Array.isArray(t.value)?WH(t.value):t.value};function ni(e){var t=e.valueAccessor,r=t===void 0?rX:t,n=$k(e,VH),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=$k(n,HH);return!a||!a.length?null:z.createElement(bt,{className:"recharts-label-list"},a.map(function(f,d){var h=We(i)?r(f,d):Lr(f&&f.payload,i),p=We(s)?{}:{id:"".concat(s,"-").concat(d)};return z.createElement(Jr,R0({},Xe(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:Jr.parseViewBox(We(o)?f:Ek(Ek({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ni.displayName="LabelList";function nX(e,t){return e?e===!0?z.createElement(ni,{key:"labelList-implicit",data:t}):z.isValidElement(e)||Ye(e)?z.createElement(ni,{key:"labelList-implicit",data:t,content:e}):ql(e)?z.createElement(ni,R0({data:t},e,{key:"labelList-implicit"})):null:null}function aX(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Ln(n,ni).map(function(o,s){return j.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=nX(e.label,t);return[i].concat(XH(a))}ni.renderCallByParent=aX;function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(this,arguments)}function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){iX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iX(e,t,r){return t=oX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oX(e){var t=sX(e,"string");return Hu(t)=="symbol"?t:t+""}function sX(e,t){if(Hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lX=function(t,r){var n=Fa(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},od=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,f=l*(s?1:-1)+a,d=Math.asin(l/f)/I0,h=u?i:i+o*d,p=en(r,n,f,h),y=en(r,n,a,h),m=u?i-o*d:i,x=en(r,n,f*Math.cos(d*I0),m);return{center:p,circleTangency:y,lineTangency:x,theta:d}},JP=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=lX(o,s),u=o+l,f=en(r,n,i,o),d=en(r,n,i,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=en(r,n,a,o),y=en(r,n,a,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},cX=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Fa(f-u),h=od({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),p=h.circleTangency,y=h.lineTangency,m=h.theta,x=od({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:l}),v=x.circleTangency,g=x.lineTangency,b=x.theta,S=l?Math.abs(u-f):Math.abs(u-f)-m-b;if(S<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):JP({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var k="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var w=od({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),P=w.circleTangency,C=w.lineTangency,M=w.theta,N=od({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),$=N.circleTangency,_=N.lineTangency,A=N.theta,D=l?Math.abs(u-f):Math.abs(u-f)-M-A;if(D<0&&o===0)return"".concat(k,"L").concat(r,",").concat(n,"Z");k+="L".concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat($.x,",").concat($.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(D>180),",").concat(+(d>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else k+="L".concat(r,",").concat(n,"Z");return k},uX={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},eC=function(t){var r=Ik(Ik({},uX),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(o<i||f===d)return null;var p=it("recharts-sector",h),y=o-i,m=ys(s,y,0,!0),x;return m>0&&Math.abs(f-d)<360?x=cX({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}):x=JP({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),z.createElement("path",Ny({},Xe(r,!0),{className:p,d:x,role:"img"}))};function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(this,arguments)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(n){fX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fX(e,t,r){return t=dX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dX(e){var t=hX(e,"string");return Xu(t)=="symbol"?t:t+""}function hX(e,t){if(Xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bk={curveBasisClosed:f7,curveBasisOpen:d7,curveBasis:u7,curveBumpX:qE,curveBumpY:ZE,curveLinearClosed:h7,curveLinear:Xh,curveMonotoneX:p7,curveMonotoneY:g7,curveNatural:m7,curveStep:y7,curveStepAfter:x7,curveStepBefore:v7},sd=function(t){return t.x===+t.x&&t.y===+t.y},$c=function(t){return t.x},Dc=function(t){return t.y},pX=function(t,r){if(Ye(t))return t;var n="curve".concat(Vh(t));return(n==="curveMonotone"||n==="curveBump")&&r?Bk["".concat(n).concat(r==="vertical"?"Y":"X")]:Bk[n]||Xh},gX=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,f=pX(n,s),d=u?i.filter(function(m){return sd(m)}):i,h;if(Array.isArray(o)){var p=u?o.filter(function(m){return sd(m)}):o,y=d.map(function(m,x){return Lk(Lk({},m),{},{base:p[x]})});return s==="vertical"?h=Zf().y(Dc).x1($c).x0(function(m){return m.base.x}):h=Zf().x($c).y1(Dc).y0(function(m){return m.base.y}),h.defined(sd).curve(f),h(y)}return s==="vertical"&&ge(o)?h=Zf().y(Dc).x1($c).x0(o):ge(o)?h=Zf().x($c).y1(Dc).y0(o):h=rj().x($c).y(Dc),h.defined(sd).curve(f),h(d)},is=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?gX(t):a;return j.createElement("path",Oy({},Xe(t,!1),o0(t),{className:it("recharts-curve",r),d:o,ref:i}))},tC={exports:{}},mX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yX=mX,vX=yX;function rC(){}function nC(){}nC.resetWarningCache=rC;var xX=function(){function e(n,a,i,o,s,l){if(l!==vX){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:nC,resetWarningCache:rC};return r.PropTypes=r,r};tC.exports=xX();var bX=tC.exports;const jt=Bt(bX),{getOwnPropertyNames:wX,getOwnPropertySymbols:kX}=Object,{hasOwnProperty:SX}=Object.prototype;function Ng(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function ld(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const l=e(r,n,a);return i.delete(r),i.delete(n),l}}function jX(e){return e!=null?e[Symbol.toStringTag]:void 0}function Fk(e){return wX(e).concat(kX(e))}const PX=Object.hasOwn||((e,t)=>SX.call(e,t));function _s(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const CX="__v",NX="__o",OX="_owner",{getOwnPropertyDescriptor:zk,keys:Gk}=Object;function MX(e,t){return e.byteLength===t.byteLength&&L0(new Uint8Array(e),new Uint8Array(t))}function _X(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function AX(e,t){return e.byteLength===t.byteLength&&L0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function TX(e,t){return _s(e.getTime(),t.getTime())}function EX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function $X(e,t){return e===t}function Uk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,l=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const h=o.value,p=s.value;if(r.equals(h[0],p[0],l,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;l++}return!0}const DX=_s;function IX(e,t,r){const n=Gk(e);let a=n.length;if(Gk(t).length!==a)return!1;for(;a-- >0;)if(!aC(e,t,r,n[a]))return!1;return!0}function Ic(e,t,r){const n=Fk(e);let a=n.length;if(Fk(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!aC(e,t,r,i)||(o=zk(e,i),s=zk(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function RX(e,t){return _s(e.valueOf(),t.valueOf())}function LX(e,t){return e.source===t.source&&e.flags===t.flags}function Wk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const l=t.values();let u=!1,f=0;for(;(s=l.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function L0(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function BX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function aC(e,t,r,n){return(n===OX||n===NX||n===CX)&&(e.$$typeof||t.$$typeof)?!0:PX(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const FX="[object ArrayBuffer]",zX="[object Arguments]",GX="[object Boolean]",UX="[object DataView]",WX="[object Date]",VX="[object Error]",HX="[object Map]",XX="[object Number]",KX="[object Object]",YX="[object RegExp]",qX="[object Set]",ZX="[object String]",QX={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},JX="[object URL]",eK=Object.prototype.toString;function tK({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:y}){return function(x,v,g){if(x===v)return!0;if(x==null||v==null)return!1;const b=typeof x;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?s(x,v,g):b==="function"?i(x,v,g):!1;const S=x.constructor;if(S!==v.constructor)return!1;if(S===Object)return l(x,v,g);if(Array.isArray(x))return t(x,v,g);if(S===Date)return n(x,v,g);if(S===RegExp)return f(x,v,g);if(S===Map)return o(x,v,g);if(S===Set)return d(x,v,g);const k=eK.call(x);if(k===WX)return n(x,v,g);if(k===YX)return f(x,v,g);if(k===HX)return o(x,v,g);if(k===qX)return d(x,v,g);if(k===KX)return typeof x.then!="function"&&typeof v.then!="function"&&l(x,v,g);if(k===JX)return p(x,v,g);if(k===VX)return a(x,v,g);if(k===zX)return l(x,v,g);if(QX[k])return h(x,v,g);if(k===FX)return e(x,v,g);if(k===UX)return r(x,v,g);if(k===GX||k===XX||k===ZX)return u(x,v,g);if(y){let w=y[k];if(!w){const P=jX(x);P&&(w=y[P])}if(w)return w(x,v,g)}return!1}}function rK({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:MX,areArraysEqual:r?Ic:_X,areDataViewsEqual:AX,areDatesEqual:TX,areErrorsEqual:EX,areFunctionsEqual:$X,areMapsEqual:r?Ng(Uk,Ic):Uk,areNumbersEqual:DX,areObjectsEqual:r?Ic:IX,arePrimitiveWrappersEqual:RX,areRegExpsEqual:LX,areSetsEqual:r?Ng(Wk,Ic):Wk,areTypedArraysEqual:r?Ng(L0,Ic):L0,areUrlsEqual:BX,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=ld(n.areArraysEqual),i=ld(n.areMapsEqual),o=ld(n.areObjectsEqual),s=ld(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function nK(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function aK({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,l){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,l,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,l){return t(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,l){return t(s,l,i)}}const iK=Ao();Ao({strict:!0});Ao({circular:!0});Ao({circular:!0,strict:!0});Ao({createInternalComparator:()=>_s});Ao({strict:!0,createInternalComparator:()=>_s});Ao({circular:!0,createInternalComparator:()=>_s});Ao({circular:!0,createInternalComparator:()=>_s,strict:!0});function Ao(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=rK(e),o=tK(i),s=r?r(o):nK(o);return aK({circular:t,comparator:o,createState:n,equals:s,strict:a})}function oK(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Vk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):oK(a)};requestAnimationFrame(n)}function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function sK(e){return fK(e)||uK(e)||cK(e)||lK()}function lK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cK(e,t){if(e){if(typeof e=="string")return Hk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hk(e,t)}}function Hk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fK(e){if(Array.isArray(e))return e}function dK(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=sK(o),l=s[0],u=s.slice(1);if(typeof l=="number"){Vk(a.bind(null,u),l);return}a(l),Vk(a.bind(null,u));return}My(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function Xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xk(Object(r),!0).forEach(function(n){iC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iC(e,t,r){return t=hK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hK(e){var t=pK(e,"string");return Ku(t)==="symbol"?t:String(t)}function pK(e,t){if(Ku(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ku(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gK=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},mK=function(t){return t},yK=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ru=function(t,r){return Object.keys(r).reduce(function(n,a){return Kk(Kk({},n),{},iC({},a,t(a,r[a])))},{})},Yk=function(t,r,n){return t.map(function(a){return"".concat(yK(a)," ").concat(r,"ms ").concat(n)}).join(",")};function vK(e,t){return wK(e)||bK(e,t)||oC(e,t)||xK()}function xK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function wK(e){if(Array.isArray(e))return e}function kK(e){return PK(e)||jK(e)||oC(e)||SK()}function SK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oC(e,t){if(e){if(typeof e=="string")return _y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _y(e,t)}}function jK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PK(e){if(Array.isArray(e))return _y(e)}function _y(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B0=1e-4,sC=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},lC=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},qk=function(t,r){return function(n){var a=sC(t,r);return lC(a,n)}},CK=function(t,r){return function(n){var a=sC(t,r),i=[].concat(kK(a.map(function(o,s){return o*s}).slice(1)),[0]);return lC(i,n)}},Zk=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=vK(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=qk(a,o),h=qk(i,s),p=CK(a,o),y=function(v){return v>1?1:v<0?0:v},m=function(v){for(var g=v>1?1:v,b=g,S=0;S<8;++S){var k=d(b)-g,w=p(b);if(Math.abs(k-g)<B0||w<B0)return h(b);b=y(b-k/w)}return h(b)};return m.isStepper=!1,m},NK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(f,d,h){var p=-(f-d)*n,y=h*i,m=h+(p-y)*s/1e3,x=h*s/1e3+f;return Math.abs(x-d)<B0&&Math.abs(m)<B0?[d,0]:[x,m]};return l.isStepper=!0,l.dt=s,l},OK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Zk(a);case"spring":return NK();default:if(a.split("(")[0]==="cubic-bezier")return Zk(a)}return typeof a=="function"?a:null};function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function Qk(e){return AK(e)||_K(e)||cC(e)||MK()}function MK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _K(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AK(e){if(Array.isArray(e))return Ty(e)}function Jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jk(Object(r),!0).forEach(function(n){Ay(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ay(e,t,r){return t=TK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TK(e){var t=EK(e,"string");return Yu(t)==="symbol"?t:String(t)}function EK(e,t){if(Yu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $K(e,t){return RK(e)||IK(e,t)||cC(e,t)||DK()}function DK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cC(e,t){if(e){if(typeof e=="string")return Ty(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ty(e,t)}}function Ty(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function RK(e){if(Array.isArray(e))return e}var F0=function(t,r,n){return t+(r-t)*n},Ey=function(t){var r=t.from,n=t.to;return r!==n},LK=function e(t,r,n){var a=ru(function(i,o){if(Ey(o)){var s=t(o.from,o.to,o.velocity),l=$K(s,2),u=l[0],f=l[1];return Zr(Zr({},o),{},{from:u,velocity:f})}return o},r);return n<1?ru(function(i,o){return Ey(o)?Zr(Zr({},o),{},{velocity:F0(o.velocity,a[i].velocity,n),from:F0(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const BK=function(e,t,r,n,a){var i=gK(e,t),o=i.reduce(function(x,v){return Zr(Zr({},x),{},Ay({},v,[e[v],t[v]]))},{}),s=i.reduce(function(x,v){return Zr(Zr({},x),{},Ay({},v,{from:e[v],velocity:0,to:t[v]}))},{}),l=-1,u,f,d=function(){return null},h=function(){return ru(function(v,g){return g.from},s)},p=function(){return!Object.values(s).filter(Ey).length},y=function(v){u||(u=v);var g=v-u,b=g/r.dt;s=LK(r,s,b),a(Zr(Zr(Zr({},e),t),h())),u=v,p()||(l=requestAnimationFrame(d))},m=function(v){f||(f=v);var g=(v-f)/n,b=ru(function(k,w){return F0.apply(void 0,Qk(w).concat([r(g)]))},o);if(a(Zr(Zr(Zr({},e),t),b)),g<1)l=requestAnimationFrame(d);else{var S=ru(function(k,w){return F0.apply(void 0,Qk(w).concat([r(1)]))},o);a(Zr(Zr(Zr({},e),t),S))}};return d=r.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Ol(e){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(e)}var FK=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function zK(e,t){if(e==null)return{};var r=GK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GK(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Og(e){return HK(e)||VK(e)||WK(e)||UK()}function UK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WK(e,t){if(e){if(typeof e=="string")return $y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $y(e,t)}}function VK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HK(e){if(Array.isArray(e))return $y(e)}function $y(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(n){Gc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gc(e,t,r){return t=uC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uC(n.key),n)}}function YK(e,t,r){return t&&KK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uC(e){var t=qK(e,"string");return Ol(t)==="symbol"?t:String(t)}function qK(e,t){if(Ol(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ol(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dy(e,t)}function Dy(e,t){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Dy(e,t)}function QK(e){var t=JK();return function(){var n=z0(e),a;if(t){var i=z0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Iy(this,a)}}function Iy(e,t){if(t&&(Ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ry(e)}function Ry(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z0(e){return z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z0(e)}var Wa=function(e){ZK(r,e);var t=QK(r);function r(n,a){var i;XK(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,l=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Ry(i)),i.changeStyle=i.changeStyle.bind(Ry(i)),!s||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:f}),Iy(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Iy(i);i.state={style:l?Gc({},l,u):u}}else i.state={style:{}};return i}return YK(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,h=this.state.style;if(s){if(!o){var p={style:l?Gc({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(iK(a.to,f)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=y||u?d:a.to;if(this.state&&h){var x={style:l?Gc({},l,m):m};(l&&h[l]!==m||!l&&h!==m)&&this.setState(x)}this.runAnimation(Ta(Ta({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,p=BK(o,s,OK(u),l,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([h,f,y,l,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(m,x,v){if(v===0)return m;var g=x.duration,b=x.easing,S=b===void 0?"ease":b,k=x.style,w=x.properties,P=x.onAnimationEnd,C=v>0?o[v-1]:x,M=w||Object.keys(k);if(typeof S=="function"||S==="spring")return[].concat(Og(m),[i.runJSAnimation.bind(i,{from:C.style,to:k,duration:g,easing:S}),g]);var N=Yk(M,g,S),$=Ta(Ta(Ta({},C.style),k),{},{transition:N});return[].concat(Og(m),[$,g,P]).filter(mK)};return this.manager.start([l].concat(Og(o.reduce(p,[f,Math.max(h,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=dK());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,p=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var m=s?Gc({},s,l):l,x=Yk(Object.keys(m),o,u);y.start([f,i,Ta(Ta({},m),{},{transition:x}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=zK(a,FK),u=j.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(p){var y=p.props,m=y.style,x=m===void 0?{}:m,v=y.className,g=j.cloneElement(p,Ta(Ta({},l),{},{style:Ta(Ta({},x),f),className:v}));return g};return u===1?d(j.Children.only(i)):z.createElement("div",null,j.Children.map(i,function(h){return d(h)}))}}]),r}(j.PureComponent);Wa.displayName="Animate";Wa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wa.propTypes={from:jt.oneOfType([jt.object,jt.string]),to:jt.oneOfType([jt.object,jt.string]),attributeName:jt.string,duration:jt.number,begin:jt.number,easing:jt.oneOfType([jt.string,jt.func]),steps:jt.arrayOf(jt.shape({duration:jt.number.isRequired,style:jt.object.isRequired,easing:jt.oneOfType([jt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),jt.func]),properties:jt.arrayOf("string"),onAnimationEnd:jt.func})),children:jt.oneOfType([jt.node,jt.func]),isActive:jt.bool,canBegin:jt.bool,onAnimationEnd:jt.func,shouldReAnimate:jt.bool,onAnimationStart:jt.func,onAnimationReStart:jt.func};function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G0.apply(this,arguments)}function eY(e,t){return aY(e)||nY(e,t)||rY(e,t)||tY()}function tY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rY(e,t){if(e){if(typeof e=="string")return tS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tS(e,t)}}function tS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function aY(e){if(Array.isArray(e))return e}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){iY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iY(e,t,r){return t=oY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oY(e){var t=sY(e,"string");return qu(t)=="symbol"?t:t+""}function sY(e,t){if(qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aS=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=i[h]>o?o:i[h];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+l*d[0],",").concat(r)),f+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-l*d[2],",").concat(r+a)),f+="L ".concat(t+l*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);f="M ".concat(t,",").concat(r+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+l*y,",").concat(r,`
            L `).concat(t+n-l*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*y,`
            L `).concat(t+n,",").concat(r+a-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-l*y,",").concat(r+a,`
            L `).concat(t+l*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*y," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},lY=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=f&&a>=d&&a<=h}return!1},cY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},p1=function(t){var r=nS(nS({},cY),t),n=j.useRef(),a=j.useState(-1),i=eY(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch{}},[]);var l=r.x,u=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,v=r.isAnimationActive,g=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var b=it("recharts-rectangle",p);return g?z.createElement(Wa,{canBegin:o>0,from:{width:f,height:d,x:l,y:u},to:{width:f,height:d,x:l,y:u},duration:m,animationEasing:y,isActive:g},function(S){var k=S.width,w=S.height,P=S.x,C=S.y;return z.createElement(Wa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,isActive:v,easing:y},z.createElement("path",G0({},Xe(r,!0),{className:b,d:aS(P,C,k,w,h),ref:n})))}):z.createElement("path",G0({},Xe(r,!0),{className:b,d:aS(l,u,f,d,h)}))};function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ly.apply(this,arguments)}var lp=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=it("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",Ly({},Xe(t,!1),o0(t),{className:o,cx:r,cy:n,r:a})):null};function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}var uY=["x","y","top","left","width","height","className"];function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){dY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dY(e,t,r){return t=hY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hY(e){var t=pY(e,"string");return Zu(t)=="symbol"?t:t+""}function pY(e,t){if(Zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gY(e,t){if(e==null)return{};var r=mY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var yY=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},vY=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,u=l===void 0?0:l,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,y=t.className,m=gY(t,uY),x=fY({x:n,y:i,top:s,left:u,width:d,height:p},m);return!ge(n)||!ge(i)||!ge(d)||!ge(p)||!ge(s)||!ge(u)?null:z.createElement("path",By({},Xe(x,!0),{className:it("recharts-cross",y),d:yY(n,i,d,p,s,u)}))},xY=Cj,bY=xY(Object.getPrototypeOf,Object),wY=bY,kY=Ri,SY=wY,jY=Li,PY="[object Object]",CY=Function.prototype,NY=Object.prototype,fC=CY.toString,OY=NY.hasOwnProperty,MY=fC.call(Object);function _Y(e){if(!jY(e)||kY(e)!=PY)return!1;var t=SY(e);if(t===null)return!0;var r=OY.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&fC.call(r)==MY}var AY=_Y;const TY=Bt(AY);var EY=Ri,$Y=Li,DY="[object Boolean]";function IY(e){return e===!0||e===!1||$Y(e)&&EY(e)==DY}var RY=IY;const LY=Bt(RY);function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U0.apply(this,arguments)}function BY(e,t){return UY(e)||GY(e,t)||zY(e,t)||FY()}function FY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zY(e,t){if(e){if(typeof e=="string")return oS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oS(e,t)}}function oS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function UY(e){if(Array.isArray(e))return e}function sS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sS(Object(r),!0).forEach(function(n){WY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WY(e,t,r){return t=VY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VY(e){var t=HY(e,"string");return Qu(t)=="symbol"?t:t+""}function HY(e,t){if(Qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cS=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},XY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KY=function(t){var r=lS(lS({},XY),t),n=j.useRef(),a=j.useState(-1),i=BY(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&s(b)}catch{}},[]);var l=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,v=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var g=it("recharts-trapezoid",p);return v?z.createElement(Wa,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:u},duration:m,animationEasing:y,isActive:v},function(b){var S=b.upperWidth,k=b.lowerWidth,w=b.height,P=b.x,C=b.y;return z.createElement(Wa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,easing:y},z.createElement("path",U0({},Xe(r,!0),{className:g,d:cS(P,C,S,k,w),ref:n})))}):z.createElement("g",null,z.createElement("path",U0({},Xe(r,!0),{className:g,d:cS(l,u,f,d,h)})))},YY=["option","shapeType","propTransformer","activeClassName","isActive"];function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function qY(e,t){if(e==null)return{};var r=ZY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){QY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QY(e,t,r){return t=JY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JY(e){var t=eq(e,"string");return Ju(t)=="symbol"?t:t+""}function eq(e,t){if(Ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tq(e,t){return W0(W0({},t),e)}function rq(e,t){return e==="symbols"}function fS(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return z.createElement(p1,r);case"trapezoid":return z.createElement(KY,r);case"sector":return z.createElement(eC,r);case"symbols":if(rq(t))return z.createElement(Yh,r);break;default:return null}}function nq(e){return j.isValidElement(e)?e.props:e}function Fy(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?tq:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=qY(e,YY),u;if(j.isValidElement(t))u=j.cloneElement(t,W0(W0({},l),nq(t)));else if(Ye(t))u=t(l);else if(TY(t)&&!LY(t)){var f=a(t,l);u=z.createElement(fS,{shapeType:r,elementProps:f})}else{var d=l;u=z.createElement(fS,{shapeType:r,elementProps:d})}return s?z.createElement(bt,{className:o},u):u}function cp(e,t){return t!=null&&"trapezoids"in e.props}function up(e,t){return t!=null&&"sectors"in e.props}function ef(e,t){return t!=null&&"points"in e.props}function aq(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function iq(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function oq(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function sq(e,t){var r;return cp(e,t)?r=aq:up(e,t)?r=iq:ef(e,t)&&(r=oq),r}function lq(e,t){var r;return cp(e,t)?r="trapezoids":up(e,t)?r="sectors":ef(e,t)&&(r="points"),r}function cq(e,t){if(cp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(up(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return ef(e,t)?t.payload:{}}function uq(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=lq(r,t),i=cq(r,t),o=n.filter(function(l,u){var f=vs(i,l),d=r.props[a].filter(function(y){var m=sq(r,t);return m(y,t)}),h=r.props[a].indexOf(d[d.length-1]),p=u===h;return f&&p}),s=n.indexOf(o[o.length-1]);return s}var fq=Math.ceil,dq=Math.max;function hq(e,t,r,n){for(var a=-1,i=dq(fq((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var pq=hq,gq=Vj,dS=1/0,mq=17976931348623157e292;function yq(e){if(!e)return e===0?e:0;if(e=gq(e),e===dS||e===-dS){var t=e<0?-1:1;return t*mq}return e===e?e:0}var dC=yq,vq=pq,xq=Qh,Mg=dC;function bq(e){return function(t,r,n){return n&&typeof n!="number"&&xq(t,r,n)&&(r=n=void 0),t=Mg(t),r===void 0?(r=t,t=0):r=Mg(r),n=n===void 0?t<r?1:-1:Mg(n),vq(t,r,n,e)}}var wq=bq,kq=wq,Sq=kq(),jq=Sq;const V0=Bt(jq);function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){hC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hC(e,t,r){return t=Pq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pq(e){var t=Cq(e,"string");return tf(t)=="symbol"?t:t+""}function Cq(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nq=["Webkit","Moz","O","ms"],Oq=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Nq.reduce(function(i,o){return pS(pS({},i),{},hC({},o+n,r))},{});return a[t]=r,a};function Ml(e){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(e)}function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H0.apply(this,arguments)}function gS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(r),!0).forEach(function(n){Kn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gC(n.key),n)}}function _q(e,t,r){return t&&mS(e.prototype,t),r&&mS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aq(e,t,r){return t=X0(t),Tq(e,pC()?Reflect.construct(t,r||[],X0(e).constructor):t.apply(e,r))}function Tq(e,t){if(t&&(Ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eq(e)}function Eq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pC=function(){return!!e})()}function X0(e){return X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X0(e)}function $q(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zy(e,t)}function zy(e,t){return zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zy(e,t)}function Kn(e,t,r){return t=gC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gC(e){var t=Dq(e,"string");return Ml(t)=="symbol"?t:t+""}function Dq(e,t){if(Ml(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Iq=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=eu().domain(V0(0,l)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},yS=function(t){return t.changedTouches&&!!t.changedTouches.length},_l=function(e){function t(r){var n;return Mq(this,t),n=Aq(this,t,[r]),Kn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Kn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Kn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),Kn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Kn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Kn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Kn(n,"handleSlideDragStart",function(a){var i=yS(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return $q(t,e),_q(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(o,d),y=t.getIndexInRange(o,h);return{startIndex:p-p%l,endIndex:y===f?f:y-y%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=Lr(i[n],s,n);return Ye(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,u=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,y=l.onChange,m=n.pageX-i;m>0?m=Math.min(m,u+f-d-s,u+f-d-o):m<0&&(m=Math.max(m,u-o,u-s));var x=this.getIndex({startX:o+m,endX:s+m});(x.startIndex!==h||x.endIndex!==p)&&y&&y(x),this.setState({startX:o+m,endX:s+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=yS(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,y=f.onChange,m=f.gap,x=f.data,v={startX:this.state.startX,endX:this.state.endX},g=n.pageX-i;g>0?g=Math.min(g,d+h-p-u):g<0&&(g=Math.max(g,d-u)),v[o]=u+g;var b=this.getIndex(v),S=b.startIndex,k=b.endIndex,w=function(){var C=x.length-1;return o==="startX"&&(s>l?S%m===0:k%m===0)||s<l&&k===C||o==="endX"&&(s>l?k%m===0:S%m===0)||s>l&&k===C};this.setState(Kn(Kn({},o,u+g),"brushMoveStartX",n.pageX),function(){y&&w()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=s.length)){var p=s[h];a==="startX"&&p>=u||a==="endX"&&p<=l||this.setState(Kn({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return z.createElement("rect",{stroke:u,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.data,u=n.children,f=n.padding,d=j.Children.only(u);return d?z.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,l=this.props,u=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,y=l.data,m=l.startIndex,x=l.endIndex,v=Math.max(n,this.props.x),g=_g(_g({},Xe(this.props,!1)),{},{x:v,y:u,width:f,height:d}),b=p||"Min value: ".concat((i=y[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[x])===null||o===void 0?void 0:o.name);return z.createElement(bt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),s.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,g))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,y={pointerEvents:"none",fill:u};return z.createElement(bt,{className:"recharts-brush-texts"},z.createElement(b0,H0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:o+s/2},y),this.getTextOfTick(a)),z.createElement(b0,H0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:o+s/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,l=n.y,u=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,y=h.endX,m=h.isTextActive,x=h.isSlideMoving,v=h.isTravellerMoving,g=h.isTravellerFocused;if(!a||!a.length||!ge(s)||!ge(l)||!ge(u)||!ge(f)||u<=0||f<=0)return null;var b=it("recharts-brush",i),S=z.Children.count(o)===1,k=Oq("userSelect","none");return z.createElement(bt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(m||x||v||g||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(i+s/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),z.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return z.isValidElement(n)?i=z.cloneElement(n,a):Ye(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return _g({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?Iq({data:i,width:o,x:s,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>a?s=l:o=l}return a>=n[s]?s:o}}])}(j.PureComponent);Kn(_l,"displayName","Brush");Kn(_l,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Rq=Bx;function Lq(e,t){var r;return Rq(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Bq=Lq,Fq=vj,zq=No,Gq=Bq,Uq=zn,Wq=Qh;function Vq(e,t,r){var n=Uq(e)?Fq:Gq;return r&&Wq(e,t,r)&&(t=void 0),n(e,zq(t))}var Hq=Vq;const Xq=Bt(Hq);var ai=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},vS=Fj;function Kq(e,t,r){t=="__proto__"&&vS?vS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Yq=Kq,qq=Yq,Zq=Lj,Qq=No;function Jq(e,t){var r={};return t=Qq(t),Zq(e,function(n,a,i){qq(r,a,t(n,a,i))}),r}var eZ=Jq;const tZ=Bt(eZ);function rZ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var nZ=rZ,aZ=Bx;function iZ(e,t){var r=!0;return aZ(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var oZ=iZ,sZ=nZ,lZ=oZ,cZ=No,uZ=zn,fZ=Qh;function dZ(e,t,r){var n=uZ(e)?sZ:lZ;return r&&fZ(e,t,r)&&(t=void 0),n(e,cZ(t))}var hZ=dZ;const mC=Bt(hZ);var pZ=["x","y"];function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gy.apply(this,arguments)}function xS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xS(Object(r),!0).forEach(function(n){gZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gZ(e,t,r){return t=mZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mZ(e){var t=yZ(e,"string");return rf(t)=="symbol"?t:t+""}function yZ(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vZ(e,t){if(e==null)return{};var r=xZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bZ(e,t){var r=e.x,n=e.y,a=vZ(e,pZ),i="".concat(r),o=parseInt(i,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Rc(Rc(Rc(Rc(Rc({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function bS(e){return z.createElement(Fy,Gy({shapeType:"rectangle",propTransformer:bZ,activeClassName:"recharts-active-bar"},e))}var wZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=ge(n)||DT(n);return i?t(n,a):(i||bs(),r)}},kZ=["value","background"],yC;function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function SZ(e,t){if(e==null)return{};var r=jZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0.apply(this,arguments)}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(r),!0).forEach(function(n){ao(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xC(n.key),n)}}function CZ(e,t,r){return t&&kS(e.prototype,t),r&&kS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NZ(e,t,r){return t=Y0(t),OZ(e,vC()?Reflect.construct(t,r||[],Y0(e).constructor):t.apply(e,r))}function OZ(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MZ(e)}function MZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vC=function(){return!!e})()}function Y0(e){return Y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y0(e)}function _Z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uy(e,t)}function ao(e,t,r){return t=xC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xC(e){var t=AZ(e,"string");return Al(t)=="symbol"?t:t+""}function AZ(e,t){if(Al(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Al(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xf=function(e){function t(){var r;PZ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=NZ(this,t,[].concat(a)),ao(r,"state",{isAnimationFinished:!1}),ao(r,"id",Ns("recharts-bar-")),ao(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ao(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return _Z(t,e),CZ(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,u=i.activeBar,f=Xe(this.props,!1);return n&&n.map(function(d,h){var p=h===l,y=p?u:o,m=jr(jr(jr({},f),d),{},{isActive:p,option:y,index:h,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return z.createElement(bt,K0({className:"recharts-bar-rectangle"},Pu(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),z.createElement(bS,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return z.createElement(Wa,{begin:l,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,m=i.map(function(x,v){var g=h&&h[v];if(g){var b=br(g.x,x.x),S=br(g.y,x.y),k=br(g.width,x.width),w=br(g.height,x.height);return jr(jr({},x),{},{x:b(y),y:S(y),width:k(y),height:w(y)})}if(o==="horizontal"){var P=br(0,x.height),C=P(y);return jr(jr({},x),{},{y:x.y+x.height-C,height:C})}var M=br(0,x.width),N=M(y);return jr(jr({},x),{},{width:N})});return z.createElement(bt,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!vs(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=Xe(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,h=SZ(u,kZ);if(!d)return null;var p=jr(jr(jr(jr(jr({},h),{},{fill:"#eee"},d),l),Pu(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return z.createElement(bS,K0({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Ln(f,sc);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(x,v){var g=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:g,errorVal:Lr(x,v)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return z.createElement(bt,y,d.map(function(m){return z.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,f=n.top,d=n.width,h=n.height,p=n.isAnimationActive,y=n.background,m=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,v=it("recharts-bar",o),g=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,S=g||b,k=We(m)?this.id:m;return z.createElement(bt,{className:v},g||b?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(k)},z.createElement("rect",{x:g?u:u-d/2,y:b?f:f-h/2,width:g?d:d*2,height:b?h:h*2}))):null,z.createElement(bt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(k,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,k),(!p||x)&&ni.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);yC=xf;ao(xf,"displayName","Bar");ao(xf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Oo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ao(xf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=aH(n,r);if(!p)return null;var y=t.layout,m=r.type.defaultProps,x=m!==void 0?jr(jr({},m),r.props):r.props,v=x.dataKey,g=x.children,b=x.minPointSize,S=y==="horizontal"?o:i,k=u?S.scale.domain():null,w=dH({numericAxis:S}),P=Ln(g,Gx),C=d.map(function(M,N){var $,_,A,D,R,L;u?$=iH(u[f+N],k):($=Lr(M,v),Array.isArray($)||($=[w,$]));var T=wZ(b,yC.defaultProps.minPointSize)($[1],N);if(y==="horizontal"){var E,I=[o.scale($[0]),o.scale($[1])],G=I[0],J=I[1];_=jk({axis:i,ticks:s,bandSize:a,offset:p.offset,entry:M,index:N}),A=(E=J??G)!==null&&E!==void 0?E:void 0,D=p.size;var K=G-J;if(R=Number.isNaN(K)?0:K,L={x:_,y:o.y,width:D,height:o.height},Math.abs(T)>0&&Math.abs(R)<Math.abs(T)){var F=Fa(R||T)*(Math.abs(T)-Math.abs(R));A-=F,R+=F}}else{var ee=[i.scale($[0]),i.scale($[1])],se=ee[0],Y=ee[1];if(_=se,A=jk({axis:o,ticks:l,bandSize:a,offset:p.offset,entry:M,index:N}),D=Y-se,R=p.size,L={x:i.x,y:A,width:i.width,height:R},Math.abs(T)>0&&Math.abs(D)<Math.abs(T)){var le=Fa(D||T)*(Math.abs(T)-Math.abs(D));D+=le}}return jr(jr(jr({},M),{},{x:_,y:A,width:D,height:R,value:u?$:$[1],payload:M,background:L},P&&P[N]&&P[N].props),{},{tooltipPayload:[ZP(r,M)],tooltipPosition:{x:_+D/2,y:A+R/2}})});return jr({data:C,layout:y},h)});function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function TZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bC(n.key),n)}}function EZ(e,t,r){return t&&SS(e.prototype,t),r&&SS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(r),!0).forEach(function(n){fp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fp(e,t,r){return t=bC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bC(e){var t=$Z(e,"string");return nf(t)=="symbol"?t:t+""}function $Z(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g1=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!qn(u,xf);return f.reduce(function(p,y){var m=r[y],x=m.orientation,v=m.domain,g=m.padding,b=g===void 0?{}:g,S=m.mirror,k=m.reversed,w="".concat(x).concat(S?"Mirror":""),P,C,M,N,$;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var _=v[1]-v[0],A=1/0,D=m.categoricalDomain.sort(BT);if(D.forEach(function(ee,se){se>0&&(A=Math.min((ee||0)-(D[se-1]||0),A))}),Number.isFinite(A)){var R=A/_,L=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(P=R*L/2),m.padding==="no-gap"){var T=ys(t.barCategoryGap,R*L),E=R*L/2;P=E-T-(E-T)/L*T}}}a==="xAxis"?C=[n.left+(b.left||0)+(P||0),n.left+n.width-(b.right||0)-(P||0)]:a==="yAxis"?C=l==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(P||0),n.top+n.height-(b.bottom||0)-(P||0)]:C=m.range,k&&(C=[C[1],C[0]]);var I=rH(m,i,h),G=I.scale,J=I.realScaleType;G.domain(v).range(C),nH(G);var K=fH(G,Da(Da({},m),{},{realScaleType:J}));a==="xAxis"?($=x==="top"&&!S||x==="bottom"&&S,M=n.left,N=d[w]-$*m.height):a==="yAxis"&&($=x==="left"&&!S||x==="right"&&S,M=d[w]-$*m.width,N=n.top);var F=Da(Da(Da({},m),K),{},{realScaleType:J,x:M,y:N,scale:G,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return F.bandSize=D0(F,K),!m.hide&&a==="xAxis"?d[w]+=($?-1:1)*F.height:m.hide||(d[w]+=($?-1:1)*F.width),Da(Da({},p),{},fp({},y,F))},{})},wC=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},DZ=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return wC({x:r,y:n},{x:a,y:i})},kC=function(){function e(t){TZ(this,e),this.scale=t}return EZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();fp(kC,"EPS",1e-4);var m1=function(t){var r=Object.keys(t).reduce(function(n,a){return Da(Da({},n),{},fp({},a,kC.create(t[a])))},{});return Da(Da({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return tZ(a,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return mC(a,function(i,o){return r[o].isInRange(i)})}})};function IZ(e){return(e%180+180)%180}var RZ=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=IZ(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},LZ=No,BZ=pf,FZ=qh;function zZ(e){return function(t,r,n){var a=Object(t);if(!BZ(t)){var i=LZ(r);t=FZ(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var GZ=zZ,UZ=dC;function WZ(e){var t=UZ(e),r=t%1;return t===t?r?t-r:t:0}var VZ=WZ,HZ=Tj,XZ=No,KZ=VZ,YZ=Math.max;function qZ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:KZ(r);return a<0&&(a=YZ(n+a,0)),HZ(e,XZ(t),a)}var ZZ=qZ,QZ=GZ,JZ=ZZ,eQ=QZ(JZ),tQ=eQ;const rQ=Bt(tQ);var nQ=z8(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),y1=j.createContext(void 0),v1=j.createContext(void 0),SC=j.createContext(void 0),jC=j.createContext({}),PC=j.createContext(void 0),CC=j.createContext(0),NC=j.createContext(0),PS=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,l=t.width,u=t.height,f=nQ(i);return z.createElement(y1.Provider,{value:n},z.createElement(v1.Provider,{value:a},z.createElement(jC.Provider,{value:i},z.createElement(SC.Provider,{value:f},z.createElement(PC.Provider,{value:o},z.createElement(CC.Provider,{value:u},z.createElement(NC.Provider,{value:l},s)))))))},aQ=function(){return j.useContext(PC)},OC=function(t){var r=j.useContext(y1);r==null&&bs();var n=r[t];return n==null&&bs(),n},iQ=function(){var t=j.useContext(y1);return qi(t)},oQ=function(){var t=j.useContext(v1),r=rQ(t,function(n){return mC(n.domain,Number.isFinite)});return r||qi(t)},MC=function(t){var r=j.useContext(v1);r==null&&bs();var n=r[t];return n==null&&bs(),n},sQ=function(){var t=j.useContext(SC);return t},lQ=function(){return j.useContext(jC)},x1=function(){return j.useContext(NC)},b1=function(){return j.useContext(CC)};function Tl(e){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function cQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AC(n.key),n)}}function fQ(e,t,r){return t&&uQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dQ(e,t,r){return t=q0(t),hQ(e,_C()?Reflect.construct(t,r||[],q0(e).constructor):t.apply(e,r))}function hQ(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pQ(e)}function pQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_C=function(){return!!e})()}function q0(e){return q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q0(e)}function gQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}function Wy(e,t){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wy(e,t)}function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(n){w1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w1(e,t,r){return t=AC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AC(e){var t=mQ(e,"string");return Tl(t)=="symbol"?t:t+""}function mQ(e,t){if(Tl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function yQ(e,t){return wQ(e)||bQ(e,t)||xQ(e,t)||vQ()}function vQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xQ(e,t){if(e){if(typeof e=="string")return OS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OS(e,t)}}function OS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function wQ(e){if(Array.isArray(e))return e}function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vy.apply(this,arguments)}var kQ=function(t,r){var n;return z.isValidElement(t)?n=z.cloneElement(t,r):Ye(t)?n=t(r):n=z.createElement("line",Vy({},r,{className:"recharts-reference-line-line"})),n},SQ=function(t,r,n,a,i,o,s,l,u){var f=i.x,d=i.y,h=i.width,p=i.height;if(n){var y=u.y,m=t.y.apply(y,{position:o});if(ai(u,"discard")&&!t.y.isInRange(m))return null;var x=[{x:f+h,y:m},{x:f,y:m}];return l==="left"?x.reverse():x}if(r){var v=u.x,g=t.x.apply(v,{position:o});if(ai(u,"discard")&&!t.x.isInRange(g))return null;var b=[{x:g,y:d+p},{x:g,y:d}];return s==="top"?b.reverse():b}if(a){var S=u.segment,k=S.map(function(w){return t.apply(w,{position:o})});return ai(u,"discard")&&Xq(k,function(w){return!t.isInRange(w)})?null:k}return null};function jQ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,u=aQ(),f=OC(a),d=MC(i),h=sQ();if(!u||!h)return null;Ci(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=m1({x:f.scale,y:d.scale}),y=Rr(t),m=Rr(r),x=n&&n.length===2,v=SQ(p,y,m,x,h,e.position,f.orientation,d.orientation,e);if(!v)return null;var g=yQ(v,2),b=g[0],S=b.x,k=b.y,w=g[1],P=w.x,C=w.y,M=ai(e,"hidden")?"url(#".concat(u,")"):void 0,N=NS(NS({clipPath:M},Xe(e,!0)),{},{x1:S,y1:k,x2:P,y2:C});return z.createElement(bt,{className:it("recharts-reference-line",s)},kQ(o,N),Jr.renderCallByParent(e,DZ({x1:S,y1:k,x2:P,y2:C})))}var io=function(e){function t(){return cQ(this,t),dQ(this,t,arguments)}return gQ(t,e),fQ(t,[{key:"render",value:function(){return z.createElement(jQ,this.props)}}])}(z.Component);w1(io,"displayName","ReferenceLine");w1(io,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(this,arguments)}function El(e){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},El(e)}function MS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(r),!0).forEach(function(n){dp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EC(n.key),n)}}function NQ(e,t,r){return t&&CQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OQ(e,t,r){return t=Z0(t),MQ(e,TC()?Reflect.construct(t,r||[],Z0(e).constructor):t.apply(e,r))}function MQ(e,t){if(t&&(El(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Q(e)}function _Q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TC=function(){return!!e})()}function Z0(e){return Z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z0(e)}function AQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xy(e,t)}function Xy(e,t){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xy(e,t)}function dp(e,t,r){return t=EC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EC(e){var t=TQ(e,"string");return El(t)=="symbol"?t:t+""}function TQ(e,t){if(El(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(El(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EQ=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=m1({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return ai(t,"discard")&&!o.isInRange(s)?null:s},bf=function(e){function t(){return PQ(this,t),OQ(this,t,arguments)}return AQ(t,e),NQ(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=Rr(a),f=Rr(i);if(Ci(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=EQ(this.props);if(!d)return null;var h=d.x,p=d.y,y=this.props,m=y.shape,x=y.className,v=ai(this.props,"hidden")?"url(#".concat(l,")"):void 0,g=_S(_S({clipPath:v},Xe(this.props,!0)),{},{cx:h,cy:p});return z.createElement(bt,{className:it("recharts-reference-dot",x)},t.renderDot(m,g),Jr.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(z.Component);dp(bf,"displayName","ReferenceDot");dp(bf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});dp(bf,"renderDot",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Ye(e)?r=e(t):r=z.createElement(lp,Hy({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ky.apply(this,arguments)}function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(r),!0).forEach(function(n){hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DC(n.key),n)}}function IQ(e,t,r){return t&&DQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RQ(e,t,r){return t=Q0(t),LQ(e,$C()?Reflect.construct(t,r||[],Q0(e).constructor):t.apply(e,r))}function LQ(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BQ(e)}function BQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($C=function(){return!!e})()}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q0(e)}function FQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yy(e,t)}function Yy(e,t){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yy(e,t)}function hp(e,t,r){return t=DC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DC(e){var t=zQ(e,"string");return $l(t)=="symbol"?t:t+""}function zQ(e,t){if($l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GQ=function(t,r,n,a,i){var o=i.x1,s=i.x2,l=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var h=m1({x:f.scale,y:d.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ai(i,"discard")&&(!h.isInRange(p)||!h.isInRange(y))?null:wC(p,y)},wf=function(e){function t(){return $Q(this,t),RQ(this,t,arguments)}return FQ(t,e),IQ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,f=n.clipPathId;Ci(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Rr(a),h=Rr(i),p=Rr(o),y=Rr(s),m=this.props.shape;if(!d&&!h&&!p&&!y&&!m)return null;var x=GQ(d,h,p,y,this.props);if(!x&&!m)return null;var v=ai(this.props,"hidden")?"url(#".concat(f,")"):void 0;return z.createElement(bt,{className:it("recharts-reference-area",l)},t.renderRect(m,TS(TS({clipPath:v},Xe(this.props,!0)),x)),Jr.renderCallByParent(this.props,x))}}])}(z.Component);hp(wf,"displayName","ReferenceArea");hp(wf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});hp(wf,"renderRect",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Ye(e)?r=e(t):r=z.createElement(p1,Ky({},t,{className:"recharts-reference-area-rect"})),r});function IC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function UQ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return RZ(n,r)}function WQ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function J0(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function VQ(e,t){return IC(e,t+1)}function HQ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,l=0,u=1,f=o,d=function(){var y=n==null?void 0:n[l];if(y===void 0)return{v:IC(n,u)};var m=l,x,v=function(){return x===void 0&&(x=r(y,m)),x},g=y.coordinate,b=l===0||J0(e,g,v,f,s);b||(l=0,f=o,u+=1),b&&(f=g+e*(v()/2+a),l+=u)},h;u<=i.length;)if(h=d(),h)return h.v;return[]}function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(n){XQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XQ(e,t,r){return t=KQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KQ(e){var t=YQ(e,"string");return af(t)=="symbol"?t:t+""}function YQ(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qQ(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,l=t.end,u=function(h){var p=i[h],y,m=function(){return y===void 0&&(y=r(p,h)),y};if(h===o-1){var x=e*(p.coordinate+e*m()/2-l);i[h]=p=dn(dn({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate})}else i[h]=p=dn(dn({},p),{},{tickCoord:p.coordinate});var v=J0(e,p.tickCoord,m,s,l);v&&(l=p.tickCoord-e*(m()/2+a),i[h]=dn(dn({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function ZQ(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,l=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),h=e*(f.coordinate+e*d/2-u);o[s-1]=f=dn(dn({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var p=J0(e,f.tickCoord,function(){return d},l,u);p&&(u=f.tickCoord-e*(d/2+a),o[s-1]=dn(dn({},f),{},{isShow:!0}))}for(var y=i?s-1:s,m=function(g){var b=o[g],S,k=function(){return S===void 0&&(S=r(b,g)),S};if(g===0){var w=e*(b.coordinate-e*k()/2-l);o[g]=b=dn(dn({},b),{},{tickCoord:w<0?b.coordinate-w*e:b.coordinate})}else o[g]=b=dn(dn({},b),{},{tickCoord:b.coordinate});var P=J0(e,b.tickCoord,k,l,u);P&&(l=b.tickCoord+e*(k()/2+a),o[g]=dn(dn({},b),{},{isShow:!0}))},x=0;x<y;x++)m(x);return o}function k1(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(ge(l)||Oo.isSsr)return VQ(a,typeof l=="number"&&ge(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",y=f&&p==="width"?Jc(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,S){var k=Ye(u)?u(b.value,S):b.value;return p==="width"?UQ(Jc(k,{fontSize:t,letterSpacing:r}),y,d):Jc(k,{fontSize:t,letterSpacing:r})[p]},x=a.length>=2?Fa(a[1].coordinate-a[0].coordinate):1,v=WQ(i,x,p);return l==="equidistantPreserveStart"?HQ(x,v,m,a,o):(l==="preserveStart"||l==="preserveStartEnd"?h=ZQ(x,v,m,a,o,l==="preserveStartEnd"):h=qQ(x,v,m,a,o),h.filter(function(g){return g.isShow}))}var QQ=["viewBox"],JQ=["viewBox"],eJ=["ticks"];function Dl(e){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qs.apply(this,arguments)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){S1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ag(e,t){if(e==null)return{};var r=tJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LC(n.key),n)}}function nJ(e,t,r){return t&&DS(e.prototype,t),r&&DS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aJ(e,t,r){return t=eh(t),iJ(e,RC()?Reflect.construct(t,r||[],eh(e).constructor):t.apply(e,r))}function iJ(e,t){if(t&&(Dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oJ(e)}function oJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RC=function(){return!!e})()}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eh(e)}function sJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qy(e,t)}function qy(e,t){return qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qy(e,t)}function S1(e,t,r){return t=LC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LC(e){var t=lJ(e,"string");return Dl(t)=="symbol"?t:t+""}function lJ(e,t){if(Dl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lc=function(e){function t(r){var n;return rJ(this,t),n=aJ(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return sJ(t,e),nJ(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Ag(n,QQ),s=this.props,l=s.viewBox,u=Ag(s,JQ);return!sl(i,l)||!sl(o,u)||!sl(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,p,y,m,x,v,g,b=d?-1:1,S=n.tickSize||f,k=ge(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=y=n.coordinate,x=o+ +!d*l,m=x-b*S,g=m-b*h,v=k;break;case"left":m=x=n.coordinate,y=i+ +!d*s,p=y-b*S,v=p-b*h,g=k;break;case"right":m=x=n.coordinate,y=i+ +d*s,p=y+b*S,v=p+b*h,g=k;break;default:p=y=n.coordinate,x=o+ +d*l,m=x+b*S,g=m+b*h,v=k;break}return{line:{x1:p,y1:m,x2:y,y2:x},tick:{x:v,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,f=n.axisLine,d=Er(Er(Er({},Xe(this.props,!1)),Xe(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=Er(Er({},d),{},{x1:a,y1:i+h*s,x2:a+o,y2:i+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);d=Er(Er({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+s})}return z.createElement("line",Qs({},d,{className:it("recharts-cartesian-axis-line",wa(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,l=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,h=s.unit,p=k1(Er(Er({},this.props),{},{ticks:n}),a,i),y=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),x=Xe(this.props,!1),v=Xe(f,!1),g=Er(Er({},x),{},{fill:"none"},Xe(l,!1)),b=p.map(function(S,k){var w=o.getTickLineCoord(S),P=w.line,C=w.tick,M=Er(Er(Er(Er({textAnchor:y,verticalAnchor:m},x),{},{stroke:"none",fill:u},v),C),{},{index:k,payload:S,visibleTicksCount:p.length,tickFormatter:d});return z.createElement(bt,Qs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Pu(o.props,S,k)),l&&z.createElement("line",Qs({},g,P,{className:it("recharts-cartesian-axis-tick-line",wa(l,"className"))})),f&&t.renderTickItem(f,M,"".concat(Ye(d)?d(S.value,k):S.value).concat(h||"")))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,p=Ag(d,eJ),y=h;return Ye(l)&&(y=h&&h.length>0?l(this.props):l(p)),o<=0||s<=0||!y||!y.length?null:z.createElement(bt,{className:it("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Jr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=it(a.className,"recharts-cartesian-axis-tick-value");return z.isValidElement(n)?o=z.cloneElement(n,Er(Er({},a),{},{className:s})):Ye(n)?o=n(Er(Er({},a),{},{className:s})):o=z.createElement(b0,Qs({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);S1(lc,"displayName","CartesianAxis");S1(lc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var cJ=["x1","y1","x2","y2","key"],uJ=["offset"];function ws(e){"@babel/helpers - typeof";return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ws(e)}function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){fJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fJ(e,t,r){return t=dJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dJ(e){var t=hJ(e,"string");return ws(t)=="symbol"?t:t+""}function hJ(e,t){if(ws(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ws(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jo.apply(this,arguments)}function RS(e,t){if(e==null)return{};var r=pJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var gJ=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return z.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function BC(e,t){var r;if(z.isValidElement(e))r=z.cloneElement(e,t);else if(Ye(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=RS(t,cJ),u=Xe(l,!1);u.offset;var f=RS(u,uJ);r=z.createElement("line",Jo({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function mJ(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=pn(pn({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return BC(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function yJ(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=pn(pn({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return BC(a,u)});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function vJ(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var f=s.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var y=!f[p+1],m=y?a+o-h:f[p+1]-h;if(m<=0)return null;var x=p%t.length;return z.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:m,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function xJ(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var y=!f[p+1],m=y?i+s-h:f[p+1]-h;if(m<=0)return null;var x=p%n.length;return z.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:m,height:l,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var bJ=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return YP(k1(pn(pn(pn({},lc.defaultProps),n),{},{ticks:Si(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},wJ=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return YP(k1(pn(pn(pn({},lc.defaultProps),n),{},{ticks:Si(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Rs={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ii(e){var t,r,n,a,i,o,s=x1(),l=b1(),u=lQ(),f=pn(pn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Rs.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Rs.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Rs.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Rs.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Rs.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Rs.verticalFill,x:ge(e.x)?e.x:u.left,y:ge(e.y)?e.y:u.top,width:ge(e.width)?e.width:u.width,height:ge(e.height)?e.height:u.height}),d=f.x,h=f.y,p=f.width,y=f.height,m=f.syncWithTicks,x=f.horizontalValues,v=f.verticalValues,g=iQ(),b=oQ();if(!ge(p)||p<=0||!ge(y)||y<=0||!ge(d)||d!==+d||!ge(h)||h!==+h)return null;var S=f.verticalCoordinatesGenerator||bJ,k=f.horizontalCoordinatesGenerator||wJ,w=f.horizontalPoints,P=f.verticalPoints;if((!w||!w.length)&&Ye(k)){var C=x&&x.length,M=k({yAxis:b?pn(pn({},b),{},{ticks:C?x:b.ticks}):void 0,width:s,height:l,offset:u},C?!0:m);Ci(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ws(M),"]")),Array.isArray(M)&&(w=M)}if((!P||!P.length)&&Ye(S)){var N=v&&v.length,$=S({xAxis:g?pn(pn({},g),{},{ticks:N?v:g.ticks}):void 0,width:s,height:l,offset:u},N?!0:m);Ci(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ws($),"]")),Array.isArray($)&&(P=$)}return z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(gJ,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),z.createElement(mJ,Jo({},f,{offset:u,horizontalPoints:w,xAxis:g,yAxis:b})),z.createElement(yJ,Jo({},f,{offset:u,verticalPoints:P,xAxis:g,yAxis:b})),z.createElement(vJ,Jo({},f,{horizontalPoints:w})),z.createElement(xJ,Jo({},f,{verticalPoints:P})))}ii.displayName="CartesianGrid";var kJ=["type","layout","connectNulls","ref"],SJ=["key"];function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function LS(e,t){if(e==null)return{};var r=jJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nu.apply(this,arguments)}function BS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BS(Object(r),!0).forEach(function(n){Ia(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ls(e){return OJ(e)||NJ(e)||CJ(e)||PJ()}function PJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CJ(e,t){if(e){if(typeof e=="string")return Zy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zy(e,t)}}function NJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OJ(e){if(Array.isArray(e))return Zy(e)}function Zy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zC(n.key),n)}}function _J(e,t,r){return t&&FS(e.prototype,t),r&&FS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AJ(e,t,r){return t=th(t),TJ(e,FC()?Reflect.construct(t,r||[],th(e).constructor):t.apply(e,r))}function TJ(e,t){if(t&&(Il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EJ(e)}function EJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FC=function(){return!!e})()}function th(e){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},th(e)}function $J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qy(e,t)}function Ia(e,t,r){return t=zC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zC(e){var t=DJ(e,"string");return Il(t)=="symbol"?t:t+""}function DJ(e,t){if(Il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nr=function(e){function t(){var r;MJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=AJ(this,t,[].concat(a)),Ia(r,"state",{isAnimationFinished:!0,totalLength:0}),Ia(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),Ia(r,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(v,g){return v+g});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,h=s-o,p=[],y=0,m=0;y<l.length;m+=l[y],++y)if(m+l[y]>d){p=[].concat(Ls(l.slice(0,y)),[d-m]);break}var x=p.length%2===0?[0,h]:[h];return[].concat(Ls(t.repeat(l,f)),Ls(p),x).map(function(v){return"".concat(v,"px")}).join(", ")}),Ia(r,"id",Ns("recharts-line-")),Ia(r,"pathRef",function(o){r.mainCurve=o}),Ia(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ia(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return $J(t,e),_J(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Ln(f,sc);if(!d)return null;var h=function(m,x){return{x:m.x,y:m.y,value:m.value,errorVal:Lr(m.payload,x)}},p={clipPath:n?"url(#clipPath-".concat(a,")"):null};return z.createElement(bt,p,d.map(function(y){return z.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,f=s.dataKey,d=Xe(this.props,!1),h=Xe(l,!0),p=u.map(function(m,x){var v=Xn(Xn(Xn({key:"dot-".concat(x),r:3},d),h),{},{index:x,cx:m.x,cy:m.y,value:m.value,dataKey:f,payload:m.payload,points:u});return t.renderDotItem(l,v)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return z.createElement(bt,nu({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,l=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=LS(s,kJ),h=Xn(Xn(Xn({},Xe(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:l,layout:u,connectNulls:f});return z.createElement(is,nu({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,y=o.animateNewValues,m=o.width,x=o.height,v=this.state,g=v.prevPoints,b=v.totalLength;return z.createElement(Wa,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var k=S.t;if(g){var w=g.length/s.length,P=s.map(function(_,A){var D=Math.floor(A*w);if(g[D]){var R=g[D],L=br(R.x,_.x),T=br(R.y,_.y);return Xn(Xn({},_),{},{x:L(k),y:T(k)})}if(y){var E=br(m*2,_.x),I=br(x/2,_.y);return Xn(Xn({},_),{},{x:E(k),y:I(k)})}return Xn(Xn({},_),{},{x:_.x,y:_.y})});return i.renderCurveStatically(P,n,a)}var C=br(0,b),M=C(k),N;if(l){var $="".concat(l).split(/[,\s]+/gim).map(function(_){return parseFloat(_)});N=i.getStrokeDasharray(M,b,$)}else N=i.generateSimpleStrokeDasharray(b,M);return i.renderCurveStatically(s,n,a,{strokeDasharray:N})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return s&&o&&o.length&&(!u&&f>0||!vs(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.xAxis,f=a.yAxis,d=a.top,h=a.left,p=a.width,y=a.height,m=a.isAnimationActive,x=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=s.length===1,b=it("recharts-line",l),S=u&&u.allowDataOverflow,k=f&&f.allowDataOverflow,w=S||k,P=We(x)?this.id:x,C=(n=Xe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},M=C.r,N=M===void 0?3:M,$=C.strokeWidth,_=$===void 0?2:$,A=U3(o)?o:{},D=A.clipDot,R=D===void 0?!0:D,L=N*2+_;return z.createElement(bt,{className:b},S||k?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(P)},z.createElement("rect",{x:S?h:h-p/2,y:k?d:d-y/2,width:S?p:p*2,height:k?y:y*2})),!R&&z.createElement("clipPath",{id:"clipPath-dots-".concat(P)},z.createElement("rect",{x:h-L/2,y:d-L/2,width:p+L,height:y+L}))):null,!g&&this.renderCurve(w,P),this.renderErrorBar(w,P),(g||o)&&this.renderDots(w,R,P),(!m||v)&&ni.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Ls(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(Ls(o),Ls(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(z.isValidElement(n))i=z.cloneElement(n,a);else if(Ye(n))i=n(a);else{var o=a.key,s=LS(a,SJ),l=it("recharts-line-dot",typeof n!="boolean"?n.className:"");i=z.createElement(lp,nu({key:o},s,{className:l}))}return i}}])}(j.PureComponent);Ia(Nr,"displayName","Line");Ia(Nr,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Oo.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ia(Nr,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,f=t.layout,d=l.map(function(h,p){var y=Lr(h,o);return f==="horizontal"?{x:Nl({axis:r,ticks:a,bandSize:s,entry:h,index:p}),y:We(y)?null:n.scale(y),value:y,payload:h}:{x:We(y)?null:r.scale(y),y:Nl({axis:n,ticks:i,bandSize:s,entry:h,index:p}),value:y,payload:h}});return Xn({points:d,layout:f},u)});var IJ=["layout","type","stroke","connectNulls","isRange","ref"],RJ=["key"],GC;function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function UC(e,t){if(e==null)return{};var r=LJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},es.apply(this,arguments)}function zS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zS(Object(r),!0).forEach(function(n){Qa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VC(n.key),n)}}function FJ(e,t,r){return t&&GS(e.prototype,t),r&&GS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zJ(e,t,r){return t=rh(t),GJ(e,WC()?Reflect.construct(t,r||[],rh(e).constructor):t.apply(e,r))}function GJ(e,t){if(t&&(Rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UJ(e)}function UJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WC=function(){return!!e})()}function rh(e){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rh(e)}function WJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jy(e,t)}function Jy(e,t){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jy(e,t)}function Qa(e,t,r){return t=VC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VC(e){var t=VJ(e,"string");return Rl(t)=="symbol"?t:t+""}function VJ(e,t){if(Rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xa=function(e){function t(){var r;BJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=zJ(this,t,[].concat(a)),Qa(r,"state",{isAnimationFinished:!0}),Qa(r,"id",Ns("recharts-area-")),Qa(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ye(o)&&o()}),Qa(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ye(o)&&o()}),r}return WJ(t,e),FJ(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,f=l.points,d=l.dataKey,h=Xe(this.props,!1),p=Xe(u,!0),y=f.map(function(x,v){var g=Wi(Wi(Wi({key:"dot-".concat(v),r:3},h),p),{},{index:v,cx:x.x,cy:x.y,dataKey:d,value:x.value,payload:x.payload,points:f});return t.renderDotItem(u,g)}),m={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return z.createElement(bt,es({className:"recharts-area-dots"},m),y)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,u=o[o.length-1].x,f=n*Math.abs(l-u),d=no(o.map(function(h){return h.y||0}));return ge(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(no(i.map(function(h){return h.y||0})),d)),ge(d)?z.createElement("rect",{x:l<u?l:l-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,u=o[o.length-1].y,f=n*Math.abs(l-u),d=no(o.map(function(h){return h.x||0}));return ge(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(no(i.map(function(h){return h.x||0})),d)),ge(d)?z.createElement("rect",{x:0,y:l<u?l:l-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,l=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,h=s.isRange;s.ref;var p=UC(s,IJ);return z.createElement(bt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},z.createElement(is,es({},Xe(p,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&z.createElement(is,es({},Xe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&h&&z.createElement(is,es({},Xe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,y=this.state,m=y.prevPoints,x=y.prevBaseLine;return z.createElement(Wa,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var g=v.t;if(m){var b=m.length/s.length,S=s.map(function(C,M){var N=Math.floor(M*b);if(m[N]){var $=m[N],_=br($.x,C.x),A=br($.y,C.y);return Wi(Wi({},C),{},{x:_(g),y:A(g)})}return C}),k;if(ge(l)&&typeof l=="number"){var w=br(x,l);k=w(g)}else if(We(l)||ec(l)){var P=br(x,0);k=P(g)}else k=l.map(function(C,M){var N=Math.floor(M*b);if(x[N]){var $=x[N],_=br($.x,C.x),A=br($.y,C.y);return Wi(Wi({},C),{},{x:_(g),y:A(g)})}return C});return i.renderAreaStatically(S,k,n,a)}return z.createElement(bt,null,z.createElement("defs",null,z.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(g))),z.createElement(bt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,l,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&o&&o.length&&(!f&&h>0||!vs(f,o)||!vs(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.top,f=a.left,d=a.xAxis,h=a.yAxis,p=a.width,y=a.height,m=a.isAnimationActive,x=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=s.length===1,b=it("recharts-area",l),S=d&&d.allowDataOverflow,k=h&&h.allowDataOverflow,w=S||k,P=We(x)?this.id:x,C=(n=Xe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},M=C.r,N=M===void 0?3:M,$=C.strokeWidth,_=$===void 0?2:$,A=U3(o)?o:{},D=A.clipDot,R=D===void 0?!0:D,L=N*2+_;return z.createElement(bt,{className:b},S||k?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(P)},z.createElement("rect",{x:S?f:f-p/2,y:k?u:u-y/2,width:S?p:p*2,height:k?y:y*2})),!R&&z.createElement("clipPath",{id:"clipPath-dots-".concat(P)},z.createElement("rect",{x:f-L/2,y:u-L/2,width:p+L,height:y+L}))):null,g?null:this.renderArea(w,P),(o||g)&&this.renderDots(w,R,P),(!m||v)&&ni.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(j.PureComponent);GC=xa;Qa(xa,"displayName","Area");Qa(xa,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Oo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Qa(xa,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(ge(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Qa(xa,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=t.layout,y=u&&u.length,m=GC.getBaseValue(t,r,n,a),x=p==="horizontal",v=!1,g=d.map(function(S,k){var w;y?w=u[f+k]:(w=Lr(S,l),Array.isArray(w)?v=!0:w=[m,w]);var P=w[1]==null||y&&Lr(S,l)==null;return x?{x:Nl({axis:n,ticks:i,bandSize:s,entry:S,index:k}),y:P?null:a.scale(w[1]),value:w,payload:S}:{x:P?null:n.scale(w[1]),y:Nl({axis:a,ticks:o,bandSize:s,entry:S,index:k}),value:w,payload:S}}),b;return y||v?b=g.map(function(S){var k=Array.isArray(S.value)?S.value[0]:null;return x?{x:S.x,y:k!=null&&S.y!=null?a.scale(k):null}:{x:k!=null?n.scale(k):null,y:S.y}}):b=x?a.scale(m):n.scale(m),Wi({points:g,baseLine:b,layout:p,isRange:v},h)});Qa(xa,"renderDotItem",function(e,t){var r;if(z.isValidElement(e))r=z.cloneElement(e,t);else if(Ye(e))r=e(t);else{var n=it("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=UC(t,RJ);r=z.createElement(lp,es({},i,{key:a,className:n}))}return r});function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function HJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KC(n.key),n)}}function KJ(e,t,r){return t&&XJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YJ(e,t,r){return t=nh(t),qJ(e,HC()?Reflect.construct(t,r||[],nh(e).constructor):t.apply(e,r))}function qJ(e,t){if(t&&(Ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZJ(e)}function ZJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HC=function(){return!!e})()}function nh(e){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(e)}function QJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}function ev(e,t){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ev(e,t)}function XC(e,t,r){return t=KC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KC(e){var t=JJ(e,"string");return Ll(t)=="symbol"?t:t+""}function JJ(e,t){if(Ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pp=function(e){function t(){return HJ(this,t),YJ(this,t,arguments)}return QJ(t,e),KJ(t,[{key:"render",value:function(){return null}}])}(j.Component);XC(pp,"displayName","ZAxis");XC(pp,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var eee=["option","isActive"];function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},au.apply(this,arguments)}function tee(e,t){if(e==null)return{};var r=ree(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ree(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nee(e){var t=e.option,r=e.isActive,n=tee(e,eee);return typeof t=="string"?j.createElement(Fy,au({option:j.createElement(Yh,au({type:t},n)),isActive:r,shapeType:"symbols"},n)):j.createElement(Fy,au({option:t,isActive:r,shapeType:"symbols"},n))}function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iu.apply(this,arguments)}function US(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?US(Object(r),!0).forEach(function(n){oo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qC(n.key),n)}}function iee(e,t,r){return t&&WS(e.prototype,t),r&&WS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oee(e,t,r){return t=ah(t),see(e,YC()?Reflect.construct(t,r||[],ah(e).constructor):t.apply(e,r))}function see(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lee(e)}function lee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YC=function(){return!!e})()}function ah(e){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ah(e)}function cee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}function tv(e,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tv(e,t)}function oo(e,t,r){return t=qC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qC(e){var t=uee(e,"string");return Bl(t)=="symbol"?t:t+""}function uee(e,t){if(Bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jn=function(e){function t(){var r;aee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=oee(this,t,[].concat(a)),oo(r,"state",{isAnimationFinished:!1}),oo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),oo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),oo(r,"id",Ns("recharts-scatter-")),r}return cee(t,e),iee(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,l=i.activeIndex,u=Xe(this.props,!1);return n.map(function(f,d){var h=l===d,p=h?s:o,y=pa(pa({},u),f);return z.createElement(bt,iu({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},Pu(a.props,f,d),{role:"img"}),z.createElement(nee,iu({option:p,isActive:h,key:"symbol-".concat(d)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return z.createElement(Wa,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,y=i.map(function(m,x){var v=d&&d[x];if(v){var g=br(v.cx,m.cx),b=br(v.cy,m.cy),S=br(v.size,m.size);return pa(pa({},m),{},{cx:g(p),cy:b(p),size:S(p)})}var k=br(0,m.size);return pa(pa({},m),{},{size:k(p)})});return z.createElement(bt,null,n.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!vs(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,l=a.children,u=Ln(l,sc);return u?u.map(function(f,d){var h=f.props,p=h.direction,y=h.dataKey;return z.cloneElement(f,{key:"".concat(p,"-").concat(y,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(x,v){return{x:x.cx,y:x.cy,value:p==="x"?+x.node.x:+x.node.y,errorVal:Lr(x,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,l=Xe(this.props,!1),u=Xe(i,!1),f,d;if(o==="joint")f=a.map(function(b){return{x:b.cx,y:b.cy}});else if(o==="fitting"){var h=LT(a),p=h.xmin,y=h.xmax,m=h.a,x=h.b,v=function(S){return m*S+x};f=[{x:p,y:v(p)},{x:y,y:v(y)}]}var g=pa(pa(pa({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:f});return z.isValidElement(i)?d=z.cloneElement(i,g):Ye(i)?d=i(g):d=z.createElement(is,iu({},g,{type:s})),z.createElement(bt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,l=n.xAxis,u=n.yAxis,f=n.left,d=n.top,h=n.width,p=n.height,y=n.id,m=n.isAnimationActive;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,v=it("recharts-scatter",s),g=l&&l.allowDataOverflow,b=u&&u.allowDataOverflow,S=g||b,k=We(y)?this.id:y;return z.createElement(bt,{className:v,clipPath:S?"url(#clipPath-".concat(k,")"):null},g||b?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(k)},z.createElement("rect",{x:g?f:f-h/2,y:b?d:d-p/2,width:g?h:h*2,height:b?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),z.createElement(bt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||x)&&ni.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(j.PureComponent);oo(jn,"displayName","Scatter");oo(jn,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Oo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});oo(jn,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=a.props.tooltipType,f=Ln(a.props.children,Gx),d=We(t.dataKey)?a.props.dataKey:t.dataKey,h=We(r.dataKey)?a.props.dataKey:r.dataKey,p=n&&n.dataKey,y=n?n.range:pp.defaultProps.range,m=y&&y[0],x=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,g=i.map(function(b,S){var k=Lr(b,d),w=Lr(b,h),P=!We(p)&&Lr(b,p)||"-",C=[{name:We(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:k,payload:b,dataKey:d,type:u},{name:We(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:w,payload:b,dataKey:h,type:u}];P!=="-"&&C.push({name:n.name||n.dataKey,unit:n.unit||"",value:P,payload:b,dataKey:p,type:u});var M=Nl({axis:t,ticks:o,bandSize:x,entry:b,index:S,dataKey:d}),N=Nl({axis:r,ticks:s,bandSize:v,entry:b,index:S,dataKey:h}),$=P!=="-"?n.scale(P):m,_=Math.sqrt(Math.max($,0)/Math.PI);return pa(pa({},b),{},{cx:M,cy:N,x:M-_,y:N-_,xAxis:t,yAxis:r,zAxis:n,width:2*_,height:2*_,size:$,node:{x:k,y:w,z:P},tooltipPayload:C,tooltipPosition:{x:M,y:N},payload:b},f&&f[S]&&f[S].props)});return pa({points:g},l)});function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function fee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JC(n.key),n)}}function hee(e,t,r){return t&&dee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pee(e,t,r){return t=ih(t),gee(e,ZC()?Reflect.construct(t,r||[],ih(e).constructor):t.apply(e,r))}function gee(e,t){if(t&&(Fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mee(e)}function mee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZC=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(e)}function yee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rv(e,t)}function rv(e,t){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rv(e,t)}function QC(e,t,r){return t=JC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JC(e){var t=vee(e,"string");return Fl(t)=="symbol"?t:t+""}function vee(e,t){if(Fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(this,arguments)}function xee(e){var t=e.xAxisId,r=x1(),n=b1(),a=OC(t);return a==null?null:j.createElement(lc,nv({},a,{className:it("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Si(o,!0)}}))}var Bn=function(e){function t(){return fee(this,t),pee(this,t,arguments)}return yee(t,e),hee(t,[{key:"render",value:function(){return j.createElement(xee,this.props)}}])}(j.Component);QC(Bn,"displayName","XAxis");QC(Bn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function bee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rN(n.key),n)}}function kee(e,t,r){return t&&wee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function See(e,t,r){return t=oh(t),jee(e,eN()?Reflect.construct(t,r||[],oh(e).constructor):t.apply(e,r))}function jee(e,t){if(t&&(zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pee(e)}function Pee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(e)}function Cee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&av(e,t)}function av(e,t){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},av(e,t)}function tN(e,t,r){return t=rN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rN(e){var t=Nee(e,"string");return zl(t)=="symbol"?t:t+""}function Nee(e,t){if(zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(this,arguments)}var Oee=function(t){var r=t.yAxisId,n=x1(),a=b1(),i=MC(r);return i==null?null:j.createElement(lc,iv({},i,{className:it("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return Si(s,!0)}}))},Fn=function(e){function t(){return bee(this,t),See(this,t,arguments)}return Cee(t,e),kee(t,[{key:"render",value:function(){return j.createElement(Oee,this.props)}}])}(j.Component);tN(Fn,"displayName","YAxis");tN(Fn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function VS(e){return Tee(e)||Aee(e)||_ee(e)||Mee()}function Mee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ee(e,t){if(e){if(typeof e=="string")return ov(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ov(e,t)}}function Aee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tee(e){if(Array.isArray(e))return ov(e)}function ov(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sv=function(t,r,n,a,i){var o=Ln(t,io),s=Ln(t,bf),l=[].concat(VS(o),VS(s)),u=Ln(t,wf),f="".concat(a,"Id"),d=a[0],h=r;if(l.length&&(h=l.reduce(function(m,x){if(x.props[f]===n&&ai(x.props,"extendDomain")&&ge(x.props[d])){var v=x.props[d];return[Math.min(m[0],v),Math.max(m[1],v)]}return m},h)),u.length){var p="".concat(d,"1"),y="".concat(d,"2");h=u.reduce(function(m,x){if(x.props[f]===n&&ai(x.props,"extendDomain")&&ge(x.props[p])&&ge(x.props[y])){var v=x.props[p],g=x.props[y];return[Math.min(m[0],v,g),Math.max(m[1],v,g)]}return m},h)}return i&&i.length&&(h=i.reduce(function(m,x){return ge(x)?[Math.min(m[0],x),Math.max(m[1],x)]:m},h)),h},nN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function i(l,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new a(f,d||l,h),y=r?r+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],p]:l._events[y].push(p):(l._events[y]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,y=new Array(p);h<p;h++)y[h]=d[h].fn;return y},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,h,p,y){var m=r?r+u:u;if(!this._events[m])return!1;var x=this._events[m],v=arguments.length,g,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,p),!0;case 6:return x.fn.call(x.context,f,d,h,p,y),!0}for(b=1,g=new Array(v-1);b<v;b++)g[b-1]=arguments[b];x.fn.apply(x.context,g)}else{var S=x.length,k;for(b=0;b<S;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),v){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,f);break;case 3:x[b].fn.call(x[b].context,f,d);break;case 4:x[b].fn.call(x[b].context,f,d,h);break;default:if(!g)for(k=1,g=new Array(v-1);k<v;k++)g[k-1]=arguments[k];x[b].fn.apply(x[b].context,g)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===f&&(!h||y.once)&&(!d||y.context===d)&&o(this,p);else{for(var m=0,x=[],v=y.length;m<v;m++)(y[m].fn!==f||h&&!y[m].once||d&&y[m].context!==d)&&x.push(y[m]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(nN);var Eee=nN.exports;const $ee=Bt(Eee);var Tg=new $ee,Eg="recharts.syncMouseEvents";function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function Dee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aN(n.key),n)}}function Ree(e,t,r){return t&&Iee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $g(e,t,r){return t=aN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aN(e){var t=Lee(e,"string");return of(t)=="symbol"?t:t+""}function Lee(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bee=function(){function e(){Dee(this,e),$g(this,"activeIndex",0),$g(this,"coordinateList",[]),$g(this,"layout","horizontal")}return Ree(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+l+u,h=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Fee(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&ge(n)&&ge(a))return!0}return!1}function zee(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function iN(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=en(t,r,n,a),s=en(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Gee(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=en(s,l,u,d),p=en(s,l,f,d);n=h.x,a=h.y,i=p.x,o=p.y}else return iN(t);return[{x:n,y:a},{x:i,y:o}]}function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function HS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HS(Object(r),!0).forEach(function(n){Uee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uee(e,t,r){return t=Wee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wee(e){var t=Vee(e,"string");return sf(t)=="symbol"?t:t+""}function Vee(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hee(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var y,m=is;if(h==="ScatterChart")y=o,m=vY;else if(h==="BarChart")y=zee(d,o,l,f),m=p1;else if(d==="radial"){var x=iN(o),v=x.cx,g=x.cy,b=x.radius,S=x.startAngle,k=x.endAngle;y={cx:v,cy:g,startAngle:S,endAngle:k,innerRadius:b,outerRadius:b},m=eC}else y={points:Gee(d,o,l)},m=is;var w=cd(cd(cd(cd({stroke:"#ccc",pointerEvents:"none"},l),y),Xe(p,!1)),{},{payload:s,payloadIndex:u,className:it("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,w):j.createElement(m,w)}var Xee=["item"],Kee=["children","className","width","height","style","compact","title","desc"];function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Js.apply(this,arguments)}function XS(e,t){return Zee(e)||qee(e,t)||sN(e,t)||Yee()}function Yee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Zee(e){if(Array.isArray(e))return e}function KS(e,t){if(e==null)return{};var r=Qee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ete(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lN(n.key),n)}}function tte(e,t,r){return t&&ete(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rte(e,t,r){return t=sh(t),nte(e,oN()?Reflect.construct(t,r||[],sh(e).constructor):t.apply(e,r))}function nte(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ate(e)}function ate(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oN=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sh(e)}function ite(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lv(e,t)}function lv(e,t){return lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lv(e,t)}function Ul(e){return lte(e)||ste(e)||sN(e)||ote()}function ote(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sN(e,t){if(e){if(typeof e=="string")return cv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cv(e,t)}}function ste(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lte(e){if(Array.isArray(e))return cv(e)}function cv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YS(Object(r),!0).forEach(function(n){Be(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Be(e,t,r){return t=lN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lN(e){var t=cte(e,"string");return Gl(t)=="symbol"?t:t+""}function cte(e,t){if(Gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ute={xAxis:["bottom","top"],yAxis:["left","right"]},fte={width:"100%",height:"100%"},cN={x:0,y:0};function ud(e){return e}var dte=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},hte=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return ne(ne(ne({},a),en(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,u=a.angle;return ne(ne(ne({},a),en(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return cN},gp=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Ul(s),Ul(u)):s},[]);return o.length>0?o:t&&t.length&&ge(a)&&ge(i)?t.slice(a,i+1):[]};function uN(e){return e==="number"?[0,"auto"]:void 0}var uv=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=gp(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(l,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?s:d;h=i0(p,o.dataKey,a)}else h=d&&d[n]||s[n];return h?[].concat(Ul(l),[ZP(u,h)]):l},[])},qS=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=dte(i,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,f=qV(o,s,u,l);if(f>=0&&u){var d=u[f]&&u[f].value,h=uv(t,r,f,d),p=hte(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},pte=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=KP(f,i);return n.reduce(function(y,m){var x,v=m.type.defaultProps!==void 0?ne(ne({},m.type.defaultProps),m.props):m.props,g=v.type,b=v.dataKey,S=v.allowDataOverflow,k=v.allowDuplicatedCategory,w=v.scale,P=v.ticks,C=v.includeHidden,M=v[o];if(y[M])return y;var N=gp(t.data,{graphicalItems:a.filter(function(K){var F,ee=o in K.props?K.props[o]:(F=K.type.defaultProps)===null||F===void 0?void 0:F[o];return ee===M}),dataStartIndex:l,dataEndIndex:u}),$=N.length,_,A,D;Fee(v.domain,S,g)&&(_=jy(v.domain,null,S),p&&(g==="number"||w!=="auto")&&(D=tu(N,b,"category")));var R=uN(g);if(!_||_.length===0){var L,T=(L=v.domain)!==null&&L!==void 0?L:R;if(b){if(_=tu(N,b,g),g==="category"&&p){var E=RT(_);k&&E?(A=_,_=V0(0,$)):k||(_=Nk(T,_,m).reduce(function(K,F){return K.indexOf(F)>=0?K:[].concat(Ul(K),[F])},[]))}else if(g==="category")k?_=_.filter(function(K){return K!==""&&!We(K)}):_=Nk(T,_,m).reduce(function(K,F){return K.indexOf(F)>=0||F===""||We(F)?K:[].concat(Ul(K),[F])},[]);else if(g==="number"){var I=tH(N,a.filter(function(K){var F,ee,se=o in K.props?K.props[o]:(F=K.type.defaultProps)===null||F===void 0?void 0:F[o],Y="hide"in K.props?K.props.hide:(ee=K.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return se===M&&(C||!Y)}),b,i,f);I&&(_=I)}p&&(g==="number"||w!=="auto")&&(D=tu(N,b,"category"))}else p?_=V0(0,$):s&&s[M]&&s[M].hasStack&&g==="number"?_=h==="expand"?[0,1]:qP(s[M].stackGroups,l,u):_=XP(N,a.filter(function(K){var F=o in K.props?K.props[o]:K.type.defaultProps[o],ee="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return F===M&&(C||!ee)}),g,f,!0);if(g==="number")_=sv(d,_,M,i,P),T&&(_=jy(T,_,S));else if(g==="category"&&T){var G=T,J=_.every(function(K){return G.indexOf(K)>=0});J&&(_=G)}}return ne(ne({},y),{},Be({},M,ne(ne({},v),{},{axisType:i,domain:_,categoricalDomain:D,duplicateDomain:A,originalDomain:(x=v.domain)!==null&&x!==void 0?x:R,isCategorical:p,layout:f})))},{})},gte=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=gp(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=h.length,y=KP(f,i),m=-1;return n.reduce(function(x,v){var g=v.type.defaultProps!==void 0?ne(ne({},v.type.defaultProps),v.props):v.props,b=g[o],S=uN("number");if(!x[b]){m++;var k;return y?k=V0(0,p):s&&s[b]&&s[b].hasStack?(k=qP(s[b].stackGroups,l,u),k=sv(d,k,b,i)):(k=jy(S,XP(h,n.filter(function(w){var P,C,M=o in w.props?w.props[o]:(P=w.type.defaultProps)===null||P===void 0?void 0:P[o],N="hide"in w.props?w.props.hide:(C=w.type.defaultProps)===null||C===void 0?void 0:C.hide;return M===b&&!N}),"number",f),a.defaultProps.allowDataOverflow),k=sv(d,k,b,i)),ne(ne({},x),{},Be({},b,ne(ne({axisType:i},a.defaultProps),{},{hide:!0,orientation:wa(ute,"".concat(i,".").concat(m%2),null),domain:k,originalDomain:S,isCategorical:y,layout:f})))}return x},{})},mte=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Ln(f,i),p={};return h&&h.length?p=pte(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(p=gte(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},yte=function(t){var r=qi(t),n=Si(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Fx(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:D0(r,n)}},ZS=function(t){var r=t.children,n=t.defaultShowTooltip,a=qn(r,_l),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},vte=function(t){return!t||!t.length?!1:t.some(function(r){var n=Pi(r&&r.type);return n&&n.indexOf("Bar")>=0})},QS=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xte=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,h=n.margin||{},p=qn(d,_l),y=qn(d,ti),m=Object.keys(l).reduce(function(k,w){var P=l[w],C=P.orientation;return!P.mirror&&!P.hide?ne(ne({},k),{},Be({},C,k[C]+P.width)):k},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(k,w){var P=o[w],C=P.orientation;return!P.mirror&&!P.hide?ne(ne({},k),{},Be({},C,wa(k,"".concat(C))+P.height)):k},{top:h.top||0,bottom:h.bottom||0}),v=ne(ne({},x),m),g=v.bottom;p&&(v.bottom+=p.props.height||_l.defaultProps.height),y&&r&&(v=JV(v,a,n,r));var b=u-v.left-v.right,S=f-v.top-v.bottom;return ne(ne({brushBottom:g},v),{},{width:Math.max(b,0),height:Math.max(S,0)})},bte=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},j1=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(v,g){var b=g.graphicalItems,S=g.stackGroups,k=g.offset,w=g.updateId,P=g.dataStartIndex,C=g.dataEndIndex,M=v.barSize,N=v.layout,$=v.barGap,_=v.barCategoryGap,A=v.maxBarSize,D=QS(N),R=D.numericAxisName,L=D.cateAxisName,T=vte(b),E=[];return b.forEach(function(I,G){var J=gp(v.data,{graphicalItems:[I],dataStartIndex:P,dataEndIndex:C}),K=I.type.defaultProps!==void 0?ne(ne({},I.type.defaultProps),I.props):I.props,F=K.dataKey,ee=K.maxBarSize,se=K["".concat(R,"Id")],Y=K["".concat(L,"Id")],le={},H=l.reduce(function(De,ct){var ut=g["".concat(ct.axisType,"Map")],lr=K["".concat(ct.axisType,"Id")];ut&&ut[lr]||ct.axisType==="zAxis"||bs();var ft=ut[lr];return ne(ne({},De),{},Be(Be({},ct.axisType,ft),"".concat(ct.axisType,"Ticks"),Si(ft)))},le),X=H[L],oe=H["".concat(L,"Ticks")],ue=S&&S[se]&&S[se].hasStack&&hH(I,S[se].stackGroups),V=Pi(I.type).indexOf("Bar")>=0,pe=D0(X,oe),q=[],te=T&&ZV({barSize:M,stackGroups:S,totalSize:bte(H,L)});if(V){var ye,me,Ue=We(ee)?A:ee,Te=(ye=(me=D0(X,oe,!0))!==null&&me!==void 0?me:Ue)!==null&&ye!==void 0?ye:0;q=QV({barGap:$,barCategoryGap:_,bandSize:Te!==pe?Te:pe,sizeList:te[Y],maxBarSize:Ue}),Te!==pe&&(q=q.map(function(De){return ne(ne({},De),{},{position:ne(ne({},De.position),{},{offset:De.position.offset-Te/2})})}))}var Oe=I&&I.type&&I.type.getComposedData;Oe&&E.push({props:ne(ne({},Oe(ne(ne({},H),{},{displayedData:J,props:v,dataKey:F,item:I,bandSize:pe,barPosition:q,offset:k,stackedData:ue,layout:N,dataStartIndex:P,dataEndIndex:C}))),{},Be(Be(Be({key:I.key||"item-".concat(G)},R,H[R]),L,H[L]),"animationId",w)),childIndex:qT(I,v.children),item:I})}),E},p=function(v,g){var b=v.props,S=v.dataStartIndex,k=v.dataEndIndex,w=v.updateId;if(!w2({props:b}))return null;var P=b.children,C=b.layout,M=b.stackOffset,N=b.data,$=b.reverseStackOrder,_=QS(C),A=_.numericAxisName,D=_.cateAxisName,R=Ln(P,n),L=uH(N,R,"".concat(A,"Id"),"".concat(D,"Id"),M,$),T=l.reduce(function(K,F){var ee="".concat(F.axisType,"Map");return ne(ne({},K),{},Be({},ee,mte(b,ne(ne({},F),{},{graphicalItems:R,stackGroups:F.axisType===A&&L,dataStartIndex:S,dataEndIndex:k}))))},{}),E=xte(ne(ne({},T),{},{props:b,graphicalItems:R}),g==null?void 0:g.legendBBox);Object.keys(T).forEach(function(K){T[K]=f(b,T[K],E,K.replace("Map",""),r)});var I=T["".concat(D,"Map")],G=yte(I),J=h(b,ne(ne({},T),{},{dataStartIndex:S,dataEndIndex:k,updateId:w,graphicalItems:R,stackGroups:L,offset:E}));return ne(ne({formattedGraphicalItems:J,graphicalItems:R,offset:E,stackGroups:L},G),T)},y=function(x){function v(g){var b,S,k;return Jee(this,v),k=rte(this,v,[g]),Be(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Be(k,"accessibilityManager",new Bee),Be(k,"handleLegendBBoxUpdate",function(w){if(w){var P=k.state,C=P.dataStartIndex,M=P.dataEndIndex,N=P.updateId;k.setState(ne({legendBBox:w},p({props:k.props,dataStartIndex:C,dataEndIndex:M,updateId:N},ne(ne({},k.state),{},{legendBBox:w}))))}}),Be(k,"handleReceiveSyncEvent",function(w,P,C){if(k.props.syncId===w){if(C===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(P)}}),Be(k,"handleBrushChange",function(w){var P=w.startIndex,C=w.endIndex;if(P!==k.state.dataStartIndex||C!==k.state.dataEndIndex){var M=k.state.updateId;k.setState(function(){return ne({dataStartIndex:P,dataEndIndex:C},p({props:k.props,dataStartIndex:P,dataEndIndex:C,updateId:M},k.state))}),k.triggerSyncEvent({dataStartIndex:P,dataEndIndex:C})}}),Be(k,"handleMouseEnter",function(w){var P=k.getMouseInfo(w);if(P){var C=ne(ne({},P),{},{isTooltipActive:!0});k.setState(C),k.triggerSyncEvent(C);var M=k.props.onMouseEnter;Ye(M)&&M(C,w)}}),Be(k,"triggeredAfterMouseMove",function(w){var P=k.getMouseInfo(w),C=P?ne(ne({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(C),k.triggerSyncEvent(C);var M=k.props.onMouseMove;Ye(M)&&M(C,w)}),Be(k,"handleItemMouseEnter",function(w){k.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),Be(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Be(k,"handleMouseMove",function(w){w.persist(),k.throttleTriggeredAfterMouseMove(w)}),Be(k,"handleMouseLeave",function(w){k.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};k.setState(P),k.triggerSyncEvent(P);var C=k.props.onMouseLeave;Ye(C)&&C(P,w)}),Be(k,"handleOuterEvent",function(w){var P=YT(w),C=wa(k.props,"".concat(P));if(P&&Ye(C)){var M,N;/.*touch.*/i.test(P)?N=k.getMouseInfo(w.changedTouches[0]):N=k.getMouseInfo(w),C((M=N)!==null&&M!==void 0?M:{},w)}}),Be(k,"handleClick",function(w){var P=k.getMouseInfo(w);if(P){var C=ne(ne({},P),{},{isTooltipActive:!0});k.setState(C),k.triggerSyncEvent(C);var M=k.props.onClick;Ye(M)&&M(C,w)}}),Be(k,"handleMouseDown",function(w){var P=k.props.onMouseDown;if(Ye(P)){var C=k.getMouseInfo(w);P(C,w)}}),Be(k,"handleMouseUp",function(w){var P=k.props.onMouseUp;if(Ye(P)){var C=k.getMouseInfo(w);P(C,w)}}),Be(k,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),Be(k,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.handleMouseDown(w.changedTouches[0])}),Be(k,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.handleMouseUp(w.changedTouches[0])}),Be(k,"handleDoubleClick",function(w){var P=k.props.onDoubleClick;if(Ye(P)){var C=k.getMouseInfo(w);P(C,w)}}),Be(k,"handleContextMenu",function(w){var P=k.props.onContextMenu;if(Ye(P)){var C=k.getMouseInfo(w);P(C,w)}}),Be(k,"triggerSyncEvent",function(w){k.props.syncId!==void 0&&Tg.emit(Eg,k.props.syncId,w,k.eventEmitterSymbol)}),Be(k,"applySyncEvent",function(w){var P=k.props,C=P.layout,M=P.syncMethod,N=k.state.updateId,$=w.dataStartIndex,_=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)k.setState(ne({dataStartIndex:$,dataEndIndex:_},p({props:k.props,dataStartIndex:$,dataEndIndex:_,updateId:N},k.state)));else if(w.activeTooltipIndex!==void 0){var A=w.chartX,D=w.chartY,R=w.activeTooltipIndex,L=k.state,T=L.offset,E=L.tooltipTicks;if(!T)return;if(typeof M=="function")R=M(E,w);else if(M==="value"){R=-1;for(var I=0;I<E.length;I++)if(E[I].value===w.activeLabel){R=I;break}}var G=ne(ne({},T),{},{x:T.left,y:T.top}),J=Math.min(A,G.x+G.width),K=Math.min(D,G.y+G.height),F=E[R]&&E[R].value,ee=uv(k.state,k.props.data,R),se=E[R]?{x:C==="horizontal"?E[R].coordinate:J,y:C==="horizontal"?K:E[R].coordinate}:cN;k.setState(ne(ne({},w),{},{activeLabel:F,activeCoordinate:se,activePayload:ee,activeTooltipIndex:R}))}else k.setState(w)}),Be(k,"renderCursor",function(w){var P,C=k.state,M=C.isTooltipActive,N=C.activeCoordinate,$=C.activePayload,_=C.offset,A=C.activeTooltipIndex,D=C.tooltipAxisBandSize,R=k.getTooltipEventType(),L=(P=w.props.active)!==null&&P!==void 0?P:M,T=k.props.layout,E=w.key||"_recharts-cursor";return z.createElement(Hee,{key:E,activeCoordinate:N,activePayload:$,activeTooltipIndex:A,chartName:r,element:w,isActive:L,layout:T,offset:_,tooltipAxisBandSize:D,tooltipEventType:R})}),Be(k,"renderPolarAxis",function(w,P,C){var M=wa(w,"type.axisType"),N=wa(k.state,"".concat(M,"Map")),$=w.type.defaultProps,_=$!==void 0?ne(ne({},$),w.props):w.props,A=N&&N[_["".concat(M,"Id")]];return j.cloneElement(w,ne(ne({},A),{},{className:it(M,A.className),key:w.key||"".concat(P,"-").concat(C),ticks:Si(A,!0)}))}),Be(k,"renderPolarGrid",function(w){var P=w.props,C=P.radialLines,M=P.polarAngles,N=P.polarRadius,$=k.state,_=$.radiusAxisMap,A=$.angleAxisMap,D=qi(_),R=qi(A),L=R.cx,T=R.cy,E=R.innerRadius,I=R.outerRadius;return j.cloneElement(w,{polarAngles:Array.isArray(M)?M:Si(R,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(N)?N:Si(D,!0).map(function(G){return G.coordinate}),cx:L,cy:T,innerRadius:E,outerRadius:I,key:w.key||"polar-grid",radialLines:C})}),Be(k,"renderLegend",function(){var w=k.state.formattedGraphicalItems,P=k.props,C=P.children,M=P.width,N=P.height,$=k.props.margin||{},_=M-($.left||0)-($.right||0),A=VP({children:C,formattedGraphicalItems:w,legendWidth:_,legendContent:u});if(!A)return null;var D=A.item,R=KS(A,Xee);return j.cloneElement(D,ne(ne({},R),{},{chartWidth:M,chartHeight:N,margin:$,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Be(k,"renderTooltip",function(){var w,P=k.props,C=P.children,M=P.accessibilityLayer,N=qn(C,Vr);if(!N)return null;var $=k.state,_=$.isTooltipActive,A=$.activeCoordinate,D=$.activePayload,R=$.activeLabel,L=$.offset,T=(w=N.props.active)!==null&&w!==void 0?w:_;return j.cloneElement(N,{viewBox:ne(ne({},L),{},{x:L.left,y:L.top}),active:T,label:R,payload:T?D:[],coordinate:A,accessibilityLayer:M})}),Be(k,"renderBrush",function(w){var P=k.props,C=P.margin,M=P.data,N=k.state,$=N.offset,_=N.dataStartIndex,A=N.dataEndIndex,D=N.updateId;return j.cloneElement(w,{key:w.key||"_recharts-brush",onChange:id(k.handleBrushChange,w.props.onChange),data:M,x:ge(w.props.x)?w.props.x:$.left,y:ge(w.props.y)?w.props.y:$.top+$.height+$.brushBottom-(C.bottom||0),width:ge(w.props.width)?w.props.width:$.width,startIndex:_,endIndex:A,updateId:"brush-".concat(D)})}),Be(k,"renderReferenceElement",function(w,P,C){if(!w)return null;var M=k,N=M.clipPathId,$=k.state,_=$.xAxisMap,A=$.yAxisMap,D=$.offset,R=w.type.defaultProps||{},L=w.props,T=L.xAxisId,E=T===void 0?R.xAxisId:T,I=L.yAxisId,G=I===void 0?R.yAxisId:I;return j.cloneElement(w,{key:w.key||"".concat(P,"-").concat(C),xAxis:_[E],yAxis:A[G],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:N})}),Be(k,"renderActivePoints",function(w){var P=w.item,C=w.activePoint,M=w.basePoint,N=w.childIndex,$=w.isRange,_=[],A=P.props.key,D=P.item.type.defaultProps!==void 0?ne(ne({},P.item.type.defaultProps),P.item.props):P.item.props,R=D.activeDot,L=D.dataKey,T=ne(ne({index:N,dataKey:L,cx:C.x,cy:C.y,r:4,fill:h1(P.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Xe(R,!1)),o0(R));return _.push(v.renderActiveDot(R,T,"".concat(A,"-activePoint-").concat(N))),M?_.push(v.renderActiveDot(R,ne(ne({},T),{},{cx:M.x,cy:M.y}),"".concat(A,"-basePoint-").concat(N))):$&&_.push(null),_}),Be(k,"renderGraphicChild",function(w,P,C){var M=k.filterFormatItem(w,P,C);if(!M)return null;var N=k.getTooltipEventType(),$=k.state,_=$.isTooltipActive,A=$.tooltipAxis,D=$.activeTooltipIndex,R=$.activeLabel,L=k.props.children,T=qn(L,Vr),E=M.props,I=E.points,G=E.isRange,J=E.baseLine,K=M.item.type.defaultProps!==void 0?ne(ne({},M.item.type.defaultProps),M.item.props):M.item.props,F=K.activeDot,ee=K.hide,se=K.activeBar,Y=K.activeShape,le=!!(!ee&&_&&T&&(F||se||Y)),H={};N!=="axis"&&T&&T.props.trigger==="click"?H={onClick:id(k.handleItemMouseEnter,w.props.onClick)}:N!=="axis"&&(H={onMouseLeave:id(k.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:id(k.handleItemMouseEnter,w.props.onMouseEnter)});var X=j.cloneElement(w,ne(ne({},M.props),H));function oe(ct){return typeof A.dataKey=="function"?A.dataKey(ct.payload):null}if(le)if(D>=0){var ue,V;if(A.dataKey&&!A.allowDuplicatedCategory){var pe=typeof A.dataKey=="function"?oe:"payload.".concat(A.dataKey.toString());ue=i0(I,pe,R),V=G&&J&&i0(J,pe,R)}else ue=I==null?void 0:I[D],V=G&&J&&J[D];if(Y||se){var q=w.props.activeIndex!==void 0?w.props.activeIndex:D;return[j.cloneElement(w,ne(ne(ne({},M.props),H),{},{activeIndex:q})),null,null]}if(!We(ue))return[X].concat(Ul(k.renderActivePoints({item:M,activePoint:ue,basePoint:V,childIndex:D,isRange:G})))}else{var te,ye=(te=k.getItemByXY(k.state.activeCoordinate))!==null&&te!==void 0?te:{graphicalItem:X},me=ye.graphicalItem,Ue=me.item,Te=Ue===void 0?w:Ue,Oe=me.childIndex,De=ne(ne(ne({},M.props),H),{},{activeIndex:Oe});return[j.cloneElement(Te,De),null,null]}return G?[X,null,null]:[X,null]}),Be(k,"renderCustomized",function(w,P,C){return j.cloneElement(w,ne(ne({key:"recharts-customized-".concat(C)},k.props),k.state))}),Be(k,"renderMap",{CartesianGrid:{handler:ud,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:ud},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:ud},YAxis:{handler:ud},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=g.id)!==null&&b!==void 0?b:Ns("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=Hj(k.triggeredAfterMouseMove,(S=g.throttleDelay)!==null&&S!==void 0?S:1e3/60),k.state={},k}return ite(v,x),tte(v,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,k=b.data,w=b.height,P=b.layout,C=qn(S,Vr);if(C){var M=C.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var N=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,$=uv(this.state,k,M,N),_=this.state.tooltipTicks[M].coordinate,A=(this.state.offset.top+w)/2,D=P==="horizontal",R=D?{x:_,y:A}:{y:_,x:A},L=this.state.formattedGraphicalItems.find(function(E){var I=E.item;return I.type.name==="Scatter"});L&&(R=ne(ne({},R),L.props.points[M].tooltipPosition),$=L.props.points[M].tooltipPayload);var T={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:N,activePayload:$,activeCoordinate:R};this.setState(T),this.renderCursor(C),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,w;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){Bm([qn(b.children,Vr)],[qn(this.props.children,Vr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=qn(this.props.children,Vr);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return s.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,k=S.getBoundingClientRect(),w=kz(k),P={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},C=k.width/S.offsetWidth||1,M=this.inRange(P.chartX,P.chartY,C);if(!M)return null;var N=this.state,$=N.xAxisMap,_=N.yAxisMap,A=this.getTooltipEventType(),D=qS(this.state,this.props.data,this.props.layout,M);if(A!=="axis"&&$&&_){var R=qi($).scale,L=qi(_).scale,T=R&&R.invert?R.invert(P.chartX):null,E=L&&L.invert?L.invert(P.chartY):null;return ne(ne({},P),{},{xValue:T,yValue:E},D)}return D?ne(ne({},P),D):null}},{key:"inRange",value:function(b,S){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,P=b/k,C=S/k;if(w==="horizontal"||w==="vertical"){var M=this.state.offset,N=P>=M.left&&P<=M.left+M.width&&C>=M.top&&C<=M.top+M.height;return N?{x:P,y:C}:null}var $=this.state,_=$.angleAxisMap,A=$.radiusAxisMap;if(_&&A){var D=qi(_);return _k({x:P,y:C},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),k=qn(b,Vr),w={};k&&S==="axis"&&(k.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=o0(this.props,this.handleOuterEvent);return ne(ne({},P),w)}},{key:"addListener",value:function(){Tg.on(Eg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Tg.removeListener(Eg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,k){for(var w=this.state.formattedGraphicalItems,P=0,C=w.length;P<C;P++){var M=w[P];if(M.item===b||M.props.key===b.key||S===Pi(M.item.type)&&k===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,k=S.left,w=S.top,P=S.height,C=S.width;return z.createElement("defs",null,z.createElement("clipPath",{id:b},z.createElement("rect",{x:k,y:w,height:P,width:C})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,k){var w=XS(k,2),P=w[0],C=w[1];return ne(ne({},S),{},Be({},P,C.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,k){var w=XS(k,2),P=w[0],C=w[1];return ne(ne({},S),{},Be({},P,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,k=S.formattedGraphicalItems,w=S.activeItem;if(k&&k.length)for(var P=0,C=k.length;P<C;P++){var M=k[P],N=M.props,$=M.item,_=$.type.defaultProps!==void 0?ne(ne({},$.type.defaultProps),$.props):$.props,A=Pi($.type);if(A==="Bar"){var D=(N.data||[]).find(function(E){return lY(b,E)});if(D)return{graphicalItem:M,payload:D}}else if(A==="RadialBar"){var R=(N.data||[]).find(function(E){return _k(b,E)});if(R)return{graphicalItem:M,payload:R}}else if(cp(M,w)||up(M,w)||ef(M,w)){var L=uq({graphicalItem:M,activeTooltipItem:w,itemData:_.data}),T=_.activeIndex===void 0?L:_.activeIndex;return{graphicalItem:ne(ne({},M),{},{childIndex:T}),payload:ef(M,w)?_.data[L]:M.props.data[L]}}}return null}},{key:"render",value:function(){var b=this;if(!w2(this))return null;var S=this.props,k=S.children,w=S.className,P=S.width,C=S.height,M=S.style,N=S.compact,$=S.title,_=S.desc,A=KS(S,Kee),D=Xe(A,!1);if(N)return z.createElement(PS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(zm,Js({},D,{width:P,height:C,title:$,desc:_}),this.renderClipPath(),S2(k,this.renderMap)));if(this.props.accessibilityLayer){var R,L;D.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,D.role=(L=this.props.role)!==null&&L!==void 0?L:"application",D.onKeyDown=function(E){b.accessibilityManager.keyboardEvent(E)},D.onFocus=function(){b.accessibilityManager.focus()}}var T=this.parseEventsOfWrapper();return z.createElement(PS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",Js({className:it("recharts-wrapper",w),style:ne({position:"relative",cursor:"default",width:P,height:C},M)},T,{ref:function(I){b.container=I}}),z.createElement(zm,Js({},D,{width:P,height:C,title:$,desc:_,style:fte}),this.renderClipPath(),S2(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Be(y,"displayName",r),Be(y,"defaultProps",ne({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Be(y,"getDerivedStateFromProps",function(x,v){var g=x.dataKey,b=x.data,S=x.children,k=x.width,w=x.height,P=x.layout,C=x.stackOffset,M=x.margin,N=v.dataStartIndex,$=v.dataEndIndex;if(v.updateId===void 0){var _=ZS(x);return ne(ne(ne({},_),{},{updateId:0},p(ne(ne({props:x},_),{},{updateId:0}),v)),{},{prevDataKey:g,prevData:b,prevWidth:k,prevHeight:w,prevLayout:P,prevStackOffset:C,prevMargin:M,prevChildren:S})}if(g!==v.prevDataKey||b!==v.prevData||k!==v.prevWidth||w!==v.prevHeight||P!==v.prevLayout||C!==v.prevStackOffset||!sl(M,v.prevMargin)){var A=ZS(x),D={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},R=ne(ne({},qS(v,b,P)),{},{updateId:v.updateId+1}),L=ne(ne(ne({},A),D),R);return ne(ne(ne({},L),p(ne({props:x},L),v)),{},{prevDataKey:g,prevData:b,prevWidth:k,prevHeight:w,prevLayout:P,prevStackOffset:C,prevMargin:M,prevChildren:S})}if(!Bm(S,v.prevChildren)){var T,E,I,G,J=qn(S,_l),K=J&&(T=(E=J.props)===null||E===void 0?void 0:E.startIndex)!==null&&T!==void 0?T:N,F=J&&(I=(G=J.props)===null||G===void 0?void 0:G.endIndex)!==null&&I!==void 0?I:$,ee=K!==N||F!==$,se=!We(b),Y=se&&!ee?v.updateId:v.updateId+1;return ne(ne({updateId:Y},p(ne(ne({props:x},v),{},{updateId:Y,dataStartIndex:K,dataEndIndex:F}),v)),{},{prevChildren:S,dataStartIndex:K,dataEndIndex:F})}return null}),Be(y,"renderActiveDot",function(x,v,g){var b;return j.isValidElement(x)?b=j.cloneElement(x,v):Ye(x)?b=x(v):b=z.createElement(lp,v),z.createElement(bt,{className:"recharts-active-dot",key:g},b)});var m=j.forwardRef(function(v,g){return z.createElement(y,Js({},v,{ref:g}))});return m.displayName=y.displayName,m},ul=j1({chartName:"LineChart",GraphicalChild:Nr,axisComponents:[{axisType:"xAxis",AxisComp:Bn},{axisType:"yAxis",AxisComp:Fn}],formatAxisMap:g1}),wte=j1({chartName:"ScatterChart",GraphicalChild:jn,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Bn},{axisType:"yAxis",AxisComp:Fn},{axisType:"zAxis",AxisComp:pp}],formatAxisMap:g1}),fN=j1({chartName:"AreaChart",GraphicalChild:xa,axisComponents:[{axisType:"xAxis",AxisComp:Bn},{axisType:"yAxis",AxisComp:Fn}],formatAxisMap:g1});const mi=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},kte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[h,p]=j.useState(()=>(u==null?void 0:u.channelMode)??mi("hist_mode","All")),[y,m]=j.useState(()=>(u==null?void 0:u.minVal)??mi("hist_min",0)),[x,v]=j.useState(()=>(u==null?void 0:u.maxVal)??mi("hist_max",16383)),[g,b]=j.useState(()=>(u==null?void 0:u.binCount)??mi("hist_bins",100)),[S,k]=j.useState(()=>(u==null?void 0:u.pointToPoint)??mi("hist_ptp",!1)),[w,P]=j.useState(()=>(u==null?void 0:u.showTheo)??mi("hist_show_theo",!1)),[C,M]=j.useState(()=>(u==null?void 0:u.theoMean)??mi("hist_theo_mean","512")),[N,$]=j.useState(()=>(u==null?void 0:u.theoSigma)??mi("hist_theo_sigma","10")),[_,A]=j.useState(()=>(u==null?void 0:u.theoAmp)??mi("hist_theo_amp","1000")),[D,R]=j.useState(!1),[L,T]=j.useState(0),[E,I]=j.useState([]),[G,J]=j.useState(null),[K,F]=j.useState(l||{x:100,y:100}),[ee,se]=j.useState(!1),Y=j.useRef({x:0,y:0});j.useEffect(()=>{localStorage.setItem("hist_mode",h),localStorage.setItem("hist_min",String(y)),localStorage.setItem("hist_max",String(x)),localStorage.setItem("hist_bins",String(g)),localStorage.setItem("hist_ptp",String(S)),localStorage.setItem("hist_show_theo",String(w)),localStorage.setItem("hist_theo_mean",C),localStorage.setItem("hist_theo_sigma",N),localStorage.setItem("hist_theo_amp",_),f&&f({channelMode:h,minVal:y,maxVal:x,binCount:g,pointToPoint:S,showTheo:w,theoMean:C,theoSigma:N,theoAmp:_})},[h,y,x,g,S,w,C,N,_]),j.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(x<=y){J("Invalid range: Max must be greater than Min");return}J(null),R(!0),T(0);const te=new AbortController,ye=[],Ue=setTimeout(async()=>{try{let Te=[];if(d&&d.length>1){const Oe=Math.min(d.length,navigator.hardwareConcurrency||4);for(let ft=0;ft<Oe;ft++){const pr=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});ye.push(pr)}let De=0,ct=0;const ut=[],lr=async ft=>{for(;De<d.length;){if(te.signal.aborted)return;const pr=De++,Je=d[pr];try{const Ft=await Je.arrayBuffer();await new Promise(($t,cr)=>{ft.onmessage=Dt=>{const{success:yt,hist:Ke,error:wt}=Dt.data;yt?(ut.push(Ke),ct++,T(ct),$t()):(console.error(`Error processing ${Je.name}:`,wt),$t())},ft.onerror=Dt=>{console.error("Worker Error",Dt),$t()},ft.postMessage({buffer:Ft,roi:a,binCount:g,minVal:y,maxVal:x,pointToPoint:S},[Ft])})}catch(Ft){console.error("File Read Error",Ft)}}};if(await Promise.all(ye.map(ft=>lr(ft))),ye.forEach(ft=>ft.terminate()),ye.length=0,ut.length>0){Te=ut[0];for(let ft=1;ft<ut.length;ft++){const pr=ut[ft];for(let Je=0;Je<pr.length;Je++)Te[Je]&&(Te[Je].c0+=pr[Je].c0,Te[Je].c1+=pr[Je].c1,Te[Je].c2+=pr[Je].c2,Te[Je].c3+=pr[Je].c3)}}}else n&&(Te=B_(n.data,n.width,n.height,a.x,a.y,a.w,a.h,g,y,x,S));te.signal.aborted||I(Te)}catch(Te){console.error("Histogram calc error:",Te),J("Error calculating histogram")}finally{te.signal.aborted||R(!1)}},50);return()=>{clearTimeout(Ue),te.abort(),ye.length>0&&(console.log(`Terminating ${ye.length} active histogram workers...`),ye.forEach(Te=>Te.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,g,y,x,S,d]);const le=j.useMemo(()=>{if(!w)return E;const te=parseFloat(C),ye=parseFloat(N),me=parseFloat(_);return isNaN(te)||isNaN(ye)||isNaN(me)||ye<=0?E:E.map(Ue=>{const Te=Ue.binStart,Oe=-Math.pow(Te-te,2)/(2*Math.pow(ye,2)),De=me*Math.exp(Oe);return{...Ue,theory:De}})},[E,w,C,N,_]),H=()=>{if(E.length===0)return;let te=0,ye=0;if(E.forEach(me=>{const Ue=Math.max(me.c0||0,me.c1||0,me.c2||0,me.c3||0);Ue>te&&(te=Ue,ye=me.binStart)}),M(ye.toFixed(2)),A(te.toString()),parseFloat(N)===0||isNaN(parseFloat(N))){const me=x-y;$((me/20).toFixed(2))}},X=(te,ye,me)=>{s&&s(),!(me.closest("button")||me.closest("input")||me.closest("select"))&&(se(!0),Y.current={x:te-K.x,y:ye-K.y})},oe=te=>{X(te.clientX,te.clientY,te.target)},ue=te=>{const ye=te.touches[0];X(ye.clientX,ye.clientY,te.target)};if(j.useEffect(()=>{const te=me=>{if(ee){const Ue="touches"in me?me.touches[0].clientX:me.clientX,Te="touches"in me?me.touches[0].clientY:me.clientY;F({x:Ue-Y.current.x,y:Te-Y.current.y})}},ye=()=>se(!1);return ee&&(window.addEventListener("mousemove",te),window.addEventListener("mouseup",ye),window.addEventListener("touchmove",te,{passive:!1}),window.addEventListener("touchend",ye)),()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",ye),window.removeEventListener("touchmove",te),window.removeEventListener("touchend",ye)}},[ee]),!e)return null;const V=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},pe=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},q="step";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:K.x,top:K.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${ee?"cursor-grabbing":"cursor-grab"}`,onMouseDown:oe,onTouchStart:ue,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&c.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),c.jsxs("select",{value:h,onChange:te=>p(te.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[c.jsx("option",{value:"All",children:"All Colors"}),c.jsx("option",{value:"0",children:V.c0}),c.jsx("option",{value:"1",children:V.c1}),c.jsx("option",{value:"2",children:V.c2}),c.jsx("option",{value:"3",children:V.c3})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),c.jsx("input",{type:"number",value:y,onChange:te=>m(Number(te.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",value:x,onChange:te=>v(Number(te.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:te=>k(te.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),c.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!S&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),c.jsx("input",{type:"number",value:g,onChange:te=>b(Math.max(1,Number(te.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${w?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:te=>P(te.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),c.jsx("span",{className:`font-bold uppercase tracking-tight ${w?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),w&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),c.jsx("input",{type:"text",value:C,onChange:te=>M(te.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),c.jsx("input",{type:"text",value:N,onChange:te=>$(te.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),c.jsx("input",{type:"text",value:_,onChange:te=>A(te.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsx("button",{onClick:H,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),D&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${L}/${d.length}`:"Calculating Histogram..."})]}),G?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:G}):c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(ul,{data:le,children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),c.jsx(Bn,{dataKey:"binStart",type:"number",domain:[y,x],tickFormatter:te=>Math.floor(te).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),c.jsx(Fn,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),c.jsx(Vr,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:te=>`DN: ${Math.round(Number(te))}`,formatter:(te,ye)=>[Math.round(te),ye]}),c.jsx(ti,{wrapperStyle:{paddingTop:"10px"}}),w&&c.jsx(Nr,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(h==="All"||h==="0")&&c.jsx(Nr,{type:q,dataKey:"c0",name:V.c0,stroke:pe.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="1")&&c.jsx(Nr,{type:q,dataKey:"c1",name:V.c1,stroke:pe.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="2")&&c.jsx(Nr,{type:q,dataKey:"c2",name:V.c2,stroke:pe.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="3")&&c.jsx(Nr,{type:q,dataKey:"c3",name:V.c3,stroke:pe.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},cc=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=j.useState(e),[l,u]=j.useState(!1),[f,d]=j.useState({x:0,y:0}),h=j.useRef(null),p=(x,v,g)=>{i&&i(),!(g.closest("button")||g.closest("input"))&&(u(!0),d({x:x-o.x,y:v-o.y}))},y=x=>{p(x.clientX,x.clientY,x.target)},m=x=>{const v=x.touches[0];p(v.clientX,v.clientY,x.target)};return j.useEffect(()=>{const x=g=>{var b,S;if(l){g.cancelable&&g.preventDefault();const k="touches"in g?g.touches[0].clientX:g.clientX,w="touches"in g?g.touches[0].clientY:g.clientY,P=k-f.x,C=w-f.y,M=window.innerWidth-(((b=h.current)==null?void 0:b.offsetWidth)||100),N=window.innerHeight-(((S=h.current)==null?void 0:S.offsetHeight)||100);s({x:Math.max(0,Math.min(P,M)),y:Math.max(0,Math.min(C,N))})}},v=()=>{u(!1)};return l&&(window.addEventListener("mousemove",x),window.addEventListener("mouseup",v),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",v)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",v)}},[l,f]),c.jsxs("div",{ref:h,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${l?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[c.jsx("div",{onMouseDown:y,onTouchStart:m,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),c.jsx("div",{className:"relative z-10 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:t})})]})},Ste=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:l})=>{const u=j.useRef(null),[f,d]=j.useState(!1),[h,p]=j.useState(null),[y,m]=j.useState(null),[x,v]=j.useState(!0),[g,b]=j.useState(!0),[S,k]=j.useState("-1"),[w,P]=j.useState("8"),[C,M]=j.useState(64),[N,$]=j.useState(45),[_,A]=j.useState(60),D=j.useRef(!1),R=j.useRef({x:0,y:0});j.useEffect(()=>{!e||!r||!n||(d(!0),m(null),setTimeout(()=>{try{const I=z_(r.data,r.width,r.height,n,a,g);I?p(I):m("Could not extract valid data from ROI.")}catch(I){console.error("2D FFT Error",I),m("Calculation Error: "+I.message)}finally{d(!1)}},50))},[e,r,n,a,g]),j.useEffect(()=>{if(!h||!u.current)return;const I=u.current,G=I.getContext("2d");if(!G)return;const J=I.width,K=I.height;G.clearRect(0,0,J,K),G.fillStyle="#0f172a",G.fillRect(0,0,J,K);const F=h.width,ee=h.height,se=h.data,Y=Math.pow(10,parseFloat(S)||-1),le=Math.pow(10,parseFloat(w)||8);let H=Y,X=le;x&&(H=Math.log10(Math.max(1e-10,Y)),X=Math.log10(Math.max(1e-10,le)));const oe=X-H||1,ue=J/2,V=K/2+50,pe=Math.min(J,K)*.4,q=.6,te=N*Math.PI/180,ye=_*Math.PI/180,me=Math.cos(te),Ue=Math.sin(te),Te=Math.cos(ye),Oe=Math.sin(ye),De=(Ke,wt,At)=>{const Zt=Ke*me-wt*Ue,kr=Ke*Ue+wt*me,Fr=kr*Te-At*Oe,kt=kr*Oe+At*Te;return{x:ue+Zt*pe,y:V-Fr*pe,depth:kt}},ct=Math.max(16,C),ut=Math.max(1,Math.floor(F/ct)),lr=Math.max(1,Math.floor(ee/ct)),ft=(Ke,wt)=>{let At=se[wt*F+Ke];return x&&(At=Math.log10(Math.max(1e-10,At))),At=Math.max(H,Math.min(X,At)),(At-H)/oe},pr=Ke=>`hsl(${(1-Ke)*240}, 80%, 50%)`,Je=[];for(let Ke=0;Ke<ee-lr;Ke+=lr)for(let wt=0;wt<F-ut;wt+=ut){const At=wt,Zt=Ke,kr=wt+ut,Fr=Ke,kt=wt+ut,_r=Ke+lr,ot=wt,gr=Ke+lr,Ar=ft(At,Zt),nn=ft(kr,Fr),zr=ft(kt,_r),na=ft(ot,gr),Gn=(Ar+nn+zr+na)/4,aa=De(At/(F-1)-.5,Zt/(ee-1)-.5,Ar*q),Un=De(kr/(F-1)-.5,Fr/(ee-1)-.5,nn*q),ia=De(kt/(F-1)-.5,_r/(ee-1)-.5,zr*q),mr=De(ot/(F-1)-.5,gr/(ee-1)-.5,na*q),mn=(aa.depth+Un.depth+ia.depth+mr.depth)/4;Je.push({pts:[{x:aa.x,y:aa.y},{x:Un.x,y:Un.y},{x:ia.x,y:ia.y},{x:mr.x,y:mr.y}],avgDepth:mn,avgZ:Gn})}Je.sort((Ke,wt)=>Ke.avgDepth-wt.avgDepth),G.lineWidth=.5,Je.forEach(Ke=>{G.fillStyle=pr(Ke.avgZ),G.beginPath(),G.moveTo(Ke.pts[0].x,Ke.pts[0].y),G.lineTo(Ke.pts[1].x,Ke.pts[1].y),G.lineTo(Ke.pts[2].x,Ke.pts[2].y),G.lineTo(Ke.pts[3].x,Ke.pts[3].y),G.closePath(),G.fill()}),G.fillStyle="#aaa",G.font="10px monospace";const Ft=De(-.5,-.5,0),$t=De(.5,-.5,0),cr=De(-.5,.5,0),Dt=De(.5,.5,0);G.strokeStyle="#666",G.beginPath(),G.moveTo(Ft.x,Ft.y),G.lineTo($t.x,$t.y),G.lineTo(Dt.x,Dt.y),G.lineTo(cr.x,cr.y),G.closePath(),G.stroke(),G.fillText("0",Ft.x-10,Ft.y+10),G.fillText("Fx",$t.x+5,$t.y),G.fillText("Fy",cr.x-15,cr.y);const yt=De(-.5,-.5,q);G.strokeStyle="#fff",G.beginPath(),G.moveTo(Ft.x,Ft.y),G.lineTo(yt.x,yt.y),G.stroke(),G.fillText(`10^${w}`,yt.x-25,yt.y),G.fillText(`10^${S}`,Ft.x-25,Ft.y)},[h,x,N,_,S,w,C]);const L=I=>{D.current=!0,R.current={x:I.clientX,y:I.clientY}},T=I=>{if(!D.current)return;const G=I.clientX-R.current.x,J=I.clientY-R.current.y;$(K=>K-G*.5),A(K=>Math.max(0,Math.min(90,K+J*.5))),R.current={x:I.clientX,y:I.clientY}},E=()=>{D.current=!1};return e?c.jsxs(cc,{initialPosition:l||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,h&&c.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[h.width,"x",h.height," (Chirp-Z)"]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),c.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),c.jsx("input",{type:"number",value:S,onChange:I=>k(I.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),c.jsx("span",{className:"text-slate-500",children:"to"}),c.jsx("input",{type:"number",value:w,onChange:I=>P(I.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),c.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:C,onChange:I=>M(Number(I.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),c.jsx("span",{className:"text-slate-300 w-6 text-right",children:C})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:I=>v(I.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:I=>b(I.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),c.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),y&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:y}),c.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:L,onMouseMove:T,onMouseUp:E,onMouseLeave:E}),c.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},jte=.5,fv=1e-10,JS=(e,t)=>{const r=e.length-1;if(r<0)return fv;const n=t/jte*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,fv)},Pte=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},Cte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:l,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:h})=>{const[p,y]=j.useState((f==null?void 0:f.selectedChannel)??0),[m,x]=j.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[v,g]=j.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[b,S]=j.useState((f==null?void 0:f.useHanning)??!0),[k,w]=j.useState((f==null?void 0:f.doAverage)??!0),[P,C]=j.useState((f==null?void 0:f.welchSegments)??1),[M,N]=j.useState((f==null?void 0:f.showH)??!0),[$,_]=j.useState((f==null?void 0:f.showV)??!0),[A,D]=j.useState((f==null?void 0:f.interlaceRows)??!1),[R,L]=j.useState((f==null?void 0:f.rowGroup)??0),[T,E]=j.useState((f==null?void 0:f.interlaceCols)??!1),[I,G]=j.useState((f==null?void 0:f.colGroup)??0),[J,K]=j.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[F,ee]=j.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[se,Y]=j.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[le,H]=j.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[X,oe]=j.useState((f==null?void 0:f.intStart)||"0"),[ue,V]=j.useState((f==null?void 0:f.intEnd)||"0.5"),[pe,q]=j.useState(!1),[te,ye]=j.useState([]),[me,Ue]=j.useState(!1),[Te,Oe]=j.useState(0),[De,ct]=j.useState(null),[ut,lr]=j.useState(!1),[ft,pr]=j.useState(!1),[Je,Ft]=j.useState(null),[$t,cr]=j.useState(!1),[Dt,yt]=j.useState(null),[Ke,wt]=j.useState(u||{x:50,y:50}),[At,Zt]=j.useState(!1),[kr,Fr]=j.useState(null),[kt,_r]=j.useState({}),ot=j.useRef({x:0,y:0}),gr=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Ar=j.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);j.useEffect(()=>{localStorage.setItem("fft_y_min",m),localStorage.setItem("fft_y_max",v),localStorage.setItem("fft_theo_sigma",J),localStorage.setItem("fft_theo_ksize",F),localStorage.setItem("fft_theo_noise",se),localStorage.setItem("fft_theo_scale",le)},[m,v,J,F,se,le]),j.useEffect(()=>{if(!e||!n||!a)return;Ue(!0),ct(null),Oe(0);const ie=setTimeout(async()=>{try{const Me=p===-1?[0,1,2,3]:[p],Ie=h&&h.length>1?h:[null],st=Ie.length,Ze={};let It={h:0,v:0};for(let ze=0;ze<st;ze++){Oe(ze+1);let et;if(Ie[ze]){const Pt=await Ie[ze].arrayBuffer();et=await a0(Pt)}else et=n;for(const Pt of Me){const St=F_(et.data,et.width,et.height,a,Pt,!1,b,{rows:A,rowGroup:R,cols:T,colGroup:I},k,P);St&&(Ze[Pt]||(Ze[Pt]={h:new Array(St.avgHoriz.length).fill(0),v:new Array(St.avgVert.length).fill(0)}),St.avgHoriz.forEach((ar,we)=>Ze[Pt].h[we]+=ar/st),St.avgVert.forEach((ar,we)=>Ze[Pt].v[we]+=ar/st),It=St.sampleCount)}}if(Object.keys(Ze).length===0)throw new Error("ROI too small or no data found.");const Tt=1024,nr=[];for(let ze=0;ze<Tt;ze++){const et=ze/(Tt-1)*.5,Pt={freq:parseFloat(et.toFixed(6))};for(const St of Me)Ze[St]&&(Pt[`c${St}_h`]=JS(Ze[St].h,et),Pt[`c${St}_v`]=JS(Ze[St].v,et));nr.push(Pt)}Fr(It),ye(nr)}catch(Me){console.error("FFT Loop Failed:",Me),ct(Me.message||"Unknown error during FFT processing")}finally{Ue(!1)}},100);return()=>clearTimeout(ie)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,p,b,k,P,A,R,T,I,h]);const nn=()=>{const ie=parseFloat(X),Me=parseFloat(ue);if(isNaN(ie)||isNaN(Me))return;const Ie={},st=p===-1?[0,1,2,3]:[p],Ze=te.filter(It=>It.freq>=ie&&It.freq<=Me);if(Ze.length===0){_r({});return}st.forEach(It=>{let Tt=0,nr=0;Ze.forEach(ze=>{const et=ze[`c${It}_h`],Pt=ze[`c${It}_v`];typeof et=="number"&&(Tt+=et),typeof Pt=="number"&&(nr+=Pt)}),Ie[It]={h:Tt/Ze.length,v:nr/Ze.length,count:Ze.length}}),_r(Ie)},zr=j.useMemo(()=>{const ie=parseFloat(J),Me=parseInt(F),Ie=parseFloat(se),st=parseFloat(le);if(isNaN(ie)||isNaN(Me)||isNaN(Ie)||isNaN(st)||te.length===0)return te;const Ze=Pte(Me,ie),It=Ze.reduce((ze,et)=>ze+et*et,0),Tt=(Me-1)/2,nr=Ie*Ie*st;return te.map(ze=>{const et=ze.freq,Pt=2*Math.PI*et;let St=0,ar=0;for(let Yr=0;Yr<Me;Yr++){const To=Yr-Tt,Wn=Ze[Yr],oa=-Pt*To;St+=Wn*Math.cos(oa),ar+=Wn*Math.sin(oa)}const we=St*St+ar*ar;return{...ze,theory:Math.max(fv,nr*It*we)}})},[te,J,F,se,le]),na=ie=>{ie&&ie.activeLabel!==void 0&&(cr(!0),yt(Number(ie.activeLabel)),Ft(null))},Gn=ie=>{if($t&&Dt!==null&&ie&&ie.activeLabel!==void 0){const Me=Number(ie.activeLabel);Ft([Math.min(Dt,Me),Math.max(Dt,Me)])}},aa=()=>cr(!1),Un=(ie,Me,Ie)=>{l&&l(),!(Ie.closest("button")||Ie.closest("input"))&&(Zt(!0),ot.current={x:ie-Ke.x,y:Me-Ke.y})},ia=ie=>{Un(ie.clientX,ie.clientY,ie.target)},mr=ie=>{const Me=ie.touches[0];Un(Me.clientX,Me.clientY,ie.target)};j.useEffect(()=>{const ie=Ie=>{if(At){const st="touches"in Ie?Ie.touches[0].clientX:Ie.clientX,Ze="touches"in Ie?Ie.touches[0].clientY:Ie.clientY;wt({x:st-ot.current.x,y:Ze-ot.current.y})}},Me=()=>Zt(!1);return At&&(window.addEventListener("mousemove",ie),window.addEventListener("mouseup",Me),window.addEventListener("touchmove",ie,{passive:!1}),window.addEventListener("touchend",Me)),()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",Me),window.removeEventListener("touchmove",ie),window.removeEventListener("touchend",Me)}},[At]);const mn=j.useMemo(()=>{if(!Je||te.length===0)return null;const[ie,Me]=Je,Ie=te.filter(It=>It.freq>=ie&&It.freq<=Me);if(Ie.length===0)return null;const st=p===-1?[0,1,2,3]:[p],Ze={};return st.forEach(It=>{["h","v"].forEach(Tt=>{const nr=`c${It}_${Tt}`;let ze=0,et=0;for(const Pt of Ie){const St=Pt[nr];typeof St=="number"&&(ze+=St,et++)}et>0&&(Ze[`${nr}_sigma`]=Math.sqrt(ze/et))})}),{count:Ie.length,stats:Ze}},[Je,te,p]),gt=()=>{if(te.length===0)return;let ie=1/0,Me=-1/0;if(te.forEach(Tt=>{Tt.freq<.01||Tt.freq>.49||Object.keys(Tt).forEach(nr=>{if(nr==="freq"||nr==="theory")return;const ze=Tt[nr];typeof ze=="number"&&ze>0&&(ze<ie&&(ie=ze),ze>Me&&(Me=ze))})}),ie===1/0)return;const Ie=Math.log10(ie),st=Math.log10(Me),Ze=st-Ie,It=(Ze===0?1:Ze)*.1;x((Ie-It).toFixed(2)),g((st+It).toFixed(2))},zt=(ie,Me)=>{a&&o&&o({...a,x:a.x+ie,y:a.y+Me})},vt=(ie,Me)=>{a&&o&&o({...a,w:Math.max(2,a.w+ie),h:Math.max(2,a.h+Me)})};return e?c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:Ke.x,top:Ke.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:l,children:[c.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${At?"cursor-grabbing":"cursor-grab"}`,onMouseDown:ia,onTouchStart:mr,children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:h&&h.length>1?`Stack Avg (${h.length} frames)`:"Single Mode"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[c.jsx("button",{onClick:()=>y(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(ie=>c.jsx("button",{onClick:()=>y(ie),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===ie?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:Ar[ie]},ie))]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("button",{onClick:()=>q(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[c.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),c.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:F,set:ee,w:"w-10"},{label:"Sigma",val:J,set:K,w:"w-12"},{label:"Noise()",val:se,set:Y,w:"w-12"},{label:"Scale",val:le,set:H,w:"w-12"}].map(ie=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:ie.label}),c.jsx("input",{type:"text",value:ie.val,onChange:Me=>ie.set(Me.target.value),className:`${ie.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},ie.label))})]})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),c.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:P,onChange:ie=>C(parseInt(ie.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),c.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:P})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:A,onChange:ie=>D(ie.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:T,onChange:ie=>E(ie.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),c.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${b?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:b&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:b,onChange:ie=>S(ie.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${k?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:k&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:k,onChange:ie=>w(ie.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),c.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("button",{onClick:()=>N(!M),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${M?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${M?"bg-cyan-400":"bg-gray-400"}`})," H"]}),c.jsxs("button",{onClick:()=>_(!$),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${$?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${M?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:()=>pr(!ft),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${ft?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),c.jsx("button",{onClick:()=>lr(!ut),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${ut?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[c.jsx("button",{onClick:gt,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",c.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[c.jsx("input",{type:"text",value:m,onChange:ie=>x(ie.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),c.jsx("span",{className:"px-2 text-gray-400",children:"to"}),c.jsx("input",{type:"text",value:v,onChange:ie=>g(ie.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),me&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),h&&h.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",Te," / ",h.length]})]}),De?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:De}):c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[c.jsx("div",{className:"flex-1 relative z-10",onMouseDown:na,onMouseMove:Gn,onMouseUp:aa,style:{cursor:$t?"col-resize":"crosshair"},children:c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(ul,{data:zr,margin:{top:10,right:10,bottom:20,left:0},children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),c.jsx(Bn,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),c.jsx(Fn,{scale:"log",domain:[Math.pow(10,parseFloat(m)),Math.pow(10,parseFloat(v))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:ie=>Number(ie).toExponential(0),width:45}),c.jsx(Vr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:ie=>[Number(ie).toExponential(3),""],labelFormatter:ie=>`Freq: ${Number(ie).toFixed(4)}`}),c.jsx(ti,{wrapperStyle:{fontSize:"10px"}}),c.jsx(Nr,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(ie=>{if(p!==-1&&p!==ie)return[];const Me=`c${ie}_h`,Ie=`c${ie}_v`,st=gr[`c${ie}`],Ze=[];return M&&Ze.push(c.jsx(Nr,{type:"linear",dataKey:Me,name:`${Ar[ie]} (H)`,stroke:st,strokeWidth:1,dot:!1,isAnimationActive:!1},`${ie}_h`)),$&&Ze.push(c.jsx(Nr,{type:"linear",dataKey:Ie,name:`${Ar[ie]} (V)`,stroke:st,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${ie}_v`)),Ze}),Je&&c.jsx(wf,{x1:Je[0],x2:Je[1],fill:"#8884d8",fillOpacity:.15})]})})}),mn&&Je&&c.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[c.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",Je[0].toFixed(3),"-",Je[1].toFixed(3)]}),Object.entries(mn.stats).map(([ie,Me])=>c.jsxs("div",{className:"flex justify-between gap-4",children:[c.jsxs("span",{className:"text-slate-400",children:[ie,":"]}),c.jsx("span",{className:"font-bold text-cyan-400",children:Me.toFixed(5)})]},ie))]})]})]}),ft&&c.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[c.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("input",{type:"number",step:"0.01",value:X,onChange:ie=>oe(ie.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.01",value:ue,onChange:ie=>V(ie.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("button",{onClick:nn,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(ie=>{const Me=kt[ie];if(!Me)return null;const Ie=gr[`c${ie}`];return c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:Ie},children:[Ar[ie]," ",c.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Me.count," pts)"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[c.jsxs("div",{children:["H: ",Me.h.toExponential(3)]}),c.jsxs("div",{children:["V: ",Me.v.toExponential(3)]})]})]},ie)})})]}),ut&&c.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>zt(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>zt(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>zt(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>zt(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx("button",{onClick:()=>vt(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),c.jsx("button",{onClick:()=>vt(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),c.jsx("button",{onClick:()=>vt(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),c.jsx("button",{onClick:()=>vt(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),c.jsx(Ste,{isOpen:pe,onClose:()=>q(!1),rawImageData:n,roi:a,selectedChannel:p===-1?0:p,channelName:p===-1?"Red (Default)":Ar[p],zIndex:s?s+2:102,onFocus:l})]}):null},Nte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f})=>{const[d,h]=j.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[p,y]=j.useState((u==null?void 0:u.blackLevel)??0),[m,x]=j.useState((u==null?void 0:u.whiteLevel)??16383),[v,g]=j.useState(null),[b,S]=j.useState(!1),[k,w]=j.useState(null),[P,C]=j.useState(l||{x:150,y:150}),[M,N]=j.useState(!1),$=j.useRef({x:0,y:0});j.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:p,whiteLevel:m})},[d,p,m]),j.useEffect(()=>{if(e&&n&&!u){const T=n.blackLevels?Math.floor(n.blackLevels[1]):0;y(T),x(n.whiteLevel||16383),g(null)}},[e,n]);const _=()=>{if(!n||!a)return;w(null),S(!0);const E=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const I=G_(n.data,n.width,n.height,a,E,p,m);I?g(I):(w("No data found in selection with current filters."),g(null))}catch(I){console.error("Analysis failed:",I),w(I.message||"Analysis error")}finally{S(!1)}},50)},A=(T,E,I)=>{s&&s(),!(I.closest("button")||I.closest("input")||I.closest("select"))&&(N(!0),$.current={x:T-P.x,y:E-P.y})},D=T=>{A(T.clientX,T.clientY,T.target)},R=T=>{const E=T.touches[0];A(E.clientX,E.clientY,T.target)};if(j.useEffect(()=>{const T=I=>{if(M){const G="touches"in I?I.touches[0].clientX:I.clientX,J="touches"in I?I.touches[0].clientY:I.clientY;C({x:G-$.current.x,y:J-$.current.y})}},E=()=>N(!1);return M&&(window.addEventListener("mousemove",T),window.addEventListener("mouseup",E),window.addEventListener("touchmove",T,{passive:!1}),window.addEventListener("touchend",E)),()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",E),window.removeEventListener("touchmove",T),window.removeEventListener("touchend",E)}},[M]),!e)return null;const L=i?["B","G1","G2","R"]:["R","G1","G2","B"];return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:P.x,top:P.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${M?"cursor-grabbing":"cursor-grab"}`,onMouseDown:D,onTouchStart:R,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),c.jsx("select",{value:d,onChange:T=>h(T.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:L.map(T=>c.jsx("option",{value:T,children:T},T))})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),c.jsx("input",{type:"number",value:p,onChange:T=>y(Number(T.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),c.jsx("input",{type:"number",value:m,onChange:T=>x(Number(T.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsx("button",{onClick:_,disabled:b,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:b?"Analyzing...":"Run Analysis"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[k&&c.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:k}),!v&&!b&&!k&&c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:c.jsx("p",{children:"Configure parameters and click Run Analysis"})}),v&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.uniqueCount})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.diffCount})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[c.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),c.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(v.stepCounts).sort((T,E)=>parseFloat(T[0])-parseFloat(E[0])).map(([T,E])=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",T,":"]}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(E)})]},T))})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[c.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(ul,{data:v.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Bn,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),c.jsx(Fn,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),c.jsx(Vr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:T=>`Val: ${T}`,formatter:T=>[T,"Step Size"]}),c.jsx(Nr,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},Ote=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:l})=>{const[u,f]=j.useState("cross"),[d,h]=j.useState("R"),[p,y]=j.useState("B"),[m,x]=j.useState("H"),[v,g]=j.useState(null),[b,S]=j.useState(!1),[k,w]=j.useState(0),[P,C]=j.useState(0),[M,N]=j.useState("single"),$=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},_=a?["B","G1","G2","R"]:["R","G1","G2","B"],A=async D=>{if(!r||!n)return;S(!0),N(D),w(0),g(null);let R=$[d],L=u==="cross"?$[p]:R,T=0,E=0;u==="self"&&(m==="H"?E=2:T=2),setTimeout(async()=>{try{let I={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(D==="single")I=o2(r.data,r.width,r.height,n,R,L,T,E);else if(l&&l.length>0)for(let G=0;G<l.length;G++){w(G+1);const J=await l[G].arrayBuffer(),K=await a0(J),F=o2(K.data,K.width,K.height,n,R,L,T,E);I.sumCov+=F.sumCov,I.sumVar1+=F.sumVar1,I.sumVar2+=F.sumVar2,I.n+=F.n}C(I.n),g(L_(I))}catch(I){console.error("Pearson calculation failed",I),alert("Calculation error: "+I.message)}finally{S(!1)}},50)};return e?c.jsxs(cc,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),c.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),c.jsx("select",{value:d,onChange:D=>h(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:_.map(D=>c.jsx("option",{value:D,children:D},D))})]}),c.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?c.jsx("select",{value:p,onChange:D=>y(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:_.map(D=>c.jsx("option",{value:D,children:D},D))}):c.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[c.jsx("button",{onClick:()=>x("H"),className:`flex-1 text-[9px] font-bold rounded ${m==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),c.jsx("button",{onClick:()=>x("V"),className:`flex-1 text-[9px] font-bold rounded ${m==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:()=>A("single"),disabled:b,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:b&&M==="single"?"Calculating...":"Calc Current Frame"}),l&&l.length>0&&c.jsxs("button",{onClick:()=>A("stack"),disabled:b,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[c.jsx("span",{children:"Calc Stack Concatenated"}),b&&M==="stack"&&c.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",k," / ",l.length]})]})]}),v!==null&&c.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${m})`," r"]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:v.toFixed(5)}),c.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",P.toLocaleString()," pairs"]}),c.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(v)>.5?c.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(v)>.1?c.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):c.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),c.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${m==="V"?"+2":""}, c${m==="H"?"+2":""}) in the same channel.`})]}):null},Mte=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],_te=["5","9","0","8","2","1","4","7","3","6"],e5=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:_te[r]}).join(""),Ate=({isOpen:e,onClose:t})=>{const[r,n]=j.useState({pv:"--",uv:"--"});return j.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[c.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:c.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[c.jsx("span",{className:"font-bold mr-2",children:"about:"}),c.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),c.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Mte.map(a=>c.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),c.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),c.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:c.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[c.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:e5(r.pv)}),c.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:e5(r.uv)})]})})})]})]})}):null},Tte=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=j.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(h,p)=>{if(typeof p=="bigint")return p.toString()+"n";if(typeof p=="object"&&p!==null){if(d.has(p))return"[Circular]";if(d.add(p),ArrayBuffer.isView(p))return`[${p.constructor.name}]`}return p})}catch{return"[Unable to serialize object]"}},l=j.useMemo(()=>{if(!r)return[];const f=[],d=(h,p=0)=>{if(p>5)return"...";if(h==null)return String(h);if(h instanceof Date)return h.toLocaleString();if(typeof h=="number")return h.toString();if(typeof h=="string")return h;if(typeof h=="bigint")return h.toString()+"n";if(ArrayBuffer.isView(h))return`<${h.constructor.name} len=${h.length} bytes=${h.byteLength}>`;if(h instanceof ArrayBuffer)return`<ArrayBuffer bytes=${h.byteLength}>`;if(typeof h=="object"){if(Array.isArray(h))return h.length===0?"[]":h.length>20?`[${h.slice(0,10).map(x=>typeof x=="number"?x.toFixed(2):d(x,p+1)).join(", ")}, ... (+${h.length-10} more)]`:`[${h.map(m=>typeof m=="number"?Number.isInteger(m)?m:m.toFixed(4):d(m,p+1)).join(", ")}]`;try{const y=Object.keys(h);return y.length>5?`{Object with ${y.length} keys}`:s(h)}catch{return"<Complex Object>"}}return String(h)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(p=>{if(p==="MakerNote"||p==="UserComment"||p.includes("Strip")||p.includes("Offset")){f.push({key:p,value:"<Binary/Internal Data>"});return}const y=r[p];f.push({key:p,value:d(y)})})}catch(h){console.error("Error processing EXIF data:",h),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=l.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:c.jsxs("div",{className:"relative",children:[c.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?c.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[c.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),c.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):c.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:c.jsxs("p",{children:['No tags found matching "',i,'"']})})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},Ete=100,Dg=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},t5=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=j.useRef(null),s=j.useRef(null),l=j.useCallback(g=>{const b=i?Math.max(1e-6,e):e,S=i?Math.max(b*1.0001,t):t,k=Math.max(b,Math.min(S,g));if(i){const w=Math.log10(b),P=Math.log10(S);return(Math.log10(k)-w)/(P-w)}return(k-b)/(S-b)},[e,t,i]),u=j.useCallback(g=>{const b=i?Math.max(1e-6,e):e,S=i?Math.max(b*1.0001,t):t;if(i){const k=Math.log10(b),w=Math.log10(S);return Math.pow(10,k+g*(w-k))}return b+g*(S-b)},[e,t,i]),f=(g,b)=>{g.preventDefault(),g.stopPropagation(),s.current=b;const S=w=>{if(!s.current||!o.current)return;const P=o.current.getBoundingClientRect();let C=0;a?C=(P.bottom-w.clientY)/P.height:C=(w.clientX-P.left)/P.width,C=Math.max(0,Math.min(1,C));const M=u(C);if(s.current==="min"){const N=r[1];n([Math.min(M,N),N])}else{const N=r[0];n([N,Math.max(M,N)])}},k=()=>{s.current=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",k)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",k)},d=l(r[0])*100,h=l(r[1])*100,p=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},y=a?{left:"50%",bottom:`${d}%`,height:`${h-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${h-d}%`,height:"4px",transform:"translateY(-50%)"},m="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",x=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},v=a?{left:"50%",bottom:`${h}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${h}%`,transform:"translate(-50%, -50%)"};return c.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[c.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:p}),c.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:y}),c.jsx("div",{className:m,style:x,onMouseDown:g=>f(g,"min")}),c.jsx("div",{className:m,style:v,onMouseDown:g=>f(g,"max")})]})},$te=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:l,initialISO:u})=>{const[f,d]=j.useState("Noise"),[h,p]=j.useState(!0),[y,m]=j.useState(null),[x,v]=j.useState("default"),[g,b]=j.useState(!1),[S,k]=j.useState(!1),[w,P]=j.useState({R:!0,G1:!0,G2:!0,B:!0}),[C,M]=j.useState(""),[N,$]=j.useState(""),[_,A]=j.useState(""),[D,R]=j.useState(""),[L,T]=j.useState("10"),[E,I]=j.useState(""),[G,J]=j.useState("0 0 0 0"),[K,F]=j.useState("0 0 0 0"),[ee,se]=j.useState(!1),[Y,le]=j.useState(null),[H,X]=j.useState(!1),[oe,ue]=j.useState(0),[V,pe]=j.useState([]),[q,te]=j.useState(""),[ye,me]=j.useState(""),Ue=()=>{const O=parseFloat(q),U=parseFloat(ye);!isNaN(O)&&!isNaN(U)&&(pe([...V,{id:Date.now(),x:O,y:U}]),te(""),me(""))},[Te,Oe]=j.useState(()=>localStorage.getItem("ptc_tester_name")||""),[De,ct]=j.useState(""),[ut,lr]=j.useState("");j.useEffect(()=>{localStorage.setItem("ptc_tester_name",Te)},[Te]);const ft=j.useRef(ee),pr=j.useRef(H),Je=j.useRef(oe);j.useEffect(()=>{ft.current=ee,pr.current=H,Je.current=oe},[ee,H,oe]);const[Ft,$t]=j.useState(null),[cr,Dt]=j.useState({min:.01,max:90}),[yt,Ke]=j.useState({readNoise:0,gain:1,prnu:.5}),[wt,At]=j.useState(2e6),Zt=j.useRef(yt),kr=j.useRef(cr),Fr=j.useRef(wt);j.useEffect(()=>{Zt.current=yt,kr.current=cr,Fr.current=wt},[yt,cr,wt]);const[kt,_r]=j.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[ot,gr]=j.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[Ar,nn]=j.useState(!1),[zr,na]=j.useState([]),[Gn,aa]=j.useState(null),[Un,ia]=j.useState(""),mr=j.useMemo(()=>n?n.join(","):"",[n]);j.useEffect(()=>{if(e){let O="0 0 0 0";o&&o.blackLevel?O=o.blackLevel.join(" "):O=n&&n.length===4?n.join(" "):"0 0 0 0",J(O),F(O);let U="";if(o&&o.height?U=o.height.toString():a&&(U=a.toString()),I(U),U){const B=parseFloat(U);!isNaN(B)&&B>0?T((2309.4/B).toFixed(2)):T("10")}else T("10");le(null),se(!1),X(!1),ue(0),na([]),aa(null),Dt({min:.01,max:90}),_r({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const re={readNoise:0,gain:0,prnu:0};Ke(re),Zt.current=re,M(""),$(""),A(""),R(""),d("Noise"),$t(null),At(2e6),ia(""),k(!1),pe([]),ct(B=>B.trim()===""&&l?l:B),lr(B=>B.trim()===""&&u?u:B)}},[e,mr,o,a,r,l,u]);const mn=O=>{if(O.key==="Enter"){const U=parseFloat(E);if(!isNaN(U)&&U>0){const re=(2309.4/U).toFixed(2);T(re)}O.target.blur()}},gt=j.useMemo(()=>{let U=K.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(U.length===1&&(U=[U[0],U[0],U[0],U[0]]);U.length<4;)U.push(0);const re=B=>{switch(B){case"R":return U[0];case"G1":return U[1];case"G2":return U[2];case"B":return U[3];default:return 0}};return r.map(B=>{const ce=B.mean-re(B.channel),de=B.std>0?ce/B.std:0;return{...B,x:ce,std:B.std,snr:de}}).filter(B=>B.std>0)},[r,K]),zt=j.useMemo(()=>{const O=yt.readNoise,U=O*O;return gt.map(re=>{let B=0;if(f==="Noise")B=re.std;else if(f==="SNR")B=re.snr;else if(f==="Linear"){const de=re.std*re.std-U;B=re.x!==0?de/re.x:0}return{...re,y:B}})},[gt,f,yt.readNoise]),vt=j.useMemo(()=>{if(gt.length===0)return"G1";const O={R:0,G1:0,G2:0,B:0},U={R:0,G1:0,G2:0,B:0};for(const ce of gt)O[ce.channel]+=ce.x,U[ce.channel]++;let re="G1",B=-1/0;return Object.keys(O).forEach(ce=>{const de=U[ce],Ne=de>0?O[ce]/de:-1/0;Ne>B&&(B=Ne,re=ce)}),re},[gt]),ie=j.useCallback(()=>{let O=1/0,U=-1/0;if(gt.length===0)return{min:.1,max:1};for(let re=0;re<gt.length;re++){const B=gt[re].x;h&&B<=0||(B<O&&(O=B),B>U&&(U=B))}return O===1/0?{min:.1,max:1}:{min:O,max:U}},[gt,h]),Me=j.useCallback(()=>{let O=1/0,U=-1/0;if(zt.length===0)return{min:.1,max:1};for(let re=0;re<zt.length;re++){const B=zt[re].y;h&&B<=0||(B<O&&(O=B),B>U&&(U=B))}return O===1/0?{min:.1,max:1}:{min:O*.9,max:U*1.1}},[zt,h]),{min:Ie,max:st}=ie(),{min:Ze,max:It}=Me(),Tt=st*(cr.min/100),nr=st*(cr.max/100),ze=j.useMemo(()=>{if(!h&&zt.length===0)return{shot:[],read:[],prnu:[],total:[]};const O=C?parseFloat(C):Ie,U=N?parseFloat(N):st,re=100,B=Math.max(.1,O),ce=Math.max(1,U);if(B>=ce)return{shot:[],read:[],prnu:[],total:[]};const de=Math.log10(B),xe=(Math.log10(ce)-de)/re,Ve=yt.readNoise,Ee=yt.gain>0?yt.gain:1,dt=yt.prnu/100,tt=[],Qe=[],Qt=[],fe=[];for(let He=0;He<=re;He++){const _e=Math.pow(10,de+He*xe);if(f==="Linear"){const Rt=1/Ee,Ct=dt*dt,an=Rt+Ct*_e;fe.push({x:_e,y:an}),tt.push({x:_e,y:Rt}),Qt.push({x:_e,y:Ct*_e})}else{const Rt=Ve,Ct=Math.sqrt(_e/Ee),an=dt*_e,xt=Math.sqrt(Rt*Rt+Ct*Ct+an*an);f==="Noise"?(tt.push({x:_e,y:Ct}),Qe.push({x:_e,y:Rt}),Qt.push({x:_e,y:an}),fe.push({x:_e,y:xt})):(Ct>0&&tt.push({x:_e,y:_e/Ct}),Rt>0&&Qe.push({x:_e,y:_e/Rt}),an>0&&Qt.push({x:_e,y:_e/an}),xt>0&&fe.push({x:_e,y:_e/xt}))}}return{shot:tt,read:Qe,prnu:Qt,total:fe}},[zt,h,C,N,yt,f,Ie,st]),et=j.useMemo(()=>{if(f==="Linear")return[];const O=parseFloat(L);if(isNaN(O)||O<=0)return[];const U=C?parseFloat(C):Ie,re=N?parseFloat(N):st;return f==="SNR"?[{x:U,y:O},{x:re,y:O}]:[{x:U,y:U/O},{x:re,y:re/O}]},[zt,L,f,C,N,Ie,st]),Pt=j.useCallback((O,U)=>{if(!U||U.length===0)return null;const re=[...U].sort((B,ce)=>B.x-ce.x);for(let B=0;B<re.length-1;B++){const ce=re[B],de=re[B+1];if(ce.snr<=O&&de.snr>=O||ce.snr>=O&&de.snr<=O){const Ne=(O-ce.snr)/(de.snr-ce.snr);return ce.x+Ne*(de.x-ce.x)}}return null},[]),St=j.useMemo(()=>{const O=gt,U=1e3,re=ce=>{if(ce.length===0)return[];if(ce.length<=U)return ce;const de=[...ce].sort((Ve,Ee)=>Ve.x-Ee.x),Ne=[],xe=de.length/U;for(let Ve=0;Ve<U;Ve++){const Ee=Math.floor(Ve*xe),dt=Math.floor((Ve+1)*xe),tt=de.slice(Ee,dt);if(tt.length===0)continue;tt.sort((Qt,fe)=>Qt.std-fe.std);const Qe=Math.floor(tt.length/2);Ne.push(tt[Qe])}return Ne},B={R:[],G1:[],G2:[],B:[]};return O.forEach(ce=>{B[ce.channel]&&B[ce.channel].push(ce)}),{R:re(B.R),G1:re(B.G1),G2:re(B.G2),B:re(B.B)}},[gt]),ar=j.useMemo(()=>Y&&yt.gain?Y*yt.gain:null,[Y,yt.gain]),we=j.useMemo(()=>{if(Y===null||Y===0)return null;const O=parseFloat(L);let U=null;if(!isNaN(O)&&O>0){let Ne=0,xe=0;if(["R","G1","G2","B"].forEach(Ve=>{const Ee=Pt(O,St[Ve]);Ee!==null&&(Ne+=Ee,xe++)}),xe>0){const Ve=Ne/xe;U=Math.log2(Y/Ve)}}const re=parseFloat(E);let B=null,ce=NaN;if(!isNaN(re)&&re>0){ce=16e3/re;let Ne=0,xe=0;if(["R","G1","G2","B"].forEach(Ve=>{const Ee=Pt(ce,St[Ve]);Ee!==null&&(Ne+=Ee,xe++)}),xe>0){const Ve=Ne/xe;B=Math.log2(Y/Ve)}}let de=null;if(!isNaN(re)&&re>0){const Ne=Pt(ce,St[vt]);Ne!==null&&(de=Math.log2(Y/Ne))}return{manualDR:U,ptpDR:B,d55DR:de,manualTarget:O,ptpTarget:ce,saturationSignal:Y,dominantChannel:vt}},[Y,L,E,St,Pt,vt]),Yr=j.useMemo(()=>{if(f==="Linear"||!we||!we.ptpTarget||isNaN(we.ptpTarget))return[];const O=we.ptpTarget,U=C?parseFloat(C):Ie,re=N?parseFloat(N):st;return f==="SNR"?[{x:U,y:O},{x:re,y:O}]:[{x:U,y:U/O},{x:re,y:re/O}]},[f,we,C,N,Ie,st]),To=j.useCallback(()=>{const re=document.createElement("canvas");re.width=2048,re.height=1536;const B=re.getContext("2d");if(!B)return;const ce=s==="dark",de=ce?"#0f172a":"#ffffff",Ne=ce?"#ffffff":"#000000",xe=ce?"#475569":"#cbd5e1",Ve=ce?"#1e293b":"#f1f5f9",Ee=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};B.fillStyle=de,B.fillRect(0,0,2048,1536);let dt=C?parseFloat(C):Ie,tt=N?parseFloat(N):st,Qe=_?parseFloat(_):Ze,Qt=D?parseFloat(D):It;isNaN(dt)&&(dt=.1),isNaN(tt)&&(tt=1e4),isNaN(Qe)&&(Qe=.1),isNaN(Qt)&&(Qt=1e3);const fe={top:80,right:80,bottom:100,left:120},He=2048-fe.left-fe.right,_e=1536-fe.top-fe.bottom,Rt=je=>{if(h){const at=Math.log10(Math.max(1e-9,dt)),qe=Math.log10(Math.max(1e-9,tt)),rt=Math.log10(Math.max(1e-9,je));return fe.left+(rt-at)/(qe-at)*He}else return fe.left+(je-dt)/(tt-dt)*He},Ct=je=>{if(h){const at=Math.log10(Math.max(1e-9,Qe)),qe=Math.log10(Math.max(1e-9,Qt)),rt=Math.log10(Math.max(1e-9,je));return fe.top+_e-(rt-at)/(qe-at)*_e}else return fe.top+_e-(je-Qe)/(Qt-Qe)*_e};if(B.beginPath(),h){const je=(at,qe,rt)=>{const bn=Math.log10(Math.max(1e-9,at)),_n=Math.log10(Math.max(1e-9,qe)),ca=Math.floor(bn),ua=Math.ceil(_n);for(let hi=ca;hi<=ua;hi++){const _a=Math.pow(10,hi);let Jt=rt?Rt(_a):Ct(_a);(rt?Jt>=fe.left-1&&Jt<=fe.left+He+1:Jt>=fe.top-1&&Jt<=fe.top+_e+1)&&(B.lineWidth=1.5,B.strokeStyle=xe,B.beginPath(),rt?(B.moveTo(Jt,fe.top),B.lineTo(Jt,fe.top+_e)):(B.moveTo(fe.left,Jt),B.lineTo(fe.left+He,Jt)),B.stroke()),B.lineWidth=.5,B.strokeStyle=Ve;for(let mc=2;mc<10;mc++){const Cf=mc*_a;Jt=rt?Rt(Cf):Ct(Cf),(rt?Jt>=fe.left&&Jt<=fe.left+He:Jt>=fe.top&&Jt<=fe.top+_e)&&(B.beginPath(),rt?(B.moveTo(Jt,fe.top),B.lineTo(Jt,fe.top+_e)):(B.moveTo(fe.left,Jt),B.lineTo(fe.left+He,Jt)),B.stroke())}}};je(dt,tt,!0),je(Qe,Qt,!1)}else{B.strokeStyle=xe,B.lineWidth=1;for(let je=0;je<=5;je++){const at=fe.left+He*je/5;B.beginPath(),B.moveTo(at,fe.top),B.lineTo(at,fe.top+_e),B.stroke();const qe=fe.top+_e*je/5;B.beginPath(),B.moveTo(fe.left,qe),B.lineTo(fe.left+He,qe),B.stroke()}}B.strokeStyle=Ne,B.lineWidth=2,B.strokeRect(fe.left,fe.top,He,_e);const an=(je,at,qe)=>{je<fe.left||je>fe.left+He||at<fe.top||at>fe.top+_e||(B.fillStyle=qe,B.fillRect(je-1.5,at-1.5,3,3))},xt=zt.filter(je=>!(h&&(je.x<=0||je.y<=0)));xt.forEach(je=>{w[je.channel]&&je.channel!==vt&&an(Rt(je.x),Ct(je.y),Ee[je.channel])}),xt.forEach(je=>{w[je.channel]&&je.channel===vt&&an(Rt(je.x),Ct(je.y),Ee[je.channel])}),V.forEach(je=>{const at=Rt(je.x),qe=Ct(je.y);if(at<fe.left||at>fe.left+He||qe<fe.top||qe>fe.top+_e)return;B.strokeStyle="#d946ef",B.lineWidth=2.5;const rt=6;B.beginPath(),B.moveTo(at-rt,qe-rt),B.lineTo(at+rt,qe+rt),B.moveTo(at+rt,qe-rt),B.lineTo(at-rt,qe+rt),B.stroke()});const ur=(je,at,qe=[])=>{if(je.length<2)return;B.beginPath(),B.strokeStyle=at,B.lineWidth=3,B.setLineDash(qe);let rt=!1;for(const bn of je){const _n=Rt(bn.x),ca=Ct(bn.y);if(_n<fe.left-100||_n>fe.left+He+100||ca<fe.top-100||ca>fe.top+_e+100){rt=!1;continue}rt?B.lineTo(_n,ca):(B.moveTo(_n,ca),rt=!0)}B.stroke(),B.setLineDash([])},on=ce?"#ffffff":"#000000";if(ot.shot&&ur(ze.shot,"#94a3b8",[5,5]),ot.read&&ur(ze.read,"#f43f5e",[3,3]),ot.prnu&&ur(ze.prnu,"#f59e0b",[3,3]),ot.total&&ur(ze.total,on,[]),et.length===2){const je="#6366f1";ur(et,je,[4,2]);const at=et[1],qe=Ct(at.y);qe>=fe.top&&qe<=fe.top+_e&&(B.fillStyle=je,B.font="bold 20px sans-serif",B.textAlign="right",B.textBaseline="bottom",B.fillText(`M.Tgt=${L}`,fe.left+He-10,qe-8))}if(Yr.length===2&&(we!=null&&we.ptpTarget)){const je="#10b981";ur(Yr,je,[4,4]);const at=Yr[1],qe=Ct(at.y);if(qe>=fe.top&&qe<=fe.top+_e){B.fillStyle=je,B.font="bold 20px sans-serif",B.textAlign="right",B.textBaseline="bottom";const rt=we.ptpTarget.toFixed(1),bn=et.length===2?Ct(et[1].y):-100,_n=Math.abs(qe-bn)<25?25:0;B.fillText(`PTP=${rt}`,fe.left+He-10,qe-8-_n)}}if(ot.fitRange||H){const je=(at,qe)=>{const rt=Rt(at);rt>=fe.left&&rt<=fe.left+He&&(B.beginPath(),B.strokeStyle=qe,B.lineWidth=2,B.setLineDash([8,8]),B.moveTo(rt,fe.top),B.lineTo(rt,fe.top+_e),B.stroke(),B.setLineDash([]))};je(Tt,"#22d3ee"),je(nr,"#22d3ee")}if(Y){const je=Rt(Y);je>=fe.left&&je<=fe.left+He&&(B.strokeStyle="#ef4444",B.lineWidth=3,B.setLineDash([10,10]),B.beginPath(),B.moveTo(je,fe.top),B.lineTo(je,fe.top+_e),B.stroke(),B.setLineDash([]),B.fillStyle="#ef4444",B.font="bold 24px sans-serif",B.textAlign="center",B.fillText("Sat",je,fe.top-10))}B.fillStyle=Ne,B.font="28px monospace",B.textAlign="center",B.fillText(dt.toExponential(1),fe.left,fe.top+_e+40),B.fillText(tt.toExponential(1),fe.left+He,fe.top+_e+40),B.fillText("Signal (DN)",fe.left+He/2,fe.top+_e+80),B.textAlign="right",B.textBaseline="middle",B.fillText(Qe.toExponential(1),fe.left-20,fe.top+_e),B.fillText(Qt.toExponential(1),fe.left-20,fe.top),B.save(),B.translate(fe.left-80,fe.top+_e/2),B.rotate(-Math.PI/2),B.textAlign="center",B.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),B.restore(),B.save(),B.translate(2048/2,1536/2),B.rotate(-Math.PI/6),B.textAlign="center",B.textBaseline="middle",B.fillStyle=ce?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",B.font="bold 150px sans-serif",B.fillText(" y-g-jiang.github.io",0,0),B.restore(),B.fillStyle=Ne,B.font="bold 36px sans-serif",B.textAlign="left",B.textBaseline="top",B.fillText(`PTC Export: ${f} Mode`,fe.left,20),B.font="24px sans-serif",B.fillStyle=ce?"#94a3b8":"#64748b",B.fillText(`Points: ${zt.length} | Sat Channel: ${vt}`,fe.left,65);const qr=fe.left+30,Ts=fe.top+30,yp=70,kf=je=>{if(!Y||je<=0)return"--";const at=yt.readNoise,qe=yt.gain,rt=yt.prnu/100;if(qe<=0)return"--";const bn=je*je,_n=at*at,ca=1-bn*rt*rt,ua=-(bn/qe),hi=-(bn*_n);let _a=0;if(Math.abs(ca)<1e-8)Math.abs(ua)>1e-8&&(_a=-hi/ua);else{const Jt=ua*ua-4*ca*hi;Jt>=0&&(_a=(-ua+Math.sqrt(Jt))/(2*ca))}return _a>0?Math.log2(Y/_a).toFixed(2)+" EV":"--"},vp=we!=null&&we.ptpTarget&&!isNaN(we.ptpTarget)?kf(we.ptpTarget):"--",xp=L?kf(parseFloat(L)):"--";B.font="bold 48px monospace",B.textAlign="left",B.textBaseline="top",B.shadowColor=ce?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",B.shadowBlur=4,B.shadowOffsetX=1,B.shadowOffsetY=1;const sn=(je,at,qe,rt)=>{const bn=Ts+qe*yp;B.fillStyle=Ne,B.fillText(je,qr,bn);const _n=B.measureText(je).width;B.fillStyle=rt||Ne,B.fillText(at,qr+_n,bn)},bp=kt.read,Eo=parseFloat(kt.gain).toFixed(3),wp=parseFloat(kt.prnu).toFixed(2)+"%";let Sf=`M.DR@SNR${L}: `;const gc=parseFloat(E);if(!isNaN(gc)&&gc>0){const je=(2309.4/gc).toFixed(2);Math.abs(parseFloat(L)-parseFloat(je))<.05&&(Sf="8mpSNR=1 DR: ")}sn("Tester: ",Te||"N/A",0),sn("Model : ",De||"Unknown",1),sn("ISO   : ",ut||"N/A",2),sn("RN/FPN: ",bp,3,"#f43f5e"),sn("KADC  : ",Eo,4,"#06b6d4"),sn("PRNU  : ",wp,5,"#f59e0b"),sn("PTP DR: ",we!=null&&we.ptpDR?we.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),sn("D55 DR: ",we!=null&&we.d55DR?we.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),sn("FWC   : ",ar?ar>1e4?(ar/1e3).toFixed(1)+"k":Math.round(ar).toString():"--",8,"#f97316"),sn(Sf,we!=null&&we.manualDR?we.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),sn("PTCFitDR(PTP): ",vp,10,"#10b981"),sn("PTCFitDR(Man): ",xp,11,"#06b6d4"),B.save(),B.textAlign="right",B.textBaseline="bottom",B.fillStyle="#3b82f6",B.font="bold 80px sans-serif",B.shadowColor=ce?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",B.shadowBlur=4,B.shadowOffsetX=2,B.shadowOffsetY=2;const jf=1988,Pf=1476,kp=90;B.fillText("Online",jf,Pf),B.fillText("Jiangtherapee",jf,Pf-kp),B.restore();const Es=document.createElement("a");Es.download=`ptc_complete_${f}_${Date.now()}.jpg`,Es.href=re.toDataURL("image/jpeg",.9),Es.click()},[zt,vt,w,C,N,_,D,Ie,st,Ze,It,h,s,f,Y,i,ot,ze,Tt,nr,cr,H,Te,De,ut,we,ar,L,et,Yr,kt,E,V]),Wn=j.useMemo(()=>{let O=zt;if(h&&(O=O.filter(ce=>ce.y>0&&ce.x>0)),x==="top3"){const ce=[...O].sort((Ne,xe)=>xe.x-Ne.x),de=Math.max(50,Math.ceil(ce.length*.03));O=ce.slice(0,de)}const U={R:[],G1:[],G2:[],B:[]};if(O.forEach(ce=>{U[ce.channel]&&U[ce.channel].push(ce)}),x==="raw")return U;const re=x==="top3"?500:Ete,B=ce=>{if(ce.length<=re)return ce;const de=[...ce].sort((Ve,Ee)=>Ve.x-Ee.x),Ne=[],xe=de.length/re;for(let Ve=0;Ve<re;Ve++){const Ee=Math.floor(Ve*xe),dt=Math.floor((Ve+1)*xe),tt=de.slice(Ee,dt);if(tt.length===0)continue;tt.sort((Qt,fe)=>Qt.y-fe.y);const Qe=Math.floor(tt.length/2);Ne.push(tt[Qe])}return Ne};return{R:B(U.R),G1:B(U.G1),G2:B(U.G2),B:B(U.B)}},[zt,x,h]),oa=j.useMemo(()=>{if(gt.length<5)return[];const O=gt.filter(re=>re.channel===vt);return[...O.length>20?O:gt].sort((re,B)=>re.x-B.x).map(re=>({mean:re.x,std:re.std}))},[gt,vt]),uc=O=>{const U=O.length;if(U===0)return[];const re=O.reduce((He,_e)=>He+_e,0)/U,B=O.reduce((He,_e)=>He+Math.pow(_e-re,2),0)/(U-1||1),ce=Math.sqrt(B);if(ce===0)return[{x:re-.001,density:0},{x:re,density:1},{x:re+.001,density:0}];const de=1.06*ce*Math.pow(U,-.2),Ne=Math.min(...O),xe=Math.max(...O),Ve=(xe-Ne)*.2||Ne*.1,Ee=Math.max(0,Ne-Ve),dt=xe+Ve,tt=100,Qe=(dt-Ee)/(tt-1),Qt=He=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*He*He),fe=[];for(let He=0;He<tt;He++){const _e=Ee+He*Qe;let Rt=0;for(let Ct=0;Ct<U;Ct++)Rt+=Qt((_e-O[Ct])/de);Rt/=U*de,fe.push({x:_e,density:Rt})}return fe},Vn=j.useCallback((O,U,re,B)=>{if(O.length<5)return{gain:0,prnu:0};const ce=O[O.length-1].mean,de=ce*(re.min/100),Ne=ce*(re.max/100),xe=O.filter(xt=>xt.mean>=de&&xt.mean<=Ne);if(xe.length<5)return{gain:0,prnu:0};$t({nPoints:xe.length});const Ve=U*U,Ee=[],dt=[];if(xe.forEach(xt=>{const on=xt.std*xt.std-Ve;if(xt.mean>1&&on>0){const qr=xt.mean,Ts=on/xt.mean;Ee.push({x:qr,y:Ts}),dt.push(xt.mean/on)}}),Ee.length<5)return{gain:0,prnu:0};const tt=[],Qe=Ee.length,Qt=B,fe=Qe*(Qe-1)/2;if(fe<=Qt)for(let xt=0;xt<Qe;xt++)for(let ur=xt+1;ur<Qe;ur++){const on=Ee[ur].x-Ee[xt].x;Math.abs(on)>1e-5&&tt.push((Ee[ur].y-Ee[xt].y)/on)}else{const xt=Math.max(1,Math.floor(fe/Qt));for(let ur=0;ur<Qe;ur++)for(let on=ur+1;on<Qe;on+=xt){const qr=Ee[on].x-Ee[ur].x;Math.abs(qr)>1e-5&&tt.push((Ee[on].y-Ee[ur].y)/qr)}}const He=Dg(tt),_e=Ee.map(xt=>xt.y-He*xt.x),Rt=Dg(_e);let Ct=0,an=0;if(Rt>1e-6?Ct=1/Rt:Ct=Dg(dt),He>0&&(an=Math.sqrt(He)*100),dt.length>0){const xt=uc(dt);na(xt),aa(Ct)}else na([]);return{gain:Ct,prnu:an}},[]),yn=j.useCallback(O=>{let U=O.read??Zt.current.readNoise;const re=O.gRange??kr.current,B=Fr.current;if((O.read!==void 0||O.gRange!==void 0)&&O.gain===void 0&&O.prnu===void 0&&oa.length>0&&U>=0)k(!0),setTimeout(()=>{const de=Vn(oa,U,re,B);let Ne=Zt.current.gain,xe=Zt.current.prnu;de.gain>0&&(Ne=de.gain,xe=de.prnu),Ke({readNoise:U,gain:Ne,prnu:xe}),O.gRange!==void 0&&Dt(O.gRange),_r(Ve=>{var Ee,dt;return{...Ve,read:U.toString(),gain:Ne>0?Ne.toFixed(3):"0",prnu:xe.toFixed(2),rangeMin:(((Ee=O.gRange)==null?void 0:Ee.min)??Ve.rangeMin).toString(),rangeMax:(((dt=O.gRange)==null?void 0:dt.max)??Ve.rangeMax).toString()}}),k(!1)},50);else{let de=O.gain!==void 0?O.gain:Zt.current.gain,Ne=O.prnu!==void 0?O.prnu:Zt.current.prnu;Ke({readNoise:U,gain:de,prnu:Ne}),O.gRange!==void 0&&Dt(O.gRange),_r(xe=>{var Ve,Ee;return{...xe,read:U.toString(),gain:de>0?de.toFixed(3):"0",prnu:Ne.toFixed(2),rangeMin:(((Ve=O.gRange)==null?void 0:Ve.min)??xe.rangeMin).toString(),rangeMax:(((Ee=O.gRange)==null?void 0:Ee.max)??xe.rangeMax).toString()}})}},[oa,Vn]),Hn=`${K}-${r.length}`;j.useEffect(()=>{if(!e||!r||r.length===0)return;const O=Wn[vt];if(!O||O.length===0||Un===Hn)return;P({R:vt==="R",G1:vt==="G1",G2:vt==="G2",B:vt==="B"});const U=[...O].sort((de,Ne)=>de.x-Ne.x);let re=0;U.length>0&&(re=U[0].std);const B=gt.filter(de=>de.channel===vt);let ce=-1/0;for(const de of B)de.x>ce&&(ce=de.x);ce!==-1/0&&le(ce),yn({read:re}),ia(Hn)},[e,r,Un,Hn,Wn,vt,yn,gt]);const vn=(O,U)=>{_r(re=>({...re,[O]:U}))},Na=O=>{let U=parseFloat(kt[O]);isNaN(U)||U<0||yn({[O]:U})},Fi=()=>{F(G),ia("")},Xa=()=>{const O=parseFloat(kt.rangeMin),U=parseFloat(kt.rangeMax);!isNaN(O)&&!isNaN(U)&&O<U&&O>=0&&U<=100&&yn({gRange:{min:O,max:U}})},fi=(O,U)=>{O.key==="Enter"&&(U==="rangeMin"||U==="rangeMax"?Xa():Na(U),O.target.blur())};j.useEffect(()=>{e&&oa.length>0&&yn({})},[e,wt,oa]);const sa=O=>{P(U=>({...U,[O]:!U[O]}))},fc=()=>{v(O=>O==="top3"?"default":"top3")},Oa=()=>{x==="raw"?v("default"):b(!0)},dc=()=>{b(!1),v("raw")},Ma=(O,U)=>{const re=parseFloat(O),B=parseFloat(U);let ce=isNaN(re)?"auto":re,de=isNaN(B)?"auto":B;return h&&typeof ce=="number"&&ce<=0&&(ce="auto"),[ce,de]},di=O=>{if(!O||!O.payload)return;const U=O.payload;if(m(U),ft.current&&(le(U.x),se(!1)),pr.current){const re=kr.current.min,B=kr.current.max,{max:ce}=ie();if(ce<=0)return;const de=Math.max(0,Math.min(100,U.x/ce*100));if(Je.current===1){const Ne=Math.min(de,B-.5);yn({gRange:{min:Ne,max:B}}),ue(2)}else if(Je.current===2){const Ne=Math.max(de,re+.5);yn({gRange:{min:re,max:Ne}}),ue(0),X(!1)}}},xn=j.useCallback(O=>{const{cx:U,cy:re,fill:B}=O;return c.jsx("circle",{cx:U,cy:re,r:3,fill:B,stroke:"none",style:{cursor:"pointer"}})},[]),hc=({active:O,payload:U})=>{if(O&&U&&U.length){const re=U[0].payload;return c.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[c.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:re.channel}),c.jsxs("div",{children:["Signal: ",re.x.toFixed(2)]}),c.jsxs("div",{children:[f,": ",re.y.toFixed(4)]}),re.row!==void 0&&re.col!==void 0&&!isNaN(re.row)&&!isNaN(re.col)&&c.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",re.row,", Col ",re.col]}),re.filename&&c.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:re.filename,children:re.filename})]})}return null},la=O=>{d(O),O==="Linear"&&p(!1)};if(!e)return null;const pc=s==="dark"?"#ffffff":"#000000";let zi=f;f==="Linear"&&(zi="(Var - RN) / Mean");const As=G!==K;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:O=>{O.stopPropagation()},children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:O=>O.stopPropagation(),children:[c.jsx(mo,{isOpen:g,onClose:()=>b(!1),onConfirm:dc,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),y&&c.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),c.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),c.jsx("span",{className:"font-bold",children:y.channel}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),c.jsx("span",{children:y.x.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),c.jsx("span",{children:y.std.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),c.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(y.x/y.std).toFixed(2)})]})})]}),Ar&&c.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[c.jsx("button",{onClick:()=>nn(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"mb-4 text-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:Gn==null?void 0:Gn.toFixed(4)}),c.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",zr.length>0?"Density Curve Generated":"No Data"]})]}),c.jsx("div",{className:"flex-1 min-h-0",children:zr.length>0?c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(fN,{data:zr,margin:{top:10,right:30,left:0,bottom:20},children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),c.jsx(Bn,{dataKey:"x",tickFormatter:O=>O.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),c.jsx(Fn,{tick:{fill:"#9ca3af",fontSize:10}}),c.jsx(Vr,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),c.jsx(xa,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),Gn!==null&&c.jsx(io,{x:Gn,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",c.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("button",{onClick:To,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),c.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>la("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),c.jsx("button",{onClick:()=>la("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),c.jsx("button",{onClick:()=>la("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:O=>p(O.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[c.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),c.jsx("input",{type:"number",placeholder:"Min",value:C,onChange:O=>M(O.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:N,onChange:O=>$(O.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),c.jsx("input",{type:"number",placeholder:"Min",value:_,onChange:O=>A(O.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:D,onChange:O=>R(O.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsx("button",{onClick:()=>{M(""),$(""),A(""),R("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>sa("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),c.jsx("button",{onClick:()=>sa("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),c.jsx("button",{onClick:()=>sa("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),c.jsx("button",{onClick:()=>sa("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),c.jsx("input",{type:"text",value:G,onChange:O=>J(O.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),c.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),c.jsx("button",{onClick:()=>{X(!H),ue(H?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${H?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:H?oe===1?"Pick Min":"Pick Max":"Select"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx("input",{type:"number",step:"0.1",value:kt.rangeMin,onChange:O=>vn("rangeMin",O.target.value),onBlur:Xa,onKeyDown:O=>fi(O,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.1",value:kt.rangeMax,onChange:O=>vn("rangeMax",O.target.value),onBlur:Xa,onKeyDown:O=>fi(O,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),c.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),c.jsx("input",{type:"number",value:E,onChange:O=>I(O.target.value),onKeyDown:mn,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),c.jsx("input",{type:"number",value:L,onChange:O=>T(O.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[c.jsx("button",{onClick:()=>{se(!ee),Y&&le(null)},disabled:H,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${ee?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:ee?"Pick Point":"Select Linear Limit"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:fc,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${x==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),c.jsx("button",{onClick:Oa,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${x==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:Te,onChange:O=>Oe(O.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:De,onChange:O=>ct(O.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:ut,onChange:O=>lr(O.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",value:q,onChange:O=>te(O.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("input",{type:"number",value:ye,onChange:O=>me(O.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("button",{onClick:Ue,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),V.length>0&&c.jsx("button",{onClick:()=>pe([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[V.length," pts"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ot.shot,onChange:O=>gr({...ot,shot:O.target.checked}),className:"rounded text-gray-500"})," ",c.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ot.read,onChange:O=>gr({...ot,read:O.target.checked}),className:"rounded text-rose-500"})," ",c.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ot.prnu,onChange:O=>gr({...ot,prnu:O.target.checked}),className:"rounded text-amber-500"})," ",c.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:ot.total,onChange:O=>gr({...ot,total:O.target.checked}),className:"rounded text-white"})," ",c.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),c.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",vt,")",S&&c.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:Fi,disabled:S,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${S?"bg-gray-400 cursor-wait":As?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:S?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),c.jsxs("select",{value:wt,onChange:O=>At(Number(O.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[c.jsx("option",{value:1e5,children:"100k Pairs"}),c.jsx("option",{value:5e5,children:"500k Pairs"}),c.jsx("option",{value:2e6,children:"2M Pairs"}),c.jsx("option",{value:5e6,children:"5M Pairs"}),c.jsx("option",{value:1e7,children:"10M Pairs"})]}),Ft&&c.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",Ft.nPoints]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),c.jsx("input",{type:"text",inputMode:"decimal",value:kt.read,onChange:O=>vn("read",O.target.value),onBlur:()=>Na("read"),onKeyDown:O=>fi(O,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center relative group",children:[c.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",c.jsx("button",{onClick:()=>nn(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),c.jsx("input",{type:"text",inputMode:"decimal",value:kt.gain,onChange:O=>vn("gain",O.target.value),onBlur:()=>Na("gain"),onKeyDown:O=>fi(O,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),c.jsx("input",{type:"text",inputMode:"decimal",value:kt.prnu,onChange:O=>vn("prnu",O.target.value),onBlur:()=>Na("prnu"),onKeyDown:O=>fi(O,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[c.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(we==null?void 0:we.manualTarget)||L}`,children:["M.DR @ SNR=",(we==null?void 0:we.manualTarget)||L]}),c.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:we!=null&&we.manualDR?`${we.manualDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((we==null?void 0:we.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${E||"H"})`,children:[c.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),c.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:we!=null&&we.ptpDR?`${we.ptpDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((we==null?void 0:we.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${E||"H"} on ${we==null?void 0:we.dominantChannel} Channel)`,children:[c.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",we==null?void 0:we.dominantChannel,")"]}),c.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:we!=null&&we.d55DR?`${we.d55DR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),c.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:ar!==null?`${Math.round(ar)}`:"",children:ar!==null?ar>1e4?`${(ar/1e3).toFixed(1)}k`:`${Math.round(ar)}`:"--"})]})]}),Y===null&&c.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),c.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${ee||H?"cursor-crosshair":""}`,children:[c.jsx("div",{className:"row-start-1 col-start-1 h-full",children:c.jsx(t5,{vertical:!0,min:Ze,max:It,value:[_?parseFloat(_):Ze,D?parseFloat(D):It],onChange:([O,U])=>{A(O.toString()),R(U.toString())},logScale:h})}),c.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[zt.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(wte,{margin:{top:20,right:20,bottom:0,left:0},onClick:di,children:[c.jsx("defs",{children:c.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[c.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),c.jsx(Bn,{type:"number",dataKey:"x",name:"Signal",scale:h?"log":"linear",domain:Ma(C,N),allowDataOverflow:!0,hide:!0}),c.jsx(Fn,{type:"number",dataKey:"y",name:f,scale:h?"log":"linear",domain:Ma(_,D),label:{value:zi,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),c.jsx(Vr,{content:c.jsx(hc,{}),cursor:{strokeDasharray:"3 3"}}),Y&&c.jsx(io,{x:Y,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(ot.fitRange||H)&&c.jsxs(c.Fragment,{children:[c.jsx(io,{x:Tt,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${cr.min}%`,fill:"#22d3ee",fontSize:9}}),c.jsx(io,{x:nr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${cr.max}%`,fill:"#22d3ee",fontSize:9}})]}),w.R&&c.jsx(jn,{name:"Red",data:Wn.R,fill:"#ef4444",shape:xn,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),w.G1&&c.jsx(jn,{name:"Green 1",data:Wn.G1,fill:"#22c55e",shape:xn,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),w.G2&&c.jsx(jn,{name:"Green 2",data:Wn.G2,fill:"#4ade80",shape:xn,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),w.B&&c.jsx(jn,{name:"Blue",data:Wn.B,fill:"#3b82f6",shape:xn,onClick:di,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),ot.shot&&ze.shot.length>0&&c.jsx(jn,{name:"Shot Noise (Ideal)",data:ze.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),ot.read&&ze.read.length>0&&c.jsx(jn,{name:"Read Noise Floor",data:ze.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),ot.prnu&&ze.prnu.length>0&&c.jsx(jn,{name:"PRNU (Non-uniformity)",data:ze.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),ot.total&&ze.total.length>0&&c.jsx(jn,{name:"Total Noise Model",data:ze.total,line:{stroke:pc,strokeWidth:2},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),et.length>0&&c.jsx(jn,{name:`Target SNR=${L}`,data:et,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),Yr.length>0&&c.jsx(jn,{name:`PTP Target SNR=${we!=null&&we.ptpTarget?we.ptpTarget.toFixed(1):"?"}`,data:Yr,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),V.length>0&&c.jsx(jn,{name:"Manual Markers",data:V,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),c.jsx("div",{className:"row-start-2 col-start-2 w-full",children:c.jsx(t5,{min:Ie,max:st,value:[C?parseFloat(C):Ie,N?parseFloat(N):st],onChange:([O,U])=>{M(O.toString()),$(U.toString())},logScale:h})})]})]})})},Dte=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>c.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"relative md:col-span-3",children:[c.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>c.jsx("option",{value:s,children:s},s))}),c.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[c.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>c.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),Ite=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return c.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[c.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),c.jsx("div",{className:"mt-2 space-y-1 text-sm",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),c.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),c.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),c.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},Rte=({data:e,theme:t="dark"})=>{const r=j.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=j.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(y=>[...y.R_range,...y.G1_range,...y.G2_range,...y.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),l=Math.max(...o);const u=.25,f=l-s;if(f<u){const y=u-f;s-=y/2,l+=y/2}const d=(l-s)*.1,h=s-d,p=l+d;return[h,p]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:c.jsx("p",{children:"No data available for this mode."})}):c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(fN,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:a}),c.jsx(Bn,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),c.jsx(Fn,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),c.jsx(Vr,{content:c.jsx(Ite,{theme:t})}),c.jsx(ti,{wrapperStyle:{fontSize:"14px",color:i}}),c.jsx(xa,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),c.jsx(Nr,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),c.jsx(xa,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),c.jsx(Nr,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),c.jsx(xa,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),c.jsx(Nr,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),c.jsx(xa,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),c.jsx(Nr,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},Lte=z.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=j.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=j.useState(n[0]||""),{chartData:o,tableData:s}=j.useMemo(()=>{const d=e.shootingModes.find(y=>y.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const h=d.data.map(y=>({iso:y.iso,R_range:y.r.range,R_avg:y.r.avg,G1_range:y.g1.range,G1_avg:y.g1.avg,B_range:y.b.range,B_avg:y.b.avg,G2_range:y.g2.range,G2_avg:y.g2.avg})),p=d.data.map(y=>({iso:y.iso,levels:[y.r.avg,y.g1.avg,y.g2.avg,y.b.avg],clipping:y.clipping}));return{chartData:h,tableData:p}},[e.shootingModes,a]),l=`Raw Data (${a})`,u=j.useRef(null),f=j.useRef(null);return j.useEffect(()=>{const d=u.current,h=f.current;if(!d||!h)return;const p=new ResizeObserver(y=>{for(let m of y){const{width:x}=m.contentRect,g=Math.max(8,x/35);h.style.fontSize=`${g}px`}});return p.observe(d),()=>p.disconnect()},[]),c.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),c.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),c.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>c.jsx("option",{value:d,children:d},d))})]}),c.jsxs("div",{ref:u,className:"h-64 relative",children:[c.jsx(Rte,{data:o,theme:t},a),c.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:c.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:l})}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),c.jsx("tbody",{children:s.map(({iso:d,levels:h,clipping:p})=>c.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[c.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,p&&c.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),c.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:h[0].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:h[1].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:h[3].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:h[2].toFixed(2)})]},d))})]})]})]})}),be=(e,t,r)=>({avg:e,range:[t,r]}),Ig=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:be(512.1,511.95,512.25),g1:be(512.05,511.9,512.2),b:be(512.12,511.98,512.28),g2:be(512.06,511.92,512.22)},{iso:200,r:be(512.15,512,512.3),g1:be(512.1,511.95,512.25),b:be(512.18,512.05,512.35),g2:be(512.12,511.98,512.28)},{iso:400,r:be(512.25,512.1,512.45),g1:be(512.2,512.05,512.4),b:be(512.3,512.15,512.5),g2:be(512.22,512.08,512.42)},{iso:800,r:be(512.5,512.2,512.8),g1:be(512.45,512.15,512.75),b:be(512.55,512.25,512.85),g2:be(512.48,512.18,512.78)},{iso:1600,r:be(513.1,512.8,513.4),g1:be(513.05,512.75,513.35),b:be(513.15,512.85,513.45),g2:be(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:be(512.02,511.98,512.05),g1:be(512.01,511.97,512.04),b:be(512.03,511.99,512.06),g2:be(512.01,511.97,512.04)},{iso:640,r:be(512.15,512.05,512.25),g1:be(512.12,512.02,512.22),b:be(512.18,512.08,512.28),g2:be(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:be(512,511.8,512.2),g1:be(512,511.8,512.2),b:be(512,511.8,512.2),g2:be(512,511.8,512.2)},{iso:400,r:be(512,511.7,512.3),g1:be(512,511.7,512.3),b:be(512,511.7,512.3),g2:be(512,511.7,512.3)},{iso:1600,r:be(512.2,511.5,512.8),g1:be(512.2,511.5,512.8),b:be(512.2,511.5,512.8),g2:be(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:be(511.95,511.8,512.1),g1:be(511.95,511.8,512.1),b:be(511.95,511.8,512.1),g2:be(511.95,511.8,512.1)},{iso:800,r:be(512.1,511.9,512.3),g1:be(512.1,511.9,512.3),b:be(512.1,511.9,512.3),g2:be(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:be(400,399.9,400.1),g1:be(400,399.9,400.1),b:be(400,399.9,400.1),g2:be(400,399.9,400.1)},{iso:100,r:be(400,399.9,400.1),g1:be(400,399.9,400.1),b:be(400,399.9,400.1),g2:be(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:be(400.1,399.8,400.3),g1:be(400.1,399.8,400.3),b:be(400.1,399.8,400.3),g2:be(400.1,399.8,400.3)},{iso:800,r:be(400.3,399.5,401.1),g1:be(400.3,399.5,401.1),b:be(400.3,399.5,401.1),g2:be(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:be(1024,1023.8,1024.2),g1:be(1024,1023.8,1024.2),b:be(1024,1023.8,1024.2),g2:be(1024,1023.8,1024.2)},{iso:800,r:be(1024.2,1023.5,1025),g1:be(1024.2,1023.5,1025),b:be(1024.2,1023.5,1025),g2:be(1024.2,1023.5,1025)}]}]}],Bte=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=j.useState(""),[i,o]=j.useState("All"),s=j.useMemo(()=>["All",...Array.from(new Set(Ig.map(d=>d.manufacturer))).sort()],[]),l=j.useMemo(()=>Ig.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),h=i==="All"||f.manufacturer===i;return d&&h}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",c.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Ig.length," Models"]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:c.jsx(Dte,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:l,onCameraSelect:u})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[l.map(f=>c.jsx("div",{id:`camera-${f.id}`,children:c.jsx(Lte,{camera:f,theme:r})},f.id)),l.length===0&&c.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:c.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Fte=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=j.useState(""),[i,o]=j.useState(""),[s,l]=j.useState(""),[u,f]=j.useState(""),[d,h]=j.useState(null),p=()=>{const y=parseFloat(n),m=parseFloat(i),x=parseFloat(s),v=parseFloat(u);if(isNaN(y)||isNaN(m)||isNaN(x)||isNaN(v)){h(null);return}const g=y,b=m,S=x*x,k=v*v,w=(g+b)/2;if(w<=1e-9){h(0);return}const P=S*k/w,C=Math.sqrt(P);h(C)};return e?c.jsxs(cc,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:n,onChange:y=>a(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:i,onChange:y=>o(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:s,onChange:y=>l(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:u,onChange:y=>f(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsx("button",{onClick:p,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&c.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[c.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),c.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},dv=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],zte=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function Gte(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),h=Math.hypot(n.x-r.x,n.y-r.y),p=Math.hypot(r.x-e.x,r.y-e.y),y=Math.hypot(n.x-t.x,n.y-t.y),m=(d+h)/2/5,x=(p+y)/2/3,v=m*f,g=x*f;for(let b=0;b<4;b++)for(let S=0;S<6;S++){const k=S/5,w=b/3,P=(1-k)*(1-w)*e.x+k*(1-w)*t.x+(1-k)*w*r.x+k*w*n.x,C=(1-k)*(1-w)*e.y+k*(1-w)*t.y+(1-k)*w*r.y+k*w*n.y;u.push({x:P-v/2,y:C-g/2,w:v,h:g})}return u}function dN(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function Pd(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let l=0;l<i;l++)for(let u=0;u<n;u++)o[s][l]+=e[s][u]*t[u][l];return o}function Ute(e,t){const r=dN(e),n=Pd(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=Su(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=Pd(r,t);return Pd(o,s)}function Wte(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const l=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=l*r[n][u]}}return r.map(n=>n.slice(t))}function Vte(e,t,r){const n=[...e].sort((m,x)=>m.id-x.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(m=>{const x=m.rawMeans,v=[x[0]-t[0],x[1]-t[1],x[2]-t[2],x[3]-t[3]];let g,b,S;r?(S=v[0],b=(v[1]+v[2])/2,g=v[3]):(g=v[0],b=(v[1]+v[2])/2,S=v[3]),g=Math.max(0,g),b=Math.max(0,b),S=Math.max(0,S),a.push([g,b,S])});const o=a[18],s=(o[0]+o[1]+o[2])/3,l=1/Math.max(1e-9,s),u=a.map(m=>[m[0]*l,m[1]*l,m[2]*l]),d=Ute(u,dv),h=dN(d);let p;try{p=Wte(h)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:Pd(p,zte)}}const Hte=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,l]=j.useState(n),[u,f]=j.useState(["0","0","0","0"]),[d,h]=j.useState(null),[p,y]=j.useState(null);if(j.useEffect(()=>{if(e&&r&&r.length===24){const w=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([w[0].toFixed(2),w[1].toFixed(2),w[2].toFixed(2),w[3].toFixed(2)])}},[e,r]),j.useEffect(()=>{if(!e||!r||r.length!==24)return;const k=u.map(w=>parseFloat(w));if(!k.some(isNaN))try{const w=Vte(r,k,s);h(w),y(null)}catch(w){y(w.message)}},[e,r,s,u]),!e)return null;const m=(k,w)=>{f(P=>{const C=[...P];return C[k]=w,C})},x=k=>{navigator.clipboard.writeText(k)},v=k=>k?k.map(w=>w.map(P=>P.toFixed(4))):[],g=d?v(d.matrix).flat().join(" "):"",b=s?["B","G1","G2","R"]:["R","G1","G2","B"],S=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return c.jsxs(cc,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),c.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:k=>o(parseFloat(k.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>l(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),c.jsx("button",{onClick:()=>l(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(k=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:`text-[10px] font-bold mb-1 ${S[k]}`,children:b[k]}),c.jsx("input",{type:"number",step:"0.01",value:u[k],onChange:w=>m(k,w.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},k))})]}),p?c.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:p}):d?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),c.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:v(d.matrix).map((k,w)=>c.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[c.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:k[0]}),c.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:k[1]}),c.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:k[2]})]},w))}),c.jsx("button",{onClick:()=>x(g),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):c.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function hN(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let l=0;l<r;l++)n+=e[l],a+=t[l],i+=e[l]*t[l],o+=e[l]*e[l];const s=r*o-n*n;return s===0?{slope:0,intercept:0}:{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function Xte(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function hv(e,t,r,n){const a=Math.floor(n.x),i=Math.floor(n.y),o=Math.floor(n.w),s=Math.floor(n.h);if(o<8||s<8)return null;let l=[];for(let F=0;F<s;F++){const ee=[],se=(i+F)*t;for(let Y=0;Y<o;Y++)ee.push(e[se+a+Y]);l.push(ee)}let u=0,f=0;for(let F=1;F<s-1;F+=2)for(let ee=1;ee<o-1;ee+=2)u+=Math.abs(l[F][ee+1]-l[F][ee-1]),f+=Math.abs(l[F+1][ee]-l[F-1][ee]);let d=o,h=s,p=l,y=2;if(f>u){y=1,p=Array(o).fill(0).map(()=>Array(s).fill(0));for(let F=0;F<s;F++)for(let ee=0;ee<o;ee++)p[ee][s-1-F]=l[F][ee];d=s,h=o}else y=2;const m=[],x=[];for(let F=0;F<h;F++){const ee=p[F],se=ee.map((H,X)=>X===0?0:Math.abs(H-ee[X-1])),Y=Math.max(...se),le=se.indexOf(Y);if(Y>1){const H=Math.max(0,le-3),X=Math.min(d,le+4);let oe=0,ue=0;for(let V=H;V<X;V++)oe+=se[V],ue+=V*se[V];oe>0&&(m.push(ue/oe),x.push(F))}}if(m.length<h*.4)return null;const{slope:v,intercept:g}=hN(x,m),b=Math.cos(Math.atan(v)),S=[],k=[];for(let F=0;F<h;F++){const ee=v*F+g;for(let se=0;se<d;se++)S.push((se-ee)*b),k.push(p[F][se])}const P=Math.min(o,s)/2;let C=0;for(const F of S)Math.abs(F)<=P&&C++;let M=.125;if(C>0){const F=40*P/C;M=Math.max(.01,Math.min(.125,F))}const N=M,$=Array.from(S.keys()).sort((F,ee)=>S[F]-S[ee]),_=$.map(F=>S[F]),A=$.map(F=>k[F]),D=_[0],R=_[_.length-1],L=Math.floor((R-D)/N),T=new Array(L).fill(0),E=new Array(L).fill(0);for(let F=0;F<_.length;F++){const ee=Math.floor((_[F]-D)/N);ee>=0&&ee<L&&(T[ee]+=A[F],E[ee]++)}let I=A[0];for(let F=0;F<L;F++)E[F]>0?(T[F]/=E[F],I=T[F]):T[F]=I;const G=T.slice(0,10).reduce((F,ee)=>F+ee,0)/10,J=T.slice(-10).reduce((F,ee)=>F+ee,0)/10;if(G>J){const F=Math.max(...T),ee=Math.min(...T);for(let se=0;se<T.length;se++)T[se]=F-T[se]+ee}const K=Xte(T,N);return{esf:T,lsfFull:K,binSize:N,orientation:y}}function pN(e,t,r,n=!1){if(e.length===0)return null;const a=4096,i=new fs(a),o=r?1e3/r:1,s=new Float32Array(501);for(let m=0;m<=500;m++)s[m]=m/500*o;const l=new Float32Array(501).fill(0);let u=0,f=[],d=[],h=0;for(const m of e){let x=[...m.lsfFull];const v=m.binSize;let g=0,b=-1/0;for(let E=0;E<x.length;E++)x[E]>b&&(b=x[E],g=E);const S=b*.2;let k=0,w=x.length-1;for(let E=g;E>=0;E--)if(x[E]<S){k=E;break}for(let E=g;E<x.length;E++)if(x[E]<S){w=E;break}const P=w-k;let C=!1;if(n&&P>0){const E=P*4,I=[],G=[];for(let J=0;J<Math.max(0,g-E);J++)I.push(J),G.push(x[J]);for(let J=Math.min(x.length,g+E);J<x.length;J++)I.push(J),G.push(x[J]);if(I.length>5){const{slope:J,intercept:K}=hN(I,G);for(let F=0;F<x.length;F++)x[F]=x[F]-(J*F+K);b=-1/0;for(let F=0;F<x.length;F++)x[F]>b&&(b=x[F],g=F);C=!0}}let M=0,N=0;if(t>0)N=t,M=Math.round(t/v);else{const E=b*.2;let I=0,G=x.length-1;for(let ee=g;ee>=0;ee--)if(x[ee]<E){I=ee;break}for(let ee=g;ee<x.length;ee++)if(x[ee]<E){G=ee;break}let F=(G-I)*v*8;F=Math.max(2,F),N=F,M=Math.round(F/v)}h+=N;const $=Math.max(0,g-M),_=Math.min(x.length,g+M),A=x.slice($,_);if(A.length<8)continue;if(f.length===0)if(f=A,C){const E=new Array(x.length).fill(0);let I=0;for(let G=0;G<x.length;G++)I+=x[G],E[G]=I;d=E}else d=m.esf;const D=new Float32Array(a).fill(0);for(let E=0;E<A.length;E++){const I=.54-.46*Math.cos(2*Math.PI*E/(A.length-1));D[E]=A[E]*I}i.transform(D);const R=[],L=[];for(let E=0;E<=a/2;E++){const I=Math.sqrt(i._real[E]**2+i._imag[E]**2);R.push(I),L.push(E/(a*v)*o)}const T=R[0];if(T>0){for(let E=0;E<=500;E++){const I=s[E];l[E]+=Kte(I,L,R)/T}u++}}if(u===0)return null;const p=Array.from(l).map(m=>m/u);let y=null;for(let m=0;m<p.length-1;m++)if(p[m]>=.5&&p[m+1]<.5){y=s[m]+(.5-p[m])*(s[m+1]-s[m])/(p[m+1]-p[m]);break}return{esf:d,lsf:[],lsfCropped:f,mtf:p,freqs:Array.from(s),mtf50:y,calcRadius:h/u}}function Kte(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const Yte=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o,isSfrLabOpen:s})=>{const[l,u]=j.useState([]),[f,d]=j.useState(""),[h,p]=j.useState(""),[y,m]=j.useState(12),[x,v]=j.useState(!0),[g,b]=j.useState(!1),[S,k]=j.useState(1),[w,P]=j.useState(null),[C,M]=j.useState({x:100,y:50}),[N,$]=j.useState({w:1e3,h:800}),[_,A]=j.useState(!1),[D,R]=j.useState(!1),L=j.useRef({x:0,y:0}),T=j.useRef({w:0,h:0}),E=l.length>0?l[l.length-1].binSize:null,I=E?(1/E).toFixed(1):"-",G=j.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),K=(o==null?void 0:o.renderMode)==="advanced-zero-dep",F=()=>{if(!(!r||!n)){if(!K){alert("Scalar Unmixing is required. Please configure Background/Foreground/BlackLevel in the Sidebar and click 'RUN UNMIXING' first.");return}try{let q;if(o!=null&&o.advancedZeroDep){const te=yx(r,n,o);q=hv(te.data,te.width,te.height,{x:0,y:0,w:te.width,h:te.height})}else q=hv(r.data,r.width,r.height,n);q?u(te=>[...te,q]):alert("Could not detect valid edge.")}catch(q){console.error(q),alert("Error processing ROI")}}},ee=()=>{u([]),P(null),k(1)},se=()=>{if(!w)return;const q=parseFloat(f),me=`data:text/csv;charset=utf-8,Frequency (${!isNaN(q)&&q>0?"lp/mm":"cy/px"}),MTF
`+w.freqs.map((Oe,De)=>`${Oe.toFixed(6)},${w.mtf[De].toFixed(6)}`).join(`
`),Ue=encodeURI(me),Te=document.createElement("a");Te.setAttribute("href",Ue),Te.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)},Y=()=>{if(!(w!=null&&w.mtf50)||!n)return;const q=n.x+n.w/2,te=n.y+n.h/2,ye=`{${q.toFixed(1)},${te.toFixed(1)},${w.mtf50.toFixed(4)}}`;navigator.clipboard.writeText(ye)};j.useEffect(()=>{if(l.length===0){P(null);return}const q=parseFloat(f),te=!isNaN(q)&&q>0?q:null,me=pN(l,x?-1:y,te,g);P(me)},[l,y,x,g,f]),j.useEffect(()=>{e&&K&&l.length===0&&n&&r&&F()},[e]);const le=q=>{i&&i(),!(q.target.closest("button")||q.target.closest("input"))&&(A(!0),L.current={x:q.clientX-C.x,y:q.clientY-C.y})},H=q=>{q.stopPropagation(),q.preventDefault(),R(!0),L.current={x:q.clientX,y:q.clientY},T.current={w:N.w,h:N.h}};j.useEffect(()=>{const q=ye=>{if(_)M({x:ye.clientX-L.current.x,y:ye.clientY-L.current.y});else if(D){const me=ye.clientX-L.current.x,Ue=ye.clientY-L.current.y;$({w:Math.max(600,T.current.w+me),h:Math.max(500,T.current.h+Ue)})}},te=()=>{A(!1),R(!1)};return(_||D)&&(window.addEventListener("mousemove",q),window.addEventListener("mouseup",te)),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",te)}},[_,D]);const X=j.useMemo(()=>{if(!(w!=null&&w.mtf50)||!h)return null;const q=parseFloat(h);if(isNaN(q)||q<=0)return null;let te=w.mtf50;const ye=parseFloat(f);return!isNaN(ye)&&ye>0&&(te=w.mtf50*(ye/1e3)),te*2*q},[w,h,f]);if(!e)return null;const oe=w?w.lsfCropped.map((q,te)=>({x:te,y:q})):[],ue=w?w.esf.map((q,te)=>({x:te,y:q})):[],V=w?w.mtf.map((q,te)=>({freq:w.freqs[te],mtf:q})).filter(q=>q.freq<=(parseFloat(f)?200:1)):[],pe=f?"lp/mm":"cy/px";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden",style:{left:C.x,top:C.y,width:N.w,height:N.h,zIndex:a??100},onMouseDownCapture:i,children:[c.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${_?"cursor-grabbing":"cursor-grab"}`,onMouseDown:le,children:[c.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[l.length," ROI",l.length!==1?"s":""]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),c.jsx("input",{type:"number",value:f,onChange:q=>d(q.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),c.jsx("input",{type:"number",value:h,onChange:q=>p(q.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",title:"Auto-calculated based on ROI size",children:[c.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),E?c.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[E.toFixed(3),"px",c.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",I,"x)"]})]}):c.jsx("span",{className:"text-gray-400 italic",children:"..."})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[300px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",title:"Linearly subtract vignetting trend (4x width distance)",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:q=>b(q.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:"Deshading"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:q=>{const te=q.target.checked;v(te),te||m(G)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's official NR"})]}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:x?"Calculated:":"Manual:"}),c.jsxs("span",{className:`font-mono font-bold ${x?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[x&&(w!=null&&w.calcRadius)?w.calcRadius.toFixed(2):y.toFixed(1)," px"]})]}),c.jsx("input",{type:"range",min:"2",max:G,step:"0.5",value:y,onChange:q=>{m(parseFloat(q.target.value)),v(!1)},disabled:x,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${x?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:F,disabled:!K,title:K?"":"Scalar Unmixing must be active. Run Unmixing in Sidebar first.",className:`px-3 py-1.5 text-white font-bold rounded shadow-sm transition-transform active:scale-95 ${K?"bg-orange-600 hover:bg-orange-500":"bg-gray-400 cursor-not-allowed"}`,children:K?"Add Current ROI":"Unmixing Required"}),c.jsx("button",{onClick:Y,disabled:!w||!w.mtf50||!n,className:"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Copy Pos/MTF50"}),c.jsx("button",{onClick:se,disabled:!w,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),c.jsx("button",{onClick:ee,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[c.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(ul,{data:ue,children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Bn,{dataKey:"x",hide:!0})," ",c.jsx(Fn,{hide:!0,domain:["auto","auto"]})," ",c.jsx(Vr,{contentStyle:{fontSize:"10px"}}),c.jsx(Nr,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",S>1?`(x${S.toFixed(0)})`:""]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),c.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:S,onChange:q=>k(parseFloat(q.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(ul,{data:oe,children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(io,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),c.jsx(Bn,{dataKey:"x",hide:!0}),c.jsx(Fn,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[q=>q,q=>q/S],allowDataOverflow:!0,tickFormatter:q=>q.toFixed(3)}),c.jsx(Vr,{contentStyle:{fontSize:"10px"},formatter:q=>[q.toFixed(5),"Amplitude"]}),c.jsx(Nr,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col min-h-[250px]",children:[c.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF / Spatial Frequency Response"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[(w==null?void 0:w.mtf50)&&c.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",c.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[w.mtf50.toFixed(2)," ",pe]})]}),X!==null&&c.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(X)," LW/PH"]})]})]}),c.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 400 60",className:"w-[40rem] h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),c.jsx(Ni,{width:"100%",height:"100%",children:c.jsxs(ul,{data:V,margin:{top:10,right:30,left:10,bottom:20},children:[c.jsx(ii,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),c.jsx(Bn,{dataKey:"freq",type:"number",tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${pe})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),c.jsx(Fn,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),c.jsx(Vr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:q=>`Freq: ${Number(q).toFixed(3)}`,formatter:q=>[q.toFixed(4),"MTF"]}),c.jsx(ti,{verticalAlign:"top",height:20}),c.jsx(Nr,{type:"monotone",dataKey:"mtf",name:"SFR",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1}),(w==null?void 0:w.mtf50)&&c.jsx(bf,{x:w.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:c.jsx(Jr,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]})]}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:H})]})},qte=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations to prevent premature overflow and allow negative offsets
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,Zte=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=j.useState(!0),[l,u]=j.useState(!1),f=j.useRef(null),[d,h]=j.useState(4),[p,y]=j.useState(0),[m,x]=j.useState(""),[v,g]=j.useState(""),[b,S]=j.useState("RGGB"),k=j.useMemo(()=>Object.keys(qd).sort(),[]);j.useEffect(()=>{e&&!f.current&&(async()=>{try{const C=await window.loadPyodide();await C.loadPackage("numpy"),await C.runPythonAsync(qte),f.current=C,s(!1)}catch(C){console.error("Pyodide Init Failed",C)}})()},[e]),j.useEffect(()=>{if(e&&r){const P=r.whiteLevel;P>1e4?h(2):P>3e3?h(4):P>6e4&&h(0);const C=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(C)?S(C):S("RGGB")}},[e,r]);const w=async()=>{if(!(!r||!f.current)){u(!0);try{const P=f.current,C=m.trim()?m.trim().split(/\s+/).map(Number):[0,0,0,0];if(C.length===1&&!isNaN(C[0])&&C.push(C[0],C[0],C[0]),C.length<4)for(;C.length<4;)C.push(0);const M=v.trim()?v.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(M.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const N=b;P.globals.set("js_raw_bytes",new Uint8Array(r.data.buffer,r.data.byteOffset,r.data.byteLength)),P.globals.set("js_width",r.width),P.globals.set("js_height",r.height),P.globals.set("js_cfa",N),P.globals.set("js_bl_list",C),P.globals.set("js_shift",d),P.globals.set("js_linear_shift",p),P.globals.set("js_cm_flat",M);const $=await P.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift,
                    js_linear_shift,
                    js_cm_flat.to_py()
                )
            `),_=$.toJs();$.destroy();const A=new Blob([_],{type:"image/x-adobe-dng"}),D=URL.createObjectURL(A),R=document.createElement("a");R.href=D;const L=n.substring(0,n.lastIndexOf("."))||"image";R.download=`${L}_16bit_manual.dng`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(D)}catch(P){console.error(P),alert("Export Failed: "+P.message)}finally{u(!1)}}};return e?c.jsxs(cc,{initialPosition:{x:window.innerWidth/2-250,y:150},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),c.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Bit Shift (<<)"}),c.jsx("input",{type:"number",value:d,onChange:P=>h(parseInt(P.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase",children:"Offset (+)"}),c.jsx("input",{type:"number",value:p,onChange:P=>y(parseInt(P.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),c.jsxs("select",{value:b,onChange:P=>S(P.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),c.jsx("div",{className:"mt-[-10px] grid grid-cols-3 gap-4",children:c.jsx("div",{className:"text-[9px] text-gray-400 dark:text-gray-500 col-span-2",children:"Shift: 4=12bit(x16), 2=14bit(x4). Added after shift."})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level (Manual Fill)"}),c.jsx("input",{type:"text",value:m,onChange:P=>x(P.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:P=>{const C=qd[P.target.value];C&&g(C),P.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),k.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),c.jsx("textarea",{value:v,onChange:P=>g(P.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),c.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),c.jsx("button",{onClick:w,disabled:l,className:`w-full py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${l?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:l?"Processing Kernel...":"Convert & Download DNG"})]})})]}):null},Qte="http://localhost:5428",Jte=(e=!1)=>{const[t,r]=j.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return j.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${Qte}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const l=await s.json(),u=`Connected (${l.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===l.exiftool&&f.hasDngConverter===!!l.dng_converter?f:{isConnected:!0,message:u,version:l.exiftool,hasDngConverter:!!l.dng_converter})}else r(l=>l.isConnected===!1&&l.message==="Service Error"?l:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},ere="JTR_BlobStore",li="raw_files",tre=1,mp=()=>new Promise((e,t)=>{const r=indexedDB.open(ere,tre);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(li)||a.createObjectStore(li)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),r5=async(e,t)=>{const r=await mp();return new Promise((n,a)=>{const i=r.transaction(li,"readwrite");i.objectStore(li).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},rre=async e=>{const t=await mp();return new Promise((r,n)=>{const o=t.transaction(li,"readonly").objectStore(li).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},nre=async()=>{const e=await mp();return new Promise((t,r)=>{const n=e.transaction(li,"readwrite");n.objectStore(li).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},gN="jtr_workspace_index",are=e=>{try{const t=JSON.stringify(e);localStorage.setItem(gN,t)}catch(t){console.error("Failed to save workspace index",t)}},ire=()=>{try{const e=localStorage.getItem(gN);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},ore=async e=>{const n=(await mp()).transaction(li,"readwrite").objectStore(li),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},fn=1024,n5=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,l=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),h=f*t*4,p=d*n*4;for(let y=0;y<t;y++){const x=Math.floor(y*l)*4,v=h+y*4,g=p+x;s[v]=o[g],s[v+1]=o[g+1],s[v+2]=o[g+2],s[v+3]=o[g+3]}}return i},sre=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>d[h]=f),d.some(h=>h>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},lre=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:l,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],h=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,p=j.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:b,y:S,width:k,height:w}=e,P=yx(u,{x:b,y:S,w:k,h:w},o),C=[0,0,0,0],M=[0,0,0,0],N=Math.floor(S),$=Math.floor(b);for(let _=0;_<P.height;_++){const A=_*P.width;for(let D=0;D<P.width;D++){const R=P.data[A+D],L=N+_,T=$+D,E=L%2,I=T%2,G=E*2+I;C[G]+=R,M[G]++}}return C.map((_,A)=>M[A]>0?_/M[A]:0)}catch(b){return console.error("Unmix calc error",b),null}},[e,u,o]),y=(b,S,k)=>f?S<=1e-4?0:(b-k)/S:null,m=(b,S)=>h?b-d[S]:b,x=()=>{if(!h){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let b,S,k,w;n?(w=0,S=1,k=2,b=3):(b=0,S=1,k=2,w=3);const P=M=>e.means[M]-d[M],C=M=>e.stdDevs[M];localStorage.setItem("import_signal_r",P(b).toString()),localStorage.setItem("import_signal_g1",P(S).toString()),localStorage.setItem("import_signal_g2",P(k).toString()),localStorage.setItem("import_signal_b",P(w).toString()),localStorage.setItem("import_sigma_r",C(b).toString()),localStorage.setItem("import_sigma_g1",C(S).toString()),localStorage.setItem("import_sigma_g2",C(k).toString()),localStorage.setItem("import_sigma_b",C(w).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},v=n?[{name:"B",desc:"(0,0)",mean:m(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:y(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:m(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:y(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:m(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:y(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"R",desc:"(1,1)",mean:m(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:y(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}]:[{name:"R",desc:"(0,0)",mean:m(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:y(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:m(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:y(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:m(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:y(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"B",desc:"(1,1)",mean:m(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:y(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}],g=p?"w-96":f?"w-80":"w-60";return c.jsxs(cc,{className:`${g} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:l,initialPosition:{x:20,y:80},children:[c.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",c.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),c.jsx("br",{}),"Y: ",Math.round(e.y)]}),c.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),c.jsxs("table",{className:"w-full mb-3",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[c.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),c.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",h?"*":""]}),c.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&c.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),p&&c.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),c.jsx("tbody",{className:"font-mono text-xs",children:v.map((b,S)=>c.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[c.jsxs("td",{className:"py-1",children:[c.jsx("span",{className:`font-bold ${b.color}`,children:b.name}),c.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:b.desc})]}),c.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",title:h?"Mean adjusted by Black Level":"Raw Mean",children:b.mean.toFixed(2)}),c.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:b.std.toFixed(2)}),f&&c.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:b.snr!==null?b.snr.toFixed(2):"-"}),p&&c.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:b.unmixed!==null?b.unmixed.toFixed(1):"-"})]},S))})]}),h&&c.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Histogram",children:"Hist"}),c.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Quantization Steps",children:"Quant"}),c.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Power Spectrum (FFT)",children:"FFT"}),c.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Pearson Correlation Analysis",children:"PCC"}),c.jsx("button",{onClick:x,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Color Noise Analysis (External Tool)",children:"ColorN"})]})]})]})},cre=()=>{var _1;const[e,t]=j.useState("init"),[r,n]=j.useState("Checking storage..."),[a,i]=j.useState(null),o=j.useRef(!1),[s,l]=j.useState("dark");j.useEffect(()=>{const W=window.document.documentElement;W.classList.remove(s==="dark"?"light":"dark"),W.classList.add(s)},[s]);const[u,f]=j.useState(!1),[d,h]=j.useState(!1),[p,y]=j.useState(!1),[m,x]=j.useState(!1),v=Jte(u||d||p),[g,b]=j.useState(!1),[S,k]=j.useState([]),[w,P]=j.useState(-1),[C,M]=j.useState([]),N=j.useMemo(()=>S[w],[S,w]),$=j.useRef(null);j.useEffect(()=>{$.current=N||null},[N]);const _=(N==null?void 0:N.file)||null,A=(N==null?void 0:N.imageElement)||null,D=(N==null?void 0:N.rawImageData)||null,R=(N==null?void 0:N.rawFileBuffer)||null,L=(N==null?void 0:N.renderedRawImageData)||null,T=(N==null?void 0:N.referenceImageData)||null,E=(N==null?void 0:N.sampledImageData)||null,I=(N==null?void 0:N.exifData)||null,G=(N==null?void 0:N.isThreePlane)||!1,J=(N==null?void 0:N.xtransPhase)||{x:0,y:0},K=(N==null?void 0:N.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[F,ee]=j.useState(!1),[se,Y]=j.useState(null),[le,H]=j.useState(!1),[X,oe]=j.useState(!1),[ue,V]=j.useState(null),[pe,q]=j.useState([]),[te,ye]=j.useState(100),[me,Ue]=j.useState(!0),[Te,Oe]=j.useState(!1),[De,ct]=j.useState(null),[ut,lr]=j.useState(!1),[ft,pr]=j.useState(!1),[Je,Ft]=j.useState(!1),[$t,cr]=j.useState(!1),[Dt,yt]=j.useState(!1),[Ke,wt]=j.useState("1.0"),[At,Zt]=j.useState(!1),[kr,Fr]=j.useState(!1),[kt,_r]=j.useState(!1),[ot,gr]=j.useState([]),[Ar,nn]=j.useState(!1),[zr,na]=j.useState(!1),[Gn,aa]=j.useState({x:0,y:0}),[Un,ia]=j.useState(!1),[mr,mn]=j.useState(!1),[gt,zt]=j.useState([]),[vt,ie]=j.useState(0),[Me,Ie]=j.useState(null),[st,Ze]=j.useState(!1),[It,Tt]=j.useState([]),[nr,ze]=j.useState(.5),[et,Pt]=j.useState(!1),[St,ar]=j.useState(2),[we,Yr]=j.useState(1),[To,Wn]=j.useState([]),[oa,uc]=j.useState(null),[Vn,yn]=j.useState(0),[Hn,vn]=j.useState([]),[Na,Fi]=j.useState([]),[Xa,fi]=j.useState(64),[sa,fc]=j.useState(10),[Oa,dc]=j.useState(10),[Ma,di]=j.useState(4),[xn,hc]=j.useState(1),[la,pc]=j.useState(0),[zi,As]=j.useState("processed"),[O,U]=j.useState(!1),re=j.useMemo(()=>K.blackLevel?K.blackLevel:D!=null&&D.blackLevels?[D.blackLevels[0],D.blackLevels[1],D.blackLevels[2],D.blackLevels[3]]:[0,0,0,0],[K.blackLevel,D]),B=(I==null?void 0:I.ImageHeight)||(I==null?void 0:I.ExifImageHeight)||(D==null?void 0:D.height)||0,[ce,de]=j.useState(null),[Ne,xe]=j.useState(null),[Ve,Ee]=j.useState({x:0,y:0}),[dt,tt]=j.useState(1),[Qe,Qt]=j.useState("pan"),fe=j.useRef(null),He=j.useRef(null);j.useEffect(()=>{const W=ire();W&&W.sessions.length>0?(i(W),t("prompt")):t("idle")},[]);const _e=j.useCallback(async()=>{if(!a)return;t("restoring"),n("Restoring layout...");const W=a;if(l(W.theme),Ue(W.sidebarOpen),W.sessions.length>0){n(`Restoring ${W.sessions.length} images...`);const Z=[];for(const Q of W.sessions){if(o.current)return;await new Promise(ae=>setTimeout(ae,50));try{const ae=await rre(Q.id);if(ae){const Ce={id:Q.id,fileName:Q.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:ae,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:Q.isThreePlane,displaySettings:Q.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:ve,analysisData:$e}=await Io(ae);let Ae=null;if($e)try{Q.displaySettings.renderMode==="zero-dependency"?Ae=await ng(ae,Q.displaySettings):Q.displaySettings.renderMode==="advanced-zero-dep"?Ae=await W_(ae,Q.displaySettings):Q.displaySettings.renderMode==="zero-dep-color"?Ae=await U_(ae,Q.displaySettings):Ae=await s2(ae,Q.displaySettings)}catch(Le){console.error("Render failed",Le),Ae=await ng(ae,Q.displaySettings)}const Re=URL.createObjectURL(ve),Pe=new Image;Pe.src=Re,await new Promise(Le=>{Pe.onload=()=>Le()}),Z.push({...Ce,rawImageData:$e,renderedRawImageData:Ae,previewUrl:Re,imageElement:Pe,exifData:$e.metadata})}}catch(ae){console.error(`Failed to restore session ${Q.id}`,ae)}}if(o.current)return;if(k(Z),W.activeSessionId){const Q=Z.findIndex(ae=>ae.id===W.activeSessionId);Q>=0?P(Q):Z.length>0&&P(0)}q(W.windows)}o.current||t("idle")},[a]),Rt=j.useCallback(async()=>{o.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await nre()}catch(W){console.error("Failed to clear DB",W)}t("idle"),i(null),o.current=!1},[]),Ct=j.useCallback(async()=>{},[R,N,K,$t,Dt]),an=j.useCallback(()=>{!R||!N||Ft(!0)},[R,N]),xt=j.useCallback(async()=>{},[D,N,Ke,re]);j.useEffect(()=>{const W=Z=>{(Z.ctrlKey||Z.metaKey)&&Z.key.toLowerCase()==="s"&&(Z.preventDefault(),an())};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[an]);const ur=j.useRef(null),on=j.useCallback(()=>{e==="idle"&&(ur.current&&clearTimeout(ur.current),ur.current=window.setTimeout(async()=>{var Q;const W={version:1,timestamp:Date.now(),activeSessionId:((Q=S[w])==null?void 0:Q.id)||null,theme:s,sidebarOpen:me,sessions:S.map(ae=>({id:ae.id,fileName:ae.fileName,fileType:ae.file?ae.file.type:"application/octet-stream",fileSize:ae.rawFileBuffer?ae.rawFileBuffer.byteLength:0,displaySettings:ae.displaySettings,isThreePlane:ae.isThreePlane})),windows:pe.map(ae=>({id:ae.id,type:ae.type,roi:ae.roi,zIndex:ae.zIndex,initialPosition:ae.initialPosition,sessionId:ae.sessionId,isBGGR:ae.isBGGR,isMinimized:ae.isMinimized||!1,internalState:ae.internalState}))};are(W);const Z=S.map(ae=>ae.id);ore(Z)},1e3))},[S,pe,w,s,me,e]);j.useEffect(()=>{on()},[on]);const qr=j.useCallback(W=>{k(Z=>Z.map((Q,ae)=>ae===w?{...Q,...W}:Q))},[w]);j.useEffect(()=>{if(D&&se){const W=Ro(D.data,D.width,D.height,se.x,se.y,se.width,se.height);Y(W)}},[D]);const Ts=W=>{if(!se||!N)return;const Z=Date.now().toString()+Math.random().toString().slice(2,5),Q=Math.max(te,...pe.map(ve=>ve.zIndex),100),ae=pe.length%10*30,Ce=W==="fft"?{x:50,y:50}:W==="histogram"?{x:100,y:100}:{x:150,y:150};q(ve=>[...ve,{id:Z,type:W,roi:{x:se.x,y:se.y,w:se.width,h:se.height},zIndex:Q+1,initialPosition:{x:Ce.x+ae,y:Ce.y+ae},sessionId:N.id,isBGGR:le,isMinimized:!1,stackFiles:(W==="fft"||W==="pearson"||W==="histogram")&&C.length>0?C:void 0}])},yp=W=>{q(Z=>Z.filter(Q=>Q.id!==W))},kf=W=>{q(Z=>Z.map(Q=>Q.id===W?{...Q,isMinimized:!0}:Q))},vp=W=>{q(Z=>{const Q=Math.max(te,...Z.map(ae=>ae.zIndex));return Z.map(ae=>ae.id===W?{...ae,zIndex:Q+1}:ae)})},xp=(W,Z)=>{q(Q=>Q.map(ae=>ae.id===W?{...ae,internalState:{...ae.internalState,...Z}}:ae))},sn=()=>{const W=Math.max(te,...pe.map(Z=>Z.zIndex));ye(W+1)},bp=(W,Z)=>{q(Q=>Q.map(ae=>ae.id===W?{...ae,roi:Z}:ae))};j.useEffect(()=>{if(!I)return;const W=I.CFAPattern2||I.CFAPattern;if(W){let Z="";Array.isArray(W)?Z=W.join(""):typeof W=="string"?Z=W.replace(/[\s,]+/g,""):typeof W=="number"&&(Z=String(W)),Z==="0112"?H(!1):Z==="2110"&&H(!0)}},[I]),j.useEffect(()=>{let W;const Z=()=>{if(et&&zr){const Q=Date.now()/1e3,ae=.55+.45*Math.sin(Q*St);Yr(ae),W=requestAnimationFrame(Z)}else Yr(1)};return et&&zr?Z():Yr(1),()=>{W&&cancelAnimationFrame(W)}},[et,zr,St]),j.useEffect(()=>{const W=Z=>{Z.key==="Escape"&&zr&&(na(!1),aa({x:0,y:0}),Pt(!1))};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[zr]),j.useEffect(()=>()=>{S.forEach(W=>{W.previewUrl&&URL.revokeObjectURL(W.previewUrl)}),He.current&&He.current.terminate()},[]);const Eo=async(W,Z=!0)=>{Z&&(Ee({x:0,y:0}),tt(1),yn(0),vn([]),Fi([]),Oe(!1),ct(null),ee(!1),mn(!1),zt([]),Tt([]),ie(0),gr([]));let Q=null;if(v.isConnected){const Ae=new FormData;Ae.append("file",W);try{const Pe=await(await fetch("http://localhost:5428/read",{method:"POST",body:Ae})).json();if(Pe.success){let Le=Pe.data;Array.isArray(Le)&&Le.length===1&&(Le=Le[0]),Q=Le}}catch(Re){console.warn("Auto Exif fetch failed",Re)}}const ae=W.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(W.type)||ae)){de("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let ve={file:W,exifData:Q};if(ae||W.type==="image/x-adobe-dng")try{Z?xe("Processing RAW file (this may take a moment)..."):U(!0);const Ae=await W.arrayBuffer();ve.rawFileBuffer=Ae;const{previewBlob:Re,analysisData:Pe}=await Io(Ae);ve.rawImageData=Pe,!Q&&Pe.metadata&&(ve.exifData=Pe.metadata),ve.isThreePlane=Pe.isThreePlane||!1,Pe.isThreePlane&&Z&&ee(!0);let Le=!1,lt=null,Nt=!1;if(Pe.isXTrans){Nt=!0,lt=Ae;const Sr=(await qf(Ae,0,0)).dngBuffer,er=await Io(Sr);ve.rawFileBuffer=Sr,ve.rawImageData=er.analysisData,ve.previewUrl=URL.createObjectURL(er.previewBlob),Le=!0}else ve.previewUrl=URL.createObjectURL(Re);ve.originalRawFileBuffer=lt,ve.isXTransOriginal=Nt,ve.isXTransConverted=Le,ve.xtransPhase={x:0,y:0};const Gt=new Image;if(Gt.src=ve.previewUrl||"",await new Promise((yr,Sr)=>{Gt.onload=()=>{ve.imageElement=Gt,yr()},Gt.onerror=()=>{yr()}}),Z){const yr=ve.rawImageData||Pe,Sr=sre(yr,Q||yr.metadata);let er;Sr&&Sr.some(Ut=>Ut>0)&&(er=Sr);const Ge={exposure:0,demosaicMethod:-1,blackLevel:er,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ht=ve.rawFileBuffer;if(ht&&(ae||W.type==="image/x-adobe-dng"))try{const Ut=await ng(ht,Ge);ve.renderedRawImageData=Ut,ve.displaySettings=Ge}catch(Ut){console.error("Initial Zero-Dep Render Failed",Ut)}}}catch(Ae){de(`Failed to process RAW file: ${Ae.message}`),xe(null),U(!1);return}else try{xe("Processing image...");const{previewBlob:Ae,analysisData:Re}=await D_(W);ve.rawImageData=Re,!Q&&Re.metadata&&(ve.exifData=Re.metadata),ve.rawFileBuffer=await W.arrayBuffer(),ve.isThreePlane=Re.isThreePlane||!1,ve.isXTransOriginal=!1,ve.isXTransConverted=!1,ve.originalRawFileBuffer=null;const Pe=URL.createObjectURL(Ae);ve.previewUrl=Pe;const Le=new Image;Le.src=Pe,await new Promise(lt=>{Le.onload=()=>{ve.imageElement=Le,lt()},Le.onerror=()=>{de("Could not load the image file."),lt()}})}catch(Ae){de(`Failed to process image: ${Ae.message}`),xe(null);return}const $e=Date.now().toString()+Math.random();if(ve.rawFileBuffer&&await r5($e,ve.rawFileBuffer),Z){const Ae={exposure:0,demosaicMethod:-1,blackLevel:void 0,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},Re={id:$e,fileName:W.name,file:W,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:Ae,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...ve};k(Pe=>{const Le=[...Pe,Re];return P(Le.length-1),Le})}else qr(ve);xe(null),U(!1)},wp=async W=>{xe("Converting to DNG...");try{const Z=new FormData;Z.append("file",W);const Q=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:Z}),ae=Q.headers.get("content-type")||"";if(Q.ok)if(ae.includes("application/json")){const Ce=await Q.json();throw new Error(Ce.error||"Conversion failed")}else{const Ce=await Q.blob(),ve=URL.createObjectURL(Ce),$e=document.createElement("a");$e.href=ve;const Ae=W.name,Re=Ae.substring(0,Ae.lastIndexOf("."))+".dng"||"converted.dng";$e.download=Re,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(ve);const Pe=new File([Ce],Re,{type:"image/x-adobe-dng"});await Eo(Pe,!0)}else{const Ce=await Q.text();throw new Error(`HTTP ${Q.status}: ${Ce}`)}}catch(Z){xe(null),de(`Conversion Error: ${Z.message}`)}},Sf=(W,Z)=>{W&&(Z==="direct"?Eo(W,!0):wp(W))},gc=async W=>{var Q;const Z=(Q=W.target.files)==null?void 0:Q[0];Z&&(await Eo(Z,!0),W.target.value="")},jf=async(W,Z,Q,ae)=>{!W||!Z||(xe("Processing Pair Difference (May take a while)..."),de(null),setTimeout(async()=>{try{const Ce=await W.arrayBuffer(),ve=await Z.arrayBuffer(),$e=await rg(Ce,ve,Q,ae),Ae=Sd($e.width,$e.height,$e.rawData),Re=new File([Ae],`Diff_${W.name}_${Z.name}.dng`,{type:"image/x-adobe-dng"});await Eo(Re,!0),Ts("fft")}catch(Ce){console.error("Pair Processing Error",Ce),de("Pair Processing Failed: "+Ce.message)}finally{xe(null)}},100))},Pf=async W=>{if(W.length<2){de("Need at least 2 files for Batch Diff.");return}xe(`Batch Processing 0/${Math.floor(W.length/2)} pairs...`);const Z=Array.from(W).sort((Q,ae)=>Q.name.localeCompare(ae.name,void 0,{numeric:!0}));try{for(let Q=0;Q<Z.length-1;Q+=2){const ae=Z[Q],Ce=Z[Q+1];xe(`Batch Processing Pair ${Math.floor(Q/2)+1}/${Math.floor(Z.length/2)}: ${ae.name} & ${Ce.name}`);const ve=await ae.arrayBuffer(),$e=await Ce.arrayBuffer(),Ae=await rg(ve,$e,!1,!1),Re=Sd(Ae.width,Ae.height,Ae.rawData),Pe=new Blob([Re],{type:"image/x-adobe-dng"}),Le=URL.createObjectURL(Pe),lt=document.createElement("a");lt.href=Le,lt.download=`Diff_${ae.name}_${Ce.name}.dng`,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),URL.revokeObjectURL(Le)}}catch(Q){console.error("FFT Batch Error",Q),de("Batch Processing Failed: "+Q.message)}finally{xe(null)}},kp=async W=>{if(W.length<1)return;const Z=Array.from(W).sort((Q,ae)=>Q.name.localeCompare(ae.name,void 0,{numeric:!0}));M(Z),await Eo(Z[0],!0)},Es=async()=>{U(!0);const W=128,Z=W,Q=W,ae=Z*Q,Ce=new Uint16Array(ae),ve=Ge=>{const ht=Ge/Ma+la;return Math.sin(2*Math.PI*ht)>=0?1:0},$e=32,Ae=xn*.5,Re=Math.max(1e-4,xn/$e);for(let Ge=0;Ge<Q;Ge++){let ht=0;const vr=Ge+.5-Ae;for(let Ht=0;Ht<$e;Ht++){const wn=vr+(Ht+.5)*Re;ht+=ve(wn)}const Gr=ht/$e,Ot=Math.round(Gr*65535);for(let Ht=0;Ht<Z;Ht++)Ce[Ge*Z+Ht]=Ot}const Pe=new ImageData(fn,fn),Le=fn/Z,lt=xn/2;for(let Ge=0;Ge<fn;Ge++){const ht=Ge/Le,Ut=Math.floor(ht),vr=ht-Ut,Gr=vr>=.5-lt&&vr<.5+lt;for(let Ot=0;Ot<fn;Ot++){const Ht=Ot/Le,wn=Math.floor(Ht),ln=Ht-wn,$o=ln>=.5-lt&&ln<.5+lt,Tr=(Ge*fn+Ot)*4;if(wn>=Z||Ut>=Q){Pe.data[Tr]=30,Pe.data[Tr+1]=34,Pe.data[Tr+2]=40,Pe.data[Tr+3]=255;continue}if(Gr&&$o){const Gi=Ce[Ut*Z+wn],Do=Math.round(Gi/257);Pe.data[Tr]=Do,Pe.data[Tr+1]=Do,Pe.data[Tr+2]=Do,Pe.data[Tr+3]=255}else Pe.data[Tr]=30,Pe.data[Tr+1]=34,Pe.data[Tr+2]=40,Pe.data[Tr+3]=255}}const Nt=new ImageData(fn,fn),Gt=Q/fn;for(let Ge=0;Ge<fn;Ge++){const ht=(Ge+.5)*Gt,vr=ve(ht)>.5?255:0,Gr=Ge*fn*4;for(let Ot=0;Ot<fn;Ot++){const Ht=Gr+Ot*4;Nt.data[Ht]=vr,Nt.data[Ht+1]=vr,Nt.data[Ht+2]=vr,Nt.data[Ht+3]=255}}const yr=Sd(Z,Q,Ce),Sr=new File([yr],"pattern_test.dng",{type:"image/x-adobe-dng"}),er=Date.now().toString();try{const{previewBlob:Ge,analysisData:ht}=await Io(yr.slice(0)),Ut=await s2(yr.slice(0),K),vr=n5(Ut,fn,fn),Gr=URL.createObjectURL(Ge),Ot=new Image;Ot.src=Gr,await new Promise(wn=>{Ot.onload=()=>wn()}),await r5(er,yr);const Ht={id:er,fileName:"pattern_test.dng",file:Sr,imageElement:Ot,rawImageData:ht,rawFileBuffer:yr,renderedRawImageData:vr,referenceImageData:Nt,sampledImageData:Pe,exifData:null,isThreePlane:!1,previewUrl:Gr,displaySettings:K,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(_==null?void 0:_.name)==="pattern_test.dng"?qr(Ht):k(wn=>{const ln=[...wn,Ht];return P(ln.length-1),ln})}catch(Ge){console.error("Error generating pattern:",Ge),de(`Error generating pattern: ${Ge.message}`)}U(!1),xe(null)},je=()=>{lr(!0)},at=()=>{lr(!1),As("sampled"),xe("Generating..."),setTimeout(()=>Es(),50)},qe=j.useRef({period:Ma,fill:xn,phase:la});j.useEffect(()=>{(_==null?void 0:_.name)==="pattern_test.dng"&&(qe.current.period!==Ma||qe.current.fill!==xn||qe.current.phase!==la)&&(qe.current={period:Ma,fill:xn,phase:la},Es())},[Ma,xn,la,_]);const rt=j.useCallback(W=>{if(qr({displaySettings:W}),!R)return;U(!0),He.current&&He.current.terminate();const Z=new Worker(new URL("/assets/renderWorker-D73_7lpj.js",import.meta.url),{type:"module"});He.current=Z,Z.onmessage=Q=>{const{success:ae,imageData:Ce,error:ve}=Q.data;if(ae){let $e=Ce;(_==null?void 0:_.name)==="pattern_test.dng"&&($e=n5(Ce,fn,fn)),qr({renderedRawImageData:$e})}else de(ve||"Unknown worker error");U(!1),Z.terminate(),He.current=null},Z.postMessage({buffer:R.slice(0),settings:W})},[R,_,qr]),bn=async(W,Z)=>{xe("Re-sampling X-Trans with new Phase...");try{const ae=(await qf(Z,W.x,W.y)).dngBuffer,Ce=await Io(ae),ve=URL.createObjectURL(Ce.previewBlob),$e=new Image;$e.src=ve,await new Promise(Ae=>{$e.onload=()=>Ae()}),N!=null&&N.previewUrl&&URL.revokeObjectURL(N.previewUrl),qr({rawFileBuffer:ae,rawImageData:Ce.analysisData,previewUrl:ve,imageElement:$e,xtransPhase:W}),Y(null)}catch(Q){console.error("X-Trans Phase Update Failed",Q),de("Phase Update Failed: "+Q.message)}finally{xe(null)}},_n=W=>{if(!N||!N.originalRawFileBuffer||!N.isXTransConverted)return;const Z={...N.xtransPhase,...W};bn(Z,N.originalRawFileBuffer)},ca=j.useCallback(async W=>{if(N)if(W){if(N.isXTransConverted)return;const Z=N.originalRawFileBuffer||N.rawFileBuffer;if(!Z)return;xe("Converting X-Trans to Pseudo-Bayer DNG...");try{const Q=N.xtransPhase||{x:0,y:0},Ce=(await qf(Z,Q.x,Q.y)).dngBuffer,ve=await Io(Ce),$e=URL.createObjectURL(ve.previewBlob),Ae=new Image;Ae.src=$e,await new Promise(Re=>{Ae.onload=()=>Re()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),qr({rawFileBuffer:Ce,rawImageData:ve.analysisData,previewUrl:$e,imageElement:Ae,isXTransConverted:!0,originalRawFileBuffer:Z}),Y(null)}catch(Q){console.error("X-Trans Conversion Failed",Q),de("Failed to convert X-Trans: "+Q.message)}finally{xe(null)}}else{if(!N.isXTransConverted)return;const Z=N.originalRawFileBuffer;if(!Z){de("Original X-Trans buffer lost. Cannot revert.");return}xe("Reverting to Native X-Trans...");try{const Q=await Io(Z),ae=URL.createObjectURL(Q.previewBlob),Ce=new Image;Ce.src=ae,await new Promise(ve=>{Ce.onload=()=>ve()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),qr({rawFileBuffer:Z,rawImageData:Q.analysisData,previewUrl:ae,imageElement:Ce,isXTransConverted:!1}),Y(null)}catch(Q){console.error("X-Trans Revert Failed",Q),de("Failed to revert X-Trans: "+Q.message)}finally{xe(null)}}},[N,qr]);let ua=L||A;zi==="reference"&&T?ua=T:zi==="sampled"&&E&&(ua=E);const hi=Ne||O,_a=W=>{if(fe.current){const Z=fe.current,{width:Q,height:ae}=Z.getBoundingClientRect(),Ce=Q/2,ve=ae/2,$e=W/dt,Ae=Ce-(Ce-Ve.x)*$e,Re=ve-(ve-Ve.y)*$e;Ee({x:Ae,y:Re})}tt(W)},Jt=W=>{if(!W)return;if(!D){Y(null);return}if(Ar){W.w>0&&W.h>0&&gr(Q=>[...Q,W]);return}X&&oe(!1);const Z=Ro(D.data,D.width,D.height,W.x,W.y,W.w,W.h);Y(Z)},P1=W=>{V(W),Jt(W)},mc=()=>{Qt(W=>W==="pan"?"select":"pan")},Cf=W=>{if(ot.length===0){de("No ROIs marked for calculation.");return}if(!D||K.renderMode!=="advanced-zero-dep"){de("Advanced Zero-Dep (Unmixed) mode required for scalar SFR calc.");return}xe("Computing Batch SFR..."),setTimeout(()=>{try{const Z=[];for(const Q of ot){const ae=yx(D,Q,K),Ce=hv(ae.data,ae.width,ae.height,{x:0,y:0,w:ae.width,h:ae.height});if(Ce){const ve=W.useNR?-1:12,$e=pN([Ce],ve,null,W.useDeshading);$e&&$e.mtf50!==null&&Z.push({x:Q.x+Q.w/2,y:Q.y+Q.h/2,mtf50:$e.mtf50,orientation:Ce.orientation})}}if(Z.length>0){const Q=Z.map(ae=>`{${ae.x.toFixed(1)},${ae.y.toFixed(1)},${ae.mtf50.toFixed(4)},${ae.orientation}}`).join("");navigator.clipboard.writeText(Q).then(()=>alert(`Computed ${Z.length}/${ot.length} ROIs. Copied results to clipboard.`)).catch(ae=>de("Failed to copy results: "+ae))}else de("Failed to compute valid SFR for any selected ROIs.")}catch(Z){de("Batch Compute Failed: "+Z.message)}finally{xe(null)}},100)},C1=W=>{if(Vn===0||Vn>4)return;const Z=[...Hn,W];vn(Z),Vn===4?(yN(Z),yn(0)):yn(Vn+1)},N1=(W,Z,Q,ae)=>{const Ce=W[0],ve=W[1],$e=W[2],Ae=W[3],Re=Z/2,Pe=[];for(let Le=0;Le<Q;Le++){const lt=Q>1?Le/(Q-1):.5;for(let Nt=0;Nt<ae;Nt++){const Gt=ae>1?Nt/(ae-1):.5,yr=Ce.x*(1-Gt)+ve.x*Gt,Sr=Ce.y*(1-Gt)+ve.y*Gt,er=$e.x*(1-Gt)+Ae.x*Gt,Ge=$e.y*(1-Gt)+Ae.y*Gt,ht=yr*(1-lt)+er*lt,Ut=Sr*(1-lt)+Ge*lt,vr=ht-Re,Gr=Ut-Re;Pe.push({x:vr,y:Gr,w:Z,h:Z})}}return Pe},yN=W=>{!D||!N||(xe("Calculating DR Lab Grid..."),setTimeout(()=>{try{const Z=N1(W,Xa,sa,Oa);Fi(Z);const ve=[...[`#BlackLevel: ${(K.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${D.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],$e=`img${N.fileName||"image"}`;Z.forEach((lt,Nt)=>{const Gt=Math.floor(Nt/Oa)+1,yr=Nt%Oa+1,Sr=Ro(D.data,D.width,D.height,lt.x,lt.y,lt.w,lt.h),er=Sr.means,Ge=Sr.stdDevs,ht=`${$e},${Gt},${yr},${er[0].toFixed(4)},${er[1].toFixed(4)},${er[2].toFixed(4)},${er[3].toFixed(4)},${Ge[0].toFixed(4)},${Ge[1].toFixed(4)},${Ge[2].toFixed(4)},${Ge[3].toFixed(4)}`;ve.push(ht)});const Ae=ve.join(`
`),Re=new Blob([Ae],{type:"text/csv;charset=utf-8;"}),Pe=URL.createObjectURL(Re),Le=document.createElement("a");Le.setAttribute("href",Pe),Le.setAttribute("download","dr_lab_results.csv"),document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(Pe),vn([])}catch(Z){de("DR Lab Error: "+Z.message)}finally{xe(null)}},100))},vN=async(W,Z)=>{if(Hn.length<4&&Na.length<1){de("Please mark the grid on an image first before running batch processing.");return}let Q=Na;if(Q.length===0&&Hn.length===4&&(Q=N1(Hn,Xa,sa,Oa)),Q.length===0){de("No grid definitions found. Mark corners first.");return}xe(Z==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const Ce=(K.blackLevel||[0,0,0,0]).join(","),ve=D?D.height:0,Ae=[...[`#BlackLevel: ${Ce}`,`#ImageHeight: ${ve}`,Z==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Re=Array.from(W).sort((Nt,Gt)=>Nt.name.localeCompare(Gt.name,void 0,{numeric:!0}));if(Z==="pair"&&Re.length<2){de("Need at least 2 files for Pair processing."),xe(null);return}const Pe=$.current,Le=(Pe==null?void 0:Pe.isXTransConverted)||!1,lt=(Pe==null?void 0:Pe.xtransPhase)||{x:0,y:0};try{const Nt=async Ge=>{let ht=await Ge.arrayBuffer();return Le&&(ht=(await qf(ht,lt.x,lt.y)).dngBuffer),ht};if(Z==="single")for(let Ge=0;Ge<Re.length;Ge++){const ht=Re[Ge];xe(`Processing ${Ge+1}/${Re.length}: ${ht.name}...`);const Ut=await Nt(ht),vr=await a0(Ut),Gr=`img${ht.name}`;Q.forEach((Ot,Ht)=>{const wn=Math.floor(Ht/sa)+1,ln=Ht%Oa+1,$o=Ro(vr.data,vr.width,vr.height,Ot.x,Ot.y,Ot.w,Ot.h),Tr=$o.means,Gi=$o.stdDevs,Do=`${Gr},${wn},${ln},${Tr[0].toFixed(4)},${Tr[1].toFixed(4)},${Tr[2].toFixed(4)},${Tr[3].toFixed(4)},${Gi[0].toFixed(4)},${Gi[1].toFixed(4)},${Gi[2].toFixed(4)},${Gi[3].toFixed(4)}`;Ae.push(Do)})}else for(let Ge=0;Ge<Re.length-1;Ge+=2){const ht=Re[Ge],Ut=Re[Ge+1],vr=`img${ht.name} & ${Ut.name}`;xe(`Processing Pair ${Math.floor(Ge/2)+1}/${Math.floor(Re.length/2)}: ${ht.name} & ${Ut.name}...`);const Gr=await Nt(ht),Ot=await a0(Gr),Ht=await Nt(Ut),wn=await rg(Gr,Ht,!1,!0);Q.forEach((ln,$o)=>{const Tr=Math.floor($o/sa)+1,Gi=$o%Oa+1,Do=Ro(Ot.data,Ot.width,Ot.height,ln.x,ln.y,ln.w,ln.h),ON=Ro(wn.rawData,wn.width,wn.height,ln.x,ln.y,ln.w,ln.h),Nf=Do.means,Of=ON.stdDevs,MN=`${vr},${Tr},${Gi},${Nf[0].toFixed(4)},${Nf[1].toFixed(4)},${Nf[2].toFixed(4)},${Nf[3].toFixed(4)},${Of[0].toFixed(4)},${Of[1].toFixed(4)},${Of[2].toFixed(4)},${Of[3].toFixed(4)}`;Ae.push(MN)})}const Gt=Ae.join(`
`),yr=new Blob([Gt],{type:"text/csv;charset=utf-8;"}),Sr=URL.createObjectURL(yr),er=document.createElement("a");er.href=Sr,er.setAttribute("download",`dr_lab_batch_${Z}_${new Date().getTime()}.csv`),document.body.appendChild(er),er.click(),document.body.removeChild(er),URL.revokeObjectURL(Sr)}catch(Nt){console.error("Batch Error",Nt),de("Batch Processing Failed: "+Nt.message)}finally{xe(null)}},xN=()=>{zt([]),ie(1)},bN=W=>{if(!mr||vt===0)return;const Z=[...gt,W];zt(Z),Z.length===4&&D?(O1(Z,nr),ie(0)):ie(Q=>Q+1)},O1=(W,Z)=>{D&&(xe("Analyzing Color Chart..."),setTimeout(()=>{try{const Q=Gte(W[0],W[1],W[2],W[3],D.width,D.height,Z);Tt(Q);const Ce=Q.map((ve,$e)=>{const Ae=Ro(D.data,D.width,D.height,ve.x,ve.y,ve.w,ve.h);return{id:$e,rawMeans:Ae.means,refRGB:[0,0,0]}}).map((ve,$e)=>({...ve,refRGB:dv[$e]||[0,0,0]}));Ie(Ce),Ze(!0)}catch(Q){de("Color Lab Error: "+Q.message)}finally{xe(null)}},100))},wN=W=>{ze(W),gt.length===4&&O1(gt,W)},kN=()=>{Ze(!1)},SN=()=>{I||ct("No EXIF data found. The file might not contain metadata or it was stripped during processing."),Oe(!0)},jN=async W=>{xe("Parsing PTC Data...");const Z=[];let Q=null;try{for(let ae=0;ae<W.length;ae++){const ve=(await W[ae].text()).split(`
`);let $e=!0;for(const Ae of ve){const Re=Ae.trim();if(!Re)continue;if(Re.startsWith("#")){if(Re.includes("BlackLevel:")){const Ot=Re.split(":")[1].trim().split(",");if(Ot.length>=4){const Ht=Ot.map(Number);Q||(Q={}),Q.blackLevel=Ht}}if(Re.includes("ImageHeight:")){const Ot=parseInt(Re.split(":")[1].trim());isNaN(Ot)||(Q||(Q={}),Q.height=Ot)}continue}if($e){Re.toLowerCase().includes("mean")&&Re.toLowerCase().includes("std")&&($e=!1);continue}const Pe=Re.split(",");if(Pe.length<5)continue;let Le=0,lt;isNaN(parseFloat(Pe[0]))&&(lt=Pe[0],Le=1);const Nt=parseInt(Pe[Le]),Gt=parseInt(Pe[Le+1]),yr=parseFloat(Pe[Le+2]),Sr=parseFloat(Pe[Le+3]),er=parseFloat(Pe[Le+4]),Ge=parseFloat(Pe[Le+5]),ht=parseFloat(Pe[Le+6]),Ut=parseFloat(Pe[Le+7]),vr=parseFloat(Pe[Le+8]),Gr=parseFloat(Pe[Le+9]);!isNaN(yr)&&!isNaN(ht)&&Z.push({channel:"R",mean:yr,std:ht,filename:lt,row:Nt,col:Gt}),!isNaN(Sr)&&!isNaN(Ut)&&Z.push({channel:"G1",mean:Sr,std:Ut,filename:lt,row:Nt,col:Gt}),!isNaN(er)&&!isNaN(vr)&&Z.push({channel:"G2",mean:er,std:vr,filename:lt,row:Nt,col:Gt}),!isNaN(Ge)&&!isNaN(Gr)&&Z.push({channel:"B",mean:Ge,std:Gr,filename:lt,row:Nt,col:Gt})}}Wn(Z),uc(Q),f(!0)}catch(ae){console.error("PTC Parse Error",ae),de("Failed to parse CSV files: "+ae.message)}finally{xe(null)}},PN=()=>{if(!R||!N)return;const W=new Blob([R],{type:"image/x-adobe-dng"}),Z=URL.createObjectURL(W),Q=document.createElement("a");Q.href=Z;const ae=N.fileName||"image.dng",Ce=ae.toLowerCase().endsWith(".dng")?ae:ae.replace(/\.[^/.]+$/,"")+".dng";Q.download=Ce,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(Z)},CN=()=>{yn(1),vn([]),Fi([])},M1=()=>{window.open("https://github.com/y-g-jiang/y-g-jiang.github.io/blob/main/drtest.png","_blank")},NN=j.useMemo(()=>Me?Me.map((W,Z)=>({...W,refRGB:dv[Z]||[0,0,0]})):[],[Me]);return e==="prompt"?c.jsx("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-200 dark:bg-[#111] text-black dark:text-gray-200 font-mono",children:c.jsxs("div",{className:"p-8 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] max-w-md w-full text-center",children:[c.jsx("h2",{className:"text-xl font-bold mb-4 uppercase tracking-wider",children:"Session Recovery"}),c.jsx("p",{className:"mb-6 text-sm",children:"A saved workspace was found. Would you like to restore your previous session?"}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx("button",{onClick:Rt,className:"px-4 py-2 border-2 border-red-500 text-red-600 dark:text-red-400 font-bold hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-[2px_2px_0px_rgba(239,68,68,0.5)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",children:"Start Fresh"}),c.jsx("button",{onClick:_e,className:"px-4 py-2 bg-cyan-600 text-white font-bold hover:bg-cyan-500 border-2 border-black dark:border-white transition-colors shadow-[4px_4px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.5)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_rgba(0,0,0,1)] dark:active:shadow-[2px_2px_0px_rgba(255,255,255,0.5)]",children:"Restore Session"})]})]})}):e==="restoring"?c.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-300 dark:bg-[#111] text-black dark:text-white font-mono",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-black dark:border-white border-t-transparent animate-spin mb-4"}),c.jsx("h2",{className:"text-xl font-bold",children:r}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-6",children:"Reconstructing analysis environment..."}),c.jsx("button",{onClick:Rt,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-bold border-2 border-black dark:border-gray-500 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:shadow-none active:translate-x-1 active:translate-y-1 transition-all text-sm",children:"Cancel Restore"})]}):c.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[c.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:c.jsx(a_,{onLoadImage:gc,onFileSelected:Sf,onGenerateFakeDng:je,fileName:_?_.name:null,hasGeneratedData:(_==null?void 0:_.name)==="pattern_test.dng",viewMode:zi,onSetViewMode:As,patternPeriod:Ma,onPatternPeriodChange:di,fillFactor:xn,onFillFactorChange:hc,patternPhase:la,onPatternPhaseChange:pc,showPatternControls:(_==null?void 0:_.name)==="pattern_test.dng",onOpenAbout:()=>pr(!0),onShowExif:SN,bridgeStatus:v,onBridgeClick:()=>b(!0),isDrLabOpen:At,onToggleDrLab:()=>{Zt(!At),yn(0),vn([]),Fi([]),kr&&Fr(!1),mr&&mn(!1),kt&&_r(!1),ie(0),Tt([]),gr([]),nn(!1)},isColorLabOpen:mr,onToggleColorLab:()=>{mn(!mr),zt([]),ie(0),Tt([]),At&&Zt(!1),kr&&Fr(!1),kt&&_r(!1),gr([]),nn(!1)},isFftLabOpen:kr,onToggleFftLab:()=>{Fr(!kr),At&&Zt(!1),mr&&mn(!1),kt&&_r(!1),ie(0),Tt([]),gr([]),nn(!1)},isSfrLabOpen:kt,onToggleSfrLab:()=>{_r(!kt),At&&Zt(!1),mr&&mn(!1),kr&&Fr(!1),ie(0),Tt([]),gr([]),nn(!1)},onGenerateTestPic:M1,onPTCFilesSelected:jN,onDownloadDng:PN,isThreePlane:G,onOpenDatabase:()=>h(!0),isSidebarOpen:me,onToggleSidebar:()=>Ue(!me),stretchMultiplier:Ke,onStretchMultiplierChange:wt,onStretchDngExport:xt,isRawLoaded:!!D})}),c.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[c.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:fe,children:[hi&&c.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:Ne||"Processing..."})]}),c.jsx(Ate,{isOpen:ft,onClose:()=>pr(!1)}),c.jsx(Tte,{isOpen:Te,onClose:()=>Oe(!1),data:I,fileName:_?_.name:"",warning:De}),c.jsx($te,{isOpen:u,onClose:()=>f(!1),data:To,blackLevel:re,imageHeight:B,isBGGR:le,importedMetadata:oa||void 0,theme:s,initialCameraModel:(I==null?void 0:I.Model)||"",initialISO:(I==null?void 0:I.ISO)||((_1=I==null?void 0:I.ISOSpeedRatings)==null?void 0:_1.toString())||""}),c.jsx(Bte,{isOpen:d,onClose:()=>h(!1),theme:s}),c.jsx(Fte,{isOpen:p,onClose:()=>y(!1),zIndex:200}),c.jsx(Hte,{isOpen:st,onClose:kN,patchStats:NN,initialIsBGGR:le,sizeRatio:nr,onSizeChange:wN}),c.jsx(Yte,{isOpen:kt,isSfrLabOpen:kt,onClose:()=>{},rawImageData:D,roi:se?{x:se.x,y:se.y,w:se.width,h:se.height}:null,zIndex:200,onFocus:sn,displaySettings:K}),c.jsx(Zte,{isOpen:m,onClose:()=>x(!1),rawImageData:D,fileName:(_==null?void 0:_.name)||"image.dng",zIndex:300,onFocus:sn}),c.jsx(mo,{isOpen:ut,onClose:()=>lr(!1),onConfirm:at,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),c.jsx("p",{className:"text-xs text-gray-500"})]})}),c.jsx(mo,{isOpen:g,onClose:()=>b(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),b(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),c.jsx(mo,{isOpen:Je,onClose:()=>Ft(!1),onConfirm:Ct,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),c.jsx("div",{onClick:()=>cr(!$t),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${$t?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${$t?"translate-x-6":""}`})})]}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),c.jsx("div",{onClick:()=>yt(!Dt),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Dt?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Dt?"translate-x-6":""}`})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[$t&&!Dt&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!$t&&Dt&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",$t&&Dt&&"Mode: Ready-to-Use. Conventional 16-bit development.",!$t&&!Dt&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!X&&c.jsx(lre,{stats:se,onClose:()=>{Y(null),V(null)},onMinimize:()=>oe(!0),isBGGR:le,onToggleBGGR:H,onOpenWindow:Ts,displaySettings:K,zIndex:te,onFocus:sn,rawImageData:D}),pe.map(W=>{if(W.isMinimized)return null;const Z=S.find(Ce=>Ce.id===W.sessionId),Q=Z==null?void 0:Z.rawImageData;if(!Q)return null;const ae={key:W.id,isOpen:!0,onClose:()=>yp(W.id),onMinimize:()=>kf(W.id),rawImageData:Q,roi:W.roi,isBGGR:W.isBGGR,zIndex:W.zIndex,onFocus:()=>vp(W.id),initialPosition:W.initialPosition,initialInternalState:W.internalState,onUpdateState:Ce=>xp(W.id,Ce),stackFiles:W.stackFiles};return W.type==="histogram"?c.jsx(kte,{...ae}):W.type==="fft"?c.jsx(Cte,{...ae,onUpdateROI:Ce=>bp(W.id,Ce)}):W.type==="quant"?c.jsx(Nte,{...ae}):W.type==="pearson"?c.jsx(Ote,{...ae}):null}),ce&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:c.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[c.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),c.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:ce}),c.jsx("button",{onClick:()=>de(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!ua&&!hi&&!ce&&c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:c.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),c.jsx(i_,{image:ua,zoom:dt,pan:Ve,onPanChange:Ee,onZoomChange:_a,onSelectionChange:Jt,forcedSelection:ue,theme:s,touchAction:Qe,isMarking:Vn>0||mr&&vt>0,onPointClick:W=>{Vn>0?C1(W):mr&&vt>0&&bN(W)},markers:Hn,gridRects:Na,colorLabPoints:gt,colorLabRects:It,sfrRects:ot}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),D&&!Vn&&!mr&&!Ar&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",c.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),Ar&&c.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-red-500 bg-black/80 px-4 py-2 rounded-full border border-red-500 animate-pulse shadow-lg",children:"Manual Batch Marking Active (Shift+Drag to add)"}),mr&&vt>0&&c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[gt.length===0&&"Click Top-Left Corner of Chart",gt.length===1&&"Click Top-Right Corner",gt.length===2&&"Click Bottom-Left Corner",gt.length===3&&"Click Bottom-Right Corner",gt.length===4&&"Processing..."]}),c.jsx(nA,{zoom:dt,onZoomChange:_a,onResetView:()=>{tt(1),Ee({x:0,y:0})},touchAction:Qe,onToggleTouchAction:mc})]}),me&&c.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:c.jsx(Y_,{rawImageData:D,displaySettings:K,onApplyDisplaySettings:rt,onSetSelection:P1,exifData:I,isBridgeConnected:v.isConnected,isDrLabOpen:At,drMarkingStep:Vn,onStartMarking:CN,onGenerateTestPic:M1,drRoiSize:Xa,onDrRoiSizeChange:fi,drGridRows:sa,onDrGridRowsChange:fc,drGridCols:Oa,onDrGridColsChange:dc,onBatchDrLab:vN,hasDrMarkers:Na.length>0,isFftLabOpen:kr,onProcessPair:jf,onProcessBatchDiff:Pf,onProcessStackFft:kp,onOpenCrossCalc:()=>y(!0),isThreePlane:G,onToggleXTrans:ca,xtransPhase:J,onXTransPhaseChange:_n,isXTransConverted:N==null?void 0:N.isXTransConverted,roiStats:se,isBGGR:le,isColorLabOpen:mr,colorLabMarkingStep:vt,onStartColorLabMarking:xN,isSfrLabOpen:kt,onOpenDngExport:()=>x(!0),sfrRectCount:ot.length,isBatchMarkingMode:Ar,onToggleBatchMarking:()=>nn(!Ar),onClearBatchMarks:()=>gr([]),onBatchCompute:Cf})}),c.jsx(aA,{theme:s,setTheme:l})]})]})},mN=document.getElementById("root");if(!mN)throw new Error("Could not find root element to mount to");const ure=Rg.createRoot(mN);ure.render(c.jsx(z.StrictMode,{children:c.jsx(cre,{})}));export{l_ as _};
