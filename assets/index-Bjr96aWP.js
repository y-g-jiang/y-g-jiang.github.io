var kO=Object.defineProperty;var SO=(e,t,r)=>t in e?kO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _n=(e,t,r)=>SO(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var JS={exports:{}},oh={},e5={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf=Symbol.for("react.element"),jO=Symbol.for("react.portal"),PO=Symbol.for("react.fragment"),CO=Symbol.for("react.strict_mode"),OO=Symbol.for("react.profiler"),NO=Symbol.for("react.provider"),_O=Symbol.for("react.context"),MO=Symbol.for("react.forward_ref"),AO=Symbol.for("react.suspense"),TO=Symbol.for("react.memo"),EO=Symbol.for("react.lazy"),j1=Symbol.iterator;function $O(e){return e===null||typeof e!="object"?null:(e=j1&&e[j1]||e["@@iterator"],typeof e=="function"?e:null)}var t5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r5=Object.assign,n5={};function ql(e,t,r){this.props=e,this.context=t,this.refs=n5,this.updater=r||t5}ql.prototype.isReactComponent={};ql.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ql.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function a5(){}a5.prototype=ql.prototype;function fv(e,t,r){this.props=e,this.context=t,this.refs=n5,this.updater=r||t5}var dv=fv.prototype=new a5;dv.constructor=fv;r5(dv,ql.prototype);dv.isPureReactComponent=!0;var P1=Array.isArray,i5=Object.prototype.hasOwnProperty,hv={current:null},o5={key:!0,ref:!0,__self:!0,__source:!0};function s5(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)i5.call(t,n)&&!o5.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:uf,type:e,key:i,ref:o,props:a,_owner:hv.current}}function DO(e,t){return{$$typeof:uf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pv(e){return typeof e=="object"&&e!==null&&e.$$typeof===uf}function IO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var C1=/\/+/g;function kp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IO(""+e.key):t.toString(36)}function fd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case uf:case jO:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+kp(o,0):n,P1(a)?(r="",e!=null&&(r=e.replace(C1,"$&/")+"/"),fd(a,t,r,"",function(u){return u})):a!=null&&(pv(a)&&(a=DO(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(C1,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",P1(e))for(var s=0;s<e.length;s++){i=e[s];var l=n+kp(i,s);o+=fd(i,t,r,l,a)}else if(l=$O(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=n+kp(i,s++),o+=fd(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Mf(e,t,r){if(e==null)return e;var n=[],a=0;return fd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function RO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dn={current:null},dd={transition:null},LO={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:dd,ReactCurrentOwner:hv};function l5(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Mf,forEach:function(e,t,r){Mf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Mf(e,function(){t++}),t},toArray:function(e){return Mf(e,function(t){return t})||[]},only:function(e){if(!pv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=ql;at.Fragment=PO;at.Profiler=OO;at.PureComponent=fv;at.StrictMode=CO;at.Suspense=AO;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LO;at.act=l5;at.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=r5({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=hv.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)i5.call(t,l)&&!o5.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:uf,type:e.type,key:a,ref:i,props:n,_owner:o}};at.createContext=function(e){return e={$$typeof:_O,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:NO,_context:e},e.Consumer=e};at.createElement=s5;at.createFactory=function(e){var t=s5.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:MO,render:e}};at.isValidElement=pv;at.lazy=function(e){return{$$typeof:EO,_payload:{_status:-1,_result:e},_init:RO}};at.memo=function(e,t){return{$$typeof:TO,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=dd.transition;dd.transition={};try{e()}finally{dd.transition=t}};at.unstable_act=l5;at.useCallback=function(e,t){return Dn.current.useCallback(e,t)};at.useContext=function(e){return Dn.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return Dn.current.useDeferredValue(e)};at.useEffect=function(e,t){return Dn.current.useEffect(e,t)};at.useId=function(){return Dn.current.useId()};at.useImperativeHandle=function(e,t,r){return Dn.current.useImperativeHandle(e,t,r)};at.useInsertionEffect=function(e,t){return Dn.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return Dn.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return Dn.current.useMemo(e,t)};at.useReducer=function(e,t,r){return Dn.current.useReducer(e,t,r)};at.useRef=function(e){return Dn.current.useRef(e)};at.useState=function(e){return Dn.current.useState(e)};at.useSyncExternalStore=function(e,t,r){return Dn.current.useSyncExternalStore(e,t,r)};at.useTransition=function(){return Dn.current.useTransition()};at.version="18.3.1";e5.exports=at;var j=e5.exports;const L=zt(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BO=j,FO=Symbol.for("react.element"),zO=Symbol.for("react.fragment"),UO=Object.prototype.hasOwnProperty,GO=BO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WO={key:!0,ref:!0,__self:!0,__source:!0};function c5(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)UO.call(t,n)&&!WO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:FO,type:e,key:i,ref:o,props:a,_owner:GO.current}}oh.Fragment=zO;oh.jsx=c5;oh.jsxs=c5;JS.exports=oh;var c=JS.exports,Dg={},u5={exports:{}},ua={},f5={exports:{}},d5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,z){var U=I.length;I.push(z);e:for(;0<U;){var ne=U-1>>>1,V=I[ne];if(0<a(V,z))I[ne]=z,I[U]=V,U=ne;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var z=I[0],U=I.pop();if(U!==z){I[0]=U;e:for(var ne=0,V=I.length,F=V>>>1;ne<F;){var re=2*(ne+1)-1,ee=I[re],$=re+1,ae=I[$];if(0>a(ee,U))$<V&&0>a(ae,ee)?(I[ne]=ae,I[$]=U,ne=$):(I[ne]=ee,I[re]=U,ne=re);else if($<V&&0>a(ae,U))I[ne]=ae,I[$]=U,ne=$;else break e}}return z}function a(I,z){var U=I.sortIndex-z.sortIndex;return U!==0?U:I.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],f=1,d=null,h=3,p=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(I){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=I)n(u),z.sortIndex=z.expirationTime,t(l,z);else break;z=r(u)}}function S(I){if(y=!1,v(I),!m)if(r(l)!==null)m=!0,B(b);else{var z=r(u);z!==null&&_(S,z.startTime-I)}}function b(I,z){m=!1,y&&(y=!1,x(P),P=-1),p=!0;var U=h;try{for(v(z),d=r(l);d!==null&&(!(d.expirationTime>z)||I&&!T());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,h=d.priorityLevel;var V=ne(d.expirationTime<=z);z=e.unstable_now(),typeof V=="function"?d.callback=V:d===r(l)&&n(l),v(z)}else n(l);d=r(l)}if(d!==null)var F=!0;else{var re=r(u);re!==null&&_(S,re.startTime-z),F=!1}return F}finally{d=null,h=U,p=!1}}var k=!1,C=null,P=-1,N=5,A=-1;function T(){return!(e.unstable_now()-A<N)}function O(){if(C!==null){var I=e.unstable_now();A=I;var z=!0;try{z=C(!0,I)}finally{z?M():(k=!1,C=null)}}else k=!1}var M;if(typeof g=="function")M=function(){g(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,E=D.port2;D.port1.onmessage=O,M=function(){E.postMessage(null)}}else M=function(){w(O,0)};function B(I){C=I,k||(k=!0,M())}function _(I,z){P=w(function(){I(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,B(b))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var U=h;h=z;try{return I()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var U=h;h=I;try{return z()}finally{h=U}},e.unstable_scheduleCallback=function(I,z,U){var ne=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ne+U:ne):U=ne,I){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,I={id:f++,callback:z,priorityLevel:I,startTime:U,expirationTime:V,sortIndex:-1},U>ne?(I.sortIndex=U,t(u,I),r(l)===null&&I===r(u)&&(y?(x(P),P=-1):y=!0,_(S,U-ne))):(I.sortIndex=V,t(l,I),m||p||(m=!0,B(b))),I},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(I){var z=h;return function(){var U=h;h=z;try{return I.apply(this,arguments)}finally{h=U}}}})(d5);f5.exports=d5;var VO=f5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HO=j,ca=VO;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h5=new Set,cu={};function Ns(e,t){yl(e,t),yl(e+"Capture",t)}function yl(e,t){for(cu[e]=t,e=0;e<t.length;e++)h5.add(t[e])}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ig=Object.prototype.hasOwnProperty,XO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O1={},N1={};function KO(e){return Ig.call(N1,e)?!0:Ig.call(O1,e)?!1:XO.test(e)?N1[e]=!0:(O1[e]=!0,!1)}function YO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qO(e,t,r,n){if(t===null||typeof t>"u"||YO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function In(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){cn[e]=new In(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];cn[t]=new In(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){cn[e]=new In(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){cn[e]=new In(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){cn[e]=new In(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){cn[e]=new In(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){cn[e]=new In(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){cn[e]=new In(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){cn[e]=new In(e,5,!1,e.toLowerCase(),null,!1,!1)});var gv=/[\-:]([a-z])/g;function mv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gv,mv);cn[t]=new In(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gv,mv);cn[t]=new In(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gv,mv);cn[t]=new In(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){cn[e]=new In(e,1,!1,e.toLowerCase(),null,!1,!1)});cn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){cn[e]=new In(e,1,!1,e.toLowerCase(),null,!0,!0)});function yv(e,t,r,n){var a=cn.hasOwnProperty(t)?cn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qO(t,r,a,n)&&(r=null),n||a===null?KO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ui=HO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Af=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),vv=Symbol.for("react.strict_mode"),Rg=Symbol.for("react.profiler"),p5=Symbol.for("react.provider"),g5=Symbol.for("react.context"),xv=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Bg=Symbol.for("react.suspense_list"),bv=Symbol.for("react.memo"),eo=Symbol.for("react.lazy"),m5=Symbol.for("react.offscreen"),_1=Symbol.iterator;function bc(e){return e===null||typeof e!="object"?null:(e=_1&&e[_1]||e["@@iterator"],typeof e=="function"?e:null)}var fr=Object.assign,Sp;function Fc(e){if(Sp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sp=t&&t[1]||""}return`
`+Sp+e}var jp=!1;function Pp(e,t){if(!e||jp)return"";jp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{jp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fc(e):""}function ZO(e){switch(e.tag){case 5:return Fc(e.type);case 16:return Fc("Lazy");case 13:return Fc("Suspense");case 19:return Fc("SuspenseList");case 0:case 2:case 15:return e=Pp(e.type,!1),e;case 11:return e=Pp(e.type.render,!1),e;case 1:return e=Pp(e.type,!0),e;default:return""}}function Fg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vs:return"Fragment";case Ws:return"Portal";case Rg:return"Profiler";case vv:return"StrictMode";case Lg:return"Suspense";case Bg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case g5:return(e.displayName||"Context")+".Consumer";case p5:return(e._context.displayName||"Context")+".Provider";case xv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bv:return t=e.displayName||null,t!==null?t:Fg(e.type)||"Memo";case eo:t=e._payload,e=e._init;try{return Fg(e(t))}catch{}}return null}function QO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fg(t);case 8:return t===vv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function y5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JO(e){var t=y5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tf(e){e._valueTracker||(e._valueTracker=JO(e))}function v5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=y5(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Pd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zg(e,t){var r=t.checked;return fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function M1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Oo(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function x5(e,t){t=t.checked,t!=null&&yv(e,"checked",t,!1)}function Ug(e,t){x5(e,t);var r=Oo(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Gg(e,t.type,Oo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function A1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Gg(e,t,r){(t!=="number"||Pd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var zc=Array.isArray;function il(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Oo(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Wg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function T1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(fe(92));if(zc(r)){if(1<r.length)throw Error(fe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Oo(r)}}function b5(e,t){var r=Oo(t.value),n=Oo(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function E1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function w5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?w5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ef,k5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ef=Ef||document.createElement("div"),Ef.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ef.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eN=["Webkit","ms","Moz","O"];Object.keys(Hc).forEach(function(e){eN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hc[t]=Hc[e]})});function S5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hc.hasOwnProperty(e)&&Hc[e]?(""+t).trim():t+"px"}function j5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=S5(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var tN=fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(e,t){if(t){if(tN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function Xg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kg=null;function wv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yg=null,ol=null,sl=null;function $1(e){if(e=hf(e)){if(typeof Yg!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=fh(t),Yg(e.stateNode,e.type,t))}}function P5(e){ol?sl?sl.push(e):sl=[e]:ol=e}function C5(){if(ol){var e=ol,t=sl;if(sl=ol=null,$1(e),t)for(e=0;e<t.length;e++)$1(t[e])}}function O5(e,t){return e(t)}function N5(){}var Cp=!1;function _5(e,t,r){if(Cp)return e(t,r);Cp=!0;try{return O5(e,t,r)}finally{Cp=!1,(ol!==null||sl!==null)&&(N5(),C5())}}function fu(e,t){var r=e.stateNode;if(r===null)return null;var n=fh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(fe(231,t,typeof r));return r}var qg=!1;if(Di)try{var wc={};Object.defineProperty(wc,"passive",{get:function(){qg=!0}}),window.addEventListener("test",wc,wc),window.removeEventListener("test",wc,wc)}catch{qg=!1}function rN(e,t,r,n,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Xc=!1,Cd=null,Od=!1,Zg=null,nN={onError:function(e){Xc=!0,Cd=e}};function aN(e,t,r,n,a,i,o,s,l){Xc=!1,Cd=null,rN.apply(nN,arguments)}function iN(e,t,r,n,a,i,o,s,l){if(aN.apply(this,arguments),Xc){if(Xc){var u=Cd;Xc=!1,Cd=null}else throw Error(fe(198));Od||(Od=!0,Zg=u)}}function _s(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function M5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function D1(e){if(_s(e)!==e)throw Error(fe(188))}function oN(e){var t=e.alternate;if(!t){if(t=_s(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return D1(a),e;if(i===n)return D1(a),t;i=i.sibling}throw Error(fe(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(fe(189))}}if(r.alternate!==n)throw Error(fe(190))}if(r.tag!==3)throw Error(fe(188));return r.stateNode.current===r?e:t}function A5(e){return e=oN(e),e!==null?T5(e):null}function T5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=T5(e);if(t!==null)return t;e=e.sibling}return null}var E5=ca.unstable_scheduleCallback,I1=ca.unstable_cancelCallback,sN=ca.unstable_shouldYield,lN=ca.unstable_requestPaint,Cr=ca.unstable_now,cN=ca.unstable_getCurrentPriorityLevel,kv=ca.unstable_ImmediatePriority,$5=ca.unstable_UserBlockingPriority,Nd=ca.unstable_NormalPriority,uN=ca.unstable_LowPriority,D5=ca.unstable_IdlePriority,sh=null,ii=null;function fN(e){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(sh,e,void 0,(e.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:pN,dN=Math.log,hN=Math.LN2;function pN(e){return e>>>=0,e===0?32:31-(dN(e)/hN|0)|0}var $f=64,Df=4194304;function Uc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _d(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Uc(s):(i&=o,i!==0&&(n=Uc(i)))}else o=r&~a,o!==0?n=Uc(o):i!==0&&(n=Uc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ha(t),a=1<<r,n|=e[r],t&=~a;return n}function gN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mN(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ha(i),s=1<<o,l=a[o];l===-1?(!(s&r)||s&n)&&(a[o]=gN(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function Qg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function I5(){var e=$f;return $f<<=1,!($f&4194240)&&($f=64),e}function Op(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ff(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ha(t),e[t]=r}function yN(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ha(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Sv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ha(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Mt=0;function R5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var L5,jv,B5,F5,z5,Jg=!1,If=[],yo=null,vo=null,xo=null,du=new Map,hu=new Map,no=[],vN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R1(e,t){switch(e){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":du.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(t.pointerId)}}function kc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=hf(t),t!==null&&jv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function xN(e,t,r,n,a){switch(t){case"focusin":return yo=kc(yo,e,t,r,n,a),!0;case"dragenter":return vo=kc(vo,e,t,r,n,a),!0;case"mouseover":return xo=kc(xo,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return du.set(i,kc(du.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,hu.set(i,kc(hu.get(i)||null,e,t,r,n,a)),!0}return!1}function U5(e){var t=qo(e.target);if(t!==null){var r=_s(t);if(r!==null){if(t=r.tag,t===13){if(t=M5(r),t!==null){e.blockedOn=t,z5(e.priority,function(){B5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=em(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Kg=n,r.target.dispatchEvent(n),Kg=null}else return t=hf(r),t!==null&&jv(t),e.blockedOn=r,!1;t.shift()}return!0}function L1(e,t,r){hd(e)&&r.delete(t)}function bN(){Jg=!1,yo!==null&&hd(yo)&&(yo=null),vo!==null&&hd(vo)&&(vo=null),xo!==null&&hd(xo)&&(xo=null),du.forEach(L1),hu.forEach(L1)}function Sc(e,t){e.blockedOn===t&&(e.blockedOn=null,Jg||(Jg=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,bN)))}function pu(e){function t(a){return Sc(a,e)}if(0<If.length){Sc(If[0],e);for(var r=1;r<If.length;r++){var n=If[r];n.blockedOn===e&&(n.blockedOn=null)}}for(yo!==null&&Sc(yo,e),vo!==null&&Sc(vo,e),xo!==null&&Sc(xo,e),du.forEach(t),hu.forEach(t),r=0;r<no.length;r++)n=no[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<no.length&&(r=no[0],r.blockedOn===null);)U5(r),r.blockedOn===null&&no.shift()}var ll=Ui.ReactCurrentBatchConfig,Md=!0;function wN(e,t,r,n){var a=Mt,i=ll.transition;ll.transition=null;try{Mt=1,Pv(e,t,r,n)}finally{Mt=a,ll.transition=i}}function kN(e,t,r,n){var a=Mt,i=ll.transition;ll.transition=null;try{Mt=4,Pv(e,t,r,n)}finally{Mt=a,ll.transition=i}}function Pv(e,t,r,n){if(Md){var a=em(e,t,r,n);if(a===null)Rp(e,t,n,Ad,r),R1(e,n);else if(xN(a,e,t,r,n))n.stopPropagation();else if(R1(e,n),t&4&&-1<vN.indexOf(e)){for(;a!==null;){var i=hf(a);if(i!==null&&L5(i),i=em(e,t,r,n),i===null&&Rp(e,t,n,Ad,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Rp(e,t,n,null,r)}}var Ad=null;function em(e,t,r,n){if(Ad=null,e=wv(n),e=qo(e),e!==null)if(t=_s(e),t===null)e=null;else if(r=t.tag,r===13){if(e=M5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ad=e,null}function G5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cN()){case kv:return 1;case $5:return 4;case Nd:case uN:return 16;case D5:return 536870912;default:return 16}default:return 16}}var oo=null,Cv=null,pd=null;function W5(){if(pd)return pd;var e,t=Cv,r=t.length,n,a="value"in oo?oo.value:oo.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return pd=a.slice(e,1<n?1-n:void 0)}function gd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rf(){return!0}function B1(){return!1}function fa(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rf:B1,this.isPropagationStopped=B1,this}return fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Rf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Rf)},persist:function(){},isPersistent:Rf}),t}var Zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ov=fa(Zl),df=fr({},Zl,{view:0,detail:0}),SN=fa(df),Np,_p,jc,lh=fr({},df,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jc&&(jc&&e.type==="mousemove"?(Np=e.screenX-jc.screenX,_p=e.screenY-jc.screenY):_p=Np=0,jc=e),Np)},movementY:function(e){return"movementY"in e?e.movementY:_p}}),F1=fa(lh),jN=fr({},lh,{dataTransfer:0}),PN=fa(jN),CN=fr({},df,{relatedTarget:0}),Mp=fa(CN),ON=fr({},Zl,{animationName:0,elapsedTime:0,pseudoElement:0}),NN=fa(ON),_N=fr({},Zl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),MN=fa(_N),AN=fr({},Zl,{data:0}),z1=fa(AN),TN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$N={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$N[e])?!!t[e]:!1}function Nv(){return DN}var IN=fr({},df,{key:function(e){if(e.key){var t=TN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?EN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nv,charCode:function(e){return e.type==="keypress"?gd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),RN=fa(IN),LN=fr({},lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U1=fa(LN),BN=fr({},df,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nv}),FN=fa(BN),zN=fr({},Zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),UN=fa(zN),GN=fr({},lh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WN=fa(GN),VN=[9,13,27,32],_v=Di&&"CompositionEvent"in window,Kc=null;Di&&"documentMode"in document&&(Kc=document.documentMode);var HN=Di&&"TextEvent"in window&&!Kc,V5=Di&&(!_v||Kc&&8<Kc&&11>=Kc),G1=" ",W1=!1;function H5(e,t){switch(e){case"keyup":return VN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hs=!1;function XN(e,t){switch(e){case"compositionend":return X5(t);case"keypress":return t.which!==32?null:(W1=!0,G1);case"textInput":return e=t.data,e===G1&&W1?null:e;default:return null}}function KN(e,t){if(Hs)return e==="compositionend"||!_v&&H5(e,t)?(e=W5(),pd=Cv=oo=null,Hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return V5&&t.locale!=="ko"?null:t.data;default:return null}}var YN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YN[e.type]:t==="textarea"}function K5(e,t,r,n){P5(n),t=Td(t,"onChange"),0<t.length&&(r=new Ov("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yc=null,gu=null;function qN(e){i4(e,0)}function ch(e){var t=Ys(e);if(v5(t))return e}function ZN(e,t){if(e==="change")return t}var Y5=!1;if(Di){var Ap;if(Di){var Tp="oninput"in document;if(!Tp){var H1=document.createElement("div");H1.setAttribute("oninput","return;"),Tp=typeof H1.oninput=="function"}Ap=Tp}else Ap=!1;Y5=Ap&&(!document.documentMode||9<document.documentMode)}function X1(){Yc&&(Yc.detachEvent("onpropertychange",q5),gu=Yc=null)}function q5(e){if(e.propertyName==="value"&&ch(gu)){var t=[];K5(t,gu,e,wv(e)),_5(qN,t)}}function QN(e,t,r){e==="focusin"?(X1(),Yc=t,gu=r,Yc.attachEvent("onpropertychange",q5)):e==="focusout"&&X1()}function JN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ch(gu)}function e_(e,t){if(e==="click")return ch(t)}function t_(e,t){if(e==="input"||e==="change")return ch(t)}function r_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ka=typeof Object.is=="function"?Object.is:r_;function mu(e,t){if(Ka(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Ig.call(t,a)||!Ka(e[a],t[a]))return!1}return!0}function K1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Y1(e,t){var r=K1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=K1(r)}}function Z5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Z5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Q5(){for(var e=window,t=Pd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Pd(e.document)}return t}function Mv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function n_(e){var t=Q5(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Z5(r.ownerDocument.documentElement,r)){if(n!==null&&Mv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Y1(r,i);var o=Y1(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var a_=Di&&"documentMode"in document&&11>=document.documentMode,Xs=null,tm=null,qc=null,rm=!1;function q1(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rm||Xs==null||Xs!==Pd(n)||(n=Xs,"selectionStart"in n&&Mv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),qc&&mu(qc,n)||(qc=n,n=Td(tm,"onSelect"),0<n.length&&(t=new Ov("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Xs)))}function Lf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ks={animationend:Lf("Animation","AnimationEnd"),animationiteration:Lf("Animation","AnimationIteration"),animationstart:Lf("Animation","AnimationStart"),transitionend:Lf("Transition","TransitionEnd")},Ep={},J5={};Di&&(J5=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function uh(e){if(Ep[e])return Ep[e];if(!Ks[e])return e;var t=Ks[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in J5)return Ep[e]=t[r];return e}var e4=uh("animationend"),t4=uh("animationiteration"),r4=uh("animationstart"),n4=uh("transitionend"),a4=new Map,Z1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(e,t){a4.set(e,t),Ns(t,[e])}for(var $p=0;$p<Z1.length;$p++){var Dp=Z1[$p],i_=Dp.toLowerCase(),o_=Dp[0].toUpperCase()+Dp.slice(1);_o(i_,"on"+o_)}_o(e4,"onAnimationEnd");_o(t4,"onAnimationIteration");_o(r4,"onAnimationStart");_o("dblclick","onDoubleClick");_o("focusin","onFocus");_o("focusout","onBlur");_o(n4,"onTransitionEnd");yl("onMouseEnter",["mouseout","mouseover"]);yl("onMouseLeave",["mouseout","mouseover"]);yl("onPointerEnter",["pointerout","pointerover"]);yl("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gc));function Q1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,iN(n,t,void 0,e),e.currentTarget=null}function i4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;Q1(a,s,u),i=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;Q1(a,s,u),i=l}}}if(Od)throw e=Zg,Od=!1,Zg=null,e}function qt(e,t){var r=t[sm];r===void 0&&(r=t[sm]=new Set);var n=e+"__bubble";r.has(n)||(o4(t,e,2,!1),r.add(n))}function Ip(e,t,r){var n=0;t&&(n|=4),o4(r,e,n,t)}var Bf="_reactListening"+Math.random().toString(36).slice(2);function yu(e){if(!e[Bf]){e[Bf]=!0,h5.forEach(function(r){r!=="selectionchange"&&(s_.has(r)||Ip(r,!1,e),Ip(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bf]||(t[Bf]=!0,Ip("selectionchange",!1,t))}}function o4(e,t,r,n){switch(G5(t)){case 1:var a=wN;break;case 4:a=kN;break;default:a=Pv}r=a.bind(null,t,r,e),a=void 0,!qg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Rp(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=qo(s),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}s=s.parentNode}}n=n.return}_5(function(){var u=i,f=wv(r),d=[];e:{var h=a4.get(e);if(h!==void 0){var p=Ov,m=e;switch(e){case"keypress":if(gd(r)===0)break e;case"keydown":case"keyup":p=RN;break;case"focusin":m="focus",p=Mp;break;case"focusout":m="blur",p=Mp;break;case"beforeblur":case"afterblur":p=Mp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=F1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=PN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=FN;break;case e4:case t4:case r4:p=NN;break;case n4:p=UN;break;case"scroll":p=SN;break;case"wheel":p=WN;break;case"copy":case"cut":case"paste":p=MN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=U1}var y=(t&4)!==0,w=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var g=u,v;g!==null;){v=g;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,x!==null&&(S=fu(g,x),S!=null&&y.push(vu(g,S,v)))),w)break;g=g.return}0<y.length&&(h=new p(h,m,null,r,f),d.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Kg&&(m=r.relatedTarget||r.fromElement)&&(qo(m)||m[Ii]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?qo(m):null,m!==null&&(w=_s(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=F1,S="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=U1,S="onPointerLeave",x="onPointerEnter",g="pointer"),w=p==null?h:Ys(p),v=m==null?h:Ys(m),h=new y(S,g+"leave",p,r,f),h.target=w,h.relatedTarget=v,S=null,qo(f)===u&&(y=new y(x,g+"enter",m,r,f),y.target=v,y.relatedTarget=w,S=y),w=S,p&&m)t:{for(y=p,x=m,g=0,v=y;v;v=Ls(v))g++;for(v=0,S=x;S;S=Ls(S))v++;for(;0<g-v;)y=Ls(y),g--;for(;0<v-g;)x=Ls(x),v--;for(;g--;){if(y===x||x!==null&&y===x.alternate)break t;y=Ls(y),x=Ls(x)}y=null}else y=null;p!==null&&J1(d,h,p,y,!1),m!==null&&w!==null&&J1(d,w,m,y,!0)}}e:{if(h=u?Ys(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var b=ZN;else if(V1(h))if(Y5)b=t_;else{b=JN;var k=QN}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=e_);if(b&&(b=b(e,u))){K5(d,b,r,f);break e}k&&k(e,h,u),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Gg(h,"number",h.value)}switch(k=u?Ys(u):window,e){case"focusin":(V1(k)||k.contentEditable==="true")&&(Xs=k,tm=u,qc=null);break;case"focusout":qc=tm=Xs=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,q1(d,r,f);break;case"selectionchange":if(a_)break;case"keydown":case"keyup":q1(d,r,f)}var C;if(_v)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Hs?H5(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(V5&&r.locale!=="ko"&&(Hs||P!=="onCompositionStart"?P==="onCompositionEnd"&&Hs&&(C=W5()):(oo=f,Cv="value"in oo?oo.value:oo.textContent,Hs=!0)),k=Td(u,P),0<k.length&&(P=new z1(P,e,null,r,f),d.push({event:P,listeners:k}),C?P.data=C:(C=X5(r),C!==null&&(P.data=C)))),(C=HN?XN(e,r):KN(e,r))&&(u=Td(u,"onBeforeInput"),0<u.length&&(f=new z1("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=C))}i4(d,t)})}function vu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Td(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=fu(e,r),i!=null&&n.unshift(vu(e,i,a)),i=fu(e,t),i!=null&&n.push(vu(e,i,a))),e=e.return}return n}function Ls(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function J1(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,a?(l=fu(r,i),l!=null&&o.unshift(vu(r,l,s))):a||(l=fu(r,i),l!=null&&o.push(vu(r,l,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var l_=/\r\n?/g,c_=/\u0000|\uFFFD/g;function eb(e){return(typeof e=="string"?e:""+e).replace(l_,`
`).replace(c_,"")}function Ff(e,t,r){if(t=eb(t),eb(e)!==t&&r)throw Error(fe(425))}function Ed(){}var nm=null,am=null;function im(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var om=typeof setTimeout=="function"?setTimeout:void 0,u_=typeof clearTimeout=="function"?clearTimeout:void 0,tb=typeof Promise=="function"?Promise:void 0,f_=typeof queueMicrotask=="function"?queueMicrotask:typeof tb<"u"?function(e){return tb.resolve(null).then(e).catch(d_)}:om;function d_(e){setTimeout(function(){throw e})}function Lp(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),pu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);pu(t)}function bo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),ri="__reactFiber$"+Ql,xu="__reactProps$"+Ql,Ii="__reactContainer$"+Ql,sm="__reactEvents$"+Ql,h_="__reactListeners$"+Ql,p_="__reactHandles$"+Ql;function qo(e){var t=e[ri];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ii]||r[ri]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=rb(e);e!==null;){if(r=e[ri])return r;e=rb(e)}return t}e=r,r=e.parentNode}return null}function hf(e){return e=e[ri]||e[Ii],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ys(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function fh(e){return e[xu]||null}var lm=[],qs=-1;function Mo(e){return{current:e}}function Jt(e){0>qs||(e.current=lm[qs],lm[qs]=null,qs--)}function Ht(e,t){qs++,lm[qs]=e.current,e.current=t}var No={},vn=Mo(No),Vn=Mo(!1),ds=No;function vl(e,t){var r=e.type.contextTypes;if(!r)return No;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Hn(e){return e=e.childContextTypes,e!=null}function $d(){Jt(Vn),Jt(vn)}function nb(e,t,r){if(vn.current!==No)throw Error(fe(168));Ht(vn,t),Ht(Vn,r)}function s4(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(fe(108,QO(e)||"Unknown",a));return fr({},r,n)}function Dd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||No,ds=vn.current,Ht(vn,e),Ht(Vn,Vn.current),!0}function ab(e,t,r){var n=e.stateNode;if(!n)throw Error(fe(169));r?(e=s4(e,t,ds),n.__reactInternalMemoizedMergedChildContext=e,Jt(Vn),Jt(vn),Ht(vn,e)):Jt(Vn),Ht(Vn,r)}var Si=null,dh=!1,Bp=!1;function l4(e){Si===null?Si=[e]:Si.push(e)}function g_(e){dh=!0,l4(e)}function Ao(){if(!Bp&&Si!==null){Bp=!0;var e=0,t=Mt;try{var r=Si;for(Mt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Si=null,dh=!1}catch(a){throw Si!==null&&(Si=Si.slice(e+1)),E5(kv,Ao),a}finally{Mt=t,Bp=!1}}return null}var Zs=[],Qs=0,Id=null,Rd=0,ba=[],wa=0,hs=null,ji=1,Pi="";function Vo(e,t){Zs[Qs++]=Rd,Zs[Qs++]=Id,Id=e,Rd=t}function c4(e,t,r){ba[wa++]=ji,ba[wa++]=Pi,ba[wa++]=hs,hs=e;var n=ji;e=Pi;var a=32-Ha(n)-1;n&=~(1<<a),r+=1;var i=32-Ha(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ji=1<<32-Ha(t)+a|r<<a|n,Pi=i+e}else ji=1<<i|r<<a|n,Pi=e}function Av(e){e.return!==null&&(Vo(e,1),c4(e,1,0))}function Tv(e){for(;e===Id;)Id=Zs[--Qs],Zs[Qs]=null,Rd=Zs[--Qs],Zs[Qs]=null;for(;e===hs;)hs=ba[--wa],ba[wa]=null,Pi=ba[--wa],ba[wa]=null,ji=ba[--wa],ba[wa]=null}var la=null,sa=null,nr=!1,Ua=null;function u4(e,t){var r=ka(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ib(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,la=e,sa=bo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,la=e,sa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hs!==null?{id:ji,overflow:Pi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ka(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,la=e,sa=null,!0):!1;default:return!1}}function cm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function um(e){if(nr){var t=sa;if(t){var r=t;if(!ib(e,t)){if(cm(e))throw Error(fe(418));t=bo(r.nextSibling);var n=la;t&&ib(e,t)?u4(n,r):(e.flags=e.flags&-4097|2,nr=!1,la=e)}}else{if(cm(e))throw Error(fe(418));e.flags=e.flags&-4097|2,nr=!1,la=e}}}function ob(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;la=e}function zf(e){if(e!==la)return!1;if(!nr)return ob(e),nr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!im(e.type,e.memoizedProps)),t&&(t=sa)){if(cm(e))throw f4(),Error(fe(418));for(;t;)u4(e,t),t=bo(t.nextSibling)}if(ob(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sa=bo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sa=null}}else sa=la?bo(e.stateNode.nextSibling):null;return!0}function f4(){for(var e=sa;e;)e=bo(e.nextSibling)}function xl(){sa=la=null,nr=!1}function Ev(e){Ua===null?Ua=[e]:Ua.push(e)}var m_=Ui.ReactCurrentBatchConfig;function Pc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(fe(309));var n=r.stateNode}if(!n)throw Error(fe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(fe(284));if(!r._owner)throw Error(fe(290,e))}return e}function Uf(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sb(e){var t=e._init;return t(e._payload)}function d4(e){function t(x,g){if(e){var v=x.deletions;v===null?(x.deletions=[g],x.flags|=16):v.push(g)}}function r(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function a(x,g){return x=jo(x,g),x.index=0,x.sibling=null,x}function i(x,g,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<g?(x.flags|=2,g):v):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function s(x,g,v,S){return g===null||g.tag!==6?(g=Hp(v,x.mode,S),g.return=x,g):(g=a(g,v),g.return=x,g)}function l(x,g,v,S){var b=v.type;return b===Vs?f(x,g,v.props.children,S,v.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===eo&&sb(b)===g.type)?(S=a(g,v.props),S.ref=Pc(x,g,v),S.return=x,S):(S=kd(v.type,v.key,v.props,null,x.mode,S),S.ref=Pc(x,g,v),S.return=x,S)}function u(x,g,v,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Xp(v,x.mode,S),g.return=x,g):(g=a(g,v.children||[]),g.return=x,g)}function f(x,g,v,S,b){return g===null||g.tag!==7?(g=ls(v,x.mode,S,b),g.return=x,g):(g=a(g,v),g.return=x,g)}function d(x,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Hp(""+g,x.mode,v),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Af:return v=kd(g.type,g.key,g.props,null,x.mode,v),v.ref=Pc(x,null,g),v.return=x,v;case Ws:return g=Xp(g,x.mode,v),g.return=x,g;case eo:var S=g._init;return d(x,S(g._payload),v)}if(zc(g)||bc(g))return g=ls(g,x.mode,v,null),g.return=x,g;Uf(x,g)}return null}function h(x,g,v,S){var b=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:s(x,g,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Af:return v.key===b?l(x,g,v,S):null;case Ws:return v.key===b?u(x,g,v,S):null;case eo:return b=v._init,h(x,g,b(v._payload),S)}if(zc(v)||bc(v))return b!==null?null:f(x,g,v,S,null);Uf(x,v)}return null}function p(x,g,v,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(v)||null,s(g,x,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Af:return x=x.get(S.key===null?v:S.key)||null,l(g,x,S,b);case Ws:return x=x.get(S.key===null?v:S.key)||null,u(g,x,S,b);case eo:var k=S._init;return p(x,g,v,k(S._payload),b)}if(zc(S)||bc(S))return x=x.get(v)||null,f(g,x,S,b,null);Uf(g,S)}return null}function m(x,g,v,S){for(var b=null,k=null,C=g,P=g=0,N=null;C!==null&&P<v.length;P++){C.index>P?(N=C,C=null):N=C.sibling;var A=h(x,C,v[P],S);if(A===null){C===null&&(C=N);break}e&&C&&A.alternate===null&&t(x,C),g=i(A,g,P),k===null?b=A:k.sibling=A,k=A,C=N}if(P===v.length)return r(x,C),nr&&Vo(x,P),b;if(C===null){for(;P<v.length;P++)C=d(x,v[P],S),C!==null&&(g=i(C,g,P),k===null?b=C:k.sibling=C,k=C);return nr&&Vo(x,P),b}for(C=n(x,C);P<v.length;P++)N=p(C,x,P,v[P],S),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?P:N.key),g=i(N,g,P),k===null?b=N:k.sibling=N,k=N);return e&&C.forEach(function(T){return t(x,T)}),nr&&Vo(x,P),b}function y(x,g,v,S){var b=bc(v);if(typeof b!="function")throw Error(fe(150));if(v=b.call(v),v==null)throw Error(fe(151));for(var k=b=null,C=g,P=g=0,N=null,A=v.next();C!==null&&!A.done;P++,A=v.next()){C.index>P?(N=C,C=null):N=C.sibling;var T=h(x,C,A.value,S);if(T===null){C===null&&(C=N);break}e&&C&&T.alternate===null&&t(x,C),g=i(T,g,P),k===null?b=T:k.sibling=T,k=T,C=N}if(A.done)return r(x,C),nr&&Vo(x,P),b;if(C===null){for(;!A.done;P++,A=v.next())A=d(x,A.value,S),A!==null&&(g=i(A,g,P),k===null?b=A:k.sibling=A,k=A);return nr&&Vo(x,P),b}for(C=n(x,C);!A.done;P++,A=v.next())A=p(C,x,P,A.value,S),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?P:A.key),g=i(A,g,P),k===null?b=A:k.sibling=A,k=A);return e&&C.forEach(function(O){return t(x,O)}),nr&&Vo(x,P),b}function w(x,g,v,S){if(typeof v=="object"&&v!==null&&v.type===Vs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Af:e:{for(var b=v.key,k=g;k!==null;){if(k.key===b){if(b=v.type,b===Vs){if(k.tag===7){r(x,k.sibling),g=a(k,v.props.children),g.return=x,x=g;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===eo&&sb(b)===k.type){r(x,k.sibling),g=a(k,v.props),g.ref=Pc(x,k,v),g.return=x,x=g;break e}r(x,k);break}else t(x,k);k=k.sibling}v.type===Vs?(g=ls(v.props.children,x.mode,S,v.key),g.return=x,x=g):(S=kd(v.type,v.key,v.props,null,x.mode,S),S.ref=Pc(x,g,v),S.return=x,x=S)}return o(x);case Ws:e:{for(k=v.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(x,g.sibling),g=a(g,v.children||[]),g.return=x,x=g;break e}else{r(x,g);break}else t(x,g);g=g.sibling}g=Xp(v,x.mode,S),g.return=x,x=g}return o(x);case eo:return k=v._init,w(x,g,k(v._payload),S)}if(zc(v))return m(x,g,v,S);if(bc(v))return y(x,g,v,S);Uf(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(x,g.sibling),g=a(g,v),g.return=x,x=g):(r(x,g),g=Hp(v,x.mode,S),g.return=x,x=g),o(x)):r(x,g)}return w}var bl=d4(!0),h4=d4(!1),Ld=Mo(null),Bd=null,Js=null,$v=null;function Dv(){$v=Js=Bd=null}function Iv(e){var t=Ld.current;Jt(Ld),e._currentValue=t}function fm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function cl(e,t){Bd=e,$v=Js=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gn=!0),e.firstContext=null)}function Oa(e){var t=e._currentValue;if($v!==e)if(e={context:e,memoizedValue:t,next:null},Js===null){if(Bd===null)throw Error(fe(308));Js=e,Bd.dependencies={lanes:0,firstContext:e}}else Js=Js.next=e;return t}var Zo=null;function Rv(e){Zo===null?Zo=[e]:Zo.push(e)}function p4(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Rv(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ri(e,n)}function Ri(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var to=!1;function Lv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ri(e,r)}return a=n.interleaved,a===null?(t.next=t,Rv(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ri(e,r)}function md(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Sv(e,r)}}function lb(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fd(e,t,r,n){var a=e.updateQueue;to=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,f=u=l=null,s=i;do{var h=s.lane,p=s.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,y=s;switch(h=t,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=fr({},d,h);break e;case 2:to=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=p,l=d):f=f.next=p,o|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;h=s,s=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);gs|=o,e.lanes=o,e.memoizedState=d}}function cb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(fe(191,a));a.call(n)}}}var pf={},oi=Mo(pf),bu=Mo(pf),wu=Mo(pf);function Qo(e){if(e===pf)throw Error(fe(174));return e}function Bv(e,t){switch(Ht(wu,t),Ht(bu,e),Ht(oi,pf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vg(t,e)}Jt(oi),Ht(oi,t)}function wl(){Jt(oi),Jt(bu),Jt(wu)}function m4(e){Qo(wu.current);var t=Qo(oi.current),r=Vg(t,e.type);t!==r&&(Ht(bu,e),Ht(oi,r))}function Fv(e){bu.current===e&&(Jt(oi),Jt(bu))}var cr=Mo(0);function zd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fp=[];function zv(){for(var e=0;e<Fp.length;e++)Fp[e]._workInProgressVersionPrimary=null;Fp.length=0}var yd=Ui.ReactCurrentDispatcher,zp=Ui.ReactCurrentBatchConfig,ps=0,ur=null,Ur=null,qr=null,Ud=!1,Zc=!1,ku=0,y_=0;function dn(){throw Error(fe(321))}function Uv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ka(e[r],t[r]))return!1;return!0}function Gv(e,t,r,n,a,i){if(ps=i,ur=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yd.current=e===null||e.memoizedState===null?w_:k_,e=r(n,a),Zc){i=0;do{if(Zc=!1,ku=0,25<=i)throw Error(fe(301));i+=1,qr=Ur=null,t.updateQueue=null,yd.current=S_,e=r(n,a)}while(Zc)}if(yd.current=Gd,t=Ur!==null&&Ur.next!==null,ps=0,qr=Ur=ur=null,Ud=!1,t)throw Error(fe(300));return e}function Wv(){var e=ku!==0;return ku=0,e}function ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?ur.memoizedState=qr=e:qr=qr.next=e,qr}function Na(){if(Ur===null){var e=ur.alternate;e=e!==null?e.memoizedState:null}else e=Ur.next;var t=qr===null?ur.memoizedState:qr.next;if(t!==null)qr=t,Ur=e;else{if(e===null)throw Error(fe(310));Ur=e,e={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},qr===null?ur.memoizedState=qr=e:qr=qr.next=e}return qr}function Su(e,t){return typeof t=="function"?t(e):t}function Up(e){var t=Na(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var n=Ur,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,l=null,u=i;do{var f=u.lane;if((ps&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,ur.lanes|=f,gs|=f}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=s,Ka(n,t.memoizedState)||(Gn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ur.lanes|=i,gs|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Gp(e){var t=Na(),r=t.queue;if(r===null)throw Error(fe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ka(i,t.memoizedState)||(Gn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function y4(){}function v4(e,t){var r=ur,n=Na(),a=t(),i=!Ka(n.memoizedState,a);if(i&&(n.memoizedState=a,Gn=!0),n=n.queue,Vv(w4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||qr!==null&&qr.memoizedState.tag&1){if(r.flags|=2048,ju(9,b4.bind(null,r,n,a,t),void 0,null),Qr===null)throw Error(fe(349));ps&30||x4(r,t,a)}return a}function x4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function b4(e,t,r,n){t.value=r,t.getSnapshot=n,k4(t)&&S4(e)}function w4(e,t,r){return r(function(){k4(t)&&S4(e)})}function k4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ka(e,r)}catch{return!0}}function S4(e){var t=Ri(e,1);t!==null&&Xa(t,e,1,-1)}function ub(e){var t=ti();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:e},t.queue=e,e=e.dispatch=b_.bind(null,ur,e),[t.memoizedState,e]}function ju(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function j4(){return Na().memoizedState}function vd(e,t,r,n){var a=ti();ur.flags|=e,a.memoizedState=ju(1|t,r,void 0,n===void 0?null:n)}function hh(e,t,r,n){var a=Na();n=n===void 0?null:n;var i=void 0;if(Ur!==null){var o=Ur.memoizedState;if(i=o.destroy,n!==null&&Uv(n,o.deps)){a.memoizedState=ju(t,r,i,n);return}}ur.flags|=e,a.memoizedState=ju(1|t,r,i,n)}function fb(e,t){return vd(8390656,8,e,t)}function Vv(e,t){return hh(2048,8,e,t)}function P4(e,t){return hh(4,2,e,t)}function C4(e,t){return hh(4,4,e,t)}function O4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function N4(e,t,r){return r=r!=null?r.concat([e]):null,hh(4,4,O4.bind(null,t,e),r)}function Hv(){}function _4(e,t){var r=Na();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Uv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function M4(e,t){var r=Na();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Uv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function A4(e,t,r){return ps&21?(Ka(r,t)||(r=I5(),ur.lanes|=r,gs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gn=!0),e.memoizedState=r)}function v_(e,t){var r=Mt;Mt=r!==0&&4>r?r:4,e(!0);var n=zp.transition;zp.transition={};try{e(!1),t()}finally{Mt=r,zp.transition=n}}function T4(){return Na().memoizedState}function x_(e,t,r){var n=So(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},E4(e))$4(t,r);else if(r=p4(e,t,r,n),r!==null){var a=$n();Xa(r,e,n,a),D4(r,t,n)}}function b_(e,t,r){var n=So(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(E4(e))$4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Ka(s,o)){var l=t.interleaved;l===null?(a.next=a,Rv(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=p4(e,t,a,n),r!==null&&(a=$n(),Xa(r,e,n,a),D4(r,t,n))}}function E4(e){var t=e.alternate;return e===ur||t!==null&&t===ur}function $4(e,t){Zc=Ud=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function D4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Sv(e,r)}}var Gd={readContext:Oa,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},w_={readContext:Oa,useCallback:function(e,t){return ti().memoizedState=[e,t===void 0?null:t],e},useContext:Oa,useEffect:fb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vd(4194308,4,O4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vd(4194308,4,e,t)},useInsertionEffect:function(e,t){return vd(4,2,e,t)},useMemo:function(e,t){var r=ti();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ti();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=x_.bind(null,ur,e),[n.memoizedState,e]},useRef:function(e){var t=ti();return e={current:e},t.memoizedState=e},useState:ub,useDebugValue:Hv,useDeferredValue:function(e){return ti().memoizedState=e},useTransition:function(){var e=ub(!1),t=e[0];return e=v_.bind(null,e[1]),ti().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ur,a=ti();if(nr){if(r===void 0)throw Error(fe(407));r=r()}else{if(r=t(),Qr===null)throw Error(fe(349));ps&30||x4(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,fb(w4.bind(null,n,i,e),[e]),n.flags|=2048,ju(9,b4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ti(),t=Qr.identifierPrefix;if(nr){var r=Pi,n=ji;r=(n&~(1<<32-Ha(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ku++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=y_++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},k_={readContext:Oa,useCallback:_4,useContext:Oa,useEffect:Vv,useImperativeHandle:N4,useInsertionEffect:P4,useLayoutEffect:C4,useMemo:M4,useReducer:Up,useRef:j4,useState:function(){return Up(Su)},useDebugValue:Hv,useDeferredValue:function(e){var t=Na();return A4(t,Ur.memoizedState,e)},useTransition:function(){var e=Up(Su)[0],t=Na().memoizedState;return[e,t]},useMutableSource:y4,useSyncExternalStore:v4,useId:T4,unstable_isNewReconciler:!1},S_={readContext:Oa,useCallback:_4,useContext:Oa,useEffect:Vv,useImperativeHandle:N4,useInsertionEffect:P4,useLayoutEffect:C4,useMemo:M4,useReducer:Gp,useRef:j4,useState:function(){return Gp(Su)},useDebugValue:Hv,useDeferredValue:function(e){var t=Na();return Ur===null?t.memoizedState=e:A4(t,Ur.memoizedState,e)},useTransition:function(){var e=Gp(Su)[0],t=Na().memoizedState;return[e,t]},useMutableSource:y4,useSyncExternalStore:v4,useId:T4,unstable_isNewReconciler:!1};function La(e,t){if(e&&e.defaultProps){t=fr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function dm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:fr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ph={isMounted:function(e){return(e=e._reactInternals)?_s(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$n(),a=So(e),i=_i(n,a);i.payload=t,r!=null&&(i.callback=r),t=wo(e,i,a),t!==null&&(Xa(t,e,a,n),md(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$n(),a=So(e),i=_i(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=wo(e,i,a),t!==null&&(Xa(t,e,a,n),md(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$n(),n=So(e),a=_i(r,n);a.tag=2,t!=null&&(a.callback=t),t=wo(e,a,n),t!==null&&(Xa(t,e,n,r),md(t,e,n))}};function db(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!mu(r,n)||!mu(a,i):!0}function I4(e,t,r){var n=!1,a=No,i=t.contextType;return typeof i=="object"&&i!==null?i=Oa(i):(a=Hn(t)?ds:vn.current,n=t.contextTypes,i=(n=n!=null)?vl(e,a):No),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ph,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function hb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ph.enqueueReplaceState(t,t.state,null)}function hm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Lv(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Oa(i):(i=Hn(t)?ds:vn.current,a.context=vl(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(dm(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ph.enqueueReplaceState(a,a.state,null),Fd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function kl(e,t){try{var r="",n=t;do r+=ZO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Wp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function pm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var j_=typeof WeakMap=="function"?WeakMap:Map;function R4(e,t,r){r=_i(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vd||(Vd=!0,jm=n),pm(e,t)},r}function L4(e,t,r){r=_i(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){pm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){pm(e,t),typeof n!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function pb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new j_;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=L_.bind(null,e,t,r),t.then(e,e))}function gb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mb(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_i(-1,1),t.tag=2,wo(r,t,1))),r.lanes|=1),e)}var P_=Ui.ReactCurrentOwner,Gn=!1;function Tn(e,t,r,n){t.child=e===null?h4(t,null,r,n):bl(t,e.child,r,n)}function yb(e,t,r,n,a){r=r.render;var i=t.ref;return cl(t,a),n=Gv(e,t,r,n,i,a),r=Wv(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Li(e,t,a)):(nr&&r&&Av(t),t.flags|=1,Tn(e,t,n,a),t.child)}function vb(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!ex(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,B4(e,t,i,n,a)):(e=kd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:mu,r(o,n)&&e.ref===t.ref)return Li(e,t,a)}return t.flags|=1,e=jo(i,n),e.ref=t.ref,e.return=t,t.child=e}function B4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(mu(i,n)&&e.ref===t.ref)if(Gn=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Gn=!0);else return t.lanes=e.lanes,Li(e,t,a)}return gm(e,t,r,n,a)}function F4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(tl,aa),aa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ht(tl,aa),aa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ht(tl,aa),aa|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ht(tl,aa),aa|=n;return Tn(e,t,a,r),t.child}function z4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function gm(e,t,r,n,a){var i=Hn(r)?ds:vn.current;return i=vl(t,i),cl(t,a),r=Gv(e,t,r,n,i,a),n=Wv(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Li(e,t,a)):(nr&&n&&Av(t),t.flags|=1,Tn(e,t,r,a),t.child)}function xb(e,t,r,n,a){if(Hn(r)){var i=!0;Dd(t)}else i=!1;if(cl(t,a),t.stateNode===null)xd(e,t),I4(t,r,n),hm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Oa(u):(u=Hn(r)?ds:vn.current,u=vl(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&hb(t,o,n,u),to=!1;var h=t.memoizedState;o.state=h,Fd(t,n,o,a),l=t.memoizedState,s!==n||h!==l||Vn.current||to?(typeof f=="function"&&(dm(t,r,f,n),l=t.memoizedState),(s=to||db(t,r,s,n,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,g4(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:La(t.type,s),o.props=u,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Oa(l):(l=Hn(r)?ds:vn.current,l=vl(t,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||h!==l)&&hb(t,o,n,l),to=!1,h=t.memoizedState,o.state=h,Fd(t,n,o,a);var m=t.memoizedState;s!==d||h!==m||Vn.current||to?(typeof p=="function"&&(dm(t,r,p,n),m=t.memoizedState),(u=to||db(t,r,u,n,h,m,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return mm(e,t,r,n,i,a)}function mm(e,t,r,n,a,i){z4(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&ab(t,r,!1),Li(e,t,i);n=t.stateNode,P_.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=bl(t,e.child,null,i),t.child=bl(t,null,s,i)):Tn(e,t,s,i),t.memoizedState=n.state,a&&ab(t,r,!0),t.child}function U4(e){var t=e.stateNode;t.pendingContext?nb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nb(e,t.context,!1),Bv(e,t.containerInfo)}function bb(e,t,r,n,a){return xl(),Ev(a),t.flags|=256,Tn(e,t,r,n),t.child}var ym={dehydrated:null,treeContext:null,retryLane:0};function vm(e){return{baseLanes:e,cachePool:null,transitions:null}}function G4(e,t,r){var n=t.pendingProps,a=cr.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ht(cr,a&1),e===null)return um(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yh(o,n,0,null),e=ls(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=vm(r),t.memoizedState=ym,e):Xv(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return C_(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=jo(a,l),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=jo(s,i):(i=ls(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?vm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ym,n}return i=e.child,e=i.sibling,n=jo(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Xv(e,t){return t=yh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gf(e,t,r,n){return n!==null&&Ev(n),bl(t,e.child,null,r),e=Xv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function C_(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Wp(Error(fe(422))),Gf(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=yh({mode:"visible",children:n.children},a,0,null),i=ls(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&bl(t,e.child,null,o),t.child.memoizedState=vm(o),t.memoizedState=ym,i);if(!(t.mode&1))return Gf(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(fe(419)),n=Wp(i,n,void 0),Gf(e,t,o,n)}if(s=(o&e.childLanes)!==0,Gn||s){if(n=Qr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ri(e,a),Xa(n,e,a,-1))}return Jv(),n=Wp(Error(fe(421))),Gf(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=B_.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sa=bo(a.nextSibling),la=t,nr=!0,Ua=null,e!==null&&(ba[wa++]=ji,ba[wa++]=Pi,ba[wa++]=hs,ji=e.id,Pi=e.overflow,hs=t),t=Xv(t,n.children),t.flags|=4096,t)}function wb(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fm(e.return,t,r)}function Vp(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function W4(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Tn(e,t,n.children,r),n=cr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wb(e,r,t);else if(e.tag===19)wb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ht(cr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&zd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Vp(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&zd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Vp(t,!0,r,null,i);break;case"together":Vp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Li(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,r=jo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=jo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function O_(e,t,r){switch(t.tag){case 3:U4(t),xl();break;case 5:m4(t);break;case 1:Hn(t.type)&&Dd(t);break;case 4:Bv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ht(Ld,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ht(cr,cr.current&1),t.flags|=128,null):r&t.child.childLanes?G4(e,t,r):(Ht(cr,cr.current&1),e=Li(e,t,r),e!==null?e.sibling:null);Ht(cr,cr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return W4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ht(cr,cr.current),n)break;return null;case 22:case 23:return t.lanes=0,F4(e,t,r)}return Li(e,t,r)}var V4,xm,H4,X4;V4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xm=function(){};H4=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Qo(oi.current);var i=null;switch(r){case"input":a=zg(e,a),n=zg(e,n),i=[];break;case"select":a=fr({},a,{value:void 0}),n=fr({},n,{value:void 0}),i=[];break;case"textarea":a=Wg(e,a),n=Wg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ed)}Hg(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qt("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};X4=function(e,t,r,n){r!==n&&(t.flags|=4)};function Cc(e,t){if(!nr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function N_(e,t,r){var n=t.pendingProps;switch(Tv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(t),null;case 1:return Hn(t.type)&&$d(),hn(t),null;case 3:return n=t.stateNode,wl(),Jt(Vn),Jt(vn),zv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(zf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ua!==null&&(Om(Ua),Ua=null))),xm(e,t),hn(t),null;case 5:Fv(t);var a=Qo(wu.current);if(r=t.type,e!==null&&t.stateNode!=null)H4(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(fe(166));return hn(t),null}if(e=Qo(oi.current),zf(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ri]=t,n[xu]=i,e=(t.mode&1)!==0,r){case"dialog":qt("cancel",n),qt("close",n);break;case"iframe":case"object":case"embed":qt("load",n);break;case"video":case"audio":for(a=0;a<Gc.length;a++)qt(Gc[a],n);break;case"source":qt("error",n);break;case"img":case"image":case"link":qt("error",n),qt("load",n);break;case"details":qt("toggle",n);break;case"input":M1(n,i),qt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},qt("invalid",n);break;case"textarea":T1(n,i),qt("invalid",n)}Hg(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&Ff(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Ff(n.textContent,s,e),a=["children",""+s]):cu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&qt("scroll",n)}switch(r){case"input":Tf(n),A1(n,i,!0);break;case"textarea":Tf(n),E1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ed)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=w5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ri]=t,e[xu]=n,V4(e,t,!1,!1),t.stateNode=e;e:{switch(o=Xg(r,n),r){case"dialog":qt("cancel",e),qt("close",e),a=n;break;case"iframe":case"object":case"embed":qt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Gc.length;a++)qt(Gc[a],e);a=n;break;case"source":qt("error",e),a=n;break;case"img":case"image":case"link":qt("error",e),qt("load",e),a=n;break;case"details":qt("toggle",e),a=n;break;case"input":M1(e,n),a=zg(e,n),qt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=fr({},n,{value:void 0}),qt("invalid",e);break;case"textarea":T1(e,n),a=Wg(e,n),qt("invalid",e);break;default:a=n}Hg(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?j5(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&k5(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&uu(e,l):typeof l=="number"&&uu(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&qt("scroll",e):l!=null&&yv(e,i,l,o))}switch(r){case"input":Tf(e),A1(e,n,!1);break;case"textarea":Tf(e),E1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Oo(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?il(e,!!n.multiple,i,!1):n.defaultValue!=null&&il(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ed)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hn(t),null;case 6:if(e&&t.stateNode!=null)X4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(fe(166));if(r=Qo(wu.current),Qo(oi.current),zf(t)){if(n=t.stateNode,r=t.memoizedProps,n[ri]=t,(i=n.nodeValue!==r)&&(e=la,e!==null))switch(e.tag){case 3:Ff(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ff(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ri]=t,t.stateNode=n}return hn(t),null;case 13:if(Jt(cr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nr&&sa!==null&&t.mode&1&&!(t.flags&128))f4(),xl(),t.flags|=98560,i=!1;else if(i=zf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(fe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[ri]=t}else xl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hn(t),i=!1}else Ua!==null&&(Om(Ua),Ua=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||cr.current&1?Gr===0&&(Gr=3):Jv())),t.updateQueue!==null&&(t.flags|=4),hn(t),null);case 4:return wl(),xm(e,t),e===null&&yu(t.stateNode.containerInfo),hn(t),null;case 10:return Iv(t.type._context),hn(t),null;case 17:return Hn(t.type)&&$d(),hn(t),null;case 19:if(Jt(cr),i=t.memoizedState,i===null)return hn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Cc(i,!1);else{if(Gr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=zd(e),o!==null){for(t.flags|=128,Cc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ht(cr,cr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Cr()>Sl&&(t.flags|=128,n=!0,Cc(i,!1),t.lanes=4194304)}else{if(!n)if(e=zd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nr)return hn(t),null}else 2*Cr()-i.renderingStartTime>Sl&&r!==1073741824&&(t.flags|=128,n=!0,Cc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Cr(),t.sibling=null,r=cr.current,Ht(cr,n?r&1|2:r&1),t):(hn(t),null);case 22:case 23:return Qv(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?aa&1073741824&&(hn(t),t.subtreeFlags&6&&(t.flags|=8192)):hn(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function __(e,t){switch(Tv(t),t.tag){case 1:return Hn(t.type)&&$d(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wl(),Jt(Vn),Jt(vn),zv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fv(t),null;case 13:if(Jt(cr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(cr),null;case 4:return wl(),null;case 10:return Iv(t.type._context),null;case 22:case 23:return Qv(),null;case 24:return null;default:return null}}var Wf=!1,mn=!1,M_=typeof WeakSet=="function"?WeakSet:Set,Se=null;function el(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yr(e,t,n)}else r.current=null}function bm(e,t,r){try{r()}catch(n){yr(e,t,n)}}var kb=!1;function A_(e,t){if(nm=Md,e=Q5(),Mv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===a&&(s=o),h===i&&++f===n&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(am={focusedElem:e,selectionRange:r},Md=!1,Se=t;Se!==null;)if(t=Se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Se=e;else for(;Se!==null;){t=Se;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:La(t.type,y),w);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(S){yr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Se=e;break}Se=t.return}return m=kb,kb=!1,m}function Qc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&bm(t,r,i)}a=a.next}while(a!==n)}}function gh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function wm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function K4(e){var t=e.alternate;t!==null&&(e.alternate=null,K4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ri],delete t[xu],delete t[sm],delete t[h_],delete t[p_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Y4(e){return e.tag===5||e.tag===3||e.tag===4}function Sb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Y4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function km(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ed));else if(n!==4&&(e=e.child,e!==null))for(km(e,t,r),e=e.sibling;e!==null;)km(e,t,r),e=e.sibling}function Sm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sm(e,t,r),e=e.sibling;e!==null;)Sm(e,t,r),e=e.sibling}var an=null,Ba=!1;function Qi(e,t,r){for(r=r.child;r!==null;)q4(e,t,r),r=r.sibling}function q4(e,t,r){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(sh,r)}catch{}switch(r.tag){case 5:mn||el(r,t);case 6:var n=an,a=Ba;an=null,Qi(e,t,r),an=n,Ba=a,an!==null&&(Ba?(e=an,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):an.removeChild(r.stateNode));break;case 18:an!==null&&(Ba?(e=an,r=r.stateNode,e.nodeType===8?Lp(e.parentNode,r):e.nodeType===1&&Lp(e,r),pu(e)):Lp(an,r.stateNode));break;case 4:n=an,a=Ba,an=r.stateNode.containerInfo,Ba=!0,Qi(e,t,r),an=n,Ba=a;break;case 0:case 11:case 14:case 15:if(!mn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bm(r,t,o),a=a.next}while(a!==n)}Qi(e,t,r);break;case 1:if(!mn&&(el(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){yr(r,t,s)}Qi(e,t,r);break;case 21:Qi(e,t,r);break;case 22:r.mode&1?(mn=(n=mn)||r.memoizedState!==null,Qi(e,t,r),mn=n):Qi(e,t,r);break;default:Qi(e,t,r)}}function jb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new M_),t.forEach(function(n){var a=F_.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ia(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:an=s.stateNode,Ba=!1;break e;case 3:an=s.stateNode.containerInfo,Ba=!0;break e;case 4:an=s.stateNode.containerInfo,Ba=!0;break e}s=s.return}if(an===null)throw Error(fe(160));q4(i,o,a),an=null,Ba=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){yr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Z4(t,e),t=t.sibling}function Z4(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ia(t,e),ei(e),n&4){try{Qc(3,e,e.return),gh(3,e)}catch(y){yr(e,e.return,y)}try{Qc(5,e,e.return)}catch(y){yr(e,e.return,y)}}break;case 1:Ia(t,e),ei(e),n&512&&r!==null&&el(r,r.return);break;case 5:if(Ia(t,e),ei(e),n&512&&r!==null&&el(r,r.return),e.flags&32){var a=e.stateNode;try{uu(a,"")}catch(y){yr(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&x5(a,i),Xg(s,o);var u=Xg(s,i);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?j5(a,d):f==="dangerouslySetInnerHTML"?k5(a,d):f==="children"?uu(a,d):yv(a,f,d,u)}switch(s){case"input":Ug(a,i);break;case"textarea":b5(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?il(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?il(a,!!i.multiple,i.defaultValue,!0):il(a,!!i.multiple,i.multiple?[]:"",!1))}a[xu]=i}catch(y){yr(e,e.return,y)}}break;case 6:if(Ia(t,e),ei(e),n&4){if(e.stateNode===null)throw Error(fe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){yr(e,e.return,y)}}break;case 3:if(Ia(t,e),ei(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pu(t.containerInfo)}catch(y){yr(e,e.return,y)}break;case 4:Ia(t,e),ei(e);break;case 13:Ia(t,e),ei(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(qv=Cr())),n&4&&jb(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(mn=(u=mn)||f,Ia(t,e),mn=u):Ia(t,e),ei(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Se=e,f=e.child;f!==null;){for(d=Se=f;Se!==null;){switch(h=Se,p=h.child,h.tag){case 0:case 11:case 14:case 15:Qc(4,h,h.return);break;case 1:el(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){yr(n,r,y)}}break;case 5:el(h,h.return);break;case 22:if(h.memoizedState!==null){Cb(d);continue}}p!==null?(p.return=h,Se=p):Cb(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=S5("display",o))}catch(y){yr(e,e.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){yr(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ia(t,e),ei(e),n&4&&jb(e);break;case 21:break;default:Ia(t,e),ei(e)}}function ei(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Y4(r)){var n=r;break e}r=r.return}throw Error(fe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(uu(a,""),n.flags&=-33);var i=Sb(e);Sm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=Sb(e);km(e,s,o);break;default:throw Error(fe(161))}}catch(l){yr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function T_(e,t,r){Se=e,Q4(e)}function Q4(e,t,r){for(var n=(e.mode&1)!==0;Se!==null;){var a=Se,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Wf;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||mn;s=Wf;var u=mn;if(Wf=o,(mn=l)&&!u)for(Se=a;Se!==null;)o=Se,l=o.child,o.tag===22&&o.memoizedState!==null?Ob(a):l!==null?(l.return=o,Se=l):Ob(a);for(;i!==null;)Se=i,Q4(i),i=i.sibling;Se=a,Wf=s,mn=u}Pb(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Se=i):Pb(e)}}function Pb(e){for(;Se!==null;){var t=Se;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mn||gh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!mn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:La(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cb(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}cb(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&pu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}mn||t.flags&512&&wm(t)}catch(h){yr(t,t.return,h)}}if(t===e){Se=null;break}if(r=t.sibling,r!==null){r.return=t.return,Se=r;break}Se=t.return}}function Cb(e){for(;Se!==null;){var t=Se;if(t===e){Se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Se=r;break}Se=t.return}}function Ob(e){for(;Se!==null;){var t=Se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{gh(4,t)}catch(l){yr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){yr(t,a,l)}}var i=t.return;try{wm(t)}catch(l){yr(t,i,l)}break;case 5:var o=t.return;try{wm(t)}catch(l){yr(t,o,l)}}}catch(l){yr(t,t.return,l)}if(t===e){Se=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Se=s;break}Se=t.return}}var E_=Math.ceil,Wd=Ui.ReactCurrentDispatcher,Kv=Ui.ReactCurrentOwner,Pa=Ui.ReactCurrentBatchConfig,pt=0,Qr=null,$r=null,ln=0,aa=0,tl=Mo(0),Gr=0,Pu=null,gs=0,mh=0,Yv=0,Jc=null,zn=null,qv=0,Sl=1/0,ki=null,Vd=!1,jm=null,ko=null,Vf=!1,so=null,Hd=0,eu=0,Pm=null,bd=-1,wd=0;function $n(){return pt&6?Cr():bd!==-1?bd:bd=Cr()}function So(e){return e.mode&1?pt&2&&ln!==0?ln&-ln:m_.transition!==null?(wd===0&&(wd=I5()),wd):(e=Mt,e!==0||(e=window.event,e=e===void 0?16:G5(e.type)),e):1}function Xa(e,t,r,n){if(50<eu)throw eu=0,Pm=null,Error(fe(185));ff(e,r,n),(!(pt&2)||e!==Qr)&&(e===Qr&&(!(pt&2)&&(mh|=r),Gr===4&&ao(e,ln)),Xn(e,n),r===1&&pt===0&&!(t.mode&1)&&(Sl=Cr()+500,dh&&Ao()))}function Xn(e,t){var r=e.callbackNode;mN(e,t);var n=_d(e,e===Qr?ln:0);if(n===0)r!==null&&I1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&I1(r),t===1)e.tag===0?g_(Nb.bind(null,e)):l4(Nb.bind(null,e)),f_(function(){!(pt&6)&&Ao()}),r=null;else{switch(R5(n)){case 1:r=kv;break;case 4:r=$5;break;case 16:r=Nd;break;case 536870912:r=D5;break;default:r=Nd}r=o3(r,J4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function J4(e,t){if(bd=-1,wd=0,pt&6)throw Error(fe(327));var r=e.callbackNode;if(ul()&&e.callbackNode!==r)return null;var n=_d(e,e===Qr?ln:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Xd(e,n);else{t=n;var a=pt;pt|=2;var i=t3();(Qr!==e||ln!==t)&&(ki=null,Sl=Cr()+500,ss(e,t));do try{I_();break}catch(s){e3(e,s)}while(!0);Dv(),Wd.current=i,pt=a,$r!==null?t=0:(Qr=null,ln=0,t=Gr)}if(t!==0){if(t===2&&(a=Qg(e),a!==0&&(n=a,t=Cm(e,a))),t===1)throw r=Pu,ss(e,0),ao(e,n),Xn(e,Cr()),r;if(t===6)ao(e,n);else{if(a=e.current.alternate,!(n&30)&&!$_(a)&&(t=Xd(e,n),t===2&&(i=Qg(e),i!==0&&(n=i,t=Cm(e,i))),t===1))throw r=Pu,ss(e,0),ao(e,n),Xn(e,Cr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(fe(345));case 2:Ho(e,zn,ki);break;case 3:if(ao(e,n),(n&130023424)===n&&(t=qv+500-Cr(),10<t)){if(_d(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){$n(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=om(Ho.bind(null,e,zn,ki),t);break}Ho(e,zn,ki);break;case 4:if(ao(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ha(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Cr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*E_(n/1960))-n,10<n){e.timeoutHandle=om(Ho.bind(null,e,zn,ki),n);break}Ho(e,zn,ki);break;case 5:Ho(e,zn,ki);break;default:throw Error(fe(329))}}}return Xn(e,Cr()),e.callbackNode===r?J4.bind(null,e):null}function Cm(e,t){var r=Jc;return e.current.memoizedState.isDehydrated&&(ss(e,t).flags|=256),e=Xd(e,t),e!==2&&(t=zn,zn=r,t!==null&&Om(t)),e}function Om(e){zn===null?zn=e:zn.push.apply(zn,e)}function $_(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ka(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ao(e,t){for(t&=~Yv,t&=~mh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ha(t),n=1<<r;e[r]=-1,t&=~n}}function Nb(e){if(pt&6)throw Error(fe(327));ul();var t=_d(e,0);if(!(t&1))return Xn(e,Cr()),null;var r=Xd(e,t);if(e.tag!==0&&r===2){var n=Qg(e);n!==0&&(t=n,r=Cm(e,n))}if(r===1)throw r=Pu,ss(e,0),ao(e,t),Xn(e,Cr()),r;if(r===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ho(e,zn,ki),Xn(e,Cr()),null}function Zv(e,t){var r=pt;pt|=1;try{return e(t)}finally{pt=r,pt===0&&(Sl=Cr()+500,dh&&Ao())}}function ms(e){so!==null&&so.tag===0&&!(pt&6)&&ul();var t=pt;pt|=1;var r=Pa.transition,n=Mt;try{if(Pa.transition=null,Mt=1,e)return e()}finally{Mt=n,Pa.transition=r,pt=t,!(pt&6)&&Ao()}}function Qv(){aa=tl.current,Jt(tl)}function ss(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,u_(r)),$r!==null)for(r=$r.return;r!==null;){var n=r;switch(Tv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$d();break;case 3:wl(),Jt(Vn),Jt(vn),zv();break;case 5:Fv(n);break;case 4:wl();break;case 13:Jt(cr);break;case 19:Jt(cr);break;case 10:Iv(n.type._context);break;case 22:case 23:Qv()}r=r.return}if(Qr=e,$r=e=jo(e.current,null),ln=aa=t,Gr=0,Pu=null,Yv=mh=gs=0,zn=Jc=null,Zo!==null){for(t=0;t<Zo.length;t++)if(r=Zo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Zo=null}return e}function e3(e,t){do{var r=$r;try{if(Dv(),yd.current=Gd,Ud){for(var n=ur.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ud=!1}if(ps=0,qr=Ur=ur=null,Zc=!1,ku=0,Kv.current=null,r===null||r.return===null){Gr=1,Pu=t,$r=null;break}e:{var i=e,o=r.return,s=r,l=t;if(t=ln,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gb(o);if(p!==null){p.flags&=-257,mb(p,o,s,i,t),p.mode&1&&pb(i,u,t),t=p,l=u;var m=t.updateQueue;if(m===null){var y=new Set;y.add(l),t.updateQueue=y}else m.add(l);break e}else{if(!(t&1)){pb(i,u,t),Jv();break e}l=Error(fe(426))}}else if(nr&&s.mode&1){var w=gb(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),mb(w,o,s,i,t),Ev(kl(l,s));break e}}i=l=kl(l,s),Gr!==4&&(Gr=2),Jc===null?Jc=[i]:Jc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=R4(i,l,t);lb(i,x);break e;case 1:s=l;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ko===null||!ko.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=L4(i,s,t);lb(i,S);break e}}i=i.return}while(i!==null)}n3(r)}catch(b){t=b,$r===r&&r!==null&&($r=r=r.return);continue}break}while(!0)}function t3(){var e=Wd.current;return Wd.current=Gd,e===null?Gd:e}function Jv(){(Gr===0||Gr===3||Gr===2)&&(Gr=4),Qr===null||!(gs&268435455)&&!(mh&268435455)||ao(Qr,ln)}function Xd(e,t){var r=pt;pt|=2;var n=t3();(Qr!==e||ln!==t)&&(ki=null,ss(e,t));do try{D_();break}catch(a){e3(e,a)}while(!0);if(Dv(),pt=r,Wd.current=n,$r!==null)throw Error(fe(261));return Qr=null,ln=0,Gr}function D_(){for(;$r!==null;)r3($r)}function I_(){for(;$r!==null&&!sN();)r3($r)}function r3(e){var t=i3(e.alternate,e,aa);e.memoizedProps=e.pendingProps,t===null?n3(e):$r=t,Kv.current=null}function n3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=__(r,t),r!==null){r.flags&=32767,$r=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gr=6,$r=null;return}}else if(r=N_(r,t,aa),r!==null){$r=r;return}if(t=t.sibling,t!==null){$r=t;return}$r=t=e}while(t!==null);Gr===0&&(Gr=5)}function Ho(e,t,r){var n=Mt,a=Pa.transition;try{Pa.transition=null,Mt=1,R_(e,t,r,n)}finally{Pa.transition=a,Mt=n}return null}function R_(e,t,r,n){do ul();while(so!==null);if(pt&6)throw Error(fe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(yN(e,i),e===Qr&&($r=Qr=null,ln=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vf||(Vf=!0,o3(Nd,function(){return ul(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Pa.transition,Pa.transition=null;var o=Mt;Mt=1;var s=pt;pt|=4,Kv.current=null,A_(e,r),Z4(r,e),n_(am),Md=!!nm,am=nm=null,e.current=r,T_(r),lN(),pt=s,Mt=o,Pa.transition=i}else e.current=r;if(Vf&&(Vf=!1,so=e,Hd=a),i=e.pendingLanes,i===0&&(ko=null),fN(r.stateNode),Xn(e,Cr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Vd)throw Vd=!1,e=jm,jm=null,e;return Hd&1&&e.tag!==0&&ul(),i=e.pendingLanes,i&1?e===Pm?eu++:(eu=0,Pm=e):eu=0,Ao(),null}function ul(){if(so!==null){var e=R5(Hd),t=Pa.transition,r=Mt;try{if(Pa.transition=null,Mt=16>e?16:e,so===null)var n=!1;else{if(e=so,so=null,Hd=0,pt&6)throw Error(fe(331));var a=pt;for(pt|=4,Se=e.current;Se!==null;){var i=Se,o=i.child;if(Se.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Se=u;Se!==null;){var f=Se;switch(f.tag){case 0:case 11:case 15:Qc(8,f,i)}var d=f.child;if(d!==null)d.return=f,Se=d;else for(;Se!==null;){f=Se;var h=f.sibling,p=f.return;if(K4(f),f===u){Se=null;break}if(h!==null){h.return=p,Se=h;break}Se=p}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Se=o;else e:for(;Se!==null;){if(i=Se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Se=x;break e}Se=i.return}}var g=e.current;for(Se=g;Se!==null;){o=Se;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Se=v;else e:for(o=g;Se!==null;){if(s=Se,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:gh(9,s)}}catch(b){yr(s,s.return,b)}if(s===o){Se=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Se=S;break e}Se=s.return}}if(pt=a,Ao(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(sh,e)}catch{}n=!0}return n}finally{Mt=r,Pa.transition=t}}return!1}function _b(e,t,r){t=kl(r,t),t=R4(e,t,1),e=wo(e,t,1),t=$n(),e!==null&&(ff(e,1,t),Xn(e,t))}function yr(e,t,r){if(e.tag===3)_b(e,e,r);else for(;t!==null;){if(t.tag===3){_b(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ko===null||!ko.has(n))){e=kl(r,e),e=L4(t,e,1),t=wo(t,e,1),e=$n(),t!==null&&(ff(t,1,e),Xn(t,e));break}}t=t.return}}function L_(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$n(),e.pingedLanes|=e.suspendedLanes&r,Qr===e&&(ln&r)===r&&(Gr===4||Gr===3&&(ln&130023424)===ln&&500>Cr()-qv?ss(e,0):Yv|=r),Xn(e,t)}function a3(e,t){t===0&&(e.mode&1?(t=Df,Df<<=1,!(Df&130023424)&&(Df=4194304)):t=1);var r=$n();e=Ri(e,t),e!==null&&(ff(e,t,r),Xn(e,r))}function B_(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),a3(e,r)}function F_(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(fe(314))}n!==null&&n.delete(t),a3(e,r)}var i3;i3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vn.current)Gn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Gn=!1,O_(e,t,r);Gn=!!(e.flags&131072)}else Gn=!1,nr&&t.flags&1048576&&c4(t,Rd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;xd(e,t),e=t.pendingProps;var a=vl(t,vn.current);cl(t,r),a=Gv(null,t,n,e,a,r);var i=Wv();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hn(n)?(i=!0,Dd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Lv(t),a.updater=ph,t.stateNode=a,a._reactInternals=t,hm(t,n,e,r),t=mm(null,t,n,!0,i,r)):(t.tag=0,nr&&i&&Av(t),Tn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(xd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=U_(n),e=La(n,e),a){case 0:t=gm(null,t,n,e,r);break e;case 1:t=xb(null,t,n,e,r);break e;case 11:t=yb(null,t,n,e,r);break e;case 14:t=vb(null,t,n,La(n.type,e),r);break e}throw Error(fe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:La(n,a),gm(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:La(n,a),xb(e,t,n,a,r);case 3:e:{if(U4(t),e===null)throw Error(fe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,g4(e,t),Fd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=kl(Error(fe(423)),t),t=bb(e,t,n,r,a);break e}else if(n!==a){a=kl(Error(fe(424)),t),t=bb(e,t,n,r,a);break e}else for(sa=bo(t.stateNode.containerInfo.firstChild),la=t,nr=!0,Ua=null,r=h4(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xl(),n===a){t=Li(e,t,r);break e}Tn(e,t,n,r)}t=t.child}return t;case 5:return m4(t),e===null&&um(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,im(n,a)?o=null:i!==null&&im(n,i)&&(t.flags|=32),z4(e,t),Tn(e,t,o,r),t.child;case 6:return e===null&&um(t),null;case 13:return G4(e,t,r);case 4:return Bv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=bl(t,null,n,r):Tn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:La(n,a),yb(e,t,n,a,r);case 7:return Tn(e,t,t.pendingProps,r),t.child;case 8:return Tn(e,t,t.pendingProps.children,r),t.child;case 12:return Tn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ht(Ld,n._currentValue),n._currentValue=o,i!==null)if(Ka(i.value,o)){if(i.children===a.children&&!Vn.current){t=Li(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=_i(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),fm(i.return,r,t),s.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),fm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,cl(t,r),a=Oa(a),n=n(a),t.flags|=1,Tn(e,t,n,r),t.child;case 14:return n=t.type,a=La(n,t.pendingProps),a=La(n.type,a),vb(e,t,n,a,r);case 15:return B4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:La(n,a),xd(e,t),t.tag=1,Hn(n)?(e=!0,Dd(t)):e=!1,cl(t,r),I4(t,n,a),hm(t,n,a,r),mm(null,t,n,!0,e,r);case 19:return W4(e,t,r);case 22:return F4(e,t,r)}throw Error(fe(156,t.tag))};function o3(e,t){return E5(e,t)}function z_(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(e,t,r,n){return new z_(e,t,r,n)}function ex(e){return e=e.prototype,!(!e||!e.isReactComponent)}function U_(e){if(typeof e=="function")return ex(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xv)return 11;if(e===bv)return 14}return 2}function jo(e,t){var r=e.alternate;return r===null?(r=ka(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function kd(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")ex(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Vs:return ls(r.children,a,i,t);case vv:o=8,a|=8;break;case Rg:return e=ka(12,r,t,a|2),e.elementType=Rg,e.lanes=i,e;case Lg:return e=ka(13,r,t,a),e.elementType=Lg,e.lanes=i,e;case Bg:return e=ka(19,r,t,a),e.elementType=Bg,e.lanes=i,e;case m5:return yh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p5:o=10;break e;case g5:o=9;break e;case xv:o=11;break e;case bv:o=14;break e;case eo:o=16,n=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=ka(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ls(e,t,r,n){return e=ka(7,e,n,t),e.lanes=r,e}function yh(e,t,r,n){return e=ka(22,e,n,t),e.elementType=m5,e.lanes=r,e.stateNode={isHidden:!1},e}function Hp(e,t,r){return e=ka(6,e,null,t),e.lanes=r,e}function Xp(e,t,r){return t=ka(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function G_(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Op(0),this.expirationTimes=Op(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Op(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function tx(e,t,r,n,a,i,o,s,l){return e=new G_(e,t,r,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ka(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lv(i),e}function W_(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function s3(e){if(!e)return No;e=e._reactInternals;e:{if(_s(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var r=e.type;if(Hn(r))return s4(e,r,t)}return t}function l3(e,t,r,n,a,i,o,s,l){return e=tx(r,n,!0,e,a,i,o,s,l),e.context=s3(null),r=e.current,n=$n(),a=So(r),i=_i(n,a),i.callback=t??null,wo(r,i,a),e.current.lanes=a,ff(e,a,n),Xn(e,n),e}function vh(e,t,r,n){var a=t.current,i=$n(),o=So(a);return r=s3(r),t.context===null?t.context=r:t.pendingContext=r,t=_i(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=wo(a,t,o),e!==null&&(Xa(e,a,o,i),md(e,a,o)),o}function Kd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Mb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function rx(e,t){Mb(e,t),(e=e.alternate)&&Mb(e,t)}function V_(){return null}var c3=typeof reportError=="function"?reportError:function(e){console.error(e)};function nx(e){this._internalRoot=e}xh.prototype.render=nx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));vh(e,t,null,null)};xh.prototype.unmount=nx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ms(function(){vh(null,e,null,null)}),t[Ii]=null}};function xh(e){this._internalRoot=e}xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=F5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<no.length&&t!==0&&t<no[r].priority;r++);no.splice(r,0,e),r===0&&U5(e)}};function ax(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ab(){}function H_(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Kd(o);i.call(u)}}var o=l3(t,n,e,0,null,!1,!1,"",Ab);return e._reactRootContainer=o,e[Ii]=o.current,yu(e.nodeType===8?e.parentNode:e),ms(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=Kd(l);s.call(u)}}var l=tx(e,0,!1,null,null,!1,!1,"",Ab);return e._reactRootContainer=l,e[Ii]=l.current,yu(e.nodeType===8?e.parentNode:e),ms(function(){vh(t,l,r,n)}),l}function wh(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Kd(o);s.call(l)}}vh(t,o,e,a)}else o=H_(r,t,e,a,n);return Kd(o)}L5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Uc(t.pendingLanes);r!==0&&(Sv(t,r|1),Xn(t,Cr()),!(pt&6)&&(Sl=Cr()+500,Ao()))}break;case 13:ms(function(){var n=Ri(e,1);if(n!==null){var a=$n();Xa(n,e,1,a)}}),rx(e,1)}};jv=function(e){if(e.tag===13){var t=Ri(e,134217728);if(t!==null){var r=$n();Xa(t,e,134217728,r)}rx(e,134217728)}};B5=function(e){if(e.tag===13){var t=So(e),r=Ri(e,t);if(r!==null){var n=$n();Xa(r,e,t,n)}rx(e,t)}};F5=function(){return Mt};z5=function(e,t){var r=Mt;try{return Mt=e,t()}finally{Mt=r}};Yg=function(e,t,r){switch(t){case"input":if(Ug(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=fh(n);if(!a)throw Error(fe(90));v5(n),Ug(n,a)}}}break;case"textarea":b5(e,r);break;case"select":t=r.value,t!=null&&il(e,!!r.multiple,t,!1)}};O5=Zv;N5=ms;var X_={usingClientEntryPoint:!1,Events:[hf,Ys,fh,P5,C5,Zv]},Oc={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K_={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=A5(e),e===null?null:e.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||V_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{sh=Hf.inject(K_),ii=Hf}catch{}}ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X_;ua.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ax(t))throw Error(fe(200));return W_(e,t,null,r)};ua.createRoot=function(e,t){if(!ax(e))throw Error(fe(299));var r=!1,n="",a=c3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=tx(e,1,!1,null,null,r,!1,n,a),e[Ii]=t.current,yu(e.nodeType===8?e.parentNode:e),new nx(t)};ua.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=A5(t),e=e===null?null:e.stateNode,e};ua.flushSync=function(e){return ms(e)};ua.hydrate=function(e,t,r){if(!bh(t))throw Error(fe(200));return wh(null,e,t,!0,r)};ua.hydrateRoot=function(e,t,r){if(!ax(e))throw Error(fe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=c3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=l3(t,null,e,1,r??null,a,!1,i,o),e[Ii]=t.current,yu(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new xh(t)};ua.render=function(e,t,r){if(!bh(t))throw Error(fe(200));return wh(null,e,t,!1,r)};ua.unmountComponentAtNode=function(e){if(!bh(e))throw Error(fe(40));return e._reactRootContainer?(ms(function(){wh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ii]=null})}),!0):!1};ua.unstable_batchedUpdates=Zv;ua.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bh(r))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return wh(e,t,r,!1,n)};ua.version="18.3.1-next-f1338f8080-20240426";function u3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u3)}catch(e){console.error(e)}}u3(),u5.exports=ua;var Y_=u5.exports,Tb=Y_;Dg.createRoot=Tb.createRoot,Dg.hydrateRoot=Tb.hydrateRoot;const Mi=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[c.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,q_=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:l,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:h,onOpenAbout:p,onShowExif:m,bridgeStatus:y,onBridgeClick:w,isDrLabOpen:x,onToggleDrLab:g,isColorLabOpen:v,onToggleColorLab:S,isFftLabOpen:b,onToggleFftLab:k,isSfrLabOpen:C,onToggleSfrLab:P,onGenerateTestPic:N,onPTCFilesSelected:A,onDownloadDng:T,isThreePlane:O,onOpenDatabase:M,isSidebarOpen:D,onToggleSidebar:E})=>{const B=j.useRef(null),_=j.useRef(null),[I,z]=j.useState(!1),[U,ne]=j.useState(!1),[V,F]=j.useState(!1),[re,ee]=j.useState(!1),[$,ae]=j.useState("direct"),q=j.useRef(null),H=j.useRef(null);j.useEffect(()=>{const Q=he=>{q.current&&!q.current.contains(he.target)&&F(!1),H.current&&!H.current.contains(he.target)&&ee(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const le=Q=>{var he;F(!1),Q==="direct"?(ae("direct"),z(!0)):!y.isConnected||!y.hasDngConverter?ne(!0):(ae("convert"),(he=B.current)==null||he.click())},ce=()=>{var Q;z(!1),(Q=B.current)==null||Q.click()},Z=Q=>{var ve;const he=(ve=Q.target.files)==null?void 0:ve[0];he&&e(he,$),Q.target.value=""},Ce=Q=>{Q.target.files&&Q.target.files.length>0&&A(Q.target.files),Q.target.value=""},we=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return c.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[c.jsx(Mi,{isOpen:I,onClose:()=>z(!1),onConfirm:ce,title:"Format Compatibility Warning",confirmText:"Continue",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200 text-base",children:"Adobe DNG ConverterDNG"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Only 4-channel DNG files output by Adobe DNG Converter are fully guaranteed to be supported."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsx(Mi,{isOpen:U,onClose:()=>ne(!1),onConfirm:()=>ne(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),O&&c.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:y.isConnected?void 0:w,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${y.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:y.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[c.jsx("span",{className:`w-2 h-2 ${y.isConnected?"bg-emerald-600":"bg-pink-600"}`}),y.isConnected?`JiangBridge Ready ${y.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),x&&c.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),v&&c.jsxs("button",{onClick:S,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),b&&c.jsxs("button",{onClick:k,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),C&&c.jsxs("button",{onClick:P,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&c.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[c.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),c.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),c.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),we&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:Q=>s(parseFloat(Q.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:Q=>{const he=parseFloat(Q.target.value);isNaN(he)||s(he)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:Q=>d(parseFloat(Q.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:Q=>{const he=parseFloat(Q.target.value);isNaN(he)||d(he)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:l*100,onChange:Q=>u(parseInt(Q.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(l*100),onChange:Q=>{const he=parseInt(Q.target.value);isNaN(he)||u(Math.min(100,Math.max(1,he))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),c.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),c.jsxs("button",{onClick:T,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[c.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),c.jsx("input",{type:"file",ref:B,onChange:Z,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("input",{type:"file",ref:_,onChange:Ce,className:"hidden",multiple:!0,accept:".csv"}),c.jsxs("div",{className:"relative inline-block text-left",ref:H,children:[c.jsxs("button",{onClick:()=>ee(!re),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${re?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),re&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{ee(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:"Generate Pattern DNG"})]}),c.jsxs("button",{onClick:()=>{ee(!1),x||g(),b&&k(),v&&S&&S(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${x?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsxs("span",{children:["DR Lab ",x?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{ee(!1),S&&!v&&S(),x&&g(),b&&k(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:["Color Lab ",v?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{ee(!1),P&&!C&&P(),x&&g(),b&&k(),v&&S&&S()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${C?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsxs("span",{children:["SFR Lab ",C?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{ee(!1),b||k(),x&&g(),v&&S&&S(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${b?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsxs("span",{children:["FFT Lab ",b?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{var Q;ee(!1),(Q=_.current)==null||Q.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),c.jsx("span",{children:"Generate PTC & TargetSNR"})]})]})})]}),c.jsxs("div",{className:"relative inline-block text-left",ref:q,children:[c.jsxs("button",{onClick:()=>F(!V),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${V?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),V&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>le("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.jsx("span",{children:"Load Image (Direct)"})]}),c.jsxs("button",{onClick:()=>le("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&m&&c.jsxs("button",{onClick:m,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),c.jsx("button",{onClick:p,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),c.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),c.jsxs("button",{onClick:E,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${D?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:D?"Hide Control Panel":"Show Control Panel",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:D?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),c.jsx("span",{className:"hidden sm:inline",children:D?"Hide Panel":"Show Panel"})]})]})]})},Z_=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:l="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:h=[],colorLabPoints:p=[],colorLabRects:m=[]})=>{var re;const y=j.useRef(null),w=j.useRef(document.createElement("canvas")),[x,g]=j.useState(!1),[v,S]=j.useState({x:0,y:0}),b=j.useRef(null),k=j.useRef(null),C=j.useRef(null),[P,N]=j.useState(!1),[A,T]=j.useState(null),[O,M]=j.useState(null);j.useEffect(()=>{o!==void 0&&M(o)},[o]);const D=j.useCallback(()=>{const ee=y.current,$=ee==null?void 0:ee.getContext("2d");return{canvas:ee,ctx:$}},[]);j.useEffect(()=>{const ee=w.current,$=ee.getContext("2d");if(!e||!$)return;let ae=0,q=0;e instanceof ImageData?(ae=e.width,q=e.height):e instanceof HTMLImageElement&&(ae=e.naturalWidth,q=e.naturalHeight),!(ae===0||q===0)&&((ee.width!==ae||ee.height!==q)&&(ee.width=ae,ee.height=q),e instanceof ImageData?$.putImageData(e,0,0):($.clearRect(0,0,ae,q),$.drawImage(e,0,0)))},[e]);const E=j.useCallback(()=>{const{canvas:ee,ctx:$}=D();if(!(!ee||!$||!e)){if($.setTransform(1,0,0,1,0,0),$.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",$.fillRect(0,0,ee.width,ee.height),$.setTransform(t,0,0,t,r.x,r.y),w.current.width>0&&($.imageSmoothingEnabled=!1,$.drawImage(w.current,0,0)),O){$.strokeStyle="#06b6d4",$.lineWidth=1/t,$.fillStyle="rgba(6, 182, 212, 0.2)",$.beginPath(),$.rect(O.x,O.y,O.w,O.h),$.fill(),$.stroke(),$.save(),$.fillStyle="#fff";const ae=Math.max(10,14/t);$.font=`${ae}px monospace`,$.shadowColor="rgba(0,0,0,0.8)",$.shadowBlur=4,$.shadowOffsetX=1,$.shadowOffsetY=1,$.fillText(`${Math.round(O.w)}x${Math.round(O.h)}`,O.x,O.y-5/t),$.restore()}if(h&&h.length>0){$.save(),$.strokeStyle="#f59e0b",$.lineWidth=1/t,$.globalAlpha=.8,$.beginPath(),h.forEach(H=>{$.rect(H.x,H.y,H.w,H.h)}),$.stroke();const ae=h[0];$.fillStyle="#f59e0b";const q=Math.max(10,12/t);$.font=`${q}px monospace`,$.fillText(`${ae.w}x${ae.h}`,ae.x,ae.y-4/t),$.restore()}if(d&&d.length>0){$.save();const ae=6/t,q=Math.max(12,16/t);$.font=`bold ${q}px sans-serif`,$.textAlign="center",$.textBaseline="middle",d.forEach((H,le)=>{$.beginPath(),$.arc(H.x,H.y,ae,0,2*Math.PI),$.fillStyle="white",$.fill(),$.strokeStyle="#4338ca",$.lineWidth=2/t,$.stroke(),$.fillStyle="#4338ca",$.fillText((le+1).toString(),H.x,H.y-12/t)}),$.restore()}if(p&&p.length>0){$.save();const ae=5/t,q=Math.max(10,14/t);$.font=`bold ${q}px sans-serif`,$.textAlign="center",$.textBaseline="middle",p.forEach((H,le)=>{$.fillStyle="yellow",$.fillRect(H.x-ae,H.y-ae,ae*2,ae*2),$.strokeStyle="black",$.lineWidth=1/t,$.strokeRect(H.x-ae,H.y-ae,ae*2,ae*2),$.fillStyle="yellow",$.shadowColor="black",$.shadowBlur=2,$.fillText((le+1).toString(),H.x,H.y-10/t)}),$.restore()}if(m&&m.length>0){if($.save(),$.strokeStyle="yellow",$.lineWidth=1/t,$.globalAlpha=.9,$.beginPath(),m.forEach(ae=>{$.rect(ae.x,ae.y,ae.w,ae.h)}),$.stroke(),m[0]){const ae=m[0];$.fillStyle="yellow",$.shadowColor="black",$.shadowBlur=3;const q=Math.max(10,12/t);$.font=`${q}px monospace`,$.fillText(`${Math.round(ae.w)}x${Math.round(ae.h)}`,ae.x,ae.y-4/t)}$.restore()}}},[D,e,t,r,s,O,d,h,p,m]);j.useEffect(()=>{const{canvas:ee}=D();if(!ee)return;const $=new ResizeObserver(()=>{ee.width=ee.clientWidth,ee.height=ee.clientHeight,E()});return $.observe(ee),()=>$.disconnect()},[D,E]),j.useEffect(()=>{E()},[E,e,r,t,s,O,d,h,p,m]);const B=ee=>{const{canvas:$}=D();if(!$)return{x:0,y:0};const ae=$.getBoundingClientRect();return{x:ee.clientX-ae.left,y:ee.clientY-ae.top}},_=(ee,$)=>({x:(ee-r.x)/t,y:($-r.y)/t}),I=ee=>{ee.preventDefault();const $=B(ee);if(u){const ae=_($.x,$.y);f&&f(ae);return}if(ee.shiftKey||l==="select"){N(!0);const ae=_($.x,$.y),q={x:Math.floor(ae.x),y:Math.floor(ae.y)};T(q),M(null),i&&i(null)}else g(!0),S({x:$.x-r.x,y:$.y-r.y})},z=ee=>{const $=B(ee);if(P&&A){const ae=_($.x,$.y),q=Math.floor(ae.x),H=Math.floor(ae.y),le=Math.min(A.x,q),ce=Math.min(A.y,H),Z=Math.max(A.x,q),Ce=Math.max(A.y,H),we=Z-le+1,Q=Ce-ce+1;M({x:le,y:ce,w:we,h:Q})}else x&&n({x:$.x-v.x,y:$.y-v.y})},U=()=>{P&&(N(!1),O&&i&&O.w>0&&O.h>0&&i(O)),g(!1)},ne=ee=>{var $;if(ee.touches.length===1){const ae=ee.touches[0],q=($=y.current)==null?void 0:$.getBoundingClientRect();if(!q)return;const H=ae.clientX-q.left,le=ae.clientY-q.top;if(u){const ce=_(H,le);f&&f(ce);return}if(l==="select"){const ce=_(H,le),Z={x:Math.floor(ce.x),y:Math.floor(ce.y)};T(Z),N(!0),M(null),i&&i(null)}else C.current={x:H,y:le},S({x:H-r.x,y:le-r.y}),g(!0)}else if(ee.touches.length===2){const ae=Math.hypot(ee.touches[0].clientX-ee.touches[1].clientX,ee.touches[0].clientY-ee.touches[1].clientY);b.current=ae,k.current=t,g(!1),N(!1)}},V=ee=>{var $;if(ee.touches.length===1){const ae=ee.touches[0],q=($=y.current)==null?void 0:$.getBoundingClientRect();if(!q)return;const H=ae.clientX-q.left,le=ae.clientY-q.top;if(u)return;if(P&&A){const ce=_(H,le),Z=Math.floor(ce.x),Ce=Math.floor(ce.y),we=Math.min(A.x,Z),Q=Math.min(A.y,Ce),he=Math.max(A.x,Z),ve=Math.max(A.y,Ce),qe=he-we+1,He=ve-Q+1;M({x:we,y:Q,w:qe,h:He})}else x&&n({x:H-v.x,y:le-v.y})}else if(ee.touches.length===2&&b.current&&k.current&&a){const q=Math.hypot(ee.touches[0].clientX-ee.touches[1].clientX,ee.touches[0].clientY-ee.touches[1].clientY)/b.current;a(k.current*q)}},F=()=>{P&&(N(!1),O&&i&&O.w>0&&O.h>0&&i(O)),g(!1),b.current=null,k.current=null,C.current=null};return c.jsx("canvas",{ref:y,className:`w-full h-full block touch-none ${u||P||(re=window.event)!=null&&re.shiftKey||l==="select"?"cursor-crosshair":"cursor-grab active:cursor-grabbing"}`,onMouseDown:I,onMouseMove:z,onMouseUp:U,onMouseLeave:U,onTouchStart:ne,onTouchMove:V,onTouchEnd:F,onTouchCancel:F,tabIndex:0})},Yd={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},Bs=({title:e,children:t})=>c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[c.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:c.jsx("span",{children:e})}),c.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),Q_=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],Kp=({checked:e,onChange:t,label:r})=>c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),c.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:c.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),Yp=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},J_=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:l,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:h,drGridRows:p,onDrGridRowsChange:m,drGridCols:y,onDrGridColsChange:w,onBatchDrLab:x,hasDrMarkers:g,isFftLabOpen:v,onProcessPair:S,onProcessBatchDiff:b,onProcessStackFft:k,onOpenCrossCalc:C,isThreePlane:P,onToggleXTrans:N,xtransPhase:A,onXTransPhaseChange:T,isXTransConverted:O,onCommand:M,isColorLabOpen:D,colorLabMarkingStep:E,onStartColorLabMarking:B,isSfrLabOpen:_,roiStats:I,onOpenDngExport:z}=e,U=!!t,ne=!!(t!=null&&t.isXTrans),V=!!N,[F,re]=j.useState(r.exposure.toString()),[ee,$]=j.useState(""),[ae,q]=j.useState("0 0 0 0"),[H,le]=j.useState("1.0"),[ce,Z]=j.useState("1.0"),[Ce,we]=j.useState(r.demosaicMethod),[Q,he]=j.useState(!!r.showKadc),[ve,qe]=j.useState(!!r.subtractBlackLevelFromStats),[He,Ee]=j.useState("64"),[Ue,lt]=j.useState(!1),[St,_r]=j.useState("0 0 0 0"),[ct,er]=j.useState("2840 6303 3935 6303"),[Ge,Xt]=j.useState("780 1720 1101 1720"),[Ut,ir]=j.useState(!1),[Mr,bt]=j.useState(!1),[We,gt]=j.useState(!1),[Ct,or]=j.useState(!1),[sr,tn]=j.useState("single"),Rt=j.useMemo(()=>Object.keys(Yd).sort(),[]),xn=j.useRef(null),jt=j.useRef(null),bn=j.useRef(null),Rn=j.useRef(null),[wn,dr]=j.useState(null),[xr,br]=j.useState(null),[kn,un]=j.useState(!1),[wr,Qn]=j.useState(!0),da=j.useRef(null),tr=j.useRef(null);j.useEffect(()=>{if(re(r.exposure.toString()),r.customMatrix?$(r.customMatrix.join(" ")):$(""),r.blackLevel&&r.blackLevel.length===4)q(r.blackLevel.join(" "));else{const Y=Yp(t,i);Y&&Y.some(ye=>ye!==0)?q(Y.join(" ")):q("")}le(r.wbGains?r.wbGains[0].toString():"1.0"),Z(r.wbGains?r.wbGains[1].toString():"1.0"),we(r.demosaicMethod),he(!!r.showKadc),qe(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(_r(r.advancedZeroDep.bl.join(" ")),er(r.advancedZeroDep.bg.join(" ")),Xt(r.advancedZeroDep.fg.join(" ")),lt(!0))},[r,t,i]);const Kt=j.useRef(!1),Lt=j.useRef(null);j.useEffect(()=>{t!==Lt.current&&(Kt.current=!1,Lt.current=t)},[t]),j.useEffect(()=>{if(o&&t&&!Kt.current){Kt.current=!0;const Y=Yp(t,i),ye=Y&&Y.some(ft=>ft>0);if(Y&&ye){console.log("[AutoApply] Detected Black Levels via Bridge:",Y);const ft={...r,blackLevel:Y,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(ft)}}},[o,t,i,r,n]);const se=Y=>re(Y),Me=Y=>le(Y),ze=Y=>Z(Y),tt=Y=>we(parseInt(Y.target.value,10)),Je=Y=>$(Y.target.value),Ot=()=>{re("0"),we(3),le("1.0"),Z("1.0"),he(!0),qe(!0),$(""),lt(!1);const Y=Yp(t,i);q(Y&&Y.some(ye=>ye!==0)?Y.join(" "):"")},kr=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),M==null||M("sel full"))},Sr=()=>{if(!t||!a)return;const Y=parseInt(He,10);if(isNaN(Y)||Y<=0)return;const ye=Math.min(Y,t.width),ft=Math.min(Y,t.height),$t=Math.floor((t.width-ye)/2),Ln=Math.floor((t.height-ft)/2);a({x:$t,y:Ln,w:ye,h:ft}),M==null||M(`sel center ${Y}`)},Re=()=>{const ye=ae.split(/[\s,]+/).filter(ft=>ft.trim()!=="").map(Number);if(ye.length===1&&!isNaN(ye[0]))return[ye[0],ye[0],ye[0],ye[0]];if(ye.length>=4&&!ye.slice(0,4).some(isNaN))return[ye[0],ye[1],ye[2],ye[3]]},it=Y=>{const ye=Y.trim().split(/[\s,]+/).map(Number);return ye.length===4&&!ye.some(isNaN)?ye:ye.length===1&&!isNaN(ye[0])?[ye[0],ye[0],ye[0],ye[0]]:null},Tt=()=>{M&&(F!=="0"&&M(`ev ${F}`),(H!=="1.0"||ce!=="1.0")&&M(`wb ${H} ${ce}`),ae!=="0 0 0 0"&&ae!==""&&M(`bl ${ae}`),Ce!==3&&M(`demo ${Ce}`),ee.trim().length>0&&M(`matrix ${ee.replace(/\s+/g," ")}`),M("render"));const Y={...r},ye=parseFloat(F);isNaN(ye)||(Y.exposure=ye);const ft=parseFloat(H),$t=parseFloat(ce);!isNaN(ft)&&!isNaN($t)&&(Y.wbGains=[ft,$t]),Y.demosaicMethod=Ce,Y.renderMode="standard";const Ln=Re();Ln?Y.blackLevel=Ln:delete Y.blackLevel;const Ar=ee.trim().replace(/[\s,\n]+/g," ");if(Ar){const Jn=Ar.split(" ").map(Number);Jn.length===9&&!Jn.some(isNaN)?Y.customMatrix=Jn:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete Y.customMatrix;Y.showKadc=Q,Y.subtractBlackLevelFromStats=ve,n(Y)},Et=()=>{bt(!0)},rr=Y=>{M&&(F!=="0"&&M(`ev ${F}`),(H!=="1.0"||ce!=="1.0")&&M(`wb ${H} ${ce}`),ae!=="0 0 0 0"&&ae!==""&&M(`bl ${ae}`),M(Y==="bilinear"?"render zero color":"render zero"));const ye={...r},ft=Re();ft&&(ye.blackLevel=ft);const $t=parseFloat(H),Ln=parseFloat(ce);!isNaN($t)&&!isNaN(Ln)&&(ye.wbGains=[$t,Ln]);const Ar=parseFloat(F);if(isNaN(Ar)||(ye.exposure=Ar),Y==="bilinear"){const Jn=ee.trim().replace(/[\s,\n]+/g," ");if(Jn){const ha=Jn.split(" ").map(Number);ha.length===9&&!ha.some(isNaN)&&(ye.customMatrix=ha)}}ye.renderMode=Y==="mosaic"?"zero-dependency":"zero-dep-color",ye.showKadc=Q,ye.subtractBlackLevelFromStats=ve,bt(!1),n(ye)},me=()=>{const Y=it(St),ye=it(ct),ft=it(Ge);if(!Y||!ye||!ft){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}M&&(F!=="0"&&M(`ev ${F}`),M(`render unmix ${Y.join(" ")} ${ye.join(" ")} ${ft.join(" ")}`));const $t={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:Y,bg:ye,fg:ft}};$t.showKadc=Q,$t.subtractBlackLevelFromStats=ve,n($t)},Lr=()=>{if(I){const Y=I.means,ye=[Y[0],Y[1],Y[3],Y[2]].map(ft=>ft.toFixed(1));er(ye.join(" "))}else alert("Please select an ROI on the image first.")},Ta=()=>{if(I){const Y=I.means,ye=[Y[0],Y[1],Y[3],Y[2]].map(ft=>ft.toFixed(1));Xt(ye.join(" "))}else alert("Please select an ROI on the image first.")},rn=Y=>{Y.target.files&&Y.target.files.length>0&&x&&(x(Y.target.files,sr),M==null||M(`drlab batch ${sr}`)),Y.target.value="",or(!1)},Sn=async Y=>{var ft;const ye=(ft=Y.target.files)==null?void 0:ft[0];if(ye){try{const Ln=(await ye.text()).split(`
`),Ar=[];Ar.push("#BlackLevel: 0,0,0,0"),Ar.push("#ImageHeight: 0"),Ar.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let Jn=1;for(let ea=0;ea<Ln.length;ea++){const ga=Ln[ea].trim();if(!ga||ga.includes("R_mean")||ga.includes("R_std"))continue;const Bn=ga.split(/\s+/).map(Number);if(Bn.length<8||Bn.some(isNaN))continue;const Ki=[Jn,1,Bn[0],Bn[2],Bn[6],Bn[4],Bn[1],Bn[3],Bn[7],Bn[5]].join(",");Ar.push(Ki),Jn++}const ha=new Blob([Ar.join(`
`)],{type:"text/csv"}),Da=URL.createObjectURL(ha),pa=document.createElement("a");pa.href=Da,pa.download=ye.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(pa),pa.click(),document.body.removeChild(pa),URL.revokeObjectURL(Da)}catch($t){console.error("Conversion failed",$t),alert("Failed to convert file.")}Y.target.value=""}},Hi=Y=>{Y.target.files&&Y.target.files[0]&&(dr(Y.target.files[0]),M==null||M("fft load a"))},Xi=Y=>{Y.target.files&&Y.target.files[0]&&(br(Y.target.files[0]),M==null||M("fft load b"))},Ea=()=>{wn&&xr&&S&&(S(wn,xr,kn,wr),M==null||M("fft run"))},$a=Y=>{Y.target.files&&Y.target.files.length>0&&b&&(b(Y.target.files),M==null||M("fft batch")),Y.target.value=""},yi=Y=>{Y.target.files&&Y.target.files.length>0&&k&&(k(Y.target.files),M==null||M("fft stack")),Y.target.value=""},jn=!!O;return c.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[P&&c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[c.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),c.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),ne&&!O&&c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),c.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),O&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),c.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),_&&c.jsx(Bs,{title:"SFR Lab Tools (Scalar Unmixing)",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),c.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsx(Kp,{checked:Ue,onChange:lt,label:" (Scalar Unmixing)"}),Ue&&c.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[c.jsx("div",{className:"col-span-1",children:"Param"}),c.jsx("div",{className:"text-center",children:"Ch0(R)"}),c.jsx("div",{className:"text-center",children:"Ch1(G1)"}),c.jsx("div",{className:"text-center",children:"Ch2(B)"}),c.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),c.jsx("input",{type:"text",value:St,onChange:Y=>_r(Y.target.value),className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:ct,onChange:Y=>er(Y.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:Lr,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Ge,onChange:Y=>Xt(Y.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:Ta,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsx("button",{onClick:me,disabled:!U,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95",children:"RUN UNMIXING (ADV ZERO-DEP)"}),c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),v&&c.jsx(Bs,{title:"FFT Lab (Noise Profile)",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:xn,className:"hidden",onChange:Hi,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var Y;return(Y=xn.current)==null?void 0:Y.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${wn?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:wn?`A: ${wn.name}`:"Load Image A"}),c.jsx("input",{type:"file",ref:jt,className:"hidden",onChange:Xi,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var Y;return(Y=jt.current)==null?void 0:Y.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${xr?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:xr?`B: ${xr.name}`:"Load Image B"})]}),c.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:wr,onChange:Y=>Qn(Y.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:Ea,disabled:!wn||!xr,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),c.jsx("input",{type:"file",ref:bn,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:$a}),c.jsx("button",{onClick:()=>{var Y;return(Y=bn.current)==null?void 0:Y.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:Rn,className:"hidden",multiple:!0,onChange:yi,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var Y;return(Y=Rn.current)==null?void 0:Y.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),c.jsx("div",{className:"flex flex-col gap-2 pt-2",children:c.jsx("button",{onClick:()=>{C==null||C(),M==null||M("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"})})]})}),s&&c.jsx(Bs,{title:"DR Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>{f==null||f(),M==null||M("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),h&&d!==void 0&&c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),c.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:Y=>h(parseInt(Y.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),c.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),m&&w&&p!==void 0&&y!==void 0&&c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Layout:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"1",max:"50",value:p,onChange:Y=>m(Math.max(1,parseInt(Y.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),c.jsx("span",{className:"text-xs text-gray-400",children:"x"}),c.jsx("input",{type:"number",min:"1",max:"50",value:y,onChange:Y=>w(Math.max(1,parseInt(Y.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>{u==null||u(),M==null||M("mark")},disabled:!U||l!==void 0&&l>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${U?l&&l>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l>0?"Marking Active...":"Mark Corners"}),x&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",ref:da,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:rn}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>or(!Ct),disabled:!g,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),Ct&&c.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var Y;tn("single"),(Y=da.current)==null||Y.click()},children:"1. Independent Frames"}),c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var Y;tn("pair"),(Y=da.current)==null||Y.click()},children:"2. Pair Difference (A-B)"})]})]})]}),c.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("input",{type:"file",ref:tr,className:"hidden",accept:".txt",onChange:Sn}),c.jsx("button",{onClick:()=>{var Y;return(Y=tr.current)==null?void 0:Y.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),l!==void 0&&l>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[l===1&&"Click Top-Left Center",l===2&&"Click Top-Right Center",l===3&&"Click Bottom-Left Center",l===4&&"Click Bottom-Right Center"]})})]})]})}),D&&c.jsx(Bs,{title:"Color Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),c.jsx("button",{onClick:()=>{B==null||B(),M==null||M("cl mark")},disabled:!U||E!==void 0&&E>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${U?E&&E>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:E&&E>0?"Marking Active...":"Mark 24-Patch Chart"}),E!==void 0&&E>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[E===1&&"Click Top-Left (Brown)",E===2&&"Click Top-Right (Cyanish)",E===3&&"Click Bottom-Left (White)",E===4&&"Click Bottom-Right (Black)"]})})]})}),c.jsx(Bs,{title:"Selection Tools",children:c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),c.jsx("input",{type:"number",min:"1",value:He,onChange:Y=>Ee(Y.target.value),disabled:!U,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:Sr,disabled:!U,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),c.jsx("button",{onClick:kr,disabled:!U,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),c.jsx(Bs,{title:"Display Controls",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",c.jsx("b",{children:"Apply"}),"."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!U,value:parseFloat(F)||0,onChange:Y=>se(Y.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{id:"exposure",type:"number",step:"0.1",value:F,onChange:Y=>se(Y.target.value),disabled:!U,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),V&&c.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[c.jsx(Kp,{checked:!!jn,onChange:Y=>{N&&N(Y),M==null||M(`xtrans ${Y?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),jn&&A&&T&&c.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:A.x,onChange:Y=>{const ye=Math.min(5,Math.max(0,parseInt(Y.target.value)||0));T({x:ye}),M==null||M(`xtrans phase ${ye} ${A.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:A.y,onChange:Y=>{const ye=Math.min(5,Math.max(0,parseInt(Y.target.value)||0));T({y:ye}),M==null||M(`xtrans phase ${A.x} ${ye}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),c.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx(Kp,{checked:Q,onChange:he,label:"Show k"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),c.jsx("input",{type:"number",step:"0.01",value:H,onChange:Y=>Me(Y.target.value),disabled:!U,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),c.jsx("input",{type:"number",step:"0.01",value:ce,onChange:Y=>ze(Y.target.value),disabled:!U,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",c.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),c.jsx("button",{onClick:()=>ir(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[c.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),c.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${ve?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>qe(!ve),children:c.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${ve?"translate-x-4":"translate-x-0"}`})})]})]}),c.jsx("input",{type:"text",value:ae,onChange:Y=>q(Y.target.value),disabled:!U,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[c.jsx("span",{children:"Custom Color Matrix"}),c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:Y=>{const ye=Yd[Y.target.value];ye&&$(ye),Y.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),Rt.map(Y=>c.jsx("option",{value:Y,children:Y},Y))]})]}),c.jsx("textarea",{id:"customMatrix",value:ee,onChange:Je,disabled:!U,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[c.jsxs("button",{onClick:Et,disabled:!U,className:"w-full text-xs font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-colors py-2 rounded-lg flex items-center justify-center gap-1.5 border border-slate-600",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:[c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Apply Settings/Render",c.jsx("br",{}),"CM"]}),c.jsx("button",{onClick:Tt,disabled:!U,className:"w-full text-base bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 dark:disabled:text-slate-500 disabled:cursor-not-allowed font-bold py-3 px-3 rounded-lg shadow-lg transition-all active:scale-95 border-2 border-transparent dark:border-gray-500",children:""}),c.jsxs("button",{onClick:()=>z==null?void 0:z(),disabled:!U,className:"w-full text-sm font-bold bg-indigo-600 hover:bg-indigo-500 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-3 rounded-lg flex items-center justify-center gap-1.5 border-2 border-black shadow-[4px_4px_0px_black] active:translate-x-1 active:translate-y-1 active:shadow-none",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Generate 16bit DNG"]}),c.jsx("button",{onClick:Ot,disabled:!U,className:"w-full text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors mt-1",children:"Reset Defaults (Local)"})]})]})})]}),c.jsx(Mi,{isOpen:Ut,onClose:()=>ir(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),ir(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[c.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/JiangBridge",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("p",{className:"leading-relaxed",children:["Autofills when JiangBridge is detected. If no result is found or JiangBridge is missing, please check the ",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame with identical settings to calculate and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),c.jsx(Mi,{isOpen:Mr,onClose:()=>bt(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>rr("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),c.jsxs("button",{onClick:()=>rr("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),c.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),c.jsx(Mi,{isOpen:We,onClose:()=>gt(!1),onConfirm:()=>{Tt(),gt(!1)},title:"Official Render Options",confirmText:"Render",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),c.jsx("select",{id:"demosaic-modal",value:Ce,onChange:tt,disabled:!U||P||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:Q_.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))}),P&&c.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&c.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},eM=j.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:l,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:h,onToggleXTrans:p,onXTransPhaseChange:m}=e,[y,w]=j.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[x,g]=j.useState(""),[v,S]=j.useState([]),[b,k]=j.useState(-1),C=j.useRef(null),P=j.useRef(null),N=j.useRef(null),A=j.useRef(null),T=j.useRef(null),O=j.useRef(null),M=j.useRef(null),D=j.useRef(null);j.useRef(null);const E=j.useRef({...n});j.useEffect(()=>{E.current={...n}},[n.exposure,n.demosaicMethod]);const B=j.useRef({fileA:null,fileB:null});j.useLayoutEffect(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},[y]);const _=(F,re="out")=>{w(ee=>[...ee,{id:Date.now().toString()+Math.random(),type:re,text:F}])};j.useImperativeHandle(t,()=>({log:(F,re="in")=>{const ee=re;let $=F;re==="in"&&!F.startsWith(">")&&($=`> ${F}`),_($,ee)}}));const I=j.useRef(null);j.useEffect(()=>{if(e.roiStats&&e.roiStats!==I.current){const F=e.roiStats,re=Math.round(F.x),ee=Math.round(F.y),$=Math.round(F.width),ae=Math.round(F.height);_(`> sel ${re} ${ee} ${$} ${ae}`,"in");const q=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],H=c.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[c.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",re,", ",ee,", ",$,"x",ae,"]:"]}),c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[c.jsx("div",{children:"Ch"}),c.jsx("div",{className:"text-right",children:"Mean"}),c.jsx("div",{className:"text-right",children:"StdDev"})]}),q.map(le=>c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[c.jsx("div",{className:le.name==="R"?"text-red-500":le.name==="B"?"text-blue-500":"text-green-500",children:le.name}),c.jsx("div",{className:"text-right text-gray-300",children:F.means[le.idx].toFixed(2)}),c.jsx("div",{className:"text-right text-gray-400",children:F.stdDevs[le.idx].toFixed(2)})]},le.name))]});_(H,"out"),I.current=F}},[e.roiStats,e.isBGGR]);const z=F=>{var ae,q,H,le,ce,Z,Ce;const re=F.trim().split(/\s+/),ee=re[0].toLowerCase(),$=re.slice(1);switch(ee){case"help":_("Available Commands:","info"),_("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),_("  wb <r> <b>        Set WB Gains","info"),_("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),_("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),_("  matrix <n1..n9>   Set Custom Color Matrix","info"),_("  xtrans <on|off>   Force X-Trans Mode","info"),_("  xtrans phase <x> <y>  Set X-Trans Phase","info"),_("  render            Apply settings & Render","info"),_("  render zero       Zero-Dependency Render","info"),_("  render unmix      Advanced Unmixing Render","info"),_("  sel <full|center> Select ROI","info"),_("  sel <x> <y> <w> <h> Select ROI manually","info"),_("  mark              Start DR Lab Corner Marking","info"),_("  gen test          Generate Test Pattern","info"),_("  fft load <a>      Load FFT Pair Image A","info"),_("  fft load <b>      Load FFT Pair Image B","info"),_("  fft run           Run FFT Pair Diff","info"),_("  cls               Clear Screen","info");break;case"cls":case"clear":w([]);break;case"ev":case"exposure":if($.length<1){_(`Current EV: ${E.current.exposure}`,"info");return}const we=parseFloat($[0]);if(isNaN(we)){_("Invalid EV value","err");return}E.current.exposure=we,_(`EV set to ${we} (run 'render' to apply)`);break;case"wb":if($.length<2){_("Usage: wb <red_gain> <blue_gain>","err");return}const Q=parseFloat($[0]),he=parseFloat($[1]);if(isNaN(Q)||isNaN(he)){_("Invalid gains","err");return}E.current.wbGains=[Q,he],_(`WB set to R:${Q} B:${he}`);break;case"bl":case"black":if($.length===0){_(`Current BL: ${((ae=E.current.blackLevel)==null?void 0:ae.join(" "))||"Auto"}`,"info");return}let ve=$.map(Number);if(ve.some(isNaN)){_("Invalid numbers","err");return}if(ve.length===1&&(ve=[ve[0],ve[0],ve[0],ve[0]]),ve.length<4){_("Need 1 or 4 values","err");return}E.current.blackLevel=[ve[0],ve[1],ve[2],ve[3]],E.current.subtractBlackLevelFromStats=!0,E.current.showKadc=!0,_(`Black Level set: ${ve.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if($.length===0){_("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const qe=parseInt($[0]);if(isNaN(qe)){_("Invalid method ID","err");return}E.current.demosaicMethod=qe,_(`Demosaic set to ID ${qe}`);break;case"matrix":if($.length!==9){_("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const He=$.map(Number);if(He.some(isNaN)){_("Invalid matrix values","err");return}E.current.customMatrix=He,_("Custom Color Matrix set.");break;case"xtrans":if($[0]==="on"||$[0]==="true")p?(p(!0),_("X-Trans conversion ON")):_("Feature not available","err");else if($[0]==="off"||$[0]==="false")p?(p(!1),_("X-Trans conversion OFF")):_("Feature not available","err");else if($[0]==="phase"){if($.length<3){_("Usage: xtrans phase <x> <y>","err");return}const Ee=parseInt($[1]),Ue=parseInt($[2]);m&&(m({x:Ee,y:Ue}),_(`X-Trans Phase set to (${Ee}, ${Ue})`))}else _("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if($[0]==="zero"){const Ee=$[1]==="color"?"zero-dep-color":"zero-dependency";E.current.renderMode=Ee,_(`Rendering Zero-Dependency (${Ee})...`)}else if($[0]==="unmix"){if($.length<13){_("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const Ee=$.slice(1).map(Number);if(Ee.some(isNaN)){_("Invalid params","err");return}E.current.renderMode="advanced-zero-dep",E.current.advancedZeroDep={bl:[Ee[0],Ee[1],Ee[2],Ee[3]],bg:[Ee[4],Ee[5],Ee[6],Ee[7]],fg:[Ee[8],Ee[9],Ee[10],Ee[11]]},_("Rendering Advanced Unmix...")}else E.current.renderMode="standard",_("Rendering Standard Pipeline...");a({...E.current});break;case"sel":case"select":if(!r||!i){_("No image loaded","err");return}if($[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if($[0]==="center"){const Ee=parseInt($[1])||64,Ue=Math.floor((r.width-Ee)/2),lt=Math.floor((r.height-Ee)/2);i({x:Ue,y:lt,w:Ee,h:Ee})}else if($.length===4){const[Ee,Ue,lt,St]=$.map(Number);if([Ee,Ue,lt,St].some(isNaN)){_("Invalid coordinates","err");return}i({x:Ee,y:Ue,w:lt,h:St})}else _("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),_("Interactive marking started. Click 4 corners on canvas."));break;case"gen":($[0]==="test"||$[0]==="pattern")&&s&&(s(),_("Generated Test Pattern"));break;case"drlab":if($[0]==="config"){const[Ee,Ue,lt]=$.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(Ee||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(Ue||10),e.onDrGridColsChange&&e.onDrGridColsChange(lt||10),_(`DR Grid Configured: Size=${Ee}, Grid=${Ue}x${lt}`)}else $[0]==="batch"&&($[1]==="pair"?(_("Select file pairs for DR Lab..."),(q=A.current)==null||q.click()):(_("Select single files for DR Lab..."),(H=N.current)==null||H.click()));break;case"fft":$[0]==="load"?$[1]==="a"?(le=T.current)==null||le.click():$[1]==="b"?(ce=O.current)==null||ce.click():_("Usage: fft load <a|b>","err"):$[0]==="run"?B.current.fileA&&B.current.fileB&&u?(_(`Processing Pair: ${B.current.fileA.name} - ${B.current.fileB.name}`),u(B.current.fileA,B.current.fileB,!1,!0)):_("Load both A and B first","err"):$[0]==="stack"?(_("Select files for Stack FFT..."),(Z=M.current)==null||Z.click()):$[0]==="batch"&&(_("Select files for Batch Diff...","info"),(Ce=D.current)==null||Ce.click());break;case"crosscalc":h&&(h(),_("Opened Cross-Calculator"));break;default:_(`Unknown command: ${ee}`,"err")}},U=F=>{if(F.key==="Enter"){const re=x.trim();if(!re)return;_(`> ${re}`,"in"),re.split(";").forEach($=>{$.trim()&&z($.trim())}),S($=>[...$,re]),k(-1),g("")}else if(F.key==="ArrowUp"){if(F.preventDefault(),v.length>0){const re=b===-1?v.length-1:Math.max(0,b-1);k(re),g(v[re])}}else if(F.key==="ArrowDown")if(F.preventDefault(),b!==-1){const re=Math.min(v.length-1,b+1);k(re),g(v[re])}else g("")},ne=(F,re)=>{F.target.files&&F.target.files.length>0&&l&&(_(`Batch processing ${F.target.files.length} files in ${re} mode...`),l(F.target.files,re)),F.target.value=""},V=(F,re)=>{var $;const ee=($=F.target.files)==null?void 0:$[0];ee&&(re==="A"?B.current.fileA=ee:B.current.fileB=ee,_(`Loaded ${re}: ${ee.name}`)),F.target.value=""};return c.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[c.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[c.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),c.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),c.jsx("div",{ref:C,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:y.map(F=>c.jsxs("div",{className:`mb-1 ${F.type==="in"?"opacity-50":""} ${F.type==="err"?"text-red-500":""} ${F.type==="info"?"text-cyan-400":""}`,children:[F.type!=="in"&&typeof F.text=="string"&&!F.text.startsWith(">")&&c.jsx("span",{className:"mr-2 opacity-50",children:">"}),F.text]},F.id))}),c.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[c.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),c.jsx("input",{ref:P,type:"text",value:x,onChange:F=>g(F.target.value),onKeyDown:U,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),c.jsx("input",{type:"file",ref:N,className:"hidden",multiple:!0,onChange:F=>ne(F,"single")}),c.jsx("input",{type:"file",ref:A,className:"hidden",multiple:!0,onChange:F=>ne(F,"pair")}),c.jsx("input",{type:"file",ref:T,className:"hidden",onChange:F=>V(F,"A")}),c.jsx("input",{type:"file",ref:O,className:"hidden",onChange:F=>V(F,"B")}),c.jsx("input",{type:"file",ref:M,className:"hidden",multiple:!0,onChange:F=>{e.onProcessStackFft&&F.target.files&&(_(`Loading ${F.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(F.target.files)),F.target.value=""}}),c.jsx("input",{type:"file",ref:D,className:"hidden",multiple:!0,onChange:F=>{e.onProcessBatchDiff&&F.target.files&&(_("Starting Batch Diff..."),e.onProcessBatchDiff(F.target.files)),F.target.value=""}})]})}),tM=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},rM=e=>{const[t,r]=j.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,l=j.useRef(null),u=j.useRef(!1),f=j.useRef(null);j.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),j.useEffect(()=>{var h;if(i&&n&&!u.current){u.current=!0;const p=tM(n,a),m=p&&p.some(y=>y>0);if(p&&m){console.log("[AutoApply] Detected Black Levels via Bridge:",p),(h=l.current)==null||h.log(`Auto-detected BL: ${p.join(" ")}`,"info");const y={...o,blackLevel:p,showKadc:!0,subtractBlackLevelFromStats:!0,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:o.demosaicMethod,renderMode:"standard"};s(y)}}},[i,n,a,o,s]);const d=h=>{l.current&&l.current.log(h,"in")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[c.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),c.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),c.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[c.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:c.jsx(J_,{...e,onCommand:d})}),c.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:c.jsx(eM,{...e,ref:l})})]})]})},nM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),aM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),iM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),oM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),sM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Nm=.1,_m=16,lM=Math.log(Nm),cM=Math.log(_m),uM=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Nm,Math.min(_m,d)))},o=()=>{t(Math.min(_m,e*1.25))},s=()=>{t(Math.max(Nm,e/1.25))},l=Math.log(e);return c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[c.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:c.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?c.jsx(sM,{}):c.jsx(oM,{})})}),c.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[c.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:c.jsx(nM,{})}),c.jsx("input",{type:"range",min:lM,max:cM,step:"0.01",value:l,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),c.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:c.jsx(aM,{})}),c.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),c.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:c.jsx(iM,{})})]})]})},fM=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return c.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function f3(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=f3(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=f3(e))&&(n&&(n+=" "),n+=t);return n}var dM=Array.isArray,Zn=dM,hM=typeof _f=="object"&&_f&&_f.Object===Object&&_f,d3=hM,pM=d3,gM=typeof self=="object"&&self&&self.Object===Object&&self,mM=pM||gM||Function("return this")(),gi=mM,yM=gi,vM=yM.Symbol,gf=vM,Eb=gf,h3=Object.prototype,xM=h3.hasOwnProperty,bM=h3.toString,Nc=Eb?Eb.toStringTag:void 0;function wM(e){var t=xM.call(e,Nc),r=e[Nc];try{e[Nc]=void 0;var n=!0}catch{}var a=bM.call(e);return n&&(t?e[Nc]=r:delete e[Nc]),a}var kM=wM,SM=Object.prototype,jM=SM.toString;function PM(e){return jM.call(e)}var CM=PM,$b=gf,OM=kM,NM=CM,_M="[object Null]",MM="[object Undefined]",Db=$b?$b.toStringTag:void 0;function AM(e){return e==null?e===void 0?MM:_M:Db&&Db in Object(e)?OM(e):NM(e)}var Gi=AM;function TM(e){return e!=null&&typeof e=="object"}var Wi=TM,EM=Gi,$M=Wi,DM="[object Symbol]";function IM(e){return typeof e=="symbol"||$M(e)&&EM(e)==DM}var Jl=IM,RM=Zn,LM=Jl,BM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,FM=/^\w*$/;function zM(e,t){if(RM(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||LM(e)?!0:FM.test(e)||!BM.test(e)||t!=null&&e in Object(t)}var ix=zM;function UM(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var To=UM;const ec=zt(To);var GM=Gi,WM=To,VM="[object AsyncFunction]",HM="[object Function]",XM="[object GeneratorFunction]",KM="[object Proxy]";function YM(e){if(!WM(e))return!1;var t=GM(e);return t==HM||t==XM||t==VM||t==KM}var ox=YM;const Ke=zt(ox);var qM=gi,ZM=qM["__core-js_shared__"],QM=ZM,qp=QM,Ib=function(){var e=/[^.]+$/.exec(qp&&qp.keys&&qp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function JM(e){return!!Ib&&Ib in e}var eA=JM,tA=Function.prototype,rA=tA.toString;function nA(e){if(e!=null){try{return rA.call(e)}catch{}try{return e+""}catch{}}return""}var p3=nA,aA=ox,iA=eA,oA=To,sA=p3,lA=/[\\^$.*+?()[\]{}|]/g,cA=/^\[object .+?Constructor\]$/,uA=Function.prototype,fA=Object.prototype,dA=uA.toString,hA=fA.hasOwnProperty,pA=RegExp("^"+dA.call(hA).replace(lA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gA(e){if(!oA(e)||iA(e))return!1;var t=aA(e)?pA:cA;return t.test(sA(e))}var mA=gA;function yA(e,t){return e==null?void 0:e[t]}var vA=yA,xA=mA,bA=vA;function wA(e,t){var r=bA(e,t);return xA(r)?r:void 0}var Ms=wA,kA=Ms,SA=kA(Object,"create"),kh=SA,Rb=kh;function jA(){this.__data__=Rb?Rb(null):{},this.size=0}var PA=jA;function CA(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var OA=CA,NA=kh,_A="__lodash_hash_undefined__",MA=Object.prototype,AA=MA.hasOwnProperty;function TA(e){var t=this.__data__;if(NA){var r=t[e];return r===_A?void 0:r}return AA.call(t,e)?t[e]:void 0}var EA=TA,$A=kh,DA=Object.prototype,IA=DA.hasOwnProperty;function RA(e){var t=this.__data__;return $A?t[e]!==void 0:IA.call(t,e)}var LA=RA,BA=kh,FA="__lodash_hash_undefined__";function zA(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=BA&&t===void 0?FA:t,this}var UA=zA,GA=PA,WA=OA,VA=EA,HA=LA,XA=UA;function tc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}tc.prototype.clear=GA;tc.prototype.delete=WA;tc.prototype.get=VA;tc.prototype.has=HA;tc.prototype.set=XA;var KA=tc;function YA(){this.__data__=[],this.size=0}var qA=YA;function ZA(e,t){return e===t||e!==e&&t!==t}var sx=ZA,QA=sx;function JA(e,t){for(var r=e.length;r--;)if(QA(e[r][0],t))return r;return-1}var Sh=JA,e6=Sh,t6=Array.prototype,r6=t6.splice;function n6(e){var t=this.__data__,r=e6(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():r6.call(t,r,1),--this.size,!0}var a6=n6,i6=Sh;function o6(e){var t=this.__data__,r=i6(t,e);return r<0?void 0:t[r][1]}var s6=o6,l6=Sh;function c6(e){return l6(this.__data__,e)>-1}var u6=c6,f6=Sh;function d6(e,t){var r=this.__data__,n=f6(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var h6=d6,p6=qA,g6=a6,m6=s6,y6=u6,v6=h6;function rc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}rc.prototype.clear=p6;rc.prototype.delete=g6;rc.prototype.get=m6;rc.prototype.has=y6;rc.prototype.set=v6;var jh=rc,x6=Ms,b6=gi,w6=x6(b6,"Map"),lx=w6,Lb=KA,k6=jh,S6=lx;function j6(){this.size=0,this.__data__={hash:new Lb,map:new(S6||k6),string:new Lb}}var P6=j6;function C6(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var O6=C6,N6=O6;function _6(e,t){var r=e.__data__;return N6(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ph=_6,M6=Ph;function A6(e){var t=M6(this,e).delete(e);return this.size-=t?1:0,t}var T6=A6,E6=Ph;function $6(e){return E6(this,e).get(e)}var D6=$6,I6=Ph;function R6(e){return I6(this,e).has(e)}var L6=R6,B6=Ph;function F6(e,t){var r=B6(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var z6=F6,U6=P6,G6=T6,W6=D6,V6=L6,H6=z6;function nc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}nc.prototype.clear=U6;nc.prototype.delete=G6;nc.prototype.get=W6;nc.prototype.has=V6;nc.prototype.set=H6;var cx=nc,g3=cx,X6="Expected a function";function ux(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(X6);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(ux.Cache||g3),r}ux.Cache=g3;var m3=ux;const K6=zt(m3);var Y6=m3,q6=500;function Z6(e){var t=Y6(e,function(n){return r.size===q6&&r.clear(),n}),r=t.cache;return t}var Q6=Z6,J6=Q6,e8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t8=/\\(\\)?/g,r8=J6(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(e8,function(r,n,a,i){t.push(a?i.replace(t8,"$1"):n||r)}),t}),n8=r8;function a8(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var fx=a8,Bb=gf,i8=fx,o8=Zn,s8=Jl,Fb=Bb?Bb.prototype:void 0,zb=Fb?Fb.toString:void 0;function y3(e){if(typeof e=="string")return e;if(o8(e))return i8(e,y3)+"";if(s8(e))return zb?zb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var l8=y3,c8=l8;function u8(e){return e==null?"":c8(e)}var v3=u8,f8=Zn,d8=ix,h8=n8,p8=v3;function g8(e,t){return f8(e)?e:d8(e,t)?[e]:h8(p8(e))}var x3=g8,m8=Jl;function y8(e){if(typeof e=="string"||m8(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ch=y8,v8=x3,x8=Ch;function b8(e,t){t=v8(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[x8(t[r++])];return r&&r==n?e:void 0}var dx=b8,w8=dx;function k8(e,t,r){var n=e==null?void 0:w8(e,t);return n===void 0?r:n}var b3=k8;const Ca=zt(b3);function S8(e){return e==null}var j8=S8;const Ve=zt(j8);var P8=Gi,C8=Zn,O8=Wi,N8="[object String]";function _8(e){return typeof e=="string"||!C8(e)&&O8(e)&&P8(e)==N8}var M8=_8;const ys=zt(M8);var w3={exports:{}},At={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx=Symbol.for("react.element"),px=Symbol.for("react.portal"),Oh=Symbol.for("react.fragment"),Nh=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),Mh=Symbol.for("react.provider"),Ah=Symbol.for("react.context"),A8=Symbol.for("react.server_context"),Th=Symbol.for("react.forward_ref"),Eh=Symbol.for("react.suspense"),$h=Symbol.for("react.suspense_list"),Dh=Symbol.for("react.memo"),Ih=Symbol.for("react.lazy"),T8=Symbol.for("react.offscreen"),k3;k3=Symbol.for("react.module.reference");function Ma(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hx:switch(e=e.type,e){case Oh:case _h:case Nh:case Eh:case $h:return e;default:switch(e=e&&e.$$typeof,e){case A8:case Ah:case Th:case Ih:case Dh:case Mh:return e;default:return t}}case px:return t}}}At.ContextConsumer=Ah;At.ContextProvider=Mh;At.Element=hx;At.ForwardRef=Th;At.Fragment=Oh;At.Lazy=Ih;At.Memo=Dh;At.Portal=px;At.Profiler=_h;At.StrictMode=Nh;At.Suspense=Eh;At.SuspenseList=$h;At.isAsyncMode=function(){return!1};At.isConcurrentMode=function(){return!1};At.isContextConsumer=function(e){return Ma(e)===Ah};At.isContextProvider=function(e){return Ma(e)===Mh};At.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hx};At.isForwardRef=function(e){return Ma(e)===Th};At.isFragment=function(e){return Ma(e)===Oh};At.isLazy=function(e){return Ma(e)===Ih};At.isMemo=function(e){return Ma(e)===Dh};At.isPortal=function(e){return Ma(e)===px};At.isProfiler=function(e){return Ma(e)===_h};At.isStrictMode=function(e){return Ma(e)===Nh};At.isSuspense=function(e){return Ma(e)===Eh};At.isSuspenseList=function(e){return Ma(e)===$h};At.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Oh||e===_h||e===Nh||e===Eh||e===$h||e===T8||typeof e=="object"&&e!==null&&(e.$$typeof===Ih||e.$$typeof===Dh||e.$$typeof===Mh||e.$$typeof===Ah||e.$$typeof===Th||e.$$typeof===k3||e.getModuleId!==void 0)};At.typeOf=Ma;w3.exports=At;var E8=w3.exports,$8=Gi,D8=Wi,I8="[object Number]";function R8(e){return typeof e=="number"||D8(e)&&$8(e)==I8}var S3=R8;const L8=zt(S3);var B8=S3;function F8(e){return B8(e)&&e!=+e}var z8=F8;const ac=zt(z8);var Wa=function(t){return t===0?0:t>0?1:-1},Jo=function(t){return ys(t)&&t.indexOf("%")===t.length-1},de=function(t){return L8(t)&&!ac(t)},U8=function(t){return Ve(t)},Wr=function(t){return de(t)||ys(t)},G8=0,As=function(t){var r=++G8;return"".concat(t||"").concat(r)},vs=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&!ys(t))return n;var i;if(Jo(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ac(i)&&(i=n),a&&i>r&&(i=r),i},io=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},W8=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Or=function(t,r){return de(t)&&de(r)?function(n){return t+n*(r-t)}:function(){return r}};function qd(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ca(n,t))===r})}var V8=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,l=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:l,a:h,b:(a-h*n)/r}},H8=function(t,r){return de(t)&&de(r)?t-r:ys(t)&&ys(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function fl(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}var X8=["viewBox","children"],K8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ub=["points","pathLength"],Zp={svg:X8,polygon:Ub,polyline:Ub},gx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Zd=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),!ec(n))return null;var a={};return Object.keys(n).forEach(function(i){gx.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Y8=function(t,r,n){return function(a){return t(r,n,a),null}},Cu=function(t,r,n){if(!ec(t)||Mm(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];gx.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Y8(o,r,n))}),a},q8=["children"],Z8=["children"];function Gb(e,t){if(e==null)return{};var r=Q8(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Q8(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}var Wb={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ai=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Vb=null,Qp=null,mx=function e(t){if(t===Vb&&Array.isArray(Qp))return Qp;var r=[];return j.Children.forEach(t,function(n){Ve(n)||(E8.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Qp=r,Vb=t,r};function Kn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Ai(a)}):n=[Ai(t)],mx(e).forEach(function(a){var i=Ca(a,"type.displayName")||Ca(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ia(e,t){var r=Kn(e,t);return r&&r[0]}var Hb=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!de(n)||n<=0||!de(a)||a<=0)},J8=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],eT=function(t){return t&&t.type&&ys(t.type)&&J8.indexOf(t.type)>=0},j3=function(t){return t&&Am(t)==="object"&&"clipDot"in t},tT=function(t,r,n,a){var i,o=(i=Zp==null?void 0:Zp[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Ke(t)&&(a&&o.includes(r)||K8.includes(r))||n&&gx.includes(r)},Xe=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!ec(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;tT((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},Tm=function e(t,r){if(t===r)return!0;var n=j.Children.count(t);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Xb(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!Xb(i,o))return!1}return!0},Xb=function(t,r){if(Ve(t)&&Ve(r))return!0;if(!Ve(t)&&!Ve(r)){var n=t.props||{},a=n.children,i=Gb(n,q8),o=r.props||{},s=o.children,l=Gb(o,Z8);return a&&s?fl(i,l)&&Tm(a,s):!a&&!s?fl(i,l):!1}return!1},Kb=function(t,r){var n=[],a={};return mx(t).forEach(function(i,o){if(eT(i))n.push(i);else if(i){var s=Ai(i.type),l=r[s]||{},u=l.handler,f=l.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},rT=function(t){var r=t&&t.type;return r&&Wb[r]?Wb[r]:null},nT=function(t,r){return mx(r).indexOf(t)},aT=["children","width","height","viewBox","className","style","title","desc"];function Em(){return Em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Em.apply(this,arguments)}function iT(e,t){if(e==null)return{};var r=oT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $m(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,u=iT(e,aT),f=a||{width:r,height:n,x:0,y:0},d=st("recharts-surface",i);return L.createElement("svg",Em({},Xe(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),L.createElement("title",null,s),L.createElement("desc",null,l),t)}var sT=["children","className"];function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dm.apply(this,arguments)}function lT(e,t){if(e==null)return{};var r=cT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kt=L.forwardRef(function(e,t){var r=e.children,n=e.className,a=lT(e,sT),i=st("recharts-layer",n);return L.createElement("g",Dm({className:i},Xe(a,!0),{ref:t}),r)}),Ti=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function uT(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var fT=uT,dT=fT;function hT(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:dT(e,t,r)}var pT=hT,gT="\\ud800-\\udfff",mT="\\u0300-\\u036f",yT="\\ufe20-\\ufe2f",vT="\\u20d0-\\u20ff",xT=mT+yT+vT,bT="\\ufe0e\\ufe0f",wT="\\u200d",kT=RegExp("["+wT+gT+xT+bT+"]");function ST(e){return kT.test(e)}var P3=ST;function jT(e){return e.split("")}var PT=jT,C3="\\ud800-\\udfff",CT="\\u0300-\\u036f",OT="\\ufe20-\\ufe2f",NT="\\u20d0-\\u20ff",_T=CT+OT+NT,MT="\\ufe0e\\ufe0f",AT="["+C3+"]",Im="["+_T+"]",Rm="\\ud83c[\\udffb-\\udfff]",TT="(?:"+Im+"|"+Rm+")",O3="[^"+C3+"]",N3="(?:\\ud83c[\\udde6-\\uddff]){2}",_3="[\\ud800-\\udbff][\\udc00-\\udfff]",ET="\\u200d",M3=TT+"?",A3="["+MT+"]?",$T="(?:"+ET+"(?:"+[O3,N3,_3].join("|")+")"+A3+M3+")*",DT=A3+M3+$T,IT="(?:"+[O3+Im+"?",Im,N3,_3,AT].join("|")+")",RT=RegExp(Rm+"(?="+Rm+")|"+IT+DT,"g");function LT(e){return e.match(RT)||[]}var BT=LT,FT=PT,zT=P3,UT=BT;function GT(e){return zT(e)?UT(e):FT(e)}var WT=GT,VT=pT,HT=P3,XT=WT,KT=v3;function YT(e){return function(t){t=KT(t);var r=HT(t)?XT(t):void 0,n=r?r[0]:t.charAt(0),a=r?VT(r,1).join(""):t.slice(1);return n[e]()+a}}var qT=YT,ZT=qT,QT=ZT("toUpperCase"),JT=QT;const Rh=zt(JT);function Vt(e){return function(){return e}}const T3=Math.cos,Qd=Math.sin,qa=Math.sqrt,Jd=Math.PI,Lh=2*Jd,Lm=Math.PI,Bm=2*Lm,Xo=1e-6,eE=Bm-Xo;function E3(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function tE(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return E3;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class rE{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?E3:tE(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,f=o-t,d=s-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Xo)if(!(Math.abs(d*l-u*f)>Xo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,m=a-s,y=l*l+u*u,w=p*p+m*m,x=Math.sqrt(y),g=Math.sqrt(h),v=i*Math.tan((Lm-Math.acos((y+h-w)/(2*x*g)))/2),S=v/g,b=v/x;Math.abs(S-1)>Xo&&this._append`L${t+S*f},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*p>f*m)},${this._x1=t+b*l},${this._y1=r+b*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,f=r+l,d=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Xo||Math.abs(this._y1-f)>Xo)&&this._append`L${u},${f}`,n&&(h<0&&(h=h%Bm+Bm),h>eE?this._append`A${n},${n},0,1,${d},${t-s},${r-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:h>Xo&&this._append`A${n},${n},0,${+(h>=Lm)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function yx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new rE(t)}function vx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $3(e){this._context=e}$3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Bh(e){return new $3(e)}function D3(e){return e[0]}function I3(e){return e[1]}function R3(e,t){var r=Vt(!0),n=null,a=Bh,i=null,o=yx(s);e=typeof e=="function"?e:e===void 0?D3:Vt(e),t=typeof t=="function"?t:t===void 0?I3:Vt(t);function s(l){var u,f=(l=vx(l)).length,d,h=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=f;++u)!(u<f&&r(d=l[u],u,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(d,u,l),+t(d,u,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Vt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Vt(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Vt(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function Xf(e,t,r){var n=null,a=Vt(!0),i=null,o=Bh,s=null,l=yx(u);e=typeof e=="function"?e:e===void 0?D3:Vt(+e),t=typeof t=="function"?t:Vt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?I3:Vt(+r);function u(d){var h,p,m,y=(d=vx(d)).length,w,x=!1,g,v=new Array(y),S=new Array(y);for(i==null&&(s=o(g=l())),h=0;h<=y;++h){if(!(h<y&&a(w=d[h],h,d))===x)if(x=!x)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=p;--m)s.point(v[m],S[m]);s.lineEnd(),s.areaEnd()}x&&(v[h]=+e(w,h,d),S[h]=+t(w,h,d),s.point(n?+n(w,h,d):v[h],r?+r(w,h,d):S[h]))}if(g)return s=null,g+""||null}function f(){return R3().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Vt(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Vt(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Vt(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Vt(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Vt(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Vt(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Vt(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class L3{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function nE(e){return new L3(e,!0)}function aE(e){return new L3(e,!1)}const xx={draw(e,t){const r=qa(t/Jd);e.moveTo(r,0),e.arc(0,0,r,0,Lh)}},iE={draw(e,t){const r=qa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},B3=qa(1/3),oE=B3*2,sE={draw(e,t){const r=qa(t/oE),n=r*B3;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},lE={draw(e,t){const r=qa(t),n=-r/2;e.rect(n,n,r,r)}},cE=.8908130915292852,F3=Qd(Jd/10)/Qd(7*Jd/10),uE=Qd(Lh/10)*F3,fE=-T3(Lh/10)*F3,dE={draw(e,t){const r=qa(t*cE),n=uE*r,a=fE*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Lh*i/5,s=T3(o),l=Qd(o);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},Jp=qa(3),hE={draw(e,t){const r=-qa(t/(Jp*3));e.moveTo(0,r*2),e.lineTo(-Jp*r,-r),e.lineTo(Jp*r,-r),e.closePath()}},ma=-.5,ya=qa(3)/2,Fm=1/qa(12),pE=(Fm/2+1)*3,gE={draw(e,t){const r=qa(t/pE),n=r/2,a=r*Fm,i=n,o=r*Fm+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(ma*n-ya*a,ya*n+ma*a),e.lineTo(ma*i-ya*o,ya*i+ma*o),e.lineTo(ma*s-ya*l,ya*s+ma*l),e.lineTo(ma*n+ya*a,ma*a-ya*n),e.lineTo(ma*i+ya*o,ma*o-ya*i),e.lineTo(ma*s+ya*l,ma*l-ya*s),e.closePath()}};function mE(e,t){let r=null,n=yx(a);e=typeof e=="function"?e:Vt(e||xx),t=typeof t=="function"?t:Vt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Vt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Vt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function e0(){}function t0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function z3(e){this._context=e}z3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yE(e){return new z3(e)}function U3(e){this._context=e}U3.prototype={areaStart:e0,areaEnd:e0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:t0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vE(e){return new U3(e)}function G3(e){this._context=e}G3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:t0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xE(e){return new G3(e)}function W3(e){this._context=e}W3.prototype={areaStart:e0,areaEnd:e0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function bE(e){return new W3(e)}function Yb(e){return e<0?-1:1}function qb(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(Yb(i)+Yb(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Zb(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function eg(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function r0(e){this._context=e}r0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:eg(this,this._t0,Zb(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,eg(this,Zb(this,r=qb(this,e,t)),r);break;default:eg(this,this._t0,r=qb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function V3(e){this._context=new H3(e)}(V3.prototype=Object.create(r0.prototype)).point=function(e,t){r0.prototype.point.call(this,t,e)};function H3(e){this._context=e}H3.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function wE(e){return new r0(e)}function kE(e){return new V3(e)}function X3(e){this._context=e}X3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Qb(e),a=Qb(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Qb(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function SE(e){return new X3(e)}function Fh(e,t){this._context=e,this._t=t}Fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function jE(e){return new Fh(e,.5)}function PE(e){return new Fh(e,0)}function CE(e){return new Fh(e,1)}function jl(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function zm(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function OE(e,t){return e[t]}function NE(e){const t=[];return t.key=e,t}function _E(){var e=Vt([]),t=zm,r=jl,n=OE;function a(i){var o=Array.from(e.apply(this,arguments),NE),s,l=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=vx(t(o));s<l;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Vt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Vt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?zm:typeof i=="function"?i:Vt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??jl,a):r},a}function ME(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}jl(e,t)}}function AE(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}jl(e,t)}}function TE(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,m=0;m<s;++m){var y=e[t[m]],w=y[n][1]||0,x=y[n-1][1]||0;p+=w-x}l+=d,u+=p*d}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,jl(e,t)}}function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}var EE=["type","size","sizeType"];function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Um.apply(this,arguments)}function Jb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function e2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jb(Object(r),!0).forEach(function(n){$E(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $E(e,t,r){return t=DE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DE(e){var t=IE(e,"string");return Ou(t)=="symbol"?t:t+""}function IE(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RE(e,t){if(e==null)return{};var r=LE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var K3={symbolCircle:xx,symbolCross:iE,symbolDiamond:sE,symbolSquare:lE,symbolStar:dE,symbolTriangle:hE,symbolWye:gE},BE=Math.PI/180,FE=function(t){var r="symbol".concat(Rh(t));return K3[r]||xx},zE=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*BE;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},UE=function(t,r){K3["symbol".concat(Rh(t))]=r},zh=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=RE(t,EE),u=e2(e2({},l),{},{type:n,size:i,sizeType:s}),f=function(){var w=FE(n),x=mE().type(w).size(zE(i,s,n));return x()},d=u.className,h=u.cx,p=u.cy,m=Xe(u,!0);return h===+h&&p===+p&&i===+i?L.createElement("path",Um({},m,{className:st("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};zh.registerSymbol=UE;function Pl(e){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pl(e)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gm.apply(this,arguments)}function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){Nu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q3(n.key),n)}}function HE(e,t,r){return t&&VE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XE(e,t,r){return t=n0(t),KE(e,Y3()?Reflect.construct(t,r||[],n0(e).constructor):t.apply(e,r))}function KE(e,t){if(t&&(Pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YE(e)}function YE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y3=function(){return!!e})()}function n0(e){return n0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},n0(e)}function qE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wm(e,t)}function Wm(e,t){return Wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wm(e,t)}function Nu(e,t,r){return t=q3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q3(e){var t=ZE(e,"string");return Pl(t)=="symbol"?t:t+""}function ZE(e,t){if(Pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var va=32,bx=function(e){function t(){return WE(this,t),XE(this,t,arguments)}return qE(t,e),HE(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=va/2,o=va/6,s=va/3,l=n.inactive?a:n.color;if(n.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:va,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(va,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return L.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(va/8,"h").concat(va,"v").concat(va*3/4,"h").concat(-va,"z"),className:"recharts-legend-icon"});if(L.isValidElement(n.legendIcon)){var u=GE({},n);return delete u.legendIcon,L.cloneElement(n.legendIcon,u)}return L.createElement(zh,{fill:l,cx:i,cy:i,size:va,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:va,height:va},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,m){var y=p.formatter||l,w=st(Nu(Nu({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=Ke(p.value)?null:p.value;Ti(!Ke(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?u:p.color;return L.createElement("li",Gm({className:w,style:d,key:"legend-item-".concat(m)},Cu(n.props,p,m)),L.createElement($m,{width:o,height:o,viewBox:f,style:h},n.renderIcon(p)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y?y(x,p,m):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(j.PureComponent);Nu(bx,"displayName","Legend");Nu(bx,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var QE=jh;function JE(){this.__data__=new QE,this.size=0}var e$=JE;function t$(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var r$=t$;function n$(e){return this.__data__.get(e)}var a$=n$;function i$(e){return this.__data__.has(e)}var o$=i$,s$=jh,l$=lx,c$=cx,u$=200;function f$(e,t){var r=this.__data__;if(r instanceof s$){var n=r.__data__;if(!l$||n.length<u$-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new c$(n)}return r.set(e,t),this.size=r.size,this}var d$=f$,h$=jh,p$=e$,g$=r$,m$=a$,y$=o$,v$=d$;function ic(e){var t=this.__data__=new h$(e);this.size=t.size}ic.prototype.clear=p$;ic.prototype.delete=g$;ic.prototype.get=m$;ic.prototype.has=y$;ic.prototype.set=v$;var Z3=ic,x$="__lodash_hash_undefined__";function b$(e){return this.__data__.set(e,x$),this}var w$=b$;function k$(e){return this.__data__.has(e)}var S$=k$,j$=cx,P$=w$,C$=S$;function a0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new j$;++t<r;)this.add(e[t])}a0.prototype.add=a0.prototype.push=P$;a0.prototype.has=C$;var Q3=a0;function O$(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var J3=O$;function N$(e,t){return e.has(t)}var ej=N$,_$=Q3,M$=J3,A$=ej,T$=1,E$=2;function $$(e,t,r,n,a,i){var o=r&T$,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=r&E$?new _$:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var m=e[d],y=t[d];if(n)var w=o?n(y,m,d,t,e,i):n(m,y,d,e,t,i);if(w!==void 0){if(w)continue;h=!1;break}if(p){if(!M$(t,function(x,g){if(!A$(p,g)&&(m===x||a(m,x,r,n,i)))return p.push(g)})){h=!1;break}}else if(!(m===y||a(m,y,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var tj=$$,D$=gi,I$=D$.Uint8Array,R$=I$;function L$(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var B$=L$;function F$(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var wx=F$,r2=gf,n2=R$,z$=sx,U$=tj,G$=B$,W$=wx,V$=1,H$=2,X$="[object Boolean]",K$="[object Date]",Y$="[object Error]",q$="[object Map]",Z$="[object Number]",Q$="[object RegExp]",J$="[object Set]",e7="[object String]",t7="[object Symbol]",r7="[object ArrayBuffer]",n7="[object DataView]",a2=r2?r2.prototype:void 0,tg=a2?a2.valueOf:void 0;function a7(e,t,r,n,a,i,o){switch(r){case n7:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case r7:return!(e.byteLength!=t.byteLength||!i(new n2(e),new n2(t)));case X$:case K$:case Z$:return z$(+e,+t);case Y$:return e.name==t.name&&e.message==t.message;case Q$:case e7:return e==t+"";case q$:var s=G$;case J$:var l=n&V$;if(s||(s=W$),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=H$,o.set(e,t);var f=U$(s(e),s(t),n,a,i,o);return o.delete(e),f;case t7:if(tg)return tg.call(e)==tg.call(t)}return!1}var i7=a7;function o7(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var rj=o7,s7=rj,l7=Zn;function c7(e,t,r){var n=t(e);return l7(e)?n:s7(n,r(e))}var u7=c7;function f7(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var d7=f7;function h7(){return[]}var p7=h7,g7=d7,m7=p7,y7=Object.prototype,v7=y7.propertyIsEnumerable,i2=Object.getOwnPropertySymbols,x7=i2?function(e){return e==null?[]:(e=Object(e),g7(i2(e),function(t){return v7.call(e,t)}))}:m7,b7=x7;function w7(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var k7=w7,S7=Gi,j7=Wi,P7="[object Arguments]";function C7(e){return j7(e)&&S7(e)==P7}var O7=C7,o2=O7,N7=Wi,nj=Object.prototype,_7=nj.hasOwnProperty,M7=nj.propertyIsEnumerable,A7=o2(function(){return arguments}())?o2:function(e){return N7(e)&&_7.call(e,"callee")&&!M7.call(e,"callee")},kx=A7,i0={exports:{}};function T7(){return!1}var E7=T7;i0.exports;(function(e,t){var r=gi,n=E7,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(i0,i0.exports);var aj=i0.exports,$7=9007199254740991,D7=/^(?:0|[1-9]\d*)$/;function I7(e,t){var r=typeof e;return t=t??$7,!!t&&(r=="number"||r!="symbol"&&D7.test(e))&&e>-1&&e%1==0&&e<t}var Sx=I7,R7=9007199254740991;function L7(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=R7}var jx=L7,B7=Gi,F7=jx,z7=Wi,U7="[object Arguments]",G7="[object Array]",W7="[object Boolean]",V7="[object Date]",H7="[object Error]",X7="[object Function]",K7="[object Map]",Y7="[object Number]",q7="[object Object]",Z7="[object RegExp]",Q7="[object Set]",J7="[object String]",e9="[object WeakMap]",t9="[object ArrayBuffer]",r9="[object DataView]",n9="[object Float32Array]",a9="[object Float64Array]",i9="[object Int8Array]",o9="[object Int16Array]",s9="[object Int32Array]",l9="[object Uint8Array]",c9="[object Uint8ClampedArray]",u9="[object Uint16Array]",f9="[object Uint32Array]",Zt={};Zt[n9]=Zt[a9]=Zt[i9]=Zt[o9]=Zt[s9]=Zt[l9]=Zt[c9]=Zt[u9]=Zt[f9]=!0;Zt[U7]=Zt[G7]=Zt[t9]=Zt[W7]=Zt[r9]=Zt[V7]=Zt[H7]=Zt[X7]=Zt[K7]=Zt[Y7]=Zt[q7]=Zt[Z7]=Zt[Q7]=Zt[J7]=Zt[e9]=!1;function d9(e){return z7(e)&&F7(e.length)&&!!Zt[B7(e)]}var h9=d9;function p9(e){return function(t){return e(t)}}var ij=p9,o0={exports:{}};o0.exports;(function(e,t){var r=d3,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(o0,o0.exports);var g9=o0.exports,m9=h9,y9=ij,s2=g9,l2=s2&&s2.isTypedArray,v9=l2?y9(l2):m9,oj=v9,x9=k7,b9=kx,w9=Zn,k9=aj,S9=Sx,j9=oj,P9=Object.prototype,C9=P9.hasOwnProperty;function O9(e,t){var r=w9(e),n=!r&&b9(e),a=!r&&!n&&k9(e),i=!r&&!n&&!a&&j9(e),o=r||n||a||i,s=o?x9(e.length,String):[],l=s.length;for(var u in e)(t||C9.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||S9(u,l)))&&s.push(u);return s}var N9=O9,_9=Object.prototype;function M9(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||_9;return e===r}var A9=M9;function T9(e,t){return function(r){return e(t(r))}}var sj=T9,E9=sj,$9=E9(Object.keys,Object),D9=$9,I9=A9,R9=D9,L9=Object.prototype,B9=L9.hasOwnProperty;function F9(e){if(!I9(e))return R9(e);var t=[];for(var r in Object(e))B9.call(e,r)&&r!="constructor"&&t.push(r);return t}var z9=F9,U9=ox,G9=jx;function W9(e){return e!=null&&G9(e.length)&&!U9(e)}var mf=W9,V9=N9,H9=z9,X9=mf;function K9(e){return X9(e)?V9(e):H9(e)}var Uh=K9,Y9=u7,q9=b7,Z9=Uh;function Q9(e){return Y9(e,Z9,q9)}var J9=Q9,c2=J9,eD=1,tD=Object.prototype,rD=tD.hasOwnProperty;function nD(e,t,r,n,a,i){var o=r&eD,s=c2(e),l=s.length,u=c2(t),f=u.length;if(l!=f&&!o)return!1;for(var d=l;d--;){var h=s[d];if(!(o?h in t:rD.call(t,h)))return!1}var p=i.get(e),m=i.get(t);if(p&&m)return p==t&&m==e;var y=!0;i.set(e,t),i.set(t,e);for(var w=o;++d<l;){h=s[d];var x=e[h],g=t[h];if(n)var v=o?n(g,x,h,t,e,i):n(x,g,h,e,t,i);if(!(v===void 0?x===g||a(x,g,r,n,i):v)){y=!1;break}w||(w=h=="constructor")}if(y&&!w){var S=e.constructor,b=t.constructor;S!=b&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof b=="function"&&b instanceof b)&&(y=!1)}return i.delete(e),i.delete(t),y}var aD=nD,iD=Ms,oD=gi,sD=iD(oD,"DataView"),lD=sD,cD=Ms,uD=gi,fD=cD(uD,"Promise"),dD=fD,hD=Ms,pD=gi,gD=hD(pD,"Set"),lj=gD,mD=Ms,yD=gi,vD=mD(yD,"WeakMap"),xD=vD,Vm=lD,Hm=lx,Xm=dD,Km=lj,Ym=xD,cj=Gi,oc=p3,u2="[object Map]",bD="[object Object]",f2="[object Promise]",d2="[object Set]",h2="[object WeakMap]",p2="[object DataView]",wD=oc(Vm),kD=oc(Hm),SD=oc(Xm),jD=oc(Km),PD=oc(Ym),Ko=cj;(Vm&&Ko(new Vm(new ArrayBuffer(1)))!=p2||Hm&&Ko(new Hm)!=u2||Xm&&Ko(Xm.resolve())!=f2||Km&&Ko(new Km)!=d2||Ym&&Ko(new Ym)!=h2)&&(Ko=function(e){var t=cj(e),r=t==bD?e.constructor:void 0,n=r?oc(r):"";if(n)switch(n){case wD:return p2;case kD:return u2;case SD:return f2;case jD:return d2;case PD:return h2}return t});var CD=Ko,rg=Z3,OD=tj,ND=i7,_D=aD,g2=CD,m2=Zn,y2=aj,MD=oj,AD=1,v2="[object Arguments]",x2="[object Array]",Kf="[object Object]",TD=Object.prototype,b2=TD.hasOwnProperty;function ED(e,t,r,n,a,i){var o=m2(e),s=m2(t),l=o?x2:g2(e),u=s?x2:g2(t);l=l==v2?Kf:l,u=u==v2?Kf:u;var f=l==Kf,d=u==Kf,h=l==u;if(h&&y2(e)){if(!y2(t))return!1;o=!0,f=!1}if(h&&!f)return i||(i=new rg),o||MD(e)?OD(e,t,r,n,a,i):ND(e,t,l,r,n,a,i);if(!(r&AD)){var p=f&&b2.call(e,"__wrapped__"),m=d&&b2.call(t,"__wrapped__");if(p||m){var y=p?e.value():e,w=m?t.value():t;return i||(i=new rg),a(y,w,r,n,i)}}return h?(i||(i=new rg),_D(e,t,r,n,a,i)):!1}var $D=ED,DD=$D,w2=Wi;function uj(e,t,r,n,a){return e===t?!0:e==null||t==null||!w2(e)&&!w2(t)?e!==e&&t!==t:DD(e,t,r,n,uj,a)}var Px=uj,ID=Z3,RD=Px,LD=1,BD=2;function FD(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var l=s[0],u=e[l],f=s[1];if(o&&s[2]){if(u===void 0&&!(l in e))return!1}else{var d=new ID;if(n)var h=n(u,f,l,e,t,d);if(!(h===void 0?RD(f,u,LD|BD,n,d):h))return!1}}return!0}var zD=FD,UD=To;function GD(e){return e===e&&!UD(e)}var fj=GD,WD=fj,VD=Uh;function HD(e){for(var t=VD(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,WD(a)]}return t}var XD=HD;function KD(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var dj=KD,YD=zD,qD=XD,ZD=dj;function QD(e){var t=qD(e);return t.length==1&&t[0][2]?ZD(t[0][0],t[0][1]):function(r){return r===e||YD(r,e,t)}}var JD=QD;function eI(e,t){return e!=null&&t in Object(e)}var tI=eI,rI=x3,nI=kx,aI=Zn,iI=Sx,oI=jx,sI=Ch;function lI(e,t,r){t=rI(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=sI(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&oI(a)&&iI(o,a)&&(aI(e)||nI(e)))}var cI=lI,uI=tI,fI=cI;function dI(e,t){return e!=null&&fI(e,t,uI)}var hI=dI,pI=Px,gI=b3,mI=hI,yI=ix,vI=fj,xI=dj,bI=Ch,wI=1,kI=2;function SI(e,t){return yI(e)&&vI(t)?xI(bI(e),t):function(r){var n=gI(r,e);return n===void 0&&n===t?mI(r,e):pI(t,n,wI|kI)}}var jI=SI;function PI(e){return e}var sc=PI;function CI(e){return function(t){return t==null?void 0:t[e]}}var OI=CI,NI=dx;function _I(e){return function(t){return NI(t,e)}}var MI=_I,AI=OI,TI=MI,EI=ix,$I=Ch;function DI(e){return EI(e)?AI($I(e)):TI(e)}var II=DI,RI=JD,LI=jI,BI=sc,FI=Zn,zI=II;function UI(e){return typeof e=="function"?e:e==null?BI:typeof e=="object"?FI(e)?LI(e[0],e[1]):RI(e):zI(e)}var Eo=UI;function GI(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var hj=GI;function WI(e){return e!==e}var VI=WI;function HI(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var XI=HI,KI=hj,YI=VI,qI=XI;function ZI(e,t,r){return t===t?qI(e,t,r):KI(e,YI,r)}var QI=ZI,JI=QI;function eR(e,t){var r=e==null?0:e.length;return!!r&&JI(e,t,0)>-1}var tR=eR;function rR(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var nR=rR;function aR(){}var iR=aR,ng=lj,oR=iR,sR=wx,lR=1/0,cR=ng&&1/sR(new ng([,-0]))[1]==lR?function(e){return new ng(e)}:oR,uR=cR,fR=Q3,dR=tR,hR=nR,pR=ej,gR=uR,mR=wx,yR=200;function vR(e,t,r){var n=-1,a=dR,i=e.length,o=!0,s=[],l=s;if(r)o=!1,a=hR;else if(i>=yR){var u=t?null:gR(e);if(u)return mR(u);o=!1,a=pR,l=new fR}else l=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(f)}else a(l,d,r)||(l!==s&&l.push(d),s.push(f))}return s}var xR=vR,bR=Eo,wR=xR;function kR(e,t){return e&&e.length?wR(e,bR(t)):[]}var SR=kR;const k2=zt(SR);function pj(e,t,r){return t===!0?k2(e,r):Ke(t)?k2(e,t):e}function Cl(e){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cl(e)}var jR=["ref"];function S2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(r),!0).forEach(function(n){Gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mj(n.key),n)}}function CR(e,t,r){return t&&j2(e.prototype,t),r&&j2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OR(e,t,r){return t=s0(t),NR(e,gj()?Reflect.construct(t,r||[],s0(e).constructor):t.apply(e,r))}function NR(e,t){if(t&&(Cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _R(e)}function _R(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gj=function(){return!!e})()}function s0(e){return s0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s0(e)}function MR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qm(e,t)}function qm(e,t){return qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qm(e,t)}function Gh(e,t,r){return t=mj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mj(e){var t=AR(e,"string");return Cl(t)=="symbol"?t:t+""}function AR(e,t){if(Cl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function TR(e,t){if(e==null)return{};var r=ER(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ER(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $R(e){return e.value}function DR(e,t){if(L.isValidElement(e))return L.cloneElement(e,t);if(typeof e=="function")return L.createElement(e,t);t.ref;var r=TR(t,jR);return L.createElement(bx,r)}var P2=1,si=function(e){function t(){var r;PR(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=OR(this,t,[].concat(a)),Gh(r,"lastBoundingBox",{width:-1,height:-1}),r}return MR(t,e),CR(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>P2||Math.abs(a.height-this.lastBoundingBox.height)>P2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?xi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();h={top:((f||0)-m.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return xi(xi({},d),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=xi(xi({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return L.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},DR(i,xi(xi({},this.props),{},{payload:pj(f,u,$R)})))}}],[{key:"getWithHeight",value:function(n,a){var i=xi(xi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&de(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);Gh(si,"displayName","Legend");Gh(si,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var C2=gf,IR=kx,RR=Zn,O2=C2?C2.isConcatSpreadable:void 0;function LR(e){return RR(e)||IR(e)||!!(O2&&e&&e[O2])}var BR=LR,FR=rj,zR=BR;function yj(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=zR),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?yj(s,t-1,r,n,a):FR(a,s):n||(a[a.length]=s)}return a}var vj=yj;function UR(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(r(i[l],l,i)===!1)break}return t}}var GR=UR,WR=GR,VR=WR(),HR=VR,XR=HR,KR=Uh;function YR(e,t){return e&&XR(e,t,KR)}var xj=YR,qR=mf;function ZR(e,t){return function(r,n){if(r==null)return r;if(!qR(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var QR=ZR,JR=xj,eL=QR,tL=eL(JR),Cx=tL,rL=Cx,nL=mf;function aL(e,t){var r=-1,n=nL(e)?Array(e.length):[];return rL(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var bj=aL;function iL(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var oL=iL,N2=Jl;function sL(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=N2(e),o=t!==void 0,s=t===null,l=t===t,u=N2(t);if(!s&&!u&&!i&&e>t||i&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!l)return-1}return 0}var lL=sL,cL=lL;function uL(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var l=cL(a[n],i[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var fL=uL,ag=fx,dL=dx,hL=Eo,pL=bj,gL=oL,mL=ij,yL=fL,vL=sc,xL=Zn;function bL(e,t,r){t.length?t=ag(t,function(i){return xL(i)?function(o){return dL(o,i.length===1?i[0]:i)}:i}):t=[vL];var n=-1;t=ag(t,mL(hL));var a=pL(e,function(i,o,s){var l=ag(t,function(u){return u(i)});return{criteria:l,index:++n,value:i}});return gL(a,function(i,o){return yL(i,o,r)})}var wL=bL;function kL(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var SL=kL,jL=SL,_2=Math.max;function PL(e,t,r){return t=_2(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=_2(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),jL(e,this,s)}}var CL=PL;function OL(e){return function(){return e}}var NL=OL,_L=Ms,ML=function(){try{var e=_L(Object,"defineProperty");return e({},"",{}),e}catch{}}(),wj=ML,AL=NL,M2=wj,TL=sc,EL=M2?function(e,t){return M2(e,"toString",{configurable:!0,enumerable:!1,value:AL(t),writable:!0})}:TL,$L=EL,DL=800,IL=16,RL=Date.now;function LL(e){var t=0,r=0;return function(){var n=RL(),a=IL-(n-r);if(r=n,a>0){if(++t>=DL)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var BL=LL,FL=$L,zL=BL,UL=zL(FL),GL=UL,WL=sc,VL=CL,HL=GL;function XL(e,t){return HL(VL(e,t,WL),e+"")}var KL=XL,YL=sx,qL=mf,ZL=Sx,QL=To;function JL(e,t,r){if(!QL(r))return!1;var n=typeof t;return(n=="number"?qL(r)&&ZL(t,r.length):n=="string"&&t in r)?YL(r[t],e):!1}var Wh=JL,eB=vj,tB=wL,rB=KL,A2=Wh,nB=rB(function(e,t){if(e==null)return[];var r=t.length;return r>1&&A2(e,t[0],t[1])?t=[]:r>2&&A2(t[0],t[1],t[2])&&(t=[t[0]]),tB(e,eB(t,1),[])}),aB=nB;const Ox=zt(aB);function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zm.apply(this,arguments)}function iB(e,t){return cB(e)||lB(e,t)||sB(e,t)||oB()}function oB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sB(e,t){if(e){if(typeof e=="string")return T2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T2(e,t)}}function T2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lB(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function cB(e){if(Array.isArray(e))return e}function E2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E2(Object(r),!0).forEach(function(n){uB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uB(e,t,r){return t=fB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fB(e){var t=dB(e,"string");return _u(t)=="symbol"?t:t+""}function dB(e,t){if(_u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hB(e){return Array.isArray(e)&&Wr(e[0])&&Wr(e[1])?e.join(" ~ "):e}var pB=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,m=t.labelClassName,y=t.label,w=t.labelFormatter,x=t.accessibilityLayer,g=x===void 0?!1:x,v=function(){if(f&&f.length){var O={padding:0,margin:0},M=(h?Ox(f,h):f).map(function(D,E){if(D.type==="none")return null;var B=ig({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s),_=D.formatter||d||hB,I=D.value,z=D.name,U=I,ne=z;if(_&&U!=null&&ne!=null){var V=_(I,z,D,E,f);if(Array.isArray(V)){var F=iB(V,2);U=F[0],ne=F[1]}else U=V}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:B},Wr(ne)?L.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,Wr(ne)?L.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,L.createElement("span",{className:"recharts-tooltip-item-value"},U),L.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:O},M)}return null},S=ig({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),b=ig({margin:0},u),k=!Ve(y),C=k?y:"",P=st("recharts-default-tooltip",p),N=st("recharts-tooltip-label",m);k&&w&&f!==void 0&&f!==null&&(C=w(y,f));var A=g?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",Zm({className:P,style:S},A),L.createElement("p",{className:N,style:b},L.isValidElement(C)?C:"".concat(C)),v())};function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function Yf(e,t,r){return t=gB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gB(e){var t=mB(e,"string");return Mu(t)=="symbol"?t:t+""}function mB(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _c="recharts-tooltip-wrapper",yB={visibility:"hidden"};function vB(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return st(_c,Yf(Yf(Yf(Yf({},"".concat(_c,"-right"),de(r)&&t&&de(t.x)&&r>=t.x),"".concat(_c,"-left"),de(r)&&t&&de(t.x)&&r<t.x),"".concat(_c,"-bottom"),de(n)&&t&&de(t.y)&&n>=t.y),"".concat(_c,"-top"),de(n)&&t&&de(t.y)&&n<t.y))}function $2(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(i&&de(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var h=f,p=l[n];return h<p?Math.max(d,l[n]):Math.max(f,l[n])}var m=d+s,y=l[n]+u;return m>y?Math.max(f,l[n]):Math.max(d,l[n])}function xB(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function bB(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=$2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=$2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=xB({translateX:f,translateY:d,useTranslate3d:s})):u=yB,{cssProperties:u,cssClasses:vB({translateX:f,translateY:d,coordinate:r})}}function Ol(e){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(e)}function D2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function I2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(r),!0).forEach(function(n){Jm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sj(n.key),n)}}function SB(e,t,r){return t&&kB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jB(e,t,r){return t=l0(t),PB(e,kj()?Reflect.construct(t,r||[],l0(e).constructor):t.apply(e,r))}function PB(e,t){if(t&&(Ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CB(e)}function CB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kj=function(){return!!e})()}function l0(e){return l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l0(e)}function OB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qm(e,t)}function Qm(e,t){return Qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qm(e,t)}function Jm(e,t,r){return t=Sj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sj(e){var t=NB(e,"string");return Ol(t)=="symbol"?t:t+""}function NB(e,t){if(Ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var R2=1,_B=function(e){function t(){var r;wB(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=jB(this,t,[].concat(a)),Jm(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Jm(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return OB(t,e),SB(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>R2||Math.abs(n.height-this.state.lastBoundingBox.height)>R2)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,p=a.offset,m=a.position,y=a.reverseDirection,w=a.useTranslate3d,x=a.viewBox,g=a.wrapperStyle,v=bB({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:m,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:x}),S=v.cssClasses,b=v.cssProperties,k=I2(I2({transition:h&&i?"transform ".concat(s,"ms ").concat(l):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},g);return L.createElement("div",{tabIndex:-1,className:S,style:k,ref:function(P){n.wrapperNode=P}},u)}}])}(j.PureComponent),MB=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},$o={isSsr:MB()};function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(n){Nx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pj(n.key),n)}}function EB(e,t,r){return t&&TB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $B(e,t,r){return t=c0(t),DB(e,jj()?Reflect.construct(t,r||[],c0(e).constructor):t.apply(e,r))}function DB(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IB(e)}function IB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jj=function(){return!!e})()}function c0(e){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c0(e)}function RB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ey(e,t)}function ey(e,t){return ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ey(e,t)}function Nx(e,t,r){return t=Pj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pj(e){var t=LB(e,"string");return Nl(t)=="symbol"?t:t+""}function LB(e,t){if(Nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function BB(e){return e.dataKey}function FB(e,t){return L.isValidElement(e)?L.cloneElement(e,t):typeof e=="function"?L.createElement(e,t):L.createElement(pB,t)}var Zr=function(e){function t(){return AB(this,t),$B(this,t,arguments)}return RB(t,e),EB(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,p=a.offset,m=a.payload,y=a.payloadUniqBy,w=a.position,x=a.reverseDirection,g=a.useTranslate3d,v=a.viewBox,S=a.wrapperStyle,b=m??[];d&&b.length&&(b=pj(m.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),y,BB));var k=b.length>0;return L.createElement(_B,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:i,coordinate:f,hasPayload:k,offset:p,position:w,reverseDirection:x,useTranslate3d:g,viewBox:v,wrapperStyle:S},FB(u,B2(B2({},this.props),{},{payload:b})))}}])}(j.PureComponent);Nx(Zr,"displayName","Tooltip");Nx(Zr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!$o.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zB=gi,UB=function(){return zB.Date.now()},GB=UB,WB=/\s/;function VB(e){for(var t=e.length;t--&&WB.test(e.charAt(t)););return t}var HB=VB,XB=HB,KB=/^\s+/;function YB(e){return e&&e.slice(0,XB(e)+1).replace(KB,"")}var qB=YB,ZB=qB,F2=To,QB=Jl,z2=NaN,JB=/^[-+]0x[0-9a-f]+$/i,eF=/^0b[01]+$/i,tF=/^0o[0-7]+$/i,rF=parseInt;function nF(e){if(typeof e=="number")return e;if(QB(e))return z2;if(F2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=F2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ZB(e);var r=eF.test(e);return r||tF.test(e)?rF(e.slice(2),r?2:8):JB.test(e)?z2:+e}var Cj=nF,aF=To,og=GB,U2=Cj,iF="Expected a function",oF=Math.max,sF=Math.min;function lF(e,t,r){var n,a,i,o,s,l,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(iF);t=U2(t)||0,aF(r)&&(f=!!r.leading,d="maxWait"in r,i=d?oF(U2(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function p(k){var C=n,P=a;return n=a=void 0,u=k,o=e.apply(P,C),o}function m(k){return u=k,s=setTimeout(x,t),f?p(k):o}function y(k){var C=k-l,P=k-u,N=t-C;return d?sF(N,i-P):N}function w(k){var C=k-l,P=k-u;return l===void 0||C>=t||C<0||d&&P>=i}function x(){var k=og();if(w(k))return g(k);s=setTimeout(x,y(k))}function g(k){return s=void 0,h&&n?p(k):(n=a=void 0,o)}function v(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function S(){return s===void 0?o:g(og())}function b(){var k=og(),C=w(k);if(n=arguments,a=this,l=k,C){if(s===void 0)return m(l);if(d)return clearTimeout(s),s=setTimeout(x,t),p(l)}return s===void 0&&(s=setTimeout(x,t)),o}return b.cancel=v,b.flush=S,b}var cF=lF,uF=cF,fF=To,dF="Expected a function";function hF(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(dF);return fF(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),uF(e,t,{leading:n,maxWait:t,trailing:a})}var pF=hF;const Oj=zt(pF);function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function G2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(r),!0).forEach(function(n){gF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gF(e,t,r){return t=mF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mF(e){var t=yF(e,"string");return Au(t)=="symbol"?t:t+""}function yF(e,t){if(Au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vF(e,t){return kF(e)||wF(e,t)||bF(e,t)||xF()}function xF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bF(e,t){if(e){if(typeof e=="string")return W2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W2(e,t)}}function W2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wF(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function kF(e){if(Array.isArray(e))return e}var Ei=j.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,p=e.children,m=e.debounce,y=m===void 0?0:m,w=e.id,x=e.className,g=e.onResize,v=e.style,S=v===void 0?{}:v,b=j.useRef(null),k=j.useRef();k.current=g,j.useImperativeHandle(t,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var C=j.useState({containerWidth:a.width,containerHeight:a.height}),P=vF(C,2),N=P[0],A=P[1],T=j.useCallback(function(M,D){A(function(E){var B=Math.round(M),_=Math.round(D);return E.containerWidth===B&&E.containerHeight===_?E:{containerWidth:B,containerHeight:_}})},[]);j.useEffect(function(){var M=function(z){var U,ne=z[0].contentRect,V=ne.width,F=ne.height;T(V,F),(U=k.current)===null||U===void 0||U.call(k,V,F)};y>0&&(M=Oj(M,y,{trailing:!0,leading:!1}));var D=new ResizeObserver(M),E=b.current.getBoundingClientRect(),B=E.width,_=E.height;return T(B,_),D.observe(b.current),function(){D.disconnect()}},[T,y]);var O=j.useMemo(function(){var M=N.containerWidth,D=N.containerHeight;if(M<0||D<0)return null;Ti(Jo(o)||Jo(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Ti(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Jo(o)?M:o,B=Jo(l)?D:l;r&&r>0&&(E?B=E/r:B&&(E=B*r),h&&B>h&&(B=h)),Ti(E>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,B,o,l,f,d,r);var _=!Array.isArray(p)&&Ai(p.type).endsWith("Chart");return L.Children.map(p,function(I){return L.isValidElement(I)?j.cloneElement(I,qf({width:E,height:B},_?{style:qf({height:"100%",width:"100%",maxHeight:B,maxWidth:E},I.props.style)}:{})):I})},[r,p,l,h,d,f,N,o]);return L.createElement("div",{id:w?"".concat(w):void 0,className:st("recharts-responsive-container",x),style:qf(qf({},S),{},{width:o,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:b},O)}),_x=function(t){return null};_x.displayName="Cell";function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function V2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ty(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(r),!0).forEach(function(n){SF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SF(e,t,r){return t=jF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jF(e){var t=PF(e,"string");return Tu(t)=="symbol"?t:t+""}function PF(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fs={widthCache:{},cacheCount:0},CF=2e3,OF={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},H2="recharts_measurement_span";function NF(e){var t=ty({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var tu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||$o.isSsr)return{width:0,height:0};var n=NF(r),a=JSON.stringify({text:t,copyStyle:n});if(Fs.widthCache[a])return Fs.widthCache[a];try{var i=document.getElementById(H2);i||(i=document.createElement("span"),i.setAttribute("id",H2),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=ty(ty({},OF),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Fs.widthCache[a]=l,++Fs.cacheCount>CF&&(Fs.cacheCount=0,Fs.widthCache={}),l}catch{return{width:0,height:0}}},_F=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function u0(e,t){return EF(e)||TF(e,t)||AF(e,t)||MF()}function MF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AF(e,t){if(e){if(typeof e=="string")return X2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X2(e,t)}}function X2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TF(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function EF(e){if(Array.isArray(e))return e}function $F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IF(n.key),n)}}function DF(e,t,r){return t&&K2(e.prototype,t),r&&K2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IF(e){var t=RF(e,"string");return Eu(t)=="symbol"?t:t+""}function RF(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Y2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,q2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,BF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Nj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FF=Object.keys(Nj),rl="NaN";function zF(e,t){return e*Nj[t]}var Zf=function(){function e(t,r){$F(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!LF.test(r)&&(this.num=NaN,this.unit=""),FF.includes(r)&&(this.num=zF(t,r),this.unit="px")}return DF(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=BF.exec(r))!==null&&n!==void 0?n:[],i=u0(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function _j(e){if(e.includes(rl))return rl;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Y2.exec(t))!==null&&r!==void 0?r:[],a=u0(n,4),i=a[1],o=a[2],s=a[3],l=Zf.parse(i??""),u=Zf.parse(s??""),f=o==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return rl;t=t.replace(Y2,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=q2.exec(t))!==null&&d!==void 0?d:[],p=u0(h,4),m=p[1],y=p[2],w=p[3],x=Zf.parse(m??""),g=Zf.parse(w??""),v=y==="+"?x.add(g):x.subtract(g);if(v.isNaN())return rl;t=t.replace(q2,v.toString())}return t}var Z2=/\(([^()]*)\)/;function UF(e){for(var t=e;t.includes("(");){var r=Z2.exec(t),n=u0(r,2),a=n[1];t=t.replace(Z2,_j(a))}return t}function GF(e){var t=e.replace(/\s+/g,"");return t=UF(t),t=_j(t),t}function WF(e){try{return GF(e)}catch{return rl}}function sg(e){var t=WF(e.slice(5,-1));return t===rl?"":t}var VF=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],HF=["dx","dy","angle","className","breakAll"];function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ry.apply(this,arguments)}function Q2(e,t){if(e==null)return{};var r=XF(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function J2(e,t){return ZF(e)||qF(e,t)||YF(e,t)||KF()}function KF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YF(e,t){if(e){if(typeof e=="string")return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}}function ew(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qF(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function ZF(e){if(Array.isArray(e))return e}var Mj=/[ \f\n\r\t\v\u2028\u2029]+/,Aj=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Ve(r)||(n?i=r.toString().split(""):i=r.toString().split(Mj));var o=i.map(function(l){return{word:l,width:tu(l,a).width}}),s=n?0:tu("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},QF=function(t,r,n,a,i){var o=t.maxLines,s=t.children,l=t.style,u=t.breakAll,f=de(o),d=s,h=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E.reduce(function(B,_){var I=_.word,z=_.width,U=B[B.length-1];if(U&&(a==null||i||U.width+z+n<Number(a)))U.words.push(I),U.width+=z+n;else{var ne={words:[I],width:z};B.push(ne)}return B},[])},p=h(r),m=function(E){return E.reduce(function(B,_){return B.width>_.width?B:_})};if(!f)return p;for(var y="",w=function(E){var B=d.slice(0,E),_=Aj({breakAll:u,style:l,children:B+y}).wordsWithComputedWidth,I=h(_),z=I.length>o||m(I).width>Number(a);return[z,I]},x=0,g=d.length-1,v=0,S;x<=g&&v<=d.length-1;){var b=Math.floor((x+g)/2),k=b-1,C=w(k),P=J2(C,2),N=P[0],A=P[1],T=w(b),O=J2(T,1),M=O[0];if(!N&&!M&&(x=b+1),N&&M&&(g=b-1),!N&&M){S=A;break}v++}return S||p},tw=function(t){var r=Ve(t)?[]:t.toString().split(Mj);return[{words:r}]},JF=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!$o.isSsr){var l,u,f=Aj({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,u=h}else return tw(a);return QF({breakAll:o,children:a,maxLines:s,style:i},l,u,r,n)}return tw(a)},rw="#808080",f0=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,m=t.verticalAnchor,y=m===void 0?"end":m,w=t.fill,x=w===void 0?rw:w,g=Q2(t,VF),v=j.useMemo(function(){return JF({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),S=g.dx,b=g.dy,k=g.angle,C=g.className,P=g.breakAll,N=Q2(g,HF);if(!Wr(n)||!Wr(i))return null;var A=n+(de(S)?S:0),T=i+(de(b)?b:0),O;switch(y){case"start":O=sg("calc(".concat(u,")"));break;case"middle":O=sg("calc(".concat((v.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:O=sg("calc(".concat(v.length-1," * -").concat(s,")"));break}var M=[];if(d){var D=v[0].width,E=g.width;M.push("scale(".concat((de(E)?E/D:1)/D,")"))}return k&&M.push("rotate(".concat(k,", ").concat(A,", ").concat(T,")")),M.length&&(N.transform=M.join(" ")),L.createElement("text",ry({},Xe(N,!0),{x:A,y:T,className:st("recharts-text",C),textAnchor:p,fill:x.includes("url")?rw:x}),v.map(function(B,_){var I=B.words.join(P?"":" ");return L.createElement("tspan",{x:A,dy:_===0?O:s,key:"".concat(I,"-").concat(_)},I)}))};function Po(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ez(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mx(e){let t,r,n;e.length!==2?(t=Po,r=(s,l)=>Po(e(s),l),n=(s,l)=>e(s)-l):(t=e===Po||e===ez?e:tz,r=e,n=e);function a(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){const d=a(s,l,u,f-1);return d>u&&n(s[d-1],l)>-n(s[d],l)?d-1:d}return{left:a,center:o,right:i}}function tz(){return 0}function Tj(e){return e===null?NaN:+e}function*rz(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const nz=Mx(Po),yf=nz.right;Mx(Tj).center;class nw extends Map{constructor(t,r=oz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(aw(this,t))}has(t){return super.has(aw(this,t))}set(t,r){return super.set(az(this,t),r)}delete(t){return super.delete(iz(this,t))}}function aw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function az({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function iz({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function oz(e){return e!==null&&typeof e=="object"?e.valueOf():e}function sz(e=Po){if(e===Po)return Ej;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Ej(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const lz=Math.sqrt(50),cz=Math.sqrt(10),uz=Math.sqrt(2);function d0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=lz?10:i>=cz?5:i>=uz?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?d0(e,t,r*2):[s,l,u]}function ny(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?d0(t,e,r):d0(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function ay(e,t,r){return t=+t,e=+e,r=+r,d0(e,t,r)[2]}function iy(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?ay(t,e,r):ay(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function iw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function ow(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function $j(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Ej:sz(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/l+h)),m=Math.min(n,Math.floor(t+(l-u)*d/l+h));$j(e,t,p,m,a)}const i=e[t];let o=r,s=n;for(Mc(e,r,t),a(e[n],i)>0&&Mc(e,r,n);o<s;){for(Mc(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?Mc(e,r,s):(++s,Mc(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function Mc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function fz(e,t,r){if(e=Float64Array.from(rz(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return ow(e);if(t>=1)return iw(e);var n,a=(n-1)*t,i=Math.floor(a),o=iw($j(e,i).subarray(0,i+1)),s=ow(e.subarray(i+1));return o+(s-o)*(a-i)}}function dz(e,t,r=Tj){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function hz(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Aa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const oy=Symbol("implicit");function Ax(){var e=new nw,t=[],r=[],n=oy;function a(i){let o=e.get(i);if(o===void 0){if(n!==oy)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new nw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Ax(t,r).unknown(n)},Aa.apply(a,arguments),a}function $u(){var e=Ax().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,p=a<n,m=p?a:n,y=p?n:a;i=(y-m)/Math.max(1,h-l+u*2),s&&(i=Math.floor(i)),m+=(y-m-i*(h-l))*f,o=i*(1-l),s&&(m=Math.round(m),o=Math.round(o));var w=hz(h).map(function(x){return m+i*x});return r(p?w.reverse():w)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return $u(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},Aa.apply(d(),arguments)}function Dj(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Dj(t())},e}function ru(){return Dj($u.apply(null,arguments).paddingInner(1))}function Tx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ij(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function vf(){}var Du=.7,h0=1/Du,dl="\\s*([+-]?\\d+)\\s*",Iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pz=/^#([0-9a-f]{3,8})$/,gz=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),mz=new RegExp(`^rgb\\(${li},${li},${li}\\)$`),yz=new RegExp(`^rgba\\(${dl},${dl},${dl},${Iu}\\)$`),vz=new RegExp(`^rgba\\(${li},${li},${li},${Iu}\\)$`),xz=new RegExp(`^hsl\\(${Iu},${li},${li}\\)$`),bz=new RegExp(`^hsla\\(${Iu},${li},${li},${Iu}\\)$`),sw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tx(vf,Ru,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lw,formatHex:lw,formatHex8:wz,formatHsl:kz,formatRgb:cw,toString:cw});function lw(){return this.rgb().formatHex()}function wz(){return this.rgb().formatHex8()}function kz(){return Rj(this).formatHsl()}function cw(){return this.rgb().formatRgb()}function Ru(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=pz.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?uw(t):r===3?new Wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Qf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Qf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gz.exec(e))?new Wn(t[1],t[2],t[3],1):(t=mz.exec(e))?new Wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yz.exec(e))?Qf(t[1],t[2],t[3],t[4]):(t=vz.exec(e))?Qf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xz.exec(e))?hw(t[1],t[2]/100,t[3]/100,1):(t=bz.exec(e))?hw(t[1],t[2]/100,t[3]/100,t[4]):sw.hasOwnProperty(e)?uw(sw[e]):e==="transparent"?new Wn(NaN,NaN,NaN,0):null}function uw(e){return new Wn(e>>16&255,e>>8&255,e&255,1)}function Qf(e,t,r,n){return n<=0&&(e=t=r=NaN),new Wn(e,t,r,n)}function Sz(e){return e instanceof vf||(e=Ru(e)),e?(e=e.rgb(),new Wn(e.r,e.g,e.b,e.opacity)):new Wn}function sy(e,t,r,n){return arguments.length===1?Sz(e):new Wn(e,t,r,n??1)}function Wn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Tx(Wn,sy,Ij(vf,{brighter(e){return e=e==null?h0:Math.pow(h0,e),new Wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Du:Math.pow(Du,e),new Wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wn(cs(this.r),cs(this.g),cs(this.b),p0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fw,formatHex:fw,formatHex8:jz,formatRgb:dw,toString:dw}));function fw(){return`#${es(this.r)}${es(this.g)}${es(this.b)}`}function jz(){return`#${es(this.r)}${es(this.g)}${es(this.b)}${es((isNaN(this.opacity)?1:this.opacity)*255)}`}function dw(){const e=p0(this.opacity);return`${e===1?"rgb(":"rgba("}${cs(this.r)}, ${cs(this.g)}, ${cs(this.b)}${e===1?")":`, ${e})`}`}function p0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function es(e){return e=cs(e),(e<16?"0":"")+e.toString(16)}function hw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ga(e,t,r,n)}function Rj(e){if(e instanceof Ga)return new Ga(e.h,e.s,e.l,e.opacity);if(e instanceof vf||(e=Ru(e)),!e)return new Ga;if(e instanceof Ga)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new Ga(o,s,l,e.opacity)}function Pz(e,t,r,n){return arguments.length===1?Rj(e):new Ga(e,t,r,n??1)}function Ga(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Tx(Ga,Pz,Ij(vf,{brighter(e){return e=e==null?h0:Math.pow(h0,e),new Ga(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Du:Math.pow(Du,e),new Ga(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Wn(lg(e>=240?e-240:e+120,a,n),lg(e,a,n),lg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ga(pw(this.h),Jf(this.s),Jf(this.l),p0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=p0(this.opacity);return`${e===1?"hsl(":"hsla("}${pw(this.h)}, ${Jf(this.s)*100}%, ${Jf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pw(e){return e=(e||0)%360,e<0?e+360:e}function Jf(e){return Math.max(0,Math.min(1,e||0))}function lg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Ex=e=>()=>e;function Cz(e,t){return function(r){return e+r*t}}function Oz(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Nz(e){return(e=+e)==1?Lj:function(t,r){return r-t?Oz(t,r,e):Ex(isNaN(t)?r:t)}}function Lj(e,t){var r=t-e;return r?Cz(e,r):Ex(isNaN(e)?t:e)}const gw=function e(t){var r=Nz(t);function n(a,i){var o=r((a=sy(a)).r,(i=sy(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=Lj(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function _z(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function Mz(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Az(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=lc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function Tz(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function g0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ez(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=lc(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var ly=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cg=new RegExp(ly.source,"g");function $z(e){return function(){return e}}function Dz(e){return function(t){return e(t)+""}}function Iz(e,t){var r=ly.lastIndex=cg.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=ly.exec(e))&&(a=cg.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:g0(n,a)})),r=cg.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?Dz(l[0].x):$z(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function lc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Ex(t):(r==="number"?g0:r==="string"?(n=Ru(t))?(t=n,gw):Iz:t instanceof Ru?gw:t instanceof Date?Tz:Mz(t)?_z:Array.isArray(t)?Az:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ez:g0)(e,t)}function $x(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Rz(e,t){t===void 0&&(t=e,e=lc);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function Lz(e){return function(){return e}}function m0(e){return+e}var mw=[0,1];function En(e){return e}function cy(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Lz(isNaN(t)?NaN:.5)}function Bz(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Fz(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=cy(a,n),i=r(o,i)):(n=cy(n,a),i=r(i,o)),function(s){return i(n(s))}}function zz(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=cy(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=yf(e,s,1,n)-1;return i[l](a[l](s))}}function xf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vh(){var e=mw,t=mw,r=lc,n,a,i,o=En,s,l,u;function f(){var h=Math.min(e.length,t.length);return o!==En&&(o=Bz(e[0],e[h-1])),s=h>2?zz:Fz,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=s(e.map(n),t,r)))(n(o(h)))}return d.invert=function(h){return o(a((u||(u=s(t,e.map(n),g0)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,m0),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=$x,f()},d.clamp=function(h){return arguments.length?(o=h?!0:En,f()):o!==En},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,p){return n=h,a=p,f()}}function Dx(){return Vh()(En,En)}function Uz(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function y0(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function _l(e){return e=y0(Math.abs(e)),e?e[1]:NaN}function Gz(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Wz(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Vz=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lu(e){if(!(t=Vz.exec(e)))throw new Error("invalid format: "+e);var t;return new Ix({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Lu.prototype=Ix.prototype;function Ix(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ix.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hz(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var v0;function Xz(e,t){var r=y0(e,t);if(!r)return v0=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(v0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+y0(e,Math.max(0,t+i-1))[0]}function yw(e,t){var r=y0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const vw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Uz,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yw(e*100,t),r:yw,s:Xz,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xw(e){return e}var bw=Array.prototype.map,ww=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Kz(e){var t=e.grouping===void 0||e.thousands===void 0?xw:Gz(bw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?xw:Wz(bw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d,h){d=Lu(d);var p=d.fill,m=d.align,y=d.sign,w=d.symbol,x=d.zero,g=d.width,v=d.comma,S=d.precision,b=d.trim,k=d.type;k==="n"?(v=!0,k="g"):vw[k]||(S===void 0&&(S=12),b=!0,k="g"),(x||p==="0"&&m==="=")&&(x=!0,p="0",m="=");var C=(h&&h.prefix!==void 0?h.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),P=(w==="$"?n:/[%p]/.test(k)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),N=vw[k],A=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function T(O){var M=C,D=P,E,B,_;if(k==="c")D=N(O)+D,O="";else{O=+O;var I=O<0||1/O<0;if(O=isNaN(O)?l:N(Math.abs(O),S),b&&(O=Hz(O)),I&&+O==0&&y!=="+"&&(I=!1),M=(I?y==="("?y:s:y==="-"||y==="("?"":y)+M,D=(k==="s"&&!isNaN(O)&&v0!==void 0?ww[8+v0/3]:"")+D+(I&&y==="("?")":""),A){for(E=-1,B=O.length;++E<B;)if(_=O.charCodeAt(E),48>_||_>57){D=(_===46?a+O.slice(E+1):O.slice(E))+D,O=O.slice(0,E);break}}}v&&!x&&(O=t(O,1/0));var z=M.length+O.length+D.length,U=z<g?new Array(g-z+1).join(p):"";switch(v&&x&&(O=t(U+O,U.length?g-D.length:1/0),U=""),m){case"<":O=M+O+D+U;break;case"=":O=M+U+O+D;break;case"^":O=U.slice(0,z=U.length>>1)+M+O+D+U.slice(z);break;default:O=U+M+O+D;break}return i(O)}return T.toString=function(){return d+""},T}function f(d,h){var p=Math.max(-8,Math.min(8,Math.floor(_l(h)/3)))*3,m=Math.pow(10,-p),y=u((d=Lu(d),d.type="f",d),{suffix:ww[8+p/3]});return function(w){return y(m*w)}}return{format:u,formatPrefix:f}}var ed,Rx,Bj;Yz({thousands:",",grouping:[3],currency:["$",""]});function Yz(e){return ed=Kz(e),Rx=ed.format,Bj=ed.formatPrefix,ed}function qz(e){return Math.max(0,-_l(Math.abs(e)))}function Zz(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_l(t)/3)))*3-_l(Math.abs(e)))}function Qz(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_l(t)-_l(e))+1}function Fj(e,t,r,n){var a=iy(e,t,r),i;switch(n=Lu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Zz(a,o))&&(n.precision=i),Bj(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Qz(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=qz(a))&&(n.precision=i-(n.type==="%")*2);break}}return Rx(n)}function Do(e){var t=e.domain;return e.ticks=function(r){var n=t();return ny(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Fj(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=ay(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function x0(){var e=Dx();return e.copy=function(){return xf(e,x0())},Aa.apply(e,arguments),Do(e)}function zj(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,m0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return zj(e).unknown(t)},e=arguments.length?Array.from(e,m0):[0,1],Do(r)}function Uj(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function kw(e){return Math.log(e)}function Sw(e){return Math.exp(e)}function Jz(e){return-Math.log(-e)}function eU(e){return-Math.exp(-e)}function tU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function rU(e){return e===10?tU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function jw(e){return(t,r)=>-e(-t,r)}function Lx(e){const t=e(kw,Sw),r=t.domain;let n=10,a,i;function o(){return a=nU(n),i=rU(n),r()[0]<0?(a=jw(a),i=jw(i),e(Jz,eU)):e(kw,Sw),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),p=a(f),m,y;const w=s==null?10:+s;let x=[];if(!(n%1)&&p-h<w){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<n;++m)if(y=h<0?m/i(-h):m*i(h),!(y<u)){if(y>f)break;x.push(y)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(y=h>0?m/i(-h):m*i(h),!(y<u)){if(y>f)break;x.push(y)}x.length*2<w&&(x=ny(u,f,w))}else x=ny(h,p,Math.min(p-h,w)).map(i);return d?x.reverse():x},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Lu(l)).precision==null&&(l.trim=!0),l=Rx(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?l(f):""}},t.nice=()=>r(Uj(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function Gj(){const e=Lx(Vh()).domain([1,10]);return e.copy=()=>xf(e,Gj()).base(e.base()),Aa.apply(e,arguments),e}function Pw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Cw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Bx(e){var t=1,r=e(Pw(t),Cw(t));return r.constant=function(n){return arguments.length?e(Pw(t=+n),Cw(t)):t},Do(r)}function Wj(){var e=Bx(Vh());return e.copy=function(){return xf(e,Wj()).constant(e.constant())},Aa.apply(e,arguments)}function Ow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function aU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iU(e){return e<0?-e*e:e*e}function Fx(e){var t=e(En,En),r=1;function n(){return r===1?e(En,En):r===.5?e(aU,iU):e(Ow(r),Ow(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Do(t)}function zx(){var e=Fx(Vh());return e.copy=function(){return xf(e,zx()).exponent(e.exponent())},Aa.apply(e,arguments),e}function oU(){return zx.apply(null,arguments).exponent(.5)}function Nw(e){return Math.sign(e)*e*e}function sU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Vj(){var e=Dx(),t=[0,1],r=!1,n;function a(i){var o=sU(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(Nw(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,m0)).map(Nw)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Vj(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Aa.apply(a,arguments),Do(a)}function Hj(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=dz(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[yf(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Po),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return Hj().domain(e).range(t).unknown(n)},Aa.apply(i,arguments)}function Xj(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[yf(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Xj().domain([e,t]).range(a).unknown(i)},Aa.apply(Do(o),arguments)}function Kj(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[yf(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Kj().domain(e).range(t).unknown(r)},Aa.apply(a,arguments)}const ug=new Date,fg=new Date;function Hr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>Hr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(ug.setTime(+i),fg.setTime(+o),e(ug),e(fg),Math.floor(r(ug,fg))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const b0=Hr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);b0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):b0);b0.range;const Ci=1e3,Sa=Ci*60,Oi=Sa*60,Bi=Oi*24,Ux=Bi*7,_w=Bi*30,dg=Bi*365,ts=Hr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ci)},(e,t)=>(t-e)/Ci,e=>e.getUTCSeconds());ts.range;const Gx=Hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ci)},(e,t)=>{e.setTime(+e+t*Sa)},(e,t)=>(t-e)/Sa,e=>e.getMinutes());Gx.range;const Wx=Hr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Sa)},(e,t)=>(t-e)/Sa,e=>e.getUTCMinutes());Wx.range;const Vx=Hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ci-e.getMinutes()*Sa)},(e,t)=>{e.setTime(+e+t*Oi)},(e,t)=>(t-e)/Oi,e=>e.getHours());Vx.range;const Hx=Hr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Oi)},(e,t)=>(t-e)/Oi,e=>e.getUTCHours());Hx.range;const bf=Hr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Sa)/Bi,e=>e.getDate()-1);bf.range;const Hh=Hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bi,e=>e.getUTCDate()-1);Hh.range;const Yj=Hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bi,e=>Math.floor(e/Bi));Yj.range;function Ts(e){return Hr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Sa)/Ux)}const Xh=Ts(0),w0=Ts(1),lU=Ts(2),cU=Ts(3),Ml=Ts(4),uU=Ts(5),fU=Ts(6);Xh.range;w0.range;lU.range;cU.range;Ml.range;uU.range;fU.range;function Es(e){return Hr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ux)}const Kh=Es(0),k0=Es(1),dU=Es(2),hU=Es(3),Al=Es(4),pU=Es(5),gU=Es(6);Kh.range;k0.range;dU.range;hU.range;Al.range;pU.range;gU.range;const Xx=Hr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Xx.range;const Kx=Hr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Kx.range;const Fi=Hr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Fi.range;const zi=Hr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());zi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});zi.range;function qj(e,t,r,n,a,i){const o=[[ts,1,Ci],[ts,5,5*Ci],[ts,15,15*Ci],[ts,30,30*Ci],[i,1,Sa],[i,5,5*Sa],[i,15,15*Sa],[i,30,30*Sa],[a,1,Oi],[a,3,3*Oi],[a,6,6*Oi],[a,12,12*Oi],[n,1,Bi],[n,2,2*Bi],[r,1,Ux],[t,1,_w],[t,3,3*_w],[e,1,dg]];function s(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:l(u,f,d),m=p?p.range(u,+f+1):[];return h?m.reverse():m}function l(u,f,d){const h=Math.abs(f-u)/d,p=Mx(([,,w])=>w).right(o,h);if(p===o.length)return e.every(iy(u/dg,f/dg,d));if(p===0)return b0.every(Math.max(iy(u,f,d),1));const[m,y]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return m.every(y)}return[s,l]}const[mU,yU]=qj(zi,Kx,Kh,Yj,Hx,Wx),[vU,xU]=qj(Fi,Xx,Xh,bf,Vx,Gx);function hg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function pg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ac(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function bU(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=Tc(a),f=Ec(a),d=Tc(i),h=Ec(i),p=Tc(o),m=Ec(o),y=Tc(s),w=Ec(s),x=Tc(l),g=Ec(l),v={a:_,A:I,b:z,B:U,c:null,d:Dw,e:Dw,f:GU,g:JU,G:tG,H:FU,I:zU,j:UU,L:Zj,m:WU,M:VU,p:ne,q:V,Q:Lw,s:Bw,S:HU,u:XU,U:KU,V:YU,w:qU,W:ZU,x:null,X:null,y:QU,Y:eG,Z:rG,"%":Rw},S={a:F,A:re,b:ee,B:$,c:null,d:Iw,e:Iw,f:oG,g:mG,G:vG,H:nG,I:aG,j:iG,L:Jj,m:sG,M:lG,p:ae,q,Q:Lw,s:Bw,S:cG,u:uG,U:fG,V:dG,w:hG,W:pG,x:null,X:null,y:gG,Y:yG,Z:xG,"%":Rw},b={a:A,A:T,b:O,B:M,c:D,d:Ew,e:Ew,f:IU,g:Tw,G:Aw,H:$w,I:$w,j:TU,L:DU,m:AU,M:EU,p:N,q:MU,Q:LU,s:BU,S:$U,u:PU,U:CU,V:OU,w:jU,W:NU,x:E,X:B,y:Tw,Y:Aw,Z:_U,"%":RU};v.x=k(r,v),v.X=k(n,v),v.c=k(t,v),S.x=k(r,S),S.X=k(n,S),S.c=k(t,S);function k(H,le){return function(ce){var Z=[],Ce=-1,we=0,Q=H.length,he,ve,qe;for(ce instanceof Date||(ce=new Date(+ce));++Ce<Q;)H.charCodeAt(Ce)===37&&(Z.push(H.slice(we,Ce)),(ve=Mw[he=H.charAt(++Ce)])!=null?he=H.charAt(++Ce):ve=he==="e"?" ":"0",(qe=le[he])&&(he=qe(ce,ve)),Z.push(he),we=Ce+1);return Z.push(H.slice(we,Ce)),Z.join("")}}function C(H,le){return function(ce){var Z=Ac(1900,void 0,1),Ce=P(Z,H,ce+="",0),we,Q;if(Ce!=ce.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(we=pg(Ac(Z.y,0,1)),Q=we.getUTCDay(),we=Q>4||Q===0?k0.ceil(we):k0(we),we=Hh.offset(we,(Z.V-1)*7),Z.y=we.getUTCFullYear(),Z.m=we.getUTCMonth(),Z.d=we.getUTCDate()+(Z.w+6)%7):(we=hg(Ac(Z.y,0,1)),Q=we.getDay(),we=Q>4||Q===0?w0.ceil(we):w0(we),we=bf.offset(we,(Z.V-1)*7),Z.y=we.getFullYear(),Z.m=we.getMonth(),Z.d=we.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),Q="Z"in Z?pg(Ac(Z.y,0,1)).getUTCDay():hg(Ac(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(Q+5)%7:Z.w+Z.U*7-(Q+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,pg(Z)):hg(Z)}}function P(H,le,ce,Z){for(var Ce=0,we=le.length,Q=ce.length,he,ve;Ce<we;){if(Z>=Q)return-1;if(he=le.charCodeAt(Ce++),he===37){if(he=le.charAt(Ce++),ve=b[he in Mw?le.charAt(Ce++):he],!ve||(Z=ve(H,ce,Z))<0)return-1}else if(he!=ce.charCodeAt(Z++))return-1}return Z}function N(H,le,ce){var Z=u.exec(le.slice(ce));return Z?(H.p=f.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function A(H,le,ce){var Z=p.exec(le.slice(ce));return Z?(H.w=m.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function T(H,le,ce){var Z=d.exec(le.slice(ce));return Z?(H.w=h.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function O(H,le,ce){var Z=x.exec(le.slice(ce));return Z?(H.m=g.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function M(H,le,ce){var Z=y.exec(le.slice(ce));return Z?(H.m=w.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function D(H,le,ce){return P(H,t,le,ce)}function E(H,le,ce){return P(H,r,le,ce)}function B(H,le,ce){return P(H,n,le,ce)}function _(H){return o[H.getDay()]}function I(H){return i[H.getDay()]}function z(H){return l[H.getMonth()]}function U(H){return s[H.getMonth()]}function ne(H){return a[+(H.getHours()>=12)]}function V(H){return 1+~~(H.getMonth()/3)}function F(H){return o[H.getUTCDay()]}function re(H){return i[H.getUTCDay()]}function ee(H){return l[H.getUTCMonth()]}function $(H){return s[H.getUTCMonth()]}function ae(H){return a[+(H.getUTCHours()>=12)]}function q(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var le=k(H+="",v);return le.toString=function(){return H},le},parse:function(H){var le=C(H+="",!1);return le.toString=function(){return H},le},utcFormat:function(H){var le=k(H+="",S);return le.toString=function(){return H},le},utcParse:function(H){var le=C(H+="",!0);return le.toString=function(){return H},le}}}var Mw={"-":"",_:" ",0:"0"},en=/^\s*\d+/,wU=/^%/,kU=/[\\^$*+?|[\]().{}]/g;function xt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function SU(e){return e.replace(kU,"\\$&")}function Tc(e){return new RegExp("^(?:"+e.map(SU).join("|")+")","i")}function Ec(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function jU(e,t,r){var n=en.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function PU(e,t,r){var n=en.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function CU(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function OU(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function NU(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Aw(e,t,r){var n=en.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Tw(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _U(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function MU(e,t,r){var n=en.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function AU(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Ew(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function TU(e,t,r){var n=en.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function $w(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function EU(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function $U(e,t,r){var n=en.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function DU(e,t,r){var n=en.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function IU(e,t,r){var n=en.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function RU(e,t,r){var n=wU.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function LU(e,t,r){var n=en.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function BU(e,t,r){var n=en.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Dw(e,t){return xt(e.getDate(),t,2)}function FU(e,t){return xt(e.getHours(),t,2)}function zU(e,t){return xt(e.getHours()%12||12,t,2)}function UU(e,t){return xt(1+bf.count(Fi(e),e),t,3)}function Zj(e,t){return xt(e.getMilliseconds(),t,3)}function GU(e,t){return Zj(e,t)+"000"}function WU(e,t){return xt(e.getMonth()+1,t,2)}function VU(e,t){return xt(e.getMinutes(),t,2)}function HU(e,t){return xt(e.getSeconds(),t,2)}function XU(e){var t=e.getDay();return t===0?7:t}function KU(e,t){return xt(Xh.count(Fi(e)-1,e),t,2)}function Qj(e){var t=e.getDay();return t>=4||t===0?Ml(e):Ml.ceil(e)}function YU(e,t){return e=Qj(e),xt(Ml.count(Fi(e),e)+(Fi(e).getDay()===4),t,2)}function qU(e){return e.getDay()}function ZU(e,t){return xt(w0.count(Fi(e)-1,e),t,2)}function QU(e,t){return xt(e.getFullYear()%100,t,2)}function JU(e,t){return e=Qj(e),xt(e.getFullYear()%100,t,2)}function eG(e,t){return xt(e.getFullYear()%1e4,t,4)}function tG(e,t){var r=e.getDay();return e=r>=4||r===0?Ml(e):Ml.ceil(e),xt(e.getFullYear()%1e4,t,4)}function rG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xt(t/60|0,"0",2)+xt(t%60,"0",2)}function Iw(e,t){return xt(e.getUTCDate(),t,2)}function nG(e,t){return xt(e.getUTCHours(),t,2)}function aG(e,t){return xt(e.getUTCHours()%12||12,t,2)}function iG(e,t){return xt(1+Hh.count(zi(e),e),t,3)}function Jj(e,t){return xt(e.getUTCMilliseconds(),t,3)}function oG(e,t){return Jj(e,t)+"000"}function sG(e,t){return xt(e.getUTCMonth()+1,t,2)}function lG(e,t){return xt(e.getUTCMinutes(),t,2)}function cG(e,t){return xt(e.getUTCSeconds(),t,2)}function uG(e){var t=e.getUTCDay();return t===0?7:t}function fG(e,t){return xt(Kh.count(zi(e)-1,e),t,2)}function eP(e){var t=e.getUTCDay();return t>=4||t===0?Al(e):Al.ceil(e)}function dG(e,t){return e=eP(e),xt(Al.count(zi(e),e)+(zi(e).getUTCDay()===4),t,2)}function hG(e){return e.getUTCDay()}function pG(e,t){return xt(k0.count(zi(e)-1,e),t,2)}function gG(e,t){return xt(e.getUTCFullYear()%100,t,2)}function mG(e,t){return e=eP(e),xt(e.getUTCFullYear()%100,t,2)}function yG(e,t){return xt(e.getUTCFullYear()%1e4,t,4)}function vG(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Al(e):Al.ceil(e),xt(e.getUTCFullYear()%1e4,t,4)}function xG(){return"+0000"}function Rw(){return"%"}function Lw(e){return+e}function Bw(e){return Math.floor(+e/1e3)}var zs,tP,rP;bG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bG(e){return zs=bU(e),tP=zs.format,zs.parse,rP=zs.utcFormat,zs.utcParse,zs}function wG(e){return new Date(e)}function kG(e){return e instanceof Date?+e:+new Date(+e)}function Yx(e,t,r,n,a,i,o,s,l,u){var f=Dx(),d=f.invert,h=f.domain,p=u(".%L"),m=u(":%S"),y=u("%I:%M"),w=u("%I %p"),x=u("%a %d"),g=u("%b %d"),v=u("%B"),S=u("%Y");function b(k){return(l(k)<k?p:s(k)<k?m:o(k)<k?y:i(k)<k?w:n(k)<k?a(k)<k?x:g:r(k)<k?v:S)(k)}return f.invert=function(k){return new Date(d(k))},f.domain=function(k){return arguments.length?h(Array.from(k,kG)):h().map(wG)},f.ticks=function(k){var C=h();return e(C[0],C[C.length-1],k??10)},f.tickFormat=function(k,C){return C==null?b:u(C)},f.nice=function(k){var C=h();return(!k||typeof k.range!="function")&&(k=t(C[0],C[C.length-1],k??10)),k?h(Uj(C,k)):f},f.copy=function(){return xf(f,Yx(e,t,r,n,a,i,o,s,l,u))},f}function SG(){return Aa.apply(Yx(vU,xU,Fi,Xx,Xh,bf,Vx,Gx,ts,tP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jG(){return Aa.apply(Yx(mU,yU,zi,Kx,Kh,Hh,Hx,Wx,ts,rP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yh(){var e=0,t=1,r,n,a,i,o=En,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var p,m;return arguments.length?([p,m]=h,o=d(p,m),u):[o(0),o(1)]}}return u.range=f(lc),u.rangeRound=f($x),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function Io(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nP(){var e=Do(Yh()(En));return e.copy=function(){return Io(e,nP())},Vi.apply(e,arguments)}function aP(){var e=Lx(Yh()).domain([1,10]);return e.copy=function(){return Io(e,aP()).base(e.base())},Vi.apply(e,arguments)}function iP(){var e=Bx(Yh());return e.copy=function(){return Io(e,iP()).constant(e.constant())},Vi.apply(e,arguments)}function qx(){var e=Fx(Yh());return e.copy=function(){return Io(e,qx()).exponent(e.exponent())},Vi.apply(e,arguments)}function PG(){return qx.apply(null,arguments).exponent(.5)}function oP(){var e=[],t=En;function r(n){if(n!=null&&!isNaN(n=+n))return t((yf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Po),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>fz(e,i/n))},r.copy=function(){return oP(t).domain(e)},Vi.apply(r,arguments)}function qh(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=En,f,d=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+f(y))-i)*(n*y<n*i?s:l),u(d?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([e,t,r]=y,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(y){return arguments.length?(d=!!y,p):d},p.interpolator=function(y){return arguments.length?(u=y,p):u};function m(y){return function(w){var x,g,v;return arguments.length?([x,g,v]=w,u=Rz(y,[x,g,v]),p):[u(0),u(.5),u(1)]}}return p.range=m(lc),p.rangeRound=m($x),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return f=y,a=y(e),i=y(t),o=y(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function sP(){var e=Do(qh()(En));return e.copy=function(){return Io(e,sP())},Vi.apply(e,arguments)}function lP(){var e=Lx(qh()).domain([.1,1,10]);return e.copy=function(){return Io(e,lP()).base(e.base())},Vi.apply(e,arguments)}function cP(){var e=Bx(qh());return e.copy=function(){return Io(e,cP()).constant(e.constant())},Vi.apply(e,arguments)}function Zx(){var e=Fx(qh());return e.copy=function(){return Io(e,Zx()).exponent(e.exponent())},Vi.apply(e,arguments)}function CG(){return Zx.apply(null,arguments).exponent(.5)}const Fw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$u,scaleDiverging:sP,scaleDivergingLog:lP,scaleDivergingPow:Zx,scaleDivergingSqrt:CG,scaleDivergingSymlog:cP,scaleIdentity:zj,scaleImplicit:oy,scaleLinear:x0,scaleLog:Gj,scaleOrdinal:Ax,scalePoint:ru,scalePow:zx,scaleQuantile:Hj,scaleQuantize:Xj,scaleRadial:Vj,scaleSequential:nP,scaleSequentialLog:aP,scaleSequentialPow:qx,scaleSequentialQuantile:oP,scaleSequentialSqrt:PG,scaleSequentialSymlog:iP,scaleSqrt:oU,scaleSymlog:Wj,scaleThreshold:Kj,scaleTime:SG,scaleUtc:jG,tickFormat:Fj},Symbol.toStringTag,{value:"Module"}));var OG=Jl;function NG(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!OG(o):r(o,s)))var s=o,l=i}return l}var uP=NG;function _G(e,t){return e>t}var MG=_G,AG=uP,TG=MG,EG=sc;function $G(e){return e&&e.length?AG(e,EG,TG):void 0}var DG=$G;const lo=zt(DG);function IG(e,t){return e<t}var RG=IG,LG=uP,BG=RG,FG=sc;function zG(e){return e&&e.length?LG(e,FG,BG):void 0}var UG=zG;const Zh=zt(UG);var GG=fx,WG=Eo,VG=bj,HG=Zn;function XG(e,t){var r=HG(e)?GG:VG;return r(e,WG(t))}var KG=XG,YG=vj,qG=KG;function ZG(e,t){return YG(qG(e,t),1)}var QG=ZG;const JG=zt(QG);var eW=Px;function tW(e,t){return eW(e,t)}var rW=tW;const xs=zt(rW);var cc=1e9,nW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Jx,ar=!0,_a="[DecimalError] ",us=_a+"Invalid argument: ",Qx=_a+"Exponent out of range: ",uc=Math.floor,Yo=Math.pow,aW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,oa,Yr=1e7,Qt=7,fP=9007199254740991,S0=uc(fP/Qt),je={};je.absoluteValue=je.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};je.comparedTo=je.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};je.decimalPlaces=je.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Qt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};je.dividedBy=je.div=function(e){return $i(this,new this.constructor(e))};je.dividedToIntegerBy=je.idiv=function(e){var t=this,r=t.constructor;return Ft($i(t,new r(e),0,1),r.precision)};je.equals=je.eq=function(e){return!this.cmp(e)};je.exponent=function(){return Ir(this)};je.greaterThan=je.gt=function(e){return this.cmp(e)>0};je.greaterThanOrEqualTo=je.gte=function(e){return this.cmp(e)>=0};je.isInteger=je.isint=function(){return this.e>this.d.length-2};je.isNegative=je.isneg=function(){return this.s<0};je.isPositive=je.ispos=function(){return this.s>0};je.isZero=function(){return this.s===0};je.lessThan=je.lt=function(e){return this.cmp(e)<0};je.lessThanOrEqualTo=je.lte=function(e){return this.cmp(e)<1};je.logarithm=je.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(oa))throw Error(_a+"NaN");if(r.s<1)throw Error(_a+(r.s?"NaN":"-Infinity"));return r.eq(oa)?new n(0):(ar=!1,t=$i(Bu(r,i),Bu(e,i),i),ar=!0,Ft(t,a))};je.minus=je.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pP(t,e):dP(t,(e.s=-e.s,e))};je.modulo=je.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(_a+"NaN");return r.s?(ar=!1,t=$i(r,e,0,1).times(e),ar=!0,r.minus(t)):Ft(new n(r),a)};je.naturalExponential=je.exp=function(){return hP(this)};je.naturalLogarithm=je.ln=function(){return Bu(this)};je.negated=je.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};je.plus=je.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dP(t,e):pP(t,(e.s=-e.s,e))};je.precision=je.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(us+e);if(t=Ir(a)+1,n=a.d.length-1,r=n*Qt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};je.squareRoot=je.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(_a+"NaN")}for(e=Ir(s),ar=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=ni(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=uc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus($i(s,i,o+2)).times(.5),ni(i.d).slice(0,o)===(t=ni(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Ft(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return ar=!0,Ft(n,r)};je.times=je.mul=function(e){var t,r,n,a,i,o,s,l,u,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,l=h.length,u=p.length,l<u&&(i=h,h=p,p=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+p[n]*h[a-n-1]+t,i[a--]=s%Yr|0,t=s/Yr|0;i[a]=(i[a]+t)%Yr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ar?Ft(e,d.precision):e};je.toDecimalPlaces=je.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(di(e,0,cc),t===void 0?t=n.rounding:di(t,0,8),Ft(r,e+Ir(r)+1,t))};je.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=bs(n,!0):(di(e,0,cc),t===void 0?t=a.rounding:di(t,0,8),n=Ft(new a(n),e+1,t),r=bs(n,!0,e+1)),r};je.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?bs(a):(di(e,0,cc),t===void 0?t=i.rounding:di(t,0,8),n=Ft(new i(a),e+Ir(a)+1,t),r=bs(n.abs(),!1,e+Ir(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};je.toInteger=je.toint=function(){var e=this,t=e.constructor;return Ft(new t(e),Ir(e)+1,t.rounding)};je.toNumber=function(){return+this};je.toPower=je.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,f=+(e=new l(e));if(!e.s)return new l(oa);if(s=new l(s),!s.s){if(e.s<1)throw Error(_a+"Infinity");return s}if(s.eq(oa))return s;if(n=l.precision,e.eq(oa))return Ft(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=fP){for(a=new l(oa),t=Math.ceil(n/Qt+4),ar=!1;r%2&&(a=a.times(s),Uw(a.d,t)),r=uc(r/2),r!==0;)s=s.times(s),Uw(s.d,t);return ar=!0,e.s<0?new l(oa).div(a):Ft(a,n)}}else if(i<0)throw Error(_a+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,ar=!1,a=e.times(Bu(s,n+u)),ar=!0,a=hP(a),a.s=i,a};je.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ir(a),n=bs(a,r<=i.toExpNeg||r>=i.toExpPos)):(di(e,1,cc),t===void 0?t=i.rounding:di(t,0,8),a=Ft(new i(a),e,t),r=Ir(a),n=bs(a,e<=r||r<=i.toExpNeg,e)),n};je.toSignificantDigits=je.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(di(e,1,cc),t===void 0?t=n.rounding:di(t,0,8)),Ft(new n(r),e,t)};je.toString=je.valueOf=je.val=je.toJSON=je[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ir(e),r=e.constructor;return bs(e,t<=r.toExpNeg||t>=r.toExpPos)};function dP(e,t){var r,n,a,i,o,s,l,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),ar?Ft(t,d):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(d/Qt),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/Yr|0,l[i]%=Yr;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,ar?Ft(t,d):t}function di(e,t,r){if(e!==~~e||e<t||e>r)throw Error(us+e)}function ni(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Qt-n.length,r&&(i+=ro(r)),i+=n;o=e[t],n=o+"",r=Qt-n.length,r&&(i+=ro(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var $i=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Yr|0,o=i/Yr|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Yr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,f,d,h,p,m,y,w,x,g,v,S,b,k,C,P,N=n.constructor,A=n.s==a.s?1:-1,T=n.d,O=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(_a+"Division by zero");for(l=n.e-a.e,C=O.length,b=T.length,p=new N(A),m=p.d=[],u=0;O[u]==(T[u]||0);)++u;if(O[u]>(T[u]||0)&&--l,i==null?g=i=N.precision:o?g=i+(Ir(n)-Ir(a))+1:g=i,g<0)return new N(0);if(g=g/Qt+2|0,u=0,C==1)for(f=0,O=O[0],g++;(u<b||f)&&g--;u++)v=f*Yr+(T[u]||0),m[u]=v/O|0,f=v%O|0;else{for(f=Yr/(O[0]+1)|0,f>1&&(O=e(O,f),T=e(T,f),C=O.length,b=T.length),S=C,y=T.slice(0,C),w=y.length;w<C;)y[w++]=0;P=O.slice(),P.unshift(0),k=O[0],O[1]>=Yr/2&&++k;do f=0,s=t(O,y,C,w),s<0?(x=y[0],C!=w&&(x=x*Yr+(y[1]||0)),f=x/k|0,f>1?(f>=Yr&&(f=Yr-1),d=e(O,f),h=d.length,w=y.length,s=t(d,y,h,w),s==1&&(f--,r(d,C<h?P:O,h))):(f==0&&(s=f=1),d=O.slice()),h=d.length,h<w&&d.unshift(0),r(y,d,w),s==-1&&(w=y.length,s=t(O,y,C,w),s<1&&(f++,r(y,C<w?P:O,w))),w=y.length):s===0&&(f++,y=[0]),m[u++]=f,s&&y[0]?y[w++]=T[S]||0:(y=[T[S]],w=1);while((S++<b||y[0]!==void 0)&&g--)}return m[0]||m.shift(),p.e=l,Ft(p,o?i+Ir(p)+1:i)}}();function hP(e,t){var r,n,a,i,o,s,l=0,u=0,f=e.constructor,d=f.precision;if(Ir(e)>16)throw Error(Qx+Ir(e));if(!e.s)return new f(oa);for(ar=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Yo(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(oa),f.precision=s;;){if(a=Ft(a.times(e),s),r=r.times(++l),o=i.plus($i(a,r,s)),ni(o.d).slice(0,s)===ni(i.d).slice(0,s)){for(;u--;)i=Ft(i.times(i),s);return f.precision=d,t==null?(ar=!0,Ft(i,d)):i}i=o}}function Ir(e){for(var t=e.e*Qt,r=e.d[0];r>=10;r/=10)t++;return t}function gg(e,t,r){if(t>e.LN10.sd())throw ar=!0,r&&(e.precision=r),Error(_a+"LN10 precision limit exceeded");return Ft(new e(e.LN10),t)}function ro(e){for(var t="";e--;)t+="0";return t}function Bu(e,t){var r,n,a,i,o,s,l,u,f,d=1,h=10,p=e,m=p.d,y=p.constructor,w=y.precision;if(p.s<1)throw Error(_a+(p.s?"NaN":"-Infinity"));if(p.eq(oa))return new y(0);if(t==null?(ar=!1,u=w):u=t,p.eq(10))return t==null&&(ar=!0),gg(y,u);if(u+=h,y.precision=u,r=ni(m),n=r.charAt(0),i=Ir(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=ni(p.d),n=r.charAt(0),d++;i=Ir(p),n>1?(p=new y("0."+r),i++):p=new y(n+"."+r.slice(1))}else return l=gg(y,u+2,w).times(i+""),p=Bu(new y(n+"."+r.slice(1)),u-h).plus(l),y.precision=w,t==null?(ar=!0,Ft(p,w)):p;for(s=o=p=$i(p.minus(oa),p.plus(oa),u),f=Ft(p.times(p),u),a=3;;){if(o=Ft(o.times(f),u),l=s.plus($i(o,new y(a),u)),ni(l.d).slice(0,u)===ni(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(gg(y,u+2,w).times(i+""))),s=$i(s,new y(d),u),y.precision=w,t==null?(ar=!0,Ft(s,w)):s;s=l,a+=2}}function zw(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=uc(r/Qt),e.d=[],n=(r+1)%Qt,r<0&&(n+=Qt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Qt;n<a;)e.d.push(+t.slice(n,n+=Qt));t=t.slice(n),n=Qt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ar&&(e.e>S0||e.e<-S0))throw Error(Qx+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ft(e,t,r){var n,a,i,o,s,l,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Qt,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Qt),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Qt,a=n-Qt+o}if(r!==void 0&&(i=Yo(10,o-a-1),s=u/i%10|0,l=t<0||d[f+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Yo(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(i=Ir(e),d.length=1,t=t-i-1,d[0]=Yo(10,(Qt-t%Qt)%Qt),e.e=uc(-t/Qt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=Yo(10,Qt-n),d[f]=a>0?(u/Yo(10,o-a)%Yo(10,a)|0)*i:0),l)for(;;)if(f==0){(d[0]+=i)==Yr&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Yr)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(ar&&(e.e>S0||e.e<-S0))throw Error(Qx+Ir(e));return e}function pP(e,t){var r,n,a,i,o,s,l,u,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ar?Ft(t,p):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(f=o<0,f?(r=l,o=-o,s=d.length):(r=d,n=u,s=l.length),a=Math.max(Math.ceil(p/Qt),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){f=l[a]<d[a];break}o=0}for(f&&(r=l,l=d,d=r,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>o;){if(l[--a]<d[a]){for(i=a;i&&l[--i]===0;)l[i]=Yr-1;--l[i],l[a]+=Yr}l[a]-=d[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,ar?Ft(t,p):t):new h(0)}function bs(e,t,r){var n,a=Ir(e),i=ni(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ro(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ro(-a-1)+i,r&&(n=r-o)>0&&(i+=ro(n))):a>=o?(i+=ro(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+ro(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=ro(n))),e.s<0?"-"+i:i}function Uw(e,t){if(e.length>t)return e.length=t,!0}function gP(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(us+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return zw(o,i.toString())}else if(typeof i!="string")throw Error(us+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,aW.test(i))zw(o,i);else throw Error(us+i)}if(a.prototype=je,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=gP,a.config=a.set=iW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function iW(e){if(!e||typeof e!="object")throw Error(_a+"Object expected");var t,r,n,a=["precision",1,cc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(uc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(us+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(us+r+": "+n);return this}var Jx=gP(nW);oa=new Jx(1);const It=Jx;function oW(e){return uW(e)||cW(e)||lW(e)||sW()}function sW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lW(e,t){if(e){if(typeof e=="string")return uy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uy(e,t)}}function cW(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function uW(e){if(Array.isArray(e))return uy(e)}function uy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fW=function(t){return t},mP={},yP=function(t){return t===mP},Gw=function(t){return function r(){return arguments.length===0||arguments.length===1&&yP(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},dW=function e(t,r){return t===1?r:Gw(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==mP}).length;return o>=t?r.apply(void 0,a):e(t-o,Gw(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var f=a.map(function(d){return yP(d)?l.shift():d});return r.apply(void 0,oW(f).concat(l))}))})},Qh=function(t){return dW(t.length,t)},fy=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},hW=Qh(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),pW=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return fW;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},dy=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},vP=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,l){return s===r[l]})||(r=i,n=t.apply(void 0,i)),n}};function gW(e){var t;return e===0?t=1:t=Math.floor(new It(e).abs().log(10).toNumber())+1,t}function mW(e,t,r){for(var n=new It(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var yW=Qh(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),vW=Qh(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),xW=Qh(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Jh={rangeStep:mW,getDigitCount:gW,interpolateNumber:yW,uninterpolateNumber:vW,uninterpolateTruncation:xW};function hy(e){return kW(e)||wW(e)||xP(e)||bW()}function bW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wW(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function kW(e){if(Array.isArray(e))return py(e)}function Fu(e,t){return PW(e)||jW(e,t)||xP(e,t)||SW()}function SW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xP(e,t){if(e){if(typeof e=="string")return py(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return py(e,t)}}function py(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jW(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function PW(e){if(Array.isArray(e))return e}function bP(e){var t=Fu(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function wP(e,t,r){if(e.lte(0))return new It(0);var n=Jh.getDigitCount(e.toNumber()),a=new It(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new It(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?l:new It(Math.ceil(l))}function CW(e,t,r){var n=1,a=new It(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new It(10).pow(Jh.getDigitCount(e)-1),a=new It(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new It(Math.floor(e)))}else e===0?a=new It(Math.floor((t-1)/2)):r||(a=new It(Math.floor(e)));var o=Math.floor((t-1)/2),s=pW(hW(function(l){return a.add(new It(l-o).mul(n)).toNumber()}),fy);return s(0,t)}function kP(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new It(0),tickMin:new It(0),tickMax:new It(0)};var i=wP(new It(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new It(0):(o=new It(e).add(t).div(2),o=o.sub(new It(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new It(t).sub(o).div(i).toNumber()),u=s+l+1;return u>r?kP(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new It(s).mul(i)),tickMax:o.add(new It(l).mul(i))})}function OW(e){var t=Fu(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=bP([r,n]),l=Fu(s,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(hy(fy(0,a-1).map(function(){return 1/0}))):[].concat(hy(fy(0,a-1).map(function(){return-1/0})),[f]);return r>n?dy(d):d}if(u===f)return CW(u,a,i);var h=kP(u,f,o,i),p=h.step,m=h.tickMin,y=h.tickMax,w=Jh.rangeStep(m,y.add(new It(.1).mul(p)),p);return r>n?dy(w):w}function NW(e,t){var r=Fu(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=bP([n,a]),s=Fu(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var f=Math.max(t,2),d=wP(new It(u).sub(l).div(f-1),i,0),h=[].concat(hy(Jh.rangeStep(new It(l),new It(u).sub(new It(.99).mul(d)),d)),[u]);return n>a?dy(h):h}var _W=vP(OW),MW=vP(NW),AW="Invariant failed";function ws(e,t){throw new Error(AW)}var TW=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Tl(e){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(this,arguments)}function EW(e,t){return RW(e)||IW(e,t)||DW(e,t)||$W()}function $W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DW(e,t){if(e){if(typeof e=="string")return Ww(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ww(e,t)}}function Ww(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function RW(e){if(Array.isArray(e))return e}function LW(e,t){if(e==null)return{};var r=BW(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function FW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PP(n.key),n)}}function UW(e,t,r){return t&&zW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GW(e,t,r){return t=P0(t),WW(e,SP()?Reflect.construct(t,r||[],P0(e).constructor):t.apply(e,r))}function WW(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VW(e)}function VW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SP=function(){return!!e})()}function P0(e){return P0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P0(e)}function HW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gy(e,t)}function gy(e,t){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gy(e,t)}function jP(e,t,r){return t=PP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PP(e){var t=XW(e,"string");return Tl(t)=="symbol"?t:t+""}function XW(e,t){if(Tl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fc=function(e){function t(){return FW(this,t),GW(this,t,arguments)}return HW(t,e),UW(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=LW(n,TW),p=Xe(h,!1);this.props.direction==="x"&&f.type!=="number"&&ws();var m=l.map(function(y){var w=u(y,s),x=w.x,g=w.y,v=w.value,S=w.errorVal;if(!S)return null;var b=[],k,C;if(Array.isArray(S)){var P=EW(S,2);k=P[0],C=P[1]}else k=C=S;if(i==="vertical"){var N=f.scale,A=g+a,T=A+o,O=A-o,M=N(v-k),D=N(v+C);b.push({x1:D,y1:T,x2:D,y2:O}),b.push({x1:M,y1:A,x2:D,y2:A}),b.push({x1:M,y1:T,x2:M,y2:O})}else if(i==="horizontal"){var E=d.scale,B=x+a,_=B-o,I=B+o,z=E(v-k),U=E(v+C);b.push({x1:_,y1:U,x2:I,y2:U}),b.push({x1:B,y1:z,x2:B,y2:U}),b.push({x1:_,y1:z,x2:I,y2:z})}return L.createElement(kt,j0({className:"recharts-errorBar",key:"bar-".concat(b.map(function(ne){return"".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))},p),b.map(function(ne){return L.createElement("line",j0({},ne,{key:"line-".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))}))});return L.createElement(kt,{className:"recharts-errorBars"},m)}}])}(L.Component);jP(fc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});jP(fc,"displayName","ErrorBar");function zu(e){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(e)}function Vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vw(Object(r),!0).forEach(function(n){KW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KW(e,t,r){return t=YW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YW(e){var t=qW(e,"string");return zu(t)=="symbol"?t:t+""}function qW(e,t){if(zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CP=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ia(r,si);if(!o)return null;var s=si.defaultProps,l=s!==void 0?Uo(Uo({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,m=p.sectors||p.data||[];return f.concat(m.map(function(y){return{type:o.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?Uo(Uo({},h),d.props):{},m=p.dataKey,y=p.name,w=p.legendType,x=p.hide;return{inactive:x,dataKey:m,type:l.iconType||w||"square",color:e1(d),value:y||m,payload:p}}),Uo(Uo(Uo({},l),si.getWithHeight(o,a)),{},{payload:u,item:o})};function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function Hw(e){return eV(e)||JW(e)||QW(e)||ZW()}function ZW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QW(e,t){if(e){if(typeof e=="string")return my(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return my(e,t)}}function JW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eV(e){if(Array.isArray(e))return my(e)}function my(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(r),!0).forEach(function(n){hl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hl(e,t,r){return t=tV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tV(e){var t=rV(e,"string");return Uu(t)=="symbol"?t:t+""}function rV(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vr(e,t,r){return Ve(e)||Ve(t)?r:Wr(t)?Ca(e,t,r):Ke(t)?t(e):r}function nu(e,t,r,n){var a=JG(e,function(s){return Vr(s,t)});if(r==="number"){var i=a.filter(function(s){return de(s)||parseFloat(s)});return i.length?[Zh(i),lo(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!Ve(s)}):a;return o.map(function(s){return Wr(s)||s instanceof Date?s:""})}var nV=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,h=u>=s-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(Wa(d-f)!==Wa(h-d)){var m=[];if(Wa(h-d)===Wa(l[1]-l[0])){p=h;var y=d+l[1]-l[0];m[0]=Math.min(y,(y+f)/2),m[1]=Math.max(y,(y+f)/2)}else{p=f;var w=h+l[1]-l[0];m[0]=Math.min(d,(w+d)/2),m[1]=Math.max(d,(w+d)/2)}var x=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>x[0]&&t<=x[1]||t>=m[0]&&t<=m[1]){o=a[u].index;break}}else{var g=Math.min(f,h),v=Math.max(f,h);if(t>(g+d)/2&&t<=(v+d)/2){o=a[u].index;break}}}else for(var S=0;S<s;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},e1=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?vr(vr({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},aV=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,u=s.length;l<u;l++)for(var f=i[s[l]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var m=f[d[h]],y=m.items,w=m.cateAxisId,x=y.filter(function(C){return Ai(C.type).indexOf("Bar")>=0});if(x&&x.length){var g=x[0].type.defaultProps,v=g!==void 0?vr(vr({},g),x[0].props):x[0].props,S=v.barSize,b=v[w];o[b]||(o[b]=[]);var k=Ve(S)?r:S;o[b].push({item:x[0],stackList:x.slice(1),barSize:Ve(k)?void 0:vs(k,n,0)})}}return o},iV=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var u=vs(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/l,m=o.reduce(function(S,b){return S+b.barSize||0},0);m+=(l-1)*u,m>=a&&(m-=(l-1)*u,u=0),m>=a&&p>0&&(h=!0,p*=.9,m=l*p);var y=(a-m)/2>>0,w={offset:y-u,size:0};f=o.reduce(function(S,b){var k={item:b.item,position:{offset:w.offset+w.size+u,size:h?p:b.barSize}},C=[].concat(Hw(S),[k]);return w=C[C.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(P){C.push({item:P,position:w})}),C},d)}else{var x=vs(n,a,0,!0);a-2*x-(l-1)*u<=0&&(u=0);var g=(a-2*x-(l-1)*u)/l;g>1&&(g>>=0);var v=s===+s?Math.min(g,s):g;f=o.reduce(function(S,b,k){var C=[].concat(Hw(S),[{item:b.item,position:{offset:x+(g+u)*k+(g-v)/2,size:v}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(P){C.push({item:P,position:C[C.length-1].position})}),C},d)}return f},oV=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=CP({children:i,legendWidth:l});if(u){var f=a||{},d=f.width,h=f.height,p=u.align,m=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&m==="middle")&&p!=="center"&&de(t[p]))return vr(vr({},t),{},hl({},p,t[p]+(d||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&m!=="middle"&&de(t[m]))return vr(vr({},t),{},hl({},m,t[m]+(h||0)))}return t},sV=function(t,r,n){return Ve(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},OP=function(t,r,n,a,i){var o=r.props.children,s=Kn(o,fc).filter(function(u){return sV(a,i,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Vr(f,n);if(Ve(d))return u;var h=Array.isArray(d)?[Zh(d),lo(d)]:[d,d],p=l.reduce(function(m,y){var w=Vr(f,y,0),x=h[0]-Math.abs(Array.isArray(w)?w[0]:w),g=h[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(x,m[0]),Math.max(g,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},lV=function(t,r,n,a,i){var o=r.map(function(s){return OP(t,s,n,i,a)}).filter(function(s){return!Ve(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},NP=function(t,r,n,a,i){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&OP(t,l,u,a)||nu(t,u,n,i)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,l.push(u[f]));return l},[])},_P=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},MP=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===r&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate});return i||s.push(r),o||s.push(n),s},Ni=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Wa(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=i?i.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!ac(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:i?i[d]:d,index:h,offset:u}})},mg=new WeakMap,td=function(t,r){if(typeof r!="function")return t;mg.has(t)||mg.set(t,new WeakMap);var n=mg.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},cV=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:$u(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:x0(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:ru(),realScaleType:"point"}:i==="category"?{scale:$u(),realScaleType:"band"}:{scale:x0(),realScaleType:"linear"};if(ys(a)){var l="scale".concat(Rh(a));return{scale:(Fw[l]||ru)(),realScaleType:Fw[l]?l:"point"}}return Ke(a)?{scale:a}:{scale:ru(),realScaleType:"point"}},Kw=1e-4,uV=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-Kw,o=Math.max(a[0],a[1])+Kw,s=t(r[0]),l=t(r[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([r[0],r[n-1]])}},fV=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},dV=function(t,r){if(!r||r.length!==2||!de(r[0])||!de(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!de(t[0])||t[0]<n)&&(i[0]=n),(!de(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},hV=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var l=ac(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},pV=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=ac(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},gV={sign:hV,expand:ME,none:jl,silhouette:AE,wiggle:TE,positive:pV},mV=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=gV[n],o=_E().keys(a).value(function(s,l){return+Vr(s,l,0)}).order(zm).offset(i);return o(t)},yV=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(d,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?vr(vr({},h.type.defaultProps),h.props):h.props,y=m.stackId,w=m.hide;if(w)return d;var x=m[n],g=d[x]||{hasStack:!1,stackGroups:{}};if(Wr(y)){var v=g.stackGroups[y]||{numericAxisId:n,cateAxisId:a,items:[]};v.items.push(h),g.hasStack=!0,g.stackGroups[y]=v}else g.stackGroups[As("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return vr(vr({},d),{},hl({},x,g))},l),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,w){var x=p.stackGroups[w];return vr(vr({},y),{},hl({},w,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:mV(t,x.items,i)}))},m)}return vr(vr({},d),{},hl({},h,p))},f)},vV=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=_W(u,i,s);return t.domain([Zh(f),lo(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),h=MW(d,i,s);return{niceTicks:h}}return null};function El(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ve(a[t.dataKey])){var s=qd(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Vr(a,Ve(o)?t.dataKey:o);return Ve(l)?null:t.scale(l)}var Yw=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=Vr(o,r.dataKey,r.domain[s]);return Ve(l)?null:r.scale(l)-i/2+a},xV=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},bV=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?vr(vr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Wr(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},wV=function(t){return t.reduce(function(r,n){return[Zh(n.concat([r[0]]).filter(de)),lo(n.concat([r[1]]).filter(de))]},[1/0,-1/0])},AP=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(u,f){var d=wV(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},qw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yy=function(t,r,n){if(Ke(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(de(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(qw.test(t[0])){var i=+qw.exec(t[0])[1];a[0]=r[0]-i}else Ke(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(de(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(Zw.test(t[1])){var o=+Zw.exec(t[1])[1];a[1]=r[1]+o}else Ke(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},C0=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=Ox(r,function(d){return d.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},Qw=function(t,r,n){return!t||!t.length||xs(t,Ca(n,"type.defaultProps.domain"))?r:t},TP=function(t,r){var n=t.type.defaultProps?vr(vr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,f=n.hide;return vr(vr({},Xe(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:e1(t),value:Vr(r,a),type:l,payload:r,chartType:u,hide:f})};function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function Jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ek(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(r),!0).forEach(function(n){kV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kV(e,t,r){return t=SV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SV(e){var t=jV(e,"string");return Gu(t)=="symbol"?t:t+""}function jV(e,t){if(Gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O0=Math.PI/180,PV=function(t){return t*180/Math.PI},sn=function(t,r,n,a){return{x:t+Math.cos(-O0*a)*n,y:r+Math.sin(-O0*a)*n}},CV=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},OV=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=CV({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(n-i)/s,u=Math.acos(l);return a>o&&(u=2*Math.PI-u),{radius:s,angle:PV(u),angleInRadian:u}},NV=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},_V=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},tk=function(t,r){var n=t.x,a=t.y,i=OV({x:n,y:a},r),o=i.radius,s=i.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var f=NV(r),d=f.startAngle,h=f.endAngle,p=s,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?ek(ek({},r),{},{radius:o,angle:_V(p,r)}):null};function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}var MV=["offset"];function AV(e){return DV(e)||$V(e)||EV(e)||TV()}function TV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EV(e,t){if(e){if(typeof e=="string")return vy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vy(e,t)}}function $V(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DV(e){if(Array.isArray(e))return vy(e)}function vy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IV(e,t){if(e==null)return{};var r=RV(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(r),!0).forEach(function(n){LV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LV(e,t,r){return t=BV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BV(e){var t=FV(e,"string");return Wu(t)=="symbol"?t:t+""}function FV(e,t){if(Wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vu.apply(this,arguments)}var zV=function(t){var r=t.value,n=t.formatter,a=Ve(t.children)?r:t.children;return Ke(n)?n(a):a},UV=function(t,r){var n=Wa(r-t),a=Math.min(Math.abs(r-t),360);return n*a},GV=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,u=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,y=l.clockWise,w=(d+h)/2,x=UV(p,m),g=x>=0?1:-1,v,S;a==="insideStart"?(v=p+g*o,S=y):a==="insideEnd"?(v=m-g*o,S=!y):a==="end"&&(v=m+g*o,S=y),S=x<=0?S:!S;var b=sn(u,f,w,v),k=sn(u,f,w,v+(S?1:-1)*359),C="M".concat(b.x,",").concat(b.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),P=Ve(t.id)?As("recharts-radial-line-"):t.id;return L.createElement("text",Vu({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",s)}),L.createElement("defs",null,L.createElement("path",{id:P,d:C})),L.createElement("textPath",{xlinkHref:"#".concat(P)},r))},WV=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,l=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,h=(f+d)/2;if(a==="outside"){var p=sn(o,s,u+n,h),m=p.x,y=p.y;return{x:m,y,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var w=(l+u)/2,x=sn(o,s,w,h),g=x.x,v=x.y;return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},VV=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,l=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,p=d>0?"end":"start",m=d>0?"start":"end",y=u>=0?1:-1,w=y*a,x=y>0?"end":"start",g=y>0?"start":"end";if(i==="top"){var v={x:s+u/2,y:l-d*a,textAnchor:"middle",verticalAnchor:p};return zr(zr({},v),n?{height:Math.max(l-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:s+u/2,y:l+f+h,textAnchor:"middle",verticalAnchor:m};return zr(zr({},S),n?{height:Math.max(n.y+n.height-(l+f),0),width:u}:{})}if(i==="left"){var b={x:s-w,y:l+f/2,textAnchor:x,verticalAnchor:"middle"};return zr(zr({},b),n?{width:Math.max(b.x-n.x,0),height:f}:{})}if(i==="right"){var k={x:s+u+w,y:l+f/2,textAnchor:g,verticalAnchor:"middle"};return zr(zr({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:f}:{})}var C=n?{width:u,height:f}:{};return i==="insideLeft"?zr({x:s+w,y:l+f/2,textAnchor:g,verticalAnchor:"middle"},C):i==="insideRight"?zr({x:s+u-w,y:l+f/2,textAnchor:x,verticalAnchor:"middle"},C):i==="insideTop"?zr({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:m},C):i==="insideBottom"?zr({x:s+u/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},C):i==="insideTopLeft"?zr({x:s+w,y:l+h,textAnchor:g,verticalAnchor:m},C):i==="insideTopRight"?zr({x:s+u-w,y:l+h,textAnchor:x,verticalAnchor:m},C):i==="insideBottomLeft"?zr({x:s+w,y:l+f-h,textAnchor:g,verticalAnchor:p},C):i==="insideBottomRight"?zr({x:s+u-w,y:l+f-h,textAnchor:x,verticalAnchor:p},C):ec(i)&&(de(i.x)||Jo(i.x))&&(de(i.y)||Jo(i.y))?zr({x:s+vs(i.x,u),y:l+vs(i.y,f),textAnchor:"end",verticalAnchor:"end"},C):zr({x:s+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},HV=function(t){return"cx"in t&&de(t.cx)};function on(e){var t=e.offset,r=t===void 0?5:t,n=IV(e,MV),a=zr({offset:r},n),i=a.viewBox,o=a.position,s=a.value,l=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!i||Ve(s)&&Ve(l)&&!j.isValidElement(u)&&!Ke(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var p;if(Ke(u)){if(p=j.createElement(u,a),j.isValidElement(p))return p}else p=zV(a);var m=HV(i),y=Xe(a,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return GV(a,p,y);var w=m?WV(a):VV(a);return L.createElement(f0,Vu({className:st("recharts-label",d)},y,w,{breakAll:h}),p)}on.displayName="Label";var EP=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,m=t.left,y=t.width,w=t.height,x=t.clockWise,g=t.labelViewBox;if(g)return g;if(de(y)&&de(w)){if(de(d)&&de(h))return{x:d,y:h,width:y,height:w};if(de(p)&&de(m))return{x:p,y:m,width:y,height:w}}return de(d)&&de(h)?{x:d,y:h,width:0,height:0}:de(r)&&de(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||l||s||0,clockWise:x}:t.viewBox?t.viewBox:{}},XV=function(t,r){return t?t===!0?L.createElement(on,{key:"label-implicit",viewBox:r}):Wr(t)?L.createElement(on,{key:"label-implicit",viewBox:r,value:t}):j.isValidElement(t)?t.type===on?j.cloneElement(t,{key:"label-implicit",viewBox:r}):L.createElement(on,{key:"label-implicit",content:t,viewBox:r}):Ke(t)?L.createElement(on,{key:"label-implicit",content:t,viewBox:r}):ec(t)?L.createElement(on,Vu({viewBox:r},t,{key:"label-implicit"})):null:null},KV=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=EP(t),o=Kn(a,on).map(function(l,u){return j.cloneElement(l,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=XV(t.label,r||i);return[s].concat(AV(o))};on.parseViewBox=EP;on.renderCallByParent=KV;function YV(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var qV=YV;const ZV=zt(qV);function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}var QV=["valueAccessor"],JV=["data","dataKey","clockWise","id","textBreakAll"];function eH(e){return aH(e)||nH(e)||rH(e)||tH()}function tH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rH(e,t){if(e){if(typeof e=="string")return xy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xy(e,t)}}function nH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aH(e){if(Array.isArray(e))return xy(e)}function xy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N0.apply(this,arguments)}function nk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ak(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(r),!0).forEach(function(n){iH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iH(e,t,r){return t=oH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oH(e){var t=sH(e,"string");return Hu(t)=="symbol"?t:t+""}function sH(e,t){if(Hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ik(e,t){if(e==null)return{};var r=lH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var cH=function(t){return Array.isArray(t.value)?ZV(t.value):t.value};function ci(e){var t=e.valueAccessor,r=t===void 0?cH:t,n=ik(e,QV),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=ik(n,JV);return!a||!a.length?null:L.createElement(kt,{className:"recharts-label-list"},a.map(function(f,d){var h=Ve(i)?r(f,d):Vr(f&&f.payload,i),p=Ve(s)?{}:{id:"".concat(s,"-").concat(d)};return L.createElement(on,N0({},Xe(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:on.parseViewBox(Ve(o)?f:ak(ak({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ci.displayName="LabelList";function uH(e,t){return e?e===!0?L.createElement(ci,{key:"labelList-implicit",data:t}):L.isValidElement(e)||Ke(e)?L.createElement(ci,{key:"labelList-implicit",data:t,content:e}):ec(e)?L.createElement(ci,N0({data:t},e,{key:"labelList-implicit"})):null:null}function fH(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Kn(n,ci).map(function(o,s){return j.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=uH(e.label,t);return[i].concat(eH(a))}ci.renderCallByParent=fH;function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},by.apply(this,arguments)}function ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ok(Object(r),!0).forEach(function(n){dH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dH(e,t,r){return t=hH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hH(e){var t=pH(e,"string");return Xu(t)=="symbol"?t:t+""}function pH(e,t){if(Xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gH=function(t,r){var n=Wa(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},rd=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,f=l*(s?1:-1)+a,d=Math.asin(l/f)/O0,h=u?i:i+o*d,p=sn(r,n,f,h),m=sn(r,n,a,h),y=u?i-o*d:i,w=sn(r,n,f*Math.cos(d*O0),y);return{center:p,circleTangency:m,lineTangency:w,theta:d}},$P=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=gH(o,s),u=o+l,f=sn(r,n,i,o),d=sn(r,n,i,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=sn(r,n,a,o),m=sn(r,n,a,u);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},mH=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Wa(f-u),h=rd({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,y=h.theta,w=rd({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:l}),x=w.circleTangency,g=w.lineTangency,v=w.theta,S=l?Math.abs(u-f):Math.abs(u-f)-y-v;if(S<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):$P({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var b="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var k=rd({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),C=k.circleTangency,P=k.lineTangency,N=k.theta,A=rd({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),T=A.circleTangency,O=A.lineTangency,M=A.theta,D=l?Math.abs(u-f):Math.abs(u-f)-N-M;if(D<0&&o===0)return"".concat(b,"L").concat(r,",").concat(n,"Z");b+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(D>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else b+="L".concat(r,",").concat(n,"Z");return b},yH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DP=function(t){var r=sk(sk({},yH),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(o<i||f===d)return null;var p=st("recharts-sector",h),m=o-i,y=vs(s,m,0,!0),w;return y>0&&Math.abs(f-d)<360?w=mH({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}):w=$P({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),L.createElement("path",by({},Xe(r,!0),{className:p,d:w,role:"img"}))};function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wy.apply(this,arguments)}function lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ck(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lk(Object(r),!0).forEach(function(n){vH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vH(e,t,r){return t=xH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xH(e){var t=bH(e,"string");return Ku(t)=="symbol"?t:t+""}function bH(e,t){if(Ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uk={curveBasisClosed:vE,curveBasisOpen:xE,curveBasis:yE,curveBumpX:nE,curveBumpY:aE,curveLinearClosed:bE,curveLinear:Bh,curveMonotoneX:wE,curveMonotoneY:kE,curveNatural:SE,curveStep:jE,curveStepAfter:CE,curveStepBefore:PE},nd=function(t){return t.x===+t.x&&t.y===+t.y},$c=function(t){return t.x},Dc=function(t){return t.y},wH=function(t,r){if(Ke(t))return t;var n="curve".concat(Rh(t));return(n==="curveMonotone"||n==="curveBump")&&r?uk["".concat(n).concat(r==="vertical"?"Y":"X")]:uk[n]||Bh},kH=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,f=wH(n,s),d=u?i.filter(function(y){return nd(y)}):i,h;if(Array.isArray(o)){var p=u?o.filter(function(y){return nd(y)}):o,m=d.map(function(y,w){return ck(ck({},y),{},{base:p[w]})});return s==="vertical"?h=Xf().y(Dc).x1($c).x0(function(y){return y.base.x}):h=Xf().x($c).y1(Dc).y0(function(y){return y.base.y}),h.defined(nd).curve(f),h(m)}return s==="vertical"&&de(o)?h=Xf().y(Dc).x1($c).x0(o):de(o)?h=Xf().x($c).y1(Dc).y0(o):h=R3().x($c).y(Dc),h.defined(nd).curve(f),h(d)},fs=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?kH(t):a;return j.createElement("path",wy({},Xe(t,!1),Zd(t),{className:st("recharts-curve",r),d:o,ref:i}))},IP={exports:{}},SH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jH=SH,PH=jH;function RP(){}function LP(){}LP.resetWarningCache=RP;var CH=function(){function e(n,a,i,o,s,l){if(l!==PH){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:LP,resetWarningCache:RP};return r.PropTypes=r,r};IP.exports=CH();var OH=IP.exports;const Pt=zt(OH),{getOwnPropertyNames:NH,getOwnPropertySymbols:_H}=Object,{hasOwnProperty:MH}=Object.prototype;function yg(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function ad(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const l=e(r,n,a);return i.delete(r),i.delete(n),l}}function AH(e){return e!=null?e[Symbol.toStringTag]:void 0}function fk(e){return NH(e).concat(_H(e))}const TH=Object.hasOwn||((e,t)=>MH.call(e,t));function $s(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const EH="__v",$H="__o",DH="_owner",{getOwnPropertyDescriptor:dk,keys:hk}=Object;function IH(e,t){return e.byteLength===t.byteLength&&_0(new Uint8Array(e),new Uint8Array(t))}function RH(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function LH(e,t){return e.byteLength===t.byteLength&&_0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function BH(e,t){return $s(e.getTime(),t.getTime())}function FH(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function zH(e,t){return e===t}function pk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,l=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const h=o.value,p=s.value;if(r.equals(h[0],p[0],l,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;l++}return!0}const UH=$s;function GH(e,t,r){const n=hk(e);let a=n.length;if(hk(t).length!==a)return!1;for(;a-- >0;)if(!BP(e,t,r,n[a]))return!1;return!0}function Ic(e,t,r){const n=fk(e);let a=n.length;if(fk(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!BP(e,t,r,i)||(o=dk(e,i),s=dk(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function WH(e,t){return $s(e.valueOf(),t.valueOf())}function VH(e,t){return e.source===t.source&&e.flags===t.flags}function gk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const l=t.values();let u=!1,f=0;for(;(s=l.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function _0(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function HH(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function BP(e,t,r,n){return(n===DH||n===$H||n===EH)&&(e.$$typeof||t.$$typeof)?!0:TH(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const XH="[object ArrayBuffer]",KH="[object Arguments]",YH="[object Boolean]",qH="[object DataView]",ZH="[object Date]",QH="[object Error]",JH="[object Map]",eX="[object Number]",tX="[object Object]",rX="[object RegExp]",nX="[object Set]",aX="[object String]",iX={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},oX="[object URL]",sX=Object.prototype.toString;function lX({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:m}){return function(w,x,g){if(w===x)return!0;if(w==null||x==null)return!1;const v=typeof w;if(v!==typeof x)return!1;if(v!=="object")return v==="number"?s(w,x,g):v==="function"?i(w,x,g):!1;const S=w.constructor;if(S!==x.constructor)return!1;if(S===Object)return l(w,x,g);if(Array.isArray(w))return t(w,x,g);if(S===Date)return n(w,x,g);if(S===RegExp)return f(w,x,g);if(S===Map)return o(w,x,g);if(S===Set)return d(w,x,g);const b=sX.call(w);if(b===ZH)return n(w,x,g);if(b===rX)return f(w,x,g);if(b===JH)return o(w,x,g);if(b===nX)return d(w,x,g);if(b===tX)return typeof w.then!="function"&&typeof x.then!="function"&&l(w,x,g);if(b===oX)return p(w,x,g);if(b===QH)return a(w,x,g);if(b===KH)return l(w,x,g);if(iX[b])return h(w,x,g);if(b===XH)return e(w,x,g);if(b===qH)return r(w,x,g);if(b===YH||b===eX||b===aX)return u(w,x,g);if(m){let k=m[b];if(!k){const C=AH(w);C&&(k=m[C])}if(k)return k(w,x,g)}return!1}}function cX({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:IH,areArraysEqual:r?Ic:RH,areDataViewsEqual:LH,areDatesEqual:BH,areErrorsEqual:FH,areFunctionsEqual:zH,areMapsEqual:r?yg(pk,Ic):pk,areNumbersEqual:UH,areObjectsEqual:r?Ic:GH,arePrimitiveWrappersEqual:WH,areRegExpsEqual:VH,areSetsEqual:r?yg(gk,Ic):gk,areTypedArraysEqual:r?yg(_0,Ic):_0,areUrlsEqual:HH,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=ad(n.areArraysEqual),i=ad(n.areMapsEqual),o=ad(n.areObjectsEqual),s=ad(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function uX(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function fX({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,l){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,l,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,l){return t(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,l){return t(s,l,i)}}const dX=Ro();Ro({strict:!0});Ro({circular:!0});Ro({circular:!0,strict:!0});Ro({createInternalComparator:()=>$s});Ro({strict:!0,createInternalComparator:()=>$s});Ro({circular:!0,createInternalComparator:()=>$s});Ro({circular:!0,createInternalComparator:()=>$s,strict:!0});function Ro(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=cX(e),o=lX(i),s=r?r(o):uX(o);return fX({circular:t,comparator:o,createState:n,equals:s,strict:a})}function hX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function mk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):hX(a)};requestAnimationFrame(n)}function ky(e){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ky(e)}function pX(e){return vX(e)||yX(e)||mX(e)||gX()}function gX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mX(e,t){if(e){if(typeof e=="string")return yk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yk(e,t)}}function yk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vX(e){if(Array.isArray(e))return e}function xX(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=pX(o),l=s[0],u=s.slice(1);if(typeof l=="number"){mk(a.bind(null,u),l);return}a(l),mk(a.bind(null,u));return}ky(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(n){FP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FP(e,t,r){return t=bX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=wX(e,"string");return Yu(t)==="symbol"?t:String(t)}function wX(e,t){if(Yu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kX=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},SX=function(t){return t},jX=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},au=function(t,r){return Object.keys(r).reduce(function(n,a){return xk(xk({},n),{},FP({},a,t(a,r[a])))},{})},bk=function(t,r,n){return t.map(function(a){return"".concat(jX(a)," ").concat(r,"ms ").concat(n)}).join(",")};function PX(e,t){return NX(e)||OX(e,t)||zP(e,t)||CX()}function CX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function NX(e){if(Array.isArray(e))return e}function _X(e){return TX(e)||AX(e)||zP(e)||MX()}function MX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zP(e,t){if(e){if(typeof e=="string")return Sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sy(e,t)}}function AX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TX(e){if(Array.isArray(e))return Sy(e)}function Sy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M0=1e-4,UP=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},GP=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},wk=function(t,r){return function(n){var a=UP(t,r);return GP(a,n)}},EX=function(t,r){return function(n){var a=UP(t,r),i=[].concat(_X(a.map(function(o,s){return o*s}).slice(1)),[0]);return GP(i,n)}},kk=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=PX(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=wk(a,o),h=wk(i,s),p=EX(a,o),m=function(x){return x>1?1:x<0?0:x},y=function(x){for(var g=x>1?1:x,v=g,S=0;S<8;++S){var b=d(v)-g,k=p(v);if(Math.abs(b-g)<M0||k<M0)return h(v);v=m(v-b/k)}return h(v)};return y.isStepper=!1,y},$X=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(f,d,h){var p=-(f-d)*n,m=h*i,y=h+(p-m)*s/1e3,w=h*s/1e3+f;return Math.abs(w-d)<M0&&Math.abs(y)<M0?[d,0]:[w,y]};return l.isStepper=!0,l.dt=s,l},DX=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kk(a);case"spring":return $X();default:if(a.split("(")[0]==="cubic-bezier")return kk(a)}return typeof a=="function"?a:null};function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function Sk(e){return LX(e)||RX(e)||WP(e)||IX()}function IX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LX(e){if(Array.isArray(e))return Py(e)}function jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jk(Object(r),!0).forEach(function(n){jy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jy(e,t,r){return t=BX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BX(e){var t=FX(e,"string");return qu(t)==="symbol"?t:String(t)}function FX(e,t){if(qu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zX(e,t){return WX(e)||GX(e,t)||WP(e,t)||UX()}function UX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WP(e,t){if(e){if(typeof e=="string")return Py(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Py(e,t)}}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function WX(e){if(Array.isArray(e))return e}var A0=function(t,r,n){return t+(r-t)*n},Cy=function(t){var r=t.from,n=t.to;return r!==n},VX=function e(t,r,n){var a=au(function(i,o){if(Cy(o)){var s=t(o.from,o.to,o.velocity),l=zX(s,2),u=l[0],f=l[1];return nn(nn({},o),{},{from:u,velocity:f})}return o},r);return n<1?au(function(i,o){return Cy(o)?nn(nn({},o),{},{velocity:A0(o.velocity,a[i].velocity,n),from:A0(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const HX=function(e,t,r,n,a){var i=kX(e,t),o=i.reduce(function(w,x){return nn(nn({},w),{},jy({},x,[e[x],t[x]]))},{}),s=i.reduce(function(w,x){return nn(nn({},w),{},jy({},x,{from:e[x],velocity:0,to:t[x]}))},{}),l=-1,u,f,d=function(){return null},h=function(){return au(function(x,g){return g.from},s)},p=function(){return!Object.values(s).filter(Cy).length},m=function(x){u||(u=x);var g=x-u,v=g/r.dt;s=VX(r,s,v),a(nn(nn(nn({},e),t),h())),u=x,p()||(l=requestAnimationFrame(d))},y=function(x){f||(f=x);var g=(x-f)/n,v=au(function(b,k){return A0.apply(void 0,Sk(k).concat([r(g)]))},o);if(a(nn(nn(nn({},e),t),v)),g<1)l=requestAnimationFrame(d);else{var S=au(function(b,k){return A0.apply(void 0,Sk(k).concat([r(1)]))},o);a(nn(nn(nn({},e),t),S))}};return d=r.isStepper?m:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}var XX=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function KX(e,t){if(e==null)return{};var r=YX(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YX(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function vg(e){return JX(e)||QX(e)||ZX(e)||qX()}function qX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZX(e,t){if(e){if(typeof e=="string")return Oy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oy(e,t)}}function QX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JX(e){if(Array.isArray(e))return Oy(e)}function Oy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(r),!0).forEach(function(n){Wc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wc(e,t,r){return t=VP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VP(n.key),n)}}function rK(e,t,r){return t&&tK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VP(e){var t=nK(e,"string");return $l(t)==="symbol"?t:String(t)}function nK(e,t){if($l(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($l(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ny(e,t)}function Ny(e,t){return Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ny(e,t)}function iK(e){var t=oK();return function(){var n=T0(e),a;if(t){var i=T0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return _y(this,a)}}function _y(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return My(e)}function My(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T0(e){return T0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T0(e)}var Ya=function(e){aK(r,e);var t=iK(r);function r(n,a){var i;eK(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,l=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(My(i)),i.changeStyle=i.changeStyle.bind(My(i)),!s||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:f}),_y(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof h=="function")return i.state={style:u},_y(i);i.state={style:l?Wc({},l,u):u}}else i.state={style:{}};return i}return rK(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,h=this.state.style;if(s){if(!o){var p={style:l?Wc({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(dX(a.to,f)&&a.canBegin&&a.isActive)){var m=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||u?d:a.to;if(this.state&&h){var w={style:l?Wc({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(w)}this.runAnimation(Ra(Ra({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,p=HX(o,s,DX(u),l,this.changeStyle),m=function(){i.stopJSAnimation=p()};this.manager.start([h,f,m,l,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(y,w,x){if(x===0)return y;var g=w.duration,v=w.easing,S=v===void 0?"ease":v,b=w.style,k=w.properties,C=w.onAnimationEnd,P=x>0?o[x-1]:w,N=k||Object.keys(b);if(typeof S=="function"||S==="spring")return[].concat(vg(y),[i.runJSAnimation.bind(i,{from:P.style,to:b,duration:g,easing:S}),g]);var A=bk(N,g,S),T=Ra(Ra(Ra({},P.style),b),{},{transition:A});return[].concat(vg(y),[T,g,C]).filter(SX)};return this.manager.start([l].concat(vg(o.reduce(p,[f,Math.max(h,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=xX());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,p=a.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var y=s?Wc({},s,l):l,w=bk(Object.keys(y),o,u);m.start([f,i,Ra(Ra({},y),{},{transition:w}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=KX(a,XX),u=j.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(p){var m=p.props,y=m.style,w=y===void 0?{}:y,x=m.className,g=j.cloneElement(p,Ra(Ra({},l),{},{style:Ra(Ra({},w),f),className:x}));return g};return u===1?d(j.Children.only(i)):L.createElement("div",null,j.Children.map(i,function(h){return d(h)}))}}]),r}(j.PureComponent);Ya.displayName="Animate";Ya.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ya.propTypes={from:Pt.oneOfType([Pt.object,Pt.string]),to:Pt.oneOfType([Pt.object,Pt.string]),attributeName:Pt.string,duration:Pt.number,begin:Pt.number,easing:Pt.oneOfType([Pt.string,Pt.func]),steps:Pt.arrayOf(Pt.shape({duration:Pt.number.isRequired,style:Pt.object.isRequired,easing:Pt.oneOfType([Pt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pt.func]),properties:Pt.arrayOf("string"),onAnimationEnd:Pt.func})),children:Pt.oneOfType([Pt.node,Pt.func]),isActive:Pt.bool,canBegin:Pt.bool,onAnimationEnd:Pt.func,shouldReAnimate:Pt.bool,onAnimationStart:Pt.func,onAnimationReStart:Pt.func};function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E0.apply(this,arguments)}function sK(e,t){return fK(e)||uK(e,t)||cK(e,t)||lK()}function lK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cK(e,t){if(e){if(typeof e=="string")return Ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ck(e,t)}}function Ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function fK(e){if(Array.isArray(e))return e}function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(r),!0).forEach(function(n){dK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dK(e,t,r){return t=hK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hK(e){var t=pK(e,"string");return Zu(t)=="symbol"?t:t+""}function pK(e,t){if(Zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _k=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=i[h]>o?o:i[h];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+l*d[0],",").concat(r)),f+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-l*d[2],",").concat(r+a)),f+="L ".concat(t+l*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var m=Math.min(o,i);f="M ".concat(t,",").concat(r+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+l*m,",").concat(r,`
            L `).concat(t+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*m,`
            L `).concat(t+n,",").concat(r+a-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n-l*m,",").concat(r+a,`
            L `).concat(t+l*m,",").concat(r+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*m," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},gK=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=f&&a>=d&&a<=h}return!1},mK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},t1=function(t){var r=Nk(Nk({},mK),t),n=j.useRef(),a=j.useState(-1),i=sK(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch{}},[]);var l=r.x,u=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,m=r.animationEasing,y=r.animationDuration,w=r.animationBegin,x=r.isAnimationActive,g=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var v=st("recharts-rectangle",p);return g?L.createElement(Ya,{canBegin:o>0,from:{width:f,height:d,x:l,y:u},to:{width:f,height:d,x:l,y:u},duration:y,animationEasing:m,isActive:g},function(S){var b=S.width,k=S.height,C=S.x,P=S.y;return L.createElement(Ya,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,isActive:x,easing:m},L.createElement("path",E0({},Xe(r,!0),{className:v,d:_k(C,P,b,k,h),ref:n})))}):L.createElement("path",E0({},Xe(r,!0),{className:v,d:_k(l,u,f,d,h)}))};function Ay(){return Ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ay.apply(this,arguments)}var ep=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=st("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",Ay({},Xe(t,!1),Zd(t),{className:o,cx:r,cy:n,r:a})):null};function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}var yK=["x","y","top","left","width","height","className"];function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ty.apply(this,arguments)}function Mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mk(Object(r),!0).forEach(function(n){xK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xK(e,t,r){return t=bK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bK(e){var t=wK(e,"string");return Qu(t)=="symbol"?t:t+""}function wK(e,t){if(Qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kK(e,t){if(e==null)return{};var r=SK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jK=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},PK=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,u=l===void 0?0:l,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,m=t.className,y=kK(t,yK),w=vK({x:n,y:i,top:s,left:u,width:d,height:p},y);return!de(n)||!de(i)||!de(d)||!de(p)||!de(s)||!de(u)?null:L.createElement("path",Ty({},Xe(w,!0),{className:st("recharts-cross",m),d:jK(n,i,d,p,s,u)}))},CK=sj,OK=CK(Object.getPrototypeOf,Object),NK=OK,_K=Gi,MK=NK,AK=Wi,TK="[object Object]",EK=Function.prototype,$K=Object.prototype,HP=EK.toString,DK=$K.hasOwnProperty,IK=HP.call(Object);function RK(e){if(!AK(e)||_K(e)!=TK)return!1;var t=MK(e);if(t===null)return!0;var r=DK.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&HP.call(r)==IK}var LK=RK;const BK=zt(LK);var FK=Gi,zK=Wi,UK="[object Boolean]";function GK(e){return e===!0||e===!1||zK(e)&&FK(e)==UK}var WK=GK;const VK=zt(WK);function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$0.apply(this,arguments)}function HK(e,t){return qK(e)||YK(e,t)||KK(e,t)||XK()}function XK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KK(e,t){if(e){if(typeof e=="string")return Ak(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ak(e,t)}}function Ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function qK(e){if(Array.isArray(e))return e}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ek(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){ZK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZK(e,t,r){return t=QK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QK(e){var t=JK(e,"string");return Ju(t)=="symbol"?t:t+""}function JK(e,t){if(Ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $k=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},eY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tY=function(t){var r=Ek(Ek({},eY),t),n=j.useRef(),a=j.useState(-1),i=HK(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&s(v)}catch{}},[]);var l=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,y=r.animationDuration,w=r.animationBegin,x=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var g=st("recharts-trapezoid",p);return x?L.createElement(Ya,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:u},duration:y,animationEasing:m,isActive:x},function(v){var S=v.upperWidth,b=v.lowerWidth,k=v.height,C=v.x,P=v.y;return L.createElement(Ya,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,easing:m},L.createElement("path",$0({},Xe(r,!0),{className:g,d:$k(C,P,S,b,k),ref:n})))}):L.createElement("g",null,L.createElement("path",$0({},Xe(r,!0),{className:g,d:$k(l,u,f,d,h)})))},rY=["option","shapeType","propTransformer","activeClassName","isActive"];function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function nY(e,t){if(e==null)return{};var r=aY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){iY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iY(e,t,r){return t=oY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oY(e){var t=sY(e,"string");return ef(t)=="symbol"?t:t+""}function sY(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lY(e,t){return D0(D0({},t),e)}function cY(e,t){return e==="symbols"}function Ik(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return L.createElement(t1,r);case"trapezoid":return L.createElement(tY,r);case"sector":return L.createElement(DP,r);case"symbols":if(cY(t))return L.createElement(zh,r);break;default:return null}}function uY(e){return j.isValidElement(e)?e.props:e}function Ey(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?lY:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=nY(e,rY),u;if(j.isValidElement(t))u=j.cloneElement(t,D0(D0({},l),uY(t)));else if(Ke(t))u=t(l);else if(BK(t)&&!VK(t)){var f=a(t,l);u=L.createElement(Ik,{shapeType:r,elementProps:f})}else{var d=l;u=L.createElement(Ik,{shapeType:r,elementProps:d})}return s?L.createElement(kt,{className:o},u):u}function tp(e,t){return t!=null&&"trapezoids"in e.props}function rp(e,t){return t!=null&&"sectors"in e.props}function tf(e,t){return t!=null&&"points"in e.props}function fY(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function dY(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function hY(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function pY(e,t){var r;return tp(e,t)?r=fY:rp(e,t)?r=dY:tf(e,t)&&(r=hY),r}function gY(e,t){var r;return tp(e,t)?r="trapezoids":rp(e,t)?r="sectors":tf(e,t)&&(r="points"),r}function mY(e,t){if(tp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(rp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return tf(e,t)?t.payload:{}}function yY(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=gY(r,t),i=mY(r,t),o=n.filter(function(l,u){var f=xs(i,l),d=r.props[a].filter(function(m){var y=pY(r,t);return y(m,t)}),h=r.props[a].indexOf(d[d.length-1]),p=u===h;return f&&p}),s=n.indexOf(o[o.length-1]);return s}var vY=Math.ceil,xY=Math.max;function bY(e,t,r,n){for(var a=-1,i=xY(vY((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var wY=bY,kY=Cj,Rk=1/0,SY=17976931348623157e292;function jY(e){if(!e)return e===0?e:0;if(e=kY(e),e===Rk||e===-Rk){var t=e<0?-1:1;return t*SY}return e===e?e:0}var XP=jY,PY=wY,CY=Wh,xg=XP;function OY(e){return function(t,r,n){return n&&typeof n!="number"&&CY(t,r,n)&&(r=n=void 0),t=xg(t),r===void 0?(r=t,t=0):r=xg(r),n=n===void 0?t<r?1:-1:xg(n),PY(t,r,n,e)}}var NY=OY,_Y=NY,MY=_Y(),AY=MY;const I0=zt(AY);function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){KP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KP(e,t,r){return t=TY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TY(e){var t=EY(e,"string");return rf(t)=="symbol"?t:t+""}function EY(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Y=["Webkit","Moz","O","ms"],DY=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=$Y.reduce(function(i,o){return Bk(Bk({},i),{},KP({},o+n,r))},{});return a[t]=r,a};function Dl(e){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(this,arguments)}function Fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(r),!0).forEach(function(n){na(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qP(n.key),n)}}function RY(e,t,r){return t&&zk(e.prototype,t),r&&zk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function LY(e,t,r){return t=L0(t),BY(e,YP()?Reflect.construct(t,r||[],L0(e).constructor):t.apply(e,r))}function BY(e,t){if(t&&(Dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FY(e)}function FY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YP=function(){return!!e})()}function L0(e){return L0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L0(e)}function zY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$y(e,t)}function $y(e,t){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$y(e,t)}function na(e,t,r){return t=qP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(e){var t=UY(e,"string");return Dl(t)=="symbol"?t:t+""}function UY(e,t){if(Dl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GY=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=ru().domain(I0(0,l)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},Uk=function(t){return t.changedTouches&&!!t.changedTouches.length},Il=function(e){function t(r){var n;return IY(this,t),n=LY(this,t,[r]),na(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),na(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),na(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),na(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),na(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),na(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),na(n,"handleSlideDragStart",function(a){var i=Uk(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return zY(t,e),RY(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(o,d),m=t.getIndexInRange(o,h);return{startIndex:p-p%l,endIndex:m===f?f:m-m%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=Vr(i[n],s,n);return Ke(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,u=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,m=l.onChange,y=n.pageX-i;y>0?y=Math.min(y,u+f-d-s,u+f-d-o):y<0&&(y=Math.max(y,u-o,u-s));var w=this.getIndex({startX:o+y,endX:s+y});(w.startIndex!==h||w.endIndex!==p)&&m&&m(w),this.setState({startX:o+y,endX:s+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=Uk(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,m=f.onChange,y=f.gap,w=f.data,x={startX:this.state.startX,endX:this.state.endX},g=n.pageX-i;g>0?g=Math.min(g,d+h-p-u):g<0&&(g=Math.max(g,d-u)),x[o]=u+g;var v=this.getIndex(x),S=v.startIndex,b=v.endIndex,k=function(){var P=w.length-1;return o==="startX"&&(s>l?S%y===0:b%y===0)||s<l&&b===P||o==="endX"&&(s>l?b%y===0:S%y===0)||s>l&&b===P};this.setState(na(na({},o,u+g),"brushMoveStartX",n.pageX),function(){m&&k()&&m(v)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=s.length)){var p=s[h];a==="startX"&&p>=u||a==="endX"&&p<=l||this.setState(na({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return L.createElement("rect",{stroke:u,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.data,u=n.children,f=n.padding,d=j.Children.only(u);return d?L.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,l=this.props,u=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,m=l.data,y=l.startIndex,w=l.endIndex,x=Math.max(n,this.props.x),g=bg(bg({},Xe(this.props,!1)),{},{x,y:u,width:f,height:d}),v=p||"Min value: ".concat((i=m[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=m[w])===null||o===void 0?void 0:o.name);return L.createElement(kt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),s.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,g))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,m={pointerEvents:"none",fill:u};return L.createElement(kt,{className:"recharts-brush-texts"},L.createElement(f0,R0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:o+s/2},m),this.getTextOfTick(a)),L.createElement(f0,R0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:o+s/2},m),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,l=n.y,u=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,m=h.endX,y=h.isTextActive,w=h.isSlideMoving,x=h.isTravellerMoving,g=h.isTravellerFocused;if(!a||!a.length||!de(s)||!de(l)||!de(u)||!de(f)||u<=0||f<=0)return null;var v=st("recharts-brush",i),S=L.Children.count(o)===1,b=DY("userSelect","none");return L.createElement(kt,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(y||w||x||g||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(i+s/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),L.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return L.isValidElement(n)?i=L.cloneElement(n,a):Ke(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return bg({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?GY({data:i,width:o,x:s,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>a?s=l:o=l}return a>=n[s]?s:o}}])}(j.PureComponent);na(Il,"displayName","Brush");na(Il,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WY=Cx;function VY(e,t){var r;return WY(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var HY=VY,XY=J3,KY=Eo,YY=HY,qY=Zn,ZY=Wh;function QY(e,t,r){var n=qY(e)?XY:YY;return r&&ZY(e,t,r)&&(t=void 0),n(e,KY(t))}var JY=QY;const eq=zt(JY);var ui=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},Gk=wj;function tq(e,t,r){t=="__proto__"&&Gk?Gk(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var rq=tq,nq=rq,aq=xj,iq=Eo;function oq(e,t){var r={};return t=iq(t),aq(e,function(n,a,i){nq(r,a,t(n,a,i))}),r}var sq=oq;const lq=zt(sq);function cq(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var uq=cq,fq=Cx;function dq(e,t){var r=!0;return fq(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var hq=dq,pq=uq,gq=hq,mq=Eo,yq=Zn,vq=Wh;function xq(e,t,r){var n=yq(e)?pq:gq;return r&&vq(e,t,r)&&(t=void 0),n(e,mq(t))}var bq=xq;const ZP=zt(bq);var wq=["x","y"];function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dy.apply(this,arguments)}function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){kq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kq(e,t,r){return t=Sq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sq(e){var t=jq(e,"string");return nf(t)=="symbol"?t:t+""}function jq(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pq(e,t){if(e==null)return{};var r=Cq(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Oq(e,t){var r=e.x,n=e.y,a=Pq(e,wq),i="".concat(r),o=parseInt(i,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Rc(Rc(Rc(Rc(Rc({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function Vk(e){return L.createElement(Ey,Dy({shapeType:"rectangle",propTransformer:Oq,activeClassName:"recharts-active-bar"},e))}var Nq=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=de(n)||U8(n);return i?t(n,a):(i||ws(),r)}},_q=["value","background"],QP;function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function Mq(e,t){if(e==null)return{};var r=Aq(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Aq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}function Hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hk(Object(r),!0).forEach(function(n){co(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eC(n.key),n)}}function Eq(e,t,r){return t&&Xk(e.prototype,t),r&&Xk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $q(e,t,r){return t=F0(t),Dq(e,JP()?Reflect.construct(t,r||[],F0(e).constructor):t.apply(e,r))}function Dq(e,t){if(t&&(Rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iq(e)}function Iq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JP=function(){return!!e})()}function F0(e){return F0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},F0(e)}function Rq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iy(e,t)}function Iy(e,t){return Iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Iy(e,t)}function co(e,t,r){return t=eC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eC(e){var t=Lq(e,"string");return Rl(t)=="symbol"?t:t+""}function Lq(e,t){if(Rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wf=function(e){function t(){var r;Tq(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$q(this,t,[].concat(a)),co(r,"state",{isAnimationFinished:!1}),co(r,"id",As("recharts-bar-")),co(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),co(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Rq(t,e),Eq(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,u=i.activeBar,f=Xe(this.props,!1);return n&&n.map(function(d,h){var p=h===l,m=p?u:o,y=Tr(Tr(Tr({},f),d),{},{isActive:p,option:m,index:h,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return L.createElement(kt,B0({className:"recharts-bar-rectangle"},Cu(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),L.createElement(Vk,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return L.createElement(Ya,{begin:l,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,y=i.map(function(w,x){var g=h&&h[x];if(g){var v=Or(g.x,w.x),S=Or(g.y,w.y),b=Or(g.width,w.width),k=Or(g.height,w.height);return Tr(Tr({},w),{},{x:v(m),y:S(m),width:b(m),height:k(m)})}if(o==="horizontal"){var C=Or(0,w.height),P=C(m);return Tr(Tr({},w),{},{y:w.y+w.height-P,height:P})}var N=Or(0,w.width),A=N(m);return Tr(Tr({},w),{},{width:A})});return L.createElement(kt,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!xs(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=Xe(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,h=Mq(u,_q);if(!d)return null;var p=Tr(Tr(Tr(Tr(Tr({},h),{},{fill:"#eee"},d),l),Cu(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return L.createElement(Vk,B0({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Kn(f,fc);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(w,x){var g=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:g,errorVal:Vr(w,x)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return L.createElement(kt,m,d.map(function(y){return L.cloneElement(y,{key:"error-bar-".concat(a,"-").concat(y.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,f=n.top,d=n.width,h=n.height,p=n.isAnimationActive,m=n.background,y=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,x=st("recharts-bar",o),g=s&&s.allowDataOverflow,v=l&&l.allowDataOverflow,S=g||v,b=Ve(y)?this.id:y;return L.createElement(kt,{className:x},g||v?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(b)},L.createElement("rect",{x:g?u:u-d/2,y:v?f:f-h/2,width:g?d:d*2,height:v?h:h*2}))):null,L.createElement(kt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(b,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,b),(!p||w)&&ci.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);QP=wf;co(wf,"displayName","Bar");co(wf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!$o.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});co(wf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=fV(n,r);if(!p)return null;var m=t.layout,y=r.type.defaultProps,w=y!==void 0?Tr(Tr({},y),r.props):r.props,x=w.dataKey,g=w.children,v=w.minPointSize,S=m==="horizontal"?o:i,b=u?S.scale.domain():null,k=xV({numericAxis:S}),C=Kn(g,_x),P=d.map(function(N,A){var T,O,M,D,E,B;u?T=dV(u[f+A],b):(T=Vr(N,x),Array.isArray(T)||(T=[k,T]));var _=Nq(v,QP.defaultProps.minPointSize)(T[1],A);if(m==="horizontal"){var I,z=[o.scale(T[0]),o.scale(T[1])],U=z[0],ne=z[1];O=Yw({axis:i,ticks:s,bandSize:a,offset:p.offset,entry:N,index:A}),M=(I=ne??U)!==null&&I!==void 0?I:void 0,D=p.size;var V=U-ne;if(E=Number.isNaN(V)?0:V,B={x:O,y:o.y,width:D,height:o.height},Math.abs(_)>0&&Math.abs(E)<Math.abs(_)){var F=Wa(E||_)*(Math.abs(_)-Math.abs(E));M-=F,E+=F}}else{var re=[i.scale(T[0]),i.scale(T[1])],ee=re[0],$=re[1];if(O=ee,M=Yw({axis:o,ticks:l,bandSize:a,offset:p.offset,entry:N,index:A}),D=$-ee,E=p.size,B={x:i.x,y:M,width:i.width,height:E},Math.abs(_)>0&&Math.abs(D)<Math.abs(_)){var ae=Wa(D||_)*(Math.abs(_)-Math.abs(D));D+=ae}}return Tr(Tr(Tr({},N),{},{x:O,y:M,width:D,height:E,value:u?T:T[1],payload:N,background:B},C&&C[A]&&C[A].props),{},{tooltipPayload:[TP(r,N)],tooltipPosition:{x:O+D/2,y:M+E/2}})});return Tr({data:P,layout:m},h)});function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function Bq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tC(n.key),n)}}function Fq(e,t,r){return t&&Kk(e.prototype,t),r&&Kk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yk(Object(r),!0).forEach(function(n){np(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function np(e,t,r){return t=tC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tC(e){var t=zq(e,"string");return af(t)=="symbol"?t:t+""}function zq(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r1=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!ia(u,wf);return f.reduce(function(p,m){var y=r[m],w=y.orientation,x=y.domain,g=y.padding,v=g===void 0?{}:g,S=y.mirror,b=y.reversed,k="".concat(w).concat(S?"Mirror":""),C,P,N,A,T;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=x[1]-x[0],M=1/0,D=y.categoricalDomain.sort(H8);if(D.forEach(function(re,ee){ee>0&&(M=Math.min((re||0)-(D[ee-1]||0),M))}),Number.isFinite(M)){var E=M/O,B=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(C=E*B/2),y.padding==="no-gap"){var _=vs(t.barCategoryGap,E*B),I=E*B/2;C=I-_-(I-_)/B*_}}}a==="xAxis"?P=[n.left+(v.left||0)+(C||0),n.left+n.width-(v.right||0)-(C||0)]:a==="yAxis"?P=l==="horizontal"?[n.top+n.height-(v.bottom||0),n.top+(v.top||0)]:[n.top+(v.top||0)+(C||0),n.top+n.height-(v.bottom||0)-(C||0)]:P=y.range,b&&(P=[P[1],P[0]]);var z=cV(y,i,h),U=z.scale,ne=z.realScaleType;U.domain(x).range(P),uV(U);var V=vV(U,Fa(Fa({},y),{},{realScaleType:ne}));a==="xAxis"?(T=w==="top"&&!S||w==="bottom"&&S,N=n.left,A=d[k]-T*y.height):a==="yAxis"&&(T=w==="left"&&!S||w==="right"&&S,N=d[k]-T*y.width,A=n.top);var F=Fa(Fa(Fa({},y),V),{},{realScaleType:ne,x:N,y:A,scale:U,width:a==="xAxis"?n.width:y.width,height:a==="yAxis"?n.height:y.height});return F.bandSize=C0(F,V),!y.hide&&a==="xAxis"?d[k]+=(T?-1:1)*F.height:y.hide||(d[k]+=(T?-1:1)*F.width),Fa(Fa({},p),{},np({},m,F))},{})},rC=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},Uq=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return rC({x:r,y:n},{x:a,y:i})},nC=function(){function e(t){Bq(this,e),this.scale=t}return Fq(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();np(nC,"EPS",1e-4);var n1=function(t){var r=Object.keys(t).reduce(function(n,a){return Fa(Fa({},n),{},np({},a,nC.create(t[a])))},{});return Fa(Fa({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return lq(a,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return ZP(a,function(i,o){return r[o].isInRange(i)})}})};function Gq(e){return(e%180+180)%180}var Wq=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Gq(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},Vq=Eo,Hq=mf,Xq=Uh;function Kq(e){return function(t,r,n){var a=Object(t);if(!Hq(t)){var i=Vq(r);t=Xq(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var Yq=Kq,qq=XP;function Zq(e){var t=qq(e),r=t%1;return t===t?r?t-r:t:0}var Qq=Zq,Jq=hj,eZ=Eo,tZ=Qq,rZ=Math.max;function nZ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:tZ(r);return a<0&&(a=rZ(n+a,0)),Jq(e,eZ(t),a)}var aZ=nZ,iZ=Yq,oZ=aZ,sZ=iZ(oZ),lZ=sZ;const cZ=zt(lZ);var uZ=K6(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),a1=j.createContext(void 0),i1=j.createContext(void 0),aC=j.createContext(void 0),iC=j.createContext({}),oC=j.createContext(void 0),sC=j.createContext(0),lC=j.createContext(0),qk=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,l=t.width,u=t.height,f=uZ(i);return L.createElement(a1.Provider,{value:n},L.createElement(i1.Provider,{value:a},L.createElement(iC.Provider,{value:i},L.createElement(aC.Provider,{value:f},L.createElement(oC.Provider,{value:o},L.createElement(sC.Provider,{value:u},L.createElement(lC.Provider,{value:l},s)))))))},fZ=function(){return j.useContext(oC)},cC=function(t){var r=j.useContext(a1);r==null&&ws();var n=r[t];return n==null&&ws(),n},dZ=function(){var t=j.useContext(a1);return io(t)},hZ=function(){var t=j.useContext(i1),r=cZ(t,function(n){return ZP(n.domain,Number.isFinite)});return r||io(t)},uC=function(t){var r=j.useContext(i1);r==null&&ws();var n=r[t];return n==null&&ws(),n},pZ=function(){var t=j.useContext(aC);return t},gZ=function(){return j.useContext(iC)},o1=function(){return j.useContext(lC)},s1=function(){return j.useContext(sC)};function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function mZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dC(n.key),n)}}function vZ(e,t,r){return t&&yZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xZ(e,t,r){return t=z0(t),bZ(e,fC()?Reflect.construct(t,r||[],z0(e).constructor):t.apply(e,r))}function bZ(e,t){if(t&&(Ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wZ(e)}function wZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fC=function(){return!!e})()}function z0(e){return z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z0(e)}function kZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ry(e,t)}function Ry(e,t){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ry(e,t)}function Zk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zk(Object(r),!0).forEach(function(n){l1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l1(e,t,r){return t=dC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dC(e){var t=SZ(e,"string");return Ll(t)=="symbol"?t:t+""}function SZ(e,t){if(Ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function jZ(e,t){return NZ(e)||OZ(e,t)||CZ(e,t)||PZ()}function PZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CZ(e,t){if(e){if(typeof e=="string")return Jk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jk(e,t)}}function Jk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function NZ(e){if(Array.isArray(e))return e}function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ly.apply(this,arguments)}var _Z=function(t,r){var n;return L.isValidElement(t)?n=L.cloneElement(t,r):Ke(t)?n=t(r):n=L.createElement("line",Ly({},r,{className:"recharts-reference-line-line"})),n},MZ=function(t,r,n,a,i,o,s,l,u){var f=i.x,d=i.y,h=i.width,p=i.height;if(n){var m=u.y,y=t.y.apply(m,{position:o});if(ui(u,"discard")&&!t.y.isInRange(y))return null;var w=[{x:f+h,y},{x:f,y}];return l==="left"?w.reverse():w}if(r){var x=u.x,g=t.x.apply(x,{position:o});if(ui(u,"discard")&&!t.x.isInRange(g))return null;var v=[{x:g,y:d+p},{x:g,y:d}];return s==="top"?v.reverse():v}if(a){var S=u.segment,b=S.map(function(k){return t.apply(k,{position:o})});return ui(u,"discard")&&eq(b,function(k){return!t.isInRange(k)})?null:b}return null};function AZ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,u=fZ(),f=cC(a),d=uC(i),h=pZ();if(!u||!h)return null;Ti(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=n1({x:f.scale,y:d.scale}),m=Wr(t),y=Wr(r),w=n&&n.length===2,x=MZ(p,m,y,w,h,e.position,f.orientation,d.orientation,e);if(!x)return null;var g=jZ(x,2),v=g[0],S=v.x,b=v.y,k=g[1],C=k.x,P=k.y,N=ui(e,"hidden")?"url(#".concat(u,")"):void 0,A=Qk(Qk({clipPath:N},Xe(e,!0)),{},{x1:S,y1:b,x2:C,y2:P});return L.createElement(kt,{className:st("recharts-reference-line",s)},_Z(o,A),on.renderCallByParent(e,Uq({x1:S,y1:b,x2:C,y2:P})))}var uo=function(e){function t(){return mZ(this,t),xZ(this,t,arguments)}return kZ(t,e),vZ(t,[{key:"render",value:function(){return L.createElement(AZ,this.props)}}])}(L.Component);l1(uo,"displayName","ReferenceLine");l1(uo,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(n){ap(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pC(n.key),n)}}function $Z(e,t,r){return t&&EZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DZ(e,t,r){return t=U0(t),IZ(e,hC()?Reflect.construct(t,r||[],U0(e).constructor):t.apply(e,r))}function IZ(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RZ(e)}function RZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hC=function(){return!!e})()}function U0(e){return U0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U0(e)}function LZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fy(e,t)}function Fy(e,t){return Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fy(e,t)}function ap(e,t,r){return t=pC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pC(e){var t=BZ(e,"string");return Bl(t)=="symbol"?t:t+""}function BZ(e,t){if(Bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var FZ=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=n1({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return ui(t,"discard")&&!o.isInRange(s)?null:s},kf=function(e){function t(){return TZ(this,t),DZ(this,t,arguments)}return LZ(t,e),$Z(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=Wr(a),f=Wr(i);if(Ti(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=FZ(this.props);if(!d)return null;var h=d.x,p=d.y,m=this.props,y=m.shape,w=m.className,x=ui(this.props,"hidden")?"url(#".concat(l,")"):void 0,g=tS(tS({clipPath:x},Xe(this.props,!0)),{},{cx:h,cy:p});return L.createElement(kt,{className:st("recharts-reference-dot",w)},t.renderDot(y,g),on.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(L.Component);ap(kf,"displayName","ReferenceDot");ap(kf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ap(kf,"renderDot",function(e,t){var r;return L.isValidElement(e)?r=L.cloneElement(e,t):Ke(e)?r=e(t):r=L.createElement(ep,By({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zy.apply(this,arguments)}function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){ip(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mC(n.key),n)}}function GZ(e,t,r){return t&&UZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WZ(e,t,r){return t=G0(t),VZ(e,gC()?Reflect.construct(t,r||[],G0(e).constructor):t.apply(e,r))}function VZ(e,t){if(t&&(Fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HZ(e)}function HZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gC=function(){return!!e})()}function G0(e){return G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G0(e)}function XZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uy(e,t)}function ip(e,t,r){return t=mC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mC(e){var t=KZ(e,"string");return Fl(t)=="symbol"?t:t+""}function KZ(e,t){if(Fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var YZ=function(t,r,n,a,i){var o=i.x1,s=i.x2,l=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var h=n1({x:f.scale,y:d.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ui(i,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:rC(p,m)},Sf=function(e){function t(){return zZ(this,t),WZ(this,t,arguments)}return XZ(t,e),GZ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,f=n.clipPathId;Ti(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Wr(a),h=Wr(i),p=Wr(o),m=Wr(s),y=this.props.shape;if(!d&&!h&&!p&&!m&&!y)return null;var w=YZ(d,h,p,m,this.props);if(!w&&!y)return null;var x=ui(this.props,"hidden")?"url(#".concat(f,")"):void 0;return L.createElement(kt,{className:st("recharts-reference-area",l)},t.renderRect(y,nS(nS({clipPath:x},Xe(this.props,!0)),w)),on.renderCallByParent(this.props,w))}}])}(L.Component);ip(Sf,"displayName","ReferenceArea");ip(Sf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ip(Sf,"renderRect",function(e,t){var r;return L.isValidElement(e)?r=L.cloneElement(e,t):Ke(e)?r=e(t):r=L.createElement(t1,zy({},t,{className:"recharts-reference-area-rect"})),r});function yC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function qZ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Wq(n,r)}function ZZ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function W0(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function QZ(e,t){return yC(e,t+1)}function JZ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,l=0,u=1,f=o,d=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:yC(n,u)};var y=l,w,x=function(){return w===void 0&&(w=r(m,y)),w},g=m.coordinate,v=l===0||W0(e,g,x,f,s);v||(l=0,f=o,u+=1),v&&(f=g+e*(x()/2+a),l+=u)},h;u<=i.length;)if(h=d(),h)return h.v;return[]}function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(r),!0).forEach(function(n){eQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eQ(e,t,r){return t=tQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tQ(e){var t=rQ(e,"string");return of(t)=="symbol"?t:t+""}function rQ(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nQ(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,l=t.end,u=function(h){var p=i[h],m,y=function(){return m===void 0&&(m=r(p,h)),m};if(h===o-1){var w=e*(p.coordinate+e*y()/2-l);i[h]=p=gn(gn({},p),{},{tickCoord:w>0?p.coordinate-w*e:p.coordinate})}else i[h]=p=gn(gn({},p),{},{tickCoord:p.coordinate});var x=W0(e,p.tickCoord,y,s,l);x&&(l=p.tickCoord-e*(y()/2+a),i[h]=gn(gn({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function aQ(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,l=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),h=e*(f.coordinate+e*d/2-u);o[s-1]=f=gn(gn({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var p=W0(e,f.tickCoord,function(){return d},l,u);p&&(u=f.tickCoord-e*(d/2+a),o[s-1]=gn(gn({},f),{},{isShow:!0}))}for(var m=i?s-1:s,y=function(g){var v=o[g],S,b=function(){return S===void 0&&(S=r(v,g)),S};if(g===0){var k=e*(v.coordinate-e*b()/2-l);o[g]=v=gn(gn({},v),{},{tickCoord:k<0?v.coordinate-k*e:v.coordinate})}else o[g]=v=gn(gn({},v),{},{tickCoord:v.coordinate});var C=W0(e,v.tickCoord,b,l,u);C&&(l=v.tickCoord+e*(b()/2+a),o[g]=gn(gn({},v),{},{isShow:!0}))},w=0;w<m;w++)y(w);return o}function c1(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(de(l)||$o.isSsr)return QZ(a,typeof l=="number"&&de(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",m=f&&p==="width"?tu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(v,S){var b=Ke(u)?u(v.value,S):v.value;return p==="width"?qZ(tu(b,{fontSize:t,letterSpacing:r}),m,d):tu(b,{fontSize:t,letterSpacing:r})[p]},w=a.length>=2?Wa(a[1].coordinate-a[0].coordinate):1,x=ZZ(i,w,p);return l==="equidistantPreserveStart"?JZ(w,x,y,a,o):(l==="preserveStart"||l==="preserveStartEnd"?h=aQ(w,x,y,a,o,l==="preserveStartEnd"):h=nQ(w,x,y,a,o),h.filter(function(g){return g.isShow}))}var iQ=["viewBox"],oQ=["viewBox"],sQ=["ticks"];function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nl.apply(this,arguments)}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){u1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wg(e,t){if(e==null)return{};var r=lQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function cQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xC(n.key),n)}}function uQ(e,t,r){return t&&oS(e.prototype,t),r&&oS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fQ(e,t,r){return t=V0(t),dQ(e,vC()?Reflect.construct(t,r||[],V0(e).constructor):t.apply(e,r))}function dQ(e,t){if(t&&(zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hQ(e)}function hQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vC=function(){return!!e})()}function V0(e){return V0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V0(e)}function pQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gy(e,t)}function Gy(e,t){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gy(e,t)}function u1(e,t,r){return t=xC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xC(e){var t=gQ(e,"string");return zl(t)=="symbol"?t:t+""}function gQ(e,t){if(zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dc=function(e){function t(r){var n;return cQ(this,t),n=fQ(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return pQ(t,e),uQ(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=wg(n,iQ),s=this.props,l=s.viewBox,u=wg(s,oQ);return!fl(i,l)||!fl(o,u)||!fl(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,p,m,y,w,x,g,v=d?-1:1,S=n.tickSize||f,b=de(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=m=n.coordinate,w=o+ +!d*l,y=w-v*S,g=y-v*h,x=b;break;case"left":y=w=n.coordinate,m=i+ +!d*s,p=m-v*S,x=p-v*h,g=b;break;case"right":y=w=n.coordinate,m=i+ +d*s,p=m+v*S,x=p+v*h,g=b;break;default:p=m=n.coordinate,w=o+ +d*l,y=w+v*S,g=y+v*h,x=b;break}return{line:{x1:p,y1:y,x2:m,y2:w},tick:{x,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,f=n.axisLine,d=Fr(Fr(Fr({},Xe(this.props,!1)),Xe(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=Fr(Fr({},d),{},{x1:a,y1:i+h*s,x2:a+o,y2:i+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);d=Fr(Fr({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+s})}return L.createElement("line",nl({},d,{className:st("recharts-cartesian-axis-line",Ca(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,l=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,h=s.unit,p=c1(Fr(Fr({},this.props),{},{ticks:n}),a,i),m=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),w=Xe(this.props,!1),x=Xe(f,!1),g=Fr(Fr({},w),{},{fill:"none"},Xe(l,!1)),v=p.map(function(S,b){var k=o.getTickLineCoord(S),C=k.line,P=k.tick,N=Fr(Fr(Fr(Fr({textAnchor:m,verticalAnchor:y},w),{},{stroke:"none",fill:u},x),P),{},{index:b,payload:S,visibleTicksCount:p.length,tickFormatter:d});return L.createElement(kt,nl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Cu(o.props,S,b)),l&&L.createElement("line",nl({},g,C,{className:st("recharts-cartesian-axis-tick-line",Ca(l,"className"))})),f&&t.renderTickItem(f,N,"".concat(Ke(d)?d(S.value,b):S.value).concat(h||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,p=wg(d,sQ),m=h;return Ke(l)&&(m=h&&h.length>0?l(this.props):l(p)),o<=0||s<=0||!m||!m.length?null:L.createElement(kt,{className:st("recharts-cartesian-axis",u),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),on.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=st(a.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(n)?o=L.cloneElement(n,Fr(Fr({},a),{},{className:s})):Ke(n)?o=n(Fr(Fr({},a),{},{className:s})):o=L.createElement(f0,nl({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);u1(dc,"displayName","CartesianAxis");u1(dc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var mQ=["x1","y1","x2","y2","key"],yQ=["offset"];function ks(e){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function sS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sS(Object(r),!0).forEach(function(n){vQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vQ(e,t,r){return t=xQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xQ(e){var t=bQ(e,"string");return ks(t)=="symbol"?t:t+""}function bQ(e,t){if(ks(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ks(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rs(){return rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rs.apply(this,arguments)}function lS(e,t){if(e==null)return{};var r=wQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kQ=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return L.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function bC(e,t){var r;if(L.isValidElement(e))r=L.cloneElement(e,t);else if(Ke(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=lS(t,mQ),u=Xe(l,!1);u.offset;var f=lS(u,yQ);r=L.createElement("line",rs({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function SQ(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=yn(yn({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return bC(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function jQ(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=yn(yn({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return bC(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function PQ(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var f=s.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var m=!f[p+1],y=m?a+o-h:f[p+1]-h;if(y<=0)return null;var w=p%t.length;return L.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:y,width:i,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function CQ(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var m=!f[p+1],y=m?i+s-h:f[p+1]-h;if(y<=0)return null;var w=p%n.length;return L.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:y,height:l,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var OQ=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return MP(c1(yn(yn(yn({},dc.defaultProps),n),{},{ticks:Ni(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},NQ=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return MP(c1(yn(yn(yn({},dc.defaultProps),n),{},{ticks:Ni(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Us={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fi(e){var t,r,n,a,i,o,s=o1(),l=s1(),u=gZ(),f=yn(yn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Us.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Us.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Us.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Us.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Us.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Us.verticalFill,x:de(e.x)?e.x:u.left,y:de(e.y)?e.y:u.top,width:de(e.width)?e.width:u.width,height:de(e.height)?e.height:u.height}),d=f.x,h=f.y,p=f.width,m=f.height,y=f.syncWithTicks,w=f.horizontalValues,x=f.verticalValues,g=dZ(),v=hZ();if(!de(p)||p<=0||!de(m)||m<=0||!de(d)||d!==+d||!de(h)||h!==+h)return null;var S=f.verticalCoordinatesGenerator||OQ,b=f.horizontalCoordinatesGenerator||NQ,k=f.horizontalPoints,C=f.verticalPoints;if((!k||!k.length)&&Ke(b)){var P=w&&w.length,N=b({yAxis:v?yn(yn({},v),{},{ticks:P?w:v.ticks}):void 0,width:s,height:l,offset:u},P?!0:y);Ti(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ks(N),"]")),Array.isArray(N)&&(k=N)}if((!C||!C.length)&&Ke(S)){var A=x&&x.length,T=S({xAxis:g?yn(yn({},g),{},{ticks:A?x:g.ticks}):void 0,width:s,height:l,offset:u},A?!0:y);Ti(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ks(T),"]")),Array.isArray(T)&&(C=T)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(kQ,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),L.createElement(SQ,rs({},f,{offset:u,horizontalPoints:k,xAxis:g,yAxis:v})),L.createElement(jQ,rs({},f,{offset:u,verticalPoints:C,xAxis:g,yAxis:v})),L.createElement(PQ,rs({},f,{horizontalPoints:k})),L.createElement(CQ,rs({},f,{verticalPoints:C})))}fi.displayName="CartesianGrid";var _Q=["type","layout","connectNulls","ref"],MQ=["key"];function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function cS(e,t){if(e==null)return{};var r=AQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iu.apply(this,arguments)}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){za(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gs(e){return DQ(e)||$Q(e)||EQ(e)||TQ()}function TQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(e,t){if(e){if(typeof e=="string")return Wy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wy(e,t)}}function $Q(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DQ(e){if(Array.isArray(e))return Wy(e)}function Wy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kC(n.key),n)}}function RQ(e,t,r){return t&&fS(e.prototype,t),r&&fS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function LQ(e,t,r){return t=H0(t),BQ(e,wC()?Reflect.construct(t,r||[],H0(e).constructor):t.apply(e,r))}function BQ(e,t){if(t&&(Ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FQ(e)}function FQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wC=function(){return!!e})()}function H0(e){return H0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H0(e)}function zQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vy(e,t)}function Vy(e,t){return Vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vy(e,t)}function za(e,t,r){return t=kC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kC(e){var t=UQ(e,"string");return Ul(t)=="symbol"?t:t+""}function UQ(e,t){if(Ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Dr=function(e){function t(){var r;IQ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=LQ(this,t,[].concat(a)),za(r,"state",{isAnimationFinished:!0,totalLength:0}),za(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),za(r,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(x,g){return x+g});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,h=s-o,p=[],m=0,y=0;m<l.length;y+=l[m],++m)if(y+l[m]>d){p=[].concat(Gs(l.slice(0,m)),[d-y]);break}var w=p.length%2===0?[0,h]:[h];return[].concat(Gs(t.repeat(l,f)),Gs(p),w).map(function(x){return"".concat(x,"px")}).join(", ")}),za(r,"id",As("recharts-line-")),za(r,"pathRef",function(o){r.mainCurve=o}),za(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),za(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return zQ(t,e),RQ(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Kn(f,fc);if(!d)return null;var h=function(y,w){return{x:y.x,y:y.y,value:y.value,errorVal:Vr(y.payload,w)}},p={clipPath:n?"url(#clipPath-".concat(a,")"):null};return L.createElement(kt,p,d.map(function(m){return L.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,f=s.dataKey,d=Xe(this.props,!1),h=Xe(l,!0),p=u.map(function(y,w){var x=ra(ra(ra({key:"dot-".concat(w),r:3},d),h),{},{index:w,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:u});return t.renderDotItem(l,x)}),m={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return L.createElement(kt,iu({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,l=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=cS(s,_Q),h=ra(ra(ra({},Xe(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:l,layout:u,connectNulls:f});return L.createElement(fs,iu({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,m=o.animateNewValues,y=o.width,w=o.height,x=this.state,g=x.prevPoints,v=x.totalLength;return L.createElement(Ya,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var b=S.t;if(g){var k=g.length/s.length,C=s.map(function(O,M){var D=Math.floor(M*k);if(g[D]){var E=g[D],B=Or(E.x,O.x),_=Or(E.y,O.y);return ra(ra({},O),{},{x:B(b),y:_(b)})}if(m){var I=Or(y*2,O.x),z=Or(w/2,O.y);return ra(ra({},O),{},{x:I(b),y:z(b)})}return ra(ra({},O),{},{x:O.x,y:O.y})});return i.renderCurveStatically(C,n,a)}var P=Or(0,v),N=P(b),A;if(l){var T="".concat(l).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});A=i.getStrokeDasharray(N,v,T)}else A=i.generateSimpleStrokeDasharray(v,N);return i.renderCurveStatically(s,n,a,{strokeDasharray:A})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return s&&o&&o.length&&(!u&&f>0||!xs(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.xAxis,f=a.yAxis,d=a.top,h=a.left,p=a.width,m=a.height,y=a.isAnimationActive,w=a.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,g=s.length===1,v=st("recharts-line",l),S=u&&u.allowDataOverflow,b=f&&f.allowDataOverflow,k=S||b,C=Ve(w)?this.id:w,P=(n=Xe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=P.r,A=N===void 0?3:N,T=P.strokeWidth,O=T===void 0?2:T,M=j3(o)?o:{},D=M.clipDot,E=D===void 0?!0:D,B=A*2+O;return L.createElement(kt,{className:v},S||b?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(C)},L.createElement("rect",{x:S?h:h-p/2,y:b?d:d-m/2,width:S?p:p*2,height:b?m:m*2})),!E&&L.createElement("clipPath",{id:"clipPath-dots-".concat(C)},L.createElement("rect",{x:h-B/2,y:d-B/2,width:p+B,height:m+B}))):null,!g&&this.renderCurve(k,C),this.renderErrorBar(k,C),(g||o)&&this.renderDots(k,E,C),(!y||x)&&ci.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Gs(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(Gs(o),Gs(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(L.isValidElement(n))i=L.cloneElement(n,a);else if(Ke(n))i=n(a);else{var o=a.key,s=cS(a,MQ),l=st("recharts-line-dot",typeof n!="boolean"?n.className:"");i=L.createElement(ep,iu({key:o},s,{className:l}))}return i}}])}(j.PureComponent);za(Dr,"displayName","Line");za(Dr,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!$o.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});za(Dr,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,f=t.layout,d=l.map(function(h,p){var m=Vr(h,o);return f==="horizontal"?{x:El({axis:r,ticks:a,bandSize:s,entry:h,index:p}),y:Ve(m)?null:n.scale(m),value:m,payload:h}:{x:Ve(m)?null:r.scale(m),y:El({axis:n,ticks:i,bandSize:s,entry:h,index:p}),value:m,payload:h}});return ra({points:d,layout:f},u)});var GQ=["layout","type","stroke","connectNulls","isRange","ref"],WQ=["key"],SC;function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function jC(e,t){if(e==null)return{};var r=VQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ns(){return ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ns.apply(this,arguments)}function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(r),!0).forEach(function(n){ai(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CC(n.key),n)}}function XQ(e,t,r){return t&&hS(e.prototype,t),r&&hS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KQ(e,t,r){return t=X0(t),YQ(e,PC()?Reflect.construct(t,r||[],X0(e).constructor):t.apply(e,r))}function YQ(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qQ(e)}function qQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PC=function(){return!!e})()}function X0(e){return X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X0(e)}function ZQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hy(e,t)}function Hy(e,t){return Hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Hy(e,t)}function ai(e,t,r){return t=CC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CC(e){var t=QQ(e,"string");return Gl(t)=="symbol"?t:t+""}function QQ(e,t){if(Gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ja=function(e){function t(){var r;HQ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=KQ(this,t,[].concat(a)),ai(r,"state",{isAnimationFinished:!0}),ai(r,"id",As("recharts-area-")),ai(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ke(o)&&o()}),ai(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ke(o)&&o()}),r}return ZQ(t,e),XQ(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,f=l.points,d=l.dataKey,h=Xe(this.props,!1),p=Xe(u,!0),m=f.map(function(w,x){var g=Ji(Ji(Ji({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:w.x,cy:w.y,dataKey:d,value:w.value,payload:w.payload,points:f});return t.renderDotItem(u,g)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return L.createElement(kt,ns({className:"recharts-area-dots"},y),m)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,u=o[o.length-1].x,f=n*Math.abs(l-u),d=lo(o.map(function(h){return h.y||0}));return de(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(lo(i.map(function(h){return h.y||0})),d)),de(d)?L.createElement("rect",{x:l<u?l:l-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,u=o[o.length-1].y,f=n*Math.abs(l-u),d=lo(o.map(function(h){return h.x||0}));return de(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(lo(i.map(function(h){return h.x||0})),d)),de(d)?L.createElement("rect",{x:0,y:l<u?l:l-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,l=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,h=s.isRange;s.ref;var p=jC(s,GQ);return L.createElement(kt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},L.createElement(fs,ns({},Xe(p,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&L.createElement(fs,ns({},Xe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&h&&L.createElement(fs,ns({},Xe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,m=this.state,y=m.prevPoints,w=m.prevBaseLine;return L.createElement(Ya,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t;if(y){var v=y.length/s.length,S=s.map(function(P,N){var A=Math.floor(N*v);if(y[A]){var T=y[A],O=Or(T.x,P.x),M=Or(T.y,P.y);return Ji(Ji({},P),{},{x:O(g),y:M(g)})}return P}),b;if(de(l)&&typeof l=="number"){var k=Or(w,l);b=k(g)}else if(Ve(l)||ac(l)){var C=Or(w,0);b=C(g)}else b=l.map(function(P,N){var A=Math.floor(N*v);if(w[A]){var T=w[A],O=Or(T.x,P.x),M=Or(T.y,P.y);return Ji(Ji({},P),{},{x:O(g),y:M(g)})}return P});return i.renderAreaStatically(S,b,n,a)}return L.createElement(kt,null,L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(g))),L.createElement(kt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,l,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&o&&o.length&&(!f&&h>0||!xs(f,o)||!xs(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.top,f=a.left,d=a.xAxis,h=a.yAxis,p=a.width,m=a.height,y=a.isAnimationActive,w=a.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,g=s.length===1,v=st("recharts-area",l),S=d&&d.allowDataOverflow,b=h&&h.allowDataOverflow,k=S||b,C=Ve(w)?this.id:w,P=(n=Xe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=P.r,A=N===void 0?3:N,T=P.strokeWidth,O=T===void 0?2:T,M=j3(o)?o:{},D=M.clipDot,E=D===void 0?!0:D,B=A*2+O;return L.createElement(kt,{className:v},S||b?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(C)},L.createElement("rect",{x:S?f:f-p/2,y:b?u:u-m/2,width:S?p:p*2,height:b?m:m*2})),!E&&L.createElement("clipPath",{id:"clipPath-dots-".concat(C)},L.createElement("rect",{x:f-B/2,y:u-B/2,width:p+B,height:m+B}))):null,g?null:this.renderArea(k,C),(o||g)&&this.renderDots(k,E,C),(!y||x)&&ci.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(j.PureComponent);SC=ja;ai(ja,"displayName","Area");ai(ja,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!$o.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ai(ja,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(de(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});ai(ja,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=t.layout,m=u&&u.length,y=SC.getBaseValue(t,r,n,a),w=p==="horizontal",x=!1,g=d.map(function(S,b){var k;m?k=u[f+b]:(k=Vr(S,l),Array.isArray(k)?x=!0:k=[y,k]);var C=k[1]==null||m&&Vr(S,l)==null;return w?{x:El({axis:n,ticks:i,bandSize:s,entry:S,index:b}),y:C?null:a.scale(k[1]),value:k,payload:S}:{x:C?null:n.scale(k[1]),y:El({axis:a,ticks:o,bandSize:s,entry:S,index:b}),value:k,payload:S}}),v;return m||x?v=g.map(function(S){var b=Array.isArray(S.value)?S.value[0]:null;return w?{x:S.x,y:b!=null&&S.y!=null?a.scale(b):null}:{x:b!=null?n.scale(b):null,y:S.y}}):v=w?a.scale(y):n.scale(y),Ji({points:g,baseLine:v,layout:p,isRange:x},h)});ai(ja,"renderDotItem",function(e,t){var r;if(L.isValidElement(e))r=L.cloneElement(e,t);else if(Ke(e))r=e(t);else{var n=st("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=jC(t,WQ);r=L.createElement(ep,ns({},i,{key:a,className:n}))}return r});function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function JQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_C(n.key),n)}}function tJ(e,t,r){return t&&eJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rJ(e,t,r){return t=K0(t),nJ(e,OC()?Reflect.construct(t,r||[],K0(e).constructor):t.apply(e,r))}function nJ(e,t){if(t&&(Wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aJ(e)}function aJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OC=function(){return!!e})()}function K0(e){return K0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K0(e)}function iJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xy(e,t)}function Xy(e,t){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xy(e,t)}function NC(e,t,r){return t=_C(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _C(e){var t=oJ(e,"string");return Wl(t)=="symbol"?t:t+""}function oJ(e,t){if(Wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var op=function(e){function t(){return JQ(this,t),rJ(this,t,arguments)}return iJ(t,e),tJ(t,[{key:"render",value:function(){return null}}])}(j.Component);NC(op,"displayName","ZAxis");NC(op,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var sJ=["option","isActive"];function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ou.apply(this,arguments)}function lJ(e,t){if(e==null)return{};var r=cJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uJ(e){var t=e.option,r=e.isActive,n=lJ(e,sJ);return typeof t=="string"?j.createElement(Ey,ou({option:j.createElement(zh,ou({type:t},n)),isActive:r,shapeType:"symbols"},n)):j.createElement(Ey,ou({option:t,isActive:r,shapeType:"symbols"},n))}function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},su.apply(this,arguments)}function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){fo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AC(n.key),n)}}function dJ(e,t,r){return t&&gS(e.prototype,t),r&&gS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hJ(e,t,r){return t=Y0(t),pJ(e,MC()?Reflect.construct(t,r||[],Y0(e).constructor):t.apply(e,r))}function pJ(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gJ(e)}function gJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MC=function(){return!!e})()}function Y0(e){return Y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y0(e)}function mJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ky(e,t)}function Ky(e,t){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ky(e,t)}function fo(e,t,r){return t=AC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AC(e){var t=yJ(e,"string");return Vl(t)=="symbol"?t:t+""}function yJ(e,t){if(Vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var An=function(e){function t(){var r;fJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=hJ(this,t,[].concat(a)),fo(r,"state",{isAnimationFinished:!1}),fo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),fo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),fo(r,"id",As("recharts-scatter-")),r}return mJ(t,e),dJ(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,l=i.activeIndex,u=Xe(this.props,!1);return n.map(function(f,d){var h=l===d,p=h?s:o,m=xa(xa({},u),f);return L.createElement(kt,su({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},Cu(a.props,f,d),{role:"img"}),L.createElement(uJ,su({option:p,isActive:h,key:"symbol-".concat(d)},m)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return L.createElement(Ya,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=i.map(function(y,w){var x=d&&d[w];if(x){var g=Or(x.cx,y.cx),v=Or(x.cy,y.cy),S=Or(x.size,y.size);return xa(xa({},y),{},{cx:g(p),cy:v(p),size:S(p)})}var b=Or(0,y.size);return xa(xa({},y),{},{size:b(p)})});return L.createElement(kt,null,n.renderSymbolsStatically(m))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!xs(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,l=a.children,u=Kn(l,fc);return u?u.map(function(f,d){var h=f.props,p=h.direction,m=h.dataKey;return L.cloneElement(f,{key:"".concat(p,"-").concat(m,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(w,x){return{x:w.cx,y:w.cy,value:p==="x"?+w.node.x:+w.node.y,errorVal:Vr(w,x)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,l=Xe(this.props,!1),u=Xe(i,!1),f,d;if(o==="joint")f=a.map(function(v){return{x:v.cx,y:v.cy}});else if(o==="fitting"){var h=V8(a),p=h.xmin,m=h.xmax,y=h.a,w=h.b,x=function(S){return y*S+w};f=[{x:p,y:x(p)},{x:m,y:x(m)}]}var g=xa(xa(xa({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:f});return L.isValidElement(i)?d=L.cloneElement(i,g):Ke(i)?d=i(g):d=L.createElement(fs,su({},g,{type:s})),L.createElement(kt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,l=n.xAxis,u=n.yAxis,f=n.left,d=n.top,h=n.width,p=n.height,m=n.id,y=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,x=st("recharts-scatter",s),g=l&&l.allowDataOverflow,v=u&&u.allowDataOverflow,S=g||v,b=Ve(m)?this.id:m;return L.createElement(kt,{className:x,clipPath:S?"url(#clipPath-".concat(b,")"):null},g||v?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(b)},L.createElement("rect",{x:g?f:f-h/2,y:v?d:d-p/2,width:g?h:h*2,height:v?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),L.createElement(kt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!y||w)&&ci.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(j.PureComponent);fo(An,"displayName","Scatter");fo(An,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!$o.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});fo(An,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=a.props.tooltipType,f=Kn(a.props.children,_x),d=Ve(t.dataKey)?a.props.dataKey:t.dataKey,h=Ve(r.dataKey)?a.props.dataKey:r.dataKey,p=n&&n.dataKey,m=n?n.range:op.defaultProps.range,y=m&&m[0],w=t.scale.bandwidth?t.scale.bandwidth():0,x=r.scale.bandwidth?r.scale.bandwidth():0,g=i.map(function(v,S){var b=Vr(v,d),k=Vr(v,h),C=!Ve(p)&&Vr(v,p)||"-",P=[{name:Ve(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:b,payload:v,dataKey:d,type:u},{name:Ve(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:v,dataKey:h,type:u}];C!=="-"&&P.push({name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:v,dataKey:p,type:u});var N=El({axis:t,ticks:o,bandSize:w,entry:v,index:S,dataKey:d}),A=El({axis:r,ticks:s,bandSize:x,entry:v,index:S,dataKey:h}),T=C!=="-"?n.scale(C):y,O=Math.sqrt(Math.max(T,0)/Math.PI);return xa(xa({},v),{},{cx:N,cy:A,x:N-O,y:A-O,xAxis:t,yAxis:r,zAxis:n,width:2*O,height:2*O,size:T,node:{x:b,y:k,z:C},tooltipPayload:P,tooltipPosition:{x:N,y:A},payload:v},f&&f[S]&&f[S].props)});return xa({points:g},l)});function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function vJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$C(n.key),n)}}function bJ(e,t,r){return t&&xJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wJ(e,t,r){return t=q0(t),kJ(e,TC()?Reflect.construct(t,r||[],q0(e).constructor):t.apply(e,r))}function kJ(e,t){if(t&&(Hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SJ(e)}function SJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TC=function(){return!!e})()}function q0(e){return q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q0(e)}function jJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yy(e,t)}function Yy(e,t){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yy(e,t)}function EC(e,t,r){return t=$C(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $C(e){var t=PJ(e,"string");return Hl(t)=="symbol"?t:t+""}function PJ(e,t){if(Hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qy.apply(this,arguments)}function CJ(e){var t=e.xAxisId,r=o1(),n=s1(),a=cC(t);return a==null?null:j.createElement(dc,qy({},a,{className:st("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Ni(o,!0)}}))}var Yn=function(e){function t(){return vJ(this,t),wJ(this,t,arguments)}return jJ(t,e),bJ(t,[{key:"render",value:function(){return j.createElement(CJ,this.props)}}])}(j.Component);EC(Yn,"displayName","XAxis");EC(Yn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xl(e){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(e)}function OJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RC(n.key),n)}}function _J(e,t,r){return t&&NJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MJ(e,t,r){return t=Z0(t),AJ(e,DC()?Reflect.construct(t,r||[],Z0(e).constructor):t.apply(e,r))}function AJ(e,t){if(t&&(Xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TJ(e)}function TJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DC=function(){return!!e})()}function Z0(e){return Z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z0(e)}function EJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zy(e,t)}function Zy(e,t){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zy(e,t)}function IC(e,t,r){return t=RC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RC(e){var t=$J(e,"string");return Xl(t)=="symbol"?t:t+""}function $J(e,t){if(Xl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(this,arguments)}var DJ=function(t){var r=t.yAxisId,n=o1(),a=s1(),i=uC(r);return i==null?null:j.createElement(dc,Qy({},i,{className:st("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return Ni(s,!0)}}))},qn=function(e){function t(){return OJ(this,t),MJ(this,t,arguments)}return EJ(t,e),_J(t,[{key:"render",value:function(){return j.createElement(DJ,this.props)}}])}(j.Component);IC(qn,"displayName","YAxis");IC(qn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function mS(e){return BJ(e)||LJ(e)||RJ(e)||IJ()}function IJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RJ(e,t){if(e){if(typeof e=="string")return Jy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jy(e,t)}}function LJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BJ(e){if(Array.isArray(e))return Jy(e)}function Jy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ev=function(t,r,n,a,i){var o=Kn(t,uo),s=Kn(t,kf),l=[].concat(mS(o),mS(s)),u=Kn(t,Sf),f="".concat(a,"Id"),d=a[0],h=r;if(l.length&&(h=l.reduce(function(y,w){if(w.props[f]===n&&ui(w.props,"extendDomain")&&de(w.props[d])){var x=w.props[d];return[Math.min(y[0],x),Math.max(y[1],x)]}return y},h)),u.length){var p="".concat(d,"1"),m="".concat(d,"2");h=u.reduce(function(y,w){if(w.props[f]===n&&ui(w.props,"extendDomain")&&de(w.props[p])&&de(w.props[m])){var x=w.props[p],g=w.props[m];return[Math.min(y[0],x,g),Math.max(y[1],x,g)]}return y},h)}return i&&i.length&&(h=i.reduce(function(y,w){return de(w)?[Math.min(y[0],w),Math.max(y[1],w)]:y},h)),h},LC={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function i(l,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new a(f,d||l,h),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,h,p,m){var y=r?r+u:u;if(!this._events[y])return!1;var w=this._events[y],x=arguments.length,g,v;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,d),!0;case 4:return w.fn.call(w.context,f,d,h),!0;case 5:return w.fn.call(w.context,f,d,h,p),!0;case 6:return w.fn.call(w.context,f,d,h,p,m),!0}for(v=1,g=new Array(x-1);v<x;v++)g[v-1]=arguments[v];w.fn.apply(w.context,g)}else{var S=w.length,b;for(v=0;v<S;v++)switch(w[v].once&&this.removeListener(u,w[v].fn,void 0,!0),x){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,f);break;case 3:w[v].fn.call(w[v].context,f,d);break;case 4:w[v].fn.call(w[v].context,f,d,h);break;default:if(!g)for(b=1,g=new Array(x-1);b<x;b++)g[b-1]=arguments[b];w[v].fn.apply(w[v].context,g)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===f&&(!h||m.once)&&(!d||m.context===d)&&o(this,p);else{for(var y=0,w=[],x=m.length;y<x;y++)(m[y].fn!==f||h&&!m[y].once||d&&m[y].context!==d)&&w.push(m[y]);w.length?this._events[p]=w.length===1?w[0]:w:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(LC);var FJ=LC.exports;const zJ=zt(FJ);var kg=new zJ,Sg="recharts.syncMouseEvents";function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function UJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BC(n.key),n)}}function WJ(e,t,r){return t&&GJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jg(e,t,r){return t=BC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BC(e){var t=VJ(e,"string");return sf(t)=="symbol"?t:t+""}function VJ(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HJ=function(){function e(){UJ(this,e),jg(this,"activeIndex",0),jg(this,"coordinateList",[]),jg(this,"layout","horizontal")}return WJ(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+l+u,h=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function XJ(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&de(n)&&de(a))return!0}return!1}function KJ(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function FC(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=sn(t,r,n,a),s=sn(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function YJ(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=sn(s,l,u,d),p=sn(s,l,f,d);n=h.x,a=h.y,i=p.x,o=p.y}else return FC(t);return[{x:n,y:a},{x:i,y:o}]}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function yS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yS(Object(r),!0).forEach(function(n){qJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qJ(e,t,r){return t=ZJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZJ(e){var t=QJ(e,"string");return lf(t)=="symbol"?t:t+""}function QJ(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JJ(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var m,y=fs;if(h==="ScatterChart")m=o,y=PK;else if(h==="BarChart")m=KJ(d,o,l,f),y=t1;else if(d==="radial"){var w=FC(o),x=w.cx,g=w.cy,v=w.radius,S=w.startAngle,b=w.endAngle;m={cx:x,cy:g,startAngle:S,endAngle:b,innerRadius:v,outerRadius:v},y=DP}else m={points:YJ(d,o,l)},y=fs;var k=id(id(id(id({stroke:"#ccc",pointerEvents:"none"},l),m),Xe(p,!1)),{},{payload:s,payloadIndex:u,className:st("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,k):j.createElement(y,k)}var eee=["item"],tee=["children","className","width","height","style","compact","title","desc"];function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},al.apply(this,arguments)}function vS(e,t){return aee(e)||nee(e,t)||UC(e,t)||ree()}function ree(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function aee(e){if(Array.isArray(e))return e}function xS(e,t){if(e==null)return{};var r=iee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function see(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GC(n.key),n)}}function lee(e,t,r){return t&&see(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cee(e,t,r){return t=Q0(t),uee(e,zC()?Reflect.construct(t,r||[],Q0(e).constructor):t.apply(e,r))}function uee(e,t){if(t&&(Kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fee(e)}function fee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zC=function(){return!!e})()}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q0(e)}function dee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}function tv(e,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tv(e,t)}function Yl(e){return gee(e)||pee(e)||UC(e)||hee()}function hee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UC(e,t){if(e){if(typeof e=="string")return rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rv(e,t)}}function pee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gee(e){if(Array.isArray(e))return rv(e)}function rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(n){Ie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ie(e,t,r){return t=GC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GC(e){var t=mee(e,"string");return Kl(t)=="symbol"?t:t+""}function mee(e,t){if(Kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yee={xAxis:["bottom","top"],yAxis:["left","right"]},vee={width:"100%",height:"100%"},WC={x:0,y:0};function od(e){return e}var xee=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},bee=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return te(te(te({},a),sn(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,u=a.angle;return te(te(te({},a),sn(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return WC},sp=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Yl(s),Yl(u)):s},[]);return o.length>0?o:t&&t.length&&de(a)&&de(i)?t.slice(a,i+1):[]};function VC(e){return e==="number"?[0,"auto"]:void 0}var nv=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=sp(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(l,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?s:d;h=qd(p,o.dataKey,a)}else h=d&&d[n]||s[n];return h?[].concat(Yl(l),[TP(u,h)]):l},[])},wS=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=xee(i,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,f=nV(o,s,u,l);if(f>=0&&u){var d=u[f]&&u[f].value,h=nv(t,r,f,d),p=bee(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},wee=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=_P(f,i);return n.reduce(function(m,y){var w,x=y.type.defaultProps!==void 0?te(te({},y.type.defaultProps),y.props):y.props,g=x.type,v=x.dataKey,S=x.allowDataOverflow,b=x.allowDuplicatedCategory,k=x.scale,C=x.ticks,P=x.includeHidden,N=x[o];if(m[N])return m;var A=sp(t.data,{graphicalItems:a.filter(function(V){var F,re=o in V.props?V.props[o]:(F=V.type.defaultProps)===null||F===void 0?void 0:F[o];return re===N}),dataStartIndex:l,dataEndIndex:u}),T=A.length,O,M,D;XJ(x.domain,S,g)&&(O=yy(x.domain,null,S),p&&(g==="number"||k!=="auto")&&(D=nu(A,v,"category")));var E=VC(g);if(!O||O.length===0){var B,_=(B=x.domain)!==null&&B!==void 0?B:E;if(v){if(O=nu(A,v,g),g==="category"&&p){var I=W8(O);b&&I?(M=O,O=I0(0,T)):b||(O=Qw(_,O,y).reduce(function(V,F){return V.indexOf(F)>=0?V:[].concat(Yl(V),[F])},[]))}else if(g==="category")b?O=O.filter(function(V){return V!==""&&!Ve(V)}):O=Qw(_,O,y).reduce(function(V,F){return V.indexOf(F)>=0||F===""||Ve(F)?V:[].concat(Yl(V),[F])},[]);else if(g==="number"){var z=lV(A,a.filter(function(V){var F,re,ee=o in V.props?V.props[o]:(F=V.type.defaultProps)===null||F===void 0?void 0:F[o],$="hide"in V.props?V.props.hide:(re=V.type.defaultProps)===null||re===void 0?void 0:re.hide;return ee===N&&(P||!$)}),v,i,f);z&&(O=z)}p&&(g==="number"||k!=="auto")&&(D=nu(A,v,"category"))}else p?O=I0(0,T):s&&s[N]&&s[N].hasStack&&g==="number"?O=h==="expand"?[0,1]:AP(s[N].stackGroups,l,u):O=NP(A,a.filter(function(V){var F=o in V.props?V.props[o]:V.type.defaultProps[o],re="hide"in V.props?V.props.hide:V.type.defaultProps.hide;return F===N&&(P||!re)}),g,f,!0);if(g==="number")O=ev(d,O,N,i,C),_&&(O=yy(_,O,S));else if(g==="category"&&_){var U=_,ne=O.every(function(V){return U.indexOf(V)>=0});ne&&(O=U)}}return te(te({},m),{},Ie({},N,te(te({},x),{},{axisType:i,domain:O,categoricalDomain:D,duplicateDomain:M,originalDomain:(w=x.domain)!==null&&w!==void 0?w:E,isCategorical:p,layout:f})))},{})},kee=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=sp(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=h.length,m=_P(f,i),y=-1;return n.reduce(function(w,x){var g=x.type.defaultProps!==void 0?te(te({},x.type.defaultProps),x.props):x.props,v=g[o],S=VC("number");if(!w[v]){y++;var b;return m?b=I0(0,p):s&&s[v]&&s[v].hasStack?(b=AP(s[v].stackGroups,l,u),b=ev(d,b,v,i)):(b=yy(S,NP(h,n.filter(function(k){var C,P,N=o in k.props?k.props[o]:(C=k.type.defaultProps)===null||C===void 0?void 0:C[o],A="hide"in k.props?k.props.hide:(P=k.type.defaultProps)===null||P===void 0?void 0:P.hide;return N===v&&!A}),"number",f),a.defaultProps.allowDataOverflow),b=ev(d,b,v,i)),te(te({},w),{},Ie({},v,te(te({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ca(yee,"".concat(i,".").concat(y%2),null),domain:b,originalDomain:S,isCategorical:m,layout:f})))}return w},{})},See=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Kn(f,i),p={};return h&&h.length?p=wee(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(p=kee(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},jee=function(t){var r=io(t),n=Ni(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Ox(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:C0(r,n)}},kS=function(t){var r=t.children,n=t.defaultShowTooltip,a=ia(r,Il),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Pee=function(t){return!t||!t.length?!1:t.some(function(r){var n=Ai(r&&r.type);return n&&n.indexOf("Bar")>=0})},SS=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Cee=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,h=n.margin||{},p=ia(d,Il),m=ia(d,si),y=Object.keys(l).reduce(function(b,k){var C=l[k],P=C.orientation;return!C.mirror&&!C.hide?te(te({},b),{},Ie({},P,b[P]+C.width)):b},{left:h.left||0,right:h.right||0}),w=Object.keys(o).reduce(function(b,k){var C=o[k],P=C.orientation;return!C.mirror&&!C.hide?te(te({},b),{},Ie({},P,Ca(b,"".concat(P))+C.height)):b},{top:h.top||0,bottom:h.bottom||0}),x=te(te({},w),y),g=x.bottom;p&&(x.bottom+=p.props.height||Il.defaultProps.height),m&&r&&(x=oV(x,a,n,r));var v=u-x.left-x.right,S=f-x.top-x.bottom;return te(te({brushBottom:g},x),{},{width:Math.max(v,0),height:Math.max(S,0)})},Oee=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},f1=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(x,g){var v=g.graphicalItems,S=g.stackGroups,b=g.offset,k=g.updateId,C=g.dataStartIndex,P=g.dataEndIndex,N=x.barSize,A=x.layout,T=x.barGap,O=x.barCategoryGap,M=x.maxBarSize,D=SS(A),E=D.numericAxisName,B=D.cateAxisName,_=Pee(v),I=[];return v.forEach(function(z,U){var ne=sp(x.data,{graphicalItems:[z],dataStartIndex:C,dataEndIndex:P}),V=z.type.defaultProps!==void 0?te(te({},z.type.defaultProps),z.props):z.props,F=V.dataKey,re=V.maxBarSize,ee=V["".concat(E,"Id")],$=V["".concat(B,"Id")],ae={},q=l.reduce(function(Ue,lt){var St=g["".concat(lt.axisType,"Map")],_r=V["".concat(lt.axisType,"Id")];St&&St[_r]||lt.axisType==="zAxis"||ws();var ct=St[_r];return te(te({},Ue),{},Ie(Ie({},lt.axisType,ct),"".concat(lt.axisType,"Ticks"),Ni(ct)))},ae),H=q[B],le=q["".concat(B,"Ticks")],ce=S&&S[ee]&&S[ee].hasStack&&bV(z,S[ee].stackGroups),Z=Ai(z.type).indexOf("Bar")>=0,Ce=C0(H,le),we=[],Q=_&&aV({barSize:N,stackGroups:S,totalSize:Oee(q,B)});if(Z){var he,ve,qe=Ve(re)?M:re,He=(he=(ve=C0(H,le,!0))!==null&&ve!==void 0?ve:qe)!==null&&he!==void 0?he:0;we=iV({barGap:T,barCategoryGap:O,bandSize:He!==Ce?He:Ce,sizeList:Q[$],maxBarSize:qe}),He!==Ce&&(we=we.map(function(Ue){return te(te({},Ue),{},{position:te(te({},Ue.position),{},{offset:Ue.position.offset-He/2})})}))}var Ee=z&&z.type&&z.type.getComposedData;Ee&&I.push({props:te(te({},Ee(te(te({},q),{},{displayedData:ne,props:x,dataKey:F,item:z,bandSize:Ce,barPosition:we,offset:b,stackedData:ce,layout:A,dataStartIndex:C,dataEndIndex:P}))),{},Ie(Ie(Ie({key:z.key||"item-".concat(U)},E,q[E]),B,q[B]),"animationId",k)),childIndex:nT(z,x.children),item:z})}),I},p=function(x,g){var v=x.props,S=x.dataStartIndex,b=x.dataEndIndex,k=x.updateId;if(!Hb({props:v}))return null;var C=v.children,P=v.layout,N=v.stackOffset,A=v.data,T=v.reverseStackOrder,O=SS(P),M=O.numericAxisName,D=O.cateAxisName,E=Kn(C,n),B=yV(A,E,"".concat(M,"Id"),"".concat(D,"Id"),N,T),_=l.reduce(function(V,F){var re="".concat(F.axisType,"Map");return te(te({},V),{},Ie({},re,See(v,te(te({},F),{},{graphicalItems:E,stackGroups:F.axisType===M&&B,dataStartIndex:S,dataEndIndex:b}))))},{}),I=Cee(te(te({},_),{},{props:v,graphicalItems:E}),g==null?void 0:g.legendBBox);Object.keys(_).forEach(function(V){_[V]=f(v,_[V],I,V.replace("Map",""),r)});var z=_["".concat(D,"Map")],U=jee(z),ne=h(v,te(te({},_),{},{dataStartIndex:S,dataEndIndex:b,updateId:k,graphicalItems:E,stackGroups:B,offset:I}));return te(te({formattedGraphicalItems:ne,graphicalItems:E,offset:I,stackGroups:B},U),_)},m=function(w){function x(g){var v,S,b;return oee(this,x),b=cee(this,x,[g]),Ie(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ie(b,"accessibilityManager",new HJ),Ie(b,"handleLegendBBoxUpdate",function(k){if(k){var C=b.state,P=C.dataStartIndex,N=C.dataEndIndex,A=C.updateId;b.setState(te({legendBBox:k},p({props:b.props,dataStartIndex:P,dataEndIndex:N,updateId:A},te(te({},b.state),{},{legendBBox:k}))))}}),Ie(b,"handleReceiveSyncEvent",function(k,C,P){if(b.props.syncId===k){if(P===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(C)}}),Ie(b,"handleBrushChange",function(k){var C=k.startIndex,P=k.endIndex;if(C!==b.state.dataStartIndex||P!==b.state.dataEndIndex){var N=b.state.updateId;b.setState(function(){return te({dataStartIndex:C,dataEndIndex:P},p({props:b.props,dataStartIndex:C,dataEndIndex:P,updateId:N},b.state))}),b.triggerSyncEvent({dataStartIndex:C,dataEndIndex:P})}}),Ie(b,"handleMouseEnter",function(k){var C=b.getMouseInfo(k);if(C){var P=te(te({},C),{},{isTooltipActive:!0});b.setState(P),b.triggerSyncEvent(P);var N=b.props.onMouseEnter;Ke(N)&&N(P,k)}}),Ie(b,"triggeredAfterMouseMove",function(k){var C=b.getMouseInfo(k),P=C?te(te({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(P),b.triggerSyncEvent(P);var N=b.props.onMouseMove;Ke(N)&&N(P,k)}),Ie(b,"handleItemMouseEnter",function(k){b.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Ie(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Ie(b,"handleMouseMove",function(k){k.persist(),b.throttleTriggeredAfterMouseMove(k)}),Ie(b,"handleMouseLeave",function(k){b.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};b.setState(C),b.triggerSyncEvent(C);var P=b.props.onMouseLeave;Ke(P)&&P(C,k)}),Ie(b,"handleOuterEvent",function(k){var C=rT(k),P=Ca(b.props,"".concat(C));if(C&&Ke(P)){var N,A;/.*touch.*/i.test(C)?A=b.getMouseInfo(k.changedTouches[0]):A=b.getMouseInfo(k),P((N=A)!==null&&N!==void 0?N:{},k)}}),Ie(b,"handleClick",function(k){var C=b.getMouseInfo(k);if(C){var P=te(te({},C),{},{isTooltipActive:!0});b.setState(P),b.triggerSyncEvent(P);var N=b.props.onClick;Ke(N)&&N(P,k)}}),Ie(b,"handleMouseDown",function(k){var C=b.props.onMouseDown;if(Ke(C)){var P=b.getMouseInfo(k);C(P,k)}}),Ie(b,"handleMouseUp",function(k){var C=b.props.onMouseUp;if(Ke(C)){var P=b.getMouseInfo(k);C(P,k)}}),Ie(b,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Ie(b,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.handleMouseDown(k.changedTouches[0])}),Ie(b,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.handleMouseUp(k.changedTouches[0])}),Ie(b,"handleDoubleClick",function(k){var C=b.props.onDoubleClick;if(Ke(C)){var P=b.getMouseInfo(k);C(P,k)}}),Ie(b,"handleContextMenu",function(k){var C=b.props.onContextMenu;if(Ke(C)){var P=b.getMouseInfo(k);C(P,k)}}),Ie(b,"triggerSyncEvent",function(k){b.props.syncId!==void 0&&kg.emit(Sg,b.props.syncId,k,b.eventEmitterSymbol)}),Ie(b,"applySyncEvent",function(k){var C=b.props,P=C.layout,N=C.syncMethod,A=b.state.updateId,T=k.dataStartIndex,O=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)b.setState(te({dataStartIndex:T,dataEndIndex:O},p({props:b.props,dataStartIndex:T,dataEndIndex:O,updateId:A},b.state)));else if(k.activeTooltipIndex!==void 0){var M=k.chartX,D=k.chartY,E=k.activeTooltipIndex,B=b.state,_=B.offset,I=B.tooltipTicks;if(!_)return;if(typeof N=="function")E=N(I,k);else if(N==="value"){E=-1;for(var z=0;z<I.length;z++)if(I[z].value===k.activeLabel){E=z;break}}var U=te(te({},_),{},{x:_.left,y:_.top}),ne=Math.min(M,U.x+U.width),V=Math.min(D,U.y+U.height),F=I[E]&&I[E].value,re=nv(b.state,b.props.data,E),ee=I[E]?{x:P==="horizontal"?I[E].coordinate:ne,y:P==="horizontal"?V:I[E].coordinate}:WC;b.setState(te(te({},k),{},{activeLabel:F,activeCoordinate:ee,activePayload:re,activeTooltipIndex:E}))}else b.setState(k)}),Ie(b,"renderCursor",function(k){var C,P=b.state,N=P.isTooltipActive,A=P.activeCoordinate,T=P.activePayload,O=P.offset,M=P.activeTooltipIndex,D=P.tooltipAxisBandSize,E=b.getTooltipEventType(),B=(C=k.props.active)!==null&&C!==void 0?C:N,_=b.props.layout,I=k.key||"_recharts-cursor";return L.createElement(JJ,{key:I,activeCoordinate:A,activePayload:T,activeTooltipIndex:M,chartName:r,element:k,isActive:B,layout:_,offset:O,tooltipAxisBandSize:D,tooltipEventType:E})}),Ie(b,"renderPolarAxis",function(k,C,P){var N=Ca(k,"type.axisType"),A=Ca(b.state,"".concat(N,"Map")),T=k.type.defaultProps,O=T!==void 0?te(te({},T),k.props):k.props,M=A&&A[O["".concat(N,"Id")]];return j.cloneElement(k,te(te({},M),{},{className:st(N,M.className),key:k.key||"".concat(C,"-").concat(P),ticks:Ni(M,!0)}))}),Ie(b,"renderPolarGrid",function(k){var C=k.props,P=C.radialLines,N=C.polarAngles,A=C.polarRadius,T=b.state,O=T.radiusAxisMap,M=T.angleAxisMap,D=io(O),E=io(M),B=E.cx,_=E.cy,I=E.innerRadius,z=E.outerRadius;return j.cloneElement(k,{polarAngles:Array.isArray(N)?N:Ni(E,!0).map(function(U){return U.coordinate}),polarRadius:Array.isArray(A)?A:Ni(D,!0).map(function(U){return U.coordinate}),cx:B,cy:_,innerRadius:I,outerRadius:z,key:k.key||"polar-grid",radialLines:P})}),Ie(b,"renderLegend",function(){var k=b.state.formattedGraphicalItems,C=b.props,P=C.children,N=C.width,A=C.height,T=b.props.margin||{},O=N-(T.left||0)-(T.right||0),M=CP({children:P,formattedGraphicalItems:k,legendWidth:O,legendContent:u});if(!M)return null;var D=M.item,E=xS(M,eee);return j.cloneElement(D,te(te({},E),{},{chartWidth:N,chartHeight:A,margin:T,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Ie(b,"renderTooltip",function(){var k,C=b.props,P=C.children,N=C.accessibilityLayer,A=ia(P,Zr);if(!A)return null;var T=b.state,O=T.isTooltipActive,M=T.activeCoordinate,D=T.activePayload,E=T.activeLabel,B=T.offset,_=(k=A.props.active)!==null&&k!==void 0?k:O;return j.cloneElement(A,{viewBox:te(te({},B),{},{x:B.left,y:B.top}),active:_,label:E,payload:_?D:[],coordinate:M,accessibilityLayer:N})}),Ie(b,"renderBrush",function(k){var C=b.props,P=C.margin,N=C.data,A=b.state,T=A.offset,O=A.dataStartIndex,M=A.dataEndIndex,D=A.updateId;return j.cloneElement(k,{key:k.key||"_recharts-brush",onChange:td(b.handleBrushChange,k.props.onChange),data:N,x:de(k.props.x)?k.props.x:T.left,y:de(k.props.y)?k.props.y:T.top+T.height+T.brushBottom-(P.bottom||0),width:de(k.props.width)?k.props.width:T.width,startIndex:O,endIndex:M,updateId:"brush-".concat(D)})}),Ie(b,"renderReferenceElement",function(k,C,P){if(!k)return null;var N=b,A=N.clipPathId,T=b.state,O=T.xAxisMap,M=T.yAxisMap,D=T.offset,E=k.type.defaultProps||{},B=k.props,_=B.xAxisId,I=_===void 0?E.xAxisId:_,z=B.yAxisId,U=z===void 0?E.yAxisId:z;return j.cloneElement(k,{key:k.key||"".concat(C,"-").concat(P),xAxis:O[I],yAxis:M[U],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:A})}),Ie(b,"renderActivePoints",function(k){var C=k.item,P=k.activePoint,N=k.basePoint,A=k.childIndex,T=k.isRange,O=[],M=C.props.key,D=C.item.type.defaultProps!==void 0?te(te({},C.item.type.defaultProps),C.item.props):C.item.props,E=D.activeDot,B=D.dataKey,_=te(te({index:A,dataKey:B,cx:P.x,cy:P.y,r:4,fill:e1(C.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Xe(E,!1)),Zd(E));return O.push(x.renderActiveDot(E,_,"".concat(M,"-activePoint-").concat(A))),N?O.push(x.renderActiveDot(E,te(te({},_),{},{cx:N.x,cy:N.y}),"".concat(M,"-basePoint-").concat(A))):T&&O.push(null),O}),Ie(b,"renderGraphicChild",function(k,C,P){var N=b.filterFormatItem(k,C,P);if(!N)return null;var A=b.getTooltipEventType(),T=b.state,O=T.isTooltipActive,M=T.tooltipAxis,D=T.activeTooltipIndex,E=T.activeLabel,B=b.props.children,_=ia(B,Zr),I=N.props,z=I.points,U=I.isRange,ne=I.baseLine,V=N.item.type.defaultProps!==void 0?te(te({},N.item.type.defaultProps),N.item.props):N.item.props,F=V.activeDot,re=V.hide,ee=V.activeBar,$=V.activeShape,ae=!!(!re&&O&&_&&(F||ee||$)),q={};A!=="axis"&&_&&_.props.trigger==="click"?q={onClick:td(b.handleItemMouseEnter,k.props.onClick)}:A!=="axis"&&(q={onMouseLeave:td(b.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:td(b.handleItemMouseEnter,k.props.onMouseEnter)});var H=j.cloneElement(k,te(te({},N.props),q));function le(lt){return typeof M.dataKey=="function"?M.dataKey(lt.payload):null}if(ae)if(D>=0){var ce,Z;if(M.dataKey&&!M.allowDuplicatedCategory){var Ce=typeof M.dataKey=="function"?le:"payload.".concat(M.dataKey.toString());ce=qd(z,Ce,E),Z=U&&ne&&qd(ne,Ce,E)}else ce=z==null?void 0:z[D],Z=U&&ne&&ne[D];if($||ee){var we=k.props.activeIndex!==void 0?k.props.activeIndex:D;return[j.cloneElement(k,te(te(te({},N.props),q),{},{activeIndex:we})),null,null]}if(!Ve(ce))return[H].concat(Yl(b.renderActivePoints({item:N,activePoint:ce,basePoint:Z,childIndex:D,isRange:U})))}else{var Q,he=(Q=b.getItemByXY(b.state.activeCoordinate))!==null&&Q!==void 0?Q:{graphicalItem:H},ve=he.graphicalItem,qe=ve.item,He=qe===void 0?k:qe,Ee=ve.childIndex,Ue=te(te(te({},N.props),q),{},{activeIndex:Ee});return[j.cloneElement(He,Ue),null,null]}return U?[H,null,null]:[H,null]}),Ie(b,"renderCustomized",function(k,C,P){return j.cloneElement(k,te(te({key:"recharts-customized-".concat(P)},b.props),b.state))}),Ie(b,"renderMap",{CartesianGrid:{handler:od,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:od},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:od},YAxis:{handler:od},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((v=g.id)!==null&&v!==void 0?v:As("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=Oj(b.triggeredAfterMouseMove,(S=g.throttleDelay)!==null&&S!==void 0?S:1e3/60),b.state={},b}return dee(x,w),lee(x,[{key:"componentDidMount",value:function(){var v,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,S=v.children,b=v.data,k=v.height,C=v.layout,P=ia(S,Zr);if(P){var N=P.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,T=nv(this.state,b,N,A),O=this.state.tooltipTicks[N].coordinate,M=(this.state.offset.top+k)/2,D=C==="horizontal",E=D?{x:O,y:M}:{y:O,x:M},B=this.state.formattedGraphicalItems.find(function(I){var z=I.item;return z.type.name==="Scatter"});B&&(E=te(te({},E),B.props.points[N].tooltipPosition),T=B.props.points[N].tooltipPayload);var _={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:A,activePayload:T,activeCoordinate:E};this.setState(_),this.renderCursor(P),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var b,k;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(v){Tm([ia(v.children,Zr)],[ia(this.props.children,Zr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=ia(this.props.children,Zr);if(v&&typeof v.props.shared=="boolean"){var S=v.props.shared?"axis":"item";return s.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var S=this.container,b=S.getBoundingClientRect(),k=_F(b),C={chartX:Math.round(v.pageX-k.left),chartY:Math.round(v.pageY-k.top)},P=b.width/S.offsetWidth||1,N=this.inRange(C.chartX,C.chartY,P);if(!N)return null;var A=this.state,T=A.xAxisMap,O=A.yAxisMap,M=this.getTooltipEventType(),D=wS(this.state,this.props.data,this.props.layout,N);if(M!=="axis"&&T&&O){var E=io(T).scale,B=io(O).scale,_=E&&E.invert?E.invert(C.chartX):null,I=B&&B.invert?B.invert(C.chartY):null;return te(te({},C),{},{xValue:_,yValue:I},D)}return D?te(te({},C),D):null}},{key:"inRange",value:function(v,S){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,C=v/b,P=S/b;if(k==="horizontal"||k==="vertical"){var N=this.state.offset,A=C>=N.left&&C<=N.left+N.width&&P>=N.top&&P<=N.top+N.height;return A?{x:C,y:P}:null}var T=this.state,O=T.angleAxisMap,M=T.radiusAxisMap;if(O&&M){var D=io(O);return tk({x:C,y:P},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,S=this.getTooltipEventType(),b=ia(v,Zr),k={};b&&S==="axis"&&(b.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Zd(this.props,this.handleOuterEvent);return te(te({},C),k)}},{key:"addListener",value:function(){kg.on(Sg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kg.removeListener(Sg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,S,b){for(var k=this.state.formattedGraphicalItems,C=0,P=k.length;C<P;C++){var N=k[C];if(N.item===v||N.props.key===v.key||S===Ai(N.item.type)&&b===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,S=this.state.offset,b=S.left,k=S.top,C=S.height,P=S.width;return L.createElement("defs",null,L.createElement("clipPath",{id:v},L.createElement("rect",{x:b,y:k,height:C,width:P})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(S,b){var k=vS(b,2),C=k[0],P=k[1];return te(te({},S),{},Ie({},C,P.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(S,b){var k=vS(b,2),C=k[0],P=k[1];return te(te({},S),{},Ie({},C,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(v){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(v){var S=this.state,b=S.formattedGraphicalItems,k=S.activeItem;if(b&&b.length)for(var C=0,P=b.length;C<P;C++){var N=b[C],A=N.props,T=N.item,O=T.type.defaultProps!==void 0?te(te({},T.type.defaultProps),T.props):T.props,M=Ai(T.type);if(M==="Bar"){var D=(A.data||[]).find(function(I){return gK(v,I)});if(D)return{graphicalItem:N,payload:D}}else if(M==="RadialBar"){var E=(A.data||[]).find(function(I){return tk(v,I)});if(E)return{graphicalItem:N,payload:E}}else if(tp(N,k)||rp(N,k)||tf(N,k)){var B=yY({graphicalItem:N,activeTooltipItem:k,itemData:O.data}),_=O.activeIndex===void 0?B:O.activeIndex;return{graphicalItem:te(te({},N),{},{childIndex:_}),payload:tf(N,k)?O.data[B]:N.props.data[B]}}}return null}},{key:"render",value:function(){var v=this;if(!Hb(this))return null;var S=this.props,b=S.children,k=S.className,C=S.width,P=S.height,N=S.style,A=S.compact,T=S.title,O=S.desc,M=xS(S,tee),D=Xe(M,!1);if(A)return L.createElement(qk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement($m,al({},D,{width:C,height:P,title:T,desc:O}),this.renderClipPath(),Kb(b,this.renderMap)));if(this.props.accessibilityLayer){var E,B;D.tabIndex=(E=this.props.tabIndex)!==null&&E!==void 0?E:0,D.role=(B=this.props.role)!==null&&B!==void 0?B:"application",D.onKeyDown=function(I){v.accessibilityManager.keyboardEvent(I)},D.onFocus=function(){v.accessibilityManager.focus()}}var _=this.parseEventsOfWrapper();return L.createElement(qk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",al({className:st("recharts-wrapper",k),style:te({position:"relative",cursor:"default",width:C,height:P},N)},_,{ref:function(z){v.container=z}}),L.createElement($m,al({},D,{width:C,height:P,title:T,desc:O,style:vee}),this.renderClipPath(),Kb(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Ie(m,"displayName",r),Ie(m,"defaultProps",te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Ie(m,"getDerivedStateFromProps",function(w,x){var g=w.dataKey,v=w.data,S=w.children,b=w.width,k=w.height,C=w.layout,P=w.stackOffset,N=w.margin,A=x.dataStartIndex,T=x.dataEndIndex;if(x.updateId===void 0){var O=kS(w);return te(te(te({},O),{},{updateId:0},p(te(te({props:w},O),{},{updateId:0}),x)),{},{prevDataKey:g,prevData:v,prevWidth:b,prevHeight:k,prevLayout:C,prevStackOffset:P,prevMargin:N,prevChildren:S})}if(g!==x.prevDataKey||v!==x.prevData||b!==x.prevWidth||k!==x.prevHeight||C!==x.prevLayout||P!==x.prevStackOffset||!fl(N,x.prevMargin)){var M=kS(w),D={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},E=te(te({},wS(x,v,C)),{},{updateId:x.updateId+1}),B=te(te(te({},M),D),E);return te(te(te({},B),p(te({props:w},B),x)),{},{prevDataKey:g,prevData:v,prevWidth:b,prevHeight:k,prevLayout:C,prevStackOffset:P,prevMargin:N,prevChildren:S})}if(!Tm(S,x.prevChildren)){var _,I,z,U,ne=ia(S,Il),V=ne&&(_=(I=ne.props)===null||I===void 0?void 0:I.startIndex)!==null&&_!==void 0?_:A,F=ne&&(z=(U=ne.props)===null||U===void 0?void 0:U.endIndex)!==null&&z!==void 0?z:T,re=V!==A||F!==T,ee=!Ve(v),$=ee&&!re?x.updateId:x.updateId+1;return te(te({updateId:$},p(te(te({props:w},x),{},{updateId:$,dataStartIndex:V,dataEndIndex:F}),x)),{},{prevChildren:S,dataStartIndex:V,dataEndIndex:F})}return null}),Ie(m,"renderActiveDot",function(w,x,g){var v;return j.isValidElement(w)?v=j.cloneElement(w,x):Ke(w)?v=w(x):v=L.createElement(ep,x),L.createElement(kt,{className:"recharts-active-dot",key:g},v)});var y=j.forwardRef(function(x,g){return L.createElement(m,al({},x,{ref:g}))});return y.displayName=m.displayName,y},pl=f1({chartName:"LineChart",GraphicalChild:Dr,axisComponents:[{axisType:"xAxis",AxisComp:Yn},{axisType:"yAxis",AxisComp:qn}],formatAxisMap:r1}),Nee=f1({chartName:"ScatterChart",GraphicalChild:An,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Yn},{axisType:"yAxis",AxisComp:qn},{axisType:"zAxis",AxisComp:op}],formatAxisMap:r1}),HC=f1({chartName:"AreaChart",GraphicalChild:ja,axisComponents:[{axisType:"xAxis",AxisComp:Yn},{axisType:"yAxis",AxisComp:qn}],formatAxisMap:r1});const _ee="modulepreload",Mee=function(e){return"/"+e},jS={},Aee=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=Mee(l),l in jS)return;jS[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":_ee,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function XC(e){const[[t,r,n],[a,i,o],[s,l,u]]=e,f=t*(i*u-o*l)-r*(a*u-o*s)+n*(a*l-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*l)*d,(n*l-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*l-i*s)*d,(r*s-t*l)*d,(t*i-r*a)*d]]}function PS(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class Ss{constructor(t){_n(this,"size");_n(this,"isPowerOfTwo");_n(this,"_real");_n(this,"_imag");_n(this,"_scratch",null);_n(this,"_rev",null);_n(this,"_m",0);_n(this,"_internalFFT",null);_n(this,"_chirpReal",null);_n(this,"_chirpImag",null);_n(this,"_bReal",null);_n(this,"_bImag",null);_n(this,"_hanning",null);_n(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new Ss(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const l=a[s];if(s<l){const u=i[s],f=o[s];i[s]=i[l],o[s]=o[l],i[l]=u,o[l]=f}}else for(let s=0;s<n;s++){const l=a[s];i[s]=t[l],o[s]=r?r[l]:0}for(let s=2;s<=n;s*=2){const l=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let h=0;h<n;h+=s){let p=1,m=0;for(let y=0;y<l;y++){const w=h+y,x=h+y+l,g=p*i[x]-m*o[x],v=p*o[x]+m*i[x],S=i[w],b=o[w];i[w]=S+g,o[w]=b+v,i[x]=S-g,o[x]=b-v;const k=p*f-m*d,C=p*d+m*f;p=k,m=C}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const h=t[d],p=r?r[d]:0,m=this._chirpReal[d],y=this._chirpImag[d];o[d]=h*m-p*y,s[d]=h*y+p*m}i.transformRadix2(o,s);for(let d=0;d<a;d++){const h=i._real[d],p=i._imag[d],m=this._bReal[d],y=this._bImag[d];i._real[d]=h*m-p*y,i._imag[d]=h*y+p*m}const l=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(l,u);const f=1/a;for(let d=0;d<n;d++){const h=i._real[d]*f,p=-i._imag[d]*f,m=this._chirpReal[d],y=this._chirpImag[d];this._real[d]=h*m-p*y,this._imag[d]=h*y+p*m}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const l=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<l;f++){const d=this._real[f],h=this._imag[f];r[f]+=(d*d+h*h)*u}}}function Tee(e,t,r,n=!1){const a=new Ss(t),i=new Ss(r),o=t*r,s=new Float32Array(o),l=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let y=0;y<t;y++)u[y]=.5*(1-Math.cos(2*Math.PI*y/(t-1)));f=new Float32Array(r);for(let y=0;y<r;y++)f[y]=.5*(1-Math.cos(2*Math.PI*y/(r-1)))}for(let y=0;y<r;y++){const w=y*t,x=a._real;let g=0;for(let S=0;S<t;S++)g+=e[w+S];const v=g/t;if(u)for(let S=0;S<t;S++)x[S]=(e[w+S]-v)*u[S];else for(let S=0;S<t;S++)x[S]=e[w+S]-v;a.transform(x);for(let S=0;S<t;S++)s[w+S]=a._real[S],l[w+S]=a._imag[S]}for(let y=0;y<t;y++){const w=i._real,x=i._imag;for(let g=0;g<r;g++){const v=g*t+y;let S=s[v],b=l[v];f&&(S*=f[g],b*=f[g]),w[g]=S,x[g]=b}i.transform(w,x);for(let g=0;g<r;g++){const v=g*t+y;s[v]=i._real[g],l[v]=i._imag[g]}}const d=new Float32Array(o);let h=1,p=t,m=r;if(n&&u&&f){p=0;for(let y=0;y<t;y++)p+=u[y]*u[y];m=0;for(let y=0;y<r;y++)m+=f[y]*f[y]}h=1/(p*m);for(let y=0;y<o;y++)d[y]=(s[y]*s[y]+l[y]*l[y])*h;return d}function Eee(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const l=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+l;n[d]=e[f]}return n}function Vc(e,t,r,n=[0,0,0,0],a=65535,i="RGGB"){const s=e*t*2,l=8,u=l+s,f="Fake",d="StretchedNoiseCam",h="StretchedNoiseCam",p=M=>{const D=new Uint8Array(M.length+1);for(let E=0;E<M.length;E++)D[E]=M.charCodeAt(E);return D[M.length]=0,D},m=p(f),y=p(d),w=p(h),x=M=>{const D=[0,0,0,0],E={R:0,G:1,B:2},B=M.toUpperCase();for(let _=0;_<4;_++)D[_]=E[B[_]]??1;return D},g=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:m.length,value:m},{id:272,type:2,count:y.length,value:y},{id:273,type:4,count:1,value:l},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:s},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:x(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(M=>Math.round(M))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:w.length,value:w}],v=2+g.length*12+4;let S=0;const b=g.map(M=>{let D=1;M.type===3&&(D=2),M.type===4&&(D=4);const E=M.count*D,B=E<=4;let _=0;return B||(_=S,S+=E,S%2!==0&&S++),{...M,fits:B,totalBytes:E,extraOffset:_}}),k=u+v,C=k+S,P=new ArrayBuffer(C),N=new DataView(P),A=new Uint8Array(P);N.setUint16(0,18761,!0),N.setUint16(2,42,!0),N.setUint32(4,u,!0);const T=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);A.set(T,l);let O=u;return N.setUint16(O,g.length,!0),O+=2,b.forEach(M=>{if(N.setUint16(O,M.id,!0),N.setUint16(O+2,M.type,!0),N.setUint32(O+4,M.count,!0),M.fits){const D=O+8;Array.isArray(M.value)?M.value.forEach((E,B)=>{M.type===1&&N.setUint8(D+B,E),M.type===3&&N.setUint16(D+B*2,E,!0)}):(M.type===3&&N.setUint16(D,M.value,!0),M.type===4&&N.setUint32(D,M.value,!0))}else{const D=k+M.extraOffset;N.setUint32(O+8,D,!0),M.value instanceof Uint8Array?A.set(M.value,D):Array.isArray(M.value)&&M.value.forEach((E,B)=>{M.type===1&&N.setUint8(D+B,E),M.type===3&&N.setUint16(D+B*2,E,!0)})}O+=12}),N.setUint32(O,0,!0),P}var lp=typeof self<"u"?self:global;const cf=typeof navigator<"u",$ee=cf&&typeof HTMLImageElement>"u",J0=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),cp=lp.Buffer,sd=lp.BigInt,up=!!cp,Dee=e=>e;function eh(e,t=Dee){if(J0)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let d1=lp.fetch;const Iee=e=>d1=e;if(!lp.fetch){const e=eh("http",n=>n),t=eh("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:l,pathname:u,protocol:f,search:d}=new URL(n);const h={method:"GET",hostname:l,path:encodeURI(u)+d,headers:a};s!==""&&(h.port=Number(s));const p=(f==="https:"?await t:await e).request(h,m=>{if(m.statusCode===301||m.statusCode===302){let y=new URL(m.headers.location,n).toString();return r(y,{headers:a}).then(i).catch(o)}i({status:m.statusCode,arrayBuffer:()=>new Promise(y=>{let w=[];m.on("data",x=>w.push(x)),m.on("end",()=>y(Buffer.concat(w)))})})});p.on("error",o),p.end()});Iee(r)}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const th=e=>KC(e)?void 0:e,Ree=e=>e!==void 0;function KC(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(Ree).length===0)}function Rr(e){let t=new Error(e);throw delete t.stack,t}function as(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function av(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const iv=e=>String.fromCharCode.apply(null,e),CS=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function YC(e){return CS?CS.decode(e):up?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(iv(e)))}class Un{static from(t,r){return t instanceof this&&t.le===r?t:new Un(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Un){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&Rr("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Rr("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=Un){return t instanceof DataView||t instanceof Un?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Rr("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new Un(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return YC(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return iv(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return iv(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function ov(e,t){Rr(`${e} '${t}' was not loaded, try using full build of exifr.`)}class h1 extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||ov(this.kind,t),r&&(t in r||function(n,a){Rr(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||ov(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}}var hi=new h1("file parser"),Er=new h1("segment parser"),mi=new h1("file reader");function Lee(e,t){return typeof e=="string"?OS(e,t):cf&&!$ee&&e instanceof HTMLImageElement?OS(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Un(e):cf&&e instanceof Blob?sv(e,t,"blob",Ps):void Rr("Invalid input argument")}function OS(e,t){return(r=e).startsWith("data:")||r.length>1e4?lv(e,t,"base64"):J0&&e.includes("://")?sv(e,t,"url",js):J0?lv(e,t,"fs"):cf?sv(e,t,"url",js):void Rr("Invalid input argument");var r}async function sv(e,t,r,n){return mi.has(r)?lv(e,t,r):n?async function(a,i){let o=await i(a);return new Un(o)}(e,n):void Rr(`Parser ${r} is not loaded`)}async function lv(e,t,r){let n=new(mi.get(r))(e,t);return await n.read(),n}const js=e=>d1(e).then(t=>t.arrayBuffer()),Ps=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class Bee extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Nr(e,t,r){let n=new Bee;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function Cs(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Jr=new Map,Za=new Map,Co=new Map,ho=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],hc=["jfif","xmp","icc","iptc","ihdr"],Os=["tiff",...hc],mr=["ifd0","ifd1","exif","gps","interop"],po=[...Os,...mr],go=["makerNote","userComment"],pc=["translateKeys","translateValues","reviveValues","multiSegment"],mo=[...pc,"sanitize","mergeOutput","silentErrors"];class qC{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Lc extends qC{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),Be(this,"enabled",!1),Be(this,"skip",new Set),Be(this,"pick",new Set),Be(this,"deps",new Set),Be(this,"translateKeys",!1),Be(this,"translateValues",!1),Be(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=mr.includes(t),this.canBeFiltered&&(this.dict=Jr.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Rr(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of pc)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,rh(this.pick,this.deps)):this.enabled&&this.pick.size>0&&rh(this.pick,this.deps)}}var Mn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},NS=new Map;class Ds extends qC{static useCached(t){let r=NS.get(t);return r!==void 0||(r=new this(t),NS.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Rr(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=cf?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of ho)this[t]=Mn[t];for(t of mo)this[t]=Mn[t];for(t of go)this[t]=Mn[t];for(t of po)this[t]=new Lc(t,Mn[t],void 0,this)}setupFromTrue(){let t;for(t of ho)this[t]=Mn[t];for(t of mo)this[t]=Mn[t];for(t of go)this[t]=!0;for(t of po)this[t]=new Lc(t,!0,void 0,this)}setupFromArray(t){let r;for(r of ho)this[r]=Mn[r];for(r of mo)this[r]=Mn[r];for(r of go)this[r]=Mn[r];for(r of po)this[r]=new Lc(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,mr)}setupFromObject(t){let r;for(r of(mr.ifd0=mr.ifd0||mr.image,mr.ifd1=mr.ifd1||mr.thumbnail,Object.assign(this,t),ho))this[r]=Pg(t[r],Mn[r]);for(r of mo)this[r]=Pg(t[r],Mn[r]);for(r of go)this[r]=Pg(t[r],Mn[r]);for(r of Os)this[r]=new Lc(r,Mn[r],t[r],this);for(r of mr)this[r]=new Lc(r,Mn[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,mr,po),t.tiff===!0?this.batchEnableWithBool(mr,!0):t.tiff===!1?this.batchEnableWithUserValue(mr,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,mr):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,mr)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=_S(t,n);for(let[o,s]of i)rh(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=_S(r,n);for(let[o,s]of i)rh(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=mr.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of mr)this[i].finalizeFilters()}get onlyTiff(){return!hc.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of Os)this[t].enabled&&!Er.has(t)&&ov("segment parser",t)}}function _S(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Jr.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function Pg(e,t){return e!==void 0?e:t!==void 0?t:void 0}function rh(e,t){for(let r of t)e.add(r)}Be(Ds,"default",Mn);class Lo{constructor(t){Be(this,"parsers",{}),Be(this,"output",{}),Be(this,"errors",[]),Be(this,"pushToErrors",r=>this.errors.push(r)),this.options=Ds.useCached(t)}async read(t){this.file=await Lee(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of hi)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),Rr("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),th(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=Er.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function fp(e,t){let r=new Lo(t);return await r.read(e),r.parse()}var Fee=Object.freeze({__proto__:null,parse:fp,Exifr:Lo,fileParsers:hi,segmentParsers:Er,fileReaders:mi,tagKeys:Jr,tagValues:Za,tagRevivers:Co,createDictionary:Nr,extendDictionary:Cs,fetchUrlAsArrayBuffer:js,readBlobAsArrayBuffer:Ps,chunkedProps:ho,otherSegments:hc,segments:Os,tiffBlocks:mr,segmentsAndBlocks:po,tiffExtractables:go,inheritables:pc,allFormatters:mo,Options:Ds});class dp{constructor(t,r,n){Be(this,"errors",[]),Be(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){Rr(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Rr("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(Er.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}class Va{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new Ds({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof Un?t:new Un(t)}constructor(t,r={},n){Be(this,"errors",[]),Be(this,"raw",new Map),Be(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=Co.get(r),a=Za.get(r),i=Jr.get(r),o=this.options[r],s=o.reviveValues&&!!n,l=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,h]of t)s&&n.has(d)?h=n.get(d)(h):l&&a.has(d)&&(h=this.translateValue(h,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=h;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}}Be(Va,"headerLength",4),Be(Va,"type",void 0),Be(Va,"multiSegment",!1),Be(Va,"canHandle",()=>!1);function zee(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function Uee(e){return e>=224&&e<=239}function Gee(e,t,r){for(let[n,a]of Er)if(a.canHandle(e,t,r))return n}class MS extends dp{constructor(...t){super(...t),Be(this,"appSegments",[]),Be(this,"jpegSegments",[]),Be(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(Er.keyList())):(t=t===void 0?Er.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&Er.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let l=Er.get(s),u=this.options[s];return l.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>l&&!u?!await n.readNextChunk(t):!await n.readNextChunk(l),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,l,{file:u,findAll:f,wanted:d,remaining:h,options:p}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),Uee(n)){if(a=u.getUint16(t+2),i=Gee(u,t,a),i&&d.has(i)&&(o=Er.get(i),s=o.findPosition(u,t),l=p[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||h.delete(i)):h.delete(i),h.size===0)))break;p.recordUnknownSegments&&(s=Va.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(zee(n)){if(a=u.getUint16(t+2),n===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let l=0;l<r.length;l++)a=r[l],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=Er.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}Be(MS,"type","jpeg"),hi.set("jpeg",MS);const Wee=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Vee extends Va{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,l=this.chunk.getUint16(t);t+=2;for(let u=0;u<l;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=Wee[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Rr(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Rr(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return as(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let l=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)l[f]=this.parseTagValue(i,t),t+=u;return l}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Rr(`Invalid tiff type ${t}`)}}}class Cg extends Vee{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Rr("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Rr(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,av(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,av(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",AS(...t.get(2),t.get(1))),t.set("longitude",AS(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of mr)if(t=this[r],!KC(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function AS(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Be(Cg,"type","tiff"),Be(Cg,"headerLength",10),Er.set("tiff",Cg);var Hee=Object.freeze({__proto__:null,default:Fee,Exifr:Lo,fileParsers:hi,segmentParsers:Er,fileReaders:mi,tagKeys:Jr,tagValues:Za,tagRevivers:Co,createDictionary:Nr,extendDictionary:Cs,fetchUrlAsArrayBuffer:js,readBlobAsArrayBuffer:Ps,chunkedProps:ho,otherSegments:hc,segments:Os,tiffBlocks:mr,segmentsAndBlocks:po,tiffExtractables:go,inheritables:pc,allFormatters:mo,Options:Ds,parse:fp});const p1={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},g1=Object.assign({},p1,{firstChunkSize:4e4,gps:[1,2,3,4]});async function ZC(e){let t=new Lo(g1);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const m1=Object.assign({},p1,{tiff:!1,ifd1:!0,mergeOutput:!1});async function QC(e){let t=new Lo(m1);await t.read(e);let r=await t.extractThumbnail();return r&&up?cp.from(r):r}async function JC(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const y1=Object.assign({},p1,{firstChunkSize:4e4,ifd0:[274]});async function v1(e){let t=new Lo(y1);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const x1=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let is=!0,os=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;is=Number(r)+.1*Number(n)<13.4,os=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);is=os=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);is=os=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);is=os=Number(t)<77}}async function eO(e){let t=await v1(e);return Object.assign({canvas:is,css:os},x1[t])}class Xee extends Un{constructor(...t){super(...t),Be(this,"ranges",new Kee),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=up?cp.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class Kee{constructor(){Be(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>TS(t,o.offset,a)||TS(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function TS(e,t,r){return e<=t&&t<=r}class hp extends Xee{constructor(t,r){super(0),Be(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}mi.set("blob",class extends hp{async readWhole(){this.chunked=!1;let e=await Ps(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await Ps(n);return this.set(a,e,!0)}});var Yee=Object.freeze({__proto__:null,default:Hee,Exifr:Lo,fileParsers:hi,segmentParsers:Er,fileReaders:mi,tagKeys:Jr,tagValues:Za,tagRevivers:Co,createDictionary:Nr,extendDictionary:Cs,fetchUrlAsArrayBuffer:js,readBlobAsArrayBuffer:Ps,chunkedProps:ho,otherSegments:hc,segments:Os,tiffBlocks:mr,segmentsAndBlocks:po,tiffExtractables:go,inheritables:pc,allFormatters:mo,Options:Ds,parse:fp,gpsOnlyOptions:g1,gps:ZC,thumbnailOnlyOptions:m1,thumbnail:QC,thumbnailUrl:JC,orientationOnlyOptions:y1,orientation:v1,rotations:x1,get rotateCanvas(){return is},get rotateCss(){return os},rotation:eO});mi.set("url",class extends hp{async readWhole(){this.chunked=!1;let e=await js(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await d1(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});Un.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof sd!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),sd(t)<<sd(32)|sd(r)):void Rr("Trying to read 64b value but JS can only handle 53b numbers.")};class qee extends dp{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class tO extends qee{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let l=4+this.file.getUint32(o);o+=l,s-=l,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),l=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,h=this.file.getUintBytes(n,d);for(n+=d;h--;){let p=this.file.getUintBytes(n,l);n+=l+u+2+o;let m=this.file.getUint16(n);if(n+=2,p===r)return m>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=m*f}}}class rO extends tO{}Be(rO,"type","heic");class ES extends tO{}Be(ES,"type","avif"),hi.set("heic",rO),hi.set("avif",ES),Nr(Jr,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Nr(Jr,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Nr(Jr,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Nr(Za,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let lu=Nr(Za,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const $S={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};lu.set(37392,$S),lu.set(41488,$S);const Og={0:"Normal",1:"Low",2:"High"};function DS(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function IS(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function Ng(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function Bc(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(RS(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(RS(e[r],e[r+1]));return as(String.fromCodePoint(...t))}function RS(e,t){return e<<8|t}lu.set(41992,Og),lu.set(41993,Og),lu.set(41994,Og),Nr(Co,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?YC(e):e}],[306,Ng],[40091,Bc],[40092,Bc],[40093,Bc],[40094,Bc],[40095,Bc]]),Nr(Co,"exif",[[40960,IS],[36864,IS],[36867,Ng],[36868,Ng],[40962,DS],[40963,DS]]),Nr(Co,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class _g extends Va{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:Un.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let l of oO)o[l]=[],s[l]=0;return i.replace(ete,(l,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${l}#${d}`}return`${l}#${o[f].pop()}`})}(t);let r=gl.findAll(t,"rdf","Description");r.length===0&&r.push(new gl("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=Jee(o.ns,a),nO(o,n);return function(i){let o;for(let s in i)o=i[s]=th(i[s]),o===void 0&&delete i[s];return th(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}Be(_g,"type","xmp"),Be(_g,"multiSegment",!0),Er.set("xmp",_g);class nh{static findAll(t){return aO(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(nh.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=iO(a),new nh(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class gl{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return aO(t,a).map(gl.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new gl(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=nh.findAll(n),this.children=gl.findAll(a),this.value=this.children.length===0?iO(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return Qee(this.children.map(Zee));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)nO(r,t);return this.value!==void 0&&(t.value=this.value),th(t)}}function nO(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var Zee=e=>e.serialize(),Qee=e=>e.length===1?e[0]:e,Jee=(e,t)=>t[e]?t[e]:t[e]={};function aO(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function iO(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const oO=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],ete=new RegExp(`(<|\\/)(${oO.join("|")})`,"g");var sO=Object.freeze({__proto__:null,default:Yee,Exifr:Lo,fileParsers:hi,segmentParsers:Er,fileReaders:mi,tagKeys:Jr,tagValues:Za,tagRevivers:Co,createDictionary:Nr,extendDictionary:Cs,fetchUrlAsArrayBuffer:js,readBlobAsArrayBuffer:Ps,chunkedProps:ho,otherSegments:hc,segments:Os,tiffBlocks:mr,segmentsAndBlocks:po,tiffExtractables:go,inheritables:pc,allFormatters:mo,Options:Ds,parse:fp,gpsOnlyOptions:g1,gps:ZC,thumbnailOnlyOptions:m1,thumbnail:QC,thumbnailUrl:JC,orientationOnlyOptions:y1,orientation:v1,rotations:x1,get rotateCanvas(){return is},get rotateCss(){return os},rotation:eO});let LS=eh("fs",e=>e.promises);mi.set("fs",class extends hp{async readWhole(){this.chunked=!1,this.fs=await LS;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await LS,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});mi.set("base64",class extends hp{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(up){let l=cp.from(a,"base64").slice(n,n+s);return this.set(l,e,!0)}{let l=this.subarray(e,s,!0),u=atob(a),f=l.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return l}}});class BS extends dp{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(av(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}Be(BS,"type","tiff"),hi.set("tiff",BS);let tte=eh("zlib");const rte=["ihdr","iccp","text","itxt","exif"];class FS extends dp{constructor(...t){super(...t),Be(this,"catchError",r=>this.errors.push(r)),Be(this,"metaChunks",[]),Be(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,l={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};rte.includes(o)?this.metaChunks.push(l):this.unknownChunks.push(l),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),J0){let s=await tte,l=r.getUint8Array(i);l=s.inflateSync(l),this.injectSegment("icc",l)}}}Be(FS,"type","png"),hi.set("png",FS),Nr(Jr,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Cs(Jr,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let zS=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Cs(Jr,"ifd0",zS),Cs(Jr,"exif",zS),Nr(Za,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class Mg extends Va{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Be(Mg,"type","jfif"),Be(Mg,"headerLength",9),Er.set("jfif",Mg),Nr(Jr,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class US extends Va{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Be(US,"type","ihdr"),Er.set("ihdr",US),Nr(Jr,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Nr(Za,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Sd extends Va{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),l=0;for(let u of a)s.set(u,l),l+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new Un(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&Rr("ICC header is too short");for(let[r,n]of Object.entries(nte)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(l,4),r=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),l+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return as(this.chunk.getString(t+12,r))}parseText(t,r){return as(this.chunk.getString(t+8,r-8))}parseSig(t){return as(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let l=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,h=as(r.getUnicodeString(d,f));o.push({lang:l,country:u,text:h}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}Be(Sd,"type","icc"),Be(Sd,"multiSegment",!0),Be(Sd,"headerLength",18);const nte={4:bi,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:bi,16:bi,20:bi,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:bi,40:bi,48:bi,52:bi,64:(e,t)=>e.getUint32(t),80:bi};function bi(e,t){return as(e.getString(t,4))}Er.set("icc",Sd),Nr(Jr,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const ld={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},GS={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Nr(Za,"icc",[[4,ld],[12,GS],[40,Object.assign({},ld,GS)],[48,ld],[80,ld],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class cd extends Va{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}Be(cd,"type","iptc"),Be(cd,"translateValues",!1),Be(cd,"reviveValues",!1),Er.set("iptc",cd),Nr(Jr,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Nr(Za,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let Ag=null;async function gc(){if(!Ag)try{const n=(await Aee(()=>import("./joraw-CL5DV6lJ.js"),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;Ag=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await Ag,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const ate=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],ml=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function ud(e,t=0,r=0){const n=await gc(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,l=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((l-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let p=0;p<f/2;p++){const m=p*6+r;if(m+3>=l)break;const y=m*s,w=(m+3)*s,x=p*2,g=x*u,v=(x+1)*u;for(let S=0;S<u/2;S++){const b=S*6+t;if(b+1>=s)break;const k=S*2;d[g+k]=o[y+b+1],d[g+k+1]=o[y+b+0],d[v+k]=o[w+b+0],d[v+k+1]=o[w+b+1]}}return{dngBuffer:Vc(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function ite(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,l=r*n,u=new Uint16Array(l);for(let h=0;h<n;h++)for(let p=0;p<r;p++){const m=(h*r+p)*4,y=h*r+p,w=h%2===0,x=p%2===0;let g=0;w&&x?g=s[m]:!w&&!x?g=s[m+2]:g=s[m+1],u[y]=g*64}const f=await new Promise(h=>a.toBlob(h,"image/png"));let d={description:"Standard image (non-RAW)"};try{const h=await sO.parse(e);h&&(d={...d,...h})}catch(h){console.warn("EXIF parsing failed for standard image",h)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const ote=async e=>{const t=await gc(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const l=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const h=d*3,p=d*4;l.data[p]=u[h],l.data[p+1]=u[h+1],l.data[p+2]=u[h+2],l.data[p+3]=255}s.putImageData(l,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},ah=async e=>{var n,a,i,o,s,l,u,f,d;const t=await gc(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const h=r.getRawImage();let p=new Uint16Array(h.data);const m=await r.metadata(!0);let y={...m};try{const k=await sO.parse(e.buffer);k&&(y={...y,...k})}catch(k){console.warn("exifr parsing failed for RAW buffer",k)}const w=((n=m.idata)==null?void 0:n.filters)||0,x=((a=m.idata)==null?void 0:a.colors)||0,g=w===0&&x===3,v=w===9;let S=[0,0,0,0],b=!1;if(r.getBlackLevels)try{const k=r.getBlackLevels();k.dng_cblack&&k.dng_cblack.length===4&&Array.from(k.dng_cblack).some(C=>C>0)?(S=Array.from(k.dng_cblack).map(Number),b=!0):k.cblack&&k.cblack.length===4&&Array.from(k.cblack).some(C=>C>0)?(S=Array.from(k.cblack).map(Number),b=!0):typeof k.black=="number"&&k.black>0&&(S=[k.black,k.black,k.black,k.black],b=!0)}catch(k){console.warn("getBlackLevels binding failed",k)}if(!b){let k=[];if((i=m.color_data)!=null&&i.cblack_rawpy_style)k=m.color_data.cblack_rawpy_style;else if((s=(o=m.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)k=m.color_data.dng_levels.dng_cblack;else if(((l=m.black_level_per_channel)==null?void 0:l.length)>=4)k=m.black_level_per_channel;else if(((u=m.cblack)==null?void 0:u.length)>=4)k=m.cblack;else if(((d=(f=m.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)k=m.color.cblack;else{const C=m.black_level||m.color_data&&m.color_data.black||0;k=[C,C,C,C]}S=[Number(k[0])||0,Number(k[1])||0,Number(k[2])||0,Number(k[3])||0]}return{data:p,width:h.width,height:h.height,bayerPattern:m.color_desc||"RGGB",blackLevels:S,whiteLevel:m.white_level||16383,metadata:y,isThreePlane:g,isXTrans:v}}finally{r.delete?r.delete():r.close()}};async function Go(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([ote(t),ah(r)]);return{previewBlob:n,analysisData:a}}async function ih(e){const t=new Uint8Array(e);return ah(t)}const WS=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function Tg(e,t,r,n=!0){const a=await ah(new Uint8Array(e)),i=await ah(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,l=r?WS(o):o,u=r?WS(s):s,f=l*u,d=new Uint16Array(f),h=6e4,p=1.41421356;for(let m=0;m<s;m++){const y=m*o,w=m*l;for(let x=0;x<o;x++){const g=a.data[y+x],v=i.data[y+x];let S=g-v;n&&(S/=p);let b=S+h;b=Math.max(0,Math.min(65535,b)),d[w+x]=Math.round(b)}}return{rawData:d,width:l,height:u,metadata:a.metadata}}function Wo(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),l=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],h=[0,0,0,0],p=[0,0,0,0];for(let w=l;w<f;w++){const x=w*t,g=w%2;for(let v=s;v<u;v++){const S=v%2,b=e[x+v],k=g*2+S;d[k]+=b,h[k]+=b*b,p[k]++}}const m=[0,0,0,0],y=[0,0,0,0];for(let w=0;w<4;w++)if(p[w]>0){const x=d[w]/p[w];m[w]=x;const v=h[w]/p[w]-x*x;y[w]=Math.sqrt(Math.max(0,v))}return{x:s,y:l,width:u-s,height:f-l,means:m,stdDevs:y,pixelCount:p.reduce((w,x)=>w+x,0)}}function VS(e,t,r,n,a,i,o=0,s=0){const l=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),h=a>>1,p=a&1,m=(i>>1)+o,y=(i&1)+s;let w=0,x=0,g=0;for(let P=u;P<d-2;P+=2)for(let N=l;N<f-2;N+=2){const A=(P+h)*t+(N+p),T=(P+m)*t+(N+y);P+m>=r||N+y>=t||(w+=e[A],x+=e[T],g++)}if(g<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const v=w/g,S=x/g;let b=0,k=0,C=0;for(let P=u;P<d-2;P+=2)for(let N=l;N<f-2;N+=2){const A=(P+h)*t+(N+p),T=(P+m)*t+(N+y);if(P+m>=r||N+y>=t)continue;const O=e[A],M=e[T],D=O-v,E=M-S;b+=D*E,k+=D*D,C+=E*E}return{sumCov:b,sumVar1:k,sumVar2:C,n:g}}function ste(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function lte(e,t,r,n,a,i,o,s,l,u,f){if(u<=l)return[];const d=Math.max(0,Math.floor(n)),h=Math.max(0,Math.floor(a)),p=Math.min(t,Math.ceil(n+i)),m=Math.min(r,Math.ceil(a+o)),y=u-l,w=f?Math.floor(y)+1:s,x=y/w,g=[new Uint32Array(w),new Uint32Array(w),new Uint32Array(w),new Uint32Array(w)];for(let S=h;S<m;S++){const b=S*t,k=S%2;for(let C=d;C<p;C++){const P=C%2,N=e[b+C];if(N<l||N>u)continue;const A=k*2+P;let T;f?T=Math.floor(N-l):T=Math.floor((N-l)/x),T<0&&(T=0),T>=w&&(T=w-1),g[A][T]++}}const v=[];for(let S=0;S<w;S++){const b=l+(f?S:S*x);v.push({binStart:b,c0:g[0][S],c1:g[1][S],c2:g[2][S],c3:g[3][S]})}return v}function cte(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},l=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),h=Math.min(t,Math.ceil(n.x+n.w)),p=Math.min(r,Math.ceil(n.y+n.h)),m=h-f,y=p-d;if(m<=1||y<=1)return null;let w=0;for(let T=f;T<h;T++)T%2===(a&1)&&w++;let x=0;for(let T=d;T<p;T++)T%2===a>>1&&x++;if(w<4||x<4)return null;const g=Math.max(1,u),v=Math.floor(2*w/(g+1)),S=Math.floor(2*x/(g+1));if(v<4||S<4)return null;const b=new Ss(v),k=new Ss(S),C=new Float32Array(Math.floor(v/2)+1),P=new Float32Array(Math.floor(S/2)+1);let N=0,A=0;for(let T=d;T<p;T++){const O=T%2;if(a>>1!==O||s.rows&&(T>>1&1)!==s.rowGroup)continue;const M=T*t,D=new Float32Array(w);let E=0;for(let B=f;B<h;B++)B%2===(a&1)&&E<w&&(D[E++]=e[M+B]);for(let B=0;B<g;B++){const _=Math.floor(B*v/2);if(_+v>w)break;const I=D.slice(_,_+v);b.calculateSpectrum(I,C,o),N++}if(!l)break}for(let T=f;T<h;T++){const O=T%2;if((a&1)!==O||s.cols&&(T>>1&1)!==s.rowGroup)continue;const M=new Float32Array(x);let D=0;for(let E=d;E<p;E++)E%2===a>>1&&D<x&&(M[D++]=e[E*t+T]);for(let E=0;E<g;E++){const B=Math.floor(E*S/2);if(B+S>x)break;const _=M.slice(B,B+S);k.calculateSpectrum(_,P,o),A++}if(!l)break}if(N>0)for(let T=0;T<C.length;T++)C[T]/=N;if(A>0)for(let T=0;T<P.length;T++)P[T]/=A;return{avgHoriz:Array.from(C),avgVert:Array.from(P),sampleCount:{h:N,v:A}}}function ute(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),l=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let g=s;g<u;g++)if(g%2===a>>1){f=g;break}if(f===-1)return null;let d=-1;for(let g=o;g<l;g++)if(g%2===(a&1)){d=g;break}if(d===-1)return null;const h=[];for(let g=f;g<u;g+=2){const v=g*t,S=[];for(let b=d;b<l;b+=2)S.push(e[v+b]);h.push(S)}const p=h.length;if(p===0)return null;const m=h[0].length;if(m===0)return null;const y=new Float32Array(m*p);for(let g=0;g<p;g++){const v=h[g];for(let S=0;S<m;S++)y[g*m+S]=v[S]}const w=Tee(y,m,p,i),x=Eee(w,m,p);return{width:m,height:p,data:x}}function fte(e,t,r,n,a,i,o){const{x:s,y:l,w:u,h:f}=n,d=[],h=Math.max(0,Math.floor(s)),p=Math.max(0,Math.floor(l)),m=Math.min(t,Math.ceil(s+u)),y=Math.min(r,Math.ceil(l+f)),w=a>>1,x=a&1;for(let k=p;k<y;k++){if(k%2!==w)continue;const C=k*t;for(let P=h;P<m;P++){if(P%2!==x)continue;const N=e[C+P];N>=i&&N<=o&&d.push(N-i)}}if(d.length===0)return null;d.sort((k,C)=>k-C);const g=[d[0]];for(let k=1;k<d.length;k++)d[k]!==d[k-1]&&g.push(d[k]);const v=[],S=[],b={};for(let k=0;k<g.length-1;k++){const C=g[k],N=g[k+1]-C;v.push(N),S.push({x:C,y:N}),b[N]=(b[N]||0)+1}return{uniqueCount:g.length,diffCount:v.length,stepCounts:b,plotData:S}}function lO(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:l}=e,u=a.map((v,S)=>Math.max(0,v-n[S])),f=i.map((v,S)=>Math.max(0,v-n[S])),d=(u[1]+u[3])/2,h=(f[1]+f[3])/2,p=Math.floor(t.x),m=Math.floor(t.y),y=Math.floor(t.w),w=Math.floor(t.h),x=Math.pow(2,r.exposure),g=new Uint16Array(y*w);for(let v=0;v<w;v++){const S=m+v;if(S<0||S>=e.height)continue;const b=S%2,k=S*s,C=v*y;for(let P=0;P<y;P++){const N=p+P;if(N<0||N>=s)continue;const A=N%2;let T=0;!b&&!A?T=0:!b&&A?T=1:b&&!A?T=3:T=2;const O=o[k+N],M=n[T],D=u[T],E=f[T],B=Math.max(O-M,0),_=E-D||1e-9,I=(B-D)/_;let z;I<0?z=B*(d/Math.max(D,1e-9)):I>1?z=B*(h/Math.max(E,1e-9)):z=(1-I)*d+I*h,z*=x,g[C+P]=Math.max(0,Math.min(65535,Math.round(z)))}}return{data:g,width:y,height:w}}async function HS(e,t){const r=await gc(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const h=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],p=XC(h);if(p){const m=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1,x=PS(p,[[m,0,0],[0,1,0],[0,0,y]]),g=PS(ate,x);o=[g[0][0],g[0][1],g[0][2],g[1][0],g[1][1],g[1][2],g[2][0],g[2][1],g[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(h=>{const p=Math.round(h);return p===0?1:p})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const l=await n.imageData(),u=new ImageData(l.width,l.height),f=u.data,d=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2);if(i&&o.length===9){const h=o,m=Math.pow(2,t.exposure)*.25;for(let y=0;y<d.length;y+=3){const w=d[y]/65535,x=d[y+1]/65535,g=d[y+2]/65535;let v=h[0]*w+h[1]*x+h[2]*g,S=h[3]*w+h[4]*x+h[5]*g,b=h[6]*w+h[7]*x+h[8]*g;v*=m,S*=m,b*=m,v=Math.max(0,Math.min(1,v)),S=Math.max(0,Math.min(1,S)),b=Math.max(0,Math.min(1,b)),v=ml(v),S=ml(S),b=ml(b);const k=y/3*4;f[k]=Math.round(v*255),f[k+1]=Math.round(S*255),f[k+2]=Math.round(b*255),f[k+3]=255}}else for(let h=0;h<d.length;h+=3){const p=h/3*4;f[p]=d[h]>>8,f[p+1]=d[h+1]>>8,f[p+2]=d[h+2]>>8,f[p+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function dte(e,t){const r=await gc(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const y=await n.metadata(!0);y&&y.white_level&&(a=y.white_level)}catch(y){console.warn("Metadata error",y)}const i=n.getRawImage(),o=i.width,s=i.height,l=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,m=t.wbGains?t.wbGains[1]:1;for(let y=0;y<s;y++){const w=y%2;for(let x=0;x<o;x++){const g=x%2,v=w*2+g,S=l[y*o+x],b=d[v];let k=(S-b)/(h-b);k=Math.max(0,Math.min(1,k)),t.exposure!==0&&(k*=Math.pow(2,t.exposure),k=Math.min(1,k)),v===0?k*=p:v===3&&(k*=m);const C=Math.round(ml(Math.min(1,k))*255),P=(y*o+x)*4;f[P]=C,f[P+1]=C,f[P+2]=C,f[P+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function hte(e,t,r=!1,n=!1){const a=await gc(),i=new a;try{if(t.renderMode==="zero-dependency"||t.renderMode==="advanced-zero-dep"){await i.open(new Uint8Array(e));const o=await i.metadata(!0),s=(o==null?void 0:o.white_level)||16383,l=i.getRawImage(),{width:u,height:f,data:d}=l,h=new Uint16Array(u*f),p=Math.pow(2,t.exposure);if(t.renderMode==="advanced-zero-dep"&&t.advancedZeroDep){const{bl:m,bg:y,fg:w}=t.advancedZeroDep,x=y.map((b,k)=>Math.max(0,b-m[k])),g=w.map((b,k)=>Math.max(0,b-m[k])),v=(x[1]+x[3])/2,S=(g[1]+g[3])/2;for(let b=0;b<f;b++){const k=b%2;for(let C=0;C<u;C++){const P=C%2;let N=0;!k&&!P?N=0:!k&&P?N=1:k&&!P?N=3:N=2;const A=d[b*u+C],T=m[N],O=x[N],M=g[N],D=Math.max(A-T,0),E=M-O||1e-9,B=(D-O)/E;let _;B<0?_=D*(v/Math.max(O,1e-9)):B>1?_=D*(S/Math.max(M,1e-9)):_=(1-B)*v+B*S,_*=p;let I;if(n){const z=Math.max(0,Math.min(1,_/65535));I=ml(z)*65535}else I=_;h[b*u+C]=Math.round(Math.max(0,Math.min(65535,I)))}}}else{const m=t.blackLevel||[0,0,0,0],y=t.wbGains?t.wbGains[0]:1,w=t.wbGains?t.wbGains[1]:1;for(let x=0;x<f;x++){const g=x%2;for(let v=0;v<u;v++){const S=v%2,b=g*2+S,k=d[x*u+v],C=m[b];let P=k-C;b===0?P*=y:b===3&&(P*=w),P*=p;const N=Math.max(0,Math.min(1,P/(r?s-C:s))),A=n?ml(N):N;h[x*u+v]=Math.round(A*65535)}}}return{data:h,width:u,height:f,channels:1}}else{const o=new Uint8Array(e.slice(0)),s={outputBps:16,noAutoBright:!r,bright:1,outputColor:n?1:0,useCameraWb:!0};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(d=>Math.max(1,Math.round(d)))),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,await i.open(o,s);const l=await i.imageData(),u=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2),f=Math.pow(2,t.exposure);if(f!==1)for(let d=0;d<u.length;d++)u[d]=Math.max(0,Math.min(65535,Math.round(u[d]*f)));return{data:u,width:l.width,height:l.height,channels:3}}}finally{i.delete?i.delete():i.close()}}const wi=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},pte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[h,p]=j.useState(()=>(u==null?void 0:u.channelMode)??wi("hist_mode","All")),[m,y]=j.useState(()=>(u==null?void 0:u.minVal)??wi("hist_min",0)),[w,x]=j.useState(()=>(u==null?void 0:u.maxVal)??wi("hist_max",16383)),[g,v]=j.useState(()=>(u==null?void 0:u.binCount)??wi("hist_bins",100)),[S,b]=j.useState(()=>(u==null?void 0:u.pointToPoint)??wi("hist_ptp",!1)),[k,C]=j.useState(()=>(u==null?void 0:u.showTheo)??wi("hist_show_theo",!1)),[P,N]=j.useState(()=>(u==null?void 0:u.theoMean)??wi("hist_theo_mean","512")),[A,T]=j.useState(()=>(u==null?void 0:u.theoSigma)??wi("hist_theo_sigma","10")),[O,M]=j.useState(()=>(u==null?void 0:u.theoAmp)??wi("hist_theo_amp","1000")),[D,E]=j.useState(!1),[B,_]=j.useState(0),[I,z]=j.useState([]),[U,ne]=j.useState(null),[V,F]=j.useState(l||{x:100,y:100}),[re,ee]=j.useState(!1),$=j.useRef({x:0,y:0});j.useEffect(()=>{localStorage.setItem("hist_mode",h),localStorage.setItem("hist_min",String(m)),localStorage.setItem("hist_max",String(w)),localStorage.setItem("hist_bins",String(g)),localStorage.setItem("hist_ptp",String(S)),localStorage.setItem("hist_show_theo",String(k)),localStorage.setItem("hist_theo_mean",P),localStorage.setItem("hist_theo_sigma",A),localStorage.setItem("hist_theo_amp",O),f&&f({channelMode:h,minVal:m,maxVal:w,binCount:g,pointToPoint:S,showTheo:k,theoMean:P,theoSigma:A,theoAmp:O})},[h,m,w,g,S,k,P,A,O]),j.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(w<=m){ne("Invalid range: Max must be greater than Min");return}ne(null),E(!0),_(0);const Q=new AbortController,he=[],qe=setTimeout(async()=>{try{let He=[];if(d&&d.length>1){const Ee=Math.min(d.length,navigator.hardwareConcurrency||4);for(let ct=0;ct<Ee;ct++){const er=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});he.push(er)}let Ue=0,lt=0;const St=[],_r=async ct=>{for(;Ue<d.length;){if(Q.signal.aborted)return;const er=Ue++,Ge=d[er];try{const Xt=await Ge.arrayBuffer();await new Promise((Ut,ir)=>{ct.onmessage=Mr=>{const{success:bt,hist:We,error:gt}=Mr.data;bt?(St.push(We),lt++,_(lt),Ut()):(console.error(`Error processing ${Ge.name}:`,gt),Ut())},ct.onerror=Mr=>{console.error("Worker Error",Mr),Ut()},ct.postMessage({buffer:Xt,roi:a,binCount:g,minVal:m,maxVal:w,pointToPoint:S},[Xt])})}catch(Xt){console.error("File Read Error",Xt)}}};if(await Promise.all(he.map(ct=>_r(ct))),he.forEach(ct=>ct.terminate()),he.length=0,St.length>0){He=St[0];for(let ct=1;ct<St.length;ct++){const er=St[ct];for(let Ge=0;Ge<er.length;Ge++)He[Ge]&&(He[Ge].c0+=er[Ge].c0,He[Ge].c1+=er[Ge].c1,He[Ge].c2+=er[Ge].c2,He[Ge].c3+=er[Ge].c3)}}}else n&&(He=lte(n.data,n.width,n.height,a.x,a.y,a.w,a.h,g,m,w,S));Q.signal.aborted||z(He)}catch(He){console.error("Histogram calc error:",He),ne("Error calculating histogram")}finally{Q.signal.aborted||E(!1)}},50);return()=>{clearTimeout(qe),Q.abort(),he.length>0&&(console.log(`Terminating ${he.length} active histogram workers...`),he.forEach(He=>He.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,g,m,w,S,d]);const ae=j.useMemo(()=>{if(!k)return I;const Q=parseFloat(P),he=parseFloat(A),ve=parseFloat(O);return isNaN(Q)||isNaN(he)||isNaN(ve)||he<=0?I:I.map(qe=>{const He=qe.binStart,Ee=-Math.pow(He-Q,2)/(2*Math.pow(he,2)),Ue=ve*Math.exp(Ee);return{...qe,theory:Ue}})},[I,k,P,A,O]),q=()=>{if(I.length===0)return;let Q=0,he=0;if(I.forEach(ve=>{const qe=Math.max(ve.c0||0,ve.c1||0,ve.c2||0,ve.c3||0);qe>Q&&(Q=qe,he=ve.binStart)}),N(he.toFixed(2)),M(Q.toString()),parseFloat(A)===0||isNaN(parseFloat(A))){const ve=w-m;T((ve/20).toFixed(2))}},H=(Q,he,ve)=>{s&&s(),!(ve.closest("button")||ve.closest("input")||ve.closest("select"))&&(ee(!0),$.current={x:Q-V.x,y:he-V.y})},le=Q=>{H(Q.clientX,Q.clientY,Q.target)},ce=Q=>{const he=Q.touches[0];H(he.clientX,he.clientY,Q.target)};if(j.useEffect(()=>{const Q=ve=>{if(re){const qe="touches"in ve?ve.touches[0].clientX:ve.clientX,He="touches"in ve?ve.touches[0].clientY:ve.clientY;F({x:qe-$.current.x,y:He-$.current.y})}},he=()=>ee(!1);return re&&(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",he),window.addEventListener("touchmove",Q,{passive:!1}),window.addEventListener("touchend",he)),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",he),window.removeEventListener("touchmove",Q),window.removeEventListener("touchend",he)}},[re]),!e)return null;const Z=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},Ce=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},we="step";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:V.x,top:V.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${re?"cursor-grabbing":"cursor-grab"}`,onMouseDown:le,onTouchStart:ce,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&c.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),c.jsxs("select",{value:h,onChange:Q=>p(Q.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[c.jsx("option",{value:"All",children:"All Colors"}),c.jsx("option",{value:"0",children:Z.c0}),c.jsx("option",{value:"1",children:Z.c1}),c.jsx("option",{value:"2",children:Z.c2}),c.jsx("option",{value:"3",children:Z.c3})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),c.jsx("input",{type:"number",value:m,onChange:Q=>y(Number(Q.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",value:w,onChange:Q=>x(Number(Q.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:Q=>b(Q.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),c.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!S&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),c.jsx("input",{type:"number",value:g,onChange:Q=>v(Math.max(1,Number(Q.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${k?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:k,onChange:Q=>C(Q.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),c.jsx("span",{className:`font-bold uppercase tracking-tight ${k?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),k&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),c.jsx("input",{type:"text",value:P,onChange:Q=>N(Q.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),c.jsx("input",{type:"text",value:A,onChange:Q=>T(Q.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),c.jsx("input",{type:"text",value:O,onChange:Q=>M(Q.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsx("button",{onClick:q,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),D&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${B}/${d.length}`:"Calculating Histogram..."})]}),U?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:U}):c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(pl,{data:ae,children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),c.jsx(Yn,{dataKey:"binStart",type:"number",domain:[m,w],tickFormatter:Q=>Math.floor(Q).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),c.jsx(qn,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),c.jsx(Zr,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:Q=>`DN: ${Math.round(Number(Q))}`,formatter:(Q,he)=>[Math.round(Q),he]}),c.jsx(si,{wrapperStyle:{paddingTop:"10px"}}),k&&c.jsx(Dr,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(h==="All"||h==="0")&&c.jsx(Dr,{type:we,dataKey:"c0",name:Z.c0,stroke:Ce.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="1")&&c.jsx(Dr,{type:we,dataKey:"c1",name:Z.c1,stroke:Ce.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="2")&&c.jsx(Dr,{type:we,dataKey:"c2",name:Z.c2,stroke:Ce.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="3")&&c.jsx(Dr,{type:we,dataKey:"c3",name:Z.c3,stroke:Ce.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},mc=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=j.useState(e),[l,u]=j.useState(!1),[f,d]=j.useState({x:0,y:0}),h=j.useRef(null),p=(w,x,g)=>{i&&i(),!(g.closest("button")||g.closest("input"))&&(u(!0),d({x:w-o.x,y:x-o.y}))},m=w=>{p(w.clientX,w.clientY,w.target)},y=w=>{const x=w.touches[0];p(x.clientX,x.clientY,w.target)};return j.useEffect(()=>{const w=g=>{var v,S;if(l){g.cancelable&&g.preventDefault();const b="touches"in g?g.touches[0].clientX:g.clientX,k="touches"in g?g.touches[0].clientY:g.clientY,C=b-f.x,P=k-f.y,N=window.innerWidth-(((v=h.current)==null?void 0:v.offsetWidth)||100),A=window.innerHeight-(((S=h.current)==null?void 0:S.offsetHeight)||100);s({x:Math.max(0,Math.min(C,N)),y:Math.max(0,Math.min(P,A))})}},x=()=>{u(!1)};return l&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",x),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",x)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",x),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",x)}},[l,f]),c.jsxs("div",{ref:h,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${l?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[c.jsx("div",{onMouseDown:m,onTouchStart:y,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),c.jsx("div",{className:"relative z-10 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:t})})]})},gte=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:l})=>{const u=j.useRef(null),[f,d]=j.useState(!1),[h,p]=j.useState(null),[m,y]=j.useState(null),[w,x]=j.useState(!0),[g,v]=j.useState(!0),[S,b]=j.useState("-1"),[k,C]=j.useState("8"),[P,N]=j.useState(64),[A,T]=j.useState(45),[O,M]=j.useState(60),D=j.useRef(!1),E=j.useRef({x:0,y:0});j.useEffect(()=>{!e||!r||!n||(d(!0),y(null),setTimeout(()=>{try{const z=ute(r.data,r.width,r.height,n,a,g);z?p(z):y("Could not extract valid data from ROI.")}catch(z){console.error("2D FFT Error",z),y("Calculation Error: "+z.message)}finally{d(!1)}},50))},[e,r,n,a,g]),j.useEffect(()=>{if(!h||!u.current)return;const z=u.current,U=z.getContext("2d");if(!U)return;const ne=z.width,V=z.height;U.clearRect(0,0,ne,V),U.fillStyle="#0f172a",U.fillRect(0,0,ne,V);const F=h.width,re=h.height,ee=h.data,$=Math.pow(10,parseFloat(S)||-1),ae=Math.pow(10,parseFloat(k)||8);let q=$,H=ae;w&&(q=Math.log10(Math.max(1e-10,$)),H=Math.log10(Math.max(1e-10,ae)));const le=H-q||1,ce=ne/2,Z=V/2+50,Ce=Math.min(ne,V)*.4,we=.6,Q=A*Math.PI/180,he=O*Math.PI/180,ve=Math.cos(Q),qe=Math.sin(Q),He=Math.cos(he),Ee=Math.sin(he),Ue=(We,gt,Ct)=>{const or=We*ve-gt*qe,sr=We*qe+gt*ve,tn=sr*He-Ct*Ee,Rt=sr*Ee+Ct*He;return{x:ce+or*Ce,y:Z-tn*Ce,depth:Rt}},lt=Math.max(16,P),St=Math.max(1,Math.floor(F/lt)),_r=Math.max(1,Math.floor(re/lt)),ct=(We,gt)=>{let Ct=ee[gt*F+We];return w&&(Ct=Math.log10(Math.max(1e-10,Ct))),Ct=Math.max(q,Math.min(H,Ct)),(Ct-q)/le},er=We=>`hsl(${(1-We)*240}, 80%, 50%)`,Ge=[];for(let We=0;We<re-_r;We+=_r)for(let gt=0;gt<F-St;gt+=St){const Ct=gt,or=We,sr=gt+St,tn=We,Rt=gt+St,xn=We+_r,jt=gt,bn=We+_r,Rn=ct(Ct,or),wn=ct(sr,tn),dr=ct(Rt,xn),xr=ct(jt,bn),br=(Rn+wn+dr+xr)/4,kn=Ue(Ct/(F-1)-.5,or/(re-1)-.5,Rn*we),un=Ue(sr/(F-1)-.5,tn/(re-1)-.5,wn*we),wr=Ue(Rt/(F-1)-.5,xn/(re-1)-.5,dr*we),Qn=Ue(jt/(F-1)-.5,bn/(re-1)-.5,xr*we),da=(kn.depth+un.depth+wr.depth+Qn.depth)/4;Ge.push({pts:[{x:kn.x,y:kn.y},{x:un.x,y:un.y},{x:wr.x,y:wr.y},{x:Qn.x,y:Qn.y}],avgDepth:da,avgZ:br})}Ge.sort((We,gt)=>We.avgDepth-gt.avgDepth),U.lineWidth=.5,Ge.forEach(We=>{U.fillStyle=er(We.avgZ),U.beginPath(),U.moveTo(We.pts[0].x,We.pts[0].y),U.lineTo(We.pts[1].x,We.pts[1].y),U.lineTo(We.pts[2].x,We.pts[2].y),U.lineTo(We.pts[3].x,We.pts[3].y),U.closePath(),U.fill()}),U.fillStyle="#aaa",U.font="10px monospace";const Xt=Ue(-.5,-.5,0),Ut=Ue(.5,-.5,0),ir=Ue(-.5,.5,0),Mr=Ue(.5,.5,0);U.strokeStyle="#666",U.beginPath(),U.moveTo(Xt.x,Xt.y),U.lineTo(Ut.x,Ut.y),U.lineTo(Mr.x,Mr.y),U.lineTo(ir.x,ir.y),U.closePath(),U.stroke(),U.fillText("0",Xt.x-10,Xt.y+10),U.fillText("Fx",Ut.x+5,Ut.y),U.fillText("Fy",ir.x-15,ir.y);const bt=Ue(-.5,-.5,we);U.strokeStyle="#fff",U.beginPath(),U.moveTo(Xt.x,Xt.y),U.lineTo(bt.x,bt.y),U.stroke(),U.fillText(`10^${k}`,bt.x-25,bt.y),U.fillText(`10^${S}`,Xt.x-25,Xt.y)},[h,w,A,O,S,k,P]);const B=z=>{D.current=!0,E.current={x:z.clientX,y:z.clientY}},_=z=>{if(!D.current)return;const U=z.clientX-E.current.x,ne=z.clientY-E.current.y;T(V=>V-U*.5),M(V=>Math.max(0,Math.min(90,V+ne*.5))),E.current={x:z.clientX,y:z.clientY}},I=()=>{D.current=!1};return e?c.jsxs(mc,{initialPosition:l||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,h&&c.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[h.width,"x",h.height," (Chirp-Z)"]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),c.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),c.jsx("input",{type:"number",value:S,onChange:z=>b(z.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),c.jsx("span",{className:"text-slate-500",children:"to"}),c.jsx("input",{type:"number",value:k,onChange:z=>C(z.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),c.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:P,onChange:z=>N(Number(z.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),c.jsx("span",{className:"text-slate-300 w-6 text-right",children:P})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:z=>x(z.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:z=>v(z.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),c.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),m&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:m}),c.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:B,onMouseMove:_,onMouseUp:I,onMouseLeave:I}),c.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},mte=.5,cv=1e-10,XS=(e,t)=>{const r=e.length-1;if(r<0)return cv;const n=t/mte*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,cv)},yte=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},vte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:l,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:h})=>{const[p,m]=j.useState((f==null?void 0:f.selectedChannel)??0),[y,w]=j.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[x,g]=j.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[v,S]=j.useState((f==null?void 0:f.useHanning)??!0),[b,k]=j.useState((f==null?void 0:f.doAverage)??!0),[C,P]=j.useState((f==null?void 0:f.welchSegments)??1),[N,A]=j.useState((f==null?void 0:f.showH)??!0),[T,O]=j.useState((f==null?void 0:f.showV)??!0),[M,D]=j.useState((f==null?void 0:f.interlaceRows)??!1),[E,B]=j.useState((f==null?void 0:f.rowGroup)??0),[_,I]=j.useState((f==null?void 0:f.interlaceCols)??!1),[z,U]=j.useState((f==null?void 0:f.colGroup)??0),[ne,V]=j.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[F,re]=j.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[ee,$]=j.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[ae,q]=j.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[H,le]=j.useState((f==null?void 0:f.intStart)||"0"),[ce,Z]=j.useState((f==null?void 0:f.intEnd)||"0.5"),[Ce,we]=j.useState(!1),[Q,he]=j.useState([]),[ve,qe]=j.useState(!1),[He,Ee]=j.useState(0),[Ue,lt]=j.useState(null),[St,_r]=j.useState(!1),[ct,er]=j.useState(!1),[Ge,Xt]=j.useState(null),[Ut,ir]=j.useState(!1),[Mr,bt]=j.useState(null),[We,gt]=j.useState(u||{x:50,y:50}),[Ct,or]=j.useState(!1),[sr,tn]=j.useState(null),[Rt,xn]=j.useState({}),jt=j.useRef({x:0,y:0}),bn=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Rn=j.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);j.useEffect(()=>{localStorage.setItem("fft_y_min",y),localStorage.setItem("fft_y_max",x),localStorage.setItem("fft_theo_sigma",ne),localStorage.setItem("fft_theo_ksize",F),localStorage.setItem("fft_theo_noise",ee),localStorage.setItem("fft_theo_scale",ae)},[y,x,ne,F,ee,ae]),j.useEffect(()=>{if(!e||!n||!a)return;qe(!0),lt(null),Ee(0);const se=setTimeout(async()=>{try{const Me=p===-1?[0,1,2,3]:[p],ze=h&&h.length>1?h:[null],tt=ze.length,Je={};let Ot={h:0,v:0};for(let Re=0;Re<tt;Re++){Ee(Re+1);let it;if(ze[Re]){const Tt=await ze[Re].arrayBuffer();it=await ih(Tt)}else it=n;for(const Tt of Me){const Et=cte(it.data,it.width,it.height,a,Tt,!1,v,{rows:M,rowGroup:E,cols:_,colGroup:z},b,C);Et&&(Je[Tt]||(Je[Tt]={h:new Array(Et.avgHoriz.length).fill(0),v:new Array(Et.avgVert.length).fill(0)}),Et.avgHoriz.forEach((rr,me)=>Je[Tt].h[me]+=rr/tt),Et.avgVert.forEach((rr,me)=>Je[Tt].v[me]+=rr/tt),Ot=Et.sampleCount)}}if(Object.keys(Je).length===0)throw new Error("ROI too small or no data found.");const kr=1024,Sr=[];for(let Re=0;Re<kr;Re++){const it=Re/(kr-1)*.5,Tt={freq:parseFloat(it.toFixed(6))};for(const Et of Me)Je[Et]&&(Tt[`c${Et}_h`]=XS(Je[Et].h,it),Tt[`c${Et}_v`]=XS(Je[Et].v,it));Sr.push(Tt)}tn(Ot),he(Sr)}catch(Me){console.error("FFT Loop Failed:",Me),lt(Me.message||"Unknown error during FFT processing")}finally{qe(!1)}},100);return()=>clearTimeout(se)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,p,v,b,C,M,E,_,z,h]);const wn=()=>{const se=parseFloat(H),Me=parseFloat(ce);if(isNaN(se)||isNaN(Me))return;const ze={},tt=p===-1?[0,1,2,3]:[p],Je=Q.filter(Ot=>Ot.freq>=se&&Ot.freq<=Me);if(Je.length===0){xn({});return}tt.forEach(Ot=>{let kr=0,Sr=0;Je.forEach(Re=>{const it=Re[`c${Ot}_h`],Tt=Re[`c${Ot}_v`];typeof it=="number"&&(kr+=it),typeof Tt=="number"&&(Sr+=Tt)}),ze[Ot]={h:kr/Je.length,v:Sr/Je.length,count:Je.length}}),xn(ze)},dr=j.useMemo(()=>{const se=parseFloat(ne),Me=parseInt(F),ze=parseFloat(ee),tt=parseFloat(ae);if(isNaN(se)||isNaN(Me)||isNaN(ze)||isNaN(tt)||Q.length===0)return Q;const Je=yte(Me,se),Ot=Je.reduce((Re,it)=>Re+it*it,0),kr=(Me-1)/2,Sr=ze*ze*tt;return Q.map(Re=>{const it=Re.freq,Tt=2*Math.PI*it;let Et=0,rr=0;for(let Lr=0;Lr<Me;Lr++){const Ta=Lr-kr,rn=Je[Lr],Sn=-Tt*Ta;Et+=rn*Math.cos(Sn),rr+=rn*Math.sin(Sn)}const me=Et*Et+rr*rr;return{...Re,theory:Math.max(cv,Sr*Ot*me)}})},[Q,ne,F,ee,ae]),xr=se=>{se&&se.activeLabel!==void 0&&(ir(!0),bt(Number(se.activeLabel)),Xt(null))},br=se=>{if(Ut&&Mr!==null&&se&&se.activeLabel!==void 0){const Me=Number(se.activeLabel);Xt([Math.min(Mr,Me),Math.max(Mr,Me)])}},kn=()=>ir(!1),un=(se,Me,ze)=>{l&&l(),!(ze.closest("button")||ze.closest("input"))&&(or(!0),jt.current={x:se-We.x,y:Me-We.y})},wr=se=>{un(se.clientX,se.clientY,se.target)},Qn=se=>{const Me=se.touches[0];un(Me.clientX,Me.clientY,se.target)};j.useEffect(()=>{const se=ze=>{if(Ct){const tt="touches"in ze?ze.touches[0].clientX:ze.clientX,Je="touches"in ze?ze.touches[0].clientY:ze.clientY;gt({x:tt-jt.current.x,y:Je-jt.current.y})}},Me=()=>or(!1);return Ct&&(window.addEventListener("mousemove",se),window.addEventListener("mouseup",Me),window.addEventListener("touchmove",se,{passive:!1}),window.addEventListener("touchend",Me)),()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",Me),window.removeEventListener("touchmove",se),window.removeEventListener("touchend",Me)}},[Ct]);const da=j.useMemo(()=>{if(!Ge||Q.length===0)return null;const[se,Me]=Ge,ze=Q.filter(Ot=>Ot.freq>=se&&Ot.freq<=Me);if(ze.length===0)return null;const tt=p===-1?[0,1,2,3]:[p],Je={};return tt.forEach(Ot=>{["h","v"].forEach(kr=>{const Sr=`c${Ot}_${kr}`;let Re=0,it=0;for(const Tt of ze){const Et=Tt[Sr];typeof Et=="number"&&(Re+=Et,it++)}it>0&&(Je[`${Sr}_sigma`]=Math.sqrt(Re/it))})}),{count:ze.length,stats:Je}},[Ge,Q,p]),tr=()=>{if(Q.length===0)return;let se=1/0,Me=-1/0;if(Q.forEach(kr=>{kr.freq<.01||kr.freq>.49||Object.keys(kr).forEach(Sr=>{if(Sr==="freq"||Sr==="theory")return;const Re=kr[Sr];typeof Re=="number"&&Re>0&&(Re<se&&(se=Re),Re>Me&&(Me=Re))})}),se===1/0)return;const ze=Math.log10(se),tt=Math.log10(Me),Je=tt-ze,Ot=(Je===0?1:Je)*.1;w((ze-Ot).toFixed(2)),g((tt+Ot).toFixed(2))},Kt=(se,Me)=>{a&&o&&o({...a,x:a.x+se,y:a.y+Me})},Lt=(se,Me)=>{a&&o&&o({...a,w:Math.max(2,a.w+se),h:Math.max(2,a.h+Me)})};return e?c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:We.x,top:We.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:l,children:[c.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${Ct?"cursor-grabbing":"cursor-grab"}`,onMouseDown:wr,onTouchStart:Qn,children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:h&&h.length>1?`Stack Avg (${h.length} frames)`:"Single Mode"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[c.jsx("button",{onClick:()=>m(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(se=>c.jsx("button",{onClick:()=>m(se),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===se?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:Rn[se]},se))]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("button",{onClick:()=>we(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[c.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),c.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:F,set:re,w:"w-10"},{label:"Sigma",val:ne,set:V,w:"w-12"},{label:"Noise()",val:ee,set:$,w:"w-12"},{label:"Scale",val:ae,set:q,w:"w-12"}].map(se=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:se.label}),c.jsx("input",{type:"text",value:se.val,onChange:Me=>se.set(Me.target.value),className:`${se.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},se.label))})]})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),c.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:C,onChange:se=>P(parseInt(se.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),c.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:C})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:M,onChange:se=>D(se.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:_,onChange:se=>I(se.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),c.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${v?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:v&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:v,onChange:se=>S(se.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${b?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:b&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:b,onChange:se=>k(se.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),c.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("button",{onClick:()=>A(!N),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${N?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-cyan-400":"bg-gray-400"}`})," H"]}),c.jsxs("button",{onClick:()=>O(!T),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${T?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:()=>er(!ct),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${ct?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),c.jsx("button",{onClick:()=>_r(!St),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${St?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[c.jsx("button",{onClick:tr,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",c.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[c.jsx("input",{type:"text",value:y,onChange:se=>w(se.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),c.jsx("span",{className:"px-2 text-gray-400",children:"to"}),c.jsx("input",{type:"text",value:x,onChange:se=>g(se.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),ve&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),h&&h.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",He," / ",h.length]})]}),Ue?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:Ue}):c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[c.jsx("div",{className:"flex-1 relative z-10",onMouseDown:xr,onMouseMove:br,onMouseUp:kn,style:{cursor:Ut?"col-resize":"crosshair"},children:c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(pl,{data:dr,margin:{top:10,right:10,bottom:20,left:0},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),c.jsx(Yn,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),c.jsx(qn,{scale:"log",domain:[Math.pow(10,parseFloat(y)),Math.pow(10,parseFloat(x))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:se=>Number(se).toExponential(0),width:45}),c.jsx(Zr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:se=>[Number(se).toExponential(3),""],labelFormatter:se=>`Freq: ${Number(se).toFixed(4)}`}),c.jsx(si,{wrapperStyle:{fontSize:"10px"}}),c.jsx(Dr,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(se=>{if(p!==-1&&p!==se)return[];const Me=`c${se}_h`,ze=`c${se}_v`,tt=bn[`c${se}`],Je=[];return N&&Je.push(c.jsx(Dr,{type:"linear",dataKey:Me,name:`${Rn[se]} (H)`,stroke:tt,strokeWidth:1,dot:!1,isAnimationActive:!1},`${se}_h`)),T&&Je.push(c.jsx(Dr,{type:"linear",dataKey:ze,name:`${Rn[se]} (V)`,stroke:tt,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${se}_v`)),Je}),Ge&&c.jsx(Sf,{x1:Ge[0],x2:Ge[1],fill:"#8884d8",fillOpacity:.15})]})})}),da&&Ge&&c.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[c.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",Ge[0].toFixed(3),"-",Ge[1].toFixed(3)]}),Object.entries(da.stats).map(([se,Me])=>c.jsxs("div",{className:"flex justify-between gap-4",children:[c.jsxs("span",{className:"text-slate-400",children:[se,":"]}),c.jsx("span",{className:"font-bold text-cyan-400",children:Me.toFixed(5)})]},se))]})]})]}),ct&&c.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[c.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("input",{type:"number",step:"0.01",value:H,onChange:se=>le(se.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.01",value:ce,onChange:se=>Z(se.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("button",{onClick:wn,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(se=>{const Me=Rt[se];if(!Me)return null;const ze=bn[`c${se}`];return c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:ze},children:[Rn[se]," ",c.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Me.count," pts)"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[c.jsxs("div",{children:["H: ",Me.h.toExponential(3)]}),c.jsxs("div",{children:["V: ",Me.v.toExponential(3)]})]})]},se)})})]}),St&&c.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>Kt(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Kt(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Kt(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Kt(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx("button",{onClick:()=>Lt(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),c.jsx("button",{onClick:()=>Lt(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),c.jsx("button",{onClick:()=>Lt(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),c.jsx("button",{onClick:()=>Lt(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),c.jsx(gte,{isOpen:Ce,onClose:()=>we(!1),rawImageData:n,roi:a,selectedChannel:p===-1?0:p,channelName:p===-1?"Red (Default)":Rn[p],zIndex:s?s+2:102,onFocus:l})]}):null},xte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f})=>{const[d,h]=j.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[p,m]=j.useState((u==null?void 0:u.blackLevel)??0),[y,w]=j.useState((u==null?void 0:u.whiteLevel)??16383),[x,g]=j.useState(null),[v,S]=j.useState(!1),[b,k]=j.useState(null),[C,P]=j.useState(l||{x:150,y:150}),[N,A]=j.useState(!1),T=j.useRef({x:0,y:0});j.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:p,whiteLevel:y})},[d,p,y]),j.useEffect(()=>{if(e&&n&&!u){const _=n.blackLevels?Math.floor(n.blackLevels[1]):0;m(_),w(n.whiteLevel||16383),g(null)}},[e,n]);const O=()=>{if(!n||!a)return;k(null),S(!0);const I=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const z=fte(n.data,n.width,n.height,a,I,p,y);z?g(z):(k("No data found in selection with current filters."),g(null))}catch(z){console.error("Analysis failed:",z),k(z.message||"Analysis error")}finally{S(!1)}},50)},M=(_,I,z)=>{s&&s(),!(z.closest("button")||z.closest("input")||z.closest("select"))&&(A(!0),T.current={x:_-C.x,y:I-C.y})},D=_=>{M(_.clientX,_.clientY,_.target)},E=_=>{const I=_.touches[0];M(I.clientX,I.clientY,_.target)};if(j.useEffect(()=>{const _=z=>{if(N){const U="touches"in z?z.touches[0].clientX:z.clientX,ne="touches"in z?z.touches[0].clientY:z.clientY;P({x:U-T.current.x,y:ne-T.current.y})}},I=()=>A(!1);return N&&(window.addEventListener("mousemove",_),window.addEventListener("mouseup",I),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",I)),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",I),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",I)}},[N]),!e)return null;const B=i?["B","G1","G2","R"]:["R","G1","G2","B"];return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:C.x,top:C.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${N?"cursor-grabbing":"cursor-grab"}`,onMouseDown:D,onTouchStart:E,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),c.jsx("select",{value:d,onChange:_=>h(_.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:B.map(_=>c.jsx("option",{value:_,children:_},_))})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),c.jsx("input",{type:"number",value:p,onChange:_=>m(Number(_.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),c.jsx("input",{type:"number",value:y,onChange:_=>w(Number(_.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsx("button",{onClick:O,disabled:v,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:v?"Analyzing...":"Run Analysis"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[b&&c.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:b}),!x&&!v&&!b&&c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:c.jsx("p",{children:"Configure parameters and click Run Analysis"})}),x&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:x.uniqueCount})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:x.diffCount})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[c.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),c.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(x.stepCounts).sort((_,I)=>parseFloat(_[0])-parseFloat(I[0])).map(([_,I])=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",_,":"]}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(I)})]},_))})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[c.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(pl,{data:x.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Yn,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),c.jsx(qn,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),c.jsx(Zr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:_=>`Val: ${_}`,formatter:_=>[_,"Step Size"]}),c.jsx(Dr,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},bte=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:l})=>{const[u,f]=j.useState("cross"),[d,h]=j.useState("R"),[p,m]=j.useState("B"),[y,w]=j.useState("H"),[x,g]=j.useState(null),[v,S]=j.useState(!1),[b,k]=j.useState(0),[C,P]=j.useState(0),[N,A]=j.useState("single"),T=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},O=a?["B","G1","G2","R"]:["R","G1","G2","B"],M=async D=>{if(!r||!n)return;S(!0),A(D),k(0),g(null);let E=T[d],B=u==="cross"?T[p]:E,_=0,I=0;u==="self"&&(y==="H"?I=2:_=2),setTimeout(async()=>{try{let z={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(D==="single")z=VS(r.data,r.width,r.height,n,E,B,_,I);else if(l&&l.length>0)for(let U=0;U<l.length;U++){k(U+1);const ne=await l[U].arrayBuffer(),V=await ih(ne),F=VS(V.data,V.width,V.height,n,E,B,_,I);z.sumCov+=F.sumCov,z.sumVar1+=F.sumVar1,z.sumVar2+=F.sumVar2,z.n+=F.n}P(z.n),g(ste(z))}catch(z){console.error("Pearson calculation failed",z),alert("Calculation error: "+z.message)}finally{S(!1)}},50)};return e?c.jsxs(mc,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),c.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),c.jsx("select",{value:d,onChange:D=>h(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:O.map(D=>c.jsx("option",{value:D,children:D},D))})]}),c.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?c.jsx("select",{value:p,onChange:D=>m(D.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:O.map(D=>c.jsx("option",{value:D,children:D},D))}):c.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[c.jsx("button",{onClick:()=>w("H"),className:`flex-1 text-[9px] font-bold rounded ${y==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),c.jsx("button",{onClick:()=>w("V"),className:`flex-1 text-[9px] font-bold rounded ${y==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:()=>M("single"),disabled:v,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:v&&N==="single"?"Calculating...":"Calc Current Frame"}),l&&l.length>0&&c.jsxs("button",{onClick:()=>M("stack"),disabled:v,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[c.jsx("span",{children:"Calc Stack Concatenated"}),v&&N==="stack"&&c.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",b," / ",l.length]})]})]}),x!==null&&c.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${y})`," r"]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:x.toFixed(5)}),c.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",C.toLocaleString()," pairs"]}),c.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(x)>.5?c.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(x)>.1?c.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):c.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),c.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${y==="V"?"+2":""}, c${y==="H"?"+2":""}) in the same channel.`})]}):null},wte=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],kte=["5","9","0","8","2","1","4","7","3","6"],KS=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:kte[r]}).join(""),Ste=({isOpen:e,onClose:t})=>{const[r,n]=j.useState({pv:"--",uv:"--"});return j.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[c.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:c.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[c.jsx("span",{className:"font-bold mr-2",children:"about:"}),c.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),c.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:wte.map(a=>c.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),c.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),c.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:c.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[c.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:KS(r.pv)}),c.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:KS(r.uv)})]})})})]})]})}):null},jte=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=j.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(h,p)=>{if(typeof p=="bigint")return p.toString()+"n";if(typeof p=="object"&&p!==null){if(d.has(p))return"[Circular]";if(d.add(p),ArrayBuffer.isView(p))return`[${p.constructor.name}]`}return p})}catch{return"[Unable to serialize object]"}},l=j.useMemo(()=>{if(!r)return[];const f=[],d=(h,p=0)=>{if(p>5)return"...";if(h==null)return String(h);if(h instanceof Date)return h.toLocaleString();if(typeof h=="number")return h.toString();if(typeof h=="string")return h;if(typeof h=="bigint")return h.toString()+"n";if(ArrayBuffer.isView(h))return`<${h.constructor.name} len=${h.length} bytes=${h.byteLength}>`;if(h instanceof ArrayBuffer)return`<ArrayBuffer bytes=${h.byteLength}>`;if(typeof h=="object"){if(Array.isArray(h))return h.length===0?"[]":h.length>20?`[${h.slice(0,10).map(w=>typeof w=="number"?w.toFixed(2):d(w,p+1)).join(", ")}, ... (+${h.length-10} more)]`:`[${h.map(y=>typeof y=="number"?Number.isInteger(y)?y:y.toFixed(4):d(y,p+1)).join(", ")}]`;try{const m=Object.keys(h);return m.length>5?`{Object with ${m.length} keys}`:s(h)}catch{return"<Complex Object>"}}return String(h)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(p=>{if(p==="MakerNote"||p==="UserComment"||p.includes("Strip")||p.includes("Offset")){f.push({key:p,value:"<Binary/Internal Data>"});return}const m=r[p];f.push({key:p,value:d(m)})})}catch(h){console.error("Error processing EXIF data:",h),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=l.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:c.jsxs("div",{className:"relative",children:[c.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?c.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[c.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),c.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):c.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:c.jsxs("p",{children:['No tags found matching "',i,'"']})})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},Pte=100,Eg=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},YS=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=j.useRef(null),s=j.useRef(null),l=j.useCallback(g=>{const v=i?Math.max(1e-6,e):e,S=i?Math.max(v*1.0001,t):t,b=Math.max(v,Math.min(S,g));if(i){const k=Math.log10(v),C=Math.log10(S);return(Math.log10(b)-k)/(C-k)}return(b-v)/(S-v)},[e,t,i]),u=j.useCallback(g=>{const v=i?Math.max(1e-6,e):e,S=i?Math.max(v*1.0001,t):t;if(i){const b=Math.log10(v),k=Math.log10(S);return Math.pow(10,b+g*(k-b))}return v+g*(S-v)},[e,t,i]),f=(g,v)=>{g.preventDefault(),g.stopPropagation(),s.current=v;const S=k=>{if(!s.current||!o.current)return;const C=o.current.getBoundingClientRect();let P=0;a?P=(C.bottom-k.clientY)/C.height:P=(k.clientX-C.left)/C.width,P=Math.max(0,Math.min(1,P));const N=u(P);if(s.current==="min"){const A=r[1];n([Math.min(N,A),A])}else{const A=r[0];n([A,Math.max(N,A)])}},b=()=>{s.current=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",b)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",b)},d=l(r[0])*100,h=l(r[1])*100,p=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},m=a?{left:"50%",bottom:`${d}%`,height:`${h-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${h-d}%`,height:"4px",transform:"translateY(-50%)"},y="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",w=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},x=a?{left:"50%",bottom:`${h}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${h}%`,transform:"translate(-50%, -50%)"};return c.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[c.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:p}),c.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:m}),c.jsx("div",{className:y,style:w,onMouseDown:g=>f(g,"min")}),c.jsx("div",{className:y,style:x,onMouseDown:g=>f(g,"max")})]})},Cte=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:l,initialISO:u})=>{const[f,d]=j.useState("Noise"),[h,p]=j.useState(!0),[m,y]=j.useState(null),[w,x]=j.useState("default"),[g,v]=j.useState(!1),[S,b]=j.useState(!1),[k,C]=j.useState({R:!0,G1:!0,G2:!0,B:!0}),[P,N]=j.useState(""),[A,T]=j.useState(""),[O,M]=j.useState(""),[D,E]=j.useState(""),[B,_]=j.useState("10"),[I,z]=j.useState(""),[U,ne]=j.useState("0 0 0 0"),[V,F]=j.useState("0 0 0 0"),[re,ee]=j.useState(!1),[$,ae]=j.useState(null),[q,H]=j.useState(!1),[le,ce]=j.useState(0),[Z,Ce]=j.useState([]),[we,Q]=j.useState(""),[he,ve]=j.useState(""),qe=()=>{const G=parseFloat(we),X=parseFloat(he);!isNaN(G)&&!isNaN(X)&&(Ce([...Z,{id:Date.now(),x:G,y:X}]),Q(""),ve(""))},[He,Ee]=j.useState(()=>localStorage.getItem("ptc_tester_name")||""),[Ue,lt]=j.useState(""),[St,_r]=j.useState("");j.useEffect(()=>{localStorage.setItem("ptc_tester_name",He)},[He]);const ct=j.useRef(re),er=j.useRef(q),Ge=j.useRef(le);j.useEffect(()=>{ct.current=re,er.current=q,Ge.current=le},[re,q,le]);const[Xt,Ut]=j.useState(null),[ir,Mr]=j.useState({min:.01,max:90}),[bt,We]=j.useState({readNoise:0,gain:1,prnu:.5}),[gt,Ct]=j.useState(2e6),or=j.useRef(bt),sr=j.useRef(ir),tn=j.useRef(gt);j.useEffect(()=>{or.current=bt,sr.current=ir,tn.current=gt},[bt,ir,gt]);const[Rt,xn]=j.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[jt,bn]=j.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[Rn,wn]=j.useState(!1),[dr,xr]=j.useState([]),[br,kn]=j.useState(null),[un,wr]=j.useState(""),Qn=j.useMemo(()=>n?n.join(","):"",[n]);j.useEffect(()=>{if(e){let G="0 0 0 0";o&&o.blackLevel?G=o.blackLevel.join(" "):G=n&&n.length===4?n.join(" "):"0 0 0 0",ne(G),F(G);let X="";if(o&&o.height?X=o.height.toString():a&&(X=a.toString()),z(X),X){const R=parseFloat(X);!isNaN(R)&&R>0?_((2309.4/R).toFixed(2)):_("10")}else _("10");ae(null),ee(!1),H(!1),ce(0),xr([]),kn(null),Mr({min:.01,max:90}),xn({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const oe={readNoise:0,gain:0,prnu:0};We(oe),or.current=oe,N(""),T(""),M(""),E(""),d("Noise"),Ut(null),Ct(2e6),wr(""),b(!1),Ce([]),lt(R=>R.trim()===""&&l?l:R),_r(R=>R.trim()===""&&u?u:R)}},[e,Qn,o,a,r,l,u]);const da=G=>{if(G.key==="Enter"){const X=parseFloat(I);if(!isNaN(X)&&X>0){const oe=(2309.4/X).toFixed(2);_(oe)}G.target.blur()}},tr=j.useMemo(()=>{let X=V.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(X.length===1&&(X=[X[0],X[0],X[0],X[0]]);X.length<4;)X.push(0);const oe=R=>{switch(R){case"R":return X[0];case"G1":return X[1];case"G2":return X[2];case"B":return X[3];default:return 0}};return r.map(R=>{const pe=R.mean-oe(R.channel),Ne=R.std>0?pe/R.std:0;return{...R,x:pe,std:R.std,snr:Ne}}).filter(R=>R.std>0)},[r,V]),Kt=j.useMemo(()=>{const G=bt.readNoise,X=G*G;return tr.map(oe=>{let R=0;if(f==="Noise")R=oe.std;else if(f==="SNR")R=oe.snr;else if(f==="Linear"){const Ne=oe.std*oe.std-X;R=oe.x!==0?Ne/oe.x:0}return{...oe,y:R}})},[tr,f,bt.readNoise]),Lt=j.useMemo(()=>{if(tr.length===0)return"G1";const G={R:0,G1:0,G2:0,B:0},X={R:0,G1:0,G2:0,B:0};for(const pe of tr)G[pe.channel]+=pe.x,X[pe.channel]++;let oe="G1",R=-1/0;return Object.keys(G).forEach(pe=>{const Ne=X[pe],De=Ne>0?G[pe]/Ne:-1/0;De>R&&(R=De,oe=pe)}),oe},[tr]),se=j.useCallback(()=>{let G=1/0,X=-1/0;if(tr.length===0)return{min:.1,max:1};for(let oe=0;oe<tr.length;oe++){const R=tr[oe].x;h&&R<=0||(R<G&&(G=R),R>X&&(X=R))}return G===1/0?{min:.1,max:1}:{min:G,max:X}},[tr,h]),Me=j.useCallback(()=>{let G=1/0,X=-1/0;if(Kt.length===0)return{min:.1,max:1};for(let oe=0;oe<Kt.length;oe++){const R=Kt[oe].y;h&&R<=0||(R<G&&(G=R),R>X&&(X=R))}return G===1/0?{min:.1,max:1}:{min:G*.9,max:X*1.1}},[Kt,h]),{min:ze,max:tt}=se(),{min:Je,max:Ot}=Me(),kr=tt*(ir.min/100),Sr=tt*(ir.max/100),Re=j.useMemo(()=>{if(!h&&Kt.length===0)return{shot:[],read:[],prnu:[],total:[]};const G=P?parseFloat(P):ze,X=A?parseFloat(A):tt,oe=100,R=Math.max(.1,G),pe=Math.max(1,X);if(R>=pe)return{shot:[],read:[],prnu:[],total:[]};const Ne=Math.log10(R),et=(Math.log10(pe)-Ne)/oe,Ye=bt.readNoise,Le=bt.gain>0?bt.gain:1,Bt=bt.prnu/100,wt=[],Gt=[],hr=[],ue=[];for(let Ze=0;Ze<=oe;Ze++){const Ae=Math.pow(10,Ne+Ze*et);if(f==="Linear"){const ut=1/Le,Nt=Bt*Bt,Pn=ut+Nt*Ae;ue.push({x:Ae,y:Pn}),wt.push({x:Ae,y:ut}),hr.push({x:Ae,y:Nt*Ae})}else{const ut=Ye,Nt=Math.sqrt(Ae/Le),Pn=Bt*Ae,mt=Math.sqrt(ut*ut+Nt*Nt+Pn*Pn);f==="Noise"?(wt.push({x:Ae,y:Nt}),Gt.push({x:Ae,y:ut}),hr.push({x:Ae,y:Pn}),ue.push({x:Ae,y:mt})):(Nt>0&&wt.push({x:Ae,y:Ae/Nt}),ut>0&&Gt.push({x:Ae,y:Ae/ut}),Pn>0&&hr.push({x:Ae,y:Ae/Pn}),mt>0&&ue.push({x:Ae,y:Ae/mt}))}}return{shot:wt,read:Gt,prnu:hr,total:ue}},[Kt,h,P,A,bt,f,ze,tt]),it=j.useMemo(()=>{if(f==="Linear")return[];const G=parseFloat(B);if(isNaN(G)||G<=0)return[];const X=P?parseFloat(P):ze,oe=A?parseFloat(A):tt;return f==="SNR"?[{x:X,y:G},{x:oe,y:G}]:[{x:X,y:X/G},{x:oe,y:oe/G}]},[Kt,B,f,P,A,ze,tt]),Tt=j.useCallback((G,X)=>{if(!X||X.length===0)return null;const oe=[...X].sort((R,pe)=>R.x-pe.x);for(let R=0;R<oe.length-1;R++){const pe=oe[R],Ne=oe[R+1];if(pe.snr<=G&&Ne.snr>=G||pe.snr>=G&&Ne.snr<=G){const De=(G-pe.snr)/(Ne.snr-pe.snr);return pe.x+De*(Ne.x-pe.x)}}return null},[]),Et=j.useMemo(()=>{const G=tr,X=1e3,oe=pe=>{if(pe.length===0)return[];if(pe.length<=X)return pe;const Ne=[...pe].sort((Ye,Le)=>Ye.x-Le.x),De=[],et=Ne.length/X;for(let Ye=0;Ye<X;Ye++){const Le=Math.floor(Ye*et),Bt=Math.floor((Ye+1)*et),wt=Ne.slice(Le,Bt);if(wt.length===0)continue;wt.sort((hr,ue)=>hr.std-ue.std);const Gt=Math.floor(wt.length/2);De.push(wt[Gt])}return De},R={R:[],G1:[],G2:[],B:[]};return G.forEach(pe=>{R[pe.channel]&&R[pe.channel].push(pe)}),{R:oe(R.R),G1:oe(R.G1),G2:oe(R.G2),B:oe(R.B)}},[tr]),rr=j.useMemo(()=>$&&bt.gain?$*bt.gain:null,[$,bt.gain]),me=j.useMemo(()=>{if($===null||$===0)return null;const G=parseFloat(B);let X=null;if(!isNaN(G)&&G>0){let De=0,et=0;if(["R","G1","G2","B"].forEach(Ye=>{const Le=Tt(G,Et[Ye]);Le!==null&&(De+=Le,et++)}),et>0){const Ye=De/et;X=Math.log2($/Ye)}}const oe=parseFloat(I);let R=null,pe=NaN;if(!isNaN(oe)&&oe>0){pe=16e3/oe;let De=0,et=0;if(["R","G1","G2","B"].forEach(Ye=>{const Le=Tt(pe,Et[Ye]);Le!==null&&(De+=Le,et++)}),et>0){const Ye=De/et;R=Math.log2($/Ye)}}let Ne=null;if(!isNaN(oe)&&oe>0){const De=Tt(pe,Et[Lt]);De!==null&&(Ne=Math.log2($/De))}return{manualDR:X,ptpDR:R,d55DR:Ne,manualTarget:G,ptpTarget:pe,saturationSignal:$,dominantChannel:Lt}},[$,B,I,Et,Tt,Lt]),Lr=j.useMemo(()=>{if(f==="Linear"||!me||!me.ptpTarget||isNaN(me.ptpTarget))return[];const G=me.ptpTarget,X=P?parseFloat(P):ze,oe=A?parseFloat(A):tt;return f==="SNR"?[{x:X,y:G},{x:oe,y:G}]:[{x:X,y:X/G},{x:oe,y:oe/G}]},[f,me,P,A,ze,tt]),Ta=j.useCallback(()=>{const oe=document.createElement("canvas");oe.width=2048,oe.height=1536;const R=oe.getContext("2d");if(!R)return;const pe=s==="dark",Ne=pe?"#0f172a":"#ffffff",De=pe?"#ffffff":"#000000",et=pe?"#475569":"#cbd5e1",Ye=pe?"#1e293b":"#f1f5f9",Le=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};R.fillStyle=Ne,R.fillRect(0,0,2048,1536);let Bt=P?parseFloat(P):ze,wt=A?parseFloat(A):tt,Gt=O?parseFloat(O):Je,hr=D?parseFloat(D):Ot;isNaN(Bt)&&(Bt=.1),isNaN(wt)&&(wt=1e4),isNaN(Gt)&&(Gt=.1),isNaN(hr)&&(hr=1e3);const ue={top:80,right:80,bottom:100,left:120},Ze=2048-ue.left-ue.right,Ae=1536-ue.top-ue.bottom,ut=Pe=>{if(h){const ot=Math.log10(Math.max(1e-9,Bt)),rt=Math.log10(Math.max(1e-9,wt)),nt=Math.log10(Math.max(1e-9,Pe));return ue.left+(nt-ot)/(rt-ot)*Ze}else return ue.left+(Pe-Bt)/(wt-Bt)*Ze},Nt=Pe=>{if(h){const ot=Math.log10(Math.max(1e-9,Gt)),rt=Math.log10(Math.max(1e-9,hr)),nt=Math.log10(Math.max(1e-9,Pe));return ue.top+Ae-(nt-ot)/(rt-ot)*Ae}else return ue.top+Ae-(Pe-Gt)/(hr-Gt)*Ae};if(R.beginPath(),h){const Pe=(ot,rt,nt)=>{const Xr=Math.log10(Math.max(1e-9,ot)),On=Math.log10(Math.max(1e-9,rt)),ta=Math.floor(Xr),Qa=Math.ceil(On);for(let qi=ta;qi<=Qa;qi++){const Ja=Math.pow(10,qi);let lr=nt?ut(Ja):Nt(Ja);(nt?lr>=ue.left-1&&lr<=ue.left+Ze+1:lr>=ue.top-1&&lr<=ue.top+Ae+1)&&(R.lineWidth=1.5,R.strokeStyle=et,R.beginPath(),nt?(R.moveTo(lr,ue.top),R.lineTo(lr,ue.top+Ae)):(R.moveTo(ue.left,lr),R.lineTo(ue.left+Ze,lr)),R.stroke()),R.lineWidth=.5,R.strokeStyle=Ye;for(let xc=2;xc<10;xc++){const Cf=xc*Ja;lr=nt?ut(Cf):Nt(Cf),(nt?lr>=ue.left&&lr<=ue.left+Ze:lr>=ue.top&&lr<=ue.top+Ae)&&(R.beginPath(),nt?(R.moveTo(lr,ue.top),R.lineTo(lr,ue.top+Ae)):(R.moveTo(ue.left,lr),R.lineTo(ue.left+Ze,lr)),R.stroke())}}};Pe(Bt,wt,!0),Pe(Gt,hr,!1)}else{R.strokeStyle=et,R.lineWidth=1;for(let Pe=0;Pe<=5;Pe++){const ot=ue.left+Ze*Pe/5;R.beginPath(),R.moveTo(ot,ue.top),R.lineTo(ot,ue.top+Ae),R.stroke();const rt=ue.top+Ae*Pe/5;R.beginPath(),R.moveTo(ue.left,rt),R.lineTo(ue.left+Ze,rt),R.stroke()}}R.strokeStyle=De,R.lineWidth=2,R.strokeRect(ue.left,ue.top,Ze,Ae);const Pn=(Pe,ot,rt)=>{Pe<ue.left||Pe>ue.left+Ze||ot<ue.top||ot>ue.top+Ae||(R.fillStyle=rt,R.fillRect(Pe-1.5,ot-1.5,3,3))},mt=Kt.filter(Pe=>!(h&&(Pe.x<=0||Pe.y<=0)));mt.forEach(Pe=>{k[Pe.channel]&&Pe.channel!==Lt&&Pn(ut(Pe.x),Nt(Pe.y),Le[Pe.channel])}),mt.forEach(Pe=>{k[Pe.channel]&&Pe.channel===Lt&&Pn(ut(Pe.x),Nt(Pe.y),Le[Pe.channel])}),Z.forEach(Pe=>{const ot=ut(Pe.x),rt=Nt(Pe.y);if(ot<ue.left||ot>ue.left+Ze||rt<ue.top||rt>ue.top+Ae)return;R.strokeStyle="#d946ef",R.lineWidth=2.5;const nt=6;R.beginPath(),R.moveTo(ot-nt,rt-nt),R.lineTo(ot+nt,rt+nt),R.moveTo(ot+nt,rt-nt),R.lineTo(ot-nt,rt+nt),R.stroke()});const jr=(Pe,ot,rt=[])=>{if(Pe.length<2)return;R.beginPath(),R.strokeStyle=ot,R.lineWidth=3,R.setLineDash(rt);let nt=!1;for(const Xr of Pe){const On=ut(Xr.x),ta=Nt(Xr.y);if(On<ue.left-100||On>ue.left+Ze+100||ta<ue.top-100||ta>ue.top+Ae+100){nt=!1;continue}nt?R.lineTo(On,ta):(R.moveTo(On,ta),nt=!0)}R.stroke(),R.setLineDash([])},Cn=pe?"#ffffff":"#000000";if(jt.shot&&jr(Re.shot,"#94a3b8",[5,5]),jt.read&&jr(Re.read,"#f43f5e",[3,3]),jt.prnu&&jr(Re.prnu,"#f59e0b",[3,3]),jt.total&&jr(Re.total,Cn,[]),it.length===2){const Pe="#6366f1";jr(it,Pe,[4,2]);const ot=it[1],rt=Nt(ot.y);rt>=ue.top&&rt<=ue.top+Ae&&(R.fillStyle=Pe,R.font="bold 20px sans-serif",R.textAlign="right",R.textBaseline="bottom",R.fillText(`M.Tgt=${B}`,ue.left+Ze-10,rt-8))}if(Lr.length===2&&(me!=null&&me.ptpTarget)){const Pe="#10b981";jr(Lr,Pe,[4,4]);const ot=Lr[1],rt=Nt(ot.y);if(rt>=ue.top&&rt<=ue.top+Ae){R.fillStyle=Pe,R.font="bold 20px sans-serif",R.textAlign="right",R.textBaseline="bottom";const nt=me.ptpTarget.toFixed(1),Xr=it.length===2?Nt(it[1].y):-100,On=Math.abs(rt-Xr)<25?25:0;R.fillText(`PTP=${nt}`,ue.left+Ze-10,rt-8-On)}}if(jt.fitRange||q){const Pe=(ot,rt)=>{const nt=ut(ot);nt>=ue.left&&nt<=ue.left+Ze&&(R.beginPath(),R.strokeStyle=rt,R.lineWidth=2,R.setLineDash([8,8]),R.moveTo(nt,ue.top),R.lineTo(nt,ue.top+Ae),R.stroke(),R.setLineDash([]))};Pe(kr,"#22d3ee"),Pe(Sr,"#22d3ee")}if($){const Pe=ut($);Pe>=ue.left&&Pe<=ue.left+Ze&&(R.strokeStyle="#ef4444",R.lineWidth=3,R.setLineDash([10,10]),R.beginPath(),R.moveTo(Pe,ue.top),R.lineTo(Pe,ue.top+Ae),R.stroke(),R.setLineDash([]),R.fillStyle="#ef4444",R.font="bold 24px sans-serif",R.textAlign="center",R.fillText("Sat",Pe,ue.top-10))}R.fillStyle=De,R.font="28px monospace",R.textAlign="center",R.fillText(Bt.toExponential(1),ue.left,ue.top+Ae+40),R.fillText(wt.toExponential(1),ue.left+Ze,ue.top+Ae+40),R.fillText("Signal (DN)",ue.left+Ze/2,ue.top+Ae+80),R.textAlign="right",R.textBaseline="middle",R.fillText(Gt.toExponential(1),ue.left-20,ue.top+Ae),R.fillText(hr.toExponential(1),ue.left-20,ue.top),R.save(),R.translate(ue.left-80,ue.top+Ae/2),R.rotate(-Math.PI/2),R.textAlign="center",R.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),R.restore(),R.save(),R.translate(2048/2,1536/2),R.rotate(-Math.PI/6),R.textAlign="center",R.textBaseline="middle",R.fillStyle=pe?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",R.font="bold 150px sans-serif",R.fillText(" y-g-jiang.github.io",0,0),R.restore(),R.fillStyle=De,R.font="bold 36px sans-serif",R.textAlign="left",R.textBaseline="top",R.fillText(`PTC Export: ${f} Mode`,ue.left,20),R.font="24px sans-serif",R.fillStyle=pe?"#94a3b8":"#64748b",R.fillText(`Points: ${Kt.length} | Sat Channel: ${Lt}`,ue.left,65);const vi=ue.left+30,Is=ue.top+30,gp=70,Rs=Pe=>{if(!$||Pe<=0)return"--";const ot=bt.readNoise,rt=bt.gain,nt=bt.prnu/100;if(rt<=0)return"--";const Xr=Pe*Pe,On=ot*ot,ta=1-Xr*nt*nt,Qa=-(Xr/rt),qi=-(Xr*On);let Ja=0;if(Math.abs(ta)<1e-8)Math.abs(Qa)>1e-8&&(Ja=-qi/Qa);else{const lr=Qa*Qa-4*ta*qi;lr>=0&&(Ja=(-Qa+Math.sqrt(lr))/(2*ta))}return Ja>0?Math.log2($/Ja).toFixed(2)+" EV":"--"},mp=me!=null&&me.ptpTarget&&!isNaN(me.ptpTarget)?Rs(me.ptpTarget):"--",Bo=B?Rs(parseFloat(B)):"--";R.font="bold 48px monospace",R.textAlign="left",R.textBaseline="top",R.shadowColor=pe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",R.shadowBlur=4,R.shadowOffsetX=1,R.shadowOffsetY=1;const Fn=(Pe,ot,rt,nt)=>{const Xr=Is+rt*gp;R.fillStyle=De,R.fillText(Pe,vi,Xr);const On=R.measureText(Pe).width;R.fillStyle=nt||De,R.fillText(ot,vi+On,Xr)},yp=Rt.read,vp=parseFloat(Rt.gain).toFixed(3),xp=parseFloat(Rt.prnu).toFixed(2)+"%";let jf=`M.DR@SNR${B}: `;const yc=parseFloat(I);if(!isNaN(yc)&&yc>0){const Pe=(2309.4/yc).toFixed(2);Math.abs(parseFloat(B)-parseFloat(Pe))<.05&&(jf="8mpSNR=1 DR: ")}Fn("Tester: ",He||"N/A",0),Fn("Model : ",Ue||"Unknown",1),Fn("ISO   : ",St||"N/A",2),Fn("RN/FPN: ",yp,3,"#f43f5e"),Fn("KADC  : ",vp,4,"#06b6d4"),Fn("PRNU  : ",xp,5,"#f59e0b"),Fn("PTP DR: ",me!=null&&me.ptpDR?me.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),Fn("D55 DR: ",me!=null&&me.d55DR?me.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),Fn("FWC   : ",rr?rr>1e4?(rr/1e3).toFixed(1)+"k":Math.round(rr).toString():"--",8,"#f97316"),Fn(jf,me!=null&&me.manualDR?me.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),Fn("PTCFitDR(PTP): ",mp,10,"#10b981"),Fn("PTCFitDR(Man): ",Bo,11,"#06b6d4"),R.save(),R.textAlign="right",R.textBaseline="bottom",R.fillStyle="#3b82f6",R.font="bold 80px sans-serif",R.shadowColor=pe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",R.shadowBlur=4,R.shadowOffsetX=2,R.shadowOffsetY=2;const vc=1988,Pf=1476,bp=90;R.fillText("Online",vc,Pf),R.fillText("Jiangtherapee",vc,Pf-bp),R.restore();const Yi=document.createElement("a");Yi.download=`ptc_complete_${f}_${Date.now()}.jpg`,Yi.href=oe.toDataURL("image/jpeg",.9),Yi.click()},[Kt,Lt,k,P,A,O,D,ze,tt,Je,Ot,h,s,f,$,i,jt,Re,kr,Sr,ir,q,He,Ue,St,me,rr,B,it,Lr,Rt,I,Z]),rn=j.useMemo(()=>{let G=Kt;if(h&&(G=G.filter(pe=>pe.y>0&&pe.x>0)),w==="top3"){const pe=[...G].sort((De,et)=>et.x-De.x),Ne=Math.max(50,Math.ceil(pe.length*.03));G=pe.slice(0,Ne)}const X={R:[],G1:[],G2:[],B:[]};if(G.forEach(pe=>{X[pe.channel]&&X[pe.channel].push(pe)}),w==="raw")return X;const oe=w==="top3"?500:Pte,R=pe=>{if(pe.length<=oe)return pe;const Ne=[...pe].sort((Ye,Le)=>Ye.x-Le.x),De=[],et=Ne.length/oe;for(let Ye=0;Ye<oe;Ye++){const Le=Math.floor(Ye*et),Bt=Math.floor((Ye+1)*et),wt=Ne.slice(Le,Bt);if(wt.length===0)continue;wt.sort((hr,ue)=>hr.y-ue.y);const Gt=Math.floor(wt.length/2);De.push(wt[Gt])}return De};return{R:R(X.R),G1:R(X.G1),G2:R(X.G2),B:R(X.B)}},[Kt,w,h]),Sn=j.useMemo(()=>{if(tr.length<5)return[];const G=tr.filter(oe=>oe.channel===Lt);return[...G.length>20?G:tr].sort((oe,R)=>oe.x-R.x).map(oe=>({mean:oe.x,std:oe.std}))},[tr,Lt]),Hi=G=>{const X=G.length;if(X===0)return[];const oe=G.reduce((Ze,Ae)=>Ze+Ae,0)/X,R=G.reduce((Ze,Ae)=>Ze+Math.pow(Ae-oe,2),0)/(X-1||1),pe=Math.sqrt(R);if(pe===0)return[{x:oe-.001,density:0},{x:oe,density:1},{x:oe+.001,density:0}];const Ne=1.06*pe*Math.pow(X,-.2),De=Math.min(...G),et=Math.max(...G),Ye=(et-De)*.2||De*.1,Le=Math.max(0,De-Ye),Bt=et+Ye,wt=100,Gt=(Bt-Le)/(wt-1),hr=Ze=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*Ze*Ze),ue=[];for(let Ze=0;Ze<wt;Ze++){const Ae=Le+Ze*Gt;let ut=0;for(let Nt=0;Nt<X;Nt++)ut+=hr((Ae-G[Nt])/Ne);ut/=X*Ne,ue.push({x:Ae,density:ut})}return ue},Xi=j.useCallback((G,X,oe,R)=>{if(G.length<5)return{gain:0,prnu:0};const pe=G[G.length-1].mean,Ne=pe*(oe.min/100),De=pe*(oe.max/100),et=G.filter(mt=>mt.mean>=Ne&&mt.mean<=De);if(et.length<5)return{gain:0,prnu:0};Ut({nPoints:et.length});const Ye=X*X,Le=[],Bt=[];if(et.forEach(mt=>{const Cn=mt.std*mt.std-Ye;if(mt.mean>1&&Cn>0){const vi=mt.mean,Is=Cn/mt.mean;Le.push({x:vi,y:Is}),Bt.push(mt.mean/Cn)}}),Le.length<5)return{gain:0,prnu:0};const wt=[],Gt=Le.length,hr=R,ue=Gt*(Gt-1)/2;if(ue<=hr)for(let mt=0;mt<Gt;mt++)for(let jr=mt+1;jr<Gt;jr++){const Cn=Le[jr].x-Le[mt].x;Math.abs(Cn)>1e-5&&wt.push((Le[jr].y-Le[mt].y)/Cn)}else{const mt=Math.max(1,Math.floor(ue/hr));for(let jr=0;jr<Gt;jr++)for(let Cn=jr+1;Cn<Gt;Cn+=mt){const vi=Le[Cn].x-Le[jr].x;Math.abs(vi)>1e-5&&wt.push((Le[Cn].y-Le[jr].y)/vi)}}const Ze=Eg(wt),Ae=Le.map(mt=>mt.y-Ze*mt.x),ut=Eg(Ae);let Nt=0,Pn=0;if(ut>1e-6?Nt=1/ut:Nt=Eg(Bt),Ze>0&&(Pn=Math.sqrt(Ze)*100),Bt.length>0){const mt=Hi(Bt);xr(mt),kn(Nt)}else xr([]);return{gain:Nt,prnu:Pn}},[]),Ea=j.useCallback(G=>{let X=G.read??or.current.readNoise;const oe=G.gRange??sr.current,R=tn.current;if((G.read!==void 0||G.gRange!==void 0)&&G.gain===void 0&&G.prnu===void 0&&Sn.length>0&&X>=0)b(!0),setTimeout(()=>{const Ne=Xi(Sn,X,oe,R);let De=or.current.gain,et=or.current.prnu;Ne.gain>0&&(De=Ne.gain,et=Ne.prnu),We({readNoise:X,gain:De,prnu:et}),G.gRange!==void 0&&Mr(G.gRange),xn(Ye=>{var Le,Bt;return{...Ye,read:X.toString(),gain:De>0?De.toFixed(3):"0",prnu:et.toFixed(2),rangeMin:(((Le=G.gRange)==null?void 0:Le.min)??Ye.rangeMin).toString(),rangeMax:(((Bt=G.gRange)==null?void 0:Bt.max)??Ye.rangeMax).toString()}}),b(!1)},50);else{let Ne=G.gain!==void 0?G.gain:or.current.gain,De=G.prnu!==void 0?G.prnu:or.current.prnu;We({readNoise:X,gain:Ne,prnu:De}),G.gRange!==void 0&&Mr(G.gRange),xn(et=>{var Ye,Le;return{...et,read:X.toString(),gain:Ne>0?Ne.toFixed(3):"0",prnu:De.toFixed(2),rangeMin:(((Ye=G.gRange)==null?void 0:Ye.min)??et.rangeMin).toString(),rangeMax:(((Le=G.gRange)==null?void 0:Le.max)??et.rangeMax).toString()}})}},[Sn,Xi]),$a=`${V}-${r.length}`;j.useEffect(()=>{if(!e||!r||r.length===0)return;const G=rn[Lt];if(!G||G.length===0||un===$a)return;C({R:Lt==="R",G1:Lt==="G1",G2:Lt==="G2",B:Lt==="B"});const X=[...G].sort((Ne,De)=>Ne.x-De.x);let oe=0;X.length>0&&(oe=X[0].std);const R=tr.filter(Ne=>Ne.channel===Lt);let pe=-1/0;for(const Ne of R)Ne.x>pe&&(pe=Ne.x);pe!==-1/0&&ae(pe),Ea({read:oe}),wr($a)},[e,r,un,$a,rn,Lt,Ea,tr]);const yi=(G,X)=>{xn(oe=>({...oe,[G]:X}))},jn=G=>{let X=parseFloat(Rt[G]);isNaN(X)||X<0||Ea({[G]:X})},Y=()=>{F(U),wr("")},ye=()=>{const G=parseFloat(Rt.rangeMin),X=parseFloat(Rt.rangeMax);!isNaN(G)&&!isNaN(X)&&G<X&&G>=0&&X<=100&&Ea({gRange:{min:G,max:X}})},ft=(G,X)=>{G.key==="Enter"&&(X==="rangeMin"||X==="rangeMax"?ye():jn(X),G.target.blur())};j.useEffect(()=>{e&&Sn.length>0&&Ea({})},[e,gt,Sn]);const $t=G=>{C(X=>({...X,[G]:!X[G]}))},Ln=()=>{x(G=>G==="top3"?"default":"top3")},Ar=()=>{w==="raw"?x("default"):v(!0)},Jn=()=>{v(!1),x("raw")},ha=(G,X)=>{const oe=parseFloat(G),R=parseFloat(X);let pe=isNaN(oe)?"auto":oe,Ne=isNaN(R)?"auto":R;return h&&typeof pe=="number"&&pe<=0&&(pe="auto"),[pe,Ne]},Da=G=>{if(!G||!G.payload)return;const X=G.payload;if(y(X),ct.current&&(ae(X.x),ee(!1)),er.current){const oe=sr.current.min,R=sr.current.max,{max:pe}=se();if(pe<=0)return;const Ne=Math.max(0,Math.min(100,X.x/pe*100));if(Ge.current===1){const De=Math.min(Ne,R-.5);Ea({gRange:{min:De,max:R}}),ce(2)}else if(Ge.current===2){const De=Math.max(Ne,oe+.5);Ea({gRange:{min:oe,max:De}}),ce(0),H(!1)}}},pa=j.useCallback(G=>{const{cx:X,cy:oe,fill:R}=G;return c.jsx("circle",{cx:X,cy:oe,r:3,fill:R,stroke:"none",style:{cursor:"pointer"}})},[]),ea=({active:G,payload:X})=>{if(G&&X&&X.length){const oe=X[0].payload;return c.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[c.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:oe.channel}),c.jsxs("div",{children:["Signal: ",oe.x.toFixed(2)]}),c.jsxs("div",{children:[f,": ",oe.y.toFixed(4)]}),oe.row!==void 0&&oe.col!==void 0&&!isNaN(oe.row)&&!isNaN(oe.col)&&c.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",oe.row,", Col ",oe.col]}),oe.filename&&c.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:oe.filename,children:oe.filename})]})}return null},ga=G=>{d(G),G==="Linear"&&p(!1)};if(!e)return null;const Bn=s==="dark"?"#ffffff":"#000000";let Ki=f;f==="Linear"&&(Ki="(Var - RN) / Mean");const Dt=U!==V;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:G=>{G.stopPropagation()},children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:G=>G.stopPropagation(),children:[c.jsx(Mi,{isOpen:g,onClose:()=>v(!1),onConfirm:Jn,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),m&&c.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),c.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),c.jsx("span",{className:"font-bold",children:m.channel}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),c.jsx("span",{children:m.x.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),c.jsx("span",{children:m.std.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),c.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(m.x/m.std).toFixed(2)})]})})]}),Rn&&c.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[c.jsx("button",{onClick:()=>wn(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"mb-4 text-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:br==null?void 0:br.toFixed(4)}),c.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",dr.length>0?"Density Curve Generated":"No Data"]})]}),c.jsx("div",{className:"flex-1 min-h-0",children:dr.length>0?c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(HC,{data:dr,margin:{top:10,right:30,left:0,bottom:20},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),c.jsx(Yn,{dataKey:"x",tickFormatter:G=>G.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),c.jsx(qn,{tick:{fill:"#9ca3af",fontSize:10}}),c.jsx(Zr,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),c.jsx(ja,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),br!==null&&c.jsx(uo,{x:br,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",c.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("button",{onClick:Ta,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),c.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>ga("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),c.jsx("button",{onClick:()=>ga("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),c.jsx("button",{onClick:()=>ga("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:G=>p(G.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[c.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),c.jsx("input",{type:"number",placeholder:"Min",value:P,onChange:G=>N(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:A,onChange:G=>T(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),c.jsx("input",{type:"number",placeholder:"Min",value:O,onChange:G=>M(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:D,onChange:G=>E(G.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsx("button",{onClick:()=>{N(""),T(""),M(""),E("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>$t("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),c.jsx("button",{onClick:()=>$t("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),c.jsx("button",{onClick:()=>$t("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),c.jsx("button",{onClick:()=>$t("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),c.jsx("input",{type:"text",value:U,onChange:G=>ne(G.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),c.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),c.jsx("button",{onClick:()=>{H(!q),ce(q?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${q?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:q?le===1?"Pick Min":"Pick Max":"Select"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx("input",{type:"number",step:"0.1",value:Rt.rangeMin,onChange:G=>yi("rangeMin",G.target.value),onBlur:ye,onKeyDown:G=>ft(G,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.1",value:Rt.rangeMax,onChange:G=>yi("rangeMax",G.target.value),onBlur:ye,onKeyDown:G=>ft(G,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),c.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),c.jsx("input",{type:"number",value:I,onChange:G=>z(G.target.value),onKeyDown:da,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),c.jsx("input",{type:"number",value:B,onChange:G=>_(G.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[c.jsx("button",{onClick:()=>{ee(!re),$&&ae(null)},disabled:q,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${re?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:re?"Pick Point":"Select Linear Limit"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Ln,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),c.jsx("button",{onClick:Ar,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:He,onChange:G=>Ee(G.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:Ue,onChange:G=>lt(G.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:St,onChange:G=>_r(G.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",value:we,onChange:G=>Q(G.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("input",{type:"number",value:he,onChange:G=>ve(G.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("button",{onClick:qe,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),Z.length>0&&c.jsx("button",{onClick:()=>Ce([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[Z.length," pts"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:jt.shot,onChange:G=>bn({...jt,shot:G.target.checked}),className:"rounded text-gray-500"})," ",c.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:jt.read,onChange:G=>bn({...jt,read:G.target.checked}),className:"rounded text-rose-500"})," ",c.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:jt.prnu,onChange:G=>bn({...jt,prnu:G.target.checked}),className:"rounded text-amber-500"})," ",c.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:jt.total,onChange:G=>bn({...jt,total:G.target.checked}),className:"rounded text-white"})," ",c.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),c.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",Lt,")",S&&c.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:Y,disabled:S,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${S?"bg-gray-400 cursor-wait":Dt?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:S?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),c.jsxs("select",{value:gt,onChange:G=>Ct(Number(G.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[c.jsx("option",{value:1e5,children:"100k Pairs"}),c.jsx("option",{value:5e5,children:"500k Pairs"}),c.jsx("option",{value:2e6,children:"2M Pairs"}),c.jsx("option",{value:5e6,children:"5M Pairs"}),c.jsx("option",{value:1e7,children:"10M Pairs"})]}),Xt&&c.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",Xt.nPoints]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),c.jsx("input",{type:"text",inputMode:"decimal",value:Rt.read,onChange:G=>yi("read",G.target.value),onBlur:()=>jn("read"),onKeyDown:G=>ft(G,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center relative group",children:[c.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",c.jsx("button",{onClick:()=>wn(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),c.jsx("input",{type:"text",inputMode:"decimal",value:Rt.gain,onChange:G=>yi("gain",G.target.value),onBlur:()=>jn("gain"),onKeyDown:G=>ft(G,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),c.jsx("input",{type:"text",inputMode:"decimal",value:Rt.prnu,onChange:G=>yi("prnu",G.target.value),onBlur:()=>jn("prnu"),onKeyDown:G=>ft(G,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[c.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(me==null?void 0:me.manualTarget)||B}`,children:["M.DR @ SNR=",(me==null?void 0:me.manualTarget)||B]}),c.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:me!=null&&me.manualDR?`${me.manualDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((me==null?void 0:me.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${I||"H"})`,children:[c.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),c.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:me!=null&&me.ptpDR?`${me.ptpDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((me==null?void 0:me.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${I||"H"} on ${me==null?void 0:me.dominantChannel} Channel)`,children:[c.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",me==null?void 0:me.dominantChannel,")"]}),c.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:me!=null&&me.d55DR?`${me.d55DR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),c.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:rr!==null?`${Math.round(rr)}`:"",children:rr!==null?rr>1e4?`${(rr/1e3).toFixed(1)}k`:`${Math.round(rr)}`:"--"})]})]}),$===null&&c.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),c.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${re||q?"cursor-crosshair":""}`,children:[c.jsx("div",{className:"row-start-1 col-start-1 h-full",children:c.jsx(YS,{vertical:!0,min:Je,max:Ot,value:[O?parseFloat(O):Je,D?parseFloat(D):Ot],onChange:([G,X])=>{M(G.toString()),E(X.toString())},logScale:h})}),c.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[Kt.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(Nee,{margin:{top:20,right:20,bottom:0,left:0},onClick:Da,children:[c.jsx("defs",{children:c.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[c.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),c.jsx(Yn,{type:"number",dataKey:"x",name:"Signal",scale:h?"log":"linear",domain:ha(P,A),allowDataOverflow:!0,hide:!0}),c.jsx(qn,{type:"number",dataKey:"y",name:f,scale:h?"log":"linear",domain:ha(O,D),label:{value:Ki,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),c.jsx(Zr,{content:c.jsx(ea,{}),cursor:{strokeDasharray:"3 3"}}),$&&c.jsx(uo,{x:$,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(jt.fitRange||q)&&c.jsxs(c.Fragment,{children:[c.jsx(uo,{x:kr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${ir.min}%`,fill:"#22d3ee",fontSize:9}}),c.jsx(uo,{x:Sr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${ir.max}%`,fill:"#22d3ee",fontSize:9}})]}),k.R&&c.jsx(An,{name:"Red",data:rn.R,fill:"#ef4444",shape:pa,onClick:Da,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),k.G1&&c.jsx(An,{name:"Green 1",data:rn.G1,fill:"#22c55e",shape:pa,onClick:Da,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),k.G2&&c.jsx(An,{name:"Green 2",data:rn.G2,fill:"#4ade80",shape:pa,onClick:Da,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),k.B&&c.jsx(An,{name:"Blue",data:rn.B,fill:"#3b82f6",shape:pa,onClick:Da,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),jt.shot&&Re.shot.length>0&&c.jsx(An,{name:"Shot Noise (Ideal)",data:Re.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),jt.read&&Re.read.length>0&&c.jsx(An,{name:"Read Noise Floor",data:Re.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),jt.prnu&&Re.prnu.length>0&&c.jsx(An,{name:"PRNU (Non-uniformity)",data:Re.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),jt.total&&Re.total.length>0&&c.jsx(An,{name:"Total Noise Model",data:Re.total,line:{stroke:Bn,strokeWidth:2},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),it.length>0&&c.jsx(An,{name:`Target SNR=${B}`,data:it,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),Lr.length>0&&c.jsx(An,{name:`PTP Target SNR=${me!=null&&me.ptpTarget?me.ptpTarget.toFixed(1):"?"}`,data:Lr,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),Z.length>0&&c.jsx(An,{name:"Manual Markers",data:Z,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),c.jsx("div",{className:"row-start-2 col-start-2 w-full",children:c.jsx(YS,{min:ze,max:tt,value:[P?parseFloat(P):ze,A?parseFloat(A):tt],onChange:([G,X])=>{N(G.toString()),T(X.toString())},logScale:h})})]})]})})},Ote=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>c.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"relative md:col-span-3",children:[c.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>c.jsx("option",{value:s,children:s},s))}),c.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[c.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>c.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),Nte=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return c.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[c.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),c.jsx("div",{className:"mt-2 space-y-1 text-sm",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),c.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),c.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),c.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},_te=({data:e,theme:t="dark"})=>{const r=j.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=j.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(m=>[...m.R_range,...m.G1_range,...m.G2_range,...m.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),l=Math.max(...o);const u=.25,f=l-s;if(f<u){const m=u-f;s-=m/2,l+=m/2}const d=(l-s)*.1,h=s-d,p=l+d;return[h,p]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:c.jsx("p",{children:"No data available for this mode."})}):c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(HC,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:a}),c.jsx(Yn,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),c.jsx(qn,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),c.jsx(Zr,{content:c.jsx(Nte,{theme:t})}),c.jsx(si,{wrapperStyle:{fontSize:"14px",color:i}}),c.jsx(ja,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),c.jsx(Dr,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),c.jsx(ja,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),c.jsx(Dr,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),c.jsx(ja,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),c.jsx(Dr,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),c.jsx(ja,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),c.jsx(Dr,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},Mte=L.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=j.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=j.useState(n[0]||""),{chartData:o,tableData:s}=j.useMemo(()=>{const d=e.shootingModes.find(m=>m.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const h=d.data.map(m=>({iso:m.iso,R_range:m.r.range,R_avg:m.r.avg,G1_range:m.g1.range,G1_avg:m.g1.avg,B_range:m.b.range,B_avg:m.b.avg,G2_range:m.g2.range,G2_avg:m.g2.avg})),p=d.data.map(m=>({iso:m.iso,levels:[m.r.avg,m.g1.avg,m.g2.avg,m.b.avg],clipping:m.clipping}));return{chartData:h,tableData:p}},[e.shootingModes,a]),l=`Raw Data (${a})`,u=j.useRef(null),f=j.useRef(null);return j.useEffect(()=>{const d=u.current,h=f.current;if(!d||!h)return;const p=new ResizeObserver(m=>{for(let y of m){const{width:w}=y.contentRect,g=Math.max(8,w/35);h.style.fontSize=`${g}px`}});return p.observe(d),()=>p.disconnect()},[]),c.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),c.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),c.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>c.jsx("option",{value:d,children:d},d))})]}),c.jsxs("div",{ref:u,className:"h-64 relative",children:[c.jsx(_te,{data:o,theme:t},a),c.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:c.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:l})}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),c.jsx("tbody",{children:s.map(({iso:d,levels:h,clipping:p})=>c.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[c.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,p&&c.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),c.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:h[0].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:h[1].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:h[3].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:h[2].toFixed(2)})]},d))})]})]})]})}),xe=(e,t,r)=>({avg:e,range:[t,r]}),$g=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:xe(512.1,511.95,512.25),g1:xe(512.05,511.9,512.2),b:xe(512.12,511.98,512.28),g2:xe(512.06,511.92,512.22)},{iso:200,r:xe(512.15,512,512.3),g1:xe(512.1,511.95,512.25),b:xe(512.18,512.05,512.35),g2:xe(512.12,511.98,512.28)},{iso:400,r:xe(512.25,512.1,512.45),g1:xe(512.2,512.05,512.4),b:xe(512.3,512.15,512.5),g2:xe(512.22,512.08,512.42)},{iso:800,r:xe(512.5,512.2,512.8),g1:xe(512.45,512.15,512.75),b:xe(512.55,512.25,512.85),g2:xe(512.48,512.18,512.78)},{iso:1600,r:xe(513.1,512.8,513.4),g1:xe(513.05,512.75,513.35),b:xe(513.15,512.85,513.45),g2:xe(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:xe(512.02,511.98,512.05),g1:xe(512.01,511.97,512.04),b:xe(512.03,511.99,512.06),g2:xe(512.01,511.97,512.04)},{iso:640,r:xe(512.15,512.05,512.25),g1:xe(512.12,512.02,512.22),b:xe(512.18,512.08,512.28),g2:xe(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:xe(512,511.8,512.2),g1:xe(512,511.8,512.2),b:xe(512,511.8,512.2),g2:xe(512,511.8,512.2)},{iso:400,r:xe(512,511.7,512.3),g1:xe(512,511.7,512.3),b:xe(512,511.7,512.3),g2:xe(512,511.7,512.3)},{iso:1600,r:xe(512.2,511.5,512.8),g1:xe(512.2,511.5,512.8),b:xe(512.2,511.5,512.8),g2:xe(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:xe(511.95,511.8,512.1),g1:xe(511.95,511.8,512.1),b:xe(511.95,511.8,512.1),g2:xe(511.95,511.8,512.1)},{iso:800,r:xe(512.1,511.9,512.3),g1:xe(512.1,511.9,512.3),b:xe(512.1,511.9,512.3),g2:xe(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:xe(400,399.9,400.1),g1:xe(400,399.9,400.1),b:xe(400,399.9,400.1),g2:xe(400,399.9,400.1)},{iso:100,r:xe(400,399.9,400.1),g1:xe(400,399.9,400.1),b:xe(400,399.9,400.1),g2:xe(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:xe(400.1,399.8,400.3),g1:xe(400.1,399.8,400.3),b:xe(400.1,399.8,400.3),g2:xe(400.1,399.8,400.3)},{iso:800,r:xe(400.3,399.5,401.1),g1:xe(400.3,399.5,401.1),b:xe(400.3,399.5,401.1),g2:xe(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:xe(1024,1023.8,1024.2),g1:xe(1024,1023.8,1024.2),b:xe(1024,1023.8,1024.2),g2:xe(1024,1023.8,1024.2)},{iso:800,r:xe(1024.2,1023.5,1025),g1:xe(1024.2,1023.5,1025),b:xe(1024.2,1023.5,1025),g2:xe(1024.2,1023.5,1025)}]}]}],Ate=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=j.useState(""),[i,o]=j.useState("All"),s=j.useMemo(()=>["All",...Array.from(new Set($g.map(d=>d.manufacturer))).sort()],[]),l=j.useMemo(()=>$g.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),h=i==="All"||f.manufacturer===i;return d&&h}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",c.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[$g.length," Models"]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:c.jsx(Ote,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:l,onCameraSelect:u})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[l.map(f=>c.jsx("div",{id:`camera-${f.id}`,children:c.jsx(Mte,{camera:f,theme:r})},f.id)),l.length===0&&c.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:c.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Tte=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=j.useState(""),[i,o]=j.useState(""),[s,l]=j.useState(""),[u,f]=j.useState(""),[d,h]=j.useState(null),p=()=>{const m=parseFloat(n),y=parseFloat(i),w=parseFloat(s),x=parseFloat(u);if(isNaN(m)||isNaN(y)||isNaN(w)||isNaN(x)){h(null);return}const g=m,v=y,S=w*w,b=x*x,k=(g+v)/2;if(k<=1e-9){h(0);return}const C=S*b/k,P=Math.sqrt(C);h(P)};return e?c.jsxs(mc,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:n,onChange:m=>a(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:i,onChange:m=>o(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:s,onChange:m=>l(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:u,onChange:m=>f(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsx("button",{onClick:p,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&c.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[c.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),c.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},uv=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],Ete=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function $te(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),h=Math.hypot(n.x-r.x,n.y-r.y),p=Math.hypot(r.x-e.x,r.y-e.y),m=Math.hypot(n.x-t.x,n.y-t.y),y=(d+h)/2/5,w=(p+m)/2/3,x=y*f,g=w*f;for(let v=0;v<4;v++)for(let S=0;S<6;S++){const b=S/5,k=v/3,C=(1-b)*(1-k)*e.x+b*(1-k)*t.x+(1-b)*k*r.x+b*k*n.x,P=(1-b)*(1-k)*e.y+b*(1-k)*t.y+(1-b)*k*r.y+b*k*n.y;u.push({x:C-x/2,y:P-g/2,w:x,h:g})}return u}function cO(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function jd(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let l=0;l<i;l++)for(let u=0;u<n;u++)o[s][l]+=e[s][u]*t[u][l];return o}function Dte(e,t){const r=cO(e),n=jd(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=XC(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=jd(r,t);return jd(o,s)}function Ite(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const l=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=l*r[n][u]}}return r.map(n=>n.slice(t))}function Rte(e,t,r){const n=[...e].sort((y,w)=>y.id-w.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(y=>{const w=y.rawMeans,x=[w[0]-t[0],w[1]-t[1],w[2]-t[2],w[3]-t[3]];let g,v,S;r?(S=x[0],v=(x[1]+x[2])/2,g=x[3]):(g=x[0],v=(x[1]+x[2])/2,S=x[3]),g=Math.max(0,g),v=Math.max(0,v),S=Math.max(0,S),a.push([g,v,S])});const o=a[18],s=(o[0]+o[1]+o[2])/3,l=1/Math.max(1e-9,s),u=a.map(y=>[y[0]*l,y[1]*l,y[2]*l]),d=Dte(u,uv),h=cO(d);let p;try{p=Ite(h)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:jd(p,Ete)}}const Lte=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,l]=j.useState(n),[u,f]=j.useState(["0","0","0","0"]),[d,h]=j.useState(null),[p,m]=j.useState(null);if(j.useEffect(()=>{if(e&&r&&r.length===24){const k=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([k[0].toFixed(2),k[1].toFixed(2),k[2].toFixed(2),k[3].toFixed(2)])}},[e,r]),j.useEffect(()=>{if(!e||!r||r.length!==24)return;const b=u.map(k=>parseFloat(k));if(!b.some(isNaN))try{const k=Rte(r,b,s);h(k),m(null)}catch(k){m(k.message)}},[e,r,s,u]),!e)return null;const y=(b,k)=>{f(C=>{const P=[...C];return P[b]=k,P})},w=b=>{navigator.clipboard.writeText(b)},x=b=>b?b.map(k=>k.map(C=>C.toFixed(4))):[],g=d?x(d.matrix).flat().join(" "):"",v=s?["B","G1","G2","R"]:["R","G1","G2","B"],S=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return c.jsxs(mc,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),c.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:b=>o(parseFloat(b.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>l(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),c.jsx("button",{onClick:()=>l(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(b=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:`text-[10px] font-bold mb-1 ${S[b]}`,children:v[b]}),c.jsx("input",{type:"number",step:"0.01",value:u[b],onChange:k=>y(b,k.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},b))})]}),p?c.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:p}):d?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),c.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:x(d.matrix).map((b,k)=>c.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[c.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:b[0]}),c.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:b[1]}),c.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:b[2]})]},k))}),c.jsx("button",{onClick:()=>w(g),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):c.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function Bte(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let l=0;l<r;l++)n+=e[l],a+=t[l],i+=e[l]*t[l],o+=e[l]*e[l];const s=r*o-n*n;return{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function Fte(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function qS(e,t,r,n){const a=Math.floor(n.x),i=Math.floor(n.y),o=Math.floor(n.w),s=Math.floor(n.h);if(o<8||s<8)return null;let l=[];for(let V=0;V<s;V++){const F=[],re=(i+V)*t;for(let ee=0;ee<o;ee++)F.push(e[re+a+ee]);l.push(F)}let u=0,f=0;for(let V=1;V<s-1;V+=2)for(let F=1;F<o-1;F+=2)u+=Math.abs(l[V][F+1]-l[V][F-1]),f+=Math.abs(l[V+1][F]-l[V-1][F]);let d=o,h=s,p=l;if(f>u){p=Array(o).fill(0).map(()=>Array(s).fill(0));for(let V=0;V<s;V++)for(let F=0;F<o;F++)p[F][s-1-V]=l[V][F];d=s,h=o}const m=[],y=[];for(let V=0;V<h;V++){const F=p[V],re=F.map((ae,q)=>q===0?0:Math.abs(ae-F[q-1])),ee=Math.max(...re),$=re.indexOf(ee);if(ee>1){const ae=Math.max(0,$-3),q=Math.min(d,$+4);let H=0,le=0;for(let ce=ae;ce<q;ce++)H+=re[ce],le+=ce*re[ce];H>0&&(m.push(le/H),y.push(V))}}if(m.length<h*.4)return null;const{slope:w,intercept:x}=Bte(y,m),g=Math.cos(Math.atan(w)),v=[],S=[];for(let V=0;V<h;V++){const F=w*V+x;for(let re=0;re<d;re++)v.push((re-F)*g),S.push(p[V][re])}const k=Math.min(o,s)/2;let C=0;for(const V of v)Math.abs(V)<=k&&C++;let P=.125;if(C>0){const V=40*k/C;P=Math.max(.01,Math.min(.125,V))}const N=P,A=Array.from(v.keys()).sort((V,F)=>v[V]-v[F]),T=A.map(V=>v[V]),O=A.map(V=>S[V]),M=T[0],D=T[T.length-1],E=Math.floor((D-M)/N),B=new Array(E).fill(0),_=new Array(E).fill(0);for(let V=0;V<T.length;V++){const F=Math.floor((T[V]-M)/N);F>=0&&F<E&&(B[F]+=O[V],_[F]++)}let I=O[0];for(let V=0;V<E;V++)_[V]>0?(B[V]/=_[V],I=B[V]):B[V]=I;const z=B.slice(0,10).reduce((V,F)=>V+F,0)/10,U=B.slice(-10).reduce((V,F)=>V+F,0)/10;if(z>U){const V=Math.max(...B),F=Math.min(...B);for(let re=0;re<B.length;re++)B[re]=V-B[re]+F}const ne=Fte(B,N);return{esf:B,lsfFull:ne,binSize:N}}function zte(e,t,r){if(e.length===0)return null;const n=4096,a=new Ss(n),i=r?1e3/r:1,o=new Float32Array(501);for(let m=0;m<=500;m++)o[m]=m/500*i;const s=new Float32Array(501).fill(0);let l=0,u=[],f=[],d=0;for(const m of e){const y=m.lsfFull,w=m.binSize;let x=0,g=-1/0;for(let O=0;O<y.length;O++)y[O]>g&&(g=y[O],x=O);let v=0,S=0;if(t>0)S=t,v=Math.round(t/w);else{const O=g*.2;let M=0;for(let I=x;I>=0;I--)if(y[I]<O){M=I;break}let D=y.length-1;for(let I=x;I<y.length;I++)if(y[I]<O){D=I;break}let _=(D-M)*w*8;_=Math.max(2,_),S=_,v=Math.round(_/w)}d+=S;const b=Math.max(0,x-v),k=Math.min(y.length,x+v),C=y.slice(b,k);if(C.length<8)continue;u.length===0&&(u=C,f=m.esf);const P=new Float32Array(n).fill(0);for(let O=0;O<C.length;O++){const M=.54-.46*Math.cos(2*Math.PI*O/(C.length-1));P[O]=C[O]*M}a.transform(P);const N=[],A=[];for(let O=0;O<=n/2;O++){const M=Math.sqrt(a._real[O]**2+a._imag[O]**2);N.push(M),A.push(O/(n*w)*i)}const T=N[0];if(T>0){for(let O=0;O<=500;O++){const M=o[O];s[O]+=Ute(M,A,N)/T}l++}}if(l===0)return null;const h=Array.from(s).map(m=>m/l);let p=null;for(let m=0;m<h.length-1;m++)if(h[m]>=.5&&h[m+1]<.5){p=o[m]+(.5-h[m])*(o[m+1]-o[m])/(h[m+1]-h[m]);break}return{esf:f,lsf:[],lsfCropped:u,mtf:h,freqs:Array.from(o),mtf50:p,calcRadius:d/l}}function Ute(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const Gte=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o})=>{const[s,l]=j.useState([]),[u,f]=j.useState(""),[d,h]=j.useState(""),[p,m]=j.useState(12),[y,w]=j.useState(!1),[x,g]=j.useState(1),[v,S]=j.useState(null),[b,k]=j.useState({x:100,y:50}),[C,P]=j.useState({w:1e3,h:800}),[N,A]=j.useState(!1),[T,O]=j.useState(!1),M=j.useRef({x:0,y:0}),D=j.useRef({w:0,h:0});j.useEffect(()=>{if(e&&n&&!y){const q=Math.max(n.w,n.h);m(q)}},[e,n,y]);const E=s.length>0?s[s.length-1].binSize:null,B=E?(1/E).toFixed(1):"-",_=j.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),I=()=>{if(!(!r||!n))try{let q;if((o==null?void 0:o.renderMode)==="advanced-zero-dep"&&o.advancedZeroDep){const H=lO(r,n,o);q=qS(H.data,H.width,H.height,{x:0,y:0,w:H.width,h:H.height})}else q=qS(r.data,r.width,r.height,n);q?l(H=>[...H,q]):alert("Could not detect valid edge.")}catch(q){console.error(q),alert("Error processing ROI")}},z=()=>{l([]),S(null),g(1)},U=()=>{if(!v)return;const q=parseFloat(u),ce=`data:text/csv;charset=utf-8,Frequency (${!isNaN(q)&&q>0?"lp/mm":"cy/px"}),MTF
`+v.freqs.map((we,Q)=>`${we.toFixed(6)},${v.mtf[Q].toFixed(6)}`).join(`
`),Z=encodeURI(ce),Ce=document.createElement("a");Ce.setAttribute("href",Z),Ce.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(Ce),Ce.click(),document.body.removeChild(Ce)};j.useEffect(()=>{if(s.length===0){S(null);return}const q=parseFloat(u),H=!isNaN(q)&&q>0?q:null,ce=zte(s,y?-1:p,H);S(ce)},[s,p,y,u]),j.useEffect(()=>{e&&s.length===0&&n&&r&&I()},[e]);const ne=q=>{i&&i(),!(q.target.closest("button")||q.target.closest("input"))&&(A(!0),M.current={x:q.clientX-b.x,y:q.clientY-b.y})},V=q=>{q.stopPropagation(),q.preventDefault(),O(!0),M.current={x:q.clientX,y:q.clientY},D.current={w:C.w,h:C.h}};j.useEffect(()=>{const q=le=>{if(N)k({x:le.clientX-M.current.x,y:le.clientY-M.current.y});else if(T){const ce=le.clientX-M.current.x,Z=le.clientY-M.current.y;P({w:Math.max(600,D.current.w+ce),h:Math.max(500,D.current.h+Z)})}},H=()=>{A(!1),O(!1)};return(N||T)&&(window.addEventListener("mousemove",q),window.addEventListener("mouseup",H)),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",H)}},[N,T]);const F=j.useMemo(()=>{if(!(v!=null&&v.mtf50)||!d)return null;const q=parseFloat(d);if(isNaN(q)||q<=0)return null;let H=v.mtf50;const le=parseFloat(u);return!isNaN(le)&&le>0&&(H=v.mtf50*(le/1e3)),H*2*q},[v,d,u]);if(!e)return null;const re=v?v.lsfCropped.map((q,H)=>({x:H,y:q})):[],ee=v?v.esf.map((q,H)=>({x:H,y:q})):[],$=v?v.mtf.map((q,H)=>({freq:v.freqs[H],mtf:q})).filter(q=>q.freq<=(parseFloat(u)?200:1)):[],ae=u?"lp/mm":"cy/px";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden",style:{left:b.x,top:b.y,width:C.w,height:C.h,zIndex:a??100},onMouseDownCapture:i,children:[c.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${N?"cursor-grabbing":"cursor-grab"}`,onMouseDown:ne,children:[c.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[s.length," ROI",s.length!==1?"s":""]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),c.jsx("input",{type:"number",value:u,onChange:q=>f(q.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),c.jsx("input",{type:"number",value:d,onChange:q=>h(q.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",title:"Auto-calculated based on ROI size",children:[c.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),E?c.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[E.toFixed(3),"px",c.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",B,"x)"]})]}):c.jsx("span",{className:"text-gray-400 italic",children:"..."})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[240px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:y,onChange:q=>{const H=q.target.checked;w(H),H||m(_)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's Official NR"})]}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:y?"Calculated:":"Manual:"}),c.jsxs("span",{className:`font-mono font-bold ${y?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[y&&(v!=null&&v.calcRadius)?v.calcRadius.toFixed(2):p.toFixed(1)," px"]})]}),c.jsx("input",{type:"range",min:"2",max:_,step:"0.5",value:p,onChange:q=>{const H=parseFloat(q.target.value);m(H),w(!1)},disabled:y,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${y?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:I,className:"px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Add Current ROI"}),c.jsx("button",{onClick:U,disabled:!v,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),c.jsx("button",{onClick:z,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[c.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(pl,{data:ee,children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Yn,{dataKey:"x",hide:!0})," ",c.jsx(qn,{hide:!0,domain:["auto","auto"]})," ",c.jsx(Zr,{contentStyle:{fontSize:"10px"}}),c.jsx(Dr,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",x>1?`(x${x.toFixed(0)})`:""]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),c.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:x,onChange:q=>g(parseFloat(q.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(pl,{data:re,children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(uo,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),c.jsx(Yn,{dataKey:"x",hide:!0}),c.jsx(qn,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[q=>q,q=>q/x],allowDataOverflow:!0,tickFormatter:q=>q.toFixed(3)}),c.jsx(Zr,{contentStyle:{fontSize:"10px"},formatter:q=>[q.toFixed(5),"Amplitude"]}),c.jsx(Dr,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col min-h-[250px]",children:[c.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF / Spatial Frequency Response"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[(v==null?void 0:v.mtf50)&&c.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",c.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[v.mtf50.toFixed(2)," ",ae]})]}),F!==null&&c.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(F)," LW/PH"]})]})]}),c.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 400 60",className:"w-[40rem] h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),c.jsx(Ei,{width:"100%",height:"100%",children:c.jsxs(pl,{data:$,margin:{top:10,right:30,left:10,bottom:20},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),c.jsx(Yn,{dataKey:"freq",type:"number",tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${ae})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),c.jsx(qn,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),c.jsx(Zr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:q=>`Freq: ${Number(q).toFixed(3)}`,formatter:q=>[q.toFixed(4),"MTF"]}),c.jsx(si,{verticalAlign:"top",height:20}),c.jsx(Dr,{type:"monotone",dataKey:"mtf",name:"SFR",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1}),(v==null?void 0:v.mtf50)&&c.jsx(kf,{x:v.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:c.jsx(on,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]})]}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:V})]})},Wte=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    if shift > 0:
        raw_data = raw_data.astype(np.uint32) * (1 << shift)
        raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,Vte=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=j.useState(!0),[l,u]=j.useState(!1),f=j.useRef(null),[d,h]=j.useState(4),[p,m]=j.useState(""),[y,w]=j.useState(""),[x,g]=j.useState("RGGB"),v=j.useMemo(()=>Object.keys(Yd).sort(),[]);j.useEffect(()=>{e&&!f.current&&(async()=>{try{const k=await window.loadPyodide();await k.loadPackage("numpy"),await k.runPythonAsync(Wte),f.current=k,s(!1)}catch(k){console.error("Pyodide Init Failed",k)}})()},[e]),j.useEffect(()=>{if(e&&r){const b=r.whiteLevel;b>1e4?h(2):b>3e3?h(4):b>6e4&&h(0);const k=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(k)?g(k):g("RGGB")}},[e,r]);const S=async()=>{if(!(!r||!f.current)){u(!0);try{const b=f.current,k=p.trim()?p.trim().split(/\s+/).map(Number):[0,0,0,0];if(k.length===1&&!isNaN(k[0])&&k.push(k[0],k[0],k[0]),k.length<4)for(;k.length<4;)k.push(0);const C=y.trim()?y.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(C.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const P=x;b.globals.set("js_raw_bytes",new Uint8Array(r.data.buffer,r.data.byteOffset,r.data.byteLength)),b.globals.set("js_width",r.width),b.globals.set("js_height",r.height),b.globals.set("js_cfa",P),b.globals.set("js_bl_list",k),b.globals.set("js_shift",d),b.globals.set("js_cm_flat",C);const N=await b.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift, 
                    js_cm_flat.to_py()
                )
            `),A=N.toJs();N.destroy();const T=new Blob([A],{type:"image/x-adobe-dng"}),O=URL.createObjectURL(T),M=document.createElement("a");M.href=O;const D=n.substring(0,n.lastIndexOf("."))||"image";M.download=`${D}_16bit_manual.dng`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(O)}catch(b){console.error(b),alert("Export Failed: "+b.message)}finally{u(!1)}}};return e?c.jsxs(mc,{initialPosition:{x:window.innerWidth/2-250,y:150},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),c.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Shift"}),c.jsx("input",{type:"number",value:d,onChange:b=>h(parseInt(b.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),c.jsxs("select",{value:x,onChange:b=>g(b.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]}),c.jsxs("div",{className:"col-span-2 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level"}),c.jsx("input",{type:"text",value:p,onChange:b=>m(b.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]})]}),c.jsx("div",{className:"mt-[-15px]",children:c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-gray-500",children:"4 = 12bit (x16) | 2 = 14bit (x4)"})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:b=>{const k=Yd[b.target.value];k&&w(k),b.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),v.map(b=>c.jsx("option",{value:b,children:b},b))]})]}),c.jsx("textarea",{value:y,onChange:b=>w(b.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),c.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),c.jsx("button",{onClick:S,disabled:l,className:`w-full py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${l?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:l?"Processing Kernel...":"Convert & Download DNG"})]})})]}):null};function Hte(e,t,r,n=3){const i=r.byteLength,o=8,s=o+i,l=[{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:n,value:n===1?16:[16,16,16]},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:n===1?1:2},{id:273,type:4,count:1,value:o},{id:277,type:3,count:1,value:n},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:i}],u=2+l.length*12+4;let f=0;const d=l.map(g=>{let v=g.type===3?2:4;const S=g.count*v,b=S<=4;let k=0;return b||(k=f,f+=S),{...g,fits:b,totalBytes:S,extraOffset:k}}),h=s+u+f,p=new ArrayBuffer(h),m=new DataView(p),y=new Uint8Array(p);m.setUint16(0,18761,!0),m.setUint16(2,42,!0),m.setUint32(4,s,!0),y.set(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),o);let w=s;m.setUint16(w,l.length,!0),w+=2;const x=s+u;return d.forEach(g=>{if(m.setUint16(w,g.id,!0),m.setUint16(w+2,g.type,!0),m.setUint32(w+4,g.count,!0),g.fits)Array.isArray(g.value)||(g.type===3?m.setUint16(w+8,g.value,!0):m.setUint32(w+8,g.value,!0));else{const v=x+g.extraOffset;m.setUint32(w+8,v,!0),Array.isArray(g.value)&&g.value.forEach((S,b)=>{m.setUint16(v+b*2,S,!0)})}w+=12}),m.setUint32(w,0,!0),p}const Xte="http://localhost:5428",Kte=(e=!1)=>{const[t,r]=j.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return j.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${Xte}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const l=await s.json(),u=`Connected (${l.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===l.exiftool&&f.hasDngConverter===!!l.dng_converter?f:{isConnected:!0,message:u,version:l.exiftool,hasDngConverter:!!l.dng_converter})}else r(l=>l.isConnected===!1&&l.message==="Service Error"?l:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},Yte="JTR_BlobStore",pi="raw_files",qte=1,pp=()=>new Promise((e,t)=>{const r=indexedDB.open(Yte,qte);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(pi)||a.createObjectStore(pi)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),ZS=async(e,t)=>{const r=await pp();return new Promise((n,a)=>{const i=r.transaction(pi,"readwrite");i.objectStore(pi).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},Zte=async e=>{const t=await pp();return new Promise((r,n)=>{const o=t.transaction(pi,"readonly").objectStore(pi).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},Qte=async()=>{const e=await pp();return new Promise((t,r)=>{const n=e.transaction(pi,"readwrite");n.objectStore(pi).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},uO="jtr_workspace_index",Jte=e=>{try{const t=JSON.stringify(e);localStorage.setItem(uO,t)}catch(t){console.error("Failed to save workspace index",t)}},ere=()=>{try{const e=localStorage.getItem(uO);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},tre=async e=>{const n=(await pp()).transaction(pi,"readwrite").objectStore(pi),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},pn=1024,QS=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,l=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),h=f*t*4,p=d*n*4;for(let m=0;m<t;m++){const w=Math.floor(m*l)*4,x=h+m*4,g=p+w;s[x]=o[g],s[x+1]=o[g+1],s[x+2]=o[g+2],s[x+3]=o[g+3]}}return i},rre=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>d[h]=f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},nre=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:l,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],h=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,p=j.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:v,y:S,width:b,height:k}=e,C=lO(u,{x:v,y:S,w:b,h:k},o),P=[0,0,0,0],N=[0,0,0,0],A=Math.floor(S),T=Math.floor(v);for(let O=0;O<C.height;O++){const M=O*C.width;for(let D=0;D<C.width;D++){const E=C.data[M+D],B=A+O,_=T+D,I=B%2,z=_%2,U=I*2+z;P[U]+=E,N[U]++}}return P.map((O,M)=>N[M]>0?O/N[M]:0)}catch(v){return console.error("Unmix calc error",v),null}},[e,u,o]),m=(v,S,b)=>f?S<=1e-4?0:(v-b)/S:null,y=(v,S)=>h?v-d[S]:v,w=()=>{if(!h){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let v,S,b,k;n?(k=0,S=1,b=2,v=3):(v=0,S=1,b=2,k=3);const C=N=>e.means[N]-d[N],P=N=>e.stdDevs[N];localStorage.setItem("import_signal_r",C(v).toString()),localStorage.setItem("import_signal_g1",C(S).toString()),localStorage.setItem("import_signal_g2",C(b).toString()),localStorage.setItem("import_signal_b",C(k).toString()),localStorage.setItem("import_sigma_r",P(v).toString()),localStorage.setItem("import_sigma_g1",P(S).toString()),localStorage.setItem("import_sigma_g2",P(b).toString()),localStorage.setItem("import_sigma_b",P(k).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},x=n?[{name:"B",desc:"(0,0)",mean:y(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:m(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:y(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:m(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:y(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:m(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"R",desc:"(1,1)",mean:y(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:m(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}]:[{name:"R",desc:"(0,0)",mean:y(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:m(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:y(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:m(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:y(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:m(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"B",desc:"(1,1)",mean:y(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:m(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}],g=p?"w-96":f?"w-80":"w-60";return c.jsxs(mc,{className:`${g} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:l,initialPosition:{x:20,y:80},children:[c.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",c.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),c.jsx("br",{}),"Y: ",Math.round(e.y)]}),c.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),c.jsxs("table",{className:"w-full mb-3",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[c.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),c.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",h?"*":""]}),c.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&c.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),p&&c.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),c.jsx("tbody",{className:"font-mono text-xs",children:x.map((v,S)=>c.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[c.jsxs("td",{className:"py-1",children:[c.jsx("span",{className:`font-bold ${v.color}`,children:v.name}),c.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:v.desc})]}),c.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",title:h?"Mean minus Black Level":"Raw Mean",children:v.mean.toFixed(2)}),c.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:v.std.toFixed(2)}),f&&c.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:v.snr!==null?v.snr.toFixed(2):"-"}),p&&c.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:v.unmixed!==null?v.unmixed.toFixed(1):"-"})]},S))})]}),h&&c.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Histogram",children:"Hist"}),c.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Quantization Steps",children:"Quant"}),c.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Power Spectrum (FFT)",children:"FFT"}),c.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Pearson Correlation Analysis",children:"PCC"}),c.jsx("button",{onClick:w,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Color Noise Analysis (External Tool)",children:"ColorN"})]})]})]})},are=()=>{var S1;const[e,t]=j.useState(!0),[r,n]=j.useState("Initializing..."),a=j.useRef(!1),[i,o]=j.useState("dark");j.useEffect(()=>{const W=window.document.documentElement;W.classList.remove(i==="dark"?"light":"dark"),W.classList.add(i)},[i]);const[s,l]=j.useState(!1),[u,f]=j.useState(!1),[d,h]=j.useState(!1),[p,m]=j.useState(!1),y=Kte(s||u||d),[w,x]=j.useState(!1),[g,v]=j.useState([]),[S,b]=j.useState(-1),[k,C]=j.useState([]),P=j.useMemo(()=>g[S],[g,S]),N=j.useRef(null);j.useEffect(()=>{N.current=P||null},[P]);const A=(P==null?void 0:P.file)||null,T=(P==null?void 0:P.imageElement)||null,O=(P==null?void 0:P.rawImageData)||null,M=(P==null?void 0:P.rawFileBuffer)||null,D=(P==null?void 0:P.renderedRawImageData)||null,E=(P==null?void 0:P.referenceImageData)||null,B=(P==null?void 0:P.sampledImageData)||null,_=(P==null?void 0:P.exifData)||null,I=(P==null?void 0:P.isThreePlane)||!1,z=(P==null?void 0:P.xtransPhase)||{x:0,y:0},U=(P==null?void 0:P.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[ne,V]=j.useState(!1),[F,re]=j.useState(null),[ee,$]=j.useState(!1),[ae,q]=j.useState(!1),[H,le]=j.useState(null),[ce,Z]=j.useState([]),[Ce,we]=j.useState(100),[Q,he]=j.useState(!0),[ve,qe]=j.useState(!1),[He,Ee]=j.useState(null),[Ue,lt]=j.useState(!1),[St,_r]=j.useState(!1),[ct,er]=j.useState(!1),[Ge,Xt]=j.useState(!1),[Ut,ir]=j.useState(!1),[Mr,bt]=j.useState("1.0"),[We,gt]=j.useState(!1),[Ct,or]=j.useState(!1),[sr,tn]=j.useState(!1),[Rt,xn]=j.useState(!1),[jt,bn]=j.useState({x:0,y:0}),[Rn,wn]=j.useState(!1),[dr,xr]=j.useState(!1),[br,kn]=j.useState([]),[un,wr]=j.useState(0),[Qn,da]=j.useState(null),[tr,Kt]=j.useState(!1),[Lt,se]=j.useState([]),[Me,ze]=j.useState(.5),[tt,Je]=j.useState(!1),[Ot,kr]=j.useState(2),[Sr,Re]=j.useState(1),[it,Tt]=j.useState([]),[Et,rr]=j.useState(null),[me,Lr]=j.useState(0),[Ta,rn]=j.useState([]),[Sn,Hi]=j.useState([]),[Xi,Ea]=j.useState(64),[$a,yi]=j.useState(10),[jn,Y]=j.useState(10),[ye,ft]=j.useState(4),[$t,Ln]=j.useState(1),[Ar,Jn]=j.useState(0),[ha,Da]=j.useState("processed"),[pa,ea]=j.useState(!1),ga=j.useMemo(()=>U.blackLevel?U.blackLevel:O!=null&&O.blackLevels?[O.blackLevels[0],O.blackLevels[1],O.blackLevels[2],O.blackLevels[3]]:[0,0,0,0],[U.blackLevel,O]),Bn=(_==null?void 0:_.ImageHeight)||(_==null?void 0:_.ExifImageHeight)||(O==null?void 0:O.height)||0,[Ki,Dt]=j.useState(null),[G,X]=j.useState(null),[oe,R]=j.useState({x:0,y:0}),[pe,Ne]=j.useState(1),[De,et]=j.useState("pan"),Ye=j.useRef(null),Le=j.useRef(null),Bt=j.useCallback(async()=>{if(!M||!P)return;er(!1);const W=Ge,K=Ut;X(`Rendering 16-bit TIFF (${W?"Stretched":"Native DN"} | ${K?"sRGB":"Linear"})...`);try{const J=await hte(M.slice(0),U,W,K),ie=Hte(J.width,J.height,J.data,J.channels),be=new Blob([ie],{type:"image/tiff"}),ge=URL.createObjectURL(be),Te=document.createElement("a"),Oe=P.fileName||"rendered",_e=Oe.substring(0,Oe.lastIndexOf("."))||Oe,ke=[W?"stretch":"native",K?"srgb":"linear"].join("_");Te.href=ge,Te.download=`${_e}_${ke}.tif`,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(ge)}catch(J){Dt("TIFF Export Failed: "+J.message)}finally{X(null)}},[M,P,U,Ge,Ut]),wt=j.useCallback(()=>{!M||!P||er(!0)},[M,P]),Gt=j.useCallback(async()=>{if(!O||!P)return;const W=parseFloat(Mr);if(isNaN(W)||W<=0){Dt("Invalid multiplier for stretch.");return}X(`Stretching DNG by ${W}x...`);try{await new Promise(dt=>setTimeout(dt,50));const{width:K,height:J,data:ie,blackLevels:be,whiteLevel:ge,bayerPattern:Te}=O,Oe=new Uint16Array(ie.length);for(let dt=0;dt<ie.length;dt++)Oe[dt]=Math.min(65535,Math.round(ie[dt]*W));const _e=ga.map(dt=>dt*W),ke=ge*W,$e=Vc(K,J,Oe,_e,ke,Te),Qe=new Blob([$e],{type:"image/x-adobe-dng"}),yt=URL.createObjectURL(Qe),vt=document.createElement("a");vt.href=yt;const gr=(P.fileName||"image.dng").replace(/\.[^/.]+$/,"");vt.download=`${gr}_stretched_${W}x.dng`,document.body.appendChild(vt),vt.click(),document.body.removeChild(vt),URL.revokeObjectURL(yt),hr(`Successfully exported stretched DNG: ${W}x`,"info")}catch(K){Dt(`Stretch Export Failed: ${K.message}`)}finally{X(null)}},[O,P,Mr,ga]),hr=(W,K="info")=>{console.log(`[App] ${W}`)};j.useEffect(()=>{const W=K=>{(K.ctrlKey||K.metaKey)&&K.key.toLowerCase()==="s"&&(K.preventDefault(),wt())};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[wt]),j.useEffect(()=>{(async()=>{if(a.current)return;const K=ere();if(K&&(n("Restoring layout..."),o(K.theme),he(K.sidebarOpen),K.sessions.length>0)){n(`Restoring ${K.sessions.length} images...`);const J=[];for(const ie of K.sessions){if(a.current){console.log("Restoration cancelled.");return}await new Promise(be=>setTimeout(be,50));try{const be=await Zte(ie.id);if(be){const ge={id:ie.id,fileName:ie.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:be,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:ie.isThreePlane,displaySettings:ie.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:Te,analysisData:Oe}=await Go(be);let _e=null;Oe&&(_e=await HS(be,ie.displaySettings));const ke=URL.createObjectURL(Te),$e=new Image;$e.src=ke,await new Promise(Qe=>{$e.onload=()=>Qe()}),J.push({...ge,rawImageData:Oe,renderedRawImageData:_e,previewUrl:ke,imageElement:$e,exifData:Oe.metadata})}}catch(be){console.error(`Failed to restore session ${ie.id}`,be)}}if(a.current)return;if(v(J),K.activeSessionId){const ie=J.findIndex(be=>be.id===K.activeSessionId);ie>=0?b(ie):J.length>0&&b(0)}Z(K.windows)}a.current||t(!1)})()},[]);const ue=j.useRef(null),Ze=j.useCallback(()=>{e||(ue.current&&clearTimeout(ue.current),ue.current=window.setTimeout(async()=>{var J;const W={version:1,timestamp:Date.now(),activeSessionId:((J=g[S])==null?void 0:J.id)||null,theme:i,sidebarOpen:Q,sessions:g.map(ie=>({id:ie.id,fileName:ie.fileName,fileType:ie.file?ie.file.type:"application/octet-stream",fileSize:ie.rawFileBuffer?ie.rawFileBuffer.byteLength:0,displaySettings:ie.displaySettings,isThreePlane:ie.isThreePlane})),windows:ce.map(ie=>({id:ie.id,type:ie.type,roi:ie.roi,zIndex:ie.zIndex,initialPosition:ie.initialPosition,sessionId:ie.sessionId,isBGGR:ie.isBGGR,isMinimized:ie.isMinimized||!1,internalState:ie.internalState}))};Jte(W);const K=g.map(ie=>ie.id);tre(K)},1e3))},[g,ce,S,i,Q,e]);j.useEffect(()=>{Ze()},[Ze]);const Ae=j.useCallback(async()=>{a.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await Qte()}catch(W){console.error("Failed to clear DB",W)}window.location.reload()},[]),ut=j.useCallback(W=>{v(K=>K.map((J,ie)=>ie===S?{...J,...W}:J))},[S]),Nt=()=>b(W=>Math.min(W+1,g.length-1)),Pn=()=>b(W=>Math.max(0,W-1));j.useEffect(()=>{if(O&&F){const W=Wo(O.data,O.width,O.height,F.x,F.y,F.width,F.height);re(W)}},[O]);const mt=W=>{if(!F||!P)return;const K=Date.now().toString()+Math.random().toString().slice(2,5),J=Math.max(Ce,...ce.map(ge=>ge.zIndex),100),ie=ce.length%10*30,be=W==="fft"?{x:50,y:50}:W==="histogram"?{x:100,y:100}:{x:150,y:150};Z(ge=>[...ge,{id:K,type:W,roi:{x:F.x,y:F.y,w:F.width,h:F.height},zIndex:J+1,initialPosition:{x:be.x+ie,y:be.y+ie},sessionId:P.id,isBGGR:ee,isMinimized:!1,stackFiles:(W==="fft"||W==="pearson"||W==="histogram")&&k.length>0?k:void 0}])},jr=W=>{Z(K=>K.filter(J=>J.id!==W))},Cn=W=>{Z(K=>K.map(J=>J.id===W?{...J,isMinimized:!0}:J))},vi=W=>{Z(K=>K.map(J=>J.id===W?{...J,isMinimized:!1}:J)),Is(W)},Is=W=>{Z(K=>{const J=Math.max(Ce,...K.map(ie=>ie.zIndex));return K.map(ie=>ie.id===W?{...ie,zIndex:J+1}:ie)})},gp=(W,K)=>{Z(J=>J.map(ie=>ie.id===W?{...ie,internalState:{...ie.internalState,...K}}:ie))},Rs=()=>{const W=Math.max(Ce,...ce.map(K=>K.zIndex));we(W+1)},mp=(W,K)=>{Z(J=>J.map(ie=>ie.id===W?{...ie,roi:K}:ie))};j.useEffect(()=>{if(!_)return;const W=_.CFAPattern2||_.CFAPattern;if(W){let K="";Array.isArray(W)?K=W.join(""):typeof W=="string"?K=W.replace(/[\s,]+/g,""):typeof W=="number"&&(K=String(W)),K==="0112"?$(!1):K==="2110"&&$(!0)}},[_]),j.useEffect(()=>{let W;const K=()=>{if(tt&&Rt){const J=Date.now()/1e3,ie=.55+.45*Math.sin(J*Ot);Re(ie),W=requestAnimationFrame(K)}else Re(1)};return tt&&Rt?K():Re(1),()=>{W&&cancelAnimationFrame(W)}},[tt,Rt,Ot]),j.useEffect(()=>{const W=K=>{K.key==="Escape"&&Rt&&(xn(!1),bn({x:0,y:0}),Je(!1))};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[Rt]),j.useEffect(()=>()=>{g.forEach(W=>{W.previewUrl&&URL.revokeObjectURL(W.previewUrl)}),Le.current&&Le.current.terminate()},[]);const Bo=async(W,K=!0)=>{K&&(R({x:0,y:0}),Ne(1),Lr(0),rn([]),Hi([]),qe(!1),Ee(null),V(!1),xr(!1),kn([]),se([]),wr(0));let J=null;if(y.isConnected){const Oe=new FormData;Oe.append("file",W);try{const ke=await(await fetch("http://localhost:5428/read",{method:"POST",body:Oe})).json();if(ke.success){let $e=ke.data;Array.isArray($e)&&$e.length===1&&($e=$e[0]),J=$e}}catch(_e){console.warn("Auto Exif fetch failed",_e)}}const ie=W.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(W.type)||ie)){Dt("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let ge={file:W,exifData:J};if(ie||W.type==="image/x-adobe-dng")try{K?X("Processing RAW file (this may take a moment)..."):ea(!0);const Oe=await W.arrayBuffer();ge.rawFileBuffer=Oe;const{previewBlob:_e,analysisData:ke}=await Go(Oe);ge.rawImageData=ke,!J&&ke.metadata&&(ge.exifData=ke.metadata),ge.isThreePlane=ke.isThreePlane||!1,ke.isThreePlane&&K&&V(!0);let $e=!1,Qe=null,yt=!1;if(ke.isXTrans){yt=!0,Qe=Oe;const gr=(await ud(Oe,0,0)).dngBuffer,dt=await Go(gr);ge.rawFileBuffer=gr,ge.rawImageData=dt.analysisData,ge.previewUrl=URL.createObjectURL(dt.previewBlob),$e=!0}else ge.previewUrl=URL.createObjectURL(_e);ge.originalRawFileBuffer=Qe,ge.isXTransOriginal=yt,ge.isXTransConverted=$e,ge.xtransPhase={x:0,y:0};const vt=new Image;if(vt.src=ge.previewUrl||"",await new Promise((pr,gr)=>{vt.onload=()=>{ge.imageElement=vt,pr()},vt.onerror=()=>{pr()}}),K){const pr=ge.rawImageData||ke,gr=rre(pr,J||pr.metadata);let dt;gr&&gr.some(Wt=>Wt>0)&&(dt=gr);const Fe={exposure:0,demosaicMethod:-1,blackLevel:dt,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ht=ge.rawFileBuffer;if(ht&&(ie||W.type==="image/x-adobe-dng"))try{const Wt=await dte(ht,Fe);ge.renderedRawImageData=Wt,ge.displaySettings=Fe}catch(Wt){console.error("Initial Zero-Dep Render Failed",Wt)}}}catch(Oe){Dt(`Failed to process RAW file: ${Oe.message}`),X(null),ea(!1);return}else try{X("Processing image...");const{previewBlob:Oe,analysisData:_e}=await ite(W);ge.rawImageData=_e,!J&&_e.metadata&&(ge.exifData=_e.metadata),ge.rawFileBuffer=await W.arrayBuffer(),ge.isThreePlane=_e.isThreePlane||!1,ge.isXTransOriginal=!1,ge.isXTransConverted=!1,ge.originalRawFileBuffer=null;const ke=URL.createObjectURL(Oe);ge.previewUrl=ke;const $e=new Image;$e.src=ke,await new Promise(Qe=>{$e.onload=()=>{ge.imageElement=$e,Qe()},$e.onerror=()=>{Dt("Could not load the image file."),Qe()}})}catch(Oe){Dt(`Failed to process image: ${Oe.message}`),X(null);return}const Te=Date.now().toString()+Math.random();if(ge.rawFileBuffer&&await ZS(Te,ge.rawFileBuffer),K){const Oe={exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},_e={id:Te,fileName:W.name,file:W,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:Oe,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...ge};v(ke=>{const $e=[...ke,_e];return b($e.length-1),$e})}else ut(ge);X(null),ea(!1)},Fn=async W=>{X("Converting to DNG...");try{const K=new FormData;K.append("file",W);const J=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:K}),ie=J.headers.get("content-type")||"";if(J.ok)if(ie.includes("application/json")){const be=await J.json();throw new Error(be.error||"Conversion failed")}else{const be=await J.blob(),ge=URL.createObjectURL(be),Te=document.createElement("a");Te.href=ge;const Oe=W.name,_e=Oe.substring(0,Oe.lastIndexOf("."))+".dng"||"converted.dng";Te.download=_e,document.body.appendChild(Te),Te.click(),document.body.removeChild(Te),URL.revokeObjectURL(ge);const ke=new File([be],_e,{type:"image/x-adobe-dng"});await Bo(ke,!0)}else{const be=await J.text();throw new Error(`HTTP ${J.status}: ${be}`)}}catch(K){X(null),Dt(`Conversion Error: ${K.message}`)}},yp=(W,K)=>{W&&(K==="direct"?Bo(W,!0):Fn(W))},vp=async W=>{var J;const K=(J=W.target.files)==null?void 0:J[0];K&&(await Bo(K,!0),W.target.value="")},xp=async(W,K,J,ie)=>{!W||!K||(X("Processing Pair Difference (May take a while)..."),Dt(null),setTimeout(async()=>{try{const be=await W.arrayBuffer(),ge=await K.arrayBuffer(),Te=await Tg(be,ge,J,ie),Oe=Vc(Te.width,Te.height,Te.rawData),_e=new File([Oe],`Diff_${W.name}_${K.name}.dng`,{type:"image/x-adobe-dng"});await Bo(_e,!0),mt("fft")}catch(be){console.error("Pair Processing Error",be),Dt("Pair Processing Failed: "+be.message)}finally{X(null)}},100))},jf=async W=>{if(W.length<2){Dt("Need at least 2 files for Batch Diff.");return}X(`Batch Processing 0/${Math.floor(W.length/2)} pairs...`);const K=Array.from(W).sort((J,ie)=>J.name.localeCompare(ie.name,void 0,{numeric:!0}));try{for(let J=0;J<K.length-1;J+=2){const ie=K[J],be=K[J+1];X(`Batch Processing Pair ${Math.floor(J/2)+1}/${Math.floor(K.length/2)}: ${ie.name} & ${be.name}`);const ge=await ie.arrayBuffer(),Te=await be.arrayBuffer(),Oe=await Tg(ge,Te,!1,!1),_e=Vc(Oe.width,Oe.height,Oe.rawData),ke=new Blob([_e],{type:"image/x-adobe-dng"}),$e=URL.createObjectURL(ke),Qe=document.createElement("a");Qe.href=$e,Qe.download=`Diff_${ie.name}_${be.name}.dng`,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe),URL.revokeObjectURL($e)}}catch(J){console.error("FFT Batch Error",J),Dt("Batch Processing Failed: "+J.message)}finally{X(null)}},yc=async W=>{if(W.length<1)return;const K=Array.from(W).sort((J,ie)=>J.name.localeCompare(ie.name,void 0,{numeric:!0}));C(K),await Bo(K[0],!0)},vc=async()=>{ea(!0);const W=128,K=W,J=W,ie=K*J,be=new Uint16Array(ie),ge=Fe=>{const ht=Fe/ye+Ar;return Math.sin(2*Math.PI*ht)>=0?1:0},Te=32,Oe=$t*.5,_e=Math.max(1e-4,$t/Te);for(let Fe=0;Fe<J;Fe++){let ht=0;const Pr=Fe+.5-Oe;for(let Yt=0;Yt<Te;Yt++){const Nn=Pr+(Yt+.5)*_e;ht+=ge(Nn)}const Kr=ht/Te,_t=Math.round(Kr*65535);for(let Yt=0;Yt<K;Yt++)be[Fe*K+Yt]=_t}const ke=new ImageData(pn,pn),$e=pn/K,Qe=$t/2;for(let Fe=0;Fe<pn;Fe++){const ht=Fe/$e,Wt=Math.floor(ht),Pr=ht-Wt,Kr=Pr>=.5-Qe&&Pr<.5+Qe;for(let _t=0;_t<pn;_t++){const Yt=_t/$e,Nn=Math.floor(Yt),fn=Yt-Nn,Fo=fn>=.5-Qe&&fn<.5+Qe,Br=(Fe*pn+_t)*4;if(Nn>=K||Wt>=J){ke.data[Br]=30,ke.data[Br+1]=34,ke.data[Br+2]=40,ke.data[Br+3]=255;continue}if(Kr&&Fo){const Zi=be[Wt*K+Nn],zo=Math.round(Zi/257);ke.data[Br]=zo,ke.data[Br+1]=zo,ke.data[Br+2]=zo,ke.data[Br+3]=255}else ke.data[Br]=30,ke.data[Br+1]=34,ke.data[Br+2]=40,ke.data[Br+3]=255}}const yt=new ImageData(pn,pn),vt=J/pn;for(let Fe=0;Fe<pn;Fe++){const ht=(Fe+.5)*vt,Pr=ge(ht)>.5?255:0,Kr=Fe*pn*4;for(let _t=0;_t<pn;_t++){const Yt=Kr+_t*4;yt.data[Yt]=Pr,yt.data[Yt+1]=Pr,yt.data[Yt+2]=Pr,yt.data[Yt+3]=255}}const pr=Vc(K,J,be),gr=new File([pr],"pattern_test.dng",{type:"image/x-adobe-dng"}),dt=Date.now().toString();try{const{previewBlob:Fe,analysisData:ht}=await Go(pr.slice(0)),Wt=await HS(pr.slice(0),U),Pr=QS(Wt,pn,pn),Kr=URL.createObjectURL(Fe),_t=new Image;_t.src=Kr,await new Promise(Nn=>{_t.onload=()=>Nn()}),await ZS(dt,pr);const Yt={id:dt,fileName:"pattern_test.dng",file:gr,imageElement:_t,rawImageData:ht,rawFileBuffer:pr,renderedRawImageData:Pr,referenceImageData:yt,sampledImageData:ke,exifData:null,isThreePlane:!1,previewUrl:Kr,displaySettings:U,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(A==null?void 0:A.name)==="pattern_test.dng"?ut(Yt):v(Nn=>{const fn=[...Nn,Yt];return b(fn.length-1),fn})}catch(Fe){console.error("Error generating pattern:",Fe),Dt(`Error generating pattern: ${Fe.message}`)}ea(!1),X(null)},Pf=()=>{lt(!0)},bp=()=>{lt(!1),Da("sampled"),X("Generating..."),setTimeout(()=>vc(),50)},Yi=j.useRef({period:ye,fill:$t,phase:Ar});j.useEffect(()=>{(A==null?void 0:A.name)==="pattern_test.dng"&&(Yi.current.period!==ye||Yi.current.fill!==$t||Yi.current.phase!==Ar)&&(Yi.current={period:ye,fill:$t,phase:Ar},vc())},[ye,$t,Ar,A]);const Pe=j.useCallback(W=>{if(ut({displaySettings:W}),!M)return;ea(!0),Le.current&&Le.current.terminate();const K=new Worker(new URL("/assets/renderWorker-D73_7lpj.js",import.meta.url),{type:"module"});Le.current=K,K.onmessage=J=>{const{success:ie,imageData:be,error:ge}=J.data;if(ie){let Te=be;(A==null?void 0:A.name)==="pattern_test.dng"&&(Te=QS(be,pn,pn)),ut({renderedRawImageData:Te})}else Dt(ge||"Unknown worker error");ea(!1),K.terminate(),Le.current=null},K.postMessage({buffer:M.slice(0),settings:W})},[M,A,ut]),ot=async(W,K)=>{X("Re-sampling X-Trans with new Phase...");try{const ie=(await ud(K,W.x,W.y)).dngBuffer,be=await Go(ie),ge=URL.createObjectURL(be.previewBlob),Te=new Image;Te.src=ge,await new Promise(Oe=>{Te.onload=()=>Oe()}),P!=null&&P.previewUrl&&URL.revokeObjectURL(P.previewUrl),ut({rawFileBuffer:ie,rawImageData:be.analysisData,previewUrl:ge,imageElement:Te,xtransPhase:W}),re(null)}catch(J){console.error("X-Trans Phase Update Failed",J),Dt("Phase Update Failed: "+J.message)}finally{X(null)}},rt=W=>{if(!P||!P.originalRawFileBuffer||!P.isXTransConverted)return;const K={...P.xtransPhase,...W};ot(K,P.originalRawFileBuffer)},nt=j.useCallback(async W=>{if(P)if(W){if(P.isXTransConverted)return;const K=P.originalRawFileBuffer||P.rawFileBuffer;if(!K)return;X("Converting X-Trans to Pseudo-Bayer DNG...");try{const J=P.xtransPhase||{x:0,y:0},be=(await ud(K,J.x,J.y)).dngBuffer,ge=await Go(be),Te=URL.createObjectURL(ge.previewBlob),Oe=new Image;Oe.src=Te,await new Promise(_e=>{Oe.onload=()=>_e()}),P.previewUrl&&URL.revokeObjectURL(P.previewUrl),ut({rawFileBuffer:be,rawImageData:ge.analysisData,previewUrl:Te,imageElement:Oe,isXTransConverted:!0,originalRawFileBuffer:K}),re(null)}catch(J){console.error("X-Trans Conversion Failed",J),Dt("Failed to convert X-Trans: "+J.message)}finally{X(null)}}else{if(!P.isXTransConverted)return;const K=P.originalRawFileBuffer;if(!K){Dt("Original X-Trans buffer lost. Cannot revert.");return}X("Reverting to Native X-Trans...");try{const J=await Go(K),ie=URL.createObjectURL(J.previewBlob),be=new Image;be.src=ie,await new Promise(ge=>{be.onload=()=>ge()}),P.previewUrl&&URL.revokeObjectURL(P.previewUrl),ut({rawFileBuffer:K,rawImageData:J.analysisData,previewUrl:ie,imageElement:be,isXTransConverted:!1}),re(null)}catch(J){console.error("X-Trans Revert Failed",J),Dt("Failed to revert X-Trans: "+J.message)}finally{X(null)}}},[P,ut]);let Xr=D||T;ha==="reference"&&E?Xr=E:ha==="sampled"&&B&&(Xr=B);const On=G||pa,ta=W=>{if(Ye.current){const K=Ye.current,{width:J,height:ie}=K.getBoundingClientRect(),be=J/2,ge=ie/2,Te=W/pe,Oe=be-(be-oe.x)*Te,_e=ge-(ge-oe.y)*Te;R({x:Oe,y:_e})}Ne(W)},Qa=W=>{if(!W)return;if(!O){re(null);return}ae&&q(!1);const K=Wo(O.data,O.width,O.height,W.x,W.y,W.w,W.h);re(K)},qi=W=>{le(W),Qa(W)},Ja=()=>{et(W=>W==="pan"?"select":"pan")},lr=W=>{if(me===0||me>4)return;const K=[...Ta,W];rn(K),me===4?(xc(K),Lr(0)):Lr(me+1)},wp=(W,K,J,ie)=>{const be=W[0],ge=W[1],Te=W[2],Oe=W[3],_e=K/2,ke=[];for(let $e=0;$e<J;$e++){const Qe=J>1?$e/(J-1):.5;for(let yt=0;yt<ie;yt++){const vt=ie>1?yt/(ie-1):.5,pr=be.x*(1-vt)+ge.x*vt,gr=be.y*(1-vt)+ge.y*vt,dt=Te.x*(1-vt)+Oe.x*vt,Fe=Te.y*(1-vt)+Oe.y*vt,ht=pr*(1-Qe)+dt*Qe,Wt=gr*(1-Qe)+Fe*Qe,Pr=ht-_e,Kr=Wt-_e;ke.push({x:Pr,y:Kr,w:K,h:K})}}return ke},xc=W=>{!O||!P||(X("Calculating DR Lab Grid..."),setTimeout(()=>{try{const K=wp(W,Xi,$a,jn);Hi(K);const ge=[...[`#BlackLevel: ${(U.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${O.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Te=`img${P.fileName||"image"}`;K.forEach((Qe,yt)=>{const vt=Math.floor(yt/jn)+1,pr=yt%jn+1,gr=Wo(O.data,O.width,O.height,Qe.x,Qe.y,Qe.w,Qe.h),dt=gr.means,Fe=gr.stdDevs,ht=`${Te},${vt},${pr},${dt[0].toFixed(4)},${dt[1].toFixed(4)},${dt[2].toFixed(4)},${dt[3].toFixed(4)},${Fe[0].toFixed(4)},${Fe[1].toFixed(4)},${Fe[2].toFixed(4)},${Fe[3].toFixed(4)}`;ge.push(ht)});const Oe=ge.join(`
`),_e=new Blob([Oe],{type:"text/csv;charset=utf-8;"}),ke=URL.createObjectURL(_e),$e=document.createElement("a");$e.setAttribute("href",ke),$e.setAttribute("download","dr_lab_results.csv"),document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(ke),rn([])}catch(K){Dt("DR Lab Error: "+K.message)}finally{X(null)}},100))},Cf=async(W,K)=>{if(Ta.length<4&&Sn.length<1){Dt("Please mark the grid on an image first before running batch processing.");return}let J=Sn;if(J.length===0&&Ta.length===4&&(J=wp(Ta,Xi,$a,jn)),J.length===0){Dt("No grid definitions found. Mark corners first.");return}X(K==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const be=(U.blackLevel||[0,0,0,0]).join(","),ge=O?O.height:0,Oe=[...[`#BlackLevel: ${be}`,`#ImageHeight: ${ge}`,K==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],_e=Array.from(W).sort((yt,vt)=>yt.name.localeCompare(vt.name,void 0,{numeric:!0}));if(K==="pair"&&_e.length<2){Dt("Need at least 2 files for Pair processing."),X(null);return}const ke=N.current,$e=(ke==null?void 0:ke.isXTransConverted)||!1,Qe=(ke==null?void 0:ke.xtransPhase)||{x:0,y:0};try{const yt=async Fe=>{let ht=await Fe.arrayBuffer();return $e&&(ht=(await ud(ht,Qe.x,Qe.y)).dngBuffer),ht};if(K==="single")for(let Fe=0;Fe<_e.length;Fe++){const ht=_e[Fe];X(`Processing ${Fe+1}/${_e.length}: ${ht.name}...`);const Wt=await yt(ht),Pr=await ih(Wt),Kr=`img${ht.name}`;J.forEach((_t,Yt)=>{const Nn=Math.floor(Yt/$a)+1,fn=Yt%jn+1,Fo=Wo(Pr.data,Pr.width,Pr.height,_t.x,_t.y,_t.w,_t.h),Br=Fo.means,Zi=Fo.stdDevs,zo=`${Kr},${Nn},${fn},${Br[0].toFixed(4)},${Br[1].toFixed(4)},${Br[2].toFixed(4)},${Br[3].toFixed(4)},${Zi[0].toFixed(4)},${Zi[1].toFixed(4)},${Zi[2].toFixed(4)},${Zi[3].toFixed(4)}`;Oe.push(zo)})}else for(let Fe=0;Fe<_e.length-1;Fe+=2){const ht=_e[Fe],Wt=_e[Fe+1],Pr=`img${ht.name} & ${Wt.name}`;X(`Processing Pair ${Math.floor(Fe/2)+1}/${Math.floor(_e.length/2)}: ${ht.name} & ${Wt.name}...`);const Kr=await yt(ht),_t=await ih(Kr),Yt=await yt(Wt),Nn=await Tg(Kr,Yt,!1,!0);J.forEach((fn,Fo)=>{const Br=Math.floor(Fo/$a)+1,Zi=Fo%jn+1,zo=Wo(_t.data,_t.width,_t.height,fn.x,fn.y,fn.w,fn.h),bO=Wo(Nn.rawData,Nn.width,Nn.height,fn.x,fn.y,fn.w,fn.h),Of=zo.means,Nf=bO.stdDevs,wO=`${Pr},${Br},${Zi},${Of[0].toFixed(4)},${Of[1].toFixed(4)},${Of[2].toFixed(4)},${Of[3].toFixed(4)},${Nf[0].toFixed(4)},${Nf[1].toFixed(4)},${Nf[2].toFixed(4)},${Nf[3].toFixed(4)}`;Oe.push(wO)})}const vt=Oe.join(`
`),pr=new Blob([vt],{type:"text/csv;charset=utf-8;"}),gr=URL.createObjectURL(pr),dt=document.createElement("a");dt.href=gr,dt.setAttribute("download",`dr_lab_batch_${K}_${new Date().getTime()}.csv`),document.body.appendChild(dt),dt.click(),document.body.removeChild(dt),URL.revokeObjectURL(gr)}catch(yt){console.error("Batch Error",yt),Dt("Batch Processing Failed: "+yt.message)}finally{X(null)}},b1=()=>{kn([]),wr(1)},dO=W=>{if(!dr||un===0)return;const K=[...br,W];kn(K),K.length===4&&O?(w1(K,Me),wr(0)):wr(J=>J+1)},w1=(W,K)=>{O&&(X("Analyzing Color Chart..."),setTimeout(()=>{try{const J=$te(W[0],W[1],W[2],W[3],O.width,O.height,K);se(J);const be=J.map((ge,Te)=>{const Oe=Wo(O.data,O.width,O.height,ge.x,ge.y,ge.w,ge.h);return{id:Te,rawMeans:Oe.means,refRGB:[0,0,0]}}).map((ge,Te)=>({...ge,refRGB:uv[Te]||[0,0,0]}));da(be),Kt(!0)}catch(J){Dt("Color Lab Error: "+J.message)}finally{X(null)}},100))},hO=W=>{ze(W),br.length===4&&w1(br,W)},pO=()=>{Kt(!1)},gO=()=>{_||Ee("No EXIF data found. The file might not contain metadata or it was stripped during processing."),qe(!0)},mO=async W=>{X("Parsing PTC Data...");const K=[];let J=null;try{for(let ie=0;ie<W.length;ie++){const ge=(await W[ie].text()).split(`
`);let Te=!0;for(const Oe of ge){const _e=Oe.trim();if(!_e)continue;if(_e.startsWith("#")){if(_e.includes("BlackLevel:")){const _t=_e.split(":")[1].trim().split(",");if(_t.length>=4){const Yt=_t.map(Number);J||(J={}),J.blackLevel=Yt}}if(_e.includes("ImageHeight:")){const _t=parseInt(_e.split(":")[1].trim());isNaN(_t)||(J||(J={}),J.height=_t)}continue}if(Te){_e.toLowerCase().includes("mean")&&_e.toLowerCase().includes("std")&&(Te=!1);continue}const ke=_e.split(",");if(ke.length<5)continue;let $e=0,Qe;isNaN(parseFloat(ke[0]))&&(Qe=ke[0],$e=1);const yt=parseInt(ke[$e]),vt=parseInt(ke[$e+1]),pr=parseFloat(ke[$e+2]),gr=parseFloat(ke[$e+3]),dt=parseFloat(ke[$e+4]),Fe=parseFloat(ke[$e+5]),ht=parseFloat(ke[$e+6]),Wt=parseFloat(ke[$e+7]),Pr=parseFloat(ke[$e+8]),Kr=parseFloat(ke[$e+9]);!isNaN(pr)&&!isNaN(ht)&&K.push({channel:"R",mean:pr,std:ht,filename:Qe,row:yt,col:vt}),!isNaN(gr)&&!isNaN(Wt)&&K.push({channel:"G1",mean:gr,std:Wt,filename:Qe,row:yt,col:vt}),!isNaN(dt)&&!isNaN(Pr)&&K.push({channel:"G2",mean:dt,std:Pr,filename:Qe,row:yt,col:vt}),!isNaN(Fe)&&!isNaN(Kr)&&K.push({channel:"B",mean:Fe,std:Kr,filename:Qe,row:yt,col:vt})}}Tt(K),rr(J),l(!0)}catch(ie){console.error("PTC Parse Error",ie),Dt("Failed to parse CSV files: "+ie.message)}finally{X(null)}},yO=()=>{if(!M||!P)return;const W=new Blob([M],{type:"image/x-adobe-dng"}),K=URL.createObjectURL(W),J=document.createElement("a");J.href=K;const ie=P.fileName||"image.dng",be=ie.toLowerCase().endsWith(".dng")?ie:ie.replace(/\.[^/.]+$/,"")+".dng";J.download=be,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(K)},vO=()=>{Lr(1),rn([]),Hi([])},k1=()=>{window.open("https://github.com/y-g-jiang.github.io/blob/main/drtest.png","_blank")},xO=j.useMemo(()=>Qn?Qn.map((W,K)=>({...W,refRGB:uv[K]||[0,0,0]})):[],[Qn]);return e?c.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-300 dark:bg-[#111] text-black dark:text-white font-mono",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-black dark:border-white border-t-transparent animate-spin mb-4"}),c.jsx("h2",{className:"text-xl font-bold",children:r}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-6",children:"Loading stored buffers from database..."}),c.jsx("button",{onClick:Ae,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-bold border-2 border-black dark:border-gray-500 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:shadow-none active:translate-x-1 active:translate-y-1 transition-all text-sm",children:"Abandon Saved Session (Start Fresh)"})]}):c.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[c.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:c.jsx(q_,{onLoadImage:vp,onFileSelected:yp,onGenerateFakeDng:Pf,fileName:A?A.name:null,hasGeneratedData:(A==null?void 0:A.name)==="pattern_test.dng",viewMode:ha,onSetViewMode:Da,patternPeriod:ye,onPatternPeriodChange:ft,fillFactor:$t,onFillFactorChange:Ln,patternPhase:Ar,onPatternPhaseChange:Jn,showPatternControls:(A==null?void 0:A.name)==="pattern_test.dng",onOpenAbout:()=>_r(!0),onShowExif:gO,bridgeStatus:y,onBridgeClick:()=>x(!0),isDrLabOpen:We,onToggleDrLab:()=>{gt(!We),Lr(0),rn([]),Hi([]),Ct&&or(!1),dr&&xr(!1),sr&&tn(!1),wr(0),se([])},isColorLabOpen:dr,onToggleColorLab:()=>{xr(!dr),kn([]),wr(0),se([]),We&&gt(!1),Ct&&or(!1),sr&&tn(!1)},isFftLabOpen:Ct,onToggleFftLab:()=>{or(!Ct),We&&gt(!1),dr&&xr(!1),sr&&tn(!1),wr(0),se([])},isSfrLabOpen:sr,onToggleSfrLab:()=>{tn(!sr),We&&gt(!1),dr&&xr(!1),Ct&&or(!1),wr(0),se([])},onGenerateTestPic:k1,onPTCFilesSelected:mO,onDownloadDng:yO,isThreePlane:I,onOpenDatabase:()=>f(!0),isSidebarOpen:Q,onToggleSidebar:()=>he(!Q),stretchMultiplier:Mr,onStretchMultiplierChange:bt,onStretchDngExport:Gt,isRawLoaded:!!O})}),c.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[c.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:Ye,children:[On&&c.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:G||"Processing..."})]}),g.length>1&&c.jsxs("div",{className:"absolute bottom-4 right-20 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] text-sm font-bold text-black dark:text-white",children:[c.jsx("button",{onClick:Pn,disabled:S<=0,className:"hover:text-gray-500 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Previous Image",children:"<"}),c.jsxs("span",{className:"min-w-[3rem] text-center select-none font-bold",children:[S+1," / ",g.length]}),c.jsx("button",{onClick:Nt,disabled:S>=g.length-1,className:"hover:text-gray-500 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Next Image",children:">"})]}),c.jsx("div",{className:"absolute bottom-4 left-4 z-50 flex flex-col-reverse gap-2 items-start pointer-events-none",children:ce.filter(W=>W.isMinimized).map(W=>{let K="Window",J="bg-gray-500";return W.type==="histogram"?(K="Histogram",J="bg-black dark:bg-white"):W.type==="fft"?(K="FFT Spectrum",J="bg-black dark:bg-white"):W.type==="quant"?(K="Quantization",J="bg-black dark:bg-white"):W.type==="pearson"&&(K="Pearson",J="bg-black dark:bg-white"),c.jsxs("div",{className:"pointer-events-auto flex items-center gap-1 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsxs("button",{onClick:()=>vi(W.id),className:"px-3 py-1.5 text-xs font-bold text-black dark:text-white hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors flex items-center gap-2",children:[c.jsx("span",{className:`w-2 h-2 ${J}`}),K]}),c.jsx("button",{onClick:()=>jr(W.id),className:"px-2 py-1.5 text-black hover:text-red-600 hover:bg-gray-200 dark:hover:bg-gray-800 border-l-2 border-black dark:border-white transition-colors",children:""})]},W.id)})}),c.jsx(Ste,{isOpen:St,onClose:()=>_r(!1)}),c.jsx(jte,{isOpen:ve,onClose:()=>qe(!1),data:_,fileName:A?A.name:"",warning:He}),c.jsx(Cte,{isOpen:s,onClose:()=>l(!1),data:it,blackLevel:ga,imageHeight:Bn,isBGGR:ee,importedMetadata:Et||void 0,theme:i,initialCameraModel:(_==null?void 0:_.Model)||"",initialISO:(_==null?void 0:_.ISO)||((S1=_==null?void 0:_.ISOSpeedRatings)==null?void 0:S1.toString())||""}),c.jsx(Ate,{isOpen:u,onClose:()=>f(!1),theme:i}),c.jsx(Tte,{isOpen:d,onClose:()=>h(!1),zIndex:200}),c.jsx(Lte,{isOpen:tr,onClose:pO,patchStats:xO,initialIsBGGR:ee,sizeRatio:Me,onSizeChange:hO}),c.jsx(Gte,{isOpen:sr,isSfrLabOpen:sr,onClose:()=>{},rawImageData:O,roi:F?{x:F.x,y:F.y,w:F.width,h:F.height}:null,zIndex:200,onFocus:Rs,displaySettings:U}),c.jsx(Vte,{isOpen:p,onClose:()=>m(!1),rawImageData:O,fileName:(A==null?void 0:A.name)||"image.dng",zIndex:300,onFocus:Rs}),c.jsx(Mi,{isOpen:Ue,onClose:()=>lt(!1),onConfirm:bp,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),c.jsx("p",{className:"text-xs text-gray-500"})]})}),c.jsx(Mi,{isOpen:w,onClose:()=>x(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),x(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),c.jsx(Mi,{isOpen:ct,onClose:()=>er(!1),onConfirm:Bt,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),c.jsx("div",{onClick:()=>Xt(!Ge),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Ge?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Ge?"translate-x-6":""}`})})]}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),c.jsx("div",{onClick:()=>ir(!Ut),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Ut?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Ut?"translate-x-6":""}`})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[Ge&&!Ut&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!Ge&&Ut&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",Ge&&Ut&&"Mode: Ready-to-Use. Conventional 16-bit development.",!Ge&&!Ut&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!ae&&c.jsx(nre,{stats:F,onClose:()=>{re(null),le(null)},onMinimize:()=>q(!0),isBGGR:ee,onToggleBGGR:$,onOpenWindow:mt,displaySettings:U,zIndex:Ce,onFocus:Rs,rawImageData:O}),ce.map(W=>{if(W.isMinimized)return null;const K=g.find(be=>be.id===W.sessionId),J=K==null?void 0:K.rawImageData;if(!J)return null;const ie={key:W.id,isOpen:!0,onClose:()=>jr(W.id),onMinimize:()=>Cn(W.id),rawImageData:J,roi:W.roi,isBGGR:W.isBGGR,zIndex:W.zIndex,onFocus:()=>Is(W.id),initialPosition:W.initialPosition,initialInternalState:W.internalState,onUpdateState:be=>gp(W.id,be),stackFiles:W.stackFiles};return W.type==="histogram"?c.jsx(pte,{...ie}):W.type==="fft"?c.jsx(vte,{...ie,onUpdateROI:be=>mp(W.id,be)}):W.type==="quant"?c.jsx(xte,{...ie}):W.type==="pearson"?c.jsx(bte,{...ie}):null}),Ki&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:c.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[c.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),c.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:Ki}),c.jsx("button",{onClick:()=>Dt(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!Xr&&!On&&!Ki&&c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:c.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),c.jsx(Z_,{image:Xr,zoom:pe,pan:oe,onPanChange:R,onZoomChange:ta,onSelectionChange:Qa,forcedSelection:H,theme:i,touchAction:De,isMarking:me>0||dr&&un>0,onPointClick:W=>{me>0?lr(W):dr&&un>0&&dO(W)},markers:Ta,gridRects:Sn,colorLabPoints:br,colorLabRects:Lt}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),O&&!me&&!dr&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",c.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),dr&&un>0&&c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[br.length===0&&"Click Top-Left Corner of Chart",br.length===1&&"Click Top-Right Corner",br.length===2&&"Click Bottom-Left Corner",br.length===3&&"Click Bottom-Right Corner",br.length===4&&"Processing..."]}),c.jsx(uM,{zoom:pe,onZoomChange:ta,onResetView:()=>{Ne(1),R({x:0,y:0})},touchAction:De,onToggleTouchAction:Ja})]}),Q&&c.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:c.jsx(rM,{rawImageData:O,displaySettings:U,onApplyDisplaySettings:Pe,onSetSelection:qi,exifData:_,isBridgeConnected:y.isConnected,isDrLabOpen:We,drMarkingStep:me,onStartMarking:vO,onGenerateTestPic:k1,drRoiSize:Xi,onDrRoiSizeChange:Ea,drGridRows:$a,onDrGridRowsChange:yi,drGridCols:jn,onDrGridColsChange:Y,onBatchDrLab:Cf,hasDrMarkers:Sn.length>0,isFftLabOpen:Ct,onProcessPair:xp,onProcessBatchDiff:jf,onProcessStackFft:yc,onOpenCrossCalc:()=>h(!0),isThreePlane:I,onToggleXTrans:nt,xtransPhase:z,onXTransPhaseChange:rt,isXTransConverted:P==null?void 0:P.isXTransConverted,roiStats:F,isBGGR:ee,isColorLabOpen:dr,colorLabMarkingStep:un,onStartColorLabMarking:b1,isSfrLabOpen:sr,onOpenDngExport:()=>m(!0)})}),c.jsx(fM,{theme:i,setTheme:o})]})]})},fO=document.getElementById("root");if(!fO)throw new Error("Could not find root element to mount to");const ire=Dg.createRoot(fO);ire.render(c.jsx(L.StrictMode,{children:c.jsx(are,{})}));export{Aee as _};
