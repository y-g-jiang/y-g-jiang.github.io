var RN=Object.defineProperty;var IN=(e,t,r)=>t in e?RN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Yr=(e,t,r)=>IN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Br(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m4={exports:{}},Zh={},y4={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf=Symbol.for("react.element"),LN=Symbol.for("react.portal"),FN=Symbol.for("react.fragment"),BN=Symbol.for("react.strict_mode"),zN=Symbol.for("react.profiler"),UN=Symbol.for("react.provider"),GN=Symbol.for("react.context"),WN=Symbol.for("react.forward_ref"),VN=Symbol.for("react.suspense"),HN=Symbol.for("react.memo"),XN=Symbol.for("react.lazy"),Fb=Symbol.iterator;function KN(e){return e===null||typeof e!="object"?null:(e=Fb&&e[Fb]||e["@@iterator"],typeof e=="function"?e:null)}var v4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x4=Object.assign,b4={};function zc(e,t,r){this.props=e,this.context=t,this.refs=b4,this.updater=r||v4}zc.prototype.isReactComponent={};zc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function w4(){}w4.prototype=zc.prototype;function kx(e,t,r){this.props=e,this.context=t,this.refs=b4,this.updater=r||v4}var Sx=kx.prototype=new w4;Sx.constructor=kx;x4(Sx,zc.prototype);Sx.isPureReactComponent=!0;var Bb=Array.isArray,k4=Object.prototype.hasOwnProperty,jx={current:null},S4={key:!0,ref:!0,__self:!0,__source:!0};function j4(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)k4.call(t,n)&&!S4.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Qf,type:e,key:i,ref:o,props:a,_owner:jx.current}}function qN(e,t){return{$$typeof:Qf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _x(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qf}function YN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var zb=/\/+/g;function Og(e,t){return typeof e=="object"&&e!==null&&e.key!=null?YN(""+e.key):t.toString(36)}function r0(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qf:case LN:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Og(o,0):n,Bb(a)?(r="",e!=null&&(r=e.replace(zb,"$&/")+"/"),r0(a,t,r,"",function(u){return u})):a!=null&&(_x(a)&&(a=qN(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(zb,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Bb(e))for(var s=0;s<e.length;s++){i=e[s];var c=n+Og(i,s);o+=r0(i,t,r,c,a)}else if(c=KN(e),typeof c=="function")for(e=c.call(e),s=0;!(i=e.next()).done;)i=i.value,c=n+Og(i,s++),o+=r0(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wd(e,t,r){if(e==null)return e;var n=[],a=0;return r0(e,n,"","",function(i){return t.call(r,i,a++)}),n}function ZN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Na={current:null},n0={transition:null},QN={ReactCurrentDispatcher:Na,ReactCurrentBatchConfig:n0,ReactCurrentOwner:jx};function _4(){throw Error("act(...) is not supported in production builds of React.")}Zt.Children={map:wd,forEach:function(e,t,r){wd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return wd(e,function(){t++}),t},toArray:function(e){return wd(e,function(t){return t})||[]},only:function(e){if(!_x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Zt.Component=zc;Zt.Fragment=FN;Zt.Profiler=zN;Zt.PureComponent=kx;Zt.StrictMode=BN;Zt.Suspense=VN;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QN;Zt.act=_4;Zt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=x4({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=jx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)k4.call(t,c)&&!S4.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Qf,type:e.type,key:a,ref:i,props:n,_owner:o}};Zt.createContext=function(e){return e={$$typeof:GN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:UN,_context:e},e.Consumer=e};Zt.createElement=j4;Zt.createFactory=function(e){var t=j4.bind(null,e);return t.type=e,t};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(e){return{$$typeof:WN,render:e}};Zt.isValidElement=_x;Zt.lazy=function(e){return{$$typeof:XN,_payload:{_status:-1,_result:e},_init:ZN}};Zt.memo=function(e,t){return{$$typeof:HN,type:e,compare:t===void 0?null:t}};Zt.startTransition=function(e){var t=n0.transition;n0.transition={};try{e()}finally{n0.transition=t}};Zt.unstable_act=_4;Zt.useCallback=function(e,t){return Na.current.useCallback(e,t)};Zt.useContext=function(e){return Na.current.useContext(e)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(e){return Na.current.useDeferredValue(e)};Zt.useEffect=function(e,t){return Na.current.useEffect(e,t)};Zt.useId=function(){return Na.current.useId()};Zt.useImperativeHandle=function(e,t,r){return Na.current.useImperativeHandle(e,t,r)};Zt.useInsertionEffect=function(e,t){return Na.current.useInsertionEffect(e,t)};Zt.useLayoutEffect=function(e,t){return Na.current.useLayoutEffect(e,t)};Zt.useMemo=function(e,t){return Na.current.useMemo(e,t)};Zt.useReducer=function(e,t,r){return Na.current.useReducer(e,t,r)};Zt.useRef=function(e){return Na.current.useRef(e)};Zt.useState=function(e){return Na.current.useState(e)};Zt.useSyncExternalStore=function(e,t,r){return Na.current.useSyncExternalStore(e,t,r)};Zt.useTransition=function(){return Na.current.useTransition()};Zt.version="18.3.1";y4.exports=Zt;var C=y4.exports;const Q=Br(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN=C,eO=Symbol.for("react.element"),tO=Symbol.for("react.fragment"),rO=Object.prototype.hasOwnProperty,nO=JN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aO={key:!0,ref:!0,__self:!0,__source:!0};function P4(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)rO.call(t,n)&&!aO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:eO,type:e,key:i,ref:o,props:a,_owner:nO.current}}Zh.Fragment=tO;Zh.jsx=P4;Zh.jsxs=P4;m4.exports=Zh;var l=m4.exports,Vm={},C4={exports:{}},qa={},N4={exports:{}},O4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,H){var Z=L.length;L.push(H);e:for(;0<Z;){var te=Z-1>>>1,K=L[te];if(0<a(K,H))L[te]=H,L[Z]=K,Z=te;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var H=L[0],Z=L.pop();if(Z!==H){L[0]=Z;e:for(var te=0,K=L.length,q=K>>>1;te<q;){var J=2*(te+1)-1,ve=L[J],ie=J+1,pe=L[ie];if(0>a(ve,Z))ie<K&&0>a(pe,ve)?(L[te]=pe,L[ie]=Z,te=ie):(L[te]=ve,L[J]=Z,te=J);else if(ie<K&&0>a(pe,Z))L[te]=pe,L[ie]=Z,te=ie;else break e}}return H}function a(L,H){var Z=L.sortIndex-H.sortIndex;return Z!==0?Z:L.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],u=[],f=1,d=null,p=3,m=!1,x=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=L)n(u),H.sortIndex=H.expirationTime,t(c,H);else break;H=r(u)}}function P(L){if(b=!1,w(L),!x)if(r(c)!==null)x=!0,z(S);else{var H=r(u);H!==null&&I(P,H.startTime-L)}}function S(L,H){x=!1,b&&(b=!1,v(A),A=-1),m=!0;var Z=p;try{for(w(H),d=r(c);d!==null&&(!(d.expirationTime>H)||L&&!T());){var te=d.callback;if(typeof te=="function"){d.callback=null,p=d.priorityLevel;var K=te(d.expirationTime<=H);H=e.unstable_now(),typeof K=="function"?d.callback=K:d===r(c)&&n(c),w(H)}else n(c);d=r(c)}if(d!==null)var q=!0;else{var J=r(u);J!==null&&I(P,J.startTime-H),q=!1}return q}finally{d=null,p=Z,m=!1}}var j=!1,O=null,A=-1,$=5,E=-1;function T(){return!(e.unstable_now()-E<$)}function B(){if(O!==null){var L=e.unstable_now();E=L;var H=!0;try{H=O(!0,L)}finally{H?U():(j=!1,O=null)}}else j=!1}var U;if(typeof y=="function")U=function(){y(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=B,U=function(){G.postMessage(null)}}else U=function(){k(B,0)};function z(L){O=L,j||(j=!0,U())}function I(L,H){A=k(function(){L(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,z(S))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(L){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var Z=p;p=H;try{return L()}finally{p=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Z=p;p=L;try{return H()}finally{p=Z}},e.unstable_scheduleCallback=function(L,H,Z){var te=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?te+Z:te):Z=te,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Z+K,L={id:f++,callback:H,priorityLevel:L,startTime:Z,expirationTime:K,sortIndex:-1},Z>te?(L.sortIndex=Z,t(u,L),r(c)===null&&L===r(u)&&(b?(v(A),A=-1):b=!0,I(P,Z-te))):(L.sortIndex=K,t(c,L),x||m||(x=!0,z(S))),L},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(L){var H=p;return function(){var Z=p;p=H;try{return L.apply(this,arguments)}finally{p=Z}}}})(O4);N4.exports=O4;var iO=N4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO=C,Ka=iO;function Oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M4=new Set,Yu={};function pl(e,t){oc(e,t),oc(e+"Capture",t)}function oc(e,t){for(Yu[e]=t,e=0;e<t.length;e++)M4.add(t[e])}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hm=Object.prototype.hasOwnProperty,sO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ub={},Gb={};function lO(e){return Hm.call(Gb,e)?!0:Hm.call(Ub,e)?!1:sO.test(e)?Gb[e]=!0:(Ub[e]=!0,!1)}function cO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uO(e,t,r,n){if(t===null||typeof t>"u"||cO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oa(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var la={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){la[e]=new Oa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];la[t]=new Oa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){la[e]=new Oa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){la[e]=new Oa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){la[e]=new Oa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){la[e]=new Oa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){la[e]=new Oa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){la[e]=new Oa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){la[e]=new Oa(e,5,!1,e.toLowerCase(),null,!1,!1)});var Px=/[\-:]([a-z])/g;function Cx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Px,Cx);la[t]=new Oa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Px,Cx);la[t]=new Oa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Px,Cx);la[t]=new Oa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){la[e]=new Oa(e,1,!1,e.toLowerCase(),null,!1,!1)});la.xlinkHref=new Oa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){la[e]=new Oa(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nx(e,t,r,n){var a=la.hasOwnProperty(t)?la[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uO(t,r,a,n)&&(r=null),n||a===null?lO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var No=oO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kd=Symbol.for("react.element"),Dl=Symbol.for("react.portal"),Rl=Symbol.for("react.fragment"),Ox=Symbol.for("react.strict_mode"),Xm=Symbol.for("react.profiler"),A4=Symbol.for("react.provider"),T4=Symbol.for("react.context"),Mx=Symbol.for("react.forward_ref"),Km=Symbol.for("react.suspense"),qm=Symbol.for("react.suspense_list"),Ax=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),E4=Symbol.for("react.offscreen"),Wb=Symbol.iterator;function lu(e){return e===null||typeof e!="object"?null:(e=Wb&&e[Wb]||e["@@iterator"],typeof e=="function"?e:null)}var pn=Object.assign,Mg;function Nu(e){if(Mg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mg=t&&t[1]||""}return`
`+Mg+e}var Ag=!1;function Tg(e,t){if(!e||Ag)return"";Ag=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=s);break}}}finally{Ag=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Nu(e):""}function fO(e){switch(e.tag){case 5:return Nu(e.type);case 16:return Nu("Lazy");case 13:return Nu("Suspense");case 19:return Nu("SuspenseList");case 0:case 2:case 15:return e=Tg(e.type,!1),e;case 11:return e=Tg(e.type.render,!1),e;case 1:return e=Tg(e.type,!0),e;default:return""}}function Ym(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rl:return"Fragment";case Dl:return"Portal";case Xm:return"Profiler";case Ox:return"StrictMode";case Km:return"Suspense";case qm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case T4:return(e.displayName||"Context")+".Consumer";case A4:return(e._context.displayName||"Context")+".Provider";case Mx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ax:return t=e.displayName||null,t!==null?t:Ym(e.type)||"Memo";case Ro:t=e._payload,e=e._init;try{return Ym(e(t))}catch{}}return null}function dO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ym(t);case 8:return t===Ox?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hO(e){var t=$4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sd(e){e._valueTracker||(e._valueTracker=hO(e))}function D4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$4(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function y0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zm(e,t){var r=t.checked;return pn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Vb(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=us(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function R4(e,t){t=t.checked,t!=null&&Nx(e,"checked",t,!1)}function Qm(e,t){R4(e,t);var r=us(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Jm(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hb(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Jm(e,t,r){(t!=="number"||y0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ou=Array.isArray;function Yl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+us(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ey(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return pn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xb(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Oe(92));if(Ou(r)){if(1<r.length)throw Error(Oe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:us(r)}}function I4(e,t){var r=us(t.value),n=us(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Kb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function L4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ty(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?L4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jd,F4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jd=jd||document.createElement("div"),jd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pO=["Webkit","ms","Moz","O"];Object.keys(Eu).forEach(function(e){pO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Eu[t]=Eu[e]})});function B4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Eu.hasOwnProperty(e)&&Eu[e]?(""+t).trim():t+"px"}function z4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=B4(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var gO=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ry(e,t){if(t){if(gO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function ny(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ay=null;function Tx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var iy=null,Zl=null,Ql=null;function qb(e){if(e=td(e)){if(typeof iy!="function")throw Error(Oe(280));var t=e.stateNode;t&&(t=rp(t),iy(e.stateNode,e.type,t))}}function U4(e){Zl?Ql?Ql.push(e):Ql=[e]:Zl=e}function G4(){if(Zl){var e=Zl,t=Ql;if(Ql=Zl=null,qb(e),t)for(e=0;e<t.length;e++)qb(t[e])}}function W4(e,t){return e(t)}function V4(){}var Eg=!1;function H4(e,t,r){if(Eg)return e(t,r);Eg=!0;try{return W4(e,t,r)}finally{Eg=!1,(Zl!==null||Ql!==null)&&(V4(),G4())}}function Qu(e,t){var r=e.stateNode;if(r===null)return null;var n=rp(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Oe(231,t,typeof r));return r}var oy=!1;if(wo)try{var cu={};Object.defineProperty(cu,"passive",{get:function(){oy=!0}}),window.addEventListener("test",cu,cu),window.removeEventListener("test",cu,cu)}catch{oy=!1}function mO(e,t,r,n,a,i,o,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var $u=!1,v0=null,x0=!1,sy=null,yO={onError:function(e){$u=!0,v0=e}};function vO(e,t,r,n,a,i,o,s,c){$u=!1,v0=null,mO.apply(yO,arguments)}function xO(e,t,r,n,a,i,o,s,c){if(vO.apply(this,arguments),$u){if($u){var u=v0;$u=!1,v0=null}else throw Error(Oe(198));x0||(x0=!0,sy=u)}}function gl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function X4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yb(e){if(gl(e)!==e)throw Error(Oe(188))}function bO(e){var t=e.alternate;if(!t){if(t=gl(e),t===null)throw Error(Oe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Yb(a),e;if(i===n)return Yb(a),t;i=i.sibling}throw Error(Oe(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(Oe(189))}}if(r.alternate!==n)throw Error(Oe(190))}if(r.tag!==3)throw Error(Oe(188));return r.stateNode.current===r?e:t}function K4(e){return e=bO(e),e!==null?q4(e):null}function q4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=q4(e);if(t!==null)return t;e=e.sibling}return null}var Y4=Ka.unstable_scheduleCallback,Zb=Ka.unstable_cancelCallback,wO=Ka.unstable_shouldYield,kO=Ka.unstable_requestPaint,Cn=Ka.unstable_now,SO=Ka.unstable_getCurrentPriorityLevel,Ex=Ka.unstable_ImmediatePriority,Z4=Ka.unstable_UserBlockingPriority,b0=Ka.unstable_NormalPriority,jO=Ka.unstable_LowPriority,Q4=Ka.unstable_IdlePriority,Qh=null,Hi=null;function _O(e){if(Hi&&typeof Hi.onCommitFiberRoot=="function")try{Hi.onCommitFiberRoot(Qh,e,void 0,(e.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:NO,PO=Math.log,CO=Math.LN2;function NO(e){return e>>>=0,e===0?32:31-(PO(e)/CO|0)|0}var _d=64,Pd=4194304;function Mu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w0(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Mu(s):(i&=o,i!==0&&(n=Mu(i)))}else o=r&~a,o!==0?n=Mu(o):i!==0&&(n=Mu(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ti(t),a=1<<r,n|=e[r],t&=~a;return n}function OO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ti(i),s=1<<o,c=a[o];c===-1?(!(s&r)||s&n)&&(a[o]=OO(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}function ly(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function J4(){var e=_d;return _d<<=1,!(_d&4194240)&&(_d=64),e}function $g(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Jf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ti(t),e[t]=r}function AO(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ti(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function $x(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ti(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Mr=0;function e3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var t3,Dx,r3,n3,a3,cy=!1,Cd=[],Qo=null,Jo=null,es=null,Ju=new Map,ef=new Map,Fo=[],TO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qb(e,t){switch(e){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Jo=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Ju.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(t.pointerId)}}function uu(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=td(t),t!==null&&Dx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function EO(e,t,r,n,a){switch(t){case"focusin":return Qo=uu(Qo,e,t,r,n,a),!0;case"dragenter":return Jo=uu(Jo,e,t,r,n,a),!0;case"mouseover":return es=uu(es,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ju.set(i,uu(Ju.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ef.set(i,uu(ef.get(i)||null,e,t,r,n,a)),!0}return!1}function i3(e){var t=Ds(e.target);if(t!==null){var r=gl(t);if(r!==null){if(t=r.tag,t===13){if(t=X4(r),t!==null){e.blockedOn=t,a3(e.priority,function(){r3(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function a0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=uy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ay=n,r.target.dispatchEvent(n),ay=null}else return t=td(r),t!==null&&Dx(t),e.blockedOn=r,!1;t.shift()}return!0}function Jb(e,t,r){a0(e)&&r.delete(t)}function $O(){cy=!1,Qo!==null&&a0(Qo)&&(Qo=null),Jo!==null&&a0(Jo)&&(Jo=null),es!==null&&a0(es)&&(es=null),Ju.forEach(Jb),ef.forEach(Jb)}function fu(e,t){e.blockedOn===t&&(e.blockedOn=null,cy||(cy=!0,Ka.unstable_scheduleCallback(Ka.unstable_NormalPriority,$O)))}function tf(e){function t(a){return fu(a,e)}if(0<Cd.length){fu(Cd[0],e);for(var r=1;r<Cd.length;r++){var n=Cd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Qo!==null&&fu(Qo,e),Jo!==null&&fu(Jo,e),es!==null&&fu(es,e),Ju.forEach(t),ef.forEach(t),r=0;r<Fo.length;r++)n=Fo[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Fo.length&&(r=Fo[0],r.blockedOn===null);)i3(r),r.blockedOn===null&&Fo.shift()}var Jl=No.ReactCurrentBatchConfig,k0=!0;function DO(e,t,r,n){var a=Mr,i=Jl.transition;Jl.transition=null;try{Mr=1,Rx(e,t,r,n)}finally{Mr=a,Jl.transition=i}}function RO(e,t,r,n){var a=Mr,i=Jl.transition;Jl.transition=null;try{Mr=4,Rx(e,t,r,n)}finally{Mr=a,Jl.transition=i}}function Rx(e,t,r,n){if(k0){var a=uy(e,t,r,n);if(a===null)Wg(e,t,n,S0,r),Qb(e,n);else if(EO(a,e,t,r,n))n.stopPropagation();else if(Qb(e,n),t&4&&-1<TO.indexOf(e)){for(;a!==null;){var i=td(a);if(i!==null&&t3(i),i=uy(e,t,r,n),i===null&&Wg(e,t,n,S0,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Wg(e,t,n,null,r)}}var S0=null;function uy(e,t,r,n){if(S0=null,e=Tx(n),e=Ds(e),e!==null)if(t=gl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=X4(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return S0=e,null}function o3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SO()){case Ex:return 1;case Z4:return 4;case b0:case jO:return 16;case Q4:return 536870912;default:return 16}default:return 16}}var Uo=null,Ix=null,i0=null;function s3(){if(i0)return i0;var e,t=Ix,r=t.length,n,a="value"in Uo?Uo.value:Uo.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return i0=a.slice(e,1<n?1-n:void 0)}function o0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nd(){return!0}function e2(){return!1}function Ya(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nd:e2,this.isPropagationStopped=e2,this}return pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nd)},persist:function(){},isPersistent:Nd}),t}var Uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lx=Ya(Uc),ed=pn({},Uc,{view:0,detail:0}),IO=Ya(ed),Dg,Rg,du,Jh=pn({},ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==du&&(du&&e.type==="mousemove"?(Dg=e.screenX-du.screenX,Rg=e.screenY-du.screenY):Rg=Dg=0,du=e),Dg)},movementY:function(e){return"movementY"in e?e.movementY:Rg}}),t2=Ya(Jh),LO=pn({},Jh,{dataTransfer:0}),FO=Ya(LO),BO=pn({},ed,{relatedTarget:0}),Ig=Ya(BO),zO=pn({},Uc,{animationName:0,elapsedTime:0,pseudoElement:0}),UO=Ya(zO),GO=pn({},Uc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),WO=Ya(GO),VO=pn({},Uc,{data:0}),r2=Ya(VO),HO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KO[e])?!!t[e]:!1}function Fx(){return qO}var YO=pn({},ed,{key:function(e){if(e.key){var t=HO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=o0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?XO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fx,charCode:function(e){return e.type==="keypress"?o0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?o0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ZO=Ya(YO),QO=pn({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n2=Ya(QO),JO=pn({},ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fx}),eM=Ya(JO),tM=pn({},Uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),rM=Ya(tM),nM=pn({},Jh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aM=Ya(nM),iM=[9,13,27,32],Bx=wo&&"CompositionEvent"in window,Du=null;wo&&"documentMode"in document&&(Du=document.documentMode);var oM=wo&&"TextEvent"in window&&!Du,l3=wo&&(!Bx||Du&&8<Du&&11>=Du),a2=" ",i2=!1;function c3(e,t){switch(e){case"keyup":return iM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Il=!1;function sM(e,t){switch(e){case"compositionend":return u3(t);case"keypress":return t.which!==32?null:(i2=!0,a2);case"textInput":return e=t.data,e===a2&&i2?null:e;default:return null}}function lM(e,t){if(Il)return e==="compositionend"||!Bx&&c3(e,t)?(e=s3(),i0=Ix=Uo=null,Il=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return l3&&t.locale!=="ko"?null:t.data;default:return null}}var cM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cM[e.type]:t==="textarea"}function f3(e,t,r,n){U4(n),t=j0(t,"onChange"),0<t.length&&(r=new Lx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ru=null,rf=null;function uM(e){k3(e,0)}function ep(e){var t=Bl(e);if(D4(t))return e}function fM(e,t){if(e==="change")return t}var d3=!1;if(wo){var Lg;if(wo){var Fg="oninput"in document;if(!Fg){var s2=document.createElement("div");s2.setAttribute("oninput","return;"),Fg=typeof s2.oninput=="function"}Lg=Fg}else Lg=!1;d3=Lg&&(!document.documentMode||9<document.documentMode)}function l2(){Ru&&(Ru.detachEvent("onpropertychange",h3),rf=Ru=null)}function h3(e){if(e.propertyName==="value"&&ep(rf)){var t=[];f3(t,rf,e,Tx(e)),H4(uM,t)}}function dM(e,t,r){e==="focusin"?(l2(),Ru=t,rf=r,Ru.attachEvent("onpropertychange",h3)):e==="focusout"&&l2()}function hM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ep(rf)}function pM(e,t){if(e==="click")return ep(t)}function gM(e,t){if(e==="input"||e==="change")return ep(t)}function mM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $i=typeof Object.is=="function"?Object.is:mM;function nf(e,t){if($i(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Hm.call(t,a)||!$i(e[a],t[a]))return!1}return!0}function c2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u2(e,t){var r=c2(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=c2(r)}}function p3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?p3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function g3(){for(var e=window,t=y0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=y0(e.document)}return t}function zx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yM(e){var t=g3(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&p3(r.ownerDocument.documentElement,r)){if(n!==null&&zx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=u2(r,i);var o=u2(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vM=wo&&"documentMode"in document&&11>=document.documentMode,Ll=null,fy=null,Iu=null,dy=!1;function f2(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;dy||Ll==null||Ll!==y0(n)||(n=Ll,"selectionStart"in n&&zx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Iu&&nf(Iu,n)||(Iu=n,n=j0(fy,"onSelect"),0<n.length&&(t=new Lx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ll)))}function Od(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fl={animationend:Od("Animation","AnimationEnd"),animationiteration:Od("Animation","AnimationIteration"),animationstart:Od("Animation","AnimationStart"),transitionend:Od("Transition","TransitionEnd")},Bg={},m3={};wo&&(m3=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function tp(e){if(Bg[e])return Bg[e];if(!Fl[e])return e;var t=Fl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in m3)return Bg[e]=t[r];return e}var y3=tp("animationend"),v3=tp("animationiteration"),x3=tp("animationstart"),b3=tp("transitionend"),w3=new Map,d2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(e,t){w3.set(e,t),pl(t,[e])}for(var zg=0;zg<d2.length;zg++){var Ug=d2[zg],xM=Ug.toLowerCase(),bM=Ug[0].toUpperCase()+Ug.slice(1);ds(xM,"on"+bM)}ds(y3,"onAnimationEnd");ds(v3,"onAnimationIteration");ds(x3,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(b3,"onTransitionEnd");oc("onMouseEnter",["mouseout","mouseover"]);oc("onMouseLeave",["mouseout","mouseover"]);oc("onPointerEnter",["pointerout","pointerover"]);oc("onPointerLeave",["pointerout","pointerover"]);pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Au));function h2(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,xO(n,t,void 0,e),e.currentTarget=null}function k3(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==i&&a.isPropagationStopped())break e;h2(a,s,u),i=c}else for(o=0;o<n.length;o++){if(s=n[o],c=s.instance,u=s.currentTarget,s=s.listener,c!==i&&a.isPropagationStopped())break e;h2(a,s,u),i=c}}}if(x0)throw e=sy,x0=!1,sy=null,e}function Zr(e,t){var r=t[yy];r===void 0&&(r=t[yy]=new Set);var n=e+"__bubble";r.has(n)||(S3(t,e,2,!1),r.add(n))}function Gg(e,t,r){var n=0;t&&(n|=4),S3(r,e,n,t)}var Md="_reactListening"+Math.random().toString(36).slice(2);function af(e){if(!e[Md]){e[Md]=!0,M4.forEach(function(r){r!=="selectionchange"&&(wM.has(r)||Gg(r,!1,e),Gg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Md]||(t[Md]=!0,Gg("selectionchange",!1,t))}}function S3(e,t,r,n){switch(o3(t)){case 1:var a=DO;break;case 4:a=RO;break;default:a=Rx}r=a.bind(null,t,r,e),a=void 0,!oy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Wg(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;s!==null;){if(o=Ds(s),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}s=s.parentNode}}n=n.return}H4(function(){var u=i,f=Tx(r),d=[];e:{var p=w3.get(e);if(p!==void 0){var m=Lx,x=e;switch(e){case"keypress":if(o0(r)===0)break e;case"keydown":case"keyup":m=ZO;break;case"focusin":x="focus",m=Ig;break;case"focusout":x="blur",m=Ig;break;case"beforeblur":case"afterblur":m=Ig;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=t2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=FO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=eM;break;case y3:case v3:case x3:m=UO;break;case b3:m=rM;break;case"scroll":m=IO;break;case"wheel":m=aM;break;case"copy":case"cut":case"paste":m=WO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=n2}var b=(t&4)!==0,k=!b&&e==="scroll",v=b?p!==null?p+"Capture":null:p;b=[];for(var y=u,w;y!==null;){w=y;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,v!==null&&(P=Qu(y,v),P!=null&&b.push(of(y,P,w)))),k)break;y=y.return}0<b.length&&(p=new m(p,x,null,r,f),d.push({event:p,listeners:b}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==ay&&(x=r.relatedTarget||r.fromElement)&&(Ds(x)||x[ko]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=u,x=x?Ds(x):null,x!==null&&(k=gl(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(b=t2,P="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(b=n2,P="onPointerLeave",v="onPointerEnter",y="pointer"),k=m==null?p:Bl(m),w=x==null?p:Bl(x),p=new b(P,y+"leave",m,r,f),p.target=k,p.relatedTarget=w,P=null,Ds(f)===u&&(b=new b(v,y+"enter",x,r,f),b.target=w,b.relatedTarget=k,P=b),k=P,m&&x)t:{for(b=m,v=x,y=0,w=b;w;w=Ol(w))y++;for(w=0,P=v;P;P=Ol(P))w++;for(;0<y-w;)b=Ol(b),y--;for(;0<w-y;)v=Ol(v),w--;for(;y--;){if(b===v||v!==null&&b===v.alternate)break t;b=Ol(b),v=Ol(v)}b=null}else b=null;m!==null&&p2(d,p,m,b,!1),x!==null&&k!==null&&p2(d,k,x,b,!0)}}e:{if(p=u?Bl(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=fM;else if(o2(p))if(d3)S=gM;else{S=hM;var j=dM}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=pM);if(S&&(S=S(e,u))){f3(d,S,r,f);break e}j&&j(e,p,u),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&Jm(p,"number",p.value)}switch(j=u?Bl(u):window,e){case"focusin":(o2(j)||j.contentEditable==="true")&&(Ll=j,fy=u,Iu=null);break;case"focusout":Iu=fy=Ll=null;break;case"mousedown":dy=!0;break;case"contextmenu":case"mouseup":case"dragend":dy=!1,f2(d,r,f);break;case"selectionchange":if(vM)break;case"keydown":case"keyup":f2(d,r,f)}var O;if(Bx)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Il?c3(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(l3&&r.locale!=="ko"&&(Il||A!=="onCompositionStart"?A==="onCompositionEnd"&&Il&&(O=s3()):(Uo=f,Ix="value"in Uo?Uo.value:Uo.textContent,Il=!0)),j=j0(u,A),0<j.length&&(A=new r2(A,e,null,r,f),d.push({event:A,listeners:j}),O?A.data=O:(O=u3(r),O!==null&&(A.data=O)))),(O=oM?sM(e,r):lM(e,r))&&(u=j0(u,"onBeforeInput"),0<u.length&&(f=new r2("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=O))}k3(d,t)})}function of(e,t,r){return{instance:e,listener:t,currentTarget:r}}function j0(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Qu(e,r),i!=null&&n.unshift(of(e,i,a)),i=Qu(e,t),i!=null&&n.push(of(e,i,a))),e=e.return}return n}function Ol(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function p2(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,c=s.alternate,u=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&u!==null&&(s=u,a?(c=Qu(r,i),c!=null&&o.unshift(of(r,c,s))):a||(c=Qu(r,i),c!=null&&o.push(of(r,c,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var kM=/\r\n?/g,SM=/\u0000|\uFFFD/g;function g2(e){return(typeof e=="string"?e:""+e).replace(kM,`
`).replace(SM,"")}function Ad(e,t,r){if(t=g2(t),g2(e)!==t&&r)throw Error(Oe(425))}function _0(){}var hy=null,py=null;function gy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var my=typeof setTimeout=="function"?setTimeout:void 0,jM=typeof clearTimeout=="function"?clearTimeout:void 0,m2=typeof Promise=="function"?Promise:void 0,_M=typeof queueMicrotask=="function"?queueMicrotask:typeof m2<"u"?function(e){return m2.resolve(null).then(e).catch(PM)}:my;function PM(e){setTimeout(function(){throw e})}function Vg(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),tf(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);tf(t)}function ts(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function y2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Gc=Math.random().toString(36).slice(2),Ui="__reactFiber$"+Gc,sf="__reactProps$"+Gc,ko="__reactContainer$"+Gc,yy="__reactEvents$"+Gc,CM="__reactListeners$"+Gc,NM="__reactHandles$"+Gc;function Ds(e){var t=e[Ui];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ko]||r[Ui]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=y2(e);e!==null;){if(r=e[Ui])return r;e=y2(e)}return t}e=r,r=e.parentNode}return null}function td(e){return e=e[Ui]||e[ko],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Oe(33))}function rp(e){return e[sf]||null}var vy=[],zl=-1;function hs(e){return{current:e}}function en(e){0>zl||(e.current=vy[zl],vy[zl]=null,zl--)}function Hr(e,t){zl++,vy[zl]=e.current,e.current=t}var fs={},va=hs(fs),Ra=hs(!1),Qs=fs;function sc(e,t){var r=e.type.contextTypes;if(!r)return fs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ia(e){return e=e.childContextTypes,e!=null}function P0(){en(Ra),en(va)}function v2(e,t,r){if(va.current!==fs)throw Error(Oe(168));Hr(va,t),Hr(Ra,r)}function j3(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Oe(108,dO(e)||"Unknown",a));return pn({},r,n)}function C0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fs,Qs=va.current,Hr(va,e),Hr(Ra,Ra.current),!0}function x2(e,t,r){var n=e.stateNode;if(!n)throw Error(Oe(169));r?(e=j3(e,t,Qs),n.__reactInternalMemoizedMergedChildContext=e,en(Ra),en(va),Hr(va,e)):en(Ra),Hr(Ra,r)}var uo=null,np=!1,Hg=!1;function _3(e){uo===null?uo=[e]:uo.push(e)}function OM(e){np=!0,_3(e)}function ps(){if(!Hg&&uo!==null){Hg=!0;var e=0,t=Mr;try{var r=uo;for(Mr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}uo=null,np=!1}catch(a){throw uo!==null&&(uo=uo.slice(e+1)),Y4(Ex,ps),a}finally{Mr=t,Hg=!1}}return null}var Ul=[],Gl=0,N0=null,O0=0,oi=[],si=0,Js=null,fo=1,ho="";function Ms(e,t){Ul[Gl++]=O0,Ul[Gl++]=N0,N0=e,O0=t}function P3(e,t,r){oi[si++]=fo,oi[si++]=ho,oi[si++]=Js,Js=e;var n=fo;e=ho;var a=32-Ti(n)-1;n&=~(1<<a),r+=1;var i=32-Ti(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,fo=1<<32-Ti(t)+a|r<<a|n,ho=i+e}else fo=1<<i|r<<a|n,ho=e}function Ux(e){e.return!==null&&(Ms(e,1),P3(e,1,0))}function Gx(e){for(;e===N0;)N0=Ul[--Gl],Ul[Gl]=null,O0=Ul[--Gl],Ul[Gl]=null;for(;e===Js;)Js=oi[--si],oi[si]=null,ho=oi[--si],oi[si]=null,fo=oi[--si],oi[si]=null}var Xa=null,Ha=null,sn=!1,Ci=null;function C3(e,t){var r=li(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function b2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xa=e,Ha=ts(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xa=e,Ha=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Js!==null?{id:fo,overflow:ho}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=li(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xa=e,Ha=null,!0):!1;default:return!1}}function xy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function by(e){if(sn){var t=Ha;if(t){var r=t;if(!b2(e,t)){if(xy(e))throw Error(Oe(418));t=ts(r.nextSibling);var n=Xa;t&&b2(e,t)?C3(n,r):(e.flags=e.flags&-4097|2,sn=!1,Xa=e)}}else{if(xy(e))throw Error(Oe(418));e.flags=e.flags&-4097|2,sn=!1,Xa=e}}}function w2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xa=e}function Td(e){if(e!==Xa)return!1;if(!sn)return w2(e),sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gy(e.type,e.memoizedProps)),t&&(t=Ha)){if(xy(e))throw N3(),Error(Oe(418));for(;t;)C3(e,t),t=ts(t.nextSibling)}if(w2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ha=ts(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ha=null}}else Ha=Xa?ts(e.stateNode.nextSibling):null;return!0}function N3(){for(var e=Ha;e;)e=ts(e.nextSibling)}function lc(){Ha=Xa=null,sn=!1}function Wx(e){Ci===null?Ci=[e]:Ci.push(e)}var MM=No.ReactCurrentBatchConfig;function hu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Oe(309));var n=r.stateNode}if(!n)throw Error(Oe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Oe(284));if(!r._owner)throw Error(Oe(290,e))}return e}function Ed(e,t){throw e=Object.prototype.toString.call(t),Error(Oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function k2(e){var t=e._init;return t(e._payload)}function O3(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=is(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,y,w,P){return y===null||y.tag!==6?(y=Jg(w,v.mode,P),y.return=v,y):(y=a(y,w),y.return=v,y)}function c(v,y,w,P){var S=w.type;return S===Rl?f(v,y,w.props.children,P,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ro&&k2(S)===y.type)?(P=a(y,w.props),P.ref=hu(v,y,w),P.return=v,P):(P=h0(w.type,w.key,w.props,null,v.mode,P),P.ref=hu(v,y,w),P.return=v,P)}function u(v,y,w,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=em(w,v.mode,P),y.return=v,y):(y=a(y,w.children||[]),y.return=v,y)}function f(v,y,w,P,S){return y===null||y.tag!==7?(y=Ks(w,v.mode,P,S),y.return=v,y):(y=a(y,w),y.return=v,y)}function d(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Jg(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kd:return w=h0(y.type,y.key,y.props,null,v.mode,w),w.ref=hu(v,null,y),w.return=v,w;case Dl:return y=em(y,v.mode,w),y.return=v,y;case Ro:var P=y._init;return d(v,P(y._payload),w)}if(Ou(y)||lu(y))return y=Ks(y,v.mode,w,null),y.return=v,y;Ed(v,y)}return null}function p(v,y,w,P){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:s(v,y,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kd:return w.key===S?c(v,y,w,P):null;case Dl:return w.key===S?u(v,y,w,P):null;case Ro:return S=w._init,p(v,y,S(w._payload),P)}if(Ou(w)||lu(w))return S!==null?null:f(v,y,w,P,null);Ed(v,w)}return null}function m(v,y,w,P,S){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(w)||null,s(y,v,""+P,S);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case kd:return v=v.get(P.key===null?w:P.key)||null,c(y,v,P,S);case Dl:return v=v.get(P.key===null?w:P.key)||null,u(y,v,P,S);case Ro:var j=P._init;return m(v,y,w,j(P._payload),S)}if(Ou(P)||lu(P))return v=v.get(w)||null,f(y,v,P,S,null);Ed(y,P)}return null}function x(v,y,w,P){for(var S=null,j=null,O=y,A=y=0,$=null;O!==null&&A<w.length;A++){O.index>A?($=O,O=null):$=O.sibling;var E=p(v,O,w[A],P);if(E===null){O===null&&(O=$);break}e&&O&&E.alternate===null&&t(v,O),y=i(E,y,A),j===null?S=E:j.sibling=E,j=E,O=$}if(A===w.length)return r(v,O),sn&&Ms(v,A),S;if(O===null){for(;A<w.length;A++)O=d(v,w[A],P),O!==null&&(y=i(O,y,A),j===null?S=O:j.sibling=O,j=O);return sn&&Ms(v,A),S}for(O=n(v,O);A<w.length;A++)$=m(O,v,A,w[A],P),$!==null&&(e&&$.alternate!==null&&O.delete($.key===null?A:$.key),y=i($,y,A),j===null?S=$:j.sibling=$,j=$);return e&&O.forEach(function(T){return t(v,T)}),sn&&Ms(v,A),S}function b(v,y,w,P){var S=lu(w);if(typeof S!="function")throw Error(Oe(150));if(w=S.call(w),w==null)throw Error(Oe(151));for(var j=S=null,O=y,A=y=0,$=null,E=w.next();O!==null&&!E.done;A++,E=w.next()){O.index>A?($=O,O=null):$=O.sibling;var T=p(v,O,E.value,P);if(T===null){O===null&&(O=$);break}e&&O&&T.alternate===null&&t(v,O),y=i(T,y,A),j===null?S=T:j.sibling=T,j=T,O=$}if(E.done)return r(v,O),sn&&Ms(v,A),S;if(O===null){for(;!E.done;A++,E=w.next())E=d(v,E.value,P),E!==null&&(y=i(E,y,A),j===null?S=E:j.sibling=E,j=E);return sn&&Ms(v,A),S}for(O=n(v,O);!E.done;A++,E=w.next())E=m(O,v,A,E.value,P),E!==null&&(e&&E.alternate!==null&&O.delete(E.key===null?A:E.key),y=i(E,y,A),j===null?S=E:j.sibling=E,j=E);return e&&O.forEach(function(B){return t(v,B)}),sn&&Ms(v,A),S}function k(v,y,w,P){if(typeof w=="object"&&w!==null&&w.type===Rl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case kd:e:{for(var S=w.key,j=y;j!==null;){if(j.key===S){if(S=w.type,S===Rl){if(j.tag===7){r(v,j.sibling),y=a(j,w.props.children),y.return=v,v=y;break e}}else if(j.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ro&&k2(S)===j.type){r(v,j.sibling),y=a(j,w.props),y.ref=hu(v,j,w),y.return=v,v=y;break e}r(v,j);break}else t(v,j);j=j.sibling}w.type===Rl?(y=Ks(w.props.children,v.mode,P,w.key),y.return=v,v=y):(P=h0(w.type,w.key,w.props,null,v.mode,P),P.ref=hu(v,y,w),P.return=v,v=P)}return o(v);case Dl:e:{for(j=w.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(v,y.sibling),y=a(y,w.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=em(w,v.mode,P),y.return=v,v=y}return o(v);case Ro:return j=w._init,k(v,y,j(w._payload),P)}if(Ou(w))return x(v,y,w,P);if(lu(w))return b(v,y,w,P);Ed(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,w),y.return=v,v=y):(r(v,y),y=Jg(w,v.mode,P),y.return=v,v=y),o(v)):r(v,y)}return k}var cc=O3(!0),M3=O3(!1),M0=hs(null),A0=null,Wl=null,Vx=null;function Hx(){Vx=Wl=A0=null}function Xx(e){var t=M0.current;en(M0),e._currentValue=t}function wy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ec(e,t){A0=e,Vx=Wl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($a=!0),e.firstContext=null)}function hi(e){var t=e._currentValue;if(Vx!==e)if(e={context:e,memoizedValue:t,next:null},Wl===null){if(A0===null)throw Error(Oe(308));Wl=e,A0.dependencies={lanes:0,firstContext:e}}else Wl=Wl.next=e;return t}var Rs=null;function Kx(e){Rs===null?Rs=[e]:Rs.push(e)}function A3(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Kx(t)):(r.next=a.next,a.next=r),t.interleaved=r,So(e,n)}function So(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Io=!1;function qx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,dr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,So(e,r)}return a=n.interleaved,a===null?(t.next=t,Kx(n)):(t.next=a.next,a.next=t),n.interleaved=t,So(e,r)}function s0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$x(e,r)}}function S2(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function T0(e,t,r,n){var a=e.updateQueue;Io=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var c=s,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=a.baseState;o=0,f=u=c=null,s=i;do{var p=s.lane,m=s.eventTime;if((n&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var x=e,b=s;switch(p=t,m=r,b.tag){case 1:if(x=b.payload,typeof x=="function"){d=x.call(m,d,p);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,p=typeof x=="function"?x.call(m,d,p):x,p==null)break e;d=pn({},d,p);break e;case 2:Io=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[s]:p.push(s))}else m={eventTime:m,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,o|=p;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;p=s,s=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(f===null&&(c=d),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);tl|=o,e.lanes=o,e.memoizedState=d}}function j2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Oe(191,a));a.call(n)}}}var rd={},Xi=hs(rd),lf=hs(rd),cf=hs(rd);function Is(e){if(e===rd)throw Error(Oe(174));return e}function Yx(e,t){switch(Hr(cf,t),Hr(lf,e),Hr(Xi,rd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ty(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ty(t,e)}en(Xi),Hr(Xi,t)}function uc(){en(Xi),en(lf),en(cf)}function E3(e){Is(cf.current);var t=Is(Xi.current),r=ty(t,e.type);t!==r&&(Hr(lf,e),Hr(Xi,r))}function Zx(e){lf.current===e&&(en(Xi),en(lf))}var dn=hs(0);function E0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xg=[];function Qx(){for(var e=0;e<Xg.length;e++)Xg[e]._workInProgressVersionPrimary=null;Xg.length=0}var l0=No.ReactCurrentDispatcher,Kg=No.ReactCurrentBatchConfig,el=0,hn=null,zn=null,Yn=null,$0=!1,Lu=!1,uf=0,AM=0;function da(){throw Error(Oe(321))}function Jx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$i(e[r],t[r]))return!1;return!0}function e1(e,t,r,n,a,i){if(el=i,hn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,l0.current=e===null||e.memoizedState===null?DM:RM,e=r(n,a),Lu){i=0;do{if(Lu=!1,uf=0,25<=i)throw Error(Oe(301));i+=1,Yn=zn=null,t.updateQueue=null,l0.current=IM,e=r(n,a)}while(Lu)}if(l0.current=D0,t=zn!==null&&zn.next!==null,el=0,Yn=zn=hn=null,$0=!1,t)throw Error(Oe(300));return e}function t1(){var e=uf!==0;return uf=0,e}function zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?hn.memoizedState=Yn=e:Yn=Yn.next=e,Yn}function pi(){if(zn===null){var e=hn.alternate;e=e!==null?e.memoizedState:null}else e=zn.next;var t=Yn===null?hn.memoizedState:Yn.next;if(t!==null)Yn=t,zn=e;else{if(e===null)throw Error(Oe(310));zn=e,e={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Yn===null?hn.memoizedState=Yn=e:Yn=Yn.next=e}return Yn}function ff(e,t){return typeof t=="function"?t(e):t}function qg(e){var t=pi(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var n=zn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,c=null,u=i;do{var f=u.lane;if((el&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(s=c=d,o=n):c=c.next=d,hn.lanes|=f,tl|=f}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=s,$i(n,t.memoizedState)||($a=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,hn.lanes|=i,tl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Yg(e){var t=pi(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);$i(i,t.memoizedState)||($a=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function $3(){}function D3(e,t){var r=hn,n=pi(),a=t(),i=!$i(n.memoizedState,a);if(i&&(n.memoizedState=a,$a=!0),n=n.queue,r1(L3.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Yn!==null&&Yn.memoizedState.tag&1){if(r.flags|=2048,df(9,I3.bind(null,r,n,a,t),void 0,null),Zn===null)throw Error(Oe(349));el&30||R3(r,t,a)}return a}function R3(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function I3(e,t,r,n){t.value=r,t.getSnapshot=n,F3(t)&&B3(e)}function L3(e,t,r){return r(function(){F3(t)&&B3(e)})}function F3(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$i(e,r)}catch{return!0}}function B3(e){var t=So(e,1);t!==null&&Ei(t,e,1,-1)}function _2(e){var t=zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:e},t.queue=e,e=e.dispatch=$M.bind(null,hn,e),[t.memoizedState,e]}function df(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function z3(){return pi().memoizedState}function c0(e,t,r,n){var a=zi();hn.flags|=e,a.memoizedState=df(1|t,r,void 0,n===void 0?null:n)}function ap(e,t,r,n){var a=pi();n=n===void 0?null:n;var i=void 0;if(zn!==null){var o=zn.memoizedState;if(i=o.destroy,n!==null&&Jx(n,o.deps)){a.memoizedState=df(t,r,i,n);return}}hn.flags|=e,a.memoizedState=df(1|t,r,i,n)}function P2(e,t){return c0(8390656,8,e,t)}function r1(e,t){return ap(2048,8,e,t)}function U3(e,t){return ap(4,2,e,t)}function G3(e,t){return ap(4,4,e,t)}function W3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function V3(e,t,r){return r=r!=null?r.concat([e]):null,ap(4,4,W3.bind(null,t,e),r)}function n1(){}function H3(e,t){var r=pi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function X3(e,t){var r=pi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function K3(e,t,r){return el&21?($i(r,t)||(r=J4(),hn.lanes|=r,tl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$a=!0),e.memoizedState=r)}function TM(e,t){var r=Mr;Mr=r!==0&&4>r?r:4,e(!0);var n=Kg.transition;Kg.transition={};try{e(!1),t()}finally{Mr=r,Kg.transition=n}}function q3(){return pi().memoizedState}function EM(e,t,r){var n=as(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Y3(e))Z3(t,r);else if(r=A3(e,t,r,n),r!==null){var a=Ca();Ei(r,e,n,a),Q3(r,t,n)}}function $M(e,t,r){var n=as(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Y3(e))Z3(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,$i(s,o)){var c=t.interleaved;c===null?(a.next=a,Kx(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=A3(e,t,a,n),r!==null&&(a=Ca(),Ei(r,e,n,a),Q3(r,t,n))}}function Y3(e){var t=e.alternate;return e===hn||t!==null&&t===hn}function Z3(e,t){Lu=$0=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Q3(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$x(e,r)}}var D0={readContext:hi,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useInsertionEffect:da,useLayoutEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useMutableSource:da,useSyncExternalStore:da,useId:da,unstable_isNewReconciler:!1},DM={readContext:hi,useCallback:function(e,t){return zi().memoizedState=[e,t===void 0?null:t],e},useContext:hi,useEffect:P2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,c0(4194308,4,W3.bind(null,t,e),r)},useLayoutEffect:function(e,t){return c0(4194308,4,e,t)},useInsertionEffect:function(e,t){return c0(4,2,e,t)},useMemo:function(e,t){var r=zi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=zi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=EM.bind(null,hn,e),[n.memoizedState,e]},useRef:function(e){var t=zi();return e={current:e},t.memoizedState=e},useState:_2,useDebugValue:n1,useDeferredValue:function(e){return zi().memoizedState=e},useTransition:function(){var e=_2(!1),t=e[0];return e=TM.bind(null,e[1]),zi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=hn,a=zi();if(sn){if(r===void 0)throw Error(Oe(407));r=r()}else{if(r=t(),Zn===null)throw Error(Oe(349));el&30||R3(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,P2(L3.bind(null,n,i,e),[e]),n.flags|=2048,df(9,I3.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=zi(),t=Zn.identifierPrefix;if(sn){var r=ho,n=fo;r=(n&~(1<<32-Ti(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=uf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=AM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},RM={readContext:hi,useCallback:H3,useContext:hi,useEffect:r1,useImperativeHandle:V3,useInsertionEffect:U3,useLayoutEffect:G3,useMemo:X3,useReducer:qg,useRef:z3,useState:function(){return qg(ff)},useDebugValue:n1,useDeferredValue:function(e){var t=pi();return K3(t,zn.memoizedState,e)},useTransition:function(){var e=qg(ff)[0],t=pi().memoizedState;return[e,t]},useMutableSource:$3,useSyncExternalStore:D3,useId:q3,unstable_isNewReconciler:!1},IM={readContext:hi,useCallback:H3,useContext:hi,useEffect:r1,useImperativeHandle:V3,useInsertionEffect:U3,useLayoutEffect:G3,useMemo:X3,useReducer:Yg,useRef:z3,useState:function(){return Yg(ff)},useDebugValue:n1,useDeferredValue:function(e){var t=pi();return zn===null?t.memoizedState=e:K3(t,zn.memoizedState,e)},useTransition:function(){var e=Yg(ff)[0],t=pi().memoizedState;return[e,t]},useMutableSource:$3,useSyncExternalStore:D3,useId:q3,unstable_isNewReconciler:!1};function Si(e,t){if(e&&e.defaultProps){t=pn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ky(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:pn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ip={isMounted:function(e){return(e=e._reactInternals)?gl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ca(),a=as(e),i=yo(n,a);i.payload=t,r!=null&&(i.callback=r),t=rs(e,i,a),t!==null&&(Ei(t,e,a,n),s0(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ca(),a=as(e),i=yo(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=rs(e,i,a),t!==null&&(Ei(t,e,a,n),s0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ca(),n=as(e),a=yo(r,n);a.tag=2,t!=null&&(a.callback=t),t=rs(e,a,n),t!==null&&(Ei(t,e,n,r),s0(t,e,n))}};function C2(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!nf(r,n)||!nf(a,i):!0}function J3(e,t,r){var n=!1,a=fs,i=t.contextType;return typeof i=="object"&&i!==null?i=hi(i):(a=Ia(t)?Qs:va.current,n=t.contextTypes,i=(n=n!=null)?sc(e,a):fs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ip,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function N2(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ip.enqueueReplaceState(t,t.state,null)}function Sy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},qx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=hi(i):(i=Ia(t)?Qs:va.current,a.context=sc(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ky(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ip.enqueueReplaceState(a,a.state,null),T0(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function fc(e,t){try{var r="",n=t;do r+=fO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Zg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var LM=typeof WeakMap=="function"?WeakMap:Map;function ej(e,t,r){r=yo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){I0||(I0=!0,$y=n),jy(e,t)},r}function tj(e,t,r){r=yo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){jy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){jy(e,t),typeof n!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function O2(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new LM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=QM.bind(null,e,t,r),t.then(e,e))}function M2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function A2(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=yo(-1,1),t.tag=2,rs(r,t,1))),r.lanes|=1),e)}var FM=No.ReactCurrentOwner,$a=!1;function Sa(e,t,r,n){t.child=e===null?M3(t,null,r,n):cc(t,e.child,r,n)}function T2(e,t,r,n,a){r=r.render;var i=t.ref;return ec(t,a),n=e1(e,t,r,n,i,a),r=t1(),e!==null&&!$a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,jo(e,t,a)):(sn&&r&&Ux(t),t.flags|=1,Sa(e,t,n,a),t.child)}function E2(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!f1(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,rj(e,t,i,n,a)):(e=h0(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:nf,r(o,n)&&e.ref===t.ref)return jo(e,t,a)}return t.flags|=1,e=is(i,n),e.ref=t.ref,e.return=t,t.child=e}function rj(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(nf(i,n)&&e.ref===t.ref)if($a=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&($a=!0);else return t.lanes=e.lanes,jo(e,t,a)}return _y(e,t,r,n,a)}function nj(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(Hl,Ga),Ga|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Hr(Hl,Ga),Ga|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Hr(Hl,Ga),Ga|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Hr(Hl,Ga),Ga|=n;return Sa(e,t,a,r),t.child}function aj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _y(e,t,r,n,a){var i=Ia(r)?Qs:va.current;return i=sc(t,i),ec(t,a),r=e1(e,t,r,n,i,a),n=t1(),e!==null&&!$a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,jo(e,t,a)):(sn&&n&&Ux(t),t.flags|=1,Sa(e,t,r,a),t.child)}function $2(e,t,r,n,a){if(Ia(r)){var i=!0;C0(t)}else i=!1;if(ec(t,a),t.stateNode===null)u0(e,t),J3(t,r,n),Sy(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=hi(u):(u=Ia(r)?Qs:va.current,u=sc(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||c!==u)&&N2(t,o,n,u),Io=!1;var p=t.memoizedState;o.state=p,T0(t,n,o,a),c=t.memoizedState,s!==n||p!==c||Ra.current||Io?(typeof f=="function"&&(ky(t,r,f,n),c=t.memoizedState),(s=Io||C2(t,r,s,n,p,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,T3(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Si(t.type,s),o.props=u,d=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=hi(c):(c=Ia(r)?Qs:va.current,c=sc(t,c));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==c)&&N2(t,o,n,c),Io=!1,p=t.memoizedState,o.state=p,T0(t,n,o,a);var x=t.memoizedState;s!==d||p!==x||Ra.current||Io?(typeof m=="function"&&(ky(t,r,m,n),x=t.memoizedState),(u=Io||C2(t,r,u,n,p,x,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Py(e,t,r,n,i,a)}function Py(e,t,r,n,a,i){aj(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&x2(t,r,!1),jo(e,t,i);n=t.stateNode,FM.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=cc(t,e.child,null,i),t.child=cc(t,null,s,i)):Sa(e,t,s,i),t.memoizedState=n.state,a&&x2(t,r,!0),t.child}function ij(e){var t=e.stateNode;t.pendingContext?v2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&v2(e,t.context,!1),Yx(e,t.containerInfo)}function D2(e,t,r,n,a){return lc(),Wx(a),t.flags|=256,Sa(e,t,r,n),t.child}var Cy={dehydrated:null,treeContext:null,retryLane:0};function Ny(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,t,r){var n=t.pendingProps,a=dn.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Hr(dn,a&1),e===null)return by(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lp(o,n,0,null),e=Ks(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ny(r),t.memoizedState=Cy,e):a1(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return BM(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=is(a,c),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=is(s,i):(i=Ks(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Ny(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Cy,n}return i=e.child,e=i.sibling,n=is(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function a1(e,t){return t=lp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $d(e,t,r,n){return n!==null&&Wx(n),cc(t,e.child,null,r),e=a1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function BM(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Zg(Error(Oe(422))),$d(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=lp({mode:"visible",children:n.children},a,0,null),i=Ks(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&cc(t,e.child,null,o),t.child.memoizedState=Ny(o),t.memoizedState=Cy,i);if(!(t.mode&1))return $d(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(Oe(419)),n=Zg(i,n,void 0),$d(e,t,o,n)}if(s=(o&e.childLanes)!==0,$a||s){if(n=Zn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,So(e,a),Ei(n,e,a,-1))}return u1(),n=Zg(Error(Oe(421))),$d(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=JM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ha=ts(a.nextSibling),Xa=t,sn=!0,Ci=null,e!==null&&(oi[si++]=fo,oi[si++]=ho,oi[si++]=Js,fo=e.id,ho=e.overflow,Js=t),t=a1(t,n.children),t.flags|=4096,t)}function R2(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),wy(e.return,t,r)}function Qg(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function sj(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Sa(e,t,n.children,r),n=dn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&R2(e,r,t);else if(e.tag===19)R2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Hr(dn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&E0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Qg(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&E0(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Qg(t,!0,r,null,i);break;case"together":Qg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function u0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Oe(153));if(t.child!==null){for(e=t.child,r=is(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=is(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function zM(e,t,r){switch(t.tag){case 3:ij(t),lc();break;case 5:E3(t);break;case 1:Ia(t.type)&&C0(t);break;case 4:Yx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Hr(M0,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Hr(dn,dn.current&1),t.flags|=128,null):r&t.child.childLanes?oj(e,t,r):(Hr(dn,dn.current&1),e=jo(e,t,r),e!==null?e.sibling:null);Hr(dn,dn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return sj(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Hr(dn,dn.current),n)break;return null;case 22:case 23:return t.lanes=0,nj(e,t,r)}return jo(e,t,r)}var lj,Oy,cj,uj;lj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Oy=function(){};cj=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Is(Xi.current);var i=null;switch(r){case"input":a=Zm(e,a),n=Zm(e,n),i=[];break;case"select":a=pn({},a,{value:void 0}),n=pn({},n,{value:void 0}),i=[];break;case"textarea":a=ey(e,a),n=ey(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=_0)}ry(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==s&&(c!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Zr("scroll",e),i||s===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};uj=function(e,t,r,n){r!==n&&(t.flags|=4)};function pu(e,t){if(!sn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ha(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function UM(e,t,r){var n=t.pendingProps;switch(Gx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ha(t),null;case 1:return Ia(t.type)&&P0(),ha(t),null;case 3:return n=t.stateNode,uc(),en(Ra),en(va),Qx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Td(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ci!==null&&(Iy(Ci),Ci=null))),Oy(e,t),ha(t),null;case 5:Zx(t);var a=Is(cf.current);if(r=t.type,e!==null&&t.stateNode!=null)cj(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Oe(166));return ha(t),null}if(e=Is(Xi.current),Td(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ui]=t,n[sf]=i,e=(t.mode&1)!==0,r){case"dialog":Zr("cancel",n),Zr("close",n);break;case"iframe":case"object":case"embed":Zr("load",n);break;case"video":case"audio":for(a=0;a<Au.length;a++)Zr(Au[a],n);break;case"source":Zr("error",n);break;case"img":case"image":case"link":Zr("error",n),Zr("load",n);break;case"details":Zr("toggle",n);break;case"input":Vb(n,i),Zr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Zr("invalid",n);break;case"textarea":Xb(n,i),Zr("invalid",n)}ry(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&Ad(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Ad(n.textContent,s,e),a=["children",""+s]):Yu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Zr("scroll",n)}switch(r){case"input":Sd(n),Hb(n,i,!0);break;case"textarea":Sd(n),Kb(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=_0)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=L4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ui]=t,e[sf]=n,lj(e,t,!1,!1),t.stateNode=e;e:{switch(o=ny(r,n),r){case"dialog":Zr("cancel",e),Zr("close",e),a=n;break;case"iframe":case"object":case"embed":Zr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Au.length;a++)Zr(Au[a],e);a=n;break;case"source":Zr("error",e),a=n;break;case"img":case"image":case"link":Zr("error",e),Zr("load",e),a=n;break;case"details":Zr("toggle",e),a=n;break;case"input":Vb(e,n),a=Zm(e,n),Zr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=pn({},n,{value:void 0}),Zr("invalid",e);break;case"textarea":Xb(e,n),a=ey(e,n),Zr("invalid",e);break;default:a=n}ry(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var c=s[i];i==="style"?z4(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F4(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Zu(e,c):typeof c=="number"&&Zu(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Zr("scroll",e):c!=null&&Nx(e,i,c,o))}switch(r){case"input":Sd(e),Hb(e,n,!1);break;case"textarea":Sd(e),Kb(e);break;case"option":n.value!=null&&e.setAttribute("value",""+us(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Yl(e,!!n.multiple,i,!1):n.defaultValue!=null&&Yl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=_0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ha(t),null;case 6:if(e&&t.stateNode!=null)uj(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Oe(166));if(r=Is(cf.current),Is(Xi.current),Td(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ui]=t,(i=n.nodeValue!==r)&&(e=Xa,e!==null))switch(e.tag){case 3:Ad(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ad(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ui]=t,t.stateNode=n}return ha(t),null;case 13:if(en(dn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(sn&&Ha!==null&&t.mode&1&&!(t.flags&128))N3(),lc(),t.flags|=98560,i=!1;else if(i=Td(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Oe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Oe(317));i[Ui]=t}else lc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ha(t),i=!1}else Ci!==null&&(Iy(Ci),Ci=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||dn.current&1?Gn===0&&(Gn=3):u1())),t.updateQueue!==null&&(t.flags|=4),ha(t),null);case 4:return uc(),Oy(e,t),e===null&&af(t.stateNode.containerInfo),ha(t),null;case 10:return Xx(t.type._context),ha(t),null;case 17:return Ia(t.type)&&P0(),ha(t),null;case 19:if(en(dn),i=t.memoizedState,i===null)return ha(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)pu(i,!1);else{if(Gn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=E0(e),o!==null){for(t.flags|=128,pu(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Hr(dn,dn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Cn()>dc&&(t.flags|=128,n=!0,pu(i,!1),t.lanes=4194304)}else{if(!n)if(e=E0(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),pu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!sn)return ha(t),null}else 2*Cn()-i.renderingStartTime>dc&&r!==1073741824&&(t.flags|=128,n=!0,pu(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Cn(),t.sibling=null,r=dn.current,Hr(dn,n?r&1|2:r&1),t):(ha(t),null);case 22:case 23:return c1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ga&1073741824&&(ha(t),t.subtreeFlags&6&&(t.flags|=8192)):ha(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function GM(e,t){switch(Gx(t),t.tag){case 1:return Ia(t.type)&&P0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uc(),en(Ra),en(va),Qx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zx(t),null;case 13:if(en(dn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));lc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return en(dn),null;case 4:return uc(),null;case 10:return Xx(t.type._context),null;case 22:case 23:return c1(),null;case 24:return null;default:return null}}var Dd=!1,ma=!1,WM=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Vl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){wn(e,t,n)}else r.current=null}function My(e,t,r){try{r()}catch(n){wn(e,t,n)}}var I2=!1;function VM(e,t){if(hy=k0,e=g3(),zx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,c=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var m;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===e)break t;if(p===r&&++u===a&&(s=o),p===i&&++f===n&&(c=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(py={focusedElem:e,selectionRange:r},k0=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){t=qe;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,k=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?b:Si(t.type,b),k);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(P){wn(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}return x=I2,I2=!1,x}function Fu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&My(t,r,i)}a=a.next}while(a!==n)}}function op(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ay(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function fj(e){var t=e.alternate;t!==null&&(e.alternate=null,fj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ui],delete t[sf],delete t[yy],delete t[CM],delete t[NM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dj(e){return e.tag===5||e.tag===3||e.tag===4}function L2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ty(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=_0));else if(n!==4&&(e=e.child,e!==null))for(Ty(e,t,r),e=e.sibling;e!==null;)Ty(e,t,r),e=e.sibling}function Ey(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ey(e,t,r),e=e.sibling;e!==null;)Ey(e,t,r),e=e.sibling}var aa=null,ji=!1;function Eo(e,t,r){for(r=r.child;r!==null;)hj(e,t,r),r=r.sibling}function hj(e,t,r){if(Hi&&typeof Hi.onCommitFiberUnmount=="function")try{Hi.onCommitFiberUnmount(Qh,r)}catch{}switch(r.tag){case 5:ma||Vl(r,t);case 6:var n=aa,a=ji;aa=null,Eo(e,t,r),aa=n,ji=a,aa!==null&&(ji?(e=aa,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):aa.removeChild(r.stateNode));break;case 18:aa!==null&&(ji?(e=aa,r=r.stateNode,e.nodeType===8?Vg(e.parentNode,r):e.nodeType===1&&Vg(e,r),tf(e)):Vg(aa,r.stateNode));break;case 4:n=aa,a=ji,aa=r.stateNode.containerInfo,ji=!0,Eo(e,t,r),aa=n,ji=a;break;case 0:case 11:case 14:case 15:if(!ma&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&My(r,t,o),a=a.next}while(a!==n)}Eo(e,t,r);break;case 1:if(!ma&&(Vl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){wn(r,t,s)}Eo(e,t,r);break;case 21:Eo(e,t,r);break;case 22:r.mode&1?(ma=(n=ma)||r.memoizedState!==null,Eo(e,t,r),ma=n):Eo(e,t,r);break;default:Eo(e,t,r)}}function F2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new WM),t.forEach(function(n){var a=e6.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function wi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:aa=s.stateNode,ji=!1;break e;case 3:aa=s.stateNode.containerInfo,ji=!0;break e;case 4:aa=s.stateNode.containerInfo,ji=!0;break e}s=s.return}if(aa===null)throw Error(Oe(160));hj(i,o,a),aa=null,ji=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){wn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pj(t,e),t=t.sibling}function pj(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wi(t,e),Bi(e),n&4){try{Fu(3,e,e.return),op(3,e)}catch(b){wn(e,e.return,b)}try{Fu(5,e,e.return)}catch(b){wn(e,e.return,b)}}break;case 1:wi(t,e),Bi(e),n&512&&r!==null&&Vl(r,r.return);break;case 5:if(wi(t,e),Bi(e),n&512&&r!==null&&Vl(r,r.return),e.flags&32){var a=e.stateNode;try{Zu(a,"")}catch(b){wn(e,e.return,b)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&R4(a,i),ny(s,o);var u=ny(s,i);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?z4(a,d):f==="dangerouslySetInnerHTML"?F4(a,d):f==="children"?Zu(a,d):Nx(a,f,d,u)}switch(s){case"input":Qm(a,i);break;case"textarea":I4(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Yl(a,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Yl(a,!!i.multiple,i.defaultValue,!0):Yl(a,!!i.multiple,i.multiple?[]:"",!1))}a[sf]=i}catch(b){wn(e,e.return,b)}}break;case 6:if(wi(t,e),Bi(e),n&4){if(e.stateNode===null)throw Error(Oe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){wn(e,e.return,b)}}break;case 3:if(wi(t,e),Bi(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{tf(t.containerInfo)}catch(b){wn(e,e.return,b)}break;case 4:wi(t,e),Bi(e);break;case 13:wi(t,e),Bi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(s1=Cn())),n&4&&F2(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(ma=(u=ma)||f,wi(t,e),ma=u):wi(t,e),Bi(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(qe=e,f=e.child;f!==null;){for(d=qe=f;qe!==null;){switch(p=qe,m=p.child,p.tag){case 0:case 11:case 14:case 15:Fu(4,p,p.return);break;case 1:Vl(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(b){wn(n,r,b)}}break;case 5:Vl(p,p.return);break;case 22:if(p.memoizedState!==null){z2(d);continue}}m!==null?(m.return=p,qe=m):z2(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=B4("display",o))}catch(b){wn(e,e.return,b)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){wn(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wi(t,e),Bi(e),n&4&&F2(e);break;case 21:break;default:wi(t,e),Bi(e)}}function Bi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dj(r)){var n=r;break e}r=r.return}throw Error(Oe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Zu(a,""),n.flags&=-33);var i=L2(e);Ey(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=L2(e);Ty(e,s,o);break;default:throw Error(Oe(161))}}catch(c){wn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function HM(e,t,r){qe=e,gj(e)}function gj(e,t,r){for(var n=(e.mode&1)!==0;qe!==null;){var a=qe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Dd;if(!o){var s=a.alternate,c=s!==null&&s.memoizedState!==null||ma;s=Dd;var u=ma;if(Dd=o,(ma=c)&&!u)for(qe=a;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?U2(a):c!==null?(c.return=o,qe=c):U2(a);for(;i!==null;)qe=i,gj(i),i=i.sibling;qe=a,Dd=s,ma=u}B2(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,qe=i):B2(e)}}function B2(e){for(;qe!==null;){var t=qe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ma||op(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ma)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Si(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&j2(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}j2(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&tf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}ma||t.flags&512&&Ay(t)}catch(p){wn(t,t.return,p)}}if(t===e){qe=null;break}if(r=t.sibling,r!==null){r.return=t.return,qe=r;break}qe=t.return}}function z2(e){for(;qe!==null;){var t=qe;if(t===e){qe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,qe=r;break}qe=t.return}}function U2(e){for(;qe!==null;){var t=qe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{op(4,t)}catch(c){wn(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){wn(t,a,c)}}var i=t.return;try{Ay(t)}catch(c){wn(t,i,c)}break;case 5:var o=t.return;try{Ay(t)}catch(c){wn(t,o,c)}}}catch(c){wn(t,t.return,c)}if(t===e){qe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,qe=s;break}qe=t.return}}var XM=Math.ceil,R0=No.ReactCurrentDispatcher,i1=No.ReactCurrentOwner,fi=No.ReactCurrentBatchConfig,dr=0,Zn=null,Dn=null,sa=0,Ga=0,Hl=hs(0),Gn=0,hf=null,tl=0,sp=0,o1=0,Bu=null,Ta=null,s1=0,dc=1/0,co=null,I0=!1,$y=null,ns=null,Rd=!1,Go=null,L0=0,zu=0,Dy=null,f0=-1,d0=0;function Ca(){return dr&6?Cn():f0!==-1?f0:f0=Cn()}function as(e){return e.mode&1?dr&2&&sa!==0?sa&-sa:MM.transition!==null?(d0===0&&(d0=J4()),d0):(e=Mr,e!==0||(e=window.event,e=e===void 0?16:o3(e.type)),e):1}function Ei(e,t,r,n){if(50<zu)throw zu=0,Dy=null,Error(Oe(185));Jf(e,r,n),(!(dr&2)||e!==Zn)&&(e===Zn&&(!(dr&2)&&(sp|=r),Gn===4&&Bo(e,sa)),La(e,n),r===1&&dr===0&&!(t.mode&1)&&(dc=Cn()+500,np&&ps()))}function La(e,t){var r=e.callbackNode;MO(e,t);var n=w0(e,e===Zn?sa:0);if(n===0)r!==null&&Zb(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Zb(r),t===1)e.tag===0?OM(G2.bind(null,e)):_3(G2.bind(null,e)),_M(function(){!(dr&6)&&ps()}),r=null;else{switch(e3(n)){case 1:r=Ex;break;case 4:r=Z4;break;case 16:r=b0;break;case 536870912:r=Q4;break;default:r=b0}r=Sj(r,mj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function mj(e,t){if(f0=-1,d0=0,dr&6)throw Error(Oe(327));var r=e.callbackNode;if(tc()&&e.callbackNode!==r)return null;var n=w0(e,e===Zn?sa:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=F0(e,n);else{t=n;var a=dr;dr|=2;var i=vj();(Zn!==e||sa!==t)&&(co=null,dc=Cn()+500,Xs(e,t));do try{YM();break}catch(s){yj(e,s)}while(!0);Hx(),R0.current=i,dr=a,Dn!==null?t=0:(Zn=null,sa=0,t=Gn)}if(t!==0){if(t===2&&(a=ly(e),a!==0&&(n=a,t=Ry(e,a))),t===1)throw r=hf,Xs(e,0),Bo(e,n),La(e,Cn()),r;if(t===6)Bo(e,n);else{if(a=e.current.alternate,!(n&30)&&!KM(a)&&(t=F0(e,n),t===2&&(i=ly(e),i!==0&&(n=i,t=Ry(e,i))),t===1))throw r=hf,Xs(e,0),Bo(e,n),La(e,Cn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Oe(345));case 2:As(e,Ta,co);break;case 3:if(Bo(e,n),(n&130023424)===n&&(t=s1+500-Cn(),10<t)){if(w0(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ca(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=my(As.bind(null,e,Ta,co),t);break}As(e,Ta,co);break;case 4:if(Bo(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ti(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Cn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*XM(n/1960))-n,10<n){e.timeoutHandle=my(As.bind(null,e,Ta,co),n);break}As(e,Ta,co);break;case 5:As(e,Ta,co);break;default:throw Error(Oe(329))}}}return La(e,Cn()),e.callbackNode===r?mj.bind(null,e):null}function Ry(e,t){var r=Bu;return e.current.memoizedState.isDehydrated&&(Xs(e,t).flags|=256),e=F0(e,t),e!==2&&(t=Ta,Ta=r,t!==null&&Iy(t)),e}function Iy(e){Ta===null?Ta=e:Ta.push.apply(Ta,e)}function KM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!$i(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bo(e,t){for(t&=~o1,t&=~sp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ti(t),n=1<<r;e[r]=-1,t&=~n}}function G2(e){if(dr&6)throw Error(Oe(327));tc();var t=w0(e,0);if(!(t&1))return La(e,Cn()),null;var r=F0(e,t);if(e.tag!==0&&r===2){var n=ly(e);n!==0&&(t=n,r=Ry(e,n))}if(r===1)throw r=hf,Xs(e,0),Bo(e,t),La(e,Cn()),r;if(r===6)throw Error(Oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,As(e,Ta,co),La(e,Cn()),null}function l1(e,t){var r=dr;dr|=1;try{return e(t)}finally{dr=r,dr===0&&(dc=Cn()+500,np&&ps())}}function rl(e){Go!==null&&Go.tag===0&&!(dr&6)&&tc();var t=dr;dr|=1;var r=fi.transition,n=Mr;try{if(fi.transition=null,Mr=1,e)return e()}finally{Mr=n,fi.transition=r,dr=t,!(dr&6)&&ps()}}function c1(){Ga=Hl.current,en(Hl)}function Xs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,jM(r)),Dn!==null)for(r=Dn.return;r!==null;){var n=r;switch(Gx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&P0();break;case 3:uc(),en(Ra),en(va),Qx();break;case 5:Zx(n);break;case 4:uc();break;case 13:en(dn);break;case 19:en(dn);break;case 10:Xx(n.type._context);break;case 22:case 23:c1()}r=r.return}if(Zn=e,Dn=e=is(e.current,null),sa=Ga=t,Gn=0,hf=null,o1=sp=tl=0,Ta=Bu=null,Rs!==null){for(t=0;t<Rs.length;t++)if(r=Rs[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Rs=null}return e}function yj(e,t){do{var r=Dn;try{if(Hx(),l0.current=D0,$0){for(var n=hn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}$0=!1}if(el=0,Yn=zn=hn=null,Lu=!1,uf=0,i1.current=null,r===null||r.return===null){Gn=1,hf=t,Dn=null;break}e:{var i=e,o=r.return,s=r,c=t;if(t=sa,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=M2(o);if(m!==null){m.flags&=-257,A2(m,o,s,i,t),m.mode&1&&O2(i,u,t),t=m,c=u;var x=t.updateQueue;if(x===null){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}else{if(!(t&1)){O2(i,u,t),u1();break e}c=Error(Oe(426))}}else if(sn&&s.mode&1){var k=M2(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),A2(k,o,s,i,t),Wx(fc(c,s));break e}}i=c=fc(c,s),Gn!==4&&(Gn=2),Bu===null?Bu=[i]:Bu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=ej(i,c,t);S2(i,v);break e;case 1:s=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ns===null||!ns.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var P=tj(i,s,t);S2(i,P);break e}}i=i.return}while(i!==null)}bj(r)}catch(S){t=S,Dn===r&&r!==null&&(Dn=r=r.return);continue}break}while(!0)}function vj(){var e=R0.current;return R0.current=D0,e===null?D0:e}function u1(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),Zn===null||!(tl&268435455)&&!(sp&268435455)||Bo(Zn,sa)}function F0(e,t){var r=dr;dr|=2;var n=vj();(Zn!==e||sa!==t)&&(co=null,Xs(e,t));do try{qM();break}catch(a){yj(e,a)}while(!0);if(Hx(),dr=r,R0.current=n,Dn!==null)throw Error(Oe(261));return Zn=null,sa=0,Gn}function qM(){for(;Dn!==null;)xj(Dn)}function YM(){for(;Dn!==null&&!wO();)xj(Dn)}function xj(e){var t=kj(e.alternate,e,Ga);e.memoizedProps=e.pendingProps,t===null?bj(e):Dn=t,i1.current=null}function bj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=GM(r,t),r!==null){r.flags&=32767,Dn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gn=6,Dn=null;return}}else if(r=UM(r,t,Ga),r!==null){Dn=r;return}if(t=t.sibling,t!==null){Dn=t;return}Dn=t=e}while(t!==null);Gn===0&&(Gn=5)}function As(e,t,r){var n=Mr,a=fi.transition;try{fi.transition=null,Mr=1,ZM(e,t,r,n)}finally{fi.transition=a,Mr=n}return null}function ZM(e,t,r,n){do tc();while(Go!==null);if(dr&6)throw Error(Oe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Oe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(AO(e,i),e===Zn&&(Dn=Zn=null,sa=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Rd||(Rd=!0,Sj(b0,function(){return tc(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=fi.transition,fi.transition=null;var o=Mr;Mr=1;var s=dr;dr|=4,i1.current=null,VM(e,r),pj(r,e),yM(py),k0=!!hy,py=hy=null,e.current=r,HM(r),kO(),dr=s,Mr=o,fi.transition=i}else e.current=r;if(Rd&&(Rd=!1,Go=e,L0=a),i=e.pendingLanes,i===0&&(ns=null),_O(r.stateNode),La(e,Cn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(I0)throw I0=!1,e=$y,$y=null,e;return L0&1&&e.tag!==0&&tc(),i=e.pendingLanes,i&1?e===Dy?zu++:(zu=0,Dy=e):zu=0,ps(),null}function tc(){if(Go!==null){var e=e3(L0),t=fi.transition,r=Mr;try{if(fi.transition=null,Mr=16>e?16:e,Go===null)var n=!1;else{if(e=Go,Go=null,L0=0,dr&6)throw Error(Oe(331));var a=dr;for(dr|=4,qe=e.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var s=i.deletions;if(s!==null){for(var c=0;c<s.length;c++){var u=s[c];for(qe=u;qe!==null;){var f=qe;switch(f.tag){case 0:case 11:case 15:Fu(8,f,i)}var d=f.child;if(d!==null)d.return=f,qe=d;else for(;qe!==null;){f=qe;var p=f.sibling,m=f.return;if(fj(f),f===u){qe=null;break}if(p!==null){p.return=m,qe=p;break}qe=m}}}var x=i.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fu(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,qe=v;break e}qe=i.return}}var y=e.current;for(qe=y;qe!==null;){o=qe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,qe=w;else e:for(o=y;qe!==null;){if(s=qe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:op(9,s)}}catch(S){wn(s,s.return,S)}if(s===o){qe=null;break e}var P=s.sibling;if(P!==null){P.return=s.return,qe=P;break e}qe=s.return}}if(dr=a,ps(),Hi&&typeof Hi.onPostCommitFiberRoot=="function")try{Hi.onPostCommitFiberRoot(Qh,e)}catch{}n=!0}return n}finally{Mr=r,fi.transition=t}}return!1}function W2(e,t,r){t=fc(r,t),t=ej(e,t,1),e=rs(e,t,1),t=Ca(),e!==null&&(Jf(e,1,t),La(e,t))}function wn(e,t,r){if(e.tag===3)W2(e,e,r);else for(;t!==null;){if(t.tag===3){W2(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ns===null||!ns.has(n))){e=fc(r,e),e=tj(t,e,1),t=rs(t,e,1),e=Ca(),t!==null&&(Jf(t,1,e),La(t,e));break}}t=t.return}}function QM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ca(),e.pingedLanes|=e.suspendedLanes&r,Zn===e&&(sa&r)===r&&(Gn===4||Gn===3&&(sa&130023424)===sa&&500>Cn()-s1?Xs(e,0):o1|=r),La(e,t)}function wj(e,t){t===0&&(e.mode&1?(t=Pd,Pd<<=1,!(Pd&130023424)&&(Pd=4194304)):t=1);var r=Ca();e=So(e,t),e!==null&&(Jf(e,t,r),La(e,r))}function JM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wj(e,r)}function e6(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Oe(314))}n!==null&&n.delete(t),wj(e,r)}var kj;kj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ra.current)$a=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return $a=!1,zM(e,t,r);$a=!!(e.flags&131072)}else $a=!1,sn&&t.flags&1048576&&P3(t,O0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;u0(e,t),e=t.pendingProps;var a=sc(t,va.current);ec(t,r),a=e1(null,t,n,e,a,r);var i=t1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(n)?(i=!0,C0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qx(t),a.updater=ip,t.stateNode=a,a._reactInternals=t,Sy(t,n,e,r),t=Py(null,t,n,!0,i,r)):(t.tag=0,sn&&i&&Ux(t),Sa(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(u0(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=r6(n),e=Si(n,e),a){case 0:t=_y(null,t,n,e,r);break e;case 1:t=$2(null,t,n,e,r);break e;case 11:t=T2(null,t,n,e,r);break e;case 14:t=E2(null,t,n,Si(n.type,e),r);break e}throw Error(Oe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),_y(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),$2(e,t,n,a,r);case 3:e:{if(ij(t),e===null)throw Error(Oe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,T3(e,t),T0(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=fc(Error(Oe(423)),t),t=D2(e,t,n,r,a);break e}else if(n!==a){a=fc(Error(Oe(424)),t),t=D2(e,t,n,r,a);break e}else for(Ha=ts(t.stateNode.containerInfo.firstChild),Xa=t,sn=!0,Ci=null,r=M3(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(lc(),n===a){t=jo(e,t,r);break e}Sa(e,t,n,r)}t=t.child}return t;case 5:return E3(t),e===null&&by(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,gy(n,a)?o=null:i!==null&&gy(n,i)&&(t.flags|=32),aj(e,t),Sa(e,t,o,r),t.child;case 6:return e===null&&by(t),null;case 13:return oj(e,t,r);case 4:return Yx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=cc(t,null,n,r):Sa(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),T2(e,t,n,a,r);case 7:return Sa(e,t,t.pendingProps,r),t.child;case 8:return Sa(e,t,t.pendingProps.children,r),t.child;case 12:return Sa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Hr(M0,n._currentValue),n._currentValue=o,i!==null)if($i(i.value,o)){if(i.children===a.children&&!Ra.current){t=jo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=yo(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),wy(i.return,r,t),s.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Oe(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),wy(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sa(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ec(t,r),a=hi(a),n=n(a),t.flags|=1,Sa(e,t,n,r),t.child;case 14:return n=t.type,a=Si(n,t.pendingProps),a=Si(n.type,a),E2(e,t,n,a,r);case 15:return rj(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),u0(e,t),t.tag=1,Ia(n)?(e=!0,C0(t)):e=!1,ec(t,r),J3(t,n,a),Sy(t,n,a,r),Py(null,t,n,!0,e,r);case 19:return sj(e,t,r);case 22:return nj(e,t,r)}throw Error(Oe(156,t.tag))};function Sj(e,t){return Y4(e,t)}function t6(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(e,t,r,n){return new t6(e,t,r,n)}function f1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function r6(e){if(typeof e=="function")return f1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mx)return 11;if(e===Ax)return 14}return 2}function is(e,t){var r=e.alternate;return r===null?(r=li(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function h0(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")f1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Rl:return Ks(r.children,a,i,t);case Ox:o=8,a|=8;break;case Xm:return e=li(12,r,t,a|2),e.elementType=Xm,e.lanes=i,e;case Km:return e=li(13,r,t,a),e.elementType=Km,e.lanes=i,e;case qm:return e=li(19,r,t,a),e.elementType=qm,e.lanes=i,e;case E4:return lp(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A4:o=10;break e;case T4:o=9;break e;case Mx:o=11;break e;case Ax:o=14;break e;case Ro:o=16,n=null;break e}throw Error(Oe(130,e==null?e:typeof e,""))}return t=li(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Ks(e,t,r,n){return e=li(7,e,n,t),e.lanes=r,e}function lp(e,t,r,n){return e=li(22,e,n,t),e.elementType=E4,e.lanes=r,e.stateNode={isHidden:!1},e}function Jg(e,t,r){return e=li(6,e,null,t),e.lanes=r,e}function em(e,t,r){return t=li(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function n6(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$g(0),this.expirationTimes=$g(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$g(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function d1(e,t,r,n,a,i,o,s,c){return e=new n6(e,t,r,s,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=li(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qx(i),e}function a6(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dl,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function jj(e){if(!e)return fs;e=e._reactInternals;e:{if(gl(e)!==e||e.tag!==1)throw Error(Oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ia(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(e.tag===1){var r=e.type;if(Ia(r))return j3(e,r,t)}return t}function _j(e,t,r,n,a,i,o,s,c){return e=d1(r,n,!0,e,a,i,o,s,c),e.context=jj(null),r=e.current,n=Ca(),a=as(r),i=yo(n,a),i.callback=t??null,rs(r,i,a),e.current.lanes=a,Jf(e,a,n),La(e,n),e}function cp(e,t,r,n){var a=t.current,i=Ca(),o=as(a);return r=jj(r),t.context===null?t.context=r:t.pendingContext=r,t=yo(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=rs(a,t,o),e!==null&&(Ei(e,a,o,i),s0(e,a,o)),o}function B0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function V2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function h1(e,t){V2(e,t),(e=e.alternate)&&V2(e,t)}function i6(){return null}var Pj=typeof reportError=="function"?reportError:function(e){console.error(e)};function p1(e){this._internalRoot=e}up.prototype.render=p1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Oe(409));cp(e,t,null,null)};up.prototype.unmount=p1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rl(function(){cp(null,e,null,null)}),t[ko]=null}};function up(e){this._internalRoot=e}up.prototype.unstable_scheduleHydration=function(e){if(e){var t=n3();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Fo.length&&t!==0&&t<Fo[r].priority;r++);Fo.splice(r,0,e),r===0&&i3(e)}};function g1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H2(){}function o6(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=B0(o);i.call(u)}}var o=_j(t,n,e,0,null,!1,!1,"",H2);return e._reactRootContainer=o,e[ko]=o.current,af(e.nodeType===8?e.parentNode:e),rl(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=B0(c);s.call(u)}}var c=d1(e,0,!1,null,null,!1,!1,"",H2);return e._reactRootContainer=c,e[ko]=c.current,af(e.nodeType===8?e.parentNode:e),rl(function(){cp(t,c,r,n)}),c}function dp(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var c=B0(o);s.call(c)}}cp(t,o,e,a)}else o=o6(r,t,e,a,n);return B0(o)}t3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Mu(t.pendingLanes);r!==0&&($x(t,r|1),La(t,Cn()),!(dr&6)&&(dc=Cn()+500,ps()))}break;case 13:rl(function(){var n=So(e,1);if(n!==null){var a=Ca();Ei(n,e,1,a)}}),h1(e,1)}};Dx=function(e){if(e.tag===13){var t=So(e,134217728);if(t!==null){var r=Ca();Ei(t,e,134217728,r)}h1(e,134217728)}};r3=function(e){if(e.tag===13){var t=as(e),r=So(e,t);if(r!==null){var n=Ca();Ei(r,e,t,n)}h1(e,t)}};n3=function(){return Mr};a3=function(e,t){var r=Mr;try{return Mr=e,t()}finally{Mr=r}};iy=function(e,t,r){switch(t){case"input":if(Qm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=rp(n);if(!a)throw Error(Oe(90));D4(n),Qm(n,a)}}}break;case"textarea":I4(e,r);break;case"select":t=r.value,t!=null&&Yl(e,!!r.multiple,t,!1)}};W4=l1;V4=rl;var s6={usingClientEntryPoint:!1,Events:[td,Bl,rp,U4,G4,l1]},gu={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l6={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:No.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=K4(e),e===null?null:e.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance||i6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{Qh=Id.inject(l6),Hi=Id}catch{}}qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s6;qa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g1(t))throw Error(Oe(200));return a6(e,t,null,r)};qa.createRoot=function(e,t){if(!g1(e))throw Error(Oe(299));var r=!1,n="",a=Pj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=d1(e,1,!1,null,null,r,!1,n,a),e[ko]=t.current,af(e.nodeType===8?e.parentNode:e),new p1(t)};qa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Oe(188)):(e=Object.keys(e).join(","),Error(Oe(268,e)));return e=K4(t),e=e===null?null:e.stateNode,e};qa.flushSync=function(e){return rl(e)};qa.hydrate=function(e,t,r){if(!fp(t))throw Error(Oe(200));return dp(null,e,t,!0,r)};qa.hydrateRoot=function(e,t,r){if(!g1(e))throw Error(Oe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Pj;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=_j(t,null,e,1,r??null,a,!1,i,o),e[ko]=t.current,af(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new up(t)};qa.render=function(e,t,r){if(!fp(t))throw Error(Oe(200));return dp(null,e,t,!1,r)};qa.unmountComponentAtNode=function(e){if(!fp(e))throw Error(Oe(40));return e._reactRootContainer?(rl(function(){dp(null,null,e,!1,function(){e._reactRootContainer=null,e[ko]=null})}),!0):!1};qa.unstable_batchedUpdates=l1;qa.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!fp(r))throw Error(Oe(200));if(e==null||e._reactInternals===void 0)throw Error(Oe(38));return dp(e,t,r,!1,n)};qa.version="18.3.1-next-f1338f8080-20240426";function Cj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cj)}catch(e){console.error(e)}}Cj(),C4.exports=qa;var c6=C4.exports,X2=c6;Vm.createRoot=X2.createRoot,Vm.hydrateRoot=X2.hydrateRoot;const os=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[l.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[l.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[l.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),l.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,u6=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:c,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:p,onOpenAbout:m,onShowExif:x,bridgeStatus:b,onBridgeClick:k,isDrLabOpen:v,onToggleDrLab:y,isColorLabOpen:w,onToggleColorLab:P,isFftLabOpen:S,onToggleFftLab:j,isSfrLabOpen:O,onToggleSfrLab:A,onGenerateTestPic:$,onPTCFilesSelected:E,onDownloadDng:T,isThreePlane:B,onOpenDatabase:U,isSidebarOpen:F,onToggleSidebar:G,onOpenSaveZ8:z})=>{const I=C.useRef(null),L=C.useRef(null),[H,Z]=C.useState(!1),[te,K]=C.useState(!1),[q,J]=C.useState(!1),[ve,ie]=C.useState("direct"),pe=C.useRef(null),oe=C.useRef(null);C.useEffect(()=>{const je=Se=>{pe.current&&!pe.current.contains(Se.target)&&K(!1),oe.current&&!oe.current.contains(Se.target)&&J(!1)};return document.addEventListener("mousedown",je),()=>document.removeEventListener("mousedown",je)},[]);const V=je=>{var Se,me;K(!1),je==="direct"?(ie("direct"),(Se=I.current)==null||Se.click()):!b.isConnected||!b.hasDngConverter?Z(!0):(ie("convert"),(me=I.current)==null||me.click())},se=je=>{var me;const Se=(me=je.target.files)==null?void 0:me[0];Se&&e(Se,ve),je.target.value=""},ge=je=>{je.target.files&&je.target.files.length>0&&E(je.target.files),je.target.value=""},le=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return l.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[l.jsx(os,{isOpen:H,onClose:()=>Z(!1),onConfirm:()=>Z(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[l.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),l.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),B&&l.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:b.isConnected?void 0:k,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${b.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:b.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[l.jsx("span",{className:`w-2 h-2 ${b.isConnected?"bg-emerald-600":"bg-pink-600"}`}),b.isConnected?`JiangBridge Ready ${b.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),v&&l.jsxs("button",{onClick:y,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),w&&l.jsxs("button",{onClick:P,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),S&&l.jsxs("button",{onClick:j,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),O&&l.jsxs("button",{onClick:A,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[l.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&l.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[l.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),l.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),l.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),le&&l.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[p&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:je=>s(parseFloat(je.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:je=>{const Se=parseFloat(je.target.value);isNaN(Se)||s(Se)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),l.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:je=>d(parseFloat(je.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:je=>{const Se=parseFloat(je.target.value);isNaN(Se)||d(Se)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),l.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:c*100,onChange:je=>u(parseInt(je.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(c*100),onChange:je=>{const Se=parseInt(je.target.value);isNaN(Se)||u(Math.min(100,Math.max(1,Se))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),l.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),l.jsxs("button",{onClick:T,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[l.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),l.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),l.jsx("input",{type:"file",ref:I,onChange:se,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("input",{type:"file",ref:L,onChange:ge,className:"hidden",multiple:!0,accept:".csv"}),l.jsxs("div",{className:"relative inline-block text-left",ref:oe,children:[l.jsxs("button",{onClick:()=>J(!q),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",l.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${q?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),q&&l.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>{J(!1),z==null||z()},className:"w-full text-left px-4 py-3 text-sm font-bold text-red-600 dark:text-red-400 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsx("span",{children:" Z8 (Save Z8)"})]}),l.jsxs("button",{onClick:()=>{J(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("span",{children:"Generate Pattern DNG"})]}),l.jsxs("button",{onClick:()=>{J(!1),v||y(),S&&j(),w&&P&&P(),O&&A&&A()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),l.jsxs("span",{children:["DR Lab ",v?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{J(!1),P&&!w&&P(),v&&y(),S&&j(),O&&A&&A()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${w?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),l.jsxs("span",{children:["Color Lab ",w?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{J(!1),A&&!O&&A(),v&&y(),S&&j(),w&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${O?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),l.jsxs("span",{children:["SFR Lab ",O?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{J(!1),S||j(),v&&y(),w&&P&&P(),O&&A&&A()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${S?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[l.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),l.jsxs("span",{children:["Stack Lab ",S?"(On)":""]})]}),l.jsxs("button",{onClick:()=>{var je;J(!1),(je=L.current)==null||je.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),l.jsx("span",{children:"Generate PTC & TargetSNR"})]}),l.jsxs("button",{onClick:()=>{J(!1),window.open("https://y-g-jiang.github.io/CP.html","_blank")},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 text-teal-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),l.jsx("span",{children:"Generate MTF Contour"})]})]})})]}),l.jsxs("div",{className:"relative inline-block text-left",ref:pe,children:[l.jsxs("button",{onClick:()=>K(!te),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",l.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${te?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),te&&l.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>V("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[l.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),l.jsx("span",{children:"Load Image (Direct)"})]}),l.jsxs("button",{onClick:()=>V("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),l.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&x&&l.jsxs("button",{onClick:x,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),l.jsx("button",{onClick:m,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),l.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),l.jsxs("button",{onClick:G,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${F?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:F?"Hide Control Panel":"Show Control Panel",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:F?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),l.jsx("span",{className:"hidden sm:inline",children:F?"Hide Panel":"Show Panel"})]})]})]})},f6=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:c="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:p=[],colorLabPoints:m=[],colorLabRects:x=[],sfrRects:b=[]})=>{var ie;const k=C.useRef(null),v=C.useRef(document.createElement("canvas")),[y,w]=C.useState(!1),[P,S]=C.useState({x:0,y:0}),j=C.useRef(null),O=C.useRef(null),A=C.useRef(null),[$,E]=C.useState(!1),[T,B]=C.useState(null),[U,F]=C.useState(null);C.useEffect(()=>{o!==void 0&&F(o)},[o]);const G=C.useCallback(()=>{const pe=k.current,oe=pe==null?void 0:pe.getContext("2d");return{canvas:pe,ctx:oe}},[]);C.useEffect(()=>{const pe=v.current,oe=pe.getContext("2d");if(!e||!oe)return;let V=0,se=0;e instanceof ImageData?(V=e.width,se=e.height):e instanceof HTMLImageElement&&(V=e.naturalWidth,se=e.naturalHeight),!(V===0||se===0)&&((pe.width!==V||pe.height!==se)&&(pe.width=V,pe.height=se),e instanceof ImageData?oe.putImageData(e,0,0):(oe.clearRect(0,0,V,se),oe.drawImage(e,0,0)))},[e]);const z=C.useCallback(()=>{const{canvas:pe,ctx:oe}=G();if(!(!pe||!oe||!e)){if(oe.setTransform(1,0,0,1,0,0),oe.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",oe.fillRect(0,0,pe.width,pe.height),oe.setTransform(t,0,0,t,r.x,r.y),v.current.width>0&&(oe.imageSmoothingEnabled=!1,oe.drawImage(v.current,0,0)),U){oe.strokeStyle="#06b6d4",oe.lineWidth=1/t,oe.fillStyle="rgba(6, 182, 212, 0.2)",oe.beginPath(),oe.rect(U.x,U.y,U.w,U.h),oe.fill(),oe.stroke(),oe.save(),oe.fillStyle="#fff";const V=Math.max(10,14/t);oe.font=`${V}px monospace`,oe.shadowColor="rgba(0,0,0,0.8)",oe.shadowBlur=4,oe.shadowOffsetX=1,oe.shadowOffsetY=1,oe.fillText(`${Math.round(U.w)}x${Math.round(U.h)}`,U.x,U.y-5/t),oe.restore()}if(p&&p.length>0){oe.save(),oe.strokeStyle="#f59e0b",oe.lineWidth=1/t,oe.globalAlpha=.8,oe.beginPath(),p.forEach(ge=>{oe.rect(ge.x,ge.y,ge.w,ge.h)}),oe.stroke();const V=p[0];oe.fillStyle="#f59e0b";const se=Math.max(10,12/t);oe.font=`${se}px monospace`,oe.fillText(`${Math.round(V.w)}x${Math.round(V.h)}`,V.x,V.y-4/t),oe.restore()}if(d&&d.length>0){oe.save();const V=6/t,se=Math.max(12,16/t);oe.font=`bold ${se}px sans-serif`,oe.textAlign="center",oe.textBaseline="middle",d.forEach((ge,le)=>{oe.beginPath(),oe.arc(ge.x,ge.y,V,0,2*Math.PI),oe.fillStyle="white",oe.fill(),oe.strokeStyle="#4338ca",oe.lineWidth=2/t,oe.stroke(),oe.fillStyle="#4338ca",oe.fillText((le+1).toString(),ge.x,ge.y-12/t)}),oe.restore()}if(m&&m.length>0){oe.save();const V=5/t,se=Math.max(10,14/t);oe.font=`bold ${se}px sans-serif`,oe.textAlign="center",oe.textBaseline="middle",m.forEach((ge,le)=>{oe.fillStyle="yellow",oe.fillRect(ge.x-V,ge.y-V,V*2,V*2),oe.strokeStyle="black",oe.lineWidth=1/t,oe.strokeRect(ge.x-V,ge.y-V,V*2,V*2),oe.fillStyle="yellow",oe.shadowColor="black",oe.shadowBlur=2,oe.fillText((le+1).toString(),ge.x,ge.y-10/t)}),oe.restore()}if(x&&x.length>0){if(oe.save(),oe.strokeStyle="yellow",oe.lineWidth=1/t,oe.globalAlpha=.9,oe.beginPath(),x.forEach(V=>{oe.rect(V.x,V.y,V.w,V.h)}),oe.stroke(),x[0]){const V=x[0];oe.fillStyle="yellow",oe.shadowColor="black",oe.shadowBlur=3;const se=Math.max(10,12/t);oe.font=`${se}px monospace`,oe.fillText(`${Math.round(V.w)}x${Math.round(V.h)}`,V.x,V.y-4/t)}oe.restore()}b&&b.length>0&&(oe.save(),oe.strokeStyle="#ef4444",oe.lineWidth=2/t,oe.globalAlpha=.9,oe.beginPath(),b.forEach(V=>{oe.rect(V.x,V.y,V.w,V.h)}),oe.stroke(),oe.restore())}},[G,e,t,r,s,U,p,d,m,x,b]);C.useEffect(()=>{const{canvas:pe}=G();if(!pe)return;const oe=new ResizeObserver(()=>{pe.width=pe.clientWidth,pe.height=pe.clientHeight,z()});return oe.observe(pe),()=>oe.disconnect()},[G,z]),C.useEffect(()=>{z()},[z,e,r,t,s,U,p,d,m,x,b]);const I=pe=>{const{canvas:oe}=G();if(!oe)return{x:0,y:0};const V=oe.getBoundingClientRect();return{x:pe.clientX-V.left,y:pe.clientY-V.top}},L=(pe,oe)=>({x:(pe-r.x)/t,y:(oe-r.y)/t}),H=pe=>{pe.preventDefault();const oe=I(pe);if(u&&f){const V=L(oe.x,oe.y);f(V);return}if(c==="select"||pe.shiftKey){E(!0);const V=L(oe.x,oe.y),se={x:Math.floor(V.x),y:Math.floor(V.y)};B(se),F(null),i&&i(null)}else w(!0),S({x:oe.x-r.x,y:oe.y-r.y})},Z=pe=>{const oe=I(pe);if($&&T){const V=L(oe.x,oe.y),se=Math.floor(V.x),ge=Math.floor(V.y),le=Math.min(T.x,se),je=Math.min(T.y,ge),Se=Math.max(T.x,se),me=Math.max(T.y,ge),he=Se-le+1,Pe=me-je+1;F({x:le,y:je,w:he,h:Pe})}else y&&n({x:oe.x-P.x,y:oe.y-P.y})},te=()=>{$&&(E(!1),U&&i&&U.w>0&&U.h>0&&i(U)),w(!1)},K=pe=>{var oe;if(pe.touches.length===1){const V=pe.touches[0],se=(oe=k.current)==null?void 0:oe.getBoundingClientRect();if(!se)return;const ge=V.clientX-se.left,le=V.clientY-se.top;if(u&&f){const je=L(ge,le);f(je);return}if(c==="select"){const je=L(ge,le),Se={x:Math.floor(je.x),y:Math.floor(je.y)};B(Se),E(!0),F(null),i&&i(null)}else A.current={x:ge,y:le},S({x:ge-r.x,y:le-r.y}),w(!0)}else if(pe.touches.length===2){const V=Math.hypot(pe.touches[0].clientX-pe.touches[1].clientX,pe.touches[0].clientY-pe.touches[1].clientY);j.current=V,O.current=t,w(!1),E(!1)}},q=pe=>{var oe;if(pe.touches.length===1){const V=pe.touches[0],se=(oe=k.current)==null?void 0:oe.getBoundingClientRect();if(!se)return;const ge=V.clientX-se.left,le=V.clientY-se.top;if(u)return;if($&&T){const je=L(ge,le),Se=Math.floor(je.x),me=Math.floor(je.y),he=Math.min(T.x,Se),Pe=Math.min(T.y,me),$e=Math.max(T.x,Se),Ve=Math.max(T.y,me),He=$e-he+1,Je=Ve-Pe+1;F({x:he,y:Pe,w:He,h:Je})}else y&&n({x:ge-P.x,y:le-P.y})}else if(pe.touches.length===2&&j.current&&O.current&&a){const se=Math.hypot(pe.touches[0].clientX-pe.touches[1].clientX,pe.touches[0].clientY-pe.touches[1].clientY)/j.current;a(O.current*se)}},J=()=>{$&&(E(!1),U&&i&&U.w>0&&U.h>0&&i(U)),w(!1),j.current=null,O.current=null,A.current=null},ve=u||c==="select"||(ie=window.event)!=null&&ie.shiftKey?"cursor-crosshair":"cursor-grab active:cursor-grabbing";return l.jsx("canvas",{ref:k,className:`w-full h-full block touch-none ${ve}`,onMouseDown:H,onMouseMove:Z,onMouseUp:te,onMouseLeave:te,onTouchStart:K,onTouchMove:q,onTouchEnd:J,onTouchCancel:J,tabIndex:0})},hc={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},d6="modulepreload",h6=function(e){return"/"+e},K2={},Nj=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=h6(c),c in K2)return;K2[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":d6,u||(d.as="script"),d.crossOrigin="",d.href=c,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function pf(e){const[[t,r,n],[a,i,o],[s,c,u]]=e,f=t*(i*u-o*c)-r*(a*u-o*s)+n*(a*c-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*c)*d,(n*c-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*c-i*s)*d,(r*s-t*c)*d,(t*i-r*a)*d]]}function z0(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class nl{constructor(t){Yr(this,"size");Yr(this,"isPowerOfTwo");Yr(this,"_real");Yr(this,"_imag");Yr(this,"_scratch",null);Yr(this,"_rev",null);Yr(this,"_m",0);Yr(this,"_internalFFT",null);Yr(this,"_chirpReal",null);Yr(this,"_chirpImag",null);Yr(this,"_bReal",null);Yr(this,"_bImag",null);Yr(this,"_hanning",null);Yr(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new nl(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const c=a[s];if(s<c){const u=i[s],f=o[s];i[s]=i[c],o[s]=o[c],i[c]=u,o[c]=f}}else for(let s=0;s<n;s++){const c=a[s];i[s]=t[c],o[s]=r?r[c]:0}for(let s=2;s<=n;s*=2){const c=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let p=0;p<n;p+=s){let m=1,x=0;for(let b=0;b<c;b++){const k=p+b,v=p+b+c,y=m*i[v]-x*o[v],w=m*o[v]+x*i[v],P=i[k],S=o[k];i[k]=P+y,o[k]=S+w,i[v]=P-y,o[v]=S-w;const j=m*f-x*d,O=m*d+x*f;m=j,x=O}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const p=t[d],m=r?r[d]:0,x=this._chirpReal[d],b=this._chirpImag[d];o[d]=p*x-m*b,s[d]=p*b+m*x}i.transformRadix2(o,s);for(let d=0;d<a;d++){const p=i._real[d],m=i._imag[d],x=this._bReal[d],b=this._bImag[d];i._real[d]=p*x-m*b,i._imag[d]=p*b+m*x}const c=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(c,u);const f=1/a;for(let d=0;d<n;d++){const p=i._real[d]*f,m=-i._imag[d]*f,x=this._chirpReal[d],b=this._chirpImag[d];this._real[d]=p*x-m*b,this._imag[d]=p*b+m*x}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const c=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<c;f++){const d=this._real[f],p=this._imag[f];r[f]+=(d*d+p*p)*u}}}function p6(e,t,r,n=!1){const a=new nl(t),i=new nl(r),o=t*r,s=new Float32Array(o),c=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let b=0;b<t;b++)u[b]=.5*(1-Math.cos(2*Math.PI*b/(t-1)));f=new Float32Array(r);for(let b=0;b<r;b++)f[b]=.5*(1-Math.cos(2*Math.PI*b/(r-1)))}for(let b=0;b<r;b++){const k=b*t,v=a._real;let y=0;for(let P=0;P<t;P++)y+=e[k+P];const w=y/t;if(u)for(let P=0;P<t;P++)v[P]=(e[k+P]-w)*u[P];else for(let P=0;P<t;P++)v[P]=e[k+P]-w;a.transform(v);for(let P=0;P<t;P++)s[k+P]=a._real[P],c[k+P]=a._imag[P]}for(let b=0;b<t;b++){const k=i._real,v=i._imag;for(let y=0;y<r;y++){const w=y*t+b;let P=s[w],S=c[w];f&&(P*=f[y],S*=f[y]),k[y]=P,v[y]=S}i.transform(k,v);for(let y=0;y<r;y++){const w=y*t+b;s[w]=i._real[y],c[w]=i._imag[y]}}const d=new Float32Array(o);let p=1,m=t,x=r;if(n&&u&&f){m=0;for(let b=0;b<t;b++)m+=u[b]*u[b];x=0;for(let b=0;b<r;b++)x+=f[b]*f[b]}p=1/(m*x);for(let b=0;b<o;b++)d[b]=(s[b]*s[b]+c[b]*c[b])*p;return d}function g6(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const c=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+c;n[d]=e[f]}return n}function p0(e,t,r,n=[0,0,0,0],a=65535,i="RGGB",o=null){const c=e*t*2,u=8,f=u+c,d="Fake",p="StretchedNoiseCam",m="StretchedNoiseCam",x=G=>{const z=new Uint8Array(G.length+1);for(let I=0;I<G.length;I++)z[I]=G.charCodeAt(I);return z[G.length]=0,z},b=x(d),k=x(p),v=x(m),y=G=>{const z=[0,0,0,0],I={R:0,G:1,B:2},L=G.toUpperCase();for(let H=0;H<4;H++)z[H]=I[L[H]]??1;return z},w=G=>{const z=[];return G.forEach(I=>{z.push(Math.round(I*1e4)),z.push(1e4)}),z},P=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:b.length,value:b},{id:272,type:2,count:k.length,value:k},{id:273,type:4,count:1,value:u},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:c},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:y(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(G=>Math.round(G))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:v.length,value:v}];o&&o.length===9&&(P.push({id:50721,type:10,count:9,value:w(o)}),P.push({id:50778,type:3,count:1,value:21})),P.sort((G,z)=>G.id-z.id);const S=2+P.length*12+4;let j=0;const O=P.map(G=>{let z=1;G.type===3&&(z=2),G.type===4&&(z=4),(G.type===5||G.type===10)&&(z=8);const I=G.count*z,L=I<=4;let H=0;return L||(H=j,j+=I,j%2!==0&&j++),{...G,fits:L,totalBytes:I,extraOffset:H,typeSize:z}}),A=f+S,$=A+j,E=new ArrayBuffer($),T=new DataView(E),B=new Uint8Array(E);T.setUint16(0,18761,!0),T.setUint16(2,42,!0),T.setUint32(4,f,!0);const U=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);B.set(U,u);let F=f;return T.setUint16(F,P.length,!0),F+=2,O.forEach(G=>{if(T.setUint16(F,G.id,!0),T.setUint16(F+2,G.type,!0),T.setUint32(F+4,G.count,!0),G.fits){const z=F+8;Array.isArray(G.value)?G.value.forEach((I,L)=>{G.type===1&&T.setUint8(z+L,I),G.type===3&&T.setUint16(z+L*2,I,!0)}):(G.type===3&&T.setUint16(z,G.value,!0),G.type===4&&T.setUint32(z,G.value,!0))}else{const z=A+G.extraOffset;T.setUint32(F+8,z,!0),G.value instanceof Uint8Array?B.set(G.value,z):Array.isArray(G.value)&&G.value.forEach((I,L)=>{G.type===1&&T.setUint8(z+L,I),G.type===2&&T.setUint8(z+L,I),G.type===3&&T.setUint16(z+L*2,I,!0),G.type===4&&T.setUint32(z+L*4,I,!0),(G.type===5||G.type===10)&&(G.type===10?T.setInt32(z+L*4,I,!0):T.setUint32(z+L*4,I,!0))})}F+=12}),T.setUint32(F,0,!0),E}var hp=typeof self<"u"?self:global;const gf=typeof navigator<"u",m6=gf&&typeof HTMLImageElement>"u",U0=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),pp=hp.Buffer,Ld=hp.BigInt,gp=!!pp,y6=e=>e;function G0(e,t=y6){if(U0)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let m1=hp.fetch;const v6=e=>m1=e;if(!hp.fetch){const e=G0("http",n=>n),t=G0("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:c,pathname:u,protocol:f,search:d}=new URL(n);const p={method:"GET",hostname:c,path:encodeURI(u)+d,headers:a};s!==""&&(p.port=Number(s));const m=(f==="https:"?await t:await e).request(p,x=>{if(x.statusCode===301||x.statusCode===302){let b=new URL(x.headers.location,n).toString();return r(b,{headers:a}).then(i).catch(o)}i({status:x.statusCode,arrayBuffer:()=>new Promise(b=>{let k=[];x.on("data",v=>k.push(v)),x.on("end",()=>b(Buffer.concat(k)))})})});m.on("error",o),m.end()});v6(r)}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const W0=e=>Oj(e)?void 0:e,x6=e=>e!==void 0;function Oj(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(x6).length===0)}function Rn(e){let t=new Error(e);throw delete t.stack,t}function Ls(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function Ly(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Fy=e=>String.fromCharCode.apply(null,e),q2=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function Mj(e){return q2?q2.decode(e):gp?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Fy(e)))}class Ea{static from(t,r){return t instanceof this&&t.le===r?t:new Ea(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Ea){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&Rn("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Rn("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=Ea){return t instanceof DataView||t instanceof Ea?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Rn("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new Ea(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return Mj(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return Fy(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return Fy(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function By(e,t){Rn(`${e} '${t}' was not loaded, try using full build of exifr.`)}let y1=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||By(this.kind,t),r&&(t in r||function(n,a){Rn(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||By(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var Qi=new y1("file parser"),$n=new y1("segment parser"),to=new y1("file reader");function b6(e,t){return typeof e=="string"?Y2(e,t):gf&&!m6&&e instanceof HTMLImageElement?Y2(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Ea(e):gf&&e instanceof Blob?zy(e,t,"blob",il):void Rn("Invalid input argument")}function Y2(e,t){return(r=e).startsWith("data:")||r.length>1e4?Uy(e,t,"base64"):U0&&e.includes("://")?zy(e,t,"url",al):U0?Uy(e,t,"fs"):gf?zy(e,t,"url",al):void Rn("Invalid input argument");var r}async function zy(e,t,r,n){return to.has(r)?Uy(e,t,r):n?async function(a,i){let o=await i(a);return new Ea(o)}(e,n):void Rn(`Parser ${r} is not loaded`)}async function Uy(e,t,r){let n=new(to.get(r))(e,t);return await n.read(),n}const al=e=>m1(e).then(t=>t.arrayBuffer()),il=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class w6 extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function On(e,t,r){let n=new w6;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function ol(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Qn=new Map,Ri=new Map,ss=new Map,Wo=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Wc=["jfif","xmp","icc","iptc","ihdr"],sl=["tiff",...Wc],bn=["ifd0","ifd1","exif","gps","interop"],Vo=[...sl,...bn],Ho=["makerNote","userComment"],Vc=["translateKeys","translateValues","reviveValues","multiSegment"],Xo=[...Vc,"sanitize","mergeOutput","silentErrors"];class Aj{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class mu extends Aj{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),bt(this,"enabled",!1),bt(this,"skip",new Set),bt(this,"pick",new Set),bt(this,"deps",new Set),bt(this,"translateKeys",!1),bt(this,"translateValues",!1),bt(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=bn.includes(t),this.canBeFiltered&&(this.dict=Qn.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Rn(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of Vc)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,V0(this.pick,this.deps)):this.enabled&&this.pick.size>0&&V0(this.pick,this.deps)}}var wa={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Z2=new Map;let ml=class extends Aj{static useCached(t){let r=Z2.get(t);return r!==void 0||(r=new this(t),Z2.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Rn(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=gf?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of Wo)this[t]=wa[t];for(t of Xo)this[t]=wa[t];for(t of Ho)this[t]=wa[t];for(t of Vo)this[t]=new mu(t,wa[t],void 0,this)}setupFromTrue(){let t;for(t of Wo)this[t]=wa[t];for(t of Xo)this[t]=wa[t];for(t of Ho)this[t]=!0;for(t of Vo)this[t]=new mu(t,!0,void 0,this)}setupFromArray(t){let r;for(r of Wo)this[r]=wa[r];for(r of Xo)this[r]=wa[r];for(r of Ho)this[r]=wa[r];for(r of Vo)this[r]=new mu(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,bn)}setupFromObject(t){let r;for(r of(bn.ifd0=bn.ifd0||bn.image,bn.ifd1=bn.ifd1||bn.thumbnail,Object.assign(this,t),Wo))this[r]=tm(t[r],wa[r]);for(r of Xo)this[r]=tm(t[r],wa[r]);for(r of Ho)this[r]=tm(t[r],wa[r]);for(r of sl)this[r]=new mu(r,wa[r],t[r],this);for(r of bn)this[r]=new mu(r,wa[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,bn,Vo),t.tiff===!0?this.batchEnableWithBool(bn,!0):t.tiff===!1?this.batchEnableWithUserValue(bn,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,bn):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,bn)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=Q2(t,n);for(let[o,s]of i)V0(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=Q2(r,n);for(let[o,s]of i)V0(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=bn.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of bn)this[i].finalizeFilters()}get onlyTiff(){return!Wc.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of sl)this[t].enabled&&!$n.has(t)&&By("segment parser",t)}};function Q2(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Qn.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function tm(e,t){return e!==void 0?e:t!==void 0?t:void 0}function V0(e,t){for(let r of t)e.add(r)}bt(ml,"default",wa);class gs{constructor(t){bt(this,"parsers",{}),bt(this,"output",{}),bt(this,"errors",[]),bt(this,"pushToErrors",r=>this.errors.push(r)),this.options=ml.useCached(t)}async read(t){this.file=await b6(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of Qi)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),Rn("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),W0(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=$n.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function mp(e,t){let r=new gs(t);return await r.read(e),r.parse()}var k6=Object.freeze({__proto__:null,parse:mp,Exifr:gs,fileParsers:Qi,segmentParsers:$n,fileReaders:to,tagKeys:Qn,tagValues:Ri,tagRevivers:ss,createDictionary:On,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Wo,otherSegments:Wc,segments:sl,tiffBlocks:bn,segmentsAndBlocks:Vo,tiffExtractables:Ho,inheritables:Vc,allFormatters:Xo,Options:ml});class yp{constructor(t,r,n){bt(this,"errors",[]),bt(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){Rn(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Rn("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new($n.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}let Oi=class{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new ml({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof Ea?t:new Ea(t)}constructor(t,r={},n){bt(this,"errors",[]),bt(this,"raw",new Map),bt(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=ss.get(r),a=Ri.get(r),i=Qn.get(r),o=this.options[r],s=o.reviveValues&&!!n,c=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,p]of t)s&&n.has(d)?p=n.get(d)(p):c&&a.has(d)&&(p=this.translateValue(p,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=p;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}};bt(Oi,"headerLength",4),bt(Oi,"type",void 0),bt(Oi,"multiSegment",!1),bt(Oi,"canHandle",()=>!1);function S6(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function j6(e){return e>=224&&e<=239}function _6(e,t,r){for(let[n,a]of $n)if(a.canHandle(e,t,r))return n}class J2 extends yp{constructor(...t){super(...t),bt(this,"appSegments",[]),bt(this,"jpegSegments",[]),bt(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set($n.keyList())):(t=t===void 0?$n.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&$n.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let c=$n.get(s),u=this.options[s];return c.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:c}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>c&&!u?!await n.readNextChunk(t):!await n.readNextChunk(c),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,c,{file:u,findAll:f,wanted:d,remaining:p,options:m}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),j6(n)){if(a=u.getUint16(t+2),i=_6(u,t,a),i&&d.has(i)&&(o=$n.get(i),s=o.findPosition(u,t),c=m[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&c.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||p.delete(i)):p.delete(i),p.size===0)))break;m.recordUnknownSegments&&(s=Oi.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(S6(n)){if(a=u.getUint16(t+2),n===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let c=0;c<r.length;c++)a=r[c],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=$n.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}bt(J2,"type","jpeg"),Qi.set("jpeg",J2);const P6=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class C6 extends Oi{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,c=this.chunk.getUint16(t);t+=2;for(let u=0;u<c;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=P6[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Rn(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Rn(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return Ls(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let c=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)c[f]=this.parseTagValue(i,t),t+=u;return c}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Rn(`Invalid tiff type ${t}`)}}}class rm extends C6{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Rn("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Rn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,Ly(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Ly(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",ew(...t.get(2),t.get(1))),t.set("longitude",ew(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of bn)if(t=this[r],!Oj(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function ew(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}bt(rm,"type","tiff"),bt(rm,"headerLength",10),$n.set("tiff",rm);var N6=Object.freeze({__proto__:null,default:k6,Exifr:gs,fileParsers:Qi,segmentParsers:$n,fileReaders:to,tagKeys:Qn,tagValues:Ri,tagRevivers:ss,createDictionary:On,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Wo,otherSegments:Wc,segments:sl,tiffBlocks:bn,segmentsAndBlocks:Vo,tiffExtractables:Ho,inheritables:Vc,allFormatters:Xo,Options:ml,parse:mp});const v1={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},x1=Object.assign({},v1,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Tj(e){let t=new gs(x1);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const b1=Object.assign({},v1,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Ej(e){let t=new gs(b1);await t.read(e);let r=await t.extractThumbnail();return r&&gp?pp.from(r):r}async function $j(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const w1=Object.assign({},v1,{firstChunkSize:4e4,ifd0:[274]});async function k1(e){let t=new gs(w1);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const S1=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Fs=!0,Bs=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;Fs=Number(r)+.1*Number(n)<13.4,Bs=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Fs=Bs=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Fs=Bs=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Fs=Bs=Number(t)<77}}async function Dj(e){let t=await k1(e);return Object.assign({canvas:Fs,css:Bs},S1[t])}class O6 extends Ea{constructor(...t){super(...t),bt(this,"ranges",new M6),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=gp?pp.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class M6{constructor(){bt(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>tw(t,o.offset,a)||tw(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function tw(e,t,r){return e<=t&&t<=r}class vp extends O6{constructor(t,r){super(0),bt(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}to.set("blob",class extends vp{async readWhole(){this.chunked=!1;let e=await il(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await il(n);return this.set(a,e,!0)}});var A6=Object.freeze({__proto__:null,default:N6,Exifr:gs,fileParsers:Qi,segmentParsers:$n,fileReaders:to,tagKeys:Qn,tagValues:Ri,tagRevivers:ss,createDictionary:On,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Wo,otherSegments:Wc,segments:sl,tiffBlocks:bn,segmentsAndBlocks:Vo,tiffExtractables:Ho,inheritables:Vc,allFormatters:Xo,Options:ml,parse:mp,gpsOnlyOptions:x1,gps:Tj,thumbnailOnlyOptions:b1,thumbnail:Ej,thumbnailUrl:$j,orientationOnlyOptions:w1,orientation:k1,rotations:S1,get rotateCanvas(){return Fs},get rotateCss(){return Bs},rotation:Dj});to.set("url",class extends vp{async readWhole(){this.chunked=!1;let e=await al(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await m1(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});Ea.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof Ld!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Ld(t)<<Ld(32)|Ld(r)):void Rn("Trying to read 64b value but JS can only handle 53b numbers.")};class T6 extends yp{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class Rj extends T6{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let c=4+this.file.getUint32(o);o+=c,s-=c,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),c=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,p=this.file.getUintBytes(n,d);for(n+=d;p--;){let m=this.file.getUintBytes(n,c);n+=c+u+2+o;let x=this.file.getUint16(n);if(n+=2,m===r)return x>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=x*f}}}class Ij extends Rj{}bt(Ij,"type","heic");class rw extends Rj{}bt(rw,"type","avif"),Qi.set("heic",Ij),Qi.set("avif",rw),On(Qn,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),On(Qn,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),On(Qn,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),On(Ri,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Uu=On(Ri,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const nw={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Uu.set(37392,nw),Uu.set(41488,nw);const nm={0:"Normal",1:"Low",2:"High"};function aw(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function iw(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function am(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function yu(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(ow(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(ow(e[r],e[r+1]));return Ls(String.fromCodePoint(...t))}function ow(e,t){return e<<8|t}Uu.set(41992,nm),Uu.set(41993,nm),Uu.set(41994,nm),On(ss,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?Mj(e):e}],[306,am],[40091,yu],[40092,yu],[40093,yu],[40094,yu],[40095,yu]]),On(ss,"exif",[[40960,iw],[36864,iw],[36867,am],[36868,am],[40962,aw],[40963,aw]]),On(ss,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class im extends Oi{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:Ea.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let c of zj)o[c]=[],s[c]=0;return i.replace(R6,(c,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${c}#${d}`}return`${c}#${o[f].pop()}`})}(t);let r=rc.findAll(t,"rdf","Description");r.length===0&&r.push(new rc("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=D6(o.ns,a),Lj(o,n);return function(i){let o;for(let s in i)o=i[s]=W0(i[s]),o===void 0&&delete i[s];return W0(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}bt(im,"type","xmp"),bt(im,"multiSegment",!0),$n.set("xmp",im);class H0{static findAll(t){return Fj(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(H0.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=Bj(a),new H0(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class rc{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Fj(t,a).map(rc.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new rc(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=H0.findAll(n),this.children=rc.findAll(a),this.value=this.children.length===0?Bj(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return $6(this.children.map(E6));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)Lj(r,t);return this.value!==void 0&&(t.value=this.value),W0(t)}}function Lj(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var E6=e=>e.serialize(),$6=e=>e.length===1?e[0]:e,D6=(e,t)=>t[e]?t[e]:t[e]={};function Fj(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function Bj(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const zj=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],R6=new RegExp(`(<|\\/)(${zj.join("|")})`,"g");var Uj=Object.freeze({__proto__:null,default:A6,Exifr:gs,fileParsers:Qi,segmentParsers:$n,fileReaders:to,tagKeys:Qn,tagValues:Ri,tagRevivers:ss,createDictionary:On,extendDictionary:ol,fetchUrlAsArrayBuffer:al,readBlobAsArrayBuffer:il,chunkedProps:Wo,otherSegments:Wc,segments:sl,tiffBlocks:bn,segmentsAndBlocks:Vo,tiffExtractables:Ho,inheritables:Vc,allFormatters:Xo,Options:ml,parse:mp,gpsOnlyOptions:x1,gps:Tj,thumbnailOnlyOptions:b1,thumbnail:Ej,thumbnailUrl:$j,orientationOnlyOptions:w1,orientation:k1,rotations:S1,get rotateCanvas(){return Fs},get rotateCss(){return Bs},rotation:Dj});let sw=G0("fs",e=>e.promises);to.set("fs",class extends vp{async readWhole(){this.chunked=!1,this.fs=await sw;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await sw,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});to.set("base64",class extends vp{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(gp){let c=pp.from(a,"base64").slice(n,n+s);return this.set(c,e,!0)}{let c=this.subarray(e,s,!0),u=atob(a),f=c.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return c}}});class lw extends yp{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(Ly(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}bt(lw,"type","tiff"),Qi.set("tiff",lw);let I6=G0("zlib");const L6=["ihdr","iccp","text","itxt","exif"];class cw extends yp{constructor(...t){super(...t),bt(this,"catchError",r=>this.errors.push(r)),bt(this,"metaChunks",[]),bt(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,c={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};L6.includes(o)?this.metaChunks.push(c):this.unknownChunks.push(c),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),U0){let s=await I6,c=r.getUint8Array(i);c=s.inflateSync(c),this.injectSegment("icc",c)}}}bt(cw,"type","png"),Qi.set("png",cw),On(Qn,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),ol(Qn,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let uw=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];ol(Qn,"ifd0",uw),ol(Qn,"exif",uw),On(Ri,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class om extends Oi{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}bt(om,"type","jfif"),bt(om,"headerLength",9),$n.set("jfif",om),On(Qn,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class fw extends Oi{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}bt(fw,"type","ihdr"),$n.set("ihdr",fw),On(Qn,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),On(Ri,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class g0 extends Oi{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),c=0;for(let u of a)s.set(u,c),c+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new Ea(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&Rn("ICC header is too short");for(let[r,n]of Object.entries(F6)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),c=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(c,4),r=this.chunk.getUint32(c+4),n=this.chunk.getUint32(c+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),c+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return Ls(this.chunk.getString(t+12,r))}parseText(t,r){return Ls(this.chunk.getString(t+8,r-8))}parseSig(t){return Ls(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let c=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,p=Ls(r.getUnicodeString(d,f));o.push({lang:c,country:u,text:p}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}bt(g0,"type","icc"),bt(g0,"multiSegment",!0),bt(g0,"headerLength",18);const F6={4:oo,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:oo,16:oo,20:oo,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:oo,40:oo,48:oo,52:oo,64:(e,t)=>e.getUint32(t),80:oo};function oo(e,t){return Ls(e.getString(t,4))}$n.set("icc",g0),On(Qn,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Fd={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},dw={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};On(Ri,"icc",[[4,Fd],[12,dw],[40,Object.assign({},Fd,dw)],[48,Fd],[80,Fd],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Bd extends Oi{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}bt(Bd,"type","iptc"),bt(Bd,"translateValues",!1),bt(Bd,"reviveValues",!1),$n.set("iptc",Bd),On(Qn,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),On(Ri,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let sm=null;async function yl(){if(!sm)try{const n=(await Nj(()=>Promise.resolve().then(()=>one),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;sm=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await sm,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const j1=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],ls=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function zd(e,t=0,r=0){const n=await yl(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,c=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((c-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let m=0;m<f/2;m++){const x=m*6+r;if(x+3>=c)break;const b=x*s,k=(x+3)*s,v=m*2,y=v*u,w=(v+1)*u;for(let P=0;P<u/2;P++){const S=P*6+t;if(S+1>=s)break;const j=P*2;d[y+j]=o[b+S+1],d[y+j+1]=o[b+S+0],d[w+j]=o[k+S+0],d[w+j+1]=o[k+S+1]}}return{dngBuffer:p0(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function B6(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,c=r*n,u=new Uint16Array(c);for(let p=0;p<n;p++)for(let m=0;m<r;m++){const x=(p*r+m)*4,b=p*r+m,k=p%2===0,v=m%2===0;let y=0;k&&v?y=s[x]:!k&&!v?y=s[x+2]:y=s[x+1],u[b]=y*64}const f=await new Promise(p=>a.toBlob(p,"image/png"));let d={description:"Standard image (non-RAW)"};try{const p=await Uj.parse(e);p&&(d={...d,...p})}catch(p){console.warn("EXIF parsing failed for standard image",p)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const z6=async e=>{const t=await yl(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const c=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const p=d*3,m=d*4;c.data[m]=u[p],c.data[m+1]=u[p+1],c.data[m+2]=u[p+2],c.data[m+3]=255}s.putImageData(c,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},X0=async e=>{var n,a,i,o,s,c,u,f,d;const t=await yl(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const p=r.getRawImage();let m=new Uint16Array(p.data);const x=await r.metadata(!0);let b={...x};try{const j=await Uj.parse(e.buffer);j&&(b={...b,...j})}catch(j){console.warn("exifr parsing failed for RAW buffer",j)}const k=((n=x.idata)==null?void 0:n.filters)||0,v=((a=x.idata)==null?void 0:a.colors)||0,y=k===0&&v===3,w=k===9;let P=[0,0,0,0],S=!1;if(r.getBlackLevels)try{const j=r.getBlackLevels();j.dng_cblack&&j.dng_cblack.length===4&&Array.from(j.dng_cblack).some(O=>O>0)?(P=Array.from(j.dng_cblack).map(Number),S=!0):j.cblack&&j.cblack.length===4&&Array.from(j.cblack).some(O=>O>0)?(P=Array.from(j.cblack).map(Number),S=!0):typeof j.black=="number"&&j.black>0&&(P=[j.black,j.black,j.black,j.black],S=!0)}catch(j){console.warn("getBlackLevels binding failed",j)}if(!S){let j=[];if((i=x.color_data)!=null&&i.cblack_rawpy_style)j=x.color_data.cblack_rawpy_style;else if((s=(o=x.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)j=x.color_data.dng_levels.dng_cblack;else if(((c=x.black_level_per_channel)==null?void 0:c.length)>=4)j=x.black_level_per_channel;else if(((u=x.cblack)==null?void 0:u.length)>=4)j=x.cblack;else if(((d=(f=x.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)j=x.color.cblack;else{const O=x.black_level||x.color_data&&x.color_data.black||0;j=[O,O,O,O]}P=[Number(j[0])||0,Number(j[1])||0,Number(j[2])||0,Number(j[3])||0]}return{data:m,width:p.width,height:p.height,bayerPattern:x.color_desc||"RGGB",blackLevels:P,whiteLevel:x.white_level||16383,metadata:b,isThreePlane:y,isXTrans:w}}finally{r.delete?r.delete():r.close()}};async function Cs(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([z6(t),X0(r)]);return{previewBlob:n,analysisData:a}}async function pc(e){const t=new Uint8Array(e);return X0(t)}const hw=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function lm(e,t,r,n=!0){const a=await X0(new Uint8Array(e)),i=await X0(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,c=r?hw(o):o,u=r?hw(s):s,f=c*u,d=new Uint16Array(f),p=6e4,m=1.41421356;for(let x=0;x<s;x++){const b=x*o,k=x*c;for(let v=0;v<o;v++){const y=a.data[b+v],w=i.data[b+v];let P=y-w;n&&(P/=m);let S=P+p;S=Math.max(0,Math.min(65535,S)),d[k+v]=Math.round(S)}}return{rawData:d,width:c,height:u,metadata:a.metadata}}function Ns(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),c=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],p=[0,0,0,0],m=[0,0,0,0];for(let k=c;k<f;k++){const v=k*t,y=k%2;for(let w=s;w<u;w++){const P=w%2,S=e[v+w],j=y*2+P;d[j]+=S,p[j]+=S*S,m[j]++}}const x=[0,0,0,0],b=[0,0,0,0];for(let k=0;k<4;k++)if(m[k]>0){const v=d[k]/m[k];x[k]=v;const w=p[k]/m[k]-v*v;b[k]=Math.sqrt(Math.max(0,w))}return{x:s,y:c,width:u-s,height:f-c,means:x,stdDevs:b,pixelCount:m.reduce((k,v)=>k+v,0)}}function U6(e,t,r,n,a,i=!1){const o=Math.floor(Math.max(0,r.x)),s=Math.floor(Math.max(0,r.y)),c=Math.ceil(Math.min(t,r.x+r.w)),u=e.length/t,f=Math.ceil(Math.min(u,r.y+r.h)),d=[0,0,0,0],p=[0,0,0,0];for(let G=s;G<f;G++){const z=G*t,I=G%2;for(let L=o;L<c;L++){const H=L%2,Z=I*2+H,te=e[z+L],K=n[Z]||0;d[Z]+=Math.max(0,te-K),p[Z]++}}let m=0,x=3;i&&(m=3,x=0);const b=p[m]>0?d[m]/p[m]:1,k=(d[1]+d[2])/(p[1]+p[2]||1),v=p[x]>0?d[x]/p[x]:1;if(b<1||k<1||v<1)return[1,1];const y=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]],w=pf(y);if(!w)return console.warn("Color Matrix is not invertible, falling back to standard WB"),[k/b,k/v];const P=z0(j1,w),S=pf(P);let j=1,O=1,A=1;if(S)j=S[0][0]+S[0][1]+S[0][2],O=S[1][0]+S[1][1]+S[1][2],A=S[2][0]+S[2][1]+S[2][2],Math.abs(O)<1e-6&&(O=1);else return console.warn("Final Matrix is not invertible"),[k/b,k/v];const $=k/b,E=k/v,T=j/O,B=A/O,U=$*T,F=E*B;return[Math.max(0,U),Math.max(0,F)]}function pw(e,t,r,n,a,i,o=0,s=0){const c=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),p=a>>1,m=a&1,x=(i>>1)+o,b=(i&1)+s;let k=0,v=0,y=0;for(let A=u;A<d-2;A+=2)for(let $=c;$<f-2;$+=2){const E=(A+p)*t+($+m),T=(A+x)*t+($+b);A+x>=r||$+b>=t||(k+=e[E],v+=e[T],y++)}if(y<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const w=k/y,P=v/y;let S=0,j=0,O=0;for(let A=u;A<d-2;A+=2)for(let $=c;$<f-2;$+=2){const E=(A+p)*t+($+m),T=(A+x)*t+($+b);if(A+x>=r||$+b>=t)continue;const B=e[E],U=e[T],F=B-w,G=U-P;S+=F*G,j+=F*F,O+=G*G}return{sumCov:S,sumVar1:j,sumVar2:O,n:y}}function G6(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function W6(e,t,r,n,a,i,o,s,c,u,f){if(u<=c)return[];const d=Math.max(0,Math.floor(n)),p=Math.max(0,Math.floor(a)),m=Math.min(t,Math.ceil(n+i)),x=Math.min(r,Math.ceil(a+o)),b=u-c,k=f?Math.floor(b)+1:s,v=b/k,y=[new Uint32Array(k),new Uint32Array(k),new Uint32Array(k),new Uint32Array(k)];for(let P=p;P<x;P++){const S=P*t,j=P%2;for(let O=d;O<m;O++){const A=O%2,$=e[S+O];if($<c||$>u)continue;const E=j*2+A;let T;f?T=Math.floor($-c):T=Math.floor(($-c)/v),T<0&&(T=0),T>=k&&(T=k-1),y[E][T]++}}const w=[];for(let P=0;P<k;P++){const S=c+(f?P:P*v);w.push({binStart:S,c0:y[0][P],c1:y[1][P],c2:y[2][P],c3:y[3][P]})}return w}function V6(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},c=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),p=Math.min(t,Math.ceil(n.x+n.w)),m=Math.min(r,Math.ceil(n.y+n.h)),x=p-f,b=m-d;if(x<=1||b<=1)return null;let k=0;for(let T=f;T<p;T++)T%2===(a&1)&&k++;let v=0;for(let T=d;T<m;T++)T%2===a>>1&&v++;if(k<4||v<4)return null;const y=Math.max(1,u),w=Math.floor(2*k/(y+1)),P=Math.floor(2*v/(y+1));if(w<4||P<4)return null;const S=new nl(w),j=new nl(P),O=new Float32Array(Math.floor(w/2)+1),A=new Float32Array(Math.floor(P/2)+1);let $=0,E=0;for(let T=d;T<m;T++){const B=T%2;if(a>>1!==B||s.rows&&(T>>1&1)!==s.rowGroup)continue;const U=T*t,F=new Float32Array(k);let G=0;for(let z=f;z<p;z++)z%2===(a&1)&&G<k&&(F[G++]=e[U+z]);for(let z=0;z<y;z++){const I=Math.floor(z*w/2);if(I+w>k)break;const L=F.slice(I,I+w);S.calculateSpectrum(L,O,o),$++}if(!c)break}for(let T=f;T<p;T++){const B=T%2;if((a&1)!==B||s.cols&&(T>>1&1)!==s.rowGroup)continue;const U=new Float32Array(v);let F=0;for(let G=d;G<m;G++)G%2===a>>1&&F<v&&(U[F++]=e[G*t+T]);for(let G=0;G<y;G++){const z=Math.floor(G*P/2);if(z+P>v)break;const I=U.slice(z,z+P);j.calculateSpectrum(I,A,o),E++}if(!c)break}if($>0)for(let T=0;T<O.length;T++)O[T]/=$;if(E>0)for(let T=0;T<A.length;T++)A[T]/=E;return{avgHoriz:Array.from(O),avgVert:Array.from(A),sampleCount:{h:$,v:E}}}function H6(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),c=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let y=s;y<u;y++)if(y%2===a>>1){f=y;break}if(f===-1)return null;let d=-1;for(let y=o;y<c;y++)if(y%2===(a&1)){d=y;break}if(d===-1)return null;const p=[];for(let y=f;y<u;y+=2){const w=y*t,P=[];for(let S=d;S<c;S+=2)P.push(e[w+S]);p.push(P)}const m=p.length;if(m===0)return null;const x=p[0].length;if(x===0)return null;const b=new Float32Array(x*m);for(let y=0;y<m;y++){const w=p[y];for(let P=0;P<x;P++)b[y*x+P]=w[P]}const k=p6(b,x,m,i),v=g6(k,x,m);return{width:x,height:m,data:v}}function X6(e,t,r,n,a,i,o){const{x:s,y:c,w:u,h:f}=n,d=[],p=Math.max(0,Math.floor(s)),m=Math.max(0,Math.floor(c)),x=Math.min(t,Math.ceil(s+u)),b=Math.min(r,Math.ceil(c+f)),k=a>>1,v=a&1;for(let j=m;j<b;j++){if(j%2!==k)continue;const O=j*t;for(let A=p;A<x;A++){if(A%2!==v)continue;const $=e[O+A];$>=i&&$<=o&&d.push($-i)}}if(d.length===0)return null;d.sort((j,O)=>j-O);const y=[d[0]];for(let j=1;j<d.length;j++)d[j]!==d[j-1]&&y.push(d[j]);const w=[],P=[],S={};for(let j=0;j<y.length-1;j++){const O=y[j],$=y[j+1]-O;w.push($),P.push({x:O,y:$}),S[$]=(S[$]||0)+1}return{uniqueCount:y.length,diffCount:w.length,stepCounts:S,plotData:P}}function _1(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:c}=e,u=a.map((w,P)=>Math.max(0,w-n[P])),f=i.map((w,P)=>Math.max(0,w-n[P])),d=(u[1]+u[3])/2,p=(f[1]+f[3])/2,m=Math.floor(t.x),x=Math.floor(t.y),b=Math.floor(t.w),k=Math.floor(t.h),v=Math.pow(2,r.exposure),y=new Uint16Array(b*k);for(let w=0;w<k;w++){const P=x+w;if(P<0||P>=e.height)continue;const S=P%2,j=P*s,O=w*b;for(let A=0;A<b;A++){const $=m+A;if($<0||$>=s)continue;const E=$%2;let T=0;!S&&!E?T=0:!S&&E?T=1:S&&!E?T=3:T=2;const B=o[j+$],U=n[T],F=u[T],G=f[T],z=Math.max(B-U,0),I=G-F||1e-9,L=(z-F)/I;let H;L<0?H=z*(d/Math.max(F,1e-9)):L>1?H=z*(p/Math.max(G,1e-9)):H=(1-L)*d+L*p,H*=v,y[O+A]=Math.max(0,Math.min(65535,Math.round(H)))}}return{data:y,width:b,height:k}}async function gw(e,t){const r=await yl(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const p=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],m=pf(p);if(m){const x=t.wbGains?t.wbGains[0]:1,b=t.wbGains?t.wbGains[1]:1,v=z0(m,[[x,0,0],[0,1,0],[0,0,b]]),y=z0(j1,v);o=[y[0][0],y[0][1],y[0][2],y[1][0],y[1][1],y[1][2],y[2][0],y[2][1],y[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(p=>{const m=Math.round(p);return m===0?1:m})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const c=await n.imageData(),u=new ImageData(c.width,c.height),f=u.data,d=new Uint16Array(c.data.buffer,c.data.byteOffset,c.data.byteLength/2);if(i&&o.length===9){const p=o,x=Math.pow(2,t.exposure)*.25;for(let b=0;b<d.length;b+=3){const k=d[b]/65535,v=d[b+1]/65535,y=d[b+2]/65535;let w=p[0]*k+p[1]*v+p[2]*y,P=p[3]*k+p[4]*v+p[5]*y,S=p[6]*k+p[7]*v+p[8]*y;w*=x,P*=x,S*=x,w=Math.max(0,Math.min(1,w)),P=Math.max(0,Math.min(1,P)),S=Math.max(0,Math.min(1,S)),w=ls(w),P=ls(P),S=ls(S);const j=b/3*4;f[j]=Math.round(w*255),f[j+1]=Math.round(P*255),f[j+2]=Math.round(S*255),f[j+3]=255}}else for(let p=0;p<d.length;p+=3){const m=p/3*4;f[m]=d[p]>>8,f[m+1]=d[p+1]>>8,f[m+2]=d[p+2]>>8,f[m+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function cm(e,t){const r=await yl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const b=await n.metadata(!0);b&&b.white_level&&(a=b.white_level)}catch(b){console.warn("Metadata error",b)}const i=n.getRawImage(),o=i.width,s=i.height,c=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],p=a,m=t.wbGains?t.wbGains[0]:1,x=t.wbGains?t.wbGains[1]:1;for(let b=0;b<s;b++){const k=b%2;for(let v=0;v<o;v++){const y=v%2,w=k*2+y,P=c[b*o+v],S=d[w];let j=(P-S)/(p-S);j=Math.max(0,Math.min(1,j)),t.exposure!==0&&(j*=Math.pow(2,t.exposure),j=Math.min(1,j)),w===0?j*=m:w===3&&(j*=x);const O=Math.round(ls(Math.min(1,j))*255),A=(b*o+v)*4;f[A]=O,f[A+1]=O,f[A+2]=O,f[A+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function K6(e,t){const r=await yl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const B=await n.metadata(!0);B&&B.white_level&&(a=B.white_level)}catch{}const i=n.getRawImage(),{width:o,height:s,data:c}=i,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],p=a,m=t.wbGains?t.wbGains[0]:1,x=t.wbGains?t.wbGains[1]:1,b=Math.pow(2,t.exposure),k=!!t.isBGGR;let v=[[1,0,0],[0,1,0],[0,0,1]];if(t.customMatrix&&t.customMatrix.length===9){const B=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],U=pf(B);U&&(v=z0(j1,U))}const y=v[0][0],w=v[0][1],P=v[0][2],S=v[1][0],j=v[1][1],O=v[1][2],A=v[2][0],$=v[2][1],E=v[2][2],T=new Float32Array(o*s);for(let B=0;B<o*s;B++){const U=Math.floor(B/o),F=B%o,G=U%2,z=F%2,I=G*2+z,L=c[B],H=d[I];let Z=(L-H)/(p-H);Z=Math.max(0,Z),k?I===0?Z*=x:I===3&&(Z*=m):I===0?Z*=m:I===3&&(Z*=x),T[B]=Z}for(let B=1;B<s-1;B++){const U=B%2,F=B*o;for(let G=1;G<o-1;G++){const z=G%2,I=F+G;let L=0,H=0,Z=0,te=!1,K=!1,q=!1;if(!U&&!z?k?K=!0:te=!0:U&&z?k?te=!0:K=!0:q=!0,te)L=T[I],H=(T[I-1]+T[I+1]+T[I-o]+T[I+o])*.25,Z=(T[I-o-1]+T[I-o+1]+T[I+o-1]+T[I+o+1])*.25;else if(K)Z=T[I],H=(T[I-1]+T[I+1]+T[I-o]+T[I+o])*.25,L=(T[I-o-1]+T[I-o+1]+T[I+o-1]+T[I+o+1])*.25;else{H=T[I];const oe=(T[I-1]+T[I+1])*.5,V=(T[I-o]+T[I+o])*.5;let se=!1;!U&&z?k?se=!1:se=!0:k?se=!0:se=!1,se?(L=oe,Z=V):(Z=oe,L=V)}let J=y*L+w*H+P*Z,ve=S*L+j*H+O*Z,ie=A*L+$*H+E*Z;J*=b,ve*=b,ie*=b,J=Math.max(0,Math.min(1,J)),ve=Math.max(0,Math.min(1,ve)),ie=Math.max(0,Math.min(1,ie)),J=ls(J),ve=ls(ve),ie=ls(ie);const pe=I*4;f[pe]=Math.round(J*255),f[pe+1]=Math.round(ve*255),f[pe+2]=Math.round(ie*255),f[pe+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function q6(e,t){const r=await yl(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const y=await n.metadata(!0);y&&y.white_level&&(a=y.white_level)}catch(y){console.warn("Metadata error",y)}const i=n.getRawImage(),{width:o,height:s,data:c}=i,u=new ImageData(o,s),f=u.data;if(!t.advancedZeroDep)throw new Error("Missing advanced settings");const{bl:d,bg:p,fg:m}=t.advancedZeroDep,x=p.map((y,w)=>Math.max(0,y-d[w])),b=m.map((y,w)=>Math.max(0,y-d[w])),k=(x[1]+x[3])/2,v=(b[1]+b[3])/2;for(let y=0;y<s;y++){const w=y%2;for(let P=0;P<o;P++){const S=P%2;let j=0;!w&&!S?j=0:!w&&S?j=1:w&&!S?j=3:j=2;const O=c[y*o+P],A=d[j],$=x[j],E=b[j],T=Math.max(O-A,0),B=E-$||1e-9,U=(T-$)/B;let F;U<0?F=T*(k/Math.max($,1e-9)):U>1?F=T*(v/Math.max(E,1e-9)):F=(1-U)*k+U*v;let G=F/65535;G=Math.max(0,Math.min(1,G));const z=Math.round(ls(G)*255),I=(y*o+P)*4;f[I]=z,f[I+1]=z,f[I+2]=z,f[I+3]=255}}return u}finally{n.delete?n.delete():n.close()}}const Ml=({title:e,children:t})=>l.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[l.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:l.jsx("span",{children:e})}),l.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),Y6=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],um=({checked:e,onChange:t,label:r})=>l.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[l.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),l.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:l.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),fm=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=c=>{const u=[];for(let f=0;f<4;f++)r[f]===c&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const c=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(c)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(p=>d[p]=c),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let c=[];if(Array.isArray(s)?c=s.map(Number):typeof s=="string"?c=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(c=[s,s,s,s]),c.length===1&&!isNaN(c[0])&&(c=[c[0],c[0],c[0],c[0]]),c.length>=4&&!c.slice(0,4).some(isNaN))return[c[0],c[1],c[2],c[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},Z6=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:c,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:p,drGridRows:m,onDrGridRowsChange:x,drGridCols:b,onDrGridColsChange:k,onBatchDrLab:v,hasDrMarkers:y,isFftLabOpen:w,onProcessPair:P,onProcessBatchDiff:S,onProcessStackFft:j,onOpenCrossCalc:O,isThreePlane:A,onToggleXTrans:$,xtransPhase:E,onXTransPhaseChange:T,isXTransConverted:B,onCommand:U,isColorLabOpen:F,colorLabMarkingStep:G,onStartColorLabMarking:z,isSfrLabOpen:I,roiStats:L,isBGGR:H,onOpenDngExport:Z,sfrRectCount:te,isBatchMarkingMode:K,onToggleBatchMarking:q,onClearBatchMarks:J,onBatchCompute:ve,stdChartStep:ie,onStartStandardCalibration:pe,onSaveBatchTemplate:oe,onImportBatchTemplate:V,onBatchTransform:se,onOpenStackingTool:ge}=e,le=!!t,je=!!(t!=null&&t.isXTrans),Se=!!$,[me,he]=C.useState(r.exposure.toString()),[Pe,$e]=C.useState(""),[Ve,He]=C.useState("0 0 0 0"),[Je,yt]=C.useState("1.0"),[wt,ir]=C.useState("1.0"),[jt,hr]=C.useState(r.demosaicMethod),[_t,or]=C.useState(!!r.showKadc),[Ir,Rt]=C.useState(!!r.subtractBlackLevelFromStats),[Sr,et]=C.useState("64"),[ht,Qt]=C.useState(!1),[Lt,mr]=C.useState(""),[jr,tn]=C.useState(""),[Mt,Xr]=C.useState(""),[Pt,rn]=C.useState(!1),[ze,cn]=C.useState(!1),[Lr,_r]=C.useState(!1),[jn,Tr]=C.useState(!1),[Pr,nn]=C.useState(!1),[ea,Xn]=C.useState("single"),[tr,sr]=C.useState(!1),[xr,M]=C.useState(!0),[Le,vt]=C.useState(!0),[pt,kt]=C.useState(!1),[At,br]=C.useState(10),[lr,Ue]=C.useState(1.05),Ct=C.useMemo(()=>Object.keys(hc).sort(),[]),Gt=C.useRef(null),Jt=C.useRef(null),fr=C.useRef(null),_e=C.useRef(null),[Cr,R]=C.useState(null),[we,Ne]=C.useState(null),[Nt,Ze]=C.useState(!1),[ot,gt]=C.useState(!0),It=C.useRef(null),zr=C.useRef(null),an=C.useRef(null);C.useEffect(()=>{if(he(r.exposure.toString()),r.customMatrix?$e(r.customMatrix.join(" ")):$e(""),r.blackLevel&&r.blackLevel.length===4)He(r.blackLevel.join(" "));else{const ae=fm(t,i);ae&&ae.some(ke=>ke!==0)?He(ae.join(" ")):He("")}yt(r.wbGains?r.wbGains[0].toString():"1.0"),ir(r.wbGains?r.wbGains[1].toString():"1.0"),hr(r.demosaicMethod),or(!!r.showKadc),Rt(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(mr(r.advancedZeroDep.bl.join(" ")),tn(r.advancedZeroDep.bg.join(" ")),Xr(r.advancedZeroDep.fg.join(" ")),Qt(!0))},[r,t,i]);const Kt=C.useRef(!1),Mn=C.useRef(null);C.useEffect(()=>{t!==Mn.current&&(Kt.current=!1,Mn.current=t)},[t]),C.useEffect(()=>{if(o&&t&&!Kt.current){Kt.current=!0;const ae=fm(t,i),ke=ae&&ae.some(dt=>dt>0);if(ae&&ke){console.log("[AutoApply] Detected Black Levels via Bridge:",ae);const dt={...r,blackLevel:ae,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(dt)}}},[o,t,i,r,n]);const Nr=ae=>he(ae),gn=ae=>yt(ae),Wt=ae=>ir(ae),Ft=ae=>hr(parseInt(ae.target.value,10)),Ur=ae=>$e(ae.target.value),Fe=()=>{he("0"),hr(3),yt("1.0"),ir("1.0"),or(!0),Rt(!0),$e(""),Qt(!1);const ae=fm(t,i);He(ae&&ae.some(ke=>ke!==0)?ae.join(" "):"")},rr=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),U==null||U("sel full"))},mn=()=>{if(!t||!a)return;const ae=parseInt(Sr,10);if(isNaN(ae)||ae<=0)return;const ke=Math.min(ae,t.width),dt=Math.min(ae,t.height),it=Math.floor((t.width-ke)/2),Bt=Math.floor((t.height-dt)/2);a({x:it,y:Bt,w:ke,h:dt}),U==null||U(`sel center ${ae}`)},Kn=()=>{if(!t||!L){alert("Please select a region on the image first.");return}const ae=ca()||[0,0,0,0],ke=Pe.trim().replace(/[\s,\n]+/g," "),dt=ke?ke.split(" ").map(Number):[1,0,0,0,1,0,0,0,1];if(dt.length!==9){alert("Matrix must be 3x3 (9 values).");return}const[it,Bt]=U6(t.data,t.width,{x:L.x,y:L.y,w:L.width,h:L.height},ae,dt,H);yt(it.toFixed(4)),ir(Bt.toFixed(4)),U==null||U(`wb ${it.toFixed(4)} ${Bt.toFixed(4)} (Spot)`)},ca=()=>{const ke=Ve.split(/[\s,]+/).filter(dt=>dt.trim()!=="").map(Number);if(ke.length===1&&!isNaN(ke[0]))return[ke[0],ke[0],ke[0],ke[0]];if(ke.length>=4&&!ke.slice(0,4).some(isNaN))return[ke[0],ke[1],ke[2],ke[3]]},wr=ae=>{const ke=ae.trim().split(/[\s,]+/).map(Number);return ke.length===4&&!ke.some(isNaN)?ke:ke.length===1&&!isNaN(ke[0])?[ke[0],ke[0],ke[0],ke[0]]:null},Za=()=>{U&&(me!=="0"&&U(`ev ${me}`),(Je!=="1.0"||wt!=="1.0")&&U(`wb ${Je} ${wt}`),Ve!=="0 0 0 0"&&Ve!==""&&U(`bl ${Ve}`),jt!==3&&U(`demo ${jt}`),Pe.trim().length>0&&U(`matrix ${Pe.replace(/\s+/g," ")}`),U("render"));const ae={...r},ke=parseFloat(me);isNaN(ke)||(ae.exposure=ke);const dt=parseFloat(Je),it=parseFloat(wt);!isNaN(dt)&&!isNaN(it)&&(ae.wbGains=[dt,it]),ae.demosaicMethod=jt,ae.renderMode="standard";const Bt=ca();Bt?ae.blackLevel=Bt:delete ae.blackLevel;const Vt=Pe.trim().replace(/[\s,\n]+/g," ");if(Vt){const Er=Vt.split(" ").map(Number);Er.length===9&&!Er.some(isNaN)?ae.customMatrix=Er:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete ae.customMatrix;ae.showKadc=_t,ae.subtractBlackLevelFromStats=Ir,n(ae)},re=()=>{_r(H||!1),cn(!0)},ye=ae=>{U&&(me!=="0"&&U(`ev ${me}`),(Je!=="1.0"||wt!=="1.0")&&U(`wb ${Je} ${wt}`),Ve!=="0 0 0 0"&&Ve!==""&&U(`bl ${Ve}`),U(ae==="bilinear"?"render zero color":"render zero"));const ke={...r},dt=ca();dt&&(ke.blackLevel=dt);const it=parseFloat(Je),Bt=parseFloat(wt);!isNaN(it)&&!isNaN(Bt)&&(ke.wbGains=[it,Bt]);const Vt=parseFloat(me);if(isNaN(Vt)||(ke.exposure=Vt),ae==="bilinear"){const Er=Pe.trim().replace(/[\s,\n]+/g," ");if(Er){const An=Er.split(" ").map(Number);An.length===9&&!An.some(isNaN)&&(ke.customMatrix=An)}ke.isBGGR=Lr}ke.renderMode=ae==="mosaic"?"zero-dependency":"zero-dep-color",ke.showKadc=_t,ke.subtractBlackLevelFromStats=Ir,cn(!1),n(ke)},be=()=>{const ae=wr(Lt),ke=wr(jr),dt=wr(Mt);if(!ae||!ke||!dt){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}U&&(me!=="0"&&U(`ev ${me}`),U(`render unmix ${ae.join(" ")} ${ke.join(" ")} ${dt.join(" ")}`));const it={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:ae,bg:ke,fg:dt}};it.showKadc=_t,it.subtractBlackLevelFromStats=Ir,n(it)},Y=()=>{if(L){const ae=L.means,ke=[ae[0],ae[1],ae[3],ae[2]].map(dt=>dt.toFixed(1));tn(ke.join(" "))}else alert("Please select an ROI on the image first.")},Me=()=>{if(L){const ae=L.means,ke=[ae[0],ae[1],ae[3],ae[2]].map(dt=>dt.toFixed(1));Xr(ke.join(" "))}else alert("Please select an ROI on the image first.")},nt=ae=>{ae.target.files&&ae.target.files.length>0&&v&&(v(ae.target.files,ea),U==null||U(`drlab batch ${ea}`)),ae.target.value="",nn(!1)},st=async ae=>{var dt;const ke=(dt=ae.target.files)==null?void 0:dt[0];if(!(!ke||!V)){try{const Bt=(await ke.text()).split(`
`),Vt=[];let Er=!1;for(let An of Bt){if(An=An.trim(),!An)continue;if(An.toLowerCase().startsWith("index")){Er=!0;continue}const ta=An.split(",").map(Number);if(ta.length>=5){const ua=ta[1],Ma=ta[2],xa=ta[3],qt=ta[4],Li=ta[5];!isNaN(ua)&&!isNaN(Ma)&&!isNaN(xa)&&!isNaN(qt)&&Vt.push({x:ua,y:Ma,w:xa,h:qt,ori:isNaN(Li)?void 0:Li})}}V(Vt),alert(`Imported ${Vt.length} ROIs successfully.`)}catch(it){console.error("Import failed",it),alert("Failed to import CSV: "+it.message)}ae.target.value=""}},Et=async ae=>{var dt;const ke=(dt=ae.target.files)==null?void 0:dt[0];if(ke){try{const Bt=(await ke.text()).split(`
`),Vt=[];Vt.push("#BlackLevel: 0,0,0,0"),Vt.push("#ImageHeight: 0"),Vt.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let Er=1;for(let Ma=0;Ma<Bt.length;Ma++){const xa=Bt[Ma].trim();if(!xa||xa.includes("R_mean")||xa.includes("R_std"))continue;const qt=xa.split(/\s+/).map(Number);if(qt.length<8||qt.some(isNaN))continue;const Li=[Er,1,qt[0],qt[2],qt[6],qt[4],qt[1],qt[3],qt[7],qt[5]].join(",");Vt.push(Li),Er++}const An=new Blob([Vt.join(`
`)],{type:"text/csv"}),ta=URL.createObjectURL(An),ua=document.createElement("a");ua.href=ta,ua.download=ke.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(ua),ua.click(),document.body.removeChild(ua),URL.revokeObjectURL(ta)}catch(it){console.error("Conversion failed",it),alert("Failed to convert file.")}ae.target.value=""}},St=ae=>{ae.target.files&&ae.target.files[0]&&(R(ae.target.files[0]),U==null||U("fft load a"))},lt=ae=>{ae.target.files&&ae.target.files[0]&&(Ne(ae.target.files[0]),U==null||U("fft load b"))},pr=()=>{Cr&&we&&P&&(P(Cr,we,Nt,ot),U==null||U("fft run"))},cr=ae=>{ae.target.files&&ae.target.files.length>0&&S&&(S(ae.target.files),U==null||U("fft batch")),ae.target.value=""},nr=ae=>{ae.target.files&&ae.target.files.length>0&&j&&(j(ae.target.files),U==null||U("fft stack")),ae.target.value=""},ct=()=>{ve&&(ve({useNR:xr,useDeshading:Le,greenOnly:pt}),U==null||U("batch compute"))},Ce=(ae,ke,dt)=>{se&&se(ae,ke,dt)},De=Lt.trim()!==""&&jr.trim()!==""&&Mt.trim()!=="",tt=r.renderMode==="advanced-zero-dep";return l.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[l.jsxs("div",{className:"flex-grow overflow-y-auto",children:[A&&l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[l.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),l.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),je&&!B&&l.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[l.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),l.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),B&&l.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[l.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),l.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),I&&l.jsx(Ml,{title:"SFR Lab Tools (Scalar Unmixing)",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[l.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),l.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),l.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),tt&&l.jsxs("div",{className:"border-t border-orange-200 dark:border-orange-800 pt-3",children:[l.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>sr(!tr),children:[l.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase",children:" (Batch Ops)"}),l.jsx("svg",{className:`w-4 h-4 text-orange-500 transition-transform ${tr?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),tr&&l.jsxs("div",{className:"mt-3 space-y-3 bg-white/50 dark:bg-black/20 p-2 rounded animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Standard Chart)"}),l.jsx("button",{onClick:pe,disabled:!!ie&&ie>0,className:`w-full py-2 border font-bold text-xs rounded transition-all ${ie&&ie>0?"bg-emerald-600 text-white border-emerald-500 animate-pulse":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:ie&&ie>0?`Click ${ie===1?"TL":ie===2?"TR":ie===3?"BL":"BR"}`:"Start Calibration (4-Pts)"}),!!ie&&ie>0&&l.jsx("p",{className:"text-[9px] text-emerald-600 dark:text-emerald-400 font-bold text-center",children:"Click corners: TopLeft  TopRight  BottomLeft  BottomRight"})]}),l.jsx("div",{className:"h-px bg-gray-300 dark:bg-slate-600 w-full"}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Manual Mark)"}),te!==void 0&&te>0&&l.jsxs("span",{className:"text-[9px] text-orange-500 font-bold",children:[te," Selected"]})]}),l.jsx("button",{onClick:q,className:`w-full py-2 font-bold text-xs rounded shadow transition-all ${K?"bg-orange-600 hover:bg-orange-500 text-white ring-2 ring-orange-300":"bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:K?"Stop Marking (Active)":"Start Batch Marking"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:oe,disabled:!te,className:"flex-1 py-1.5 border border-indigo-300 dark:border-indigo-700 text-indigo-700 dark:text-indigo-400 font-bold text-[10px] rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})," (Save)"]}),l.jsx("input",{type:"file",ref:an,className:"hidden",accept:".csv",onChange:st}),l.jsxs("button",{onClick:()=>{var ae;return(ae=an.current)==null?void 0:ae.click()},className:"flex-1 py-1.5 border border-emerald-300 dark:border-emerald-700 text-emerald-700 dark:text-emerald-400 font-bold text-[10px] rounded hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-colors flex items-center justify-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})," (Import)"]})]}),te!==void 0&&te>0&&l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800/50 p-2 rounded border border-gray-200 dark:border-slate-700 mt-1",children:[l.jsx("div",{className:"text-[9px] font-bold text-gray-500 text-center mb-1",children:"UNIFIED TRANSFORM"}),l.jsxs("div",{className:"flex gap-2 mb-2 justify-center",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400",children:"Step (px)"}),l.jsx("input",{type:"number",min:"1",value:At,onChange:ae=>br(Number(ae.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400",children:"Scale"}),l.jsx("input",{type:"number",step:"0.01",value:lr,onChange:ae=>Ue(Number(ae.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[l.jsx("button",{onClick:()=>Ce("scale",1/lr,1/lr),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom Out (Shrink)",children:"-"}),l.jsx("button",{onClick:()=>Ce("move",0,-At),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("button",{onClick:()=>Ce("scale",lr,lr),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom In (Expand)",children:"+"}),l.jsx("button",{onClick:()=>Ce("move",-At,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("div",{className:"text-center text-[8px] text-gray-400 flex items-center justify-center",children:"Move"}),l.jsx("button",{onClick:()=>Ce("move",At,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>Ce("move",0,At),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),l.jsx("div",{})]})]}),K&&l.jsx("p",{className:"text-[9px] text-gray-400 italic text-center mt-1",children:"Hold Shift + Drag on canvas to add multiple ROIs."}),l.jsxs("div",{className:"flex flex-col gap-1 text-[10px] mt-2 bg-gray-100 dark:bg-slate-800/50 p-2 rounded",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:xr,onChange:ae=>M(ae.target.checked),className:"rounded text-orange-500"}),"Jiang Official NR"]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:Le,onChange:ae=>vt(ae.target.checked),className:"rounded text-purple-500"}),"Deshading"]})]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 my-1"}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",title:"Only use Green channel points for projection (reduces color moire issues)",children:[l.jsx("input",{type:"checkbox",checked:pt,onChange:ae=>kt(ae.target.checked),className:"rounded text-emerald-500"}),l.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:"Green Channel Only (G Only)"})]})]}),l.jsxs("button",{onClick:ct,disabled:!te,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold text-xs rounded shadow transition-transform active:scale-95",children:["Calculate & Copy (",te||0,")"]}),l.jsx("button",{onClick:J,disabled:!te,className:"w-full py-1.5 bg-gray-200 dark:bg-slate-700 hover:bg-red-100 hover:text-red-600 text-[10px] font-bold rounded transition-colors disabled:opacity-50",children:"Clear All Marks"})]})]})]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),l.jsx(um,{checked:ht,onChange:Qt,label:" (Scalar Unmixing)"}),ht&&l.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[l.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[l.jsx("div",{className:"col-span-1",children:"Param"}),l.jsx("div",{className:"text-center",children:"Ch0(R)"}),l.jsx("div",{className:"text-center",children:"Ch1(G1)"}),l.jsx("div",{className:"text-center",children:"Ch2(B)"}),l.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),l.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[l.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),l.jsx("input",{type:"text",value:Lt,onChange:ae=>mr(ae.target.value),placeholder:"0 0 0 0",className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),l.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),l.jsxs("div",{className:"col-span-4 flex gap-1",children:[l.jsx("input",{type:"text",value:jr,onChange:ae=>tn(ae.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),l.jsx("button",{onClick:Y,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),l.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[l.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),l.jsxs("div",{className:"col-span-4 flex gap-1",children:[l.jsx("input",{type:"text",value:Mt,onChange:ae=>Xr(ae.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),l.jsx("button",{onClick:Me,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),l.jsx("button",{onClick:be,disabled:!le||!De,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed",children:"RUN UNMIXING (ADV ZERO-DEP)"}),l.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),w&&l.jsx(Ml,{title:"FFT Lab (Noise Profile)",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{type:"file",ref:Gt,className:"hidden",onChange:St,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var ae;return(ae=Gt.current)==null?void 0:ae.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${Cr?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:Cr?`A: ${Cr.name}`:"Load Image A"}),l.jsx("input",{type:"file",ref:Jt,className:"hidden",onChange:lt,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var ae;return(ae=Jt.current)==null?void 0:ae.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${we?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:we?`B: ${we.name}`:"Load Image B"})]}),l.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ot,onChange:ae=>gt(ae.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),l.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[l.jsx("button",{onClick:pr,disabled:!Cr||!we,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),l.jsx("input",{type:"file",ref:fr,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:cr}),l.jsx("button",{onClick:()=>{var ae;return(ae=fr.current)==null?void 0:ae.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),l.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{type:"file",ref:_e,className:"hidden",multiple:!0,onChange:nr,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var ae;return(ae=_e.current)==null?void 0:ae.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-gray-100 dark:border-slate-800",children:[l.jsx("button",{onClick:()=>{O==null||O(),U==null||U("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"}),l.jsx("button",{onClick:()=>{ge==null||ge(),U==null||U("stack tool")},className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:" (General Stack)"})]})]})}),s&&l.jsx(Ml,{title:"DR Lab Tools",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{onClick:()=>{f==null||f(),U==null||U("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),l.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),p&&d!==void 0&&l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),l.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:ae=>p(parseInt(ae.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),l.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),x&&k&&m!==void 0&&b!==void 0&&l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:"Layout:"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"1",max:"50",value:m,onChange:ae=>x(Math.max(1,parseInt(ae.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),l.jsx("span",{className:"text-xs text-gray-400",children:"x"}),l.jsx("input",{type:"number",min:"1",max:"50",value:b,onChange:ae=>k(Math.max(1,parseInt(ae.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:()=>{u==null||u(),U==null||U("mark")},disabled:!le||c!==void 0&&c>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${le?c&&c>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:c&&c>0?"Marking Active...":"Mark Corners"}),v&&l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"file",ref:It,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:nt}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>nn(!Pr),disabled:!y,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),Pr&&l.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[l.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var ae;Xn("single"),(ae=It.current)==null||ae.click()},children:"1. Independent Frames"}),l.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var ae;Xn("pair"),(ae=It.current)==null||ae.click()},children:"2. Pair Difference (A-B)"})]})]})]}),l.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[l.jsx("input",{type:"file",ref:zr,className:"hidden",accept:".txt",onChange:Et}),l.jsx("button",{onClick:()=>{var ae;return(ae=zr.current)==null?void 0:ae.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),c!==void 0&&c>0&&l.jsx("div",{className:"mt-2 text-center",children:l.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[c===1&&"Click Top-Left Center",c===2&&"Click Top-Right Center",c===3&&"Click Bottom-Left Center",c===4&&"Click Bottom-Right Center"]})})]})]})}),F&&l.jsx(Ml,{title:"Color Lab Tools",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),l.jsx("button",{onClick:()=>{z==null||z(),U==null||U("cl mark")},disabled:!le||G!==void 0&&G>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${le?G&&G>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:G&&G>0?"Marking Active...":"Mark 24-Patch Chart"}),G!==void 0&&G>0&&l.jsx("div",{className:"mt-2 text-center",children:l.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[G===1&&"Click Top-Left (Brown)",G===2&&"Click Top-Right (Cyanish)",G===3&&"Click Bottom-Left (White)",G===4&&"Click Bottom-Right (Black)"]})})]})}),l.jsx(Ml,{title:"Selection Tools",children:l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),l.jsx("input",{type:"number",min:"1",value:Sr,onChange:ae=>et(ae.target.value),disabled:!le,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:mn,disabled:!le,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),l.jsx("button",{onClick:rr,disabled:!le,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),l.jsx(Ml,{title:"Display Controls",children:l.jsxs("div",{className:"space-y-5",children:[l.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",l.jsx("b",{children:"Apply"}),"."]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!le,value:parseFloat(me)||0,onChange:ae=>Nr(ae.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("input",{id:"exposure",type:"number",step:"0.1",value:me,onChange:ae=>Nr(ae.target.value),disabled:!le,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),Se&&l.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[l.jsx(um,{checked:!!B,onChange:ae=>{$&&$(ae),U==null||U(`xtrans ${ae?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),B&&E&&T&&l.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),l.jsx("input",{type:"number",min:"0",max:"5",value:E.x,onChange:ae=>{const ke=Math.min(5,Math.max(0,parseInt(ae.target.value)||0));T({x:ke}),U==null||U(`xtrans phase ${ke} ${E.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),l.jsx("input",{type:"number",min:"0",max:"5",value:E.y,onChange:ae=>{const ke=Math.min(5,Math.max(0,parseInt(ae.target.value)||0));T({y:ke}),U==null||U(`xtrans phase ${E.x} ${ke}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),l.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx(um,{checked:_t,onChange:or,label:"Show k"}),l.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),l.jsxs("div",{children:[l.jsxs("button",{onClick:Kn,disabled:!le||!L,className:"w-full mb-3 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded shadow-sm transition-all active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",title:"Calculate Gains to make the selected area neutral gray, accounting for Color Matrix",children:[l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Spot WB (Matrix-Aware)"]}),l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),l.jsx("input",{type:"number",step:"0.01",value:Je,onChange:ae=>gn(ae.target.value),disabled:!le,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),l.jsx("input",{type:"number",step:"0.01",value:wt,onChange:ae=>Wt(ae.target.value),disabled:!le,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",l.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),l.jsx("button",{onClick:()=>rn(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[l.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),l.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${Ir?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>Rt(!Ir),children:l.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${Ir?"translate-x-4":"translate-x-0"}`})})]})]}),l.jsx("input",{type:"text",value:Ve,onChange:ae=>He(ae.target.value),disabled:!le,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),l.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[l.jsx("span",{children:"Custom Color Matrix"}),l.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),l.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:ae=>{const ke=hc[ae.target.value];ke&&$e(ke),ae.target.value=""},defaultValue:"",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),Ct.map(ae=>l.jsx("option",{value:ae,children:ae},ae))]})]}),l.jsx("textarea",{id:"customMatrix",value:Pe,onChange:Ur,disabled:!le,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),l.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[l.jsx("button",{onClick:re,disabled:!le,className:"w-full text-sm font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-4 rounded-xl flex items-center justify-center border-2 border-slate-500 shadow-lg",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:l.jsxs("span",{className:"text-center leading-tight",children:["Apply Settings/Render",l.jsx("br",{}),l.jsx("span",{className:"text-xs font-normal opacity-90",children:"CM"})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>Tr(!0),disabled:!le,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed py-3 px-2 rounded-lg transition-all active:scale-95 border border-gray-700",children:["",l.jsx("br",{}),l.jsx("span",{className:"text-[10px] font-normal opacity-75",children:""})]}),l.jsx("button",{onClick:()=>Z==null?void 0:Z(),disabled:!le,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-all py-3 rounded-lg flex items-center justify-center border border-gray-700 active:scale-95",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:"Generate 16bit DNG"})]}),l.jsx("div",{className:"text-center pt-1",children:l.jsx("button",{onClick:Fe,disabled:!le,className:"text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors underline decoration-gray-300 hover:decoration-gray-600 underline-offset-2",children:"Reset Defaults (Local)"})})]})]})})]}),l.jsx(os,{isOpen:Pt,onClose:()=>rn(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),rn(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[l.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/",l.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),l.jsxs("p",{className:"leading-relaxed",children:["Autofills. If no result is found or it's wrong or not precise enough, please check the ",l.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame(close the lens cap) with the same ISO/speed setting to calculate the average (using jiangtherapee) and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),l.jsx(os,{isOpen:ze,onClose:()=>cn(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),l.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Bayer Pattern"}),l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>_r(!1),className:`px-3 py-1 text-[10px] font-bold rounded transition-all ${Lr?"text-gray-500 dark:text-slate-400":"bg-white dark:bg-slate-600 text-cyan-600 dark:text-cyan-400 shadow-sm"}`,children:"RGGB"}),l.jsx("button",{onClick:()=>_r(!0),className:`px-3 py-1 text-[10px] font-bold rounded transition-all ${Lr?"bg-white dark:bg-slate-600 text-cyan-600 dark:text-cyan-400 shadow-sm":"text-gray-500 dark:text-slate-400"}`,children:"BGGR"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("button",{onClick:()=>ye("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:l.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),l.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),l.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),l.jsxs("button",{onClick:()=>ye("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[l.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:l.jsx("svg",{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),l.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),l.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),l.jsx(os,{isOpen:jn,onClose:()=>Tr(!1),onConfirm:()=>{Za(),Tr(!1)},title:"Official Render Options",confirmText:"Render",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),l.jsx("select",{id:"demosaic-modal",value:jt,onChange:Ft,disabled:!le||A||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:Y6.map(ae=>l.jsx("option",{value:ae.value,children:ae.label},ae.value))}),A&&l.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&l.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},Q6=C.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:c,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:p,onToggleXTrans:m,onXTransPhaseChange:x}=e,[b,k]=C.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[v,y]=C.useState(""),[w,P]=C.useState([]),[S,j]=C.useState(-1),O=C.useRef(null),A=C.useRef(null),$=C.useRef(null),E=C.useRef(null),T=C.useRef(null),B=C.useRef(null),U=C.useRef(null),F=C.useRef(null);C.useRef(null);const G=C.useRef({...n});C.useEffect(()=>{G.current={...n}},[n.exposure,n.demosaicMethod]);const z=C.useRef({fileA:null,fileB:null});C.useLayoutEffect(()=>{O.current&&(O.current.scrollTop=O.current.scrollHeight)},[b]);const I=(q,J="out")=>{k(ve=>[...ve,{id:Date.now().toString()+Math.random(),type:J,text:q}])};C.useImperativeHandle(t,()=>({log:(q,J="in")=>{const ve=J;let ie=q;J==="in"&&!q.startsWith(">")&&(ie=`> ${q}`),I(ie,ve)}}));const L=C.useRef(null);C.useEffect(()=>{if(e.roiStats&&e.roiStats!==L.current){const q=e.roiStats,J=Math.round(q.x),ve=Math.round(q.y),ie=Math.round(q.width),pe=Math.round(q.height);I(`> sel ${J} ${ve} ${ie} ${pe}`,"in");const oe=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],V=l.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[l.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",J,", ",ve,", ",ie,"x",pe,"]:"]}),l.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[l.jsx("div",{children:"Ch"}),l.jsx("div",{className:"text-right",children:"Mean"}),l.jsx("div",{className:"text-right",children:"StdDev"})]}),oe.map(se=>l.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[l.jsx("div",{className:se.name==="R"?"text-red-500":se.name==="B"?"text-blue-500":"text-green-500",children:se.name}),l.jsx("div",{className:"text-right text-gray-300",children:q.means[se.idx].toFixed(2)}),l.jsx("div",{className:"text-right text-gray-400",children:q.stdDevs[se.idx].toFixed(2)})]},se.name))]});I(V,"out"),L.current=q}},[e.roiStats,e.isBGGR]);const H=q=>{var pe,oe,V,se,ge,le,je;const J=q.trim().split(/\s+/),ve=J[0].toLowerCase(),ie=J.slice(1);switch(ve){case"help":I("Available Commands:","info"),I("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),I("  wb <r> <b>        Set WB Gains","info"),I("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),I("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),I("  matrix <n1..n9>   Set Custom Color Matrix","info"),I("  xtrans <on|off>   Force X-Trans Mode","info"),I("  xtrans phase <x> <y>  Set X-Trans Phase","info"),I("  render            Apply settings & Render","info"),I("  render zero       Zero-Dependency Render","info"),I("  render unmix      Advanced Unmixing Render","info"),I("  sel <full|center> Select ROI","info"),I("  sel <x> <y> <w> <h> Select ROI manually","info"),I("  mark              Start DR Lab Corner Marking","info"),I("  gen test          Generate Test Pattern","info"),I("  fft load <a>      Load FFT Pair Image A","info"),I("  fft load <b>      Load FFT Pair Image B","info"),I("  fft run           Run FFT Pair Diff","info"),I("  cls               Clear Screen","info");break;case"cls":case"clear":k([]);break;case"ev":case"exposure":if(ie.length<1){I(`Current EV: ${G.current.exposure}`,"info");return}const Se=parseFloat(ie[0]);if(isNaN(Se)){I("Invalid EV value","err");return}G.current.exposure=Se,I(`EV set to ${Se} (run 'render' to apply)`);break;case"wb":if(ie.length<2){I("Usage: wb <red_gain> <blue_gain>","err");return}const me=parseFloat(ie[0]),he=parseFloat(ie[1]);if(isNaN(me)||isNaN(he)){I("Invalid gains","err");return}G.current.wbGains=[me,he],I(`WB set to R:${me} B:${he}`);break;case"bl":case"black":if(ie.length===0){I(`Current BL: ${((pe=G.current.blackLevel)==null?void 0:pe.join(" "))||"Auto"}`,"info");return}let Pe=ie.map(Number);if(Pe.some(isNaN)){I("Invalid numbers","err");return}if(Pe.length===1&&(Pe=[Pe[0],Pe[0],Pe[0],Pe[0]]),Pe.length<4){I("Need 1 or 4 values","err");return}G.current.blackLevel=[Pe[0],Pe[1],Pe[2],Pe[3]],G.current.subtractBlackLevelFromStats=!0,G.current.showKadc=!0,I(`Black Level set: ${Pe.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if(ie.length===0){I("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const $e=parseInt(ie[0]);if(isNaN($e)){I("Invalid method ID","err");return}G.current.demosaicMethod=$e,I(`Demosaic set to ID ${$e}`);break;case"matrix":if(ie.length!==9){I("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const Ve=ie.map(Number);if(Ve.some(isNaN)){I("Invalid matrix values","err");return}G.current.customMatrix=Ve,I("Custom Color Matrix set.");break;case"xtrans":if(ie[0]==="on"||ie[0]==="true")m?(m(!0),I("X-Trans conversion ON")):I("Feature not available","err");else if(ie[0]==="off"||ie[0]==="false")m?(m(!1),I("X-Trans conversion OFF")):I("Feature not available","err");else if(ie[0]==="phase"){if(ie.length<3){I("Usage: xtrans phase <x> <y>","err");return}const He=parseInt(ie[1]),Je=parseInt(ie[2]);x&&(x({x:He,y:Je}),I(`X-Trans Phase set to (${He}, ${Je})`))}else I("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if(ie[0]==="zero"){const He=ie[1]==="color"?"zero-dep-color":"zero-dependency";G.current.renderMode=He,I(`Rendering Zero-Dependency (${He})...`)}else if(ie[0]==="unmix"){if(ie.length<13){I("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const He=ie.slice(1).map(Number);if(He.some(isNaN)){I("Invalid params","err");return}G.current.renderMode="advanced-zero-dep",G.current.advancedZeroDep={bl:[He[0],He[1],He[2],He[3]],bg:[He[4],He[5],He[6],He[7]],fg:[He[8],He[9],He[10],He[11]]},I("Rendering Advanced Unmix...")}else G.current.renderMode="standard",I("Rendering Standard Pipeline...");a({...G.current});break;case"sel":case"select":if(!r||!i){I("No image loaded","err");return}if(ie[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if(ie[0]==="center"){const He=parseInt(ie[1])||64,Je=Math.floor((r.width-He)/2),yt=Math.floor((r.height-He)/2);i({x:Je,y:yt,w:He,h:He})}else if(ie.length===4){const[He,Je,yt,wt]=ie.map(Number);if([He,Je,yt,wt].some(isNaN)){I("Invalid coordinates","err");return}i({x:He,y:Je,w:yt,h:wt})}else I("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),I("Interactive marking started. Click 4 corners on canvas."));break;case"gen":(ie[0]==="test"||ie[0]==="pattern")&&s&&(s(),I("Generated Test Pattern"));break;case"drlab":if(ie[0]==="config"){const[He,Je,yt]=ie.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(He||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(Je||10),e.onDrGridColsChange&&e.onDrGridColsChange(yt||10),I(`DR Grid Configured: Size=${He}, Grid=${Je}x${yt}`)}else ie[0]==="batch"&&(ie[1]==="pair"?(I("Select file pairs for DR Lab..."),(oe=E.current)==null||oe.click()):(I("Select single files for DR Lab..."),(V=$.current)==null||V.click()));break;case"fft":ie[0]==="load"?ie[1]==="a"?(se=T.current)==null||se.click():ie[1]==="b"?(ge=B.current)==null||ge.click():I("Usage: fft load <a|b>","err"):ie[0]==="run"?z.current.fileA&&z.current.fileB&&u?(I(`Processing Pair: ${z.current.fileA.name} - ${z.current.fileB.name}`),u(z.current.fileA,z.current.fileB,!1,!0)):I("Load both A and B first","err"):ie[0]==="stack"?(I("Select files for Stack FFT..."),(le=U.current)==null||le.click()):ie[0]==="batch"&&(I("Select files for Batch Diff...","info"),(je=F.current)==null||je.click());break;case"crosscalc":p&&(p(),I("Opened Cross-Calculator"));break;default:I(`Unknown command: ${ve}`,"err")}},Z=q=>{if(q.key==="Enter"){const J=v.trim();if(!J)return;I(`> ${J}`,"in"),J.split(";").forEach(ie=>{ie.trim()&&H(ie.trim())}),P(ie=>[...ie,J]),j(-1),y("")}else if(q.key==="ArrowUp"){if(q.preventDefault(),w.length>0){const J=S===-1?w.length-1:Math.max(0,S-1);j(J),y(w[J])}}else if(q.key==="ArrowDown")if(q.preventDefault(),S!==-1){const J=Math.min(w.length-1,S+1);j(J),y(w[J])}else y("")},te=(q,J)=>{q.target.files&&q.target.files.length>0&&c&&(I(`Batch processing ${q.target.files.length} files in ${J} mode...`),c(q.target.files,J)),q.target.value=""},K=(q,J)=>{var ie;const ve=(ie=q.target.files)==null?void 0:ie[0];ve&&(J==="A"?z.current.fileA=ve:z.current.fileB=ve,I(`Loaded ${J}: ${ve.name}`)),q.target.value=""};return l.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[l.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[l.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),l.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),l.jsx("div",{ref:O,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:b.map(q=>l.jsxs("div",{className:`mb-1 ${q.type==="in"?"opacity-50":""} ${q.type==="err"?"text-red-500":""} ${q.type==="info"?"text-cyan-400":""}`,children:[q.type!=="in"&&typeof q.text=="string"&&!q.text.startsWith(">")&&l.jsx("span",{className:"mr-2 opacity-50",children:">"}),q.text]},q.id))}),l.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[l.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),l.jsx("input",{ref:A,type:"text",value:v,onChange:q=>y(q.target.value),onKeyDown:Z,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),l.jsx("input",{type:"file",ref:$,className:"hidden",multiple:!0,onChange:q=>te(q,"single")}),l.jsx("input",{type:"file",ref:E,className:"hidden",multiple:!0,onChange:q=>te(q,"pair")}),l.jsx("input",{type:"file",ref:T,className:"hidden",onChange:q=>K(q,"A")}),l.jsx("input",{type:"file",ref:B,className:"hidden",onChange:q=>K(q,"B")}),l.jsx("input",{type:"file",ref:U,className:"hidden",multiple:!0,onChange:q=>{e.onProcessStackFft&&q.target.files&&(I(`Loading ${q.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(q.target.files)),q.target.value=""}}),l.jsx("input",{type:"file",ref:F,className:"hidden",multiple:!0,onChange:q=>{e.onProcessBatchDiff&&q.target.files&&(I("Starting Batch Diff..."),e.onProcessBatchDiff(q.target.files)),q.target.value=""}})]})}),J6=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=c=>{const u=[];for(let f=0;f<4;f++)r[f]===c&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const c=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(c)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(p=>d[p]=c),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d.some(p=>p>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let c=[];if(Array.isArray(s)?c=s.map(Number):typeof s=="string"?c=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(c=[s,s,s,s]),c.length===1&&!isNaN(c[0])&&(c=[c[0],c[0],c[0],c[0]]),c.length>=4&&!c.slice(0,4).some(isNaN)&&c.some(u=>u>0))return[c[0],c[1],c[2],c[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},eA=e=>{const[t,r]=C.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,c=C.useRef(null),u=C.useRef(!1),f=C.useRef(null);C.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),C.useEffect(()=>{var p;if(i&&n&&!u.current){u.current=!0;const m=J6(n,a),x=m&&m.some(b=>b>0);if(m&&x){console.log("[AutoApply] Detected Black Levels via Bridge:",m),(p=c.current)==null||p.log(`Auto-detected BL: ${m.join(" ")}`,"info");const b={...o,blackLevel:m,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};s(b)}}},[i,n,a,o,s]);const d=p=>{c.current&&c.current.log(p,"in")};return l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[l.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),l.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),l.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[l.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:l.jsx(Z6,{...e,onCommand:d})}),l.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:l.jsx(Q6,{...e,ref:c})})]})]})},tA=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),rA=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),nA=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),aA=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),iA=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Gy=.1,Wy=16,oA=Math.log(Gy),sA=Math.log(Wy),lA=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Gy,Math.min(Wy,d)))},o=()=>{t(Math.min(Wy,e*1.25))},s=()=>{t(Math.max(Gy,e/1.25))},c=Math.log(e);return l.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[l.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:l.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?l.jsx(iA,{}):l.jsx(aA,{})})}),l.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[l.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:l.jsx(tA,{})}),l.jsx("input",{type:"range",min:oA,max:sA,step:"0.01",value:c,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),l.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:l.jsx(rA,{})}),l.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),l.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:l.jsx(nA,{})})]})]})},cA=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return l.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function Gj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Gj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function er(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Gj(e))&&(n&&(n+=" "),n+=t);return n}var uA=Array.isArray,Ba=uA,fA=typeof bd=="object"&&bd&&bd.Object===Object&&bd,Wj=fA,dA=Wj,hA=typeof self=="object"&&self&&self.Object===Object&&self,pA=dA||hA||Function("return this")(),ro=pA,gA=ro,mA=gA.Symbol,nd=mA,mw=nd,Vj=Object.prototype,yA=Vj.hasOwnProperty,vA=Vj.toString,vu=mw?mw.toStringTag:void 0;function xA(e){var t=yA.call(e,vu),r=e[vu];try{e[vu]=void 0;var n=!0}catch{}var a=vA.call(e);return n&&(t?e[vu]=r:delete e[vu]),a}var bA=xA,wA=Object.prototype,kA=wA.toString;function SA(e){return kA.call(e)}var jA=SA,yw=nd,_A=bA,PA=jA,CA="[object Null]",NA="[object Undefined]",vw=yw?yw.toStringTag:void 0;function OA(e){return e==null?e===void 0?NA:CA:vw&&vw in Object(e)?_A(e):PA(e)}var Oo=OA;function MA(e){return e!=null&&typeof e=="object"}var Mo=MA,AA=Oo,TA=Mo,EA="[object Symbol]";function $A(e){return typeof e=="symbol"||TA(e)&&AA(e)==EA}var Hc=$A,DA=Ba,RA=Hc,IA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LA=/^\w*$/;function FA(e,t){if(DA(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||RA(e)?!0:LA.test(e)||!IA.test(e)||t!=null&&e in Object(t)}var P1=FA;function BA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ms=BA;const Xc=Br(ms);var zA=Oo,UA=ms,GA="[object AsyncFunction]",WA="[object Function]",VA="[object GeneratorFunction]",HA="[object Proxy]";function XA(e){if(!UA(e))return!1;var t=zA(e);return t==WA||t==VA||t==GA||t==HA}var C1=XA;const $t=Br(C1);var KA=ro,qA=KA["__core-js_shared__"],YA=qA,dm=YA,xw=function(){var e=/[^.]+$/.exec(dm&&dm.keys&&dm.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ZA(e){return!!xw&&xw in e}var QA=ZA,JA=Function.prototype,eT=JA.toString;function tT(e){if(e!=null){try{return eT.call(e)}catch{}try{return e+""}catch{}}return""}var Hj=tT,rT=C1,nT=QA,aT=ms,iT=Hj,oT=/[\\^$.*+?()[\]{}|]/g,sT=/^\[object .+?Constructor\]$/,lT=Function.prototype,cT=Object.prototype,uT=lT.toString,fT=cT.hasOwnProperty,dT=RegExp("^"+uT.call(fT).replace(oT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hT(e){if(!aT(e)||nT(e))return!1;var t=rT(e)?dT:sT;return t.test(iT(e))}var pT=hT;function gT(e,t){return e==null?void 0:e[t]}var mT=gT,yT=pT,vT=mT;function xT(e,t){var r=vT(e,t);return yT(r)?r:void 0}var vl=xT,bT=vl,wT=bT(Object,"create"),xp=wT,bw=xp;function kT(){this.__data__=bw?bw(null):{},this.size=0}var ST=kT;function jT(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _T=jT,PT=xp,CT="__lodash_hash_undefined__",NT=Object.prototype,OT=NT.hasOwnProperty;function MT(e){var t=this.__data__;if(PT){var r=t[e];return r===CT?void 0:r}return OT.call(t,e)?t[e]:void 0}var AT=MT,TT=xp,ET=Object.prototype,$T=ET.hasOwnProperty;function DT(e){var t=this.__data__;return TT?t[e]!==void 0:$T.call(t,e)}var RT=DT,IT=xp,LT="__lodash_hash_undefined__";function FT(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=IT&&t===void 0?LT:t,this}var BT=FT,zT=ST,UT=_T,GT=AT,WT=RT,VT=BT;function Kc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kc.prototype.clear=zT;Kc.prototype.delete=UT;Kc.prototype.get=GT;Kc.prototype.has=WT;Kc.prototype.set=VT;var HT=Kc;function XT(){this.__data__=[],this.size=0}var KT=XT;function qT(e,t){return e===t||e!==e&&t!==t}var N1=qT,YT=N1;function ZT(e,t){for(var r=e.length;r--;)if(YT(e[r][0],t))return r;return-1}var bp=ZT,QT=bp,JT=Array.prototype,e8=JT.splice;function t8(e){var t=this.__data__,r=QT(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():e8.call(t,r,1),--this.size,!0}var r8=t8,n8=bp;function a8(e){var t=this.__data__,r=n8(t,e);return r<0?void 0:t[r][1]}var i8=a8,o8=bp;function s8(e){return o8(this.__data__,e)>-1}var l8=s8,c8=bp;function u8(e,t){var r=this.__data__,n=c8(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var f8=u8,d8=KT,h8=r8,p8=i8,g8=l8,m8=f8;function qc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qc.prototype.clear=d8;qc.prototype.delete=h8;qc.prototype.get=p8;qc.prototype.has=g8;qc.prototype.set=m8;var wp=qc,y8=vl,v8=ro,x8=y8(v8,"Map"),O1=x8,ww=HT,b8=wp,w8=O1;function k8(){this.size=0,this.__data__={hash:new ww,map:new(w8||b8),string:new ww}}var S8=k8;function j8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _8=j8,P8=_8;function C8(e,t){var r=e.__data__;return P8(t)?r[typeof t=="string"?"string":"hash"]:r.map}var kp=C8,N8=kp;function O8(e){var t=N8(this,e).delete(e);return this.size-=t?1:0,t}var M8=O8,A8=kp;function T8(e){return A8(this,e).get(e)}var E8=T8,$8=kp;function D8(e){return $8(this,e).has(e)}var R8=D8,I8=kp;function L8(e,t){var r=I8(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var F8=L8,B8=S8,z8=M8,U8=E8,G8=R8,W8=F8;function Yc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Yc.prototype.clear=B8;Yc.prototype.delete=z8;Yc.prototype.get=U8;Yc.prototype.has=G8;Yc.prototype.set=W8;var M1=Yc,Xj=M1,V8="Expected a function";function A1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(V8);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(A1.Cache||Xj),r}A1.Cache=Xj;var Kj=A1;const H8=Br(Kj);var X8=Kj,K8=500;function q8(e){var t=X8(e,function(n){return r.size===K8&&r.clear(),n}),r=t.cache;return t}var Y8=q8,Z8=Y8,Q8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J8=/\\(\\)?/g,eE=Z8(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Q8,function(r,n,a,i){t.push(a?i.replace(J8,"$1"):n||r)}),t}),tE=eE;function rE(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var T1=rE,kw=nd,nE=T1,aE=Ba,iE=Hc,Sw=kw?kw.prototype:void 0,jw=Sw?Sw.toString:void 0;function qj(e){if(typeof e=="string")return e;if(aE(e))return nE(e,qj)+"";if(iE(e))return jw?jw.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var oE=qj,sE=oE;function lE(e){return e==null?"":sE(e)}var Yj=lE,cE=Ba,uE=P1,fE=tE,dE=Yj;function hE(e,t){return cE(e)?e:uE(e,t)?[e]:fE(dE(e))}var Zj=hE,pE=Hc;function gE(e){if(typeof e=="string"||pE(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Sp=gE,mE=Zj,yE=Sp;function vE(e,t){t=mE(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[yE(t[r++])];return r&&r==n?e:void 0}var E1=vE,xE=E1;function bE(e,t,r){var n=e==null?void 0:xE(e,t);return n===void 0?r:n}var Qj=bE;const di=Br(Qj);function wE(e){return e==null}var kE=wE;const Ot=Br(kE);var SE=Oo,jE=Ba,_E=Mo,PE="[object String]";function CE(e){return typeof e=="string"||!jE(e)&&_E(e)&&SE(e)==PE}var NE=CE;const ll=Br(NE);var Jj={exports:{}},Ar={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=Symbol.for("react.element"),D1=Symbol.for("react.portal"),jp=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),Pp=Symbol.for("react.profiler"),Cp=Symbol.for("react.provider"),Np=Symbol.for("react.context"),OE=Symbol.for("react.server_context"),Op=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Ap=Symbol.for("react.suspense_list"),Tp=Symbol.for("react.memo"),Ep=Symbol.for("react.lazy"),ME=Symbol.for("react.offscreen"),e_;e_=Symbol.for("react.module.reference");function mi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case $1:switch(e=e.type,e){case jp:case Pp:case _p:case Mp:case Ap:return e;default:switch(e=e&&e.$$typeof,e){case OE:case Np:case Op:case Ep:case Tp:case Cp:return e;default:return t}}case D1:return t}}}Ar.ContextConsumer=Np;Ar.ContextProvider=Cp;Ar.Element=$1;Ar.ForwardRef=Op;Ar.Fragment=jp;Ar.Lazy=Ep;Ar.Memo=Tp;Ar.Portal=D1;Ar.Profiler=Pp;Ar.StrictMode=_p;Ar.Suspense=Mp;Ar.SuspenseList=Ap;Ar.isAsyncMode=function(){return!1};Ar.isConcurrentMode=function(){return!1};Ar.isContextConsumer=function(e){return mi(e)===Np};Ar.isContextProvider=function(e){return mi(e)===Cp};Ar.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===$1};Ar.isForwardRef=function(e){return mi(e)===Op};Ar.isFragment=function(e){return mi(e)===jp};Ar.isLazy=function(e){return mi(e)===Ep};Ar.isMemo=function(e){return mi(e)===Tp};Ar.isPortal=function(e){return mi(e)===D1};Ar.isProfiler=function(e){return mi(e)===Pp};Ar.isStrictMode=function(e){return mi(e)===_p};Ar.isSuspense=function(e){return mi(e)===Mp};Ar.isSuspenseList=function(e){return mi(e)===Ap};Ar.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jp||e===Pp||e===_p||e===Mp||e===Ap||e===ME||typeof e=="object"&&e!==null&&(e.$$typeof===Ep||e.$$typeof===Tp||e.$$typeof===Cp||e.$$typeof===Np||e.$$typeof===Op||e.$$typeof===e_||e.getModuleId!==void 0)};Ar.typeOf=mi;Jj.exports=Ar;var AE=Jj.exports,TE=Oo,EE=Mo,$E="[object Number]";function DE(e){return typeof e=="number"||EE(e)&&TE(e)==$E}var t_=DE;const RE=Br(t_);var IE=t_;function LE(e){return IE(e)&&e!=+e}var FE=LE;const Zc=Br(FE);var Mi=function(t){return t===0?0:t>0?1:-1},zs=function(t){return ll(t)&&t.indexOf("%")===t.length-1},Ee=function(t){return RE(t)&&!Zc(t)},BE=function(t){return Ot(t)},Wn=function(t){return Ee(t)||ll(t)},zE=0,xl=function(t){var r=++zE;return"".concat(t||"").concat(r)},cl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(t)&&!ll(t))return n;var i;if(zs(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Zc(i)&&(i=n),a&&i>r&&(i=r),i},zo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},UE=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Nn=function(t,r){return Ee(t)&&Ee(r)?function(n){return t+n*(r-t)}:function(){return r}};function K0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):di(n,t))===r})}var GE=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,c=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),c=Math.max(c,u);var p=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:c,a:p,b:(a-p*n)/r}},WE=function(t,r){return Ee(t)&&Ee(r)?t-r:ll(t)&&ll(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function nc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Vy(e){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vy(e)}var VE=["viewBox","children"],HE=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],_w=["points","pathLength"],hm={svg:VE,polygon:_w,polyline:_w},R1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],q0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),!Xc(n))return null;var a={};return Object.keys(n).forEach(function(i){R1.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},XE=function(t,r,n){return function(a){return t(r,n,a),null}},mf=function(t,r,n){if(!Xc(t)||Vy(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];R1.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=XE(o,r,n))}),a},KE=["children"],qE=["children"];function Pw(e,t){if(e==null)return{};var r=YE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Hy(e){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hy(e)}var Cw={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},vo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Nw=null,pm=null,I1=function e(t){if(t===Nw&&Array.isArray(pm))return pm;var r=[];return C.Children.forEach(t,function(n){Ot(n)||(AE.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),pm=r,Nw=t,r};function Fa(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return vo(a)}):n=[vo(t)],I1(e).forEach(function(a){var i=di(a,"type.displayName")||di(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Wa(e,t){var r=Fa(e,t);return r&&r[0]}var Ow=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Ee(n)||n<=0||!Ee(a)||a<=0)},ZE=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],QE=function(t){return t&&t.type&&ll(t.type)&&ZE.indexOf(t.type)>=0},r_=function(t){return t&&Hy(t)==="object"&&"clipDot"in t},JE=function(t,r,n,a){var i,o=(i=hm==null?void 0:hm[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!$t(t)&&(a&&o.includes(r)||HE.includes(r))||n&&R1.includes(r)},Tt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(C.isValidElement(t)&&(a=t.props),!Xc(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;JE((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},Xy=function e(t,r){if(t===r)return!0;var n=C.Children.count(t);if(n!==C.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Mw(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!Mw(i,o))return!1}return!0},Mw=function(t,r){if(Ot(t)&&Ot(r))return!0;if(!Ot(t)&&!Ot(r)){var n=t.props||{},a=n.children,i=Pw(n,KE),o=r.props||{},s=o.children,c=Pw(o,qE);return a&&s?nc(i,c)&&Xy(a,s):!a&&!s?nc(i,c):!1}return!1},Aw=function(t,r){var n=[],a={};return I1(t).forEach(function(i,o){if(QE(i))n.push(i);else if(i){var s=vo(i.type),c=r[s]||{},u=c.handler,f=c.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},e$=function(t){var r=t&&t.type;return r&&Cw[r]?Cw[r]:null},t$=function(t,r){return I1(r).indexOf(t)},r$=["children","width","height","viewBox","className","style","title","desc"];function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ky.apply(this,arguments)}function n$(e,t){if(e==null)return{};var r=a$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qy(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,c=e.desc,u=n$(e,r$),f=a||{width:r,height:n,x:0,y:0},d=er("recharts-surface",i);return Q.createElement("svg",Ky({},Tt(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Q.createElement("title",null,s),Q.createElement("desc",null,c),t)}var i$=["children","className"];function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yy.apply(this,arguments)}function o$(e,t){if(e==null)return{};var r=s$(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vr=Q.forwardRef(function(e,t){var r=e.children,n=e.className,a=o$(e,i$),i=er("recharts-layer",n);return Q.createElement("g",Yy({className:i},Tt(a,!0),{ref:t}),r)}),xo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function l$(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var c$=l$,u$=c$;function f$(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:u$(e,t,r)}var d$=f$,h$="\\ud800-\\udfff",p$="\\u0300-\\u036f",g$="\\ufe20-\\ufe2f",m$="\\u20d0-\\u20ff",y$=p$+g$+m$,v$="\\ufe0e\\ufe0f",x$="\\u200d",b$=RegExp("["+x$+h$+y$+v$+"]");function w$(e){return b$.test(e)}var n_=w$;function k$(e){return e.split("")}var S$=k$,a_="\\ud800-\\udfff",j$="\\u0300-\\u036f",_$="\\ufe20-\\ufe2f",P$="\\u20d0-\\u20ff",C$=j$+_$+P$,N$="\\ufe0e\\ufe0f",O$="["+a_+"]",Zy="["+C$+"]",Qy="\\ud83c[\\udffb-\\udfff]",M$="(?:"+Zy+"|"+Qy+")",i_="[^"+a_+"]",o_="(?:\\ud83c[\\udde6-\\uddff]){2}",s_="[\\ud800-\\udbff][\\udc00-\\udfff]",A$="\\u200d",l_=M$+"?",c_="["+N$+"]?",T$="(?:"+A$+"(?:"+[i_,o_,s_].join("|")+")"+c_+l_+")*",E$=c_+l_+T$,$$="(?:"+[i_+Zy+"?",Zy,o_,s_,O$].join("|")+")",D$=RegExp(Qy+"(?="+Qy+")|"+$$+E$,"g");function R$(e){return e.match(D$)||[]}var I$=R$,L$=S$,F$=n_,B$=I$;function z$(e){return F$(e)?B$(e):L$(e)}var U$=z$,G$=d$,W$=n_,V$=U$,H$=Yj;function X$(e){return function(t){t=H$(t);var r=W$(t)?V$(t):void 0,n=r?r[0]:t.charAt(0),a=r?G$(r,1).join(""):t.slice(1);return n[e]()+a}}var K$=X$,q$=K$,Y$=q$("toUpperCase"),Z$=Y$;const $p=Br(Z$);function Vr(e){return function(){return e}}const u_=Math.cos,Y0=Math.sin,Ii=Math.sqrt,Z0=Math.PI,Dp=2*Z0,Jy=Math.PI,ev=2*Jy,Ts=1e-6,Q$=ev-Ts;function f_(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function J$(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return f_;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class e7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?f_:J$(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,c=n-t,u=a-r,f=o-t,d=s-r,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Ts)if(!(Math.abs(d*c-u*f)>Ts)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,x=a-s,b=c*c+u*u,k=m*m+x*x,v=Math.sqrt(b),y=Math.sqrt(p),w=i*Math.tan((Jy-Math.acos((b+p-k)/(2*v*y)))/2),P=w/y,S=w/v;Math.abs(P-1)>Ts&&this._append`L${t+P*f},${r+P*d}`,this._append`A${i},${i},0,0,${+(d*m>f*x)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),c=n*Math.sin(a),u=t+s,f=r+c,d=1^o,p=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Ts||Math.abs(this._y1-f)>Ts)&&this._append`L${u},${f}`,n&&(p<0&&(p=p%ev+ev),p>Q$?this._append`A${n},${n},0,1,${d},${t-s},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:p>Ts&&this._append`A${n},${n},0,${+(p>=Jy)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function L1(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new e7(t)}function F1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function d_(e){this._context=e}d_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rp(e){return new d_(e)}function h_(e){return e[0]}function p_(e){return e[1]}function g_(e,t){var r=Vr(!0),n=null,a=Rp,i=null,o=L1(s);e=typeof e=="function"?e:e===void 0?h_:Vr(e),t=typeof t=="function"?t:t===void 0?p_:Vr(t);function s(c){var u,f=(c=F1(c)).length,d,p=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(d,u,c),+t(d,u,c));if(m)return i=null,m+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:Vr(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:Vr(+c),s):t},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Vr(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),s):a},s.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),s):n},s}function Ud(e,t,r){var n=null,a=Vr(!0),i=null,o=Rp,s=null,c=L1(u);e=typeof e=="function"?e:e===void 0?h_:Vr(+e),t=typeof t=="function"?t:Vr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?p_:Vr(+r);function u(d){var p,m,x,b=(d=F1(d)).length,k,v=!1,y,w=new Array(b),P=new Array(b);for(i==null&&(s=o(y=c())),p=0;p<=b;++p){if(!(p<b&&a(k=d[p],p,d))===v)if(v=!v)m=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=p-1;x>=m;--x)s.point(w[x],P[x]);s.lineEnd(),s.areaEnd()}v&&(w[p]=+e(k,p,d),P[p]=+t(k,p,d),s.point(n?+n(k,p,d):w[p],r?+r(k,p,d):P[p]))}if(y)return s=null,y+""||null}function f(){return g_().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Vr(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Vr(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Vr(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Vr(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Vr(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Vr(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Vr(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class m_{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function t7(e){return new m_(e,!0)}function r7(e){return new m_(e,!1)}const B1={draw(e,t){const r=Ii(t/Z0);e.moveTo(r,0),e.arc(0,0,r,0,Dp)}},n7={draw(e,t){const r=Ii(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},y_=Ii(1/3),a7=y_*2,i7={draw(e,t){const r=Ii(t/a7),n=r*y_;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},o7={draw(e,t){const r=Ii(t),n=-r/2;e.rect(n,n,r,r)}},s7=.8908130915292852,v_=Y0(Z0/10)/Y0(7*Z0/10),l7=Y0(Dp/10)*v_,c7=-u_(Dp/10)*v_,u7={draw(e,t){const r=Ii(t*s7),n=l7*r,a=c7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Dp*i/5,s=u_(o),c=Y0(o);e.lineTo(c*r,-s*r),e.lineTo(s*n-c*a,c*n+s*a)}e.closePath()}},gm=Ii(3),f7={draw(e,t){const r=-Ii(t/(gm*3));e.moveTo(0,r*2),e.lineTo(-gm*r,-r),e.lineTo(gm*r,-r),e.closePath()}},ri=-.5,ni=Ii(3)/2,tv=1/Ii(12),d7=(tv/2+1)*3,h7={draw(e,t){const r=Ii(t/d7),n=r/2,a=r*tv,i=n,o=r*tv+r,s=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,c),e.lineTo(ri*n-ni*a,ni*n+ri*a),e.lineTo(ri*i-ni*o,ni*i+ri*o),e.lineTo(ri*s-ni*c,ni*s+ri*c),e.lineTo(ri*n+ni*a,ri*a-ni*n),e.lineTo(ri*i+ni*o,ri*o-ni*i),e.lineTo(ri*s+ni*c,ri*c-ni*s),e.closePath()}};function p7(e,t){let r=null,n=L1(a);e=typeof e=="function"?e:Vr(e||B1),t=typeof t=="function"?t:Vr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Vr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Vr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Q0(){}function J0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function x_(e){this._context=e}x_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:J0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:J0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g7(e){return new x_(e)}function b_(e){this._context=e}b_.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:J0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m7(e){return new b_(e)}function w_(e){this._context=e}w_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:J0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y7(e){return new w_(e)}function k_(e){this._context=e}k_.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function v7(e){return new k_(e)}function Tw(e){return e<0?-1:1}function Ew(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(Tw(i)+Tw(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function $w(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function mm(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function eh(e){this._context=e}eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mm(this,this._t0,$w(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mm(this,$w(this,r=Ew(this,e,t)),r);break;default:mm(this,this._t0,r=Ew(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function S_(e){this._context=new j_(e)}(S_.prototype=Object.create(eh.prototype)).point=function(e,t){eh.prototype.point.call(this,t,e)};function j_(e){this._context=e}j_.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function x7(e){return new eh(e)}function b7(e){return new S_(e)}function __(e){this._context=e}__.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Dw(e),a=Dw(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Dw(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function w7(e){return new __(e)}function Ip(e,t){this._context=e,this._t=t}Ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function k7(e){return new Ip(e,.5)}function S7(e){return new Ip(e,0)}function j7(e){return new Ip(e,1)}function gc(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function rv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function _7(e,t){return e[t]}function P7(e){const t=[];return t.key=e,t}function C7(){var e=Vr([]),t=rv,r=gc,n=_7;function a(i){var o=Array.from(e.apply(this,arguments),P7),s,c=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<c;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=F1(t(o));s<c;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Vr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Vr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?rv:typeof i=="function"?i:Vr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??gc,a):r},a}function N7(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}gc(e,t)}}function O7(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}gc(e,t)}}function M7(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,c=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,p=f[n-1][1]||0,m=(d-p)/2,x=0;x<s;++x){var b=e[t[x]],k=b[n][1]||0,v=b[n-1][1]||0;m+=k-v}c+=d,u+=m*d}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,gc(e,t)}}function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}var A7=["type","size","sizeType"];function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(this,arguments)}function Rw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rw(Object(r),!0).forEach(function(n){T7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T7(e,t,r){return t=E7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E7(e){var t=$7(e,"string");return yf(t)=="symbol"?t:t+""}function $7(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D7(e,t){if(e==null)return{};var r=R7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var P_={symbolCircle:B1,symbolCross:n7,symbolDiamond:i7,symbolSquare:o7,symbolStar:u7,symbolTriangle:f7,symbolWye:h7},I7=Math.PI/180,L7=function(t){var r="symbol".concat($p(t));return P_[r]||B1},F7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*I7;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},B7=function(t,r){P_["symbol".concat($p(t))]=r},Lp=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,c=D7(t,A7),u=Iw(Iw({},c),{},{type:n,size:i,sizeType:s}),f=function(){var k=L7(n),v=p7().type(k).size(F7(i,s,n));return v()},d=u.className,p=u.cx,m=u.cy,x=Tt(u,!0);return p===+p&&m===+m&&i===+i?Q.createElement("path",nv({},x,{className:er("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(m,")"),d:f()})):null};Lp.registerSymbol=B7;function mc(e){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(e)}function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(this,arguments)}function Lw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lw(Object(r),!0).forEach(function(n){vf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N_(n.key),n)}}function W7(e,t,r){return t&&G7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function V7(e,t,r){return t=th(t),H7(e,C_()?Reflect.construct(t,r||[],th(e).constructor):t.apply(e,r))}function H7(e,t){if(t&&(mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X7(e)}function X7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C_=function(){return!!e})()}function th(e){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},th(e)}function K7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iv(e,t)}function iv(e,t){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iv(e,t)}function vf(e,t,r){return t=N_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N_(e){var t=q7(e,"string");return mc(t)=="symbol"?t:t+""}function q7(e,t){if(mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ai=32,z1=function(e){function t(){return U7(this,t),V7(this,t,arguments)}return K7(t,e),W7(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ai/2,o=ai/6,s=ai/3,c=n.inactive?a:n.color;if(n.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ai,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(ai,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return Q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ai/8,"h").concat(ai,"v").concat(ai*3/4,"h").concat(-ai,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(n.legendIcon)){var u=z7({},n);return delete u.legendIcon,Q.cloneElement(n.legendIcon,u)}return Q.createElement(Lp,{fill:c,cx:i,cy:i,size:ai,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:ai,height:ai},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,x){var b=m.formatter||c,k=er(vf(vf({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",m.inactive));if(m.type==="none")return null;var v=$t(m.value)?null:m.value;xo(!$t(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return Q.createElement("li",av({className:k,style:d,key:"legend-item-".concat(x)},mf(n.props,m,x)),Q.createElement(qy,{width:o,height:o,viewBox:f,style:p},n.renderIcon(m)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},b?b(v,m,x):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(C.PureComponent);vf(z1,"displayName","Legend");vf(z1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Y7=wp;function Z7(){this.__data__=new Y7,this.size=0}var Q7=Z7;function J7(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var e9=J7;function t9(e){return this.__data__.get(e)}var r9=t9;function n9(e){return this.__data__.has(e)}var a9=n9,i9=wp,o9=O1,s9=M1,l9=200;function c9(e,t){var r=this.__data__;if(r instanceof i9){var n=r.__data__;if(!o9||n.length<l9-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new s9(n)}return r.set(e,t),this.size=r.size,this}var u9=c9,f9=wp,d9=Q7,h9=e9,p9=r9,g9=a9,m9=u9;function Qc(e){var t=this.__data__=new f9(e);this.size=t.size}Qc.prototype.clear=d9;Qc.prototype.delete=h9;Qc.prototype.get=p9;Qc.prototype.has=g9;Qc.prototype.set=m9;var O_=Qc,y9="__lodash_hash_undefined__";function v9(e){return this.__data__.set(e,y9),this}var x9=v9;function b9(e){return this.__data__.has(e)}var w9=b9,k9=M1,S9=x9,j9=w9;function rh(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new k9;++t<r;)this.add(e[t])}rh.prototype.add=rh.prototype.push=S9;rh.prototype.has=j9;var M_=rh;function _9(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var A_=_9;function P9(e,t){return e.has(t)}var T_=P9,C9=M_,N9=A_,O9=T_,M9=1,A9=2;function T9(e,t,r,n,a,i){var o=r&M9,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,p=!0,m=r&A9?new C9:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var x=e[d],b=t[d];if(n)var k=o?n(b,x,d,t,e,i):n(x,b,d,e,t,i);if(k!==void 0){if(k)continue;p=!1;break}if(m){if(!N9(t,function(v,y){if(!O9(m,y)&&(x===v||a(x,v,r,n,i)))return m.push(y)})){p=!1;break}}else if(!(x===b||a(x,b,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var E_=T9,E9=ro,$9=E9.Uint8Array,D9=$9;function R9(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var I9=R9;function L9(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var U1=L9,Fw=nd,Bw=D9,F9=N1,B9=E_,z9=I9,U9=U1,G9=1,W9=2,V9="[object Boolean]",H9="[object Date]",X9="[object Error]",K9="[object Map]",q9="[object Number]",Y9="[object RegExp]",Z9="[object Set]",Q9="[object String]",J9="[object Symbol]",eD="[object ArrayBuffer]",tD="[object DataView]",zw=Fw?Fw.prototype:void 0,ym=zw?zw.valueOf:void 0;function rD(e,t,r,n,a,i,o){switch(r){case tD:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case eD:return!(e.byteLength!=t.byteLength||!i(new Bw(e),new Bw(t)));case V9:case H9:case q9:return F9(+e,+t);case X9:return e.name==t.name&&e.message==t.message;case Y9:case Q9:return e==t+"";case K9:var s=z9;case Z9:var c=n&G9;if(s||(s=U9),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=W9,o.set(e,t);var f=B9(s(e),s(t),n,a,i,o);return o.delete(e),f;case J9:if(ym)return ym.call(e)==ym.call(t)}return!1}var nD=rD;function aD(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var $_=aD,iD=$_,oD=Ba;function sD(e,t,r){var n=t(e);return oD(e)?n:iD(n,r(e))}var lD=sD;function cD(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var uD=cD;function fD(){return[]}var dD=fD,hD=uD,pD=dD,gD=Object.prototype,mD=gD.propertyIsEnumerable,Uw=Object.getOwnPropertySymbols,yD=Uw?function(e){return e==null?[]:(e=Object(e),hD(Uw(e),function(t){return mD.call(e,t)}))}:pD,vD=yD;function xD(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var bD=xD,wD=Oo,kD=Mo,SD="[object Arguments]";function jD(e){return kD(e)&&wD(e)==SD}var _D=jD,Gw=_D,PD=Mo,D_=Object.prototype,CD=D_.hasOwnProperty,ND=D_.propertyIsEnumerable,OD=Gw(function(){return arguments}())?Gw:function(e){return PD(e)&&CD.call(e,"callee")&&!ND.call(e,"callee")},G1=OD,nh={exports:{}};function MD(){return!1}var AD=MD;nh.exports;(function(e,t){var r=ro,n=AD,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||n;e.exports=u})(nh,nh.exports);var R_=nh.exports,TD=9007199254740991,ED=/^(?:0|[1-9]\d*)$/;function $D(e,t){var r=typeof e;return t=t??TD,!!t&&(r=="number"||r!="symbol"&&ED.test(e))&&e>-1&&e%1==0&&e<t}var W1=$D,DD=9007199254740991;function RD(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=DD}var V1=RD,ID=Oo,LD=V1,FD=Mo,BD="[object Arguments]",zD="[object Array]",UD="[object Boolean]",GD="[object Date]",WD="[object Error]",VD="[object Function]",HD="[object Map]",XD="[object Number]",KD="[object Object]",qD="[object RegExp]",YD="[object Set]",ZD="[object String]",QD="[object WeakMap]",JD="[object ArrayBuffer]",eR="[object DataView]",tR="[object Float32Array]",rR="[object Float64Array]",nR="[object Int8Array]",aR="[object Int16Array]",iR="[object Int32Array]",oR="[object Uint8Array]",sR="[object Uint8ClampedArray]",lR="[object Uint16Array]",cR="[object Uint32Array]",Qr={};Qr[tR]=Qr[rR]=Qr[nR]=Qr[aR]=Qr[iR]=Qr[oR]=Qr[sR]=Qr[lR]=Qr[cR]=!0;Qr[BD]=Qr[zD]=Qr[JD]=Qr[UD]=Qr[eR]=Qr[GD]=Qr[WD]=Qr[VD]=Qr[HD]=Qr[XD]=Qr[KD]=Qr[qD]=Qr[YD]=Qr[ZD]=Qr[QD]=!1;function uR(e){return FD(e)&&LD(e.length)&&!!Qr[ID(e)]}var fR=uR;function dR(e){return function(t){return e(t)}}var I_=dR,ah={exports:{}};ah.exports;(function(e,t){var r=Wj,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(ah,ah.exports);var hR=ah.exports,pR=fR,gR=I_,Ww=hR,Vw=Ww&&Ww.isTypedArray,mR=Vw?gR(Vw):pR,L_=mR,yR=bD,vR=G1,xR=Ba,bR=R_,wR=W1,kR=L_,SR=Object.prototype,jR=SR.hasOwnProperty;function _R(e,t){var r=xR(e),n=!r&&vR(e),a=!r&&!n&&bR(e),i=!r&&!n&&!a&&kR(e),o=r||n||a||i,s=o?yR(e.length,String):[],c=s.length;for(var u in e)(t||jR.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wR(u,c)))&&s.push(u);return s}var PR=_R,CR=Object.prototype;function NR(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||CR;return e===r}var OR=NR;function MR(e,t){return function(r){return e(t(r))}}var F_=MR,AR=F_,TR=AR(Object.keys,Object),ER=TR,$R=OR,DR=ER,RR=Object.prototype,IR=RR.hasOwnProperty;function LR(e){if(!$R(e))return DR(e);var t=[];for(var r in Object(e))IR.call(e,r)&&r!="constructor"&&t.push(r);return t}var FR=LR,BR=C1,zR=V1;function UR(e){return e!=null&&zR(e.length)&&!BR(e)}var ad=UR,GR=PR,WR=FR,VR=ad;function HR(e){return VR(e)?GR(e):WR(e)}var Fp=HR,XR=lD,KR=vD,qR=Fp;function YR(e){return XR(e,qR,KR)}var ZR=YR,Hw=ZR,QR=1,JR=Object.prototype,eI=JR.hasOwnProperty;function tI(e,t,r,n,a,i){var o=r&QR,s=Hw(e),c=s.length,u=Hw(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var p=s[d];if(!(o?p in t:eI.call(t,p)))return!1}var m=i.get(e),x=i.get(t);if(m&&x)return m==t&&x==e;var b=!0;i.set(e,t),i.set(t,e);for(var k=o;++d<c;){p=s[d];var v=e[p],y=t[p];if(n)var w=o?n(y,v,p,t,e,i):n(v,y,p,e,t,i);if(!(w===void 0?v===y||a(v,y,r,n,i):w)){b=!1;break}k||(k=p=="constructor")}if(b&&!k){var P=e.constructor,S=t.constructor;P!=S&&"constructor"in e&&"constructor"in t&&!(typeof P=="function"&&P instanceof P&&typeof S=="function"&&S instanceof S)&&(b=!1)}return i.delete(e),i.delete(t),b}var rI=tI,nI=vl,aI=ro,iI=nI(aI,"DataView"),oI=iI,sI=vl,lI=ro,cI=sI(lI,"Promise"),uI=cI,fI=vl,dI=ro,hI=fI(dI,"Set"),B_=hI,pI=vl,gI=ro,mI=pI(gI,"WeakMap"),yI=mI,ov=oI,sv=O1,lv=uI,cv=B_,uv=yI,z_=Oo,Jc=Hj,Xw="[object Map]",vI="[object Object]",Kw="[object Promise]",qw="[object Set]",Yw="[object WeakMap]",Zw="[object DataView]",xI=Jc(ov),bI=Jc(sv),wI=Jc(lv),kI=Jc(cv),SI=Jc(uv),Es=z_;(ov&&Es(new ov(new ArrayBuffer(1)))!=Zw||sv&&Es(new sv)!=Xw||lv&&Es(lv.resolve())!=Kw||cv&&Es(new cv)!=qw||uv&&Es(new uv)!=Yw)&&(Es=function(e){var t=z_(e),r=t==vI?e.constructor:void 0,n=r?Jc(r):"";if(n)switch(n){case xI:return Zw;case bI:return Xw;case wI:return Kw;case kI:return qw;case SI:return Yw}return t});var jI=Es,vm=O_,_I=E_,PI=nD,CI=rI,Qw=jI,Jw=Ba,ek=R_,NI=L_,OI=1,tk="[object Arguments]",rk="[object Array]",Gd="[object Object]",MI=Object.prototype,nk=MI.hasOwnProperty;function AI(e,t,r,n,a,i){var o=Jw(e),s=Jw(t),c=o?rk:Qw(e),u=s?rk:Qw(t);c=c==tk?Gd:c,u=u==tk?Gd:u;var f=c==Gd,d=u==Gd,p=c==u;if(p&&ek(e)){if(!ek(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new vm),o||NI(e)?_I(e,t,r,n,a,i):PI(e,t,c,r,n,a,i);if(!(r&OI)){var m=f&&nk.call(e,"__wrapped__"),x=d&&nk.call(t,"__wrapped__");if(m||x){var b=m?e.value():e,k=x?t.value():t;return i||(i=new vm),a(b,k,r,n,i)}}return p?(i||(i=new vm),CI(e,t,r,n,a,i)):!1}var TI=AI,EI=TI,ak=Mo;function U_(e,t,r,n,a){return e===t?!0:e==null||t==null||!ak(e)&&!ak(t)?e!==e&&t!==t:EI(e,t,r,n,U_,a)}var H1=U_,$I=O_,DI=H1,RI=1,II=2;function LI(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var c=s[0],u=e[c],f=s[1];if(o&&s[2]){if(u===void 0&&!(c in e))return!1}else{var d=new $I;if(n)var p=n(u,f,c,e,t,d);if(!(p===void 0?DI(f,u,RI|II,n,d):p))return!1}}return!0}var FI=LI,BI=ms;function zI(e){return e===e&&!BI(e)}var G_=zI,UI=G_,GI=Fp;function WI(e){for(var t=GI(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,UI(a)]}return t}var VI=WI;function HI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var W_=HI,XI=FI,KI=VI,qI=W_;function YI(e){var t=KI(e);return t.length==1&&t[0][2]?qI(t[0][0],t[0][1]):function(r){return r===e||XI(r,e,t)}}var ZI=YI;function QI(e,t){return e!=null&&t in Object(e)}var JI=QI,eL=Zj,tL=G1,rL=Ba,nL=W1,aL=V1,iL=Sp;function oL(e,t,r){t=eL(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=iL(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&aL(a)&&nL(o,a)&&(rL(e)||tL(e)))}var sL=oL,lL=JI,cL=sL;function uL(e,t){return e!=null&&cL(e,t,lL)}var fL=uL,dL=H1,hL=Qj,pL=fL,gL=P1,mL=G_,yL=W_,vL=Sp,xL=1,bL=2;function wL(e,t){return gL(e)&&mL(t)?yL(vL(e),t):function(r){var n=hL(r,e);return n===void 0&&n===t?pL(r,e):dL(t,n,xL|bL)}}var kL=wL;function SL(e){return e}var eu=SL;function jL(e){return function(t){return t==null?void 0:t[e]}}var _L=jL,PL=E1;function CL(e){return function(t){return PL(t,e)}}var NL=CL,OL=_L,ML=NL,AL=P1,TL=Sp;function EL(e){return AL(e)?OL(TL(e)):ML(e)}var $L=EL,DL=ZI,RL=kL,IL=eu,LL=Ba,FL=$L;function BL(e){return typeof e=="function"?e:e==null?IL:typeof e=="object"?LL(e)?RL(e[0],e[1]):DL(e):FL(e)}var ys=BL;function zL(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var V_=zL;function UL(e){return e!==e}var GL=UL;function WL(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var VL=WL,HL=V_,XL=GL,KL=VL;function qL(e,t,r){return t===t?KL(e,t,r):HL(e,XL,r)}var YL=qL,ZL=YL;function QL(e,t){var r=e==null?0:e.length;return!!r&&ZL(e,t,0)>-1}var JL=QL;function eF(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var tF=eF;function rF(){}var nF=rF,xm=B_,aF=nF,iF=U1,oF=1/0,sF=xm&&1/iF(new xm([,-0]))[1]==oF?function(e){return new xm(e)}:aF,lF=sF,cF=M_,uF=JL,fF=tF,dF=T_,hF=lF,pF=U1,gF=200;function mF(e,t,r){var n=-1,a=uF,i=e.length,o=!0,s=[],c=s;if(r)o=!1,a=fF;else if(i>=gF){var u=t?null:hF(e);if(u)return pF(u);o=!1,a=dF,c=new cF}else c=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(f)}else a(c,d,r)||(c!==s&&c.push(d),s.push(f))}return s}var yF=mF,vF=ys,xF=yF;function bF(e,t){return e&&e.length?xF(e,vF(t)):[]}var wF=bF;const ik=Br(wF);function H_(e,t,r){return t===!0?ik(e,r):$t(t)?ik(e,t):e}function yc(e){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yc(e)}var kF=["ref"];function ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ok(Object(r),!0).forEach(function(n){Bp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K_(n.key),n)}}function jF(e,t,r){return t&&sk(e.prototype,t),r&&sk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _F(e,t,r){return t=ih(t),PF(e,X_()?Reflect.construct(t,r||[],ih(e).constructor):t.apply(e,r))}function PF(e,t){if(t&&(yc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CF(e)}function CF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X_=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(e)}function NF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fv(e,t)}function fv(e,t){return fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fv(e,t)}function Bp(e,t,r){return t=K_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K_(e){var t=OF(e,"string");return yc(t)=="symbol"?t:t+""}function OF(e,t){if(yc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function MF(e,t){if(e==null)return{};var r=AF(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TF(e){return e.value}function EF(e,t){if(Q.isValidElement(e))return Q.cloneElement(e,t);if(typeof e=="function")return Q.createElement(e,t);t.ref;var r=MF(t,kF);return Q.createElement(z1,r)}var lk=1,Ki=function(e){function t(){var r;SF(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=_F(this,t,[].concat(a)),Bp(r,"lastBoundingBox",{width:-1,height:-1}),r}return NF(t,e),jF(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>lk||Math.abs(a.height-this.lastBoundingBox.height)>lk)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?so({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,d,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var x=this.getBBoxSnapshot();p={top:((f||0)-x.height)/2}}else p=s==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return so(so({},d),p)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=so(so({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(c)),c);return Q.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){n.wrapperNode=m}},EF(i,so(so({},this.props),{},{payload:H_(f,u,TF)})))}}],[{key:"getWithHeight",value:function(n,a){var i=so(so({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Ee(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(C.PureComponent);Bp(Ki,"displayName","Legend");Bp(Ki,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ck=nd,$F=G1,DF=Ba,uk=ck?ck.isConcatSpreadable:void 0;function RF(e){return DF(e)||$F(e)||!!(uk&&e&&e[uk])}var IF=RF,LF=$_,FF=IF;function q_(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=FF),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?q_(s,t-1,r,n,a):LF(a,s):n||(a[a.length]=s)}return a}var Y_=q_;function BF(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var c=o[e?s:++a];if(r(i[c],c,i)===!1)break}return t}}var zF=BF,UF=zF,GF=UF(),WF=GF,VF=WF,HF=Fp;function XF(e,t){return e&&VF(e,t,HF)}var Z_=XF,KF=ad;function qF(e,t){return function(r,n){if(r==null)return r;if(!KF(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var YF=qF,ZF=Z_,QF=YF,JF=QF(ZF),X1=JF,eB=X1,tB=ad;function rB(e,t){var r=-1,n=tB(e)?Array(e.length):[];return eB(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var Q_=rB;function nB(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var aB=nB,fk=Hc;function iB(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=fk(e),o=t!==void 0,s=t===null,c=t===t,u=fk(t);if(!s&&!u&&!i&&e>t||i&&o&&c&&!s&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!c)return-1}return 0}var oB=iB,sB=oB;function lB(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var c=sB(a[n],i[n]);if(c){if(n>=s)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var cB=lB,bm=T1,uB=E1,fB=ys,dB=Q_,hB=aB,pB=I_,gB=cB,mB=eu,yB=Ba;function vB(e,t,r){t.length?t=bm(t,function(i){return yB(i)?function(o){return uB(o,i.length===1?i[0]:i)}:i}):t=[mB];var n=-1;t=bm(t,pB(fB));var a=dB(e,function(i,o,s){var c=bm(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return hB(a,function(i,o){return gB(i,o,r)})}var xB=vB;function bB(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var wB=bB,kB=wB,dk=Math.max;function SB(e,t,r){return t=dk(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=dk(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),kB(e,this,s)}}var jB=SB;function _B(e){return function(){return e}}var PB=_B,CB=vl,NB=function(){try{var e=CB(Object,"defineProperty");return e({},"",{}),e}catch{}}(),J_=NB,OB=PB,hk=J_,MB=eu,AB=hk?function(e,t){return hk(e,"toString",{configurable:!0,enumerable:!1,value:OB(t),writable:!0})}:MB,TB=AB,EB=800,$B=16,DB=Date.now;function RB(e){var t=0,r=0;return function(){var n=DB(),a=$B-(n-r);if(r=n,a>0){if(++t>=EB)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var IB=RB,LB=TB,FB=IB,BB=FB(LB),zB=BB,UB=eu,GB=jB,WB=zB;function VB(e,t){return WB(GB(e,t,UB),e+"")}var HB=VB,XB=N1,KB=ad,qB=W1,YB=ms;function ZB(e,t,r){if(!YB(r))return!1;var n=typeof t;return(n=="number"?KB(r)&&qB(t,r.length):n=="string"&&t in r)?XB(r[t],e):!1}var zp=ZB,QB=Y_,JB=xB,ez=HB,pk=zp,tz=ez(function(e,t){if(e==null)return[];var r=t.length;return r>1&&pk(e,t[0],t[1])?t=[]:r>2&&pk(t[0],t[1],t[2])&&(t=[t[0]]),JB(e,QB(t,1),[])}),rz=tz;const K1=Br(rz);function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dv.apply(this,arguments)}function nz(e,t){return sz(e)||oz(e,t)||iz(e,t)||az()}function az(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iz(e,t){if(e){if(typeof e=="string")return gk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gk(e,t)}}function gk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function sz(e){if(Array.isArray(e))return e}function mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mk(Object(r),!0).forEach(function(n){lz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lz(e,t,r){return t=cz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cz(e){var t=uz(e,"string");return xf(t)=="symbol"?t:t+""}function uz(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fz(e){return Array.isArray(e)&&Wn(e[0])&&Wn(e[1])?e.join(" ~ "):e}var dz=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,p=t.itemSorter,m=t.wrapperClassName,x=t.labelClassName,b=t.label,k=t.labelFormatter,v=t.accessibilityLayer,y=v===void 0?!1:v,w=function(){if(f&&f.length){var B={padding:0,margin:0},U=(p?K1(f,p):f).map(function(F,G){if(F.type==="none")return null;var z=wm({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},s),I=F.formatter||d||fz,L=F.value,H=F.name,Z=L,te=H;if(I&&Z!=null&&te!=null){var K=I(L,H,F,G,f);if(Array.isArray(K)){var q=nz(K,2);Z=q[0],te=q[1]}else Z=K}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:z},Wn(te)?Q.createElement("span",{className:"recharts-tooltip-item-name"},te):null,Wn(te)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},Z),Q.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:B},U)}return null},P=wm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=wm({margin:0},u),j=!Ot(b),O=j?b:"",A=er("recharts-default-tooltip",m),$=er("recharts-tooltip-label",x);j&&k&&f!==void 0&&f!==null&&(O=k(b,f));var E=y?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",dv({className:A,style:P},E),Q.createElement("p",{className:$,style:S},Q.isValidElement(O)?O:"".concat(O)),w())};function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function Wd(e,t,r){return t=hz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hz(e){var t=pz(e,"string");return bf(t)=="symbol"?t:t+""}function pz(e,t){if(bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xu="recharts-tooltip-wrapper",gz={visibility:"hidden"};function mz(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return er(xu,Wd(Wd(Wd(Wd({},"".concat(xu,"-right"),Ee(r)&&t&&Ee(t.x)&&r>=t.x),"".concat(xu,"-left"),Ee(r)&&t&&Ee(t.x)&&r<t.x),"".concat(xu,"-bottom"),Ee(n)&&t&&Ee(t.y)&&n>=t.y),"".concat(xu,"-top"),Ee(n)&&t&&Ee(t.y)&&n<t.y))}function yk(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Ee(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var p=f,m=c[n];return p<m?Math.max(d,c[n]):Math.max(f,c[n])}var x=d+s,b=c[n]+u;return x>b?Math.max(f,c[n]):Math.max(d,c[n])}function yz(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function vz(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=yk({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=yk({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=yz({translateX:f,translateY:d,useTranslate3d:s})):u=gz,{cssProperties:u,cssClasses:mz({translateX:f,translateY:d,coordinate:r})}}function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(n){pv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tP(n.key),n)}}function wz(e,t,r){return t&&bz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kz(e,t,r){return t=oh(t),Sz(e,eP()?Reflect.construct(t,r||[],oh(e).constructor):t.apply(e,r))}function Sz(e,t){if(t&&(vc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jz(e)}function jz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eP=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(e)}function _z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hv(e,t)}function hv(e,t){return hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hv(e,t)}function pv(e,t,r){return t=tP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tP(e){var t=Pz(e,"string");return vc(t)=="symbol"?t:t+""}function Pz(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bk=1,Cz=function(e){function t(){var r;xz(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=kz(this,t,[].concat(a)),pv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),pv(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return _z(t,e),wz(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>bk||Math.abs(n.height-this.state.lastBoundingBox.height)>bk)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,p=a.isAnimationActive,m=a.offset,x=a.position,b=a.reverseDirection,k=a.useTranslate3d,v=a.viewBox,y=a.wrapperStyle,w=vz({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:x,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:k,viewBox:v}),P=w.cssClasses,S=w.cssProperties,j=xk(xk({transition:p&&i?"transform ".concat(s,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return Q.createElement("div",{tabIndex:-1,className:P,style:j,ref:function(A){n.wrapperNode=A}},u)}}])}(C.PureComponent),Nz=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},vs={isSsr:Nz()};function xc(e){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(e)}function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(n){q1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nP(n.key),n)}}function Az(e,t,r){return t&&Mz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tz(e,t,r){return t=sh(t),Ez(e,rP()?Reflect.construct(t,r||[],sh(e).constructor):t.apply(e,r))}function Ez(e,t){if(t&&(xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $z(e)}function $z(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rP=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sh(e)}function Dz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gv(e,t)}function gv(e,t){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gv(e,t)}function q1(e,t,r){return t=nP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nP(e){var t=Rz(e,"string");return xc(t)=="symbol"?t:t+""}function Rz(e,t){if(xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Iz(e){return e.dataKey}function Lz(e,t){return Q.isValidElement(e)?Q.cloneElement(e,t):typeof e=="function"?Q.createElement(e,t):Q.createElement(dz,t)}var Un=function(e){function t(){return Oz(this,t),Tz(this,t,arguments)}return Dz(t,e),Az(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,p=a.isAnimationActive,m=a.offset,x=a.payload,b=a.payloadUniqBy,k=a.position,v=a.reverseDirection,y=a.useTranslate3d,w=a.viewBox,P=a.wrapperStyle,S=x??[];d&&S.length&&(S=H_(x.filter(function(O){return O.value!=null&&(O.hide!==!0||n.props.includeHidden)}),b,Iz));var j=S.length>0;return Q.createElement(Cz,{allowEscapeViewBox:o,animationDuration:s,animationEasing:c,isAnimationActive:p,active:i,coordinate:f,hasPayload:j,offset:m,position:k,reverseDirection:v,useTranslate3d:y,viewBox:w,wrapperStyle:P},Lz(u,kk(kk({},this.props),{},{payload:S})))}}])}(C.PureComponent);q1(Un,"displayName","Tooltip");q1(Un,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!vs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Fz=ro,Bz=function(){return Fz.Date.now()},zz=Bz,Uz=/\s/;function Gz(e){for(var t=e.length;t--&&Uz.test(e.charAt(t)););return t}var Wz=Gz,Vz=Wz,Hz=/^\s+/;function Xz(e){return e&&e.slice(0,Vz(e)+1).replace(Hz,"")}var Kz=Xz,qz=Kz,Sk=ms,Yz=Hc,jk=NaN,Zz=/^[-+]0x[0-9a-f]+$/i,Qz=/^0b[01]+$/i,Jz=/^0o[0-7]+$/i,eU=parseInt;function tU(e){if(typeof e=="number")return e;if(Yz(e))return jk;if(Sk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Sk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=qz(e);var r=Qz.test(e);return r||Jz.test(e)?eU(e.slice(2),r?2:8):Zz.test(e)?jk:+e}var aP=tU,rU=ms,km=zz,_k=aP,nU="Expected a function",aU=Math.max,iU=Math.min;function oU(e,t,r){var n,a,i,o,s,c,u=0,f=!1,d=!1,p=!0;if(typeof e!="function")throw new TypeError(nU);t=_k(t)||0,rU(r)&&(f=!!r.leading,d="maxWait"in r,i=d?aU(_k(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function m(j){var O=n,A=a;return n=a=void 0,u=j,o=e.apply(A,O),o}function x(j){return u=j,s=setTimeout(v,t),f?m(j):o}function b(j){var O=j-c,A=j-u,$=t-O;return d?iU($,i-A):$}function k(j){var O=j-c,A=j-u;return c===void 0||O>=t||O<0||d&&A>=i}function v(){var j=km();if(k(j))return y(j);s=setTimeout(v,b(j))}function y(j){return s=void 0,p&&n?m(j):(n=a=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,n=c=a=s=void 0}function P(){return s===void 0?o:y(km())}function S(){var j=km(),O=k(j);if(n=arguments,a=this,c=j,O){if(s===void 0)return x(c);if(d)return clearTimeout(s),s=setTimeout(v,t),m(c)}return s===void 0&&(s=setTimeout(v,t)),o}return S.cancel=w,S.flush=P,S}var sU=oU,lU=sU,cU=ms,uU="Expected a function";function fU(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(uU);return cU(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),lU(e,t,{leading:n,maxWait:t,trailing:a})}var dU=fU;const iP=Br(dU);function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function Pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(r),!0).forEach(function(n){hU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hU(e,t,r){return t=pU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pU(e){var t=gU(e,"string");return wf(t)=="symbol"?t:t+""}function gU(e,t){if(wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mU(e,t){return bU(e)||xU(e,t)||vU(e,t)||yU()}function yU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vU(e,t){if(e){if(typeof e=="string")return Ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ck(e,t)}}function Ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function bU(e){if(Array.isArray(e))return e}var Gi=C.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,c=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,p=e.maxHeight,m=e.children,x=e.debounce,b=x===void 0?0:x,k=e.id,v=e.className,y=e.onResize,w=e.style,P=w===void 0?{}:w,S=C.useRef(null),j=C.useRef();j.current=y,C.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var O=C.useState({containerWidth:a.width,containerHeight:a.height}),A=mU(O,2),$=A[0],E=A[1],T=C.useCallback(function(U,F){E(function(G){var z=Math.round(U),I=Math.round(F);return G.containerWidth===z&&G.containerHeight===I?G:{containerWidth:z,containerHeight:I}})},[]);C.useEffect(function(){var U=function(H){var Z,te=H[0].contentRect,K=te.width,q=te.height;T(K,q),(Z=j.current)===null||Z===void 0||Z.call(j,K,q)};b>0&&(U=iP(U,b,{trailing:!0,leading:!1}));var F=new ResizeObserver(U),G=S.current.getBoundingClientRect(),z=G.width,I=G.height;return T(z,I),F.observe(S.current),function(){F.disconnect()}},[T,b]);var B=C.useMemo(function(){var U=$.containerWidth,F=$.containerHeight;if(U<0||F<0)return null;xo(zs(o)||zs(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),xo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var G=zs(o)?U:o,z=zs(c)?F:c;r&&r>0&&(G?z=G/r:z&&(G=z*r),p&&z>p&&(z=p)),xo(G>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,z,o,c,f,d,r);var I=!Array.isArray(m)&&vo(m.type).endsWith("Chart");return Q.Children.map(m,function(L){return Q.isValidElement(L)?C.cloneElement(L,Vd({width:G,height:z},I?{style:Vd({height:"100%",width:"100%",maxHeight:z,maxWidth:G},L.props.style)}:{})):L})},[r,m,c,p,d,f,$,o]);return Q.createElement("div",{id:k?"".concat(k):void 0,className:er("recharts-responsive-container",v),style:Vd(Vd({},P),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:p}),ref:S},B)}),Y1=function(t){return null};Y1.displayName="Cell";function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function Nk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nk(Object(r),!0).forEach(function(n){wU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wU(e,t,r){return t=kU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kU(e){var t=SU(e,"string");return kf(t)=="symbol"?t:t+""}function SU(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Al={widthCache:{},cacheCount:0},jU=2e3,_U={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ok="recharts_measurement_span";function PU(e){var t=mv({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Gu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||vs.isSsr)return{width:0,height:0};var n=PU(r),a=JSON.stringify({text:t,copyStyle:n});if(Al.widthCache[a])return Al.widthCache[a];try{var i=document.getElementById(Ok);i||(i=document.createElement("span"),i.setAttribute("id",Ok),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=mv(mv({},_U),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),c={width:s.width,height:s.height};return Al.widthCache[a]=c,++Al.cacheCount>jU&&(Al.cacheCount=0,Al.widthCache={}),c}catch{return{width:0,height:0}}},CU=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function lh(e,t){return AU(e)||MU(e,t)||OU(e,t)||NU()}function NU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OU(e,t){if(e){if(typeof e=="string")return Mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mk(e,t)}}function Mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function AU(e){if(Array.isArray(e))return e}function TU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ak(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$U(n.key),n)}}function EU(e,t,r){return t&&Ak(e.prototype,t),r&&Ak(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $U(e){var t=DU(e,"string");return Sf(t)=="symbol"?t:t+""}function DU(e,t){if(Sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ek=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,IU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},LU=Object.keys(oP),Xl="NaN";function FU(e,t){return e*oP[t]}var Hd=function(){function e(t,r){TU(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!RU.test(r)&&(this.num=NaN,this.unit=""),LU.includes(r)&&(this.num=FU(t,r),this.unit="px")}return EU(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=IU.exec(r))!==null&&n!==void 0?n:[],i=lh(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function sP(e){if(e.includes(Xl))return Xl;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Tk.exec(t))!==null&&r!==void 0?r:[],a=lh(n,4),i=a[1],o=a[2],s=a[3],c=Hd.parse(i??""),u=Hd.parse(s??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Xl;t=t.replace(Tk,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,p=(d=Ek.exec(t))!==null&&d!==void 0?d:[],m=lh(p,4),x=m[1],b=m[2],k=m[3],v=Hd.parse(x??""),y=Hd.parse(k??""),w=b==="+"?v.add(y):v.subtract(y);if(w.isNaN())return Xl;t=t.replace(Ek,w.toString())}return t}var $k=/\(([^()]*)\)/;function BU(e){for(var t=e;t.includes("(");){var r=$k.exec(t),n=lh(r,2),a=n[1];t=t.replace($k,sP(a))}return t}function zU(e){var t=e.replace(/\s+/g,"");return t=BU(t),t=sP(t),t}function UU(e){try{return zU(e)}catch{return Xl}}function Sm(e){var t=UU(e.slice(5,-1));return t===Xl?"":t}var GU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],WU=["dx","dy","angle","className","breakAll"];function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yv.apply(this,arguments)}function Dk(e,t){if(e==null)return{};var r=VU(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VU(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Rk(e,t){return qU(e)||KU(e,t)||XU(e,t)||HU()}function HU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XU(e,t){if(e){if(typeof e=="string")return Ik(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ik(e,t)}}function Ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function KU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function qU(e){if(Array.isArray(e))return e}var lP=/[ \f\n\r\t\v\u2028\u2029]+/,cP=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Ot(r)||(n?i=r.toString().split(""):i=r.toString().split(lP));var o=i.map(function(c){return{word:c,width:Gu(c,a).width}}),s=n?0:Gu("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},YU=function(t,r,n,a,i){var o=t.maxLines,s=t.children,c=t.style,u=t.breakAll,f=Ee(o),d=s,p=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(z,I){var L=I.word,H=I.width,Z=z[z.length-1];if(Z&&(a==null||i||Z.width+H+n<Number(a)))Z.words.push(L),Z.width+=H+n;else{var te={words:[L],width:H};z.push(te)}return z},[])},m=p(r),x=function(G){return G.reduce(function(z,I){return z.width>I.width?z:I})};if(!f)return m;for(var b="",k=function(G){var z=d.slice(0,G),I=cP({breakAll:u,style:c,children:z+b}).wordsWithComputedWidth,L=p(I),H=L.length>o||x(L).width>Number(a);return[H,L]},v=0,y=d.length-1,w=0,P;v<=y&&w<=d.length-1;){var S=Math.floor((v+y)/2),j=S-1,O=k(j),A=Rk(O,2),$=A[0],E=A[1],T=k(S),B=Rk(T,1),U=B[0];if(!$&&!U&&(v=S+1),$&&U&&(y=S-1),!$&&U){P=E;break}w++}return P||m},Lk=function(t){var r=Ot(t)?[]:t.toString().split(lP);return[{words:r}]},ZU=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!vs.isSsr){var c,u,f=cP({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,p=f.spaceWidth;c=d,u=p}else return Lk(a);return YU({breakAll:o,children:a,maxLines:s,style:i},c,u,r,n)}return Lk(a)},Fk="#808080",ch=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,p=t.textAnchor,m=p===void 0?"start":p,x=t.verticalAnchor,b=x===void 0?"end":x,k=t.fill,v=k===void 0?Fk:k,y=Dk(t,GU),w=C.useMemo(function(){return ZU({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),P=y.dx,S=y.dy,j=y.angle,O=y.className,A=y.breakAll,$=Dk(y,WU);if(!Wn(n)||!Wn(i))return null;var E=n+(Ee(P)?P:0),T=i+(Ee(S)?S:0),B;switch(b){case"start":B=Sm("calc(".concat(u,")"));break;case"middle":B=Sm("calc(".concat((w.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:B=Sm("calc(".concat(w.length-1," * -").concat(s,")"));break}var U=[];if(d){var F=w[0].width,G=y.width;U.push("scale(".concat((Ee(G)?G/F:1)/F,")"))}return j&&U.push("rotate(".concat(j,", ").concat(E,", ").concat(T,")")),U.length&&($.transform=U.join(" ")),Q.createElement("text",yv({},Tt($,!0),{x:E,y:T,className:er("recharts-text",O),textAnchor:m,fill:v.includes("url")?Fk:v}),w.map(function(z,I){var L=z.words.join(A?"":" ");return Q.createElement("tspan",{x:E,dy:I===0?B:s,key:"".concat(L,"-").concat(I)},L)}))};function cs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QU(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Z1(e){let t,r,n;e.length!==2?(t=cs,r=(s,c)=>cs(e(s),c),n=(s,c)=>e(s)-c):(t=e===cs||e===QU?e:JU,r=e,n=e);function a(s,c,u=0,f=s.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(s[d],c)<0?u=d+1:f=d}while(u<f)}return u}function i(s,c,u=0,f=s.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(s[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,c,u=0,f=s.length){const d=a(s,c,u,f-1);return d>u&&n(s[d-1],c)>-n(s[d],c)?d-1:d}return{left:a,center:o,right:i}}function JU(){return 0}function uP(e){return e===null?NaN:+e}function*eG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const tG=Z1(cs),id=tG.right;Z1(uP).center;class Bk extends Map{constructor(t,r=aG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(zk(this,t))}has(t){return super.has(zk(this,t))}set(t,r){return super.set(rG(this,t),r)}delete(t){return super.delete(nG(this,t))}}function zk({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function rG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function nG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function aG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function iG(e=cs){if(e===cs)return fP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function fP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const oG=Math.sqrt(50),sG=Math.sqrt(10),lG=Math.sqrt(2);function uh(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=oG?10:i>=sG?5:i>=lG?2:1;let s,c,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),c=Math.round(t*u),s/u<e&&++s,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),c=Math.round(t/u),s*u<e&&++s,c*u>t&&--c),c<s&&.5<=r&&r<2?uh(e,t,r*2):[s,c,u]}function vv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?uh(t,e,r):uh(e,t,r);if(!(i>=a))return[];const s=i-a+1,c=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)c[u]=(i-u)/-o;else for(let u=0;u<s;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(a+u)/-o;else for(let u=0;u<s;++u)c[u]=(a+u)*o;return c}function xv(e,t,r){return t=+t,e=+e,r=+r,uh(e,t,r)[2]}function bv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?xv(t,e,r):xv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Uk(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Gk(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function dP(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?fP:iG(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*d/c+p)),x=Math.min(n,Math.floor(t+(c-u)*d/c+p));dP(e,t,m,x,a)}const i=e[t];let o=r,s=n;for(bu(e,r,t),a(e[n],i)>0&&bu(e,r,n);o<s;){for(bu(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?bu(e,r,s):(++s,bu(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function bu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function cG(e,t,r){if(e=Float64Array.from(eG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Gk(e);if(t>=1)return Uk(e);var n,a=(n-1)*t,i=Math.floor(a),o=Uk(dP(e,i).subarray(0,i+1)),s=Gk(e.subarray(i+1));return o+(s-o)*(a-i)}}function uG(e,t,r=uP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function fG(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function yi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ao(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const wv=Symbol("implicit");function Q1(){var e=new Bk,t=[],r=[],n=wv;function a(i){let o=e.get(i);if(o===void 0){if(n!==wv)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Bk;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Q1(t,r).unknown(n)},yi.apply(a,arguments),a}function jf(){var e=Q1().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var p=t().length,m=a<n,x=m?a:n,b=m?n:a;i=(b-x)/Math.max(1,p-c+u*2),s&&(i=Math.floor(i)),x+=(b-x-i*(p-c))*f,o=i*(1-c),s&&(x=Math.round(x),o=Math.round(o));var k=fG(p).map(function(v){return x+i*v});return r(m?k.reverse():k)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(s=!!p,d()):s},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),d()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),d()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},e.copy=function(){return jf(t(),[n,a]).round(s).paddingInner(c).paddingOuter(u).align(f)},yi.apply(d(),arguments)}function hP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return hP(t())},e}function Wu(){return hP(jf.apply(null,arguments).paddingInner(1))}function J1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function pP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function od(){}var _f=.7,fh=1/_f,ac="\\s*([+-]?\\d+)\\s*",Pf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dG=/^#([0-9a-f]{3,8})$/,hG=new RegExp(`^rgb\\(${ac},${ac},${ac}\\)$`),pG=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),gG=new RegExp(`^rgba\\(${ac},${ac},${ac},${Pf}\\)$`),mG=new RegExp(`^rgba\\(${qi},${qi},${qi},${Pf}\\)$`),yG=new RegExp(`^hsl\\(${Pf},${qi},${qi}\\)$`),vG=new RegExp(`^hsla\\(${Pf},${qi},${qi},${Pf}\\)$`),Wk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J1(od,Cf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vk,formatHex:Vk,formatHex8:xG,formatHsl:bG,formatRgb:Hk,toString:Hk});function Vk(){return this.rgb().formatHex()}function xG(){return this.rgb().formatHex8()}function bG(){return gP(this).formatHsl()}function Hk(){return this.rgb().formatRgb()}function Cf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Xk(t):r===3?new Da(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Xd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Xd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hG.exec(e))?new Da(t[1],t[2],t[3],1):(t=pG.exec(e))?new Da(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gG.exec(e))?Xd(t[1],t[2],t[3],t[4]):(t=mG.exec(e))?Xd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yG.exec(e))?Yk(t[1],t[2]/100,t[3]/100,1):(t=vG.exec(e))?Yk(t[1],t[2]/100,t[3]/100,t[4]):Wk.hasOwnProperty(e)?Xk(Wk[e]):e==="transparent"?new Da(NaN,NaN,NaN,0):null}function Xk(e){return new Da(e>>16&255,e>>8&255,e&255,1)}function Xd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Da(e,t,r,n)}function wG(e){return e instanceof od||(e=Cf(e)),e?(e=e.rgb(),new Da(e.r,e.g,e.b,e.opacity)):new Da}function kv(e,t,r,n){return arguments.length===1?wG(e):new Da(e,t,r,n??1)}function Da(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}J1(Da,kv,pP(od,{brighter(e){return e=e==null?fh:Math.pow(fh,e),new Da(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new Da(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Da(qs(this.r),qs(this.g),qs(this.b),dh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kk,formatHex:Kk,formatHex8:kG,formatRgb:qk,toString:qk}));function Kk(){return`#${Us(this.r)}${Us(this.g)}${Us(this.b)}`}function kG(){return`#${Us(this.r)}${Us(this.g)}${Us(this.b)}${Us((isNaN(this.opacity)?1:this.opacity)*255)}`}function qk(){const e=dh(this.opacity);return`${e===1?"rgb(":"rgba("}${qs(this.r)}, ${qs(this.g)}, ${qs(this.b)}${e===1?")":`, ${e})`}`}function dh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Us(e){return e=qs(e),(e<16?"0":"")+e.toString(16)}function Yk(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ni(e,t,r,n)}function gP(e){if(e instanceof Ni)return new Ni(e.h,e.s,e.l,e.opacity);if(e instanceof od||(e=Cf(e)),!e)return new Ni;if(e instanceof Ni)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,c=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new Ni(o,s,c,e.opacity)}function SG(e,t,r,n){return arguments.length===1?gP(e):new Ni(e,t,r,n??1)}function Ni(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}J1(Ni,SG,pP(od,{brighter(e){return e=e==null?fh:Math.pow(fh,e),new Ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new Ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Da(jm(e>=240?e-240:e+120,a,n),jm(e,a,n),jm(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ni(Zk(this.h),Kd(this.s),Kd(this.l),dh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dh(this.opacity);return`${e===1?"hsl(":"hsla("}${Zk(this.h)}, ${Kd(this.s)*100}%, ${Kd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zk(e){return e=(e||0)%360,e<0?e+360:e}function Kd(e){return Math.max(0,Math.min(1,e||0))}function jm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const eb=e=>()=>e;function jG(e,t){return function(r){return e+r*t}}function _G(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function PG(e){return(e=+e)==1?mP:function(t,r){return r-t?_G(t,r,e):eb(isNaN(t)?r:t)}}function mP(e,t){var r=t-e;return r?jG(e,r):eb(isNaN(e)?t:e)}const Qk=function e(t){var r=PG(t);function n(a,i){var o=r((a=kv(a)).r,(i=kv(i)).r),s=r(a.g,i.g),c=r(a.b,i.b),u=mP(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=c(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function CG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function NG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function OG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=tu(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function MG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function hh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function AG(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=tu(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Sv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_m=new RegExp(Sv.source,"g");function TG(e){return function(){return e}}function EG(e){return function(t){return e(t)+""}}function $G(e,t){var r=Sv.lastIndex=_m.lastIndex=0,n,a,i,o=-1,s=[],c=[];for(e=e+"",t=t+"";(n=Sv.exec(e))&&(a=_m.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:hh(n,a)})),r=_m.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?EG(c[0].x):TG(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)s[(d=c[f]).i]=d.x(u);return s.join("")})}function tu(e,t){var r=typeof t,n;return t==null||r==="boolean"?eb(t):(r==="number"?hh:r==="string"?(n=Cf(t))?(t=n,Qk):$G:t instanceof Cf?Qk:t instanceof Date?MG:NG(t)?CG:Array.isArray(t)?OG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?AG:hh)(e,t)}function tb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function DG(e,t){t===void 0&&(t=e,e=tu);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function RG(e){return function(){return e}}function ph(e){return+e}var Jk=[0,1];function ja(e){return e}function jv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:RG(isNaN(t)?NaN:.5)}function IG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function LG(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=jv(a,n),i=r(o,i)):(n=jv(n,a),i=r(i,o)),function(s){return i(n(s))}}function FG(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=jv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var c=id(e,s,1,n)-1;return i[c](a[c](s))}}function sd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Up(){var e=Jk,t=Jk,r=tu,n,a,i,o=ja,s,c,u;function f(){var p=Math.min(e.length,t.length);return o!==ja&&(o=IG(e[0],e[p-1])),s=p>2?FG:LG,c=u=null,d}function d(p){return p==null||isNaN(p=+p)?i:(c||(c=s(e.map(n),t,r)))(n(o(p)))}return d.invert=function(p){return o(a((u||(u=s(t,e.map(n),hh)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,ph),f()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),r=tb,f()},d.clamp=function(p){return arguments.length?(o=p?!0:ja,f()):o!==ja},d.interpolate=function(p){return arguments.length?(r=p,f()):r},d.unknown=function(p){return arguments.length?(i=p,d):i},function(p,m){return n=p,a=m,f()}}function rb(){return Up()(ja,ja)}function BG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gh(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function bc(e){return e=gh(Math.abs(e)),e?e[1]:NaN}function zG(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],c=0;a>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),i.push(r.substring(a-=s,a+s)),!((c+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function UG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var GG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nf(e){if(!(t=GG.exec(e)))throw new Error("invalid format: "+e);var t;return new nb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Nf.prototype=nb.prototype;function nb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}nb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WG(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var mh;function VG(e,t){var r=gh(e,t);if(!r)return mh=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(mh=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+gh(e,Math.max(0,t+i-1))[0]}function eS(e,t){var r=gh(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const tS={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:BG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eS(e*100,t),r:eS,s:VG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rS(e){return e}var nS=Array.prototype.map,aS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HG(e){var t=e.grouping===void 0||e.thousands===void 0?rS:zG(nS.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?rS:UG(nS.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d,p){d=Nf(d);var m=d.fill,x=d.align,b=d.sign,k=d.symbol,v=d.zero,y=d.width,w=d.comma,P=d.precision,S=d.trim,j=d.type;j==="n"?(w=!0,j="g"):tS[j]||(P===void 0&&(P=12),S=!0,j="g"),(v||m==="0"&&x==="=")&&(v=!0,m="0",x="=");var O=(p&&p.prefix!==void 0?p.prefix:"")+(k==="$"?r:k==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():""),A=(k==="$"?n:/[%p]/.test(j)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),$=tS[j],E=/[defgprs%]/.test(j);P=P===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function T(B){var U=O,F=A,G,z,I;if(j==="c")F=$(B)+F,B="";else{B=+B;var L=B<0||1/B<0;if(B=isNaN(B)?c:$(Math.abs(B),P),S&&(B=WG(B)),L&&+B==0&&b!=="+"&&(L=!1),U=(L?b==="("?b:s:b==="-"||b==="("?"":b)+U,F=(j==="s"&&!isNaN(B)&&mh!==void 0?aS[8+mh/3]:"")+F+(L&&b==="("?")":""),E){for(G=-1,z=B.length;++G<z;)if(I=B.charCodeAt(G),48>I||I>57){F=(I===46?a+B.slice(G+1):B.slice(G))+F,B=B.slice(0,G);break}}}w&&!v&&(B=t(B,1/0));var H=U.length+B.length+F.length,Z=H<y?new Array(y-H+1).join(m):"";switch(w&&v&&(B=t(Z+B,Z.length?y-F.length:1/0),Z=""),x){case"<":B=U+B+F+Z;break;case"=":B=U+Z+B+F;break;case"^":B=Z.slice(0,H=Z.length>>1)+U+B+F+Z.slice(H);break;default:B=Z+U+B+F;break}return i(B)}return T.toString=function(){return d+""},T}function f(d,p){var m=Math.max(-8,Math.min(8,Math.floor(bc(p)/3)))*3,x=Math.pow(10,-m),b=u((d=Nf(d),d.type="f",d),{suffix:aS[8+m/3]});return function(k){return b(x*k)}}return{format:u,formatPrefix:f}}var qd,ab,yP;XG({thousands:",",grouping:[3],currency:["$",""]});function XG(e){return qd=HG(e),ab=qd.format,yP=qd.formatPrefix,qd}function KG(e){return Math.max(0,-bc(Math.abs(e)))}function qG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bc(t)/3)))*3-bc(Math.abs(e)))}function YG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bc(t)-bc(e))+1}function vP(e,t,r,n){var a=bv(e,t,r),i;switch(n=Nf(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=qG(a,o))&&(n.precision=i),yP(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=YG(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=KG(a))&&(n.precision=i-(n.type==="%")*2);break}}return ab(n)}function xs(e){var t=e.domain;return e.ticks=function(r){var n=t();return vv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return vP(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],c,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=xv(o,s,r),u===c)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return e},e}function yh(){var e=rb();return e.copy=function(){return sd(e,yh())},yi.apply(e,arguments),xs(e)}function xP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,ph),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return xP(e).unknown(t)},e=arguments.length?Array.from(e,ph):[0,1],xs(r)}function bP(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function iS(e){return Math.log(e)}function oS(e){return Math.exp(e)}function ZG(e){return-Math.log(-e)}function QG(e){return-Math.exp(-e)}function JG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eW(e){return e===10?JG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function tW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function sS(e){return(t,r)=>-e(-t,r)}function ib(e){const t=e(iS,oS),r=t.domain;let n=10,a,i;function o(){return a=tW(n),i=eW(n),r()[0]<0?(a=sS(a),i=sS(i),e(ZG,QG)):e(iS,oS),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=a(u),m=a(f),x,b;const k=s==null?10:+s;let v=[];if(!(n%1)&&m-p<k){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(x=1;x<n;++x)if(b=p<0?x/i(-p):x*i(p),!(b<u)){if(b>f)break;v.push(b)}}else for(;p<=m;++p)for(x=n-1;x>=1;--x)if(b=p>0?x/i(-p):x*i(p),!(b<u)){if(b>f)break;v.push(b)}v.length*2<k&&(v=vv(u,f,k))}else v=vv(p,m,Math.min(m-p,k)).map(i);return d?v.reverse():v},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Nf(c)).precision==null&&(c.trim=!0),c=ab(c)),s===1/0)return c;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(bP(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function wP(){const e=ib(Up()).domain([1,10]);return e.copy=()=>sd(e,wP()).base(e.base()),yi.apply(e,arguments),e}function lS(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function cS(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ob(e){var t=1,r=e(lS(t),cS(t));return r.constant=function(n){return arguments.length?e(lS(t=+n),cS(t)):t},xs(r)}function kP(){var e=ob(Up());return e.copy=function(){return sd(e,kP()).constant(e.constant())},yi.apply(e,arguments)}function uS(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nW(e){return e<0?-e*e:e*e}function sb(e){var t=e(ja,ja),r=1;function n(){return r===1?e(ja,ja):r===.5?e(rW,nW):e(uS(r),uS(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},xs(t)}function lb(){var e=sb(Up());return e.copy=function(){return sd(e,lb()).exponent(e.exponent())},yi.apply(e,arguments),e}function aW(){return lb.apply(null,arguments).exponent(.5)}function fS(e){return Math.sign(e)*e*e}function iW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function SP(){var e=rb(),t=[0,1],r=!1,n;function a(i){var o=iW(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(fS(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,ph)).map(fS)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return SP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},yi.apply(a,arguments),xs(a)}function jP(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=uG(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[id(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(cs),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return jP().domain(e).range(t).unknown(n)},yi.apply(i,arguments)}function _P(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[id(n,c,0,r)]:i}function s(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,s()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return _P().domain([e,t]).range(a).unknown(i)},yi.apply(xs(o),arguments)}function PP(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[id(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return PP().domain(e).range(t).unknown(r)},yi.apply(a,arguments)}const Pm=new Date,Cm=new Date;function Hn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const c=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return c;let u;do c.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return c},a.filter=i=>Hn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Pm.setTime(+i),Cm.setTime(+o),e(Pm),e(Cm),Math.floor(r(Pm,Cm))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const vh=Hn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vh);vh.range;const po=1e3,ci=po*60,go=ci*60,_o=go*24,cb=_o*7,dS=_o*30,Nm=_o*365,Gs=Hn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*po)},(e,t)=>(t-e)/po,e=>e.getUTCSeconds());Gs.range;const ub=Hn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*po)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getMinutes());ub.range;const fb=Hn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCMinutes());fb.range;const db=Hn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*po-e.getMinutes()*ci)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getHours());db.range;const hb=Hn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getUTCHours());hb.range;const ld=Hn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ci)/_o,e=>e.getDate()-1);ld.range;const Gp=Hn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>e.getUTCDate()-1);Gp.range;const CP=Hn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>Math.floor(e/_o));CP.range;function bl(e){return Hn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ci)/cb)}const Wp=bl(0),xh=bl(1),oW=bl(2),sW=bl(3),wc=bl(4),lW=bl(5),cW=bl(6);Wp.range;xh.range;oW.range;sW.range;wc.range;lW.range;cW.range;function wl(e){return Hn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/cb)}const Vp=wl(0),bh=wl(1),uW=wl(2),fW=wl(3),kc=wl(4),dW=wl(5),hW=wl(6);Vp.range;bh.range;uW.range;fW.range;kc.range;dW.range;hW.range;const pb=Hn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pb.range;const gb=Hn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gb.range;const Po=Hn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Po.range;const Co=Hn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Co.range;function NP(e,t,r,n,a,i){const o=[[Gs,1,po],[Gs,5,5*po],[Gs,15,15*po],[Gs,30,30*po],[i,1,ci],[i,5,5*ci],[i,15,15*ci],[i,30,30*ci],[a,1,go],[a,3,3*go],[a,6,6*go],[a,12,12*go],[n,1,_o],[n,2,2*_o],[r,1,cb],[t,1,dS],[t,3,3*dS],[e,1,Nm]];function s(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:c(u,f,d),x=m?m.range(u,+f+1):[];return p?x.reverse():x}function c(u,f,d){const p=Math.abs(f-u)/d,m=Z1(([,,k])=>k).right(o,p);if(m===o.length)return e.every(bv(u/Nm,f/Nm,d));if(m===0)return vh.every(Math.max(bv(u,f,d),1));const[x,b]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return x.every(b)}return[s,c]}const[pW,gW]=NP(Co,gb,Vp,CP,hb,fb),[mW,yW]=NP(Po,pb,Wp,ld,db,ub);function Om(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Mm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function vW(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,c=e.shortMonths,u=ku(a),f=Su(a),d=ku(i),p=Su(i),m=ku(o),x=Su(o),b=ku(s),k=Su(s),v=ku(c),y=Su(c),w={a:I,A:L,b:H,B:Z,c:null,d:vS,e:vS,f:zW,g:ZW,G:JW,H:LW,I:FW,j:BW,L:OP,m:UW,M:GW,p:te,q:K,Q:wS,s:kS,S:WW,u:VW,U:HW,V:XW,w:KW,W:qW,x:null,X:null,y:YW,Y:QW,Z:eV,"%":bS},P={a:q,A:J,b:ve,B:ie,c:null,d:xS,e:xS,f:aV,g:pV,G:mV,H:tV,I:rV,j:nV,L:AP,m:iV,M:oV,p:pe,q:oe,Q:wS,s:kS,S:sV,u:lV,U:cV,V:uV,w:fV,W:dV,x:null,X:null,y:hV,Y:gV,Z:yV,"%":bS},S={a:E,A:T,b:B,B:U,c:F,d:mS,e:mS,f:$W,g:gS,G:pS,H:yS,I:yS,j:MW,L:EW,m:OW,M:AW,p:$,q:NW,Q:RW,s:IW,S:TW,u:SW,U:jW,V:_W,w:kW,W:PW,x:G,X:z,y:gS,Y:pS,Z:CW,"%":DW};w.x=j(r,w),w.X=j(n,w),w.c=j(t,w),P.x=j(r,P),P.X=j(n,P),P.c=j(t,P);function j(V,se){return function(ge){var le=[],je=-1,Se=0,me=V.length,he,Pe,$e;for(ge instanceof Date||(ge=new Date(+ge));++je<me;)V.charCodeAt(je)===37&&(le.push(V.slice(Se,je)),(Pe=hS[he=V.charAt(++je)])!=null?he=V.charAt(++je):Pe=he==="e"?" ":"0",($e=se[he])&&(he=$e(ge,Pe)),le.push(he),Se=je+1);return le.push(V.slice(Se,je)),le.join("")}}function O(V,se){return function(ge){var le=wu(1900,void 0,1),je=A(le,V,ge+="",0),Se,me;if(je!=ge.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(se&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Se=Mm(wu(le.y,0,1)),me=Se.getUTCDay(),Se=me>4||me===0?bh.ceil(Se):bh(Se),Se=Gp.offset(Se,(le.V-1)*7),le.y=Se.getUTCFullYear(),le.m=Se.getUTCMonth(),le.d=Se.getUTCDate()+(le.w+6)%7):(Se=Om(wu(le.y,0,1)),me=Se.getDay(),Se=me>4||me===0?xh.ceil(Se):xh(Se),Se=ld.offset(Se,(le.V-1)*7),le.y=Se.getFullYear(),le.m=Se.getMonth(),le.d=Se.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),me="Z"in le?Mm(wu(le.y,0,1)).getUTCDay():Om(wu(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(me+5)%7:le.w+le.U*7-(me+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,Mm(le)):Om(le)}}function A(V,se,ge,le){for(var je=0,Se=se.length,me=ge.length,he,Pe;je<Se;){if(le>=me)return-1;if(he=se.charCodeAt(je++),he===37){if(he=se.charAt(je++),Pe=S[he in hS?se.charAt(je++):he],!Pe||(le=Pe(V,ge,le))<0)return-1}else if(he!=ge.charCodeAt(le++))return-1}return le}function $(V,se,ge){var le=u.exec(se.slice(ge));return le?(V.p=f.get(le[0].toLowerCase()),ge+le[0].length):-1}function E(V,se,ge){var le=m.exec(se.slice(ge));return le?(V.w=x.get(le[0].toLowerCase()),ge+le[0].length):-1}function T(V,se,ge){var le=d.exec(se.slice(ge));return le?(V.w=p.get(le[0].toLowerCase()),ge+le[0].length):-1}function B(V,se,ge){var le=v.exec(se.slice(ge));return le?(V.m=y.get(le[0].toLowerCase()),ge+le[0].length):-1}function U(V,se,ge){var le=b.exec(se.slice(ge));return le?(V.m=k.get(le[0].toLowerCase()),ge+le[0].length):-1}function F(V,se,ge){return A(V,t,se,ge)}function G(V,se,ge){return A(V,r,se,ge)}function z(V,se,ge){return A(V,n,se,ge)}function I(V){return o[V.getDay()]}function L(V){return i[V.getDay()]}function H(V){return c[V.getMonth()]}function Z(V){return s[V.getMonth()]}function te(V){return a[+(V.getHours()>=12)]}function K(V){return 1+~~(V.getMonth()/3)}function q(V){return o[V.getUTCDay()]}function J(V){return i[V.getUTCDay()]}function ve(V){return c[V.getUTCMonth()]}function ie(V){return s[V.getUTCMonth()]}function pe(V){return a[+(V.getUTCHours()>=12)]}function oe(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var se=j(V+="",w);return se.toString=function(){return V},se},parse:function(V){var se=O(V+="",!1);return se.toString=function(){return V},se},utcFormat:function(V){var se=j(V+="",P);return se.toString=function(){return V},se},utcParse:function(V){var se=O(V+="",!0);return se.toString=function(){return V},se}}}var hS={"-":"",_:" ",0:"0"},Jn=/^\s*\d+/,xW=/^%/,bW=/[\\^$*+?|[\]().{}]/g;function gr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function wW(e){return e.replace(bW,"\\$&")}function ku(e){return new RegExp("^(?:"+e.map(wW).join("|")+")","i")}function Su(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function kW(e,t,r){var n=Jn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function SW(e,t,r){var n=Jn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function jW(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function _W(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function PW(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function pS(e,t,r){var n=Jn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function gS(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function CW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function NW(e,t,r){var n=Jn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function OW(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function mS(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function MW(e,t,r){var n=Jn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function yS(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function AW(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function TW(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function EW(e,t,r){var n=Jn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $W(e,t,r){var n=Jn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function DW(e,t,r){var n=xW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function RW(e,t,r){var n=Jn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function IW(e,t,r){var n=Jn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function vS(e,t){return gr(e.getDate(),t,2)}function LW(e,t){return gr(e.getHours(),t,2)}function FW(e,t){return gr(e.getHours()%12||12,t,2)}function BW(e,t){return gr(1+ld.count(Po(e),e),t,3)}function OP(e,t){return gr(e.getMilliseconds(),t,3)}function zW(e,t){return OP(e,t)+"000"}function UW(e,t){return gr(e.getMonth()+1,t,2)}function GW(e,t){return gr(e.getMinutes(),t,2)}function WW(e,t){return gr(e.getSeconds(),t,2)}function VW(e){var t=e.getDay();return t===0?7:t}function HW(e,t){return gr(Wp.count(Po(e)-1,e),t,2)}function MP(e){var t=e.getDay();return t>=4||t===0?wc(e):wc.ceil(e)}function XW(e,t){return e=MP(e),gr(wc.count(Po(e),e)+(Po(e).getDay()===4),t,2)}function KW(e){return e.getDay()}function qW(e,t){return gr(xh.count(Po(e)-1,e),t,2)}function YW(e,t){return gr(e.getFullYear()%100,t,2)}function ZW(e,t){return e=MP(e),gr(e.getFullYear()%100,t,2)}function QW(e,t){return gr(e.getFullYear()%1e4,t,4)}function JW(e,t){var r=e.getDay();return e=r>=4||r===0?wc(e):wc.ceil(e),gr(e.getFullYear()%1e4,t,4)}function eV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gr(t/60|0,"0",2)+gr(t%60,"0",2)}function xS(e,t){return gr(e.getUTCDate(),t,2)}function tV(e,t){return gr(e.getUTCHours(),t,2)}function rV(e,t){return gr(e.getUTCHours()%12||12,t,2)}function nV(e,t){return gr(1+Gp.count(Co(e),e),t,3)}function AP(e,t){return gr(e.getUTCMilliseconds(),t,3)}function aV(e,t){return AP(e,t)+"000"}function iV(e,t){return gr(e.getUTCMonth()+1,t,2)}function oV(e,t){return gr(e.getUTCMinutes(),t,2)}function sV(e,t){return gr(e.getUTCSeconds(),t,2)}function lV(e){var t=e.getUTCDay();return t===0?7:t}function cV(e,t){return gr(Vp.count(Co(e)-1,e),t,2)}function TP(e){var t=e.getUTCDay();return t>=4||t===0?kc(e):kc.ceil(e)}function uV(e,t){return e=TP(e),gr(kc.count(Co(e),e)+(Co(e).getUTCDay()===4),t,2)}function fV(e){return e.getUTCDay()}function dV(e,t){return gr(bh.count(Co(e)-1,e),t,2)}function hV(e,t){return gr(e.getUTCFullYear()%100,t,2)}function pV(e,t){return e=TP(e),gr(e.getUTCFullYear()%100,t,2)}function gV(e,t){return gr(e.getUTCFullYear()%1e4,t,4)}function mV(e,t){var r=e.getUTCDay();return e=r>=4||r===0?kc(e):kc.ceil(e),gr(e.getUTCFullYear()%1e4,t,4)}function yV(){return"+0000"}function bS(){return"%"}function wS(e){return+e}function kS(e){return Math.floor(+e/1e3)}var Tl,EP,$P;vV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vV(e){return Tl=vW(e),EP=Tl.format,Tl.parse,$P=Tl.utcFormat,Tl.utcParse,Tl}function xV(e){return new Date(e)}function bV(e){return e instanceof Date?+e:+new Date(+e)}function mb(e,t,r,n,a,i,o,s,c,u){var f=rb(),d=f.invert,p=f.domain,m=u(".%L"),x=u(":%S"),b=u("%I:%M"),k=u("%I %p"),v=u("%a %d"),y=u("%b %d"),w=u("%B"),P=u("%Y");function S(j){return(c(j)<j?m:s(j)<j?x:o(j)<j?b:i(j)<j?k:n(j)<j?a(j)<j?v:y:r(j)<j?w:P)(j)}return f.invert=function(j){return new Date(d(j))},f.domain=function(j){return arguments.length?p(Array.from(j,bV)):p().map(xV)},f.ticks=function(j){var O=p();return e(O[0],O[O.length-1],j??10)},f.tickFormat=function(j,O){return O==null?S:u(O)},f.nice=function(j){var O=p();return(!j||typeof j.range!="function")&&(j=t(O[0],O[O.length-1],j??10)),j?p(bP(O,j)):f},f.copy=function(){return sd(f,mb(e,t,r,n,a,i,o,s,c,u))},f}function wV(){return yi.apply(mb(mW,yW,Po,pb,Wp,ld,db,ub,Gs,EP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kV(){return yi.apply(mb(pW,gW,Co,gb,Vp,Gp,hb,fb,Gs,$P).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hp(){var e=0,t=1,r,n,a,i,o=ja,s=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(p){var m,x;return arguments.length?([m,x]=p,o=d(m,x),u):[o(0),o(1)]}}return u.range=f(tu),u.rangeRound=f(tb),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function bs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DP(){var e=xs(Hp()(ja));return e.copy=function(){return bs(e,DP())},Ao.apply(e,arguments)}function RP(){var e=ib(Hp()).domain([1,10]);return e.copy=function(){return bs(e,RP()).base(e.base())},Ao.apply(e,arguments)}function IP(){var e=ob(Hp());return e.copy=function(){return bs(e,IP()).constant(e.constant())},Ao.apply(e,arguments)}function yb(){var e=sb(Hp());return e.copy=function(){return bs(e,yb()).exponent(e.exponent())},Ao.apply(e,arguments)}function SV(){return yb.apply(null,arguments).exponent(.5)}function LP(){var e=[],t=ja;function r(n){if(n!=null&&!isNaN(n=+n))return t((id(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(cs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>cG(e,i/n))},r.copy=function(){return LP(t).domain(e)},Ao.apply(r,arguments)}function Xp(){var e=0,t=.5,r=1,n=1,a,i,o,s,c,u=ja,f,d=!1,p;function m(b){return isNaN(b=+b)?p:(b=.5+((b=+f(b))-i)*(n*b<n*i?s:c),u(d?Math.max(0,Math.min(1,b)):b))}m.domain=function(b){return arguments.length?([e,t,r]=b,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(b){return arguments.length?(d=!!b,m):d},m.interpolator=function(b){return arguments.length?(u=b,m):u};function x(b){return function(k){var v,y,w;return arguments.length?([v,y,w]=k,u=DG(b,[v,y,w]),m):[u(0),u(.5),u(1)]}}return m.range=x(tu),m.rangeRound=x(tb),m.unknown=function(b){return arguments.length?(p=b,m):p},function(b){return f=b,a=b(e),i=b(t),o=b(r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function FP(){var e=xs(Xp()(ja));return e.copy=function(){return bs(e,FP())},Ao.apply(e,arguments)}function BP(){var e=ib(Xp()).domain([.1,1,10]);return e.copy=function(){return bs(e,BP()).base(e.base())},Ao.apply(e,arguments)}function zP(){var e=ob(Xp());return e.copy=function(){return bs(e,zP()).constant(e.constant())},Ao.apply(e,arguments)}function vb(){var e=sb(Xp());return e.copy=function(){return bs(e,vb()).exponent(e.exponent())},Ao.apply(e,arguments)}function jV(){return vb.apply(null,arguments).exponent(.5)}const SS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jf,scaleDiverging:FP,scaleDivergingLog:BP,scaleDivergingPow:vb,scaleDivergingSqrt:jV,scaleDivergingSymlog:zP,scaleIdentity:xP,scaleImplicit:wv,scaleLinear:yh,scaleLog:wP,scaleOrdinal:Q1,scalePoint:Wu,scalePow:lb,scaleQuantile:jP,scaleQuantize:_P,scaleRadial:SP,scaleSequential:DP,scaleSequentialLog:RP,scaleSequentialPow:yb,scaleSequentialQuantile:LP,scaleSequentialSqrt:SV,scaleSequentialSymlog:IP,scaleSqrt:aW,scaleSymlog:kP,scaleThreshold:PP,scaleTime:wV,scaleUtc:kV,tickFormat:vP},Symbol.toStringTag,{value:"Module"}));var _V=Hc;function PV(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!_V(o):r(o,s)))var s=o,c=i}return c}var UP=PV;function CV(e,t){return e>t}var NV=CV,OV=UP,MV=NV,AV=eu;function TV(e){return e&&e.length?OV(e,AV,MV):void 0}var EV=TV;const Ko=Br(EV);function $V(e,t){return e<t}var DV=$V,RV=UP,IV=DV,LV=eu;function FV(e){return e&&e.length?RV(e,LV,IV):void 0}var BV=FV;const Kp=Br(BV);var zV=T1,UV=ys,GV=Q_,WV=Ba;function VV(e,t){var r=WV(e)?zV:GV;return r(e,UV(t))}var HV=VV,XV=Y_,KV=HV;function qV(e,t){return XV(KV(e,t),1)}var YV=qV;const ZV=Br(YV);var QV=H1;function JV(e,t){return QV(e,t)}var eH=JV;const ul=Br(eH);var ru=1e9,tH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bb,ln=!0,gi="[DecimalError] ",Ys=gi+"Invalid argument: ",xb=gi+"Exponent out of range: ",nu=Math.floor,$s=Math.pow,rH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Va,qn=1e7,Jr=7,GP=9007199254740991,wh=nu(GP/Jr),Ye={};Ye.absoluteValue=Ye.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ye.comparedTo=Ye.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ye.decimalPlaces=Ye.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Jr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ye.dividedBy=Ye.div=function(e){return bo(this,new this.constructor(e))};Ye.dividedToIntegerBy=Ye.idiv=function(e){var t=this,r=t.constructor;return Fr(bo(t,new r(e),0,1),r.precision)};Ye.equals=Ye.eq=function(e){return!this.cmp(e)};Ye.exponent=function(){return In(this)};Ye.greaterThan=Ye.gt=function(e){return this.cmp(e)>0};Ye.greaterThanOrEqualTo=Ye.gte=function(e){return this.cmp(e)>=0};Ye.isInteger=Ye.isint=function(){return this.e>this.d.length-2};Ye.isNegative=Ye.isneg=function(){return this.s<0};Ye.isPositive=Ye.ispos=function(){return this.s>0};Ye.isZero=function(){return this.s===0};Ye.lessThan=Ye.lt=function(e){return this.cmp(e)<0};Ye.lessThanOrEqualTo=Ye.lte=function(e){return this.cmp(e)<1};Ye.logarithm=Ye.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Va))throw Error(gi+"NaN");if(r.s<1)throw Error(gi+(r.s?"NaN":"-Infinity"));return r.eq(Va)?new n(0):(ln=!1,t=bo(Of(r,i),Of(e,i),i),ln=!0,Fr(t,a))};Ye.minus=Ye.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?HP(t,e):WP(t,(e.s=-e.s,e))};Ye.modulo=Ye.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(gi+"NaN");return r.s?(ln=!1,t=bo(r,e,0,1).times(e),ln=!0,r.minus(t)):Fr(new n(r),a)};Ye.naturalExponential=Ye.exp=function(){return VP(this)};Ye.naturalLogarithm=Ye.ln=function(){return Of(this)};Ye.negated=Ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ye.plus=Ye.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WP(t,e):HP(t,(e.s=-e.s,e))};Ye.precision=Ye.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ys+e);if(t=In(a)+1,n=a.d.length-1,r=n*Jr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ye.squareRoot=Ye.sqrt=function(){var e,t,r,n,a,i,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(gi+"NaN")}for(e=In(s),ln=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Wi(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=nu((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(bo(s,i,o+2)).times(.5),Wi(i.d).slice(0,o)===(t=Wi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Fr(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return ln=!0,Fr(n,r)};Ye.times=Ye.mul=function(e){var t,r,n,a,i,o,s,c,u,f=this,d=f.constructor,p=f.d,m=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=p.length,u=m.length,c<u&&(i=p,p=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)s=i[a]+m[n]*p[a-n-1]+t,i[a--]=s%qn|0,t=s/qn|0;i[a]=(i[a]+t)%qn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ln?Fr(e,d.precision):e};Ye.toDecimalPlaces=Ye.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ji(e,0,ru),t===void 0?t=n.rounding:Ji(t,0,8),Fr(r,e+In(r)+1,t))};Ye.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=fl(n,!0):(Ji(e,0,ru),t===void 0?t=a.rounding:Ji(t,0,8),n=Fr(new a(n),e+1,t),r=fl(n,!0,e+1)),r};Ye.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?fl(a):(Ji(e,0,ru),t===void 0?t=i.rounding:Ji(t,0,8),n=Fr(new i(a),e+In(a)+1,t),r=fl(n.abs(),!1,e+In(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ye.toInteger=Ye.toint=function(){var e=this,t=e.constructor;return Fr(new t(e),In(e)+1,t.rounding)};Ye.toNumber=function(){return+this};Ye.toPower=Ye.pow=function(e){var t,r,n,a,i,o,s=this,c=s.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(Va);if(s=new c(s),!s.s){if(e.s<1)throw Error(gi+"Infinity");return s}if(s.eq(Va))return s;if(n=c.precision,e.eq(Va))return Fr(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=GP){for(a=new c(Va),t=Math.ceil(n/Jr+4),ln=!1;r%2&&(a=a.times(s),_S(a.d,t)),r=nu(r/2),r!==0;)s=s.times(s),_S(s.d,t);return ln=!0,e.s<0?new c(Va).div(a):Fr(a,n)}}else if(i<0)throw Error(gi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,ln=!1,a=e.times(Of(s,n+u)),ln=!0,a=VP(a),a.s=i,a};Ye.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=In(a),n=fl(a,r<=i.toExpNeg||r>=i.toExpPos)):(Ji(e,1,ru),t===void 0?t=i.rounding:Ji(t,0,8),a=Fr(new i(a),e,t),r=In(a),n=fl(a,e<=r||r<=i.toExpNeg,e)),n};Ye.toSignificantDigits=Ye.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ji(e,1,ru),t===void 0?t=n.rounding:Ji(t,0,8)),Fr(new n(r),e,t)};Ye.toString=Ye.valueOf=Ye.val=Ye.toJSON=Ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=In(e),r=e.constructor;return fl(e,t<=r.toExpNeg||t>=r.toExpPos)};function WP(e,t){var r,n,a,i,o,s,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),ln?Fr(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,s=u.length):(n=u,a=o,s=c.length),o=Math.ceil(d/Jr),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=c.length,i=u.length,s-i<0&&(i=s,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/qn|0,c[i]%=qn;for(r&&(c.unshift(r),++a),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=a,ln?Fr(t,d):t}function Ji(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ys+e)}function Wi(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Jr-n.length,r&&(i+=Lo(r)),i+=n;o=e[t],n=o+"",r=Jr-n.length,r&&(i+=Lo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var bo=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%qn|0,o=i/qn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,c;if(i!=o)c=i>o?1:-1;else for(s=c=0;s<i;s++)if(n[s]!=a[s]){c=n[s]>a[s]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*qn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,c,u,f,d,p,m,x,b,k,v,y,w,P,S,j,O,A,$=n.constructor,E=n.s==a.s?1:-1,T=n.d,B=a.d;if(!n.s)return new $(n);if(!a.s)throw Error(gi+"Division by zero");for(c=n.e-a.e,O=B.length,S=T.length,m=new $(E),x=m.d=[],u=0;B[u]==(T[u]||0);)++u;if(B[u]>(T[u]||0)&&--c,i==null?y=i=$.precision:o?y=i+(In(n)-In(a))+1:y=i,y<0)return new $(0);if(y=y/Jr+2|0,u=0,O==1)for(f=0,B=B[0],y++;(u<S||f)&&y--;u++)w=f*qn+(T[u]||0),x[u]=w/B|0,f=w%B|0;else{for(f=qn/(B[0]+1)|0,f>1&&(B=e(B,f),T=e(T,f),O=B.length,S=T.length),P=O,b=T.slice(0,O),k=b.length;k<O;)b[k++]=0;A=B.slice(),A.unshift(0),j=B[0],B[1]>=qn/2&&++j;do f=0,s=t(B,b,O,k),s<0?(v=b[0],O!=k&&(v=v*qn+(b[1]||0)),f=v/j|0,f>1?(f>=qn&&(f=qn-1),d=e(B,f),p=d.length,k=b.length,s=t(d,b,p,k),s==1&&(f--,r(d,O<p?A:B,p))):(f==0&&(s=f=1),d=B.slice()),p=d.length,p<k&&d.unshift(0),r(b,d,k),s==-1&&(k=b.length,s=t(B,b,O,k),s<1&&(f++,r(b,O<k?A:B,k))),k=b.length):s===0&&(f++,b=[0]),x[u++]=f,s&&b[0]?b[k++]=T[P]||0:(b=[T[P]],k=1);while((P++<S||b[0]!==void 0)&&y--)}return x[0]||x.shift(),m.e=c,Fr(m,o?i+In(m)+1:i)}}();function VP(e,t){var r,n,a,i,o,s,c=0,u=0,f=e.constructor,d=f.precision;if(In(e)>16)throw Error(xb+In(e));if(!e.s)return new f(Va);for(ln=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log($s(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(Va),f.precision=s;;){if(a=Fr(a.times(e),s),r=r.times(++c),o=i.plus(bo(a,r,s)),Wi(o.d).slice(0,s)===Wi(i.d).slice(0,s)){for(;u--;)i=Fr(i.times(i),s);return f.precision=d,t==null?(ln=!0,Fr(i,d)):i}i=o}}function In(e){for(var t=e.e*Jr,r=e.d[0];r>=10;r/=10)t++;return t}function Am(e,t,r){if(t>e.LN10.sd())throw ln=!0,r&&(e.precision=r),Error(gi+"LN10 precision limit exceeded");return Fr(new e(e.LN10),t)}function Lo(e){for(var t="";e--;)t+="0";return t}function Of(e,t){var r,n,a,i,o,s,c,u,f,d=1,p=10,m=e,x=m.d,b=m.constructor,k=b.precision;if(m.s<1)throw Error(gi+(m.s?"NaN":"-Infinity"));if(m.eq(Va))return new b(0);if(t==null?(ln=!1,u=k):u=t,m.eq(10))return t==null&&(ln=!0),Am(b,u);if(u+=p,b.precision=u,r=Wi(x),n=r.charAt(0),i=In(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Wi(m.d),n=r.charAt(0),d++;i=In(m),n>1?(m=new b("0."+r),i++):m=new b(n+"."+r.slice(1))}else return c=Am(b,u+2,k).times(i+""),m=Of(new b(n+"."+r.slice(1)),u-p).plus(c),b.precision=k,t==null?(ln=!0,Fr(m,k)):m;for(s=o=m=bo(m.minus(Va),m.plus(Va),u),f=Fr(m.times(m),u),a=3;;){if(o=Fr(o.times(f),u),c=s.plus(bo(o,new b(a),u)),Wi(c.d).slice(0,u)===Wi(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Am(b,u+2,k).times(i+""))),s=bo(s,new b(d),u),b.precision=k,t==null?(ln=!0,Fr(s,k)):s;s=c,a+=2}}function jS(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=nu(r/Jr),e.d=[],n=(r+1)%Jr,r<0&&(n+=Jr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Jr;n<a;)e.d.push(+t.slice(n,n+=Jr));t=t.slice(n),n=Jr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ln&&(e.e>wh||e.e<-wh))throw Error(xb+r)}else e.s=0,e.e=0,e.d=[0];return e}function Fr(e,t,r){var n,a,i,o,s,c,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Jr,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Jr),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Jr,a=n-Jr+o}if(r!==void 0&&(i=$s(10,o-a-1),s=u/i%10|0,c=t<0||d[f+1]!==void 0||u%i,c=r<4?(s||c)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||c||r==6&&(n>0?a>0?u/$s(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=In(e),d.length=1,t=t-i-1,d[0]=$s(10,(Jr-t%Jr)%Jr),e.e=nu(-t/Jr)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=$s(10,Jr-n),d[f]=a>0?(u/$s(10,o-a)%$s(10,a)|0)*i:0),c)for(;;)if(f==0){(d[0]+=i)==qn&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=qn)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(ln&&(e.e>wh||e.e<-wh))throw Error(xb+In(e));return e}function HP(e,t){var r,n,a,i,o,s,c,u,f,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),ln?Fr(t,m):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,s=d.length):(r=d,n=u,s=c.length),a=Math.max(Math.ceil(m/Jr),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(c[a]!=d[a]){f=c[a]<d[a];break}o=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),s=c.length,a=d.length-s;a>0;--a)c[s++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(i=a;i&&c[--i]===0;)c[i]=qn-1;--c[i],c[a]+=qn}c[a]-=d[a]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ln?Fr(t,m):t):new p(0)}function fl(e,t,r){var n,a=In(e),i=Wi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Lo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Lo(-a-1)+i,r&&(n=r-o)>0&&(i+=Lo(n))):a>=o?(i+=Lo(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Lo(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Lo(n))),e.s<0?"-"+i:i}function _S(e,t){if(e.length>t)return e.length=t,!0}function XP(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ys+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return jS(o,i.toString())}else if(typeof i!="string")throw Error(Ys+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,rH.test(i))jS(o,i);else throw Error(Ys+i)}if(a.prototype=Ye,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=XP,a.config=a.set=nH,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function nH(e){if(!e||typeof e!="object")throw Error(gi+"Object expected");var t,r,n,a=["precision",1,ru,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(nu(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Ys+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ys+r+": "+n);return this}var bb=XP(tH);Va=new bb(1);const Rr=bb;function aH(e){return lH(e)||sH(e)||oH(e)||iH()}function iH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oH(e,t){if(e){if(typeof e=="string")return _v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _v(e,t)}}function sH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function lH(e){if(Array.isArray(e))return _v(e)}function _v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cH=function(t){return t},KP={},qP=function(t){return t===KP},PS=function(t){return function r(){return arguments.length===0||arguments.length===1&&qP(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},uH=function e(t,r){return t===1?r:PS(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==KP}).length;return o>=t?r.apply(void 0,a):e(t-o,PS(function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];var f=a.map(function(d){return qP(d)?c.shift():d});return r.apply(void 0,aH(f).concat(c))}))})},qp=function(t){return uH(t.length,t)},Pv=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},fH=qp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),dH=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return cH;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,c){return c(s)},i.apply(void 0,arguments))}},Cv=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},YP=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,c){return s===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function hH(e){var t;return e===0?t=1:t=Math.floor(new Rr(e).abs().log(10).toNumber())+1,t}function pH(e,t,r){for(var n=new Rr(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var gH=qp(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),mH=qp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),yH=qp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Yp={rangeStep:pH,getDigitCount:hH,interpolateNumber:gH,uninterpolateNumber:mH,uninterpolateTruncation:yH};function Nv(e){return bH(e)||xH(e)||ZP(e)||vH()}function vH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function bH(e){if(Array.isArray(e))return Ov(e)}function Mf(e,t){return SH(e)||kH(e,t)||ZP(e,t)||wH()}function wH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZP(e,t){if(e){if(typeof e=="string")return Ov(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ov(e,t)}}function Ov(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kH(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function SH(e){if(Array.isArray(e))return e}function QP(e){var t=Mf(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function JP(e,t,r){if(e.lte(0))return new Rr(0);var n=Yp.getDigitCount(e.toNumber()),a=new Rr(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new Rr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=s.mul(a);return t?c:new Rr(Math.ceil(c))}function jH(e,t,r){var n=1,a=new Rr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Rr(10).pow(Yp.getDigitCount(e)-1),a=new Rr(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Rr(Math.floor(e)))}else e===0?a=new Rr(Math.floor((t-1)/2)):r||(a=new Rr(Math.floor(e)));var o=Math.floor((t-1)/2),s=dH(fH(function(c){return a.add(new Rr(c-o).mul(n)).toNumber()}),Pv);return s(0,t)}function eC(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Rr(0),tickMin:new Rr(0),tickMax:new Rr(0)};var i=JP(new Rr(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Rr(0):(o=new Rr(e).add(t).div(2),o=o.sub(new Rr(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Rr(t).sub(o).div(i).toNumber()),u=s+c+1;return u>r?eC(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new Rr(s).mul(i)),tickMax:o.add(new Rr(c).mul(i))})}function _H(e){var t=Mf(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=QP([r,n]),c=Mf(s,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(Nv(Pv(0,a-1).map(function(){return 1/0}))):[].concat(Nv(Pv(0,a-1).map(function(){return-1/0})),[f]);return r>n?Cv(d):d}if(u===f)return jH(u,a,i);var p=eC(u,f,o,i),m=p.step,x=p.tickMin,b=p.tickMax,k=Yp.rangeStep(x,b.add(new Rr(.1).mul(m)),m);return r>n?Cv(k):k}function PH(e,t){var r=Mf(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=QP([n,a]),s=Mf(o,2),c=s[0],u=s[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var f=Math.max(t,2),d=JP(new Rr(u).sub(c).div(f-1),i,0),p=[].concat(Nv(Yp.rangeStep(new Rr(c),new Rr(u).sub(new Rr(.99).mul(d)),d)),[u]);return n>a?Cv(p):p}var CH=YP(_H),NH=YP(PH),OH="Invariant failed";function dl(e,t){throw new Error(OH)}var MH=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Sc(e){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kh.apply(this,arguments)}function AH(e,t){return DH(e)||$H(e,t)||EH(e,t)||TH()}function TH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EH(e,t){if(e){if(typeof e=="string")return CS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CS(e,t)}}function CS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $H(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function DH(e){if(Array.isArray(e))return e}function RH(e,t){if(e==null)return{};var r=IH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nC(n.key),n)}}function BH(e,t,r){return t&&FH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zH(e,t,r){return t=Sh(t),UH(e,tC()?Reflect.construct(t,r||[],Sh(e).constructor):t.apply(e,r))}function UH(e,t){if(t&&(Sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GH(e)}function GH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tC=function(){return!!e})()}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sh(e)}function WH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mv(e,t)}function Mv(e,t){return Mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Mv(e,t)}function rC(e,t,r){return t=nC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nC(e){var t=VH(e,"string");return Sc(t)=="symbol"?t:t+""}function VH(e,t){if(Sc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var au=function(e){function t(){return LH(this,t),zH(this,t,arguments)}return WH(t,e),BH(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,p=RH(n,MH),m=Tt(p,!1);this.props.direction==="x"&&f.type!=="number"&&dl();var x=c.map(function(b){var k=u(b,s),v=k.x,y=k.y,w=k.value,P=k.errorVal;if(!P)return null;var S=[],j,O;if(Array.isArray(P)){var A=AH(P,2);j=A[0],O=A[1]}else j=O=P;if(i==="vertical"){var $=f.scale,E=y+a,T=E+o,B=E-o,U=$(w-j),F=$(w+O);S.push({x1:F,y1:T,x2:F,y2:B}),S.push({x1:U,y1:E,x2:F,y2:E}),S.push({x1:U,y1:T,x2:U,y2:B})}else if(i==="horizontal"){var G=d.scale,z=v+a,I=z-o,L=z+o,H=G(w-j),Z=G(w+O);S.push({x1:I,y1:Z,x2:L,y2:Z}),S.push({x1:z,y1:H,x2:z,y2:Z}),S.push({x1:I,y1:H,x2:L,y2:H})}return Q.createElement(vr,kh({className:"recharts-errorBar",key:"bar-".concat(S.map(function(te){return"".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))},m),S.map(function(te){return Q.createElement("line",kh({},te,{key:"line-".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))}))});return Q.createElement(vr,{className:"recharts-errorBars"},x)}}])}(Q.Component);rC(au,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});rC(au,"displayName","ErrorBar");function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function NS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(r),!0).forEach(function(n){HH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HH(e,t,r){return t=XH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XH(e){var t=KH(e,"string");return Af(t)=="symbol"?t:t+""}function KH(e,t){if(Af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aC=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Wa(r,Ki);if(!o)return null;var s=Ki.defaultProps,c=s!==void 0?Os(Os({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var p=d.item,m=d.props,x=m.sectors||m.data||[];return f.concat(x.map(function(b){return{type:o.props.iconType||p.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(n||[]).map(function(f){var d=f.item,p=d.type.defaultProps,m=p!==void 0?Os(Os({},p),d.props):{},x=m.dataKey,b=m.name,k=m.legendType,v=m.hide;return{inactive:v,dataKey:x,type:c.iconType||k||"square",color:wb(d),value:b||x,payload:m}}),Os(Os(Os({},c),Ki.getWithHeight(o,a)),{},{payload:u,item:o})};function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function OS(e){return QH(e)||ZH(e)||YH(e)||qH()}function qH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YH(e,t){if(e){if(typeof e=="string")return Av(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Av(e,t)}}function ZH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function QH(e){if(Array.isArray(e))return Av(e)}function Av(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(r),!0).forEach(function(n){ic(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ic(e,t,r){return t=JH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JH(e){var t=eX(e,"string");return Tf(t)=="symbol"?t:t+""}function eX(e,t){if(Tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vn(e,t,r){return Ot(e)||Ot(t)?r:Wn(t)?di(e,t,r):$t(t)?t(e):r}function Vu(e,t,r,n){var a=ZV(e,function(s){return Vn(s,t)});if(r==="number"){var i=a.filter(function(s){return Ee(s)||parseFloat(s)});return i.length?[Kp(i),Ko(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!Ot(s)}):a;return o.map(function(s){return Wn(s)||s instanceof Date?s:""})}var tX=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,p=u>=s-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Mi(d-f)!==Mi(p-d)){var x=[];if(Mi(p-d)===Mi(c[1]-c[0])){m=p;var b=d+c[1]-c[0];x[0]=Math.min(b,(b+f)/2),x[1]=Math.max(b,(b+f)/2)}else{m=f;var k=p+c[1]-c[0];x[0]=Math.min(d,(k+d)/2),x[1]=Math.max(d,(k+d)/2)}var v=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>v[0]&&t<=v[1]||t>=x[0]&&t<=x[1]){o=a[u].index;break}}else{var y=Math.min(f,p),w=Math.max(f,p);if(t>(y+d)/2&&t<=(w+d)/2){o=a[u].index;break}}}else for(var P=0;P<s;P++)if(P===0&&t<=(n[P].coordinate+n[P+1].coordinate)/2||P>0&&P<s-1&&t>(n[P].coordinate+n[P-1].coordinate)/2&&t<=(n[P].coordinate+n[P+1].coordinate)/2||P===s-1&&t>(n[P].coordinate+n[P-1].coordinate)/2){o=n[P].index;break}return o},wb=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?kn(kn({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:s;break;default:c=s;break}return c},rX=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),c=0,u=s.length;c<u;c++)for(var f=i[s[c]].stackGroups,d=Object.keys(f),p=0,m=d.length;p<m;p++){var x=f[d[p]],b=x.items,k=x.cateAxisId,v=b.filter(function(O){return vo(O.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,w=y!==void 0?kn(kn({},y),v[0].props):v[0].props,P=w.barSize,S=w[k];o[S]||(o[S]=[]);var j=Ot(P)?r:P;o[S].push({item:v[0],stackList:v.slice(1),barSize:Ot(j)?void 0:cl(j,n,0)})}}return o},nX=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,c=o.length;if(c<1)return null;var u=cl(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=a/c,x=o.reduce(function(P,S){return P+S.barSize||0},0);x+=(c-1)*u,x>=a&&(x-=(c-1)*u,u=0),x>=a&&m>0&&(p=!0,m*=.9,x=c*m);var b=(a-x)/2>>0,k={offset:b-u,size:0};f=o.reduce(function(P,S){var j={item:S.item,position:{offset:k.offset+k.size+u,size:p?m:S.barSize}},O=[].concat(OS(P),[j]);return k=O[O.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){O.push({item:A,position:k})}),O},d)}else{var v=cl(n,a,0,!0);a-2*v-(c-1)*u<=0&&(u=0);var y=(a-2*v-(c-1)*u)/c;y>1&&(y>>=0);var w=s===+s?Math.min(y,s):y;f=o.reduce(function(P,S,j){var O=[].concat(OS(P),[{item:S.item,position:{offset:v+(y+u)*j+(y-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){O.push({item:A,position:O[O.length-1].position})}),O},d)}return f},aX=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,c=o-(s.left||0)-(s.right||0),u=aC({children:i,legendWidth:c});if(u){var f=a||{},d=f.width,p=f.height,m=u.align,x=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&x==="middle")&&m!=="center"&&Ee(t[m]))return kn(kn({},t),{},ic({},m,t[m]+(d||0)));if((b==="horizontal"||b==="vertical"&&m==="center")&&x!=="middle"&&Ee(t[x]))return kn(kn({},t),{},ic({},x,t[x]+(p||0)))}return t},iX=function(t,r,n){return Ot(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},iC=function(t,r,n,a,i){var o=r.props.children,s=Fa(o,au).filter(function(u){return iX(a,i,u.props.direction)});if(s&&s.length){var c=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Vn(f,n);if(Ot(d))return u;var p=Array.isArray(d)?[Kp(d),Ko(d)]:[d,d],m=c.reduce(function(x,b){var k=Vn(f,b,0),v=p[0]-Math.abs(Array.isArray(k)?k[0]:k),y=p[1]+Math.abs(Array.isArray(k)?k[1]:k);return[Math.min(v,x[0]),Math.max(y,x[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},oX=function(t,r,n,a,i){var o=r.map(function(s){return iC(t,s,n,i,a)}).filter(function(s){return!Ot(s)});return o&&o.length?o.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]):null},oC=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&iC(t,c,u,a)||Vu(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,c.push(u[f]));return c},[])},sC=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},lC=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,s=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||s.push(r),o||s.push(n),s},mo=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Mi(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var p=i?i.indexOf(d):d;return{coordinate:a(p)+u,value:d,offset:u}});return f.filter(function(d){return!Zc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,p){return{coordinate:a(d)+u,value:d,index:p,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,p){return{coordinate:a(d)+u,value:i?i[d]:d,index:p,offset:u}})},Tm=new WeakMap,Yd=function(t,r){if(typeof r!="function")return t;Tm.has(t)||Tm.set(t,new WeakMap);var n=Tm.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},sX=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:jf(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:yh(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Wu(),realScaleType:"point"}:i==="category"?{scale:jf(),realScaleType:"band"}:{scale:yh(),realScaleType:"linear"};if(ll(a)){var c="scale".concat($p(a));return{scale:(SS[c]||Wu)(),realScaleType:SS[c]?c:"point"}}return $t(a)?{scale:a}:{scale:Wu(),realScaleType:"point"}},AS=1e-4,lX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-AS,o=Math.max(a[0],a[1])+AS,s=t(r[0]),c=t(r[n-1]);(s<i||s>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},cX=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},uX=function(t,r){if(!r||r.length!==2||!Ee(r[0])||!Ee(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Ee(t[0])||t[0]<n)&&(i[0]=n),(!Ee(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},fX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var c=Zc(t[s][n][1])?t[s][n][0]:t[s][n][1];c>=0?(t[s][n][0]=i,t[s][n][1]=i+c,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+c,o=t[s][n][1])}},dX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=Zc(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},hX={sign:fX,expand:N7,none:gc,silhouette:O7,wiggle:M7,positive:dX},pX=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=hX[n],o=C7().keys(a).value(function(s,c){return+Vn(s,c,0)}).order(rv).offset(i);return o(t)},gX=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,c={},u=s.reduce(function(d,p){var m,x=(m=p.type)!==null&&m!==void 0&&m.defaultProps?kn(kn({},p.type.defaultProps),p.props):p.props,b=x.stackId,k=x.hide;if(k)return d;var v=x[n],y=d[v]||{hasStack:!1,stackGroups:{}};if(Wn(b)){var w=y.stackGroups[b]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(p),y.hasStack=!0,y.stackGroups[b]=w}else y.stackGroups[xl("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return kn(kn({},d),{},ic({},v,y))},c),f={};return Object.keys(u).reduce(function(d,p){var m=u[p];if(m.hasStack){var x={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(b,k){var v=m.stackGroups[k];return kn(kn({},b),{},ic({},k,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:pX(t,v.items,i)}))},x)}return kn(kn({},d),{},ic({},p,m))},f)},mX=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=CH(u,i,s);return t.domain([Kp(f),Ko(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),p=NH(d,i,s);return{niceTicks:p}}return null};function jc(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ot(a[t.dataKey])){var s=K0(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Vn(a,Ot(o)?t.dataKey:o);return Ot(c)?null:t.scale(c)}var TS=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var c=Vn(o,r.dataKey,r.domain[s]);return Ot(c)?null:r.scale(c)-i/2+a},yX=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},vX=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?kn(kn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Wn(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},xX=function(t){return t.reduce(function(r,n){return[Kp(n.concat([r[0]]).filter(Ee)),Ko(n.concat([r[1]]).filter(Ee))]},[1/0,-1/0])},cC=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,c=s.reduce(function(u,f){var d=xX(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},ES=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$S=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tv=function(t,r,n){if($t(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Ee(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(ES.test(t[0])){var i=+ES.exec(t[0])[1];a[0]=r[0]-i}else $t(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Ee(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if($S.test(t[1])){var o=+$S.exec(t[1])[1];a[1]=r[1]+o}else $t(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},jh=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=K1(r,function(d){return d.coordinate}),o=1/0,s=1,c=i.length;s<c;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},DS=function(t,r,n){return!t||!t.length||ul(t,di(n,"type.defaultProps.domain"))?r:t},uC=function(t,r){var n=t.type.defaultProps?kn(kn({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return kn(kn({},Tt(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:wb(t),value:Vn(r,a),type:c,payload:r,chartType:u,hide:f})};function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RS(Object(r),!0).forEach(function(n){bX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bX(e,t,r){return t=wX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wX(e){var t=kX(e,"string");return Ef(t)=="symbol"?t:t+""}function kX(e,t){if(Ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _h=Math.PI/180,SX=function(t){return t*180/Math.PI},oa=function(t,r,n,a){return{x:t+Math.cos(-_h*a)*n,y:r+Math.sin(-_h*a)*n}},jX=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},_X=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=jX({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var c=(n-i)/s,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:s,angle:SX(u),angleInRadian:u}},PX=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},CX=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},LS=function(t,r){var n=t.x,a=t.y,i=_X({x:n,y:a},r),o=i.radius,s=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=PX(r),d=f.startAngle,p=f.endAngle,m=s,x;if(d<=p){for(;m>p;)m-=360;for(;m<d;)m+=360;x=m>=d&&m<=p}else{for(;m>d;)m-=360;for(;m<p;)m+=360;x=m>=p&&m<=d}return x?IS(IS({},r),{},{radius:o,angle:CX(m,r)}):null};function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}var NX=["offset"];function OX(e){return EX(e)||TX(e)||AX(e)||MX()}function MX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AX(e,t){if(e){if(typeof e=="string")return Ev(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ev(e,t)}}function TX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EX(e){if(Array.isArray(e))return Ev(e)}function Ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $X(e,t){if(e==null)return{};var r=DX(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function FS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FS(Object(r),!0).forEach(function(n){RX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RX(e,t,r){return t=IX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IX(e){var t=LX(e,"string");return $f(t)=="symbol"?t:t+""}function LX(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Df.apply(this,arguments)}var FX=function(t){var r=t.value,n=t.formatter,a=Ot(t.children)?r:t.children;return $t(n)?n(a):a},BX=function(t,r){var n=Mi(r-t),a=Math.min(Math.abs(r-t),360);return n*a},zX=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,c=i,u=c.cx,f=c.cy,d=c.innerRadius,p=c.outerRadius,m=c.startAngle,x=c.endAngle,b=c.clockWise,k=(d+p)/2,v=BX(m,x),y=v>=0?1:-1,w,P;a==="insideStart"?(w=m+y*o,P=b):a==="insideEnd"?(w=x-y*o,P=!b):a==="end"&&(w=x+y*o,P=b),P=v<=0?P:!P;var S=oa(u,f,k,w),j=oa(u,f,k,w+(P?1:-1)*359),O="M".concat(S.x,",").concat(S.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(P?0:1,`,
    `).concat(j.x,",").concat(j.y),A=Ot(t.id)?xl("recharts-radial-line-"):t.id;return Q.createElement("text",Df({},n,{dominantBaseline:"central",className:er("recharts-radial-bar-label",s)}),Q.createElement("defs",null,Q.createElement("path",{id:A,d:O})),Q.createElement("textPath",{xlinkHref:"#".concat(A)},r))},UX=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,c=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,p=(f+d)/2;if(a==="outside"){var m=oa(o,s,u+n,p),x=m.x,b=m.y;return{x,y:b,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var k=(c+u)/2,v=oa(o,s,k,p),y=v.x,w=v.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},GX=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,p=d*a,m=d>0?"end":"start",x=d>0?"start":"end",b=u>=0?1:-1,k=b*a,v=b>0?"end":"start",y=b>0?"start":"end";if(i==="top"){var w={x:s+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:m};return Bn(Bn({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var P={x:s+u/2,y:c+f+p,textAnchor:"middle",verticalAnchor:x};return Bn(Bn({},P),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(i==="left"){var S={x:s-k,y:c+f/2,textAnchor:v,verticalAnchor:"middle"};return Bn(Bn({},S),n?{width:Math.max(S.x-n.x,0),height:f}:{})}if(i==="right"){var j={x:s+u+k,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return Bn(Bn({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:f}:{})}var O=n?{width:u,height:f}:{};return i==="insideLeft"?Bn({x:s+k,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},O):i==="insideRight"?Bn({x:s+u-k,y:c+f/2,textAnchor:v,verticalAnchor:"middle"},O):i==="insideTop"?Bn({x:s+u/2,y:c+p,textAnchor:"middle",verticalAnchor:x},O):i==="insideBottom"?Bn({x:s+u/2,y:c+f-p,textAnchor:"middle",verticalAnchor:m},O):i==="insideTopLeft"?Bn({x:s+k,y:c+p,textAnchor:y,verticalAnchor:x},O):i==="insideTopRight"?Bn({x:s+u-k,y:c+p,textAnchor:v,verticalAnchor:x},O):i==="insideBottomLeft"?Bn({x:s+k,y:c+f-p,textAnchor:y,verticalAnchor:m},O):i==="insideBottomRight"?Bn({x:s+u-k,y:c+f-p,textAnchor:v,verticalAnchor:m},O):Xc(i)&&(Ee(i.x)||zs(i.x))&&(Ee(i.y)||zs(i.y))?Bn({x:s+cl(i.x,u),y:c+cl(i.y,f),textAnchor:"end",verticalAnchor:"end"},O):Bn({x:s+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},O)},WX=function(t){return"cx"in t&&Ee(t.cx)};function ia(e){var t=e.offset,r=t===void 0?5:t,n=$X(e,NX),a=Bn({offset:r},n),i=a.viewBox,o=a.position,s=a.value,c=a.children,u=a.content,f=a.className,d=f===void 0?"":f,p=a.textBreakAll;if(!i||Ot(s)&&Ot(c)&&!C.isValidElement(u)&&!$t(u))return null;if(C.isValidElement(u))return C.cloneElement(u,a);var m;if($t(u)){if(m=C.createElement(u,a),C.isValidElement(m))return m}else m=FX(a);var x=WX(i),b=Tt(a,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return zX(a,m,b);var k=x?UX(a):GX(a);return Q.createElement(ch,Df({className:er("recharts-label",d)},b,k,{breakAll:p}),m)}ia.displayName="Label";var fC=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,p=t.y,m=t.top,x=t.left,b=t.width,k=t.height,v=t.clockWise,y=t.labelViewBox;if(y)return y;if(Ee(b)&&Ee(k)){if(Ee(d)&&Ee(p))return{x:d,y:p,width:b,height:k};if(Ee(m)&&Ee(x))return{x:m,y:x,width:b,height:k}}return Ee(d)&&Ee(p)?{x:d,y:p,width:0,height:0}:Ee(r)&&Ee(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||s||0,clockWise:v}:t.viewBox?t.viewBox:{}},VX=function(t,r){return t?t===!0?Q.createElement(ia,{key:"label-implicit",viewBox:r}):Wn(t)?Q.createElement(ia,{key:"label-implicit",viewBox:r,value:t}):C.isValidElement(t)?t.type===ia?C.cloneElement(t,{key:"label-implicit",viewBox:r}):Q.createElement(ia,{key:"label-implicit",content:t,viewBox:r}):$t(t)?Q.createElement(ia,{key:"label-implicit",content:t,viewBox:r}):Xc(t)?Q.createElement(ia,Df({viewBox:r},t,{key:"label-implicit"})):null:null},HX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=fC(t),o=Fa(a,ia).map(function(c,u){return C.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=VX(t.label,r||i);return[s].concat(OX(o))};ia.parseViewBox=fC;ia.renderCallByParent=HX;function XX(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var KX=XX;const qX=Br(KX);function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}var YX=["valueAccessor"],ZX=["data","dataKey","clockWise","id","textBreakAll"];function QX(e){return rK(e)||tK(e)||eK(e)||JX()}function JX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eK(e,t){if(e){if(typeof e=="string")return $v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $v(e,t)}}function tK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rK(e){if(Array.isArray(e))return $v(e)}function $v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ph(){return Ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ph.apply(this,arguments)}function BS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BS(Object(r),!0).forEach(function(n){nK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nK(e,t,r){return t=aK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aK(e){var t=iK(e,"string");return Rf(t)=="symbol"?t:t+""}function iK(e,t){if(Rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function US(e,t){if(e==null)return{};var r=oK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var sK=function(t){return Array.isArray(t.value)?qX(t.value):t.value};function Yi(e){var t=e.valueAccessor,r=t===void 0?sK:t,n=US(e,YX),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,c=n.textBreakAll,u=US(n,ZX);return!a||!a.length?null:Q.createElement(vr,{className:"recharts-label-list"},a.map(function(f,d){var p=Ot(i)?r(f,d):Vn(f&&f.payload,i),m=Ot(s)?{}:{id:"".concat(s,"-").concat(d)};return Q.createElement(ia,Ph({},Tt(f,!0),u,m,{parentViewBox:f.parentViewBox,value:p,textBreakAll:c,viewBox:ia.parseViewBox(Ot(o)?f:zS(zS({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Yi.displayName="LabelList";function lK(e,t){return e?e===!0?Q.createElement(Yi,{key:"labelList-implicit",data:t}):Q.isValidElement(e)||$t(e)?Q.createElement(Yi,{key:"labelList-implicit",data:t,content:e}):Xc(e)?Q.createElement(Yi,Ph({data:t},e,{key:"labelList-implicit"})):null:null}function cK(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Fa(n,Yi).map(function(o,s){return C.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=lK(e.label,t);return[i].concat(QX(a))}Yi.renderCallByParent=cK;function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dv.apply(this,arguments)}function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){uK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uK(e,t,r){return t=fK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fK(e){var t=dK(e,"string");return If(t)=="symbol"?t:t+""}function dK(e,t){if(If(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hK=function(t,r){var n=Mi(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Zd=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(s?1:-1)+a,d=Math.asin(c/f)/_h,p=u?i:i+o*d,m=oa(r,n,f,p),x=oa(r,n,a,p),b=u?i-o*d:i,k=oa(r,n,f*Math.cos(d*_h),b);return{center:m,circleTangency:x,lineTangency:k,theta:d}},dC=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,c=hK(o,s),u=o+c,f=oa(r,n,i,o),d=oa(r,n,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var m=oa(r,n,a,o),x=oa(r,n,a,u);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},pK=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Mi(f-u),p=Zd({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,x=p.lineTangency,b=p.theta,k=Zd({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),v=k.circleTangency,y=k.lineTangency,w=k.theta,P=c?Math.abs(u-f):Math.abs(u-f)-b-w;if(P<0)return s?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):dC({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var S="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var j=Zd({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),O=j.circleTangency,A=j.lineTangency,$=j.theta,E=Zd({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=E.circleTangency,B=E.lineTangency,U=E.theta,F=c?Math.abs(u-f):Math.abs(u-f)-$-U;if(F<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(F>180),",").concat(+(d>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},gK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},hC=function(t){var r=WS(WS({},gK),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,p=r.className;if(o<i||f===d)return null;var m=er("recharts-sector",p),x=o-i,b=cl(s,x,0,!0),k;return b>0&&Math.abs(f-d)<360?k=pK({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(b,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):k=dC({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),Q.createElement("path",Dv({},Tt(r,!0),{className:m,d:k,role:"img"}))};function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rv.apply(this,arguments)}function VS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VS(Object(r),!0).forEach(function(n){mK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mK(e,t,r){return t=yK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=vK(e,"string");return Lf(t)=="symbol"?t:t+""}function vK(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XS={curveBasisClosed:m7,curveBasisOpen:y7,curveBasis:g7,curveBumpX:t7,curveBumpY:r7,curveLinearClosed:v7,curveLinear:Rp,curveMonotoneX:x7,curveMonotoneY:b7,curveNatural:w7,curveStep:k7,curveStepAfter:j7,curveStepBefore:S7},Qd=function(t){return t.x===+t.x&&t.y===+t.y},ju=function(t){return t.x},_u=function(t){return t.y},xK=function(t,r){if($t(t))return t;var n="curve".concat($p(t));return(n==="curveMonotone"||n==="curveBump")&&r?XS["".concat(n).concat(r==="vertical"?"Y":"X")]:XS[n]||Rp},bK=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=xK(n,s),d=u?i.filter(function(b){return Qd(b)}):i,p;if(Array.isArray(o)){var m=u?o.filter(function(b){return Qd(b)}):o,x=d.map(function(b,k){return HS(HS({},b),{},{base:m[k]})});return s==="vertical"?p=Ud().y(_u).x1(ju).x0(function(b){return b.base.x}):p=Ud().x(ju).y1(_u).y0(function(b){return b.base.y}),p.defined(Qd).curve(f),p(x)}return s==="vertical"&&Ee(o)?p=Ud().y(_u).x1(ju).x0(o):Ee(o)?p=Ud().x(ju).y1(_u).y0(o):p=g_().x(ju).y(_u),p.defined(Qd).curve(f),p(d)},Zs=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?bK(t):a;return C.createElement("path",Rv({},Tt(t,!1),q0(t),{className:er("recharts-curve",r),d:o,ref:i}))},pC={exports:{}},wK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kK=wK,SK=kK;function gC(){}function mC(){}mC.resetWarningCache=gC;var jK=function(){function e(n,a,i,o,s,c){if(c!==SK){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:mC,resetWarningCache:gC};return r.PropTypes=r,r};pC.exports=jK();var _K=pC.exports;const kr=Br(_K),{getOwnPropertyNames:PK,getOwnPropertySymbols:CK}=Object,{hasOwnProperty:NK}=Object.prototype;function Em(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Jd(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function OK(e){return e!=null?e[Symbol.toStringTag]:void 0}function KS(e){return PK(e).concat(CK(e))}const MK=Object.hasOwn||((e,t)=>NK.call(e,t));function kl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const AK="__v",TK="__o",EK="_owner",{getOwnPropertyDescriptor:qS,keys:YS}=Object;function $K(e,t){return e.byteLength===t.byteLength&&Ch(new Uint8Array(e),new Uint8Array(t))}function DK(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function RK(e,t){return e.byteLength===t.byteLength&&Ch(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function IK(e,t){return kl(e.getTime(),t.getTime())}function LK(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function FK(e,t){return e===t}function ZS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const p=o.value,m=s.value;if(r.equals(p[0],m[0],c,d,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;c++}return!0}const BK=kl;function zK(e,t,r){const n=YS(e);let a=n.length;if(YS(t).length!==a)return!1;for(;a-- >0;)if(!yC(e,t,r,n[a]))return!1;return!0}function Pu(e,t,r){const n=KS(e);let a=n.length;if(KS(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!yC(e,t,r,i)||(o=qS(e,i),s=qS(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function UK(e,t){return kl(e.valueOf(),t.valueOf())}function GK(e,t){return e.source===t.source&&e.flags===t.flags}function QS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,f=0;for(;(s=c.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function Ch(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function WK(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function yC(e,t,r,n){return(n===EK||n===TK||n===AK)&&(e.$$typeof||t.$$typeof)?!0:MK(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const VK="[object ArrayBuffer]",HK="[object Arguments]",XK="[object Boolean]",KK="[object DataView]",qK="[object Date]",YK="[object Error]",ZK="[object Map]",QK="[object Number]",JK="[object Object]",eq="[object RegExp]",tq="[object Set]",rq="[object String]",nq={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},aq="[object URL]",iq=Object.prototype.toString;function oq({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:x}){return function(k,v,y){if(k===v)return!0;if(k==null||v==null)return!1;const w=typeof k;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?s(k,v,y):w==="function"?i(k,v,y):!1;const P=k.constructor;if(P!==v.constructor)return!1;if(P===Object)return c(k,v,y);if(Array.isArray(k))return t(k,v,y);if(P===Date)return n(k,v,y);if(P===RegExp)return f(k,v,y);if(P===Map)return o(k,v,y);if(P===Set)return d(k,v,y);const S=iq.call(k);if(S===qK)return n(k,v,y);if(S===eq)return f(k,v,y);if(S===ZK)return o(k,v,y);if(S===tq)return d(k,v,y);if(S===JK)return typeof k.then!="function"&&typeof v.then!="function"&&c(k,v,y);if(S===aq)return m(k,v,y);if(S===YK)return a(k,v,y);if(S===HK)return c(k,v,y);if(nq[S])return p(k,v,y);if(S===VK)return e(k,v,y);if(S===KK)return r(k,v,y);if(S===XK||S===QK||S===rq)return u(k,v,y);if(x){let j=x[S];if(!j){const O=OK(k);O&&(j=x[O])}if(j)return j(k,v,y)}return!1}}function sq({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:$K,areArraysEqual:r?Pu:DK,areDataViewsEqual:RK,areDatesEqual:IK,areErrorsEqual:LK,areFunctionsEqual:FK,areMapsEqual:r?Em(ZS,Pu):ZS,areNumbersEqual:BK,areObjectsEqual:r?Pu:zK,arePrimitiveWrappersEqual:UK,areRegExpsEqual:GK,areSetsEqual:r?Em(QS,Pu):QS,areTypedArraysEqual:r?Em(Ch,Pu):Ch,areUrlsEqual:WK,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=Jd(n.areArraysEqual),i=Jd(n.areMapsEqual),o=Jd(n.areObjectsEqual),s=Jd(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function lq(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function cq({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,c){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,c,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,c){return t(s,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,c){return t(s,c,i)}}const uq=ws();ws({strict:!0});ws({circular:!0});ws({circular:!0,strict:!0});ws({createInternalComparator:()=>kl});ws({strict:!0,createInternalComparator:()=>kl});ws({circular:!0,createInternalComparator:()=>kl});ws({circular:!0,createInternalComparator:()=>kl,strict:!0});function ws(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=sq(e),o=oq(i),s=r?r(o):lq(o);return cq({circular:t,comparator:o,createState:n,equals:s,strict:a})}function fq(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function JS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):fq(a)};requestAnimationFrame(n)}function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}function dq(e){return mq(e)||gq(e)||pq(e)||hq()}function hq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pq(e,t){if(e){if(typeof e=="string")return e5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e5(e,t)}}function e5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mq(e){if(Array.isArray(e))return e}function yq(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=dq(o),c=s[0],u=s.slice(1);if(typeof c=="number"){JS(a.bind(null,u),c);return}a(c),JS(a.bind(null,u));return}Iv(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function t5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t5(Object(r),!0).forEach(function(n){vC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vC(e,t,r){return t=vq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vq(e){var t=xq(e,"string");return Ff(t)==="symbol"?t:String(t)}function xq(e,t){if(Ff(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ff(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bq=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},wq=function(t){return t},kq=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Hu=function(t,r){return Object.keys(r).reduce(function(n,a){return r5(r5({},n),{},vC({},a,t(a,r[a])))},{})},n5=function(t,r,n){return t.map(function(a){return"".concat(kq(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Sq(e,t){return Pq(e)||_q(e,t)||xC(e,t)||jq()}function jq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _q(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Pq(e){if(Array.isArray(e))return e}function Cq(e){return Mq(e)||Oq(e)||xC(e)||Nq()}function Nq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xC(e,t){if(e){if(typeof e=="string")return Lv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lv(e,t)}}function Oq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mq(e){if(Array.isArray(e))return Lv(e)}function Lv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nh=1e-4,bC=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},wC=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},a5=function(t,r){return function(n){var a=bC(t,r);return wC(a,n)}},Aq=function(t,r){return function(n){var a=bC(t,r),i=[].concat(Cq(a.map(function(o,s){return o*s}).slice(1)),[0]);return wC(i,n)}},i5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(k){return parseFloat(k)}),f=Sq(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=a5(a,o),p=a5(i,s),m=Aq(a,o),x=function(v){return v>1?1:v<0?0:v},b=function(v){for(var y=v>1?1:v,w=y,P=0;P<8;++P){var S=d(w)-y,j=m(w);if(Math.abs(S-y)<Nh||j<Nh)return p(w);w=x(w-S/j)}return p(w)};return b.isStepper=!1,b},Tq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,c=function(f,d,p){var m=-(f-d)*n,x=p*i,b=p+(m-x)*s/1e3,k=p*s/1e3+f;return Math.abs(k-d)<Nh&&Math.abs(b)<Nh?[d,0]:[k,b]};return c.isStepper=!0,c.dt=s,c},Eq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return i5(a);case"spring":return Tq();default:if(a.split("(")[0]==="cubic-bezier")return i5(a)}return typeof a=="function"?a:null};function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function o5(e){return Rq(e)||Dq(e)||kC(e)||$q()}function $q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rq(e){if(Array.isArray(e))return Bv(e)}function s5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(r),!0).forEach(function(n){Fv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fv(e,t,r){return t=Iq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iq(e){var t=Lq(e,"string");return Bf(t)==="symbol"?t:String(t)}function Lq(e,t){if(Bf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fq(e,t){return Uq(e)||zq(e,t)||kC(e,t)||Bq()}function Bq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kC(e,t){if(e){if(typeof e=="string")return Bv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bv(e,t)}}function Bv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Uq(e){if(Array.isArray(e))return e}var Oh=function(t,r,n){return t+(r-t)*n},zv=function(t){var r=t.from,n=t.to;return r!==n},Gq=function e(t,r,n){var a=Hu(function(i,o){if(zv(o)){var s=t(o.from,o.to,o.velocity),c=Fq(s,2),u=c[0],f=c[1];return na(na({},o),{},{from:u,velocity:f})}return o},r);return n<1?Hu(function(i,o){return zv(o)?na(na({},o),{},{velocity:Oh(o.velocity,a[i].velocity,n),from:Oh(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const Wq=function(e,t,r,n,a){var i=bq(e,t),o=i.reduce(function(k,v){return na(na({},k),{},Fv({},v,[e[v],t[v]]))},{}),s=i.reduce(function(k,v){return na(na({},k),{},Fv({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,f,d=function(){return null},p=function(){return Hu(function(v,y){return y.from},s)},m=function(){return!Object.values(s).filter(zv).length},x=function(v){u||(u=v);var y=v-u,w=y/r.dt;s=Gq(r,s,w),a(na(na(na({},e),t),p())),u=v,m()||(c=requestAnimationFrame(d))},b=function(v){f||(f=v);var y=(v-f)/n,w=Hu(function(S,j){return Oh.apply(void 0,o5(j).concat([r(y)]))},o);if(a(na(na(na({},e),t),w)),y<1)c=requestAnimationFrame(d);else{var P=Hu(function(S,j){return Oh.apply(void 0,o5(j).concat([r(1)]))},o);a(na(na(na({},e),t),P))}};return d=r.isStepper?x:b,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}var Vq=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Hq(e,t){if(e==null)return{};var r=Xq(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xq(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function $m(e){return Zq(e)||Yq(e)||qq(e)||Kq()}function Kq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qq(e,t){if(e){if(typeof e=="string")return Uv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uv(e,t)}}function Yq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zq(e){if(Array.isArray(e))return Uv(e)}function Uv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l5(Object(r),!0).forEach(function(n){Tu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tu(e,t,r){return t=SC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SC(n.key),n)}}function eY(e,t,r){return t&&Jq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SC(e){var t=tY(e,"string");return _c(t)==="symbol"?t:String(t)}function tY(e,t){if(_c(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_c(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gv(e,t)}function Gv(e,t){return Gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gv(e,t)}function nY(e){var t=aY();return function(){var n=Mh(e),a;if(t){var i=Mh(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Wv(this,a)}}function Wv(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vv(e)}function Vv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mh(e){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mh(e)}var Di=function(e){rY(r,e);var t=nY(r);function r(n,a){var i;Qq(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,p=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Vv(i)),i.changeStyle=i.changeStyle.bind(Vv(i)),!s||m<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),Wv(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof p=="function")return i.state={style:u},Wv(i);i.state={style:c?Tu({},c,u):u}}else i.state={style:{}};return i}return eY(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,p=this.state.style;if(s){if(!o){var m={style:c?Tu({},c,f):f};this.state&&p&&(c&&p[c]!==f||!c&&p!==f)&&this.setState(m);return}if(!(uq(a.to,f)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=x||u?d:a.to;if(this.state&&p){var k={style:c?Tu({},c,b):b};(c&&p[c]!==b||!c&&p!==b)&&this.setState(k)}this.runAnimation(ki(ki({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,c=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,p=a.onAnimationStart,m=Wq(o,s,Eq(u),c,this.changeStyle),x=function(){i.stopJSAnimation=m()};this.manager.start([p,f,x,c,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,p=d===void 0?0:d,m=function(b,k,v){if(v===0)return b;var y=k.duration,w=k.easing,P=w===void 0?"ease":w,S=k.style,j=k.properties,O=k.onAnimationEnd,A=v>0?o[v-1]:k,$=j||Object.keys(S);if(typeof P=="function"||P==="spring")return[].concat($m(b),[i.runJSAnimation.bind(i,{from:A.style,to:S,duration:y,easing:P}),y]);var E=n5($,y,P),T=ki(ki(ki({},A.style),S),{},{transition:E});return[].concat($m(b),[T,y,O]).filter(wq)};return this.manager.start([c].concat($m(o.reduce(m,[f,Math.max(p,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=yq());var i=a.begin,o=a.duration,s=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,p=a.steps,m=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var b=s?Tu({},s,c):c,k=n5(Object.keys(b),o,u);x.start([f,i,ki(ki({},b),{},{transition:k}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Hq(a,Vq),u=C.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(m){var x=m.props,b=x.style,k=b===void 0?{}:b,v=x.className,y=C.cloneElement(m,ki(ki({},c),{},{style:ki(ki({},k),f),className:v}));return y};return u===1?d(C.Children.only(i)):Q.createElement("div",null,C.Children.map(i,function(p){return d(p)}))}}]),r}(C.PureComponent);Di.displayName="Animate";Di.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Di.propTypes={from:kr.oneOfType([kr.object,kr.string]),to:kr.oneOfType([kr.object,kr.string]),attributeName:kr.string,duration:kr.number,begin:kr.number,easing:kr.oneOfType([kr.string,kr.func]),steps:kr.arrayOf(kr.shape({duration:kr.number.isRequired,style:kr.object.isRequired,easing:kr.oneOfType([kr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),kr.func]),properties:kr.arrayOf("string"),onAnimationEnd:kr.func})),children:kr.oneOfType([kr.node,kr.func]),isActive:kr.bool,canBegin:kr.bool,onAnimationEnd:kr.func,shouldReAnimate:kr.bool,onAnimationStart:kr.func,onAnimationReStart:kr.func};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ah.apply(this,arguments)}function iY(e,t){return cY(e)||lY(e,t)||sY(e,t)||oY()}function oY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sY(e,t){if(e){if(typeof e=="string")return c5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c5(e,t)}}function c5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function cY(e){if(Array.isArray(e))return e}function u5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u5(Object(r),!0).forEach(function(n){uY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uY(e,t,r){return t=fY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fY(e){var t=dY(e,"string");return zf(t)=="symbol"?t:t+""}function dY(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d5=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,m=4;p<m;p++)d[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+a)),f+="L ".concat(t+c*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);f="M ".concat(t,",").concat(r+s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+c*x,",").concat(r,`
            L `).concat(t+n-c*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*x,`
            L `).concat(t+n,",").concat(r+a-s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n-c*x,",").concat(r+a,`
            L `).concat(t+c*x,",").concat(r+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*x," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},hY=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,c=r.height;if(Math.abs(s)>0&&Math.abs(c)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+c),p=Math.max(o,o+c);return n>=u&&n<=f&&a>=d&&a<=p}return!1},pY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kb=function(t){var r=f5(f5({},pY),t),n=C.useRef(),a=C.useState(-1),i=iY(a,2),o=i[0],s=i[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&s(P)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,p=r.radius,m=r.className,x=r.animationEasing,b=r.animationDuration,k=r.animationBegin,v=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var w=er("recharts-rectangle",m);return y?Q.createElement(Di,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:b,animationEasing:x,isActive:y},function(P){var S=P.width,j=P.height,O=P.x,A=P.y;return Q.createElement(Di,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:k,duration:b,isActive:v,easing:x},Q.createElement("path",Ah({},Tt(r,!0),{className:w,d:d5(O,A,S,j,p),ref:n})))}):Q.createElement("path",Ah({},Tt(r,!0),{className:w,d:d5(c,u,f,d,p)}))};function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hv.apply(this,arguments)}var Zp=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=er("recharts-dot",i);return r===+r&&n===+n&&a===+a?C.createElement("circle",Hv({},Tt(t,!1),q0(t),{className:o,cx:r,cy:n,r:a})):null};function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}var gY=["x","y","top","left","width","height","className"];function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(this,arguments)}function h5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h5(Object(r),!0).forEach(function(n){yY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yY(e,t,r){return t=vY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vY(e){var t=xY(e,"string");return Uf(t)=="symbol"?t:t+""}function xY(e,t){if(Uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bY(e,t){if(e==null)return{};var r=wY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kY=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},SY=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,p=t.height,m=p===void 0?0:p,x=t.className,b=bY(t,gY),k=mY({x:n,y:i,top:s,left:u,width:d,height:m},b);return!Ee(n)||!Ee(i)||!Ee(d)||!Ee(m)||!Ee(s)||!Ee(u)?null:Q.createElement("path",Xv({},Tt(k,!0),{className:er("recharts-cross",x),d:kY(n,i,d,m,s,u)}))},jY=F_,_Y=jY(Object.getPrototypeOf,Object),PY=_Y,CY=Oo,NY=PY,OY=Mo,MY="[object Object]",AY=Function.prototype,TY=Object.prototype,jC=AY.toString,EY=TY.hasOwnProperty,$Y=jC.call(Object);function DY(e){if(!OY(e)||CY(e)!=MY)return!1;var t=NY(e);if(t===null)return!0;var r=EY.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&jC.call(r)==$Y}var RY=DY;const IY=Br(RY);var LY=Oo,FY=Mo,BY="[object Boolean]";function zY(e){return e===!0||e===!1||FY(e)&&LY(e)==BY}var UY=zY;const GY=Br(UY);function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Th.apply(this,arguments)}function WY(e,t){return KY(e)||XY(e,t)||HY(e,t)||VY()}function VY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HY(e,t){if(e){if(typeof e=="string")return p5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p5(e,t)}}function p5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function KY(e){if(Array.isArray(e))return e}function g5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function m5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g5(Object(r),!0).forEach(function(n){qY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qY(e,t,r){return t=YY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YY(e){var t=ZY(e,"string");return Gf(t)=="symbol"?t:t+""}function ZY(e,t){if(Gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y5=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},QY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JY=function(t){var r=m5(m5({},QY),t),n=C.useRef(),a=C.useState(-1),i=WY(a,2),o=i[0],s=i[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&s(w)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,p=r.height,m=r.className,x=r.animationEasing,b=r.animationDuration,k=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||p!==+p||f===0&&d===0||p===0)return null;var y=er("recharts-trapezoid",m);return v?Q.createElement(Di,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:p,x:c,y:u},duration:b,animationEasing:x,isActive:v},function(w){var P=w.upperWidth,S=w.lowerWidth,j=w.height,O=w.x,A=w.y;return Q.createElement(Di,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:k,duration:b,easing:x},Q.createElement("path",Th({},Tt(r,!0),{className:y,d:y5(O,A,P,S,j),ref:n})))}):Q.createElement("g",null,Q.createElement("path",Th({},Tt(r,!0),{className:y,d:y5(c,u,f,d,p)})))},eZ=["option","shapeType","propTransformer","activeClassName","isActive"];function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function tZ(e,t){if(e==null)return{};var r=rZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Eh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v5(Object(r),!0).forEach(function(n){nZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nZ(e,t,r){return t=aZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aZ(e){var t=iZ(e,"string");return Wf(t)=="symbol"?t:t+""}function iZ(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oZ(e,t){return Eh(Eh({},t),e)}function sZ(e,t){return e==="symbols"}function x5(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Q.createElement(kb,r);case"trapezoid":return Q.createElement(JY,r);case"sector":return Q.createElement(hC,r);case"symbols":if(sZ(t))return Q.createElement(Lp,r);break;default:return null}}function lZ(e){return C.isValidElement(e)?e.props:e}function Kv(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?oZ:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,c=tZ(e,eZ),u;if(C.isValidElement(t))u=C.cloneElement(t,Eh(Eh({},c),lZ(t)));else if($t(t))u=t(c);else if(IY(t)&&!GY(t)){var f=a(t,c);u=Q.createElement(x5,{shapeType:r,elementProps:f})}else{var d=c;u=Q.createElement(x5,{shapeType:r,elementProps:d})}return s?Q.createElement(vr,{className:o},u):u}function Qp(e,t){return t!=null&&"trapezoids"in e.props}function Jp(e,t){return t!=null&&"sectors"in e.props}function Vf(e,t){return t!=null&&"points"in e.props}function cZ(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function uZ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function fZ(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function dZ(e,t){var r;return Qp(e,t)?r=cZ:Jp(e,t)?r=uZ:Vf(e,t)&&(r=fZ),r}function hZ(e,t){var r;return Qp(e,t)?r="trapezoids":Jp(e,t)?r="sectors":Vf(e,t)&&(r="points"),r}function pZ(e,t){if(Qp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Jp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Vf(e,t)?t.payload:{}}function gZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=hZ(r,t),i=pZ(r,t),o=n.filter(function(c,u){var f=ul(i,c),d=r.props[a].filter(function(x){var b=dZ(r,t);return b(x,t)}),p=r.props[a].indexOf(d[d.length-1]),m=u===p;return f&&m}),s=n.indexOf(o[o.length-1]);return s}var mZ=Math.ceil,yZ=Math.max;function vZ(e,t,r,n){for(var a=-1,i=yZ(mZ((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var xZ=vZ,bZ=aP,b5=1/0,wZ=17976931348623157e292;function kZ(e){if(!e)return e===0?e:0;if(e=bZ(e),e===b5||e===-b5){var t=e<0?-1:1;return t*wZ}return e===e?e:0}var _C=kZ,SZ=xZ,jZ=zp,Dm=_C;function _Z(e){return function(t,r,n){return n&&typeof n!="number"&&jZ(t,r,n)&&(r=n=void 0),t=Dm(t),r===void 0?(r=t,t=0):r=Dm(r),n=n===void 0?t<r?1:-1:Dm(n),SZ(t,r,n,e)}}var PZ=_Z,CZ=PZ,NZ=CZ(),OZ=NZ;const $h=Br(OZ);function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function w5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w5(Object(r),!0).forEach(function(n){PC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PC(e,t,r){return t=MZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MZ(e){var t=AZ(e,"string");return Hf(t)=="symbol"?t:t+""}function AZ(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TZ=["Webkit","Moz","O","ms"],EZ=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=TZ.reduce(function(i,o){return k5(k5({},i),{},PC({},o+n,r))},{});return a[t]=r,a};function Pc(e){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dh.apply(this,arguments)}function S5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S5(Object(r),!0).forEach(function(n){Ua(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NC(n.key),n)}}function DZ(e,t,r){return t&&j5(e.prototype,t),r&&j5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RZ(e,t,r){return t=Rh(t),IZ(e,CC()?Reflect.construct(t,r||[],Rh(e).constructor):t.apply(e,r))}function IZ(e,t){if(t&&(Pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LZ(e)}function LZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CC=function(){return!!e})()}function Rh(e){return Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rh(e)}function FZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qv(e,t)}function qv(e,t){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qv(e,t)}function Ua(e,t,r){return t=NC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NC(e){var t=BZ(e,"string");return Pc(t)=="symbol"?t:t+""}function BZ(e,t){if(Pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zZ=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Wu().domain($h(0,c)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},_5=function(t){return t.changedTouches&&!!t.changedTouches.length},Cc=function(e){function t(r){var n;return $Z(this,t),n=RZ(this,t,[r]),Ua(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ua(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ua(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),Ua(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ua(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ua(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ua(n,"handleSlideDragStart",function(a){var i=_5(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return FZ(t,e),DZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,c=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),p=Math.max(a,i),m=t.getIndexInRange(o,d),x=t.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:x===f?f:x-x%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,c=Vn(i[n],s,n);return $t(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,p=c.startIndex,m=c.endIndex,x=c.onChange,b=n.pageX-i;b>0?b=Math.min(b,u+f-d-s,u+f-d-o):b<0&&(b=Math.max(b,u-o,u-s));var k=this.getIndex({startX:o+b,endX:s+b});(k.startIndex!==p||k.endIndex!==m)&&x&&x(k),this.setState({startX:o+b,endX:s+b,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=_5(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,c=a.startX,u=this.state[o],f=this.props,d=f.x,p=f.width,m=f.travellerWidth,x=f.onChange,b=f.gap,k=f.data,v={startX:this.state.startX,endX:this.state.endX},y=n.pageX-i;y>0?y=Math.min(y,d+p-m-u):y<0&&(y=Math.max(y,d-u)),v[o]=u+y;var w=this.getIndex(v),P=w.startIndex,S=w.endIndex,j=function(){var A=k.length-1;return o==="startX"&&(s>c?P%b===0:S%b===0)||s<c&&S===A||o==="endX"&&(s>c?S%b===0:P%b===0)||s>c&&S===A};this.setState(Ua(Ua({},o,u+y),"brushMoveStartX",n.pageX),function(){x&&j()&&x(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var p=d+n;if(!(p===-1||p>=s.length)){var m=s[p];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Ua({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,c=n.fill,u=n.stroke;return Q.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,c=n.data,u=n.children,f=n.padding,d=C.Children.only(u);return d?Q.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,p=c.traveller,m=c.ariaLabel,x=c.data,b=c.startIndex,k=c.endIndex,v=Math.max(n,this.props.x),y=Rm(Rm({},Tt(this.props,!1)),{},{x:v,y:u,width:f,height:d}),w=m||"Min value: ".concat((i=x[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=x[k])===null||o===void 0?void 0:o.name);return Q.createElement(vr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,y))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,c=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,p=f.endX,m=5,x={pointerEvents:"none",fill:u};return Q.createElement(vr,{className:"recharts-brush-texts"},Q.createElement(ch,Dh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-m,y:o+s/2},x),this.getTextOfTick(a)),Q.createElement(ch,Dh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+c+m,y:o+s/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,p=this.state,m=p.startX,x=p.endX,b=p.isTextActive,k=p.isSlideMoving,v=p.isTravellerMoving,y=p.isTravellerFocused;if(!a||!a.length||!Ee(s)||!Ee(c)||!Ee(u)||!Ee(f)||u<=0||f<=0)return null;var w=er("recharts-brush",i),P=Q.Children.count(o)===1,S=EZ("userSelect","none");return Q.createElement(vr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(m,x),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(x,"endX"),(b||k||v||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,c=n.stroke,u=Math.floor(i+s/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:a,y:i,width:o,height:s,fill:c,stroke:"none"}),Q.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return Q.isValidElement(n)?i=Q.cloneElement(n,a):$t(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Rm({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?zZ({data:i,width:o,x:s,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([s,s+o-c]);var p=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var c=Math.floor((o+s)/2);n[c]>a?s=c:o=c}return a>=n[s]?s:o}}])}(C.PureComponent);Ua(Cc,"displayName","Brush");Ua(Cc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var UZ=X1;function GZ(e,t){var r;return UZ(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var WZ=GZ,VZ=A_,HZ=ys,XZ=WZ,KZ=Ba,qZ=zp;function YZ(e,t,r){var n=KZ(e)?VZ:XZ;return r&&qZ(e,t,r)&&(t=void 0),n(e,HZ(t))}var ZZ=YZ;const QZ=Br(ZZ);var Zi=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},P5=J_;function JZ(e,t,r){t=="__proto__"&&P5?P5(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var eQ=JZ,tQ=eQ,rQ=Z_,nQ=ys;function aQ(e,t){var r={};return t=nQ(t),rQ(e,function(n,a,i){tQ(r,a,t(n,a,i))}),r}var iQ=aQ;const oQ=Br(iQ);function sQ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var lQ=sQ,cQ=X1;function uQ(e,t){var r=!0;return cQ(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var fQ=uQ,dQ=lQ,hQ=fQ,pQ=ys,gQ=Ba,mQ=zp;function yQ(e,t,r){var n=gQ(e)?dQ:hQ;return r&&mQ(e,t,r)&&(t=void 0),n(e,pQ(t))}var vQ=yQ;const OC=Br(vQ);var xQ=["x","y"];function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yv.apply(this,arguments)}function C5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C5(Object(r),!0).forEach(function(n){bQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bQ(e,t,r){return t=wQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wQ(e){var t=kQ(e,"string");return Xf(t)=="symbol"?t:t+""}function kQ(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SQ(e,t){if(e==null)return{};var r=jQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _Q(e,t){var r=e.x,n=e.y,a=SQ(e,xQ),i="".concat(r),o=parseInt(i,10),s="".concat(n),c=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),p=parseInt(d,10);return Cu(Cu(Cu(Cu(Cu({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function N5(e){return Q.createElement(Kv,Yv({shapeType:"rectangle",propTransformer:_Q,activeClassName:"recharts-active-bar"},e))}var PQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Ee(n)||BE(n);return i?t(n,a):(i||dl(),r)}},CQ=["value","background"],MC;function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function NQ(e,t){if(e==null)return{};var r=OQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(this,arguments)}function O5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O5(Object(r),!0).forEach(function(n){qo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TC(n.key),n)}}function AQ(e,t,r){return t&&M5(e.prototype,t),r&&M5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TQ(e,t,r){return t=Lh(t),EQ(e,AC()?Reflect.construct(t,r||[],Lh(e).constructor):t.apply(e,r))}function EQ(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Q(e)}function $Q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AC=function(){return!!e})()}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lh(e)}function DQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zv(e,t)}function qo(e,t,r){return t=TC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TC(e){var t=RQ(e,"string");return Nc(t)=="symbol"?t:t+""}function RQ(e,t){if(Nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cd=function(e){function t(){var r;MQ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=TQ(this,t,[].concat(a)),qo(r,"state",{isAnimationFinished:!1}),qo(r,"id",xl("recharts-bar-")),qo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),qo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return DQ(t,e),AQ(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,c=i.activeIndex,u=i.activeBar,f=Tt(this.props,!1);return n&&n.map(function(d,p){var m=p===c,x=m?u:o,b=En(En(En({},f),d),{},{isActive:m,option:x,index:p,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Q.createElement(vr,Ih({className:"recharts-bar-rectangle"},mf(a.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),Q.createElement(N5,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,p=this.state.prevData;return Q.createElement(Di,{begin:c,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var x=m.t,b=i.map(function(k,v){var y=p&&p[v];if(y){var w=Nn(y.x,k.x),P=Nn(y.y,k.y),S=Nn(y.width,k.width),j=Nn(y.height,k.height);return En(En({},k),{},{x:w(x),y:P(x),width:S(x),height:j(x)})}if(o==="horizontal"){var O=Nn(0,k.height),A=O(x);return En(En({},k),{},{y:k.y+k.height-A,height:A})}var $=Nn(0,k.width),E=$(x);return En(En({},k),{},{width:E})});return Q.createElement(vr,null,n.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!ul(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,c=Tt(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,p=NQ(u,CQ);if(!d)return null;var m=En(En(En(En(En({},p),{},{fill:"#eee"},d),c),mf(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Q.createElement(N5,Ih({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Fa(f,au);if(!d)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,m=function(k,v){var y=Array.isArray(k.value)?k.value[1]:k.value;return{x:k.x,y:k.y,value:y,errorVal:Vn(k,v)}},x={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Q.createElement(vr,x,d.map(function(b){return Q.cloneElement(b,{key:"error-bar-".concat(a,"-").concat(b.props.dataKey),data:o,xAxis:s,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,p=n.height,m=n.isAnimationActive,x=n.background,b=n.id;if(a||!i||!i.length)return null;var k=this.state.isAnimationFinished,v=er("recharts-bar",o),y=s&&s.allowDataOverflow,w=c&&c.allowDataOverflow,P=y||w,S=Ot(b)?this.id:b;return Q.createElement(vr,{className:v},y||w?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(S)},Q.createElement("rect",{x:y?u:u-d/2,y:w?f:f-p/2,width:y?d:d*2,height:w?p:p*2}))):null,Q.createElement(vr,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(S,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,S),(!m||k)&&Yi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(C.PureComponent);MC=cd;qo(cd,"displayName","Bar");qo(cd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!vs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});qo(cd,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,m=cX(n,r);if(!m)return null;var x=t.layout,b=r.type.defaultProps,k=b!==void 0?En(En({},b),r.props):r.props,v=k.dataKey,y=k.children,w=k.minPointSize,P=x==="horizontal"?o:i,S=u?P.scale.domain():null,j=yX({numericAxis:P}),O=Fa(y,Y1),A=d.map(function($,E){var T,B,U,F,G,z;u?T=uX(u[f+E],S):(T=Vn($,v),Array.isArray(T)||(T=[j,T]));var I=PQ(w,MC.defaultProps.minPointSize)(T[1],E);if(x==="horizontal"){var L,H=[o.scale(T[0]),o.scale(T[1])],Z=H[0],te=H[1];B=TS({axis:i,ticks:s,bandSize:a,offset:m.offset,entry:$,index:E}),U=(L=te??Z)!==null&&L!==void 0?L:void 0,F=m.size;var K=Z-te;if(G=Number.isNaN(K)?0:K,z={x:B,y:o.y,width:F,height:o.height},Math.abs(I)>0&&Math.abs(G)<Math.abs(I)){var q=Mi(G||I)*(Math.abs(I)-Math.abs(G));U-=q,G+=q}}else{var J=[i.scale(T[0]),i.scale(T[1])],ve=J[0],ie=J[1];if(B=ve,U=TS({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:$,index:E}),F=ie-ve,G=m.size,z={x:i.x,y:U,width:i.width,height:G},Math.abs(I)>0&&Math.abs(F)<Math.abs(I)){var pe=Mi(F||I)*(Math.abs(I)-Math.abs(F));F+=pe}}return En(En(En({},$),{},{x:B,y:U,width:F,height:G,value:u?T:T[1],payload:$,background:z},O&&O[E]&&O[E].props),{},{tooltipPayload:[uC(r,$)],tooltipPosition:{x:B+F/2,y:U+G/2}})});return En({data:A,layout:x},p)});function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function IQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EC(n.key),n)}}function LQ(e,t,r){return t&&A5(e.prototype,t),r&&A5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function T5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(r),!0).forEach(function(n){eg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eg(e,t,r){return t=EC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EC(e){var t=FQ(e,"string");return Kf(t)=="symbol"?t:t+""}function FQ(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sb=function(t,r,n,a,i){var o=t.width,s=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},p=!!Wa(u,cd);return f.reduce(function(m,x){var b=r[x],k=b.orientation,v=b.domain,y=b.padding,w=y===void 0?{}:y,P=b.mirror,S=b.reversed,j="".concat(k).concat(P?"Mirror":""),O,A,$,E,T;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var B=v[1]-v[0],U=1/0,F=b.categoricalDomain.sort(WE);if(F.forEach(function(J,ve){ve>0&&(U=Math.min((J||0)-(F[ve-1]||0),U))}),Number.isFinite(U)){var G=U/B,z=b.layout==="vertical"?n.height:n.width;if(b.padding==="gap"&&(O=G*z/2),b.padding==="no-gap"){var I=cl(t.barCategoryGap,G*z),L=G*z/2;O=L-I-(L-I)/z*I}}}a==="xAxis"?A=[n.left+(w.left||0)+(O||0),n.left+n.width-(w.right||0)-(O||0)]:a==="yAxis"?A=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(O||0),n.top+n.height-(w.bottom||0)-(O||0)]:A=b.range,S&&(A=[A[1],A[0]]);var H=sX(b,i,p),Z=H.scale,te=H.realScaleType;Z.domain(v).range(A),lX(Z);var K=mX(Z,_i(_i({},b),{},{realScaleType:te}));a==="xAxis"?(T=k==="top"&&!P||k==="bottom"&&P,$=n.left,E=d[j]-T*b.height):a==="yAxis"&&(T=k==="left"&&!P||k==="right"&&P,$=d[j]-T*b.width,E=n.top);var q=_i(_i(_i({},b),K),{},{realScaleType:te,x:$,y:E,scale:Z,width:a==="xAxis"?n.width:b.width,height:a==="yAxis"?n.height:b.height});return q.bandSize=jh(q,K),!b.hide&&a==="xAxis"?d[j]+=(T?-1:1)*q.height:b.hide||(d[j]+=(T?-1:1)*q.width),_i(_i({},m),{},eg({},x,q))},{})},$C=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},BQ=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return $C({x:r,y:n},{x:a,y:i})},DC=function(){function e(t){IQ(this,e),this.scale=t}return LQ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();eg(DC,"EPS",1e-4);var jb=function(t){var r=Object.keys(t).reduce(function(n,a){return _i(_i({},n),{},eg({},a,DC.create(t[a])))},{});return _i(_i({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return oQ(a,function(c,u){return r[u].apply(c,{bandAware:o,position:s})})},isInRange:function(a){return OC(a,function(i,o){return r[o].isInRange(i)})}})};function zQ(e){return(e%180+180)%180}var UQ=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=zQ(a),o=i*Math.PI/180,s=Math.atan(n/r),c=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},GQ=ys,WQ=ad,VQ=Fp;function HQ(e){return function(t,r,n){var a=Object(t);if(!WQ(t)){var i=GQ(r);t=VQ(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var XQ=HQ,KQ=_C;function qQ(e){var t=KQ(e),r=t%1;return t===t?r?t-r:t:0}var YQ=qQ,ZQ=V_,QQ=ys,JQ=YQ,eJ=Math.max;function tJ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:JQ(r);return a<0&&(a=eJ(n+a,0)),ZQ(e,QQ(t),a)}var rJ=tJ,nJ=XQ,aJ=rJ,iJ=nJ(aJ),oJ=iJ;const sJ=Br(oJ);var lJ=H8(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),_b=C.createContext(void 0),Pb=C.createContext(void 0),RC=C.createContext(void 0),IC=C.createContext({}),LC=C.createContext(void 0),FC=C.createContext(0),BC=C.createContext(0),E5=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,c=t.width,u=t.height,f=lJ(i);return Q.createElement(_b.Provider,{value:n},Q.createElement(Pb.Provider,{value:a},Q.createElement(IC.Provider,{value:i},Q.createElement(RC.Provider,{value:f},Q.createElement(LC.Provider,{value:o},Q.createElement(FC.Provider,{value:u},Q.createElement(BC.Provider,{value:c},s)))))))},cJ=function(){return C.useContext(LC)},zC=function(t){var r=C.useContext(_b);r==null&&dl();var n=r[t];return n==null&&dl(),n},uJ=function(){var t=C.useContext(_b);return zo(t)},fJ=function(){var t=C.useContext(Pb),r=sJ(t,function(n){return OC(n.domain,Number.isFinite)});return r||zo(t)},UC=function(t){var r=C.useContext(Pb);r==null&&dl();var n=r[t];return n==null&&dl(),n},dJ=function(){var t=C.useContext(RC);return t},hJ=function(){return C.useContext(IC)},Cb=function(){return C.useContext(BC)},Nb=function(){return C.useContext(FC)};function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function pJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WC(n.key),n)}}function mJ(e,t,r){return t&&gJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yJ(e,t,r){return t=Fh(t),vJ(e,GC()?Reflect.construct(t,r||[],Fh(e).constructor):t.apply(e,r))}function vJ(e,t){if(t&&(Oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xJ(e)}function xJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GC=function(){return!!e})()}function Fh(e){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fh(e)}function bJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qv(e,t)}function Qv(e,t){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qv(e,t)}function $5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(r),!0).forEach(function(n){Ob(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ob(e,t,r){return t=WC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WC(e){var t=wJ(e,"string");return Oc(t)=="symbol"?t:t+""}function wJ(e,t){if(Oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kJ(e,t){return PJ(e)||_J(e,t)||jJ(e,t)||SJ()}function SJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jJ(e,t){if(e){if(typeof e=="string")return R5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R5(e,t)}}function R5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _J(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function PJ(e){if(Array.isArray(e))return e}function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jv.apply(this,arguments)}var CJ=function(t,r){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,r):$t(t)?n=t(r):n=Q.createElement("line",Jv({},r,{className:"recharts-reference-line-line"})),n},NJ=function(t,r,n,a,i,o,s,c,u){var f=i.x,d=i.y,p=i.width,m=i.height;if(n){var x=u.y,b=t.y.apply(x,{position:o});if(Zi(u,"discard")&&!t.y.isInRange(b))return null;var k=[{x:f+p,y:b},{x:f,y:b}];return c==="left"?k.reverse():k}if(r){var v=u.x,y=t.x.apply(v,{position:o});if(Zi(u,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:d+m},{x:y,y:d}];return s==="top"?w.reverse():w}if(a){var P=u.segment,S=P.map(function(j){return t.apply(j,{position:o})});return Zi(u,"discard")&&QZ(S,function(j){return!t.isInRange(j)})?null:S}return null};function OJ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,c=e.alwaysShow,u=cJ(),f=zC(a),d=UC(i),p=dJ();if(!u||!p)return null;xo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=jb({x:f.scale,y:d.scale}),x=Wn(t),b=Wn(r),k=n&&n.length===2,v=NJ(m,x,b,k,p,e.position,f.orientation,d.orientation,e);if(!v)return null;var y=kJ(v,2),w=y[0],P=w.x,S=w.y,j=y[1],O=j.x,A=j.y,$=Zi(e,"hidden")?"url(#".concat(u,")"):void 0,E=D5(D5({clipPath:$},Tt(e,!0)),{},{x1:P,y1:S,x2:O,y2:A});return Q.createElement(vr,{className:er("recharts-reference-line",s)},CJ(o,E),ia.renderCallByParent(e,BQ({x1:P,y1:S,x2:O,y2:A})))}var Yo=function(e){function t(){return pJ(this,t),yJ(this,t,arguments)}return bJ(t,e),mJ(t,[{key:"render",value:function(){return Q.createElement(OJ,this.props)}}])}(Q.Component);Ob(Yo,"displayName","ReferenceLine");Ob(Yo,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(this,arguments)}function Mc(e){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(e)}function I5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(r),!0).forEach(function(n){tg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HC(n.key),n)}}function TJ(e,t,r){return t&&AJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EJ(e,t,r){return t=Bh(t),$J(e,VC()?Reflect.construct(t,r||[],Bh(e).constructor):t.apply(e,r))}function $J(e,t){if(t&&(Mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DJ(e)}function DJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VC=function(){return!!e})()}function Bh(e){return Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bh(e)}function RJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tx(e,t)}function tx(e,t){return tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tx(e,t)}function tg(e,t,r){return t=HC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HC(e){var t=IJ(e,"string");return Mc(t)=="symbol"?t:t+""}function IJ(e,t){if(Mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var LJ=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=jb({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return Zi(t,"discard")&&!o.isInRange(s)?null:s},ud=function(e){function t(){return MJ(this,t),EJ(this,t,arguments)}return RJ(t,e),TJ(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,c=n.clipPathId,u=Wn(a),f=Wn(i);if(xo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=LJ(this.props);if(!d)return null;var p=d.x,m=d.y,x=this.props,b=x.shape,k=x.className,v=Zi(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=L5(L5({clipPath:v},Tt(this.props,!0)),{},{cx:p,cy:m});return Q.createElement(vr,{className:er("recharts-reference-dot",k)},t.renderDot(b,y),ia.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])}(Q.Component);tg(ud,"displayName","ReferenceDot");tg(ud,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});tg(ud,"renderDot",function(e,t){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,t):$t(e)?r=e(t):r=Q.createElement(Zp,ex({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rx.apply(this,arguments)}function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function F5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(r),!0).forEach(function(n){rg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KC(n.key),n)}}function zJ(e,t,r){return t&&BJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UJ(e,t,r){return t=zh(t),GJ(e,XC()?Reflect.construct(t,r||[],zh(e).constructor):t.apply(e,r))}function GJ(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WJ(e)}function WJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XC=function(){return!!e})()}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zh(e)}function VJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nx(e,t)}function nx(e,t){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nx(e,t)}function rg(e,t,r){return t=KC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KC(e){var t=HJ(e,"string");return Ac(t)=="symbol"?t:t+""}function HJ(e,t){if(Ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var XJ=function(t,r,n,a,i){var o=i.x1,s=i.x2,c=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var p=jb({x:f.scale,y:d.scale}),m={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},x={x:r?p.x.apply(s,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Zi(i,"discard")&&(!p.isInRange(m)||!p.isInRange(x))?null:$C(m,x)},fd=function(e){function t(){return FJ(this,t),UJ(this,t,arguments)}return VJ(t,e),zJ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;xo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Wn(a),p=Wn(i),m=Wn(o),x=Wn(s),b=this.props.shape;if(!d&&!p&&!m&&!x&&!b)return null;var k=XJ(d,p,m,x,this.props);if(!k&&!b)return null;var v=Zi(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Q.createElement(vr,{className:er("recharts-reference-area",c)},t.renderRect(b,B5(B5({clipPath:v},Tt(this.props,!0)),k)),ia.renderCallByParent(this.props,k))}}])}(Q.Component);rg(fd,"displayName","ReferenceArea");rg(fd,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});rg(fd,"renderRect",function(e,t){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,t):$t(e)?r=e(t):r=Q.createElement(kb,rx({},t,{className:"recharts-reference-area-rect"})),r});function qC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function KJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return UQ(n,r)}function qJ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function Uh(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function YJ(e,t){return qC(e,t+1)}function ZJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,c=0,u=1,f=o,d=function(){var x=n==null?void 0:n[c];if(x===void 0)return{v:qC(n,u)};var b=c,k,v=function(){return k===void 0&&(k=r(x,b)),k},y=x.coordinate,w=c===0||Uh(e,y,v,f,s);w||(c=0,f=o,u+=1),w&&(f=y+e*(v()/2+a),c+=u)},p;u<=i.length;)if(p=d(),p)return p.v;return[]}function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function z5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(r),!0).forEach(function(n){QJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QJ(e,t,r){return t=JJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJ(e){var t=eee(e,"string");return qf(t)=="symbol"?t:t+""}function eee(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tee(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,c=t.end,u=function(p){var m=i[p],x,b=function(){return x===void 0&&(x=r(m,p)),x};if(p===o-1){var k=e*(m.coordinate+e*b()/2-c);i[p]=m=ga(ga({},m),{},{tickCoord:k>0?m.coordinate-k*e:m.coordinate})}else i[p]=m=ga(ga({},m),{},{tickCoord:m.coordinate});var v=Uh(e,m.tickCoord,b,s,c);v&&(c=m.tickCoord-e*(b()/2+a),i[p]=ga(ga({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function ree(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,c=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),p=e*(f.coordinate+e*d/2-u);o[s-1]=f=ga(ga({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var m=Uh(e,f.tickCoord,function(){return d},c,u);m&&(u=f.tickCoord-e*(d/2+a),o[s-1]=ga(ga({},f),{},{isShow:!0}))}for(var x=i?s-1:s,b=function(y){var w=o[y],P,S=function(){return P===void 0&&(P=r(w,y)),P};if(y===0){var j=e*(w.coordinate-e*S()/2-c);o[y]=w=ga(ga({},w),{},{tickCoord:j<0?w.coordinate-j*e:w.coordinate})}else o[y]=w=ga(ga({},w),{},{tickCoord:w.coordinate});var O=Uh(e,w.tickCoord,S,c,u);O&&(c=w.tickCoord+e*(S()/2+a),o[y]=ga(ga({},w),{},{isShow:!0}))},k=0;k<x;k++)b(k);return o}function Mb(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(Ee(c)||vs.isSsr)return YJ(a,typeof c=="number"&&Ee(c)?c:0);var p=[],m=s==="top"||s==="bottom"?"width":"height",x=f&&m==="width"?Gu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=function(w,P){var S=$t(u)?u(w.value,P):w.value;return m==="width"?KJ(Gu(S,{fontSize:t,letterSpacing:r}),x,d):Gu(S,{fontSize:t,letterSpacing:r})[m]},k=a.length>=2?Mi(a[1].coordinate-a[0].coordinate):1,v=qJ(i,k,m);return c==="equidistantPreserveStart"?ZJ(k,v,b,a,o):(c==="preserveStart"||c==="preserveStartEnd"?p=ree(k,v,b,a,o,c==="preserveStartEnd"):p=tee(k,v,b,a,o),p.filter(function(y){return y.isShow}))}var nee=["viewBox"],aee=["viewBox"],iee=["ticks"];function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function Kl(){return Kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kl.apply(this,arguments)}function U5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(r),!0).forEach(function(n){Ab(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Im(e,t){if(e==null)return{};var r=oee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function see(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZC(n.key),n)}}function lee(e,t,r){return t&&G5(e.prototype,t),r&&G5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cee(e,t,r){return t=Gh(t),uee(e,YC()?Reflect.construct(t,r||[],Gh(e).constructor):t.apply(e,r))}function uee(e,t){if(t&&(Tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fee(e)}function fee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YC=function(){return!!e})()}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gh(e)}function dee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ax(e,t)}function ax(e,t){return ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ax(e,t)}function Ab(e,t,r){return t=ZC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZC(e){var t=hee(e,"string");return Tc(t)=="symbol"?t:t+""}function hee(e,t){if(Tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iu=function(e){function t(r){var n;return see(this,t),n=cee(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return dee(t,e),lee(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Im(n,nee),s=this.props,c=s.viewBox,u=Im(s,aee);return!nc(i,c)||!nc(o,u)||!nc(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,c=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,p=a.tickMargin,m,x,b,k,v,y,w=d?-1:1,P=n.tickSize||f,S=Ee(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=x=n.coordinate,k=o+ +!d*c,b=k-w*P,y=b-w*p,v=S;break;case"left":b=k=n.coordinate,x=i+ +!d*s,m=x-w*P,v=m-w*p,y=S;break;case"right":b=k=n.coordinate,x=i+ +d*s,m=x+w*P,v=m+w*p,y=S;break;default:m=x=n.coordinate,k=o+ +d*c,b=k+w*P,y=b+w*p,v=S;break}return{line:{x1:m,y1:b,x2:x,y2:k},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=Fn(Fn(Fn({},Tt(this.props,!1)),Tt(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);d=Fn(Fn({},d),{},{x1:a,y1:i+p*s,x2:a+o,y2:i+p*s})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=Fn(Fn({},d),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+s})}return Q.createElement("line",Kl({},d,{className:er("recharts-cartesian-axis-line",di(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,c=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,p=s.unit,m=Mb(Fn(Fn({},this.props),{},{ticks:n}),a,i),x=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),k=Tt(this.props,!1),v=Tt(f,!1),y=Fn(Fn({},k),{},{fill:"none"},Tt(c,!1)),w=m.map(function(P,S){var j=o.getTickLineCoord(P),O=j.line,A=j.tick,$=Fn(Fn(Fn(Fn({textAnchor:x,verticalAnchor:b},k),{},{stroke:"none",fill:u},v),A),{},{index:S,payload:P,visibleTicksCount:m.length,tickFormatter:d});return Q.createElement(vr,Kl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},mf(o.props,P,S)),c&&Q.createElement("line",Kl({},y,O,{className:er("recharts-cartesian-axis-tick-line",di(c,"className"))})),f&&t.renderTickItem(f,$,"".concat($t(d)?d(P.value,S):P.value).concat(p||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,p=d.ticks,m=Im(d,iee),x=p;return $t(c)&&(x=p&&p.length>0?c(this.props):c(m)),o<=0||s<=0||!x||!x.length?null:Q.createElement(vr,{className:er("recharts-cartesian-axis",u),ref:function(k){n.layerReference=k}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),ia.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=er(a.className,"recharts-cartesian-axis-tick-value");return Q.isValidElement(n)?o=Q.cloneElement(n,Fn(Fn({},a),{},{className:s})):$t(n)?o=n(Fn(Fn({},a),{},{className:s})):o=Q.createElement(ch,Kl({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(C.Component);Ab(iu,"displayName","CartesianAxis");Ab(iu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var pee=["x1","y1","x2","y2","key"],gee=["offset"];function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function W5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(r),!0).forEach(function(n){mee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mee(e,t,r){return t=yee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yee(e){var t=vee(e,"string");return hl(t)=="symbol"?t:t+""}function vee(e,t){if(hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ws.apply(this,arguments)}function V5(e,t){if(e==null)return{};var r=xee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var bee=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,c=t.ry;return Q.createElement("rect",{x:a,y:i,ry:c,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function QC(e,t){var r;if(Q.isValidElement(e))r=Q.cloneElement(e,t);else if($t(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,c=V5(t,pee),u=Tt(c,!1);u.offset;var f=V5(u,gee);r=Q.createElement("line",Ws({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function wee(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,c){var u=ya(ya({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(c),index:c});return QC(a,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function kee(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,c){var u=ya(ya({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(c),index:c});return QC(a,u)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function See(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=s.map(function(p){return Math.round(p+a-a)}).sort(function(p,m){return p-m});a!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var x=!f[m+1],b=x?a+o-p:f[m+1]-p;if(b<=0)return null;var k=m%t.length;return Q.createElement("rect",{key:"react-".concat(m),y:p,x:n,height:b,width:i,stroke:"none",fill:t[k],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function jee(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==f[0]&&f.unshift(0);var d=f.map(function(p,m){var x=!f[m+1],b=x?i+s-p:f[m+1]-p;if(b<=0)return null;var k=m%n.length;return Q.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:b,height:c,stroke:"none",fill:n[k],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var _ee=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return lC(Mb(ya(ya(ya({},iu.defaultProps),n),{},{ticks:mo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},Pee=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return lC(Mb(ya(ya(ya({},iu.defaultProps),n),{},{ticks:mo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},El={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ai(e){var t,r,n,a,i,o,s=Cb(),c=Nb(),u=hJ(),f=ya(ya({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:El.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:El.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:El.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:El.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:El.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:El.verticalFill,x:Ee(e.x)?e.x:u.left,y:Ee(e.y)?e.y:u.top,width:Ee(e.width)?e.width:u.width,height:Ee(e.height)?e.height:u.height}),d=f.x,p=f.y,m=f.width,x=f.height,b=f.syncWithTicks,k=f.horizontalValues,v=f.verticalValues,y=uJ(),w=fJ();if(!Ee(m)||m<=0||!Ee(x)||x<=0||!Ee(d)||d!==+d||!Ee(p)||p!==+p)return null;var P=f.verticalCoordinatesGenerator||_ee,S=f.horizontalCoordinatesGenerator||Pee,j=f.horizontalPoints,O=f.verticalPoints;if((!j||!j.length)&&$t(S)){var A=k&&k.length,$=S({yAxis:w?ya(ya({},w),{},{ticks:A?k:w.ticks}):void 0,width:s,height:c,offset:u},A?!0:b);xo(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(hl($),"]")),Array.isArray($)&&(j=$)}if((!O||!O.length)&&$t(P)){var E=v&&v.length,T=P({xAxis:y?ya(ya({},y),{},{ticks:E?v:y.ticks}):void 0,width:s,height:c,offset:u},E?!0:b);xo(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(hl(T),"]")),Array.isArray(T)&&(O=T)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(bee,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Q.createElement(wee,Ws({},f,{offset:u,horizontalPoints:j,xAxis:y,yAxis:w})),Q.createElement(kee,Ws({},f,{offset:u,verticalPoints:O,xAxis:y,yAxis:w})),Q.createElement(See,Ws({},f,{horizontalPoints:j})),Q.createElement(jee,Ws({},f,{verticalPoints:O})))}Ai.displayName="CartesianGrid";var Cee=["type","layout","connectNulls","ref"],Nee=["key"];function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}function H5(e,t){if(e==null)return{};var r=Oee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xu.apply(this,arguments)}function X5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X5(Object(r),!0).forEach(function(n){Pi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $l(e){return Eee(e)||Tee(e)||Aee(e)||Mee()}function Mee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aee(e,t){if(e){if(typeof e=="string")return ix(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ix(e,t)}}function Tee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eee(e){if(Array.isArray(e))return ix(e)}function ix(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eN(n.key),n)}}function Dee(e,t,r){return t&&K5(e.prototype,t),r&&K5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ree(e,t,r){return t=Wh(t),Iee(e,JC()?Reflect.construct(t,r||[],Wh(e).constructor):t.apply(e,r))}function Iee(e,t){if(t&&(Ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lee(e)}function Lee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JC=function(){return!!e})()}function Wh(e){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wh(e)}function Fee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ox(e,t)}function ox(e,t){return ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ox(e,t)}function Pi(e,t,r){return t=eN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eN(e){var t=Bee(e,"string");return Ec(t)=="symbol"?t:t+""}function Bee(e,t){if(Ec(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sn=function(e){function t(){var r;$ee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Ree(this,t,[].concat(a)),Pi(r,"state",{isAnimationFinished:!0,totalLength:0}),Pi(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),Pi(r,"getStrokeDasharray",function(o,s,c){var u=c.reduce(function(v,y){return v+y});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,p=s-o,m=[],x=0,b=0;x<c.length;b+=c[x],++x)if(b+c[x]>d){m=[].concat($l(c.slice(0,x)),[d-b]);break}var k=m.length%2===0?[0,p]:[p];return[].concat($l(t.repeat(c,f)),$l(m),k).map(function(v){return"".concat(v,"px")}).join(", ")}),Pi(r,"id",xl("recharts-line-")),Pi(r,"pathRef",function(o){r.mainCurve=o}),Pi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Pi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Fee(t,e),Dee(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Fa(f,au);if(!d)return null;var p=function(b,k){return{x:b.x,y:b.y,value:b.value,errorVal:Vn(b.payload,k)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Q.createElement(vr,m,d.map(function(x){return Q.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:s,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.dot,u=s.points,f=s.dataKey,d=Tt(this.props,!1),p=Tt(c,!0),m=u.map(function(b,k){var v=za(za(za({key:"dot-".concat(k),r:3},d),p),{},{index:k,cx:b.x,cy:b.y,value:b.value,dataKey:f,payload:b.payload,points:u});return t.renderDotItem(c,v)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Q.createElement(vr,Xu({className:"recharts-line-dots",key:"dots"},x),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,c=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=H5(s,Cee),p=za(za(za({},Tt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:f});return Q.createElement(Zs,Xu({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,c=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,x=o.animateNewValues,b=o.width,k=o.height,v=this.state,y=v.prevPoints,w=v.totalLength;return Q.createElement(Di,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var S=P.t;if(y){var j=y.length/s.length,O=s.map(function(B,U){var F=Math.floor(U*j);if(y[F]){var G=y[F],z=Nn(G.x,B.x),I=Nn(G.y,B.y);return za(za({},B),{},{x:z(S),y:I(S)})}if(x){var L=Nn(b*2,B.x),H=Nn(k/2,B.y);return za(za({},B),{},{x:L(S),y:H(S)})}return za(za({},B),{},{x:B.x,y:B.y})});return i.renderCurveStatically(O,n,a)}var A=Nn(0,w),$=A(S),E;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(B){return parseFloat(B)});E=i.getStrokeDasharray($,w,T)}else E=i.generateSimpleStrokeDasharray(w,$);return i.renderCurveStatically(s,n,a,{strokeDasharray:E})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return s&&o&&o.length&&(!u&&f>0||!ul(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,c=a.className,u=a.xAxis,f=a.yAxis,d=a.top,p=a.left,m=a.width,x=a.height,b=a.isAnimationActive,k=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,w=er("recharts-line",c),P=u&&u.allowDataOverflow,S=f&&f.allowDataOverflow,j=P||S,O=Ot(k)?this.id:k,A=(n=Tt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},$=A.r,E=$===void 0?3:$,T=A.strokeWidth,B=T===void 0?2:T,U=r_(o)?o:{},F=U.clipDot,G=F===void 0?!0:F,z=E*2+B;return Q.createElement(vr,{className:w},P||S?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(O)},Q.createElement("rect",{x:P?p:p-m/2,y:S?d:d-x/2,width:P?m:m*2,height:S?x:x*2})),!G&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(O)},Q.createElement("rect",{x:p-z/2,y:d-z/2,width:m+z,height:x+z}))):null,!y&&this.renderCurve(j,O),this.renderErrorBar(j,O),(y||o)&&this.renderDots(j,G,O),(!b||v)&&Yi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat($l(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat($l(o),$l(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(Q.isValidElement(n))i=Q.cloneElement(n,a);else if($t(n))i=n(a);else{var o=a.key,s=H5(a,Nee),c=er("recharts-line-dot",typeof n!="boolean"?n.className:"");i=Q.createElement(Zp,Xu({key:o},s,{className:c}))}return i}}])}(C.PureComponent);Pi(Sn,"displayName","Line");Pi(Sn,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!vs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Pi(Sn,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,c=e.displayedData,u=e.offset,f=t.layout,d=c.map(function(p,m){var x=Vn(p,o);return f==="horizontal"?{x:jc({axis:r,ticks:a,bandSize:s,entry:p,index:m}),y:Ot(x)?null:n.scale(x),value:x,payload:p}:{x:Ot(x)?null:r.scale(x),y:jc({axis:n,ticks:i,bandSize:s,entry:p,index:m}),value:x,payload:p}});return za({points:d,layout:f},u)});var zee=["layout","type","stroke","connectNulls","isRange","ref"],Uee=["key"],tN;function $c(e){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c(e)}function rN(e,t){if(e==null)return{};var r=Gee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vs.apply(this,arguments)}function q5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Do(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q5(Object(r),!0).forEach(function(n){Vi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aN(n.key),n)}}function Vee(e,t,r){return t&&Y5(e.prototype,t),r&&Y5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hee(e,t,r){return t=Vh(t),Xee(e,nN()?Reflect.construct(t,r||[],Vh(e).constructor):t.apply(e,r))}function Xee(e,t){if(t&&($c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kee(e)}function Kee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nN=function(){return!!e})()}function Vh(e){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vh(e)}function qee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sx(e,t)}function sx(e,t){return sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sx(e,t)}function Vi(e,t,r){return t=aN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aN(e){var t=Yee(e,"string");return $c(t)=="symbol"?t:t+""}function Yee(e,t){if($c(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ui=function(e){function t(){var r;Wee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Hee(this,t,[].concat(a)),Vi(r,"state",{isAnimationFinished:!0}),Vi(r,"id",xl("recharts-area-")),Vi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),$t(o)&&o()}),Vi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),$t(o)&&o()}),r}return qee(t,e),Vee(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var c=this.props,u=c.dot,f=c.points,d=c.dataKey,p=Tt(this.props,!1),m=Tt(u,!0),x=f.map(function(k,v){var y=Do(Do(Do({key:"dot-".concat(v),r:3},p),m),{},{index:v,cx:k.x,cy:k.y,dataKey:d,value:k.value,payload:k.payload,points:f});return t.renderDotItem(u,y)}),b={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Q.createElement(vr,Vs({className:"recharts-area-dots"},b),x)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=n*Math.abs(c-u),d=Ko(o.map(function(p){return p.y||0}));return Ee(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Ko(i.map(function(p){return p.y||0})),d)),Ee(d)?Q.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=n*Math.abs(c-u),d=Ko(o.map(function(p){return p.x||0}));return Ee(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Ko(i.map(function(p){return p.x||0})),d)),Ee(d)?Q.createElement("rect",{x:0,y:c<u?c:c-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,c=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,p=s.isRange;s.ref;var m=rN(s,zee);return Q.createElement(vr,{clipPath:i?"url(#clipPath-".concat(o,")"):null},Q.createElement(Zs,Vs({},Tt(m,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Q.createElement(Zs,Vs({},Tt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&p&&Q.createElement(Zs,Vs({},Tt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,p=o.animationEasing,m=o.animationId,x=this.state,b=x.prevPoints,k=x.prevBaseLine;return Q.createElement(Di,{begin:f,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t;if(b){var w=b.length/s.length,P=s.map(function(A,$){var E=Math.floor($*w);if(b[E]){var T=b[E],B=Nn(T.x,A.x),U=Nn(T.y,A.y);return Do(Do({},A),{},{x:B(y),y:U(y)})}return A}),S;if(Ee(c)&&typeof c=="number"){var j=Nn(k,c);S=j(y)}else if(Ot(c)||Zc(c)){var O=Nn(k,0);S=O(y)}else S=c.map(function(A,$){var E=Math.floor($*w);if(k[E]){var T=k[E],B=Nn(T.x,A.x),U=Nn(T.y,A.y);return Do(Do({},A),{},{x:B(y),y:U(y)})}return A});return i.renderAreaStatically(P,S,n,a)}return Q.createElement(vr,null,Q.createElement("defs",null,Q.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),Q.createElement(vr,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,c=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,p=u.totalLength;return c&&o&&o.length&&(!f&&p>0||!ul(f,o)||!ul(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,c=a.className,u=a.top,f=a.left,d=a.xAxis,p=a.yAxis,m=a.width,x=a.height,b=a.isAnimationActive,k=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,w=er("recharts-area",c),P=d&&d.allowDataOverflow,S=p&&p.allowDataOverflow,j=P||S,O=Ot(k)?this.id:k,A=(n=Tt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},$=A.r,E=$===void 0?3:$,T=A.strokeWidth,B=T===void 0?2:T,U=r_(o)?o:{},F=U.clipDot,G=F===void 0?!0:F,z=E*2+B;return Q.createElement(vr,{className:w},P||S?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(O)},Q.createElement("rect",{x:P?f:f-m/2,y:S?u:u-x/2,width:P?m:m*2,height:S?x:x*2})),!G&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(O)},Q.createElement("rect",{x:f-z/2,y:u-z/2,width:m+z,height:x+z}))):null,y?null:this.renderArea(j,O),(o||y)&&this.renderDots(j,G,O),(!b||v)&&Yi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(C.PureComponent);tN=ui;Vi(ui,"displayName","Area");Vi(ui,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!vs.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Vi(ui,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(Ee(s)&&typeof s=="number")return s;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Vi(ui,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,c=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,p=e.offset,m=t.layout,x=u&&u.length,b=tN.getBaseValue(t,r,n,a),k=m==="horizontal",v=!1,y=d.map(function(P,S){var j;x?j=u[f+S]:(j=Vn(P,c),Array.isArray(j)?v=!0:j=[b,j]);var O=j[1]==null||x&&Vn(P,c)==null;return k?{x:jc({axis:n,ticks:i,bandSize:s,entry:P,index:S}),y:O?null:a.scale(j[1]),value:j,payload:P}:{x:O?null:n.scale(j[1]),y:jc({axis:a,ticks:o,bandSize:s,entry:P,index:S}),value:j,payload:P}}),w;return x||v?w=y.map(function(P){var S=Array.isArray(P.value)?P.value[0]:null;return k?{x:P.x,y:S!=null&&P.y!=null?a.scale(S):null}:{x:S!=null?n.scale(S):null,y:P.y}}):w=k?a.scale(b):n.scale(b),Do({points:y,baseLine:w,layout:m,isRange:v},p)});Vi(ui,"renderDotItem",function(e,t){var r;if(Q.isValidElement(e))r=Q.cloneElement(e,t);else if($t(e))r=e(t);else{var n=er("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=rN(t,Uee);r=Q.createElement(Zp,Vs({},i,{key:a,className:n}))}return r});function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function Zee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sN(n.key),n)}}function Jee(e,t,r){return t&&Qee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ete(e,t,r){return t=Hh(t),tte(e,iN()?Reflect.construct(t,r||[],Hh(e).constructor):t.apply(e,r))}function tte(e,t){if(t&&(Dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rte(e)}function rte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iN=function(){return!!e})()}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hh(e)}function nte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lx(e,t)}function lx(e,t){return lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lx(e,t)}function oN(e,t,r){return t=sN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sN(e){var t=ate(e,"string");return Dc(t)=="symbol"?t:t+""}function ate(e,t){if(Dc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ng=function(e){function t(){return Zee(this,t),ete(this,t,arguments)}return nte(t,e),Jee(t,[{key:"render",value:function(){return null}}])}(C.Component);oN(ng,"displayName","ZAxis");oN(ng,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ite=["option","isActive"];function Ku(){return Ku=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ku.apply(this,arguments)}function ote(e,t){if(e==null)return{};var r=ste(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ste(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lte(e){var t=e.option,r=e.isActive,n=ote(e,ite);return typeof t=="string"?C.createElement(Kv,Ku({option:C.createElement(Lp,Ku({type:t},n)),isActive:r,shapeType:"symbols"},n)):C.createElement(Kv,Ku({option:t,isActive:r,shapeType:"symbols"},n))}function Rc(e){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qu.apply(this,arguments)}function Z5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(r),!0).forEach(function(n){Zo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cN(n.key),n)}}function ute(e,t,r){return t&&Q5(e.prototype,t),r&&Q5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fte(e,t,r){return t=Xh(t),dte(e,lN()?Reflect.construct(t,r||[],Xh(e).constructor):t.apply(e,r))}function dte(e,t){if(t&&(Rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hte(e)}function hte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lN=function(){return!!e})()}function Xh(e){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xh(e)}function pte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cx(e,t)}function cx(e,t){return cx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cx(e,t)}function Zo(e,t,r){return t=cN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cN(e){var t=gte(e,"string");return Rc(t)=="symbol"?t:t+""}function gte(e,t){if(Rc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ka=function(e){function t(){var r;cte(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=fte(this,t,[].concat(a)),Zo(r,"state",{isAnimationFinished:!1}),Zo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Zo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Zo(r,"id",xl("recharts-scatter-")),r}return pte(t,e),ute(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,c=i.activeIndex,u=Tt(this.props,!1);return n.map(function(f,d){var p=c===d,m=p?s:o,x=ii(ii({},u),f);return Q.createElement(vr,qu({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},mf(a.props,f,d),{role:"img"}),Q.createElement(lte,qu({option:m,isActive:p,key:"symbol-".concat(d)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,c=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return Q.createElement(Di,{begin:s,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,x=i.map(function(b,k){var v=d&&d[k];if(v){var y=Nn(v.cx,b.cx),w=Nn(v.cy,b.cy),P=Nn(v.size,b.size);return ii(ii({},b),{},{cx:y(m),cy:w(m),size:P(m)})}var S=Nn(0,b.size);return ii(ii({},b),{},{size:S(m)})});return Q.createElement(vr,null,n.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!ul(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,c=a.children,u=Fa(c,au);return u?u.map(function(f,d){var p=f.props,m=p.direction,x=p.dataKey;return Q.cloneElement(f,{key:"".concat(m,"-").concat(x,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(k,v){return{x:k.cx,y:k.cy,value:m==="x"?+k.node.x:+k.node.y,errorVal:Vn(k,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,c=Tt(this.props,!1),u=Tt(i,!1),f,d;if(o==="joint")f=a.map(function(w){return{x:w.cx,y:w.cy}});else if(o==="fitting"){var p=GE(a),m=p.xmin,x=p.xmax,b=p.a,k=p.b,v=function(P){return b*P+k};f=[{x:m,y:v(m)},{x,y:v(x)}]}var y=ii(ii(ii({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:f});return Q.isValidElement(i)?d=Q.cloneElement(i,y):$t(i)?d=i(y):d=Q.createElement(Zs,qu({},y,{type:s})),Q.createElement(vr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,c=n.xAxis,u=n.yAxis,f=n.left,d=n.top,p=n.width,m=n.height,x=n.id,b=n.isAnimationActive;if(a||!i||!i.length)return null;var k=this.state.isAnimationFinished,v=er("recharts-scatter",s),y=c&&c.allowDataOverflow,w=u&&u.allowDataOverflow,P=y||w,S=Ot(x)?this.id:x;return Q.createElement(vr,{className:v,clipPath:P?"url(#clipPath-".concat(S,")"):null},y||w?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(S)},Q.createElement("rect",{x:y?f:f-p/2,y:w?d:d-m/2,width:y?p:p*2,height:w?m:m*2}))):null,o&&this.renderLine(),this.renderErrorBar(),Q.createElement(vr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!b||k)&&Yi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(C.PureComponent);Zo(ka,"displayName","Scatter");Zo(ka,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!vs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Zo(ka,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,c=e.offset,u=a.props.tooltipType,f=Fa(a.props.children,Y1),d=Ot(t.dataKey)?a.props.dataKey:t.dataKey,p=Ot(r.dataKey)?a.props.dataKey:r.dataKey,m=n&&n.dataKey,x=n?n.range:ng.defaultProps.range,b=x&&x[0],k=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,y=i.map(function(w,P){var S=Vn(w,d),j=Vn(w,p),O=!Ot(m)&&Vn(w,m)||"-",A=[{name:Ot(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:S,payload:w,dataKey:d,type:u},{name:Ot(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:j,payload:w,dataKey:p,type:u}];O!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:O,payload:w,dataKey:m,type:u});var $=jc({axis:t,ticks:o,bandSize:k,entry:w,index:P,dataKey:d}),E=jc({axis:r,ticks:s,bandSize:v,entry:w,index:P,dataKey:p}),T=O!=="-"?n.scale(O):b,B=Math.sqrt(Math.max(T,0)/Math.PI);return ii(ii({},w),{},{cx:$,cy:E,x:$-B,y:E-B,xAxis:t,yAxis:r,zAxis:n,width:2*B,height:2*B,size:T,node:{x:S,y:j,z:O},tooltipPayload:A,tooltipPosition:{x:$,y:E},payload:w},f&&f[P]&&f[P].props)});return ii({points:y},c)});function Ic(e){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function mte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dN(n.key),n)}}function vte(e,t,r){return t&&yte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xte(e,t,r){return t=Kh(t),bte(e,uN()?Reflect.construct(t,r||[],Kh(e).constructor):t.apply(e,r))}function bte(e,t){if(t&&(Ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wte(e)}function wte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uN=function(){return!!e})()}function Kh(e){return Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kh(e)}function kte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ux(e,t)}function ux(e,t){return ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ux(e,t)}function fN(e,t,r){return t=dN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dN(e){var t=Ste(e,"string");return Ic(t)=="symbol"?t:t+""}function Ste(e,t){if(Ic(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fx.apply(this,arguments)}function jte(e){var t=e.xAxisId,r=Cb(),n=Nb(),a=zC(t);return a==null?null:C.createElement(iu,fx({},a,{className:er("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return mo(o,!0)}}))}var _a=function(e){function t(){return mte(this,t),xte(this,t,arguments)}return kte(t,e),vte(t,[{key:"render",value:function(){return C.createElement(jte,this.props)}}])}(C.Component);fN(_a,"displayName","XAxis");fN(_a,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Lc(e){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(e)}function _te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gN(n.key),n)}}function Cte(e,t,r){return t&&Pte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nte(e,t,r){return t=qh(t),Ote(e,hN()?Reflect.construct(t,r||[],qh(e).constructor):t.apply(e,r))}function Ote(e,t){if(t&&(Lc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mte(e)}function Mte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hN=function(){return!!e})()}function qh(e){return qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qh(e)}function Ate(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dx(e,t)}function dx(e,t){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dx(e,t)}function pN(e,t,r){return t=gN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gN(e){var t=Tte(e,"string");return Lc(t)=="symbol"?t:t+""}function Tte(e,t){if(Lc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hx.apply(this,arguments)}var Ete=function(t){var r=t.yAxisId,n=Cb(),a=Nb(),i=UC(r);return i==null?null:C.createElement(iu,hx({},i,{className:er("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return mo(s,!0)}}))},Pa=function(e){function t(){return _te(this,t),Nte(this,t,arguments)}return Ate(t,e),Cte(t,[{key:"render",value:function(){return C.createElement(Ete,this.props)}}])}(C.Component);pN(Pa,"displayName","YAxis");pN(Pa,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function J5(e){return Ite(e)||Rte(e)||Dte(e)||$te()}function $te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dte(e,t){if(e){if(typeof e=="string")return px(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return px(e,t)}}function Rte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ite(e){if(Array.isArray(e))return px(e)}function px(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gx=function(t,r,n,a,i){var o=Fa(t,Yo),s=Fa(t,ud),c=[].concat(J5(o),J5(s)),u=Fa(t,fd),f="".concat(a,"Id"),d=a[0],p=r;if(c.length&&(p=c.reduce(function(b,k){if(k.props[f]===n&&Zi(k.props,"extendDomain")&&Ee(k.props[d])){var v=k.props[d];return[Math.min(b[0],v),Math.max(b[1],v)]}return b},p)),u.length){var m="".concat(d,"1"),x="".concat(d,"2");p=u.reduce(function(b,k){if(k.props[f]===n&&Zi(k.props,"extendDomain")&&Ee(k.props[m])&&Ee(k.props[x])){var v=k.props[m],y=k.props[x];return[Math.min(b[0],v,y),Math.max(b[1],v,y)]}return b},p)}return i&&i.length&&(p=i.reduce(function(b,k){return Ee(k)?[Math.min(b[0],k),Math.max(b[1],k)]:b},p)),p},mN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,d||c,p),x=r?r+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,m=d.length,x=new Array(m);p<m;p++)x[p]=d[p].fn;return x},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,p,m,x){var b=r?r+u:u;if(!this._events[b])return!1;var k=this._events[b],v=arguments.length,y,w;if(k.fn){switch(k.once&&this.removeListener(u,k.fn,void 0,!0),v){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,f),!0;case 3:return k.fn.call(k.context,f,d),!0;case 4:return k.fn.call(k.context,f,d,p),!0;case 5:return k.fn.call(k.context,f,d,p,m),!0;case 6:return k.fn.call(k.context,f,d,p,m,x),!0}for(w=1,y=new Array(v-1);w<v;w++)y[w-1]=arguments[w];k.fn.apply(k.context,y)}else{var P=k.length,S;for(w=0;w<P;w++)switch(k[w].once&&this.removeListener(u,k[w].fn,void 0,!0),v){case 1:k[w].fn.call(k[w].context);break;case 2:k[w].fn.call(k[w].context,f);break;case 3:k[w].fn.call(k[w].context,f,d);break;case 4:k[w].fn.call(k[w].context,f,d,p);break;default:if(!y)for(S=1,y=new Array(v-1);S<v;S++)y[S-1]=arguments[S];k[w].fn.apply(k[w].context,y)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,p){var m=r?r+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===f&&(!p||x.once)&&(!d||x.context===d)&&o(this,m);else{for(var b=0,k=[],v=x.length;b<v;b++)(x[b].fn!==f||p&&!x[b].once||d&&x[b].context!==d)&&k.push(x[b]);k.length?this._events[m]=k.length===1?k[0]:k:o(this,m)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(mN);var Lte=mN.exports;const Fte=Br(Lte);var Lm=new Fte,Fm="recharts.syncMouseEvents";function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function Bte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yN(n.key),n)}}function Ute(e,t,r){return t&&zte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bm(e,t,r){return t=yN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yN(e){var t=Gte(e,"string");return Yf(t)=="symbol"?t:t+""}function Gte(e,t){if(Yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wte=function(){function e(){Bte(this,e),Bm(this,"activeIndex",0),Bm(this,"coordinateList",[]),Bm(this,"layout","horizontal")}return Ute(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,p=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function Vte(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Ee(n)&&Ee(a))return!0}return!1}function Hte(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function vN(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=oa(t,r,n,a),s=oa(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Xte(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,p=oa(s,c,u,d),m=oa(s,c,f,d);n=p.x,a=p.y,i=m.x,o=m.y}else return vN(t);return[{x:n,y:a},{x:i,y:o}]}function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function e4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function e0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(r),!0).forEach(function(n){Kte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kte(e,t,r){return t=qte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qte(e){var t=Yte(e,"string");return Zf(t)=="symbol"?t:t+""}function Yte(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zte(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,p=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||p!=="ScatterChart"&&a!=="axis")return null;var x,b=Zs;if(p==="ScatterChart")x=o,b=SY;else if(p==="BarChart")x=Hte(d,o,c,f),b=kb;else if(d==="radial"){var k=vN(o),v=k.cx,y=k.cy,w=k.radius,P=k.startAngle,S=k.endAngle;x={cx:v,cy:y,startAngle:P,endAngle:S,innerRadius:w,outerRadius:w},b=hC}else x={points:Xte(d,o,c)},b=Zs;var j=e0(e0(e0(e0({stroke:"#ccc",pointerEvents:"none"},c),x),Tt(m,!1)),{},{payload:s,payloadIndex:u,className:er("recharts-tooltip-cursor",m.className)});return C.isValidElement(m)?C.cloneElement(m,j):C.createElement(b,j)}var Qte=["item"],Jte=["children","className","width","height","style","compact","title","desc"];function Fc(e){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(e)}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ql.apply(this,arguments)}function t4(e,t){return rre(e)||tre(e,t)||bN(e,t)||ere()}function ere(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function rre(e){if(Array.isArray(e))return e}function r4(e,t){if(e==null)return{};var r=nre(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function are(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ire(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wN(n.key),n)}}function ore(e,t,r){return t&&ire(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sre(e,t,r){return t=Yh(t),lre(e,xN()?Reflect.construct(t,r||[],Yh(e).constructor):t.apply(e,r))}function lre(e,t){if(t&&(Fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cre(e)}function cre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xN=function(){return!!e})()}function Yh(e){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yh(e)}function ure(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mx(e,t)}function mx(e,t){return mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mx(e,t)}function Bc(e){return hre(e)||dre(e)||bN(e)||fre()}function fre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bN(e,t){if(e){if(typeof e=="string")return yx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yx(e,t)}}function dre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hre(e){if(Array.isArray(e))return yx(e)}function yx(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n4(Object(r),!0).forEach(function(n){mt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mt(e,t,r){return t=wN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wN(e){var t=pre(e,"string");return Fc(t)=="symbol"?t:t+""}function pre(e,t){if(Fc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gre={xAxis:["bottom","top"],yAxis:["left","right"]},mre={width:"100%",height:"100%"},kN={x:0,y:0};function t0(e){return e}var yre=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},vre=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return xe(xe(xe({},a),oa(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var c=i.coordinate,u=a.angle;return xe(xe(xe({},a),oa(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return kN},ag=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,c){var u=c.props.data;return u&&u.length?[].concat(Bc(s),Bc(u)):s},[]);return o.length>0?o:t&&t.length&&Ee(a)&&Ee(i)?t.slice(a,i+1):[]};function SN(e){return e==="number"?[0,"auto"]:void 0}var vx=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=ag(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?s:d;p=K0(m,o.dataKey,a)}else p=d&&d[n]||s[n];return p?[].concat(Bc(c),[uC(u,p)]):c},[])},a4=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=yre(i,n),s=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=tX(o,s,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,p=vx(t,r,f,d),m=vre(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:p,activeCoordinate:m}}return null},xre=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=t.stackOffset,m=sC(f,i);return n.reduce(function(x,b){var k,v=b.type.defaultProps!==void 0?xe(xe({},b.type.defaultProps),b.props):b.props,y=v.type,w=v.dataKey,P=v.allowDataOverflow,S=v.allowDuplicatedCategory,j=v.scale,O=v.ticks,A=v.includeHidden,$=v[o];if(x[$])return x;var E=ag(t.data,{graphicalItems:a.filter(function(K){var q,J=o in K.props?K.props[o]:(q=K.type.defaultProps)===null||q===void 0?void 0:q[o];return J===$}),dataStartIndex:c,dataEndIndex:u}),T=E.length,B,U,F;Vte(v.domain,P,y)&&(B=Tv(v.domain,null,P),m&&(y==="number"||j!=="auto")&&(F=Vu(E,w,"category")));var G=SN(y);if(!B||B.length===0){var z,I=(z=v.domain)!==null&&z!==void 0?z:G;if(w){if(B=Vu(E,w,y),y==="category"&&m){var L=UE(B);S&&L?(U=B,B=$h(0,T)):S||(B=DS(I,B,b).reduce(function(K,q){return K.indexOf(q)>=0?K:[].concat(Bc(K),[q])},[]))}else if(y==="category")S?B=B.filter(function(K){return K!==""&&!Ot(K)}):B=DS(I,B,b).reduce(function(K,q){return K.indexOf(q)>=0||q===""||Ot(q)?K:[].concat(Bc(K),[q])},[]);else if(y==="number"){var H=oX(E,a.filter(function(K){var q,J,ve=o in K.props?K.props[o]:(q=K.type.defaultProps)===null||q===void 0?void 0:q[o],ie="hide"in K.props?K.props.hide:(J=K.type.defaultProps)===null||J===void 0?void 0:J.hide;return ve===$&&(A||!ie)}),w,i,f);H&&(B=H)}m&&(y==="number"||j!=="auto")&&(F=Vu(E,w,"category"))}else m?B=$h(0,T):s&&s[$]&&s[$].hasStack&&y==="number"?B=p==="expand"?[0,1]:cC(s[$].stackGroups,c,u):B=oC(E,a.filter(function(K){var q=o in K.props?K.props[o]:K.type.defaultProps[o],J="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return q===$&&(A||!J)}),y,f,!0);if(y==="number")B=gx(d,B,$,i,O),I&&(B=Tv(I,B,P));else if(y==="category"&&I){var Z=I,te=B.every(function(K){return Z.indexOf(K)>=0});te&&(B=Z)}}return xe(xe({},x),{},mt({},$,xe(xe({},v),{},{axisType:i,domain:B,categoricalDomain:F,duplicateDomain:U,originalDomain:(k=v.domain)!==null&&k!==void 0?k:G,isCategorical:m,layout:f})))},{})},bre=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,p=ag(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=p.length,x=sC(f,i),b=-1;return n.reduce(function(k,v){var y=v.type.defaultProps!==void 0?xe(xe({},v.type.defaultProps),v.props):v.props,w=y[o],P=SN("number");if(!k[w]){b++;var S;return x?S=$h(0,m):s&&s[w]&&s[w].hasStack?(S=cC(s[w].stackGroups,c,u),S=gx(d,S,w,i)):(S=Tv(P,oC(p,n.filter(function(j){var O,A,$=o in j.props?j.props[o]:(O=j.type.defaultProps)===null||O===void 0?void 0:O[o],E="hide"in j.props?j.props.hide:(A=j.type.defaultProps)===null||A===void 0?void 0:A.hide;return $===w&&!E}),"number",f),a.defaultProps.allowDataOverflow),S=gx(d,S,w,i)),xe(xe({},k),{},mt({},w,xe(xe({axisType:i},a.defaultProps),{},{hide:!0,orientation:di(gre,"".concat(i,".").concat(b%2),null),domain:S,originalDomain:P,isCategorical:x,layout:f})))}return k},{})},wre=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),p=Fa(f,i),m={};return p&&p.length?m=xre(t,{axes:p,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=bre(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:c,dataEndIndex:u})),m},kre=function(t){var r=zo(t),n=mo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:K1(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:jh(r,n)}},i4=function(t){var r=t.children,n=t.defaultShowTooltip,a=Wa(r,Cc),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Sre=function(t){return!t||!t.length?!1:t.some(function(r){var n=vo(r&&r.type);return n&&n.indexOf("Bar")>=0})},o4=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},jre=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,c=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,p=n.margin||{},m=Wa(d,Cc),x=Wa(d,Ki),b=Object.keys(c).reduce(function(S,j){var O=c[j],A=O.orientation;return!O.mirror&&!O.hide?xe(xe({},S),{},mt({},A,S[A]+O.width)):S},{left:p.left||0,right:p.right||0}),k=Object.keys(o).reduce(function(S,j){var O=o[j],A=O.orientation;return!O.mirror&&!O.hide?xe(xe({},S),{},mt({},A,di(S,"".concat(A))+O.height)):S},{top:p.top||0,bottom:p.bottom||0}),v=xe(xe({},k),b),y=v.bottom;m&&(v.bottom+=m.props.height||Cc.defaultProps.height),x&&r&&(v=aX(v,a,n,r));var w=u-v.left-v.right,P=f-v.top-v.bottom;return xe(xe({brushBottom:y},v),{},{width:Math.max(w,0),height:Math.max(P,0)})},_re=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Tb=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,p=function(v,y){var w=y.graphicalItems,P=y.stackGroups,S=y.offset,j=y.updateId,O=y.dataStartIndex,A=y.dataEndIndex,$=v.barSize,E=v.layout,T=v.barGap,B=v.barCategoryGap,U=v.maxBarSize,F=o4(E),G=F.numericAxisName,z=F.cateAxisName,I=Sre(w),L=[];return w.forEach(function(H,Z){var te=ag(v.data,{graphicalItems:[H],dataStartIndex:O,dataEndIndex:A}),K=H.type.defaultProps!==void 0?xe(xe({},H.type.defaultProps),H.props):H.props,q=K.dataKey,J=K.maxBarSize,ve=K["".concat(G,"Id")],ie=K["".concat(z,"Id")],pe={},oe=c.reduce(function(Je,yt){var wt=y["".concat(yt.axisType,"Map")],ir=K["".concat(yt.axisType,"Id")];wt&&wt[ir]||yt.axisType==="zAxis"||dl();var jt=wt[ir];return xe(xe({},Je),{},mt(mt({},yt.axisType,jt),"".concat(yt.axisType,"Ticks"),mo(jt)))},pe),V=oe[z],se=oe["".concat(z,"Ticks")],ge=P&&P[ve]&&P[ve].hasStack&&vX(H,P[ve].stackGroups),le=vo(H.type).indexOf("Bar")>=0,je=jh(V,se),Se=[],me=I&&rX({barSize:$,stackGroups:P,totalSize:_re(oe,z)});if(le){var he,Pe,$e=Ot(J)?U:J,Ve=(he=(Pe=jh(V,se,!0))!==null&&Pe!==void 0?Pe:$e)!==null&&he!==void 0?he:0;Se=nX({barGap:T,barCategoryGap:B,bandSize:Ve!==je?Ve:je,sizeList:me[ie],maxBarSize:$e}),Ve!==je&&(Se=Se.map(function(Je){return xe(xe({},Je),{},{position:xe(xe({},Je.position),{},{offset:Je.position.offset-Ve/2})})}))}var He=H&&H.type&&H.type.getComposedData;He&&L.push({props:xe(xe({},He(xe(xe({},oe),{},{displayedData:te,props:v,dataKey:q,item:H,bandSize:je,barPosition:Se,offset:S,stackedData:ge,layout:E,dataStartIndex:O,dataEndIndex:A}))),{},mt(mt(mt({key:H.key||"item-".concat(Z)},G,oe[G]),z,oe[z]),"animationId",j)),childIndex:t$(H,v.children),item:H})}),L},m=function(v,y){var w=v.props,P=v.dataStartIndex,S=v.dataEndIndex,j=v.updateId;if(!Ow({props:w}))return null;var O=w.children,A=w.layout,$=w.stackOffset,E=w.data,T=w.reverseStackOrder,B=o4(A),U=B.numericAxisName,F=B.cateAxisName,G=Fa(O,n),z=gX(E,G,"".concat(U,"Id"),"".concat(F,"Id"),$,T),I=c.reduce(function(K,q){var J="".concat(q.axisType,"Map");return xe(xe({},K),{},mt({},J,wre(w,xe(xe({},q),{},{graphicalItems:G,stackGroups:q.axisType===U&&z,dataStartIndex:P,dataEndIndex:S}))))},{}),L=jre(xe(xe({},I),{},{props:w,graphicalItems:G}),y==null?void 0:y.legendBBox);Object.keys(I).forEach(function(K){I[K]=f(w,I[K],L,K.replace("Map",""),r)});var H=I["".concat(F,"Map")],Z=kre(H),te=p(w,xe(xe({},I),{},{dataStartIndex:P,dataEndIndex:S,updateId:j,graphicalItems:G,stackGroups:z,offset:L}));return xe(xe({formattedGraphicalItems:te,graphicalItems:G,offset:L,stackGroups:z},Z),I)},x=function(k){function v(y){var w,P,S;return are(this,v),S=sre(this,v,[y]),mt(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mt(S,"accessibilityManager",new Wte),mt(S,"handleLegendBBoxUpdate",function(j){if(j){var O=S.state,A=O.dataStartIndex,$=O.dataEndIndex,E=O.updateId;S.setState(xe({legendBBox:j},m({props:S.props,dataStartIndex:A,dataEndIndex:$,updateId:E},xe(xe({},S.state),{},{legendBBox:j}))))}}),mt(S,"handleReceiveSyncEvent",function(j,O,A){if(S.props.syncId===j){if(A===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(O)}}),mt(S,"handleBrushChange",function(j){var O=j.startIndex,A=j.endIndex;if(O!==S.state.dataStartIndex||A!==S.state.dataEndIndex){var $=S.state.updateId;S.setState(function(){return xe({dataStartIndex:O,dataEndIndex:A},m({props:S.props,dataStartIndex:O,dataEndIndex:A,updateId:$},S.state))}),S.triggerSyncEvent({dataStartIndex:O,dataEndIndex:A})}}),mt(S,"handleMouseEnter",function(j){var O=S.getMouseInfo(j);if(O){var A=xe(xe({},O),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var $=S.props.onMouseEnter;$t($)&&$(A,j)}}),mt(S,"triggeredAfterMouseMove",function(j){var O=S.getMouseInfo(j),A=O?xe(xe({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(A),S.triggerSyncEvent(A);var $=S.props.onMouseMove;$t($)&&$(A,j)}),mt(S,"handleItemMouseEnter",function(j){S.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),mt(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),mt(S,"handleMouseMove",function(j){j.persist(),S.throttleTriggeredAfterMouseMove(j)}),mt(S,"handleMouseLeave",function(j){S.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};S.setState(O),S.triggerSyncEvent(O);var A=S.props.onMouseLeave;$t(A)&&A(O,j)}),mt(S,"handleOuterEvent",function(j){var O=e$(j),A=di(S.props,"".concat(O));if(O&&$t(A)){var $,E;/.*touch.*/i.test(O)?E=S.getMouseInfo(j.changedTouches[0]):E=S.getMouseInfo(j),A(($=E)!==null&&$!==void 0?$:{},j)}}),mt(S,"handleClick",function(j){var O=S.getMouseInfo(j);if(O){var A=xe(xe({},O),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var $=S.props.onClick;$t($)&&$(A,j)}}),mt(S,"handleMouseDown",function(j){var O=S.props.onMouseDown;if($t(O)){var A=S.getMouseInfo(j);O(A,j)}}),mt(S,"handleMouseUp",function(j){var O=S.props.onMouseUp;if($t(O)){var A=S.getMouseInfo(j);O(A,j)}}),mt(S,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),mt(S,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&S.handleMouseDown(j.changedTouches[0])}),mt(S,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&S.handleMouseUp(j.changedTouches[0])}),mt(S,"handleDoubleClick",function(j){var O=S.props.onDoubleClick;if($t(O)){var A=S.getMouseInfo(j);O(A,j)}}),mt(S,"handleContextMenu",function(j){var O=S.props.onContextMenu;if($t(O)){var A=S.getMouseInfo(j);O(A,j)}}),mt(S,"triggerSyncEvent",function(j){S.props.syncId!==void 0&&Lm.emit(Fm,S.props.syncId,j,S.eventEmitterSymbol)}),mt(S,"applySyncEvent",function(j){var O=S.props,A=O.layout,$=O.syncMethod,E=S.state.updateId,T=j.dataStartIndex,B=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)S.setState(xe({dataStartIndex:T,dataEndIndex:B},m({props:S.props,dataStartIndex:T,dataEndIndex:B,updateId:E},S.state)));else if(j.activeTooltipIndex!==void 0){var U=j.chartX,F=j.chartY,G=j.activeTooltipIndex,z=S.state,I=z.offset,L=z.tooltipTicks;if(!I)return;if(typeof $=="function")G=$(L,j);else if($==="value"){G=-1;for(var H=0;H<L.length;H++)if(L[H].value===j.activeLabel){G=H;break}}var Z=xe(xe({},I),{},{x:I.left,y:I.top}),te=Math.min(U,Z.x+Z.width),K=Math.min(F,Z.y+Z.height),q=L[G]&&L[G].value,J=vx(S.state,S.props.data,G),ve=L[G]?{x:A==="horizontal"?L[G].coordinate:te,y:A==="horizontal"?K:L[G].coordinate}:kN;S.setState(xe(xe({},j),{},{activeLabel:q,activeCoordinate:ve,activePayload:J,activeTooltipIndex:G}))}else S.setState(j)}),mt(S,"renderCursor",function(j){var O,A=S.state,$=A.isTooltipActive,E=A.activeCoordinate,T=A.activePayload,B=A.offset,U=A.activeTooltipIndex,F=A.tooltipAxisBandSize,G=S.getTooltipEventType(),z=(O=j.props.active)!==null&&O!==void 0?O:$,I=S.props.layout,L=j.key||"_recharts-cursor";return Q.createElement(Zte,{key:L,activeCoordinate:E,activePayload:T,activeTooltipIndex:U,chartName:r,element:j,isActive:z,layout:I,offset:B,tooltipAxisBandSize:F,tooltipEventType:G})}),mt(S,"renderPolarAxis",function(j,O,A){var $=di(j,"type.axisType"),E=di(S.state,"".concat($,"Map")),T=j.type.defaultProps,B=T!==void 0?xe(xe({},T),j.props):j.props,U=E&&E[B["".concat($,"Id")]];return C.cloneElement(j,xe(xe({},U),{},{className:er($,U.className),key:j.key||"".concat(O,"-").concat(A),ticks:mo(U,!0)}))}),mt(S,"renderPolarGrid",function(j){var O=j.props,A=O.radialLines,$=O.polarAngles,E=O.polarRadius,T=S.state,B=T.radiusAxisMap,U=T.angleAxisMap,F=zo(B),G=zo(U),z=G.cx,I=G.cy,L=G.innerRadius,H=G.outerRadius;return C.cloneElement(j,{polarAngles:Array.isArray($)?$:mo(G,!0).map(function(Z){return Z.coordinate}),polarRadius:Array.isArray(E)?E:mo(F,!0).map(function(Z){return Z.coordinate}),cx:z,cy:I,innerRadius:L,outerRadius:H,key:j.key||"polar-grid",radialLines:A})}),mt(S,"renderLegend",function(){var j=S.state.formattedGraphicalItems,O=S.props,A=O.children,$=O.width,E=O.height,T=S.props.margin||{},B=$-(T.left||0)-(T.right||0),U=aC({children:A,formattedGraphicalItems:j,legendWidth:B,legendContent:u});if(!U)return null;var F=U.item,G=r4(U,Qte);return C.cloneElement(F,xe(xe({},G),{},{chartWidth:$,chartHeight:E,margin:T,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),mt(S,"renderTooltip",function(){var j,O=S.props,A=O.children,$=O.accessibilityLayer,E=Wa(A,Un);if(!E)return null;var T=S.state,B=T.isTooltipActive,U=T.activeCoordinate,F=T.activePayload,G=T.activeLabel,z=T.offset,I=(j=E.props.active)!==null&&j!==void 0?j:B;return C.cloneElement(E,{viewBox:xe(xe({},z),{},{x:z.left,y:z.top}),active:I,label:G,payload:I?F:[],coordinate:U,accessibilityLayer:$})}),mt(S,"renderBrush",function(j){var O=S.props,A=O.margin,$=O.data,E=S.state,T=E.offset,B=E.dataStartIndex,U=E.dataEndIndex,F=E.updateId;return C.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Yd(S.handleBrushChange,j.props.onChange),data:$,x:Ee(j.props.x)?j.props.x:T.left,y:Ee(j.props.y)?j.props.y:T.top+T.height+T.brushBottom-(A.bottom||0),width:Ee(j.props.width)?j.props.width:T.width,startIndex:B,endIndex:U,updateId:"brush-".concat(F)})}),mt(S,"renderReferenceElement",function(j,O,A){if(!j)return null;var $=S,E=$.clipPathId,T=S.state,B=T.xAxisMap,U=T.yAxisMap,F=T.offset,G=j.type.defaultProps||{},z=j.props,I=z.xAxisId,L=I===void 0?G.xAxisId:I,H=z.yAxisId,Z=H===void 0?G.yAxisId:H;return C.cloneElement(j,{key:j.key||"".concat(O,"-").concat(A),xAxis:B[L],yAxis:U[Z],viewBox:{x:F.left,y:F.top,width:F.width,height:F.height},clipPathId:E})}),mt(S,"renderActivePoints",function(j){var O=j.item,A=j.activePoint,$=j.basePoint,E=j.childIndex,T=j.isRange,B=[],U=O.props.key,F=O.item.type.defaultProps!==void 0?xe(xe({},O.item.type.defaultProps),O.item.props):O.item.props,G=F.activeDot,z=F.dataKey,I=xe(xe({index:E,dataKey:z,cx:A.x,cy:A.y,r:4,fill:wb(O.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Tt(G,!1)),q0(G));return B.push(v.renderActiveDot(G,I,"".concat(U,"-activePoint-").concat(E))),$?B.push(v.renderActiveDot(G,xe(xe({},I),{},{cx:$.x,cy:$.y}),"".concat(U,"-basePoint-").concat(E))):T&&B.push(null),B}),mt(S,"renderGraphicChild",function(j,O,A){var $=S.filterFormatItem(j,O,A);if(!$)return null;var E=S.getTooltipEventType(),T=S.state,B=T.isTooltipActive,U=T.tooltipAxis,F=T.activeTooltipIndex,G=T.activeLabel,z=S.props.children,I=Wa(z,Un),L=$.props,H=L.points,Z=L.isRange,te=L.baseLine,K=$.item.type.defaultProps!==void 0?xe(xe({},$.item.type.defaultProps),$.item.props):$.item.props,q=K.activeDot,J=K.hide,ve=K.activeBar,ie=K.activeShape,pe=!!(!J&&B&&I&&(q||ve||ie)),oe={};E!=="axis"&&I&&I.props.trigger==="click"?oe={onClick:Yd(S.handleItemMouseEnter,j.props.onClick)}:E!=="axis"&&(oe={onMouseLeave:Yd(S.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Yd(S.handleItemMouseEnter,j.props.onMouseEnter)});var V=C.cloneElement(j,xe(xe({},$.props),oe));function se(yt){return typeof U.dataKey=="function"?U.dataKey(yt.payload):null}if(pe)if(F>=0){var ge,le;if(U.dataKey&&!U.allowDuplicatedCategory){var je=typeof U.dataKey=="function"?se:"payload.".concat(U.dataKey.toString());ge=K0(H,je,G),le=Z&&te&&K0(te,je,G)}else ge=H==null?void 0:H[F],le=Z&&te&&te[F];if(ie||ve){var Se=j.props.activeIndex!==void 0?j.props.activeIndex:F;return[C.cloneElement(j,xe(xe(xe({},$.props),oe),{},{activeIndex:Se})),null,null]}if(!Ot(ge))return[V].concat(Bc(S.renderActivePoints({item:$,activePoint:ge,basePoint:le,childIndex:F,isRange:Z})))}else{var me,he=(me=S.getItemByXY(S.state.activeCoordinate))!==null&&me!==void 0?me:{graphicalItem:V},Pe=he.graphicalItem,$e=Pe.item,Ve=$e===void 0?j:$e,He=Pe.childIndex,Je=xe(xe(xe({},$.props),oe),{},{activeIndex:He});return[C.cloneElement(Ve,Je),null,null]}return Z?[V,null,null]:[V,null]}),mt(S,"renderCustomized",function(j,O,A){return C.cloneElement(j,xe(xe({key:"recharts-customized-".concat(A)},S.props),S.state))}),mt(S,"renderMap",{CartesianGrid:{handler:t0,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:t0},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:t0},YAxis:{handler:t0},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=y.id)!==null&&w!==void 0?w:xl("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=iP(S.triggeredAfterMouseMove,(P=y.throttleDelay)!==null&&P!==void 0?P:1e3/60),S.state={},S}return ure(v,k),ore(v,[{key:"componentDidMount",value:function(){var w,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,P=w.children,S=w.data,j=w.height,O=w.layout,A=Wa(P,Un);if(A){var $=A.props.defaultIndex;if(!(typeof $!="number"||$<0||$>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[$]&&this.state.tooltipTicks[$].value,T=vx(this.state,S,$,E),B=this.state.tooltipTicks[$].coordinate,U=(this.state.offset.top+j)/2,F=O==="horizontal",G=F?{x:B,y:U}:{y:B,x:U},z=this.state.formattedGraphicalItems.find(function(L){var H=L.item;return H.type.name==="Scatter"});z&&(G=xe(xe({},G),z.props.points[$].tooltipPosition),T=z.props.points[$].tooltipPayload);var I={activeTooltipIndex:$,isTooltipActive:!0,activeLabel:E,activePayload:T,activeCoordinate:G};this.setState(I),this.renderCursor(A),this.accessibilityManager.setIndex($)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,j;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(w){Xy([Wa(w.children,Un)],[Wa(this.props.children,Un)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Wa(this.props.children,Un);if(w&&typeof w.props.shared=="boolean"){var P=w.props.shared?"axis":"item";return s.indexOf(P)>=0?P:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var P=this.container,S=P.getBoundingClientRect(),j=CU(S),O={chartX:Math.round(w.pageX-j.left),chartY:Math.round(w.pageY-j.top)},A=S.width/P.offsetWidth||1,$=this.inRange(O.chartX,O.chartY,A);if(!$)return null;var E=this.state,T=E.xAxisMap,B=E.yAxisMap,U=this.getTooltipEventType(),F=a4(this.state,this.props.data,this.props.layout,$);if(U!=="axis"&&T&&B){var G=zo(T).scale,z=zo(B).scale,I=G&&G.invert?G.invert(O.chartX):null,L=z&&z.invert?z.invert(O.chartY):null;return xe(xe({},O),{},{xValue:I,yValue:L},F)}return F?xe(xe({},O),F):null}},{key:"inRange",value:function(w,P){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,O=w/S,A=P/S;if(j==="horizontal"||j==="vertical"){var $=this.state.offset,E=O>=$.left&&O<=$.left+$.width&&A>=$.top&&A<=$.top+$.height;return E?{x:O,y:A}:null}var T=this.state,B=T.angleAxisMap,U=T.radiusAxisMap;if(B&&U){var F=zo(B);return LS({x:O,y:A},F)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,P=this.getTooltipEventType(),S=Wa(w,Un),j={};S&&P==="axis"&&(S.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=q0(this.props,this.handleOuterEvent);return xe(xe({},O),j)}},{key:"addListener",value:function(){Lm.on(Fm,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Lm.removeListener(Fm,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,P,S){for(var j=this.state.formattedGraphicalItems,O=0,A=j.length;O<A;O++){var $=j[O];if($.item===w||$.props.key===w.key||P===vo($.item.type)&&S===$.childIndex)return $}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,P=this.state.offset,S=P.left,j=P.top,O=P.height,A=P.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:w},Q.createElement("rect",{x:S,y:j,height:O,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(P,S){var j=t4(S,2),O=j[0],A=j[1];return xe(xe({},P),{},mt({},O,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(P,S){var j=t4(S,2),O=j[0],A=j[1];return xe(xe({},P),{},mt({},O,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[w])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(w){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[w])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(w){var P=this.state,S=P.formattedGraphicalItems,j=P.activeItem;if(S&&S.length)for(var O=0,A=S.length;O<A;O++){var $=S[O],E=$.props,T=$.item,B=T.type.defaultProps!==void 0?xe(xe({},T.type.defaultProps),T.props):T.props,U=vo(T.type);if(U==="Bar"){var F=(E.data||[]).find(function(L){return hY(w,L)});if(F)return{graphicalItem:$,payload:F}}else if(U==="RadialBar"){var G=(E.data||[]).find(function(L){return LS(w,L)});if(G)return{graphicalItem:$,payload:G}}else if(Qp($,j)||Jp($,j)||Vf($,j)){var z=gZ({graphicalItem:$,activeTooltipItem:j,itemData:B.data}),I=B.activeIndex===void 0?z:B.activeIndex;return{graphicalItem:xe(xe({},$),{},{childIndex:I}),payload:Vf($,j)?B.data[z]:$.props.data[z]}}}return null}},{key:"render",value:function(){var w=this;if(!Ow(this))return null;var P=this.props,S=P.children,j=P.className,O=P.width,A=P.height,$=P.style,E=P.compact,T=P.title,B=P.desc,U=r4(P,Jte),F=Tt(U,!1);if(E)return Q.createElement(E5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(qy,ql({},F,{width:O,height:A,title:T,desc:B}),this.renderClipPath(),Aw(S,this.renderMap)));if(this.props.accessibilityLayer){var G,z;F.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,F.role=(z=this.props.role)!==null&&z!==void 0?z:"application",F.onKeyDown=function(L){w.accessibilityManager.keyboardEvent(L)},F.onFocus=function(){w.accessibilityManager.focus()}}var I=this.parseEventsOfWrapper();return Q.createElement(E5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",ql({className:er("recharts-wrapper",j),style:xe({position:"relative",cursor:"default",width:O,height:A},$)},I,{ref:function(H){w.container=H}}),Q.createElement(qy,ql({},F,{width:O,height:A,title:T,desc:B,style:mre}),this.renderClipPath(),Aw(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(C.Component);mt(x,"displayName",r),mt(x,"defaultProps",xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),mt(x,"getDerivedStateFromProps",function(k,v){var y=k.dataKey,w=k.data,P=k.children,S=k.width,j=k.height,O=k.layout,A=k.stackOffset,$=k.margin,E=v.dataStartIndex,T=v.dataEndIndex;if(v.updateId===void 0){var B=i4(k);return xe(xe(xe({},B),{},{updateId:0},m(xe(xe({props:k},B),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:w,prevWidth:S,prevHeight:j,prevLayout:O,prevStackOffset:A,prevMargin:$,prevChildren:P})}if(y!==v.prevDataKey||w!==v.prevData||S!==v.prevWidth||j!==v.prevHeight||O!==v.prevLayout||A!==v.prevStackOffset||!nc($,v.prevMargin)){var U=i4(k),F={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},G=xe(xe({},a4(v,w,O)),{},{updateId:v.updateId+1}),z=xe(xe(xe({},U),F),G);return xe(xe(xe({},z),m(xe({props:k},z),v)),{},{prevDataKey:y,prevData:w,prevWidth:S,prevHeight:j,prevLayout:O,prevStackOffset:A,prevMargin:$,prevChildren:P})}if(!Xy(P,v.prevChildren)){var I,L,H,Z,te=Wa(P,Cc),K=te&&(I=(L=te.props)===null||L===void 0?void 0:L.startIndex)!==null&&I!==void 0?I:E,q=te&&(H=(Z=te.props)===null||Z===void 0?void 0:Z.endIndex)!==null&&H!==void 0?H:T,J=K!==E||q!==T,ve=!Ot(w),ie=ve&&!J?v.updateId:v.updateId+1;return xe(xe({updateId:ie},m(xe(xe({props:k},v),{},{updateId:ie,dataStartIndex:K,dataEndIndex:q}),v)),{},{prevChildren:P,dataStartIndex:K,dataEndIndex:q})}return null}),mt(x,"renderActiveDot",function(k,v,y){var w;return C.isValidElement(k)?w=C.cloneElement(k,v):$t(k)?w=k(v):w=Q.createElement(Zp,v),Q.createElement(vr,{className:"recharts-active-dot",key:y},w)});var b=C.forwardRef(function(v,y){return Q.createElement(x,ql({},v,{ref:y}))});return b.displayName=x.displayName,b},Hs=Tb({chartName:"LineChart",GraphicalChild:Sn,axisComponents:[{axisType:"xAxis",AxisComp:_a},{axisType:"yAxis",AxisComp:Pa}],formatAxisMap:Sb}),Pre=Tb({chartName:"ScatterChart",GraphicalChild:ka,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:_a},{axisType:"yAxis",AxisComp:Pa},{axisType:"zAxis",AxisComp:ng}],formatAxisMap:Sb}),jN=Tb({chartName:"AreaChart",GraphicalChild:ui,axisComponents:[{axisType:"xAxis",AxisComp:_a},{axisType:"yAxis",AxisComp:Pa}],formatAxisMap:Sb});const lo=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},Cre=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:c,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[p,m]=C.useState(()=>(u==null?void 0:u.channelMode)??lo("hist_mode","All")),[x,b]=C.useState(()=>(u==null?void 0:u.minVal)??lo("hist_min",0)),[k,v]=C.useState(()=>(u==null?void 0:u.maxVal)??lo("hist_max",16383)),[y,w]=C.useState(()=>(u==null?void 0:u.binCount)??lo("hist_bins",100)),[P,S]=C.useState(()=>(u==null?void 0:u.pointToPoint)??lo("hist_ptp",!1)),[j,O]=C.useState(()=>(u==null?void 0:u.showTheo)??lo("hist_show_theo",!1)),[A,$]=C.useState(()=>(u==null?void 0:u.theoMean)??lo("hist_theo_mean","512")),[E,T]=C.useState(()=>(u==null?void 0:u.theoSigma)??lo("hist_theo_sigma","10")),[B,U]=C.useState(()=>(u==null?void 0:u.theoAmp)??lo("hist_theo_amp","1000")),[F,G]=C.useState(!1),[z,I]=C.useState(0),[L,H]=C.useState([]),[Z,te]=C.useState(null),[K,q]=C.useState(c||{x:100,y:100}),[J,ve]=C.useState(!1),ie=C.useRef({x:0,y:0});C.useEffect(()=>{localStorage.setItem("hist_mode",p),localStorage.setItem("hist_min",String(x)),localStorage.setItem("hist_max",String(k)),localStorage.setItem("hist_bins",String(y)),localStorage.setItem("hist_ptp",String(P)),localStorage.setItem("hist_show_theo",String(j)),localStorage.setItem("hist_theo_mean",A),localStorage.setItem("hist_theo_sigma",E),localStorage.setItem("hist_theo_amp",B),f&&f({channelMode:p,minVal:x,maxVal:k,binCount:y,pointToPoint:P,showTheo:j,theoMean:A,theoSigma:E,theoAmp:B})},[p,x,k,y,P,j,A,E,B]),C.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(k<=x){te("Invalid range: Max must be greater than Min");return}te(null),G(!0),I(0);const me=new AbortController,he=[],$e=setTimeout(async()=>{try{let Ve=[];if(d&&d.length>1){const He=Math.min(d.length,navigator.hardwareConcurrency||4);for(let jt=0;jt<He;jt++){const hr=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});he.push(hr)}let Je=0,yt=0;const wt=[],ir=async jt=>{for(;Je<d.length;){if(me.signal.aborted)return;const hr=Je++,_t=d[hr];try{const or=await _t.arrayBuffer();await new Promise((Ir,Rt)=>{jt.onmessage=Sr=>{const{success:et,hist:ht,error:Qt}=Sr.data;et?(wt.push(ht),yt++,I(yt),Ir()):(console.error(`Error processing ${_t.name}:`,Qt),Ir())},jt.onerror=Sr=>{console.error("Worker Error",Sr),Ir()},jt.postMessage({buffer:or,roi:a,binCount:y,minVal:x,maxVal:k,pointToPoint:P},[or])})}catch(or){console.error("File Read Error",or)}}};if(await Promise.all(he.map(jt=>ir(jt))),he.forEach(jt=>jt.terminate()),he.length=0,wt.length>0){Ve=wt[0];for(let jt=1;jt<wt.length;jt++){const hr=wt[jt];for(let _t=0;_t<hr.length;_t++)Ve[_t]&&(Ve[_t].c0+=hr[_t].c0,Ve[_t].c1+=hr[_t].c1,Ve[_t].c2+=hr[_t].c2,Ve[_t].c3+=hr[_t].c3)}}}else n&&(Ve=W6(n.data,n.width,n.height,a.x,a.y,a.w,a.h,y,x,k,P));me.signal.aborted||H(Ve)}catch(Ve){console.error("Histogram calc error:",Ve),te("Error calculating histogram")}finally{me.signal.aborted||G(!1)}},50);return()=>{clearTimeout($e),me.abort(),he.length>0&&(console.log(`Terminating ${he.length} active histogram workers...`),he.forEach(Ve=>Ve.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,y,x,k,P,d]);const pe=C.useMemo(()=>{if(!j)return L;const me=parseFloat(A),he=parseFloat(E),Pe=parseFloat(B);return isNaN(me)||isNaN(he)||isNaN(Pe)||he<=0?L:L.map($e=>{const Ve=$e.binStart,He=-Math.pow(Ve-me,2)/(2*Math.pow(he,2)),Je=Pe*Math.exp(He);return{...$e,theory:Je}})},[L,j,A,E,B]),oe=()=>{if(L.length===0)return;let me=0,he=0;if(L.forEach(Pe=>{const $e=Math.max(Pe.c0||0,Pe.c1||0,Pe.c2||0,Pe.c3||0);$e>me&&(me=$e,he=Pe.binStart)}),$(he.toFixed(2)),U(me.toString()),parseFloat(E)===0||isNaN(parseFloat(E))){const Pe=k-x;T((Pe/20).toFixed(2))}},V=(me,he,Pe)=>{s&&s(),!(Pe.closest("button")||Pe.closest("input")||Pe.closest("select"))&&(ve(!0),ie.current={x:me-K.x,y:he-K.y})},se=me=>{V(me.clientX,me.clientY,me.target)},ge=me=>{const he=me.touches[0];V(he.clientX,he.clientY,me.target)};if(C.useEffect(()=>{const me=Pe=>{if(J){const $e="touches"in Pe?Pe.touches[0].clientX:Pe.clientX,Ve="touches"in Pe?Pe.touches[0].clientY:Pe.clientY;q({x:$e-ie.current.x,y:Ve-ie.current.y})}},he=()=>ve(!1);return J&&(window.addEventListener("mousemove",me),window.addEventListener("mouseup",he),window.addEventListener("touchmove",me,{passive:!1}),window.addEventListener("touchend",he)),()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",he),window.removeEventListener("touchmove",me),window.removeEventListener("touchend",he)}},[J]),!e)return null;const le=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},je=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Se="step";return l.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:K.x,top:K.y,zIndex:o??100},onMouseDownCapture:s,children:[l.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${J?"cursor-grabbing":"cursor-grab"}`,onMouseDown:se,onTouchStart:ge,children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&l.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[r&&l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),l.jsxs("select",{value:p,onChange:me=>m(me.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[l.jsx("option",{value:"All",children:"All Colors"}),l.jsx("option",{value:"0",children:le.c0}),l.jsx("option",{value:"1",children:le.c1}),l.jsx("option",{value:"2",children:le.c2}),l.jsx("option",{value:"3",children:le.c3})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),l.jsx("input",{type:"number",value:x,onChange:me=>b(Number(me.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",value:k,onChange:me=>v(Number(me.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:P,onChange:me=>S(me.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),l.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!P&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),l.jsx("input",{type:"number",value:y,onChange:me=>w(Math.max(1,Number(me.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),l.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${j?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:j,onChange:me=>O(me.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),l.jsx("span",{className:`font-bold uppercase tracking-tight ${j?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),j&&l.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),l.jsx("input",{type:"text",value:A,onChange:me=>$(me.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),l.jsx("input",{type:"text",value:E,onChange:me=>T(me.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),l.jsx("input",{type:"text",value:B,onChange:me=>U(me.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),l.jsx("button",{onClick:oe,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),l.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),F&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),l.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${z}/${d.length}`:"Calculating Histogram..."})]}),Z?l.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:Z}):l.jsx("div",{className:"relative z-10 w-full h-full",children:l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:pe,children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),l.jsx(_a,{dataKey:"binStart",type:"number",domain:[x,k],tickFormatter:me=>Math.floor(me).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),l.jsx(Pa,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),l.jsx(Un,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:me=>`DN: ${Math.round(Number(me))}`,formatter:(me,he)=>[Math.round(me),he]}),l.jsx(Ki,{wrapperStyle:{paddingTop:"10px"}}),j&&l.jsx(Sn,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(p==="All"||p==="0")&&l.jsx(Sn,{type:Se,dataKey:"c0",name:le.c0,stroke:je.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="1")&&l.jsx(Sn,{type:Se,dataKey:"c1",name:le.c1,stroke:je.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="2")&&l.jsx(Sn,{type:Se,dataKey:"c2",name:le.c2,stroke:je.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(p==="All"||p==="3")&&l.jsx(Sn,{type:Se,dataKey:"c3",name:le.c3,stroke:je.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},ks=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=C.useState(e),[c,u]=C.useState(!1),[f,d]=C.useState({x:0,y:0}),p=C.useRef(null),m=(k,v,y)=>{i&&i(),!(y.closest("button")||y.closest("input"))&&(u(!0),d({x:k-o.x,y:v-o.y}))},x=k=>{m(k.clientX,k.clientY,k.target)},b=k=>{const v=k.touches[0];m(v.clientX,v.clientY,k.target)};return C.useEffect(()=>{const k=y=>{var w,P;if(c){y.cancelable&&y.preventDefault();const S="touches"in y?y.touches[0].clientX:y.clientX,j="touches"in y?y.touches[0].clientY:y.clientY,O=S-f.x,A=j-f.y,$=window.innerWidth-(((w=p.current)==null?void 0:w.offsetWidth)||100),E=window.innerHeight-(((P=p.current)==null?void 0:P.offsetHeight)||100);s({x:Math.max(0,Math.min(O,$)),y:Math.max(0,Math.min(A,E))})}},v=()=>{u(!1)};return c&&(window.addEventListener("mousemove",k),window.addEventListener("mouseup",v),window.addEventListener("touchmove",k,{passive:!1}),window.addEventListener("touchend",v)),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",k),window.removeEventListener("touchend",v)}},[c,f]),l.jsxs("div",{ref:p,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${c?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[l.jsx("div",{onMouseDown:x,onTouchStart:b,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),l.jsx("div",{className:"relative z-10 pointer-events-none",children:l.jsx("div",{className:"pointer-events-auto",children:t})})]})},Nre=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:c})=>{const u=C.useRef(null),[f,d]=C.useState(!1),[p,m]=C.useState(null),[x,b]=C.useState(null),[k,v]=C.useState(!0),[y,w]=C.useState(!0),[P,S]=C.useState("-1"),[j,O]=C.useState("8"),[A,$]=C.useState(64),[E,T]=C.useState(45),[B,U]=C.useState(60),F=C.useRef(!1),G=C.useRef({x:0,y:0});C.useEffect(()=>{!e||!r||!n||(d(!0),b(null),setTimeout(()=>{try{const H=H6(r.data,r.width,r.height,n,a,y);H?m(H):b("Could not extract valid data from ROI.")}catch(H){console.error("2D FFT Error",H),b("Calculation Error: "+H.message)}finally{d(!1)}},50))},[e,r,n,a,y]),C.useEffect(()=>{if(!p||!u.current)return;const H=u.current,Z=H.getContext("2d");if(!Z)return;const te=H.width,K=H.height;Z.clearRect(0,0,te,K),Z.fillStyle="#0f172a",Z.fillRect(0,0,te,K);const q=p.width,J=p.height,ve=p.data,ie=Math.pow(10,parseFloat(P)||-1),pe=Math.pow(10,parseFloat(j)||8);let oe=ie,V=pe;k&&(oe=Math.log10(Math.max(1e-10,ie)),V=Math.log10(Math.max(1e-10,pe)));const se=V-oe||1,ge=te/2,le=K/2+50,je=Math.min(te,K)*.4,Se=.6,me=E*Math.PI/180,he=B*Math.PI/180,Pe=Math.cos(me),$e=Math.sin(me),Ve=Math.cos(he),He=Math.sin(he),Je=(ht,Qt,Lt)=>{const mr=ht*Pe-Qt*$e,jr=ht*$e+Qt*Pe,tn=jr*Ve-Lt*He,Mt=jr*He+Lt*Ve;return{x:ge+mr*je,y:le-tn*je,depth:Mt}},yt=Math.max(16,A),wt=Math.max(1,Math.floor(q/yt)),ir=Math.max(1,Math.floor(J/yt)),jt=(ht,Qt)=>{let Lt=ve[Qt*q+ht];return k&&(Lt=Math.log10(Math.max(1e-10,Lt))),Lt=Math.max(oe,Math.min(V,Lt)),(Lt-oe)/se},hr=ht=>`hsl(${(1-ht)*240}, 80%, 50%)`,_t=[];for(let ht=0;ht<J-ir;ht+=ir)for(let Qt=0;Qt<q-wt;Qt+=wt){const Lt=Qt,mr=ht,jr=Qt+wt,tn=ht,Mt=Qt+wt,Xr=ht+ir,Pt=Qt,rn=ht+ir,ze=jt(Lt,mr),cn=jt(jr,tn),Lr=jt(Mt,Xr),_r=jt(Pt,rn),jn=(ze+cn+Lr+_r)/4,Tr=Je(Lt/(q-1)-.5,mr/(J-1)-.5,ze*Se),Pr=Je(jr/(q-1)-.5,tn/(J-1)-.5,cn*Se),nn=Je(Mt/(q-1)-.5,Xr/(J-1)-.5,Lr*Se),ea=Je(Pt/(q-1)-.5,rn/(J-1)-.5,_r*Se),Xn=(Tr.depth+Pr.depth+nn.depth+ea.depth)/4;_t.push({pts:[{x:Tr.x,y:Tr.y},{x:Pr.x,y:Pr.y},{x:nn.x,y:nn.y},{x:ea.x,y:ea.y}],avgDepth:Xn,avgZ:jn})}_t.sort((ht,Qt)=>ht.avgDepth-Qt.avgDepth),Z.lineWidth=.5,_t.forEach(ht=>{Z.fillStyle=hr(ht.avgZ),Z.beginPath(),Z.moveTo(ht.pts[0].x,ht.pts[0].y),Z.lineTo(ht.pts[1].x,ht.pts[1].y),Z.lineTo(ht.pts[2].x,ht.pts[2].y),Z.lineTo(ht.pts[3].x,ht.pts[3].y),Z.closePath(),Z.fill()}),Z.fillStyle="#aaa",Z.font="10px monospace";const or=Je(-.5,-.5,0),Ir=Je(.5,-.5,0),Rt=Je(-.5,.5,0),Sr=Je(.5,.5,0);Z.strokeStyle="#666",Z.beginPath(),Z.moveTo(or.x,or.y),Z.lineTo(Ir.x,Ir.y),Z.lineTo(Sr.x,Sr.y),Z.lineTo(Rt.x,Rt.y),Z.closePath(),Z.stroke(),Z.fillText("0",or.x-10,or.y+10),Z.fillText("Fx",Ir.x+5,Ir.y),Z.fillText("Fy",Rt.x-15,Rt.y);const et=Je(-.5,-.5,Se);Z.strokeStyle="#fff",Z.beginPath(),Z.moveTo(or.x,or.y),Z.lineTo(et.x,et.y),Z.stroke(),Z.fillText(`10^${j}`,et.x-25,et.y),Z.fillText(`10^${P}`,or.x-25,or.y)},[p,k,E,B,P,j,A]);const z=H=>{F.current=!0,G.current={x:H.clientX,y:H.clientY}},I=H=>{if(!F.current)return;const Z=H.clientX-G.current.x,te=H.clientY-G.current.y;T(K=>K-Z*.5),U(K=>Math.max(0,Math.min(90,K+te*.5))),G.current={x:H.clientX,y:H.clientY}},L=()=>{F.current=!1};return e?l.jsxs(ks,{initialPosition:c||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,p&&l.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[p.width,"x",p.height," (Chirp-Z)"]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),l.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[l.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),l.jsx("input",{type:"number",value:P,onChange:H=>S(H.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),l.jsx("span",{className:"text-slate-500",children:"to"}),l.jsx("input",{type:"number",value:j,onChange:H=>O(H.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[l.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),l.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:A,onChange:H=>$(Number(H.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),l.jsx("span",{className:"text-slate-300 w-6 text-right",children:A})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[l.jsx("input",{type:"checkbox",checked:k,onChange:H=>v(H.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:H=>w(H.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),l.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),x&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:x}),l.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:z,onMouseMove:I,onMouseUp:L,onMouseLeave:L}),l.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},Ore=.5,xx=1e-10,s4=(e,t)=>{const r=e.length-1;if(r<0)return xx;const n=t/Ore*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,xx)},Mre=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},Are=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:c,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:p})=>{const[m,x]=C.useState((f==null?void 0:f.selectedChannel)??0),[b,k]=C.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[v,y]=C.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[w,P]=C.useState((f==null?void 0:f.useHanning)??!0),[S,j]=C.useState((f==null?void 0:f.doAverage)??!0),[O,A]=C.useState((f==null?void 0:f.welchSegments)??1),[$,E]=C.useState((f==null?void 0:f.showH)??!0),[T,B]=C.useState((f==null?void 0:f.showV)??!0),[U,F]=C.useState((f==null?void 0:f.interlaceRows)??!1),[G,z]=C.useState((f==null?void 0:f.rowGroup)??0),[I,L]=C.useState((f==null?void 0:f.interlaceCols)??!1),[H,Z]=C.useState((f==null?void 0:f.colGroup)??0),[te,K]=C.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[q,J]=C.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[ve,ie]=C.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[pe,oe]=C.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[V,se]=C.useState((f==null?void 0:f.intStart)||"0"),[ge,le]=C.useState((f==null?void 0:f.intEnd)||"0.5"),[je,Se]=C.useState(!1),[me,he]=C.useState([]),[Pe,$e]=C.useState(!1),[Ve,He]=C.useState(0),[Je,yt]=C.useState(null),[wt,ir]=C.useState(!1),[jt,hr]=C.useState(!1),[_t,or]=C.useState(null),[Ir,Rt]=C.useState(!1),[Sr,et]=C.useState(null),[ht,Qt]=C.useState(u||{x:50,y:50}),[Lt,mr]=C.useState(!1),[jr,tn]=C.useState(null),[Mt,Xr]=C.useState({}),Pt=C.useRef({x:0,y:0}),rn=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},ze=C.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);C.useEffect(()=>{localStorage.setItem("fft_y_min",b),localStorage.setItem("fft_y_max",v),localStorage.setItem("fft_theo_sigma",te),localStorage.setItem("fft_theo_ksize",q),localStorage.setItem("fft_theo_noise",ve),localStorage.setItem("fft_theo_scale",pe)},[b,v,te,q,ve,pe]),C.useEffect(()=>{if(!e||!n||!a)return;$e(!0),yt(null),He(0);const M=setTimeout(async()=>{try{const Le=m===-1?[0,1,2,3]:[m],vt=p&&p.length>1?p:[null],pt=vt.length,kt={};let At={h:0,v:0};for(let Ue=0;Ue<pt;Ue++){He(Ue+1);let Ct;if(vt[Ue]){const Gt=await vt[Ue].arrayBuffer();Ct=await pc(Gt)}else Ct=n;for(const Gt of Le){const Jt=V6(Ct.data,Ct.width,Ct.height,a,Gt,!1,w,{rows:U,rowGroup:G,cols:I,colGroup:H},S,O);Jt&&(kt[Gt]||(kt[Gt]={h:new Array(Jt.avgHoriz.length).fill(0),v:new Array(Jt.avgVert.length).fill(0)}),Jt.avgHoriz.forEach((fr,_e)=>kt[Gt].h[_e]+=fr/pt),Jt.avgVert.forEach((fr,_e)=>kt[Gt].v[_e]+=fr/pt),At=Jt.sampleCount)}}if(Object.keys(kt).length===0)throw new Error("ROI too small or no data found.");const br=1024,lr=[];for(let Ue=0;Ue<br;Ue++){const Ct=Ue/(br-1)*.5,Gt={freq:parseFloat(Ct.toFixed(6))};for(const Jt of Le)kt[Jt]&&(Gt[`c${Jt}_h`]=s4(kt[Jt].h,Ct),Gt[`c${Jt}_v`]=s4(kt[Jt].v,Ct));lr.push(Gt)}tn(At),he(lr)}catch(Le){console.error("FFT Loop Failed:",Le),yt(Le.message||"Unknown error during FFT processing")}finally{$e(!1)}},100);return()=>clearTimeout(M)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,m,w,S,O,U,G,I,H,p]);const cn=()=>{const M=parseFloat(V),Le=parseFloat(ge);if(isNaN(M)||isNaN(Le))return;const vt={},pt=m===-1?[0,1,2,3]:[m],kt=me.filter(At=>At.freq>=M&&At.freq<=Le);if(kt.length===0){Xr({});return}pt.forEach(At=>{let br=0,lr=0;kt.forEach(Ue=>{const Ct=Ue[`c${At}_h`],Gt=Ue[`c${At}_v`];typeof Ct=="number"&&(br+=Ct),typeof Gt=="number"&&(lr+=Gt)}),vt[At]={h:br/kt.length,v:lr/kt.length,count:kt.length}}),Xr(vt)},Lr=C.useMemo(()=>{const M=parseFloat(te),Le=parseInt(q),vt=parseFloat(ve),pt=parseFloat(pe);if(isNaN(M)||isNaN(Le)||isNaN(vt)||isNaN(pt)||me.length===0)return me;const kt=Mre(Le,M),At=kt.reduce((Ue,Ct)=>Ue+Ct*Ct,0),br=(Le-1)/2,lr=vt*vt*pt;return me.map(Ue=>{const Ct=Ue.freq,Gt=2*Math.PI*Ct;let Jt=0,fr=0;for(let Cr=0;Cr<Le;Cr++){const R=Cr-br,we=kt[Cr],Ne=-Gt*R;Jt+=we*Math.cos(Ne),fr+=we*Math.sin(Ne)}const _e=Jt*Jt+fr*fr;return{...Ue,theory:Math.max(xx,lr*At*_e)}})},[me,te,q,ve,pe]),_r=M=>{M&&M.activeLabel!==void 0&&(Rt(!0),et(Number(M.activeLabel)),or(null))},jn=M=>{if(Ir&&Sr!==null&&M&&M.activeLabel!==void 0){const Le=Number(M.activeLabel);or([Math.min(Sr,Le),Math.max(Sr,Le)])}},Tr=()=>Rt(!1),Pr=(M,Le,vt)=>{c&&c(),!(vt.closest("button")||vt.closest("input"))&&(mr(!0),Pt.current={x:M-ht.x,y:Le-ht.y})},nn=M=>{Pr(M.clientX,M.clientY,M.target)},ea=M=>{const Le=M.touches[0];Pr(Le.clientX,Le.clientY,M.target)};C.useEffect(()=>{const M=vt=>{if(Lt){const pt="touches"in vt?vt.touches[0].clientX:vt.clientX,kt="touches"in vt?vt.touches[0].clientY:vt.clientY;Qt({x:pt-Pt.current.x,y:kt-Pt.current.y})}},Le=()=>mr(!1);return Lt&&(window.addEventListener("mousemove",M),window.addEventListener("mouseup",Le),window.addEventListener("touchmove",M,{passive:!1}),window.addEventListener("touchend",Le)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",Le),window.removeEventListener("touchmove",M),window.removeEventListener("touchend",Le)}},[Lt]);const Xn=C.useMemo(()=>{if(!_t||me.length===0)return null;const[M,Le]=_t,vt=me.filter(At=>At.freq>=M&&At.freq<=Le);if(vt.length===0)return null;const pt=m===-1?[0,1,2,3]:[m],kt={};return pt.forEach(At=>{["h","v"].forEach(br=>{const lr=`c${At}_${br}`;let Ue=0,Ct=0;for(const Gt of vt){const Jt=Gt[lr];typeof Jt=="number"&&(Ue+=Jt,Ct++)}Ct>0&&(kt[`${lr}_sigma`]=Math.sqrt(Ue/Ct))})}),{count:vt.length,stats:kt}},[_t,me,m]),tr=()=>{if(me.length===0)return;let M=1/0,Le=-1/0;if(me.forEach(br=>{br.freq<.01||br.freq>.49||Object.keys(br).forEach(lr=>{if(lr==="freq"||lr==="theory")return;const Ue=br[lr];typeof Ue=="number"&&Ue>0&&(Ue<M&&(M=Ue),Ue>Le&&(Le=Ue))})}),M===1/0)return;const vt=Math.log10(M),pt=Math.log10(Le),kt=pt-vt,At=(kt===0?1:kt)*.1;k((vt-At).toFixed(2)),y((pt+At).toFixed(2))},sr=(M,Le)=>{a&&o&&o({...a,x:a.x+M,y:a.y+Le})},xr=(M,Le)=>{a&&o&&o({...a,w:Math.max(2,a.w+M),h:Math.max(2,a.h+Le)})};return e?l.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:ht.x,top:ht.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:c,children:[l.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${Lt?"cursor-grabbing":"cursor-grab"}`,onMouseDown:nn,onTouchStart:ea,children:[l.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",l.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:p&&p.length>1?`Stack Avg (${p.length} frames)`:"Single Mode"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[r&&l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[l.jsx("button",{onClick:()=>x(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${m===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(M=>l.jsx("button",{onClick:()=>x(M),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${m===M?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:ze[M]},M))]})]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),l.jsxs("button",{onClick:()=>Se(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[l.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),l.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:q,set:J,w:"w-10"},{label:"Sigma",val:te,set:K,w:"w-12"},{label:"Noise()",val:ve,set:ie,w:"w-12"},{label:"Scale",val:pe,set:oe,w:"w-12"}].map(M=>l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:M.label}),l.jsx("input",{type:"text",value:M.val,onChange:Le=>M.set(Le.target.value),className:`${M.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},M.label))})]})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[l.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),l.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:O,onChange:M=>A(parseInt(M.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),l.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:O})]}),l.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),l.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[l.jsx("input",{type:"checkbox",checked:U,onChange:M=>F(M.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[l.jsx("input",{type:"checkbox",checked:I,onChange:M=>L(M.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),l.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[l.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${w?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:w&&l.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("input",{type:"checkbox",checked:w,onChange:M=>P(M.target.checked),className:"hidden"}),l.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[l.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${S?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:S&&l.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("input",{type:"checkbox",checked:S,onChange:M=>j(M.target.checked),className:"hidden"}),l.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),l.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsxs("button",{onClick:()=>E(!$),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${$?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${$?"bg-cyan-400":"bg-gray-400"}`})," H"]}),l.jsxs("button",{onClick:()=>B(!T),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${T?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${$?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),l.jsxs("div",{className:"ml-auto flex gap-2",children:[l.jsx("button",{onClick:()=>hr(!jt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${jt?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),l.jsx("button",{onClick:()=>ir(!wt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${wt?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[l.jsx("button",{onClick:tr,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",l.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[l.jsx("input",{type:"text",value:b,onChange:M=>k(M.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),l.jsx("span",{className:"px-2 text-gray-400",children:"to"}),l.jsx("input",{type:"text",value:v,onChange:M=>y(M.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),l.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:l.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),Pe&&l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),p&&p.length>1&&l.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",Ve," / ",p.length]})]}),Je?l.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:Je}):l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[l.jsx("div",{className:"flex-1 relative z-10",onMouseDown:_r,onMouseMove:jn,onMouseUp:Tr,style:{cursor:Ir?"col-resize":"crosshair"},children:l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:Lr,margin:{top:10,right:10,bottom:20,left:0},children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),l.jsx(_a,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),l.jsx(Pa,{scale:"log",domain:[Math.pow(10,parseFloat(b)),Math.pow(10,parseFloat(v))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:M=>Number(M).toExponential(0),width:45}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:M=>[Number(M).toExponential(3),""],labelFormatter:M=>`Freq: ${Number(M).toFixed(4)}`}),l.jsx(Ki,{wrapperStyle:{fontSize:"10px"}}),l.jsx(Sn,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(M=>{if(m!==-1&&m!==M)return[];const Le=`c${M}_h`,vt=`c${M}_v`,pt=rn[`c${M}`],kt=[];return $&&kt.push(l.jsx(Sn,{type:"linear",dataKey:Le,name:`${ze[M]} (H)`,stroke:pt,strokeWidth:1,dot:!1,isAnimationActive:!1},`${M}_h`)),T&&kt.push(l.jsx(Sn,{type:"linear",dataKey:vt,name:`${ze[M]} (V)`,stroke:pt,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${M}_v`)),kt}),_t&&l.jsx(fd,{x1:_t[0],x2:_t[1],fill:"#8884d8",fillOpacity:.15})]})})}),Xn&&_t&&l.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[l.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",_t[0].toFixed(3),"-",_t[1].toFixed(3)]}),Object.entries(Xn.stats).map(([M,Le])=>l.jsxs("div",{className:"flex justify-between gap-4",children:[l.jsxs("span",{className:"text-slate-400",children:[M,":"]}),l.jsx("span",{className:"font-bold text-cyan-400",children:Le.toFixed(5)})]},M))]})]})]}),jt&&l.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[l.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("input",{type:"number",step:"0.01",value:V,onChange:M=>se(M.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",step:"0.01",value:ge,onChange:M=>le(M.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),l.jsx("button",{onClick:cn,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),l.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(M=>{const Le=Mt[M];if(!Le)return null;const vt=rn[`c${M}`];return l.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[l.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:vt},children:[ze[M]," ",l.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Le.count," pts)"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[l.jsxs("div",{children:["H: ",Le.h.toExponential(3)]}),l.jsxs("div",{children:["V: ",Le.v.toExponential(3)]})]})]},M)})})]}),wt&&l.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),l.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[l.jsx("div",{}),l.jsx("button",{onClick:()=>sr(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>sr(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>sr(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{}),l.jsx("button",{onClick:()=>sr(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),l.jsx("div",{})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[l.jsx("button",{onClick:()=>xr(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),l.jsx("button",{onClick:()=>xr(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),l.jsx("button",{onClick:()=>xr(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),l.jsx("button",{onClick:()=>xr(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),l.jsx(Nre,{isOpen:je,onClose:()=>Se(!1),rawImageData:n,roi:a,selectedChannel:m===-1?0:m,channelName:m===-1?"Red (Default)":ze[m],zIndex:s?s+2:102,onFocus:c})]}):null},Tre=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:c,initialInternalState:u,onUpdateState:f})=>{const[d,p]=C.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[m,x]=C.useState((u==null?void 0:u.blackLevel)??0),[b,k]=C.useState((u==null?void 0:u.whiteLevel)??16383),[v,y]=C.useState(null),[w,P]=C.useState(!1),[S,j]=C.useState(null),[O,A]=C.useState(c||{x:150,y:150}),[$,E]=C.useState(!1),T=C.useRef({x:0,y:0});C.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:m,whiteLevel:b})},[d,m,b]),C.useEffect(()=>{if(e&&n&&!u){const I=n.blackLevels?Math.floor(n.blackLevels[1]):0;x(I),k(n.whiteLevel||16383),y(null)}},[e,n]);const B=()=>{if(!n||!a)return;j(null),P(!0);const L=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const H=X6(n.data,n.width,n.height,a,L,m,b);H?y(H):(j("No data found in selection with current filters."),y(null))}catch(H){console.error("Analysis failed:",H),j(H.message||"Analysis error")}finally{P(!1)}},50)},U=(I,L,H)=>{s&&s(),!(H.closest("button")||H.closest("input")||H.closest("select"))&&(E(!0),T.current={x:I-O.x,y:L-O.y})},F=I=>{U(I.clientX,I.clientY,I.target)},G=I=>{const L=I.touches[0];U(L.clientX,L.clientY,I.target)};if(C.useEffect(()=>{const I=H=>{if($){const Z="touches"in H?H.touches[0].clientX:H.clientX,te="touches"in H?H.touches[0].clientY:H.clientY;A({x:Z-T.current.x,y:te-T.current.y})}},L=()=>E(!1);return $&&(window.addEventListener("mousemove",I),window.addEventListener("mouseup",L),window.addEventListener("touchmove",I,{passive:!1}),window.addEventListener("touchend",L)),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",L),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",L)}},[$]),!e)return null;const z=i?["B","G1","G2","R"]:["R","G1","G2","B"];return l.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:O.x,top:O.y,zIndex:o??100},onMouseDownCapture:s,children:[l.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${$?"cursor-grabbing":"cursor-grab"}`,onMouseDown:F,onTouchStart:G,children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),l.jsxs("div",{className:"flex items-center gap-1",children:[r&&l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),l.jsx("select",{value:d,onChange:I=>p(I.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:z.map(I=>l.jsx("option",{value:I,children:I},I))})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),l.jsx("input",{type:"number",value:m,onChange:I=>x(Number(I.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),l.jsx("input",{type:"number",value:b,onChange:I=>k(Number(I.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),l.jsx("button",{onClick:B,disabled:w,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:w?"Analyzing...":"Run Analysis"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[S&&l.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:S}),!v&&!w&&!S&&l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:l.jsx("p",{children:"Configure parameters and click Run Analysis"})}),v&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[l.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.uniqueCount})]}),l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[l.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),l.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.diffCount})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[l.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),l.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(v.stepCounts).sort((I,L)=>parseFloat(I[0])-parseFloat(L[0])).map(([I,L])=>l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",I,":"]}),l.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(L)})]},I))})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[l.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),l.jsx("div",{className:"relative z-10 w-full h-full",children:l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:v.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),l.jsx(_a,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),l.jsx(Pa,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:I=>`Val: ${I}`,formatter:I=>[I,"Step Size"]}),l.jsx(Sn,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},Ere=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:c})=>{const[u,f]=C.useState("cross"),[d,p]=C.useState("R"),[m,x]=C.useState("B"),[b,k]=C.useState("H"),[v,y]=C.useState(null),[w,P]=C.useState(!1),[S,j]=C.useState(0),[O,A]=C.useState(0),[$,E]=C.useState("single"),T=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},B=a?["B","G1","G2","R"]:["R","G1","G2","B"],U=async F=>{if(!r||!n)return;P(!0),E(F),j(0),y(null);let G=T[d],z=u==="cross"?T[m]:G,I=0,L=0;u==="self"&&(b==="H"?L=2:I=2),setTimeout(async()=>{try{let H={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(F==="single")H=pw(r.data,r.width,r.height,n,G,z,I,L);else if(c&&c.length>0)for(let Z=0;Z<c.length;Z++){j(Z+1);const te=await c[Z].arrayBuffer(),K=await pc(te),q=pw(K.data,K.width,K.height,n,G,z,I,L);H.sumCov+=q.sumCov,H.sumVar1+=q.sumVar1,H.sumVar2+=q.sumVar2,H.n+=q.n}A(H.n),y(G6(H))}catch(H){console.error("Pearson calculation failed",H),alert("Calculation error: "+H.message)}finally{P(!1)}},50)};return e?l.jsxs(ks,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",l.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),l.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),l.jsx("select",{value:d,onChange:F=>p(F.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:B.map(F=>l.jsx("option",{value:F,children:F},F))})]}),l.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),l.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?l.jsx("select",{value:m,onChange:F=>x(F.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:B.map(F=>l.jsx("option",{value:F,children:F},F))}):l.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[l.jsx("button",{onClick:()=>k("H"),className:`flex-1 text-[9px] font-bold rounded ${b==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),l.jsx("button",{onClick:()=>k("V"),className:`flex-1 text-[9px] font-bold rounded ${b==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[l.jsx("button",{onClick:()=>U("single"),disabled:w,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:w&&$==="single"?"Calculating...":"Calc Current Frame"}),c&&c.length>0&&l.jsxs("button",{onClick:()=>U("stack"),disabled:w,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[l.jsx("span",{children:"Calc Stack Concatenated"}),w&&$==="stack"&&l.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",S," / ",c.length]})]})]}),v!==null&&l.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${b})`," r"]}),l.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:v.toFixed(5)}),l.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",O.toLocaleString()," pairs"]}),l.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(v)>.5?l.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(v)>.1?l.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):l.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),l.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${b==="V"?"+2":""}, c${b==="H"?"+2":""}) in the same channel.`})]}):null},$re=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],Dre=["5","9","0","8","2","1","4","7","3","6"],l4=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:Dre[r]}).join(""),Rre=({isOpen:e,onClose:t})=>{const[r,n]=C.useState({pv:"--",uv:"--"});return C.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[l.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:l.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[l.jsx("span",{className:"font-bold mr-2",children:"about:"}),l.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),l.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:$re.map(a=>l.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[l.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),l.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),l.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),l.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),l.jsx("div",{className:"flex justify-end mt-4",children:l.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:l.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[l.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:l4(r.pv)}),l.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:l4(r.uv)})]})})})]})]})}):null},Ire=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=C.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(p,m)=>{if(typeof m=="bigint")return m.toString()+"n";if(typeof m=="object"&&m!==null){if(d.has(m))return"[Circular]";if(d.add(m),ArrayBuffer.isView(m))return`[${m.constructor.name}]`}return m})}catch{return"[Unable to serialize object]"}},c=C.useMemo(()=>{if(!r)return[];const f=[],d=(p,m=0)=>{if(m>5)return"...";if(p==null)return String(p);if(p instanceof Date)return p.toLocaleString();if(typeof p=="number")return p.toString();if(typeof p=="string")return p;if(typeof p=="bigint")return p.toString()+"n";if(ArrayBuffer.isView(p))return`<${p.constructor.name} len=${p.length} bytes=${p.byteLength}>`;if(p instanceof ArrayBuffer)return`<ArrayBuffer bytes=${p.byteLength}>`;if(typeof p=="object"){if(Array.isArray(p))return p.length===0?"[]":p.length>20?`[${p.slice(0,10).map(k=>typeof k=="number"?k.toFixed(2):d(k,m+1)).join(", ")}, ... (+${p.length-10} more)]`:`[${p.map(b=>typeof b=="number"?Number.isInteger(b)?b:b.toFixed(4):d(b,m+1)).join(", ")}]`;try{const x=Object.keys(p);return x.length>5?`{Object with ${x.length} keys}`:s(p)}catch{return"<Complex Object>"}}return String(p)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(m=>{if(m==="MakerNote"||m==="UserComment"||m.includes("Strip")||m.includes("Offset")){f.push({key:m,value:"<Binary/Internal Data>"});return}const x=r[m];f.push({key:m,value:d(x)})})}catch(p){console.error("Error processing EXIF data:",p),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=c.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{className:"overflow-hidden",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&l.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:l.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:l.jsxs("div",{className:"relative",children:[l.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),l.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?l.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),l.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[l.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),l.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):l.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:l.jsxs("p",{children:['No tags found matching "',i,'"']})})}),l.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:l.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},Lre=100,zm=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},c4=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=C.useRef(null),s=C.useRef(null),c=C.useCallback(y=>{const w=i?Math.max(1e-6,e):e,P=i?Math.max(w*1.0001,t):t,S=Math.max(w,Math.min(P,y));if(i){const j=Math.log10(w),O=Math.log10(P);return(Math.log10(S)-j)/(O-j)}return(S-w)/(P-w)},[e,t,i]),u=C.useCallback(y=>{const w=i?Math.max(1e-6,e):e,P=i?Math.max(w*1.0001,t):t;if(i){const S=Math.log10(w),j=Math.log10(P);return Math.pow(10,S+y*(j-S))}return w+y*(P-w)},[e,t,i]),f=(y,w)=>{y.preventDefault(),y.stopPropagation(),s.current=w;const P=j=>{if(!s.current||!o.current)return;const O=o.current.getBoundingClientRect();let A=0;a?A=(O.bottom-j.clientY)/O.height:A=(j.clientX-O.left)/O.width,A=Math.max(0,Math.min(1,A));const $=u(A);if(s.current==="min"){const E=r[1];n([Math.min($,E),E])}else{const E=r[0];n([E,Math.max($,E)])}},S=()=>{s.current=null,window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",S)};window.addEventListener("mousemove",P),window.addEventListener("mouseup",S)},d=c(r[0])*100,p=c(r[1])*100,m=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},x=a?{left:"50%",bottom:`${d}%`,height:`${p-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${p-d}%`,height:"4px",transform:"translateY(-50%)"},b="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",k=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},v=a?{left:"50%",bottom:`${p}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${p}%`,transform:"translate(-50%, -50%)"};return l.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[l.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:m}),l.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:x}),l.jsx("div",{className:b,style:k,onMouseDown:y=>f(y,"min")}),l.jsx("div",{className:b,style:v,onMouseDown:y=>f(y,"max")})]})},Fre=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:c,initialISO:u})=>{const[f,d]=C.useState("Noise"),[p,m]=C.useState(!0),[x,b]=C.useState(null),[k,v]=C.useState("default"),[y,w]=C.useState(!1),[P,S]=C.useState(!1),[j,O]=C.useState({R:!0,G1:!0,G2:!0,B:!0}),[A,$]=C.useState(""),[E,T]=C.useState(""),[B,U]=C.useState(""),[F,G]=C.useState(""),[z,I]=C.useState("10"),[L,H]=C.useState(""),[Z,te]=C.useState("0 0 0 0"),[K,q]=C.useState("0 0 0 0"),[J,ve]=C.useState(!1),[ie,pe]=C.useState(null),[oe,V]=C.useState(!1),[se,ge]=C.useState(0),[le,je]=C.useState([]),[Se,me]=C.useState(""),[he,Pe]=C.useState(""),$e=()=>{const re=parseFloat(Se),ye=parseFloat(he);!isNaN(re)&&!isNaN(ye)&&(je([...le,{id:Date.now(),x:re,y:ye}]),me(""),Pe(""))},[Ve,He]=C.useState(()=>localStorage.getItem("ptc_tester_name")||""),[Je,yt]=C.useState(""),[wt,ir]=C.useState("");C.useEffect(()=>{localStorage.setItem("ptc_tester_name",Ve)},[Ve]);const jt=C.useRef(J),hr=C.useRef(oe),_t=C.useRef(se);C.useEffect(()=>{jt.current=J,hr.current=oe,_t.current=se},[J,oe,se]);const[or,Ir]=C.useState(null),[Rt,Sr]=C.useState({min:.01,max:90}),[et,ht]=C.useState({readNoise:0,gain:1,prnu:.5}),[Qt,Lt]=C.useState(2e6),mr=C.useRef(et),jr=C.useRef(Rt),tn=C.useRef(Qt);C.useEffect(()=>{mr.current=et,jr.current=Rt,tn.current=Qt},[et,Rt,Qt]);const[Mt,Xr]=C.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[Pt,rn]=C.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[ze,cn]=C.useState(!1),[Lr,_r]=C.useState([]),[jn,Tr]=C.useState(null),[Pr,nn]=C.useState(""),ea=C.useMemo(()=>n?n.join(","):"",[n]);C.useEffect(()=>{if(e){let re="0 0 0 0";o&&o.blackLevel?re=o.blackLevel.join(" "):re=n&&n.length===4?n.join(" "):"0 0 0 0",te(re),q(re);let ye="";if(o&&o.height?ye=o.height.toString():a&&(ye=a.toString()),H(ye),ye){const Y=parseFloat(ye);!isNaN(Y)&&Y>0?I((2309.4/Y).toFixed(2)):I("10")}else I("10");pe(null),ve(!1),V(!1),ge(0),_r([]),Tr(null),Sr({min:.01,max:90}),Xr({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const be={readNoise:0,gain:0,prnu:0};ht(be),mr.current=be,$(""),T(""),U(""),G(""),d("Noise"),Ir(null),Lt(2e6),nn(""),S(!1),je([]),yt(Y=>Y.trim()===""&&c?c:Y),ir(Y=>Y.trim()===""&&u?u:Y)}},[e,ea,o,a,r,c,u]);const Xn=re=>{if(re.key==="Enter"){const ye=parseFloat(L);if(!isNaN(ye)&&ye>0){const be=(2309.4/ye).toFixed(2);I(be)}re.target.blur()}},tr=C.useMemo(()=>{let ye=K.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(ye.length===1&&(ye=[ye[0],ye[0],ye[0],ye[0]]);ye.length<4;)ye.push(0);const be=Y=>{switch(Y){case"R":return ye[0];case"G1":return ye[1];case"G2":return ye[2];case"B":return ye[3];default:return 0}};return r.map(Y=>{const Me=Y.mean-be(Y.channel),nt=Y.std>0?Me/Y.std:0;return{...Y,x:Me,std:Y.std,snr:nt}}).filter(Y=>Y.std>0)},[r,K]),sr=C.useMemo(()=>{const re=et.readNoise,ye=re*re;return tr.map(be=>{let Y=0;if(f==="Noise")Y=be.std;else if(f==="SNR")Y=be.snr;else if(f==="Linear"){const nt=be.std*be.std-ye;Y=be.x!==0?nt/be.x:0}return{...be,y:Y}})},[tr,f,et.readNoise]),xr=C.useMemo(()=>{if(tr.length===0)return"G1";const re={R:0,G1:0,G2:0,B:0},ye={R:0,G1:0,G2:0,B:0};for(const Me of tr)re[Me.channel]+=Me.x,ye[Me.channel]++;let be="G1",Y=-1/0;return Object.keys(re).forEach(Me=>{const nt=ye[Me],st=nt>0?re[Me]/nt:-1/0;st>Y&&(Y=st,be=Me)}),be},[tr]),M=C.useCallback(()=>{let re=1/0,ye=-1/0;if(tr.length===0)return{min:.1,max:1};for(let be=0;be<tr.length;be++){const Y=tr[be].x;p&&Y<=0||(Y<re&&(re=Y),Y>ye&&(ye=Y))}return re===1/0?{min:.1,max:1}:{min:re,max:ye}},[tr,p]),Le=C.useCallback(()=>{let re=1/0,ye=-1/0;if(sr.length===0)return{min:.1,max:1};for(let be=0;be<sr.length;be++){const Y=sr[be].y;p&&Y<=0||(Y<re&&(re=Y),Y>ye&&(ye=Y))}return re===1/0?{min:.1,max:1}:{min:re*.9,max:ye*1.1}},[sr,p]),{min:vt,max:pt}=M(),{min:kt,max:At}=Le(),br=pt*(Rt.min/100),lr=pt*(Rt.max/100),Ue=C.useMemo(()=>{if(!p&&sr.length===0)return{shot:[],read:[],prnu:[],total:[]};const re=A?parseFloat(A):vt,ye=E?parseFloat(E):pt,be=100,Y=Math.max(.1,re),Me=Math.max(1,ye);if(Y>=Me)return{shot:[],read:[],prnu:[],total:[]};const nt=Math.log10(Y),Et=(Math.log10(Me)-nt)/be,St=et.readNoise,lt=et.gain>0?et.gain:1,pr=et.prnu/100,cr=[],nr=[],ct=[],Ce=[];for(let De=0;De<=be;De++){const tt=Math.pow(10,nt+De*Et);if(f==="Linear"){const ae=1/lt,ke=pr*pr,dt=ae+ke*tt;Ce.push({x:tt,y:dt}),cr.push({x:tt,y:ae}),ct.push({x:tt,y:ke*tt})}else{const ae=St,ke=Math.sqrt(tt/lt),dt=pr*tt,it=Math.sqrt(ae*ae+ke*ke+dt*dt);f==="Noise"?(cr.push({x:tt,y:ke}),nr.push({x:tt,y:ae}),ct.push({x:tt,y:dt}),Ce.push({x:tt,y:it})):(ke>0&&cr.push({x:tt,y:tt/ke}),ae>0&&nr.push({x:tt,y:tt/ae}),dt>0&&ct.push({x:tt,y:tt/dt}),it>0&&Ce.push({x:tt,y:tt/it}))}}return{shot:cr,read:nr,prnu:ct,total:Ce}},[sr,p,A,E,et,f,vt,pt]),Ct=C.useMemo(()=>{if(f==="Linear")return[];const re=parseFloat(z);if(isNaN(re)||re<=0)return[];const ye=A?parseFloat(A):vt,be=E?parseFloat(E):pt;return f==="SNR"?[{x:ye,y:re},{x:be,y:re}]:[{x:ye,y:ye/re},{x:be,y:be/re}]},[sr,z,f,A,E,vt,pt]),Gt=C.useCallback((re,ye)=>{if(!ye||ye.length===0)return null;const be=[...ye].sort((Y,Me)=>Y.x-Me.x);for(let Y=0;Y<be.length-1;Y++){const Me=be[Y],nt=be[Y+1];if(Me.snr<=re&&nt.snr>=re||Me.snr>=re&&nt.snr<=re){const st=(re-Me.snr)/(nt.snr-Me.snr);return Me.x+st*(nt.x-Me.x)}}return null},[]),Jt=C.useMemo(()=>{const re=tr,ye=1e3,be=Me=>{if(Me.length===0)return[];if(Me.length<=ye)return Me;const nt=[...Me].sort((St,lt)=>St.x-lt.x),st=[],Et=nt.length/ye;for(let St=0;St<ye;St++){const lt=Math.floor(St*Et),pr=Math.floor((St+1)*Et),cr=nt.slice(lt,pr);if(cr.length===0)continue;cr.sort((ct,Ce)=>ct.std-Ce.std);const nr=Math.floor(cr.length/2);st.push(cr[nr])}return st},Y={R:[],G1:[],G2:[],B:[]};return re.forEach(Me=>{Y[Me.channel]&&Y[Me.channel].push(Me)}),{R:be(Y.R),G1:be(Y.G1),G2:be(Y.G2),B:be(Y.B)}},[tr]),fr=C.useMemo(()=>ie&&et.gain?ie*et.gain:null,[ie,et.gain]),_e=C.useMemo(()=>{if(ie===null||ie===0)return null;const re=parseFloat(z);let ye=null;if(!isNaN(re)&&re>0){let st=0,Et=0;if(["R","G1","G2","B"].forEach(St=>{const lt=Gt(re,Jt[St]);lt!==null&&(st+=lt,Et++)}),Et>0){const St=st/Et;ye=Math.log2(ie/St)}}const be=parseFloat(L);let Y=null,Me=NaN;if(!isNaN(be)&&be>0){Me=16e3/be;let st=0,Et=0;if(["R","G1","G2","B"].forEach(St=>{const lt=Gt(Me,Jt[St]);lt!==null&&(st+=lt,Et++)}),Et>0){const St=st/Et;Y=Math.log2(ie/St)}}let nt=null;if(!isNaN(be)&&be>0){const st=Gt(Me,Jt[xr]);st!==null&&(nt=Math.log2(ie/st))}return{manualDR:ye,ptpDR:Y,d55DR:nt,manualTarget:re,ptpTarget:Me,saturationSignal:ie,dominantChannel:xr}},[ie,z,L,Jt,Gt,xr]),Cr=C.useMemo(()=>{if(f==="Linear"||!_e||!_e.ptpTarget||isNaN(_e.ptpTarget))return[];const re=_e.ptpTarget,ye=A?parseFloat(A):vt,be=E?parseFloat(E):pt;return f==="SNR"?[{x:ye,y:re},{x:be,y:re}]:[{x:ye,y:ye/re},{x:be,y:be/re}]},[f,_e,A,E,vt,pt]),R=C.useCallback(()=>{const be=document.createElement("canvas");be.width=2048,be.height=1536;const Y=be.getContext("2d");if(!Y)return;const Me=s==="dark",nt=Me?"#0f172a":"#ffffff",st=Me?"#ffffff":"#000000",Et=Me?"#475569":"#cbd5e1",St=Me?"#1e293b":"#f1f5f9",lt=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};Y.fillStyle=nt,Y.fillRect(0,0,2048,1536);let pr=A?parseFloat(A):vt,cr=E?parseFloat(E):pt,nr=B?parseFloat(B):kt,ct=F?parseFloat(F):At;isNaN(pr)&&(pr=.1),isNaN(cr)&&(cr=1e4),isNaN(nr)&&(nr=.1),isNaN(ct)&&(ct=1e3);const Ce={top:80,right:80,bottom:100,left:120},De=2048-Ce.left-Ce.right,tt=1536-Ce.top-Ce.bottom,ae=Xe=>{if(p){const Dt=Math.log10(Math.max(1e-9,pr)),Ht=Math.log10(Math.max(1e-9,cr)),Xt=Math.log10(Math.max(1e-9,Xe));return Ce.left+(Xt-Dt)/(Ht-Dt)*De}else return Ce.left+(Xe-pr)/(cr-pr)*De},ke=Xe=>{if(p){const Dt=Math.log10(Math.max(1e-9,nr)),Ht=Math.log10(Math.max(1e-9,ct)),Xt=Math.log10(Math.max(1e-9,Xe));return Ce.top+tt-(Xt-Dt)/(Ht-Dt)*tt}else return Ce.top+tt-(Xe-nr)/(ct-nr)*tt};if(Y.beginPath(),p){const Xe=(Dt,Ht,Xt)=>{const ra=Math.log10(Math.max(1e-9,Dt)),_n=Math.log10(Math.max(1e-9,Ht)),Aa=Math.floor(ra),Ja=Math.ceil(_n);for(let xi=Aa;xi<=Ja;xi++){const ei=Math.pow(10,xi);let Kr=Xt?ae(ei):ke(ei);(Xt?Kr>=Ce.left-1&&Kr<=Ce.left+De+1:Kr>=Ce.top-1&&Kr<=Ce.top+tt+1)&&(Y.lineWidth=1.5,Y.strokeStyle=Et,Y.beginPath(),Xt?(Y.moveTo(Kr,Ce.top),Y.lineTo(Kr,Ce.top+tt)):(Y.moveTo(Ce.left,Kr),Y.lineTo(Ce.left+De,Kr)),Y.stroke()),Y.lineWidth=.5,Y.strokeStyle=St;for(let _s=2;_s<10;_s++){const Sl=_s*ei;Kr=Xt?ae(Sl):ke(Sl),(Xt?Kr>=Ce.left&&Kr<=Ce.left+De:Kr>=Ce.top&&Kr<=Ce.top+tt)&&(Y.beginPath(),Xt?(Y.moveTo(Kr,Ce.top),Y.lineTo(Kr,Ce.top+tt)):(Y.moveTo(Ce.left,Kr),Y.lineTo(Ce.left+De,Kr)),Y.stroke())}}};Xe(pr,cr,!0),Xe(nr,ct,!1)}else{Y.strokeStyle=Et,Y.lineWidth=1;for(let Xe=0;Xe<=5;Xe++){const Dt=Ce.left+De*Xe/5;Y.beginPath(),Y.moveTo(Dt,Ce.top),Y.lineTo(Dt,Ce.top+tt),Y.stroke();const Ht=Ce.top+tt*Xe/5;Y.beginPath(),Y.moveTo(Ce.left,Ht),Y.lineTo(Ce.left+De,Ht),Y.stroke()}}Y.strokeStyle=st,Y.lineWidth=2,Y.strokeRect(Ce.left,Ce.top,De,tt);const dt=(Xe,Dt,Ht)=>{Xe<Ce.left||Xe>Ce.left+De||Dt<Ce.top||Dt>Ce.top+tt||(Y.fillStyle=Ht,Y.fillRect(Xe-1.5,Dt-1.5,3,3))},it=sr.filter(Xe=>!(p&&(Xe.x<=0||Xe.y<=0)));it.forEach(Xe=>{j[Xe.channel]&&Xe.channel!==xr&&dt(ae(Xe.x),ke(Xe.y),lt[Xe.channel])}),it.forEach(Xe=>{j[Xe.channel]&&Xe.channel===xr&&dt(ae(Xe.x),ke(Xe.y),lt[Xe.channel])}),le.forEach(Xe=>{const Dt=ae(Xe.x),Ht=ke(Xe.y);if(Dt<Ce.left||Dt>Ce.left+De||Ht<Ce.top||Ht>Ce.top+tt)return;Y.strokeStyle="#d946ef",Y.lineWidth=2.5;const Xt=6;Y.beginPath(),Y.moveTo(Dt-Xt,Ht-Xt),Y.lineTo(Dt+Xt,Ht+Xt),Y.moveTo(Dt+Xt,Ht-Xt),Y.lineTo(Dt-Xt,Ht+Xt),Y.stroke()});const Bt=(Xe,Dt,Ht=[])=>{if(Xe.length<2)return;Y.beginPath(),Y.strokeStyle=Dt,Y.lineWidth=3,Y.setLineDash(Ht);let Xt=!1;for(const ra of Xe){const _n=ae(ra.x),Aa=ke(ra.y);if(_n<Ce.left-100||_n>Ce.left+De+100||Aa<Ce.top-100||Aa>Ce.top+tt+100){Xt=!1;continue}Xt?Y.lineTo(_n,Aa):(Y.moveTo(_n,Aa),Xt=!0)}Y.stroke(),Y.setLineDash([])},Vt=Me?"#ffffff":"#000000";if(Pt.shot&&Bt(Ue.shot,"#94a3b8",[5,5]),Pt.read&&Bt(Ue.read,"#f43f5e",[3,3]),Pt.prnu&&Bt(Ue.prnu,"#f59e0b",[3,3]),Pt.total&&Bt(Ue.total,Vt,[]),Ct.length===2){const Xe="#6366f1";Bt(Ct,Xe,[4,2]);const Dt=Ct[1],Ht=ke(Dt.y);Ht>=Ce.top&&Ht<=Ce.top+tt&&(Y.fillStyle=Xe,Y.font="bold 20px sans-serif",Y.textAlign="right",Y.textBaseline="bottom",Y.fillText(`M.Tgt=${z}`,Ce.left+De-10,Ht-8))}if(Cr.length===2&&(_e!=null&&_e.ptpTarget)){const Xe="#10b981";Bt(Cr,Xe,[4,4]);const Dt=Cr[1],Ht=ke(Dt.y);if(Ht>=Ce.top&&Ht<=Ce.top+tt){Y.fillStyle=Xe,Y.font="bold 20px sans-serif",Y.textAlign="right",Y.textBaseline="bottom";const Xt=_e.ptpTarget.toFixed(1),ra=Ct.length===2?ke(Ct[1].y):-100,_n=Math.abs(Ht-ra)<25?25:0;Y.fillText(`PTP=${Xt}`,Ce.left+De-10,Ht-8-_n)}}if(Pt.fitRange||oe){const Xe=(Dt,Ht)=>{const Xt=ae(Dt);Xt>=Ce.left&&Xt<=Ce.left+De&&(Y.beginPath(),Y.strokeStyle=Ht,Y.lineWidth=2,Y.setLineDash([8,8]),Y.moveTo(Xt,Ce.top),Y.lineTo(Xt,Ce.top+tt),Y.stroke(),Y.setLineDash([]))};Xe(br,"#22d3ee"),Xe(lr,"#22d3ee")}if(ie){const Xe=ae(ie);Xe>=Ce.left&&Xe<=Ce.left+De&&(Y.strokeStyle="#ef4444",Y.lineWidth=3,Y.setLineDash([10,10]),Y.beginPath(),Y.moveTo(Xe,Ce.top),Y.lineTo(Xe,Ce.top+tt),Y.stroke(),Y.setLineDash([]),Y.fillStyle="#ef4444",Y.font="bold 24px sans-serif",Y.textAlign="center",Y.fillText("Sat",Xe,Ce.top-10))}Y.fillStyle=st,Y.font="28px monospace",Y.textAlign="center",Y.fillText(pr.toExponential(1),Ce.left,Ce.top+tt+40),Y.fillText(cr.toExponential(1),Ce.left+De,Ce.top+tt+40),Y.fillText("Signal (DN)",Ce.left+De/2,Ce.top+tt+80),Y.textAlign="right",Y.textBaseline="middle",Y.fillText(nr.toExponential(1),Ce.left-20,Ce.top+tt),Y.fillText(ct.toExponential(1),Ce.left-20,Ce.top),Y.save(),Y.translate(Ce.left-80,Ce.top+tt/2),Y.rotate(-Math.PI/2),Y.textAlign="center",Y.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),Y.restore(),Y.save(),Y.translate(2048/2,1536/2),Y.rotate(-Math.PI/6),Y.textAlign="center",Y.textBaseline="middle",Y.fillStyle=Me?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",Y.font="bold 150px sans-serif",Y.fillText(" y-g-jiang.github.io",0,0),Y.restore(),Y.fillStyle=st,Y.font="bold 36px sans-serif",Y.textAlign="left",Y.textBaseline="top",Y.fillText(`PTC Export: ${f} Mode`,Ce.left,20),Y.font="24px sans-serif",Y.fillStyle=Me?"#94a3b8":"#64748b",Y.fillText(`Points: ${sr.length} | Sat Channel: ${xr}`,Ce.left,65);const Er=Ce.left+30,An=Ce.top+30,ta=70,ua=Xe=>{if(!ie||Xe<=0)return"--";const Dt=et.readNoise,Ht=et.gain,Xt=et.prnu/100;if(Ht<=0)return"--";const ra=Xe*Xe,_n=Dt*Dt,Aa=1-ra*Xt*Xt,Ja=-(ra/Ht),xi=-(ra*_n);let ei=0;if(Math.abs(Aa)<1e-8)Math.abs(Ja)>1e-8&&(ei=-xi/Ja);else{const Kr=Ja*Ja-4*Aa*xi;Kr>=0&&(ei=(-Ja+Math.sqrt(Kr))/(2*Aa))}return ei>0?Math.log2(ie/ei).toFixed(2)+" EV":"--"},Ma=_e!=null&&_e.ptpTarget&&!isNaN(_e.ptpTarget)?ua(_e.ptpTarget):"--",xa=z?ua(parseFloat(z)):"--";Y.font="bold 48px monospace",Y.textAlign="left",Y.textBaseline="top",Y.shadowColor=Me?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",Y.shadowBlur=4,Y.shadowOffsetX=1,Y.shadowOffsetY=1;const qt=(Xe,Dt,Ht,Xt)=>{const ra=An+Ht*ta;Y.fillStyle=st,Y.fillText(Xe,Er,ra);const _n=Y.measureText(Xe).width;Y.fillStyle=Xt||st,Y.fillText(Dt,Er+_n,ra)},Li=Mt.read,ou=parseFloat(Mt.gain).toFixed(3),Ss=parseFloat(Mt.prnu).toFixed(2)+"%";let Qa=`M.DR@SNR${z}: `;const no=parseFloat(L);if(!isNaN(no)&&no>0){const Xe=(2309.4/no).toFixed(2);Math.abs(parseFloat(z)-parseFloat(Xe))<.05&&(Qa="8mpSNR=1 DR: ")}qt("Tester: ",Ve||"N/A",0),qt("Model : ",Je||"Unknown",1),qt("ISO   : ",wt||"N/A",2),qt("RN/FPN: ",Li,3,"#f43f5e"),qt("KADC  : ",ou,4,"#06b6d4"),qt("PRNU  : ",Ss,5,"#f59e0b"),qt("PTP DR: ",_e!=null&&_e.ptpDR?_e.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),qt("D55 DR: ",_e!=null&&_e.d55DR?_e.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),qt("FWC   : ",fr?fr>1e4?(fr/1e3).toFixed(1)+"k":Math.round(fr).toString():"--",8,"#f97316"),qt(Qa,_e!=null&&_e.manualDR?_e.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),qt("PTCFitDR(PTP): ",Ma,10,"#10b981"),qt("PTCFitDR(Man): ",xa,11,"#06b6d4"),Y.save(),Y.textAlign="right",Y.textBaseline="bottom",Y.fillStyle="#3b82f6",Y.font="bold 80px sans-serif",Y.shadowColor=Me?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",Y.shadowBlur=4,Y.shadowOffsetX=2,Y.shadowOffsetY=2;const Gr=1988,To=1476,su=90;Y.fillText("Online",Gr,To),Y.fillText("Jiangtherapee",Gr,To-su),Y.restore();const vi=document.createElement("a");vi.download=`ptc_complete_${f}_${Date.now()}.jpg`,vi.href=be.toDataURL("image/jpeg",.9),vi.click()},[sr,xr,j,A,E,B,F,vt,pt,kt,At,p,s,f,ie,i,Pt,Ue,br,lr,Rt,oe,Ve,Je,wt,_e,fr,z,Ct,Cr,Mt,L,le]),we=C.useMemo(()=>{let re=sr;if(p&&(re=re.filter(Me=>Me.y>0&&Me.x>0)),k==="top3"){const Me=[...re].sort((st,Et)=>Et.x-st.x),nt=Math.max(50,Math.ceil(Me.length*.03));re=Me.slice(0,nt)}const ye={R:[],G1:[],G2:[],B:[]};if(re.forEach(Me=>{ye[Me.channel]&&ye[Me.channel].push(Me)}),k==="raw")return ye;const be=k==="top3"?500:Lre,Y=Me=>{if(Me.length<=be)return Me;const nt=[...Me].sort((St,lt)=>St.x-lt.x),st=[],Et=nt.length/be;for(let St=0;St<be;St++){const lt=Math.floor(St*Et),pr=Math.floor((St+1)*Et),cr=nt.slice(lt,pr);if(cr.length===0)continue;cr.sort((ct,Ce)=>ct.y-Ce.y);const nr=Math.floor(cr.length/2);st.push(cr[nr])}return st};return{R:Y(ye.R),G1:Y(ye.G1),G2:Y(ye.G2),B:Y(ye.B)}},[sr,k,p]),Ne=C.useMemo(()=>{if(tr.length<5)return[];const re=tr.filter(be=>be.channel===xr);return[...re.length>20?re:tr].sort((be,Y)=>be.x-Y.x).map(be=>({mean:be.x,std:be.std}))},[tr,xr]),Nt=re=>{const ye=re.length;if(ye===0)return[];const be=re.reduce((De,tt)=>De+tt,0)/ye,Y=re.reduce((De,tt)=>De+Math.pow(tt-be,2),0)/(ye-1||1),Me=Math.sqrt(Y);if(Me===0)return[{x:be-.001,density:0},{x:be,density:1},{x:be+.001,density:0}];const nt=1.06*Me*Math.pow(ye,-.2),st=Math.min(...re),Et=Math.max(...re),St=(Et-st)*.2||st*.1,lt=Math.max(0,st-St),pr=Et+St,cr=100,nr=(pr-lt)/(cr-1),ct=De=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*De*De),Ce=[];for(let De=0;De<cr;De++){const tt=lt+De*nr;let ae=0;for(let ke=0;ke<ye;ke++)ae+=ct((tt-re[ke])/nt);ae/=ye*nt,Ce.push({x:tt,density:ae})}return Ce},Ze=C.useCallback((re,ye,be,Y)=>{if(re.length<5)return{gain:0,prnu:0};const Me=re[re.length-1].mean,nt=Me*(be.min/100),st=Me*(be.max/100),Et=re.filter(it=>it.mean>=nt&&it.mean<=st);if(Et.length<5)return{gain:0,prnu:0};Ir({nPoints:Et.length});const St=ye*ye,lt=[],pr=[];if(Et.forEach(it=>{const Vt=it.std*it.std-St;if(it.mean>1&&Vt>0){const Er=it.mean,An=Vt/it.mean;lt.push({x:Er,y:An}),pr.push(it.mean/Vt)}}),lt.length<5)return{gain:0,prnu:0};const cr=[],nr=lt.length,ct=Y,Ce=nr*(nr-1)/2;if(Ce<=ct)for(let it=0;it<nr;it++)for(let Bt=it+1;Bt<nr;Bt++){const Vt=lt[Bt].x-lt[it].x;Math.abs(Vt)>1e-5&&cr.push((lt[Bt].y-lt[it].y)/Vt)}else{const it=Math.max(1,Math.floor(Ce/ct));for(let Bt=0;Bt<nr;Bt++)for(let Vt=Bt+1;Vt<nr;Vt+=it){const Er=lt[Vt].x-lt[Bt].x;Math.abs(Er)>1e-5&&cr.push((lt[Vt].y-lt[Bt].y)/Er)}}const De=zm(cr),tt=lt.map(it=>it.y-De*it.x),ae=zm(tt);let ke=0,dt=0;if(ae>1e-6?ke=1/ae:ke=zm(pr),De>0&&(dt=Math.sqrt(De)*100),pr.length>0){const it=Nt(pr);_r(it),Tr(ke)}else _r([]);return{gain:ke,prnu:dt}},[]),ot=C.useCallback(re=>{let ye=re.read??mr.current.readNoise;const be=re.gRange??jr.current,Y=tn.current;if((re.read!==void 0||re.gRange!==void 0)&&re.gain===void 0&&re.prnu===void 0&&Ne.length>0&&ye>=0)S(!0),setTimeout(()=>{const nt=Ze(Ne,ye,be,Y);let st=mr.current.gain,Et=mr.current.prnu;nt.gain>0&&(st=nt.gain,Et=nt.prnu),ht({readNoise:ye,gain:st,prnu:Et}),re.gRange!==void 0&&Sr(re.gRange),Xr(St=>{var lt,pr;return{...St,read:ye.toString(),gain:st>0?st.toFixed(3):"0",prnu:Et.toFixed(2),rangeMin:(((lt=re.gRange)==null?void 0:lt.min)??St.rangeMin).toString(),rangeMax:(((pr=re.gRange)==null?void 0:pr.max)??St.rangeMax).toString()}}),S(!1)},50);else{let nt=re.gain!==void 0?re.gain:mr.current.gain,st=re.prnu!==void 0?re.prnu:mr.current.prnu;ht({readNoise:ye,gain:nt,prnu:st}),re.gRange!==void 0&&Sr(re.gRange),Xr(Et=>{var St,lt;return{...Et,read:ye.toString(),gain:nt>0?nt.toFixed(3):"0",prnu:st.toFixed(2),rangeMin:(((St=re.gRange)==null?void 0:St.min)??Et.rangeMin).toString(),rangeMax:(((lt=re.gRange)==null?void 0:lt.max)??Et.rangeMax).toString()}})}},[Ne,Ze]),gt=`${K}-${r.length}`;C.useEffect(()=>{if(!e||!r||r.length===0)return;const re=we[xr];if(!re||re.length===0||Pr===gt)return;O({R:xr==="R",G1:xr==="G1",G2:xr==="G2",B:xr==="B"});const ye=[...re].sort((nt,st)=>nt.x-st.x);let be=0;ye.length>0&&(be=ye[0].std);const Y=tr.filter(nt=>nt.channel===xr);let Me=-1/0;for(const nt of Y)nt.x>Me&&(Me=nt.x);Me!==-1/0&&pe(Me),ot({read:be}),nn(gt)},[e,r,Pr,gt,we,xr,ot,tr]);const It=(re,ye)=>{Xr(be=>({...be,[re]:ye}))},zr=re=>{let ye=parseFloat(Mt[re]);isNaN(ye)||ye<0||ot({[re]:ye})},an=()=>{q(Z),nn("")},Kt=()=>{const re=parseFloat(Mt.rangeMin),ye=parseFloat(Mt.rangeMax);!isNaN(re)&&!isNaN(ye)&&re<ye&&re>=0&&ye<=100&&ot({gRange:{min:re,max:ye}})},Mn=(re,ye)=>{re.key==="Enter"&&(ye==="rangeMin"||ye==="rangeMax"?Kt():zr(ye),re.target.blur())};C.useEffect(()=>{e&&Ne.length>0&&ot({})},[e,Qt,Ne]);const Nr=re=>{O(ye=>({...ye,[re]:!ye[re]}))},gn=()=>{v(re=>re==="top3"?"default":"top3")},Wt=()=>{k==="raw"?v("default"):w(!0)},Ft=()=>{w(!1),v("raw")},Ur=(re,ye)=>{const be=parseFloat(re),Y=parseFloat(ye);let Me=isNaN(be)?"auto":be,nt=isNaN(Y)?"auto":Y;return p&&typeof Me=="number"&&Me<=0&&(Me="auto"),[Me,nt]},Fe=re=>{if(!re||!re.payload)return;const ye=re.payload;if(b(ye),jt.current&&(pe(ye.x),ve(!1)),hr.current){const be=jr.current.min,Y=jr.current.max,{max:Me}=M();if(Me<=0)return;const nt=Math.max(0,Math.min(100,ye.x/Me*100));if(_t.current===1){const st=Math.min(nt,Y-.5);ot({gRange:{min:st,max:Y}}),ge(2)}else if(_t.current===2){const st=Math.max(nt,be+.5);ot({gRange:{min:be,max:st}}),ge(0),V(!1)}}},rr=C.useCallback(re=>{const{cx:ye,cy:be,fill:Y}=re;return l.jsx("circle",{cx:ye,cy:be,r:3,fill:Y,stroke:"none",style:{cursor:"pointer"}})},[]),mn=({active:re,payload:ye})=>{if(re&&ye&&ye.length){const be=ye[0].payload;return l.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[l.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:be.channel}),l.jsxs("div",{children:["Signal: ",be.x.toFixed(2)]}),l.jsxs("div",{children:[f,": ",be.y.toFixed(4)]}),be.row!==void 0&&be.col!==void 0&&!isNaN(be.row)&&!isNaN(be.col)&&l.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",be.row,", Col ",be.col]}),be.filename&&l.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:be.filename,children:be.filename})]})}return null},Kn=re=>{d(re),re==="Linear"&&m(!1)};if(!e)return null;const ca=s==="dark"?"#ffffff":"#000000";let wr=f;f==="Linear"&&(wr="(Var - RN) / Mean");const Za=Z!==K;return l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:re=>{re.stopPropagation()},children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:re=>re.stopPropagation(),children:[l.jsx(os,{isOpen:y,onClose:()=>w(!1),onConfirm:Ft,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),x&&l.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[l.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),l.jsx("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:l.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),l.jsx("span",{className:"font-bold",children:x.channel}),l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),l.jsx("span",{children:x.x.toFixed(4)}),l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),l.jsx("span",{children:x.std.toFixed(4)}),l.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),l.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(x.x/x.std).toFixed(2)})]})})]}),ze&&l.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[l.jsx("button",{onClick:()=>cn(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),l.jsxs("div",{className:"mb-4 text-center",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",l.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:jn==null?void 0:jn.toFixed(4)}),l.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",Lr.length>0?"Density Curve Generated":"No Data"]})]}),l.jsx("div",{className:"flex-1 min-h-0",children:Lr.length>0?l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(jN,{data:Lr,margin:{top:10,right:30,left:0,bottom:20},children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),l.jsx(_a,{dataKey:"x",tickFormatter:re=>re.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),l.jsx(Pa,{tick:{fill:"#9ca3af",fontSize:10}}),l.jsx(Un,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),l.jsx(ui,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),jn!==null&&l.jsx(Yo,{x:jn,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):l.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),l.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",l.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("button",{onClick:R,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),l.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>Kn("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),l.jsx("button",{onClick:()=>Kn("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),l.jsx("button",{onClick:()=>Kn("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),l.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:p,onChange:re=>m(re.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[l.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),l.jsx("input",{type:"number",placeholder:"Min",value:A,onChange:re=>$(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",placeholder:"Max",value:E,onChange:re=>T(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),l.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),l.jsx("input",{type:"number",placeholder:"Min",value:B,onChange:re=>U(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",placeholder:"Max",value:F,onChange:re=>G(re.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),l.jsx("button",{onClick:()=>{$(""),T(""),U(""),G("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),l.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[l.jsx("button",{onClick:()=>Nr("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${j.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),l.jsx("button",{onClick:()=>Nr("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${j.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),l.jsx("button",{onClick:()=>Nr("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${j.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),l.jsx("button",{onClick:()=>Nr("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${j.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[l.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[l.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),l.jsx("input",{type:"text",value:Z,onChange:re=>te(re.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),l.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),l.jsx("button",{onClick:()=>{V(!oe),ge(oe?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${oe?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:oe?se===1?"Pick Min":"Pick Max":"Select"})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[l.jsx("input",{type:"number",step:"0.1",value:Mt.rangeMin,onChange:re=>It("rangeMin",re.target.value),onBlur:Kt,onKeyDown:re=>Mn(re,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),l.jsx("span",{className:"text-gray-400",children:"-"}),l.jsx("input",{type:"number",step:"0.1",value:Mt.rangeMax,onChange:re=>It("rangeMax",re.target.value),onBlur:Kt,onKeyDown:re=>Mn(re,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),l.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[l.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),l.jsx("input",{type:"number",value:L,onChange:re=>H(re.target.value),onKeyDown:Xn,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),l.jsx("input",{type:"number",value:z,onChange:re=>I(re.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[l.jsx("button",{onClick:()=>{ve(!J),ie&&pe(null)},disabled:oe,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${J?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:J?"Pick Point":"Select Linear Limit"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:gn,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${k==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),l.jsx("button",{onClick:Wt,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${k==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[l.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:Ve,onChange:re=>He(re.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),l.jsx("input",{type:"text",value:Je,onChange:re=>yt(re.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),l.jsx("input",{type:"text",value:wt,onChange:re=>ir(re.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[l.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("input",{type:"number",value:Se,onChange:re=>me(re.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),l.jsx("input",{type:"number",value:he,onChange:re=>Pe(re.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),l.jsx("button",{onClick:$e,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),le.length>0&&l.jsx("button",{onClick:()=>je([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),l.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[le.length," pts"]})]}),l.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.shot,onChange:re=>rn({...Pt,shot:re.target.checked}),className:"rounded text-gray-500"})," ",l.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.read,onChange:re=>rn({...Pt,read:re.target.checked}),className:"rounded text-rose-500"})," ",l.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.prnu,onChange:re=>rn({...Pt,prnu:re.target.checked}),className:"rounded text-amber-500"})," ",l.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[l.jsx("input",{type:"checkbox",checked:Pt.total,onChange:re=>rn({...Pt,total:re.target.checked}),className:"rounded text-white"})," ",l.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),l.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[l.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",xr,")",P&&l.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("button",{onClick:an,disabled:P,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${P?"bg-gray-400 cursor-wait":Za?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:P?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),l.jsxs("select",{value:Qt,onChange:re=>Lt(Number(re.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[l.jsx("option",{value:1e5,children:"100k Pairs"}),l.jsx("option",{value:5e5,children:"500k Pairs"}),l.jsx("option",{value:2e6,children:"2M Pairs"}),l.jsx("option",{value:5e6,children:"5M Pairs"}),l.jsx("option",{value:1e7,children:"10M Pairs"})]}),or&&l.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",or.nPoints]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),l.jsx("input",{type:"text",inputMode:"decimal",value:Mt.read,onChange:re=>It("read",re.target.value),onBlur:()=>zr("read"),onKeyDown:re=>Mn(re,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),l.jsxs("div",{className:"flex flex-col items-center relative group",children:[l.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",l.jsx("button",{onClick:()=>cn(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),l.jsx("input",{type:"text",inputMode:"decimal",value:Mt.gain,onChange:re=>It("gain",re.target.value),onBlur:()=>zr("gain"),onKeyDown:re=>Mn(re,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),l.jsx("input",{type:"text",inputMode:"decimal",value:Mt.prnu,onChange:re=>It("prnu",re.target.value),onBlur:()=>zr("prnu"),onKeyDown:re=>Mn(re,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),l.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[l.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(_e==null?void 0:_e.manualTarget)||z}`,children:["M.DR @ SNR=",(_e==null?void 0:_e.manualTarget)||z]}),l.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:_e!=null&&_e.manualDR?`${_e.manualDR.toFixed(2)} EV`:"--"})]}),l.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((_e==null?void 0:_e.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${L||"H"})`,children:[l.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),l.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:_e!=null&&_e.ptpDR?`${_e.ptpDR.toFixed(2)} EV`:"--"})]}),l.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((_e==null?void 0:_e.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${L||"H"} on ${_e==null?void 0:_e.dominantChannel} Channel)`,children:[l.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",_e==null?void 0:_e.dominantChannel,")"]}),l.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:_e!=null&&_e.d55DR?`${_e.d55DR.toFixed(2)} EV`:"--"})]}),l.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[l.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),l.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:fr!==null?`${Math.round(fr)}`:"",children:fr!==null?fr>1e4?`${(fr/1e3).toFixed(1)}k`:`${Math.round(fr)}`:"--"})]})]}),ie===null&&l.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),l.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${J||oe?"cursor-crosshair":""}`,children:[l.jsx("div",{className:"row-start-1 col-start-1 h-full",children:l.jsx(c4,{vertical:!0,min:kt,max:At,value:[B?parseFloat(B):kt,F?parseFloat(F):At],onChange:([re,ye])=>{U(re.toString()),G(ye.toString())},logScale:p})}),l.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[sr.length===0?l.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Pre,{margin:{top:20,right:20,bottom:0,left:0},onClick:Fe,children:[l.jsx("defs",{children:l.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[l.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"coloredBlur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),l.jsx(_a,{type:"number",dataKey:"x",name:"Signal",scale:p?"log":"linear",domain:Ur(A,E),allowDataOverflow:!0,hide:!0}),l.jsx(Pa,{type:"number",dataKey:"y",name:f,scale:p?"log":"linear",domain:Ur(B,F),label:{value:wr,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),l.jsx(Un,{content:l.jsx(mn,{}),cursor:{strokeDasharray:"3 3"}}),ie&&l.jsx(Yo,{x:ie,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(Pt.fitRange||oe)&&l.jsxs(l.Fragment,{children:[l.jsx(Yo,{x:br,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${Rt.min}%`,fill:"#22d3ee",fontSize:9}}),l.jsx(Yo,{x:lr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${Rt.max}%`,fill:"#22d3ee",fontSize:9}})]}),j.R&&l.jsx(ka,{name:"Red",data:we.R,fill:"#ef4444",shape:rr,onClick:Fe,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),j.G1&&l.jsx(ka,{name:"Green 1",data:we.G1,fill:"#22c55e",shape:rr,onClick:Fe,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),j.G2&&l.jsx(ka,{name:"Green 2",data:we.G2,fill:"#4ade80",shape:rr,onClick:Fe,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),j.B&&l.jsx(ka,{name:"Blue",data:we.B,fill:"#3b82f6",shape:rr,onClick:Fe,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),Pt.shot&&Ue.shot.length>0&&l.jsx(ka,{name:"Shot Noise (Ideal)",data:Ue.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),Pt.read&&Ue.read.length>0&&l.jsx(ka,{name:"Read Noise Floor",data:Ue.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),Pt.prnu&&Ue.prnu.length>0&&l.jsx(ka,{name:"PRNU (Non-uniformity)",data:Ue.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),Pt.total&&Ue.total.length>0&&l.jsx(ka,{name:"Total Noise Model",data:Ue.total,line:{stroke:ca,strokeWidth:2},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),Ct.length>0&&l.jsx(ka,{name:`Target SNR=${z}`,data:Ct,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),Cr.length>0&&l.jsx(ka,{name:`PTP Target SNR=${_e!=null&&_e.ptpTarget?_e.ptpTarget.toFixed(1):"?"}`,data:Cr,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>l.jsx(l.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),le.length>0&&l.jsx(ka,{name:"Manual Markers",data:le,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),l.jsx("div",{className:"row-start-2 col-start-2 w-full",children:l.jsx(c4,{min:vt,max:pt,value:[A?parseFloat(A):vt,E?parseFloat(E):pt],onChange:([re,ye])=>{$(re.toString()),T(ye.toString())},logScale:p})})]})]})})},Bre=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>l.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"relative md:col-span-3",children:[l.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),l.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),l.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>l.jsx("option",{value:s,children:s},s))}),l.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[l.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>l.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),zre=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return l.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[l.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),l.jsx("div",{className:"mt-2 space-y-1 text-sm",children:l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),l.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),l.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),l.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},Ure=({data:e,theme:t="dark"})=>{const r=C.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=C.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(x=>[...x.R_range,...x.G1_range,...x.G2_range,...x.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),c=Math.max(...o);const u=.25,f=c-s;if(f<u){const x=u-f;s-=x/2,c+=x/2}const d=(c-s)*.1,p=s-d,m=c+d;return[p,m]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?l.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:l.jsx("p",{children:"No data available for this mode."})}):l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(jN,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:a}),l.jsx(_a,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),l.jsx(Pa,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),l.jsx(Un,{content:l.jsx(zre,{theme:t})}),l.jsx(Ki,{wrapperStyle:{fontSize:"14px",color:i}}),l.jsx(ui,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),l.jsx(Sn,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),l.jsx(ui,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),l.jsx(Sn,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),l.jsx(ui,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),l.jsx(Sn,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),l.jsx(ui,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),l.jsx(Sn,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},Gre=Q.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=C.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=C.useState(n[0]||""),{chartData:o,tableData:s}=C.useMemo(()=>{const d=e.shootingModes.find(x=>x.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const p=d.data.map(x=>({iso:x.iso,R_range:x.r.range,R_avg:x.r.avg,G1_range:x.g1.range,G1_avg:x.g1.avg,B_range:x.b.range,B_avg:x.b.avg,G2_range:x.g2.range,G2_avg:x.g2.avg})),m=d.data.map(x=>({iso:x.iso,levels:[x.r.avg,x.g1.avg,x.g2.avg,x.b.avg],clipping:x.clipping}));return{chartData:p,tableData:m}},[e.shootingModes,a]),c=`Raw Data (${a})`,u=C.useRef(null),f=C.useRef(null);return C.useEffect(()=>{const d=u.current,p=f.current;if(!d||!p)return;const m=new ResizeObserver(x=>{for(let b of x){const{width:k}=b.contentRect,y=Math.max(8,k/35);p.style.fontSize=`${y}px`}});return m.observe(d),()=>m.disconnect()},[]),l.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[l.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),l.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),l.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>l.jsx("option",{value:d,children:d},d))})]}),l.jsxs("div",{ref:u,className:"h-64 relative",children:[l.jsx(Ure,{data:o,theme:t},a),l.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:l.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),l.jsxs("div",{className:"overflow-x-auto",children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:c})}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),l.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),l.jsx("tbody",{children:s.map(({iso:d,levels:p,clipping:m})=>l.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[l.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,m&&l.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),l.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:p[0].toFixed(2)}),l.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:p[1].toFixed(2)}),l.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:p[3].toFixed(2)}),l.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:p[2].toFixed(2)})]},d))})]})]})]})}),Be=(e,t,r)=>({avg:e,range:[t,r]}),Um=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:Be(512.1,511.95,512.25),g1:Be(512.05,511.9,512.2),b:Be(512.12,511.98,512.28),g2:Be(512.06,511.92,512.22)},{iso:200,r:Be(512.15,512,512.3),g1:Be(512.1,511.95,512.25),b:Be(512.18,512.05,512.35),g2:Be(512.12,511.98,512.28)},{iso:400,r:Be(512.25,512.1,512.45),g1:Be(512.2,512.05,512.4),b:Be(512.3,512.15,512.5),g2:Be(512.22,512.08,512.42)},{iso:800,r:Be(512.5,512.2,512.8),g1:Be(512.45,512.15,512.75),b:Be(512.55,512.25,512.85),g2:Be(512.48,512.18,512.78)},{iso:1600,r:Be(513.1,512.8,513.4),g1:Be(513.05,512.75,513.35),b:Be(513.15,512.85,513.45),g2:Be(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:Be(512.02,511.98,512.05),g1:Be(512.01,511.97,512.04),b:Be(512.03,511.99,512.06),g2:Be(512.01,511.97,512.04)},{iso:640,r:Be(512.15,512.05,512.25),g1:Be(512.12,512.02,512.22),b:Be(512.18,512.08,512.28),g2:Be(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Be(512,511.8,512.2),g1:Be(512,511.8,512.2),b:Be(512,511.8,512.2),g2:Be(512,511.8,512.2)},{iso:400,r:Be(512,511.7,512.3),g1:Be(512,511.7,512.3),b:Be(512,511.7,512.3),g2:Be(512,511.7,512.3)},{iso:1600,r:Be(512.2,511.5,512.8),g1:Be(512.2,511.5,512.8),b:Be(512.2,511.5,512.8),g2:Be(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Be(511.95,511.8,512.1),g1:Be(511.95,511.8,512.1),b:Be(511.95,511.8,512.1),g2:Be(511.95,511.8,512.1)},{iso:800,r:Be(512.1,511.9,512.3),g1:Be(512.1,511.9,512.3),b:Be(512.1,511.9,512.3),g2:Be(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:Be(400,399.9,400.1),g1:Be(400,399.9,400.1),b:Be(400,399.9,400.1),g2:Be(400,399.9,400.1)},{iso:100,r:Be(400,399.9,400.1),g1:Be(400,399.9,400.1),b:Be(400,399.9,400.1),g2:Be(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:Be(400.1,399.8,400.3),g1:Be(400.1,399.8,400.3),b:Be(400.1,399.8,400.3),g2:Be(400.1,399.8,400.3)},{iso:800,r:Be(400.3,399.5,401.1),g1:Be(400.3,399.5,401.1),b:Be(400.3,399.5,401.1),g2:Be(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:Be(1024,1023.8,1024.2),g1:Be(1024,1023.8,1024.2),b:Be(1024,1023.8,1024.2),g2:Be(1024,1023.8,1024.2)},{iso:800,r:Be(1024.2,1023.5,1025),g1:Be(1024.2,1023.5,1025),b:Be(1024.2,1023.5,1025),g2:Be(1024.2,1023.5,1025)}]}]}],Wre=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=C.useState(""),[i,o]=C.useState("All"),s=C.useMemo(()=>["All",...Array.from(new Set(Um.map(d=>d.manufacturer))).sort()],[]),c=C.useMemo(()=>Um.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),p=i==="All"||f.manufacturer===i;return d&&p}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",l.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Um.length," Models"]})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:l.jsx(Bre,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:c,onCameraSelect:u})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[c.map(f=>l.jsx("div",{id:`camera-${f.id}`,children:l.jsx(Gre,{camera:f,theme:r})},f.id)),c.length===0&&l.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:l.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Vre=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=C.useState(""),[i,o]=C.useState(""),[s,c]=C.useState(""),[u,f]=C.useState(""),[d,p]=C.useState(null),m=()=>{const x=parseFloat(n),b=parseFloat(i),k=parseFloat(s),v=parseFloat(u);if(isNaN(x)||isNaN(b)||isNaN(k)||isNaN(v)){p(null);return}const y=x,w=b,P=k*k,S=v*v,j=(y+w)/2;if(j<=1e-9){p(0);return}const O=P*S/j,A=Math.sqrt(O);p(A)};return e?l.jsxs(ks,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[l.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),l.jsx("input",{type:"number",step:"any",value:n,onChange:x=>a(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),l.jsx("input",{type:"number",step:"any",value:i,onChange:x=>o(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),l.jsx("input",{type:"number",step:"any",value:s,onChange:x=>c(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),l.jsx("input",{type:"number",step:"any",value:u,onChange:x=>f(x.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),l.jsx("button",{onClick:m,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&l.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[l.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),l.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},bx=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],Hre=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function Xre(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),p=Math.hypot(n.x-r.x,n.y-r.y),m=Math.hypot(r.x-e.x,r.y-e.y),x=Math.hypot(n.x-t.x,n.y-t.y),b=(d+p)/2/5,k=(m+x)/2/3,v=b*f,y=k*f;for(let w=0;w<4;w++)for(let P=0;P<6;P++){const S=P/5,j=w/3,O=(1-S)*(1-j)*e.x+S*(1-j)*t.x+(1-S)*j*r.x+S*j*n.x,A=(1-S)*(1-j)*e.y+S*(1-j)*t.y+(1-S)*j*r.y+S*j*n.y;u.push({x:O-v/2,y:A-y/2,w:v,h:y})}return u}function _N(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function m0(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let c=0;c<i;c++)for(let u=0;u<n;u++)o[s][c]+=e[s][u]*t[u][c];return o}function Kre(e,t){const r=_N(e),n=m0(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=pf(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=m0(r,t);return m0(o,s)}function qre(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const c=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=c*r[n][u]}}return r.map(n=>n.slice(t))}function Yre(e,t,r){const n=[...e].sort((b,k)=>b.id-k.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(b=>{const k=b.rawMeans,v=[k[0]-t[0],k[1]-t[1],k[2]-t[2],k[3]-t[3]];let y,w,P;r?(P=v[0],w=(v[1]+v[2])/2,y=v[3]):(y=v[0],w=(v[1]+v[2])/2,P=v[3]),y=Math.max(0,y),w=Math.max(0,w),P=Math.max(0,P),a.push([y,w,P])});const o=a[18],s=(o[0]+o[1]+o[2])/3,c=1/Math.max(1e-9,s),u=a.map(b=>[b[0]*c,b[1]*c,b[2]*c]),d=Kre(u,bx),p=_N(d);let m;try{m=qre(p)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:m0(m,Hre)}}const Zre=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,c]=C.useState(n),[u,f]=C.useState(["0","0","0","0"]),[d,p]=C.useState(null),[m,x]=C.useState(null);if(C.useEffect(()=>{if(e&&r&&r.length===24){const j=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([j[0].toFixed(2),j[1].toFixed(2),j[2].toFixed(2),j[3].toFixed(2)])}},[e,r]),C.useEffect(()=>{if(!e||!r||r.length!==24)return;const S=u.map(j=>parseFloat(j));if(!S.some(isNaN))try{const j=Yre(r,S,s);p(j),x(null)}catch(j){x(j.message)}},[e,r,s,u]),!e)return null;const b=(S,j)=>{f(O=>{const A=[...O];return A[S]=j,A})},k=S=>{navigator.clipboard.writeText(S)},v=S=>S?S.map(j=>j.map(O=>O.toFixed(4))):[],y=d?v(d.matrix).flat().join(" "):"",w=s?["B","G1","G2","R"]:["R","G1","G2","B"],P=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return l.jsxs(ks,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[l.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),l.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),l.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:S=>o(parseFloat(S.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),l.jsx("div",{className:"flex justify-center",children:l.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:()=>c(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),l.jsx("button",{onClick:()=>c(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),l.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[l.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(S=>l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:`text-[10px] font-bold mb-1 ${P[S]}`,children:w[S]}),l.jsx("input",{type:"number",step:"0.01",value:u[S],onChange:j=>b(S,j.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},S))})]}),m?l.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:m}):d?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[l.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),l.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:v(d.matrix).map((S,j)=>l.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[l.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:S[0]}),l.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:S[1]}),l.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:S[2]})]},j))}),l.jsx("button",{onClick:()=>k(y),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):l.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function Eb(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let c=0;c<r;c++)n+=e[c],a+=t[c],i+=e[c]*t[c],o+=e[c]*e[c];const s=r*o-n*n;return s===0?{slope:0,intercept:0}:{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function Qre(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function Jre(e){const t=new Array(e.length).fill(0);t[0]=e[0];for(let r=1;r<e.length;r++){let n=e[r]-e[r-1];n>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI),t[r]=t[r-1]+n}return t}function ene(e){const t=e.length,r=new Array(t).fill(0).map((i,o)=>o),{slope:n,intercept:a}=Eb(r,e);return e.map((i,o)=>i-(n*o+a))}function tne(e,t,r="RGGB"){const n=r.toUpperCase(),a=t%2,i=e%2;return n==="RGGB"||n==="BGGR"?(a+i)%2!==0:n==="GBRG"||n==="GRBG"?(a+i)%2===0:(a+i)%2!==0}function wx(e,t,r,n,a){const i=Math.floor(n.x),o=Math.floor(n.y),s=Math.floor(n.w),c=Math.floor(n.h);if(s<8||c<8)return null;let u=[];for(let V=0;V<c;V++){const se=[],ge=(o+V)*t;for(let le=0;le<s;le++)se.push(e[ge+i+le]);u.push(se)}let f=0,d=0;for(let V=1;V<c-1;V+=2)for(let se=1;se<s-1;se+=2)f+=Math.abs(u[V][se+1]-u[V][se-1]),d+=Math.abs(u[V+1][se]-u[V-1][se]);let p=s,m=c,x=u,b=2,k=!1;if(d>f){b=1,k=!0,x=Array(s).fill(0).map(()=>Array(c).fill(0));for(let V=0;V<c;V++)for(let se=0;se<s;se++)x[se][c-1-V]=u[V][se];p=c,m=s}else b=2;const v=[],y=[];for(let V=0;V<m;V++){const se=x[V],ge=se.map((Se,me)=>me===0?0:Math.abs(Se-se[me-1])),le=Math.max(...ge),je=ge.indexOf(le);if(le>1){const Se=Math.max(0,je-3),me=Math.min(p,je+4);let he=0,Pe=0;for(let $e=Se;$e<me;$e++)he+=ge[$e],Pe+=$e*ge[$e];he>0&&(v.push(Pe/he),y.push(V))}}if(v.length<m*.4)return null;const{slope:w,intercept:P}=Eb(y,v),S=Math.cos(Math.atan(w)),j=[],O=[],A=(a==null?void 0:a.greenOnly)??!1,$=(a==null?void 0:a.globalX)??0,E=(a==null?void 0:a.globalY)??0,T=(a==null?void 0:a.bayerPattern)||"RGGB";for(let V=0;V<m;V++){const se=w*V+P;for(let ge=0;ge<p;ge++){if(A){let le,je;if(k){const Se=c-1-ge,me=V;le=$+i+me,je=E+o+Se}else le=$+i+ge,je=E+o+V;if(!tne(le,je,T))continue}j.push((ge-se)*S),O.push(x[V][ge])}}const U=Math.min(s,c)/2;let F=0;for(const V of j)Math.abs(V)<=U&&F++;let G=.125;if(a!=null&&a.manualBinSize&&a.manualBinSize>0)G=Math.max(.01,Math.min(.5,a.manualBinSize));else if(F>0){const V=40*U/F;G=Math.max(.01,Math.min(.125,V))}const z=G,I=Array.from(j.keys()).sort((V,se)=>j[V]-j[se]),L=I.map(V=>j[V]),H=I.map(V=>O[V]);if(L.length===0)return null;const Z=L[0],te=L[L.length-1],K=Math.floor((te-Z)/z),q=new Array(K).fill(0),J=new Array(K).fill(0);for(let V=0;V<L.length;V++){const se=Math.floor((L[V]-Z)/z);se>=0&&se<K&&(q[se]+=H[V],J[se]++)}let ve=H[0];for(let V=0;V<K;V++)J[V]>0?(q[V]/=J[V],ve=q[V]):q[V]=ve;const ie=q.slice(0,10).reduce((V,se)=>V+se,0)/10,pe=q.slice(-10).reduce((V,se)=>V+se,0)/10;if(ie>pe){const V=Math.max(...q),se=Math.min(...q);for(let ge=0;ge<q.length;ge++)q[ge]=V-q[ge]+se}const oe=Qre(q,z);return{esf:q,lsfFull:oe,binSize:z,orientation:b}}function PN(e,t,r,n=!1,a=0,i=!1){if(e.length===0)return null;const o=4096,s=new nl(o),c=r?1e3/r:1,u=new Float32Array(501);for(let y=0;y<=500;y++)u[y]=y/500*c*2;const f=new Float32Array(501).fill(0);let d=0,p=[],m=[],x=0,b=[];for(const y of e){let w=[...y.lsfFull];const P=y.binSize;let S=0,j=-1/0;for(let J=0;J<w.length;J++)w[J]>j&&(j=w[J],S=J);const O=j*.2;let A=0,$=w.length-1;for(let J=S;J>=0;J--)if(w[J]<O){A=J;break}for(let J=S;J<w.length;J++)if(w[J]<O){$=J;break}const E=$-A;let T=!1;if(n&&E>0){const J=E*4,ve=[],ie=[];if(a>0){const pe=Math.max(0,S-J-a),oe=Math.max(0,S-J);for(let ge=pe;ge<oe;ge++)ve.push(ge),ie.push(w[ge]);const V=Math.min(w.length,S+J),se=Math.min(w.length,S+J+a);for(let ge=V;ge<se;ge++)ve.push(ge),ie.push(w[ge])}else{for(let pe=0;pe<Math.max(0,S-J);pe++)ve.push(pe),ie.push(w[pe]);for(let pe=Math.min(w.length,S+J);pe<w.length;pe++)ve.push(pe),ie.push(w[pe])}if(ve.length>2){const{slope:pe,intercept:oe}=Eb(ve,ie);for(let V=0;V<w.length;V++)w[V]=w[V]-(pe*V+oe);j=-1/0;for(let V=0;V<w.length;V++)w[V]>j&&(j=w[V],S=V);T=!0}}let B=0,U=0;if(t>0)U=t,B=Math.round(t/P);else{const J=j*.2;let ve=0,ie=w.length-1;for(let se=S;se>=0;se--)if(w[se]<J){ve=se;break}for(let se=S;se<w.length;se++)if(w[se]<J){ie=se;break}const oe=(ie-ve)*P;let V=Math.max(2,oe*8);U=V,B=Math.round(V/P)}x+=U;const F=Math.max(0,S-B),G=Math.min(w.length,S+B),z=w.slice(F,G);if(z.length<8)continue;const I=new Float32Array(o).fill(0);let L=-1/0,H=0;for(let J=0;J<z.length;J++)z[J]>L&&(L=z[J],H=J);for(let J=0;J<z.length;J++){let ve=1;i&&(ve=.5*(1-Math.cos(2*Math.PI*J/(z.length-1))));const ie=z[J]*ve,pe=(J-H+o)%o;I[pe]=ie}s.transform(I);const Z=[],te=[],K=[];for(let J=0;J<=o/2;J++){const ve=s._real[J],ie=s._imag[J],pe=Math.sqrt(ve*ve+ie*ie);Z.push(pe),te.push(J/(o*P)*c),K.push(Math.atan2(ie,ve))}const q=Z[0];if(q>0){for(let J=0;J<=500;J++){const ve=u[J];f[J]+=u4(ve,te,Z)/q}if(d++,p.length===0){p=z,m=T?rne(w):y.esf;const J=Jre(K),ve=ene(J);for(let ie=0;ie<=500;ie++){const pe=u[ie];b.push(u4(pe,te,ve))}}}}if(d===0)return null;const k=Array.from(f).map(y=>y/d);let v=null;for(let y=0;y<k.length-1;y++)if(k[y]>=.5&&k[y+1]<.5){v=u[y]+(.5-k[y])*(u[y+1]-u[y])/(k[y+1]-k[y]);break}return{esf:m,lsf:[],lsfCropped:p,mtf:k,ptf:b,freqs:Array.from(u),mtf50:v,calcRadius:x/d}}function rne(e){const t=new Array(e.length).fill(0);let r=0;for(let n=0;n<e.length;n++)r+=e[n],t[n]=r;return t}function u4(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const $o=({locked:e,onToggle:t,title:r})=>l.jsx("span",{className:"inline-flex items-center justify-center p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors cursor-pointer select-none",title:r??(e?"Locked (Auto Fit will NOT change)":"Unlocked (Auto Fit may change)"),onMouseDown:n=>{n.stopPropagation()},onClick:n=>{n.stopPropagation(),t()},children:l.jsx("span",{className:`w-4 h-4 rounded-full border-2 transition-all active:scale-90 flex items-center justify-center ${e?"border-indigo-600 bg-indigo-600":"border-gray-400 dark:border-slate-500 bg-transparent hover:border-gray-500"}`,children:e&&l.jsx("span",{className:"w-2 h-2 rounded-full bg-white"})})}),nne=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o,isSfrLabOpen:s})=>{const[c,u]=C.useState([]),[f,d]=C.useState(""),[p,m]=C.useState(""),[x,b]=C.useState(12),[k,v]=C.useState(!0),[y,w]=C.useState(!0),[P,S]=C.useState(!0),[j,O]=C.useState(!1),[A,$]=C.useState(!1),[E,T]=C.useState(!1),[B,U]=C.useState(!1),[F,G]=C.useState("50"),[z,I]=C.useState(!1),[L,H]=C.useState("0.125"),[Z,te]=C.useState(!1),[K,q]=C.useState({aperture:4,olpfSeparationPx:.7,fillFactor:.9,coreSigmaPx:.15,haloSigmaPx:.8,haloWeight:.25,wavelengthUm:.55,rolloff:1}),[J,ve]=C.useState({aperture:!1,olpfSeparationPx:!1,fillFactor:!1,coreSigmaPx:!1,haloSigmaPx:!1,haloWeight:!1,wavelengthUm:!1,rolloff:!1}),[ie,pe]=C.useState("0"),[oe,V]=C.useState(""),[se,ge]=C.useState(!1),[le,je]=C.useState(""),[Se,me]=C.useState(1),[he,Pe]=C.useState(null),[$e,Ve]=C.useState({x:100,y:50}),[He,Je]=C.useState({w:1e3,h:800}),[yt,wt]=C.useState(!1),[ir,jt]=C.useState(!1),hr=C.useRef({x:0,y:0}),_t=C.useRef({w:0,h:0}),[or,Ir]=C.useState(!1),[Rt,Sr]=C.useState(!1),et=c.length>0?c[c.length-1].binSize:null,ht=et?(1/et).toFixed(1):"-",Qt=C.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),mr=(o==null?void 0:o.renderMode)==="advanced-zero-dep",jr=C.useMemo(()=>{const R=parseFloat(f);return Number.isFinite(R)&&R>0?R:null},[f]),tn=jr!==null,Mt=tn?"lp/mm":"cy/px",Xr=(R,we,Ne)=>Math.min(Ne,Math.max(we,R)),Pt=R=>{if(Math.abs(R)<1e-12)return 1;const we=Math.PI*R;return Math.sin(we)/we},rn=R=>R<=0?1:R>=1?0:2/Math.PI*(Math.acos(R)-R*Math.sqrt(1-R*R)),ze=(R,we,Ne,Nt)=>{const Ze=Xr(Nt,0,1),ot=Math.max(0,we),gt=Math.max(0,Ne),It=Math.exp(-2*Math.PI*Math.PI*ot*ot*R*R),zr=Math.exp(-2*Math.PI*Math.PI*gt*gt*R*R);return(1-Ze)*It+Ze*zr},cn=C.useMemo(()=>tn&&jr?1e3/jr:1,[tn,jr]),Lr=(R,we)=>{const{aperture:Ne,olpfSeparationPx:Nt,fillFactor:Ze,coreSigmaPx:ot,haloSigmaPx:gt,haloWeight:It,wavelengthUm:zr,rolloff:an}=we,Kt=tn?R/cn:R,Mn=Math.max(1e-9,zr)/1e3,Nr=tn&&jr?jr/1e3:5/1e3,gn=Math.max(1e-6,Ne),Ft=1/(Mn*gn)*Nr,Ur=Ft>0?Kt/Ft:1e9,Fe=rn(Ur),rr=Math.max(0,Nt),mn=Math.abs(Math.cos(Math.PI*Kt*rr)),Kn=Xr(Ze,0,1),ca=Math.abs(Pt(Kt*Kn)),wr=Math.max(0,ot),Za=Math.max(0,gt),re=ze(Kt,wr,Za,It);let ye=Fe*mn*ca*re;const be=Math.max(.1,an);return ye=Math.pow(Math.max(0,ye),be),Math.min(1.2,Math.max(0,ye))},_r=()=>{if(!(!r||!n)){if(!mr){alert("Scalar Unmixing is required. Please configure Background/Foreground/BlackLevel in the Sidebar and click 'RUN UNMIXING' first.");return}try{let R=null;const we=z?parseFloat(L):void 0;if(o!=null&&o.advancedZeroDep){const Ne=_1(r,n,o);R=wx(Ne.data,Ne.width,Ne.height,{x:0,y:0,w:Ne.width,h:Ne.height},{greenOnly:P,globalX:n.x,globalY:n.y,bayerPattern:r.bayerPattern,manualBinSize:we})}else R=wx(r.data,r.width,r.height,n,{greenOnly:P,globalX:n.x,globalY:n.y,bayerPattern:r.bayerPattern,manualBinSize:we});R?u(Ne=>[...Ne,R]):alert("Could not detect valid edge.")}catch(R){console.error(R),alert("Error processing ROI")}}},jn=()=>{u([]),Pe(null),me(1)},Tr=()=>{if(!he)return;const R=parseFloat(f),Nt=`data:text/csv;charset=utf-8,Frequency (${!isNaN(R)&&R>0?"lp/mm":"cy/px"}),MTF,Phase(Rad)
`+he.freqs.map((gt,It)=>{const zr=he.ptf?he.ptf[It]:0;return`${gt.toFixed(6)},${he.mtf[It].toFixed(6)},${zr?zr.toFixed(6):0}`}).join(`
`),Ze=encodeURI(Nt),ot=document.createElement("a");ot.setAttribute("href",Ze),ot.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(ot),ot.click(),document.body.removeChild(ot)},Pr=()=>{if(!(he!=null&&he.mtf50)||!n)return;const R=n.x+n.w/2,we=n.y+n.h/2,Ne=`{${R.toFixed(1)},${we.toFixed(1)},${he.mtf50.toFixed(4)}}`;navigator.clipboard.writeText(Ne)};C.useEffect(()=>{if(c.length===0){Pe(null);return}const R=parseFloat(f),we=!isNaN(R)&&R>0?R:null,Ne=k?-1:x,Nt=B&&parseFloat(F)||0,Ze=PN(c,Ne,we,y,Nt,j);Pe(Ze)},[c,x,k,y,f,B,F,j]),C.useEffect(()=>{e&&mr&&c.length===0&&n&&r&&_r()},[e]);const nn=R=>{i&&i(),!Rt&&(R.target.closest("button")||R.target.closest("input")||R.target.closest("select")||R.target.closest("label")||(wt(!0),hr.current={x:R.clientX-$e.x,y:R.clientY-$e.y}))},ea=R=>{Rt||(R.stopPropagation(),R.preventDefault(),jt(!0),hr.current={x:R.clientX,y:R.clientY},_t.current={w:He.w,h:He.h})};C.useEffect(()=>{const R=Ne=>{if(yt)Ve({x:Ne.clientX-hr.current.x,y:Ne.clientY-hr.current.y});else if(ir){const Nt=Ne.clientX-hr.current.x,Ze=Ne.clientX-hr.current.y;Je({w:Math.max(600,_t.current.w+Nt),h:Math.max(500,_t.current.h+Ze)})}},we=()=>{wt(!1),jt(!1)};return(yt||ir)&&(window.addEventListener("mousemove",R),window.addEventListener("mouseup",we)),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",we)}},[yt,ir]);const Xn=C.useMemo(()=>{if(!(he!=null&&he.mtf50)||!p)return null;const R=parseFloat(p);if(isNaN(R)||R<=0)return null;let we=he.mtf50;const Ne=parseFloat(f);return!isNaN(Ne)&&Ne>0&&(we=he.mtf50*(Ne/1e3)),we*2*R},[he,p,f]),tr=A?2:1,sr=tr*cn,xr=.004,M=C.useMemo(()=>{if(!Z)return[];const R=[];for(let we=0;we<=tr+1e-12;we+=xr){const Ne=we*cn;R.push({freq:Ne,modelMtf:Lr(Ne,K)})}return R},[Z,K,tr,cn]),Le=C.useMemo(()=>{const R=he?he.mtf.map((Ne,Nt)=>({freq:he.freqs[Nt],mtf:Ne})).filter(Ne=>Ne.freq<=sr):[];if(!Z||M.length===0)return R.map(Ne=>({freq:Ne.freq,mtf:Ne.mtf,modelMtf:null}));const we=new Map;for(const Ne of M){const Nt=Ne.freq.toFixed(6);we.set(Nt,{freq:Ne.freq,mtf:null,modelMtf:Ne.modelMtf})}for(const Ne of R){const Nt=Ne.freq.toFixed(6),Ze=we.get(Nt);Ze?Ze.mtf=Ne.mtf:we.set(Nt,{freq:Ne.freq,mtf:Ne.mtf,modelMtf:null})}return Array.from(we.values()).sort((Ne,Nt)=>Ne.freq-Nt.freq)},[he,sr,Z,M]),vt=he?he.lsfCropped.map((R,we)=>({x:we,y:R})):[],pt=he?he.esf.map((R,we)=>({x:we,y:R})):[],kt=C.useMemo(()=>he!=null&&he.ptf?he.ptf.map((R,we)=>({freq:he.freqs[we],ptf:R})).filter(R=>R.freq<=sr):[],[he,sr]);if(!e)return null;const At={aperture:[.7,64],olpfSeparationPx:[0,5],fillFactor:[.05,1],coreSigmaPx:[0,3],haloSigmaPx:[0,50],haloWeight:[0,1],wavelengthUm:[.4,.7],rolloff:[.2,6]},br={aperture:.2,olpfSeparationPx:.05,fillFactor:.03,coreSigmaPx:.03,haloSigmaPx:.2,haloWeight:.05,wavelengthUm:.01,rolloff:.1},lr=()=>{let R=0,we=0;for(;R===0;)R=Math.random();for(;we===0;)we=Math.random();return Math.sqrt(-2*Math.log(R))*Math.cos(2*Math.PI*we)},Ue=()=>["aperture","olpfSeparationPx","fillFactor","coreSigmaPx","haloSigmaPx","haloWeight","wavelengthUm","rolloff"].filter(we=>!J[we]),Ct=(R,we)=>we.map(Ne=>R[Ne]),Gt=(R,we,Ne,Nt)=>{const Ze={...we};for(let It=0;It<Ne.length;It++){const zr=Ne[It],[an,Kt]=At[zr];Ze[zr]=Xr(R[It],an,Kt)}Object.keys(Nt).forEach(It=>{Nt[It]&&(Ze[It]=we[It])});const ot=Nt.coreSigmaPx,gt=Nt.haloSigmaPx;return gt&&!ot?Ze.coreSigmaPx=Math.min(Ze.coreSigmaPx,we.haloSigmaPx):ot&&!gt?Ze.haloSigmaPx=Math.max(Ze.haloSigmaPx,we.coreSigmaPx):!ot&&!gt&&(Ze.haloSigmaPx=Math.max(Ze.haloSigmaPx,Ze.coreSigmaPx)),Ze},Jt=(R,we)=>{const Ne=[...R];for(let Nt=0;Nt<we.length;Nt++){const Ze=we[Nt],ot=br[Ze],gt=Ze==="aperture"?.1:Ze==="wavelengthUm"?.02:.2;Ne[Nt]=Ne[Nt]+gt*ot*lr()}return Ne},fr=(R,we,Ne,Nt)=>{const Ze=R.map(ot=>1/(1+.5*ot*ot));return ot=>{const gt=Gt(ot,Ne,Nt,J);let It=0;for(let Kt=0;Kt<R.length;Kt++){const Mn=we[Kt],gn=Lr(R[Kt],gt)-Mn;It+=Ze[Kt]*gn*gn}const an=1e-4*((J.olpfSeparationPx?0:gt.olpfSeparationPx*gt.olpfSeparationPx)+(J.coreSigmaPx?0:gt.coreSigmaPx*gt.coreSigmaPx)+(J.haloSigmaPx?0:gt.haloSigmaPx*gt.haloSigmaPx)+(J.rolloff?0:(gt.rolloff-1)*(gt.rolloff-1)));return It+an}},_e=(R,we,Ne,Nt=320)=>{const Ze=we.length,ot=new Array(Ze+1);ot[0]=[...we];for(let Wt=0;Wt<Ze;Wt++){const Ft=[...we];Ft[Wt]=Ft[Wt]+Ne[Wt],ot[Wt+1]=Ft}const gt=ot.map(Wt=>R(Wt)),It=()=>{const Wt=gt.map((Fe,rr)=>[Fe,rr]).sort((Fe,rr)=>Fe[0]-rr[0]).map(Fe=>Fe[1]),Ft=Wt.map(Fe=>ot[Fe]),Ur=Wt.map(Fe=>gt[Fe]);for(let Fe=0;Fe<ot.length;Fe++)ot[Fe]=Ft[Fe];for(let Fe=0;Fe<gt.length;Fe++)gt[Fe]=Ur[Fe]},zr=()=>{const Wt=new Array(Ze).fill(0);for(let Ft=0;Ft<Ze;Ft++){const Ur=ot[Ft];for(let Fe=0;Fe<Ze;Fe++)Wt[Fe]+=Ur[Fe]}for(let Ft=0;Ft<Ze;Ft++)Wt[Ft]/=Ze;return Wt},an=(Wt,Ft,Ur=1)=>Wt.map((Fe,rr)=>Fe+Ur*Ft[rr]),Kt=(Wt,Ft)=>Wt.map((Ur,Fe)=>Ur-Ft[Fe]),Mn=1,Nr=2,gn=.5;for(let Wt=0;Wt<Nt;Wt++){It();const Ft=ot[0],Ur=ot[Ze],Fe=zr(),rr=an(Fe,Kt(Fe,Ur),Mn),mn=R(rr);if(mn<gt[0]){const wr=an(Fe,Kt(rr,Fe),Nr),Za=R(wr);Za<mn?(ot[Ze]=wr,gt[Ze]=Za):(ot[Ze]=rr,gt[Ze]=mn);continue}if(mn<gt[Ze-1]){ot[Ze]=rr,gt[Ze]=mn;continue}const Kn=an(Fe,Kt(Ur,Fe),-.5),ca=R(Kn);if(ca<gt[Ze]){ot[Ze]=Kn,gt[Ze]=ca;continue}for(let wr=1;wr<Ze+1;wr++)ot[wr]=an(Ft,Kt(ot[wr],Ft),gn),gt[wr]=R(ot[wr])}return It(),{x:ot[0],fx:gt[0]}},Cr=async()=>{if(!(he!=null&&he.freqs)||!(he!=null&&he.mtf)||he.freqs.length<10){je("No enough MTF data to fit.");return}const R=Ue();if(R.length===0){je("All parameters are locked.");return}const we=Math.max(0,parseFloat(ie||"0")||0),Ne=sr,Nt=(()=>{const Fe=parseFloat(oe||"");return Number.isFinite(Fe)&&Fe>0?Fe:Ne})(),Ze=[];for(let Fe=0;Fe<he.freqs.length;Fe++){const rr=he.freqs[Fe],mn=he.mtf[Fe];rr>=we&&rr<=Nt&&Number.isFinite(mn)&&Ze.push([rr,mn])}if(Ze.length<10){je("Fit range too narrow (need >= 10 points).");return}const gt=Math.max(1,Math.floor(Ze.length/300)),It=Ze.filter((Fe,rr)=>rr%gt===0).map(Fe=>Fe[0]),zr=Ze.filter((Fe,rr)=>rr%gt===0).map(Fe=>Fe[1]);ge(!0),je(`Fitting ${R.length} params (${It.length} pts) in [${we.toFixed(3)}, ${Nt.toFixed(3)}] ${Mt} ...`);const an=K,Kt=Ct(an,R),Mn=R.map(Fe=>br[Fe]),Nr=fr(It,zr,an,R),gn=7;let Wt=Kt,Ft=Nr(Kt);for(let Fe=0;Fe<gn;Fe++){const rr=Fe===0?Kt:Jt(Kt,R),mn=_e(Nr,rr,Mn,320);mn.fx<Ft&&(Ft=mn.fx,Wt=mn.x),await new Promise(requestAnimationFrame)}const Ur=Gt(Wt,an,R,J);q(Ur),je(`Fit done. SSE=${Ft.toExponential(3)}  unlocked=${R.length}  range=[${we.toFixed(3)}, ${Nt.toFixed(3)}] ${Mt}`),ge(!1)};return l.jsxs("div",{className:`fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl overflow-hidden ${Rt?"rounded-none":"rounded-xl"}`,style:Rt?{inset:0,width:"100vw",height:"100vh",zIndex:a??100}:{left:$e.x,top:$e.y,width:He.w,height:or?"auto":He.h,zIndex:a??100},onMouseDownCapture:i,children:[l.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${!Rt&&yt?"cursor-grabbing":Rt?"":"cursor-grab"}`,onMouseDown:nn,onDoubleClick:()=>Sr(!Rt),children:[l.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",l.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[c.length," ROI",c.length!==1?"s":""]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>Sr(!Rt),className:"text-gray-400 hover:text-orange-500 transition-colors",title:Rt?"Restore":"Maximize",children:Rt?l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 14h6v6M20 10h-6V4"})}):l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M20 8V4m0 0h-4M4 16v4m0 0h4M20 16v4m0 0h-4"})})}),l.jsx("button",{onClick:()=>Ir(!or),className:"text-gray-400 hover:text-orange-500 transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]})]}),!or&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),l.jsx("input",{type:"number",value:f,onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>d(R.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),l.jsx("input",{type:"number",value:p,onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>m(R.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",children:[l.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),et?l.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[et.toFixed(3),"px",l.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",ht,"x)"]})]}):l.jsx("span",{className:"text-gray-400 italic",children:"..."}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none ml-2 border-l border-blue-200 dark:border-blue-700 pl-2",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:z,onChange:R=>{R.stopPropagation(),I(R.target.checked)},className:"w-3 h-3 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}),l.jsx("span",{className:"text-[10px] font-bold text-blue-600 dark:text-blue-400",children:"Manual"})]}),z&&l.jsx("input",{type:"number",value:L,onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>H(R.target.value),step:"0.001",min:"0.01",max:"0.5",className:"w-16 px-1 py-0.5 text-xs bg-white dark:bg-slate-900 border border-blue-300 dark:border-blue-600 rounded outline-none focus:border-orange-500",placeholder:"0.125"})]}),l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[500px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",title:"Linear detrending with limited fitting width",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:y,onChange:R=>{R.stopPropagation(),w(R.target.checked)},className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:"Deshading"})]}),y&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none border-l border-purple-200 dark:border-purple-800 pl-2",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:B,onChange:R=>{R.stopPropagation(),U(R.target.checked)},className:"w-3 h-3 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),l.jsx("span",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400",children:"Limit Fit"})]}),B&&l.jsxs("div",{className:"flex items-center gap-1",title:"Width of data used for fitting (pixels)",children:[l.jsx("input",{type:"number",value:F,onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>G(R.target.value),step:"5",min:"10",max:"500",className:"w-14 px-1 py-0.5 text-xs bg-white dark:bg-slate-900 border border-purple-300 dark:border-purple-600 rounded outline-none focus:border-orange-500"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]})]})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:P,onChange:R=>{R.stopPropagation(),S(R.target.checked)},className:"w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:"G-Only"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),title:"Apply Hann windowing before FFT",children:[l.jsx("input",{type:"checkbox",checked:j,onChange:R=>{R.stopPropagation(),O(R.target.checked)},className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"Hann On"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:A,onChange:R=>{R.stopPropagation(),$(R.target.checked)},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"2 Freq"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:E,onChange:R=>{R.stopPropagation(),T(R.target.checked)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-teal-600 dark:text-teal-400",children:"Show PTF"})]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:k,onChange:R=>{R.stopPropagation();const we=R.target.checked;v(we),we||b(Qt)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's official NR"})]}),l.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[l.jsxs("div",{className:"flex justify-between items-baseline",children:[l.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:k?"Calculated:":"Manual:"}),l.jsxs("span",{className:`font-mono font-bold ${k?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[k&&(he!=null&&he.calcRadius)?he.calcRadius.toFixed(2):x.toFixed(1)," px"]})]}),l.jsx("input",{type:"range",min:"2",max:Qt,step:"0.5",value:x,onMouseDown:R=>R.stopPropagation(),onChange:R=>{b(parseFloat(R.target.value)),v(!1)},disabled:k,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${k?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onMouseDown:R=>R.stopPropagation(),onClick:R=>{R.stopPropagation(),_r()},disabled:!mr,title:mr?"":"Scalar Unmixing must be active. Run Unmixing in Sidebar first.",className:`px-3 py-1.5 text-white font-bold rounded shadow-sm transition-transform active:scale-95 ${mr?"bg-orange-600 hover:bg-orange-500":"bg-gray-400 cursor-not-allowed"}`,children:mr?"Add Current ROI":"Unmixing Required"}),l.jsx("button",{onMouseDown:R=>R.stopPropagation(),onClick:R=>{R.stopPropagation(),Pr()},disabled:!he||!he.mtf50||!n,className:"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Copy Pos/MTF50"}),l.jsx("button",{onMouseDown:R=>R.stopPropagation(),onClick:R=>{R.stopPropagation(),Tr()},disabled:!he,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),l.jsx("button",{onMouseDown:R=>R.stopPropagation(),onClick:R=>{R.stopPropagation(),jn()},className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),l.jsxs("div",{className:"px-3 py-2 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-200 dark:border-indigo-800 flex items-center gap-4 flex-wrap text-xs",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:Z,onChange:R=>{R.stopPropagation(),te(R.target.checked)},className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 border-gray-300"}),l.jsx("span",{className:"font-bold text-indigo-700 dark:text-indigo-400 text-sm",children:"Show Model Line"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"F-number (Aperture)",children:[l.jsx($o,{locked:J.aperture,onToggle:()=>ve(R=>({...R,aperture:!R.aperture}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"F/"}),l.jsx("input",{type:"number",value:K.aperture,step:"0.05",min:"0.7",max:"64",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,aperture:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"OLPF two-image split separation d (px)",children:[l.jsx($o,{locked:J.olpfSeparationPx,onToggle:()=>ve(R=>({...R,olpfSeparationPx:!R.olpfSeparationPx}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"OLPF d:"}),l.jsx("input",{type:"number",value:K.olpfSeparationPx,step:"0.01",min:"0",max:"5",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,olpfSeparationPx:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Pixel Fill Factor (0..1)",children:[l.jsx($o,{locked:J.fillFactor,onToggle:()=>ve(R=>({...R,fillFactor:!R.fillFactor}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Fill:"}),l.jsx("input",{type:"number",value:K.fillFactor,step:"0.01",min:"0",max:"1",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,fillFactor:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Spherical core sigma (px)",children:[l.jsx($o,{locked:J.coreSigmaPx,onToggle:()=>ve(R=>({...R,coreSigmaPx:!R.coreSigmaPx}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Core :"}),l.jsx("input",{type:"number",value:K.coreSigmaPx,step:"0.01",min:"0",max:"10",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,coreSigmaPx:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Spherical halo sigma (px)",children:[l.jsx($o,{locked:J.haloSigmaPx,onToggle:()=>ve(R=>({...R,haloSigmaPx:!R.haloSigmaPx}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Halo :"}),l.jsx("input",{type:"number",value:K.haloSigmaPx,step:"0.01",min:"0",max:"50",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,haloSigmaPx:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"px"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Halo weight 0..1",children:[l.jsx($o,{locked:J.haloWeight,onToggle:()=>ve(R=>({...R,haloWeight:!R.haloWeight}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Halo w:"}),l.jsx("input",{type:"number",value:K.haloWeight,step:"0.01",min:"0",max:"1",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,haloWeight:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Wavelength (m) for diffraction model",children:[l.jsx($o,{locked:J.wavelengthUm,onToggle:()=>ve(R=>({...R,wavelengthUm:!R.wavelengthUm}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"number",value:K.wavelengthUm,step:"0.01",min:"0.35",max:"0.75",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,wavelengthUm:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"m"})]}),l.jsxs("div",{className:"flex items-center gap-2",title:"Manual rolloff exponent",children:[l.jsx($o,{locked:J.rolloff,onToggle:()=>ve(R=>({...R,rolloff:!R.rolloff}))}),l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Rolloff:"}),l.jsx("input",{type:"number",value:K.rolloff,step:"0.01",min:"0.1",max:"10",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>{const we=parseFloat(R.target.value);Number.isFinite(we)&&q(Ne=>({...Ne,rolloff:we}))},className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs"})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[l.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Fit:"}),l.jsx("input",{type:"number",value:ie,step:"0.001",min:"0",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>pe(R.target.value),className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs",title:`Fit range min (${Mt})`}),l.jsx("span",{className:"text-[10px] text-gray-500",children:"to"}),l.jsx("input",{type:"number",value:oe,step:"0.001",min:"0",onMouseDown:R=>R.stopPropagation(),onClick:R=>R.stopPropagation(),onChange:R=>V(R.target.value),className:"w-20 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-300 dark:border-indigo-600 rounded text-xs",placeholder:`${sr.toFixed(2)}`,title:`Fit range max (${Mt}), blank = current max`}),l.jsx("button",{onMouseDown:R=>R.stopPropagation(),onClick:R=>{R.stopPropagation(),se||Cr()},disabled:se||!he,className:`px-2 py-1 rounded font-bold text-white text-xs transition-transform active:scale-95 ${se?"bg-gray-400":"bg-indigo-600 hover:bg-indigo-500"}`,title:"Auto fit UNLOCKED params to measured MTF in the given frequency range",children:se?"Fitting":"Auto Fit"})]}),l.jsx("span",{className:"text-[10px] text-gray-500 dark:text-slate-400 italic ml-2",children:"Dot filled = locked. Auto Fit only changes unlocked params."}),le&&l.jsx("span",{className:"text-[10px] text-gray-500 dark:text-slate-400 italic ml-2",children:le})]}),l.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[l.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[l.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),l.jsx("div",{className:"flex-1 min-h-0 w-full",children:l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:pt,children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),l.jsx(_a,{dataKey:"x",hide:!0}),l.jsx(Pa,{hide:!0,domain:["auto","auto"]}),l.jsx(Un,{contentStyle:{fontSize:"10px"}}),l.jsx(Sn,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),l.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[l.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",Se>1?`(x${Se.toFixed(0)})`:""]}),l.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[l.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),l.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:Se,onMouseDown:R=>R.stopPropagation(),onChange:R=>me(parseFloat(R.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),l.jsx("div",{className:"flex-1 min-h-0 w-full",children:l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:vt,children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),l.jsx(Yo,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),l.jsx(_a,{dataKey:"x",hide:!0}),l.jsx(Pa,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[R=>R,R=>R/Se],allowDataOverflow:!0,tickFormatter:R=>R.toFixed(3)}),l.jsx(Un,{contentStyle:{fontSize:"10px"},formatter:R=>[R.toFixed(5),"Amplitude"]}),l.jsx(Sn,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),l.jsxs("div",{className:"flex-1 flex gap-4 min-h-[250px]",children:[l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF"}),l.jsxs("div",{className:"flex gap-4 items-center",children:[(he==null?void 0:he.mtf50)&&l.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",l.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[he.mtf50.toFixed(2)," ",Mt]})]}),Xn!==null&&l.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(Xn)," LW/PH"]})]})]}),l.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:l.jsx("svg",{viewBox:"0 0 400 60",className:"w-[30rem] h-auto",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:Le,margin:{top:10,right:30,left:10,bottom:20},children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),l.jsx(_a,{dataKey:"freq",type:"number",domain:[0,sr],tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${Mt})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),l.jsx(Pa,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:R=>`Freq: ${Number(R).toFixed(3)} ${Mt}`,formatter:(R,we)=>we==="Model"?[R==null?void 0:R.toFixed(4),"Model"]:[R==null?void 0:R.toFixed(4),"Measured"]}),l.jsx(Ki,{verticalAlign:"top",height:20}),l.jsx(Sn,{type:"monotone",dataKey:"mtf",name:"Measured",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1,connectNulls:!1}),Z&&l.jsx(Sn,{type:"monotone",dataKey:"modelMtf",name:"Model",stroke:"#0066cc",strokeWidth:2,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1,connectNulls:!0}),(he==null?void 0:he.mtf50)&&l.jsx(ud,{x:he.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:l.jsx(ia,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]}),E&&l.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[l.jsx("div",{className:"flex justify-between items-start px-2 mb-1",children:l.jsx("h4",{className:"text-xs font-bold text-teal-600 dark:text-teal-400 uppercase",children:"PTF / Phase"})}),l.jsx("div",{className:"flex-1 relative min-h-0 w-full",children:l.jsx(Gi,{width:"100%",height:"100%",children:l.jsxs(Hs,{data:kt,margin:{top:10,right:30,left:10,bottom:20},children:[l.jsx(Ai,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),l.jsx(_a,{dataKey:"freq",type:"number",domain:[0,sr],tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${Mt})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),l.jsx(Pa,{tick:{fontSize:10,fill:"#9ca3af"},label:{value:"Phase (Rad)",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),l.jsx(Un,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:R=>`Freq: ${Number(R).toFixed(3)} ${Mt}`,formatter:R=>[R==null?void 0:R.toFixed(4),"Phase (Rad)"]}),l.jsx(Sn,{type:"monotone",dataKey:"ptf",name:"Phase",stroke:"#0d9488",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]})]})]}),!Rt&&l.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:ea})]})},ane=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations to prevent premature overflow and allow negative offsets
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,ine=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=C.useState(!0),[c,u]=C.useState(!1),[f,d]=C.useState(""),p=C.useRef(null),m=C.useRef(null),[x,b]=C.useState(4),[k,v]=C.useState(0),[y,w]=C.useState(""),[P,S]=C.useState(""),[j,O]=C.useState("RGGB"),[A,$]=C.useState(!1),[E,T]=C.useState(100),[B,U]=C.useState(4e3),[F,G]=C.useState(0),[z,I]=C.useState(0),L=C.useMemo(()=>Object.keys(hc).sort(),[]);C.useEffect(()=>{e&&!p.current&&(async()=>{try{const K=await window.loadPyodide();await K.loadPackage("numpy"),await K.runPythonAsync(ane),p.current=K,s(!1)}catch(K){console.error("Pyodide Init Failed",K)}})()},[e]),C.useEffect(()=>{if(e&&r){const te=r.whiteLevel;te>1e4?b(2):te>3e3?b(4):te>6e4&&b(0);const K=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(K)?O(K):O("RGGB");const q=Math.min(r.width,r.height),J=Math.max(48,Math.round(q/40));T(J),G(Math.round(J*10)),I(Math.round(r.height-J*2))}},[e,r]);const H=async te=>{if(!te.target.files||te.target.files.length===0||!p.current)return;const K=Array.from(te.target.files);u(!0);const q=y.trim()?y.trim().split(/\s+/).map(Number):[0,0,0,0];for(q.length===1&&!isNaN(q[0])&&q.push(q[0],q[0],q[0]);q.length<4;)q.push(0);const J=P.trim()?P.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(J.length!==9){alert("Color Matrix must contain exactly 9 numeric values."),u(!1);return}const ve=p.current;for(let ie=0;ie<K.length;ie++){const pe=K[ie];d(`Processing ${ie+1}/${K.length}: ${pe.name}`);try{const oe=await pe.arrayBuffer(),V=await pc(oe);let se;if(A){const $e=document.createElement("canvas");$e.width=V.width,$e.height=V.height;const Ve=$e.getContext("2d");if(Ve){Ve.fillStyle="black",Ve.fillRect(0,0,$e.width,$e.height),Ve.font=`bold ${E}px sans-serif`,Ve.fillStyle="white",Ve.textBaseline="middle",Ve.textAlign="center",Ve.fillText("(C)  y-g-jiang.github.io",F,z);const He=Ve.getImageData(0,0,$e.width,$e.height).data;se=new Uint16Array(V.data);const Je=se.length;for(let yt=0;yt<Je;yt++)if(He[yt*4]>128){let wt=se[yt]+B;wt<0&&(wt=0),wt>65535&&(wt=65535),se[yt]=wt}}else se=new Uint16Array(V.data)}else se=V.data;ve.globals.set("js_raw_bytes",new Uint8Array(se.buffer,se.byteOffset,se.byteLength)),ve.globals.set("js_width",V.width),ve.globals.set("js_height",V.height),ve.globals.set("js_cfa",j),ve.globals.set("js_bl_list",q),ve.globals.set("js_shift",x),ve.globals.set("js_linear_shift",k),ve.globals.set("js_cm_flat",J);const ge=await ve.runPythonAsync(`
                    convert_to_dng(
                        js_raw_bytes.to_py(), 
                        js_width, 
                        js_height, 
                        js_cfa, 
                        js_bl_list.to_py(), 
                        js_shift,
                        js_linear_shift,
                        js_cm_flat.to_py()
                    )
                `),le=ge.toJs();ge.destroy();const je=new Blob([le],{type:"image/x-adobe-dng"}),Se=URL.createObjectURL(je),me=document.createElement("a");me.href=Se;const he=pe.name.substring(0,pe.name.lastIndexOf("."))||"image",Pe=A?"_wm":"";me.download=`${he}_16bit_manual${Pe}.dng`,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(Se),await new Promise($e=>setTimeout($e,200))}catch(oe){console.error(`Failed to batch process ${pe.name}`,oe)}}u(!1),d(""),te.target.value=""},Z=async()=>{if(!(!r||!p.current)){u(!0);try{const te=p.current,K=y.trim()?y.trim().split(/\s+/).map(Number):[0,0,0,0];if(K.length===1&&!isNaN(K[0])&&K.push(K[0],K[0],K[0]),K.length<4)for(;K.length<4;)K.push(0);const q=P.trim()?P.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(q.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const J=j;let ve;if(A){const je=document.createElement("canvas");je.width=r.width,je.height=r.height;const Se=je.getContext("2d");if(Se){Se.fillStyle="black",Se.fillRect(0,0,je.width,je.height),Se.font=`bold ${E}px sans-serif`,Se.fillStyle="white",Se.textBaseline="middle",Se.textAlign="center",Se.fillText("(C)  y-g-jiang.github.io",F,z);const me=Se.getImageData(0,0,je.width,je.height).data;ve=new Uint16Array(r.data);const he=ve.length;for(let Pe=0;Pe<he;Pe++)if(me[Pe*4]>128){let $e=ve[Pe]+B;$e<0&&($e=0),$e>65535&&($e=65535),ve[Pe]=$e}}else ve=new Uint16Array(r.data)}else ve=r.data;te.globals.set("js_raw_bytes",new Uint8Array(ve.buffer,ve.byteOffset,ve.byteLength)),te.globals.set("js_width",r.width),te.globals.set("js_height",r.height),te.globals.set("js_cfa",J),te.globals.set("js_bl_list",K),te.globals.set("js_shift",x),te.globals.set("js_linear_shift",k),te.globals.set("js_cm_flat",q);const ie=await te.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift,
                    js_linear_shift,
                    js_cm_flat.to_py()
                )
            `),pe=ie.toJs();ie.destroy();const oe=new Blob([pe],{type:"image/x-adobe-dng"}),V=URL.createObjectURL(oe),se=document.createElement("a");se.href=V;const ge=n.substring(0,n.lastIndexOf("."))||"image",le=A?"_wm":"";se.download=`${ge}_16bit_manual${le}.dng`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(V)}catch(te){console.error(te),alert("Export Failed: "+te.message)}finally{u(!1)}}};return e?l.jsxs(ks,{initialPosition:{x:window.innerWidth/2-250,y:50},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[l.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),l.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?l.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),l.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),l.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),l.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Bit Shift (<<)"}),l.jsx("input",{type:"number",value:x,onChange:te=>b(parseInt(te.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),l.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase",children:"Offset (+)"}),l.jsx("input",{type:"number",value:k,onChange:te=>v(parseInt(te.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),l.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),l.jsxs("select",{value:j,onChange:te=>O(te.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[l.jsx("option",{value:"RGGB",children:"RGGB"}),l.jsx("option",{value:"BGGR",children:"BGGR"}),l.jsx("option",{value:"GBRG",children:"GBRG"}),l.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),l.jsx("div",{className:"mt-[-10px] grid grid-cols-3 gap-4",children:l.jsx("div",{className:"text-[9px] text-gray-400 dark:text-gray-500 col-span-2",children:"Shift: 4=12bit(x16), 2=14bit(x4). Added after shift."})}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level (Manual Fill)"}),l.jsx("input",{type:"text",value:y,onChange:te=>w(te.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),l.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:te=>{const K=hc[te.target.value];K&&S(K),te.target.value=""},defaultValue:"",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),L.map(te=>l.jsx("option",{value:te,children:te},te))]})]}),l.jsx("textarea",{value:P,onChange:te=>S(te.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),l.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),l.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("input",{type:"checkbox",id:"enableWatermark",checked:A,onChange:te=>$(te.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),l.jsx("label",{htmlFor:"enableWatermark",className:"text-xs font-bold text-gray-700 dark:text-gray-300 select-none",children:"Add Watermark: (C)  y-g-jiang.github.io"})]}),A&&l.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Size (px)"}),l.jsx("input",{type:"number",value:E,onChange:te=>T(Math.max(10,parseInt(te.target.value)||10)),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Depth (Shift DN)"}),l.jsx("input",{type:"number",value:B,onChange:te=>U(parseInt(te.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs",placeholder:"+/- value"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Center X"}),l.jsx("input",{type:"number",value:F,onChange:te=>G(parseInt(te.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs"})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Center Y"}),l.jsx("input",{type:"number",value:z,onChange:te=>I(parseInt(te.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border border-gray-400 dark:border-gray-600 px-2 py-1 text-xs"})]})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"file",ref:m,multiple:!0,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:H}),l.jsx("button",{onClick:()=>{var te;return(te=m.current)==null?void 0:te.click()},disabled:c,className:"flex-1 py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 bg-white dark:bg-slate-800 border-2 border-black dark:border-white text-black dark:text-white hover:bg-gray-100 dark:hover:bg-slate-700",children:"Batch Export (Files)"}),l.jsx("button",{onClick:Z,disabled:c,className:`flex-[2] py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${c?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:c?"Processing...":"Export Single"})]}),f&&l.jsx("div",{className:"text-center text-xs font-bold text-cyan-600 dark:text-cyan-400 animate-pulse",children:f})]})})]}):null};async function CN(e={}){var $b,Db,Rb;var t,r=e,n=!!globalThis.window,a=!!globalThis.WorkerGlobalScope,i=((Db=($b=globalThis.process)==null?void 0:$b.versions)==null?void 0:Db.node)&&((Rb=globalThis.process)==null?void 0:Rb.type)!="renderer";if(i){const{createRequire:h}=await Nj(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);var o=h(import.meta.url)}var s="./this.program",c=(h,g)=>{throw g},u=import.meta.url,f="";function d(h){return r.locateFile?r.locateFile(h,f):f+h}var p,m;if(i){var x=o("fs");u.startsWith("file:")&&(f=o("path").dirname(o("url").fileURLToPath(u))+"/"),m=h=>{h=w(h)?new URL(h):h;var g=x.readFileSync(h);return g},p=async(h,g=!0)=>{h=w(h)?new URL(h):h;var _=x.readFileSync(h,g?void 0:"utf8");return _},process.argv.length>1&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),c=(h,g)=>{throw process.exitCode=h,g}}else if(n||a){try{f=new URL(".",u).href}catch{}a&&(m=h=>{var g=new XMLHttpRequest;return g.open("GET",h,!1),g.responseType="arraybuffer",g.send(null),new Uint8Array(g.response)}),p=async h=>{if(w(h))return new Promise((_,N)=>{var D=new XMLHttpRequest;D.open("GET",h,!0),D.responseType="arraybuffer",D.onload=()=>{if(D.status==200||D.status==0&&D.response){_(D.response);return}N(D.status)},D.onerror=N,D.send(null)});var g=await fetch(h,{credentials:"same-origin"});if(g.ok)return g.arrayBuffer();throw new Error(g.status+" : "+g.url)}}var b=console.log.bind(console),k=console.error.bind(console),v,y=!1,w=h=>h.startsWith("file://"),P,S,j,O,A,$,E,T,B,U,F,G,z=!1;function I(){var h=on.buffer;j=new Int8Array(h),A=new Int16Array(h),O=new Uint8Array(h),$=new Uint16Array(h),E=new Int32Array(h),T=new Uint32Array(h),B=new Float32Array(h),U=new Float64Array(h),F=new BigInt64Array(h),G=new BigUint64Array(h)}function L(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)me(r.preRun.shift());ge(Se)}function H(){z=!0,!r.noFSInit&&!M.initialized&&M.init(),Ps.da(),M.ignorePermissions=!1}function Z(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)je(r.postRun.shift());ge(le)}function te(h){var _;(_=r.onAbort)==null||_.call(r,h),h="Aborted("+h+")",k(h),y=!0,h+=". Build with -sASSERTIONS for more info.";var g=new WebAssembly.RuntimeError(h);throw S==null||S(g),g}var K;function q(){return r.locateFile?d("joraw.wasm"):new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href}function J(h){if(h==K&&v)return new Uint8Array(v);if(m)return m(h);throw"both async and sync fetching of the wasm failed"}async function ve(h){if(!v)try{var g=await p(h);return new Uint8Array(g)}catch{}return J(h)}async function ie(h,g){try{var _=await ve(h),N=await WebAssembly.instantiate(_,g);return N}catch(D){k(`failed to asynchronously prepare wasm: ${D}`),te(D)}}async function pe(h,g,_){if(!h&&!w(g)&&!i)try{var N=fetch(g,{credentials:"same-origin"}),D=await WebAssembly.instantiateStreaming(N,_);return D}catch(W){k(`wasm streaming compile failed: ${W}`),k("falling back to ArrayBuffer instantiation")}return ie(g,_)}function oe(){var h={a:_g};return h}async function V(){function h(W,X){return Ps=W.exports,Ps=DN(Ps),ao(Ps),I(),Ps}function g(W){return h(W.instance)}var _=oe();if(r.instantiateWasm)return new Promise((W,X)=>{r.instantiateWasm(_,(ne,fe)=>{W(h(ne))})});K??(K=q());var N=await pe(v,K,_),D=g(N);return D}class se{constructor(g){Yr(this,"name","ExitStatus");this.message=`Program terminated with exit(${g})`,this.status=g}}var ge=h=>{for(;h.length>0;)h.shift()(r)},le=[],je=h=>le.push(h),Se=[],me=h=>Se.push(h),he=!0,Pe=h=>Ln(h),$e=()=>Fi(),Ve=9007199254740992,He=-9007199254740992,Je=h=>h<He||h>Ve?NaN:Number(h),yt=globalThis.TextDecoder&&new TextDecoder,wt=(h,g,_,N)=>{var D=g+_;if(N)return D;for(;h[g]&&!(g>=D);)++g;return g},ir=(h,g=0,_,N)=>{g>>>=0;var D=wt(h,g,_,N);if(D-g>16&&h.buffer&&yt)return yt.decode(h.subarray(g,D));for(var W="";g<D;){var X=h[g++];if(!(X&128)){W+=String.fromCharCode(X);continue}var ne=h[g++]&63;if((X&224)==192){W+=String.fromCharCode((X&31)<<6|ne);continue}var fe=h[g++]&63;if((X&240)==224?X=(X&15)<<12|ne<<6|fe:X=(X&7)<<18|ne<<12|fe<<6|h[g++]&63,X<65536)W+=String.fromCharCode(X);else{var Te=X-65536;W+=String.fromCharCode(55296|Te>>10,56320|Te&1023)}}return W},jt=(h,g,_)=>(h>>>=0,h?ir(O,h,g,_):"");function hr(h,g,_,N){return h>>>=0,g>>>=0,N>>>=0,te(`Assertion failed: ${jt(h)}, at: `+[g?jt(g):"unknown filename",_,N?jt(N):"unknown function"])}class _t{constructor(g){this.excPtr=g,this.ptr=g-24}set_type(g){T[this.ptr+4>>>2>>>0]=g}get_type(){return T[this.ptr+4>>>2>>>0]}set_destructor(g){T[this.ptr+8>>>2>>>0]=g}get_destructor(){return T[this.ptr+8>>>2>>>0]}set_caught(g){g=g?1:0,j[this.ptr+12>>>0]=g}get_caught(){return j[this.ptr+12>>>0]!=0}set_rethrown(g){g=g?1:0,j[this.ptr+13>>>0]=g}get_rethrown(){return j[this.ptr+13>>>0]!=0}init(g,_){this.set_adjusted_ptr(0),this.set_type(g),this.set_destructor(_)}set_adjusted_ptr(g){T[this.ptr+16>>>2>>>0]=g}get_adjusted_ptr(){return T[this.ptr+16>>>2>>>0]}}var or=0;function Ir(h,g,_){h>>>=0,g>>>=0,_>>>=0;var N=new _t(h);throw N.init(g,_),or=h,or}var Rt=()=>{var h=E[+Le.varargs>>>2>>>0];return Le.varargs+=4,h},Sr=Rt,et={isAbs:h=>h.charAt(0)==="/",splitPath:h=>{var g=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return g.exec(h).slice(1)},normalizeArray:(h,g)=>{for(var _=0,N=h.length-1;N>=0;N--){var D=h[N];D==="."?h.splice(N,1):D===".."?(h.splice(N,1),_++):_&&(h.splice(N,1),_--)}if(g)for(;_;_--)h.unshift("..");return h},normalize:h=>{var g=et.isAbs(h),_=h.slice(-1)==="/";return h=et.normalizeArray(h.split("/").filter(N=>!!N),!g).join("/"),!h&&!g&&(h="."),h&&_&&(h+="/"),(g?"/":"")+h},dirname:h=>{var g=et.splitPath(h),_=g[0],N=g[1];return!_&&!N?".":(N&&(N=N.slice(0,-1)),_+N)},basename:h=>h&&h.match(/([^\/]+|\/)\/*$/)[1],join:(...h)=>et.normalize(h.join("/")),join2:(h,g)=>et.normalize(h+"/"+g)},ht=()=>{if(i){var h=o("crypto");return g=>h.randomFillSync(g)}return g=>crypto.getRandomValues(g)},Qt=h=>{(Qt=ht())(h)},Lt={resolve:(...h)=>{for(var g="",_=!1,N=h.length-1;N>=-1&&!_;N--){var D=N>=0?h[N]:M.cwd();if(typeof D!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!D)return"";g=D+"/"+g,_=et.isAbs(D)}return g=et.normalizeArray(g.split("/").filter(W=>!!W),!_).join("/"),(_?"/":"")+g||"."},relative:(h,g)=>{h=Lt.resolve(h).slice(1),g=Lt.resolve(g).slice(1);function _(Te){for(var Qe=0;Qe<Te.length&&Te[Qe]==="";Qe++);for(var at=Te.length-1;at>=0&&Te[at]==="";at--);return Qe>at?[]:Te.slice(Qe,at-Qe+1)}for(var N=_(h.split("/")),D=_(g.split("/")),W=Math.min(N.length,D.length),X=W,ne=0;ne<W;ne++)if(N[ne]!==D[ne]){X=ne;break}for(var fe=[],ne=X;ne<N.length;ne++)fe.push("..");return fe=fe.concat(D.slice(X)),fe.join("/")}},mr=[],jr=h=>{for(var g=0,_=0;_<h.length;++_){var N=h.charCodeAt(_);N<=127?g++:N<=2047?g+=2:N>=55296&&N<=57343?(g+=4,++_):g+=3}return g},tn=(h,g,_,N)=>{if(_>>>=0,!(N>0))return 0;for(var D=_,W=_+N-1,X=0;X<h.length;++X){var ne=h.codePointAt(X);if(ne<=127){if(_>=W)break;g[_++>>>0]=ne}else if(ne<=2047){if(_+1>=W)break;g[_++>>>0]=192|ne>>6,g[_++>>>0]=128|ne&63}else if(ne<=65535){if(_+2>=W)break;g[_++>>>0]=224|ne>>12,g[_++>>>0]=128|ne>>6&63,g[_++>>>0]=128|ne&63}else{if(_+3>=W)break;g[_++>>>0]=240|ne>>18,g[_++>>>0]=128|ne>>12&63,g[_++>>>0]=128|ne>>6&63,g[_++>>>0]=128|ne&63,X++}}return g[_>>>0]=0,_-D},Mt=(h,g,_)=>{var N=jr(h)+1,D=new Array(N),W=tn(h,D,0,D.length);return D.length=W,D},Xr=()=>{var W;if(!mr.length){var h=null;if(i){var g=256,_=Buffer.alloc(g),N=0,D=process.stdin.fd;try{N=x.readSync(D,_,0,g)}catch(X){if(X.toString().includes("EOF"))N=0;else throw X}N>0&&(h=_.slice(0,N).toString("utf-8"))}else(W=globalThis.window)!=null&&W.prompt&&(h=window.prompt("Input: "),h!==null&&(h+=`
`));if(!h)return null;mr=Mt(h)}return mr.shift()},Pt={ttys:[],init(){},shutdown(){},register(h,g){Pt.ttys[h]={input:[],output:[],ops:g},M.registerDevice(h,Pt.stream_ops)},stream_ops:{open(h){var g=Pt.ttys[h.node.rdev];if(!g)throw new M.ErrnoError(43);h.tty=g,h.seekable=!1},close(h){h.tty.ops.fsync(h.tty)},fsync(h){h.tty.ops.fsync(h.tty)},read(h,g,_,N,D){if(!h.tty||!h.tty.ops.get_char)throw new M.ErrnoError(60);for(var W=0,X=0;X<N;X++){var ne;try{ne=h.tty.ops.get_char(h.tty)}catch{throw new M.ErrnoError(29)}if(ne===void 0&&W===0)throw new M.ErrnoError(6);if(ne==null)break;W++,g[_+X]=ne}return W&&(h.node.atime=Date.now()),W},write(h,g,_,N,D){if(!h.tty||!h.tty.ops.put_char)throw new M.ErrnoError(60);try{for(var W=0;W<N;W++)h.tty.ops.put_char(h.tty,g[_+W])}catch{throw new M.ErrnoError(29)}return N&&(h.node.mtime=h.node.ctime=Date.now()),W}},default_tty_ops:{get_char(h){return Xr()},put_char(h,g){g===null||g===10?(b(ir(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;((g=h.output)==null?void 0:g.length)>0&&(b(ir(h.output)),h.output=[])},ioctl_tcgets(h){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(h,g,_){return 0},ioctl_tiocgwinsz(h){return[24,80]}},default_tty1_ops:{put_char(h,g){g===null||g===10?(k(ir(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;((g=h.output)==null?void 0:g.length)>0&&(k(ir(h.output)),h.output=[])}}},rn=h=>{te()},ze={ops_table:null,mount(h){return ze.createNode(null,"/",16895,0)},createNode(h,g,_,N){if(M.isBlkdev(_)||M.isFIFO(_))throw new M.ErrnoError(63);ze.ops_table||(ze.ops_table={dir:{node:{getattr:ze.node_ops.getattr,setattr:ze.node_ops.setattr,lookup:ze.node_ops.lookup,mknod:ze.node_ops.mknod,rename:ze.node_ops.rename,unlink:ze.node_ops.unlink,rmdir:ze.node_ops.rmdir,readdir:ze.node_ops.readdir,symlink:ze.node_ops.symlink},stream:{llseek:ze.stream_ops.llseek}},file:{node:{getattr:ze.node_ops.getattr,setattr:ze.node_ops.setattr},stream:{llseek:ze.stream_ops.llseek,read:ze.stream_ops.read,write:ze.stream_ops.write,mmap:ze.stream_ops.mmap,msync:ze.stream_ops.msync}},link:{node:{getattr:ze.node_ops.getattr,setattr:ze.node_ops.setattr,readlink:ze.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ze.node_ops.getattr,setattr:ze.node_ops.setattr},stream:M.chrdev_stream_ops}});var D=M.createNode(h,g,_,N);return M.isDir(D.mode)?(D.node_ops=ze.ops_table.dir.node,D.stream_ops=ze.ops_table.dir.stream,D.contents={}):M.isFile(D.mode)?(D.node_ops=ze.ops_table.file.node,D.stream_ops=ze.ops_table.file.stream,D.usedBytes=0,D.contents=null):M.isLink(D.mode)?(D.node_ops=ze.ops_table.link.node,D.stream_ops=ze.ops_table.link.stream):M.isChrdev(D.mode)&&(D.node_ops=ze.ops_table.chrdev.node,D.stream_ops=ze.ops_table.chrdev.stream),D.atime=D.mtime=D.ctime=Date.now(),h&&(h.contents[g]=D,h.atime=h.mtime=h.ctime=D.atime),D},getFileDataAsTypedArray(h){return h.contents?h.contents.subarray?h.contents.subarray(0,h.usedBytes):new Uint8Array(h.contents):new Uint8Array(0)},expandFileStorage(h,g){var _=h.contents?h.contents.length:0;if(!(_>=g)){var N=1024*1024;g=Math.max(g,_*(_<N?2:1.125)>>>0),_!=0&&(g=Math.max(g,256));var D=h.contents;h.contents=new Uint8Array(g),h.usedBytes>0&&h.contents.set(D.subarray(0,h.usedBytes),0)}},resizeFileStorage(h,g){if(h.usedBytes!=g)if(g==0)h.contents=null,h.usedBytes=0;else{var _=h.contents;h.contents=new Uint8Array(g),_&&h.contents.set(_.subarray(0,Math.min(g,h.usedBytes))),h.usedBytes=g}},node_ops:{getattr(h){var g={};return g.dev=M.isChrdev(h.mode)?h.id:1,g.ino=h.id,g.mode=h.mode,g.nlink=1,g.uid=0,g.gid=0,g.rdev=h.rdev,M.isDir(h.mode)?g.size=4096:M.isFile(h.mode)?g.size=h.usedBytes:M.isLink(h.mode)?g.size=h.link.length:g.size=0,g.atime=new Date(h.atime),g.mtime=new Date(h.mtime),g.ctime=new Date(h.ctime),g.blksize=4096,g.blocks=Math.ceil(g.size/g.blksize),g},setattr(h,g){for(const _ of["mode","atime","mtime","ctime"])g[_]!=null&&(h[_]=g[_]);g.size!==void 0&&ze.resizeFileStorage(h,g.size)},lookup(h,g){throw ze.doesNotExistError||(ze.doesNotExistError=new M.ErrnoError(44),ze.doesNotExistError.stack="<generic error, no stack>"),ze.doesNotExistError},mknod(h,g,_,N){return ze.createNode(h,g,_,N)},rename(h,g,_){var N;try{N=M.lookupNode(g,_)}catch{}if(N){if(M.isDir(h.mode))for(var D in N.contents)throw new M.ErrnoError(55);M.hashRemoveNode(N)}delete h.parent.contents[h.name],g.contents[_]=h,h.name=_,g.ctime=g.mtime=h.parent.ctime=h.parent.mtime=Date.now()},unlink(h,g){delete h.contents[g],h.ctime=h.mtime=Date.now()},rmdir(h,g){var _=M.lookupNode(h,g);for(var N in _.contents)throw new M.ErrnoError(55);delete h.contents[g],h.ctime=h.mtime=Date.now()},readdir(h){return[".","..",...Object.keys(h.contents)]},symlink(h,g,_){var N=ze.createNode(h,g,41471,0);return N.link=_,N},readlink(h){if(!M.isLink(h.mode))throw new M.ErrnoError(28);return h.link}},stream_ops:{read(h,g,_,N,D){var W=h.node.contents;if(D>=h.node.usedBytes)return 0;var X=Math.min(h.node.usedBytes-D,N);if(X>8&&W.subarray)g.set(W.subarray(D,D+X),_);else for(var ne=0;ne<X;ne++)g[_+ne]=W[D+ne];return X},write(h,g,_,N,D,W){if(g.buffer===j.buffer&&(W=!1),!N)return 0;var X=h.node;if(X.mtime=X.ctime=Date.now(),g.subarray&&(!X.contents||X.contents.subarray)){if(W)return X.contents=g.subarray(_,_+N),X.usedBytes=N,N;if(X.usedBytes===0&&D===0)return X.contents=g.slice(_,_+N),X.usedBytes=N,N;if(D+N<=X.usedBytes)return X.contents.set(g.subarray(_,_+N),D),N}if(ze.expandFileStorage(X,D+N),X.contents.subarray&&g.subarray)X.contents.set(g.subarray(_,_+N),D);else for(var ne=0;ne<N;ne++)X.contents[D+ne]=g[_+ne];return X.usedBytes=Math.max(X.usedBytes,D+N),N},llseek(h,g,_){var N=g;if(_===1?N+=h.position:_===2&&M.isFile(h.node.mode)&&(N+=h.node.usedBytes),N<0)throw new M.ErrnoError(28);return N},mmap(h,g,_,N,D){if(!M.isFile(h.node.mode))throw new M.ErrnoError(43);var W,X,ne=h.node.contents;if(!(D&2)&&ne&&ne.buffer===j.buffer)X=!1,W=ne.byteOffset;else{if(X=!0,W=rn(),!W)throw new M.ErrnoError(48);ne&&((_>0||_+g<ne.length)&&(ne.subarray?ne=ne.subarray(_,_+g):ne=Array.prototype.slice.call(ne,_,_+g)),j.set(ne,W>>>0))}return{ptr:W,allocated:X}},msync(h,g,_,N,D){return ze.stream_ops.write(h,g,0,N,_,!1),0}}},cn=h=>{var g={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},_=g[h];if(typeof _>"u")throw new Error(`Unknown file open mode: ${h}`);return _},Lr=(h,g)=>{var _=0;return h&&(_|=365),g&&(_|=146),_},_r=async h=>{var g=await p(h);return new Uint8Array(g)},jn=(...h)=>M.createDataFile(...h),Tr=0,Pr=null,nn=h=>{var _;if(Tr--,(_=r.monitorRunDependencies)==null||_.call(r,Tr),Tr==0&&Pr){var g=Pr;Pr=null,g()}},ea=h=>{var g;Tr++,(g=r.monitorRunDependencies)==null||g.call(r,Tr)},Xn=[],tr=async(h,g)=>{typeof Browser<"u"&&Browser.init();for(var _ of Xn)if(_.canHandle(g))return _.handle(h,g);return h},sr=async(h,g,_,N,D,W,X,ne)=>{var fe=g?Lt.resolve(et.join2(h,g)):h;ea();try{var Te=_;typeof _=="string"&&(Te=await _r(_)),Te=await tr(Te,fe),ne==null||ne(),W||jn(h,g,Te,N,D,X)}finally{nn()}},xr=(h,g,_,N,D,W,X,ne,fe,Te)=>{sr(h,g,_,N,D,ne,fe,Te).then(W).catch(X)},M={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{constructor(h){Yr(this,"name","ErrnoError");this.errno=h}},FSStream:class{constructor(){Yr(this,"shared",{})}get object(){return this.node}set object(h){this.node=h}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(h){this.shared.flags=h}get position(){return this.shared.position}set position(h){this.shared.position=h}},FSNode:class{constructor(h,g,_,N){Yr(this,"node_ops",{});Yr(this,"stream_ops",{});Yr(this,"readMode",365);Yr(this,"writeMode",146);Yr(this,"mounted",null);h||(h=this),this.parent=h,this.mount=h.mount,this.id=M.nextInode++,this.name=g,this.mode=_,this.rdev=N,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(h){h?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(h){h?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return M.isDir(this.mode)}get isDevice(){return M.isChrdev(this.mode)}},lookupPath(h,g={}){if(!h)throw new M.ErrnoError(44);g.follow_mount??(g.follow_mount=!0),et.isAbs(h)||(h=M.cwd()+"/"+h);e:for(var _=0;_<40;_++){for(var N=h.split("/").filter(Te=>!!Te),D=M.root,W="/",X=0;X<N.length;X++){var ne=X===N.length-1;if(ne&&g.parent)break;if(N[X]!=="."){if(N[X]===".."){if(W=et.dirname(W),M.isRoot(D)){h=W+"/"+N.slice(X+1).join("/"),_--;continue e}else D=D.parent;continue}W=et.join2(W,N[X]);try{D=M.lookupNode(D,N[X])}catch(Te){if((Te==null?void 0:Te.errno)===44&&ne&&g.noent_okay)return{path:W};throw Te}if(M.isMountpoint(D)&&(!ne||g.follow_mount)&&(D=D.mounted.root),M.isLink(D.mode)&&(!ne||g.follow)){if(!D.node_ops.readlink)throw new M.ErrnoError(52);var fe=D.node_ops.readlink(D);et.isAbs(fe)||(fe=et.dirname(W)+"/"+fe),h=fe+"/"+N.slice(X+1).join("/");continue e}}}return{path:W,node:D}}throw new M.ErrnoError(32)},getPath(h){for(var g;;){if(M.isRoot(h)){var _=h.mount.mountpoint;return g?_[_.length-1]!=="/"?`${_}/${g}`:_+g:_}g=g?`${h.name}/${g}`:h.name,h=h.parent}},hashName(h,g){for(var _=0,N=0;N<g.length;N++)_=(_<<5)-_+g.charCodeAt(N)|0;return(h+_>>>0)%M.nameTable.length},hashAddNode(h){var g=M.hashName(h.parent.id,h.name);h.name_next=M.nameTable[g],M.nameTable[g]=h},hashRemoveNode(h){var g=M.hashName(h.parent.id,h.name);if(M.nameTable[g]===h)M.nameTable[g]=h.name_next;else for(var _=M.nameTable[g];_;){if(_.name_next===h){_.name_next=h.name_next;break}_=_.name_next}},lookupNode(h,g){var _=M.mayLookup(h);if(_)throw new M.ErrnoError(_);for(var N=M.hashName(h.id,g),D=M.nameTable[N];D;D=D.name_next){var W=D.name;if(D.parent.id===h.id&&W===g)return D}return M.lookup(h,g)},createNode(h,g,_,N){var D=new M.FSNode(h,g,_,N);return M.hashAddNode(D),D},destroyNode(h){M.hashRemoveNode(h)},isRoot(h){return h===h.parent},isMountpoint(h){return!!h.mounted},isFile(h){return(h&61440)===32768},isDir(h){return(h&61440)===16384},isLink(h){return(h&61440)===40960},isChrdev(h){return(h&61440)===8192},isBlkdev(h){return(h&61440)===24576},isFIFO(h){return(h&61440)===4096},isSocket(h){return(h&49152)===49152},flagsToPermissionString(h){var g=["r","w","rw"][h&3];return h&512&&(g+="w"),g},nodePermissions(h,g){return M.ignorePermissions?0:g.includes("r")&&!(h.mode&292)||g.includes("w")&&!(h.mode&146)||g.includes("x")&&!(h.mode&73)?2:0},mayLookup(h){if(!M.isDir(h.mode))return 54;var g=M.nodePermissions(h,"x");return g||(h.node_ops.lookup?0:2)},mayCreate(h,g){if(!M.isDir(h.mode))return 54;try{var _=M.lookupNode(h,g);return 20}catch{}return M.nodePermissions(h,"wx")},mayDelete(h,g,_){var N;try{N=M.lookupNode(h,g)}catch(W){return W.errno}var D=M.nodePermissions(h,"wx");if(D)return D;if(_){if(!M.isDir(N.mode))return 54;if(M.isRoot(N)||M.getPath(N)===M.cwd())return 10}else if(M.isDir(N.mode))return 31;return 0},mayOpen(h,g){return h?M.isLink(h.mode)?32:M.isDir(h.mode)&&(M.flagsToPermissionString(g)!=="r"||g&576)?31:M.nodePermissions(h,M.flagsToPermissionString(g)):44},checkOpExists(h,g){if(!h)throw new M.ErrnoError(g);return h},MAX_OPEN_FDS:4096,nextfd(){for(var h=0;h<=M.MAX_OPEN_FDS;h++)if(!M.streams[h])return h;throw new M.ErrnoError(33)},getStreamChecked(h){var g=M.getStream(h);if(!g)throw new M.ErrnoError(8);return g},getStream:h=>M.streams[h],createStream(h,g=-1){return h=Object.assign(new M.FSStream,h),g==-1&&(g=M.nextfd()),h.fd=g,M.streams[g]=h,h},closeStream(h){M.streams[h]=null},dupStream(h,g=-1){var N,D;var _=M.createStream(h,g);return(D=(N=_.stream_ops)==null?void 0:N.dup)==null||D.call(N,_),_},doSetAttr(h,g,_){var N=h==null?void 0:h.stream_ops.setattr,D=N?h:g;N??(N=g.node_ops.setattr),M.checkOpExists(N,63),N(D,_)},chrdev_stream_ops:{open(h){var _,N;var g=M.getDevice(h.node.rdev);h.stream_ops=g.stream_ops,(N=(_=h.stream_ops).open)==null||N.call(_,h)},llseek(){throw new M.ErrnoError(70)}},major:h=>h>>8,minor:h=>h&255,makedev:(h,g)=>h<<8|g,registerDevice(h,g){M.devices[h]={stream_ops:g}},getDevice:h=>M.devices[h],getMounts(h){for(var g=[],_=[h];_.length;){var N=_.pop();g.push(N),_.push(...N.mounts)}return g},syncfs(h,g){typeof h=="function"&&(g=h,h=!1),M.syncFSRequests++,M.syncFSRequests>1&&k(`warning: ${M.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var _=M.getMounts(M.root.mount),N=0;function D(ne){return M.syncFSRequests--,g(ne)}function W(ne){if(ne)return W.errored?void 0:(W.errored=!0,D(ne));++N>=_.length&&D(null)}for(var X of _)X.type.syncfs?X.type.syncfs(X,h,W):W(null)},mount(h,g,_){var N=_==="/",D=!_,W;if(N&&M.root)throw new M.ErrnoError(10);if(!N&&!D){var X=M.lookupPath(_,{follow_mount:!1});if(_=X.path,W=X.node,M.isMountpoint(W))throw new M.ErrnoError(10);if(!M.isDir(W.mode))throw new M.ErrnoError(54)}var ne={type:h,opts:g,mountpoint:_,mounts:[]},fe=h.mount(ne);return fe.mount=ne,ne.root=fe,N?M.root=fe:W&&(W.mounted=ne,W.mount&&W.mount.mounts.push(ne)),fe},unmount(h){var g=M.lookupPath(h,{follow_mount:!1});if(!M.isMountpoint(g.node))throw new M.ErrnoError(28);var _=g.node,N=_.mounted,D=M.getMounts(N);for(var[W,X]of Object.entries(M.nameTable))for(;X;){var ne=X.name_next;D.includes(X.mount)&&M.destroyNode(X),X=ne}_.mounted=null;var fe=_.mount.mounts.indexOf(N);_.mount.mounts.splice(fe,1)},lookup(h,g){return h.node_ops.lookup(h,g)},mknod(h,g,_){var N=M.lookupPath(h,{parent:!0}),D=N.node,W=et.basename(h);if(!W)throw new M.ErrnoError(28);if(W==="."||W==="..")throw new M.ErrnoError(20);var X=M.mayCreate(D,W);if(X)throw new M.ErrnoError(X);if(!D.node_ops.mknod)throw new M.ErrnoError(63);return D.node_ops.mknod(D,W,g,_)},statfs(h){return M.statfsNode(M.lookupPath(h,{follow:!0}).node)},statfsStream(h){return M.statfsNode(h.node)},statfsNode(h){var g={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:M.nextInode,ffree:M.nextInode-1,fsid:42,flags:2,namelen:255};return h.node_ops.statfs&&Object.assign(g,h.node_ops.statfs(h.mount.opts.root)),g},create(h,g=438){return g&=4095,g|=32768,M.mknod(h,g,0)},mkdir(h,g=511){return g&=1023,g|=16384,M.mknod(h,g,0)},mkdirTree(h,g){var _=h.split("/"),N="";for(var D of _)if(D){(N||et.isAbs(h))&&(N+="/"),N+=D;try{M.mkdir(N,g)}catch(W){if(W.errno!=20)throw W}}},mkdev(h,g,_){return typeof _>"u"&&(_=g,g=438),g|=8192,M.mknod(h,g,_)},symlink(h,g){if(!Lt.resolve(h))throw new M.ErrnoError(44);var _=M.lookupPath(g,{parent:!0}),N=_.node;if(!N)throw new M.ErrnoError(44);var D=et.basename(g),W=M.mayCreate(N,D);if(W)throw new M.ErrnoError(W);if(!N.node_ops.symlink)throw new M.ErrnoError(63);return N.node_ops.symlink(N,D,h)},rename(h,g){var _=et.dirname(h),N=et.dirname(g),D=et.basename(h),W=et.basename(g),X,ne,fe;if(X=M.lookupPath(h,{parent:!0}),ne=X.node,X=M.lookupPath(g,{parent:!0}),fe=X.node,!ne||!fe)throw new M.ErrnoError(44);if(ne.mount!==fe.mount)throw new M.ErrnoError(75);var Te=M.lookupNode(ne,D),Qe=Lt.relative(h,N);if(Qe.charAt(0)!==".")throw new M.ErrnoError(28);if(Qe=Lt.relative(g,_),Qe.charAt(0)!==".")throw new M.ErrnoError(55);var at;try{at=M.lookupNode(fe,W)}catch{}if(Te!==at){var rt=M.isDir(Te.mode),Ie=M.mayDelete(ne,D,rt);if(Ie)throw new M.ErrnoError(Ie);if(Ie=at?M.mayDelete(fe,W,rt):M.mayCreate(fe,W),Ie)throw new M.ErrnoError(Ie);if(!ne.node_ops.rename)throw new M.ErrnoError(63);if(M.isMountpoint(Te)||at&&M.isMountpoint(at))throw new M.ErrnoError(10);if(fe!==ne&&(Ie=M.nodePermissions(ne,"w"),Ie))throw new M.ErrnoError(Ie);M.hashRemoveNode(Te);try{ne.node_ops.rename(Te,fe,W),Te.parent=fe}catch(Ut){throw Ut}finally{M.hashAddNode(Te)}}},rmdir(h){var g=M.lookupPath(h,{parent:!0}),_=g.node,N=et.basename(h),D=M.lookupNode(_,N),W=M.mayDelete(_,N,!0);if(W)throw new M.ErrnoError(W);if(!_.node_ops.rmdir)throw new M.ErrnoError(63);if(M.isMountpoint(D))throw new M.ErrnoError(10);_.node_ops.rmdir(_,N),M.destroyNode(D)},readdir(h){var g=M.lookupPath(h,{follow:!0}),_=g.node,N=M.checkOpExists(_.node_ops.readdir,54);return N(_)},unlink(h){var g=M.lookupPath(h,{parent:!0}),_=g.node;if(!_)throw new M.ErrnoError(44);var N=et.basename(h),D=M.lookupNode(_,N),W=M.mayDelete(_,N,!1);if(W)throw new M.ErrnoError(W);if(!_.node_ops.unlink)throw new M.ErrnoError(63);if(M.isMountpoint(D))throw new M.ErrnoError(10);_.node_ops.unlink(_,N),M.destroyNode(D)},readlink(h){var g=M.lookupPath(h),_=g.node;if(!_)throw new M.ErrnoError(44);if(!_.node_ops.readlink)throw new M.ErrnoError(28);return _.node_ops.readlink(_)},stat(h,g){var _=M.lookupPath(h,{follow:!g}),N=_.node,D=M.checkOpExists(N.node_ops.getattr,63);return D(N)},fstat(h){var g=M.getStreamChecked(h),_=g.node,N=g.stream_ops.getattr,D=N?g:_;return N??(N=_.node_ops.getattr),M.checkOpExists(N,63),N(D)},lstat(h){return M.stat(h,!0)},doChmod(h,g,_,N){M.doSetAttr(h,g,{mode:_&4095|g.mode&-4096,ctime:Date.now(),dontFollow:N})},chmod(h,g,_){var N;if(typeof h=="string"){var D=M.lookupPath(h,{follow:!_});N=D.node}else N=h;M.doChmod(null,N,g,_)},lchmod(h,g){M.chmod(h,g,!0)},fchmod(h,g){var _=M.getStreamChecked(h);M.doChmod(_,_.node,g,!1)},doChown(h,g,_){M.doSetAttr(h,g,{timestamp:Date.now(),dontFollow:_})},chown(h,g,_,N){var D;if(typeof h=="string"){var W=M.lookupPath(h,{follow:!N});D=W.node}else D=h;M.doChown(null,D,N)},lchown(h,g,_){M.chown(h,g,_,!0)},fchown(h,g,_){var N=M.getStreamChecked(h);M.doChown(N,N.node,!1)},doTruncate(h,g,_){if(M.isDir(g.mode))throw new M.ErrnoError(31);if(!M.isFile(g.mode))throw new M.ErrnoError(28);var N=M.nodePermissions(g,"w");if(N)throw new M.ErrnoError(N);M.doSetAttr(h,g,{size:_,timestamp:Date.now()})},truncate(h,g){if(g<0)throw new M.ErrnoError(28);var _;if(typeof h=="string"){var N=M.lookupPath(h,{follow:!0});_=N.node}else _=h;M.doTruncate(null,_,g)},ftruncate(h,g){var _=M.getStreamChecked(h);if(g<0||!(_.flags&2097155))throw new M.ErrnoError(28);M.doTruncate(_,_.node,g)},utime(h,g,_){var N=M.lookupPath(h,{follow:!0}),D=N.node,W=M.checkOpExists(D.node_ops.setattr,63);W(D,{atime:g,mtime:_})},open(h,g,_=438){if(h==="")throw new M.ErrnoError(44);g=typeof g=="string"?cn(g):g,g&64?_=_&4095|32768:_=0;var N,D;if(typeof h=="object")N=h;else{D=h.endsWith("/");var W=M.lookupPath(h,{follow:!(g&131072),noent_okay:!0});N=W.node,h=W.path}var X=!1;if(g&64)if(N){if(g&128)throw new M.ErrnoError(20)}else{if(D)throw new M.ErrnoError(31);N=M.mknod(h,_|511,0),X=!0}if(!N)throw new M.ErrnoError(44);if(M.isChrdev(N.mode)&&(g&=-513),g&65536&&!M.isDir(N.mode))throw new M.ErrnoError(54);if(!X){var ne=M.mayOpen(N,g);if(ne)throw new M.ErrnoError(ne)}g&512&&!X&&M.truncate(N,0),g&=-131713;var fe=M.createStream({node:N,path:M.getPath(N),flags:g,seekable:!0,position:0,stream_ops:N.stream_ops,ungotten:[],error:!1});return fe.stream_ops.open&&fe.stream_ops.open(fe),X&&M.chmod(N,_&511),r.logReadFiles&&!(g&1)&&(h in M.readFiles||(M.readFiles[h]=1)),fe},close(h){if(M.isClosed(h))throw new M.ErrnoError(8);h.getdents&&(h.getdents=null);try{h.stream_ops.close&&h.stream_ops.close(h)}catch(g){throw g}finally{M.closeStream(h.fd)}h.fd=null},isClosed(h){return h.fd===null},llseek(h,g,_){if(M.isClosed(h))throw new M.ErrnoError(8);if(!h.seekable||!h.stream_ops.llseek)throw new M.ErrnoError(70);if(_!=0&&_!=1&&_!=2)throw new M.ErrnoError(28);return h.position=h.stream_ops.llseek(h,g,_),h.ungotten=[],h.position},read(h,g,_,N,D){if(N<0||D<0)throw new M.ErrnoError(28);if(M.isClosed(h))throw new M.ErrnoError(8);if((h.flags&2097155)===1)throw new M.ErrnoError(8);if(M.isDir(h.node.mode))throw new M.ErrnoError(31);if(!h.stream_ops.read)throw new M.ErrnoError(28);var W=typeof D<"u";if(!W)D=h.position;else if(!h.seekable)throw new M.ErrnoError(70);var X=h.stream_ops.read(h,g,_,N,D);return W||(h.position+=X),X},write(h,g,_,N,D,W){if(N<0||D<0)throw new M.ErrnoError(28);if(M.isClosed(h))throw new M.ErrnoError(8);if(!(h.flags&2097155))throw new M.ErrnoError(8);if(M.isDir(h.node.mode))throw new M.ErrnoError(31);if(!h.stream_ops.write)throw new M.ErrnoError(28);h.seekable&&h.flags&1024&&M.llseek(h,0,2);var X=typeof D<"u";if(!X)D=h.position;else if(!h.seekable)throw new M.ErrnoError(70);var ne=h.stream_ops.write(h,g,_,N,D,W);return X||(h.position+=ne),ne},mmap(h,g,_,N,D){if(N&2&&!(D&2)&&(h.flags&2097155)!==2)throw new M.ErrnoError(2);if((h.flags&2097155)===1)throw new M.ErrnoError(2);if(!h.stream_ops.mmap)throw new M.ErrnoError(43);if(!g)throw new M.ErrnoError(28);return h.stream_ops.mmap(h,g,_,N,D)},msync(h,g,_,N,D){return h.stream_ops.msync?h.stream_ops.msync(h,g,_,N,D):0},ioctl(h,g,_){if(!h.stream_ops.ioctl)throw new M.ErrnoError(59);return h.stream_ops.ioctl(h,g,_)},readFile(h,g={}){g.flags=g.flags||0,g.encoding=g.encoding||"binary",g.encoding!=="utf8"&&g.encoding!=="binary"&&te(`Invalid encoding type "${g.encoding}"`);var _=M.open(h,g.flags),N=M.stat(h),D=N.size,W=new Uint8Array(D);return M.read(_,W,0,D,0),g.encoding==="utf8"&&(W=ir(W)),M.close(_),W},writeFile(h,g,_={}){_.flags=_.flags||577;var N=M.open(h,_.flags,_.mode);typeof g=="string"&&(g=new Uint8Array(Mt(g))),ArrayBuffer.isView(g)?M.write(N,g,0,g.byteLength,void 0,_.canOwn):te("Unsupported data type"),M.close(N)},cwd:()=>M.currentPath,chdir(h){var g=M.lookupPath(h,{follow:!0});if(g.node===null)throw new M.ErrnoError(44);if(!M.isDir(g.node.mode))throw new M.ErrnoError(54);var _=M.nodePermissions(g.node,"x");if(_)throw new M.ErrnoError(_);M.currentPath=g.path},createDefaultDirectories(){M.mkdir("/tmp"),M.mkdir("/home"),M.mkdir("/home/web_user")},createDefaultDevices(){M.mkdir("/dev"),M.registerDevice(M.makedev(1,3),{read:()=>0,write:(N,D,W,X,ne)=>X,llseek:()=>0}),M.mkdev("/dev/null",M.makedev(1,3)),Pt.register(M.makedev(5,0),Pt.default_tty_ops),Pt.register(M.makedev(6,0),Pt.default_tty1_ops),M.mkdev("/dev/tty",M.makedev(5,0)),M.mkdev("/dev/tty1",M.makedev(6,0));var h=new Uint8Array(1024),g=0,_=()=>(g===0&&(Qt(h),g=h.byteLength),h[--g]);M.createDevice("/dev","random",_),M.createDevice("/dev","urandom",_),M.mkdir("/dev/shm"),M.mkdir("/dev/shm/tmp")},createSpecialDirectories(){M.mkdir("/proc");var h=M.mkdir("/proc/self");M.mkdir("/proc/self/fd"),M.mount({mount(){var g=M.createNode(h,"fd",16895,73);return g.stream_ops={llseek:ze.stream_ops.llseek},g.node_ops={lookup(_,N){var D=+N,W=M.getStreamChecked(D),X={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>W.path},id:D+1};return X.parent=X,X},readdir(){return Array.from(M.streams.entries()).filter(([_,N])=>N).map(([_,N])=>_.toString())}},g}},{},"/proc/self/fd")},createStandardStreams(h,g,_){h?M.createDevice("/dev","stdin",h):M.symlink("/dev/tty","/dev/stdin"),g?M.createDevice("/dev","stdout",null,g):M.symlink("/dev/tty","/dev/stdout"),_?M.createDevice("/dev","stderr",null,_):M.symlink("/dev/tty1","/dev/stderr"),M.open("/dev/stdin",0),M.open("/dev/stdout",1),M.open("/dev/stderr",1)},staticInit(){M.nameTable=new Array(4096),M.mount(ze,{},"/"),M.createDefaultDirectories(),M.createDefaultDevices(),M.createSpecialDirectories(),M.filesystems={MEMFS:ze}},init(h,g,_){M.initialized=!0,h??(h=r.stdin),g??(g=r.stdout),_??(_=r.stderr),M.createStandardStreams(h,g,_)},quit(){M.initialized=!1;for(var h of M.streams)h&&M.close(h)},findObject(h,g){var _=M.analyzePath(h,g);return _.exists?_.object:null},analyzePath(h,g){try{var _=M.lookupPath(h,{follow:!g});h=_.path}catch{}var N={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var _=M.lookupPath(h,{parent:!0});N.parentExists=!0,N.parentPath=_.path,N.parentObject=_.node,N.name=et.basename(h),_=M.lookupPath(h,{follow:!g}),N.exists=!0,N.path=_.path,N.object=_.node,N.name=_.node.name,N.isRoot=_.path==="/"}catch(D){N.error=D.errno}return N},createPath(h,g,_,N){h=typeof h=="string"?h:M.getPath(h);for(var D=g.split("/").reverse();D.length;){var W=D.pop();if(W){var X=et.join2(h,W);try{M.mkdir(X)}catch(ne){if(ne.errno!=20)throw ne}h=X}}return X},createFile(h,g,_,N,D){var W=et.join2(typeof h=="string"?h:M.getPath(h),g),X=Lr(N,D);return M.create(W,X)},createDataFile(h,g,_,N,D,W){var X=g;h&&(h=typeof h=="string"?h:M.getPath(h),X=g?et.join2(h,g):h);var ne=Lr(N,D),fe=M.create(X,ne);if(_){if(typeof _=="string"){for(var Te=new Array(_.length),Qe=0,at=_.length;Qe<at;++Qe)Te[Qe]=_.charCodeAt(Qe);_=Te}M.chmod(fe,ne|146);var rt=M.open(fe,577);M.write(rt,_,0,_.length,0,W),M.close(rt),M.chmod(fe,ne)}},createDevice(h,g,_,N){var ne;var D=et.join2(typeof h=="string"?h:M.getPath(h),g),W=Lr(!!_,!!N);(ne=M.createDevice).major??(ne.major=64);var X=M.makedev(M.createDevice.major++,0);return M.registerDevice(X,{open(fe){fe.seekable=!1},close(fe){var Te;(Te=N==null?void 0:N.buffer)!=null&&Te.length&&N(10)},read(fe,Te,Qe,at,rt){for(var Ie=0,Ut=0;Ut<at;Ut++){var yr;try{yr=_()}catch{throw new M.ErrnoError(29)}if(yr===void 0&&Ie===0)throw new M.ErrnoError(6);if(yr==null)break;Ie++,Te[Qe+Ut]=yr}return Ie&&(fe.node.atime=Date.now()),Ie},write(fe,Te,Qe,at,rt){for(var Ie=0;Ie<at;Ie++)try{N(Te[Qe+Ie])}catch{throw new M.ErrnoError(29)}return at&&(fe.node.mtime=fe.node.ctime=Date.now()),Ie}}),M.mkdev(D,W,X)},forceLoadFile(h){if(h.isDevice||h.isFolder||h.link||h.contents)return!0;if(globalThis.XMLHttpRequest)te("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else try{h.contents=m(h.url)}catch{throw new M.ErrnoError(29)}},createLazyFile(h,g,_,N,D){class W{constructor(){Yr(this,"lengthKnown",!1);Yr(this,"chunks",[])}get(rt){if(!(rt>this.length-1||rt<0)){var Ie=rt%this.chunkSize,Ut=rt/this.chunkSize|0;return this.getter(Ut)[Ie]}}setDataGetter(rt){this.getter=rt}cacheLength(){var rt=new XMLHttpRequest;rt.open("HEAD",_,!1),rt.send(null),rt.status>=200&&rt.status<300||rt.status===304||te("Couldn't load "+_+". Status: "+rt.status);var Ie=Number(rt.getResponseHeader("Content-length")),Ut,yr=(Ut=rt.getResponseHeader("Accept-Ranges"))&&Ut==="bytes",vn=(Ut=rt.getResponseHeader("Content-Encoding"))&&Ut==="gzip",xn=1024*1024;yr||(xn=Ie);var ba=(ti,io)=>{ti>io&&te("invalid range ("+ti+", "+io+") or no bytes requested!"),io>Ie-1&&te("only "+Ie+" bytes available! programmer error!");var Tn=new XMLHttpRequest;return Tn.open("GET",_,!1),Ie!==xn&&Tn.setRequestHeader("Range","bytes="+ti+"-"+io),Tn.responseType="arraybuffer",Tn.overrideMimeType&&Tn.overrideMimeType("text/plain; charset=x-user-defined"),Tn.send(null),Tn.status>=200&&Tn.status<300||Tn.status===304||te("Couldn't load "+_+". Status: "+Tn.status),Tn.response!==void 0?new Uint8Array(Tn.response||[]):Mt(Tn.responseText||"")},fa=this;fa.setDataGetter(ti=>{var io=ti*xn,Tn=(ti+1)*xn-1;return Tn=Math.min(Tn,Ie-1),typeof fa.chunks[ti]>"u"&&(fa.chunks[ti]=ba(io,Tn)),typeof fa.chunks[ti]>"u"&&te("doXHR failed!"),fa.chunks[ti]}),(vn||!Ie)&&(xn=Ie=1,Ie=this.getter(0).length,xn=Ie,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Ie,this._chunkSize=xn,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(globalThis.XMLHttpRequest){a||te("Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc");var X=new W,ne={isDevice:!1,contents:X}}else var ne={isDevice:!1,url:_};var fe=M.createFile(h,g,ne,N,D);ne.contents?fe.contents=ne.contents:ne.url&&(fe.contents=null,fe.url=ne.url),Object.defineProperties(fe,{usedBytes:{get:function(){return this.contents.length}}});var Te={};for(const[at,rt]of Object.entries(fe.stream_ops))Te[at]=(...Ie)=>(M.forceLoadFile(fe),rt(...Ie));function Qe(at,rt,Ie,Ut,yr){var vn=at.node.contents;if(yr>=vn.length)return 0;var xn=Math.min(vn.length-yr,Ut);if(vn.slice)for(var ba=0;ba<xn;ba++)rt[Ie+ba]=vn[yr+ba];else for(var ba=0;ba<xn;ba++)rt[Ie+ba]=vn.get(yr+ba);return xn}return Te.read=(at,rt,Ie,Ut,yr)=>(M.forceLoadFile(fe),Qe(at,rt,Ie,Ut,yr)),Te.mmap=(at,rt,Ie,Ut,yr)=>{M.forceLoadFile(fe);var vn=rn();if(!vn)throw new M.ErrnoError(48);return Qe(at,j,vn,rt,Ie),{ptr:vn,allocated:!0}},fe.stream_ops=Te,fe}},Le={DEFAULT_POLLMASK:5,calculateAt(h,g,_){if(et.isAbs(g))return g;var N;if(h===-100)N=M.cwd();else{var D=Le.getStreamFromFD(h);N=D.path}if(g.length==0){if(!_)throw new M.ErrnoError(44);return N}return N+"/"+g},writeStat(h,g){T[h>>>2>>>0]=g.dev,T[h+4>>>2>>>0]=g.mode,T[h+8>>>2>>>0]=g.nlink,T[h+12>>>2>>>0]=g.uid,T[h+16>>>2>>>0]=g.gid,T[h+20>>>2>>>0]=g.rdev,F[h+24>>>3>>>0]=BigInt(g.size),E[h+32>>>2>>>0]=4096,E[h+36>>>2>>>0]=g.blocks;var _=g.atime.getTime(),N=g.mtime.getTime(),D=g.ctime.getTime();return F[h+40>>>3>>>0]=BigInt(Math.floor(_/1e3)),T[h+48>>>2>>>0]=_%1e3*1e3*1e3,F[h+56>>>3>>>0]=BigInt(Math.floor(N/1e3)),T[h+64>>>2>>>0]=N%1e3*1e3*1e3,F[h+72>>>3>>>0]=BigInt(Math.floor(D/1e3)),T[h+80>>>2>>>0]=D%1e3*1e3*1e3,F[h+88>>>3>>>0]=BigInt(g.ino),0},writeStatFs(h,g){T[h+4>>>2>>>0]=g.bsize,T[h+60>>>2>>>0]=g.bsize,F[h+8>>>3>>>0]=BigInt(g.blocks),F[h+16>>>3>>>0]=BigInt(g.bfree),F[h+24>>>3>>>0]=BigInt(g.bavail),F[h+32>>>3>>>0]=BigInt(g.files),F[h+40>>>3>>>0]=BigInt(g.ffree),T[h+48>>>2>>>0]=g.fsid,T[h+64>>>2>>>0]=g.flags,T[h+56>>>2>>>0]=g.namelen},doMsync(h,g,_,N,D){if(!M.isFile(g.node.mode))throw new M.ErrnoError(43);if(N&2)return 0;var W=O.slice(h,h+_);M.msync(g,W,D,_,N)},getStreamFromFD(h){var g=M.getStreamChecked(h);return g},varargs:void 0,getStr(h){var g=jt(h);return g}};function vt(h,g,_){_>>>=0,Le.varargs=_;try{var N=Le.getStreamFromFD(h);switch(g){case 0:{var D=Rt();if(D<0)return-28;for(;M.streams[D];)D++;var W;return W=M.dupStream(N,D),W.fd}case 1:case 2:return 0;case 3:return N.flags;case 4:{var D=Rt();return N.flags|=D,0}case 12:{var D=Sr(),X=0;return A[D+X>>>1>>>0]=2,0}case 13:case 14:return 0}return-28}catch(ne){if(typeof M>"u"||ne.name!=="ErrnoError")throw ne;return-ne.errno}}function pt(h,g,_){_>>>=0,Le.varargs=_;try{var N=Le.getStreamFromFD(h);switch(g){case 21509:return N.tty?0:-59;case 21505:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcgets){var D=N.tty.ops.ioctl_tcgets(N),W=Sr();E[W>>>2>>>0]=D.c_iflag||0,E[W+4>>>2>>>0]=D.c_oflag||0,E[W+8>>>2>>>0]=D.c_cflag||0,E[W+12>>>2>>>0]=D.c_lflag||0;for(var X=0;X<32;X++)j[W+X+17>>>0]=D.c_cc[X]||0;return 0}return 0}case 21510:case 21511:case 21512:return N.tty?0:-59;case 21506:case 21507:case 21508:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcsets){for(var W=Sr(),ne=E[W>>>2>>>0],fe=E[W+4>>>2>>>0],Te=E[W+8>>>2>>>0],Qe=E[W+12>>>2>>>0],at=[],X=0;X<32;X++)at.push(j[W+X+17>>>0]);return N.tty.ops.ioctl_tcsets(N.tty,g,{c_iflag:ne,c_oflag:fe,c_cflag:Te,c_lflag:Qe,c_cc:at})}return 0}case 21519:{if(!N.tty)return-59;var W=Sr();return E[W>>>2>>>0]=0,0}case 21520:return N.tty?-28:-59;case 21537:case 21531:{var W=Sr();return M.ioctl(N,g,W)}case 21523:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tiocgwinsz){var rt=N.tty.ops.ioctl_tiocgwinsz(N.tty),W=Sr();A[W>>>1>>>0]=rt[0],A[W+2>>>1>>>0]=rt[1]}return 0}case 21524:return N.tty?0:-59;case 21515:return N.tty?0:-59;default:return-28}}catch(Ie){if(typeof M>"u"||Ie.name!=="ErrnoError")throw Ie;return-Ie.errno}}function kt(h,g,_,N){g>>>=0,N>>>=0,Le.varargs=N;try{g=Le.getStr(g),g=Le.calculateAt(h,g);var D=N?Rt():0;return M.open(g,_,D).fd}catch(W){if(typeof M>"u"||W.name!=="ErrnoError")throw W;return-W.errno}}function At(h){h>>>=0;try{return h=Le.getStr(h),M.rmdir(h),0}catch(g){if(typeof M>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function br(h,g,_){g>>>=0;try{if(g=Le.getStr(g),g=Le.calculateAt(h,g),!_)M.unlink(g);else if(_===512)M.rmdir(g);else return-28;return 0}catch(N){if(typeof M>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var lr=()=>te(""),Ue=h=>{h>>>=0;for(var g="";;){var _=O[h++>>>0];if(!_)return g;g+=String.fromCharCode(_)}},Ct={},Gt={},Jt={},fr=class extends Error{constructor(g){super(g),this.name="BindingError"}},_e=h=>{throw new fr(h)};function Cr(h,g,_={}){var N=g.name;if(h||_e(`type "${N}" must have a positive integer typeid pointer`),Gt.hasOwnProperty(h)){if(_.ignoreDuplicateRegistrations)return;_e(`Cannot register type '${N}' twice`)}if(Gt[h]=g,delete Jt[h],Ct.hasOwnProperty(h)){var D=Ct[h];delete Ct[h],D.forEach(W=>W())}}function R(h,g,_={}){return Cr(h,g,_)}var we=(h,g,_)=>{switch(g){case 1:return _?N=>j[N>>>0]:N=>O[N>>>0];case 2:return _?N=>A[N>>>1>>>0]:N=>$[N>>>1>>>0];case 4:return _?N=>E[N>>>2>>>0]:N=>T[N>>>2>>>0];case 8:return _?N=>F[N>>>3>>>0]:N=>G[N>>>3>>>0];default:throw new TypeError(`invalid integer width (${g}): ${h}`)}},Ne=function(h,g,_,N,D){h>>>=0,g>>>=0,_>>>=0,g=Ue(g);const W=N===0n;let X=ne=>ne;if(W){const ne=_*8;X=fe=>BigInt.asUintN(ne,fe),D=X(D)}R(h,{name:g,fromWireType:X,toWireType:(ne,fe)=>(typeof fe=="number"&&(fe=BigInt(fe)),fe),readValueFromPointer:we(g,_,!W),destructorFunction:null})};function Nt(h,g,_,N){h>>>=0,g>>>=0,g=Ue(g),R(h,{name:g,fromWireType:function(D){return!!D},toWireType:function(D,W){return W?_:N},readValueFromPointer:function(D){return this.fromWireType(O[D>>>0])},destructorFunction:null})}var Ze=h=>({count:h.count,deleteScheduled:h.deleteScheduled,preservePointerOnDelete:h.preservePointerOnDelete,ptr:h.ptr,ptrType:h.ptrType,smartPtr:h.smartPtr,smartPtrType:h.smartPtrType}),ot=h=>{function g(_){return _.$$.ptrType.registeredClass.name}_e(g(h)+" instance already deleted")},gt=!1,It=h=>{},zr=h=>{h.smartPtr?h.smartPtrType.rawDestructor(h.smartPtr):h.ptrType.registeredClass.rawDestructor(h.ptr)},an=h=>{h.count.value-=1;var g=h.count.value===0;g&&zr(h)},Kt=h=>globalThis.FinalizationRegistry?(gt=new FinalizationRegistry(g=>{an(g.$$)}),Kt=g=>{var _=g.$$,N=!!_.smartPtr;if(N){var D={$$:_};gt.register(g,D,g)}return g},It=g=>gt.unregister(g),Kt(h)):(Kt=g=>g,h),Mn=()=>{let h=Nr.prototype;Object.assign(h,{isAliasOf(_){if(!(this instanceof Nr)||!(_ instanceof Nr))return!1;var N=this.$$.ptrType.registeredClass,D=this.$$.ptr;_.$$=_.$$;for(var W=_.$$.ptrType.registeredClass,X=_.$$.ptr;N.baseClass;)D=N.upcast(D),N=N.baseClass;for(;W.baseClass;)X=W.upcast(X),W=W.baseClass;return N===W&&D===X},clone(){if(this.$$.ptr||ot(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var _=Kt(Object.create(Object.getPrototypeOf(this),{$$:{value:Ze(this.$$)}}));return _.$$.count.value+=1,_.$$.deleteScheduled=!1,_},delete(){this.$$.ptr||ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_e("Object already scheduled for deletion"),It(this),an(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_e("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const g=Symbol.dispose;g&&(h[g]=h.delete)};function Nr(){}var gn=(h,g)=>Object.defineProperty(g,"name",{value:h}),Wt={},Ft=(h,g,_)=>{if(h[g].overloadTable===void 0){var N=h[g];h[g]=function(...D){return h[g].overloadTable.hasOwnProperty(D.length)||_e(`Function '${_}' called with an invalid number of arguments (${D.length}) - expects one of (${h[g].overloadTable})!`),h[g].overloadTable[D.length].apply(this,D)},h[g].overloadTable=[],h[g].overloadTable[N.argCount]=N}},Ur=(h,g,_)=>{r.hasOwnProperty(h)?(_e(`Cannot register public name '${h}' twice`),Ft(r,h,h),r[h].overloadTable.hasOwnProperty(_)&&_e(`Cannot register multiple overloads of a function with the same number of arguments (${_})!`),r[h].overloadTable[_]=g):(r[h]=g,r[h].argCount=_)},Fe=48,rr=57,mn=h=>{h=h.replace(/[^a-zA-Z0-9_]/g,"$");var g=h.charCodeAt(0);return g>=Fe&&g<=rr?`_${h}`:h};function Kn(h,g,_,N,D,W,X,ne){this.name=h,this.constructor=g,this.instancePrototype=_,this.rawDestructor=N,this.baseClass=D,this.getActualType=W,this.upcast=X,this.downcast=ne,this.pureVirtualFunctions=[]}var ca=(h,g,_)=>{for(;g!==_;)g.upcast||_e(`Expected null or instance of ${_.name}, got an instance of ${g.name}`),h=g.upcast(h),g=g.baseClass;return h},wr=h=>{if(h===null)return"null";var g=typeof h;return g==="object"||g==="array"||g==="function"?h.toString():""+h};function Za(h,g){if(g===null)return this.isReference&&_e(`null is not a valid ${this.name}`),0;g.$$||_e(`Cannot pass "${wr(g)}" as a ${this.name}`),g.$$.ptr||_e(`Cannot pass deleted object as a pointer of type ${this.name}`);var _=g.$$.ptrType.registeredClass,N=ca(g.$$.ptr,_,this.registeredClass);return N}function re(h,g){var _;if(g===null)return this.isReference&&_e(`null is not a valid ${this.name}`),this.isSmartPointer?(_=this.rawConstructor(),h!==null&&h.push(this.rawDestructor,_),_):0;(!g||!g.$$)&&_e(`Cannot pass "${wr(g)}" as a ${this.name}`),g.$$.ptr||_e(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&g.$$.ptrType.isConst&&_e(`Cannot convert argument of type ${g.$$.smartPtrType?g.$$.smartPtrType.name:g.$$.ptrType.name} to parameter type ${this.name}`);var N=g.$$.ptrType.registeredClass;if(_=ca(g.$$.ptr,N,this.registeredClass),this.isSmartPointer)switch(g.$$.smartPtr===void 0&&_e("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:g.$$.smartPtrType===this?_=g.$$.smartPtr:_e(`Cannot convert argument of type ${g.$$.smartPtrType?g.$$.smartPtrType.name:g.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:_=g.$$.smartPtr;break;case 2:if(g.$$.smartPtrType===this)_=g.$$.smartPtr;else{var D=g.clone();_=this.rawShare(_,Gr.toHandle(()=>D.delete())),h!==null&&h.push(this.rawDestructor,_)}break;default:_e("Unsupporting sharing policy")}return _}function ye(h,g){if(g===null)return this.isReference&&_e(`null is not a valid ${this.name}`),0;g.$$||_e(`Cannot pass "${wr(g)}" as a ${this.name}`),g.$$.ptr||_e(`Cannot pass deleted object as a pointer of type ${this.name}`),g.$$.ptrType.isConst&&_e(`Cannot convert argument of type ${g.$$.ptrType.name} to parameter type ${this.name}`);var _=g.$$.ptrType.registeredClass,N=ca(g.$$.ptr,_,this.registeredClass);return N}function be(h){return this.fromWireType(T[h>>>2>>>0])}var Y=(h,g,_)=>{if(g===_)return h;if(_.baseClass===void 0)return null;var N=Y(h,g,_.baseClass);return N===null?null:_.downcast(N)},Me={},nt=(h,g)=>{for(g===void 0&&_e("ptr should not be undefined");h.baseClass;)g=h.upcast(g),h=h.baseClass;return g},st=(h,g)=>(g=nt(h,g),Me[g]),Et=class extends Error{constructor(g){super(g),this.name="InternalError"}},St=h=>{throw new Et(h)},lt=(h,g)=>{(!g.ptrType||!g.ptr)&&St("makeClassHandle requires ptr and ptrType");var _=!!g.smartPtrType,N=!!g.smartPtr;return _!==N&&St("Both smartPtrType and smartPtr must be specified"),g.count={value:1},Kt(Object.create(h,{$$:{value:g,writable:!0}}))};function pr(h){var g=this.getPointee(h);if(!g)return this.destructor(h),null;var _=st(this.registeredClass,g);if(_!==void 0){if(_.$$.count.value===0)return _.$$.ptr=g,_.$$.smartPtr=h,_.clone();var N=_.clone();return this.destructor(h),N}function D(){return this.isSmartPointer?lt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:g,smartPtrType:this,smartPtr:h}):lt(this.registeredClass.instancePrototype,{ptrType:this,ptr:h})}var W=this.registeredClass.getActualType(g),X=Wt[W];if(!X)return D.call(this);var ne;this.isConst?ne=X.constPointerType:ne=X.pointerType;var fe=Y(g,this.registeredClass,ne.registeredClass);return fe===null?D.call(this):this.isSmartPointer?lt(ne.registeredClass.instancePrototype,{ptrType:ne,ptr:fe,smartPtrType:this,smartPtr:h}):lt(ne.registeredClass.instancePrototype,{ptrType:ne,ptr:fe})}var cr=()=>{Object.assign(nr.prototype,{getPointee(h){return this.rawGetPointee&&(h=this.rawGetPointee(h)),h},destructor(h){var g;(g=this.rawDestructor)==null||g.call(this,h)},readValueFromPointer:be,fromWireType:pr})};function nr(h,g,_,N,D,W,X,ne,fe,Te,Qe){this.name=h,this.registeredClass=g,this.isReference=_,this.isConst=N,this.isSmartPointer=D,this.pointeeType=W,this.sharingPolicy=X,this.rawGetPointee=ne,this.rawConstructor=fe,this.rawShare=Te,this.rawDestructor=Qe,!D&&g.baseClass===void 0?N?(this.toWireType=Za,this.destructorFunction=null):(this.toWireType=ye,this.destructorFunction=null):this.toWireType=re}var ct=(h,g,_)=>{r.hasOwnProperty(h)||St("Replacing nonexistent public symbol"),r[h].overloadTable!==void 0&&_!==void 0||(r[h]=g,r[h].argCount=_)},Ce=[],De=h=>{var g=Ce[h];return g||(Ce[h]=g=bi.get(h)),g},tt=(h,g,_=[],N=!1)=>{var D=De(g),W=D(..._);function X(ne){return h[0]=="p"?ne>>>0:ne}return X(W)},ae=(h,g,_=!1)=>(...N)=>tt(h,g,N,_),ke=(h,g,_=!1)=>{h=Ue(h);function N(){if(h.includes("p"))return ae(h,g,_);var W=De(g);return W}var D=N();return typeof D!="function"&&_e(`unknown function pointer with signature ${h}: ${g}`),D};class dt extends Error{}var it=h=>{var g=Pn(h),_=Ue(g);return Yt(g),_},Bt=(h,g)=>{var _=[],N={};function D(W){if(!N[W]&&!Gt[W]){if(Jt[W]){Jt[W].forEach(D);return}_.push(W),N[W]=!0}}throw g.forEach(D),new dt(`${h}: `+_.map(it).join([", "]))},Vt=(h,g,_)=>{h.forEach(ne=>Jt[ne]=g);function N(ne){var fe=_(ne);fe.length!==h.length&&St("Mismatched type converter count");for(var Te=0;Te<h.length;++Te)R(h[Te],fe[Te])}var D=new Array(g.length),W=[],X=0;for(let[ne,fe]of g.entries())Gt.hasOwnProperty(fe)?D[ne]=Gt[fe]:(W.push(fe),Ct.hasOwnProperty(fe)||(Ct[fe]=[]),Ct[fe].push(()=>{D[ne]=Gt[fe],++X,X===W.length&&N(D)}));W.length===0&&N(D)};function Er(h,g,_,N,D,W,X,ne,fe,Te,Qe,at,rt){h>>>=0,g>>>=0,_>>>=0,N>>>=0,D>>>=0,W>>>=0,X>>>=0,ne>>>=0,fe>>>=0,Te>>>=0,Qe>>>=0,at>>>=0,rt>>>=0,Qe=Ue(Qe),W=ke(D,W),ne&&(ne=ke(X,ne)),Te&&(Te=ke(fe,Te)),rt=ke(at,rt);var Ie=mn(Qe);Ur(Ie,function(){Bt(`Cannot construct ${Qe} due to unbound types`,[N])}),Vt([h,g,_],N?[N]:[],Ut=>{var Ib;Ut=Ut[0];var yr,vn;N?(yr=Ut.registeredClass,vn=yr.instancePrototype):vn=Nr.prototype;var xn=gn(Qe,function(...Ng){if(Object.getPrototypeOf(this)!==ba)throw new fr(`Use 'new' to construct ${Qe}`);if(fa.constructor_body===void 0)throw new fr(`${Qe} has no accessible constructor`);var Lb=fa.constructor_body[Ng.length];if(Lb===void 0)throw new fr(`Tried to invoke ctor of ${Qe} with invalid number of parameters (${Ng.length}) - expected (${Object.keys(fa.constructor_body).toString()}) parameters instead!`);return Lb.apply(this,Ng)}),ba=Object.create(vn,{constructor:{value:xn}});xn.prototype=ba;var fa=new Kn(Qe,xn,ba,rt,yr,W,ne,Te);fa.baseClass&&((Ib=fa.baseClass).__derivedClasses??(Ib.__derivedClasses=[]),fa.baseClass.__derivedClasses.push(fa));var ti=new nr(Qe,fa,!0,!1,!1),io=new nr(Qe+"*",fa,!1,!1,!1),Tn=new nr(Qe+" const*",fa,!1,!0,!1);return Wt[h]={pointerType:io,constPointerType:Tn},ct(Ie,xn),[ti,io,Tn]})}var An=(h,g)=>{for(var _=[],N=0;N<h;N++)_.push(T[g+N*4>>>2>>>0]);return _},ta=h=>{for(;h.length;){var g=h.pop(),_=h.pop();_(g)}};function ua(h){for(var g=1;g<h.length;++g)if(h[g]!==null&&h[g].destructorFunction===void 0)return!0;return!1}function Ma(h,g,_,N){var D=ua(h),W=h.length-2,X=[],ne=["fn"];g&&ne.push("thisWired");for(var fe=0;fe<W;++fe)X.push(`arg${fe}`),ne.push(`arg${fe}Wired`);X=X.join(","),ne=ne.join(",");var Te=`return function (${X}) {
`;D&&(Te+=`var destructors = [];
`);var Qe=D?"destructors":"null",at=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];g&&(Te+=`var thisWired = toClassParamWire(${Qe}, this);
`);for(var fe=0;fe<W;++fe){var rt=`toArg${fe}Wire`;Te+=`var arg${fe}Wired = ${rt}(${Qe}, arg${fe});
`,at.push(rt)}if(Te+=(_||N?"var rv = ":"")+`invoker(${ne});
`,D)Te+=`runDestructors(destructors);
`;else for(var fe=g?1:2;fe<h.length;++fe){var Ie=fe===1?"thisWired":"arg"+(fe-2)+"Wired";h[fe].destructorFunction!==null&&(Te+=`${Ie}_dtor(${Ie});
`,at.push(`${Ie}_dtor`))}return _&&(Te+=`var ret = fromRetWire(rv);
return ret;
`),Te+=`}
`,new Function(at,Te)}function xa(h,g,_,N,D,W){var X=g.length;X<2&&_e("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var ne=g[1]!==null&&_!==null,fe=ua(g),Te=!g[0].isVoid,Qe=g[0],at=g[1],rt=[h,_e,N,D,ta,Qe.fromWireType.bind(Qe),at==null?void 0:at.toWireType.bind(at)],Ie=2;Ie<X;++Ie){var Ut=g[Ie];rt.push(Ut.toWireType.bind(Ut))}if(!fe)for(var Ie=ne?1:2;Ie<g.length;++Ie)g[Ie].destructorFunction!==null&&rt.push(g[Ie].destructorFunction);var vn=Ma(g,ne,Te,W)(...rt);return gn(h,vn)}var qt=function(h,g,_,N,D,W){h>>>=0,_>>>=0,N>>>=0,D>>>=0,W>>>=0;var X=An(g,_);D=ke(N,D),Vt([],[h],ne=>{ne=ne[0];var fe=`constructor ${ne.name}`;if(ne.registeredClass.constructor_body===void 0&&(ne.registeredClass.constructor_body=[]),ne.registeredClass.constructor_body[g-1]!==void 0)throw new fr(`Cannot register multiple constructors with identical number of parameters (${g-1}) for class '${ne.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return ne.registeredClass.constructor_body[g-1]=()=>{Bt(`Cannot construct ${ne.name} due to unbound types`,X)},Vt([],X,Te=>(Te.splice(1,0,null),ne.registeredClass.constructor_body[g-1]=xa(fe,Te,null,D,W),[])),[]})},Li=h=>{h=h.trim();const g=h.indexOf("(");return g===-1?h:h.slice(0,g)},ou=function(h,g,_,N,D,W,X,ne,fe,Te){h>>>=0,g>>>=0,N>>>=0,D>>>=0,W>>>=0,X>>>=0;var Qe=An(_,N);g=Ue(g),g=Li(g),W=ke(D,W,fe),Vt([],[h],at=>{at=at[0];var rt=`${at.name}.${g}`;g.startsWith("@@")&&(g=Symbol[g.substring(2)]),ne&&at.registeredClass.pureVirtualFunctions.push(g);function Ie(){Bt(`Cannot call ${rt} due to unbound types`,Qe)}var Ut=at.registeredClass.instancePrototype,yr=Ut[g];return yr===void 0||yr.overloadTable===void 0&&yr.className!==at.name&&yr.argCount===_-2?(Ie.argCount=_-2,Ie.className=at.name,Ut[g]=Ie):(Ft(Ut,g,rt),Ut[g].overloadTable[_-2]=Ie),Vt([],Qe,vn=>{var xn=xa(rt,vn,at,W,X,fe);return Ut[g].overloadTable===void 0?(xn.argCount=_-2,Ut[g]=xn):Ut[g].overloadTable[_-2]=xn,[]}),[]})},Ss=[],Qa=[0,1,,1,null,1,!0,1,!1,1];function no(h){h>>>=0,h>9&&--Qa[h+1]===0&&(Qa[h]=void 0,Ss.push(h))}var Gr={toValue:h=>(h||_e(`Cannot use deleted val. handle = ${h}`),Qa[h]),toHandle:h=>{switch(h){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const g=Ss.pop()||Qa.length;return Qa[g]=h,Qa[g+1]=1,g}}}},To={name:"emscripten::val",fromWireType:h=>{var g=Gr.toValue(h);return no(h),g},toWireType:(h,g)=>Gr.toHandle(g),readValueFromPointer:be,destructorFunction:null};function su(h){return h>>>=0,R(h,To)}var vi=(h,g)=>{switch(g){case 4:return function(_){return this.fromWireType(B[_>>>2>>>0])};case 8:return function(_){return this.fromWireType(U[_>>>3>>>0])};default:throw new TypeError(`invalid float width (${g}): ${h}`)}},Xe=function(h,g,_){h>>>=0,g>>>=0,_>>>=0,g=Ue(g),R(h,{name:g,fromWireType:N=>N,toWireType:(N,D)=>D,readValueFromPointer:vi(g,_),destructorFunction:null})},Dt=function(h,g,_,N,D){h>>>=0,g>>>=0,_>>>=0,g=Ue(g);const W=N===0;let X=fe=>fe;if(W){var ne=32-8*_;X=fe=>fe<<ne>>>ne,D=X(D)}R(h,{name:g,fromWireType:X,toWireType:(fe,Te)=>Te,readValueFromPointer:we(g,_,N!==0),destructorFunction:null})};function Ht(h,g,_){h>>>=0,_>>>=0;var N=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],D=N[g];function W(X){var ne=T[X>>>2>>>0],fe=T[X+4>>>2>>>0];return new D(j.buffer,fe,ne)}_=Ue(_),R(h,{name:_,fromWireType:W,readValueFromPointer:W},{ignoreDuplicateRegistrations:!0})}var Xt=Object.assign({optional:!0},To);function ra(h,g){h>>>=0,R(h,Xt)}var _n=(h,g,_)=>tn(h,O,g,_);function Aa(h,g){h>>>=0,g>>>=0,g=Ue(g),R(h,{name:g,fromWireType(_){var N=T[_>>>2>>>0],D=_+4,W;return W=jt(D,N,!0),Yt(_),W},toWireType(_,N){N instanceof ArrayBuffer&&(N=new Uint8Array(N));var D,W=typeof N=="string";W||ArrayBuffer.isView(N)&&N.BYTES_PER_ELEMENT==1||_e("Cannot pass non-string to std::string"),W?D=jr(N):D=N.length;var X=Or(4+D+1),ne=X+4;return T[X>>>2>>>0]=D,W?_n(N,ne,D+1):O.set(N,ne>>>0),_!==null&&_.push(Yt,X),X},readValueFromPointer:be,destructorFunction(_){Yt(_)}})}var Ja=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,xi=(h,g,_)=>{var N=h>>>1,D=wt($,N,g/2,_);if(D-N>16&&Ja)return Ja.decode($.subarray(N>>>0,D>>>0));for(var W="",X=N;X<D;++X){var ne=$[X>>>0];W+=String.fromCharCode(ne)}return W},ei=(h,g,_)=>{if(_??(_=2147483647),_<2)return 0;_-=2;for(var N=g,D=_<h.length*2?_/2:h.length,W=0;W<D;++W){var X=h.charCodeAt(W);A[g>>>1>>>0]=X,g+=2}return A[g>>>1>>>0]=0,g-N},Kr=h=>h.length*2,js=(h,g,_)=>{for(var N="",D=h>>>2,W=0;!(W>=g/4);W++){var X=T[D+W>>>0];if(!X&&!_)break;N+=String.fromCodePoint(X)}return N},_s=(h,g,_)=>{if(g>>>=0,_??(_=2147483647),_<4)return 0;for(var N=g,D=N+_-4,W=0;W<h.length;++W){var X=h.codePointAt(W);if(X>65535&&W++,E[g>>>2>>>0]=X,g+=4,g+4>D)break}return E[g>>>2>>>0]=0,g-N},Sl=h=>{for(var g=0,_=0;_<h.length;++_){var N=h.codePointAt(_);N>65535&&_++,g+=4}return g};function dd(h,g,_){h>>>=0,g>>>=0,_>>>=0,_=Ue(_);var N,D,W;g===2?(N=xi,D=ei,W=Kr):(N=js,D=_s,W=Sl),R(h,{name:_,fromWireType:X=>{var ne=T[X>>>2>>>0],fe=N(X+4,ne*g,!0);return Yt(X),fe},toWireType:(X,ne)=>{typeof ne!="string"&&_e(`Cannot pass non-string to C++ string type ${_}`);var fe=W(ne),Te=Or(4+fe+g);return T[Te>>>2>>>0]=fe/g,D(ne,Te+4,fe+g),X!==null&&X.push(Yt,Te),Te},readValueFromPointer:be,destructorFunction(X){Yt(X)}})}var og=function(h,g){h>>>=0,g>>>=0,g=Ue(g),R(h,{isVoid:!0,name:g,fromWireType:()=>{},toWireType:(_,N)=>{}})},hd=()=>{throw 1/0},jl=[],sg=h=>{var g=jl.length;return jl.push(h),g},lg=(h,g)=>{var _=Gt[h];return _===void 0&&_e(`${g} has unknown type ${it(h)}`),_},cg=(h,g)=>{for(var _=new Array(h),N=0;N<h;++N)_[N]=lg(T[g+N*4>>>2>>>0],`parameter ${N}`);return _},ug=(h,g,_)=>{var N=[],D=h(N,_);return N.length&&(T[g>>>2>>>0]=Gr.toHandle(N)),D},fg={},_l=h=>{var g=fg[h];return g===void 0?Ue(h):g},dg=function(h,g,_){g>>>=0;var N=8,[D,...W]=cg(h,g),X=D.toWireType.bind(D),ne=W.map(Ie=>Ie.readValueFromPointer.bind(Ie));h--;var fe={toValue:Gr.toValue},Te=ne.map((Ie,Ut)=>{var yr=`argFromPtr${Ut}`;return fe[yr]=Ie,`${yr}(args${Ut?"+"+Ut*N:""})`}),Qe;switch(_){case 0:Qe="toValue(handle)";break;case 2:Qe="new (toValue(handle))";break;case 3:Qe="";break;case 1:fe.getStringOrSymbol=_l,Qe="toValue(handle)[getStringOrSymbol(methodName)]";break}Qe+=`(${Te})`,D.isVoid||(fe.toReturnWire=X,fe.emval_returnValue=ug,Qe=`return emval_returnValue(toReturnWire, destructorsRef, ${Qe})`),Qe=`return function (handle, methodName, destructorsRef, args) {
  ${Qe}
  }`;var at=new Function(Object.keys(fe),Qe)(...Object.values(fe)),rt=`methodCaller<(${W.map(Ie=>Ie.name)}) => ${D.name}>`;return sg(gn(rt,at))};function pd(h){return h>>>=0,h?(h=_l(h),Gr.toHandle(globalThis[h])):Gr.toHandle(globalThis)}function hg(h,g){return h>>>=0,g>>>=0,h=Gr.toValue(h),g=Gr.toValue(g),Gr.toHandle(h[g])}function pg(h){h>>>=0,h>9&&(Qa[h+1]+=1)}function gg(h,g){return h>>>=0,g>>>=0,h=Gr.toValue(h),g=Gr.toValue(g),h instanceof g}function mg(h,g,_,N,D){return h>>>=0,g>>>=0,_>>>=0,N>>>=0,D>>>=0,jl[h](g,_,N,D)}function gd(){return Gr.toHandle([])}function yg(h){return h>>>=0,Gr.toHandle(_l(h))}function vg(){return Gr.toHandle({})}function xg(h){h>>>=0;var g=Gr.toValue(h);ta(g),no(h)}function bg(h,g,_){h>>>=0,g>>>=0,_>>>=0,h=Gr.toValue(h),g=Gr.toValue(g),_=Gr.toValue(_),h[g]=_}function wg(h){return h>>>=0,h=Gr.toValue(h),Gr.toHandle(typeof h)}function kg(h,g){h=Je(h),g>>>=0;var _=new Date(h*1e3);E[g>>>2>>>0]=_.getUTCSeconds(),E[g+4>>>2>>>0]=_.getUTCMinutes(),E[g+8>>>2>>>0]=_.getUTCHours(),E[g+12>>>2>>>0]=_.getUTCDate(),E[g+16>>>2>>>0]=_.getUTCMonth(),E[g+20>>>2>>>0]=_.getUTCFullYear()-1900,E[g+24>>>2>>>0]=_.getUTCDay();var N=Date.UTC(_.getUTCFullYear(),0,1,0,0,0,0),D=(_.getTime()-N)/(1e3*60*60*24)|0;E[g+28>>>2>>>0]=D}var md=h=>h%4===0&&(h%100!==0||h%400===0),Sg=[0,31,60,91,121,152,182,213,244,274,305,335],jg=[0,31,59,90,120,151,181,212,243,273,304,334],yd=h=>{var g=md(h.getFullYear()),_=g?Sg:jg,N=_[h.getMonth()]+h.getDate()-1;return N};function Pl(h,g){h=Je(h),g>>>=0;var _=new Date(h*1e3);E[g>>>2>>>0]=_.getSeconds(),E[g+4>>>2>>>0]=_.getMinutes(),E[g+8>>>2>>>0]=_.getHours(),E[g+12>>>2>>>0]=_.getDate(),E[g+16>>>2>>>0]=_.getMonth(),E[g+20>>>2>>>0]=_.getFullYear()-1900,E[g+24>>>2>>>0]=_.getDay();var N=yd(_)|0;E[g+28>>>2>>>0]=N,E[g+36>>>2>>>0]=-(_.getTimezoneOffset()*60);var D=new Date(_.getFullYear(),0,1),W=new Date(_.getFullYear(),6,1).getTimezoneOffset(),X=D.getTimezoneOffset(),ne=(W!=X&&_.getTimezoneOffset()==Math.min(X,W))|0;E[g+32>>>2>>>0]=ne}var vd=function(h){h>>>=0;var g=(()=>{var _=new Date(E[h+20>>>2>>>0]+1900,E[h+16>>>2>>>0],E[h+12>>>2>>>0],E[h+8>>>2>>>0],E[h+4>>>2>>>0],E[h>>>2>>>0],0),N=E[h+32>>>2>>>0],D=_.getTimezoneOffset(),W=new Date(_.getFullYear(),0,1),X=new Date(_.getFullYear(),6,1).getTimezoneOffset(),ne=W.getTimezoneOffset(),fe=Math.min(ne,X);if(N<0)E[h+32>>>2>>>0]=+(X!=ne&&fe==D);else if(N>0!=(fe==D)){var Te=Math.max(ne,X),Qe=N>0?fe:Te;_.setTime(_.getTime()+(Qe-D)*6e4)}E[h+24>>>2>>>0]=_.getDay();var at=yd(_)|0;E[h+28>>>2>>>0]=at,E[h>>>2>>>0]=_.getSeconds(),E[h+4>>>2>>>0]=_.getMinutes(),E[h+8>>>2>>>0]=_.getHours(),E[h+12>>>2>>>0]=_.getDate(),E[h+16>>>2>>>0]=_.getMonth(),E[h+20>>>2>>>0]=_.getYear();var rt=_.getTime();return isNaN(rt)?-1:rt/1e3})();return BigInt(g)},xd=function(h,g,_,N){h>>>=0,g>>>=0,_>>>=0,N>>>=0;var D=new Date().getFullYear(),W=new Date(D,0,1),X=new Date(D,6,1),ne=W.getTimezoneOffset(),fe=X.getTimezoneOffset(),Te=Math.max(ne,fe);T[h>>>2>>>0]=Te*60,E[g>>>2>>>0]=+(ne!=fe);var Qe=Ie=>{var Ut=Ie>=0?"-":"+",yr=Math.abs(Ie),vn=String(Math.floor(yr/60)).padStart(2,"0"),xn=String(yr%60).padStart(2,"0");return`UTC${Ut}${vn}${xn}`},at=Qe(ne),rt=Qe(fe);fe<ne?(_n(at,_,17),_n(rt,N,17)):(_n(at,N,17),_n(rt,_,17))},ee=()=>Date.now(),ce=()=>4294901760,ue=(h,g)=>Math.ceil(h/g)*g,de=h=>{var g=on.buffer.byteLength,_=(h-g+65535)/65536|0;try{return on.grow(_),I(),1}catch{}};function Re(h){h>>>=0;var g=O.length,_=ce();if(h>_)return!1;for(var N=1;N<=4;N*=2){var D=g*(1+.2/N);D=Math.min(D,h+100663296);var W=Math.min(_,ue(Math.max(h,D),65536)),X=de(W);if(X)return!0}return!1}var Ae={},Ke=()=>s||"./this.program",Ge=()=>{if(!Ge.strings){var h=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:h,_:Ke()};for(var _ in Ae)Ae[_]===void 0?delete g[_]:g[_]=Ae[_];var N=[];for(var _ in g)N.push(`${_}=${g[_]}`);Ge.strings=N}return Ge.strings};function ut(h,g){h>>>=0,g>>>=0;var _=0,N=0;for(var D of Ge()){var W=g+_;T[h+N>>>2>>>0]=W,_+=_n(D,W,1/0)+1,N+=4}return 0}function We(h,g){h>>>=0,g>>>=0;var _=Ge();T[h>>>2>>>0]=_.length;var N=0;for(var D of _)N+=jr(D)+1;return T[g>>>2>>>0]=N,0}var ft=0,zt=()=>he||ft>0,ur=h=>{var g;zt()||((g=r.onExit)==null||g.call(r,h),y=!0),c(h,new se(h))},$r=(h,g)=>{ur(h)},un=$r;function yn(h){try{var g=Le.getStreamFromFD(h);return M.close(g),0}catch(_){if(typeof M>"u"||_.name!=="ErrnoError")throw _;return _.errno}}var Wr=(h,g,_,N)=>{for(var D=0,W=0;W<_;W++){var X=T[g>>>2>>>0],ne=T[g+4>>>2>>>0];g+=8;var fe=M.read(h,j,X,ne,N);if(fe<0)return-1;if(D+=fe,fe<ne)break}return D};function xt(h,g,_,N){g>>>=0,_>>>=0,N>>>=0;try{var D=Le.getStreamFromFD(h),W=Wr(D,g,_);return T[N>>>2>>>0]=W,0}catch(X){if(typeof M>"u"||X.name!=="ErrnoError")throw X;return X.errno}}function ar(h,g,_,N){g=Je(g),N>>>=0;try{if(isNaN(g))return 61;var D=Le.getStreamFromFD(h);return M.llseek(D,g,_),F[N>>>3>>>0]=BigInt(D.position),D.getdents&&g===0&&_===0&&(D.getdents=null),0}catch(W){if(typeof M>"u"||W.name!=="ErrnoError")throw W;return W.errno}}var Dr=(h,g,_,N)=>{for(var D=0,W=0;W<_;W++){var X=T[g>>>2>>>0],ne=T[g+4>>>2>>>0];g+=8;var fe=M.write(h,j,X,ne,N);if(fe<0)return-1;if(D+=fe,fe<ne)break}return D};function fn(h,g,_,N){g>>>=0,_>>>=0,N>>>=0;try{var D=Le.getStreamFromFD(h),W=Dr(D,g,_);return T[N>>>2>>>0]=W,0}catch(X){if(typeof M>"u"||X.name!=="ErrnoError")throw X;return X.errno}}if(M.createPreloadedFile=xr,M.preloadFile=sr,M.staticInit(),Mn(),cr(),r.noExitRuntime&&(he=r.noExitRuntime),r.preloadPlugins&&(Xn=r.preloadPlugins),r.print&&(b=r.print),r.printErr&&(k=r.printErr),r.wasmBinary&&(v=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&(s=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()();var Pn,Yt,Or,qr,Ln,Fi,on,bi;function ao(h){Pn=h.ea,Yt=h.fa,Or=h.ga,qr=h.ia,Ln=h.ja,Fi=h.ka,on=h.ca,bi=h.ha}var _g={g:hr,b:Ir,A:vt,V:pt,W:kt,L:At,M:br,J:lr,C:Ne,aa:Nt,F:Er,E:qt,o:ou,_:su,B:Xe,p:Dt,m:Ht,X:ra,$:Aa,x:dd,ba:og,H:hd,f:dg,a:no,q:pd,i:hg,j:pg,D:gg,e:mg,k:gd,c:yg,l:vg,d:xg,h:bg,t:wg,N:kg,O:Pl,P:vd,Q:xd,Y:ee,K:Re,S:ut,T:We,Z:un,y:yn,U:xt,R:ar,z:fn,G:$N,u:EN,n:Pg,s:MN,v:Nl,I:Cl,r:AN,w:TN};function Cl(h){var g=$e();try{De(h)()}catch(_){if(Pe(g),_!==_+0)throw _;qr(1,0)}}function Nl(h,g){var _=$e();try{return De(h)(g)}catch(N){if(Pe(_),N!==N+0)throw N;return qr(1,0),0n}}function Pg(h,g,_,N,D){var W=$e();try{return De(h)(g,_,N,D)}catch(X){if(Pe(W),X!==X+0)throw X;qr(1,0)}}function MN(h,g,_,N){var D=$e();try{return De(h)(g,_,N)}catch(W){if(Pe(D),W!==W+0)throw W;qr(1,0)}}function AN(h,g){var _=$e();try{De(h)(g)}catch(N){if(Pe(_),N!==N+0)throw N;qr(1,0)}}function TN(h,g,_,N){var D=$e();try{De(h)(g,_,N)}catch(W){if(Pe(D),W!==W+0)throw W;qr(1,0)}}function EN(h,g,_,N){var D=$e();try{return De(h)(g,_,N)}catch(W){if(Pe(D),W!==W+0)throw W;qr(1,0)}}function $N(h,g,_){var N=$e();try{return De(h)(g,_)}catch(D){if(Pe(N),D!==D+0)throw D;qr(1,0)}}function DN(h){h=Object.assign({},h);var g=N=>D=>N(D)>>>0,_=N=>()=>N()>>>0;return h.ea=g(h.ea),h.ga=g(h.ga),h._emscripten_stack_alloc=g(h._emscripten_stack_alloc),h.ka=_(h.ka),h}function Cg(){if(Tr>0){Pr=Cg;return}if(L(),Tr>0){Pr=Cg;return}function h(){var g;r.calledRun=!0,!y&&(H(),P==null||P(r),(g=r.onRuntimeInitialized)==null||g.call(r),Z())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),h()},1)):h()}var Ps;return Ps=await V(),Cg(),z?t=r:t=new Promise((h,g)=>{P=h,S=g}),t}const one=Object.freeze(Object.defineProperty({__proto__:null,default:CN},Symbol.toStringTag,{value:"Module"})),sne=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Ascii = (2,1); Byte = (1,1)
    Srational = (10,8)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevelRepeatDim = (50713, Type.Short)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 10:
            flat = [item for sublist in value for item in sublist]  # [[num,den]...]
            return struct.pack('<%sl' % len(flat), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def pack_dng_from_u16(raw_u16_bytes_le, width, height, cfa_str, black_level_list, cm_flat, make_str, model_str, unique_model_str):
    raw_data = np.frombuffer(raw_u16_bytes_le, dtype=np.uint16).copy()
    raw_data = raw_data.astype(np.int32)
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    white_level = 65019
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]
    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}

    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]),
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, make_str),
        dngTag(Tag.Model, model_str),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]),
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, unique_model_str),
    ]

    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0]))
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)

    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size

    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC

    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break

    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))

    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12

    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)

    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`;let Gm=null;async function lne(e){return Gm||(Gm=(async()=>{if(!window.loadPyodide)throw new Error("Pyodide missing: window.loadPyodide not found.");e==null||e("Loading Pyodide...");const t=await window.loadPyodide();return e==null||e("Loading numpy..."),await t.loadPackage("numpy"),e==null||e("Init DNG writer kernel..."),await t.runPythonAsync(sne),t})()),Gm}let Wm=null;async function cne(){Wm||(Wm=CN({locateFile:(t,r)=>t.endsWith("joraw.wasm")?new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href:r+t}));const e=await Wm;return e.LibRaw||e.JoRaw}function une(e,t,r,n){const a=t*r,i=new Float32Array(a);let o=0;for(let s=0;s<r;s++){const c=(s&1)<<1;for(let u=0;u<t;u++){const f=c|u&1;i[o]=e[o]-n[f],o++}}return i}function fne(e,t,r,n){const a=t*r,i=new Uint16Array(a);let o=0;for(let s=0;s<r;s++){const c=(s&1)<<1;for(let u=0;u<t;u++){const f=c|u&1;let d=e[o]+n[f];d<0&&(d=0),d>65535&&(d=65535),i[o]=d+.5|0,o++}}return i}function dne(e){const t=new Uint16Array([255]);if(new Uint8Array(t.buffer)[0]===255)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);const n=new Uint8Array(e.length*2),a=new DataView(n.buffer);for(let i=0;i<e.length;i++)a.setUint16(i*2,e[i],!0);return n}function hne(e){const t=e.trim(),r=[];let n=0;const a=f=>f>="0"&&f<="9",i=f=>f>="A"&&f<="Z"||f>="a"&&f<="z";for(;n<t.length;){const f=t[n];if(f<=" "){n++;continue}if(f==="("){r.push({t:"lp"}),n++;continue}if(f===")"){r.push({t:"rp"}),n++;continue}if(f===","){r.push({t:"comma"}),n++;continue}if(f==="+"&&t[n+1]==="+"){r.push({t:"op",v:"++"}),n+=2;continue}if(f==="+"){r.push({t:"op",v:"+"}),n++;continue}if(f==="-"){r.push({t:"op",v:"-"}),n++;continue}if(f==="*"){r.push({t:"op",v:"*"}),n++;continue}if(f==="/"){r.push({t:"op",v:"/"}),n++;continue}if(a(f)||f==="."){let d=n+1;for(;d<t.length&&(a(t[d])||t[d]===".");)d++;const p=Number(t.slice(n,d));if(!Number.isFinite(p))throw new Error(`Bad number: ${t.slice(n,d)}`);r.push({t:"num",v:p}),n=d;continue}if(i(f)){let d=n+1;for(;d<t.length&&i(t[d]);)d++;const p=t.slice(n,d).toUpperCase();let m=d;for(;m<t.length&&t[m]<=" ";)m++;t[m]==="("&&(p==="MAX"||p==="MIN"||p==="MID")?r.push({t:"func",name:p}):r.push({t:"id",v:p}),n=d;continue}throw new Error(`Unexpected char at ${n}: ${f}`)}const o=[];for(let f=0;f<r.length;f++){const d=r[f],p=o[o.length-1],m=!p||p.t==="op"||p.t==="lp"||p.t==="comma";if(d.t==="op"&&(d.v==="-"||d.v==="+")&&m){o.push({t:"num",v:0}),o.push(d);continue}o.push(d)}const s=[],c=f=>f.t==="num"||f.t==="id"||f.t==="rp",u=f=>f.t==="num"||f.t==="id"||f.t==="lp"||f.t==="func";for(let f=0;f<o.length;f++){const d=o[f],p=s[s.length-1];p&&c(p)&&u(d)&&s.push({t:"op",v:"*"}),s.push(d)}return s}function f4(e){return e==="*"||e==="/"?2:1}function pne(e){const t=[],r=[],n=[];for(const a of e){if(a.t==="num"||a.t==="id"){t.push(a);continue}if(a.t==="func"){r.push(a),n.push(1);continue}if(a.t==="comma"){for(;r.length&&r[r.length-1].t!=="lp";)t.push(r.pop());if(!r.length)throw new Error("Comma found outside parentheses.");if(!n.length)throw new Error("Comma found but no function context.");n[n.length-1]+=1;continue}if(a.t==="lp"){r.push(a);continue}if(a.t==="rp"){for(;r.length&&r[r.length-1].t!=="lp";)t.push(r.pop());if(!r.length)throw new Error("Mismatched parentheses");if(r.pop(),r.length&&r[r.length-1].t==="func"){const i=r.pop(),o=n.pop()??1;t.push({t:"func",name:i.name,argc:o})}continue}if(a.t==="op"){for(;r.length;){const i=r[r.length-1];if(i.t!=="op")break;const o=f4(a.v);if(f4(i.v)>=o)t.push(r.pop());else break}r.push(a);continue}}for(;r.length;){const a=r.pop();if(a.t==="lp"||a.t==="rp")throw new Error("Mismatched parentheses");if(a.t==="func"){const i=n.pop()??1;t.push({t:"func",name:a.name,argc:i})}else t.push(a)}if(n.length!==0)throw new Error("Internal error: argCountStack not empty.");return t}function gne(e,t){for(let n=1;n<t;n++){const a=e[n];let i=n-1;for(;i>=0&&e[i]>a;)e[i+1]=e[i],i--;e[i+1]=a}const r=t-1>>1;return e[r]}function mne(e,t,r){if(t.size===0)throw new Error("No RAW loaded.");const n=t.values().next().value,a=n.width,i=n.height,o=a*i,s=new Map,c=v=>{const y=t.get(v);if(!y)throw new Error(`Unknown RAW key: ${v}`);if(y.width!==a||y.height!==i)throw new Error("Dimension mismatch among RAWs.");let w=s.get(v);if(!w){w=new Float64Array(o);const P=y.workF32;for(let S=0;S<o;S++)w[S]=P[S];s.set(v,w)}return{kind:"img",v:w,w:a,h:i,firstId:v}},u=v=>({kind:"scalar",v}),f=v=>{if(v.kind==="img")return v;const y=new Float64Array(o);return y.fill(v.v),{kind:"img",v:y,w:a,h:i,firstId:void 0}},d=(v,y)=>v??y,p=[];for(const v of e){if(v.t==="num"){p.push(u(v.v));continue}if(v.t==="id"){p.push(c(v.v));continue}if(v.t==="func"){const y=v.argc??1;if(y<1)throw new Error(`${v.name.toLowerCase()}(...) requires at least 1 argument.`);const w=[];for(let A=0;A<y;A++){const $=p.pop();if(!$)throw new Error(`${v.name.toLowerCase()}(...) missing argument(s).`);w.push($)}if(w.reverse(),w.every(A=>A.kind==="scalar")){const A=w.map($=>$.v);for(let $=1;$<A.length;$++){const E=A[$];let T=$-1;for(;T>=0&&A[T]>E;)A[T+1]=A[T],T--;A[T+1]=E}if(v.name==="MAX")p.push(u(A[A.length-1]));else if(v.name==="MIN")p.push(u(A[0]));else{const $=A.length-1>>1;p.push(u(A[$]))}continue}const S=w.map(f),j=S.reduce((A,$)=>d(A,$.firstId),void 0),O=new Float64Array(o);if(v.name==="MAX"||v.name==="MIN"){const A=S[0].v;for(let $=0;$<o;$++)O[$]=A[$];if(v.name==="MAX")for(let $=1;$<S.length;$++){const E=S[$].v;for(let T=0;T<o;T++)E[T]>O[T]&&(O[T]=E[T])}else for(let $=1;$<S.length;$++){const E=S[$].v;for(let T=0;T<o;T++)E[T]<O[T]&&(O[T]=E[T])}p.push({kind:"img",v:O,w:a,h:i,firstId:j});continue}if(v.name==="MID"){const A=S.length,$=new Float64Array(A);for(let E=0;E<o;E++){for(let T=0;T<A;T++)$[T]=S[T].v[E];O[E]=gne($,A)}p.push({kind:"img",v:O,w:a,h:i,firstId:j});continue}throw new Error(`Unknown function: ${v.name}`)}if(v.t==="op"){const y=v.v,w=p.pop(),P=p.pop();if(!P||!w)throw new Error(`Operator ${y} missing operands`);if(y==="++"){if(!r)throw new Error("Formula uses '++' but ppRange is null.");const E=f(P),T=f(w),B=T.firstId;if(!B){p.push(E);continue}const U=t.get(B);if(!U)throw new Error(`Mask source RAW not found: ${B}`);const F=E.v,G=T.v,z=new Float64Array(o),I=r.min,L=r.max,H=U.origU16;for(let Z=0;Z<o;Z++){const te=H[Z];z[Z]=te>=I&&te<=L?G[Z]:F[Z]}p.push({kind:"img",v:z,w:a,h:i,firstId:d(E.firstId,B)});continue}if(P.kind==="scalar"&&w.kind==="scalar"){if(y==="+")p.push(u(P.v+w.v));else if(y==="-")p.push(u(P.v-w.v));else if(y==="*")p.push(u(P.v*w.v));else if(y==="/")p.push(u(P.v/w.v));else throw new Error(`Unsupported op ${y}`);continue}const S=f(P),j=f(w),O=S.v,A=j.v,$=new Float64Array(o);if(y==="+")for(let E=0;E<o;E++)$[E]=O[E]+A[E];else if(y==="-")for(let E=0;E<o;E++)$[E]=O[E]-A[E];else if(y==="*")for(let E=0;E<o;E++)$[E]=O[E]*A[E];else if(y==="/")for(let E=0;E<o;E++)$[E]=O[E]/A[E];else throw new Error(`Unsupported op ${y}`);p.push({kind:"img",v:$,w:a,h:i,firstId:d(S.firstId,j.firstId)});continue}}if(p.length!==1)throw new Error("Expression did not reduce to a single value.");const m=p[0],x=m.kind==="img"?m:f(m),b=new Float32Array(o),k=x.v;for(let v=0;v<o;v++)b[v]=k[v];return b}async function yne(e,t,r,n,a,i,o,s,c){if(Object.keys(e).length===0)throw new Error("No files loaded.");if(!t.trim())throw new Error("Formula empty.");const f=t.includes("++");if(f&&!o)throw new Error("Formula contains '++' but ++Range is not provided.");c==null||c("Parsing formula...");const d=hne(t),p=pne(d),m=new Set;for(const B of d)B.t==="id"&&m.add(B.v);for(const B of m)if(!e[B])throw new Error(`Formula references "${B}" but it is not loaded.`);c==null||c("Initializing joraw...");const x=await cne(),b=[];let k=0,v=0;const y=Array.from(m);for(let B=0;B<y.length;B++){const U=y[B],F=e[U];c==null||c(`Decoding ${U}: ${F.name} ...`);const G=await F.arrayBuffer(),z=new x;try{await z.open(new Uint8Array(G));const I=z.getRawImage(),L=I.width,H=I.height,Z=new Uint16Array(I.data),te=une(Z,L,H,r);if(b.length===0)k=L,v=H;else if(L!==k||H!==v)throw new Error(`Dimension mismatch: ${U} is ${L}x${H}, expected ${k}x${v}.`);b.push({key:U,file:F,width:L,height:H,origU16:Z,workF32:te})}finally{z.delete?z.delete():z.close&&z.close()}}if(b.length===0)throw new Error("No referenced RAWs loaded.");c==null||c("Evaluating expression (float domain)...");const w=new Map(b.map(B=>[B.key,B])),P=mne(p,w,f?o:null);if(s){let B=-1/0;for(let U=0;U<P.length;U++)P[U]>B&&(B=P[U]);if(B>1e-6){const G=(65019-Math.max(...n))/B;c==null||c(`Auto-filling 16bit: Max=${B.toFixed(2)}, Factor=${G.toFixed(4)}`);for(let z=0;z<P.length;z++)P[z]*=G}}c==null||c("Finalizing to 16-bit (add OutputBL pedestal + clip)...");const S=fne(P,k,v,n),j=dne(S),O=a&&a.length===9?a:[1,0,0,0,1,0,0,0,1],A=await lne(c);c==null||c("Packing DNG container..."),A.globals.set("js_raw_u16_le",j),A.globals.set("js_width",k),A.globals.set("js_height",v),A.globals.set("js_cfa",String(i||"RGGB")),A.globals.set("js_bl_out",Array.from(n)),A.globals.set("js_cm_flat",O),A.globals.set("js_make","JO-Workstation"),A.globals.set("js_model","StackingTool"),A.globals.set("js_unique_model","JO StackingTool 16bit");const $=await A.runPythonAsync(`
pack_dng_from_u16(
  js_raw_u16_le.to_py(),
  js_width,
  js_height,
  js_cfa,
  js_bl_out.to_py(),
  js_cm_flat.to_py(),
  js_make,
  js_model,
  js_unique_model
)
  `),E=$.toJs();$.destroy&&$.destroy();const T=new Uint8Array(E.byteLength);return T.set(E),T.buffer}const vne=({isOpen:e,onClose:t,zIndex:r,onFocus:n})=>{const[a,i]=C.useState({}),[o,s]=C.useState(0),[c,u]=C.useState("0 0 0 0"),[f,d]=C.useState("0 0 0 0"),[p,m]=C.useState(()=>localStorage.getItem("stacking_formula")||""),[x,b]=C.useState(!0),[k,v]=C.useState("0-14000"),[y,w]=C.useState(!0),[P,S]=C.useState(""),[j,O]=C.useState("RGGB"),[A,$]=C.useState("Idle"),[E,T]=C.useState(!1),[B,U]=C.useState(null),F=C.useRef(null),G=C.useMemo(()=>Object.keys(hc).sort(),[]);C.useEffect(()=>{localStorage.setItem("stacking_formula",p)},[p]);const z=K=>{let q="",J=K;for(;J>=0;)q=String.fromCharCode(J%26+65)+q,J=Math.floor(J/26)-1;return q},I=K=>{if(K.target.files&&K.target.files.length>0){const q={...a};let J=o;Array.from(K.target.files).forEach(ve=>{const ie=z(J++);q[ie]=ve}),i(q),s(J)}K.target.value=""},L=()=>{i({}),s(0),U(null),$("Idle")},H=(K,q)=>{const J=K.trim().split(/[\s,]+/).map(Number);if(J.length<1||J.some(isNaN))throw new Error(`Invalid ${q} Black Level format.`);return[J[0],J.length>1?J[1]:J[0],J.length>2?J[2]:J[0],J.length>3?J[3]:J[0]]},Z=async()=>{if(Object.keys(a).length===0){U("No files loaded.");return}if(!p.trim()){U("Please enter a formula.");return}let K,q;try{K=H(c,"Input"),q=H(f,"Output")}catch(ie){U(ie.message);return}let J=null;if(x){const ie=k.split("-").map(pe=>parseFloat(pe.trim()));if(ie.length===2&&!isNaN(ie[0])&&!isNaN(ie[1]))J={min:Math.min(ie[0],ie[1]),max:Math.max(ie[0],ie[1])};else{U("Invalid ++Range format. Use min-max (e.g., 0-14000).");return}}else if(p.includes("++")){U("Formula contains '++' operator but ++Range is disabled.");return}let ve=null;if(P.trim()&&(ve=P.trim().split(/[\s,\n]+/).map(Number),ve.length!==9||ve.some(isNaN))){U("Color Matrix must be 9 numbers.");return}T(!0),U(null),$("Starting...");try{await new Promise(se=>setTimeout(se,50));const ie=await yne(a,p,K,q,ve,j,J,y,se=>$(se));$("Creating Download...");const pe=new Blob([ie],{type:"image/x-adobe-dng"}),oe=URL.createObjectURL(pe),V=document.createElement("a");V.href=oe,V.download=`Stacked_Result_${Date.now()}.dng`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(oe),$("Done!")}catch(ie){console.error(ie),U(ie.message),$("Failed")}finally{T(!1)}},te=()=>{d(c)};return e?l.jsxs(ks,{initialPosition:{x:window.innerWidth/2-250,y:100},onClose:t,zIndex:r,onFocus:n,className:"w-[500px] bg-white dark:bg-slate-900 border-2 border-black dark:border-white shadow-2xl flex flex-col font-mono",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-emerald-700 text-white",children:[l.jsx("h3",{className:"text-sm font-bold uppercase tracking-widest",children:"Advanced Math Stacking Tool"}),l.jsx("button",{onClick:t,className:"hover:text-red-300 transition-colors",children:""})]}),l.jsxs("div",{className:"p-4 flex flex-col gap-4 overflow-y-auto max-h-[80vh]",children:[l.jsx("div",{className:"h-28 border border-gray-300 dark:border-slate-700 bg-gray-50 dark:bg-black/30 rounded p-2 overflow-y-auto",children:Object.keys(a).length===0?l.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-xs",children:"No files loaded. Click 'Add Files' below."}):l.jsx("div",{className:"space-y-1",children:Object.entries(a).map(([K,q])=>{const J=q;return l.jsxs("div",{className:"flex justify-between text-xs border-b border-gray-200 dark:border-slate-800 pb-1 last:border-0",children:[l.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400 w-8",children:K}),l.jsx("span",{className:"truncate text-gray-700 dark:text-slate-300 flex-1",children:J.name}),l.jsxs("span",{className:"text-gray-400",children:[(J.size/1024/1024).toFixed(1),"MB"]})]},K)})})}),l.jsxs("div",{className:"flex flex-col gap-3 flex-shrink-0",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"file",ref:F,multiple:!0,className:"hidden",onChange:I,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),l.jsx("button",{onClick:()=>{var K;return(K=F.current)==null?void 0:K.click()},className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-slate-800 dark:hover:bg-slate-700 py-1 rounded text-xs font-bold transition-colors",children:"Add Files"}),l.jsx("button",{onClick:L,className:"px-3 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 py-1 rounded text-xs font-bold transition-colors",children:"Clear"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Input BL (Subtract)"}),l.jsx("input",{type:"text",value:c,onChange:K=>u(K.target.value),className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none"}),l.jsx("div",{className:"text-[9px] text-gray-400 mt-0.5",children:"(0,0), (0,1), (1,0), (1,1)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Output BL (Add to Result)"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("input",{type:"text",value:f,onChange:K=>d(K.target.value),className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none"}),l.jsx("button",{onClick:te,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 rounded text-[9px]",title:"Copy Input to Output",children:""})]})]})]}),l.jsxs("div",{className:"flex flex-col justify-end",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Options"}),l.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer mb-2",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:K=>w(K.target.checked),className:"rounded text-emerald-600 focus:ring-emerald-500"}),l.jsx("span",{className:"text-[10px] font-bold uppercase text-emerald-600 dark:text-emerald-400",children:"16bit (Auto Fill)"})]}),l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[l.jsx("input",{type:"checkbox",checked:x,onChange:K=>b(K.target.checked),className:"rounded",title:"Enable Conditional ++ Operator"}),l.jsx("span",{className:`text-[9px] font-bold uppercase ${x?"text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"++Range:"}),l.jsx("input",{type:"text",value:k,onChange:K=>v(K.target.value),disabled:!x,placeholder:"min-max",className:"w-full text-[10px] px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none disabled:opacity-50"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Math Formula ( + - * / and ++ )"}),l.jsx("textarea",{value:p,onChange:K=>m(K.target.value),placeholder:"e.g. (A+B)/2 or A ++ 4*B",className:"w-full h-14 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none resize-none font-mono"}),l.jsxs("p",{className:"text-[9px] text-gray-400 mt-1 leading-tight",children:["Operators: +, -, *, /, ( ). ",l.jsx("br",{}),l.jsx("span",{className:"text-indigo-400 font-bold",children:"++"})," Operator: ",l.jsx("code",{children:"A ++ B"}),' means "Use B if B is in range, else use A". ',l.jsx("br",{}),"Inputs are linearized float32 (Raw - InputBL)."]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Color Matrix (9 vals)"}),l.jsxs("select",{className:"text-[9px] bg-gray-100 dark:bg-slate-800 border border-black dark:border-slate-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer",onChange:K=>{const q=hc[K.target.value];q&&S(q),K.target.value=""},defaultValue:"",children:[l.jsx("option",{value:"",disabled:!0,children:"Presets..."}),G.map(K=>l.jsx("option",{value:K,children:K},K))]})]}),l.jsx("input",{type:"text",value:P,onChange:K=>S(K.target.value),placeholder:"e.g. 1 0 0 0 1 0 0 0 1",className:"w-full text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"CFA Pattern"}),l.jsxs("select",{value:j,onChange:K=>O(K.target.value),className:"w-full bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-1 text-xs font-bold",children:[l.jsx("option",{value:"RGGB",children:"RGGB"}),l.jsx("option",{value:"BGGR",children:"BGGR"}),l.jsx("option",{value:"GBRG",children:"GBRG"}),l.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),B&&l.jsx("div",{className:"text-red-500 text-xs bg-red-50 dark:bg-red-900/20 p-2 rounded text-center font-bold",children:B}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("div",{className:"flex-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold truncate",children:A}),l.jsx("button",{onClick:Z,disabled:E,className:`px-6 py-2 text-sm font-bold uppercase tracking-wide text-white rounded shadow-md transition-all active:scale-95 ${E?"bg-gray-400 cursor-wait":"bg-emerald-600 hover:bg-emerald-500"}`,children:"Process & Save DNG"})]})]})]})]}):null},xne=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Z8-Rescued"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Nikon Z 8") 
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,bne=[1.1423,-.4564,-.1123,-.4816,1.2895,.2119,-.021,.1061,.7282],wne=[4032,4032,4032,4032],kne=2,Sne=({isOpen:e,onClose:t,zIndex:r=250,onFocus:n})=>{const[a,i]=C.useState(!0),[o,s]=C.useState(!1),[c,u]=C.useState(""),f=C.useRef(null),d=C.useRef(null);C.useEffect(()=>{e&&!f.current&&(async()=>{try{const x=await window.loadPyodide();await x.loadPackage("numpy"),await x.runPythonAsync(xne),f.current=x,i(!1)}catch(x){console.error("Pyodide Init Failed",x),u("Error loading Python environment.")}})()},[e]);const p=async m=>{if(!m.target.files||m.target.files.length===0||!f.current)return;const x=Array.from(m.target.files);s(!0),u("Starting batch...");const b=f.current;for(let k=0;k<x.length;k++){const v=x[k];u(`Processing ${k+1}/${x.length}: ${v.name}`);try{const y=await v.arrayBuffer(),w=await pc(y),{data:P,width:S,height:j}=w,O=[[0,0,0],[0,0,0],[0,0,0],[0,0,0]];for(let z=0;z<j;z+=2){const I=z*S,L=(z+1)*S;for(let H=0;H<S;H+=2){const Z=[I+H,I+H+1,L+H,L+H+1];for(let te=0;te<4;te++){const K=P[Z[te]];K>=1006&&K<=1008&&O[te][K-1006]++}}}const A=[-1,-1,-1,-1];for(let z=0;z<4;z++){const I=O[z][0],L=O[z][1],H=O[z][2];H<L?A[z]=1007:H>L&&L<I&&(A[z]=1006)}let $=!1;if(A.some(z=>z>-1)){$=!0;for(let z=0;z<j;z+=2){const I=z*S,L=(z+1)*S;for(let H=0;H<S;H+=2){const Z=[I+H,I+H+1,L+H,L+H+1];for(let te=0;te<4;te++){const K=A[te];K>-1&&P[Z[te]]<=K&&(P[Z[te]]+=1)}}}}b.globals.set("js_raw_bytes",new Uint8Array(P.buffer,P.byteOffset,P.byteLength)),b.globals.set("js_width",S),b.globals.set("js_height",j),b.globals.set("js_cfa","RGGB"),b.globals.set("js_bl_list",wne),b.globals.set("js_shift",kne),b.globals.set("js_linear_shift",0),b.globals.set("js_cm_flat",bne);const E=await b.runPythonAsync(`
                    convert_to_dng(
                        js_raw_bytes.to_py(), 
                        js_width, 
                        js_height, 
                        js_cfa, 
                        js_bl_list.to_py(), 
                        js_shift,
                        js_linear_shift,
                        js_cm_flat.to_py()
                    )
                `),T=E.toJs();E.destroy();const B=new Blob([T],{type:"image/x-adobe-dng"}),U=URL.createObjectURL(B),F=document.createElement("a");F.href=U;const G=v.name.substring(0,v.name.lastIndexOf("."))||"image";F.download=`${G}_Z8Rescued_16bit.dng`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(U),await new Promise(z=>setTimeout(z,100))}catch(y){console.error(`Error processing ${v.name}`,y),u(`Error on ${v.name}: ${y.message}`)}}s(!1),u("Batch Complete."),m.target.value=""};return e?l.jsxs(ks,{initialPosition:{x:window.innerWidth/2-200,y:150},onClose:t,zIndex:r,onFocus:n,className:"w-[400px] bg-white dark:bg-slate-900 border-2 border-red-600 shadow-[8px_8px_0px_rgba(220,38,38,0.3)] rounded-none flex flex-col font-mono",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-red-600 text-white border-b-2 border-black dark:border-white",children:[l.jsxs("h3",{className:"text-sm font-bold uppercase tracking-widest flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:""}),"  Z8 (Z8 Rescue)"]}),l.jsx("button",{onClick:t,className:"hover:text-black transition-colors font-bold",children:""})]}),l.jsx("div",{className:"p-6 flex flex-col gap-4",children:a?l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx("div",{className:"w-6 h-6 border-4 border-red-600 border-t-transparent animate-spin rounded-full"}),l.jsx("p",{className:"text-xs mt-2 text-gray-500",children:"Loading Python Kernel..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 p-3 text-[10px] text-gray-700 dark:text-gray-300 leading-relaxed",children:[l.jsx("strong",{className:"block mb-1 text-red-600 dark:text-red-400",children:"Logic:"}),"1. iso64 preferred",l.jsx("br",{}),"2. PTC",l.jsx("br",{}),"3. Apply bit-shift (x4) to 16-bit.",l.jsx("br",{}),"4. Export DNG with BL=4032 & Z8 Matrix."]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("input",{type:"file",ref:d,multiple:!0,accept:".nef,.dng",className:"hidden",onChange:p}),l.jsx("button",{onClick:()=>{var m;return(m=d.current)==null?void 0:m.click()},disabled:o,className:`w-full py-3 font-bold uppercase text-xs tracking-widest shadow-md transition-all active:translate-y-1 ${o?"bg-gray-400 text-gray-700 cursor-wait":"bg-red-600 hover:bg-red-500 text-white border-2 border-black dark:border-white"}`,children:o?"Rescuing...":"Select Z8 Files & Rescue"})]}),c&&l.jsx("div",{className:"text-center text-[10px] font-bold text-red-600 dark:text-red-400 border-t border-gray-200 dark:border-slate-800 pt-2 animate-pulse",children:c})]})})]}):null},jne="http://localhost:5428",_ne=(e=!1)=>{const[t,r]=C.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return C.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${jne}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const c=await s.json(),u=`Connected (${c.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===c.exiftool&&f.hasDngConverter===!!c.dng_converter?f:{isConnected:!0,message:u,version:c.exiftool,hasDngConverter:!!c.dng_converter})}else r(c=>c.isConnected===!1&&c.message==="Service Error"?c:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},Pne="JTR_BlobStore",eo="raw_files",Cne=1,ig=()=>new Promise((e,t)=>{const r=indexedDB.open(Pne,Cne);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(eo)||a.createObjectStore(eo)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),d4=async(e,t)=>{const r=await ig();return new Promise((n,a)=>{const i=r.transaction(eo,"readwrite");i.objectStore(eo).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},Nne=async e=>{const t=await ig();return new Promise((r,n)=>{const o=t.transaction(eo,"readonly").objectStore(eo).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},One=async()=>{const e=await ig();return new Promise((t,r)=>{const n=e.transaction(eo,"readwrite");n.objectStore(eo).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},NN="jtr_workspace_index",Mne=e=>{try{const t=JSON.stringify(e);localStorage.setItem(NN,t)}catch(t){console.error("Failed to save workspace index",t)}},Ane=()=>{try{const e=localStorage.getItem(NN);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},Tne=async e=>{const n=(await ig()).transaction(eo,"readwrite").objectStore(eo),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},Ene=[{x:3050,y:1973},{x:4245,y:1980},{x:3043,y:2870},{x:4243,y:2876}],$ne=1195,h4=150,p4=50,Dne=[{x:3528,y:2437.5,ori:2},{x:3775,y:2419,ori:2},{x:3638.5,y:2303,ori:1},{x:3653,y:2548.5,ori:1},{x:3082,y:2413,ori:2},{x:2825,y:2427,ori:2},{x:2946,y:2300.5,ori:1},{x:2966,y:2550,ori:1},{x:3638.5,y:3e3,ori:1},{x:3657.5,y:3248.5,ori:1},{x:3521.5,y:3135,ori:2},{x:3770,y:3108.5,ori:2},{x:4375.5,y:3064.5,ori:2},{x:4620.5,y:3040,ori:2},{x:4486.5,y:2934,ori:1},{x:4509.5,y:3182.5,ori:1},{x:2066.5,y:1726,ori:2},{x:2176.5,y:1597,ori:1},{x:2194.5,y:1843,ori:1},{x:2313.5,y:1705,ori:2},{x:2675.5,y:1799.5,ori:2},{x:2789.5,y:1674,ori:1},{x:2926,y:1787.5,ori:2},{x:2810.5,y:1921.5,ori:1},{x:4380.5,y:1816,ori:2},{x:4497.5,y:1687,ori:1},{x:4513,y:1934.5,ori:1},{x:4628,y:1799.5,ori:2},{x:5099,y:1622.5,ori:1},{x:4985.5,y:1751,ori:2},{x:5122,y:1867.5,ori:1},{x:5229,y:1732,ori:2},{x:2194.5,y:2428,ori:2},{x:2305.5,y:2295.5,ori:1},{x:2327,y:2544,ori:1},{x:2442,y:2405,ori:2},{x:3530.5,y:1741.5,ori:2},{x:3640.5,y:1610,ori:1},{x:3777.5,y:1719.5,ori:2},{x:3666,y:1856.5,ori:1},{x:4222,y:2443.5,ori:2},{x:4470.5,y:2422,ori:2},{x:4334.5,y:2309,ori:1},{x:4356.5,y:2554,ori:1},{x:4965,y:2313,ori:1},{x:4852.5,y:2446,ori:2},{x:4987,y:2561,ori:1},{x:5097,y:2427,ori:2},{x:4981.5,y:3141.5,ori:2},{x:5096,y:3009,ori:1},{x:5222.5,y:3122.5,ori:2},{x:5115.5,y:3256.5,ori:1},{x:2779,y:2928,ori:1},{x:2667,y:3064.5,ori:2},{x:2799,y:3173.5,ori:1},{x:2917.5,y:3043,ori:2},{x:2167.5,y:2993,ori:1},{x:2052,y:3130,ori:2},{x:2187.5,y:3243.5,ori:1},{x:2304.5,y:3108.5,ori:2}];function Rne(e,t){let r=[],n=[];for(let o=0;o<4;o++){let s=e[o].x,c=e[o].y,u=t[o].x,f=t[o].y;r.push([s,c,1,0,0,0,-s*u,-c*u]),r.push([0,0,0,s,c,1,-s*f,-c*f]),n.push(u),n.push(f)}const a=8;for(let o=0;o<a;o++){let s=o;for(let c=o+1;c<a;c++)Math.abs(r[c][o])>Math.abs(r[s][o])&&(s=c);[r[o],r[s]]=[r[s],r[o]],[n[o],n[s]]=[n[s],n[o]];for(let c=o+1;c<a;c++){const u=r[c][o]/r[o][o];n[c]-=u*n[o];for(let f=o;f<a;f++)r[c][f]-=u*r[o][f]}}const i=new Array(a).fill(0);for(let o=a-1;o>=0;o--){let s=0;for(let c=o+1;c<a;c++)s+=r[o][c]*i[c];i[o]=(n[o]-s)/r[o][o]}return[[i[0],i[1],i[2]],[i[3],i[4],i[5]],[i[6],i[7],1]]}function Ine(e,t,r){const n=e[2][0]*t+e[2][1]*r+e[2][2];return{x:(e[0][0]*t+e[0][1]*r+e[0][2])/n,y:(e[1][0]*t+e[1][1]*r+e[1][2])/n}}function Lne(e){if(e.length!==4)return[];const t=Rne(Ene,e),n=Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y)/$ne;return Dne.map(a=>{const i=Ine(t,a.x,a.y);let o,s;return a.ori===1?(o=h4*n,s=p4*n):(o=p4*n,s=h4*n),{x:i.x-o/2,y:i.y-s/2,w:o,h:s,ori:a.ori}})}const pa=1024,g4=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,c=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),p=f*t*4,m=d*n*4;for(let x=0;x<t;x++){const k=Math.floor(x*c)*4,v=p+x*4,y=m+k;s[v]=o[y],s[v+1]=o[y+1],s[v+2]=o[y+2],s[v+3]=o[y+3]}}return i},Fne=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=c=>{const u=[];for(let f=0;f<4;f++)r[f]===c&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const c=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(c)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(p=>d[p]=c),n("G").forEach(p=>d[p]=u),n("B").forEach(p=>f),d.some(p=>p>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let c=[];if(Array.isArray(s)?c=s.map(Number):typeof s=="string"?c=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(c=[s,s,s,s]),c.length===1&&!isNaN(c[0])&&(c=[c[0],c[0],c[0],c[0]]),c.length>=4&&!c.slice(0,4).some(isNaN)&&c.some(u=>u>0))return[c[0],c[1],c[2],c[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},Bne=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:c,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],p=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,m=C.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:w,y:P,width:S,height:j}=e,O=_1(u,{x:w,y:P,w:S,h:j},o),A=[0,0,0,0],$=[0,0,0,0],E=Math.floor(P),T=Math.floor(w);for(let B=0;B<O.height;B++){const U=B*O.width;for(let F=0;F<O.width;F++){const G=O.data[U+F],z=E+B,I=T+F,L=z%2,H=I%2,Z=L*2+H;A[Z]+=G,$[Z]++}}return A.map((B,U)=>$[U]>0?B/$[U]:0)}catch(w){return console.error("Unmix calc error",w),null}},[e,u,o]),x=(w,P,S)=>f?P<=1e-4?0:(w-S)/P:null,b=(w,P)=>p?w-d[P]:w,k=()=>{if(!p){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let w,P,S,j;n?(j=0,P=1,S=2,w=3):(w=0,P=1,S=2,j=3);const O=$=>e.means[$]-d[$],A=$=>e.stdDevs[$];localStorage.setItem("import_signal_r",O(w).toString()),localStorage.setItem("import_signal_g1",O(P).toString()),localStorage.setItem("import_signal_g2",O(S).toString()),localStorage.setItem("import_signal_b",O(j).toString()),localStorage.setItem("import_sigma_r",A(w).toString()),localStorage.setItem("import_sigma_g1",A(P).toString()),localStorage.setItem("import_sigma_g2",A(S).toString()),localStorage.setItem("import_sigma_b",A(j).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},v=n?[{name:"B",desc:"(0,0)",mean:b(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:x(e.means[0],e.stdDevs[0],d[0]),unmixed:m?m[0]:null},{name:"G1",desc:"(0,1)",mean:b(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:x(e.means[1],e.stdDevs[1],d[1]),unmixed:m?m[1]:null},{name:"G2",desc:"(1,0)",mean:b(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:x(e.means[2],e.stdDevs[2],d[2]),unmixed:m?m[2]:null},{name:"R",desc:"(1,1)",mean:b(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:x(e.means[3],e.stdDevs[3],d[3]),unmixed:m?m[3]:null}]:[{name:"R",desc:"(0,0)",mean:b(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:x(e.means[0],e.stdDevs[0],d[0]),unmixed:m?m[0]:null},{name:"G1",desc:"(0,1)",mean:b(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:x(e.means[1],e.stdDevs[1],d[1]),unmixed:m?m[1]:null},{name:"G2",desc:"(1,0)",mean:b(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:x(e.means[2],e.stdDevs[2],d[2]),unmixed:m?m[2]:null},{name:"B",desc:"(1,1)",mean:b(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:x(e.means[3],e.stdDevs[3],d[3]),unmixed:m?m[3]:null}],y=m?"w-96":f?"w-80":"w-60";return l.jsxs(ks,{className:`${y} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:c,initialPosition:{x:20,y:80},children:[l.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[l.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",l.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),l.jsx("br",{}),"Y: ",Math.round(e.y)]}),l.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),l.jsxs("table",{className:"w-full mb-3",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[l.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),l.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",p?"*":""]}),l.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&l.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),m&&l.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),l.jsx("tbody",{className:"font-mono text-xs",children:v.map((w,P)=>l.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[l.jsxs("td",{className:"py-1",children:[l.jsx("span",{className:`font-bold ${w.color}`,children:w.name}),l.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:w.desc})]}),l.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",children:w.mean.toFixed(2)}),l.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:w.std.toFixed(2)}),f&&l.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:w.snr!==null?w.snr.toFixed(2):"-"}),m&&l.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:w.unmixed!==null?w.unmixed.toFixed(1):"-"})]},P))})]}),p&&l.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Hist"}),l.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Quant"}),l.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"FFT"}),l.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"PCC"}),l.jsx("button",{onClick:k,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"ColorN"})]})]})]})},zne=()=>{var xd;const[e,t]=C.useState("init"),[r,n]=C.useState("Checking storage..."),[a,i]=C.useState(null),o=C.useRef(!1),[s,c]=C.useState("dark");C.useEffect(()=>{const ee=window.document.documentElement;ee.classList.remove(s==="dark"?"light":"dark"),ee.classList.add(s)},[s]);const[u,f]=C.useState(!1),[d,p]=C.useState(!1),[m,x]=C.useState(!1),[b,k]=C.useState(!1),[v,y]=C.useState(!1),[w,P]=C.useState(!1),S=_ne(u||d||m),[j,O]=C.useState(!1),[A,$]=C.useState([]),[E,T]=C.useState(-1),[B,U]=C.useState([]),F=C.useMemo(()=>A[E],[A,E]),G=C.useRef(null);C.useEffect(()=>{G.current=F||null},[F]);const z=(F==null?void 0:F.file)||null,I=(F==null?void 0:F.imageElement)||null,L=(F==null?void 0:F.rawImageData)||null,H=(F==null?void 0:F.rawFileBuffer)||null,Z=(F==null?void 0:F.renderedRawImageData)||null,te=(F==null?void 0:F.referenceImageData)||null,K=(F==null?void 0:F.sampledImageData)||null,q=(F==null?void 0:F.exifData)||null,J=(F==null?void 0:F.isThreePlane)||!1,ve=(F==null?void 0:F.xtransPhase)||{x:0,y:0},ie=(F==null?void 0:F.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[pe,oe]=C.useState(!1),[V,se]=C.useState(null),[ge,le]=C.useState(!1),[je,Se]=C.useState(!1),[me,he]=C.useState(null),[Pe,$e]=C.useState([]),[Ve,He]=C.useState(100),[Je,yt]=C.useState(!0),[wt,ir]=C.useState(!1),[jt,hr]=C.useState(null),[_t,or]=C.useState(!1),[Ir,Rt]=C.useState(!1),[Sr,et]=C.useState(!1),[ht,Qt]=C.useState(!1),[Lt,mr]=C.useState(!1),[jr,tn]=C.useState("1.0"),[Mt,Xr]=C.useState(!1),[Pt,rn]=C.useState(!1),[ze,cn]=C.useState(!1),[Lr,_r]=C.useState([]),[jn,Tr]=C.useState(!1),[Pr,nn]=C.useState(0),[ea,Xn]=C.useState([]),[tr,sr]=C.useState(!1),[xr,M]=C.useState({x:0,y:0}),[Le,vt]=C.useState(!1),[pt,kt]=C.useState(!1),[At,br]=C.useState([]),[lr,Ue]=C.useState(0),[Ct,Gt]=C.useState(null),[Jt,fr]=C.useState(!1),[_e,Cr]=C.useState([]),[R,we]=C.useState(.5),[Ne,Nt]=C.useState(!1),[Ze,ot]=C.useState(2),[gt,It]=C.useState(1),[zr,an]=C.useState([]),[Kt,Mn]=C.useState(null),[Nr,gn]=C.useState(0),[Wt,Ft]=C.useState([]),[Ur,Fe]=C.useState([]),[rr,mn]=C.useState(64),[Kn,ca]=C.useState(10),[wr,Za]=C.useState(10),[re,ye]=C.useState(4),[be,Y]=C.useState(1),[Me,nt]=C.useState(0),[st,Et]=C.useState("processed"),[St,lt]=C.useState(!1),pr=C.useMemo(()=>ie.blackLevel?ie.blackLevel:L!=null&&L.blackLevels?[L.blackLevels[0],L.blackLevels[1],L.blackLevels[2],L.blackLevels[3]]:[0,0,0,0],[ie.blackLevel,L]),cr=(q==null?void 0:q.ImageHeight)||(q==null?void 0:q.ExifImageHeight)||(L==null?void 0:L.height)||0,[nr,ct]=C.useState(null),[Ce,De]=C.useState(null),[tt,ae]=C.useState({x:0,y:0}),[ke,dt]=C.useState(1),[it,Bt]=C.useState("pan"),Vt=C.useRef(null),Er=C.useRef(null);C.useEffect(()=>{const ee=Ane();ee&&ee.sessions.length>0?(i(ee),t("prompt")):t("idle")},[]),C.useCallback(async()=>{o.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await One()}catch(ee){console.error("Failed to clear DB",ee)}t("idle"),i(null),o.current=!1},[]),C.useCallback(async()=>{if(!a)return;t("restoring"),n("Restoring layout...");const ee=a;if(c(ee.theme),yt(ee.sidebarOpen),ee.sessions.length>0){n(`Restoring ${ee.sessions.length} images...`);const ce=[];for(const ue of ee.sessions){if(o.current)return;await new Promise(de=>setTimeout(de,50));try{const de=await Nne(ue.id);if(de){const Re={id:ue.id,fileName:ue.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:de,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:ue.isThreePlane,displaySettings:ue.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:Ae,analysisData:Ke}=await Cs(de);let Ge=null;if(Ke)try{ue.displaySettings.renderMode==="zero-dependency"?Ge=await cm(de,ue.displaySettings):ue.displaySettings.renderMode==="advanced-zero-dep"?Ge=await q6(de,ue.displaySettings):ue.displaySettings.renderMode==="zero-dep-color"?Ge=await K6(de,ue.displaySettings):Ge=await gw(de,ue.displaySettings)}catch(ft){console.error("Render failed",ft),Ge=await cm(de,ue.displaySettings)}const ut=URL.createObjectURL(Ae),We=new Image;We.src=ut,await new Promise(ft=>{We.onload=()=>ft()}),ce.push({...Re,rawImageData:Ke,renderedRawImageData:Ge,previewUrl:ut,imageElement:We,exifData:Ke.metadata})}}catch(de){console.error(`Failed to restore session ${ue.id}`,de)}}if(o.current)return;if($(ce),ee.activeSessionId){const ue=ce.findIndex(de=>de.id===ee.activeSessionId);ue>=0?T(ue):ce.length>0&&T(0)}$e(ee.windows)}o.current||t("idle")},[a]);const An=C.useCallback(async()=>{},[H,F,ie,ht,Lt]),ta=C.useCallback(()=>{!H||!F||et(!0)},[H,F]),ua=C.useCallback(async()=>{},[L,F,jr,pr]);C.useEffect(()=>{const ee=ce=>{(ce.ctrlKey||ce.metaKey)&&ce.key.toLowerCase()==="s"&&(ce.preventDefault(),ta())};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},[ta]);const Ma=C.useRef(null),xa=C.useCallback(()=>{e==="idle"&&(Ma.current&&clearTimeout(Ma.current),Ma.current=window.setTimeout(async()=>{var ue;const ee={version:1,timestamp:Date.now(),activeSessionId:((ue=A[E])==null?void 0:ue.id)||null,theme:s,sidebarOpen:Je,sessions:A.map(de=>({id:de.id,fileName:de.fileName,fileType:de.file?de.file.type:"application/octet-stream",fileSize:de.rawFileBuffer?de.rawFileBuffer.byteLength:0,displaySettings:de.displaySettings,isThreePlane:de.isThreePlane})),windows:Pe.map(de=>({id:de.id,type:de.type,roi:de.roi,zIndex:de.zIndex,initialPosition:de.initialPosition,sessionId:de.sessionId,isBGGR:de.isBGGR,isMinimized:de.isMinimized||!1,internalState:de.internalState}))};Mne(ee);const ce=A.map(de=>de.id);Tne(ce)},1e3))},[A,Pe,E,s,Je,e]);C.useEffect(()=>{xa()},[xa]);const qt=C.useCallback(ee=>{$(ce=>ce.map((ue,de)=>de===E?{...ue,...ee}:ue))},[E]),Li=()=>T(ee=>Math.min(ee+1,A.length-1)),ou=()=>T(ee=>Math.max(0,ee-1));C.useEffect(()=>{if(L&&V){const ee=Ns(L.data,L.width,L.height,V.x,V.y,V.width,V.height);se(ee)}},[L]);const Ss=ee=>{if(!V||!F)return;const ce=Date.now().toString()+Math.random().toString().slice(2,5),ue=Math.max(Ve,...Pe.map(Ae=>Ae.zIndex),100),de=Pe.length%10*30,Re=ee==="fft"?{x:50,y:50}:ee==="histogram"?{x:100,y:100}:{x:150,y:150};$e(Ae=>[...Ae,{id:ce,type:ee,roi:{x:V.x,y:V.y,w:V.width,h:V.height},zIndex:ue+1,initialPosition:{x:Re.x+de,y:Re.y+de},sessionId:F.id,isBGGR:ge,isMinimized:!1,stackFiles:(ee==="fft"||ee==="pearson"||ee==="histogram")&&B.length>0?B:void 0}])},Qa=ee=>{$e(ce=>ce.filter(ue=>ue.id!==ee))},no=ee=>{$e(ce=>ce.map(ue=>ue.id===ee?{...ue,isMinimized:!0}:ue))},Gr=ee=>{$e(ce=>ce.map(ue=>ue.id===ee?{...ue,isMinimized:!1}:ue)),To(ee)},To=ee=>{$e(ce=>{const ue=Math.max(Ve,...ce.map(de=>de.zIndex));return ce.map(de=>de.id===ee?{...de,zIndex:ue+1}:de)})},su=(ee,ce)=>{$e(ue=>ue.map(de=>de.id===ee?{...de,internalState:{...de.internalState,...ce}}:de))},vi=()=>{const ee=Math.max(Ve,...Pe.map(ce=>ce.zIndex));He(ee+1)},Xe=(ee,ce)=>{$e(ue=>ue.map(de=>de.id===ee?{...de,roi:ce}:de))};C.useEffect(()=>{if(!q)return;const ee=q.CFAPattern2||q.CFAPattern;if(ee){let ce="";Array.isArray(ee)?ce=ee.join(""):typeof ee=="string"?ce=ee.replace(/[\s,]+/g,""):typeof ee=="number"&&(ce=String(ee)),ce==="0112"?le(!1):ce==="2110"&&le(!0)}},[q]),C.useEffect(()=>{let ee;const ce=()=>{if(Ne&&tr){const ue=Date.now()/1e3,de=.55+.45*Math.sin(ue*Ze);It(de),ee=requestAnimationFrame(ce)}else It(1)};return Ne&&tr?ce():It(1),()=>{ee&&cancelAnimationFrame(ee)}},[Ne,tr,Ze]),C.useEffect(()=>{const ee=ce=>{ce.key==="Escape"&&tr&&(sr(!1),M({x:0,y:0}),Nt(!1))};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},[tr]),C.useEffect(()=>()=>{A.forEach(ee=>{ee.previewUrl&&URL.revokeObjectURL(ee.previewUrl)}),Er.current&&Er.current.terminate()},[]);const Dt=async(ee,ce=!0)=>{ce&&(ae({x:0,y:0}),dt(1),gn(0),Ft([]),Fe([]),ir(!1),hr(null),oe(!1),kt(!1),br([]),Cr([]),Ue(0),_r([]));let ue=null;if(S.isConnected){const Ge=new FormData;Ge.append("file",ee);try{const We=await(await fetch("http://localhost:5428/read",{method:"POST",body:Ge})).json();if(We.success){let ft=We.data;Array.isArray(ft)&&ft.length===1&&(ft=ft[0]),ue=ft}}catch(ut){console.warn("Auto Exif fetch failed",ut)}}const de=ee.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(ee.type)||de)){ct("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let Ae={file:ee,exifData:ue};if(de||ee.type==="image/x-adobe-dng")try{ce?De("Processing RAW file (this may take a moment)..."):lt(!0);const Ge=await ee.arrayBuffer();Ae.rawFileBuffer=Ge;const{previewBlob:ut,analysisData:We}=await Cs(Ge);Ae.rawImageData=We,!ue&&We.metadata&&(Ae.exifData=We.metadata),Ae.isThreePlane=We.isThreePlane||!1,We.isThreePlane&&ce&&oe(!0);let ft=!1,zt=null,ur=!1;if(We.isXTrans){ur=!0,zt=Ge;const yn=(await zd(Ge,0,0)).dngBuffer,Wr=await Cs(yn);Ae.rawFileBuffer=yn,Ae.rawImageData=Wr.analysisData,Ae.previewUrl=URL.createObjectURL(Wr.previewBlob),ft=!0}else Ae.previewUrl=URL.createObjectURL(ut);Ae.originalRawFileBuffer=zt,Ae.isXTransOriginal=ur,Ae.isXTransConverted=ft,Ae.xtransPhase={x:0,y:0};const $r=new Image;if($r.src=Ae.previewUrl||"",await new Promise((un,yn)=>{$r.onload=()=>{Ae.imageElement=$r,un()},$r.onerror=()=>{un()}}),ce){const un=Ae.rawImageData||We,yn=Fne(un,ue||un.metadata);let Wr;yn&&yn.some(Dr=>Dr>0)&&(Wr=yn);const xt={exposure:0,demosaicMethod:-1,blackLevel:Wr,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ar=Ae.rawFileBuffer;if(ar&&(de||ee.type==="image/x-adobe-dng"))try{const Dr=await cm(ar,xt);Ae.renderedRawImageData=Dr,Ae.displaySettings=xt}catch(Dr){console.error("Initial Zero-Dep Render Failed",Dr)}}}catch(Ge){ct(`Failed to process RAW file: ${Ge.message}`),De(null),lt(!1);return}else try{De("Processing image...");const{previewBlob:Ge,analysisData:ut}=await B6(ee);Ae.rawImageData=ut,!ue&&ut.metadata&&(Ae.exifData=ut.metadata),Ae.rawFileBuffer=await ee.arrayBuffer(),Ae.isThreePlane=ut.isThreePlane||!1,Ae.isXTransOriginal=!1,Ae.isXTransConverted=!1,Ae.originalRawFileBuffer=null;const We=URL.createObjectURL(Ge);Ae.previewUrl=We;const ft=new Image;ft.src=We,await new Promise(zt=>{ft.onload=()=>{Ae.imageElement=ft,zt()},ft.onerror=()=>{ct("Could not load the image file."),zt()}})}catch(Ge){ct(`Failed to process image: ${Ge.message}`),De(null);return}const Ke=Date.now().toString()+Math.random();if(Ae.rawFileBuffer&&await d4(Ke,Ae.rawFileBuffer),ce){const Ge={exposure:0,demosaicMethod:-1,blackLevel:void 0,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ut={id:Ke,fileName:ee.name,file:ee,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:Ge,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...Ae};$(We=>{const ft=[...We,ut];return T(ft.length-1),ft})}else qt(Ae);De(null),lt(!1)},Ht=async ee=>{De("Converting to DNG...");try{const ce=new FormData;ce.append("file",ee);const ue=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:ce}),de=ue.headers.get("content-type")||"";if(ue.ok)if(de.includes("application/json")){const Re=await ue.json();throw new Error(Re.error||"Conversion failed")}else{const Re=await ue.blob(),Ae=URL.createObjectURL(Re),Ke=document.createElement("a");Ke.href=Ae;const Ge=ee.name,ut=Ge.substring(0,Ge.lastIndexOf("."))+".dng"||"converted.dng";Ke.download=ut,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),URL.revokeObjectURL(Ae);const We=new File([Re],ut,{type:"image/x-adobe-dng"});await Dt(We,!0)}else{const Re=await ue.text();throw new Error(`HTTP ${ue.status}: ${Re}`)}}catch(ce){De(null),ct(`Conversion Error: ${ce.message}`)}},Xt=(ee,ce)=>{ee&&(ce==="direct"?Dt(ee,!0):Ht(ee))},ra=async ee=>{var ue;const ce=(ue=ee.target.files)==null?void 0:ue[0];ce&&(await Dt(ce,!0),ee.target.value="")},_n=async(ee,ce,ue,de)=>{!ee||!ce||(De("Processing Pair Difference (May take a while)..."),ct(null),setTimeout(async()=>{try{const Re=await ee.arrayBuffer(),Ae=await ce.arrayBuffer(),Ke=await lm(Re,Ae,ue,de),Ge=p0(Ke.width,Ke.height,Ke.rawData),ut=new File([Ge],`Diff_${ee.name}_${ce.name}.dng`,{type:"image/x-adobe-dng"});await Dt(ut,!0),Ss("fft")}catch(Re){console.error("Pair Processing Error",Re),ct("Pair Processing Failed: "+Re.message)}finally{De(null)}},100))},Aa=async ee=>{if(ee.length<2){ct("Need at least 2 files for Batch Diff.");return}De(`Batch Processing 0/${Math.floor(ee.length/2)} pairs...`);const ce=Array.from(ee).sort((ue,de)=>ue.name.localeCompare(de.name,void 0,{numeric:!0}));try{for(let ue=0;ue<ce.length-1;ue+=2){const de=ce[ue],Re=ce[ue+1];De(`Batch Processing Pair ${Math.floor(ue/2)+1}/${Math.floor(ce.length/2)}: ${de.name} & ${Re.name}`);const Ae=await de.arrayBuffer(),Ke=await Re.arrayBuffer(),Ge=await lm(Ae,Ke,!1,!1),ut=p0(Ge.width,Ge.height,Ge.rawData),We=new Blob([ut],{type:"image/x-adobe-dng"}),ft=URL.createObjectURL(We),zt=document.createElement("a");zt.href=ft,zt.download=`Diff_${de.name}_${Re.name}.dng`,document.body.appendChild(zt),zt.click(),document.body.removeChild(zt),URL.revokeObjectURL(ft)}}catch(ue){console.error("FFT Batch Error",ue),ct("Batch Processing Failed: "+ue.message)}finally{De(null)}},Ja=async ee=>{if(ee.length<1)return;const ce=Array.from(ee).sort((ue,de)=>ue.name.localeCompare(de.name,void 0,{numeric:!0}));U(ce),await Dt(ce[0],!0)},xi=async()=>{lt(!0);const ee=128,ce=ee,ue=ee,de=ce*ue,Re=new Uint16Array(de),Ae=xt=>{const ar=xt/re+Me;return Math.sin(2*Math.PI*ar)>=0?1:0},Ke=32,Ge=be*.5,ut=Math.max(1e-4,be/Ke);for(let xt=0;xt<ue;xt++){let ar=0;const fn=xt+.5-Ge;for(let Or=0;Or<Ke;Or++){const qr=fn+(Or+.5)*ut;ar+=Ae(qr)}const Pn=ar/Ke,Yt=Math.round(Pn*65535);for(let Or=0;Or<ce;Or++)Re[xt*ce+Or]=Yt}const We=new ImageData(pa,pa),ft=pa/ce,zt=be/2;for(let xt=0;xt<pa;xt++){const ar=xt/ft,Dr=Math.floor(ar),fn=ar-Dr,Pn=fn>=.5-zt&&fn<.5+zt;for(let Yt=0;Yt<pa;Yt++){const Or=Yt/ft,qr=Math.floor(Or),Ln=Or-qr,Fi=Ln>=.5-zt&&Ln<.5+zt,on=(xt*pa+Yt)*4;if(qr>=ce||Dr>=ue){We.data[on]=30,We.data[on+1]=34,We.data[on+2]=40,We.data[on+3]=255;continue}if(Pn&&Fi){const bi=Re[Dr*ce+qr],ao=Math.round(bi/257);We.data[on]=ao,We.data[on+1]=ao,We.data[on+2]=ao,We.data[on+3]=255}else We.data[on]=30,We.data[on+1]=34,We.data[on+2]=40,We.data[on+3]=255}}const ur=new ImageData(pa,pa),$r=ue/pa;for(let xt=0;xt<pa;xt++){const ar=(xt+.5)*$r,fn=Ae(ar)>.5?255:0,Pn=xt*pa*4;for(let Yt=0;Yt<pa;Yt++){const Or=Pn+Yt*4;ur.data[Or]=fn,ur.data[Or+1]=fn,ur.data[Or+2]=fn,ur.data[Or+3]=255}}const un=p0(ce,ue,Re),yn=new File([un],"pattern_test.dng",{type:"image/x-adobe-dng"}),Wr=Date.now().toString();try{const{previewBlob:xt,analysisData:ar}=await Cs(un.slice(0)),Dr=await gw(un.slice(0),ie),fn=g4(Dr,pa,pa),Pn=URL.createObjectURL(xt),Yt=new Image;Yt.src=Pn,await new Promise(qr=>{Yt.onload=()=>qr()}),await d4(Wr,un);const Or={id:Wr,fileName:"pattern_test.dng",file:yn,imageElement:Yt,rawImageData:ar,rawFileBuffer:un,renderedRawImageData:fn,referenceImageData:ur,sampledImageData:We,exifData:null,isThreePlane:!1,previewUrl:Pn,displaySettings:ie,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(z==null?void 0:z.name)==="pattern_test.dng"?qt(Or):$(qr=>{const Ln=[...qr,Or];return T(Ln.length-1),Ln})}catch(xt){console.error("Error generating pattern:",xt),ct(`Error generating pattern: ${xt.message}`)}lt(!1),De(null)},ei=()=>{or(!0)},Kr=()=>{or(!1),Et("sampled"),De("Generating..."),setTimeout(()=>xi(),50)},js=C.useRef({period:re,fill:be,phase:Me});C.useEffect(()=>{(z==null?void 0:z.name)==="pattern_test.dng"&&(js.current.period!==re||js.current.fill!==be||js.current.phase!==Me)&&(js.current={period:re,fill:be,phase:Me},xi())},[re,be,Me,z]);const _s=C.useCallback(ee=>{if(qt({displaySettings:ee}),!H)return;lt(!0),Er.current&&Er.current.terminate();const ce=new Worker(new URL("/assets/renderWorker-DjzFrYUC.js",import.meta.url),{type:"module"});Er.current=ce,ce.onmessage=ue=>{const{success:de,imageData:Re,error:Ae}=ue.data;if(de){let Ke=Re;(z==null?void 0:z.name)==="pattern_test.dng"&&(Ke=g4(Re,pa,pa)),qt({renderedRawImageData:Ke})}else ct(Ae||"Unknown worker error");lt(!1),ce.terminate(),Er.current=null},ce.postMessage({buffer:H.slice(0),settings:ee})},[H,z,qt]),Sl=async(ee,ce)=>{De("Re-sampling X-Trans with new Phase...");try{const de=(await zd(ce,ee.x,ee.y)).dngBuffer,Re=await Cs(de),Ae=URL.createObjectURL(Re.previewBlob),Ke=new Image;Ke.src=Ae,await new Promise(Ge=>{Ke.onload=()=>Ge()}),F!=null&&F.previewUrl&&URL.revokeObjectURL(F.previewUrl),qt({rawFileBuffer:de,rawImageData:Re.analysisData,previewUrl:Ae,imageElement:Ke,xtransPhase:ee}),se(null)}catch(ue){console.error("X-Trans Phase Update Failed",ue),ct("Phase Update Failed: "+ue.message)}finally{De(null)}},dd=ee=>{if(!F||!F.originalRawFileBuffer||!F.isXTransConverted)return;const ce={...F.xtransPhase,...ee};Sl(ce,F.originalRawFileBuffer)},og=C.useCallback(async ee=>{if(F)if(ee){if(F.isXTransConverted)return;const ce=F.originalRawFileBuffer||F.rawFileBuffer;if(!ce)return;De("Converting X-Trans to Pseudo-Bayer DNG...");try{const ue=F.xtransPhase||{x:0,y:0},Re=(await zd(ce,ue.x,ue.y)).dngBuffer,Ae=await Cs(Re),Ke=URL.createObjectURL(Ae.previewBlob),Ge=new Image;Ge.src=Ke,await new Promise(ut=>{Ge.onload=()=>ut()}),F.previewUrl&&URL.revokeObjectURL(F.previewUrl),qt({rawFileBuffer:Re,rawImageData:Ae.analysisData,previewUrl:Ke,imageElement:Ge,isXTransConverted:!0,originalRawFileBuffer:ce}),se(null)}catch(ue){console.error("X-Trans Conversion Failed",ue),ct("Failed to convert X-Trans: "+ue.message)}finally{De(null)}}else{if(!F.isXTransConverted)return;const ce=F.originalRawFileBuffer;if(!ce){ct("Original X-Trans buffer lost. Cannot revert.");return}De("Reverting to Native X-Trans...");try{const ue=await Cs(ce),de=URL.createObjectURL(ue.previewBlob),Re=new Image;Re.src=de,await new Promise(Ae=>{Re.onload=()=>Ae()}),F.previewUrl&&URL.revokeObjectURL(F.previewUrl),qt({rawFileBuffer:ce,rawImageData:ue.analysisData,previewUrl:de,imageElement:Re,isXTransConverted:!1}),se(null)}catch(ue){console.error("X-Trans Revert Failed",ue),ct("Failed to revert X-Trans: "+ue.message)}finally{De(null)}}},[F,qt]),hd=ee=>{if(Vt.current){const ce=Vt.current,{width:ue,height:de}=ce.getBoundingClientRect(),Re=ue/2,Ae=de/2,Ke=ee/ke,Ge=Re-(Re-tt.x)*Ke,ut=Ae-(Ae-tt.y)*Ke;ae({x:Ge,y:ut})}dt(ee)},jl=ee=>{if(!ee)return;if(!L){se(null);return}if(jn){ee.w>0&&ee.h>0&&_r(ue=>[...ue,ee]);return}je&&Se(!1);const ce=Ns(L.data,L.width,L.height,ee.x,ee.y,ee.w,ee.h);se(ce)},sg=ee=>{he(ee),jl(ee)},lg=()=>{Bt(ee=>ee==="pan"?"select":"pan")},cg=(ee,ce,ue)=>{_r(de=>{if(de.length===0)return de;if(ee==="move")return de.map(Re=>({...Re,x:Re.x+ce,y:Re.y+ue}));if(ee==="scale"){const Re=de.reduce((Ke,Ge)=>Ke+Ge.x+Ge.w/2,0)/de.length,Ae=de.reduce((Ke,Ge)=>Ke+Ge.y+Ge.h/2,0)/de.length;return de.map(Ke=>{const Ge=Ke.x+Ke.w/2,ut=Ke.y+Ke.h/2,We=Re+(Ge-Re)*ce,ft=Ae+(ut-Ae)*ue,zt=Ke.w*ce,ur=Ke.h*ue;return{...Ke,x:We-zt/2,y:ft-ur/2,w:zt,h:ur}})}return de})},ug=()=>{if(Lr.length===0){ct("No ROIs to save.");return}let ee=`Index,X,Y,W,H,Orientation
`;Lr.forEach((Re,Ae)=>{ee+=`${Ae+1},${Re.x.toFixed(2)},${Re.y.toFixed(2)},${Re.w.toFixed(2)},${Re.h.toFixed(2)},${Re.ori||0}
`});const ce=new Blob([ee],{type:"text/csv;charset=utf-8;"}),ue=URL.createObjectURL(ce),de=document.createElement("a");de.setAttribute("href",ue),de.setAttribute("download",`sfr_plate_template_${Date.now()}.csv`),document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(ue)},fg=ee=>{if(!ee||ee.length===0){ct("No valid ROIs found in file.");return}_r(ce=>[...ce,...ee])},_l=ee=>{if(Lr.length===0){ct("ROIs ");return}if(!L||ie.renderMode!=="advanced-zero-dep"){ct("Advanced Zero-Dep (Unmixed) mode required for scalar SFR calc.");return}De("Computing Batch SFR..."),setTimeout(()=>{try{const ce=[];for(const ue of Lr){const de=_1(L,ue,ie),Re=wx(de.data,de.width,de.height,{x:0,y:0,w:de.width,h:de.height},{greenOnly:ee.greenOnly,globalX:ue.x,globalY:ue.y,bayerPattern:L.bayerPattern});if(Re){const Ae=ee.useNR?-1:12,Ke=PN([Re],Ae,null,ee.useDeshading);Ke&&Ke.mtf50!==null&&ce.push({x:ue.x+ue.w/2,y:ue.y+ue.h/2,mtf50:Ke.mtf50,orientation:Re.orientation})}}if(ce.length>0){const ue=ce.map(de=>`{${de.x.toFixed(1)},${de.y.toFixed(1)},${de.mtf50.toFixed(4)},${de.orientation}}`).join("");navigator.clipboard.writeText(ue).then(()=>alert(`Computed ${ce.length}/${Lr.length} ROIs. Copied results to clipboard.`)).catch(de=>ct("Failed to copy results: "+de))}else ct("Failed to compute valid SFR for any selected ROIs.")}catch(ce){ct("Batch Compute Failed: "+ce.message)}finally{De(null)}},100)},dg=ee=>{if(Nr===0||Nr>4)return;const ce=[...Wt,ee];Ft(ce),Nr===4?(hg(ce),gn(0)):gn(Nr+1)},pd=(ee,ce,ue,de)=>{const Re=ee[0],Ae=ee[1],Ke=ee[2],Ge=ee[3],ut=ce/2,We=[];for(let ft=0;ft<ue;ft++){const zt=ue>1?ft/(ue-1):.5;for(let ur=0;ur<de;ur++){const $r=de>1?ur/(de-1):.5,un=Re.x*(1-$r)+Ae.x*$r,yn=Re.y*(1-$r)+Ae.y*$r,Wr=Ke.x*(1-$r)+Ge.x*$r,xt=Ke.y*(1-$r)+Ge.y*$r,ar=un*(1-zt)+Wr*zt,Dr=yn*(1-zt)+xt*zt,fn=ar-ut,Pn=Dr-ut;We.push({x:fn,y:Pn,w:ce,h:ce})}}return We},hg=ee=>{!L||!F||(De("Calculating DR Lab Grid..."),setTimeout(()=>{try{const ce=pd(ee,rr,Kn,wr);Fe(ce);const Ae=[...[`#BlackLevel: ${(ie.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${L.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Ke=`img${F.fileName||"image"}`;ce.forEach((zt,ur)=>{const $r=Math.floor(ur/wr)+1,un=ur%wr+1,yn=Ns(L.data,L.width,L.height,zt.x,zt.y,zt.w,zt.h),Wr=yn.means,xt=yn.stdDevs,ar=`${Ke},${$r},${un},${Wr[0].toFixed(4)},${Wr[1].toFixed(4)},${Wr[2].toFixed(4)},${Wr[3].toFixed(4)},${xt[0].toFixed(4)},${xt[1].toFixed(4)},${xt[2].toFixed(4)},${xt[3].toFixed(4)}`;Ae.push(ar)});const Ge=Ae.join(`
`),ut=new Blob([Ge],{type:"text/csv;charset=utf-8;"}),We=URL.createObjectURL(ut),ft=document.createElement("a");ft.setAttribute("href",We),ft.setAttribute("download","dr_lab_results.csv"),document.body.appendChild(ft),ft.click(),document.body.removeChild(ft),URL.revokeObjectURL(We),Ft([])}catch(ce){ct("DR Lab Error: "+ce.message)}finally{De(null)}},100))},pg=async(ee,ce)=>{if(Wt.length<4&&Ur.length<1){ct("Please mark the grid on an image first before running batch processing.");return}let ue=Ur;if(ue.length===0&&Wt.length===4&&(ue=pd(Wt,rr,Kn,wr)),ue.length===0){ct("No grid definitions found. Mark corners first.");return}De(ce==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const Re=(ie.blackLevel||[0,0,0,0]).join(","),Ae=L?L.height:0,Ge=[...[`#BlackLevel: ${Re}`,`#ImageHeight: ${Ae}`,ce==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],ut=Array.from(ee).sort((ur,$r)=>ur.name.localeCompare($r.name,void 0,{numeric:!0}));if(ce==="pair"&&ut.length<2){ct("Need at least 2 files for Pair processing."),De(null);return}const We=G.current,ft=(We==null?void 0:We.isXTransConverted)||!1,zt=(We==null?void 0:We.xtransPhase)||{x:0,y:0};try{const ur=async xt=>{let ar=await xt.arrayBuffer();return ft&&(ar=(await zd(ar,zt.x,zt.y)).dngBuffer),ar};if(ce==="single")for(let xt=0;xt<ut.length;xt++){const ar=ut[xt];De(`Processing ${xt+1}/${ut.length}: ${ar.name}...`);const Dr=await ur(ar),fn=await pc(Dr),Pn=`img${ar.name}`;ue.forEach((Yt,Or)=>{const qr=Math.floor(Or/Kn)+1,Ln=Or%wr+1,Fi=Ns(fn.data,fn.width,fn.height,Yt.x,Yt.y,Yt.w,Yt.h),on=Fi.means,bi=Fi.stdDevs,ao=`${Pn},${qr},${Ln},${on[0].toFixed(4)},${on[1].toFixed(4)},${on[2].toFixed(4)},${on[3].toFixed(4)},${bi[0].toFixed(4)},${bi[1].toFixed(4)},${bi[2].toFixed(4)},${bi[3].toFixed(4)}`;Ge.push(ao)})}else for(let xt=0;xt<ut.length-1;xt+=2){const ar=ut[xt],Dr=ut[xt+1],fn=`img${ar.name} & ${Dr.name}`;De(`Processing Pair ${Math.floor(xt/2)+1}/${Math.floor(ut.length/2)}: ${ar.name} & ${Dr.name}...`);const Pn=await ur(ar),Yt=await pc(Pn),Or=await ur(Dr),qr=await lm(Pn,Or,!1,!0);ue.forEach((Ln,Fi)=>{const on=Math.floor(Fi/Kn)+1,bi=Fi%wr+1,ao=Ns(Yt.data,Yt.width,Yt.height,Ln.x,Ln.y,Ln.w,Ln.h),_g=Ns(qr.rawData,qr.width,qr.height,Ln.x,Ln.y,Ln.w,Ln.h),Cl=ao.means,Nl=_g.stdDevs,Pg=`${fn},${on},${bi},${Cl[0].toFixed(4)},${Cl[1].toFixed(4)},${Cl[2].toFixed(4)},${Cl[3].toFixed(4)},${Nl[0].toFixed(4)},${Nl[1].toFixed(4)},${Nl[2].toFixed(4)},${Nl[3].toFixed(4)}`;Ge.push(Pg)})}const $r=Ge.join(`
`),un=new Blob([$r],{type:"text/csv;charset=utf-8;"}),yn=URL.createObjectURL(un),Wr=document.createElement("a");Wr.href=yn,Wr.setAttribute("download",`dr_lab_batch_${ce}_${new Date().getTime()}.csv`),document.body.appendChild(Wr),Wr.click(),document.body.removeChild(Wr),URL.revokeObjectURL(yn)}catch(ur){console.error("Batch Error",ur),ct("Batch Processing Failed: "+ur.message)}finally{De(null)}},gg=()=>{br([]),Ue(1)},mg=ee=>{if(!pt||lr===0)return;const ce=[...At,ee];br(ce),ce.length===4&&L?(gd(ce,R),Ue(0)):Ue(ue=>ue+1)},gd=(ee,ce)=>{L&&(De("Analyzing Color Chart..."),setTimeout(()=>{try{const ue=Xre(ee[0],ee[1],ee[2],ee[3],L.width,L.height,ce);Cr(ue);const Re=ue.map((Ae,Ke)=>{const Ge=Ns(L.data,L.width,L.height,Ae.x,Ae.y,Ae.w,Ae.h);return{id:Ke,rawMeans:Ge.means,refRGB:[0,0,0]}}).map((Ae,Ke)=>({...Ae,refRGB:bx[Ke]||[0,0,0]}));Gt(Re),fr(!0)}catch(ue){ct("Color Lab Error: "+ue.message)}finally{De(null)}},100))},yg=ee=>{we(ee),At.length===4&&gd(At,ee)},vg=()=>{fr(!1)},xg=()=>{q||hr("No EXIF data found. The file might not contain metadata or it was stripped during processing."),ir(!0)},bg=async ee=>{De("Parsing PTC Data...");const ce=[];let ue=null;try{for(let de=0;de<ee.length;de++){const Ae=(await ee[de].text()).split(`
`);let Ke=!0;for(const Ge of Ae){const ut=Ge.trim();if(!ut)continue;if(ut.startsWith("#")){if(ut.includes("BlackLevel:")){const Yt=ut.split(":")[1].trim().split(",");if(Yt.length>=4){const Or=Yt.map(Number);ue||(ue={}),ue.blackLevel=Or}}if(ut.includes("ImageHeight:")){const Yt=parseInt(ut.split(":")[1].trim());isNaN(Yt)||(ue||(ue={}),ue.height=Yt)}continue}if(Ke){ut.toLowerCase().includes("mean")&&ut.toLowerCase().includes("std")&&(Ke=!1);continue}const We=ut.split(",");if(We.length<5)continue;let ft=0,zt;isNaN(parseFloat(We[0]))&&(zt=We[0],ft=1);const ur=parseInt(We[ft]),$r=parseInt(We[ft+1]),un=parseFloat(We[ft+2]),yn=parseFloat(We[ft+3]),Wr=parseFloat(We[ft+4]),xt=parseFloat(We[ft+5]),ar=parseFloat(We[ft+6]),Dr=parseFloat(We[ft+7]),fn=parseFloat(We[ft+8]),Pn=parseFloat(We[ft+9]);!isNaN(un)&&!isNaN(ar)&&ce.push({channel:"R",mean:un,std:ar,filename:zt,row:ur,col:$r}),!isNaN(yn)&&!isNaN(Dr)&&ce.push({channel:"G1",mean:yn,std:Dr,filename:zt,row:ur,col:$r}),!isNaN(Wr)&&!isNaN(fn)&&ce.push({channel:"G2",mean:Wr,std:fn,filename:zt,row:ur,col:$r}),!isNaN(xt)&&!isNaN(Pn)&&ce.push({channel:"B",mean:xt,std:Pn,filename:zt,row:ur,col:$r})}}an(ce),Mn(ue),f(!0)}catch(de){console.error("PTC Parse Error",de),ct("Failed to parse CSV files: "+de.message)}finally{De(null)}},wg=()=>{if(!H||!F)return;const ee=new Blob([H],{type:"image/x-adobe-dng"}),ce=URL.createObjectURL(ee),ue=document.createElement("a");ue.href=ce;const de=F.fileName||"image.dng",Re=de.toLowerCase().endsWith(".dng")?de:de.replace(/\.[^/.]+$/,"")+".dng";ue.download=Re,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(ce)},kg=()=>{gn(1),Ft([]),Fe([])},md=()=>{window.open("https://github.com/y-g-jiang/y-g-jiang.github.io/blob/main/drtest.png","_blank")},Sg=C.useMemo(()=>Ct?Ct.map((ee,ce)=>({...ee,refRGB:bx[ce]||[0,0,0]})):[],[Ct]),jg=()=>{nn(1),Xn([]),_r([])},yd=ee=>{if(Pr===0)return;const ce=[...ea,ee];if(Xn(ce),ce.length===4){nn(0);try{const ue=Lne(ce);_r(ue),_l({useNR:!0,useDeshading:!0,greenOnly:!1})}catch(ue){console.error("Standard Chart Gen Error",ue),ct("Failed to generate chart ROIs.")}}else nn(ue=>ue+1)};let Pl=Z||I;st==="reference"&&te?Pl=te:st==="sampled"&&K&&(Pl=K);const vd=Ce||St;return l.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[l.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:l.jsx(u6,{onLoadImage:ra,onFileSelected:Xt,onGenerateFakeDng:ei,fileName:z?z.name:null,hasGeneratedData:(z==null?void 0:z.name)==="pattern_test.dng",viewMode:st,onSetViewMode:Et,patternPeriod:re,onPatternPeriodChange:ye,fillFactor:be,onFillFactorChange:Y,patternPhase:Me,onPatternPhaseChange:nt,showPatternControls:(z==null?void 0:z.name)==="pattern_test.dng",onOpenAbout:()=>Rt(!0),onShowExif:xg,bridgeStatus:S,onBridgeClick:()=>O(!0),isDrLabOpen:Mt,onToggleDrLab:()=>{Xr(!Mt),gn(0),Ft([]),Fe([]),Pt&&rn(!1),pt&&kt(!1),ze&&cn(!1),Ue(0),Cr([]),_r([]),Tr(!1),nn(0)},isColorLabOpen:pt,onToggleColorLab:()=>{kt(!pt),br([]),Ue(0),Cr([]),Mt&&Xr(!1),Pt&&rn(!1),ze&&cn(!1),_r([]),Tr(!1),nn(0)},isFftLabOpen:Pt,onToggleFftLab:()=>{rn(!Pt),Mt&&Xr(!1),pt&&kt(!1),ze&&cn(!1),Ue(0),Cr([]),_r([]),Tr(!1),nn(0)},isSfrLabOpen:ze,onToggleSfrLab:()=>{cn(!ze),Mt&&Xr(!1),pt&&kt(!1),Pt&&rn(!1),Ue(0),Cr([]),_r([]),Tr(!1),nn(0)},onGenerateTestPic:md,onPTCFilesSelected:bg,onDownloadDng:wg,isThreePlane:J,onOpenDatabase:()=>p(!0),isSidebarOpen:Je,onToggleSidebar:()=>yt(!Je),stretchMultiplier:jr,onStretchMultiplierChange:tn,onStretchDngExport:ua,isRawLoaded:!!L,onOpenSaveZ8:()=>P(!0)})}),l.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[l.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:Vt,children:[vd&&l.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),l.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:Ce||"Processing..."})]}),A.length>1&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-4 bg-white/90 dark:bg-slate-900/90 px-4 py-2 rounded-full shadow-lg border border-gray-200 dark:border-slate-700",children:[l.jsx("button",{onClick:ou,disabled:E===0,className:"p-1 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full disabled:opacity-30",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsxs("span",{className:"font-mono text-xs font-bold text-gray-700 dark:text-gray-300",children:[E+1," / ",A.length]}),l.jsx("button",{onClick:Li,disabled:E===A.length-1,className:"p-1 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full disabled:opacity-30",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),l.jsxs("div",{className:"absolute bottom-4 left-4 z-40 flex flex-col-reverse gap-2 items-start pointer-events-none",children:[je&&V&&l.jsxs("button",{onClick:()=>Se(!1),className:"pointer-events-auto bg-white dark:bg-slate-800 border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] px-3 py-2 text-xs font-bold uppercase tracking-widest hover:translate-x-1 transition-transform flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"ROI Stats"]}),Pe.filter(ee=>ee.isMinimized).map(ee=>l.jsxs("button",{onClick:()=>Gr(ee.id),className:"pointer-events-auto bg-white dark:bg-slate-800 border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] px-3 py-2 text-xs font-bold uppercase tracking-widest hover:translate-x-1 transition-transform flex items-center gap-2",children:[l.jsx("span",{className:`w-2 h-2 rounded-full animate-pulse ${ee.type==="histogram"?"bg-cyan-500":ee.type==="fft"?"bg-purple-500":ee.type==="quant"?"bg-teal-500":"bg-indigo-500"}`}),ee.type==="histogram"?"Histogram":ee.type==="fft"?"Power Spectrum":ee.type==="quant"?"Quantization":"Pearson"]},ee.id))]}),l.jsx(Rre,{isOpen:Ir,onClose:()=>Rt(!1)}),l.jsx(Ire,{isOpen:wt,onClose:()=>ir(!1),data:q,fileName:z?z.name:"",warning:jt}),l.jsx(Fre,{isOpen:u,onClose:()=>f(!1),data:zr,blackLevel:pr,imageHeight:cr,isBGGR:ge,importedMetadata:Kt||void 0,theme:s,initialCameraModel:(q==null?void 0:q.Model)||"",initialISO:(q==null?void 0:q.ISO)||((xd=q==null?void 0:q.ISOSpeedRatings)==null?void 0:xd.toString())||""}),l.jsx(Wre,{isOpen:d,onClose:()=>p(!1),theme:s}),l.jsx(Vre,{isOpen:m,onClose:()=>x(!1),zIndex:200}),l.jsx(Zre,{isOpen:Jt,onClose:vg,patchStats:Sg,initialIsBGGR:ge,sizeRatio:R,onSizeChange:yg}),l.jsx(nne,{isOpen:ze,isSfrLabOpen:ze,onClose:()=>{},rawImageData:L,roi:V?{x:V.x,y:V.y,w:V.width,h:V.height}:null,zIndex:200,onFocus:vi,displaySettings:ie}),l.jsx(ine,{isOpen:b,onClose:()=>k(!1),rawImageData:L,fileName:(z==null?void 0:z.name)||"image.dng",zIndex:300,onFocus:vi}),l.jsx(vne,{isOpen:v,onClose:()=>y(!1),zIndex:350,onFocus:vi}),l.jsx(Sne,{isOpen:w,onClose:()=>P(!1),zIndex:400,onFocus:vi}),l.jsx(os,{isOpen:_t,onClose:()=>or(!1),onConfirm:Kr,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),l.jsx("p",{className:"text-xs text-gray-500"})]})}),l.jsx(os,{isOpen:j,onClose:()=>O(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),O(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[l.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),l.jsx(os,{isOpen:Sr,onClose:()=>et(!1),onConfirm:An,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:l.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),l.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),l.jsx("div",{onClick:()=>Qt(!ht),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${ht?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:l.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${ht?"translate-x-6":""}`})})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),l.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),l.jsx("div",{onClick:()=>mr(!Lt),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Lt?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:l.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Lt?"translate-x-6":""}`})})]})]}),l.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[ht&&!Lt&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!ht&&Lt&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",ht&&Lt&&"Mode: Ready-to-Use. Conventional 16-bit development.",!ht&&!Lt&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!je&&l.jsx(Bne,{stats:V,onClose:()=>{se(null),he(null)},onMinimize:()=>Se(!0),isBGGR:ge,onToggleBGGR:le,onOpenWindow:Ss,displaySettings:ie,zIndex:Ve,onFocus:vi,rawImageData:L}),Pe.map(ee=>{if(ee.isMinimized)return null;const ce=A.find(Re=>Re.id===ee.sessionId),ue=ce==null?void 0:ce.rawImageData;if(!ue)return null;const de={key:ee.id,isOpen:!0,onClose:()=>Qa(ee.id),onMinimize:()=>no(ee.id),rawImageData:ue,roi:ee.roi,isBGGR:ee.isBGGR,zIndex:ee.zIndex,onFocus:()=>To(ee.id),initialPosition:ee.initialPosition,initialInternalState:ee.internalState,onUpdateState:Re=>su(ee.id,Re),stackFiles:ee.stackFiles};return ee.type==="histogram"?l.jsx(Cre,{...de}):ee.type==="fft"?l.jsx(Are,{...de,onUpdateROI:Re=>Xe(ee.id,Re)}):ee.type==="quant"?l.jsx(Tre,{...de}):ee.type==="pearson"?l.jsx(Ere,{...de}):null}),nr&&l.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:l.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[l.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),l.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:nr}),l.jsx("button",{onClick:()=>ct(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!Pl&&!vd&&!nr&&l.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:l.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),l.jsx(f6,{image:Pl,zoom:ke,pan:tt,onPanChange:ae,onZoomChange:hd,onSelectionChange:jl,forcedSelection:me,theme:s,touchAction:it,isMarking:Nr>0||pt&&lr>0||Pr>0,onPointClick:ee=>{Nr>0?dg(ee):pt&&lr>0?mg(ee):Pr>0&&yd(ee)},markers:Wt,gridRects:Ur,colorLabPoints:At,colorLabRects:_e,sfrRects:Lr}),Pr>0&&ea.map((ee,ce)=>l.jsxs("div",{className:"absolute pointer-events-none z-30",style:{left:ee.x*ke+tt.x,top:ee.y*ke+tt.y,transform:"translate(-50%, -50%)"},children:[l.jsx("div",{className:"w-3 h-3 border-2 border-cyan-400 rounded-full flex items-center justify-center bg-transparent",children:l.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})}),l.jsx("div",{className:"text-[10px] font-bold text-cyan-400 absolute top-3 left-1/2 -translate-x-1/2 bg-black/50 px-1 rounded",children:ce+1})]},ce)),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:l.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:l.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),L&&!Nr&&!pt&&!jn&&!Pr&&l.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",l.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),jn&&l.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-red-500 bg-black/80 px-4 py-2 rounded-full border border-red-500 animate-pulse shadow-lg",children:"Manual Batch Marking Active (Shift+Drag to add)"}),Pr>0&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-emerald-500 bg-black/80 px-4 py-2 rounded-full border border-emerald-500 animate-pulse shadow-lg",children:["Calibration: Click Corner ",Pr,"/4"]}),pt&&lr>0&&l.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[At.length===0&&"Click Top-Left Corner of Chart",At.length===1&&"Click Top-Right Corner",At.length===2&&"Click Bottom-Left Corner",At.length===3&&"Click Bottom-Right Corner",At.length===4&&"Processing..."]}),l.jsx(lA,{zoom:ke,onZoomChange:hd,onResetView:()=>{dt(1),ae({x:0,y:0})},touchAction:it,onToggleTouchAction:lg})]}),Je&&l.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:l.jsx(eA,{rawImageData:L,displaySettings:ie,onApplyDisplaySettings:_s,onSetSelection:sg,exifData:q,isBridgeConnected:S.isConnected,isDrLabOpen:Mt,drMarkingStep:Nr,onStartMarking:kg,onGenerateTestPic:md,drRoiSize:rr,onDrRoiSizeChange:mn,drGridRows:Kn,onDrGridRowsChange:ca,drGridCols:wr,onDrGridColsChange:Za,onBatchDrLab:pg,hasDrMarkers:Ur.length>0,isFftLabOpen:Pt,onProcessPair:_n,onProcessBatchDiff:Aa,onProcessStackFft:Ja,onOpenCrossCalc:()=>x(!0),isThreePlane:J,onToggleXTrans:og,xtransPhase:ve,onXTransPhaseChange:dd,isXTransConverted:F==null?void 0:F.isXTransConverted,roiStats:V,isBGGR:ge,isColorLabOpen:pt,colorLabMarkingStep:lr,onStartColorLabMarking:gg,isSfrLabOpen:ze,onOpenDngExport:()=>k(!0),sfrRectCount:Lr.length,isBatchMarkingMode:jn,onToggleBatchMarking:()=>Tr(!jn),onClearBatchMarks:()=>_r([]),onBatchCompute:_l,stdChartStep:Pr,onStartStandardCalibration:jg,onSaveBatchTemplate:ug,onImportBatchTemplate:fg,onBatchTransform:cg,onOpenStackingTool:()=>y(!0)})}),l.jsx(cA,{theme:s,setTheme:c})]})]})},ON=document.getElementById("root");if(!ON)throw new Error("Could not find root element to mount to");const Une=Vm.createRoot(ON);Une.render(l.jsx(Q.StrictMode,{children:l.jsx(zne,{})}));
