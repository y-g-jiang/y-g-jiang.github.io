var BN=Object.defineProperty;var FN=(e,t,r)=>t in e?BN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var kn=(e,t,r)=>FN(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ft(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c5={exports:{}},uh={},u5={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=Symbol.for("react.element"),zN=Symbol.for("react.portal"),UN=Symbol.for("react.fragment"),GN=Symbol.for("react.strict_mode"),WN=Symbol.for("react.profiler"),VN=Symbol.for("react.provider"),HN=Symbol.for("react.context"),XN=Symbol.for("react.forward_ref"),KN=Symbol.for("react.suspense"),YN=Symbol.for("react.memo"),qN=Symbol.for("react.lazy"),$1=Symbol.iterator;function ZN(e){return e===null||typeof e!="object"?null:(e=$1&&e[$1]||e["@@iterator"],typeof e=="function"?e:null)}var f5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d5=Object.assign,h5={};function Hl(e,t,r){this.props=e,this.context=t,this.refs=h5,this.updater=r||f5}Hl.prototype.isReactComponent={};Hl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function p5(){}p5.prototype=Hl.prototype;function gv(e,t,r){this.props=e,this.context=t,this.refs=h5,this.updater=r||f5}var mv=gv.prototype=new p5;mv.constructor=gv;d5(mv,Hl.prototype);mv.isPureReactComponent=!0;var D1=Array.isArray,g5=Object.prototype.hasOwnProperty,yv={current:null},m5={key:!0,ref:!0,__self:!0,__source:!0};function y5(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)g5.call(t,n)&&!m5.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:ff,type:e,key:i,ref:o,props:a,_owner:yv.current}}function QN(e,t){return{$$typeof:ff,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vv(e){return typeof e=="object"&&e!==null&&e.$$typeof===ff}function JN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var I1=/\/+/g;function jp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?JN(""+e.key):t.toString(36)}function hd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ff:case zN:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+jp(o,0):n,D1(a)?(r="",e!=null&&(r=e.replace(I1,"$&/")+"/"),hd(a,t,r,"",function(u){return u})):a!=null&&(vv(a)&&(a=QN(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(I1,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",D1(e))for(var s=0;s<e.length;s++){i=e[s];var l=n+jp(i,s);o+=hd(i,t,r,l,a)}else if(l=ZN(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=n+jp(i,s++),o+=hd(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Tf(e,t,r){if(e==null)return e;var n=[],a=0;return hd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function eO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var On={current:null},pd={transition:null},tO={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:pd,ReactCurrentOwner:yv};function v5(){throw Error("act(...) is not supported in production builds of React.")}dt.Children={map:Tf,forEach:function(e,t,r){Tf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Tf(e,function(){t++}),t},toArray:function(e){return Tf(e,function(t){return t})||[]},only:function(e){if(!vv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};dt.Component=Hl;dt.Fragment=UN;dt.Profiler=WN;dt.PureComponent=gv;dt.StrictMode=GN;dt.Suspense=KN;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tO;dt.act=v5;dt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=d5({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=yv.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)g5.call(t,l)&&!m5.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:ff,type:e.type,key:a,ref:i,props:n,_owner:o}};dt.createContext=function(e){return e={$$typeof:HN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:VN,_context:e},e.Consumer=e};dt.createElement=y5;dt.createFactory=function(e){var t=y5.bind(null,e);return t.type=e,t};dt.createRef=function(){return{current:null}};dt.forwardRef=function(e){return{$$typeof:XN,render:e}};dt.isValidElement=vv;dt.lazy=function(e){return{$$typeof:qN,_payload:{_status:-1,_result:e},_init:eO}};dt.memo=function(e,t){return{$$typeof:YN,type:e,compare:t===void 0?null:t}};dt.startTransition=function(e){var t=pd.transition;pd.transition={};try{e()}finally{pd.transition=t}};dt.unstable_act=v5;dt.useCallback=function(e,t){return On.current.useCallback(e,t)};dt.useContext=function(e){return On.current.useContext(e)};dt.useDebugValue=function(){};dt.useDeferredValue=function(e){return On.current.useDeferredValue(e)};dt.useEffect=function(e,t){return On.current.useEffect(e,t)};dt.useId=function(){return On.current.useId()};dt.useImperativeHandle=function(e,t,r){return On.current.useImperativeHandle(e,t,r)};dt.useInsertionEffect=function(e,t){return On.current.useInsertionEffect(e,t)};dt.useLayoutEffect=function(e,t){return On.current.useLayoutEffect(e,t)};dt.useMemo=function(e,t){return On.current.useMemo(e,t)};dt.useReducer=function(e,t,r){return On.current.useReducer(e,t,r)};dt.useRef=function(e){return On.current.useRef(e)};dt.useState=function(e){return On.current.useState(e)};dt.useSyncExternalStore=function(e,t,r){return On.current.useSyncExternalStore(e,t,r)};dt.useTransition=function(){return On.current.useTransition()};dt.version="18.3.1";u5.exports=dt;var j=u5.exports;const F=Ft(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rO=j,nO=Symbol.for("react.element"),aO=Symbol.for("react.fragment"),iO=Object.prototype.hasOwnProperty,oO=rO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sO={key:!0,ref:!0,__self:!0,__source:!0};function x5(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)iO.call(t,n)&&!sO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:nO,type:e,key:i,ref:o,props:a,_owner:oO.current}}uh.Fragment=aO;uh.jsx=x5;uh.jsxs=x5;c5.exports=uh;var c=c5.exports,Lg={},b5={exports:{}},ia={},w5={exports:{}},k5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,I){var U=T.length;T.push(I);e:for(;0<U;){var Z=U-1>>>1,Y=T[Z];if(0<a(Y,I))T[Z]=I,T[U]=Y,U=Z;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var I=T[0],U=T.pop();if(U!==I){T[0]=U;e:for(var Z=0,Y=T.length,L=Y>>>1;Z<L;){var Q=2*(Z+1)-1,fe=T[Q],J=Q+1,de=T[J];if(0>a(fe,U))J<Y&&0>a(de,fe)?(T[Z]=de,T[J]=U,Z=J):(T[Z]=fe,T[Q]=U,Z=Q);else if(J<Y&&0>a(de,U))T[Z]=de,T[J]=U,Z=J;else break e}}return I}function a(T,I){var U=T.sortIndex-I.sortIndex;return U!==0?U:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],f=1,d=null,h=3,p=!1,y=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=T)n(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=r(u)}}function S(T){if(m=!1,b(T),!y)if(r(l)!==null)y=!0,R(k);else{var I=r(u);I!==null&&A(S,I.startTime-T)}}function k(T,I){y=!1,m&&(m=!1,v(P),P=-1),p=!0;var U=h;try{for(b(I),d=r(l);d!==null&&(!(d.expirationTime>I)||T&&!E());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var Y=Z(d.expirationTime<=I);I=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===r(l)&&n(l),b(I)}else n(l);d=r(l)}if(d!==null)var L=!0;else{var Q=r(u);Q!==null&&A(S,Q.startTime-I),L=!1}return L}finally{d=null,h=U,p=!1}}var w=!1,C=null,P=-1,O=5,N=-1;function E(){return!(e.unstable_now()-N<O)}function M(){if(C!==null){var T=e.unstable_now();N=T;var I=!0;try{I=C(!0,T)}finally{I?_():(w=!1,C=null)}}else w=!1}var _;if(typeof g=="function")_=function(){g(M)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=M,_=function(){D.postMessage(null)}}else _=function(){x(M,0)};function R(T){C=T,w||(w=!0,_())}function A(T,I){P=x(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,R(k))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var U=h;h=I;try{return T()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=h;h=T;try{return I()}finally{h=U}},e.unstable_scheduleCallback=function(T,I,U){var Z=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Z+U:Z):U=Z,T){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=U+Y,T={id:f++,callback:I,priorityLevel:T,startTime:U,expirationTime:Y,sortIndex:-1},U>Z?(T.sortIndex=U,t(u,T),r(l)===null&&T===r(u)&&(m?(v(P),P=-1):m=!0,A(S,U-Z))):(T.sortIndex=Y,t(l,T),y||p||(y=!0,R(k))),T},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(T){var I=h;return function(){var U=h;h=I;try{return T.apply(this,arguments)}finally{h=U}}}})(k5);w5.exports=k5;var lO=w5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cO=j,aa=lO;function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S5=new Set,cu={};function Ps(e,t){hl(e,t),hl(e+"Capture",t)}function hl(e,t){for(cu[e]=t,e=0;e<t.length;e++)S5.add(t[e])}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bg=Object.prototype.hasOwnProperty,uO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R1={},L1={};function fO(e){return Bg.call(L1,e)?!0:Bg.call(R1,e)?!1:uO.test(e)?L1[e]=!0:(R1[e]=!0,!1)}function dO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hO(e,t,r,n){if(t===null||typeof t>"u"||dO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mn(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sn[e]=new Mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sn[t]=new Mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sn[e]=new Mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sn[e]=new Mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sn[e]=new Mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sn[e]=new Mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sn[e]=new Mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sn[e]=new Mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sn[e]=new Mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var xv=/[\-:]([a-z])/g;function bv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xv,bv);sn[t]=new Mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xv,bv);sn[t]=new Mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xv,bv);sn[t]=new Mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sn[e]=new Mn(e,1,!1,e.toLowerCase(),null,!1,!1)});sn.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sn[e]=new Mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function wv(e,t,r,n){var a=sn.hasOwnProperty(t)?sn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hO(t,r,a,n)&&(r=null),n||a===null?fO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ri=cO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ef=Symbol.for("react.element"),zs=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),kv=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),j5=Symbol.for("react.provider"),C5=Symbol.for("react.context"),Sv=Symbol.for("react.forward_ref"),zg=Symbol.for("react.suspense"),Ug=Symbol.for("react.suspense_list"),jv=Symbol.for("react.memo"),Yi=Symbol.for("react.lazy"),P5=Symbol.for("react.offscreen"),B1=Symbol.iterator;function wc(e){return e===null||typeof e!="object"?null:(e=B1&&e[B1]||e["@@iterator"],typeof e=="function"?e:null)}var ur=Object.assign,Cp;function zc(e){if(Cp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Cp=t&&t[1]||""}return`
`+Cp+e}var Pp=!1;function Np(e,t){if(!e||Pp)return"";Pp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{Pp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zc(e):""}function pO(e){switch(e.tag){case 5:return zc(e.type);case 16:return zc("Lazy");case 13:return zc("Suspense");case 19:return zc("SuspenseList");case 0:case 2:case 15:return e=Np(e.type,!1),e;case 11:return e=Np(e.type.render,!1),e;case 1:return e=Np(e.type,!0),e;default:return""}}function Gg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Us:return"Fragment";case zs:return"Portal";case Fg:return"Profiler";case kv:return"StrictMode";case zg:return"Suspense";case Ug:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case C5:return(e.displayName||"Context")+".Consumer";case j5:return(e._context.displayName||"Context")+".Provider";case Sv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jv:return t=e.displayName||null,t!==null?t:Gg(e.type)||"Memo";case Yi:t=e._payload,e=e._init;try{return Gg(e(t))}catch{}}return null}function gO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gg(t);case 8:return t===kv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function N5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mO(e){var t=N5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $f(e){e._valueTracker||(e._valueTracker=mO(e))}function O5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=N5(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Od(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wg(e,t){var r=t.checked;return ur({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function F1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=jo(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function M5(e,t){t=t.checked,t!=null&&wv(e,"checked",t,!1)}function Vg(e,t){M5(e,t);var r=jo(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Hg(e,t.type,jo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function z1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Hg(e,t,r){(t!=="number"||Od(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Uc=Array.isArray;function rl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+jo(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Xg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return ur({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function U1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(pe(92));if(Uc(r)){if(1<r.length)throw Error(pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:jo(r)}}function _5(e,t){var r=jo(t.value),n=jo(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function G1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function A5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Df,T5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Df=Df||document.createElement("div"),Df.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Df.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yO=["Webkit","ms","Moz","O"];Object.keys(Hc).forEach(function(e){yO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hc[t]=Hc[e]})});function E5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hc.hasOwnProperty(e)&&Hc[e]?(""+t).trim():t+"px"}function $5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=E5(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var vO=ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yg(e,t){if(t){if(vO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function qg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zg=null;function Cv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qg=null,nl=null,al=null;function W1(e){if(e=pf(e)){if(typeof Qg!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=gh(t),Qg(e.stateNode,e.type,t))}}function D5(e){nl?al?al.push(e):al=[e]:nl=e}function I5(){if(nl){var e=nl,t=al;if(al=nl=null,W1(e),t)for(e=0;e<t.length;e++)W1(t[e])}}function R5(e,t){return e(t)}function L5(){}var Op=!1;function B5(e,t,r){if(Op)return e(t,r);Op=!0;try{return R5(e,t,r)}finally{Op=!1,(nl!==null||al!==null)&&(L5(),I5())}}function fu(e,t){var r=e.stateNode;if(r===null)return null;var n=gh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(pe(231,t,typeof r));return r}var Jg=!1;if(_i)try{var kc={};Object.defineProperty(kc,"passive",{get:function(){Jg=!0}}),window.addEventListener("test",kc,kc),window.removeEventListener("test",kc,kc)}catch{Jg=!1}function xO(e,t,r,n,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Xc=!1,Md=null,_d=!1,em=null,bO={onError:function(e){Xc=!0,Md=e}};function wO(e,t,r,n,a,i,o,s,l){Xc=!1,Md=null,xO.apply(bO,arguments)}function kO(e,t,r,n,a,i,o,s,l){if(wO.apply(this,arguments),Xc){if(Xc){var u=Md;Xc=!1,Md=null}else throw Error(pe(198));_d||(_d=!0,em=u)}}function Ns(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function F5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function V1(e){if(Ns(e)!==e)throw Error(pe(188))}function SO(e){var t=e.alternate;if(!t){if(t=Ns(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return V1(a),e;if(i===n)return V1(a),t;i=i.sibling}throw Error(pe(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?e:t}function z5(e){return e=SO(e),e!==null?U5(e):null}function U5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U5(e);if(t!==null)return t;e=e.sibling}return null}var G5=aa.unstable_scheduleCallback,H1=aa.unstable_cancelCallback,jO=aa.unstable_shouldYield,CO=aa.unstable_requestPaint,kr=aa.unstable_now,PO=aa.unstable_getCurrentPriorityLevel,Pv=aa.unstable_ImmediatePriority,W5=aa.unstable_UserBlockingPriority,Ad=aa.unstable_NormalPriority,NO=aa.unstable_LowPriority,V5=aa.unstable_IdlePriority,fh=null,ei=null;function OO(e){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(fh,e,void 0,(e.current.flags&128)===128)}catch{}}var za=Math.clz32?Math.clz32:AO,MO=Math.log,_O=Math.LN2;function AO(e){return e>>>=0,e===0?32:31-(MO(e)/_O|0)|0}var If=64,Rf=4194304;function Gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Td(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Gc(s):(i&=o,i!==0&&(n=Gc(i)))}else o=r&~a,o!==0?n=Gc(o):i!==0&&(n=Gc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-za(t),a=1<<r,n|=e[r],t&=~a;return n}function TO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-za(i),s=1<<o,l=a[o];l===-1?(!(s&r)||s&n)&&(a[o]=TO(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function tm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H5(){var e=If;return If<<=1,!(If&4194240)&&(If=64),e}function Mp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function df(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-za(t),e[t]=r}function $O(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-za(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Nv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-za(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Dt=0;function X5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K5,Ov,Y5,q5,Z5,rm=!1,Lf=[],fo=null,ho=null,po=null,du=new Map,hu=new Map,Qi=[],DO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function X1(e,t){switch(e){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":du.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(t.pointerId)}}function Sc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=pf(t),t!==null&&Ov(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function IO(e,t,r,n,a){switch(t){case"focusin":return fo=Sc(fo,e,t,r,n,a),!0;case"dragenter":return ho=Sc(ho,e,t,r,n,a),!0;case"mouseover":return po=Sc(po,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return du.set(i,Sc(du.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,hu.set(i,Sc(hu.get(i)||null,e,t,r,n,a)),!0}return!1}function Q5(e){var t=Ko(e.target);if(t!==null){var r=Ns(t);if(r!==null){if(t=r.tag,t===13){if(t=F5(r),t!==null){e.blockedOn=t,Z5(e.priority,function(){Y5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=nm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Zg=n,r.target.dispatchEvent(n),Zg=null}else return t=pf(r),t!==null&&Ov(t),e.blockedOn=r,!1;t.shift()}return!0}function K1(e,t,r){gd(e)&&r.delete(t)}function RO(){rm=!1,fo!==null&&gd(fo)&&(fo=null),ho!==null&&gd(ho)&&(ho=null),po!==null&&gd(po)&&(po=null),du.forEach(K1),hu.forEach(K1)}function jc(e,t){e.blockedOn===t&&(e.blockedOn=null,rm||(rm=!0,aa.unstable_scheduleCallback(aa.unstable_NormalPriority,RO)))}function pu(e){function t(a){return jc(a,e)}if(0<Lf.length){jc(Lf[0],e);for(var r=1;r<Lf.length;r++){var n=Lf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(fo!==null&&jc(fo,e),ho!==null&&jc(ho,e),po!==null&&jc(po,e),du.forEach(t),hu.forEach(t),r=0;r<Qi.length;r++)n=Qi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qi.length&&(r=Qi[0],r.blockedOn===null);)Q5(r),r.blockedOn===null&&Qi.shift()}var il=Ri.ReactCurrentBatchConfig,Ed=!0;function LO(e,t,r,n){var a=Dt,i=il.transition;il.transition=null;try{Dt=1,Mv(e,t,r,n)}finally{Dt=a,il.transition=i}}function BO(e,t,r,n){var a=Dt,i=il.transition;il.transition=null;try{Dt=4,Mv(e,t,r,n)}finally{Dt=a,il.transition=i}}function Mv(e,t,r,n){if(Ed){var a=nm(e,t,r,n);if(a===null)Bp(e,t,n,$d,r),X1(e,n);else if(IO(a,e,t,r,n))n.stopPropagation();else if(X1(e,n),t&4&&-1<DO.indexOf(e)){for(;a!==null;){var i=pf(a);if(i!==null&&K5(i),i=nm(e,t,r,n),i===null&&Bp(e,t,n,$d,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Bp(e,t,n,null,r)}}var $d=null;function nm(e,t,r,n){if($d=null,e=Cv(n),e=Ko(e),e!==null)if(t=Ns(e),t===null)e=null;else if(r=t.tag,r===13){if(e=F5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $d=e,null}function J5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PO()){case Pv:return 1;case W5:return 4;case Ad:case NO:return 16;case V5:return 536870912;default:return 16}default:return 16}}var to=null,_v=null,md=null;function e4(){if(md)return md;var e,t=_v,r=t.length,n,a="value"in to?to.value:to.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return md=a.slice(e,1<n?1-n:void 0)}function yd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bf(){return!0}function Y1(){return!1}function oa(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bf:Y1,this.isPropagationStopped=Y1,this}return ur(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bf)},persist:function(){},isPersistent:Bf}),t}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Av=oa(Xl),hf=ur({},Xl,{view:0,detail:0}),FO=oa(hf),_p,Ap,Cc,dh=ur({},hf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cc&&(Cc&&e.type==="mousemove"?(_p=e.screenX-Cc.screenX,Ap=e.screenY-Cc.screenY):Ap=_p=0,Cc=e),_p)},movementY:function(e){return"movementY"in e?e.movementY:Ap}}),q1=oa(dh),zO=ur({},dh,{dataTransfer:0}),UO=oa(zO),GO=ur({},hf,{relatedTarget:0}),Tp=oa(GO),WO=ur({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),VO=oa(WO),HO=ur({},Xl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),XO=oa(HO),KO=ur({},Xl,{data:0}),Z1=oa(KO),YO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ZO[e])?!!t[e]:!1}function Tv(){return QO}var JO=ur({},hf,{key:function(e){if(e.key){var t=YO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tv,charCode:function(e){return e.type==="keypress"?yd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),eM=oa(JO),tM=ur({},dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q1=oa(tM),rM=ur({},hf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tv}),nM=oa(rM),aM=ur({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),iM=oa(aM),oM=ur({},dh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sM=oa(oM),lM=[9,13,27,32],Ev=_i&&"CompositionEvent"in window,Kc=null;_i&&"documentMode"in document&&(Kc=document.documentMode);var cM=_i&&"TextEvent"in window&&!Kc,t4=_i&&(!Ev||Kc&&8<Kc&&11>=Kc),J1=" ",eb=!1;function r4(e,t){switch(e){case"keyup":return lM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gs=!1;function uM(e,t){switch(e){case"compositionend":return n4(t);case"keypress":return t.which!==32?null:(eb=!0,J1);case"textInput":return e=t.data,e===J1&&eb?null:e;default:return null}}function fM(e,t){if(Gs)return e==="compositionend"||!Ev&&r4(e,t)?(e=e4(),md=_v=to=null,Gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return t4&&t.locale!=="ko"?null:t.data;default:return null}}var dM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dM[e.type]:t==="textarea"}function a4(e,t,r,n){D5(n),t=Dd(t,"onChange"),0<t.length&&(r=new Av("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yc=null,gu=null;function hM(e){g4(e,0)}function hh(e){var t=Hs(e);if(O5(t))return e}function pM(e,t){if(e==="change")return t}var i4=!1;if(_i){var Ep;if(_i){var $p="oninput"in document;if(!$p){var rb=document.createElement("div");rb.setAttribute("oninput","return;"),$p=typeof rb.oninput=="function"}Ep=$p}else Ep=!1;i4=Ep&&(!document.documentMode||9<document.documentMode)}function nb(){Yc&&(Yc.detachEvent("onpropertychange",o4),gu=Yc=null)}function o4(e){if(e.propertyName==="value"&&hh(gu)){var t=[];a4(t,gu,e,Cv(e)),B5(hM,t)}}function gM(e,t,r){e==="focusin"?(nb(),Yc=t,gu=r,Yc.attachEvent("onpropertychange",o4)):e==="focusout"&&nb()}function mM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hh(gu)}function yM(e,t){if(e==="click")return hh(t)}function vM(e,t){if(e==="input"||e==="change")return hh(t)}function xM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ga=typeof Object.is=="function"?Object.is:xM;function mu(e,t){if(Ga(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Bg.call(t,a)||!Ga(e[a],t[a]))return!1}return!0}function ab(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ib(e,t){var r=ab(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ab(r)}}function s4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?s4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function l4(){for(var e=window,t=Od();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Od(e.document)}return t}function $v(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bM(e){var t=l4(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&s4(r.ownerDocument.documentElement,r)){if(n!==null&&$v(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=ib(r,i);var o=ib(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wM=_i&&"documentMode"in document&&11>=document.documentMode,Ws=null,am=null,qc=null,im=!1;function ob(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;im||Ws==null||Ws!==Od(n)||(n=Ws,"selectionStart"in n&&$v(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),qc&&mu(qc,n)||(qc=n,n=Dd(am,"onSelect"),0<n.length&&(t=new Av("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ws)))}function Ff(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vs={animationend:Ff("Animation","AnimationEnd"),animationiteration:Ff("Animation","AnimationIteration"),animationstart:Ff("Animation","AnimationStart"),transitionend:Ff("Transition","TransitionEnd")},Dp={},c4={};_i&&(c4=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function ph(e){if(Dp[e])return Dp[e];if(!Vs[e])return e;var t=Vs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in c4)return Dp[e]=t[r];return e}var u4=ph("animationend"),f4=ph("animationiteration"),d4=ph("animationstart"),h4=ph("transitionend"),p4=new Map,sb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(e,t){p4.set(e,t),Ps(t,[e])}for(var Ip=0;Ip<sb.length;Ip++){var Rp=sb[Ip],kM=Rp.toLowerCase(),SM=Rp[0].toUpperCase()+Rp.slice(1);Po(kM,"on"+SM)}Po(u4,"onAnimationEnd");Po(f4,"onAnimationIteration");Po(d4,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(h4,"onTransitionEnd");hl("onMouseEnter",["mouseout","mouseover"]);hl("onMouseLeave",["mouseout","mouseover"]);hl("onPointerEnter",["pointerout","pointerover"]);hl("onPointerLeave",["pointerout","pointerover"]);Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wc));function lb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,kO(n,t,void 0,e),e.currentTarget=null}function g4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;lb(a,s,u),i=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;lb(a,s,u),i=l}}}if(_d)throw e=em,_d=!1,em=null,e}function Xt(e,t){var r=t[um];r===void 0&&(r=t[um]=new Set);var n=e+"__bubble";r.has(n)||(m4(t,e,2,!1),r.add(n))}function Lp(e,t,r){var n=0;t&&(n|=4),m4(r,e,n,t)}var zf="_reactListening"+Math.random().toString(36).slice(2);function yu(e){if(!e[zf]){e[zf]=!0,S5.forEach(function(r){r!=="selectionchange"&&(jM.has(r)||Lp(r,!1,e),Lp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zf]||(t[zf]=!0,Lp("selectionchange",!1,t))}}function m4(e,t,r,n){switch(J5(t)){case 1:var a=LO;break;case 4:a=BO;break;default:a=Mv}r=a.bind(null,t,r,e),a=void 0,!Jg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Bp(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=Ko(s),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}s=s.parentNode}}n=n.return}B5(function(){var u=i,f=Cv(r),d=[];e:{var h=p4.get(e);if(h!==void 0){var p=Av,y=e;switch(e){case"keypress":if(yd(r)===0)break e;case"keydown":case"keyup":p=eM;break;case"focusin":y="focus",p=Tp;break;case"focusout":y="blur",p=Tp;break;case"beforeblur":case"afterblur":p=Tp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=q1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=UO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=nM;break;case u4:case f4:case d4:p=VO;break;case h4:p=iM;break;case"scroll":p=FO;break;case"wheel":p=sM;break;case"copy":case"cut":case"paste":p=XO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Q1}var m=(t&4)!==0,x=!m&&e==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var g=u,b;g!==null;){b=g;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=fu(g,v),S!=null&&m.push(vu(g,S,b)))),x)break;g=g.return}0<m.length&&(h=new p(h,y,null,r,f),d.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Zg&&(y=r.relatedTarget||r.fromElement)&&(Ko(y)||y[Ai]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=u,y=y?Ko(y):null,y!==null&&(x=Ns(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(m=q1,S="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=Q1,S="onPointerLeave",v="onPointerEnter",g="pointer"),x=p==null?h:Hs(p),b=y==null?h:Hs(y),h=new m(S,g+"leave",p,r,f),h.target=x,h.relatedTarget=b,S=null,Ko(f)===u&&(m=new m(v,g+"enter",y,r,f),m.target=b,m.relatedTarget=x,S=m),x=S,p&&y)t:{for(m=p,v=y,g=0,b=m;b;b=Ds(b))g++;for(b=0,S=v;S;S=Ds(S))b++;for(;0<g-b;)m=Ds(m),g--;for(;0<b-g;)v=Ds(v),b--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=Ds(m),v=Ds(v)}m=null}else m=null;p!==null&&cb(d,h,p,m,!1),y!==null&&x!==null&&cb(d,x,y,m,!0)}}e:{if(h=u?Hs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=pM;else if(tb(h))if(i4)k=vM;else{k=mM;var w=gM}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=yM);if(k&&(k=k(e,u))){a4(d,k,r,f);break e}w&&w(e,h,u),e==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Hg(h,"number",h.value)}switch(w=u?Hs(u):window,e){case"focusin":(tb(w)||w.contentEditable==="true")&&(Ws=w,am=u,qc=null);break;case"focusout":qc=am=Ws=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,ob(d,r,f);break;case"selectionchange":if(wM)break;case"keydown":case"keyup":ob(d,r,f)}var C;if(Ev)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Gs?r4(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(t4&&r.locale!=="ko"&&(Gs||P!=="onCompositionStart"?P==="onCompositionEnd"&&Gs&&(C=e4()):(to=f,_v="value"in to?to.value:to.textContent,Gs=!0)),w=Dd(u,P),0<w.length&&(P=new Z1(P,e,null,r,f),d.push({event:P,listeners:w}),C?P.data=C:(C=n4(r),C!==null&&(P.data=C)))),(C=cM?uM(e,r):fM(e,r))&&(u=Dd(u,"onBeforeInput"),0<u.length&&(f=new Z1("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=C))}g4(d,t)})}function vu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=fu(e,r),i!=null&&n.unshift(vu(e,i,a)),i=fu(e,t),i!=null&&n.push(vu(e,i,a))),e=e.return}return n}function Ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cb(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,a?(l=fu(r,i),l!=null&&o.unshift(vu(r,l,s))):a||(l=fu(r,i),l!=null&&o.push(vu(r,l,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var CM=/\r\n?/g,PM=/\u0000|\uFFFD/g;function ub(e){return(typeof e=="string"?e:""+e).replace(CM,`
`).replace(PM,"")}function Uf(e,t,r){if(t=ub(t),ub(e)!==t&&r)throw Error(pe(425))}function Id(){}var om=null,sm=null;function lm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cm=typeof setTimeout=="function"?setTimeout:void 0,NM=typeof clearTimeout=="function"?clearTimeout:void 0,fb=typeof Promise=="function"?Promise:void 0,OM=typeof queueMicrotask=="function"?queueMicrotask:typeof fb<"u"?function(e){return fb.resolve(null).then(e).catch(MM)}:cm;function MM(e){setTimeout(function(){throw e})}function Fp(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),pu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);pu(t)}function go(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function db(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),Za="__reactFiber$"+Kl,xu="__reactProps$"+Kl,Ai="__reactContainer$"+Kl,um="__reactEvents$"+Kl,_M="__reactListeners$"+Kl,AM="__reactHandles$"+Kl;function Ko(e){var t=e[Za];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ai]||r[Za]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=db(e);e!==null;){if(r=e[Za])return r;e=db(e)}return t}e=r,r=e.parentNode}return null}function pf(e){return e=e[Za]||e[Ai],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function gh(e){return e[xu]||null}var fm=[],Xs=-1;function No(e){return{current:e}}function qt(e){0>Xs||(e.current=fm[Xs],fm[Xs]=null,Xs--)}function Wt(e,t){Xs++,fm[Xs]=e.current,e.current=t}var Co={},mn=No(Co),Bn=No(!1),us=Co;function pl(e,t){var r=e.type.contextTypes;if(!r)return Co;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fn(e){return e=e.childContextTypes,e!=null}function Rd(){qt(Bn),qt(mn)}function hb(e,t,r){if(mn.current!==Co)throw Error(pe(168));Wt(mn,t),Wt(Bn,r)}function y4(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(pe(108,gO(e)||"Unknown",a));return ur({},r,n)}function Ld(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Co,us=mn.current,Wt(mn,e),Wt(Bn,Bn.current),!0}function pb(e,t,r){var n=e.stateNode;if(!n)throw Error(pe(169));r?(e=y4(e,t,us),n.__reactInternalMemoizedMergedChildContext=e,qt(Bn),qt(mn),Wt(mn,e)):qt(Bn),Wt(Bn,r)}var xi=null,mh=!1,zp=!1;function v4(e){xi===null?xi=[e]:xi.push(e)}function TM(e){mh=!0,v4(e)}function Oo(){if(!zp&&xi!==null){zp=!0;var e=0,t=Dt;try{var r=xi;for(Dt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}xi=null,mh=!1}catch(a){throw xi!==null&&(xi=xi.slice(e+1)),G5(Pv,Oo),a}finally{Dt=t,zp=!1}}return null}var Ks=[],Ys=0,Bd=null,Fd=0,pa=[],ga=0,fs=null,bi=1,wi="";function Go(e,t){Ks[Ys++]=Fd,Ks[Ys++]=Bd,Bd=e,Fd=t}function x4(e,t,r){pa[ga++]=bi,pa[ga++]=wi,pa[ga++]=fs,fs=e;var n=bi;e=wi;var a=32-za(n)-1;n&=~(1<<a),r+=1;var i=32-za(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,bi=1<<32-za(t)+a|r<<a|n,wi=i+e}else bi=1<<i|r<<a|n,wi=e}function Dv(e){e.return!==null&&(Go(e,1),x4(e,1,0))}function Iv(e){for(;e===Bd;)Bd=Ks[--Ys],Ks[Ys]=null,Fd=Ks[--Ys],Ks[Ys]=null;for(;e===fs;)fs=pa[--ga],pa[ga]=null,wi=pa[--ga],pa[ga]=null,bi=pa[--ga],pa[ga]=null}var na=null,ra=null,rr=!1,Ra=null;function b4(e,t){var r=ma(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function gb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,na=e,ra=go(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,na=e,ra=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=fs!==null?{id:bi,overflow:wi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ma(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,na=e,ra=null,!0):!1;default:return!1}}function dm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hm(e){if(rr){var t=ra;if(t){var r=t;if(!gb(e,t)){if(dm(e))throw Error(pe(418));t=go(r.nextSibling);var n=na;t&&gb(e,t)?b4(n,r):(e.flags=e.flags&-4097|2,rr=!1,na=e)}}else{if(dm(e))throw Error(pe(418));e.flags=e.flags&-4097|2,rr=!1,na=e}}}function mb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;na=e}function Gf(e){if(e!==na)return!1;if(!rr)return mb(e),rr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lm(e.type,e.memoizedProps)),t&&(t=ra)){if(dm(e))throw w4(),Error(pe(418));for(;t;)b4(e,t),t=go(t.nextSibling)}if(mb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ra=go(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ra=null}}else ra=na?go(e.stateNode.nextSibling):null;return!0}function w4(){for(var e=ra;e;)e=go(e.nextSibling)}function gl(){ra=na=null,rr=!1}function Rv(e){Ra===null?Ra=[e]:Ra.push(e)}var EM=Ri.ReactCurrentBatchConfig;function Pc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,e))}return e}function Wf(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yb(e){var t=e._init;return t(e._payload)}function k4(e){function t(v,g){if(e){var b=v.deletions;b===null?(v.deletions=[g],v.flags|=16):b.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function a(v,g){return v=xo(v,g),v.index=0,v.sibling=null,v}function i(v,g,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<g?(v.flags|=2,g):b):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,g,b,S){return g===null||g.tag!==6?(g=Kp(b,v.mode,S),g.return=v,g):(g=a(g,b),g.return=v,g)}function l(v,g,b,S){var k=b.type;return k===Us?f(v,g,b.props.children,S,b.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yi&&yb(k)===g.type)?(S=a(g,b.props),S.ref=Pc(v,g,b),S.return=v,S):(S=jd(b.type,b.key,b.props,null,v.mode,S),S.ref=Pc(v,g,b),S.return=v,S)}function u(v,g,b,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Yp(b,v.mode,S),g.return=v,g):(g=a(g,b.children||[]),g.return=v,g)}function f(v,g,b,S,k){return g===null||g.tag!==7?(g=os(b,v.mode,S,k),g.return=v,g):(g=a(g,b),g.return=v,g)}function d(v,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Kp(""+g,v.mode,b),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ef:return b=jd(g.type,g.key,g.props,null,v.mode,b),b.ref=Pc(v,null,g),b.return=v,b;case zs:return g=Yp(g,v.mode,b),g.return=v,g;case Yi:var S=g._init;return d(v,S(g._payload),b)}if(Uc(g)||wc(g))return g=os(g,v.mode,b,null),g.return=v,g;Wf(v,g)}return null}function h(v,g,b,S){var k=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:s(v,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ef:return b.key===k?l(v,g,b,S):null;case zs:return b.key===k?u(v,g,b,S):null;case Yi:return k=b._init,h(v,g,k(b._payload),S)}if(Uc(b)||wc(b))return k!==null?null:f(v,g,b,S,null);Wf(v,b)}return null}function p(v,g,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,s(g,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ef:return v=v.get(S.key===null?b:S.key)||null,l(g,v,S,k);case zs:return v=v.get(S.key===null?b:S.key)||null,u(g,v,S,k);case Yi:var w=S._init;return p(v,g,b,w(S._payload),k)}if(Uc(S)||wc(S))return v=v.get(b)||null,f(g,v,S,k,null);Wf(g,S)}return null}function y(v,g,b,S){for(var k=null,w=null,C=g,P=g=0,O=null;C!==null&&P<b.length;P++){C.index>P?(O=C,C=null):O=C.sibling;var N=h(v,C,b[P],S);if(N===null){C===null&&(C=O);break}e&&C&&N.alternate===null&&t(v,C),g=i(N,g,P),w===null?k=N:w.sibling=N,w=N,C=O}if(P===b.length)return r(v,C),rr&&Go(v,P),k;if(C===null){for(;P<b.length;P++)C=d(v,b[P],S),C!==null&&(g=i(C,g,P),w===null?k=C:w.sibling=C,w=C);return rr&&Go(v,P),k}for(C=n(v,C);P<b.length;P++)O=p(C,v,P,b[P],S),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?P:O.key),g=i(O,g,P),w===null?k=O:w.sibling=O,w=O);return e&&C.forEach(function(E){return t(v,E)}),rr&&Go(v,P),k}function m(v,g,b,S){var k=wc(b);if(typeof k!="function")throw Error(pe(150));if(b=k.call(b),b==null)throw Error(pe(151));for(var w=k=null,C=g,P=g=0,O=null,N=b.next();C!==null&&!N.done;P++,N=b.next()){C.index>P?(O=C,C=null):O=C.sibling;var E=h(v,C,N.value,S);if(E===null){C===null&&(C=O);break}e&&C&&E.alternate===null&&t(v,C),g=i(E,g,P),w===null?k=E:w.sibling=E,w=E,C=O}if(N.done)return r(v,C),rr&&Go(v,P),k;if(C===null){for(;!N.done;P++,N=b.next())N=d(v,N.value,S),N!==null&&(g=i(N,g,P),w===null?k=N:w.sibling=N,w=N);return rr&&Go(v,P),k}for(C=n(v,C);!N.done;P++,N=b.next())N=p(C,v,P,N.value,S),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?P:N.key),g=i(N,g,P),w===null?k=N:w.sibling=N,w=N);return e&&C.forEach(function(M){return t(v,M)}),rr&&Go(v,P),k}function x(v,g,b,S){if(typeof b=="object"&&b!==null&&b.type===Us&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ef:e:{for(var k=b.key,w=g;w!==null;){if(w.key===k){if(k=b.type,k===Us){if(w.tag===7){r(v,w.sibling),g=a(w,b.props.children),g.return=v,v=g;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Yi&&yb(k)===w.type){r(v,w.sibling),g=a(w,b.props),g.ref=Pc(v,w,b),g.return=v,v=g;break e}r(v,w);break}else t(v,w);w=w.sibling}b.type===Us?(g=os(b.props.children,v.mode,S,b.key),g.return=v,v=g):(S=jd(b.type,b.key,b.props,null,v.mode,S),S.ref=Pc(v,g,b),S.return=v,v=S)}return o(v);case zs:e:{for(w=b.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(v,g.sibling),g=a(g,b.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=Yp(b,v.mode,S),g.return=v,v=g}return o(v);case Yi:return w=b._init,x(v,g,w(b._payload),S)}if(Uc(b))return y(v,g,b,S);if(wc(b))return m(v,g,b,S);Wf(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(v,g.sibling),g=a(g,b),g.return=v,v=g):(r(v,g),g=Kp(b,v.mode,S),g.return=v,v=g),o(v)):r(v,g)}return x}var ml=k4(!0),S4=k4(!1),zd=No(null),Ud=null,qs=null,Lv=null;function Bv(){Lv=qs=Ud=null}function Fv(e){var t=zd.current;qt(zd),e._currentValue=t}function pm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ol(e,t){Ud=e,Lv=qs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rn=!0),e.firstContext=null)}function wa(e){var t=e._currentValue;if(Lv!==e)if(e={context:e,memoizedValue:t,next:null},qs===null){if(Ud===null)throw Error(pe(308));qs=e,Ud.dependencies={lanes:0,firstContext:e}}else qs=qs.next=e;return t}var Yo=null;function zv(e){Yo===null?Yo=[e]:Yo.push(e)}function j4(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,zv(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ti(e,n)}function Ti(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qi=!1;function Uv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ci(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,xt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ti(e,r)}return a=n.interleaved,a===null?(t.next=t,zv(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ti(e,r)}function vd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nv(e,r)}}function vb(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gd(e,t,r,n){var a=e.updateQueue;qi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,f=u=l=null,s=i;do{var h=s.lane,p=s.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=e,m=s;switch(h=t,p=r,m.tag){case 1:if(y=m.payload,typeof y=="function"){d=y.call(p,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,h=typeof y=="function"?y.call(p,d,h):y,h==null)break e;d=ur({},d,h);break e;case 2:qi=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=p,l=d):f=f.next=p,o|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;h=s,s=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);hs|=o,e.lanes=o,e.memoizedState=d}}function xb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(pe(191,a));a.call(n)}}}var gf={},ti=No(gf),bu=No(gf),wu=No(gf);function qo(e){if(e===gf)throw Error(pe(174));return e}function Gv(e,t){switch(Wt(wu,t),Wt(bu,e),Wt(ti,gf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kg(t,e)}qt(ti),Wt(ti,t)}function yl(){qt(ti),qt(bu),qt(wu)}function P4(e){qo(wu.current);var t=qo(ti.current),r=Kg(t,e.type);t!==r&&(Wt(bu,e),Wt(ti,r))}function Wv(e){bu.current===e&&(qt(ti),qt(bu))}var lr=No(0);function Wd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Up=[];function Vv(){for(var e=0;e<Up.length;e++)Up[e]._workInProgressVersionPrimary=null;Up.length=0}var xd=Ri.ReactCurrentDispatcher,Gp=Ri.ReactCurrentBatchConfig,ds=0,cr=null,Br=null,Yr=null,Vd=!1,Zc=!1,ku=0,$M=0;function un(){throw Error(pe(321))}function Hv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ga(e[r],t[r]))return!1;return!0}function Xv(e,t,r,n,a,i){if(ds=i,cr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xd.current=e===null||e.memoizedState===null?LM:BM,e=r(n,a),Zc){i=0;do{if(Zc=!1,ku=0,25<=i)throw Error(pe(301));i+=1,Yr=Br=null,t.updateQueue=null,xd.current=FM,e=r(n,a)}while(Zc)}if(xd.current=Hd,t=Br!==null&&Br.next!==null,ds=0,Yr=Br=cr=null,Vd=!1,t)throw Error(pe(300));return e}function Kv(){var e=ku!==0;return ku=0,e}function qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?cr.memoizedState=Yr=e:Yr=Yr.next=e,Yr}function ka(){if(Br===null){var e=cr.alternate;e=e!==null?e.memoizedState:null}else e=Br.next;var t=Yr===null?cr.memoizedState:Yr.next;if(t!==null)Yr=t,Br=e;else{if(e===null)throw Error(pe(310));Br=e,e={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Yr===null?cr.memoizedState=Yr=e:Yr=Yr.next=e}return Yr}function Su(e,t){return typeof t=="function"?t(e):t}function Wp(e){var t=ka(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=Br,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,l=null,u=i;do{var f=u.lane;if((ds&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,cr.lanes|=f,hs|=f}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=s,Ga(n,t.memoizedState)||(Rn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,cr.lanes|=i,hs|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vp(e){var t=ka(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ga(i,t.memoizedState)||(Rn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function N4(){}function O4(e,t){var r=cr,n=ka(),a=t(),i=!Ga(n.memoizedState,a);if(i&&(n.memoizedState=a,Rn=!0),n=n.queue,Yv(A4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Yr!==null&&Yr.memoizedState.tag&1){if(r.flags|=2048,ju(9,_4.bind(null,r,n,a,t),void 0,null),Zr===null)throw Error(pe(349));ds&30||M4(r,t,a)}return a}function M4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=cr.updateQueue,t===null?(t={lastEffect:null,stores:null},cr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function _4(e,t,r,n){t.value=r,t.getSnapshot=n,T4(t)&&E4(e)}function A4(e,t,r){return r(function(){T4(t)&&E4(e)})}function T4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ga(e,r)}catch{return!0}}function E4(e){var t=Ti(e,1);t!==null&&Ua(t,e,1,-1)}function bb(e){var t=qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:e},t.queue=e,e=e.dispatch=RM.bind(null,cr,e),[t.memoizedState,e]}function ju(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=cr.updateQueue,t===null?(t={lastEffect:null,stores:null},cr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function $4(){return ka().memoizedState}function bd(e,t,r,n){var a=qa();cr.flags|=e,a.memoizedState=ju(1|t,r,void 0,n===void 0?null:n)}function yh(e,t,r,n){var a=ka();n=n===void 0?null:n;var i=void 0;if(Br!==null){var o=Br.memoizedState;if(i=o.destroy,n!==null&&Hv(n,o.deps)){a.memoizedState=ju(t,r,i,n);return}}cr.flags|=e,a.memoizedState=ju(1|t,r,i,n)}function wb(e,t){return bd(8390656,8,e,t)}function Yv(e,t){return yh(2048,8,e,t)}function D4(e,t){return yh(4,2,e,t)}function I4(e,t){return yh(4,4,e,t)}function R4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function L4(e,t,r){return r=r!=null?r.concat([e]):null,yh(4,4,R4.bind(null,t,e),r)}function qv(){}function B4(e,t){var r=ka();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Hv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function F4(e,t){var r=ka();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Hv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function z4(e,t,r){return ds&21?(Ga(r,t)||(r=H5(),cr.lanes|=r,hs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=r)}function DM(e,t){var r=Dt;Dt=r!==0&&4>r?r:4,e(!0);var n=Gp.transition;Gp.transition={};try{e(!1),t()}finally{Dt=r,Gp.transition=n}}function U4(){return ka().memoizedState}function IM(e,t,r){var n=vo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},G4(e))W4(t,r);else if(r=j4(e,t,r,n),r!==null){var a=Nn();Ua(r,e,n,a),V4(r,t,n)}}function RM(e,t,r){var n=vo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(G4(e))W4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Ga(s,o)){var l=t.interleaved;l===null?(a.next=a,zv(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=j4(e,t,a,n),r!==null&&(a=Nn(),Ua(r,e,n,a),V4(r,t,n))}}function G4(e){var t=e.alternate;return e===cr||t!==null&&t===cr}function W4(e,t){Zc=Vd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function V4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nv(e,r)}}var Hd={readContext:wa,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},LM={readContext:wa,useCallback:function(e,t){return qa().memoizedState=[e,t===void 0?null:t],e},useContext:wa,useEffect:wb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bd(4194308,4,R4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bd(4194308,4,e,t)},useInsertionEffect:function(e,t){return bd(4,2,e,t)},useMemo:function(e,t){var r=qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=qa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=IM.bind(null,cr,e),[n.memoizedState,e]},useRef:function(e){var t=qa();return e={current:e},t.memoizedState=e},useState:bb,useDebugValue:qv,useDeferredValue:function(e){return qa().memoizedState=e},useTransition:function(){var e=bb(!1),t=e[0];return e=DM.bind(null,e[1]),qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=cr,a=qa();if(rr){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=t(),Zr===null)throw Error(pe(349));ds&30||M4(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,wb(A4.bind(null,n,i,e),[e]),n.flags|=2048,ju(9,_4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=qa(),t=Zr.identifierPrefix;if(rr){var r=wi,n=bi;r=(n&~(1<<32-za(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ku++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$M++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},BM={readContext:wa,useCallback:B4,useContext:wa,useEffect:Yv,useImperativeHandle:L4,useInsertionEffect:D4,useLayoutEffect:I4,useMemo:F4,useReducer:Wp,useRef:$4,useState:function(){return Wp(Su)},useDebugValue:qv,useDeferredValue:function(e){var t=ka();return z4(t,Br.memoizedState,e)},useTransition:function(){var e=Wp(Su)[0],t=ka().memoizedState;return[e,t]},useMutableSource:N4,useSyncExternalStore:O4,useId:U4,unstable_isNewReconciler:!1},FM={readContext:wa,useCallback:B4,useContext:wa,useEffect:Yv,useImperativeHandle:L4,useInsertionEffect:D4,useLayoutEffect:I4,useMemo:F4,useReducer:Vp,useRef:$4,useState:function(){return Vp(Su)},useDebugValue:qv,useDeferredValue:function(e){var t=ka();return Br===null?t.memoizedState=e:z4(t,Br.memoizedState,e)},useTransition:function(){var e=Vp(Su)[0],t=ka().memoizedState;return[e,t]},useMutableSource:N4,useSyncExternalStore:O4,useId:U4,unstable_isNewReconciler:!1};function Ea(e,t){if(e&&e.defaultProps){t=ur({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function gm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ur({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vh={isMounted:function(e){return(e=e._reactInternals)?Ns(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Nn(),a=vo(e),i=Ci(n,a);i.payload=t,r!=null&&(i.callback=r),t=mo(e,i,a),t!==null&&(Ua(t,e,a,n),vd(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Nn(),a=vo(e),i=Ci(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=mo(e,i,a),t!==null&&(Ua(t,e,a,n),vd(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Nn(),n=vo(e),a=Ci(r,n);a.tag=2,t!=null&&(a.callback=t),t=mo(e,a,n),t!==null&&(Ua(t,e,n,r),vd(t,e,n))}};function kb(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!mu(r,n)||!mu(a,i):!0}function H4(e,t,r){var n=!1,a=Co,i=t.contextType;return typeof i=="object"&&i!==null?i=wa(i):(a=Fn(t)?us:mn.current,n=t.contextTypes,i=(n=n!=null)?pl(e,a):Co),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Sb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vh.enqueueReplaceState(t,t.state,null)}function mm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Uv(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=wa(i):(i=Fn(t)?us:mn.current,a.context=pl(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(gm(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&vh.enqueueReplaceState(a,a.state,null),Gd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function vl(e,t){try{var r="",n=t;do r+=pO(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Hp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ym(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var zM=typeof WeakMap=="function"?WeakMap:Map;function X4(e,t,r){r=Ci(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Kd||(Kd=!0,Nm=n),ym(e,t)},r}function K4(e,t,r){r=Ci(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){ym(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ym(e,t),typeof n!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function jb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new zM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=t_.bind(null,e,t,r),t.then(e,e))}function Cb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pb(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ci(-1,1),t.tag=2,mo(r,t,1))),r.lanes|=1),e)}var UM=Ri.ReactCurrentOwner,Rn=!1;function Cn(e,t,r,n){t.child=e===null?S4(t,null,r,n):ml(t,e.child,r,n)}function Nb(e,t,r,n,a){r=r.render;var i=t.ref;return ol(t,a),n=Xv(e,t,r,n,i,a),r=Kv(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ei(e,t,a)):(rr&&r&&Dv(t),t.flags|=1,Cn(e,t,n,a),t.child)}function Ob(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!ax(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Y4(e,t,i,n,a)):(e=jd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:mu,r(o,n)&&e.ref===t.ref)return Ei(e,t,a)}return t.flags|=1,e=xo(i,n),e.ref=t.ref,e.return=t,t.child=e}function Y4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(mu(i,n)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Rn=!0);else return t.lanes=e.lanes,Ei(e,t,a)}return vm(e,t,r,n,a)}function q4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(Qs,Jn),Jn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Wt(Qs,Jn),Jn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Wt(Qs,Jn),Jn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Wt(Qs,Jn),Jn|=n;return Cn(e,t,a,r),t.child}function Z4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function vm(e,t,r,n,a){var i=Fn(r)?us:mn.current;return i=pl(t,i),ol(t,a),r=Xv(e,t,r,n,i,a),n=Kv(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ei(e,t,a)):(rr&&n&&Dv(t),t.flags|=1,Cn(e,t,r,a),t.child)}function Mb(e,t,r,n,a){if(Fn(r)){var i=!0;Ld(t)}else i=!1;if(ol(t,a),t.stateNode===null)wd(e,t),H4(t,r,n),mm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=wa(u):(u=Fn(r)?us:mn.current,u=pl(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&Sb(t,o,n,u),qi=!1;var h=t.memoizedState;o.state=h,Gd(t,n,o,a),l=t.memoizedState,s!==n||h!==l||Bn.current||qi?(typeof f=="function"&&(gm(t,r,f,n),l=t.memoizedState),(s=qi||kb(t,r,s,n,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,C4(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ea(t.type,s),o.props=u,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=wa(l):(l=Fn(r)?us:mn.current,l=pl(t,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||h!==l)&&Sb(t,o,n,l),qi=!1,h=t.memoizedState,o.state=h,Gd(t,n,o,a);var y=t.memoizedState;s!==d||h!==y||Bn.current||qi?(typeof p=="function"&&(gm(t,r,p,n),y=t.memoizedState),(u=qi||kb(t,r,u,n,h,y,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return xm(e,t,r,n,i,a)}function xm(e,t,r,n,a,i){Z4(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&pb(t,r,!1),Ei(e,t,i);n=t.stateNode,UM.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ml(t,e.child,null,i),t.child=ml(t,null,s,i)):Cn(e,t,s,i),t.memoizedState=n.state,a&&pb(t,r,!0),t.child}function Q4(e){var t=e.stateNode;t.pendingContext?hb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hb(e,t.context,!1),Gv(e,t.containerInfo)}function _b(e,t,r,n,a){return gl(),Rv(a),t.flags|=256,Cn(e,t,r,n),t.child}var bm={dehydrated:null,treeContext:null,retryLane:0};function wm(e){return{baseLanes:e,cachePool:null,transitions:null}}function J4(e,t,r){var n=t.pendingProps,a=lr.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Wt(lr,a&1),e===null)return hm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wh(o,n,0,null),e=os(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wm(r),t.memoizedState=bm,e):Zv(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return GM(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=xo(a,l),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=xo(s,i):(i=os(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?wm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=bm,n}return i=e.child,e=i.sibling,n=xo(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Zv(e,t){return t=wh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vf(e,t,r,n){return n!==null&&Rv(n),ml(t,e.child,null,r),e=Zv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GM(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Hp(Error(pe(422))),Vf(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=wh({mode:"visible",children:n.children},a,0,null),i=os(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ml(t,e.child,null,o),t.child.memoizedState=wm(o),t.memoizedState=bm,i);if(!(t.mode&1))return Vf(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(pe(419)),n=Hp(i,n,void 0),Vf(e,t,o,n)}if(s=(o&e.childLanes)!==0,Rn||s){if(n=Zr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ti(e,a),Ua(n,e,a,-1))}return nx(),n=Hp(Error(pe(421))),Vf(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=r_.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ra=go(a.nextSibling),na=t,rr=!0,Ra=null,e!==null&&(pa[ga++]=bi,pa[ga++]=wi,pa[ga++]=fs,bi=e.id,wi=e.overflow,fs=t),t=Zv(t,n.children),t.flags|=4096,t)}function Ab(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),pm(e.return,t,r)}function Xp(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function e3(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Cn(e,t,n.children,r),n=lr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ab(e,r,t);else if(e.tag===19)Ab(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Wt(lr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Wd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Xp(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Wd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Xp(t,!0,r,null,i);break;case"together":Xp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ei(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),hs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,r=xo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=xo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function WM(e,t,r){switch(t.tag){case 3:Q4(t),gl();break;case 5:P4(t);break;case 1:Fn(t.type)&&Ld(t);break;case 4:Gv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Wt(zd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Wt(lr,lr.current&1),t.flags|=128,null):r&t.child.childLanes?J4(e,t,r):(Wt(lr,lr.current&1),e=Ei(e,t,r),e!==null?e.sibling:null);Wt(lr,lr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return e3(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Wt(lr,lr.current),n)break;return null;case 22:case 23:return t.lanes=0,q4(e,t,r)}return Ei(e,t,r)}var t3,km,r3,n3;t3=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};km=function(){};r3=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,qo(ti.current);var i=null;switch(r){case"input":a=Wg(e,a),n=Wg(e,n),i=[];break;case"select":a=ur({},a,{value:void 0}),n=ur({},n,{value:void 0}),i=[];break;case"textarea":a=Xg(e,a),n=Xg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Id)}Yg(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xt("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};n3=function(e,t,r,n){r!==n&&(t.flags|=4)};function Nc(e,t){if(!rr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function fn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function VM(e,t,r){var n=t.pendingProps;switch(Iv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(t),null;case 1:return Fn(t.type)&&Rd(),fn(t),null;case 3:return n=t.stateNode,yl(),qt(Bn),qt(mn),Vv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Gf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ra!==null&&(_m(Ra),Ra=null))),km(e,t),fn(t),null;case 5:Wv(t);var a=qo(wu.current);if(r=t.type,e!==null&&t.stateNode!=null)r3(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(pe(166));return fn(t),null}if(e=qo(ti.current),Gf(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Za]=t,n[xu]=i,e=(t.mode&1)!==0,r){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(a=0;a<Wc.length;a++)Xt(Wc[a],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":F1(n,i),Xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Xt("invalid",n);break;case"textarea":U1(n,i),Xt("invalid",n)}Yg(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&Uf(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Uf(n.textContent,s,e),a=["children",""+s]):cu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Xt("scroll",n)}switch(r){case"input":$f(n),z1(n,i,!0);break;case"textarea":$f(n),G1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Id)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=A5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Za]=t,e[xu]=n,t3(e,t,!1,!1),t.stateNode=e;e:{switch(o=qg(r,n),r){case"dialog":Xt("cancel",e),Xt("close",e),a=n;break;case"iframe":case"object":case"embed":Xt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Wc.length;a++)Xt(Wc[a],e);a=n;break;case"source":Xt("error",e),a=n;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),a=n;break;case"details":Xt("toggle",e),a=n;break;case"input":F1(e,n),a=Wg(e,n),Xt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ur({},n,{value:void 0}),Xt("invalid",e);break;case"textarea":U1(e,n),a=Xg(e,n),Xt("invalid",e);break;default:a=n}Yg(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?$5(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T5(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&uu(e,l):typeof l=="number"&&uu(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Xt("scroll",e):l!=null&&wv(e,i,l,o))}switch(r){case"input":$f(e),z1(e,n,!1);break;case"textarea":$f(e),G1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+jo(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?rl(e,!!n.multiple,i,!1):n.defaultValue!=null&&rl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Id)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fn(t),null;case 6:if(e&&t.stateNode!=null)n3(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(pe(166));if(r=qo(wu.current),qo(ti.current),Gf(t)){if(n=t.stateNode,r=t.memoizedProps,n[Za]=t,(i=n.nodeValue!==r)&&(e=na,e!==null))switch(e.tag){case 3:Uf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Uf(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Za]=t,t.stateNode=n}return fn(t),null;case 13:if(qt(lr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rr&&ra!==null&&t.mode&1&&!(t.flags&128))w4(),gl(),t.flags|=98560,i=!1;else if(i=Gf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(pe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[Za]=t}else gl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fn(t),i=!1}else Ra!==null&&(_m(Ra),Ra=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||lr.current&1?Fr===0&&(Fr=3):nx())),t.updateQueue!==null&&(t.flags|=4),fn(t),null);case 4:return yl(),km(e,t),e===null&&yu(t.stateNode.containerInfo),fn(t),null;case 10:return Fv(t.type._context),fn(t),null;case 17:return Fn(t.type)&&Rd(),fn(t),null;case 19:if(qt(lr),i=t.memoizedState,i===null)return fn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Nc(i,!1);else{if(Fr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wd(e),o!==null){for(t.flags|=128,Nc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Wt(lr,lr.current&1|2),t.child}e=e.sibling}i.tail!==null&&kr()>xl&&(t.flags|=128,n=!0,Nc(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Nc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rr)return fn(t),null}else 2*kr()-i.renderingStartTime>xl&&r!==1073741824&&(t.flags|=128,n=!0,Nc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=kr(),t.sibling=null,r=lr.current,Wt(lr,n?r&1|2:r&1),t):(fn(t),null);case 22:case 23:return rx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Jn&1073741824&&(fn(t),t.subtreeFlags&6&&(t.flags|=8192)):fn(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function HM(e,t){switch(Iv(t),t.tag){case 1:return Fn(t.type)&&Rd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yl(),qt(Bn),qt(mn),Vv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wv(t),null;case 13:if(qt(lr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qt(lr),null;case 4:return yl(),null;case 10:return Fv(t.type._context),null;case 22:case 23:return rx(),null;case 24:return null;default:return null}}var Hf=!1,pn=!1,XM=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Zs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yr(e,t,n)}else r.current=null}function Sm(e,t,r){try{r()}catch(n){yr(e,t,n)}}var Tb=!1;function KM(e,t){if(om=Ed,e=l4(),$v(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===a&&(s=o),h===i&&++f===n&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(sm={focusedElem:e,selectionRange:r},Ed=!1,Pe=t;Pe!==null;)if(t=Pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Pe=e;else for(;Pe!==null;){t=Pe;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,x=y.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ea(t.type,m),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(S){yr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Pe=e;break}Pe=t.return}return y=Tb,Tb=!1,y}function Qc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Sm(t,r,i)}a=a.next}while(a!==n)}}function xh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function jm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function a3(e){var t=e.alternate;t!==null&&(e.alternate=null,a3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Za],delete t[xu],delete t[um],delete t[_M],delete t[AM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i3(e){return e.tag===5||e.tag===3||e.tag===4}function Eb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||i3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Id));else if(n!==4&&(e=e.child,e!==null))for(Cm(e,t,r),e=e.sibling;e!==null;)Cm(e,t,r),e=e.sibling}function Pm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Pm(e,t,r),e=e.sibling;e!==null;)Pm(e,t,r),e=e.sibling}var rn=null,$a=!1;function Xi(e,t,r){for(r=r.child;r!==null;)o3(e,t,r),r=r.sibling}function o3(e,t,r){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(fh,r)}catch{}switch(r.tag){case 5:pn||Zs(r,t);case 6:var n=rn,a=$a;rn=null,Xi(e,t,r),rn=n,$a=a,rn!==null&&($a?(e=rn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):rn.removeChild(r.stateNode));break;case 18:rn!==null&&($a?(e=rn,r=r.stateNode,e.nodeType===8?Fp(e.parentNode,r):e.nodeType===1&&Fp(e,r),pu(e)):Fp(rn,r.stateNode));break;case 4:n=rn,a=$a,rn=r.stateNode.containerInfo,$a=!0,Xi(e,t,r),rn=n,$a=a;break;case 0:case 11:case 14:case 15:if(!pn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Sm(r,t,o),a=a.next}while(a!==n)}Xi(e,t,r);break;case 1:if(!pn&&(Zs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){yr(r,t,s)}Xi(e,t,r);break;case 21:Xi(e,t,r);break;case 22:r.mode&1?(pn=(n=pn)||r.memoizedState!==null,Xi(e,t,r),pn=n):Xi(e,t,r);break;default:Xi(e,t,r)}}function $b(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new XM),t.forEach(function(n){var a=n_.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Aa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:rn=s.stateNode,$a=!1;break e;case 3:rn=s.stateNode.containerInfo,$a=!0;break e;case 4:rn=s.stateNode.containerInfo,$a=!0;break e}s=s.return}if(rn===null)throw Error(pe(160));o3(i,o,a),rn=null,$a=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){yr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)s3(t,e),t=t.sibling}function s3(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Aa(t,e),Ya(e),n&4){try{Qc(3,e,e.return),xh(3,e)}catch(m){yr(e,e.return,m)}try{Qc(5,e,e.return)}catch(m){yr(e,e.return,m)}}break;case 1:Aa(t,e),Ya(e),n&512&&r!==null&&Zs(r,r.return);break;case 5:if(Aa(t,e),Ya(e),n&512&&r!==null&&Zs(r,r.return),e.flags&32){var a=e.stateNode;try{uu(a,"")}catch(m){yr(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&M5(a,i),qg(s,o);var u=qg(s,i);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?$5(a,d):f==="dangerouslySetInnerHTML"?T5(a,d):f==="children"?uu(a,d):wv(a,f,d,u)}switch(s){case"input":Vg(a,i);break;case"textarea":_5(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?rl(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?rl(a,!!i.multiple,i.defaultValue,!0):rl(a,!!i.multiple,i.multiple?[]:"",!1))}a[xu]=i}catch(m){yr(e,e.return,m)}}break;case 6:if(Aa(t,e),Ya(e),n&4){if(e.stateNode===null)throw Error(pe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){yr(e,e.return,m)}}break;case 3:if(Aa(t,e),Ya(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pu(t.containerInfo)}catch(m){yr(e,e.return,m)}break;case 4:Aa(t,e),Ya(e);break;case 13:Aa(t,e),Ya(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ex=kr())),n&4&&$b(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(pn=(u=pn)||f,Aa(t,e),pn=u):Aa(t,e),Ya(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Pe=e,f=e.child;f!==null;){for(d=Pe=f;Pe!==null;){switch(h=Pe,p=h.child,h.tag){case 0:case 11:case 14:case 15:Qc(4,h,h.return);break;case 1:Zs(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){yr(n,r,m)}}break;case 5:Zs(h,h.return);break;case 22:if(h.memoizedState!==null){Ib(d);continue}}p!==null?(p.return=h,Pe=p):Ib(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=E5("display",o))}catch(m){yr(e,e.return,m)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){yr(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Aa(t,e),Ya(e),n&4&&$b(e);break;case 21:break;default:Aa(t,e),Ya(e)}}function Ya(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(i3(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(uu(a,""),n.flags&=-33);var i=Eb(e);Pm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=Eb(e);Cm(e,s,o);break;default:throw Error(pe(161))}}catch(l){yr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function YM(e,t,r){Pe=e,l3(e)}function l3(e,t,r){for(var n=(e.mode&1)!==0;Pe!==null;){var a=Pe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Hf;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||pn;s=Hf;var u=pn;if(Hf=o,(pn=l)&&!u)for(Pe=a;Pe!==null;)o=Pe,l=o.child,o.tag===22&&o.memoizedState!==null?Rb(a):l!==null?(l.return=o,Pe=l):Rb(a);for(;i!==null;)Pe=i,l3(i),i=i.sibling;Pe=a,Hf=s,pn=u}Db(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Pe=i):Db(e)}}function Db(e){for(;Pe!==null;){var t=Pe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pn||xh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!pn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ea(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&xb(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}xb(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&pu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}pn||t.flags&512&&jm(t)}catch(h){yr(t,t.return,h)}}if(t===e){Pe=null;break}if(r=t.sibling,r!==null){r.return=t.return,Pe=r;break}Pe=t.return}}function Ib(e){for(;Pe!==null;){var t=Pe;if(t===e){Pe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Pe=r;break}Pe=t.return}}function Rb(e){for(;Pe!==null;){var t=Pe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xh(4,t)}catch(l){yr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){yr(t,a,l)}}var i=t.return;try{jm(t)}catch(l){yr(t,i,l)}break;case 5:var o=t.return;try{jm(t)}catch(l){yr(t,o,l)}}}catch(l){yr(t,t.return,l)}if(t===e){Pe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Pe=s;break}Pe=t.return}}var qM=Math.ceil,Xd=Ri.ReactCurrentDispatcher,Qv=Ri.ReactCurrentOwner,xa=Ri.ReactCurrentBatchConfig,xt=0,Zr=null,_r=null,on=0,Jn=0,Qs=No(0),Fr=0,Cu=null,hs=0,bh=0,Jv=0,Jc=null,Dn=null,ex=0,xl=1/0,vi=null,Kd=!1,Nm=null,yo=null,Xf=!1,ro=null,Yd=0,eu=0,Om=null,kd=-1,Sd=0;function Nn(){return xt&6?kr():kd!==-1?kd:kd=kr()}function vo(e){return e.mode&1?xt&2&&on!==0?on&-on:EM.transition!==null?(Sd===0&&(Sd=H5()),Sd):(e=Dt,e!==0||(e=window.event,e=e===void 0?16:J5(e.type)),e):1}function Ua(e,t,r,n){if(50<eu)throw eu=0,Om=null,Error(pe(185));df(e,r,n),(!(xt&2)||e!==Zr)&&(e===Zr&&(!(xt&2)&&(bh|=r),Fr===4&&Ji(e,on)),zn(e,n),r===1&&xt===0&&!(t.mode&1)&&(xl=kr()+500,mh&&Oo()))}function zn(e,t){var r=e.callbackNode;EO(e,t);var n=Td(e,e===Zr?on:0);if(n===0)r!==null&&H1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&H1(r),t===1)e.tag===0?TM(Lb.bind(null,e)):v4(Lb.bind(null,e)),OM(function(){!(xt&6)&&Oo()}),r=null;else{switch(X5(n)){case 1:r=Pv;break;case 4:r=W5;break;case 16:r=Ad;break;case 536870912:r=V5;break;default:r=Ad}r=m3(r,c3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function c3(e,t){if(kd=-1,Sd=0,xt&6)throw Error(pe(327));var r=e.callbackNode;if(sl()&&e.callbackNode!==r)return null;var n=Td(e,e===Zr?on:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=qd(e,n);else{t=n;var a=xt;xt|=2;var i=f3();(Zr!==e||on!==t)&&(vi=null,xl=kr()+500,is(e,t));do try{JM();break}catch(s){u3(e,s)}while(!0);Bv(),Xd.current=i,xt=a,_r!==null?t=0:(Zr=null,on=0,t=Fr)}if(t!==0){if(t===2&&(a=tm(e),a!==0&&(n=a,t=Mm(e,a))),t===1)throw r=Cu,is(e,0),Ji(e,n),zn(e,kr()),r;if(t===6)Ji(e,n);else{if(a=e.current.alternate,!(n&30)&&!ZM(a)&&(t=qd(e,n),t===2&&(i=tm(e),i!==0&&(n=i,t=Mm(e,i))),t===1))throw r=Cu,is(e,0),Ji(e,n),zn(e,kr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(pe(345));case 2:Wo(e,Dn,vi);break;case 3:if(Ji(e,n),(n&130023424)===n&&(t=ex+500-kr(),10<t)){if(Td(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Nn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=cm(Wo.bind(null,e,Dn,vi),t);break}Wo(e,Dn,vi);break;case 4:if(Ji(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-za(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=kr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qM(n/1960))-n,10<n){e.timeoutHandle=cm(Wo.bind(null,e,Dn,vi),n);break}Wo(e,Dn,vi);break;case 5:Wo(e,Dn,vi);break;default:throw Error(pe(329))}}}return zn(e,kr()),e.callbackNode===r?c3.bind(null,e):null}function Mm(e,t){var r=Jc;return e.current.memoizedState.isDehydrated&&(is(e,t).flags|=256),e=qd(e,t),e!==2&&(t=Dn,Dn=r,t!==null&&_m(t)),e}function _m(e){Dn===null?Dn=e:Dn.push.apply(Dn,e)}function ZM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ga(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ji(e,t){for(t&=~Jv,t&=~bh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-za(t),n=1<<r;e[r]=-1,t&=~n}}function Lb(e){if(xt&6)throw Error(pe(327));sl();var t=Td(e,0);if(!(t&1))return zn(e,kr()),null;var r=qd(e,t);if(e.tag!==0&&r===2){var n=tm(e);n!==0&&(t=n,r=Mm(e,n))}if(r===1)throw r=Cu,is(e,0),Ji(e,t),zn(e,kr()),r;if(r===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wo(e,Dn,vi),zn(e,kr()),null}function tx(e,t){var r=xt;xt|=1;try{return e(t)}finally{xt=r,xt===0&&(xl=kr()+500,mh&&Oo())}}function ps(e){ro!==null&&ro.tag===0&&!(xt&6)&&sl();var t=xt;xt|=1;var r=xa.transition,n=Dt;try{if(xa.transition=null,Dt=1,e)return e()}finally{Dt=n,xa.transition=r,xt=t,!(xt&6)&&Oo()}}function rx(){Jn=Qs.current,qt(Qs)}function is(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,NM(r)),_r!==null)for(r=_r.return;r!==null;){var n=r;switch(Iv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rd();break;case 3:yl(),qt(Bn),qt(mn),Vv();break;case 5:Wv(n);break;case 4:yl();break;case 13:qt(lr);break;case 19:qt(lr);break;case 10:Fv(n.type._context);break;case 22:case 23:rx()}r=r.return}if(Zr=e,_r=e=xo(e.current,null),on=Jn=t,Fr=0,Cu=null,Jv=bh=hs=0,Dn=Jc=null,Yo!==null){for(t=0;t<Yo.length;t++)if(r=Yo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Yo=null}return e}function u3(e,t){do{var r=_r;try{if(Bv(),xd.current=Hd,Vd){for(var n=cr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Vd=!1}if(ds=0,Yr=Br=cr=null,Zc=!1,ku=0,Qv.current=null,r===null||r.return===null){Fr=1,Cu=t,_r=null;break}e:{var i=e,o=r.return,s=r,l=t;if(t=on,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Cb(o);if(p!==null){p.flags&=-257,Pb(p,o,s,i,t),p.mode&1&&jb(i,u,t),t=p,l=u;var y=t.updateQueue;if(y===null){var m=new Set;m.add(l),t.updateQueue=m}else y.add(l);break e}else{if(!(t&1)){jb(i,u,t),nx();break e}l=Error(pe(426))}}else if(rr&&s.mode&1){var x=Cb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Pb(x,o,s,i,t),Rv(vl(l,s));break e}}i=l=vl(l,s),Fr!==4&&(Fr=2),Jc===null?Jc=[i]:Jc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=X4(i,l,t);vb(i,v);break e;case 1:s=l;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(yo===null||!yo.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=K4(i,s,t);vb(i,S);break e}}i=i.return}while(i!==null)}h3(r)}catch(k){t=k,_r===r&&r!==null&&(_r=r=r.return);continue}break}while(!0)}function f3(){var e=Xd.current;return Xd.current=Hd,e===null?Hd:e}function nx(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Zr===null||!(hs&268435455)&&!(bh&268435455)||Ji(Zr,on)}function qd(e,t){var r=xt;xt|=2;var n=f3();(Zr!==e||on!==t)&&(vi=null,is(e,t));do try{QM();break}catch(a){u3(e,a)}while(!0);if(Bv(),xt=r,Xd.current=n,_r!==null)throw Error(pe(261));return Zr=null,on=0,Fr}function QM(){for(;_r!==null;)d3(_r)}function JM(){for(;_r!==null&&!jO();)d3(_r)}function d3(e){var t=g3(e.alternate,e,Jn);e.memoizedProps=e.pendingProps,t===null?h3(e):_r=t,Qv.current=null}function h3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=HM(r,t),r!==null){r.flags&=32767,_r=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fr=6,_r=null;return}}else if(r=VM(r,t,Jn),r!==null){_r=r;return}if(t=t.sibling,t!==null){_r=t;return}_r=t=e}while(t!==null);Fr===0&&(Fr=5)}function Wo(e,t,r){var n=Dt,a=xa.transition;try{xa.transition=null,Dt=1,e_(e,t,r,n)}finally{xa.transition=a,Dt=n}return null}function e_(e,t,r,n){do sl();while(ro!==null);if(xt&6)throw Error(pe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if($O(e,i),e===Zr&&(_r=Zr=null,on=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xf||(Xf=!0,m3(Ad,function(){return sl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=xa.transition,xa.transition=null;var o=Dt;Dt=1;var s=xt;xt|=4,Qv.current=null,KM(e,r),s3(r,e),bM(sm),Ed=!!om,sm=om=null,e.current=r,YM(r),CO(),xt=s,Dt=o,xa.transition=i}else e.current=r;if(Xf&&(Xf=!1,ro=e,Yd=a),i=e.pendingLanes,i===0&&(yo=null),OO(r.stateNode),zn(e,kr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Kd)throw Kd=!1,e=Nm,Nm=null,e;return Yd&1&&e.tag!==0&&sl(),i=e.pendingLanes,i&1?e===Om?eu++:(eu=0,Om=e):eu=0,Oo(),null}function sl(){if(ro!==null){var e=X5(Yd),t=xa.transition,r=Dt;try{if(xa.transition=null,Dt=16>e?16:e,ro===null)var n=!1;else{if(e=ro,ro=null,Yd=0,xt&6)throw Error(pe(331));var a=xt;for(xt|=4,Pe=e.current;Pe!==null;){var i=Pe,o=i.child;if(Pe.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Pe=u;Pe!==null;){var f=Pe;switch(f.tag){case 0:case 11:case 15:Qc(8,f,i)}var d=f.child;if(d!==null)d.return=f,Pe=d;else for(;Pe!==null;){f=Pe;var h=f.sibling,p=f.return;if(a3(f),f===u){Pe=null;break}if(h!==null){h.return=p,Pe=h;break}Pe=p}}}var y=i.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}Pe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Pe=o;else e:for(;Pe!==null;){if(i=Pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Pe=v;break e}Pe=i.return}}var g=e.current;for(Pe=g;Pe!==null;){o=Pe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Pe=b;else e:for(o=g;Pe!==null;){if(s=Pe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:xh(9,s)}}catch(k){yr(s,s.return,k)}if(s===o){Pe=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Pe=S;break e}Pe=s.return}}if(xt=a,Oo(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(fh,e)}catch{}n=!0}return n}finally{Dt=r,xa.transition=t}}return!1}function Bb(e,t,r){t=vl(r,t),t=X4(e,t,1),e=mo(e,t,1),t=Nn(),e!==null&&(df(e,1,t),zn(e,t))}function yr(e,t,r){if(e.tag===3)Bb(e,e,r);else for(;t!==null;){if(t.tag===3){Bb(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yo===null||!yo.has(n))){e=vl(r,e),e=K4(t,e,1),t=mo(t,e,1),e=Nn(),t!==null&&(df(t,1,e),zn(t,e));break}}t=t.return}}function t_(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Nn(),e.pingedLanes|=e.suspendedLanes&r,Zr===e&&(on&r)===r&&(Fr===4||Fr===3&&(on&130023424)===on&&500>kr()-ex?is(e,0):Jv|=r),zn(e,t)}function p3(e,t){t===0&&(e.mode&1?(t=Rf,Rf<<=1,!(Rf&130023424)&&(Rf=4194304)):t=1);var r=Nn();e=Ti(e,t),e!==null&&(df(e,t,r),zn(e,r))}function r_(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),p3(e,r)}function n_(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(t),p3(e,r)}var g3;g3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bn.current)Rn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Rn=!1,WM(e,t,r);Rn=!!(e.flags&131072)}else Rn=!1,rr&&t.flags&1048576&&x4(t,Fd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;wd(e,t),e=t.pendingProps;var a=pl(t,mn.current);ol(t,r),a=Xv(null,t,n,e,a,r);var i=Kv();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fn(n)?(i=!0,Ld(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Uv(t),a.updater=vh,t.stateNode=a,a._reactInternals=t,mm(t,n,e,r),t=xm(null,t,n,!0,i,r)):(t.tag=0,rr&&i&&Dv(t),Cn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(wd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=i_(n),e=Ea(n,e),a){case 0:t=vm(null,t,n,e,r);break e;case 1:t=Mb(null,t,n,e,r);break e;case 11:t=Nb(null,t,n,e,r);break e;case 14:t=Ob(null,t,n,Ea(n.type,e),r);break e}throw Error(pe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),vm(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),Mb(e,t,n,a,r);case 3:e:{if(Q4(t),e===null)throw Error(pe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,C4(e,t),Gd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=vl(Error(pe(423)),t),t=_b(e,t,n,r,a);break e}else if(n!==a){a=vl(Error(pe(424)),t),t=_b(e,t,n,r,a);break e}else for(ra=go(t.stateNode.containerInfo.firstChild),na=t,rr=!0,Ra=null,r=S4(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gl(),n===a){t=Ei(e,t,r);break e}Cn(e,t,n,r)}t=t.child}return t;case 5:return P4(t),e===null&&hm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,lm(n,a)?o=null:i!==null&&lm(n,i)&&(t.flags|=32),Z4(e,t),Cn(e,t,o,r),t.child;case 6:return e===null&&hm(t),null;case 13:return J4(e,t,r);case 4:return Gv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ml(t,null,n,r):Cn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),Nb(e,t,n,a,r);case 7:return Cn(e,t,t.pendingProps,r),t.child;case 8:return Cn(e,t,t.pendingProps.children,r),t.child;case 12:return Cn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Wt(zd,n._currentValue),n._currentValue=o,i!==null)if(Ga(i.value,o)){if(i.children===a.children&&!Bn.current){t=Ei(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Ci(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),pm(i.return,r,t),s.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(pe(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),pm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Cn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ol(t,r),a=wa(a),n=n(a),t.flags|=1,Cn(e,t,n,r),t.child;case 14:return n=t.type,a=Ea(n,t.pendingProps),a=Ea(n.type,a),Ob(e,t,n,a,r);case 15:return Y4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ea(n,a),wd(e,t),t.tag=1,Fn(n)?(e=!0,Ld(t)):e=!1,ol(t,r),H4(t,n,a),mm(t,n,a,r),xm(null,t,n,!0,e,r);case 19:return e3(e,t,r);case 22:return q4(e,t,r)}throw Error(pe(156,t.tag))};function m3(e,t){return G5(e,t)}function a_(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ma(e,t,r,n){return new a_(e,t,r,n)}function ax(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i_(e){if(typeof e=="function")return ax(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sv)return 11;if(e===jv)return 14}return 2}function xo(e,t){var r=e.alternate;return r===null?(r=ma(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function jd(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")ax(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Us:return os(r.children,a,i,t);case kv:o=8,a|=8;break;case Fg:return e=ma(12,r,t,a|2),e.elementType=Fg,e.lanes=i,e;case zg:return e=ma(13,r,t,a),e.elementType=zg,e.lanes=i,e;case Ug:return e=ma(19,r,t,a),e.elementType=Ug,e.lanes=i,e;case P5:return wh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j5:o=10;break e;case C5:o=9;break e;case Sv:o=11;break e;case jv:o=14;break e;case Yi:o=16,n=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=ma(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function os(e,t,r,n){return e=ma(7,e,n,t),e.lanes=r,e}function wh(e,t,r,n){return e=ma(22,e,n,t),e.elementType=P5,e.lanes=r,e.stateNode={isHidden:!1},e}function Kp(e,t,r){return e=ma(6,e,null,t),e.lanes=r,e}function Yp(e,t,r){return t=ma(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function o_(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mp(0),this.expirationTimes=Mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ix(e,t,r,n,a,i,o,s,l){return e=new o_(e,t,r,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ma(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uv(i),e}function s_(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function y3(e){if(!e)return Co;e=e._reactInternals;e:{if(Ns(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var r=e.type;if(Fn(r))return y4(e,r,t)}return t}function v3(e,t,r,n,a,i,o,s,l){return e=ix(r,n,!0,e,a,i,o,s,l),e.context=y3(null),r=e.current,n=Nn(),a=vo(r),i=Ci(n,a),i.callback=t??null,mo(r,i,a),e.current.lanes=a,df(e,a,n),zn(e,n),e}function kh(e,t,r,n){var a=t.current,i=Nn(),o=vo(a);return r=y3(r),t.context===null?t.context=r:t.pendingContext=r,t=Ci(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=mo(a,t,o),e!==null&&(Ua(e,a,o,i),vd(e,a,o)),o}function Zd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ox(e,t){Fb(e,t),(e=e.alternate)&&Fb(e,t)}function l_(){return null}var x3=typeof reportError=="function"?reportError:function(e){console.error(e)};function sx(e){this._internalRoot=e}Sh.prototype.render=sx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));kh(e,t,null,null)};Sh.prototype.unmount=sx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ps(function(){kh(null,e,null,null)}),t[Ai]=null}};function Sh(e){this._internalRoot=e}Sh.prototype.unstable_scheduleHydration=function(e){if(e){var t=q5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qi.length&&t!==0&&t<Qi[r].priority;r++);Qi.splice(r,0,e),r===0&&Q5(e)}};function lx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zb(){}function c_(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Zd(o);i.call(u)}}var o=v3(t,n,e,0,null,!1,!1,"",zb);return e._reactRootContainer=o,e[Ai]=o.current,yu(e.nodeType===8?e.parentNode:e),ps(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=Zd(l);s.call(u)}}var l=ix(e,0,!1,null,null,!1,!1,"",zb);return e._reactRootContainer=l,e[Ai]=l.current,yu(e.nodeType===8?e.parentNode:e),ps(function(){kh(t,l,r,n)}),l}function Ch(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Zd(o);s.call(l)}}kh(t,o,e,a)}else o=c_(r,t,e,a,n);return Zd(o)}K5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Gc(t.pendingLanes);r!==0&&(Nv(t,r|1),zn(t,kr()),!(xt&6)&&(xl=kr()+500,Oo()))}break;case 13:ps(function(){var n=Ti(e,1);if(n!==null){var a=Nn();Ua(n,e,1,a)}}),ox(e,1)}};Ov=function(e){if(e.tag===13){var t=Ti(e,134217728);if(t!==null){var r=Nn();Ua(t,e,134217728,r)}ox(e,134217728)}};Y5=function(e){if(e.tag===13){var t=vo(e),r=Ti(e,t);if(r!==null){var n=Nn();Ua(r,e,t,n)}ox(e,t)}};q5=function(){return Dt};Z5=function(e,t){var r=Dt;try{return Dt=e,t()}finally{Dt=r}};Qg=function(e,t,r){switch(t){case"input":if(Vg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=gh(n);if(!a)throw Error(pe(90));O5(n),Vg(n,a)}}}break;case"textarea":_5(e,r);break;case"select":t=r.value,t!=null&&rl(e,!!r.multiple,t,!1)}};R5=tx;L5=ps;var u_={usingClientEntryPoint:!1,Events:[pf,Hs,gh,D5,I5,tx]},Oc={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f_={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=z5(e),e===null?null:e.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||l_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{fh=Kf.inject(f_),ei=Kf}catch{}}ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u_;ia.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lx(t))throw Error(pe(200));return s_(e,t,null,r)};ia.createRoot=function(e,t){if(!lx(e))throw Error(pe(299));var r=!1,n="",a=x3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ix(e,1,!1,null,null,r,!1,n,a),e[Ai]=t.current,yu(e.nodeType===8?e.parentNode:e),new sx(t)};ia.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=z5(t),e=e===null?null:e.stateNode,e};ia.flushSync=function(e){return ps(e)};ia.hydrate=function(e,t,r){if(!jh(t))throw Error(pe(200));return Ch(null,e,t,!0,r)};ia.hydrateRoot=function(e,t,r){if(!lx(e))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=x3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=v3(t,null,e,1,r??null,a,!1,i,o),e[Ai]=t.current,yu(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Sh(t)};ia.render=function(e,t,r){if(!jh(t))throw Error(pe(200));return Ch(null,e,t,!1,r)};ia.unmountComponentAtNode=function(e){if(!jh(e))throw Error(pe(40));return e._reactRootContainer?(ps(function(){Ch(null,null,e,!1,function(){e._reactRootContainer=null,e[Ai]=null})}),!0):!1};ia.unstable_batchedUpdates=tx;ia.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!jh(r))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return Ch(e,t,r,!1,n)};ia.version="18.3.1-next-f1338f8080-20240426";function b3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b3)}catch(e){console.error(e)}}b3(),b5.exports=ia;var d_=b5.exports,Ub=d_;Lg.createRoot=Ub.createRoot,Lg.hydrateRoot=Ub.hydrateRoot;const bo=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[c.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,h_=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:l,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:h,onOpenAbout:p,onShowExif:y,bridgeStatus:m,onBridgeClick:x,isDrLabOpen:v,onToggleDrLab:g,isColorLabOpen:b,onToggleColorLab:S,isFftLabOpen:k,onToggleFftLab:w,isSfrLabOpen:C,onToggleSfrLab:P,onGenerateTestPic:O,onPTCFilesSelected:N,onDownloadDng:E,isThreePlane:M,onOpenDatabase:_,isSidebarOpen:$,onToggleSidebar:D})=>{const R=j.useRef(null),A=j.useRef(null),[T,I]=j.useState(!1),[U,Z]=j.useState(!1),[Y,L]=j.useState(!1),[Q,fe]=j.useState("direct"),J=j.useRef(null),de=j.useRef(null);j.useEffect(()=>{const V=be=>{J.current&&!J.current.contains(be.target)&&Z(!1),de.current&&!de.current.contains(be.target)&&L(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const H=V=>{var be,ge;Z(!1),V==="direct"?(fe("direct"),(be=R.current)==null||be.click()):!m.isConnected||!m.hasDngConverter?I(!0):(fe("convert"),(ge=R.current)==null||ge.click())},X=V=>{var ge;const be=(ge=V.target.files)==null?void 0:ge[0];be&&e(be,Q),V.target.value=""},ce=V=>{V.target.files&&V.target.files.length>0&&N(V.target.files),V.target.value=""},ie=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return c.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[c.jsx(bo,{isOpen:T,onClose:()=>I(!1),onConfirm:()=>I(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),M&&c.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:m.isConnected?void 0:x,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${m.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:m.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[c.jsx("span",{className:`w-2 h-2 ${m.isConnected?"bg-emerald-600":"bg-pink-600"}`}),m.isConnected?`JiangBridge Ready ${m.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),v&&c.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),b&&c.jsxs("button",{onClick:S,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),k&&c.jsxs("button",{onClick:w,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),C&&c.jsxs("button",{onClick:P,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&c.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[c.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),c.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),c.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),ie&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:V=>s(parseFloat(V.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:V=>{const be=parseFloat(V.target.value);isNaN(be)||s(be)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:V=>d(parseFloat(V.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:V=>{const be=parseFloat(V.target.value);isNaN(be)||d(be)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:l*100,onChange:V=>u(parseInt(V.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(l*100),onChange:V=>{const be=parseInt(V.target.value);isNaN(be)||u(Math.min(100,Math.max(1,be))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),c.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),c.jsxs("button",{onClick:E,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[c.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),c.jsx("input",{type:"file",ref:R,onChange:X,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("input",{type:"file",ref:A,onChange:ce,className:"hidden",multiple:!0,accept:".csv"}),c.jsxs("div",{className:"relative inline-block text-left",ref:de,children:[c.jsxs("button",{onClick:()=>L(!Y),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${Y?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Y&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{L(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:"Generate Pattern DNG"})]}),c.jsxs("button",{onClick:()=>{L(!1),v||g(),k&&w(),b&&S&&S(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsxs("span",{children:["DR Lab ",v?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{L(!1),S&&!b&&S(),v&&g(),k&&w(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${b?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:["Color Lab ",b?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{L(!1),P&&!C&&P(),v&&g(),k&&w(),b&&S&&S()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${C?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsxs("span",{children:["SFR Lab ",C?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{L(!1),k||w(),v&&g(),b&&S&&S(),C&&P&&P()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${k?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsxs("span",{children:["Stack Lab ",k?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{var V;L(!1),(V=A.current)==null||V.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),c.jsx("span",{children:"Generate PTC & TargetSNR"})]}),c.jsxs("button",{onClick:()=>{L(!1),window.open("https://y-g-jiang.github.io/CP.html","_blank")},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-teal-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("span",{children:"Generate MTF Contour"})]})]})})]}),c.jsxs("div",{className:"relative inline-block text-left",ref:J,children:[c.jsxs("button",{onClick:()=>Z(!U),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${U?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),U&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>H("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.jsx("span",{children:"Load Image (Direct)"})]}),c.jsxs("button",{onClick:()=>H("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&y&&c.jsxs("button",{onClick:y,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),c.jsx("button",{onClick:p,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),c.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),c.jsxs("button",{onClick:D,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${$?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:$?"Hide Control Panel":"Show Control Panel",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:$?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),c.jsx("span",{className:"hidden sm:inline",children:$?"Hide Panel":"Show Panel"})]})]})]})},p_=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:l="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:h=[],colorLabPoints:p=[],colorLabRects:y=[],sfrRects:m=[]})=>{var J;const x=j.useRef(null),v=j.useRef(document.createElement("canvas")),[g,b]=j.useState(!1),[S,k]=j.useState({x:0,y:0}),w=j.useRef(null),C=j.useRef(null),P=j.useRef(null),[O,N]=j.useState(!1),[E,M]=j.useState(null),[_,$]=j.useState(null);j.useEffect(()=>{o!==void 0&&$(o)},[o]);const D=j.useCallback(()=>{const de=x.current,H=de==null?void 0:de.getContext("2d");return{canvas:de,ctx:H}},[]);j.useEffect(()=>{const de=v.current,H=de.getContext("2d");if(!e||!H)return;let X=0,ce=0;e instanceof ImageData?(X=e.width,ce=e.height):e instanceof HTMLImageElement&&(X=e.naturalWidth,ce=e.naturalHeight),!(X===0||ce===0)&&((de.width!==X||de.height!==ce)&&(de.width=X,de.height=ce),e instanceof ImageData?H.putImageData(e,0,0):(H.clearRect(0,0,X,ce),H.drawImage(e,0,0)))},[e]);const R=j.useCallback(()=>{const{canvas:de,ctx:H}=D();if(!(!de||!H||!e)){if(H.setTransform(1,0,0,1,0,0),H.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",H.fillRect(0,0,de.width,de.height),H.setTransform(t,0,0,t,r.x,r.y),v.current.width>0&&(H.imageSmoothingEnabled=!1,H.drawImage(v.current,0,0)),_){H.strokeStyle="#06b6d4",H.lineWidth=1/t,H.fillStyle="rgba(6, 182, 212, 0.2)",H.beginPath(),H.rect(_.x,_.y,_.w,_.h),H.fill(),H.stroke(),H.save(),H.fillStyle="#fff";const X=Math.max(10,14/t);H.font=`${X}px monospace`,H.shadowColor="rgba(0,0,0,0.8)",H.shadowBlur=4,H.shadowOffsetX=1,H.shadowOffsetY=1,H.fillText(`${Math.round(_.w)}x${Math.round(_.h)}`,_.x,_.y-5/t),H.restore()}if(h&&h.length>0){H.save(),H.strokeStyle="#f59e0b",H.lineWidth=1/t,H.globalAlpha=.8,H.beginPath(),h.forEach(ie=>{H.rect(ie.x,ie.y,ie.w,ie.h)}),H.stroke();const X=h[0];H.fillStyle="#f59e0b";const ce=Math.max(10,12/t);H.font=`${ce}px monospace`,H.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t),H.restore()}if(d&&d.length>0){H.save();const X=6/t,ce=Math.max(12,16/t);H.font=`bold ${ce}px sans-serif`,H.textAlign="center",H.textBaseline="middle",d.forEach((ie,V)=>{H.beginPath(),H.arc(ie.x,ie.y,X,0,2*Math.PI),H.fillStyle="white",H.fill(),H.strokeStyle="#4338ca",H.lineWidth=2/t,H.stroke(),H.fillStyle="#4338ca",H.fillText((V+1).toString(),ie.x,ie.y-12/t)}),H.restore()}if(p&&p.length>0){H.save();const X=5/t,ce=Math.max(10,14/t);H.font=`bold ${ce}px sans-serif`,H.textAlign="center",H.textBaseline="middle",p.forEach((ie,V)=>{H.fillStyle="yellow",H.fillRect(ie.x-X,ie.y-X,X*2,X*2),H.strokeStyle="black",H.lineWidth=1/t,H.strokeRect(ie.x-X,ie.y-X,X*2,X*2),H.fillStyle="yellow",H.shadowColor="black",H.shadowBlur=2,H.fillText((V+1).toString(),ie.x,ie.y-10/t)}),H.restore()}if(y&&y.length>0){if(H.save(),H.strokeStyle="yellow",H.lineWidth=1/t,H.globalAlpha=.9,H.beginPath(),y.forEach(X=>{H.rect(X.x,X.y,X.w,X.h)}),H.stroke(),y[0]){const X=y[0];H.fillStyle="yellow",H.shadowColor="black",H.shadowBlur=3;const ce=Math.max(10,12/t);H.font=`${ce}px monospace`,H.fillText(`${Math.round(X.w)}x${Math.round(X.h)}`,X.x,X.y-4/t)}H.restore()}m&&m.length>0&&(H.save(),H.strokeStyle="#ef4444",H.lineWidth=2/t,H.globalAlpha=.9,H.beginPath(),m.forEach(X=>{H.rect(X.x,X.y,X.w,X.h)}),H.stroke(),H.restore())}},[D,e,t,r,s,_,h,d,p,y,m]);j.useEffect(()=>{const{canvas:de}=D();if(!de)return;const H=new ResizeObserver(()=>{de.width=de.clientWidth,de.height=de.clientHeight,R()});return H.observe(de),()=>H.disconnect()},[D,R]),j.useEffect(()=>{R()},[R,e,r,t,s,_,h,d,p,y,m]);const A=de=>{const{canvas:H}=D();if(!H)return{x:0,y:0};const X=H.getBoundingClientRect();return{x:de.clientX-X.left,y:de.clientY-X.top}},T=(de,H)=>({x:(de-r.x)/t,y:(H-r.y)/t}),I=de=>{de.preventDefault();const H=A(de);if(u&&f){const X=T(H.x,H.y);f(X);return}if(l==="select"||de.shiftKey){N(!0);const X=T(H.x,H.y),ce={x:Math.floor(X.x),y:Math.floor(X.y)};M(ce),$(null),i&&i(null)}else b(!0),k({x:H.x-r.x,y:H.y-r.y})},U=de=>{const H=A(de);if(O&&E){const X=T(H.x,H.y),ce=Math.floor(X.x),ie=Math.floor(X.y),V=Math.min(E.x,ce),be=Math.min(E.y,ie),ge=Math.max(E.x,ce),se=Math.max(E.y,ie),te=ge-V+1,ue=se-be+1;$({x:V,y:be,w:te,h:ue})}else g&&n({x:H.x-S.x,y:H.y-S.y})},Z=()=>{O&&(N(!1),_&&i&&_.w>0&&_.h>0&&i(_)),b(!1)},Y=de=>{var H;if(de.touches.length===1){const X=de.touches[0],ce=(H=x.current)==null?void 0:H.getBoundingClientRect();if(!ce)return;const ie=X.clientX-ce.left,V=X.clientY-ce.top;if(u&&f){const be=T(ie,V);f(be);return}if(l==="select"){const be=T(ie,V),ge={x:Math.floor(be.x),y:Math.floor(be.y)};M(ge),N(!0),$(null),i&&i(null)}else P.current={x:ie,y:V},k({x:ie-r.x,y:V-r.y}),b(!0)}else if(de.touches.length===2){const X=Math.hypot(de.touches[0].clientX-de.touches[1].clientX,de.touches[0].clientY-de.touches[1].clientY);w.current=X,C.current=t,b(!1),N(!1)}},L=de=>{var H;if(de.touches.length===1){const X=de.touches[0],ce=(H=x.current)==null?void 0:H.getBoundingClientRect();if(!ce)return;const ie=X.clientX-ce.left,V=X.clientY-ce.top;if(u)return;if(O&&E){const be=T(ie,V),ge=Math.floor(be.x),se=Math.floor(be.y),te=Math.min(E.x,ge),ue=Math.min(E.y,se),Ie=Math.max(E.x,ge),Le=Math.max(E.y,se),Oe=Ie-te+1,Re=Le-ue+1;$({x:te,y:ue,w:Oe,h:Re})}else g&&n({x:ie-S.x,y:V-S.y})}else if(de.touches.length===2&&w.current&&C.current&&a){const ce=Math.hypot(de.touches[0].clientX-de.touches[1].clientX,de.touches[0].clientY-de.touches[1].clientY)/w.current;a(C.current*ce)}},Q=()=>{O&&(N(!1),_&&i&&_.w>0&&_.h>0&&i(_)),b(!1),w.current=null,C.current=null,P.current=null},fe=u||l==="select"||(J=window.event)!=null&&J.shiftKey?"cursor-crosshair":"cursor-grab active:cursor-grabbing";return c.jsx("canvas",{ref:x,className:`w-full h-full block touch-none ${fe}`,onMouseDown:I,onMouseMove:U,onMouseUp:Z,onMouseLeave:Z,onTouchStart:Y,onTouchMove:L,onTouchEnd:Q,onTouchCancel:Q,tabIndex:0})},Qd={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},g_="modulepreload",m_=function(e){return"/"+e},Gb={},y_=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=m_(l),l in Gb)return;Gb[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":g_,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function Pu(e){const[[t,r,n],[a,i,o],[s,l,u]]=e,f=t*(i*u-o*l)-r*(a*u-o*s)+n*(a*l-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*l)*d,(n*l-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*l-i*s)*d,(r*s-t*l)*d,(t*i-r*a)*d]]}function Jd(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class gs{constructor(t){kn(this,"size");kn(this,"isPowerOfTwo");kn(this,"_real");kn(this,"_imag");kn(this,"_scratch",null);kn(this,"_rev",null);kn(this,"_m",0);kn(this,"_internalFFT",null);kn(this,"_chirpReal",null);kn(this,"_chirpImag",null);kn(this,"_bReal",null);kn(this,"_bImag",null);kn(this,"_hanning",null);kn(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new gs(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const l=a[s];if(s<l){const u=i[s],f=o[s];i[s]=i[l],o[s]=o[l],i[l]=u,o[l]=f}}else for(let s=0;s<n;s++){const l=a[s];i[s]=t[l],o[s]=r?r[l]:0}for(let s=2;s<=n;s*=2){const l=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let h=0;h<n;h+=s){let p=1,y=0;for(let m=0;m<l;m++){const x=h+m,v=h+m+l,g=p*i[v]-y*o[v],b=p*o[v]+y*i[v],S=i[x],k=o[x];i[x]=S+g,o[x]=k+b,i[v]=S-g,o[v]=k-b;const w=p*f-y*d,C=p*d+y*f;p=w,y=C}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const h=t[d],p=r?r[d]:0,y=this._chirpReal[d],m=this._chirpImag[d];o[d]=h*y-p*m,s[d]=h*m+p*y}i.transformRadix2(o,s);for(let d=0;d<a;d++){const h=i._real[d],p=i._imag[d],y=this._bReal[d],m=this._bImag[d];i._real[d]=h*y-p*m,i._imag[d]=h*m+p*y}const l=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(l,u);const f=1/a;for(let d=0;d<n;d++){const h=i._real[d]*f,p=-i._imag[d]*f,y=this._chirpReal[d],m=this._chirpImag[d];this._real[d]=h*y-p*m,this._imag[d]=h*m+p*y}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const l=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<l;f++){const d=this._real[f],h=this._imag[f];r[f]+=(d*d+h*h)*u}}}function v_(e,t,r,n=!1){const a=new gs(t),i=new gs(r),o=t*r,s=new Float32Array(o),l=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let m=0;m<t;m++)u[m]=.5*(1-Math.cos(2*Math.PI*m/(t-1)));f=new Float32Array(r);for(let m=0;m<r;m++)f[m]=.5*(1-Math.cos(2*Math.PI*m/(r-1)))}for(let m=0;m<r;m++){const x=m*t,v=a._real;let g=0;for(let S=0;S<t;S++)g+=e[x+S];const b=g/t;if(u)for(let S=0;S<t;S++)v[S]=(e[x+S]-b)*u[S];else for(let S=0;S<t;S++)v[S]=e[x+S]-b;a.transform(v);for(let S=0;S<t;S++)s[x+S]=a._real[S],l[x+S]=a._imag[S]}for(let m=0;m<t;m++){const x=i._real,v=i._imag;for(let g=0;g<r;g++){const b=g*t+m;let S=s[b],k=l[b];f&&(S*=f[g],k*=f[g]),x[g]=S,v[g]=k}i.transform(x,v);for(let g=0;g<r;g++){const b=g*t+m;s[b]=i._real[g],l[b]=i._imag[g]}}const d=new Float32Array(o);let h=1,p=t,y=r;if(n&&u&&f){p=0;for(let m=0;m<t;m++)p+=u[m]*u[m];y=0;for(let m=0;m<r;m++)y+=f[m]*f[m]}h=1/(p*y);for(let m=0;m<o;m++)d[m]=(s[m]*s[m]+l[m]*l[m])*h;return d}function x_(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const l=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+l;n[d]=e[f]}return n}function Cd(e,t,r,n=[0,0,0,0],a=65535,i="RGGB"){const s=e*t*2,l=8,u=l+s,f="Fake",d="StretchedNoiseCam",h="StretchedNoiseCam",p=_=>{const $=new Uint8Array(_.length+1);for(let D=0;D<_.length;D++)$[D]=_.charCodeAt(D);return $[_.length]=0,$},y=p(f),m=p(d),x=p(h),v=_=>{const $=[0,0,0,0],D={R:0,G:1,B:2},R=_.toUpperCase();for(let A=0;A<4;A++)$[A]=D[R[A]]??1;return $},g=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:y.length,value:y},{id:272,type:2,count:m.length,value:m},{id:273,type:4,count:1,value:l},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:s},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:v(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(_=>Math.round(_))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:x.length,value:x}],b=2+g.length*12+4;let S=0;const k=g.map(_=>{let $=1;_.type===3&&($=2),_.type===4&&($=4);const D=_.count*$,R=D<=4;let A=0;return R||(A=S,S+=D,S%2!==0&&S++),{..._,fits:R,totalBytes:D,extraOffset:A}}),w=u+b,C=w+S,P=new ArrayBuffer(C),O=new DataView(P),N=new Uint8Array(P);O.setUint16(0,18761,!0),O.setUint16(2,42,!0),O.setUint32(4,u,!0);const E=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);N.set(E,l);let M=u;return O.setUint16(M,g.length,!0),M+=2,k.forEach(_=>{if(O.setUint16(M,_.id,!0),O.setUint16(M+2,_.type,!0),O.setUint32(M+4,_.count,!0),_.fits){const $=M+8;Array.isArray(_.value)?_.value.forEach((D,R)=>{_.type===1&&O.setUint8($+R,D),_.type===3&&O.setUint16($+R*2,D,!0)}):(_.type===3&&O.setUint16($,_.value,!0),_.type===4&&O.setUint32($,_.value,!0))}else{const $=w+_.extraOffset;O.setUint32(M+8,$,!0),_.value instanceof Uint8Array?N.set(_.value,$):Array.isArray(_.value)&&_.value.forEach((D,R)=>{_.type===1&&O.setUint8($+R,D),_.type===3&&O.setUint16($+R*2,D,!0)})}M+=12}),O.setUint32(M,0,!0),P}var Ph=typeof self<"u"?self:global;const Nu=typeof navigator<"u",b_=Nu&&typeof HTMLImageElement>"u",e0=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Nh=Ph.Buffer,Yf=Ph.BigInt,Oh=!!Nh,w_=e=>e;function t0(e,t=w_){if(e0)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let cx=Ph.fetch;const k_=e=>cx=e;if(!Ph.fetch){const e=t0("http",n=>n),t=t0("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:l,pathname:u,protocol:f,search:d}=new URL(n);const h={method:"GET",hostname:l,path:encodeURI(u)+d,headers:a};s!==""&&(h.port=Number(s));const p=(f==="https:"?await t:await e).request(h,y=>{if(y.statusCode===301||y.statusCode===302){let m=new URL(y.headers.location,n).toString();return r(m,{headers:a}).then(i).catch(o)}i({status:y.statusCode,arrayBuffer:()=>new Promise(m=>{let x=[];y.on("data",v=>x.push(v)),y.on("end",()=>m(Buffer.concat(x)))})})});p.on("error",o),p.end()});k_(r)}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const r0=e=>w3(e)?void 0:e,S_=e=>e!==void 0;function w3(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(S_).length===0)}function Tr(e){let t=new Error(e);throw delete t.stack,t}function Zo(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function Am(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Tm=e=>String.fromCharCode.apply(null,e),Wb=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function k3(e){return Wb?Wb.decode(e):Oh?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Tm(e)))}class In{static from(t,r){return t instanceof this&&t.le===r?t:new In(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof In){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&Tr("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Tr("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=In){return t instanceof DataView||t instanceof In?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Tr("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new In(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return k3(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return Tm(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return Tm(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function Em(e,t){Tr(`${e} '${t}' was not loaded, try using full build of exifr.`)}let ux=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||Em(this.kind,t),r&&(t in r||function(n,a){Tr(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||Em(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var si=new ux("file parser"),Mr=new ux("segment parser"),ui=new ux("file reader");function j_(e,t){return typeof e=="string"?Vb(e,t):Nu&&!b_&&e instanceof HTMLImageElement?Vb(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new In(e):Nu&&e instanceof Blob?$m(e,t,"blob",ys):void Tr("Invalid input argument")}function Vb(e,t){return(r=e).startsWith("data:")||r.length>1e4?Dm(e,t,"base64"):e0&&e.includes("://")?$m(e,t,"url",ms):e0?Dm(e,t,"fs"):Nu?$m(e,t,"url",ms):void Tr("Invalid input argument");var r}async function $m(e,t,r,n){return ui.has(r)?Dm(e,t,r):n?async function(a,i){let o=await i(a);return new In(o)}(e,n):void Tr(`Parser ${r} is not loaded`)}async function Dm(e,t,r){let n=new(ui.get(r))(e,t);return await n.read(),n}const ms=e=>cx(e).then(t=>t.arrayBuffer()),ys=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class C_ extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function jr(e,t,r){let n=new C_;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function vs(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Qr=new Map,Va=new Map,wo=new Map,no=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Yl=["jfif","xmp","icc","iptc","ihdr"],xs=["tiff",...Yl],mr=["ifd0","ifd1","exif","gps","interop"],ao=[...xs,...mr],io=["makerNote","userComment"],ql=["translateKeys","translateValues","reviveValues","multiSegment"],oo=[...ql,"sanitize","mergeOutput","silentErrors"];class S3{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Mc extends S3{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),We(this,"enabled",!1),We(this,"skip",new Set),We(this,"pick",new Set),We(this,"deps",new Set),We(this,"translateKeys",!1),We(this,"translateValues",!1),We(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=mr.includes(t),this.canBeFiltered&&(this.dict=Qr.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Tr(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of ql)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,n0(this.pick,this.deps)):this.enabled&&this.pick.size>0&&n0(this.pick,this.deps)}}var Sn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Hb=new Map;let Os=class extends S3{static useCached(t){let r=Hb.get(t);return r!==void 0||(r=new this(t),Hb.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Tr(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Nu?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of no)this[t]=Sn[t];for(t of oo)this[t]=Sn[t];for(t of io)this[t]=Sn[t];for(t of ao)this[t]=new Mc(t,Sn[t],void 0,this)}setupFromTrue(){let t;for(t of no)this[t]=Sn[t];for(t of oo)this[t]=Sn[t];for(t of io)this[t]=!0;for(t of ao)this[t]=new Mc(t,!0,void 0,this)}setupFromArray(t){let r;for(r of no)this[r]=Sn[r];for(r of oo)this[r]=Sn[r];for(r of io)this[r]=Sn[r];for(r of ao)this[r]=new Mc(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,mr)}setupFromObject(t){let r;for(r of(mr.ifd0=mr.ifd0||mr.image,mr.ifd1=mr.ifd1||mr.thumbnail,Object.assign(this,t),no))this[r]=qp(t[r],Sn[r]);for(r of oo)this[r]=qp(t[r],Sn[r]);for(r of io)this[r]=qp(t[r],Sn[r]);for(r of xs)this[r]=new Mc(r,Sn[r],t[r],this);for(r of mr)this[r]=new Mc(r,Sn[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,mr,ao),t.tiff===!0?this.batchEnableWithBool(mr,!0):t.tiff===!1?this.batchEnableWithUserValue(mr,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,mr):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,mr)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=Xb(t,n);for(let[o,s]of i)n0(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=Xb(r,n);for(let[o,s]of i)n0(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=mr.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of mr)this[i].finalizeFilters()}get onlyTiff(){return!Yl.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of xs)this[t].enabled&&!Mr.has(t)&&Em("segment parser",t)}};function Xb(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Qr.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function qp(e,t){return e!==void 0?e:t!==void 0?t:void 0}function n0(e,t){for(let r of t)e.add(r)}We(Os,"default",Sn);class Mo{constructor(t){We(this,"parsers",{}),We(this,"output",{}),We(this,"errors",[]),We(this,"pushToErrors",r=>this.errors.push(r)),this.options=Os.useCached(t)}async read(t){this.file=await j_(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of si)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),Tr("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),r0(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=Mr.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function Mh(e,t){let r=new Mo(t);return await r.read(e),r.parse()}var P_=Object.freeze({__proto__:null,parse:Mh,Exifr:Mo,fileParsers:si,segmentParsers:Mr,fileReaders:ui,tagKeys:Qr,tagValues:Va,tagRevivers:wo,createDictionary:jr,extendDictionary:vs,fetchUrlAsArrayBuffer:ms,readBlobAsArrayBuffer:ys,chunkedProps:no,otherSegments:Yl,segments:xs,tiffBlocks:mr,segmentsAndBlocks:ao,tiffExtractables:io,inheritables:ql,allFormatters:oo,Options:Os});class _h{constructor(t,r,n){We(this,"errors",[]),We(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){Tr(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Tr("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(Mr.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}let Ba=class{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new Os({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof In?t:new In(t)}constructor(t,r={},n){We(this,"errors",[]),We(this,"raw",new Map),We(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=wo.get(r),a=Va.get(r),i=Qr.get(r),o=this.options[r],s=o.reviveValues&&!!n,l=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,h]of t)s&&n.has(d)?h=n.get(d)(h):l&&a.has(d)&&(h=this.translateValue(h,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=h;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}};We(Ba,"headerLength",4),We(Ba,"type",void 0),We(Ba,"multiSegment",!1),We(Ba,"canHandle",()=>!1);function N_(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function O_(e){return e>=224&&e<=239}function M_(e,t,r){for(let[n,a]of Mr)if(a.canHandle(e,t,r))return n}class Kb extends _h{constructor(...t){super(...t),We(this,"appSegments",[]),We(this,"jpegSegments",[]),We(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(Mr.keyList())):(t=t===void 0?Mr.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&Mr.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let l=Mr.get(s),u=this.options[s];return l.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>l&&!u?!await n.readNextChunk(t):!await n.readNextChunk(l),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,l,{file:u,findAll:f,wanted:d,remaining:h,options:p}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),O_(n)){if(a=u.getUint16(t+2),i=M_(u,t,a),i&&d.has(i)&&(o=Mr.get(i),s=o.findPosition(u,t),l=p[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||h.delete(i)):h.delete(i),h.size===0)))break;p.recordUnknownSegments&&(s=Ba.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(N_(n)){if(a=u.getUint16(t+2),n===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let l=0;l<r.length;l++)a=r[l],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=Mr.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}We(Kb,"type","jpeg"),si.set("jpeg",Kb);const __=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class A_ extends Ba{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,l=this.chunk.getUint16(t);t+=2;for(let u=0;u<l;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=__[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Tr(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Tr(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return Zo(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let l=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)l[f]=this.parseTagValue(i,t),t+=u;return l}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Tr(`Invalid tiff type ${t}`)}}}class Zp extends A_{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Tr("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Tr(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,Am(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Am(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Yb(...t.get(2),t.get(1))),t.set("longitude",Yb(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of mr)if(t=this[r],!w3(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function Yb(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}We(Zp,"type","tiff"),We(Zp,"headerLength",10),Mr.set("tiff",Zp);var T_=Object.freeze({__proto__:null,default:P_,Exifr:Mo,fileParsers:si,segmentParsers:Mr,fileReaders:ui,tagKeys:Qr,tagValues:Va,tagRevivers:wo,createDictionary:jr,extendDictionary:vs,fetchUrlAsArrayBuffer:ms,readBlobAsArrayBuffer:ys,chunkedProps:no,otherSegments:Yl,segments:xs,tiffBlocks:mr,segmentsAndBlocks:ao,tiffExtractables:io,inheritables:ql,allFormatters:oo,Options:Os,parse:Mh});const fx={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},dx=Object.assign({},fx,{firstChunkSize:4e4,gps:[1,2,3,4]});async function j3(e){let t=new Mo(dx);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const hx=Object.assign({},fx,{tiff:!1,ifd1:!0,mergeOutput:!1});async function C3(e){let t=new Mo(hx);await t.read(e);let r=await t.extractThumbnail();return r&&Oh?Nh.from(r):r}async function P3(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const px=Object.assign({},fx,{firstChunkSize:4e4,ifd0:[274]});async function gx(e){let t=new Mo(px);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const mx=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Qo=!0,Jo=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;Qo=Number(r)+.1*Number(n)<13.4,Jo=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Qo=Jo=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Qo=Jo=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Qo=Jo=Number(t)<77}}async function N3(e){let t=await gx(e);return Object.assign({canvas:Qo,css:Jo},mx[t])}class E_ extends In{constructor(...t){super(...t),We(this,"ranges",new $_),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=Oh?Nh.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class $_{constructor(){We(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>qb(t,o.offset,a)||qb(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function qb(e,t,r){return e<=t&&t<=r}class Ah extends E_{constructor(t,r){super(0),We(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ui.set("blob",class extends Ah{async readWhole(){this.chunked=!1;let e=await ys(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await ys(n);return this.set(a,e,!0)}});var D_=Object.freeze({__proto__:null,default:T_,Exifr:Mo,fileParsers:si,segmentParsers:Mr,fileReaders:ui,tagKeys:Qr,tagValues:Va,tagRevivers:wo,createDictionary:jr,extendDictionary:vs,fetchUrlAsArrayBuffer:ms,readBlobAsArrayBuffer:ys,chunkedProps:no,otherSegments:Yl,segments:xs,tiffBlocks:mr,segmentsAndBlocks:ao,tiffExtractables:io,inheritables:ql,allFormatters:oo,Options:Os,parse:Mh,gpsOnlyOptions:dx,gps:j3,thumbnailOnlyOptions:hx,thumbnail:C3,thumbnailUrl:P3,orientationOnlyOptions:px,orientation:gx,rotations:mx,get rotateCanvas(){return Qo},get rotateCss(){return Jo},rotation:N3});ui.set("url",class extends Ah{async readWhole(){this.chunked=!1;let e=await ms(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await cx(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});In.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof Yf!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Yf(t)<<Yf(32)|Yf(r)):void Tr("Trying to read 64b value but JS can only handle 53b numbers.")};class I_ extends _h{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class O3 extends I_{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let l=4+this.file.getUint32(o);o+=l,s-=l,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),l=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,h=this.file.getUintBytes(n,d);for(n+=d;h--;){let p=this.file.getUintBytes(n,l);n+=l+u+2+o;let y=this.file.getUint16(n);if(n+=2,p===r)return y>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=y*f}}}class M3 extends O3{}We(M3,"type","heic");class Zb extends O3{}We(Zb,"type","avif"),si.set("heic",M3),si.set("avif",Zb),jr(Qr,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),jr(Qr,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),jr(Qr,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),jr(Va,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let tu=jr(Va,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Qb={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};tu.set(37392,Qb),tu.set(41488,Qb);const Qp={0:"Normal",1:"Low",2:"High"};function Jb(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function e2(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function Jp(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function _c(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(t2(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(t2(e[r],e[r+1]));return Zo(String.fromCodePoint(...t))}function t2(e,t){return e<<8|t}tu.set(41992,Qp),tu.set(41993,Qp),tu.set(41994,Qp),jr(wo,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?k3(e):e}],[306,Jp],[40091,_c],[40092,_c],[40093,_c],[40094,_c],[40095,_c]]),jr(wo,"exif",[[40960,e2],[36864,e2],[36867,Jp],[36868,Jp],[40962,Jb],[40963,Jb]]),jr(wo,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class eg extends Ba{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:In.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let l of E3)o[l]=[],s[l]=0;return i.replace(F_,(l,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${l}#${d}`}return`${l}#${o[f].pop()}`})}(t);let r=ll.findAll(t,"rdf","Description");r.length===0&&r.push(new ll("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=B_(o.ns,a),_3(o,n);return function(i){let o;for(let s in i)o=i[s]=r0(i[s]),o===void 0&&delete i[s];return r0(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}We(eg,"type","xmp"),We(eg,"multiSegment",!0),Mr.set("xmp",eg);class a0{static findAll(t){return A3(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(a0.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=T3(a),new a0(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class ll{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return A3(t,a).map(ll.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new ll(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=a0.findAll(n),this.children=ll.findAll(a),this.value=this.children.length===0?T3(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return L_(this.children.map(R_));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)_3(r,t);return this.value!==void 0&&(t.value=this.value),r0(t)}}function _3(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var R_=e=>e.serialize(),L_=e=>e.length===1?e[0]:e,B_=(e,t)=>t[e]?t[e]:t[e]={};function A3(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function T3(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const E3=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],F_=new RegExp(`(<|\\/)(${E3.join("|")})`,"g");var $3=Object.freeze({__proto__:null,default:D_,Exifr:Mo,fileParsers:si,segmentParsers:Mr,fileReaders:ui,tagKeys:Qr,tagValues:Va,tagRevivers:wo,createDictionary:jr,extendDictionary:vs,fetchUrlAsArrayBuffer:ms,readBlobAsArrayBuffer:ys,chunkedProps:no,otherSegments:Yl,segments:xs,tiffBlocks:mr,segmentsAndBlocks:ao,tiffExtractables:io,inheritables:ql,allFormatters:oo,Options:Os,parse:Mh,gpsOnlyOptions:dx,gps:j3,thumbnailOnlyOptions:hx,thumbnail:C3,thumbnailUrl:P3,orientationOnlyOptions:px,orientation:gx,rotations:mx,get rotateCanvas(){return Qo},get rotateCss(){return Jo},rotation:N3});let r2=t0("fs",e=>e.promises);ui.set("fs",class extends Ah{async readWhole(){this.chunked=!1,this.fs=await r2;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await r2,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});ui.set("base64",class extends Ah{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(Oh){let l=Nh.from(a,"base64").slice(n,n+s);return this.set(l,e,!0)}{let l=this.subarray(e,s,!0),u=atob(a),f=l.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return l}}});class n2 extends _h{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(Am(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}We(n2,"type","tiff"),si.set("tiff",n2);let z_=t0("zlib");const U_=["ihdr","iccp","text","itxt","exif"];class a2 extends _h{constructor(...t){super(...t),We(this,"catchError",r=>this.errors.push(r)),We(this,"metaChunks",[]),We(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,l={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};U_.includes(o)?this.metaChunks.push(l):this.unknownChunks.push(l),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),e0){let s=await z_,l=r.getUint8Array(i);l=s.inflateSync(l),this.injectSegment("icc",l)}}}We(a2,"type","png"),si.set("png",a2),jr(Qr,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),vs(Qr,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let i2=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];vs(Qr,"ifd0",i2),vs(Qr,"exif",i2),jr(Va,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class tg extends Ba{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}We(tg,"type","jfif"),We(tg,"headerLength",9),Mr.set("jfif",tg),jr(Qr,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class o2 extends Ba{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}We(o2,"type","ihdr"),Mr.set("ihdr",o2),jr(Qr,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),jr(Va,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Pd extends Ba{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),l=0;for(let u of a)s.set(u,l),l+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new In(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&Tr("ICC header is too short");for(let[r,n]of Object.entries(G_)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(l,4),r=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),l+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return Zo(this.chunk.getString(t+12,r))}parseText(t,r){return Zo(this.chunk.getString(t+8,r-8))}parseSig(t){return Zo(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let l=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,h=Zo(r.getUnicodeString(d,f));o.push({lang:l,country:u,text:h}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}We(Pd,"type","icc"),We(Pd,"multiSegment",!0),We(Pd,"headerLength",18);const G_={4:gi,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:gi,16:gi,20:gi,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:gi,40:gi,48:gi,52:gi,64:(e,t)=>e.getUint32(t),80:gi};function gi(e,t){return Zo(e.getString(t,4))}Mr.set("icc",Pd),jr(Qr,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const qf={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},s2={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};jr(Va,"icc",[[4,qf],[12,s2],[40,Object.assign({},qf,s2)],[48,qf],[80,qf],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Zf extends Ba{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}We(Zf,"type","iptc"),We(Zf,"translateValues",!1),We(Zf,"reviveValues",!1),Mr.set("iptc",Zf),jr(Qr,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),jr(Va,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let rg=null;async function Ms(){if(!rg)try{const n=(await y_(()=>import("./joraw-CyOaUyww.js"),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;rg=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await rg,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const yx=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],ko=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function Qf(e,t=0,r=0){const n=await Ms(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,l=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((l-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let p=0;p<f/2;p++){const y=p*6+r;if(y+3>=l)break;const m=y*s,x=(y+3)*s,v=p*2,g=v*u,b=(v+1)*u;for(let S=0;S<u/2;S++){const k=S*6+t;if(k+1>=s)break;const w=S*2;d[g+w]=o[m+k+1],d[g+w+1]=o[m+k+0],d[b+w]=o[x+k+0],d[b+w+1]=o[x+k+1]}}return{dngBuffer:Cd(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function W_(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,l=r*n,u=new Uint16Array(l);for(let h=0;h<n;h++)for(let p=0;p<r;p++){const y=(h*r+p)*4,m=h*r+p,x=h%2===0,v=p%2===0;let g=0;x&&v?g=s[y]:!x&&!v?g=s[y+2]:g=s[y+1],u[m]=g*64}const f=await new Promise(h=>a.toBlob(h,"image/png"));let d={description:"Standard image (non-RAW)"};try{const h=await $3.parse(e);h&&(d={...d,...h})}catch(h){console.warn("EXIF parsing failed for standard image",h)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const V_=async e=>{const t=await Ms(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const l=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const h=d*3,p=d*4;l.data[p]=u[h],l.data[p+1]=u[h+1],l.data[p+2]=u[h+2],l.data[p+3]=255}s.putImageData(l,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},i0=async e=>{var n,a,i,o,s,l,u,f,d;const t=await Ms(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const h=r.getRawImage();let p=new Uint16Array(h.data);const y=await r.metadata(!0);let m={...y};try{const w=await $3.parse(e.buffer);w&&(m={...m,...w})}catch(w){console.warn("exifr parsing failed for RAW buffer",w)}const x=((n=y.idata)==null?void 0:n.filters)||0,v=((a=y.idata)==null?void 0:a.colors)||0,g=x===0&&v===3,b=x===9;let S=[0,0,0,0],k=!1;if(r.getBlackLevels)try{const w=r.getBlackLevels();w.dng_cblack&&w.dng_cblack.length===4&&Array.from(w.dng_cblack).some(C=>C>0)?(S=Array.from(w.dng_cblack).map(Number),k=!0):w.cblack&&w.cblack.length===4&&Array.from(w.cblack).some(C=>C>0)?(S=Array.from(w.cblack).map(Number),k=!0):typeof w.black=="number"&&w.black>0&&(S=[w.black,w.black,w.black,w.black],k=!0)}catch(w){console.warn("getBlackLevels binding failed",w)}if(!k){let w=[];if((i=y.color_data)!=null&&i.cblack_rawpy_style)w=y.color_data.cblack_rawpy_style;else if((s=(o=y.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)w=y.color_data.dng_levels.dng_cblack;else if(((l=y.black_level_per_channel)==null?void 0:l.length)>=4)w=y.black_level_per_channel;else if(((u=y.cblack)==null?void 0:u.length)>=4)w=y.cblack;else if(((d=(f=y.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)w=y.color.cblack;else{const C=y.black_level||y.color_data&&y.color_data.black||0;w=[C,C,C,C]}S=[Number(w[0])||0,Number(w[1])||0,Number(w[2])||0,Number(w[3])||0]}return{data:p,width:h.width,height:h.height,bayerPattern:y.color_desc||"RGGB",blackLevels:S,whiteLevel:y.white_level||16383,metadata:m,isThreePlane:g,isXTrans:b}}finally{r.delete?r.delete():r.close()}};async function Fo(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([V_(t),i0(r)]);return{previewBlob:n,analysisData:a}}async function o0(e){const t=new Uint8Array(e);return i0(t)}const l2=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function ng(e,t,r,n=!0){const a=await i0(new Uint8Array(e)),i=await i0(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,l=r?l2(o):o,u=r?l2(s):s,f=l*u,d=new Uint16Array(f),h=6e4,p=1.41421356;for(let y=0;y<s;y++){const m=y*o,x=y*l;for(let v=0;v<o;v++){const g=a.data[m+v],b=i.data[m+v];let S=g-b;n&&(S/=p);let k=S+h;k=Math.max(0,Math.min(65535,k)),d[x+v]=Math.round(k)}}return{rawData:d,width:l,height:u,metadata:a.metadata}}function zo(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),l=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],h=[0,0,0,0],p=[0,0,0,0];for(let x=l;x<f;x++){const v=x*t,g=x%2;for(let b=s;b<u;b++){const S=b%2,k=e[v+b],w=g*2+S;d[w]+=k,h[w]+=k*k,p[w]++}}const y=[0,0,0,0],m=[0,0,0,0];for(let x=0;x<4;x++)if(p[x]>0){const v=d[x]/p[x];y[x]=v;const b=h[x]/p[x]-v*v;m[x]=Math.sqrt(Math.max(0,b))}return{x:s,y:l,width:u-s,height:f-l,means:y,stdDevs:m,pixelCount:p.reduce((x,v)=>x+v,0)}}function H_(e,t,r,n,a,i=!1){const o=Math.floor(Math.max(0,r.x)),s=Math.floor(Math.max(0,r.y)),l=Math.ceil(Math.min(t,r.x+r.w)),u=e.length/t,f=Math.ceil(Math.min(u,r.y+r.h)),d=[0,0,0,0],h=[0,0,0,0];for(let D=s;D<f;D++){const R=D*t,A=D%2;for(let T=o;T<l;T++){const I=T%2,U=A*2+I,Z=e[R+T],Y=n[U]||0;d[U]+=Math.max(0,Z-Y),h[U]++}}let p=0,y=3;i&&(p=3,y=0);const m=h[p]>0?d[p]/h[p]:1,x=(d[1]+d[2])/(h[1]+h[2]||1),v=h[y]>0?d[y]/h[y]:1;if(m<1||x<1||v<1)return[1,1];const g=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]],b=Pu(g);if(!b)return console.warn("Color Matrix is not invertible, falling back to standard WB"),[x/m,x/v];const S=Jd(yx,b),k=Pu(S);let w=1,C=1,P=1;if(k)w=k[0][0]+k[0][1]+k[0][2],C=k[1][0]+k[1][1]+k[1][2],P=k[2][0]+k[2][1]+k[2][2],Math.abs(C)<1e-6&&(C=1);else return console.warn("Final Matrix is not invertible"),[x/m,x/v];const O=x/m,N=x/v,E=w/C,M=P/C,_=O*E,$=N*M;return[Math.max(0,_),Math.max(0,$)]}function c2(e,t,r,n,a,i,o=0,s=0){const l=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),h=a>>1,p=a&1,y=(i>>1)+o,m=(i&1)+s;let x=0,v=0,g=0;for(let P=u;P<d-2;P+=2)for(let O=l;O<f-2;O+=2){const N=(P+h)*t+(O+p),E=(P+y)*t+(O+m);P+y>=r||O+m>=t||(x+=e[N],v+=e[E],g++)}if(g<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const b=x/g,S=v/g;let k=0,w=0,C=0;for(let P=u;P<d-2;P+=2)for(let O=l;O<f-2;O+=2){const N=(P+h)*t+(O+p),E=(P+y)*t+(O+m);if(P+y>=r||O+m>=t)continue;const M=e[N],_=e[E],$=M-b,D=_-S;k+=$*D,w+=$*$,C+=D*D}return{sumCov:k,sumVar1:w,sumVar2:C,n:g}}function X_(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function K_(e,t,r,n,a,i,o,s,l,u,f){if(u<=l)return[];const d=Math.max(0,Math.floor(n)),h=Math.max(0,Math.floor(a)),p=Math.min(t,Math.ceil(n+i)),y=Math.min(r,Math.ceil(a+o)),m=u-l,x=f?Math.floor(m)+1:s,v=m/x,g=[new Uint32Array(x),new Uint32Array(x),new Uint32Array(x),new Uint32Array(x)];for(let S=h;S<y;S++){const k=S*t,w=S%2;for(let C=d;C<p;C++){const P=C%2,O=e[k+C];if(O<l||O>u)continue;const N=w*2+P;let E;f?E=Math.floor(O-l):E=Math.floor((O-l)/v),E<0&&(E=0),E>=x&&(E=x-1),g[N][E]++}}const b=[];for(let S=0;S<x;S++){const k=l+(f?S:S*v);b.push({binStart:k,c0:g[0][S],c1:g[1][S],c2:g[2][S],c3:g[3][S]})}return b}function Y_(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},l=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),h=Math.min(t,Math.ceil(n.x+n.w)),p=Math.min(r,Math.ceil(n.y+n.h)),y=h-f,m=p-d;if(y<=1||m<=1)return null;let x=0;for(let E=f;E<h;E++)E%2===(a&1)&&x++;let v=0;for(let E=d;E<p;E++)E%2===a>>1&&v++;if(x<4||v<4)return null;const g=Math.max(1,u),b=Math.floor(2*x/(g+1)),S=Math.floor(2*v/(g+1));if(b<4||S<4)return null;const k=new gs(b),w=new gs(S),C=new Float32Array(Math.floor(b/2)+1),P=new Float32Array(Math.floor(S/2)+1);let O=0,N=0;for(let E=d;E<p;E++){const M=E%2;if(a>>1!==M||s.rows&&(E>>1&1)!==s.rowGroup)continue;const _=E*t,$=new Float32Array(x);let D=0;for(let R=f;R<h;R++)R%2===(a&1)&&D<x&&($[D++]=e[_+R]);for(let R=0;R<g;R++){const A=Math.floor(R*b/2);if(A+b>x)break;const T=$.slice(A,A+b);k.calculateSpectrum(T,C,o),O++}if(!l)break}for(let E=f;E<h;E++){const M=E%2;if((a&1)!==M||s.cols&&(E>>1&1)!==s.rowGroup)continue;const _=new Float32Array(v);let $=0;for(let D=d;D<p;D++)D%2===a>>1&&$<v&&(_[$++]=e[D*t+E]);for(let D=0;D<g;D++){const R=Math.floor(D*S/2);if(R+S>v)break;const A=_.slice(R,R+S);w.calculateSpectrum(A,P,o),N++}if(!l)break}if(O>0)for(let E=0;E<C.length;E++)C[E]/=O;if(N>0)for(let E=0;E<P.length;E++)P[E]/=N;return{avgHoriz:Array.from(C),avgVert:Array.from(P),sampleCount:{h:O,v:N}}}function q_(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),l=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let g=s;g<u;g++)if(g%2===a>>1){f=g;break}if(f===-1)return null;let d=-1;for(let g=o;g<l;g++)if(g%2===(a&1)){d=g;break}if(d===-1)return null;const h=[];for(let g=f;g<u;g+=2){const b=g*t,S=[];for(let k=d;k<l;k+=2)S.push(e[b+k]);h.push(S)}const p=h.length;if(p===0)return null;const y=h[0].length;if(y===0)return null;const m=new Float32Array(y*p);for(let g=0;g<p;g++){const b=h[g];for(let S=0;S<y;S++)m[g*y+S]=b[S]}const x=v_(m,y,p,i),v=x_(x,y,p);return{width:y,height:p,data:v}}function Z_(e,t,r,n,a,i,o){const{x:s,y:l,w:u,h:f}=n,d=[],h=Math.max(0,Math.floor(s)),p=Math.max(0,Math.floor(l)),y=Math.min(t,Math.ceil(s+u)),m=Math.min(r,Math.ceil(l+f)),x=a>>1,v=a&1;for(let w=p;w<m;w++){if(w%2!==x)continue;const C=w*t;for(let P=h;P<y;P++){if(P%2!==v)continue;const O=e[C+P];O>=i&&O<=o&&d.push(O-i)}}if(d.length===0)return null;d.sort((w,C)=>w-C);const g=[d[0]];for(let w=1;w<d.length;w++)d[w]!==d[w-1]&&g.push(d[w]);const b=[],S=[],k={};for(let w=0;w<g.length-1;w++){const C=g[w],O=g[w+1]-C;b.push(O),S.push({x:C,y:O}),k[O]=(k[O]||0)+1}return{uniqueCount:g.length,diffCount:b.length,stepCounts:k,plotData:S}}function vx(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:l}=e,u=a.map((b,S)=>Math.max(0,b-n[S])),f=i.map((b,S)=>Math.max(0,b-n[S])),d=(u[1]+u[3])/2,h=(f[1]+f[3])/2,p=Math.floor(t.x),y=Math.floor(t.y),m=Math.floor(t.w),x=Math.floor(t.h),v=Math.pow(2,r.exposure),g=new Uint16Array(m*x);for(let b=0;b<x;b++){const S=y+b;if(S<0||S>=e.height)continue;const k=S%2,w=S*s,C=b*m;for(let P=0;P<m;P++){const O=p+P;if(O<0||O>=s)continue;const N=O%2;let E=0;!k&&!N?E=0:!k&&N?E=1:k&&!N?E=3:E=2;const M=o[w+O],_=n[E],$=u[E],D=f[E],R=Math.max(M-_,0),A=D-$||1e-9,T=(R-$)/A;let I;T<0?I=R*(d/Math.max($,1e-9)):T>1?I=R*(h/Math.max(D,1e-9)):I=(1-T)*d+T*h,I*=v,g[C+P]=Math.max(0,Math.min(65535,Math.round(I)))}}return{data:g,width:m,height:x}}async function u2(e,t){const r=await Ms(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const h=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],p=Pu(h);if(p){const y=t.wbGains?t.wbGains[0]:1,m=t.wbGains?t.wbGains[1]:1,v=Jd(p,[[y,0,0],[0,1,0],[0,0,m]]),g=Jd(yx,v);o=[g[0][0],g[0][1],g[0][2],g[1][0],g[1][1],g[1][2],g[2][0],g[2][1],g[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(h=>{const p=Math.round(h);return p===0?1:p})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const l=await n.imageData(),u=new ImageData(l.width,l.height),f=u.data,d=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2);if(i&&o.length===9){const h=o,y=Math.pow(2,t.exposure)*.25;for(let m=0;m<d.length;m+=3){const x=d[m]/65535,v=d[m+1]/65535,g=d[m+2]/65535;let b=h[0]*x+h[1]*v+h[2]*g,S=h[3]*x+h[4]*v+h[5]*g,k=h[6]*x+h[7]*v+h[8]*g;b*=y,S*=y,k*=y,b=Math.max(0,Math.min(1,b)),S=Math.max(0,Math.min(1,S)),k=Math.max(0,Math.min(1,k)),b=ko(b),S=ko(S),k=ko(k);const w=m/3*4;f[w]=Math.round(b*255),f[w+1]=Math.round(S*255),f[w+2]=Math.round(k*255),f[w+3]=255}}else for(let h=0;h<d.length;h+=3){const p=h/3*4;f[p]=d[h]>>8,f[p+1]=d[h+1]>>8,f[p+2]=d[h+2]>>8,f[p+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function ag(e,t){const r=await Ms(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const m=await n.metadata(!0);m&&m.white_level&&(a=m.white_level)}catch(m){console.warn("Metadata error",m)}const i=n.getRawImage(),o=i.width,s=i.height,l=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1;for(let m=0;m<s;m++){const x=m%2;for(let v=0;v<o;v++){const g=v%2,b=x*2+g,S=l[m*o+v],k=d[b];let w=(S-k)/(h-k);w=Math.max(0,Math.min(1,w)),t.exposure!==0&&(w*=Math.pow(2,t.exposure),w=Math.min(1,w)),b===0?w*=p:b===3&&(w*=y);const C=Math.round(ko(Math.min(1,w))*255),P=(m*o+v)*4;f[P]=C,f[P+1]=C,f[P+2]=C,f[P+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function Q_(e,t){const r=await Ms(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const E=await n.metadata(!0);E&&E.white_level&&(a=E.white_level)}catch{}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1,m=Math.pow(2,t.exposure);let x=[[1,0,0],[0,1,0],[0,0,1]];if(t.customMatrix&&t.customMatrix.length===9){const E=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],M=Pu(E);M&&(x=Jd(yx,M))}const v=x[0][0],g=x[0][1],b=x[0][2],S=x[1][0],k=x[1][1],w=x[1][2],C=x[2][0],P=x[2][1],O=x[2][2],N=new Float32Array(o*s);for(let E=0;E<o*s;E++){const M=Math.floor(E/o),_=E%o,$=M%2,D=_%2,R=$*2+D,A=l[E],T=d[R];let I=(A-T)/(h-T);I=Math.max(0,I),R===0?I*=p:R===3&&(I*=y),N[E]=I}for(let E=1;E<s-1;E++){const M=E%2,_=E*o;for(let $=1;$<o-1;$++){const D=$%2,R=_+$;let A=0,T=0,I=0;!M&&!D?(A=N[R],T=(N[R-1]+N[R+1]+N[R-o]+N[R+o])*.25,I=(N[R-o-1]+N[R-o+1]+N[R+o-1]+N[R+o+1])*.25):M&&D?(I=N[R],T=(N[R-1]+N[R+1]+N[R-o]+N[R+o])*.25,A=(N[R-o-1]+N[R-o+1]+N[R+o-1]+N[R+o+1])*.25):(T=N[R],!M&&D?(A=(N[R-1]+N[R+1])*.5,I=(N[R-o]+N[R+o])*.5):(I=(N[R-1]+N[R+1])*.5,A=(N[R-o]+N[R+o])*.5));let U=v*A+g*T+b*I,Z=S*A+k*T+w*I,Y=C*A+P*T+O*I;U*=m,Z*=m,Y*=m,U=Math.max(0,Math.min(1,U)),Z=Math.max(0,Math.min(1,Z)),Y=Math.max(0,Math.min(1,Y)),U=ko(U),Z=ko(Z),Y=ko(Y);const L=R*4;f[L]=Math.round(U*255),f[L+1]=Math.round(Z*255),f[L+2]=Math.round(Y*255),f[L+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function J_(e,t){const r=await Ms(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const g=await n.metadata(!0);g&&g.white_level&&(a=g.white_level)}catch(g){console.warn("Metadata error",g)}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data;if(!t.advancedZeroDep)throw new Error("Missing advanced settings");const{bl:d,bg:h,fg:p}=t.advancedZeroDep,y=h.map((g,b)=>Math.max(0,g-d[b])),m=p.map((g,b)=>Math.max(0,g-d[b])),x=(y[1]+y[3])/2,v=(m[1]+m[3])/2;for(let g=0;g<s;g++){const b=g%2;for(let S=0;S<o;S++){const k=S%2;let w=0;!b&&!k?w=0:!b&&k?w=1:b&&!k?w=3:w=2;const C=l[g*o+S],P=d[w],O=y[w],N=m[w],E=Math.max(C-P,0),M=N-O||1e-9,_=(E-O)/M;let $;_<0?$=E*(x/Math.max(O,1e-9)):_>1?$=E*(v/Math.max(N,1e-9)):$=(1-_)*x+_*v;let D=$/65535;D=Math.max(0,Math.min(1,D));const R=Math.round(ko(D)*255),A=(g*o+S)*4;f[A]=R,f[A+1]=R,f[A+2]=R,f[A+3]=255}}return u}finally{n.delete?n.delete():n.close()}}const Is=({title:e,children:t})=>c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[c.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:c.jsx("span",{children:e})}),c.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),eA=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],ig=({checked:e,onChange:t,label:r})=>c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),c.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:c.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),og=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},tA=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:l,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:h,drGridRows:p,onDrGridRowsChange:y,drGridCols:m,onDrGridColsChange:x,onBatchDrLab:v,hasDrMarkers:g,isFftLabOpen:b,onProcessPair:S,onProcessBatchDiff:k,onProcessStackFft:w,onOpenCrossCalc:C,isThreePlane:P,onToggleXTrans:O,xtransPhase:N,onXTransPhaseChange:E,isXTransConverted:M,onCommand:_,isColorLabOpen:$,colorLabMarkingStep:D,onStartColorLabMarking:R,isSfrLabOpen:A,roiStats:T,isBGGR:I,onOpenDngExport:U,sfrRectCount:Z,isBatchMarkingMode:Y,onToggleBatchMarking:L,onClearBatchMarks:Q,onBatchCompute:fe,stdChartStep:J,onStartStandardCalibration:de,onSaveBatchTemplate:H,onImportBatchTemplate:X,onBatchTransform:ce}=e,ie=!!t,V=!!(t!=null&&t.isXTrans),be=!!O,[ge,se]=j.useState(r.exposure.toString()),[te,ue]=j.useState(""),[Ie,Le]=j.useState("0 0 0 0"),[Oe,Re]=j.useState("1.0"),[rt,mt]=j.useState("1.0"),[ar,gt]=j.useState(r.demosaicMethod),[Zt,ot]=j.useState(!!r.showKadc),[Tt,Lt]=j.useState(!!r.subtractBlackLevelFromStats),[fr,Vt]=j.useState("64"),[Nt,qe]=j.useState(!1),[Ot,Et]=j.useState(""),[Qt,dr]=j.useState(""),[Wr,bt]=j.useState(""),[en,st]=j.useState(!1),[Jt,Cr]=j.useState(!1),[yn,xr]=j.useState(!1),[$r,vn]=j.useState(!1),[_n,Vr]=j.useState("single"),[xn,Xa]=j.useState(!1),[Pa,hr]=j.useState(!0),[pr,ht]=j.useState(!0),[le,De]=j.useState(10),[Be,at]=j.useState(1.05),Xe=j.useMemo(()=>Object.keys(Qd).sort(),[]),Ct=j.useRef(null),ir=j.useRef(null),or=j.useRef(null),Ve=j.useRef(null),[it,wt]=j.useState(null),[yt,sr]=j.useState(null),[ke,An]=j.useState(!1),[di,sa]=j.useState(!0),Hn=j.useRef(null),zi=j.useRef(null),Io=j.useRef(null);j.useEffect(()=>{if(se(r.exposure.toString()),r.customMatrix?ue(r.customMatrix.join(" ")):ue(""),r.blackLevel&&r.blackLevel.length===4)Le(r.blackLevel.join(" "));else{const G=og(t,i);G&&G.some(he=>he!==0)?Le(G.join(" ")):Le("")}Re(r.wbGains?r.wbGains[0].toString():"1.0"),mt(r.wbGains?r.wbGains[1].toString():"1.0"),gt(r.demosaicMethod),ot(!!r.showKadc),Lt(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(Et(r.advancedZeroDep.bl.join(" ")),dr(r.advancedZeroDep.bg.join(" ")),bt(r.advancedZeroDep.fg.join(" ")),qe(!0))},[r,t,i]);const Xn=j.useRef(!1),Ui=j.useRef(null);j.useEffect(()=>{t!==Ui.current&&(Xn.current=!1,Ui.current=t)},[t]),j.useEffect(()=>{if(o&&t&&!Xn.current){Xn.current=!0;const G=og(t,i),he=G&&G.some(re=>re>0);if(G&&he){console.log("[AutoApply] Detected Black Levels via Bridge:",G);const re={...r,blackLevel:G,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(re)}}},[o,t,i,r,n]);const Ka=G=>se(G),bn=G=>Re(G),hi=G=>mt(G),Na=G=>gt(parseInt(G.target.value,10)),Kn=G=>ue(G.target.value),Oa=()=>{se("0"),gt(3),Re("1.0"),mt("1.0"),ot(!0),Lt(!0),ue(""),qe(!1);const G=og(t,i);Le(G&&G.some(he=>he!==0)?G.join(" "):"")},Gi=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),_==null||_("sel full"))},Ro=()=>{if(!t||!a)return;const G=parseInt(fr,10);if(isNaN(G)||G<=0)return;const he=Math.min(G,t.width),re=Math.min(G,t.height),Te=Math.floor((t.width-he)/2),je=Math.floor((t.height-re)/2);a({x:Te,y:je,w:he,h:re}),_==null||_(`sel center ${G}`)},dc=()=>{if(!t||!T){alert("Please select a region on the image first.");return}const G=la()||[0,0,0,0],he=te.trim().replace(/[\s,\n]+/g," "),re=he?he.split(" ").map(Number):[1,0,0,0,1,0,0,0,1];if(re.length!==9){alert("Matrix must be 3x3 (9 values).");return}const[Te,je]=H_(t.data,t.width,{x:T.x,y:T.y,w:T.width,h:T.height},G,re,I);Re(Te.toFixed(4)),mt(je.toFixed(4)),_==null||_(`wb ${Te.toFixed(4)} ${je.toFixed(4)} (Spot)`)},la=()=>{const he=Ie.split(/[\s,]+/).filter(re=>re.trim()!=="").map(Number);if(he.length===1&&!isNaN(he[0]))return[he[0],he[0],he[0],he[0]];if(he.length>=4&&!he.slice(0,4).some(isNaN))return[he[0],he[1],he[2],he[3]]},Ma=G=>{const he=G.trim().split(/[\s,]+/).map(Number);return he.length===4&&!he.some(isNaN)?he:he.length===1&&!isNaN(he[0])?[he[0],he[0],he[0],he[0]]:null},Tn=()=>{_&&(ge!=="0"&&_(`ev ${ge}`),(Oe!=="1.0"||rt!=="1.0")&&_(`wb ${Oe} ${rt}`),Ie!=="0 0 0 0"&&Ie!==""&&_(`bl ${Ie}`),ar!==3&&_(`demo ${ar}`),te.trim().length>0&&_(`matrix ${te.replace(/\s+/g," ")}`),_("render"));const G={...r},he=parseFloat(ge);isNaN(he)||(G.exposure=he);const re=parseFloat(Oe),Te=parseFloat(rt);!isNaN(re)&&!isNaN(Te)&&(G.wbGains=[re,Te]),G.demosaicMethod=ar,G.renderMode="standard";const je=la();je?G.blackLevel=je:delete G.blackLevel;const et=te.trim().replace(/[\s,\n]+/g," ");if(et){const Qe=et.split(" ").map(Number);Qe.length===9&&!Qe.some(isNaN)?G.customMatrix=Qe:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete G.customMatrix;G.showKadc=Zt,G.subtractBlackLevelFromStats=Tt,n(G)},hc=()=>{Cr(!0)},Yn=G=>{_&&(ge!=="0"&&_(`ev ${ge}`),(Oe!=="1.0"||rt!=="1.0")&&_(`wb ${Oe} ${rt}`),Ie!=="0 0 0 0"&&Ie!==""&&_(`bl ${Ie}`),_(G==="bilinear"?"render zero color":"render zero"));const he={...r},re=la();re&&(he.blackLevel=re);const Te=parseFloat(Oe),je=parseFloat(rt);!isNaN(Te)&&!isNaN(je)&&(he.wbGains=[Te,je]);const et=parseFloat(ge);if(isNaN(et)||(he.exposure=et),G==="bilinear"){const Qe=te.trim().replace(/[\s,\n]+/g," ");if(Qe){const kt=Qe.split(" ").map(Number);kt.length===9&&!kt.some(isNaN)&&(he.customMatrix=kt)}}he.renderMode=G==="mosaic"?"zero-dependency":"zero-dep-color",he.showKadc=Zt,he.subtractBlackLevelFromStats=Tt,Cr(!1),n(he)},pc=()=>{const G=Ma(Ot),he=Ma(Qt),re=Ma(Wr);if(!G||!he||!re){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}_&&(ge!=="0"&&_(`ev ${ge}`),_(`render unmix ${G.join(" ")} ${he.join(" ")} ${re.join(" ")}`));const Te={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:G,bg:he,fg:re}};Te.showKadc=Zt,Te.subtractBlackLevelFromStats=Tt,n(Te)},qn=()=>{if(T){const G=T.means,he=[G[0],G[1],G[3],G[2]].map(re=>re.toFixed(1));dr(he.join(" "))}else alert("Please select an ROI on the image first.")},gc=()=>{if(T){const G=T.means,he=[G[0],G[1],G[3],G[2]].map(re=>re.toFixed(1));bt(he.join(" "))}else alert("Please select an ROI on the image first.")},z=G=>{G.target.files&&G.target.files.length>0&&v&&(v(G.target.files,_n),_==null||_(`drlab batch ${_n}`)),G.target.value="",vn(!1)},ne=async G=>{var re;const he=(re=G.target.files)==null?void 0:re[0];if(!(!he||!X)){try{const je=(await he.text()).split(`
`),et=[];let Qe=!1;for(let kt of je){if(kt=kt.trim(),!kt)continue;if(kt.toLowerCase().startsWith("index")){Qe=!0;continue}const tt=kt.split(",").map(Number);if(tt.length>=5){const _t=tt[1],gr=tt[2],Dr=tt[3],Pr=tt[4],ln=tt[5];!isNaN(_t)&&!isNaN(gr)&&!isNaN(Dr)&&!isNaN(Pr)&&et.push({x:_t,y:gr,w:Dr,h:Pr,ori:isNaN(ln)?void 0:ln})}}X(et),alert(`Imported ${et.length} ROIs successfully.`)}catch(Te){console.error("Import failed",Te),alert("Failed to import CSV: "+Te.message)}G.target.value=""}},oe=async G=>{var re;const he=(re=G.target.files)==null?void 0:re[0];if(he){try{const je=(await he.text()).split(`
`),et=[];et.push("#BlackLevel: 0,0,0,0"),et.push("#ImageHeight: 0"),et.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let Qe=1;for(let gr=0;gr<je.length;gr++){const Dr=je[gr].trim();if(!Dr||Dr.includes("R_mean")||Dr.includes("R_std"))continue;const Pr=Dr.split(/\s+/).map(Number);if(Pr.length<8||Pr.some(isNaN))continue;const ln=[Qe,1,Pr[0],Pr[2],Pr[6],Pr[4],Pr[1],Pr[3],Pr[7],Pr[5]].join(",");et.push(ln),Qe++}const kt=new Blob([et.join(`
`)],{type:"text/csv"}),tt=URL.createObjectURL(kt),_t=document.createElement("a");_t.href=tt,_t.download=he.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(_t),_t.click(),document.body.removeChild(_t),URL.revokeObjectURL(tt)}catch(Te){console.error("Conversion failed",Te),alert("Failed to convert file.")}G.target.value=""}},B=G=>{G.target.files&&G.target.files[0]&&(wt(G.target.files[0]),_==null||_("fft load a"))},ye=G=>{G.target.files&&G.target.files[0]&&(sr(G.target.files[0]),_==null||_("fft load b"))},Ee=()=>{it&&yt&&S&&(S(it,yt,ke,di),_==null||_("fft run"))},Fe=G=>{G.target.files&&G.target.files.length>0&&k&&(k(G.target.files),_==null||_("fft batch")),G.target.value=""},nt=G=>{G.target.files&&G.target.files.length>0&&w&&(w(G.target.files),_==null||_("fft stack")),G.target.value=""},Ze=()=>{fe&&(fe({useNR:Pa,useDeshading:pr}),_==null||_("batch compute"))},xe=(G,he,re)=>{ce&&ce(G,he,re)},Mt=Ot.trim()!==""&&Qt.trim()!==""&&Wr.trim()!=="",Me=r.renderMode==="advanced-zero-dep";return c.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[P&&c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[c.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),c.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),V&&!M&&c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),c.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),M&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),c.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),A&&c.jsx(Is,{title:"SFR Lab Tools (Scalar Unmixing)",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),c.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),Me&&c.jsxs("div",{className:"border-t border-orange-200 dark:border-orange-800 pt-3",children:[c.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>Xa(!xn),children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase",children:" (Batch Ops)"}),c.jsx("svg",{className:`w-4 h-4 text-orange-500 transition-transform ${xn?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),xn&&c.jsxs("div",{className:"mt-3 space-y-3 bg-white/50 dark:bg-black/20 p-2 rounded animate-in slide-in-from-top-1",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Standard Chart)"}),c.jsx("button",{onClick:de,disabled:!!J&&J>0,className:`w-full py-2 border font-bold text-xs rounded transition-all ${J&&J>0?"bg-emerald-600 text-white border-emerald-500 animate-pulse":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:J&&J>0?`Click ${J===1?"TL":J===2?"TR":J===3?"BL":"BR"}`:"Start Calibration (4-Pts)"}),!!J&&J>0&&c.jsx("p",{className:"text-[9px] text-emerald-600 dark:text-emerald-400 font-bold text-center",children:"Click corners: TopLeft  TopRight  BottomLeft  BottomRight"})]}),c.jsx("div",{className:"h-px bg-gray-300 dark:bg-slate-600 w-full"}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-[9px] font-bold text-gray-600 dark:text-gray-300",children:" (Manual Mark)"}),Z!==void 0&&Z>0&&c.jsxs("span",{className:"text-[9px] text-orange-500 font-bold",children:[Z," Selected"]})]}),c.jsx("button",{onClick:L,className:`w-full py-2 font-bold text-xs rounded shadow transition-all ${Y?"bg-orange-600 hover:bg-orange-500 text-white ring-2 ring-orange-300":"bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100"}`,children:Y?"Stop Marking (Active)":"Start Batch Marking"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:H,disabled:!Z,className:"flex-1 py-1.5 border border-indigo-300 dark:border-indigo-700 text-indigo-700 dark:text-indigo-400 font-bold text-[10px] rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})," (Save)"]}),c.jsx("input",{type:"file",ref:Io,className:"hidden",accept:".csv",onChange:ne}),c.jsxs("button",{onClick:()=>{var G;return(G=Io.current)==null?void 0:G.click()},className:"flex-1 py-1.5 border border-emerald-300 dark:border-emerald-700 text-emerald-700 dark:text-emerald-400 font-bold text-[10px] rounded hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-colors flex items-center justify-center gap-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})," (Import)"]})]}),Z!==void 0&&Z>0&&c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800/50 p-2 rounded border border-gray-200 dark:border-slate-700 mt-1",children:[c.jsx("div",{className:"text-[9px] font-bold text-gray-500 text-center mb-1",children:"UNIFIED TRANSFORM"}),c.jsxs("div",{className:"flex gap-2 mb-2 justify-center",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400",children:"Step (px)"}),c.jsx("input",{type:"number",min:"1",value:le,onChange:G=>De(Number(G.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400",children:"Scale"}),c.jsx("input",{type:"number",step:"0.01",value:Be,onChange:G=>at(Number(G.target.value)),className:"w-10 text-center text-[10px] bg-white dark:bg-slate-900 border rounded"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("button",{onClick:()=>xe("scale",1/Be,1/Be),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom Out (Shrink)",children:"-"}),c.jsx("button",{onClick:()=>xe("move",0,-le),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("button",{onClick:()=>xe("scale",Be,Be),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600 font-bold",title:"Zoom In (Expand)",children:"+"}),c.jsx("button",{onClick:()=>xe("move",-le,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("div",{className:"text-center text-[8px] text-gray-400 flex items-center justify-center",children:"Move"}),c.jsx("button",{onClick:()=>xe("move",le,0),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>xe("move",0,le),className:"bg-white dark:bg-slate-700 hover:bg-gray-200 rounded text-[10px] border dark:border-slate-600",children:""}),c.jsx("div",{})]})]}),Y&&c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center mt-1",children:"Hold Shift + Drag on canvas to add multiple ROIs."}),c.jsxs("div",{className:"flex justify-between items-center text-[10px] mt-2",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:Pa,onChange:G=>hr(G.target.checked),className:"rounded text-orange-500"}),"Jiang Official NR"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:pr,onChange:G=>ht(G.target.checked),className:"rounded text-purple-500"}),"Deshading"]})]}),c.jsxs("button",{onClick:Ze,disabled:!Z,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold text-xs rounded shadow transition-transform active:scale-95",children:["Calculate & Copy (",Z||0,")"]}),c.jsx("button",{onClick:Q,disabled:!Z,className:"w-full py-1.5 bg-gray-200 dark:bg-slate-700 hover:bg-red-100 hover:text-red-600 text-[10px] font-bold rounded transition-colors disabled:opacity-50",children:"Clear All Marks"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsx(ig,{checked:Nt,onChange:qe,label:" (Scalar Unmixing)"}),Nt&&c.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[c.jsx("div",{className:"col-span-1",children:"Param"}),c.jsx("div",{className:"text-center",children:"Ch0(R)"}),c.jsx("div",{className:"text-center",children:"Ch1(G1)"}),c.jsx("div",{className:"text-center",children:"Ch2(B)"}),c.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),c.jsx("input",{type:"text",value:Ot,onChange:G=>Et(G.target.value),placeholder:"0 0 0 0",className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Qt,onChange:G=>dr(G.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:qn,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Wr,onChange:G=>bt(G.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:gc,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsx("button",{onClick:pc,disabled:!ie||!Mt,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed",children:"RUN UNMIXING (ADV ZERO-DEP)"}),c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),b&&c.jsx(Is,{title:"FFT Lab (Noise Profile)",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:Ct,className:"hidden",onChange:B,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var G;return(G=Ct.current)==null?void 0:G.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${it?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:it?`A: ${it.name}`:"Load Image A"}),c.jsx("input",{type:"file",ref:ir,className:"hidden",onChange:ye,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var G;return(G=ir.current)==null?void 0:G.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${yt?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:yt?`B: ${yt.name}`:"Load Image B"})]}),c.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:di,onChange:G=>sa(G.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:Ee,disabled:!it||!yt,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),c.jsx("input",{type:"file",ref:or,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:Fe}),c.jsx("button",{onClick:()=>{var G;return(G=or.current)==null?void 0:G.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:Ve,className:"hidden",multiple:!0,onChange:nt,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var G;return(G=Ve.current)==null?void 0:G.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),c.jsx("div",{className:"flex flex-col gap-2 pt-2",children:c.jsx("button",{onClick:()=>{C==null||C(),_==null||_("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"})})]})}),s&&c.jsx(Is,{title:"DR Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>{f==null||f(),_==null||_("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),h&&d!==void 0&&c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),c.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:G=>h(parseInt(G.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),c.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),y&&x&&p!==void 0&&m!==void 0&&c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:"Layout:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"1",max:"50",value:p,onChange:G=>y(Math.max(1,parseInt(G.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),c.jsx("span",{className:"text-xs text-gray-400",children:"x"}),c.jsx("input",{type:"number",min:"1",max:"50",value:m,onChange:G=>x(Math.max(1,parseInt(G.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>{u==null||u(),_==null||_("mark")},disabled:!ie||l!==void 0&&l>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${ie?l&&l>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l>0?"Marking Active...":"Mark Corners"}),v&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",ref:Hn,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:z}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>vn(!$r),disabled:!g,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),$r&&c.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var G;Vr("single"),(G=Hn.current)==null||G.click()},children:"1. Independent Frames"}),c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var G;Vr("pair"),(G=Hn.current)==null||G.click()},children:"2. Pair Difference (A-B)"})]})]})]}),c.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("input",{type:"file",ref:zi,className:"hidden",accept:".txt",onChange:oe}),c.jsx("button",{onClick:()=>{var G;return(G=zi.current)==null?void 0:G.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),l!==void 0&&l>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[l===1&&"Click Top-Left Center",l===2&&"Click Top-Right Center",l===3&&"Click Bottom-Left Center",l===4&&"Click Bottom-Right Center"]})})]})]})}),$&&c.jsx(Is,{title:"Color Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),c.jsx("button",{onClick:()=>{R==null||R(),_==null||_("cl mark")},disabled:!ie||D!==void 0&&D>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${ie?D&&D>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:D&&D>0?"Marking Active...":"Mark 24-Patch Chart"}),D!==void 0&&D>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[D===1&&"Click Top-Left (Brown)",D===2&&"Click Top-Right (Cyanish)",D===3&&"Click Bottom-Left (White)",D===4&&"Click Bottom-Right (Black)"]})})]})}),c.jsx(Is,{title:"Selection Tools",children:c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),c.jsx("input",{type:"number",min:"1",value:fr,onChange:G=>Vt(G.target.value),disabled:!ie,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:Ro,disabled:!ie,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),c.jsx("button",{onClick:Gi,disabled:!ie,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),c.jsx(Is,{title:"Display Controls",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",c.jsx("b",{children:"Apply"}),"."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!ie,value:parseFloat(ge)||0,onChange:G=>Ka(G.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{id:"exposure",type:"number",step:"0.1",value:ge,onChange:G=>Ka(G.target.value),disabled:!ie,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),be&&c.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[c.jsx(ig,{checked:!!M,onChange:G=>{O&&O(G),_==null||_(`xtrans ${G?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),M&&N&&E&&c.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:N.x,onChange:G=>{const he=Math.min(5,Math.max(0,parseInt(G.target.value)||0));E({x:he}),_==null||_(`xtrans phase ${he} ${N.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:N.y,onChange:G=>{const he=Math.min(5,Math.max(0,parseInt(G.target.value)||0));E({y:he}),_==null||_(`xtrans phase ${N.x} ${he}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),c.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx(ig,{checked:Zt,onChange:ot,label:"Show k"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),c.jsxs("div",{children:[c.jsxs("button",{onClick:dc,disabled:!ie||!T,className:"w-full mb-3 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded shadow-sm transition-all active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",title:"Calculate Gains to make the selected area neutral gray, accounting for Color Matrix",children:[c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Spot WB (Matrix-Aware)"]}),c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),c.jsx("input",{type:"number",step:"0.01",value:Oe,onChange:G=>bn(G.target.value),disabled:!ie,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),c.jsx("input",{type:"number",step:"0.01",value:rt,onChange:G=>hi(G.target.value),disabled:!ie,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",c.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),c.jsx("button",{onClick:()=>st(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[c.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),c.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${Tt?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>Lt(!Tt),children:c.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${Tt?"translate-x-4":"translate-x-0"}`})})]})]}),c.jsx("input",{type:"text",value:Ie,onChange:G=>Le(G.target.value),disabled:!ie,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[c.jsx("span",{children:"Custom Color Matrix"}),c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:G=>{const he=Qd[G.target.value];he&&ue(he),G.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),Xe.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsx("textarea",{id:"customMatrix",value:te,onChange:Kn,disabled:!ie,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[c.jsx("button",{onClick:hc,disabled:!ie,className:"w-full text-sm font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-4 rounded-xl flex items-center justify-center border-2 border-slate-500 shadow-lg",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:c.jsxs("span",{className:"text-center leading-tight",children:["Apply Settings/Render",c.jsx("br",{}),c.jsx("span",{className:"text-xs font-normal opacity-90",children:"CM"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>xr(!0),disabled:!ie,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed py-3 px-2 rounded-lg transition-all active:scale-95 border border-gray-700",children:["",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] font-normal opacity-75",children:""})]}),c.jsx("button",{onClick:()=>U==null?void 0:U(),disabled:!ie,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-all py-3 rounded-lg flex items-center justify-center border border-gray-700 active:scale-95",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:"Generate 16bit DNG"})]}),c.jsx("div",{className:"text-center pt-1",children:c.jsx("button",{onClick:Oa,disabled:!ie,className:"text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors underline decoration-gray-300 hover:decoration-gray-600 underline-offset-2",children:"Reset Defaults (Local)"})})]})]})})]}),c.jsx(bo,{isOpen:en,onClose:()=>st(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),st(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[c.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("p",{className:"leading-relaxed",children:["Autofills. If no result is found or it's wrong or not precise enough, please check the ",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame(close the lens cap) with the same ISO/speed setting to calculate the average (using jiangtherapee) and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),c.jsx(bo,{isOpen:Jt,onClose:()=>Cr(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>Yn("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),c.jsxs("button",{onClick:()=>Yn("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),c.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),c.jsx(bo,{isOpen:yn,onClose:()=>xr(!1),onConfirm:()=>{Tn(),xr(!1)},title:"Official Render Options",confirmText:"Render",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),c.jsx("select",{id:"demosaic-modal",value:ar,onChange:Na,disabled:!ie||P||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:eA.map(G=>c.jsx("option",{value:G.value,children:G.label},G.value))}),P&&c.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&c.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},rA=j.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:l,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:h,onToggleXTrans:p,onXTransPhaseChange:y}=e,[m,x]=j.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[v,g]=j.useState(""),[b,S]=j.useState([]),[k,w]=j.useState(-1),C=j.useRef(null),P=j.useRef(null),O=j.useRef(null),N=j.useRef(null),E=j.useRef(null),M=j.useRef(null),_=j.useRef(null),$=j.useRef(null);j.useRef(null);const D=j.useRef({...n});j.useEffect(()=>{D.current={...n}},[n.exposure,n.demosaicMethod]);const R=j.useRef({fileA:null,fileB:null});j.useLayoutEffect(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},[m]);const A=(L,Q="out")=>{x(fe=>[...fe,{id:Date.now().toString()+Math.random(),type:Q,text:L}])};j.useImperativeHandle(t,()=>({log:(L,Q="in")=>{const fe=Q;let J=L;Q==="in"&&!L.startsWith(">")&&(J=`> ${L}`),A(J,fe)}}));const T=j.useRef(null);j.useEffect(()=>{if(e.roiStats&&e.roiStats!==T.current){const L=e.roiStats,Q=Math.round(L.x),fe=Math.round(L.y),J=Math.round(L.width),de=Math.round(L.height);A(`> sel ${Q} ${fe} ${J} ${de}`,"in");const H=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],X=c.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[c.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",Q,", ",fe,", ",J,"x",de,"]:"]}),c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[c.jsx("div",{children:"Ch"}),c.jsx("div",{className:"text-right",children:"Mean"}),c.jsx("div",{className:"text-right",children:"StdDev"})]}),H.map(ce=>c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[c.jsx("div",{className:ce.name==="R"?"text-red-500":ce.name==="B"?"text-blue-500":"text-green-500",children:ce.name}),c.jsx("div",{className:"text-right text-gray-300",children:L.means[ce.idx].toFixed(2)}),c.jsx("div",{className:"text-right text-gray-400",children:L.stdDevs[ce.idx].toFixed(2)})]},ce.name))]});A(X,"out"),T.current=L}},[e.roiStats,e.isBGGR]);const I=L=>{var de,H,X,ce,ie,V,be;const Q=L.trim().split(/\s+/),fe=Q[0].toLowerCase(),J=Q.slice(1);switch(fe){case"help":A("Available Commands:","info"),A("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),A("  wb <r> <b>        Set WB Gains","info"),A("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),A("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),A("  matrix <n1..n9>   Set Custom Color Matrix","info"),A("  xtrans <on|off>   Force X-Trans Mode","info"),A("  xtrans phase <x> <y>  Set X-Trans Phase","info"),A("  render            Apply settings & Render","info"),A("  render zero       Zero-Dependency Render","info"),A("  render unmix      Advanced Unmixing Render","info"),A("  sel <full|center> Select ROI","info"),A("  sel <x> <y> <w> <h> Select ROI manually","info"),A("  mark              Start DR Lab Corner Marking","info"),A("  gen test          Generate Test Pattern","info"),A("  fft load <a>      Load FFT Pair Image A","info"),A("  fft load <b>      Load FFT Pair Image B","info"),A("  fft run           Run FFT Pair Diff","info"),A("  cls               Clear Screen","info");break;case"cls":case"clear":x([]);break;case"ev":case"exposure":if(J.length<1){A(`Current EV: ${D.current.exposure}`,"info");return}const ge=parseFloat(J[0]);if(isNaN(ge)){A("Invalid EV value","err");return}D.current.exposure=ge,A(`EV set to ${ge} (run 'render' to apply)`);break;case"wb":if(J.length<2){A("Usage: wb <red_gain> <blue_gain>","err");return}const se=parseFloat(J[0]),te=parseFloat(J[1]);if(isNaN(se)||isNaN(te)){A("Invalid gains","err");return}D.current.wbGains=[se,te],A(`WB set to R:${se} B:${te}`);break;case"bl":case"black":if(J.length===0){A(`Current BL: ${((de=D.current.blackLevel)==null?void 0:de.join(" "))||"Auto"}`,"info");return}let ue=J.map(Number);if(ue.some(isNaN)){A("Invalid numbers","err");return}if(ue.length===1&&(ue=[ue[0],ue[0],ue[0],ue[0]]),ue.length<4){A("Need 1 or 4 values","err");return}D.current.blackLevel=[ue[0],ue[1],ue[2],ue[3]],D.current.subtractBlackLevelFromStats=!0,D.current.showKadc=!0,A(`Black Level set: ${ue.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if(J.length===0){A("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const Ie=parseInt(J[0]);if(isNaN(Ie)){A("Invalid method ID","err");return}D.current.demosaicMethod=Ie,A(`Demosaic set to ID ${Ie}`);break;case"matrix":if(J.length!==9){A("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const Le=J.map(Number);if(Le.some(isNaN)){A("Invalid matrix values","err");return}D.current.customMatrix=Le,A("Custom Color Matrix set.");break;case"xtrans":if(J[0]==="on"||J[0]==="true")p?(p(!0),A("X-Trans conversion ON")):A("Feature not available","err");else if(J[0]==="off"||J[0]==="false")p?(p(!1),A("X-Trans conversion OFF")):A("Feature not available","err");else if(J[0]==="phase"){if(J.length<3){A("Usage: xtrans phase <x> <y>","err");return}const Oe=parseInt(J[1]),Re=parseInt(J[2]);y&&(y({x:Oe,y:Re}),A(`X-Trans Phase set to (${Oe}, ${Re})`))}else A("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if(J[0]==="zero"){const Oe=J[1]==="color"?"zero-dep-color":"zero-dependency";D.current.renderMode=Oe,A(`Rendering Zero-Dependency (${Oe})...`)}else if(J[0]==="unmix"){if(J.length<13){A("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const Oe=J.slice(1).map(Number);if(Oe.some(isNaN)){A("Invalid params","err");return}D.current.renderMode="advanced-zero-dep",D.current.advancedZeroDep={bl:[Oe[0],Oe[1],Oe[2],Oe[3]],bg:[Oe[4],Oe[5],Oe[6],Oe[7]],fg:[Oe[8],Oe[9],Oe[10],Oe[11]]},A("Rendering Advanced Unmix...")}else D.current.renderMode="standard",A("Rendering Standard Pipeline...");a({...D.current});break;case"sel":case"select":if(!r||!i){A("No image loaded","err");return}if(J[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if(J[0]==="center"){const Oe=parseInt(J[1])||64,Re=Math.floor((r.width-Oe)/2),rt=Math.floor((r.height-Oe)/2);i({x:Re,y:rt,w:Oe,h:Oe})}else if(J.length===4){const[Oe,Re,rt,mt]=J.map(Number);if([Oe,Re,rt,mt].some(isNaN)){A("Invalid coordinates","err");return}i({x:Oe,y:Re,w:rt,h:mt})}else A("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),A("Interactive marking started. Click 4 corners on canvas."));break;case"gen":(J[0]==="test"||J[0]==="pattern")&&s&&(s(),A("Generated Test Pattern"));break;case"drlab":if(J[0]==="config"){const[Oe,Re,rt]=J.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(Oe||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(Re||10),e.onDrGridColsChange&&e.onDrGridColsChange(rt||10),A(`DR Grid Configured: Size=${Oe}, Grid=${Re}x${rt}`)}else J[0]==="batch"&&(J[1]==="pair"?(A("Select file pairs for DR Lab..."),(H=N.current)==null||H.click()):(A("Select single files for DR Lab..."),(X=O.current)==null||X.click()));break;case"fft":J[0]==="load"?J[1]==="a"?(ce=E.current)==null||ce.click():J[1]==="b"?(ie=M.current)==null||ie.click():A("Usage: fft load <a|b>","err"):J[0]==="run"?R.current.fileA&&R.current.fileB&&u?(A(`Processing Pair: ${R.current.fileA.name} - ${R.current.fileB.name}`),u(R.current.fileA,R.current.fileB,!1,!0)):A("Load both A and B first","err"):J[0]==="stack"?(A("Select files for Stack FFT..."),(V=_.current)==null||V.click()):J[0]==="batch"&&(A("Select files for Batch Diff...","info"),(be=$.current)==null||be.click());break;case"crosscalc":h&&(h(),A("Opened Cross-Calculator"));break;default:A(`Unknown command: ${fe}`,"err")}},U=L=>{if(L.key==="Enter"){const Q=v.trim();if(!Q)return;A(`> ${Q}`,"in"),Q.split(";").forEach(J=>{J.trim()&&I(J.trim())}),S(J=>[...J,Q]),w(-1),g("")}else if(L.key==="ArrowUp"){if(L.preventDefault(),b.length>0){const Q=k===-1?b.length-1:Math.max(0,k-1);w(Q),g(b[Q])}}else if(L.key==="ArrowDown")if(L.preventDefault(),k!==-1){const Q=Math.min(b.length-1,k+1);w(Q),g(b[Q])}else g("")},Z=(L,Q)=>{L.target.files&&L.target.files.length>0&&l&&(A(`Batch processing ${L.target.files.length} files in ${Q} mode...`),l(L.target.files,Q)),L.target.value=""},Y=(L,Q)=>{var J;const fe=(J=L.target.files)==null?void 0:J[0];fe&&(Q==="A"?R.current.fileA=fe:R.current.fileB=fe,A(`Loaded ${Q}: ${fe.name}`)),L.target.value=""};return c.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[c.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[c.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),c.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),c.jsx("div",{ref:C,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:m.map(L=>c.jsxs("div",{className:`mb-1 ${L.type==="in"?"opacity-50":""} ${L.type==="err"?"text-red-500":""} ${L.type==="info"?"text-cyan-400":""}`,children:[L.type!=="in"&&typeof L.text=="string"&&!L.text.startsWith(">")&&c.jsx("span",{className:"mr-2 opacity-50",children:">"}),L.text]},L.id))}),c.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[c.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),c.jsx("input",{ref:P,type:"text",value:v,onChange:L=>g(L.target.value),onKeyDown:U,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),c.jsx("input",{type:"file",ref:O,className:"hidden",multiple:!0,onChange:L=>Z(L,"single")}),c.jsx("input",{type:"file",ref:N,className:"hidden",multiple:!0,onChange:L=>Z(L,"pair")}),c.jsx("input",{type:"file",ref:E,className:"hidden",onChange:L=>Y(L,"A")}),c.jsx("input",{type:"file",ref:M,className:"hidden",onChange:L=>Y(L,"B")}),c.jsx("input",{type:"file",ref:_,className:"hidden",multiple:!0,onChange:L=>{e.onProcessStackFft&&L.target.files&&(A(`Loading ${L.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(L.target.files)),L.target.value=""}}),c.jsx("input",{type:"file",ref:$,className:"hidden",multiple:!0,onChange:L=>{e.onProcessBatchDiff&&L.target.files&&(A("Starting Batch Diff..."),e.onProcessBatchDiff(L.target.files)),L.target.value=""}})]})}),nA=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d.some(h=>h>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},aA=e=>{const[t,r]=j.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,l=j.useRef(null),u=j.useRef(!1),f=j.useRef(null);j.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),j.useEffect(()=>{var h;if(i&&n&&!u.current){u.current=!0;const p=nA(n,a),y=p&&p.some(m=>m>0);if(p&&y){console.log("[AutoApply] Detected Black Levels via Bridge:",p),(h=l.current)==null||h.log(`Auto-detected BL: ${p.join(" ")}`,"info");const m={...o,blackLevel:p,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};s(m)}}},[i,n,a,o,s]);const d=h=>{l.current&&l.current.log(h,"in")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[c.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),c.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),c.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[c.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:c.jsx(tA,{...e,onCommand:d})}),c.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:c.jsx(rA,{...e,ref:l})})]})]})},iA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),oA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),sA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),lA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),cA=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Im=.1,Rm=16,uA=Math.log(Im),fA=Math.log(Rm),dA=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Im,Math.min(Rm,d)))},o=()=>{t(Math.min(Rm,e*1.25))},s=()=>{t(Math.max(Im,e/1.25))},l=Math.log(e);return c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[c.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:c.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?c.jsx(cA,{}):c.jsx(lA,{})})}),c.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[c.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:c.jsx(iA,{})}),c.jsx("input",{type:"range",min:uA,max:fA,step:"0.01",value:l,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),c.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:c.jsx(oA,{})}),c.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),c.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:c.jsx(sA,{})})]})]})},hA=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return c.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function D3(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=D3(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function pt(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=D3(e))&&(n&&(n+=" "),n+=t);return n}var pA=Array.isArray,Vn=pA,gA=typeof Af=="object"&&Af&&Af.Object===Object&&Af,I3=gA,mA=I3,yA=typeof self=="object"&&self&&self.Object===Object&&self,vA=mA||yA||Function("return this")(),fi=vA,xA=fi,bA=xA.Symbol,mf=bA,f2=mf,R3=Object.prototype,wA=R3.hasOwnProperty,kA=R3.toString,Ac=f2?f2.toStringTag:void 0;function SA(e){var t=wA.call(e,Ac),r=e[Ac];try{e[Ac]=void 0;var n=!0}catch{}var a=kA.call(e);return n&&(t?e[Ac]=r:delete e[Ac]),a}var jA=SA,CA=Object.prototype,PA=CA.toString;function NA(e){return PA.call(e)}var OA=NA,d2=mf,MA=jA,_A=OA,AA="[object Null]",TA="[object Undefined]",h2=d2?d2.toStringTag:void 0;function EA(e){return e==null?e===void 0?TA:AA:h2&&h2 in Object(e)?MA(e):_A(e)}var Li=EA;function $A(e){return e!=null&&typeof e=="object"}var Bi=$A,DA=Li,IA=Bi,RA="[object Symbol]";function LA(e){return typeof e=="symbol"||IA(e)&&DA(e)==RA}var Zl=LA,BA=Vn,FA=Zl,zA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UA=/^\w*$/;function GA(e,t){if(BA(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||FA(e)?!0:UA.test(e)||!zA.test(e)||t!=null&&e in Object(t)}var xx=GA;function WA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _o=WA;const Ql=Ft(_o);var VA=Li,HA=_o,XA="[object AsyncFunction]",KA="[object Function]",YA="[object GeneratorFunction]",qA="[object Proxy]";function ZA(e){if(!HA(e))return!1;var t=VA(e);return t==KA||t==YA||t==XA||t==qA}var bx=ZA;const Je=Ft(bx);var QA=fi,JA=QA["__core-js_shared__"],e6=JA,sg=e6,p2=function(){var e=/[^.]+$/.exec(sg&&sg.keys&&sg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function t6(e){return!!p2&&p2 in e}var r6=t6,n6=Function.prototype,a6=n6.toString;function i6(e){if(e!=null){try{return a6.call(e)}catch{}try{return e+""}catch{}}return""}var L3=i6,o6=bx,s6=r6,l6=_o,c6=L3,u6=/[\\^$.*+?()[\]{}|]/g,f6=/^\[object .+?Constructor\]$/,d6=Function.prototype,h6=Object.prototype,p6=d6.toString,g6=h6.hasOwnProperty,m6=RegExp("^"+p6.call(g6).replace(u6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y6(e){if(!l6(e)||s6(e))return!1;var t=o6(e)?m6:f6;return t.test(c6(e))}var v6=y6;function x6(e,t){return e==null?void 0:e[t]}var b6=x6,w6=v6,k6=b6;function S6(e,t){var r=k6(e,t);return w6(r)?r:void 0}var _s=S6,j6=_s,C6=j6(Object,"create"),Th=C6,g2=Th;function P6(){this.__data__=g2?g2(null):{},this.size=0}var N6=P6;function O6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var M6=O6,_6=Th,A6="__lodash_hash_undefined__",T6=Object.prototype,E6=T6.hasOwnProperty;function $6(e){var t=this.__data__;if(_6){var r=t[e];return r===A6?void 0:r}return E6.call(t,e)?t[e]:void 0}var D6=$6,I6=Th,R6=Object.prototype,L6=R6.hasOwnProperty;function B6(e){var t=this.__data__;return I6?t[e]!==void 0:L6.call(t,e)}var F6=B6,z6=Th,U6="__lodash_hash_undefined__";function G6(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=z6&&t===void 0?U6:t,this}var W6=G6,V6=N6,H6=M6,X6=D6,K6=F6,Y6=W6;function Jl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jl.prototype.clear=V6;Jl.prototype.delete=H6;Jl.prototype.get=X6;Jl.prototype.has=K6;Jl.prototype.set=Y6;var q6=Jl;function Z6(){this.__data__=[],this.size=0}var Q6=Z6;function J6(e,t){return e===t||e!==e&&t!==t}var wx=J6,e8=wx;function t8(e,t){for(var r=e.length;r--;)if(e8(e[r][0],t))return r;return-1}var Eh=t8,r8=Eh,n8=Array.prototype,a8=n8.splice;function i8(e){var t=this.__data__,r=r8(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():a8.call(t,r,1),--this.size,!0}var o8=i8,s8=Eh;function l8(e){var t=this.__data__,r=s8(t,e);return r<0?void 0:t[r][1]}var c8=l8,u8=Eh;function f8(e){return u8(this.__data__,e)>-1}var d8=f8,h8=Eh;function p8(e,t){var r=this.__data__,n=h8(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var g8=p8,m8=Q6,y8=o8,v8=c8,x8=d8,b8=g8;function ec(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ec.prototype.clear=m8;ec.prototype.delete=y8;ec.prototype.get=v8;ec.prototype.has=x8;ec.prototype.set=b8;var $h=ec,w8=_s,k8=fi,S8=w8(k8,"Map"),kx=S8,m2=q6,j8=$h,C8=kx;function P8(){this.size=0,this.__data__={hash:new m2,map:new(C8||j8),string:new m2}}var N8=P8;function O8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var M8=O8,_8=M8;function A8(e,t){var r=e.__data__;return _8(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Dh=A8,T8=Dh;function E8(e){var t=T8(this,e).delete(e);return this.size-=t?1:0,t}var $8=E8,D8=Dh;function I8(e){return D8(this,e).get(e)}var R8=I8,L8=Dh;function B8(e){return L8(this,e).has(e)}var F8=B8,z8=Dh;function U8(e,t){var r=z8(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var G8=U8,W8=N8,V8=$8,H8=R8,X8=F8,K8=G8;function tc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}tc.prototype.clear=W8;tc.prototype.delete=V8;tc.prototype.get=H8;tc.prototype.has=X8;tc.prototype.set=K8;var Sx=tc,B3=Sx,Y8="Expected a function";function jx(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Y8);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(jx.Cache||B3),r}jx.Cache=B3;var F3=jx;const q8=Ft(F3);var Z8=F3,Q8=500;function J8(e){var t=Z8(e,function(n){return r.size===Q8&&r.clear(),n}),r=t.cache;return t}var eT=J8,tT=eT,rT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nT=/\\(\\)?/g,aT=tT(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(rT,function(r,n,a,i){t.push(a?i.replace(nT,"$1"):n||r)}),t}),iT=aT;function oT(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Cx=oT,y2=mf,sT=Cx,lT=Vn,cT=Zl,v2=y2?y2.prototype:void 0,x2=v2?v2.toString:void 0;function z3(e){if(typeof e=="string")return e;if(lT(e))return sT(e,z3)+"";if(cT(e))return x2?x2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var uT=z3,fT=uT;function dT(e){return e==null?"":fT(e)}var U3=dT,hT=Vn,pT=xx,gT=iT,mT=U3;function yT(e,t){return hT(e)?e:pT(e,t)?[e]:gT(mT(e))}var G3=yT,vT=Zl;function xT(e){if(typeof e=="string"||vT(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ih=xT,bT=G3,wT=Ih;function kT(e,t){t=bT(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[wT(t[r++])];return r&&r==n?e:void 0}var Px=kT,ST=Px;function jT(e,t,r){var n=e==null?void 0:ST(e,t);return n===void 0?r:n}var W3=jT;const ba=Ft(W3);function CT(e){return e==null}var PT=CT;const Ke=Ft(PT);var NT=Li,OT=Vn,MT=Bi,_T="[object String]";function AT(e){return typeof e=="string"||!OT(e)&&MT(e)&&NT(e)==_T}var TT=AT;const bs=Ft(TT);var V3={exports:{}},It={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx=Symbol.for("react.element"),Ox=Symbol.for("react.portal"),Rh=Symbol.for("react.fragment"),Lh=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),Fh=Symbol.for("react.provider"),zh=Symbol.for("react.context"),ET=Symbol.for("react.server_context"),Uh=Symbol.for("react.forward_ref"),Gh=Symbol.for("react.suspense"),Wh=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),Hh=Symbol.for("react.lazy"),$T=Symbol.for("react.offscreen"),H3;H3=Symbol.for("react.module.reference");function ja(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Nx:switch(e=e.type,e){case Rh:case Bh:case Lh:case Gh:case Wh:return e;default:switch(e=e&&e.$$typeof,e){case ET:case zh:case Uh:case Hh:case Vh:case Fh:return e;default:return t}}case Ox:return t}}}It.ContextConsumer=zh;It.ContextProvider=Fh;It.Element=Nx;It.ForwardRef=Uh;It.Fragment=Rh;It.Lazy=Hh;It.Memo=Vh;It.Portal=Ox;It.Profiler=Bh;It.StrictMode=Lh;It.Suspense=Gh;It.SuspenseList=Wh;It.isAsyncMode=function(){return!1};It.isConcurrentMode=function(){return!1};It.isContextConsumer=function(e){return ja(e)===zh};It.isContextProvider=function(e){return ja(e)===Fh};It.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nx};It.isForwardRef=function(e){return ja(e)===Uh};It.isFragment=function(e){return ja(e)===Rh};It.isLazy=function(e){return ja(e)===Hh};It.isMemo=function(e){return ja(e)===Vh};It.isPortal=function(e){return ja(e)===Ox};It.isProfiler=function(e){return ja(e)===Bh};It.isStrictMode=function(e){return ja(e)===Lh};It.isSuspense=function(e){return ja(e)===Gh};It.isSuspenseList=function(e){return ja(e)===Wh};It.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Rh||e===Bh||e===Lh||e===Gh||e===Wh||e===$T||typeof e=="object"&&e!==null&&(e.$$typeof===Hh||e.$$typeof===Vh||e.$$typeof===Fh||e.$$typeof===zh||e.$$typeof===Uh||e.$$typeof===H3||e.getModuleId!==void 0)};It.typeOf=ja;V3.exports=It;var DT=V3.exports,IT=Li,RT=Bi,LT="[object Number]";function BT(e){return typeof e=="number"||RT(e)&&IT(e)==LT}var X3=BT;const FT=Ft(X3);var zT=X3;function UT(e){return zT(e)&&e!=+e}var GT=UT;const rc=Ft(GT);var Fa=function(t){return t===0?0:t>0?1:-1},es=function(t){return bs(t)&&t.indexOf("%")===t.length-1},me=function(t){return FT(t)&&!rc(t)},WT=function(t){return Ke(t)},zr=function(t){return me(t)||bs(t)},VT=0,As=function(t){var r=++VT;return"".concat(t||"").concat(r)},ws=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!me(t)&&!bs(t))return n;var i;if(es(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return rc(i)&&(i=n),a&&i>r&&(i=r),i},eo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},HT=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Sr=function(t,r){return me(t)&&me(r)?function(n){return t+n*(r-t)}:function(){return r}};function s0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ba(n,t))===r})}var XT=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,l=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:l,a:h,b:(a-h*n)/r}},KT=function(t,r){return me(t)&&me(r)?t-r:bs(t)&&bs(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function cl(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}var YT=["viewBox","children"],qT=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],b2=["points","pathLength"],lg={svg:YT,polygon:b2,polyline:b2},Mx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],l0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),!Ql(n))return null;var a={};return Object.keys(n).forEach(function(i){Mx.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},ZT=function(t,r,n){return function(a){return t(r,n,a),null}},Ou=function(t,r,n){if(!Ql(t)||Lm(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];Mx.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=ZT(o,r,n))}),a},QT=["children"],JT=["children"];function w2(e,t){if(e==null)return{};var r=eE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}var k2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},S2=null,cg=null,_x=function e(t){if(t===S2&&Array.isArray(cg))return cg;var r=[];return j.Children.forEach(t,function(n){Ke(n)||(DT.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),cg=r,S2=t,r};function Un(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Pi(a)}):n=[Pi(t)],_x(e).forEach(function(a){var i=ba(a,"type.displayName")||ba(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ea(e,t){var r=Un(e,t);return r&&r[0]}var j2=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!me(n)||n<=0||!me(a)||a<=0)},tE=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],rE=function(t){return t&&t.type&&bs(t.type)&&tE.indexOf(t.type)>=0},K3=function(t){return t&&Bm(t)==="object"&&"clipDot"in t},nE=function(t,r,n,a){var i,o=(i=lg==null?void 0:lg[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Je(t)&&(a&&o.includes(r)||qT.includes(r))||n&&Mx.includes(r)},Ye=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!Ql(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;nE((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},Fm=function e(t,r){if(t===r)return!0;var n=j.Children.count(t);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return C2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!C2(i,o))return!1}return!0},C2=function(t,r){if(Ke(t)&&Ke(r))return!0;if(!Ke(t)&&!Ke(r)){var n=t.props||{},a=n.children,i=w2(n,QT),o=r.props||{},s=o.children,l=w2(o,JT);return a&&s?cl(i,l)&&Fm(a,s):!a&&!s?cl(i,l):!1}return!1},P2=function(t,r){var n=[],a={};return _x(t).forEach(function(i,o){if(rE(i))n.push(i);else if(i){var s=Pi(i.type),l=r[s]||{},u=l.handler,f=l.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},aE=function(t){var r=t&&t.type;return r&&k2[r]?k2[r]:null},iE=function(t,r){return _x(r).indexOf(t)},oE=["children","width","height","viewBox","className","style","title","desc"];function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zm.apply(this,arguments)}function sE(e,t){if(e==null)return{};var r=lE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Um(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,u=sE(e,oE),f=a||{width:r,height:n,x:0,y:0},d=pt("recharts-surface",i);return F.createElement("svg",zm({},Ye(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),F.createElement("title",null,s),F.createElement("desc",null,l),t)}var cE=["children","className"];function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gm.apply(this,arguments)}function uE(e,t){if(e==null)return{};var r=fE(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Pt=F.forwardRef(function(e,t){var r=e.children,n=e.className,a=uE(e,cE),i=pt("recharts-layer",n);return F.createElement("g",Gm({className:i},Ye(a,!0),{ref:t}),r)}),Ni=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function dE(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var hE=dE,pE=hE;function gE(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:pE(e,t,r)}var mE=gE,yE="\\ud800-\\udfff",vE="\\u0300-\\u036f",xE="\\ufe20-\\ufe2f",bE="\\u20d0-\\u20ff",wE=vE+xE+bE,kE="\\ufe0e\\ufe0f",SE="\\u200d",jE=RegExp("["+SE+yE+wE+kE+"]");function CE(e){return jE.test(e)}var Y3=CE;function PE(e){return e.split("")}var NE=PE,q3="\\ud800-\\udfff",OE="\\u0300-\\u036f",ME="\\ufe20-\\ufe2f",_E="\\u20d0-\\u20ff",AE=OE+ME+_E,TE="\\ufe0e\\ufe0f",EE="["+q3+"]",Wm="["+AE+"]",Vm="\\ud83c[\\udffb-\\udfff]",$E="(?:"+Wm+"|"+Vm+")",Z3="[^"+q3+"]",Q3="(?:\\ud83c[\\udde6-\\uddff]){2}",J3="[\\ud800-\\udbff][\\udc00-\\udfff]",DE="\\u200d",ej=$E+"?",tj="["+TE+"]?",IE="(?:"+DE+"(?:"+[Z3,Q3,J3].join("|")+")"+tj+ej+")*",RE=tj+ej+IE,LE="(?:"+[Z3+Wm+"?",Wm,Q3,J3,EE].join("|")+")",BE=RegExp(Vm+"(?="+Vm+")|"+LE+RE,"g");function FE(e){return e.match(BE)||[]}var zE=FE,UE=NE,GE=Y3,WE=zE;function VE(e){return GE(e)?WE(e):UE(e)}var HE=VE,XE=mE,KE=Y3,YE=HE,qE=U3;function ZE(e){return function(t){t=qE(t);var r=KE(t)?YE(t):void 0,n=r?r[0]:t.charAt(0),a=r?XE(r,1).join(""):t.slice(1);return n[e]()+a}}var QE=ZE,JE=QE,e7=JE("toUpperCase"),t7=e7;const Xh=Ft(t7);function Gt(e){return function(){return e}}const rj=Math.cos,c0=Math.sin,Ha=Math.sqrt,u0=Math.PI,Kh=2*u0,Hm=Math.PI,Xm=2*Hm,Vo=1e-6,r7=Xm-Vo;function nj(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function n7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nj;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class a7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nj:n7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,f=o-t,d=s-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Vo)if(!(Math.abs(d*l-u*f)>Vo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=a-s,m=l*l+u*u,x=p*p+y*y,v=Math.sqrt(m),g=Math.sqrt(h),b=i*Math.tan((Hm-Math.acos((m+h-x)/(2*v*g)))/2),S=b/g,k=b/v;Math.abs(S-1)>Vo&&this._append`L${t+S*f},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*p>f*y)},${this._x1=t+k*l},${this._y1=r+k*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,f=r+l,d=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Vo||Math.abs(this._y1-f)>Vo)&&this._append`L${u},${f}`,n&&(h<0&&(h=h%Xm+Xm),h>r7?this._append`A${n},${n},0,1,${d},${t-s},${r-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:h>Vo&&this._append`A${n},${n},0,${+(h>=Hm)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Ax(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new a7(t)}function Tx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aj(e){this._context=e}aj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Yh(e){return new aj(e)}function ij(e){return e[0]}function oj(e){return e[1]}function sj(e,t){var r=Gt(!0),n=null,a=Yh,i=null,o=Ax(s);e=typeof e=="function"?e:e===void 0?ij:Gt(e),t=typeof t=="function"?t:t===void 0?oj:Gt(t);function s(l){var u,f=(l=Tx(l)).length,d,h=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=f;++u)!(u<f&&r(d=l[u],u,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(d,u,l),+t(d,u,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Gt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Gt(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Gt(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function Jf(e,t,r){var n=null,a=Gt(!0),i=null,o=Yh,s=null,l=Ax(u);e=typeof e=="function"?e:e===void 0?ij:Gt(+e),t=typeof t=="function"?t:Gt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?oj:Gt(+r);function u(d){var h,p,y,m=(d=Tx(d)).length,x,v=!1,g,b=new Array(m),S=new Array(m);for(i==null&&(s=o(g=l())),h=0;h<=m;++h){if(!(h<m&&a(x=d[h],h,d))===v)if(v=!v)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=h-1;y>=p;--y)s.point(b[y],S[y]);s.lineEnd(),s.areaEnd()}v&&(b[h]=+e(x,h,d),S[h]=+t(x,h,d),s.point(n?+n(x,h,d):b[h],r?+r(x,h,d):S[h]))}if(g)return s=null,g+""||null}function f(){return sj().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Gt(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Gt(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Gt(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Gt(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Gt(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Gt(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Gt(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class lj{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function i7(e){return new lj(e,!0)}function o7(e){return new lj(e,!1)}const Ex={draw(e,t){const r=Ha(t/u0);e.moveTo(r,0),e.arc(0,0,r,0,Kh)}},s7={draw(e,t){const r=Ha(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},cj=Ha(1/3),l7=cj*2,c7={draw(e,t){const r=Ha(t/l7),n=r*cj;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},u7={draw(e,t){const r=Ha(t),n=-r/2;e.rect(n,n,r,r)}},f7=.8908130915292852,uj=c0(u0/10)/c0(7*u0/10),d7=c0(Kh/10)*uj,h7=-rj(Kh/10)*uj,p7={draw(e,t){const r=Ha(t*f7),n=d7*r,a=h7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Kh*i/5,s=rj(o),l=c0(o);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},ug=Ha(3),g7={draw(e,t){const r=-Ha(t/(ug*3));e.moveTo(0,r*2),e.lineTo(-ug*r,-r),e.lineTo(ug*r,-r),e.closePath()}},ua=-.5,fa=Ha(3)/2,Km=1/Ha(12),m7=(Km/2+1)*3,y7={draw(e,t){const r=Ha(t/m7),n=r/2,a=r*Km,i=n,o=r*Km+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(ua*n-fa*a,fa*n+ua*a),e.lineTo(ua*i-fa*o,fa*i+ua*o),e.lineTo(ua*s-fa*l,fa*s+ua*l),e.lineTo(ua*n+fa*a,ua*a-fa*n),e.lineTo(ua*i+fa*o,ua*o-fa*i),e.lineTo(ua*s+fa*l,ua*l-fa*s),e.closePath()}};function v7(e,t){let r=null,n=Ax(a);e=typeof e=="function"?e:Gt(e||Ex),t=typeof t=="function"?t:Gt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Gt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Gt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function f0(){}function d0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function fj(e){this._context=e}fj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:d0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:d0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function x7(e){return new fj(e)}function dj(e){this._context=e}dj.prototype={areaStart:f0,areaEnd:f0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:d0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b7(e){return new dj(e)}function hj(e){this._context=e}hj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:d0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w7(e){return new hj(e)}function pj(e){this._context=e}pj.prototype={areaStart:f0,areaEnd:f0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function k7(e){return new pj(e)}function N2(e){return e<0?-1:1}function O2(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(N2(i)+N2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function M2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function fg(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function h0(e){this._context=e}h0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fg(this,this._t0,M2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fg(this,M2(this,r=O2(this,e,t)),r);break;default:fg(this,this._t0,r=O2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function gj(e){this._context=new mj(e)}(gj.prototype=Object.create(h0.prototype)).point=function(e,t){h0.prototype.point.call(this,t,e)};function mj(e){this._context=e}mj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function S7(e){return new h0(e)}function j7(e){return new gj(e)}function yj(e){this._context=e}yj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=_2(e),a=_2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _2(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function C7(e){return new yj(e)}function qh(e,t){this._context=e,this._t=t}qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function P7(e){return new qh(e,.5)}function N7(e){return new qh(e,0)}function O7(e){return new qh(e,1)}function bl(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Ym(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function M7(e,t){return e[t]}function _7(e){const t=[];return t.key=e,t}function A7(){var e=Gt([]),t=Ym,r=bl,n=M7;function a(i){var o=Array.from(e.apply(this,arguments),_7),s,l=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=Tx(t(o));s<l;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Gt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Gt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Ym:typeof i=="function"?i:Gt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??bl,a):r},a}function T7(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}bl(e,t)}}function E7(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}bl(e,t)}}function $7(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,y=0;y<s;++y){var m=e[t[y]],x=m[n][1]||0,v=m[n-1][1]||0;p+=x-v}l+=d,u+=p*d}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,bl(e,t)}}function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}var D7=["type","size","sizeType"];function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(this,arguments)}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(r),!0).forEach(function(n){I7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I7(e,t,r){return t=R7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7(e){var t=L7(e,"string");return Mu(t)=="symbol"?t:t+""}function L7(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B7(e,t){if(e==null)return{};var r=F7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vj={symbolCircle:Ex,symbolCross:s7,symbolDiamond:c7,symbolSquare:u7,symbolStar:p7,symbolTriangle:g7,symbolWye:y7},z7=Math.PI/180,U7=function(t){var r="symbol".concat(Xh(t));return vj[r]||Ex},G7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*z7;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},W7=function(t,r){vj["symbol".concat(Xh(t))]=r},Zh=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=B7(t,D7),u=T2(T2({},l),{},{type:n,size:i,sizeType:s}),f=function(){var x=U7(n),v=v7().type(x).size(G7(i,s,n));return v()},d=u.className,h=u.cx,p=u.cy,y=Ye(u,!0);return h===+h&&p===+p&&i===+i?F.createElement("path",qm({},y,{className:pt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};Zh.registerSymbol=W7;function wl(e){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zm.apply(this,arguments)}function E2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function V7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E2(Object(r),!0).forEach(function(n){_u(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bj(n.key),n)}}function K7(e,t,r){return t&&X7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y7(e,t,r){return t=p0(t),q7(e,xj()?Reflect.construct(t,r||[],p0(e).constructor):t.apply(e,r))}function q7(e,t){if(t&&(wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z7(e)}function Z7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xj=function(){return!!e})()}function p0(e){return p0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p0(e)}function Q7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qm(e,t)}function Qm(e,t){return Qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qm(e,t)}function _u(e,t,r){return t=bj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bj(e){var t=J7(e,"string");return wl(t)=="symbol"?t:t+""}function J7(e,t){if(wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var da=32,$x=function(e){function t(){return H7(this,t),Y7(this,t,arguments)}return Q7(t,e),K7(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=da/2,o=da/6,s=da/3,l=n.inactive?a:n.color;if(n.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:da,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(da,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return F.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(da/8,"h").concat(da,"v").concat(da*3/4,"h").concat(-da,"z"),className:"recharts-legend-icon"});if(F.isValidElement(n.legendIcon)){var u=V7({},n);return delete u.legendIcon,F.cloneElement(n.legendIcon,u)}return F.createElement(Zh,{fill:l,cx:i,cy:i,size:da,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:da,height:da},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var m=p.formatter||l,x=pt(_u(_u({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=Je(p.value)?null:p.value;Ni(!Je(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?u:p.color;return F.createElement("li",Zm({className:x,style:d,key:"legend-item-".concat(y)},Ou(n.props,p,y)),F.createElement(Um,{width:o,height:o,viewBox:f,style:h},n.renderIcon(p)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},m?m(v,p,y):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(j.PureComponent);_u($x,"displayName","Legend");_u($x,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var e9=$h;function t9(){this.__data__=new e9,this.size=0}var r9=t9;function n9(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var a9=n9;function i9(e){return this.__data__.get(e)}var o9=i9;function s9(e){return this.__data__.has(e)}var l9=s9,c9=$h,u9=kx,f9=Sx,d9=200;function h9(e,t){var r=this.__data__;if(r instanceof c9){var n=r.__data__;if(!u9||n.length<d9-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new f9(n)}return r.set(e,t),this.size=r.size,this}var p9=h9,g9=$h,m9=r9,y9=a9,v9=o9,x9=l9,b9=p9;function nc(e){var t=this.__data__=new g9(e);this.size=t.size}nc.prototype.clear=m9;nc.prototype.delete=y9;nc.prototype.get=v9;nc.prototype.has=x9;nc.prototype.set=b9;var wj=nc,w9="__lodash_hash_undefined__";function k9(e){return this.__data__.set(e,w9),this}var S9=k9;function j9(e){return this.__data__.has(e)}var C9=j9,P9=Sx,N9=S9,O9=C9;function g0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new P9;++t<r;)this.add(e[t])}g0.prototype.add=g0.prototype.push=N9;g0.prototype.has=O9;var kj=g0;function M9(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Sj=M9;function _9(e,t){return e.has(t)}var jj=_9,A9=kj,T9=Sj,E9=jj,$9=1,D9=2;function I9(e,t,r,n,a,i){var o=r&$9,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=r&D9?new A9:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var y=e[d],m=t[d];if(n)var x=o?n(m,y,d,t,e,i):n(y,m,d,e,t,i);if(x!==void 0){if(x)continue;h=!1;break}if(p){if(!T9(t,function(v,g){if(!E9(p,g)&&(y===v||a(y,v,r,n,i)))return p.push(g)})){h=!1;break}}else if(!(y===m||a(y,m,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var Cj=I9,R9=fi,L9=R9.Uint8Array,B9=L9;function F9(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var z9=F9;function U9(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Dx=U9,$2=mf,D2=B9,G9=wx,W9=Cj,V9=z9,H9=Dx,X9=1,K9=2,Y9="[object Boolean]",q9="[object Date]",Z9="[object Error]",Q9="[object Map]",J9="[object Number]",e$="[object RegExp]",t$="[object Set]",r$="[object String]",n$="[object Symbol]",a$="[object ArrayBuffer]",i$="[object DataView]",I2=$2?$2.prototype:void 0,dg=I2?I2.valueOf:void 0;function o$(e,t,r,n,a,i,o){switch(r){case i$:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case a$:return!(e.byteLength!=t.byteLength||!i(new D2(e),new D2(t)));case Y9:case q9:case J9:return G9(+e,+t);case Z9:return e.name==t.name&&e.message==t.message;case e$:case r$:return e==t+"";case Q9:var s=V9;case t$:var l=n&X9;if(s||(s=H9),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=K9,o.set(e,t);var f=W9(s(e),s(t),n,a,i,o);return o.delete(e),f;case n$:if(dg)return dg.call(e)==dg.call(t)}return!1}var s$=o$;function l$(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Pj=l$,c$=Pj,u$=Vn;function f$(e,t,r){var n=t(e);return u$(e)?n:c$(n,r(e))}var d$=f$;function h$(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var p$=h$;function g$(){return[]}var m$=g$,y$=p$,v$=m$,x$=Object.prototype,b$=x$.propertyIsEnumerable,R2=Object.getOwnPropertySymbols,w$=R2?function(e){return e==null?[]:(e=Object(e),y$(R2(e),function(t){return b$.call(e,t)}))}:v$,k$=w$;function S$(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var j$=S$,C$=Li,P$=Bi,N$="[object Arguments]";function O$(e){return P$(e)&&C$(e)==N$}var M$=O$,L2=M$,_$=Bi,Nj=Object.prototype,A$=Nj.hasOwnProperty,T$=Nj.propertyIsEnumerable,E$=L2(function(){return arguments}())?L2:function(e){return _$(e)&&A$.call(e,"callee")&&!T$.call(e,"callee")},Ix=E$,m0={exports:{}};function $$(){return!1}var D$=$$;m0.exports;(function(e,t){var r=fi,n=D$,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(m0,m0.exports);var Oj=m0.exports,I$=9007199254740991,R$=/^(?:0|[1-9]\d*)$/;function L$(e,t){var r=typeof e;return t=t??I$,!!t&&(r=="number"||r!="symbol"&&R$.test(e))&&e>-1&&e%1==0&&e<t}var Rx=L$,B$=9007199254740991;function F$(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=B$}var Lx=F$,z$=Li,U$=Lx,G$=Bi,W$="[object Arguments]",V$="[object Array]",H$="[object Boolean]",X$="[object Date]",K$="[object Error]",Y$="[object Function]",q$="[object Map]",Z$="[object Number]",Q$="[object Object]",J$="[object RegExp]",eD="[object Set]",tD="[object String]",rD="[object WeakMap]",nD="[object ArrayBuffer]",aD="[object DataView]",iD="[object Float32Array]",oD="[object Float64Array]",sD="[object Int8Array]",lD="[object Int16Array]",cD="[object Int32Array]",uD="[object Uint8Array]",fD="[object Uint8ClampedArray]",dD="[object Uint16Array]",hD="[object Uint32Array]",Kt={};Kt[iD]=Kt[oD]=Kt[sD]=Kt[lD]=Kt[cD]=Kt[uD]=Kt[fD]=Kt[dD]=Kt[hD]=!0;Kt[W$]=Kt[V$]=Kt[nD]=Kt[H$]=Kt[aD]=Kt[X$]=Kt[K$]=Kt[Y$]=Kt[q$]=Kt[Z$]=Kt[Q$]=Kt[J$]=Kt[eD]=Kt[tD]=Kt[rD]=!1;function pD(e){return G$(e)&&U$(e.length)&&!!Kt[z$(e)]}var gD=pD;function mD(e){return function(t){return e(t)}}var Mj=mD,y0={exports:{}};y0.exports;(function(e,t){var r=I3,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(y0,y0.exports);var yD=y0.exports,vD=gD,xD=Mj,B2=yD,F2=B2&&B2.isTypedArray,bD=F2?xD(F2):vD,_j=bD,wD=j$,kD=Ix,SD=Vn,jD=Oj,CD=Rx,PD=_j,ND=Object.prototype,OD=ND.hasOwnProperty;function MD(e,t){var r=SD(e),n=!r&&kD(e),a=!r&&!n&&jD(e),i=!r&&!n&&!a&&PD(e),o=r||n||a||i,s=o?wD(e.length,String):[],l=s.length;for(var u in e)(t||OD.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||CD(u,l)))&&s.push(u);return s}var _D=MD,AD=Object.prototype;function TD(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||AD;return e===r}var ED=TD;function $D(e,t){return function(r){return e(t(r))}}var Aj=$D,DD=Aj,ID=DD(Object.keys,Object),RD=ID,LD=ED,BD=RD,FD=Object.prototype,zD=FD.hasOwnProperty;function UD(e){if(!LD(e))return BD(e);var t=[];for(var r in Object(e))zD.call(e,r)&&r!="constructor"&&t.push(r);return t}var GD=UD,WD=bx,VD=Lx;function HD(e){return e!=null&&VD(e.length)&&!WD(e)}var yf=HD,XD=_D,KD=GD,YD=yf;function qD(e){return YD(e)?XD(e):KD(e)}var Qh=qD,ZD=d$,QD=k$,JD=Qh;function eI(e){return ZD(e,JD,QD)}var tI=eI,z2=tI,rI=1,nI=Object.prototype,aI=nI.hasOwnProperty;function iI(e,t,r,n,a,i){var o=r&rI,s=z2(e),l=s.length,u=z2(t),f=u.length;if(l!=f&&!o)return!1;for(var d=l;d--;){var h=s[d];if(!(o?h in t:aI.call(t,h)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var m=!0;i.set(e,t),i.set(t,e);for(var x=o;++d<l;){h=s[d];var v=e[h],g=t[h];if(n)var b=o?n(g,v,h,t,e,i):n(v,g,h,e,t,i);if(!(b===void 0?v===g||a(v,g,r,n,i):b)){m=!1;break}x||(x=h=="constructor")}if(m&&!x){var S=e.constructor,k=t.constructor;S!=k&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof k=="function"&&k instanceof k)&&(m=!1)}return i.delete(e),i.delete(t),m}var oI=iI,sI=_s,lI=fi,cI=sI(lI,"DataView"),uI=cI,fI=_s,dI=fi,hI=fI(dI,"Promise"),pI=hI,gI=_s,mI=fi,yI=gI(mI,"Set"),Tj=yI,vI=_s,xI=fi,bI=vI(xI,"WeakMap"),wI=bI,Jm=uI,ey=kx,ty=pI,ry=Tj,ny=wI,Ej=Li,ac=L3,U2="[object Map]",kI="[object Object]",G2="[object Promise]",W2="[object Set]",V2="[object WeakMap]",H2="[object DataView]",SI=ac(Jm),jI=ac(ey),CI=ac(ty),PI=ac(ry),NI=ac(ny),Ho=Ej;(Jm&&Ho(new Jm(new ArrayBuffer(1)))!=H2||ey&&Ho(new ey)!=U2||ty&&Ho(ty.resolve())!=G2||ry&&Ho(new ry)!=W2||ny&&Ho(new ny)!=V2)&&(Ho=function(e){var t=Ej(e),r=t==kI?e.constructor:void 0,n=r?ac(r):"";if(n)switch(n){case SI:return H2;case jI:return U2;case CI:return G2;case PI:return W2;case NI:return V2}return t});var OI=Ho,hg=wj,MI=Cj,_I=s$,AI=oI,X2=OI,K2=Vn,Y2=Oj,TI=_j,EI=1,q2="[object Arguments]",Z2="[object Array]",ed="[object Object]",$I=Object.prototype,Q2=$I.hasOwnProperty;function DI(e,t,r,n,a,i){var o=K2(e),s=K2(t),l=o?Z2:X2(e),u=s?Z2:X2(t);l=l==q2?ed:l,u=u==q2?ed:u;var f=l==ed,d=u==ed,h=l==u;if(h&&Y2(e)){if(!Y2(t))return!1;o=!0,f=!1}if(h&&!f)return i||(i=new hg),o||TI(e)?MI(e,t,r,n,a,i):_I(e,t,l,r,n,a,i);if(!(r&EI)){var p=f&&Q2.call(e,"__wrapped__"),y=d&&Q2.call(t,"__wrapped__");if(p||y){var m=p?e.value():e,x=y?t.value():t;return i||(i=new hg),a(m,x,r,n,i)}}return h?(i||(i=new hg),AI(e,t,r,n,a,i)):!1}var II=DI,RI=II,J2=Bi;function $j(e,t,r,n,a){return e===t?!0:e==null||t==null||!J2(e)&&!J2(t)?e!==e&&t!==t:RI(e,t,r,n,$j,a)}var Bx=$j,LI=wj,BI=Bx,FI=1,zI=2;function UI(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var l=s[0],u=e[l],f=s[1];if(o&&s[2]){if(u===void 0&&!(l in e))return!1}else{var d=new LI;if(n)var h=n(u,f,l,e,t,d);if(!(h===void 0?BI(f,u,FI|zI,n,d):h))return!1}}return!0}var GI=UI,WI=_o;function VI(e){return e===e&&!WI(e)}var Dj=VI,HI=Dj,XI=Qh;function KI(e){for(var t=XI(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,HI(a)]}return t}var YI=KI;function qI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Ij=qI,ZI=GI,QI=YI,JI=Ij;function eR(e){var t=QI(e);return t.length==1&&t[0][2]?JI(t[0][0],t[0][1]):function(r){return r===e||ZI(r,e,t)}}var tR=eR;function rR(e,t){return e!=null&&t in Object(e)}var nR=rR,aR=G3,iR=Ix,oR=Vn,sR=Rx,lR=Lx,cR=Ih;function uR(e,t,r){t=aR(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=cR(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&lR(a)&&sR(o,a)&&(oR(e)||iR(e)))}var fR=uR,dR=nR,hR=fR;function pR(e,t){return e!=null&&hR(e,t,dR)}var gR=pR,mR=Bx,yR=W3,vR=gR,xR=xx,bR=Dj,wR=Ij,kR=Ih,SR=1,jR=2;function CR(e,t){return xR(e)&&bR(t)?wR(kR(e),t):function(r){var n=yR(r,e);return n===void 0&&n===t?vR(r,e):mR(t,n,SR|jR)}}var PR=CR;function NR(e){return e}var ic=NR;function OR(e){return function(t){return t==null?void 0:t[e]}}var MR=OR,_R=Px;function AR(e){return function(t){return _R(t,e)}}var TR=AR,ER=MR,$R=TR,DR=xx,IR=Ih;function RR(e){return DR(e)?ER(IR(e)):$R(e)}var LR=RR,BR=tR,FR=PR,zR=ic,UR=Vn,GR=LR;function WR(e){return typeof e=="function"?e:e==null?zR:typeof e=="object"?UR(e)?FR(e[0],e[1]):BR(e):GR(e)}var Ao=WR;function VR(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Rj=VR;function HR(e){return e!==e}var XR=HR;function KR(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var YR=KR,qR=Rj,ZR=XR,QR=YR;function JR(e,t,r){return t===t?QR(e,t,r):qR(e,ZR,r)}var eL=JR,tL=eL;function rL(e,t){var r=e==null?0:e.length;return!!r&&tL(e,t,0)>-1}var nL=rL;function aL(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var iL=aL;function oL(){}var sL=oL,pg=Tj,lL=sL,cL=Dx,uL=1/0,fL=pg&&1/cL(new pg([,-0]))[1]==uL?function(e){return new pg(e)}:lL,dL=fL,hL=kj,pL=nL,gL=iL,mL=jj,yL=dL,vL=Dx,xL=200;function bL(e,t,r){var n=-1,a=pL,i=e.length,o=!0,s=[],l=s;if(r)o=!1,a=gL;else if(i>=xL){var u=t?null:yL(e);if(u)return vL(u);o=!1,a=mL,l=new hL}else l=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(f)}else a(l,d,r)||(l!==s&&l.push(d),s.push(f))}return s}var wL=bL,kL=Ao,SL=wL;function jL(e,t){return e&&e.length?SL(e,kL(t)):[]}var CL=jL;const ew=Ft(CL);function Lj(e,t,r){return t===!0?ew(e,r):Je(t)?ew(e,t):e}function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}var PL=["ref"];function tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tw(Object(r),!0).forEach(function(n){Jh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fj(n.key),n)}}function OL(e,t,r){return t&&rw(e.prototype,t),r&&rw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ML(e,t,r){return t=v0(t),_L(e,Bj()?Reflect.construct(t,r||[],v0(e).constructor):t.apply(e,r))}function _L(e,t){if(t&&(kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AL(e)}function AL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bj=function(){return!!e})()}function v0(e){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v0(e)}function TL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ay(e,t)}function ay(e,t){return ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ay(e,t)}function Jh(e,t,r){return t=Fj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fj(e){var t=EL(e,"string");return kl(t)=="symbol"?t:t+""}function EL(e,t){if(kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $L(e,t){if(e==null)return{};var r=DL(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function IL(e){return e.value}function RL(e,t){if(F.isValidElement(e))return F.cloneElement(e,t);if(typeof e=="function")return F.createElement(e,t);t.ref;var r=$L(t,PL);return F.createElement($x,r)}var nw=1,ri=function(e){function t(){var r;NL(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=ML(this,t,[].concat(a)),Jh(r,"lastBoundingBox",{width:-1,height:-1}),r}return TL(t,e),OL(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>nw||Math.abs(a.height-this.lastBoundingBox.height)>nw)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?mi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();h={top:((f||0)-y.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return mi(mi({},d),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=mi(mi({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return F.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},RL(i,mi(mi({},this.props),{},{payload:Lj(f,u,IL)})))}}],[{key:"getWithHeight",value:function(n,a){var i=mi(mi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&me(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);Jh(ri,"displayName","Legend");Jh(ri,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var aw=mf,LL=Ix,BL=Vn,iw=aw?aw.isConcatSpreadable:void 0;function FL(e){return BL(e)||LL(e)||!!(iw&&e&&e[iw])}var zL=FL,UL=Pj,GL=zL;function zj(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=GL),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?zj(s,t-1,r,n,a):UL(a,s):n||(a[a.length]=s)}return a}var Uj=zj;function WL(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(r(i[l],l,i)===!1)break}return t}}var VL=WL,HL=VL,XL=HL(),KL=XL,YL=KL,qL=Qh;function ZL(e,t){return e&&YL(e,t,qL)}var Gj=ZL,QL=yf;function JL(e,t){return function(r,n){if(r==null)return r;if(!QL(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var eB=JL,tB=Gj,rB=eB,nB=rB(tB),Fx=nB,aB=Fx,iB=yf;function oB(e,t){var r=-1,n=iB(e)?Array(e.length):[];return aB(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var Wj=oB;function sB(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var lB=sB,ow=Zl;function cB(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=ow(e),o=t!==void 0,s=t===null,l=t===t,u=ow(t);if(!s&&!u&&!i&&e>t||i&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!l)return-1}return 0}var uB=cB,fB=uB;function dB(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var l=fB(a[n],i[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var hB=dB,gg=Cx,pB=Px,gB=Ao,mB=Wj,yB=lB,vB=Mj,xB=hB,bB=ic,wB=Vn;function kB(e,t,r){t.length?t=gg(t,function(i){return wB(i)?function(o){return pB(o,i.length===1?i[0]:i)}:i}):t=[bB];var n=-1;t=gg(t,vB(gB));var a=mB(e,function(i,o,s){var l=gg(t,function(u){return u(i)});return{criteria:l,index:++n,value:i}});return yB(a,function(i,o){return xB(i,o,r)})}var SB=kB;function jB(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var CB=jB,PB=CB,sw=Math.max;function NB(e,t,r){return t=sw(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=sw(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),PB(e,this,s)}}var OB=NB;function MB(e){return function(){return e}}var _B=MB,AB=_s,TB=function(){try{var e=AB(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Vj=TB,EB=_B,lw=Vj,$B=ic,DB=lw?function(e,t){return lw(e,"toString",{configurable:!0,enumerable:!1,value:EB(t),writable:!0})}:$B,IB=DB,RB=800,LB=16,BB=Date.now;function FB(e){var t=0,r=0;return function(){var n=BB(),a=LB-(n-r);if(r=n,a>0){if(++t>=RB)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var zB=FB,UB=IB,GB=zB,WB=GB(UB),VB=WB,HB=ic,XB=OB,KB=VB;function YB(e,t){return KB(XB(e,t,HB),e+"")}var qB=YB,ZB=wx,QB=yf,JB=Rx,eF=_o;function tF(e,t,r){if(!eF(r))return!1;var n=typeof t;return(n=="number"?QB(r)&&JB(t,r.length):n=="string"&&t in r)?ZB(r[t],e):!1}var ep=tF,rF=Uj,nF=SB,aF=qB,cw=ep,iF=aF(function(e,t){if(e==null)return[];var r=t.length;return r>1&&cw(e,t[0],t[1])?t=[]:r>2&&cw(t[0],t[1],t[2])&&(t=[t[0]]),nF(e,rF(t,1),[])}),oF=iF;const zx=Ft(oF);function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iy.apply(this,arguments)}function sF(e,t){return fF(e)||uF(e,t)||cF(e,t)||lF()}function lF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cF(e,t){if(e){if(typeof e=="string")return uw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uw(e,t)}}function uw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uF(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function fF(e){if(Array.isArray(e))return e}function fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(r),!0).forEach(function(n){dF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dF(e,t,r){return t=hF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hF(e){var t=pF(e,"string");return Au(t)=="symbol"?t:t+""}function pF(e,t){if(Au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gF(e){return Array.isArray(e)&&zr(e[0])&&zr(e[1])?e.join(" ~ "):e}var mF=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,m=t.label,x=t.labelFormatter,v=t.accessibilityLayer,g=v===void 0?!1:v,b=function(){if(f&&f.length){var M={padding:0,margin:0},_=(h?zx(f,h):f).map(function($,D){if($.type==="none")return null;var R=mg({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},s),A=$.formatter||d||gF,T=$.value,I=$.name,U=T,Z=I;if(A&&U!=null&&Z!=null){var Y=A(T,I,$,D,f);if(Array.isArray(Y)){var L=sF(Y,2);U=L[0],Z=L[1]}else U=Y}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:R},zr(Z)?F.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,zr(Z)?F.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,F.createElement("span",{className:"recharts-tooltip-item-value"},U),F.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:M},_)}return null},S=mg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),k=mg({margin:0},u),w=!Ke(m),C=w?m:"",P=pt("recharts-default-tooltip",p),O=pt("recharts-tooltip-label",y);w&&x&&f!==void 0&&f!==null&&(C=x(m,f));var N=g?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",iy({className:P,style:S},N),F.createElement("p",{className:O,style:k},F.isValidElement(C)?C:"".concat(C)),b())};function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function td(e,t,r){return t=yF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yF(e){var t=vF(e,"string");return Tu(t)=="symbol"?t:t+""}function vF(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tc="recharts-tooltip-wrapper",xF={visibility:"hidden"};function bF(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return pt(Tc,td(td(td(td({},"".concat(Tc,"-right"),me(r)&&t&&me(t.x)&&r>=t.x),"".concat(Tc,"-left"),me(r)&&t&&me(t.x)&&r<t.x),"".concat(Tc,"-bottom"),me(n)&&t&&me(t.y)&&n>=t.y),"".concat(Tc,"-top"),me(n)&&t&&me(t.y)&&n<t.y))}function dw(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(i&&me(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var h=f,p=l[n];return h<p?Math.max(d,l[n]):Math.max(f,l[n])}var y=d+s,m=l[n]+u;return y>m?Math.max(f,l[n]):Math.max(d,l[n])}function wF(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function kF(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=dw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=dw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=wF({translateX:f,translateY:d,useTranslate3d:s})):u=xF,{cssProperties:u,cssClasses:bF({translateX:f,translateY:d,coordinate:r})}}function Sl(e){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(e)}function hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(r),!0).forEach(function(n){sy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xj(n.key),n)}}function CF(e,t,r){return t&&jF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PF(e,t,r){return t=x0(t),NF(e,Hj()?Reflect.construct(t,r||[],x0(e).constructor):t.apply(e,r))}function NF(e,t){if(t&&(Sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OF(e)}function OF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hj=function(){return!!e})()}function x0(e){return x0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x0(e)}function MF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oy(e,t)}function oy(e,t){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oy(e,t)}function sy(e,t,r){return t=Xj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xj(e){var t=_F(e,"string");return Sl(t)=="symbol"?t:t+""}function _F(e,t){if(Sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gw=1,AF=function(e){function t(){var r;SF(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=PF(this,t,[].concat(a)),sy(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),sy(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return MF(t,e),CF(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>gw||Math.abs(n.height-this.state.lastBoundingBox.height)>gw)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,p=a.offset,y=a.position,m=a.reverseDirection,x=a.useTranslate3d,v=a.viewBox,g=a.wrapperStyle,b=kF({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:y,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:v}),S=b.cssClasses,k=b.cssProperties,w=pw(pw({transition:h&&i?"transform ".concat(s,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},g);return F.createElement("div",{tabIndex:-1,className:S,style:w,ref:function(P){n.wrapperNode=P}},u)}}])}(j.PureComponent),TF=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},To={isSsr:TF()};function jl(e){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(r),!0).forEach(function(n){Ux(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yj(n.key),n)}}function DF(e,t,r){return t&&$F(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IF(e,t,r){return t=b0(t),RF(e,Kj()?Reflect.construct(t,r||[],b0(e).constructor):t.apply(e,r))}function RF(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LF(e)}function LF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kj=function(){return!!e})()}function b0(e){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b0(e)}function BF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ly(e,t)}function ly(e,t){return ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ly(e,t)}function Ux(e,t,r){return t=Yj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yj(e){var t=FF(e,"string");return jl(t)=="symbol"?t:t+""}function FF(e,t){if(jl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zF(e){return e.dataKey}function UF(e,t){return F.isValidElement(e)?F.cloneElement(e,t):typeof e=="function"?F.createElement(e,t):F.createElement(mF,t)}var qr=function(e){function t(){return EF(this,t),IF(this,t,arguments)}return BF(t,e),DF(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,p=a.offset,y=a.payload,m=a.payloadUniqBy,x=a.position,v=a.reverseDirection,g=a.useTranslate3d,b=a.viewBox,S=a.wrapperStyle,k=y??[];d&&k.length&&(k=Lj(y.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),m,zF));var w=k.length>0;return F.createElement(AF,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:i,coordinate:f,hasPayload:w,offset:p,position:x,reverseDirection:v,useTranslate3d:g,viewBox:b,wrapperStyle:S},UF(u,yw(yw({},this.props),{},{payload:k})))}}])}(j.PureComponent);Ux(qr,"displayName","Tooltip");Ux(qr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!To.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var GF=fi,WF=function(){return GF.Date.now()},VF=WF,HF=/\s/;function XF(e){for(var t=e.length;t--&&HF.test(e.charAt(t)););return t}var KF=XF,YF=KF,qF=/^\s+/;function ZF(e){return e&&e.slice(0,YF(e)+1).replace(qF,"")}var QF=ZF,JF=QF,vw=_o,ez=Zl,xw=NaN,tz=/^[-+]0x[0-9a-f]+$/i,rz=/^0b[01]+$/i,nz=/^0o[0-7]+$/i,az=parseInt;function iz(e){if(typeof e=="number")return e;if(ez(e))return xw;if(vw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=vw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=JF(e);var r=rz.test(e);return r||nz.test(e)?az(e.slice(2),r?2:8):tz.test(e)?xw:+e}var qj=iz,oz=_o,yg=VF,bw=qj,sz="Expected a function",lz=Math.max,cz=Math.min;function uz(e,t,r){var n,a,i,o,s,l,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(sz);t=bw(t)||0,oz(r)&&(f=!!r.leading,d="maxWait"in r,i=d?lz(bw(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function p(w){var C=n,P=a;return n=a=void 0,u=w,o=e.apply(P,C),o}function y(w){return u=w,s=setTimeout(v,t),f?p(w):o}function m(w){var C=w-l,P=w-u,O=t-C;return d?cz(O,i-P):O}function x(w){var C=w-l,P=w-u;return l===void 0||C>=t||C<0||d&&P>=i}function v(){var w=yg();if(x(w))return g(w);s=setTimeout(v,m(w))}function g(w){return s=void 0,h&&n?p(w):(n=a=void 0,o)}function b(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function S(){return s===void 0?o:g(yg())}function k(){var w=yg(),C=x(w);if(n=arguments,a=this,l=w,C){if(s===void 0)return y(l);if(d)return clearTimeout(s),s=setTimeout(v,t),p(l)}return s===void 0&&(s=setTimeout(v,t)),o}return k.cancel=b,k.flush=S,k}var fz=uz,dz=fz,hz=_o,pz="Expected a function";function gz(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(pz);return hz(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),dz(e,t,{leading:n,maxWait:t,trailing:a})}var mz=gz;const Zj=Ft(mz);function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){yz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yz(e,t,r){return t=vz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vz(e){var t=xz(e,"string");return Eu(t)=="symbol"?t:t+""}function xz(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bz(e,t){return jz(e)||Sz(e,t)||kz(e,t)||wz()}function wz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kz(e,t){if(e){if(typeof e=="string")return kw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kw(e,t)}}function kw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function jz(e){if(Array.isArray(e))return e}var Oi=j.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,p=e.children,y=e.debounce,m=y===void 0?0:y,x=e.id,v=e.className,g=e.onResize,b=e.style,S=b===void 0?{}:b,k=j.useRef(null),w=j.useRef();w.current=g,j.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var C=j.useState({containerWidth:a.width,containerHeight:a.height}),P=bz(C,2),O=P[0],N=P[1],E=j.useCallback(function(_,$){N(function(D){var R=Math.round(_),A=Math.round($);return D.containerWidth===R&&D.containerHeight===A?D:{containerWidth:R,containerHeight:A}})},[]);j.useEffect(function(){var _=function(I){var U,Z=I[0].contentRect,Y=Z.width,L=Z.height;E(Y,L),(U=w.current)===null||U===void 0||U.call(w,Y,L)};m>0&&(_=Zj(_,m,{trailing:!0,leading:!1}));var $=new ResizeObserver(_),D=k.current.getBoundingClientRect(),R=D.width,A=D.height;return E(R,A),$.observe(k.current),function(){$.disconnect()}},[E,m]);var M=j.useMemo(function(){var _=O.containerWidth,$=O.containerHeight;if(_<0||$<0)return null;Ni(es(o)||es(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Ni(!r||r>0,"The aspect(%s) must be greater than zero.",r);var D=es(o)?_:o,R=es(l)?$:l;r&&r>0&&(D?R=D/r:R&&(D=R*r),h&&R>h&&(R=h)),Ni(D>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,R,o,l,f,d,r);var A=!Array.isArray(p)&&Pi(p.type).endsWith("Chart");return F.Children.map(p,function(T){return F.isValidElement(T)?j.cloneElement(T,rd({width:D,height:R},A?{style:rd({height:"100%",width:"100%",maxHeight:R,maxWidth:D},T.props.style)}:{})):T})},[r,p,l,h,d,f,O,o]);return F.createElement("div",{id:x?"".concat(x):void 0,className:pt("recharts-responsive-container",v),style:rd(rd({},S),{},{width:o,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:k},M)}),Gx=function(t){return null};Gx.displayName="Cell";function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function Sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(r),!0).forEach(function(n){Cz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cz(e,t,r){return t=Pz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pz(e){var t=Nz(e,"string");return $u(t)=="symbol"?t:t+""}function Nz(e,t){if($u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rs={widthCache:{},cacheCount:0},Oz=2e3,Mz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},jw="recharts_measurement_span";function _z(e){var t=cy({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ru=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||To.isSsr)return{width:0,height:0};var n=_z(r),a=JSON.stringify({text:t,copyStyle:n});if(Rs.widthCache[a])return Rs.widthCache[a];try{var i=document.getElementById(jw);i||(i=document.createElement("span"),i.setAttribute("id",jw),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=cy(cy({},Mz),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Rs.widthCache[a]=l,++Rs.cacheCount>Oz&&(Rs.cacheCount=0,Rs.widthCache={}),l}catch{return{width:0,height:0}}},Az=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function w0(e,t){return Dz(e)||$z(e,t)||Ez(e,t)||Tz()}function Tz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ez(e,t){if(e){if(typeof e=="string")return Cw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cw(e,t)}}function Cw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $z(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Dz(e){if(Array.isArray(e))return e}function Iz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lz(n.key),n)}}function Rz(e,t,r){return t&&Pw(e.prototype,t),r&&Pw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lz(e){var t=Bz(e,"string");return Du(t)=="symbol"?t:t+""}function Bz(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ow=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Fz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Qj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Uz=Object.keys(Qj),Js="NaN";function Gz(e,t){return e*Qj[t]}var nd=function(){function e(t,r){Iz(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Fz.test(r)&&(this.num=NaN,this.unit=""),Uz.includes(r)&&(this.num=Gz(t,r),this.unit="px")}return Rz(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=zz.exec(r))!==null&&n!==void 0?n:[],i=w0(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function Jj(e){if(e.includes(Js))return Js;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Nw.exec(t))!==null&&r!==void 0?r:[],a=w0(n,4),i=a[1],o=a[2],s=a[3],l=nd.parse(i??""),u=nd.parse(s??""),f=o==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return Js;t=t.replace(Nw,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=Ow.exec(t))!==null&&d!==void 0?d:[],p=w0(h,4),y=p[1],m=p[2],x=p[3],v=nd.parse(y??""),g=nd.parse(x??""),b=m==="+"?v.add(g):v.subtract(g);if(b.isNaN())return Js;t=t.replace(Ow,b.toString())}return t}var Mw=/\(([^()]*)\)/;function Wz(e){for(var t=e;t.includes("(");){var r=Mw.exec(t),n=w0(r,2),a=n[1];t=t.replace(Mw,Jj(a))}return t}function Vz(e){var t=e.replace(/\s+/g,"");return t=Wz(t),t=Jj(t),t}function Hz(e){try{return Vz(e)}catch{return Js}}function vg(e){var t=Hz(e.slice(5,-1));return t===Js?"":t}var Xz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Kz=["dx","dy","angle","className","breakAll"];function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uy.apply(this,arguments)}function _w(e,t){if(e==null)return{};var r=Yz(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Aw(e,t){return Jz(e)||Qz(e,t)||Zz(e,t)||qz()}function qz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zz(e,t){if(e){if(typeof e=="string")return Tw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tw(e,t)}}function Tw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Jz(e){if(Array.isArray(e))return e}var eC=/[ \f\n\r\t\v\u2028\u2029]+/,tC=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Ke(r)||(n?i=r.toString().split(""):i=r.toString().split(eC));var o=i.map(function(l){return{word:l,width:ru(l,a).width}}),s=n?0:ru("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},eU=function(t,r,n,a,i){var o=t.maxLines,s=t.children,l=t.style,u=t.breakAll,f=me(o),d=s,h=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(R,A){var T=A.word,I=A.width,U=R[R.length-1];if(U&&(a==null||i||U.width+I+n<Number(a)))U.words.push(T),U.width+=I+n;else{var Z={words:[T],width:I};R.push(Z)}return R},[])},p=h(r),y=function(D){return D.reduce(function(R,A){return R.width>A.width?R:A})};if(!f)return p;for(var m="",x=function(D){var R=d.slice(0,D),A=tC({breakAll:u,style:l,children:R+m}).wordsWithComputedWidth,T=h(A),I=T.length>o||y(T).width>Number(a);return[I,T]},v=0,g=d.length-1,b=0,S;v<=g&&b<=d.length-1;){var k=Math.floor((v+g)/2),w=k-1,C=x(w),P=Aw(C,2),O=P[0],N=P[1],E=x(k),M=Aw(E,1),_=M[0];if(!O&&!_&&(v=k+1),O&&_&&(g=k-1),!O&&_){S=N;break}b++}return S||p},Ew=function(t){var r=Ke(t)?[]:t.toString().split(eC);return[{words:r}]},tU=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!To.isSsr){var l,u,f=tC({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,u=h}else return Ew(a);return eU({breakAll:o,children:a,maxLines:s,style:i},l,u,r,n)}return Ew(a)},$w="#808080",k0=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,y=t.verticalAnchor,m=y===void 0?"end":y,x=t.fill,v=x===void 0?$w:x,g=_w(t,Xz),b=j.useMemo(function(){return tU({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),S=g.dx,k=g.dy,w=g.angle,C=g.className,P=g.breakAll,O=_w(g,Kz);if(!zr(n)||!zr(i))return null;var N=n+(me(S)?S:0),E=i+(me(k)?k:0),M;switch(m){case"start":M=vg("calc(".concat(u,")"));break;case"middle":M=vg("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:M=vg("calc(".concat(b.length-1," * -").concat(s,")"));break}var _=[];if(d){var $=b[0].width,D=g.width;_.push("scale(".concat((me(D)?D/$:1)/$,")"))}return w&&_.push("rotate(".concat(w,", ").concat(N,", ").concat(E,")")),_.length&&(O.transform=_.join(" ")),F.createElement("text",uy({},Ye(O,!0),{x:N,y:E,className:pt("recharts-text",C),textAnchor:p,fill:v.includes("url")?$w:v}),b.map(function(R,A){var T=R.words.join(P?"":" ");return F.createElement("tspan",{x:N,dy:A===0?M:s,key:"".concat(T,"-").concat(A)},T)}))};function So(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rU(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wx(e){let t,r,n;e.length!==2?(t=So,r=(s,l)=>So(e(s),l),n=(s,l)=>e(s)-l):(t=e===So||e===rU?e:nU,r=e,n=e);function a(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){const d=a(s,l,u,f-1);return d>u&&n(s[d-1],l)>-n(s[d],l)?d-1:d}return{left:a,center:o,right:i}}function nU(){return 0}function rC(e){return e===null?NaN:+e}function*aU(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const iU=Wx(So),vf=iU.right;Wx(rC).center;class Dw extends Map{constructor(t,r=lU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Iw(this,t))}has(t){return super.has(Iw(this,t))}set(t,r){return super.set(oU(this,t),r)}delete(t){return super.delete(sU(this,t))}}function Iw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function oU({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function sU({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function lU(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cU(e=So){if(e===So)return nC;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function nC(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const uU=Math.sqrt(50),fU=Math.sqrt(10),dU=Math.sqrt(2);function S0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=uU?10:i>=fU?5:i>=dU?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?S0(e,t,r*2):[s,l,u]}function fy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?S0(t,e,r):S0(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function dy(e,t,r){return t=+t,e=+e,r=+r,S0(e,t,r)[2]}function hy(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?dy(t,e,r):dy(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Rw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Lw(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function aC(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?nC:cU(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/l+h)),y=Math.min(n,Math.floor(t+(l-u)*d/l+h));aC(e,t,p,y,a)}const i=e[t];let o=r,s=n;for(Ec(e,r,t),a(e[n],i)>0&&Ec(e,r,n);o<s;){for(Ec(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?Ec(e,r,s):(++s,Ec(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function Ec(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function hU(e,t,r){if(e=Float64Array.from(aU(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Lw(e);if(t>=1)return Rw(e);var n,a=(n-1)*t,i=Math.floor(a),o=Rw(aC(e,i).subarray(0,i+1)),s=Lw(e.subarray(i+1));return o+(s-o)*(a-i)}}function pU(e,t,r=rC){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function gU(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Ca(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const py=Symbol("implicit");function Vx(){var e=new Dw,t=[],r=[],n=py;function a(i){let o=e.get(i);if(o===void 0){if(n!==py)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Dw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Vx(t,r).unknown(n)},Ca.apply(a,arguments),a}function Iu(){var e=Vx().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,p=a<n,y=p?a:n,m=p?n:a;i=(m-y)/Math.max(1,h-l+u*2),s&&(i=Math.floor(i)),y+=(m-y-i*(h-l))*f,o=i*(1-l),s&&(y=Math.round(y),o=Math.round(o));var x=gU(h).map(function(v){return y+i*v});return r(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return Iu(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},Ca.apply(d(),arguments)}function iC(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return iC(t())},e}function nu(){return iC(Iu.apply(null,arguments).paddingInner(1))}function Hx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function oC(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function xf(){}var Ru=.7,j0=1/Ru,ul="\\s*([+-]?\\d+)\\s*",Lu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mU=/^#([0-9a-f]{3,8})$/,yU=new RegExp(`^rgb\\(${ul},${ul},${ul}\\)$`),vU=new RegExp(`^rgb\\(${ni},${ni},${ni}\\)$`),xU=new RegExp(`^rgba\\(${ul},${ul},${ul},${Lu}\\)$`),bU=new RegExp(`^rgba\\(${ni},${ni},${ni},${Lu}\\)$`),wU=new RegExp(`^hsl\\(${Lu},${ni},${ni}\\)$`),kU=new RegExp(`^hsla\\(${Lu},${ni},${ni},${Lu}\\)$`),Bw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hx(xf,Bu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fw,formatHex:Fw,formatHex8:SU,formatHsl:jU,formatRgb:zw,toString:zw});function Fw(){return this.rgb().formatHex()}function SU(){return this.rgb().formatHex8()}function jU(){return sC(this).formatHsl()}function zw(){return this.rgb().formatRgb()}function Bu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=mU.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Uw(t):r===3?new Ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ad(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ad(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yU.exec(e))?new Ln(t[1],t[2],t[3],1):(t=vU.exec(e))?new Ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xU.exec(e))?ad(t[1],t[2],t[3],t[4]):(t=bU.exec(e))?ad(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wU.exec(e))?Vw(t[1],t[2]/100,t[3]/100,1):(t=kU.exec(e))?Vw(t[1],t[2]/100,t[3]/100,t[4]):Bw.hasOwnProperty(e)?Uw(Bw[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function Uw(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function ad(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ln(e,t,r,n)}function CU(e){return e instanceof xf||(e=Bu(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function gy(e,t,r,n){return arguments.length===1?CU(e):new Ln(e,t,r,n??1)}function Ln(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Hx(Ln,gy,oC(xf,{brighter(e){return e=e==null?j0:Math.pow(j0,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ru:Math.pow(Ru,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(ss(this.r),ss(this.g),ss(this.b),C0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gw,formatHex:Gw,formatHex8:PU,formatRgb:Ww,toString:Ww}));function Gw(){return`#${ts(this.r)}${ts(this.g)}${ts(this.b)}`}function PU(){return`#${ts(this.r)}${ts(this.g)}${ts(this.b)}${ts((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ww(){const e=C0(this.opacity);return`${e===1?"rgb(":"rgba("}${ss(this.r)}, ${ss(this.g)}, ${ss(this.b)}${e===1?")":`, ${e})`}`}function C0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ss(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ts(e){return e=ss(e),(e<16?"0":"")+e.toString(16)}function Vw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new La(e,t,r,n)}function sC(e){if(e instanceof La)return new La(e.h,e.s,e.l,e.opacity);if(e instanceof xf||(e=Bu(e)),!e)return new La;if(e instanceof La)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new La(o,s,l,e.opacity)}function NU(e,t,r,n){return arguments.length===1?sC(e):new La(e,t,r,n??1)}function La(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Hx(La,NU,oC(xf,{brighter(e){return e=e==null?j0:Math.pow(j0,e),new La(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ru:Math.pow(Ru,e),new La(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ln(xg(e>=240?e-240:e+120,a,n),xg(e,a,n),xg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new La(Hw(this.h),id(this.s),id(this.l),C0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=C0(this.opacity);return`${e===1?"hsl(":"hsla("}${Hw(this.h)}, ${id(this.s)*100}%, ${id(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hw(e){return e=(e||0)%360,e<0?e+360:e}function id(e){return Math.max(0,Math.min(1,e||0))}function xg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Xx=e=>()=>e;function OU(e,t){return function(r){return e+r*t}}function MU(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _U(e){return(e=+e)==1?lC:function(t,r){return r-t?MU(t,r,e):Xx(isNaN(t)?r:t)}}function lC(e,t){var r=t-e;return r?OU(e,r):Xx(isNaN(e)?t:e)}const Xw=function e(t){var r=_U(t);function n(a,i){var o=r((a=gy(a)).r,(i=gy(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=lC(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function AU(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function TU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EU(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=oc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function $U(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function P0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function DU(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=oc(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var my=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bg=new RegExp(my.source,"g");function IU(e){return function(){return e}}function RU(e){return function(t){return e(t)+""}}function LU(e,t){var r=my.lastIndex=bg.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=my.exec(e))&&(a=bg.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:P0(n,a)})),r=bg.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?RU(l[0].x):IU(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function oc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Xx(t):(r==="number"?P0:r==="string"?(n=Bu(t))?(t=n,Xw):LU:t instanceof Bu?Xw:t instanceof Date?$U:TU(t)?AU:Array.isArray(t)?EU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?DU:P0)(e,t)}function Kx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function BU(e,t){t===void 0&&(t=e,e=oc);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function FU(e){return function(){return e}}function N0(e){return+e}var Kw=[0,1];function Pn(e){return e}function yy(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:FU(isNaN(t)?NaN:.5)}function zU(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function UU(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=yy(a,n),i=r(o,i)):(n=yy(n,a),i=r(i,o)),function(s){return i(n(s))}}function GU(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=yy(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=vf(e,s,1,n)-1;return i[l](a[l](s))}}function bf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tp(){var e=Kw,t=Kw,r=oc,n,a,i,o=Pn,s,l,u;function f(){var h=Math.min(e.length,t.length);return o!==Pn&&(o=zU(e[0],e[h-1])),s=h>2?GU:UU,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=s(e.map(n),t,r)))(n(o(h)))}return d.invert=function(h){return o(a((u||(u=s(t,e.map(n),P0)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,N0),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=Kx,f()},d.clamp=function(h){return arguments.length?(o=h?!0:Pn,f()):o!==Pn},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,p){return n=h,a=p,f()}}function Yx(){return tp()(Pn,Pn)}function WU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function O0(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Cl(e){return e=O0(Math.abs(e)),e?e[1]:NaN}function VU(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function HU(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var XU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fu(e){if(!(t=XU.exec(e)))throw new Error("invalid format: "+e);var t;return new qx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fu.prototype=qx.prototype;function qx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function KU(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var M0;function YU(e,t){var r=O0(e,t);if(!r)return M0=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(M0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+O0(e,Math.max(0,t+i-1))[0]}function Yw(e,t){var r=O0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const qw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:WU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Yw(e*100,t),r:Yw,s:YU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zw(e){return e}var Qw=Array.prototype.map,Jw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qU(e){var t=e.grouping===void 0||e.thousands===void 0?Zw:VU(Qw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Zw:HU(Qw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d,h){d=Fu(d);var p=d.fill,y=d.align,m=d.sign,x=d.symbol,v=d.zero,g=d.width,b=d.comma,S=d.precision,k=d.trim,w=d.type;w==="n"?(b=!0,w="g"):qw[w]||(S===void 0&&(S=12),k=!0,w="g"),(v||p==="0"&&y==="=")&&(v=!0,p="0",y="=");var C=(h&&h.prefix!==void 0?h.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),P=(x==="$"?n:/[%p]/.test(w)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),O=qw[w],N=/[defgprs%]/.test(w);S=S===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function E(M){var _=C,$=P,D,R,A;if(w==="c")$=O(M)+$,M="";else{M=+M;var T=M<0||1/M<0;if(M=isNaN(M)?l:O(Math.abs(M),S),k&&(M=KU(M)),T&&+M==0&&m!=="+"&&(T=!1),_=(T?m==="("?m:s:m==="-"||m==="("?"":m)+_,$=(w==="s"&&!isNaN(M)&&M0!==void 0?Jw[8+M0/3]:"")+$+(T&&m==="("?")":""),N){for(D=-1,R=M.length;++D<R;)if(A=M.charCodeAt(D),48>A||A>57){$=(A===46?a+M.slice(D+1):M.slice(D))+$,M=M.slice(0,D);break}}}b&&!v&&(M=t(M,1/0));var I=_.length+M.length+$.length,U=I<g?new Array(g-I+1).join(p):"";switch(b&&v&&(M=t(U+M,U.length?g-$.length:1/0),U=""),y){case"<":M=_+M+$+U;break;case"=":M=_+U+M+$;break;case"^":M=U.slice(0,I=U.length>>1)+_+M+$+U.slice(I);break;default:M=U+_+M+$;break}return i(M)}return E.toString=function(){return d+""},E}function f(d,h){var p=Math.max(-8,Math.min(8,Math.floor(Cl(h)/3)))*3,y=Math.pow(10,-p),m=u((d=Fu(d),d.type="f",d),{suffix:Jw[8+p/3]});return function(x){return m(y*x)}}return{format:u,formatPrefix:f}}var od,Zx,cC;ZU({thousands:",",grouping:[3],currency:["$",""]});function ZU(e){return od=qU(e),Zx=od.format,cC=od.formatPrefix,od}function QU(e){return Math.max(0,-Cl(Math.abs(e)))}function JU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cl(t)/3)))*3-Cl(Math.abs(e)))}function eG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Cl(t)-Cl(e))+1}function uC(e,t,r,n){var a=hy(e,t,r),i;switch(n=Fu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=JU(a,o))&&(n.precision=i),cC(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=eG(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=QU(a))&&(n.precision=i-(n.type==="%")*2);break}}return Zx(n)}function Eo(e){var t=e.domain;return e.ticks=function(r){var n=t();return fy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return uC(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=dy(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function _0(){var e=Yx();return e.copy=function(){return bf(e,_0())},Ca.apply(e,arguments),Eo(e)}function fC(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,N0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return fC(e).unknown(t)},e=arguments.length?Array.from(e,N0):[0,1],Eo(r)}function dC(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function ek(e){return Math.log(e)}function tk(e){return Math.exp(e)}function tG(e){return-Math.log(-e)}function rG(e){return-Math.exp(-e)}function nG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function aG(e){return e===10?nG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function iG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rk(e){return(t,r)=>-e(-t,r)}function Qx(e){const t=e(ek,tk),r=t.domain;let n=10,a,i;function o(){return a=iG(n),i=aG(n),r()[0]<0?(a=rk(a),i=rk(i),e(tG,rG)):e(ek,tk),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),p=a(f),y,m;const x=s==null?10:+s;let v=[];if(!(n%1)&&p-h<x){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(y=1;y<n;++y)if(m=h<0?y/i(-h):y*i(h),!(m<u)){if(m>f)break;v.push(m)}}else for(;h<=p;++h)for(y=n-1;y>=1;--y)if(m=h>0?y/i(-h):y*i(h),!(m<u)){if(m>f)break;v.push(m)}v.length*2<x&&(v=fy(u,f,x))}else v=fy(h,p,Math.min(p-h,x)).map(i);return d?v.reverse():v},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Fu(l)).precision==null&&(l.trim=!0),l=Zx(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?l(f):""}},t.nice=()=>r(dC(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function hC(){const e=Qx(tp()).domain([1,10]);return e.copy=()=>bf(e,hC()).base(e.base()),Ca.apply(e,arguments),e}function nk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ak(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Jx(e){var t=1,r=e(nk(t),ak(t));return r.constant=function(n){return arguments.length?e(nk(t=+n),ak(t)):t},Eo(r)}function pC(){var e=Jx(tp());return e.copy=function(){return bf(e,pC()).constant(e.constant())},Ca.apply(e,arguments)}function ik(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sG(e){return e<0?-e*e:e*e}function e1(e){var t=e(Pn,Pn),r=1;function n(){return r===1?e(Pn,Pn):r===.5?e(oG,sG):e(ik(r),ik(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Eo(t)}function t1(){var e=e1(tp());return e.copy=function(){return bf(e,t1()).exponent(e.exponent())},Ca.apply(e,arguments),e}function lG(){return t1.apply(null,arguments).exponent(.5)}function ok(e){return Math.sign(e)*e*e}function cG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function gC(){var e=Yx(),t=[0,1],r=!1,n;function a(i){var o=cG(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(ok(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,N0)).map(ok)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return gC(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ca.apply(a,arguments),Eo(a)}function mC(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=pU(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[vf(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(So),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return mC().domain(e).range(t).unknown(n)},Ca.apply(i,arguments)}function yC(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[vf(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return yC().domain([e,t]).range(a).unknown(i)},Ca.apply(Eo(o),arguments)}function vC(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[vf(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return vC().domain(e).range(t).unknown(r)},Ca.apply(a,arguments)}const wg=new Date,kg=new Date;function Gr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>Gr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(wg.setTime(+i),kg.setTime(+o),e(wg),e(kg),Math.floor(r(wg,kg))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const A0=Gr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);A0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):A0);A0.range;const ki=1e3,ya=ki*60,Si=ya*60,$i=Si*24,r1=$i*7,sk=$i*30,Sg=$i*365,rs=Gr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getUTCSeconds());rs.range;const n1=Gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ki)},(e,t)=>{e.setTime(+e+t*ya)},(e,t)=>(t-e)/ya,e=>e.getMinutes());n1.range;const a1=Gr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ya)},(e,t)=>(t-e)/ya,e=>e.getUTCMinutes());a1.range;const i1=Gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ki-e.getMinutes()*ya)},(e,t)=>{e.setTime(+e+t*Si)},(e,t)=>(t-e)/Si,e=>e.getHours());i1.range;const o1=Gr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Si)},(e,t)=>(t-e)/Si,e=>e.getUTCHours());o1.range;const wf=Gr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ya)/$i,e=>e.getDate()-1);wf.range;const rp=Gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$i,e=>e.getUTCDate()-1);rp.range;const xC=Gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$i,e=>Math.floor(e/$i));xC.range;function Ts(e){return Gr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ya)/r1)}const np=Ts(0),T0=Ts(1),uG=Ts(2),fG=Ts(3),Pl=Ts(4),dG=Ts(5),hG=Ts(6);np.range;T0.range;uG.range;fG.range;Pl.range;dG.range;hG.range;function Es(e){return Gr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/r1)}const ap=Es(0),E0=Es(1),pG=Es(2),gG=Es(3),Nl=Es(4),mG=Es(5),yG=Es(6);ap.range;E0.range;pG.range;gG.range;Nl.range;mG.range;yG.range;const s1=Gr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());s1.range;const l1=Gr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());l1.range;const Di=Gr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Di.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Di.range;const Ii=Gr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ii.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ii.range;function bC(e,t,r,n,a,i){const o=[[rs,1,ki],[rs,5,5*ki],[rs,15,15*ki],[rs,30,30*ki],[i,1,ya],[i,5,5*ya],[i,15,15*ya],[i,30,30*ya],[a,1,Si],[a,3,3*Si],[a,6,6*Si],[a,12,12*Si],[n,1,$i],[n,2,2*$i],[r,1,r1],[t,1,sk],[t,3,3*sk],[e,1,Sg]];function s(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:l(u,f,d),y=p?p.range(u,+f+1):[];return h?y.reverse():y}function l(u,f,d){const h=Math.abs(f-u)/d,p=Wx(([,,x])=>x).right(o,h);if(p===o.length)return e.every(hy(u/Sg,f/Sg,d));if(p===0)return A0.every(Math.max(hy(u,f,d),1));const[y,m]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return y.every(m)}return[s,l]}const[vG,xG]=bC(Ii,l1,ap,xC,o1,a1),[bG,wG]=bC(Di,s1,np,wf,i1,n1);function jg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Cg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $c(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function kG(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=Dc(a),f=Ic(a),d=Dc(i),h=Ic(i),p=Dc(o),y=Ic(o),m=Dc(s),x=Ic(s),v=Dc(l),g=Ic(l),b={a:A,A:T,b:I,B:U,c:null,d:hk,e:hk,f:VG,g:tW,G:nW,H:UG,I:GG,j:WG,L:wC,m:HG,M:XG,p:Z,q:Y,Q:mk,s:yk,S:KG,u:YG,U:qG,V:ZG,w:QG,W:JG,x:null,X:null,y:eW,Y:rW,Z:aW,"%":gk},S={a:L,A:Q,b:fe,B:J,c:null,d:pk,e:pk,f:lW,g:vW,G:bW,H:iW,I:oW,j:sW,L:SC,m:cW,M:uW,p:de,q:H,Q:mk,s:yk,S:fW,u:dW,U:hW,V:pW,w:gW,W:mW,x:null,X:null,y:yW,Y:xW,Z:wW,"%":gk},k={a:N,A:E,b:M,B:_,c:$,d:fk,e:fk,f:LG,g:uk,G:ck,H:dk,I:dk,j:$G,L:RG,m:EG,M:DG,p:O,q:TG,Q:FG,s:zG,S:IG,u:NG,U:OG,V:MG,w:PG,W:_G,x:D,X:R,y:uk,Y:ck,Z:AG,"%":BG};b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),S.x=w(r,S),S.X=w(n,S),S.c=w(t,S);function w(X,ce){return function(ie){var V=[],be=-1,ge=0,se=X.length,te,ue,Ie;for(ie instanceof Date||(ie=new Date(+ie));++be<se;)X.charCodeAt(be)===37&&(V.push(X.slice(ge,be)),(ue=lk[te=X.charAt(++be)])!=null?te=X.charAt(++be):ue=te==="e"?" ":"0",(Ie=ce[te])&&(te=Ie(ie,ue)),V.push(te),ge=be+1);return V.push(X.slice(ge,be)),V.join("")}}function C(X,ce){return function(ie){var V=$c(1900,void 0,1),be=P(V,X,ie+="",0),ge,se;if(be!=ie.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(ce&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(ge=Cg($c(V.y,0,1)),se=ge.getUTCDay(),ge=se>4||se===0?E0.ceil(ge):E0(ge),ge=rp.offset(ge,(V.V-1)*7),V.y=ge.getUTCFullYear(),V.m=ge.getUTCMonth(),V.d=ge.getUTCDate()+(V.w+6)%7):(ge=jg($c(V.y,0,1)),se=ge.getDay(),ge=se>4||se===0?T0.ceil(ge):T0(ge),ge=wf.offset(ge,(V.V-1)*7),V.y=ge.getFullYear(),V.m=ge.getMonth(),V.d=ge.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),se="Z"in V?Cg($c(V.y,0,1)).getUTCDay():jg($c(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(se+5)%7:V.w+V.U*7-(se+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,Cg(V)):jg(V)}}function P(X,ce,ie,V){for(var be=0,ge=ce.length,se=ie.length,te,ue;be<ge;){if(V>=se)return-1;if(te=ce.charCodeAt(be++),te===37){if(te=ce.charAt(be++),ue=k[te in lk?ce.charAt(be++):te],!ue||(V=ue(X,ie,V))<0)return-1}else if(te!=ie.charCodeAt(V++))return-1}return V}function O(X,ce,ie){var V=u.exec(ce.slice(ie));return V?(X.p=f.get(V[0].toLowerCase()),ie+V[0].length):-1}function N(X,ce,ie){var V=p.exec(ce.slice(ie));return V?(X.w=y.get(V[0].toLowerCase()),ie+V[0].length):-1}function E(X,ce,ie){var V=d.exec(ce.slice(ie));return V?(X.w=h.get(V[0].toLowerCase()),ie+V[0].length):-1}function M(X,ce,ie){var V=v.exec(ce.slice(ie));return V?(X.m=g.get(V[0].toLowerCase()),ie+V[0].length):-1}function _(X,ce,ie){var V=m.exec(ce.slice(ie));return V?(X.m=x.get(V[0].toLowerCase()),ie+V[0].length):-1}function $(X,ce,ie){return P(X,t,ce,ie)}function D(X,ce,ie){return P(X,r,ce,ie)}function R(X,ce,ie){return P(X,n,ce,ie)}function A(X){return o[X.getDay()]}function T(X){return i[X.getDay()]}function I(X){return l[X.getMonth()]}function U(X){return s[X.getMonth()]}function Z(X){return a[+(X.getHours()>=12)]}function Y(X){return 1+~~(X.getMonth()/3)}function L(X){return o[X.getUTCDay()]}function Q(X){return i[X.getUTCDay()]}function fe(X){return l[X.getUTCMonth()]}function J(X){return s[X.getUTCMonth()]}function de(X){return a[+(X.getUTCHours()>=12)]}function H(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ce=w(X+="",b);return ce.toString=function(){return X},ce},parse:function(X){var ce=C(X+="",!1);return ce.toString=function(){return X},ce},utcFormat:function(X){var ce=w(X+="",S);return ce.toString=function(){return X},ce},utcParse:function(X){var ce=C(X+="",!0);return ce.toString=function(){return X},ce}}}var lk={"-":"",_:" ",0:"0"},Jr=/^\s*\d+/,SG=/^%/,jG=/[\\^$*+?|[\]().{}]/g;function jt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function CG(e){return e.replace(jG,"\\$&")}function Dc(e){return new RegExp("^(?:"+e.map(CG).join("|")+")","i")}function Ic(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function PG(e,t,r){var n=Jr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function NG(e,t,r){var n=Jr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function OG(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function MG(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _G(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ck(e,t,r){var n=Jr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function uk(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function AG(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function TG(e,t,r){var n=Jr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function EG(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function fk(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function $G(e,t,r){var n=Jr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function dk(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function DG(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function IG(e,t,r){var n=Jr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function RG(e,t,r){var n=Jr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function LG(e,t,r){var n=Jr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function BG(e,t,r){var n=SG.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function FG(e,t,r){var n=Jr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function zG(e,t,r){var n=Jr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function hk(e,t){return jt(e.getDate(),t,2)}function UG(e,t){return jt(e.getHours(),t,2)}function GG(e,t){return jt(e.getHours()%12||12,t,2)}function WG(e,t){return jt(1+wf.count(Di(e),e),t,3)}function wC(e,t){return jt(e.getMilliseconds(),t,3)}function VG(e,t){return wC(e,t)+"000"}function HG(e,t){return jt(e.getMonth()+1,t,2)}function XG(e,t){return jt(e.getMinutes(),t,2)}function KG(e,t){return jt(e.getSeconds(),t,2)}function YG(e){var t=e.getDay();return t===0?7:t}function qG(e,t){return jt(np.count(Di(e)-1,e),t,2)}function kC(e){var t=e.getDay();return t>=4||t===0?Pl(e):Pl.ceil(e)}function ZG(e,t){return e=kC(e),jt(Pl.count(Di(e),e)+(Di(e).getDay()===4),t,2)}function QG(e){return e.getDay()}function JG(e,t){return jt(T0.count(Di(e)-1,e),t,2)}function eW(e,t){return jt(e.getFullYear()%100,t,2)}function tW(e,t){return e=kC(e),jt(e.getFullYear()%100,t,2)}function rW(e,t){return jt(e.getFullYear()%1e4,t,4)}function nW(e,t){var r=e.getDay();return e=r>=4||r===0?Pl(e):Pl.ceil(e),jt(e.getFullYear()%1e4,t,4)}function aW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+jt(t/60|0,"0",2)+jt(t%60,"0",2)}function pk(e,t){return jt(e.getUTCDate(),t,2)}function iW(e,t){return jt(e.getUTCHours(),t,2)}function oW(e,t){return jt(e.getUTCHours()%12||12,t,2)}function sW(e,t){return jt(1+rp.count(Ii(e),e),t,3)}function SC(e,t){return jt(e.getUTCMilliseconds(),t,3)}function lW(e,t){return SC(e,t)+"000"}function cW(e,t){return jt(e.getUTCMonth()+1,t,2)}function uW(e,t){return jt(e.getUTCMinutes(),t,2)}function fW(e,t){return jt(e.getUTCSeconds(),t,2)}function dW(e){var t=e.getUTCDay();return t===0?7:t}function hW(e,t){return jt(ap.count(Ii(e)-1,e),t,2)}function jC(e){var t=e.getUTCDay();return t>=4||t===0?Nl(e):Nl.ceil(e)}function pW(e,t){return e=jC(e),jt(Nl.count(Ii(e),e)+(Ii(e).getUTCDay()===4),t,2)}function gW(e){return e.getUTCDay()}function mW(e,t){return jt(E0.count(Ii(e)-1,e),t,2)}function yW(e,t){return jt(e.getUTCFullYear()%100,t,2)}function vW(e,t){return e=jC(e),jt(e.getUTCFullYear()%100,t,2)}function xW(e,t){return jt(e.getUTCFullYear()%1e4,t,4)}function bW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Nl(e):Nl.ceil(e),jt(e.getUTCFullYear()%1e4,t,4)}function wW(){return"+0000"}function gk(){return"%"}function mk(e){return+e}function yk(e){return Math.floor(+e/1e3)}var Ls,CC,PC;kW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function kW(e){return Ls=kG(e),CC=Ls.format,Ls.parse,PC=Ls.utcFormat,Ls.utcParse,Ls}function SW(e){return new Date(e)}function jW(e){return e instanceof Date?+e:+new Date(+e)}function c1(e,t,r,n,a,i,o,s,l,u){var f=Yx(),d=f.invert,h=f.domain,p=u(".%L"),y=u(":%S"),m=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),g=u("%b %d"),b=u("%B"),S=u("%Y");function k(w){return(l(w)<w?p:s(w)<w?y:o(w)<w?m:i(w)<w?x:n(w)<w?a(w)<w?v:g:r(w)<w?b:S)(w)}return f.invert=function(w){return new Date(d(w))},f.domain=function(w){return arguments.length?h(Array.from(w,jW)):h().map(SW)},f.ticks=function(w){var C=h();return e(C[0],C[C.length-1],w??10)},f.tickFormat=function(w,C){return C==null?k:u(C)},f.nice=function(w){var C=h();return(!w||typeof w.range!="function")&&(w=t(C[0],C[C.length-1],w??10)),w?h(dC(C,w)):f},f.copy=function(){return bf(f,c1(e,t,r,n,a,i,o,s,l,u))},f}function CW(){return Ca.apply(c1(bG,wG,Di,s1,np,wf,i1,n1,rs,CC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PW(){return Ca.apply(c1(vG,xG,Ii,l1,ap,rp,o1,a1,rs,PC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ip(){var e=0,t=1,r,n,a,i,o=Pn,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var p,y;return arguments.length?([p,y]=h,o=d(p,y),u):[o(0),o(1)]}}return u.range=f(oc),u.rangeRound=f(Kx),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function $o(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function NC(){var e=Eo(ip()(Pn));return e.copy=function(){return $o(e,NC())},Fi.apply(e,arguments)}function OC(){var e=Qx(ip()).domain([1,10]);return e.copy=function(){return $o(e,OC()).base(e.base())},Fi.apply(e,arguments)}function MC(){var e=Jx(ip());return e.copy=function(){return $o(e,MC()).constant(e.constant())},Fi.apply(e,arguments)}function u1(){var e=e1(ip());return e.copy=function(){return $o(e,u1()).exponent(e.exponent())},Fi.apply(e,arguments)}function NW(){return u1.apply(null,arguments).exponent(.5)}function _C(){var e=[],t=Pn;function r(n){if(n!=null&&!isNaN(n=+n))return t((vf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(So),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>hU(e,i/n))},r.copy=function(){return _C(t).domain(e)},Fi.apply(r,arguments)}function op(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=Pn,f,d=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+f(m))-i)*(n*m<n*i?s:l),u(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(u=m,p):u};function y(m){return function(x){var v,g,b;return arguments.length?([v,g,b]=x,u=BU(m,[v,g,b]),p):[u(0),u(.5),u(1)]}}return p.range=y(oc),p.rangeRound=y(Kx),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return f=m,a=m(e),i=m(t),o=m(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function AC(){var e=Eo(op()(Pn));return e.copy=function(){return $o(e,AC())},Fi.apply(e,arguments)}function TC(){var e=Qx(op()).domain([.1,1,10]);return e.copy=function(){return $o(e,TC()).base(e.base())},Fi.apply(e,arguments)}function EC(){var e=Jx(op());return e.copy=function(){return $o(e,EC()).constant(e.constant())},Fi.apply(e,arguments)}function f1(){var e=e1(op());return e.copy=function(){return $o(e,f1()).exponent(e.exponent())},Fi.apply(e,arguments)}function OW(){return f1.apply(null,arguments).exponent(.5)}const vk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Iu,scaleDiverging:AC,scaleDivergingLog:TC,scaleDivergingPow:f1,scaleDivergingSqrt:OW,scaleDivergingSymlog:EC,scaleIdentity:fC,scaleImplicit:py,scaleLinear:_0,scaleLog:hC,scaleOrdinal:Vx,scalePoint:nu,scalePow:t1,scaleQuantile:mC,scaleQuantize:yC,scaleRadial:gC,scaleSequential:NC,scaleSequentialLog:OC,scaleSequentialPow:u1,scaleSequentialQuantile:_C,scaleSequentialSqrt:NW,scaleSequentialSymlog:MC,scaleSqrt:lG,scaleSymlog:pC,scaleThreshold:vC,scaleTime:CW,scaleUtc:PW,tickFormat:uC},Symbol.toStringTag,{value:"Module"}));var MW=Zl;function _W(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!MW(o):r(o,s)))var s=o,l=i}return l}var $C=_W;function AW(e,t){return e>t}var TW=AW,EW=$C,$W=TW,DW=ic;function IW(e){return e&&e.length?EW(e,DW,$W):void 0}var RW=IW;const so=Ft(RW);function LW(e,t){return e<t}var BW=LW,FW=$C,zW=BW,UW=ic;function GW(e){return e&&e.length?FW(e,UW,zW):void 0}var WW=GW;const sp=Ft(WW);var VW=Cx,HW=Ao,XW=Wj,KW=Vn;function YW(e,t){var r=KW(e)?VW:XW;return r(e,HW(t))}var qW=YW,ZW=Uj,QW=qW;function JW(e,t){return ZW(QW(e,t),1)}var eV=JW;const tV=Ft(eV);var rV=Bx;function nV(e,t){return rV(e,t)}var aV=nV;const ks=Ft(aV);var sc=1e9,iV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},h1,nr=!0,Sa="[DecimalError] ",ls=Sa+"Invalid argument: ",d1=Sa+"Exponent out of range: ",lc=Math.floor,Xo=Math.pow,oV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ta,Kr=1e7,Yt=7,DC=9007199254740991,$0=lc(DC/Yt),Ne={};Ne.absoluteValue=Ne.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ne.comparedTo=Ne.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ne.decimalPlaces=Ne.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Yt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ne.dividedBy=Ne.div=function(e){return Mi(this,new this.constructor(e))};Ne.dividedToIntegerBy=Ne.idiv=function(e){var t=this,r=t.constructor;return Bt(Mi(t,new r(e),0,1),r.precision)};Ne.equals=Ne.eq=function(e){return!this.cmp(e)};Ne.exponent=function(){return Er(this)};Ne.greaterThan=Ne.gt=function(e){return this.cmp(e)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(e){return this.cmp(e)>=0};Ne.isInteger=Ne.isint=function(){return this.e>this.d.length-2};Ne.isNegative=Ne.isneg=function(){return this.s<0};Ne.isPositive=Ne.ispos=function(){return this.s>0};Ne.isZero=function(){return this.s===0};Ne.lessThan=Ne.lt=function(e){return this.cmp(e)<0};Ne.lessThanOrEqualTo=Ne.lte=function(e){return this.cmp(e)<1};Ne.logarithm=Ne.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ta))throw Error(Sa+"NaN");if(r.s<1)throw Error(Sa+(r.s?"NaN":"-Infinity"));return r.eq(ta)?new n(0):(nr=!1,t=Mi(zu(r,i),zu(e,i),i),nr=!0,Bt(t,a))};Ne.minus=Ne.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LC(t,e):IC(t,(e.s=-e.s,e))};Ne.modulo=Ne.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Sa+"NaN");return r.s?(nr=!1,t=Mi(r,e,0,1).times(e),nr=!0,r.minus(t)):Bt(new n(r),a)};Ne.naturalExponential=Ne.exp=function(){return RC(this)};Ne.naturalLogarithm=Ne.ln=function(){return zu(this)};Ne.negated=Ne.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ne.plus=Ne.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IC(t,e):LC(t,(e.s=-e.s,e))};Ne.precision=Ne.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ls+e);if(t=Er(a)+1,n=a.d.length-1,r=n*Yt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ne.squareRoot=Ne.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Sa+"NaN")}for(e=Er(s),nr=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Qa(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=lc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus(Mi(s,i,o+2)).times(.5),Qa(i.d).slice(0,o)===(t=Qa(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Bt(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return nr=!0,Bt(n,r)};Ne.times=Ne.mul=function(e){var t,r,n,a,i,o,s,l,u,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,l=h.length,u=p.length,l<u&&(i=h,h=p,p=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+p[n]*h[a-n-1]+t,i[a--]=s%Kr|0,t=s/Kr|0;i[a]=(i[a]+t)%Kr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,nr?Bt(e,d.precision):e};Ne.toDecimalPlaces=Ne.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(li(e,0,sc),t===void 0?t=n.rounding:li(t,0,8),Bt(r,e+Er(r)+1,t))};Ne.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Ss(n,!0):(li(e,0,sc),t===void 0?t=a.rounding:li(t,0,8),n=Bt(new a(n),e+1,t),r=Ss(n,!0,e+1)),r};Ne.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Ss(a):(li(e,0,sc),t===void 0?t=i.rounding:li(t,0,8),n=Bt(new i(a),e+Er(a)+1,t),r=Ss(n.abs(),!1,e+Er(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ne.toInteger=Ne.toint=function(){var e=this,t=e.constructor;return Bt(new t(e),Er(e)+1,t.rounding)};Ne.toNumber=function(){return+this};Ne.toPower=Ne.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,f=+(e=new l(e));if(!e.s)return new l(ta);if(s=new l(s),!s.s){if(e.s<1)throw Error(Sa+"Infinity");return s}if(s.eq(ta))return s;if(n=l.precision,e.eq(ta))return Bt(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=DC){for(a=new l(ta),t=Math.ceil(n/Yt+4),nr=!1;r%2&&(a=a.times(s),bk(a.d,t)),r=lc(r/2),r!==0;)s=s.times(s),bk(s.d,t);return nr=!0,e.s<0?new l(ta).div(a):Bt(a,n)}}else if(i<0)throw Error(Sa+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,nr=!1,a=e.times(zu(s,n+u)),nr=!0,a=RC(a),a.s=i,a};Ne.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Er(a),n=Ss(a,r<=i.toExpNeg||r>=i.toExpPos)):(li(e,1,sc),t===void 0?t=i.rounding:li(t,0,8),a=Bt(new i(a),e,t),r=Er(a),n=Ss(a,e<=r||r<=i.toExpNeg,e)),n};Ne.toSignificantDigits=Ne.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(li(e,1,sc),t===void 0?t=n.rounding:li(t,0,8)),Bt(new n(r),e,t)};Ne.toString=Ne.valueOf=Ne.val=Ne.toJSON=Ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Er(e),r=e.constructor;return Ss(e,t<=r.toExpNeg||t>=r.toExpPos)};function IC(e,t){var r,n,a,i,o,s,l,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),nr?Bt(t,d):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(d/Yt),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/Kr|0,l[i]%=Kr;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,nr?Bt(t,d):t}function li(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ls+e)}function Qa(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Yt-n.length,r&&(i+=Zi(r)),i+=n;o=e[t],n=o+"",r=Yt-n.length,r&&(i+=Zi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Mi=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Kr|0,o=i/Kr|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Kr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,f,d,h,p,y,m,x,v,g,b,S,k,w,C,P,O=n.constructor,N=n.s==a.s?1:-1,E=n.d,M=a.d;if(!n.s)return new O(n);if(!a.s)throw Error(Sa+"Division by zero");for(l=n.e-a.e,C=M.length,k=E.length,p=new O(N),y=p.d=[],u=0;M[u]==(E[u]||0);)++u;if(M[u]>(E[u]||0)&&--l,i==null?g=i=O.precision:o?g=i+(Er(n)-Er(a))+1:g=i,g<0)return new O(0);if(g=g/Yt+2|0,u=0,C==1)for(f=0,M=M[0],g++;(u<k||f)&&g--;u++)b=f*Kr+(E[u]||0),y[u]=b/M|0,f=b%M|0;else{for(f=Kr/(M[0]+1)|0,f>1&&(M=e(M,f),E=e(E,f),C=M.length,k=E.length),S=C,m=E.slice(0,C),x=m.length;x<C;)m[x++]=0;P=M.slice(),P.unshift(0),w=M[0],M[1]>=Kr/2&&++w;do f=0,s=t(M,m,C,x),s<0?(v=m[0],C!=x&&(v=v*Kr+(m[1]||0)),f=v/w|0,f>1?(f>=Kr&&(f=Kr-1),d=e(M,f),h=d.length,x=m.length,s=t(d,m,h,x),s==1&&(f--,r(d,C<h?P:M,h))):(f==0&&(s=f=1),d=M.slice()),h=d.length,h<x&&d.unshift(0),r(m,d,x),s==-1&&(x=m.length,s=t(M,m,C,x),s<1&&(f++,r(m,C<x?P:M,x))),x=m.length):s===0&&(f++,m=[0]),y[u++]=f,s&&m[0]?m[x++]=E[S]||0:(m=[E[S]],x=1);while((S++<k||m[0]!==void 0)&&g--)}return y[0]||y.shift(),p.e=l,Bt(p,o?i+Er(p)+1:i)}}();function RC(e,t){var r,n,a,i,o,s,l=0,u=0,f=e.constructor,d=f.precision;if(Er(e)>16)throw Error(d1+Er(e));if(!e.s)return new f(ta);for(nr=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Xo(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(ta),f.precision=s;;){if(a=Bt(a.times(e),s),r=r.times(++l),o=i.plus(Mi(a,r,s)),Qa(o.d).slice(0,s)===Qa(i.d).slice(0,s)){for(;u--;)i=Bt(i.times(i),s);return f.precision=d,t==null?(nr=!0,Bt(i,d)):i}i=o}}function Er(e){for(var t=e.e*Yt,r=e.d[0];r>=10;r/=10)t++;return t}function Pg(e,t,r){if(t>e.LN10.sd())throw nr=!0,r&&(e.precision=r),Error(Sa+"LN10 precision limit exceeded");return Bt(new e(e.LN10),t)}function Zi(e){for(var t="";e--;)t+="0";return t}function zu(e,t){var r,n,a,i,o,s,l,u,f,d=1,h=10,p=e,y=p.d,m=p.constructor,x=m.precision;if(p.s<1)throw Error(Sa+(p.s?"NaN":"-Infinity"));if(p.eq(ta))return new m(0);if(t==null?(nr=!1,u=x):u=t,p.eq(10))return t==null&&(nr=!0),Pg(m,u);if(u+=h,m.precision=u,r=Qa(y),n=r.charAt(0),i=Er(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Qa(p.d),n=r.charAt(0),d++;i=Er(p),n>1?(p=new m("0."+r),i++):p=new m(n+"."+r.slice(1))}else return l=Pg(m,u+2,x).times(i+""),p=zu(new m(n+"."+r.slice(1)),u-h).plus(l),m.precision=x,t==null?(nr=!0,Bt(p,x)):p;for(s=o=p=Mi(p.minus(ta),p.plus(ta),u),f=Bt(p.times(p),u),a=3;;){if(o=Bt(o.times(f),u),l=s.plus(Mi(o,new m(a),u)),Qa(l.d).slice(0,u)===Qa(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Pg(m,u+2,x).times(i+""))),s=Mi(s,new m(d),u),m.precision=x,t==null?(nr=!0,Bt(s,x)):s;s=l,a+=2}}function xk(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=lc(r/Yt),e.d=[],n=(r+1)%Yt,r<0&&(n+=Yt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Yt;n<a;)e.d.push(+t.slice(n,n+=Yt));t=t.slice(n),n=Yt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),nr&&(e.e>$0||e.e<-$0))throw Error(d1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Bt(e,t,r){var n,a,i,o,s,l,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Yt,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Yt),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Yt,a=n-Yt+o}if(r!==void 0&&(i=Xo(10,o-a-1),s=u/i%10|0,l=t<0||d[f+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Xo(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(i=Er(e),d.length=1,t=t-i-1,d[0]=Xo(10,(Yt-t%Yt)%Yt),e.e=lc(-t/Yt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=Xo(10,Yt-n),d[f]=a>0?(u/Xo(10,o-a)%Xo(10,a)|0)*i:0),l)for(;;)if(f==0){(d[0]+=i)==Kr&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Kr)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(nr&&(e.e>$0||e.e<-$0))throw Error(d1+Er(e));return e}function LC(e,t){var r,n,a,i,o,s,l,u,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),nr?Bt(t,p):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(f=o<0,f?(r=l,o=-o,s=d.length):(r=d,n=u,s=l.length),a=Math.max(Math.ceil(p/Yt),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){f=l[a]<d[a];break}o=0}for(f&&(r=l,l=d,d=r,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>o;){if(l[--a]<d[a]){for(i=a;i&&l[--i]===0;)l[i]=Kr-1;--l[i],l[a]+=Kr}l[a]-=d[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,nr?Bt(t,p):t):new h(0)}function Ss(e,t,r){var n,a=Er(e),i=Qa(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Zi(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Zi(-a-1)+i,r&&(n=r-o)>0&&(i+=Zi(n))):a>=o?(i+=Zi(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Zi(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Zi(n))),e.s<0?"-"+i:i}function bk(e,t){if(e.length>t)return e.length=t,!0}function BC(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ls+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return xk(o,i.toString())}else if(typeof i!="string")throw Error(ls+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,oV.test(i))xk(o,i);else throw Error(ls+i)}if(a.prototype=Ne,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=BC,a.config=a.set=sV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function sV(e){if(!e||typeof e!="object")throw Error(Sa+"Object expected");var t,r,n,a=["precision",1,sc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(lc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(ls+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ls+r+": "+n);return this}var h1=BC(iV);ta=new h1(1);const Rt=h1;function lV(e){return dV(e)||fV(e)||uV(e)||cV()}function cV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uV(e,t){if(e){if(typeof e=="string")return vy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vy(e,t)}}function fV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function dV(e){if(Array.isArray(e))return vy(e)}function vy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hV=function(t){return t},FC={},zC=function(t){return t===FC},wk=function(t){return function r(){return arguments.length===0||arguments.length===1&&zC(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},pV=function e(t,r){return t===1?r:wk(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==FC}).length;return o>=t?r.apply(void 0,a):e(t-o,wk(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var f=a.map(function(d){return zC(d)?l.shift():d});return r.apply(void 0,lV(f).concat(l))}))})},lp=function(t){return pV(t.length,t)},xy=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},gV=lp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),mV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return hV;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},by=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},UC=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,l){return s===r[l]})||(r=i,n=t.apply(void 0,i)),n}};function yV(e){var t;return e===0?t=1:t=Math.floor(new Rt(e).abs().log(10).toNumber())+1,t}function vV(e,t,r){for(var n=new Rt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var xV=lp(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),bV=lp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),wV=lp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const cp={rangeStep:vV,getDigitCount:yV,interpolateNumber:xV,uninterpolateNumber:bV,uninterpolateTruncation:wV};function wy(e){return jV(e)||SV(e)||GC(e)||kV()}function kV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function jV(e){if(Array.isArray(e))return ky(e)}function Uu(e,t){return NV(e)||PV(e,t)||GC(e,t)||CV()}function CV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GC(e,t){if(e){if(typeof e=="string")return ky(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ky(e,t)}}function ky(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function NV(e){if(Array.isArray(e))return e}function WC(e){var t=Uu(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function VC(e,t,r){if(e.lte(0))return new Rt(0);var n=cp.getDigitCount(e.toNumber()),a=new Rt(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new Rt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?l:new Rt(Math.ceil(l))}function OV(e,t,r){var n=1,a=new Rt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Rt(10).pow(cp.getDigitCount(e)-1),a=new Rt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Rt(Math.floor(e)))}else e===0?a=new Rt(Math.floor((t-1)/2)):r||(a=new Rt(Math.floor(e)));var o=Math.floor((t-1)/2),s=mV(gV(function(l){return a.add(new Rt(l-o).mul(n)).toNumber()}),xy);return s(0,t)}function HC(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Rt(0),tickMin:new Rt(0),tickMax:new Rt(0)};var i=VC(new Rt(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Rt(0):(o=new Rt(e).add(t).div(2),o=o.sub(new Rt(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new Rt(t).sub(o).div(i).toNumber()),u=s+l+1;return u>r?HC(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new Rt(s).mul(i)),tickMax:o.add(new Rt(l).mul(i))})}function MV(e){var t=Uu(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=WC([r,n]),l=Uu(s,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(wy(xy(0,a-1).map(function(){return 1/0}))):[].concat(wy(xy(0,a-1).map(function(){return-1/0})),[f]);return r>n?by(d):d}if(u===f)return OV(u,a,i);var h=HC(u,f,o,i),p=h.step,y=h.tickMin,m=h.tickMax,x=cp.rangeStep(y,m.add(new Rt(.1).mul(p)),p);return r>n?by(x):x}function _V(e,t){var r=Uu(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=WC([n,a]),s=Uu(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var f=Math.max(t,2),d=VC(new Rt(u).sub(l).div(f-1),i,0),h=[].concat(wy(cp.rangeStep(new Rt(l),new Rt(u).sub(new Rt(.99).mul(d)),d)),[u]);return n>a?by(h):h}var AV=UC(MV),TV=UC(_V),EV="Invariant failed";function js(e,t){throw new Error(EV)}var $V=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ol(e){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(e)}function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D0.apply(this,arguments)}function DV(e,t){return BV(e)||LV(e,t)||RV(e,t)||IV()}function IV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RV(e,t){if(e){if(typeof e=="string")return kk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kk(e,t)}}function kk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function BV(e){if(Array.isArray(e))return e}function FV(e,t){if(e==null)return{};var r=zV(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YC(n.key),n)}}function WV(e,t,r){return t&&GV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VV(e,t,r){return t=I0(t),HV(e,XC()?Reflect.construct(t,r||[],I0(e).constructor):t.apply(e,r))}function HV(e,t){if(t&&(Ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XV(e)}function XV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XC=function(){return!!e})()}function I0(e){return I0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I0(e)}function KV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sy(e,t)}function Sy(e,t){return Sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Sy(e,t)}function KC(e,t,r){return t=YC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YC(e){var t=YV(e,"string");return Ol(t)=="symbol"?t:t+""}function YV(e,t){if(Ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cc=function(e){function t(){return UV(this,t),VV(this,t,arguments)}return KV(t,e),WV(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=FV(n,$V),p=Ye(h,!1);this.props.direction==="x"&&f.type!=="number"&&js();var y=l.map(function(m){var x=u(m,s),v=x.x,g=x.y,b=x.value,S=x.errorVal;if(!S)return null;var k=[],w,C;if(Array.isArray(S)){var P=DV(S,2);w=P[0],C=P[1]}else w=C=S;if(i==="vertical"){var O=f.scale,N=g+a,E=N+o,M=N-o,_=O(b-w),$=O(b+C);k.push({x1:$,y1:E,x2:$,y2:M}),k.push({x1:_,y1:N,x2:$,y2:N}),k.push({x1:_,y1:E,x2:_,y2:M})}else if(i==="horizontal"){var D=d.scale,R=v+a,A=R-o,T=R+o,I=D(b-w),U=D(b+C);k.push({x1:A,y1:U,x2:T,y2:U}),k.push({x1:R,y1:I,x2:R,y2:U}),k.push({x1:A,y1:I,x2:T,y2:I})}return F.createElement(Pt,D0({className:"recharts-errorBar",key:"bar-".concat(k.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},p),k.map(function(Z){return F.createElement("line",D0({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return F.createElement(Pt,{className:"recharts-errorBars"},y)}}])}(F.Component);KC(cc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});KC(cc,"displayName","ErrorBar");function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sk(Object(r),!0).forEach(function(n){qV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qV(e,t,r){return t=ZV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZV(e){var t=QV(e,"string");return Gu(t)=="symbol"?t:t+""}function QV(e,t){if(Gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qC=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ea(r,ri);if(!o)return null;var s=ri.defaultProps,l=s!==void 0?Uo(Uo({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,y=p.sectors||p.data||[];return f.concat(y.map(function(m){return{type:o.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?Uo(Uo({},h),d.props):{},y=p.dataKey,m=p.name,x=p.legendType,v=p.hide;return{inactive:v,dataKey:y,type:l.iconType||x||"square",color:p1(d),value:m||y,payload:p}}),Uo(Uo(Uo({},l),ri.getWithHeight(o,a)),{},{payload:u,item:o})};function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function jk(e){return rH(e)||tH(e)||eH(e)||JV()}function JV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eH(e,t){if(e){if(typeof e=="string")return jy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jy(e,t)}}function tH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rH(e){if(Array.isArray(e))return jy(e)}function jy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(r),!0).forEach(function(n){fl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fl(e,t,r){return t=nH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nH(e){var t=aH(e,"string");return Wu(t)=="symbol"?t:t+""}function aH(e,t){if(Wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ur(e,t,r){return Ke(e)||Ke(t)?r:zr(t)?ba(e,t,r):Je(t)?t(e):r}function au(e,t,r,n){var a=tV(e,function(s){return Ur(s,t)});if(r==="number"){var i=a.filter(function(s){return me(s)||parseFloat(s)});return i.length?[sp(i),so(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!Ke(s)}):a;return o.map(function(s){return zr(s)||s instanceof Date?s:""})}var iH=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,h=u>=s-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(Fa(d-f)!==Fa(h-d)){var y=[];if(Fa(h-d)===Fa(l[1]-l[0])){p=h;var m=d+l[1]-l[0];y[0]=Math.min(m,(m+f)/2),y[1]=Math.max(m,(m+f)/2)}else{p=f;var x=h+l[1]-l[0];y[0]=Math.min(d,(x+d)/2),y[1]=Math.max(d,(x+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>v[0]&&t<=v[1]||t>=y[0]&&t<=y[1]){o=a[u].index;break}}else{var g=Math.min(f,h),b=Math.max(f,h);if(t>(g+d)/2&&t<=(b+d)/2){o=a[u].index;break}}}else for(var S=0;S<s;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},p1=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?vr(vr({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},oH=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,u=s.length;l<u;l++)for(var f=i[s[l]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var y=f[d[h]],m=y.items,x=y.cateAxisId,v=m.filter(function(C){return Pi(C.type).indexOf("Bar")>=0});if(v&&v.length){var g=v[0].type.defaultProps,b=g!==void 0?vr(vr({},g),v[0].props):v[0].props,S=b.barSize,k=b[x];o[k]||(o[k]=[]);var w=Ke(S)?r:S;o[k].push({item:v[0],stackList:v.slice(1),barSize:Ke(w)?void 0:ws(w,n,0)})}}return o},sH=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var u=ws(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/l,y=o.reduce(function(S,k){return S+k.barSize||0},0);y+=(l-1)*u,y>=a&&(y-=(l-1)*u,u=0),y>=a&&p>0&&(h=!0,p*=.9,y=l*p);var m=(a-y)/2>>0,x={offset:m-u,size:0};f=o.reduce(function(S,k){var w={item:k.item,position:{offset:x.offset+x.size+u,size:h?p:k.barSize}},C=[].concat(jk(S),[w]);return x=C[C.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){C.push({item:P,position:x})}),C},d)}else{var v=ws(n,a,0,!0);a-2*v-(l-1)*u<=0&&(u=0);var g=(a-2*v-(l-1)*u)/l;g>1&&(g>>=0);var b=s===+s?Math.min(g,s):g;f=o.reduce(function(S,k,w){var C=[].concat(jk(S),[{item:k.item,position:{offset:v+(g+u)*w+(g-b)/2,size:b}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){C.push({item:P,position:C[C.length-1].position})}),C},d)}return f},lH=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=qC({children:i,legendWidth:l});if(u){var f=a||{},d=f.width,h=f.height,p=u.align,y=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&y==="middle")&&p!=="center"&&me(t[p]))return vr(vr({},t),{},fl({},p,t[p]+(d||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&y!=="middle"&&me(t[y]))return vr(vr({},t),{},fl({},y,t[y]+(h||0)))}return t},cH=function(t,r,n){return Ke(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},ZC=function(t,r,n,a,i){var o=r.props.children,s=Un(o,cc).filter(function(u){return cH(a,i,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Ur(f,n);if(Ke(d))return u;var h=Array.isArray(d)?[sp(d),so(d)]:[d,d],p=l.reduce(function(y,m){var x=Ur(f,m,0),v=h[0]-Math.abs(Array.isArray(x)?x[0]:x),g=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(v,y[0]),Math.max(g,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},uH=function(t,r,n,a,i){var o=r.map(function(s){return ZC(t,s,n,i,a)}).filter(function(s){return!Ke(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},QC=function(t,r,n,a,i){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&ZC(t,l,u,a)||au(t,u,n,i)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,l.push(u[f]));return l},[])},JC=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},eP=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===r&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate});return i||s.push(r),o||s.push(n),s},ji=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Fa(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=i?i.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!rc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:i?i[d]:d,index:h,offset:u}})},Ng=new WeakMap,sd=function(t,r){if(typeof r!="function")return t;Ng.has(t)||Ng.set(t,new WeakMap);var n=Ng.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},fH=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Iu(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:_0(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:nu(),realScaleType:"point"}:i==="category"?{scale:Iu(),realScaleType:"band"}:{scale:_0(),realScaleType:"linear"};if(bs(a)){var l="scale".concat(Xh(a));return{scale:(vk[l]||nu)(),realScaleType:vk[l]?l:"point"}}return Je(a)?{scale:a}:{scale:nu(),realScaleType:"point"}},Pk=1e-4,dH=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-Pk,o=Math.max(a[0],a[1])+Pk,s=t(r[0]),l=t(r[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([r[0],r[n-1]])}},hH=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},pH=function(t,r){if(!r||r.length!==2||!me(r[0])||!me(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!me(t[0])||t[0]<n)&&(i[0]=n),(!me(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},gH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var l=rc(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},mH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=rc(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},yH={sign:gH,expand:T7,none:bl,silhouette:E7,wiggle:$7,positive:mH},vH=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=yH[n],o=A7().keys(a).value(function(s,l){return+Ur(s,l,0)}).order(Ym).offset(i);return o(t)},xH=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(d,h){var p,y=(p=h.type)!==null&&p!==void 0&&p.defaultProps?vr(vr({},h.type.defaultProps),h.props):h.props,m=y.stackId,x=y.hide;if(x)return d;var v=y[n],g=d[v]||{hasStack:!1,stackGroups:{}};if(zr(m)){var b=g.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(h),g.hasStack=!0,g.stackGroups[m]=b}else g.stackGroups[As("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return vr(vr({},d),{},fl({},v,g))},l),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,x){var v=p.stackGroups[x];return vr(vr({},m),{},fl({},x,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:vH(t,v.items,i)}))},y)}return vr(vr({},d),{},fl({},h,p))},f)},bH=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=AV(u,i,s);return t.domain([sp(f),so(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),h=TV(d,i,s);return{niceTicks:h}}return null};function Ml(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ke(a[t.dataKey])){var s=s0(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Ur(a,Ke(o)?t.dataKey:o);return Ke(l)?null:t.scale(l)}var Nk=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=Ur(o,r.dataKey,r.domain[s]);return Ke(l)?null:r.scale(l)-i/2+a},wH=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},kH=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?vr(vr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(zr(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},SH=function(t){return t.reduce(function(r,n){return[sp(n.concat([r[0]]).filter(me)),so(n.concat([r[1]]).filter(me))]},[1/0,-1/0])},tP=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(u,f){var d=SH(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Ok=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Cy=function(t,r,n){if(Je(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(me(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(Ok.test(t[0])){var i=+Ok.exec(t[0])[1];a[0]=r[0]-i}else Je(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(me(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(Mk.test(t[1])){var o=+Mk.exec(t[1])[1];a[1]=r[1]+o}else Je(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},R0=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=zx(r,function(d){return d.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},_k=function(t,r,n){return!t||!t.length||ks(t,ba(n,"type.defaultProps.domain"))?r:t},rP=function(t,r){var n=t.type.defaultProps?vr(vr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,f=n.hide;return vr(vr({},Ye(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:p1(t),value:Ur(r,a),type:l,payload:r,chartType:u,hide:f})};function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(n){jH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jH(e,t,r){return t=CH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=PH(e,"string");return Vu(t)=="symbol"?t:t+""}function PH(e,t){if(Vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L0=Math.PI/180,NH=function(t){return t*180/Math.PI},an=function(t,r,n,a){return{x:t+Math.cos(-L0*a)*n,y:r+Math.sin(-L0*a)*n}},OH=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},MH=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=OH({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(n-i)/s,u=Math.acos(l);return a>o&&(u=2*Math.PI-u),{radius:s,angle:NH(u),angleInRadian:u}},_H=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},AH=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},Ek=function(t,r){var n=t.x,a=t.y,i=MH({x:n,y:a},r),o=i.radius,s=i.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var f=_H(r),d=f.startAngle,h=f.endAngle,p=s,y;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;y=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=d}return y?Tk(Tk({},r),{},{radius:o,angle:AH(p,r)}):null};function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}var TH=["offset"];function EH(e){return RH(e)||IH(e)||DH(e)||$H()}function $H(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DH(e,t){if(e){if(typeof e=="string")return Py(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Py(e,t)}}function IH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RH(e){if(Array.isArray(e))return Py(e)}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LH(e,t){if(e==null)return{};var r=BH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(r),!0).forEach(function(n){FH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FH(e,t,r){return t=zH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zH(e){var t=UH(e,"string");return Hu(t)=="symbol"?t:t+""}function UH(e,t){if(Hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xu.apply(this,arguments)}var GH=function(t){var r=t.value,n=t.formatter,a=Ke(t.children)?r:t.children;return Je(n)?n(a):a},WH=function(t,r){var n=Fa(r-t),a=Math.min(Math.abs(r-t),360);return n*a},VH=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,u=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,y=l.endAngle,m=l.clockWise,x=(d+h)/2,v=WH(p,y),g=v>=0?1:-1,b,S;a==="insideStart"?(b=p+g*o,S=m):a==="insideEnd"?(b=y-g*o,S=!m):a==="end"&&(b=y+g*o,S=m),S=v<=0?S:!S;var k=an(u,f,x,b),w=an(u,f,x,b+(S?1:-1)*359),C="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),P=Ke(t.id)?As("recharts-radial-line-"):t.id;return F.createElement("text",Xu({},n,{dominantBaseline:"central",className:pt("recharts-radial-bar-label",s)}),F.createElement("defs",null,F.createElement("path",{id:P,d:C})),F.createElement("textPath",{xlinkHref:"#".concat(P)},r))},HH=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,l=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,h=(f+d)/2;if(a==="outside"){var p=an(o,s,u+n,h),y=p.x,m=p.y;return{x:y,y:m,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,v=an(o,s,x,h),g=v.x,b=v.y;return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},XH=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,l=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,p=d>0?"end":"start",y=d>0?"start":"end",m=u>=0?1:-1,x=m*a,v=m>0?"end":"start",g=m>0?"start":"end";if(i==="top"){var b={x:s+u/2,y:l-d*a,textAnchor:"middle",verticalAnchor:p};return Lr(Lr({},b),n?{height:Math.max(l-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:s+u/2,y:l+f+h,textAnchor:"middle",verticalAnchor:y};return Lr(Lr({},S),n?{height:Math.max(n.y+n.height-(l+f),0),width:u}:{})}if(i==="left"){var k={x:s-x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"};return Lr(Lr({},k),n?{width:Math.max(k.x-n.x,0),height:f}:{})}if(i==="right"){var w={x:s+u+x,y:l+f/2,textAnchor:g,verticalAnchor:"middle"};return Lr(Lr({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:f}:{})}var C=n?{width:u,height:f}:{};return i==="insideLeft"?Lr({x:s+x,y:l+f/2,textAnchor:g,verticalAnchor:"middle"},C):i==="insideRight"?Lr({x:s+u-x,y:l+f/2,textAnchor:v,verticalAnchor:"middle"},C):i==="insideTop"?Lr({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:y},C):i==="insideBottom"?Lr({x:s+u/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},C):i==="insideTopLeft"?Lr({x:s+x,y:l+h,textAnchor:g,verticalAnchor:y},C):i==="insideTopRight"?Lr({x:s+u-x,y:l+h,textAnchor:v,verticalAnchor:y},C):i==="insideBottomLeft"?Lr({x:s+x,y:l+f-h,textAnchor:g,verticalAnchor:p},C):i==="insideBottomRight"?Lr({x:s+u-x,y:l+f-h,textAnchor:v,verticalAnchor:p},C):Ql(i)&&(me(i.x)||es(i.x))&&(me(i.y)||es(i.y))?Lr({x:s+ws(i.x,u),y:l+ws(i.y,f),textAnchor:"end",verticalAnchor:"end"},C):Lr({x:s+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},KH=function(t){return"cx"in t&&me(t.cx)};function nn(e){var t=e.offset,r=t===void 0?5:t,n=LH(e,TH),a=Lr({offset:r},n),i=a.viewBox,o=a.position,s=a.value,l=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!i||Ke(s)&&Ke(l)&&!j.isValidElement(u)&&!Je(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var p;if(Je(u)){if(p=j.createElement(u,a),j.isValidElement(p))return p}else p=GH(a);var y=KH(i),m=Ye(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return VH(a,p,m);var x=y?HH(a):XH(a);return F.createElement(k0,Xu({className:pt("recharts-label",d)},m,x,{breakAll:h}),p)}nn.displayName="Label";var nP=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,y=t.left,m=t.width,x=t.height,v=t.clockWise,g=t.labelViewBox;if(g)return g;if(me(m)&&me(x)){if(me(d)&&me(h))return{x:d,y:h,width:m,height:x};if(me(p)&&me(y))return{x:p,y,width:m,height:x}}return me(d)&&me(h)?{x:d,y:h,width:0,height:0}:me(r)&&me(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||l||s||0,clockWise:v}:t.viewBox?t.viewBox:{}},YH=function(t,r){return t?t===!0?F.createElement(nn,{key:"label-implicit",viewBox:r}):zr(t)?F.createElement(nn,{key:"label-implicit",viewBox:r,value:t}):j.isValidElement(t)?t.type===nn?j.cloneElement(t,{key:"label-implicit",viewBox:r}):F.createElement(nn,{key:"label-implicit",content:t,viewBox:r}):Je(t)?F.createElement(nn,{key:"label-implicit",content:t,viewBox:r}):Ql(t)?F.createElement(nn,Xu({viewBox:r},t,{key:"label-implicit"})):null:null},qH=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=nP(t),o=Un(a,nn).map(function(l,u){return j.cloneElement(l,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=YH(t.label,r||i);return[s].concat(EH(o))};nn.parseViewBox=nP;nn.renderCallByParent=qH;function ZH(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var QH=ZH;const JH=Ft(QH);function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}var eX=["valueAccessor"],tX=["data","dataKey","clockWise","id","textBreakAll"];function rX(e){return oX(e)||iX(e)||aX(e)||nX()}function nX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aX(e,t){if(e){if(typeof e=="string")return Ny(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ny(e,t)}}function iX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oX(e){if(Array.isArray(e))return Ny(e)}function Ny(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){sX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sX(e,t,r){return t=lX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lX(e){var t=cX(e,"string");return Ku(t)=="symbol"?t:t+""}function cX(e,t){if(Ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rk(e,t){if(e==null)return{};var r=uX(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fX=function(t){return Array.isArray(t.value)?JH(t.value):t.value};function ai(e){var t=e.valueAccessor,r=t===void 0?fX:t,n=Rk(e,eX),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=Rk(n,tX);return!a||!a.length?null:F.createElement(Pt,{className:"recharts-label-list"},a.map(function(f,d){var h=Ke(i)?r(f,d):Ur(f&&f.payload,i),p=Ke(s)?{}:{id:"".concat(s,"-").concat(d)};return F.createElement(nn,B0({},Ye(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:nn.parseViewBox(Ke(o)?f:Ik(Ik({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ai.displayName="LabelList";function dX(e,t){return e?e===!0?F.createElement(ai,{key:"labelList-implicit",data:t}):F.isValidElement(e)||Je(e)?F.createElement(ai,{key:"labelList-implicit",data:t,content:e}):Ql(e)?F.createElement(ai,B0({data:t},e,{key:"labelList-implicit"})):null:null}function hX(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Un(n,ai).map(function(o,s){return j.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=dX(e.label,t);return[i].concat(rX(a))}ai.renderCallByParent=hX;function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(this,arguments)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){pX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pX(e,t,r){return t=gX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gX(e){var t=mX(e,"string");return Yu(t)=="symbol"?t:t+""}function mX(e,t){if(Yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yX=function(t,r){var n=Fa(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},ld=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,f=l*(s?1:-1)+a,d=Math.asin(l/f)/L0,h=u?i:i+o*d,p=an(r,n,f,h),y=an(r,n,a,h),m=u?i-o*d:i,x=an(r,n,f*Math.cos(d*L0),m);return{center:p,circleTangency:y,lineTangency:x,theta:d}},aP=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=yX(o,s),u=o+l,f=an(r,n,i,o),d=an(r,n,i,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=an(r,n,a,o),y=an(r,n,a,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},vX=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Fa(f-u),h=ld({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),p=h.circleTangency,y=h.lineTangency,m=h.theta,x=ld({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:l}),v=x.circleTangency,g=x.lineTangency,b=x.theta,S=l?Math.abs(u-f):Math.abs(u-f)-m-b;if(S<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):aP({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var k="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var w=ld({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),C=w.circleTangency,P=w.lineTangency,O=w.theta,N=ld({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=N.circleTangency,M=N.lineTangency,_=N.theta,$=l?Math.abs(u-f):Math.abs(u-f)-O-_;if($<0&&o===0)return"".concat(k,"L").concat(r,",").concat(n,"Z");k+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+($>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else k+="L".concat(r,",").concat(n,"Z");return k},xX={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iP=function(t){var r=Bk(Bk({},xX),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(o<i||f===d)return null;var p=pt("recharts-sector",h),y=o-i,m=ws(s,y,0,!0),x;return m>0&&Math.abs(f-d)<360?x=vX({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(m,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}):x=aP({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),F.createElement("path",Oy({},Ye(r,!0),{className:p,d:x,role:"img"}))};function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function My(){return My=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},My.apply(this,arguments)}function Fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(r),!0).forEach(function(n){bX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bX(e,t,r){return t=wX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wX(e){var t=kX(e,"string");return qu(t)=="symbol"?t:t+""}function kX(e,t){if(qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uk={curveBasisClosed:b7,curveBasisOpen:w7,curveBasis:x7,curveBumpX:i7,curveBumpY:o7,curveLinearClosed:k7,curveLinear:Yh,curveMonotoneX:S7,curveMonotoneY:j7,curveNatural:C7,curveStep:P7,curveStepAfter:O7,curveStepBefore:N7},cd=function(t){return t.x===+t.x&&t.y===+t.y},Rc=function(t){return t.x},Lc=function(t){return t.y},SX=function(t,r){if(Je(t))return t;var n="curve".concat(Xh(t));return(n==="curveMonotone"||n==="curveBump")&&r?Uk["".concat(n).concat(r==="vertical"?"Y":"X")]:Uk[n]||Yh},jX=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,f=SX(n,s),d=u?i.filter(function(m){return cd(m)}):i,h;if(Array.isArray(o)){var p=u?o.filter(function(m){return cd(m)}):o,y=d.map(function(m,x){return zk(zk({},m),{},{base:p[x]})});return s==="vertical"?h=Jf().y(Lc).x1(Rc).x0(function(m){return m.base.x}):h=Jf().x(Rc).y1(Lc).y0(function(m){return m.base.y}),h.defined(cd).curve(f),h(y)}return s==="vertical"&&me(o)?h=Jf().y(Lc).x1(Rc).x0(o):me(o)?h=Jf().x(Rc).y1(Lc).y0(o):h=sj().x(Rc).y(Lc),h.defined(cd).curve(f),h(d)},cs=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?jX(t):a;return j.createElement("path",My({},Ye(t,!1),l0(t),{className:pt("recharts-curve",r),d:o,ref:i}))},oP={exports:{}},CX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",PX=CX,NX=PX;function sP(){}function lP(){}lP.resetWarningCache=sP;var OX=function(){function e(n,a,i,o,s,l){if(l!==NX){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:lP,resetWarningCache:sP};return r.PropTypes=r,r};oP.exports=OX();var MX=oP.exports;const At=Ft(MX),{getOwnPropertyNames:_X,getOwnPropertySymbols:AX}=Object,{hasOwnProperty:TX}=Object.prototype;function Og(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function ud(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const l=e(r,n,a);return i.delete(r),i.delete(n),l}}function EX(e){return e!=null?e[Symbol.toStringTag]:void 0}function Gk(e){return _X(e).concat(AX(e))}const $X=Object.hasOwn||((e,t)=>TX.call(e,t));function $s(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const DX="__v",IX="__o",RX="_owner",{getOwnPropertyDescriptor:Wk,keys:Vk}=Object;function LX(e,t){return e.byteLength===t.byteLength&&F0(new Uint8Array(e),new Uint8Array(t))}function BX(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function FX(e,t){return e.byteLength===t.byteLength&&F0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function zX(e,t){return $s(e.getTime(),t.getTime())}function UX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function GX(e,t){return e===t}function Hk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,l=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const h=o.value,p=s.value;if(r.equals(h[0],p[0],l,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;l++}return!0}const WX=$s;function VX(e,t,r){const n=Vk(e);let a=n.length;if(Vk(t).length!==a)return!1;for(;a-- >0;)if(!cP(e,t,r,n[a]))return!1;return!0}function Bc(e,t,r){const n=Gk(e);let a=n.length;if(Gk(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!cP(e,t,r,i)||(o=Wk(e,i),s=Wk(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function HX(e,t){return $s(e.valueOf(),t.valueOf())}function XX(e,t){return e.source===t.source&&e.flags===t.flags}function Xk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const l=t.values();let u=!1,f=0;for(;(s=l.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function F0(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function KX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function cP(e,t,r,n){return(n===RX||n===IX||n===DX)&&(e.$$typeof||t.$$typeof)?!0:$X(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const YX="[object ArrayBuffer]",qX="[object Arguments]",ZX="[object Boolean]",QX="[object DataView]",JX="[object Date]",eK="[object Error]",tK="[object Map]",rK="[object Number]",nK="[object Object]",aK="[object RegExp]",iK="[object Set]",oK="[object String]",sK={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lK="[object URL]",cK=Object.prototype.toString;function uK({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:y}){return function(x,v,g){if(x===v)return!0;if(x==null||v==null)return!1;const b=typeof x;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?s(x,v,g):b==="function"?i(x,v,g):!1;const S=x.constructor;if(S!==v.constructor)return!1;if(S===Object)return l(x,v,g);if(Array.isArray(x))return t(x,v,g);if(S===Date)return n(x,v,g);if(S===RegExp)return f(x,v,g);if(S===Map)return o(x,v,g);if(S===Set)return d(x,v,g);const k=cK.call(x);if(k===JX)return n(x,v,g);if(k===aK)return f(x,v,g);if(k===tK)return o(x,v,g);if(k===iK)return d(x,v,g);if(k===nK)return typeof x.then!="function"&&typeof v.then!="function"&&l(x,v,g);if(k===lK)return p(x,v,g);if(k===eK)return a(x,v,g);if(k===qX)return l(x,v,g);if(sK[k])return h(x,v,g);if(k===YX)return e(x,v,g);if(k===QX)return r(x,v,g);if(k===ZX||k===rK||k===oK)return u(x,v,g);if(y){let w=y[k];if(!w){const C=EX(x);C&&(w=y[C])}if(w)return w(x,v,g)}return!1}}function fK({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:LX,areArraysEqual:r?Bc:BX,areDataViewsEqual:FX,areDatesEqual:zX,areErrorsEqual:UX,areFunctionsEqual:GX,areMapsEqual:r?Og(Hk,Bc):Hk,areNumbersEqual:WX,areObjectsEqual:r?Bc:VX,arePrimitiveWrappersEqual:HX,areRegExpsEqual:XX,areSetsEqual:r?Og(Xk,Bc):Xk,areTypedArraysEqual:r?Og(F0,Bc):F0,areUrlsEqual:KX,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=ud(n.areArraysEqual),i=ud(n.areMapsEqual),o=ud(n.areObjectsEqual),s=ud(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function dK(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function hK({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,l){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,l,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,l){return t(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,l){return t(s,l,i)}}const pK=Do();Do({strict:!0});Do({circular:!0});Do({circular:!0,strict:!0});Do({createInternalComparator:()=>$s});Do({strict:!0,createInternalComparator:()=>$s});Do({circular:!0,createInternalComparator:()=>$s});Do({circular:!0,createInternalComparator:()=>$s,strict:!0});function Do(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=fK(e),o=uK(i),s=r?r(o):dK(o);return hK({circular:t,comparator:o,createState:n,equals:s,strict:a})}function gK(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Kk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):gK(a)};requestAnimationFrame(n)}function _y(e){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y(e)}function mK(e){return bK(e)||xK(e)||vK(e)||yK()}function yK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vK(e,t){if(e){if(typeof e=="string")return Yk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yk(e,t)}}function Yk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bK(e){if(Array.isArray(e))return e}function wK(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=mK(o),l=s[0],u=s.slice(1);if(typeof l=="number"){Kk(a.bind(null,u),l);return}a(l),Kk(a.bind(null,u));return}_y(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){uP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uP(e,t,r){return t=kK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kK(e){var t=SK(e,"string");return Zu(t)==="symbol"?t:String(t)}function SK(e,t){if(Zu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jK=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},CK=function(t){return t},PK=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},iu=function(t,r){return Object.keys(r).reduce(function(n,a){return Zk(Zk({},n),{},uP({},a,t(a,r[a])))},{})},Qk=function(t,r,n){return t.map(function(a){return"".concat(PK(a)," ").concat(r,"ms ").concat(n)}).join(",")};function NK(e,t){return _K(e)||MK(e,t)||fP(e,t)||OK()}function OK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function _K(e){if(Array.isArray(e))return e}function AK(e){return $K(e)||EK(e)||fP(e)||TK()}function TK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fP(e,t){if(e){if(typeof e=="string")return Ay(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ay(e,t)}}function EK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $K(e){if(Array.isArray(e))return Ay(e)}function Ay(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z0=1e-4,dP=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},hP=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},Jk=function(t,r){return function(n){var a=dP(t,r);return hP(a,n)}},DK=function(t,r){return function(n){var a=dP(t,r),i=[].concat(AK(a.map(function(o,s){return o*s}).slice(1)),[0]);return hP(i,n)}},eS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=NK(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=Jk(a,o),h=Jk(i,s),p=DK(a,o),y=function(v){return v>1?1:v<0?0:v},m=function(v){for(var g=v>1?1:v,b=g,S=0;S<8;++S){var k=d(b)-g,w=p(b);if(Math.abs(k-g)<z0||w<z0)return h(b);b=y(b-k/w)}return h(b)};return m.isStepper=!1,m},IK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(f,d,h){var p=-(f-d)*n,y=h*i,m=h+(p-y)*s/1e3,x=h*s/1e3+f;return Math.abs(x-d)<z0&&Math.abs(m)<z0?[d,0]:[x,m]};return l.isStepper=!0,l.dt=s,l},RK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return eS(a);case"spring":return IK();default:if(a.split("(")[0]==="cubic-bezier")return eS(a)}return typeof a=="function"?a:null};function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function tS(e){return FK(e)||BK(e)||pP(e)||LK()}function LK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FK(e){if(Array.isArray(e))return Ey(e)}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){Ty(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ty(e,t,r){return t=zK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=UK(e,"string");return Qu(t)==="symbol"?t:String(t)}function UK(e,t){if(Qu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GK(e,t){return HK(e)||VK(e,t)||pP(e,t)||WK()}function WK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pP(e,t){if(e){if(typeof e=="string")return Ey(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ey(e,t)}}function Ey(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function VK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function HK(e){if(Array.isArray(e))return e}var U0=function(t,r,n){return t+(r-t)*n},$y=function(t){var r=t.from,n=t.to;return r!==n},XK=function e(t,r,n){var a=iu(function(i,o){if($y(o)){var s=t(o.from,o.to,o.velocity),l=GK(s,2),u=l[0],f=l[1];return tn(tn({},o),{},{from:u,velocity:f})}return o},r);return n<1?iu(function(i,o){return $y(o)?tn(tn({},o),{},{velocity:U0(o.velocity,a[i].velocity,n),from:U0(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const KK=function(e,t,r,n,a){var i=jK(e,t),o=i.reduce(function(x,v){return tn(tn({},x),{},Ty({},v,[e[v],t[v]]))},{}),s=i.reduce(function(x,v){return tn(tn({},x),{},Ty({},v,{from:e[v],velocity:0,to:t[v]}))},{}),l=-1,u,f,d=function(){return null},h=function(){return iu(function(v,g){return g.from},s)},p=function(){return!Object.values(s).filter($y).length},y=function(v){u||(u=v);var g=v-u,b=g/r.dt;s=XK(r,s,b),a(tn(tn(tn({},e),t),h())),u=v,p()||(l=requestAnimationFrame(d))},m=function(v){f||(f=v);var g=(v-f)/n,b=iu(function(k,w){return U0.apply(void 0,tS(w).concat([r(g)]))},o);if(a(tn(tn(tn({},e),t),b)),g<1)l=requestAnimationFrame(d);else{var S=iu(function(k,w){return U0.apply(void 0,tS(w).concat([r(1)]))},o);a(tn(tn(tn({},e),t),S))}};return d=r.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function _l(e){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}var YK=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function qK(e,t){if(e==null)return{};var r=ZK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZK(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Mg(e){return tY(e)||eY(e)||JK(e)||QK()}function QK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JK(e,t){if(e){if(typeof e=="string")return Dy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dy(e,t)}}function eY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tY(e){if(Array.isArray(e))return Dy(e)}function Dy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nS(Object(r),!0).forEach(function(n){Vc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vc(e,t,r){return t=gP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gP(n.key),n)}}function aY(e,t,r){return t&&nY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gP(e){var t=iY(e,"string");return _l(t)==="symbol"?t:String(t)}function iY(e,t){if(_l(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_l(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iy(e,t)}function Iy(e,t){return Iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Iy(e,t)}function sY(e){var t=lY();return function(){var n=G0(e),a;if(t){var i=G0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Ry(this,a)}}function Ry(e,t){if(t&&(_l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ly(e)}function Ly(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G0(e){return G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G0(e)}var Wa=function(e){oY(r,e);var t=sY(r);function r(n,a){var i;rY(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,l=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Ly(i)),i.changeStyle=i.changeStyle.bind(Ly(i)),!s||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:f}),Ry(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Ry(i);i.state={style:l?Vc({},l,u):u}}else i.state={style:{}};return i}return aY(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,h=this.state.style;if(s){if(!o){var p={style:l?Vc({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(pK(a.to,f)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=y||u?d:a.to;if(this.state&&h){var x={style:l?Vc({},l,m):m};(l&&h[l]!==m||!l&&h!==m)&&this.setState(x)}this.runAnimation(Ta(Ta({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,p=KK(o,s,RK(u),l,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([h,f,y,l,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(m,x,v){if(v===0)return m;var g=x.duration,b=x.easing,S=b===void 0?"ease":b,k=x.style,w=x.properties,C=x.onAnimationEnd,P=v>0?o[v-1]:x,O=w||Object.keys(k);if(typeof S=="function"||S==="spring")return[].concat(Mg(m),[i.runJSAnimation.bind(i,{from:P.style,to:k,duration:g,easing:S}),g]);var N=Qk(O,g,S),E=Ta(Ta(Ta({},P.style),k),{},{transition:N});return[].concat(Mg(m),[E,g,C]).filter(CK)};return this.manager.start([l].concat(Mg(o.reduce(p,[f,Math.max(h,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=wK());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,p=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var m=s?Vc({},s,l):l,x=Qk(Object.keys(m),o,u);y.start([f,i,Ta(Ta({},m),{},{transition:x}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=qK(a,YK),u=j.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(p){var y=p.props,m=y.style,x=m===void 0?{}:m,v=y.className,g=j.cloneElement(p,Ta(Ta({},l),{},{style:Ta(Ta({},x),f),className:v}));return g};return u===1?d(j.Children.only(i)):F.createElement("div",null,j.Children.map(i,function(h){return d(h)}))}}]),r}(j.PureComponent);Wa.displayName="Animate";Wa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wa.propTypes={from:At.oneOfType([At.object,At.string]),to:At.oneOfType([At.object,At.string]),attributeName:At.string,duration:At.number,begin:At.number,easing:At.oneOfType([At.string,At.func]),steps:At.arrayOf(At.shape({duration:At.number.isRequired,style:At.object.isRequired,easing:At.oneOfType([At.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),At.func]),properties:At.arrayOf("string"),onAnimationEnd:At.func})),children:At.oneOfType([At.node,At.func]),isActive:At.bool,canBegin:At.bool,onAnimationEnd:At.func,shouldReAnimate:At.bool,onAnimationStart:At.func,onAnimationReStart:At.func};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W0.apply(this,arguments)}function cY(e,t){return hY(e)||dY(e,t)||fY(e,t)||uY()}function uY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fY(e,t){if(e){if(typeof e=="string")return aS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aS(e,t)}}function aS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function hY(e){if(Array.isArray(e))return e}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){pY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pY(e,t,r){return t=gY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gY(e){var t=mY(e,"string");return Ju(t)=="symbol"?t:t+""}function mY(e,t){if(Ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sS=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=i[h]>o?o:i[h];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+l*d[0],",").concat(r)),f+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-l*d[2],",").concat(r+a)),f+="L ".concat(t+l*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);f="M ".concat(t,",").concat(r+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+l*y,",").concat(r,`
            L `).concat(t+n-l*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*y,`
            L `).concat(t+n,",").concat(r+a-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-l*y,",").concat(r+a,`
            L `).concat(t+l*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*y," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},yY=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=f&&a>=d&&a<=h}return!1},vY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},g1=function(t){var r=oS(oS({},vY),t),n=j.useRef(),a=j.useState(-1),i=cY(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch{}},[]);var l=r.x,u=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,v=r.isAnimationActive,g=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var b=pt("recharts-rectangle",p);return g?F.createElement(Wa,{canBegin:o>0,from:{width:f,height:d,x:l,y:u},to:{width:f,height:d,x:l,y:u},duration:m,animationEasing:y,isActive:g},function(S){var k=S.width,w=S.height,C=S.x,P=S.y;return F.createElement(Wa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,isActive:v,easing:y},F.createElement("path",W0({},Ye(r,!0),{className:b,d:sS(C,P,k,w,h),ref:n})))}):F.createElement("path",W0({},Ye(r,!0),{className:b,d:sS(l,u,f,d,h)}))};function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}var up=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=pt("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",By({},Ye(t,!1),l0(t),{className:o,cx:r,cy:n,r:a})):null};function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}var xY=["x","y","top","left","width","height","className"];function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fy.apply(this,arguments)}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(n){wY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wY(e,t,r){return t=kY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kY(e){var t=SY(e,"string");return ef(t)=="symbol"?t:t+""}function SY(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jY(e,t){if(e==null)return{};var r=CY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var PY=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},NY=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,u=l===void 0?0:l,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,y=t.className,m=jY(t,xY),x=bY({x:n,y:i,top:s,left:u,width:d,height:p},m);return!me(n)||!me(i)||!me(d)||!me(p)||!me(s)||!me(u)?null:F.createElement("path",Fy({},Ye(x,!0),{className:pt("recharts-cross",y),d:PY(n,i,d,p,s,u)}))},OY=Aj,MY=OY(Object.getPrototypeOf,Object),_Y=MY,AY=Li,TY=_Y,EY=Bi,$Y="[object Object]",DY=Function.prototype,IY=Object.prototype,mP=DY.toString,RY=IY.hasOwnProperty,LY=mP.call(Object);function BY(e){if(!EY(e)||AY(e)!=$Y)return!1;var t=TY(e);if(t===null)return!0;var r=RY.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&mP.call(r)==LY}var FY=BY;const zY=Ft(FY);var UY=Li,GY=Bi,WY="[object Boolean]";function VY(e){return e===!0||e===!1||GY(e)&&UY(e)==WY}var HY=VY;const XY=Ft(HY);function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(this,arguments)}function KY(e,t){return QY(e)||ZY(e,t)||qY(e,t)||YY()}function YY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qY(e,t){if(e){if(typeof e=="string")return cS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cS(e,t)}}function cS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function QY(e){if(Array.isArray(e))return e}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){JY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JY(e,t,r){return t=eq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eq(e){var t=tq(e,"string");return tf(t)=="symbol"?t:t+""}function tq(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dS=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},rq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nq=function(t){var r=fS(fS({},rq),t),n=j.useRef(),a=j.useState(-1),i=KY(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&s(b)}catch{}},[]);var l=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,v=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var g=pt("recharts-trapezoid",p);return v?F.createElement(Wa,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:u},duration:m,animationEasing:y,isActive:v},function(b){var S=b.upperWidth,k=b.lowerWidth,w=b.height,C=b.x,P=b.y;return F.createElement(Wa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,easing:y},F.createElement("path",V0({},Ye(r,!0),{className:g,d:dS(C,P,S,k,w),ref:n})))}):F.createElement("g",null,F.createElement("path",V0({},Ye(r,!0),{className:g,d:dS(l,u,f,d,h)})))},aq=["option","shapeType","propTransformer","activeClassName","isActive"];function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function iq(e,t){if(e==null)return{};var r=oq(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){sq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sq(e,t,r){return t=lq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lq(e){var t=cq(e,"string");return rf(t)=="symbol"?t:t+""}function cq(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uq(e,t){return H0(H0({},t),e)}function fq(e,t){return e==="symbols"}function pS(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return F.createElement(g1,r);case"trapezoid":return F.createElement(nq,r);case"sector":return F.createElement(iP,r);case"symbols":if(fq(t))return F.createElement(Zh,r);break;default:return null}}function dq(e){return j.isValidElement(e)?e.props:e}function zy(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?uq:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=iq(e,aq),u;if(j.isValidElement(t))u=j.cloneElement(t,H0(H0({},l),dq(t)));else if(Je(t))u=t(l);else if(zY(t)&&!XY(t)){var f=a(t,l);u=F.createElement(pS,{shapeType:r,elementProps:f})}else{var d=l;u=F.createElement(pS,{shapeType:r,elementProps:d})}return s?F.createElement(Pt,{className:o},u):u}function fp(e,t){return t!=null&&"trapezoids"in e.props}function dp(e,t){return t!=null&&"sectors"in e.props}function nf(e,t){return t!=null&&"points"in e.props}function hq(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function pq(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function gq(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function mq(e,t){var r;return fp(e,t)?r=hq:dp(e,t)?r=pq:nf(e,t)&&(r=gq),r}function yq(e,t){var r;return fp(e,t)?r="trapezoids":dp(e,t)?r="sectors":nf(e,t)&&(r="points"),r}function vq(e,t){if(fp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(dp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return nf(e,t)?t.payload:{}}function xq(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=yq(r,t),i=vq(r,t),o=n.filter(function(l,u){var f=ks(i,l),d=r.props[a].filter(function(y){var m=mq(r,t);return m(y,t)}),h=r.props[a].indexOf(d[d.length-1]),p=u===h;return f&&p}),s=n.indexOf(o[o.length-1]);return s}var bq=Math.ceil,wq=Math.max;function kq(e,t,r,n){for(var a=-1,i=wq(bq((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var Sq=kq,jq=qj,gS=1/0,Cq=17976931348623157e292;function Pq(e){if(!e)return e===0?e:0;if(e=jq(e),e===gS||e===-gS){var t=e<0?-1:1;return t*Cq}return e===e?e:0}var yP=Pq,Nq=Sq,Oq=ep,_g=yP;function Mq(e){return function(t,r,n){return n&&typeof n!="number"&&Oq(t,r,n)&&(r=n=void 0),t=_g(t),r===void 0?(r=t,t=0):r=_g(r),n=n===void 0?t<r?1:-1:_g(n),Nq(t,r,n,e)}}var _q=Mq,Aq=_q,Tq=Aq(),Eq=Tq;const X0=Ft(Eq);function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(n){vP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vP(e,t,r){return t=$q(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $q(e){var t=Dq(e,"string");return af(t)=="symbol"?t:t+""}function Dq(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iq=["Webkit","Moz","O","ms"],Rq=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Iq.reduce(function(i,o){return yS(yS({},i),{},vP({},o+n,r))},{});return a[t]=r,a};function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0.apply(this,arguments)}function vS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ag(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vS(Object(r),!0).forEach(function(n){Qn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bP(n.key),n)}}function Bq(e,t,r){return t&&xS(e.prototype,t),r&&xS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fq(e,t,r){return t=Y0(t),zq(e,xP()?Reflect.construct(t,r||[],Y0(e).constructor):t.apply(e,r))}function zq(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uq(e)}function Uq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xP=function(){return!!e})()}function Y0(e){return Y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y0(e)}function Gq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uy(e,t)}function Qn(e,t,r){return t=bP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bP(e){var t=Wq(e,"string");return Al(t)=="symbol"?t:t+""}function Wq(e,t){if(Al(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Al(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vq=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=nu().domain(X0(0,l)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},bS=function(t){return t.changedTouches&&!!t.changedTouches.length},Tl=function(e){function t(r){var n;return Lq(this,t),n=Fq(this,t,[r]),Qn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Qn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Qn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),Qn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Qn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Qn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Qn(n,"handleSlideDragStart",function(a){var i=bS(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Gq(t,e),Bq(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(o,d),y=t.getIndexInRange(o,h);return{startIndex:p-p%l,endIndex:y===f?f:y-y%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=Ur(i[n],s,n);return Je(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,u=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,y=l.onChange,m=n.pageX-i;m>0?m=Math.min(m,u+f-d-s,u+f-d-o):m<0&&(m=Math.max(m,u-o,u-s));var x=this.getIndex({startX:o+m,endX:s+m});(x.startIndex!==h||x.endIndex!==p)&&y&&y(x),this.setState({startX:o+m,endX:s+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=bS(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,y=f.onChange,m=f.gap,x=f.data,v={startX:this.state.startX,endX:this.state.endX},g=n.pageX-i;g>0?g=Math.min(g,d+h-p-u):g<0&&(g=Math.max(g,d-u)),v[o]=u+g;var b=this.getIndex(v),S=b.startIndex,k=b.endIndex,w=function(){var P=x.length-1;return o==="startX"&&(s>l?S%m===0:k%m===0)||s<l&&k===P||o==="endX"&&(s>l?k%m===0:S%m===0)||s>l&&k===P};this.setState(Qn(Qn({},o,u+g),"brushMoveStartX",n.pageX),function(){y&&w()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=s.length)){var p=s[h];a==="startX"&&p>=u||a==="endX"&&p<=l||this.setState(Qn({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return F.createElement("rect",{stroke:u,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.data,u=n.children,f=n.padding,d=j.Children.only(u);return d?F.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,l=this.props,u=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,y=l.data,m=l.startIndex,x=l.endIndex,v=Math.max(n,this.props.x),g=Ag(Ag({},Ye(this.props,!1)),{},{x:v,y:u,width:f,height:d}),b=p||"Min value: ".concat((i=y[m])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[x])===null||o===void 0?void 0:o.name);return F.createElement(Pt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),s.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,g))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,y={pointerEvents:"none",fill:u};return F.createElement(Pt,{className:"recharts-brush-texts"},F.createElement(k0,K0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:o+s/2},y),this.getTextOfTick(a)),F.createElement(k0,K0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:o+s/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,l=n.y,u=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,y=h.endX,m=h.isTextActive,x=h.isSlideMoving,v=h.isTravellerMoving,g=h.isTravellerFocused;if(!a||!a.length||!me(s)||!me(l)||!me(u)||!me(f)||u<=0||f<=0)return null;var b=pt("recharts-brush",i),S=F.Children.count(o)===1,k=Rq("userSelect","none");return F.createElement(Pt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(m||x||v||g||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(i+s/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),F.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return F.isValidElement(n)?i=F.cloneElement(n,a):Je(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Ag({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?Vq({data:i,width:o,x:s,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>a?s=l:o=l}return a>=n[s]?s:o}}])}(j.PureComponent);Qn(Tl,"displayName","Brush");Qn(Tl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Hq=Fx;function Xq(e,t){var r;return Hq(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Kq=Xq,Yq=Sj,qq=Ao,Zq=Kq,Qq=Vn,Jq=ep;function eZ(e,t,r){var n=Qq(e)?Yq:Zq;return r&&Jq(e,t,r)&&(t=void 0),n(e,qq(t))}var tZ=eZ;const rZ=Ft(tZ);var ii=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},wS=Vj;function nZ(e,t,r){t=="__proto__"&&wS?wS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var aZ=nZ,iZ=aZ,oZ=Gj,sZ=Ao;function lZ(e,t){var r={};return t=sZ(t),oZ(e,function(n,a,i){iZ(r,a,t(n,a,i))}),r}var cZ=lZ;const uZ=Ft(cZ);function fZ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var dZ=fZ,hZ=Fx;function pZ(e,t){var r=!0;return hZ(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var gZ=pZ,mZ=dZ,yZ=gZ,vZ=Ao,xZ=Vn,bZ=ep;function wZ(e,t,r){var n=xZ(e)?mZ:yZ;return r&&bZ(e,t,r)&&(t=void 0),n(e,vZ(t))}var kZ=wZ;const wP=Ft(kZ);var SZ=["x","y"];function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gy.apply(this,arguments)}function kS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kS(Object(r),!0).forEach(function(n){jZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jZ(e,t,r){return t=CZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CZ(e){var t=PZ(e,"string");return of(t)=="symbol"?t:t+""}function PZ(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NZ(e,t){if(e==null)return{};var r=OZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MZ(e,t){var r=e.x,n=e.y,a=NZ(e,SZ),i="".concat(r),o=parseInt(i,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Fc(Fc(Fc(Fc(Fc({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function SS(e){return F.createElement(zy,Gy({shapeType:"rectangle",propTransformer:MZ,activeClassName:"recharts-active-bar"},e))}var _Z=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=me(n)||WT(n);return i?t(n,a):(i||js(),r)}},AZ=["value","background"],kP;function El(e){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},El(e)}function TZ(e,t){if(e==null)return{};var r=EZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(this,arguments)}function jS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(r),!0).forEach(function(n){lo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jP(n.key),n)}}function DZ(e,t,r){return t&&CS(e.prototype,t),r&&CS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function IZ(e,t,r){return t=Z0(t),RZ(e,SP()?Reflect.construct(t,r||[],Z0(e).constructor):t.apply(e,r))}function RZ(e,t){if(t&&(El(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LZ(e)}function LZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SP=function(){return!!e})()}function Z0(e){return Z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z0(e)}function BZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}function Wy(e,t){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wy(e,t)}function lo(e,t,r){return t=jP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jP(e){var t=FZ(e,"string");return El(t)=="symbol"?t:t+""}function FZ(e,t){if(El(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(El(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kf=function(e){function t(){var r;$Z(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=IZ(this,t,[].concat(a)),lo(r,"state",{isAnimationFinished:!1}),lo(r,"id",As("recharts-bar-")),lo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),lo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return BZ(t,e),DZ(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,u=i.activeBar,f=Ye(this.props,!1);return n&&n.map(function(d,h){var p=h===l,y=p?u:o,m=Or(Or(Or({},f),d),{},{isActive:p,option:y,index:h,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return F.createElement(Pt,q0({className:"recharts-bar-rectangle"},Ou(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),F.createElement(SS,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return F.createElement(Wa,{begin:l,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,m=i.map(function(x,v){var g=h&&h[v];if(g){var b=Sr(g.x,x.x),S=Sr(g.y,x.y),k=Sr(g.width,x.width),w=Sr(g.height,x.height);return Or(Or({},x),{},{x:b(y),y:S(y),width:k(y),height:w(y)})}if(o==="horizontal"){var C=Sr(0,x.height),P=C(y);return Or(Or({},x),{},{y:x.y+x.height-P,height:P})}var O=Sr(0,x.width),N=O(y);return Or(Or({},x),{},{width:N})});return F.createElement(Pt,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!ks(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=Ye(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,h=TZ(u,AZ);if(!d)return null;var p=Or(Or(Or(Or(Or({},h),{},{fill:"#eee"},d),l),Ou(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return F.createElement(SS,q0({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Un(f,cc);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(x,v){var g=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:g,errorVal:Ur(x,v)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return F.createElement(Pt,y,d.map(function(m){return F.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,f=n.top,d=n.width,h=n.height,p=n.isAnimationActive,y=n.background,m=n.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,v=pt("recharts-bar",o),g=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,S=g||b,k=Ke(m)?this.id:m;return F.createElement(Pt,{className:v},g||b?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(k)},F.createElement("rect",{x:g?u:u-d/2,y:b?f:f-h/2,width:g?d:d*2,height:b?h:h*2}))):null,F.createElement(Pt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(k,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,k),(!p||x)&&ai.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);kP=kf;lo(kf,"displayName","Bar");lo(kf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!To.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});lo(kf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=hH(n,r);if(!p)return null;var y=t.layout,m=r.type.defaultProps,x=m!==void 0?Or(Or({},m),r.props):r.props,v=x.dataKey,g=x.children,b=x.minPointSize,S=y==="horizontal"?o:i,k=u?S.scale.domain():null,w=wH({numericAxis:S}),C=Un(g,Gx),P=d.map(function(O,N){var E,M,_,$,D,R;u?E=pH(u[f+N],k):(E=Ur(O,v),Array.isArray(E)||(E=[w,E]));var A=_Z(b,kP.defaultProps.minPointSize)(E[1],N);if(y==="horizontal"){var T,I=[o.scale(E[0]),o.scale(E[1])],U=I[0],Z=I[1];M=Nk({axis:i,ticks:s,bandSize:a,offset:p.offset,entry:O,index:N}),_=(T=Z??U)!==null&&T!==void 0?T:void 0,$=p.size;var Y=U-Z;if(D=Number.isNaN(Y)?0:Y,R={x:M,y:o.y,width:$,height:o.height},Math.abs(A)>0&&Math.abs(D)<Math.abs(A)){var L=Fa(D||A)*(Math.abs(A)-Math.abs(D));_-=L,D+=L}}else{var Q=[i.scale(E[0]),i.scale(E[1])],fe=Q[0],J=Q[1];if(M=fe,_=Nk({axis:o,ticks:l,bandSize:a,offset:p.offset,entry:O,index:N}),$=J-fe,D=p.size,R={x:i.x,y:_,width:i.width,height:D},Math.abs(A)>0&&Math.abs($)<Math.abs(A)){var de=Fa($||A)*(Math.abs(A)-Math.abs($));$+=de}}return Or(Or(Or({},O),{},{x:M,y:_,width:$,height:D,value:u?E:E[1],payload:O,background:R},C&&C[N]&&C[N].props),{},{tooltipPayload:[rP(r,O)],tooltipPosition:{x:M+$/2,y:_+D/2}})});return Or({data:P,layout:y},h)});function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function zZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CP(n.key),n)}}function UZ(e,t,r){return t&&PS(e.prototype,t),r&&PS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(r),!0).forEach(function(n){hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hp(e,t,r){return t=CP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CP(e){var t=GZ(e,"string");return sf(t)=="symbol"?t:t+""}function GZ(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m1=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!ea(u,kf);return f.reduce(function(p,y){var m=r[y],x=m.orientation,v=m.domain,g=m.padding,b=g===void 0?{}:g,S=m.mirror,k=m.reversed,w="".concat(x).concat(S?"Mirror":""),C,P,O,N,E;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var M=v[1]-v[0],_=1/0,$=m.categoricalDomain.sort(KT);if($.forEach(function(Q,fe){fe>0&&(_=Math.min((Q||0)-($[fe-1]||0),_))}),Number.isFinite(_)){var D=_/M,R=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(C=D*R/2),m.padding==="no-gap"){var A=ws(t.barCategoryGap,D*R),T=D*R/2;C=T-A-(T-A)/R*A}}}a==="xAxis"?P=[n.left+(b.left||0)+(C||0),n.left+n.width-(b.right||0)-(C||0)]:a==="yAxis"?P=l==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(C||0),n.top+n.height-(b.bottom||0)-(C||0)]:P=m.range,k&&(P=[P[1],P[0]]);var I=fH(m,i,h),U=I.scale,Z=I.realScaleType;U.domain(v).range(P),dH(U);var Y=bH(U,Da(Da({},m),{},{realScaleType:Z}));a==="xAxis"?(E=x==="top"&&!S||x==="bottom"&&S,O=n.left,N=d[w]-E*m.height):a==="yAxis"&&(E=x==="left"&&!S||x==="right"&&S,O=d[w]-E*m.width,N=n.top);var L=Da(Da(Da({},m),Y),{},{realScaleType:Z,x:O,y:N,scale:U,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return L.bandSize=R0(L,Y),!m.hide&&a==="xAxis"?d[w]+=(E?-1:1)*L.height:m.hide||(d[w]+=(E?-1:1)*L.width),Da(Da({},p),{},hp({},y,L))},{})},PP=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},WZ=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return PP({x:r,y:n},{x:a,y:i})},NP=function(){function e(t){zZ(this,e),this.scale=t}return UZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();hp(NP,"EPS",1e-4);var y1=function(t){var r=Object.keys(t).reduce(function(n,a){return Da(Da({},n),{},hp({},a,NP.create(t[a])))},{});return Da(Da({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return uZ(a,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return wP(a,function(i,o){return r[o].isInRange(i)})}})};function VZ(e){return(e%180+180)%180}var HZ=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=VZ(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},XZ=Ao,KZ=yf,YZ=Qh;function qZ(e){return function(t,r,n){var a=Object(t);if(!KZ(t)){var i=XZ(r);t=YZ(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var ZZ=qZ,QZ=yP;function JZ(e){var t=QZ(e),r=t%1;return t===t?r?t-r:t:0}var eQ=JZ,tQ=Rj,rQ=Ao,nQ=eQ,aQ=Math.max;function iQ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:nQ(r);return a<0&&(a=aQ(n+a,0)),tQ(e,rQ(t),a)}var oQ=iQ,sQ=ZZ,lQ=oQ,cQ=sQ(lQ),uQ=cQ;const fQ=Ft(uQ);var dQ=q8(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),v1=j.createContext(void 0),x1=j.createContext(void 0),OP=j.createContext(void 0),MP=j.createContext({}),_P=j.createContext(void 0),AP=j.createContext(0),TP=j.createContext(0),OS=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,l=t.width,u=t.height,f=dQ(i);return F.createElement(v1.Provider,{value:n},F.createElement(x1.Provider,{value:a},F.createElement(MP.Provider,{value:i},F.createElement(OP.Provider,{value:f},F.createElement(_P.Provider,{value:o},F.createElement(AP.Provider,{value:u},F.createElement(TP.Provider,{value:l},s)))))))},hQ=function(){return j.useContext(_P)},EP=function(t){var r=j.useContext(v1);r==null&&js();var n=r[t];return n==null&&js(),n},pQ=function(){var t=j.useContext(v1);return eo(t)},gQ=function(){var t=j.useContext(x1),r=fQ(t,function(n){return wP(n.domain,Number.isFinite)});return r||eo(t)},$P=function(t){var r=j.useContext(x1);r==null&&js();var n=r[t];return n==null&&js(),n},mQ=function(){var t=j.useContext(OP);return t},yQ=function(){return j.useContext(MP)},b1=function(){return j.useContext(TP)},w1=function(){return j.useContext(AP)};function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function vQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IP(n.key),n)}}function bQ(e,t,r){return t&&xQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wQ(e,t,r){return t=Q0(t),kQ(e,DP()?Reflect.construct(t,r||[],Q0(e).constructor):t.apply(e,r))}function kQ(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SQ(e)}function SQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DP=function(){return!!e})()}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q0(e)}function jQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vy(e,t)}function Vy(e,t){return Vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vy(e,t)}function MS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(r),!0).forEach(function(n){k1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k1(e,t,r){return t=IP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IP(e){var t=CQ(e,"string");return $l(t)=="symbol"?t:t+""}function CQ(e,t){if($l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function PQ(e,t){return _Q(e)||MQ(e,t)||OQ(e,t)||NQ()}function NQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(e,t){if(e){if(typeof e=="string")return AS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AS(e,t)}}function AS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function _Q(e){if(Array.isArray(e))return e}function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(this,arguments)}var AQ=function(t,r){var n;return F.isValidElement(t)?n=F.cloneElement(t,r):Je(t)?n=t(r):n=F.createElement("line",Hy({},r,{className:"recharts-reference-line-line"})),n},TQ=function(t,r,n,a,i,o,s,l,u){var f=i.x,d=i.y,h=i.width,p=i.height;if(n){var y=u.y,m=t.y.apply(y,{position:o});if(ii(u,"discard")&&!t.y.isInRange(m))return null;var x=[{x:f+h,y:m},{x:f,y:m}];return l==="left"?x.reverse():x}if(r){var v=u.x,g=t.x.apply(v,{position:o});if(ii(u,"discard")&&!t.x.isInRange(g))return null;var b=[{x:g,y:d+p},{x:g,y:d}];return s==="top"?b.reverse():b}if(a){var S=u.segment,k=S.map(function(w){return t.apply(w,{position:o})});return ii(u,"discard")&&rZ(k,function(w){return!t.isInRange(w)})?null:k}return null};function EQ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,u=hQ(),f=EP(a),d=$P(i),h=mQ();if(!u||!h)return null;Ni(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=y1({x:f.scale,y:d.scale}),y=zr(t),m=zr(r),x=n&&n.length===2,v=TQ(p,y,m,x,h,e.position,f.orientation,d.orientation,e);if(!v)return null;var g=PQ(v,2),b=g[0],S=b.x,k=b.y,w=g[1],C=w.x,P=w.y,O=ii(e,"hidden")?"url(#".concat(u,")"):void 0,N=_S(_S({clipPath:O},Ye(e,!0)),{},{x1:S,y1:k,x2:C,y2:P});return F.createElement(Pt,{className:pt("recharts-reference-line",s)},AQ(o,N),nn.renderCallByParent(e,WZ({x1:S,y1:k,x2:C,y2:P})))}var co=function(e){function t(){return vQ(this,t),wQ(this,t,arguments)}return jQ(t,e),bQ(t,[{key:"render",value:function(){return F.createElement(EQ,this.props)}}])}(F.Component);k1(co,"displayName","ReferenceLine");k1(co,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(this,arguments)}function Dl(e){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ES(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(n){pp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LP(n.key),n)}}function IQ(e,t,r){return t&&DQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RQ(e,t,r){return t=J0(t),LQ(e,RP()?Reflect.construct(t,r||[],J0(e).constructor):t.apply(e,r))}function LQ(e,t){if(t&&(Dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BQ(e)}function BQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RP=function(){return!!e})()}function J0(e){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J0(e)}function FQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ky(e,t)}function Ky(e,t){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ky(e,t)}function pp(e,t,r){return t=LP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LP(e){var t=zQ(e,"string");return Dl(t)=="symbol"?t:t+""}function zQ(e,t){if(Dl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var UQ=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=y1({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return ii(t,"discard")&&!o.isInRange(s)?null:s},Sf=function(e){function t(){return $Q(this,t),RQ(this,t,arguments)}return FQ(t,e),IQ(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=zr(a),f=zr(i);if(Ni(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=UQ(this.props);if(!d)return null;var h=d.x,p=d.y,y=this.props,m=y.shape,x=y.className,v=ii(this.props,"hidden")?"url(#".concat(l,")"):void 0,g=ES(ES({clipPath:v},Ye(this.props,!0)),{},{cx:h,cy:p});return F.createElement(Pt,{className:pt("recharts-reference-dot",x)},t.renderDot(m,g),nn.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(F.Component);pp(Sf,"displayName","ReferenceDot");pp(Sf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});pp(Sf,"renderDot",function(e,t){var r;return F.isValidElement(e)?r=F.cloneElement(e,t):Je(e)?r=e(t):r=F.createElement(up,Xy({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yy.apply(this,arguments)}function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){gp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FP(n.key),n)}}function VQ(e,t,r){return t&&WQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HQ(e,t,r){return t=eh(t),XQ(e,BP()?Reflect.construct(t,r||[],eh(e).constructor):t.apply(e,r))}function XQ(e,t){if(t&&(Il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KQ(e)}function KQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BP=function(){return!!e})()}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eh(e)}function YQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qy(e,t)}function qy(e,t){return qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qy(e,t)}function gp(e,t,r){return t=FP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FP(e){var t=qQ(e,"string");return Il(t)=="symbol"?t:t+""}function qQ(e,t){if(Il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZQ=function(t,r,n,a,i){var o=i.x1,s=i.x2,l=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var h=y1({x:f.scale,y:d.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ii(i,"discard")&&(!h.isInRange(p)||!h.isInRange(y))?null:PP(p,y)},jf=function(e){function t(){return GQ(this,t),HQ(this,t,arguments)}return YQ(t,e),VQ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,f=n.clipPathId;Ni(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=zr(a),h=zr(i),p=zr(o),y=zr(s),m=this.props.shape;if(!d&&!h&&!p&&!y&&!m)return null;var x=ZQ(d,h,p,y,this.props);if(!x&&!m)return null;var v=ii(this.props,"hidden")?"url(#".concat(f,")"):void 0;return F.createElement(Pt,{className:pt("recharts-reference-area",l)},t.renderRect(m,DS(DS({clipPath:v},Ye(this.props,!0)),x)),nn.renderCallByParent(this.props,x))}}])}(F.Component);gp(jf,"displayName","ReferenceArea");gp(jf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gp(jf,"renderRect",function(e,t){var r;return F.isValidElement(e)?r=F.cloneElement(e,t):Je(e)?r=e(t):r=F.createElement(g1,Yy({},t,{className:"recharts-reference-area-rect"})),r});function zP(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function QQ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return HZ(n,r)}function JQ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function th(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function eJ(e,t){return zP(e,t+1)}function tJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,l=0,u=1,f=o,d=function(){var y=n==null?void 0:n[l];if(y===void 0)return{v:zP(n,u)};var m=l,x,v=function(){return x===void 0&&(x=r(y,m)),x},g=y.coordinate,b=l===0||th(e,g,v,f,s);b||(l=0,f=o,u+=1),b&&(f=g+e*(v()/2+a),l+=u)},h;u<=i.length;)if(h=d(),h)return h.v;return[]}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){rJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rJ(e,t,r){return t=nJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nJ(e){var t=aJ(e,"string");return lf(t)=="symbol"?t:t+""}function aJ(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iJ(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,l=t.end,u=function(h){var p=i[h],y,m=function(){return y===void 0&&(y=r(p,h)),y};if(h===o-1){var x=e*(p.coordinate+e*m()/2-l);i[h]=p=hn(hn({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate})}else i[h]=p=hn(hn({},p),{},{tickCoord:p.coordinate});var v=th(e,p.tickCoord,m,s,l);v&&(l=p.tickCoord-e*(m()/2+a),i[h]=hn(hn({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function oJ(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,l=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),h=e*(f.coordinate+e*d/2-u);o[s-1]=f=hn(hn({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var p=th(e,f.tickCoord,function(){return d},l,u);p&&(u=f.tickCoord-e*(d/2+a),o[s-1]=hn(hn({},f),{},{isShow:!0}))}for(var y=i?s-1:s,m=function(g){var b=o[g],S,k=function(){return S===void 0&&(S=r(b,g)),S};if(g===0){var w=e*(b.coordinate-e*k()/2-l);o[g]=b=hn(hn({},b),{},{tickCoord:w<0?b.coordinate-w*e:b.coordinate})}else o[g]=b=hn(hn({},b),{},{tickCoord:b.coordinate});var C=th(e,b.tickCoord,k,l,u);C&&(l=b.tickCoord+e*(k()/2+a),o[g]=hn(hn({},b),{},{isShow:!0}))},x=0;x<y;x++)m(x);return o}function S1(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(me(l)||To.isSsr)return eJ(a,typeof l=="number"&&me(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",y=f&&p==="width"?ru(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,S){var k=Je(u)?u(b.value,S):b.value;return p==="width"?QQ(ru(k,{fontSize:t,letterSpacing:r}),y,d):ru(k,{fontSize:t,letterSpacing:r})[p]},x=a.length>=2?Fa(a[1].coordinate-a[0].coordinate):1,v=JQ(i,x,p);return l==="equidistantPreserveStart"?tJ(x,v,m,a,o):(l==="preserveStart"||l==="preserveStartEnd"?h=oJ(x,v,m,a,o,l==="preserveStartEnd"):h=iJ(x,v,m,a,o),h.filter(function(g){return g.isShow}))}var sJ=["viewBox"],lJ=["viewBox"],cJ=["ticks"];function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function el(){return el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},el.apply(this,arguments)}function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RS(Object(r),!0).forEach(function(n){j1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tg(e,t){if(e==null)return{};var r=uJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GP(n.key),n)}}function dJ(e,t,r){return t&&LS(e.prototype,t),r&&LS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hJ(e,t,r){return t=rh(t),pJ(e,UP()?Reflect.construct(t,r||[],rh(e).constructor):t.apply(e,r))}function pJ(e,t){if(t&&(Rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gJ(e)}function gJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UP=function(){return!!e})()}function rh(e){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rh(e)}function mJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zy(e,t)}function Zy(e,t){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zy(e,t)}function j1(e,t,r){return t=GP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GP(e){var t=yJ(e,"string");return Rl(t)=="symbol"?t:t+""}function yJ(e,t){if(Rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uc=function(e){function t(r){var n;return fJ(this,t),n=hJ(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return mJ(t,e),dJ(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Tg(n,sJ),s=this.props,l=s.viewBox,u=Tg(s,lJ);return!cl(i,l)||!cl(o,u)||!cl(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,p,y,m,x,v,g,b=d?-1:1,S=n.tickSize||f,k=me(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=y=n.coordinate,x=o+ +!d*l,m=x-b*S,g=m-b*h,v=k;break;case"left":m=x=n.coordinate,y=i+ +!d*s,p=y-b*S,v=p-b*h,g=k;break;case"right":m=x=n.coordinate,y=i+ +d*s,p=y+b*S,v=p+b*h,g=k;break;default:p=y=n.coordinate,x=o+ +d*l,m=x+b*S,g=m+b*h,v=k;break}return{line:{x1:p,y1:m,x2:y,y2:x},tick:{x:v,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,f=n.axisLine,d=Rr(Rr(Rr({},Ye(this.props,!1)),Ye(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=Rr(Rr({},d),{},{x1:a,y1:i+h*s,x2:a+o,y2:i+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);d=Rr(Rr({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+s})}return F.createElement("line",el({},d,{className:pt("recharts-cartesian-axis-line",ba(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,l=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,h=s.unit,p=S1(Rr(Rr({},this.props),{},{ticks:n}),a,i),y=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),x=Ye(this.props,!1),v=Ye(f,!1),g=Rr(Rr({},x),{},{fill:"none"},Ye(l,!1)),b=p.map(function(S,k){var w=o.getTickLineCoord(S),C=w.line,P=w.tick,O=Rr(Rr(Rr(Rr({textAnchor:y,verticalAnchor:m},x),{},{stroke:"none",fill:u},v),P),{},{index:k,payload:S,visibleTicksCount:p.length,tickFormatter:d});return F.createElement(Pt,el({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Ou(o.props,S,k)),l&&F.createElement("line",el({},g,C,{className:pt("recharts-cartesian-axis-tick-line",ba(l,"className"))})),f&&t.renderTickItem(f,O,"".concat(Je(d)?d(S.value,k):S.value).concat(h||"")))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,p=Tg(d,cJ),y=h;return Je(l)&&(y=h&&h.length>0?l(this.props):l(p)),o<=0||s<=0||!y||!y.length?null:F.createElement(Pt,{className:pt("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),nn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=pt(a.className,"recharts-cartesian-axis-tick-value");return F.isValidElement(n)?o=F.cloneElement(n,Rr(Rr({},a),{},{className:s})):Je(n)?o=n(Rr(Rr({},a),{},{className:s})):o=F.createElement(k0,el({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);j1(uc,"displayName","CartesianAxis");j1(uc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var vJ=["x1","y1","x2","y2","key"],xJ=["offset"];function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function BS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BS(Object(r),!0).forEach(function(n){bJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bJ(e,t,r){return t=wJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wJ(e){var t=kJ(e,"string");return Cs(t)=="symbol"?t:t+""}function kJ(e,t){if(Cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ns(){return ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ns.apply(this,arguments)}function FS(e,t){if(e==null)return{};var r=SJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jJ=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return F.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function WP(e,t){var r;if(F.isValidElement(e))r=F.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=FS(t,vJ),u=Ye(l,!1);u.offset;var f=FS(u,xJ);r=F.createElement("line",ns({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function CJ(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=gn(gn({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return WP(a,u)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function PJ(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=gn(gn({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return WP(a,u)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function NJ(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var f=s.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var y=!f[p+1],m=y?a+o-h:f[p+1]-h;if(m<=0)return null;var x=p%t.length;return F.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:m,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function OJ(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var y=!f[p+1],m=y?i+s-h:f[p+1]-h;if(m<=0)return null;var x=p%n.length;return F.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:m,height:l,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var MJ=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return eP(S1(gn(gn(gn({},uc.defaultProps),n),{},{ticks:ji(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},_J=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return eP(S1(gn(gn(gn({},uc.defaultProps),n),{},{ticks:ji(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Bs={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function oi(e){var t,r,n,a,i,o,s=b1(),l=w1(),u=yQ(),f=gn(gn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Bs.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Bs.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Bs.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Bs.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Bs.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Bs.verticalFill,x:me(e.x)?e.x:u.left,y:me(e.y)?e.y:u.top,width:me(e.width)?e.width:u.width,height:me(e.height)?e.height:u.height}),d=f.x,h=f.y,p=f.width,y=f.height,m=f.syncWithTicks,x=f.horizontalValues,v=f.verticalValues,g=pQ(),b=gQ();if(!me(p)||p<=0||!me(y)||y<=0||!me(d)||d!==+d||!me(h)||h!==+h)return null;var S=f.verticalCoordinatesGenerator||MJ,k=f.horizontalCoordinatesGenerator||_J,w=f.horizontalPoints,C=f.verticalPoints;if((!w||!w.length)&&Je(k)){var P=x&&x.length,O=k({yAxis:b?gn(gn({},b),{},{ticks:P?x:b.ticks}):void 0,width:s,height:l,offset:u},P?!0:m);Ni(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Cs(O),"]")),Array.isArray(O)&&(w=O)}if((!C||!C.length)&&Je(S)){var N=v&&v.length,E=S({xAxis:g?gn(gn({},g),{},{ticks:N?v:g.ticks}):void 0,width:s,height:l,offset:u},N?!0:m);Ni(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Cs(E),"]")),Array.isArray(E)&&(C=E)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(jJ,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),F.createElement(CJ,ns({},f,{offset:u,horizontalPoints:w,xAxis:g,yAxis:b})),F.createElement(PJ,ns({},f,{offset:u,verticalPoints:C,xAxis:g,yAxis:b})),F.createElement(NJ,ns({},f,{horizontalPoints:w})),F.createElement(OJ,ns({},f,{verticalPoints:C})))}oi.displayName="CartesianGrid";var AJ=["type","layout","connectNulls","ref"],TJ=["key"];function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function zS(e,t){if(e==null)return{};var r=EJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ou.apply(this,arguments)}function US(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?US(Object(r),!0).forEach(function(n){Ia(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fs(e){return RJ(e)||IJ(e)||DJ(e)||$J()}function $J(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DJ(e,t){if(e){if(typeof e=="string")return Qy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qy(e,t)}}function IJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RJ(e){if(Array.isArray(e))return Qy(e)}function Qy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HP(n.key),n)}}function BJ(e,t,r){return t&&GS(e.prototype,t),r&&GS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function FJ(e,t,r){return t=nh(t),zJ(e,VP()?Reflect.construct(t,r||[],nh(e).constructor):t.apply(e,r))}function zJ(e,t){if(t&&(Ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UJ(e)}function UJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VP=function(){return!!e})()}function nh(e){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(e)}function GJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jy(e,t)}function Jy(e,t){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jy(e,t)}function Ia(e,t,r){return t=HP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HP(e){var t=WJ(e,"string");return Ll(t)=="symbol"?t:t+""}function WJ(e,t){if(Ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ar=function(e){function t(){var r;LJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=FJ(this,t,[].concat(a)),Ia(r,"state",{isAnimationFinished:!0,totalLength:0}),Ia(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),Ia(r,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(v,g){return v+g});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,h=s-o,p=[],y=0,m=0;y<l.length;m+=l[y],++y)if(m+l[y]>d){p=[].concat(Fs(l.slice(0,y)),[d-m]);break}var x=p.length%2===0?[0,h]:[h];return[].concat(Fs(t.repeat(l,f)),Fs(p),x).map(function(v){return"".concat(v,"px")}).join(", ")}),Ia(r,"id",As("recharts-line-")),Ia(r,"pathRef",function(o){r.mainCurve=o}),Ia(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ia(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return GJ(t,e),BJ(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Un(f,cc);if(!d)return null;var h=function(m,x){return{x:m.x,y:m.y,value:m.value,errorVal:Ur(m.payload,x)}},p={clipPath:n?"url(#clipPath-".concat(a,")"):null};return F.createElement(Pt,p,d.map(function(y){return F.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,f=s.dataKey,d=Ye(this.props,!1),h=Ye(l,!0),p=u.map(function(m,x){var v=Zn(Zn(Zn({key:"dot-".concat(x),r:3},d),h),{},{index:x,cx:m.x,cy:m.y,value:m.value,dataKey:f,payload:m.payload,points:u});return t.renderDotItem(l,v)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return F.createElement(Pt,ou({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,l=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=zS(s,AJ),h=Zn(Zn(Zn({},Ye(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:l,layout:u,connectNulls:f});return F.createElement(cs,ou({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,y=o.animateNewValues,m=o.width,x=o.height,v=this.state,g=v.prevPoints,b=v.totalLength;return F.createElement(Wa,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var k=S.t;if(g){var w=g.length/s.length,C=s.map(function(M,_){var $=Math.floor(_*w);if(g[$]){var D=g[$],R=Sr(D.x,M.x),A=Sr(D.y,M.y);return Zn(Zn({},M),{},{x:R(k),y:A(k)})}if(y){var T=Sr(m*2,M.x),I=Sr(x/2,M.y);return Zn(Zn({},M),{},{x:T(k),y:I(k)})}return Zn(Zn({},M),{},{x:M.x,y:M.y})});return i.renderCurveStatically(C,n,a)}var P=Sr(0,b),O=P(k),N;if(l){var E="".concat(l).split(/[,\s]+/gim).map(function(M){return parseFloat(M)});N=i.getStrokeDasharray(O,b,E)}else N=i.generateSimpleStrokeDasharray(b,O);return i.renderCurveStatically(s,n,a,{strokeDasharray:N})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return s&&o&&o.length&&(!u&&f>0||!ks(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.xAxis,f=a.yAxis,d=a.top,h=a.left,p=a.width,y=a.height,m=a.isAnimationActive,x=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=s.length===1,b=pt("recharts-line",l),S=u&&u.allowDataOverflow,k=f&&f.allowDataOverflow,w=S||k,C=Ke(x)?this.id:x,P=(n=Ye(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=P.r,N=O===void 0?3:O,E=P.strokeWidth,M=E===void 0?2:E,_=K3(o)?o:{},$=_.clipDot,D=$===void 0?!0:$,R=N*2+M;return F.createElement(Pt,{className:b},S||k?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(C)},F.createElement("rect",{x:S?h:h-p/2,y:k?d:d-y/2,width:S?p:p*2,height:k?y:y*2})),!D&&F.createElement("clipPath",{id:"clipPath-dots-".concat(C)},F.createElement("rect",{x:h-R/2,y:d-R/2,width:p+R,height:y+R}))):null,!g&&this.renderCurve(w,C),this.renderErrorBar(w,C),(g||o)&&this.renderDots(w,D,C),(!m||v)&&ai.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Fs(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(Fs(o),Fs(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(F.isValidElement(n))i=F.cloneElement(n,a);else if(Je(n))i=n(a);else{var o=a.key,s=zS(a,TJ),l=pt("recharts-line-dot",typeof n!="boolean"?n.className:"");i=F.createElement(up,ou({key:o},s,{className:l}))}return i}}])}(j.PureComponent);Ia(Ar,"displayName","Line");Ia(Ar,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!To.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ia(Ar,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,f=t.layout,d=l.map(function(h,p){var y=Ur(h,o);return f==="horizontal"?{x:Ml({axis:r,ticks:a,bandSize:s,entry:h,index:p}),y:Ke(y)?null:n.scale(y),value:y,payload:h}:{x:Ke(y)?null:r.scale(y),y:Ml({axis:n,ticks:i,bandSize:s,entry:h,index:p}),value:y,payload:h}});return Zn({points:d,layout:f},u)});var VJ=["layout","type","stroke","connectNulls","isRange","ref"],HJ=["key"],XP;function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function KP(e,t){if(e==null)return{};var r=XJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},as.apply(this,arguments)}function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(r),!0).forEach(function(n){Ja(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qP(n.key),n)}}function YJ(e,t,r){return t&&VS(e.prototype,t),r&&VS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qJ(e,t,r){return t=ah(t),ZJ(e,YP()?Reflect.construct(t,r||[],ah(e).constructor):t.apply(e,r))}function ZJ(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QJ(e)}function QJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YP=function(){return!!e})()}function ah(e){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ah(e)}function JJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}function ev(e,t){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ev(e,t)}function Ja(e,t,r){return t=qP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(e){var t=eee(e,"string");return Bl(t)=="symbol"?t:t+""}function eee(e,t){if(Bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var va=function(e){function t(){var r;KJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=qJ(this,t,[].concat(a)),Ja(r,"state",{isAnimationFinished:!0}),Ja(r,"id",As("recharts-area-")),Ja(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Je(o)&&o()}),Ja(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Je(o)&&o()}),r}return JJ(t,e),YJ(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,f=l.points,d=l.dataKey,h=Ye(this.props,!1),p=Ye(u,!0),y=f.map(function(x,v){var g=Ki(Ki(Ki({key:"dot-".concat(v),r:3},h),p),{},{index:v,cx:x.x,cy:x.y,dataKey:d,value:x.value,payload:x.payload,points:f});return t.renderDotItem(u,g)}),m={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return F.createElement(Pt,as({className:"recharts-area-dots"},m),y)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,u=o[o.length-1].x,f=n*Math.abs(l-u),d=so(o.map(function(h){return h.y||0}));return me(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(so(i.map(function(h){return h.y||0})),d)),me(d)?F.createElement("rect",{x:l<u?l:l-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,u=o[o.length-1].y,f=n*Math.abs(l-u),d=so(o.map(function(h){return h.x||0}));return me(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(so(i.map(function(h){return h.x||0})),d)),me(d)?F.createElement("rect",{x:0,y:l<u?l:l-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,l=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,h=s.isRange;s.ref;var p=KP(s,VJ);return F.createElement(Pt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},F.createElement(cs,as({},Ye(p,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&F.createElement(cs,as({},Ye(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&h&&F.createElement(cs,as({},Ye(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,y=this.state,m=y.prevPoints,x=y.prevBaseLine;return F.createElement(Wa,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var g=v.t;if(m){var b=m.length/s.length,S=s.map(function(P,O){var N=Math.floor(O*b);if(m[N]){var E=m[N],M=Sr(E.x,P.x),_=Sr(E.y,P.y);return Ki(Ki({},P),{},{x:M(g),y:_(g)})}return P}),k;if(me(l)&&typeof l=="number"){var w=Sr(x,l);k=w(g)}else if(Ke(l)||rc(l)){var C=Sr(x,0);k=C(g)}else k=l.map(function(P,O){var N=Math.floor(O*b);if(x[N]){var E=x[N],M=Sr(E.x,P.x),_=Sr(E.y,P.y);return Ki(Ki({},P),{},{x:M(g),y:_(g)})}return P});return i.renderAreaStatically(S,k,n,a)}return F.createElement(Pt,null,F.createElement("defs",null,F.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(g))),F.createElement(Pt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,l,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&o&&o.length&&(!f&&h>0||!ks(f,o)||!ks(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.top,f=a.left,d=a.xAxis,h=a.yAxis,p=a.width,y=a.height,m=a.isAnimationActive,x=a.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,g=s.length===1,b=pt("recharts-area",l),S=d&&d.allowDataOverflow,k=h&&h.allowDataOverflow,w=S||k,C=Ke(x)?this.id:x,P=(n=Ye(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=P.r,N=O===void 0?3:O,E=P.strokeWidth,M=E===void 0?2:E,_=K3(o)?o:{},$=_.clipDot,D=$===void 0?!0:$,R=N*2+M;return F.createElement(Pt,{className:b},S||k?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(C)},F.createElement("rect",{x:S?f:f-p/2,y:k?u:u-y/2,width:S?p:p*2,height:k?y:y*2})),!D&&F.createElement("clipPath",{id:"clipPath-dots-".concat(C)},F.createElement("rect",{x:f-R/2,y:u-R/2,width:p+R,height:y+R}))):null,g?null:this.renderArea(w,C),(o||g)&&this.renderDots(w,D,C),(!m||v)&&ai.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(j.PureComponent);XP=va;Ja(va,"displayName","Area");Ja(va,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!To.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ja(va,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(me(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Ja(va,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=t.layout,y=u&&u.length,m=XP.getBaseValue(t,r,n,a),x=p==="horizontal",v=!1,g=d.map(function(S,k){var w;y?w=u[f+k]:(w=Ur(S,l),Array.isArray(w)?v=!0:w=[m,w]);var C=w[1]==null||y&&Ur(S,l)==null;return x?{x:Ml({axis:n,ticks:i,bandSize:s,entry:S,index:k}),y:C?null:a.scale(w[1]),value:w,payload:S}:{x:C?null:n.scale(w[1]),y:Ml({axis:a,ticks:o,bandSize:s,entry:S,index:k}),value:w,payload:S}}),b;return y||v?b=g.map(function(S){var k=Array.isArray(S.value)?S.value[0]:null;return x?{x:S.x,y:k!=null&&S.y!=null?a.scale(k):null}:{x:k!=null?n.scale(k):null,y:S.y}}):b=x?a.scale(m):n.scale(m),Ki({points:g,baseLine:b,layout:p,isRange:v},h)});Ja(va,"renderDotItem",function(e,t){var r;if(F.isValidElement(e))r=F.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=pt("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=KP(t,HJ);r=F.createElement(up,as({},i,{key:a,className:n}))}return r});function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function tee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ree(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JP(n.key),n)}}function nee(e,t,r){return t&&ree(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aee(e,t,r){return t=ih(t),iee(e,ZP()?Reflect.construct(t,r||[],ih(e).constructor):t.apply(e,r))}function iee(e,t){if(t&&(Fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oee(e)}function oee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZP=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(e)}function see(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}function tv(e,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tv(e,t)}function QP(e,t,r){return t=JP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JP(e){var t=lee(e,"string");return Fl(t)=="symbol"?t:t+""}function lee(e,t){if(Fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mp=function(e){function t(){return tee(this,t),aee(this,t,arguments)}return see(t,e),nee(t,[{key:"render",value:function(){return null}}])}(j.Component);QP(mp,"displayName","ZAxis");QP(mp,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var cee=["option","isActive"];function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},su.apply(this,arguments)}function uee(e,t){if(e==null)return{};var r=fee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dee(e){var t=e.option,r=e.isActive,n=uee(e,cee);return typeof t=="string"?j.createElement(zy,su({option:j.createElement(Zh,su({type:t},n)),isActive:r,shapeType:"symbols"},n)):j.createElement(zy,su({option:t,isActive:r,shapeType:"symbols"},n))}function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lu.apply(this,arguments)}function HS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HS(Object(r),!0).forEach(function(n){uo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tN(n.key),n)}}function pee(e,t,r){return t&&XS(e.prototype,t),r&&XS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gee(e,t,r){return t=oh(t),mee(e,eN()?Reflect.construct(t,r||[],oh(e).constructor):t.apply(e,r))}function mee(e,t){if(t&&(zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yee(e)}function yee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(e)}function vee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rv(e,t)}function rv(e,t){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rv(e,t)}function uo(e,t,r){return t=tN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tN(e){var t=xee(e,"string");return zl(t)=="symbol"?t:t+""}function xee(e,t){if(zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jn=function(e){function t(){var r;hee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=gee(this,t,[].concat(a)),uo(r,"state",{isAnimationFinished:!1}),uo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),uo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),uo(r,"id",As("recharts-scatter-")),r}return vee(t,e),pee(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,l=i.activeIndex,u=Ye(this.props,!1);return n.map(function(f,d){var h=l===d,p=h?s:o,y=ha(ha({},u),f);return F.createElement(Pt,lu({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},Ou(a.props,f,d),{role:"img"}),F.createElement(dee,lu({option:p,isActive:h,key:"symbol-".concat(d)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return F.createElement(Wa,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,y=i.map(function(m,x){var v=d&&d[x];if(v){var g=Sr(v.cx,m.cx),b=Sr(v.cy,m.cy),S=Sr(v.size,m.size);return ha(ha({},m),{},{cx:g(p),cy:b(p),size:S(p)})}var k=Sr(0,m.size);return ha(ha({},m),{},{size:k(p)})});return F.createElement(Pt,null,n.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!ks(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,l=a.children,u=Un(l,cc);return u?u.map(function(f,d){var h=f.props,p=h.direction,y=h.dataKey;return F.cloneElement(f,{key:"".concat(p,"-").concat(y,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(x,v){return{x:x.cx,y:x.cy,value:p==="x"?+x.node.x:+x.node.y,errorVal:Ur(x,v)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,l=Ye(this.props,!1),u=Ye(i,!1),f,d;if(o==="joint")f=a.map(function(b){return{x:b.cx,y:b.cy}});else if(o==="fitting"){var h=XT(a),p=h.xmin,y=h.xmax,m=h.a,x=h.b,v=function(S){return m*S+x};f=[{x:p,y:v(p)},{x:y,y:v(y)}]}var g=ha(ha(ha({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:f});return F.isValidElement(i)?d=F.cloneElement(i,g):Je(i)?d=i(g):d=F.createElement(cs,lu({},g,{type:s})),F.createElement(Pt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,l=n.xAxis,u=n.yAxis,f=n.left,d=n.top,h=n.width,p=n.height,y=n.id,m=n.isAnimationActive;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,v=pt("recharts-scatter",s),g=l&&l.allowDataOverflow,b=u&&u.allowDataOverflow,S=g||b,k=Ke(y)?this.id:y;return F.createElement(Pt,{className:v,clipPath:S?"url(#clipPath-".concat(k,")"):null},g||b?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(k)},F.createElement("rect",{x:g?f:f-h/2,y:b?d:d-p/2,width:g?h:h*2,height:b?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),F.createElement(Pt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||x)&&ai.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(j.PureComponent);uo(jn,"displayName","Scatter");uo(jn,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!To.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});uo(jn,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=a.props.tooltipType,f=Un(a.props.children,Gx),d=Ke(t.dataKey)?a.props.dataKey:t.dataKey,h=Ke(r.dataKey)?a.props.dataKey:r.dataKey,p=n&&n.dataKey,y=n?n.range:mp.defaultProps.range,m=y&&y[0],x=t.scale.bandwidth?t.scale.bandwidth():0,v=r.scale.bandwidth?r.scale.bandwidth():0,g=i.map(function(b,S){var k=Ur(b,d),w=Ur(b,h),C=!Ke(p)&&Ur(b,p)||"-",P=[{name:Ke(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:k,payload:b,dataKey:d,type:u},{name:Ke(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:w,payload:b,dataKey:h,type:u}];C!=="-"&&P.push({name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:b,dataKey:p,type:u});var O=Ml({axis:t,ticks:o,bandSize:x,entry:b,index:S,dataKey:d}),N=Ml({axis:r,ticks:s,bandSize:v,entry:b,index:S,dataKey:h}),E=C!=="-"?n.scale(C):m,M=Math.sqrt(Math.max(E,0)/Math.PI);return ha(ha({},b),{},{cx:O,cy:N,x:O-M,y:N-M,xAxis:t,yAxis:r,zAxis:n,width:2*M,height:2*M,size:E,node:{x:k,y:w,z:C},tooltipPayload:P,tooltipPosition:{x:O,y:N},payload:b},f&&f[S]&&f[S].props)});return ha({points:g},l)});function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function bee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aN(n.key),n)}}function kee(e,t,r){return t&&wee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function See(e,t,r){return t=sh(t),jee(e,rN()?Reflect.construct(t,r||[],sh(e).constructor):t.apply(e,r))}function jee(e,t){if(t&&(Ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cee(e)}function Cee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rN=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sh(e)}function Pee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nv(e,t)}function nv(e,t){return nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nv(e,t)}function nN(e,t,r){return t=aN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aN(e){var t=Nee(e,"string");return Ul(t)=="symbol"?t:t+""}function Nee(e,t){if(Ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(this,arguments)}function Oee(e){var t=e.xAxisId,r=b1(),n=w1(),a=EP(t);return a==null?null:j.createElement(uc,av({},a,{className:pt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ji(o,!0)}}))}var Gn=function(e){function t(){return bee(this,t),See(this,t,arguments)}return Pee(t,e),kee(t,[{key:"render",value:function(){return j.createElement(Oee,this.props)}}])}(j.Component);nN(Gn,"displayName","XAxis");nN(Gn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function Mee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sN(n.key),n)}}function Aee(e,t,r){return t&&_ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tee(e,t,r){return t=lh(t),Eee(e,iN()?Reflect.construct(t,r||[],lh(e).constructor):t.apply(e,r))}function Eee(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ee(e)}function $ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iN=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lh(e)}function Dee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iv(e,t)}function iv(e,t){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iv(e,t)}function oN(e,t,r){return t=sN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sN(e){var t=Iee(e,"string");return Gl(t)=="symbol"?t:t+""}function Iee(e,t){if(Gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ov.apply(this,arguments)}var Ree=function(t){var r=t.yAxisId,n=b1(),a=w1(),i=$P(r);return i==null?null:j.createElement(uc,ov({},i,{className:pt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return ji(s,!0)}}))},Wn=function(e){function t(){return Mee(this,t),Tee(this,t,arguments)}return Dee(t,e),Aee(t,[{key:"render",value:function(){return j.createElement(Ree,this.props)}}])}(j.Component);oN(Wn,"displayName","YAxis");oN(Wn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function KS(e){return zee(e)||Fee(e)||Bee(e)||Lee()}function Lee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bee(e,t){if(e){if(typeof e=="string")return sv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sv(e,t)}}function Fee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zee(e){if(Array.isArray(e))return sv(e)}function sv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lv=function(t,r,n,a,i){var o=Un(t,co),s=Un(t,Sf),l=[].concat(KS(o),KS(s)),u=Un(t,jf),f="".concat(a,"Id"),d=a[0],h=r;if(l.length&&(h=l.reduce(function(m,x){if(x.props[f]===n&&ii(x.props,"extendDomain")&&me(x.props[d])){var v=x.props[d];return[Math.min(m[0],v),Math.max(m[1],v)]}return m},h)),u.length){var p="".concat(d,"1"),y="".concat(d,"2");h=u.reduce(function(m,x){if(x.props[f]===n&&ii(x.props,"extendDomain")&&me(x.props[p])&&me(x.props[y])){var v=x.props[p],g=x.props[y];return[Math.min(m[0],v,g),Math.max(m[1],v,g)]}return m},h)}return i&&i.length&&(h=i.reduce(function(m,x){return me(x)?[Math.min(m[0],x),Math.max(m[1],x)]:m},h)),h},lN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function i(l,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new a(f,d||l,h),y=r?r+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],p]:l._events[y].push(p):(l._events[y]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,y=new Array(p);h<p;h++)y[h]=d[h].fn;return y},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,h,p,y){var m=r?r+u:u;if(!this._events[m])return!1;var x=this._events[m],v=arguments.length,g,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,p),!0;case 6:return x.fn.call(x.context,f,d,h,p,y),!0}for(b=1,g=new Array(v-1);b<v;b++)g[b-1]=arguments[b];x.fn.apply(x.context,g)}else{var S=x.length,k;for(b=0;b<S;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),v){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,f);break;case 3:x[b].fn.call(x[b].context,f,d);break;case 4:x[b].fn.call(x[b].context,f,d,h);break;default:if(!g)for(k=1,g=new Array(v-1);k<v;k++)g[k-1]=arguments[k];x[b].fn.apply(x[b].context,g)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===f&&(!h||y.once)&&(!d||y.context===d)&&o(this,p);else{for(var m=0,x=[],v=y.length;m<v;m++)(y[m].fn!==f||h&&!y[m].once||d&&y[m].context!==d)&&x.push(y[m]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(lN);var Uee=lN.exports;const Gee=Ft(Uee);var Eg=new Gee,$g="recharts.syncMouseEvents";function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function Wee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cN(n.key),n)}}function Hee(e,t,r){return t&&Vee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dg(e,t,r){return t=cN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cN(e){var t=Xee(e,"string");return cf(t)=="symbol"?t:t+""}function Xee(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Kee=function(){function e(){Wee(this,e),Dg(this,"activeIndex",0),Dg(this,"coordinateList",[]),Dg(this,"layout","horizontal")}return Hee(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+l+u,h=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Yee(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&me(n)&&me(a))return!0}return!1}function qee(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function uN(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=an(t,r,n,a),s=an(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Zee(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=an(s,l,u,d),p=an(s,l,f,d);n=h.x,a=h.y,i=p.x,o=p.y}else return uN(t);return[{x:n,y:a},{x:i,y:o}]}function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function YS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YS(Object(r),!0).forEach(function(n){Qee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qee(e,t,r){return t=Jee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jee(e){var t=ete(e,"string");return uf(t)=="symbol"?t:t+""}function ete(e,t){if(uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tte(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var y,m=cs;if(h==="ScatterChart")y=o,m=NY;else if(h==="BarChart")y=qee(d,o,l,f),m=g1;else if(d==="radial"){var x=uN(o),v=x.cx,g=x.cy,b=x.radius,S=x.startAngle,k=x.endAngle;y={cx:v,cy:g,startAngle:S,endAngle:k,innerRadius:b,outerRadius:b},m=iP}else y={points:Zee(d,o,l)},m=cs;var w=fd(fd(fd(fd({stroke:"#ccc",pointerEvents:"none"},l),y),Ye(p,!1)),{},{payload:s,payloadIndex:u,className:pt("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,w):j.createElement(m,w)}var rte=["item"],nte=["children","className","width","height","style","compact","title","desc"];function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tl.apply(this,arguments)}function qS(e,t){return ote(e)||ite(e,t)||dN(e,t)||ate()}function ate(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ite(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function ote(e){if(Array.isArray(e))return e}function ZS(e,t){if(e==null)return{};var r=ste(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ste(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hN(n.key),n)}}function ute(e,t,r){return t&&cte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fte(e,t,r){return t=ch(t),dte(e,fN()?Reflect.construct(t,r||[],ch(e).constructor):t.apply(e,r))}function dte(e,t){if(t&&(Wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hte(e)}function hte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fN=function(){return!!e})()}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ch(e)}function pte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cv(e,t)}function cv(e,t){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cv(e,t)}function Vl(e){return yte(e)||mte(e)||dN(e)||gte()}function gte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dN(e,t){if(e){if(typeof e=="string")return uv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uv(e,t)}}function mte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yte(e){if(Array.isArray(e))return uv(e)}function uv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QS(Object(r),!0).forEach(function(n){Ge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ge(e,t,r){return t=hN(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hN(e){var t=vte(e,"string");return Wl(t)=="symbol"?t:t+""}function vte(e,t){if(Wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xte={xAxis:["bottom","top"],yAxis:["left","right"]},bte={width:"100%",height:"100%"},pN={x:0,y:0};function dd(e){return e}var wte=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},kte=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return ae(ae(ae({},a),an(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,u=a.angle;return ae(ae(ae({},a),an(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return pN},yp=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Vl(s),Vl(u)):s},[]);return o.length>0?o:t&&t.length&&me(a)&&me(i)?t.slice(a,i+1):[]};function gN(e){return e==="number"?[0,"auto"]:void 0}var fv=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=yp(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(l,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?s:d;h=s0(p,o.dataKey,a)}else h=d&&d[n]||s[n];return h?[].concat(Vl(l),[rP(u,h)]):l},[])},JS=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=wte(i,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,f=iH(o,s,u,l);if(f>=0&&u){var d=u[f]&&u[f].value,h=fv(t,r,f,d),p=kte(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},Ste=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=JC(f,i);return n.reduce(function(y,m){var x,v=m.type.defaultProps!==void 0?ae(ae({},m.type.defaultProps),m.props):m.props,g=v.type,b=v.dataKey,S=v.allowDataOverflow,k=v.allowDuplicatedCategory,w=v.scale,C=v.ticks,P=v.includeHidden,O=v[o];if(y[O])return y;var N=yp(t.data,{graphicalItems:a.filter(function(Y){var L,Q=o in Y.props?Y.props[o]:(L=Y.type.defaultProps)===null||L===void 0?void 0:L[o];return Q===O}),dataStartIndex:l,dataEndIndex:u}),E=N.length,M,_,$;Yee(v.domain,S,g)&&(M=Cy(v.domain,null,S),p&&(g==="number"||w!=="auto")&&($=au(N,b,"category")));var D=gN(g);if(!M||M.length===0){var R,A=(R=v.domain)!==null&&R!==void 0?R:D;if(b){if(M=au(N,b,g),g==="category"&&p){var T=HT(M);k&&T?(_=M,M=X0(0,E)):k||(M=_k(A,M,m).reduce(function(Y,L){return Y.indexOf(L)>=0?Y:[].concat(Vl(Y),[L])},[]))}else if(g==="category")k?M=M.filter(function(Y){return Y!==""&&!Ke(Y)}):M=_k(A,M,m).reduce(function(Y,L){return Y.indexOf(L)>=0||L===""||Ke(L)?Y:[].concat(Vl(Y),[L])},[]);else if(g==="number"){var I=uH(N,a.filter(function(Y){var L,Q,fe=o in Y.props?Y.props[o]:(L=Y.type.defaultProps)===null||L===void 0?void 0:L[o],J="hide"in Y.props?Y.props.hide:(Q=Y.type.defaultProps)===null||Q===void 0?void 0:Q.hide;return fe===O&&(P||!J)}),b,i,f);I&&(M=I)}p&&(g==="number"||w!=="auto")&&($=au(N,b,"category"))}else p?M=X0(0,E):s&&s[O]&&s[O].hasStack&&g==="number"?M=h==="expand"?[0,1]:tP(s[O].stackGroups,l,u):M=QC(N,a.filter(function(Y){var L=o in Y.props?Y.props[o]:Y.type.defaultProps[o],Q="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return L===O&&(P||!Q)}),g,f,!0);if(g==="number")M=lv(d,M,O,i,C),A&&(M=Cy(A,M,S));else if(g==="category"&&A){var U=A,Z=M.every(function(Y){return U.indexOf(Y)>=0});Z&&(M=U)}}return ae(ae({},y),{},Ge({},O,ae(ae({},v),{},{axisType:i,domain:M,categoricalDomain:$,duplicateDomain:_,originalDomain:(x=v.domain)!==null&&x!==void 0?x:D,isCategorical:p,layout:f})))},{})},jte=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=yp(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=h.length,y=JC(f,i),m=-1;return n.reduce(function(x,v){var g=v.type.defaultProps!==void 0?ae(ae({},v.type.defaultProps),v.props):v.props,b=g[o],S=gN("number");if(!x[b]){m++;var k;return y?k=X0(0,p):s&&s[b]&&s[b].hasStack?(k=tP(s[b].stackGroups,l,u),k=lv(d,k,b,i)):(k=Cy(S,QC(h,n.filter(function(w){var C,P,O=o in w.props?w.props[o]:(C=w.type.defaultProps)===null||C===void 0?void 0:C[o],N="hide"in w.props?w.props.hide:(P=w.type.defaultProps)===null||P===void 0?void 0:P.hide;return O===b&&!N}),"number",f),a.defaultProps.allowDataOverflow),k=lv(d,k,b,i)),ae(ae({},x),{},Ge({},b,ae(ae({axisType:i},a.defaultProps),{},{hide:!0,orientation:ba(xte,"".concat(i,".").concat(m%2),null),domain:k,originalDomain:S,isCategorical:y,layout:f})))}return x},{})},Cte=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Un(f,i),p={};return h&&h.length?p=Ste(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(p=jte(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},Pte=function(t){var r=eo(t),n=ji(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:zx(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:R0(r,n)}},e5=function(t){var r=t.children,n=t.defaultShowTooltip,a=ea(r,Tl),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Nte=function(t){return!t||!t.length?!1:t.some(function(r){var n=Pi(r&&r.type);return n&&n.indexOf("Bar")>=0})},t5=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ote=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,h=n.margin||{},p=ea(d,Tl),y=ea(d,ri),m=Object.keys(l).reduce(function(k,w){var C=l[w],P=C.orientation;return!C.mirror&&!C.hide?ae(ae({},k),{},Ge({},P,k[P]+C.width)):k},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(k,w){var C=o[w],P=C.orientation;return!C.mirror&&!C.hide?ae(ae({},k),{},Ge({},P,ba(k,"".concat(P))+C.height)):k},{top:h.top||0,bottom:h.bottom||0}),v=ae(ae({},x),m),g=v.bottom;p&&(v.bottom+=p.props.height||Tl.defaultProps.height),y&&r&&(v=lH(v,a,n,r));var b=u-v.left-v.right,S=f-v.top-v.bottom;return ae(ae({brushBottom:g},v),{},{width:Math.max(b,0),height:Math.max(S,0)})},Mte=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},C1=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(v,g){var b=g.graphicalItems,S=g.stackGroups,k=g.offset,w=g.updateId,C=g.dataStartIndex,P=g.dataEndIndex,O=v.barSize,N=v.layout,E=v.barGap,M=v.barCategoryGap,_=v.maxBarSize,$=t5(N),D=$.numericAxisName,R=$.cateAxisName,A=Nte(b),T=[];return b.forEach(function(I,U){var Z=yp(v.data,{graphicalItems:[I],dataStartIndex:C,dataEndIndex:P}),Y=I.type.defaultProps!==void 0?ae(ae({},I.type.defaultProps),I.props):I.props,L=Y.dataKey,Q=Y.maxBarSize,fe=Y["".concat(D,"Id")],J=Y["".concat(R,"Id")],de={},H=l.reduce(function(Re,rt){var mt=g["".concat(rt.axisType,"Map")],ar=Y["".concat(rt.axisType,"Id")];mt&&mt[ar]||rt.axisType==="zAxis"||js();var gt=mt[ar];return ae(ae({},Re),{},Ge(Ge({},rt.axisType,gt),"".concat(rt.axisType,"Ticks"),ji(gt)))},de),X=H[R],ce=H["".concat(R,"Ticks")],ie=S&&S[fe]&&S[fe].hasStack&&kH(I,S[fe].stackGroups),V=Pi(I.type).indexOf("Bar")>=0,be=R0(X,ce),ge=[],se=A&&oH({barSize:O,stackGroups:S,totalSize:Mte(H,R)});if(V){var te,ue,Ie=Ke(Q)?_:Q,Le=(te=(ue=R0(X,ce,!0))!==null&&ue!==void 0?ue:Ie)!==null&&te!==void 0?te:0;ge=sH({barGap:E,barCategoryGap:M,bandSize:Le!==be?Le:be,sizeList:se[J],maxBarSize:Ie}),Le!==be&&(ge=ge.map(function(Re){return ae(ae({},Re),{},{position:ae(ae({},Re.position),{},{offset:Re.position.offset-Le/2})})}))}var Oe=I&&I.type&&I.type.getComposedData;Oe&&T.push({props:ae(ae({},Oe(ae(ae({},H),{},{displayedData:Z,props:v,dataKey:L,item:I,bandSize:be,barPosition:ge,offset:k,stackedData:ie,layout:N,dataStartIndex:C,dataEndIndex:P}))),{},Ge(Ge(Ge({key:I.key||"item-".concat(U)},D,H[D]),R,H[R]),"animationId",w)),childIndex:iE(I,v.children),item:I})}),T},p=function(v,g){var b=v.props,S=v.dataStartIndex,k=v.dataEndIndex,w=v.updateId;if(!j2({props:b}))return null;var C=b.children,P=b.layout,O=b.stackOffset,N=b.data,E=b.reverseStackOrder,M=t5(P),_=M.numericAxisName,$=M.cateAxisName,D=Un(C,n),R=xH(N,D,"".concat(_,"Id"),"".concat($,"Id"),O,E),A=l.reduce(function(Y,L){var Q="".concat(L.axisType,"Map");return ae(ae({},Y),{},Ge({},Q,Cte(b,ae(ae({},L),{},{graphicalItems:D,stackGroups:L.axisType===_&&R,dataStartIndex:S,dataEndIndex:k}))))},{}),T=Ote(ae(ae({},A),{},{props:b,graphicalItems:D}),g==null?void 0:g.legendBBox);Object.keys(A).forEach(function(Y){A[Y]=f(b,A[Y],T,Y.replace("Map",""),r)});var I=A["".concat($,"Map")],U=Pte(I),Z=h(b,ae(ae({},A),{},{dataStartIndex:S,dataEndIndex:k,updateId:w,graphicalItems:D,stackGroups:R,offset:T}));return ae(ae({formattedGraphicalItems:Z,graphicalItems:D,offset:T,stackGroups:R},U),A)},y=function(x){function v(g){var b,S,k;return lte(this,v),k=fte(this,v,[g]),Ge(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ge(k,"accessibilityManager",new Kee),Ge(k,"handleLegendBBoxUpdate",function(w){if(w){var C=k.state,P=C.dataStartIndex,O=C.dataEndIndex,N=C.updateId;k.setState(ae({legendBBox:w},p({props:k.props,dataStartIndex:P,dataEndIndex:O,updateId:N},ae(ae({},k.state),{},{legendBBox:w}))))}}),Ge(k,"handleReceiveSyncEvent",function(w,C,P){if(k.props.syncId===w){if(P===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(C)}}),Ge(k,"handleBrushChange",function(w){var C=w.startIndex,P=w.endIndex;if(C!==k.state.dataStartIndex||P!==k.state.dataEndIndex){var O=k.state.updateId;k.setState(function(){return ae({dataStartIndex:C,dataEndIndex:P},p({props:k.props,dataStartIndex:C,dataEndIndex:P,updateId:O},k.state))}),k.triggerSyncEvent({dataStartIndex:C,dataEndIndex:P})}}),Ge(k,"handleMouseEnter",function(w){var C=k.getMouseInfo(w);if(C){var P=ae(ae({},C),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var O=k.props.onMouseEnter;Je(O)&&O(P,w)}}),Ge(k,"triggeredAfterMouseMove",function(w){var C=k.getMouseInfo(w),P=C?ae(ae({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(P),k.triggerSyncEvent(P);var O=k.props.onMouseMove;Je(O)&&O(P,w)}),Ge(k,"handleItemMouseEnter",function(w){k.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),Ge(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Ge(k,"handleMouseMove",function(w){w.persist(),k.throttleTriggeredAfterMouseMove(w)}),Ge(k,"handleMouseLeave",function(w){k.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};k.setState(C),k.triggerSyncEvent(C);var P=k.props.onMouseLeave;Je(P)&&P(C,w)}),Ge(k,"handleOuterEvent",function(w){var C=aE(w),P=ba(k.props,"".concat(C));if(C&&Je(P)){var O,N;/.*touch.*/i.test(C)?N=k.getMouseInfo(w.changedTouches[0]):N=k.getMouseInfo(w),P((O=N)!==null&&O!==void 0?O:{},w)}}),Ge(k,"handleClick",function(w){var C=k.getMouseInfo(w);if(C){var P=ae(ae({},C),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var O=k.props.onClick;Je(O)&&O(P,w)}}),Ge(k,"handleMouseDown",function(w){var C=k.props.onMouseDown;if(Je(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"handleMouseUp",function(w){var C=k.props.onMouseUp;if(Je(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),Ge(k,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.handleMouseDown(w.changedTouches[0])}),Ge(k,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&k.handleMouseUp(w.changedTouches[0])}),Ge(k,"handleDoubleClick",function(w){var C=k.props.onDoubleClick;if(Je(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"handleContextMenu",function(w){var C=k.props.onContextMenu;if(Je(C)){var P=k.getMouseInfo(w);C(P,w)}}),Ge(k,"triggerSyncEvent",function(w){k.props.syncId!==void 0&&Eg.emit($g,k.props.syncId,w,k.eventEmitterSymbol)}),Ge(k,"applySyncEvent",function(w){var C=k.props,P=C.layout,O=C.syncMethod,N=k.state.updateId,E=w.dataStartIndex,M=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)k.setState(ae({dataStartIndex:E,dataEndIndex:M},p({props:k.props,dataStartIndex:E,dataEndIndex:M,updateId:N},k.state)));else if(w.activeTooltipIndex!==void 0){var _=w.chartX,$=w.chartY,D=w.activeTooltipIndex,R=k.state,A=R.offset,T=R.tooltipTicks;if(!A)return;if(typeof O=="function")D=O(T,w);else if(O==="value"){D=-1;for(var I=0;I<T.length;I++)if(T[I].value===w.activeLabel){D=I;break}}var U=ae(ae({},A),{},{x:A.left,y:A.top}),Z=Math.min(_,U.x+U.width),Y=Math.min($,U.y+U.height),L=T[D]&&T[D].value,Q=fv(k.state,k.props.data,D),fe=T[D]?{x:P==="horizontal"?T[D].coordinate:Z,y:P==="horizontal"?Y:T[D].coordinate}:pN;k.setState(ae(ae({},w),{},{activeLabel:L,activeCoordinate:fe,activePayload:Q,activeTooltipIndex:D}))}else k.setState(w)}),Ge(k,"renderCursor",function(w){var C,P=k.state,O=P.isTooltipActive,N=P.activeCoordinate,E=P.activePayload,M=P.offset,_=P.activeTooltipIndex,$=P.tooltipAxisBandSize,D=k.getTooltipEventType(),R=(C=w.props.active)!==null&&C!==void 0?C:O,A=k.props.layout,T=w.key||"_recharts-cursor";return F.createElement(tte,{key:T,activeCoordinate:N,activePayload:E,activeTooltipIndex:_,chartName:r,element:w,isActive:R,layout:A,offset:M,tooltipAxisBandSize:$,tooltipEventType:D})}),Ge(k,"renderPolarAxis",function(w,C,P){var O=ba(w,"type.axisType"),N=ba(k.state,"".concat(O,"Map")),E=w.type.defaultProps,M=E!==void 0?ae(ae({},E),w.props):w.props,_=N&&N[M["".concat(O,"Id")]];return j.cloneElement(w,ae(ae({},_),{},{className:pt(O,_.className),key:w.key||"".concat(C,"-").concat(P),ticks:ji(_,!0)}))}),Ge(k,"renderPolarGrid",function(w){var C=w.props,P=C.radialLines,O=C.polarAngles,N=C.polarRadius,E=k.state,M=E.radiusAxisMap,_=E.angleAxisMap,$=eo(M),D=eo(_),R=D.cx,A=D.cy,T=D.innerRadius,I=D.outerRadius;return j.cloneElement(w,{polarAngles:Array.isArray(O)?O:ji(D,!0).map(function(U){return U.coordinate}),polarRadius:Array.isArray(N)?N:ji($,!0).map(function(U){return U.coordinate}),cx:R,cy:A,innerRadius:T,outerRadius:I,key:w.key||"polar-grid",radialLines:P})}),Ge(k,"renderLegend",function(){var w=k.state.formattedGraphicalItems,C=k.props,P=C.children,O=C.width,N=C.height,E=k.props.margin||{},M=O-(E.left||0)-(E.right||0),_=qC({children:P,formattedGraphicalItems:w,legendWidth:M,legendContent:u});if(!_)return null;var $=_.item,D=ZS(_,rte);return j.cloneElement($,ae(ae({},D),{},{chartWidth:O,chartHeight:N,margin:E,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Ge(k,"renderTooltip",function(){var w,C=k.props,P=C.children,O=C.accessibilityLayer,N=ea(P,qr);if(!N)return null;var E=k.state,M=E.isTooltipActive,_=E.activeCoordinate,$=E.activePayload,D=E.activeLabel,R=E.offset,A=(w=N.props.active)!==null&&w!==void 0?w:M;return j.cloneElement(N,{viewBox:ae(ae({},R),{},{x:R.left,y:R.top}),active:A,label:D,payload:A?$:[],coordinate:_,accessibilityLayer:O})}),Ge(k,"renderBrush",function(w){var C=k.props,P=C.margin,O=C.data,N=k.state,E=N.offset,M=N.dataStartIndex,_=N.dataEndIndex,$=N.updateId;return j.cloneElement(w,{key:w.key||"_recharts-brush",onChange:sd(k.handleBrushChange,w.props.onChange),data:O,x:me(w.props.x)?w.props.x:E.left,y:me(w.props.y)?w.props.y:E.top+E.height+E.brushBottom-(P.bottom||0),width:me(w.props.width)?w.props.width:E.width,startIndex:M,endIndex:_,updateId:"brush-".concat($)})}),Ge(k,"renderReferenceElement",function(w,C,P){if(!w)return null;var O=k,N=O.clipPathId,E=k.state,M=E.xAxisMap,_=E.yAxisMap,$=E.offset,D=w.type.defaultProps||{},R=w.props,A=R.xAxisId,T=A===void 0?D.xAxisId:A,I=R.yAxisId,U=I===void 0?D.yAxisId:I;return j.cloneElement(w,{key:w.key||"".concat(C,"-").concat(P),xAxis:M[T],yAxis:_[U],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:N})}),Ge(k,"renderActivePoints",function(w){var C=w.item,P=w.activePoint,O=w.basePoint,N=w.childIndex,E=w.isRange,M=[],_=C.props.key,$=C.item.type.defaultProps!==void 0?ae(ae({},C.item.type.defaultProps),C.item.props):C.item.props,D=$.activeDot,R=$.dataKey,A=ae(ae({index:N,dataKey:R,cx:P.x,cy:P.y,r:4,fill:p1(C.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ye(D,!1)),l0(D));return M.push(v.renderActiveDot(D,A,"".concat(_,"-activePoint-").concat(N))),O?M.push(v.renderActiveDot(D,ae(ae({},A),{},{cx:O.x,cy:O.y}),"".concat(_,"-basePoint-").concat(N))):E&&M.push(null),M}),Ge(k,"renderGraphicChild",function(w,C,P){var O=k.filterFormatItem(w,C,P);if(!O)return null;var N=k.getTooltipEventType(),E=k.state,M=E.isTooltipActive,_=E.tooltipAxis,$=E.activeTooltipIndex,D=E.activeLabel,R=k.props.children,A=ea(R,qr),T=O.props,I=T.points,U=T.isRange,Z=T.baseLine,Y=O.item.type.defaultProps!==void 0?ae(ae({},O.item.type.defaultProps),O.item.props):O.item.props,L=Y.activeDot,Q=Y.hide,fe=Y.activeBar,J=Y.activeShape,de=!!(!Q&&M&&A&&(L||fe||J)),H={};N!=="axis"&&A&&A.props.trigger==="click"?H={onClick:sd(k.handleItemMouseEnter,w.props.onClick)}:N!=="axis"&&(H={onMouseLeave:sd(k.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:sd(k.handleItemMouseEnter,w.props.onMouseEnter)});var X=j.cloneElement(w,ae(ae({},O.props),H));function ce(rt){return typeof _.dataKey=="function"?_.dataKey(rt.payload):null}if(de)if($>=0){var ie,V;if(_.dataKey&&!_.allowDuplicatedCategory){var be=typeof _.dataKey=="function"?ce:"payload.".concat(_.dataKey.toString());ie=s0(I,be,D),V=U&&Z&&s0(Z,be,D)}else ie=I==null?void 0:I[$],V=U&&Z&&Z[$];if(J||fe){var ge=w.props.activeIndex!==void 0?w.props.activeIndex:$;return[j.cloneElement(w,ae(ae(ae({},O.props),H),{},{activeIndex:ge})),null,null]}if(!Ke(ie))return[X].concat(Vl(k.renderActivePoints({item:O,activePoint:ie,basePoint:V,childIndex:$,isRange:U})))}else{var se,te=(se=k.getItemByXY(k.state.activeCoordinate))!==null&&se!==void 0?se:{graphicalItem:X},ue=te.graphicalItem,Ie=ue.item,Le=Ie===void 0?w:Ie,Oe=ue.childIndex,Re=ae(ae(ae({},O.props),H),{},{activeIndex:Oe});return[j.cloneElement(Le,Re),null,null]}return U?[X,null,null]:[X,null]}),Ge(k,"renderCustomized",function(w,C,P){return j.cloneElement(w,ae(ae({key:"recharts-customized-".concat(P)},k.props),k.state))}),Ge(k,"renderMap",{CartesianGrid:{handler:dd,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:dd},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:dd},YAxis:{handler:dd},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=g.id)!==null&&b!==void 0?b:As("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=Zj(k.triggeredAfterMouseMove,(S=g.throttleDelay)!==null&&S!==void 0?S:1e3/60),k.state={},k}return pte(v,x),ute(v,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,k=b.data,w=b.height,C=b.layout,P=ea(S,qr);if(P){var O=P.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var N=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,E=fv(this.state,k,O,N),M=this.state.tooltipTicks[O].coordinate,_=(this.state.offset.top+w)/2,$=C==="horizontal",D=$?{x:M,y:_}:{y:M,x:_},R=this.state.formattedGraphicalItems.find(function(T){var I=T.item;return I.type.name==="Scatter"});R&&(D=ae(ae({},D),R.props.points[O].tooltipPosition),E=R.props.points[O].tooltipPayload);var A={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:N,activePayload:E,activeCoordinate:D};this.setState(A),this.renderCursor(P),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,w;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){Fm([ea(b.children,qr)],[ea(this.props.children,qr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ea(this.props.children,qr);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return s.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,k=S.getBoundingClientRect(),w=Az(k),C={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},P=k.width/S.offsetWidth||1,O=this.inRange(C.chartX,C.chartY,P);if(!O)return null;var N=this.state,E=N.xAxisMap,M=N.yAxisMap,_=this.getTooltipEventType(),$=JS(this.state,this.props.data,this.props.layout,O);if(_!=="axis"&&E&&M){var D=eo(E).scale,R=eo(M).scale,A=D&&D.invert?D.invert(C.chartX):null,T=R&&R.invert?R.invert(C.chartY):null;return ae(ae({},C),{},{xValue:A,yValue:T},$)}return $?ae(ae({},C),$):null}},{key:"inRange",value:function(b,S){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,C=b/k,P=S/k;if(w==="horizontal"||w==="vertical"){var O=this.state.offset,N=C>=O.left&&C<=O.left+O.width&&P>=O.top&&P<=O.top+O.height;return N?{x:C,y:P}:null}var E=this.state,M=E.angleAxisMap,_=E.radiusAxisMap;if(M&&_){var $=eo(M);return Ek({x:C,y:P},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),k=ea(b,qr),w={};k&&S==="axis"&&(k.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=l0(this.props,this.handleOuterEvent);return ae(ae({},C),w)}},{key:"addListener",value:function(){Eg.on($g,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Eg.removeListener($g,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,k){for(var w=this.state.formattedGraphicalItems,C=0,P=w.length;C<P;C++){var O=w[C];if(O.item===b||O.props.key===b.key||S===Pi(O.item.type)&&k===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,k=S.left,w=S.top,C=S.height,P=S.width;return F.createElement("defs",null,F.createElement("clipPath",{id:b},F.createElement("rect",{x:k,y:w,height:C,width:P})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,k){var w=qS(k,2),C=w[0],P=w[1];return ae(ae({},S),{},Ge({},C,P.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,k){var w=qS(k,2),C=w[0],P=w[1];return ae(ae({},S),{},Ge({},C,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,k=S.formattedGraphicalItems,w=S.activeItem;if(k&&k.length)for(var C=0,P=k.length;C<P;C++){var O=k[C],N=O.props,E=O.item,M=E.type.defaultProps!==void 0?ae(ae({},E.type.defaultProps),E.props):E.props,_=Pi(E.type);if(_==="Bar"){var $=(N.data||[]).find(function(T){return yY(b,T)});if($)return{graphicalItem:O,payload:$}}else if(_==="RadialBar"){var D=(N.data||[]).find(function(T){return Ek(b,T)});if(D)return{graphicalItem:O,payload:D}}else if(fp(O,w)||dp(O,w)||nf(O,w)){var R=xq({graphicalItem:O,activeTooltipItem:w,itemData:M.data}),A=M.activeIndex===void 0?R:M.activeIndex;return{graphicalItem:ae(ae({},O),{},{childIndex:A}),payload:nf(O,w)?M.data[R]:O.props.data[R]}}}return null}},{key:"render",value:function(){var b=this;if(!j2(this))return null;var S=this.props,k=S.children,w=S.className,C=S.width,P=S.height,O=S.style,N=S.compact,E=S.title,M=S.desc,_=ZS(S,nte),$=Ye(_,!1);if(N)return F.createElement(OS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(Um,tl({},$,{width:C,height:P,title:E,desc:M}),this.renderClipPath(),P2(k,this.renderMap)));if(this.props.accessibilityLayer){var D,R;$.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,$.role=(R=this.props.role)!==null&&R!==void 0?R:"application",$.onKeyDown=function(T){b.accessibilityManager.keyboardEvent(T)},$.onFocus=function(){b.accessibilityManager.focus()}}var A=this.parseEventsOfWrapper();return F.createElement(OS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",tl({className:pt("recharts-wrapper",w),style:ae({position:"relative",cursor:"default",width:C,height:P},O)},A,{ref:function(I){b.container=I}}),F.createElement(Um,tl({},$,{width:C,height:P,title:E,desc:M,style:bte}),this.renderClipPath(),P2(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Ge(y,"displayName",r),Ge(y,"defaultProps",ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Ge(y,"getDerivedStateFromProps",function(x,v){var g=x.dataKey,b=x.data,S=x.children,k=x.width,w=x.height,C=x.layout,P=x.stackOffset,O=x.margin,N=v.dataStartIndex,E=v.dataEndIndex;if(v.updateId===void 0){var M=e5(x);return ae(ae(ae({},M),{},{updateId:0},p(ae(ae({props:x},M),{},{updateId:0}),v)),{},{prevDataKey:g,prevData:b,prevWidth:k,prevHeight:w,prevLayout:C,prevStackOffset:P,prevMargin:O,prevChildren:S})}if(g!==v.prevDataKey||b!==v.prevData||k!==v.prevWidth||w!==v.prevHeight||C!==v.prevLayout||P!==v.prevStackOffset||!cl(O,v.prevMargin)){var _=e5(x),$={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},D=ae(ae({},JS(v,b,C)),{},{updateId:v.updateId+1}),R=ae(ae(ae({},_),$),D);return ae(ae(ae({},R),p(ae({props:x},R),v)),{},{prevDataKey:g,prevData:b,prevWidth:k,prevHeight:w,prevLayout:C,prevStackOffset:P,prevMargin:O,prevChildren:S})}if(!Fm(S,v.prevChildren)){var A,T,I,U,Z=ea(S,Tl),Y=Z&&(A=(T=Z.props)===null||T===void 0?void 0:T.startIndex)!==null&&A!==void 0?A:N,L=Z&&(I=(U=Z.props)===null||U===void 0?void 0:U.endIndex)!==null&&I!==void 0?I:E,Q=Y!==N||L!==E,fe=!Ke(b),J=fe&&!Q?v.updateId:v.updateId+1;return ae(ae({updateId:J},p(ae(ae({props:x},v),{},{updateId:J,dataStartIndex:Y,dataEndIndex:L}),v)),{},{prevChildren:S,dataStartIndex:Y,dataEndIndex:L})}return null}),Ge(y,"renderActiveDot",function(x,v,g){var b;return j.isValidElement(x)?b=j.cloneElement(x,v):Je(x)?b=x(v):b=F.createElement(up,v),F.createElement(Pt,{className:"recharts-active-dot",key:g},b)});var m=j.forwardRef(function(v,g){return F.createElement(y,tl({},v,{ref:g}))});return m.displayName=y.displayName,m},dl=C1({chartName:"LineChart",GraphicalChild:Ar,axisComponents:[{axisType:"xAxis",AxisComp:Gn},{axisType:"yAxis",AxisComp:Wn}],formatAxisMap:m1}),_te=C1({chartName:"ScatterChart",GraphicalChild:jn,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Gn},{axisType:"yAxis",AxisComp:Wn},{axisType:"zAxis",AxisComp:mp}],formatAxisMap:m1}),mN=C1({chartName:"AreaChart",GraphicalChild:va,axisComponents:[{axisType:"xAxis",AxisComp:Gn},{axisType:"yAxis",AxisComp:Wn}],formatAxisMap:m1});const yi=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},Ate=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[h,p]=j.useState(()=>(u==null?void 0:u.channelMode)??yi("hist_mode","All")),[y,m]=j.useState(()=>(u==null?void 0:u.minVal)??yi("hist_min",0)),[x,v]=j.useState(()=>(u==null?void 0:u.maxVal)??yi("hist_max",16383)),[g,b]=j.useState(()=>(u==null?void 0:u.binCount)??yi("hist_bins",100)),[S,k]=j.useState(()=>(u==null?void 0:u.pointToPoint)??yi("hist_ptp",!1)),[w,C]=j.useState(()=>(u==null?void 0:u.showTheo)??yi("hist_show_theo",!1)),[P,O]=j.useState(()=>(u==null?void 0:u.theoMean)??yi("hist_theo_mean","512")),[N,E]=j.useState(()=>(u==null?void 0:u.theoSigma)??yi("hist_theo_sigma","10")),[M,_]=j.useState(()=>(u==null?void 0:u.theoAmp)??yi("hist_theo_amp","1000")),[$,D]=j.useState(!1),[R,A]=j.useState(0),[T,I]=j.useState([]),[U,Z]=j.useState(null),[Y,L]=j.useState(l||{x:100,y:100}),[Q,fe]=j.useState(!1),J=j.useRef({x:0,y:0});j.useEffect(()=>{localStorage.setItem("hist_mode",h),localStorage.setItem("hist_min",String(y)),localStorage.setItem("hist_max",String(x)),localStorage.setItem("hist_bins",String(g)),localStorage.setItem("hist_ptp",String(S)),localStorage.setItem("hist_show_theo",String(w)),localStorage.setItem("hist_theo_mean",P),localStorage.setItem("hist_theo_sigma",N),localStorage.setItem("hist_theo_amp",M),f&&f({channelMode:h,minVal:y,maxVal:x,binCount:g,pointToPoint:S,showTheo:w,theoMean:P,theoSigma:N,theoAmp:M})},[h,y,x,g,S,w,P,N,M]),j.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(x<=y){Z("Invalid range: Max must be greater than Min");return}Z(null),D(!0),A(0);const se=new AbortController,te=[],Ie=setTimeout(async()=>{try{let Le=[];if(d&&d.length>1){const Oe=Math.min(d.length,navigator.hardwareConcurrency||4);for(let gt=0;gt<Oe;gt++){const Zt=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});te.push(Zt)}let Re=0,rt=0;const mt=[],ar=async gt=>{for(;Re<d.length;){if(se.signal.aborted)return;const Zt=Re++,ot=d[Zt];try{const Tt=await ot.arrayBuffer();await new Promise((Lt,fr)=>{gt.onmessage=Vt=>{const{success:Nt,hist:qe,error:Ot}=Vt.data;Nt?(mt.push(qe),rt++,A(rt),Lt()):(console.error(`Error processing ${ot.name}:`,Ot),Lt())},gt.onerror=Vt=>{console.error("Worker Error",Vt),Lt()},gt.postMessage({buffer:Tt,roi:a,binCount:g,minVal:y,maxVal:x,pointToPoint:S},[Tt])})}catch(Tt){console.error("File Read Error",Tt)}}};if(await Promise.all(te.map(gt=>ar(gt))),te.forEach(gt=>gt.terminate()),te.length=0,mt.length>0){Le=mt[0];for(let gt=1;gt<mt.length;gt++){const Zt=mt[gt];for(let ot=0;ot<Zt.length;ot++)Le[ot]&&(Le[ot].c0+=Zt[ot].c0,Le[ot].c1+=Zt[ot].c1,Le[ot].c2+=Zt[ot].c2,Le[ot].c3+=Zt[ot].c3)}}}else n&&(Le=K_(n.data,n.width,n.height,a.x,a.y,a.w,a.h,g,y,x,S));se.signal.aborted||I(Le)}catch(Le){console.error("Histogram calc error:",Le),Z("Error calculating histogram")}finally{se.signal.aborted||D(!1)}},50);return()=>{clearTimeout(Ie),se.abort(),te.length>0&&(console.log(`Terminating ${te.length} active histogram workers...`),te.forEach(Le=>Le.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,g,y,x,S,d]);const de=j.useMemo(()=>{if(!w)return T;const se=parseFloat(P),te=parseFloat(N),ue=parseFloat(M);return isNaN(se)||isNaN(te)||isNaN(ue)||te<=0?T:T.map(Ie=>{const Le=Ie.binStart,Oe=-Math.pow(Le-se,2)/(2*Math.pow(te,2)),Re=ue*Math.exp(Oe);return{...Ie,theory:Re}})},[T,w,P,N,M]),H=()=>{if(T.length===0)return;let se=0,te=0;if(T.forEach(ue=>{const Ie=Math.max(ue.c0||0,ue.c1||0,ue.c2||0,ue.c3||0);Ie>se&&(se=Ie,te=ue.binStart)}),O(te.toFixed(2)),_(se.toString()),parseFloat(N)===0||isNaN(parseFloat(N))){const ue=x-y;E((ue/20).toFixed(2))}},X=(se,te,ue)=>{s&&s(),!(ue.closest("button")||ue.closest("input")||ue.closest("select"))&&(fe(!0),J.current={x:se-Y.x,y:te-Y.y})},ce=se=>{X(se.clientX,se.clientY,se.target)},ie=se=>{const te=se.touches[0];X(te.clientX,te.clientY,se.target)};if(j.useEffect(()=>{const se=ue=>{if(Q){const Ie="touches"in ue?ue.touches[0].clientX:ue.clientX,Le="touches"in ue?ue.touches[0].clientY:ue.clientY;L({x:Ie-J.current.x,y:Le-J.current.y})}},te=()=>fe(!1);return Q&&(window.addEventListener("mousemove",se),window.addEventListener("mouseup",te),window.addEventListener("touchmove",se,{passive:!1}),window.addEventListener("touchend",te)),()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",te),window.removeEventListener("touchmove",se),window.removeEventListener("touchend",te)}},[Q]),!e)return null;const V=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},be=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},ge="step";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:Y.x,top:Y.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${Q?"cursor-grabbing":"cursor-grab"}`,onMouseDown:ce,onTouchStart:ie,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&c.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),c.jsxs("select",{value:h,onChange:se=>p(se.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[c.jsx("option",{value:"All",children:"All Colors"}),c.jsx("option",{value:"0",children:V.c0}),c.jsx("option",{value:"1",children:V.c1}),c.jsx("option",{value:"2",children:V.c2}),c.jsx("option",{value:"3",children:V.c3})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),c.jsx("input",{type:"number",value:y,onChange:se=>m(Number(se.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",value:x,onChange:se=>v(Number(se.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:se=>k(se.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),c.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!S&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),c.jsx("input",{type:"number",value:g,onChange:se=>b(Math.max(1,Number(se.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${w?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:se=>C(se.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),c.jsx("span",{className:`font-bold uppercase tracking-tight ${w?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),w&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),c.jsx("input",{type:"text",value:P,onChange:se=>O(se.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),c.jsx("input",{type:"text",value:N,onChange:se=>E(se.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),c.jsx("input",{type:"text",value:M,onChange:se=>_(se.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsx("button",{onClick:H,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),$&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${R}/${d.length}`:"Calculating Histogram..."})]}),U?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:U}):c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(dl,{data:de,children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),c.jsx(Gn,{dataKey:"binStart",type:"number",domain:[y,x],tickFormatter:se=>Math.floor(se).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),c.jsx(Wn,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),c.jsx(qr,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:se=>`DN: ${Math.round(Number(se))}`,formatter:(se,te)=>[Math.round(se),te]}),c.jsx(ri,{wrapperStyle:{paddingTop:"10px"}}),w&&c.jsx(Ar,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(h==="All"||h==="0")&&c.jsx(Ar,{type:ge,dataKey:"c0",name:V.c0,stroke:be.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="1")&&c.jsx(Ar,{type:ge,dataKey:"c1",name:V.c1,stroke:be.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="2")&&c.jsx(Ar,{type:ge,dataKey:"c2",name:V.c2,stroke:be.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="3")&&c.jsx(Ar,{type:ge,dataKey:"c3",name:V.c3,stroke:be.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},fc=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=j.useState(e),[l,u]=j.useState(!1),[f,d]=j.useState({x:0,y:0}),h=j.useRef(null),p=(x,v,g)=>{i&&i(),!(g.closest("button")||g.closest("input"))&&(u(!0),d({x:x-o.x,y:v-o.y}))},y=x=>{p(x.clientX,x.clientY,x.target)},m=x=>{const v=x.touches[0];p(v.clientX,v.clientY,x.target)};return j.useEffect(()=>{const x=g=>{var b,S;if(l){g.cancelable&&g.preventDefault();const k="touches"in g?g.touches[0].clientX:g.clientX,w="touches"in g?g.touches[0].clientY:g.clientY,C=k-f.x,P=w-f.y,O=window.innerWidth-(((b=h.current)==null?void 0:b.offsetWidth)||100),N=window.innerHeight-(((S=h.current)==null?void 0:S.offsetHeight)||100);s({x:Math.max(0,Math.min(C,O)),y:Math.max(0,Math.min(P,N))})}},v=()=>{u(!1)};return l&&(window.addEventListener("mousemove",x),window.addEventListener("mouseup",v),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",v)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",v)}},[l,f]),c.jsxs("div",{ref:h,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${l?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[c.jsx("div",{onMouseDown:y,onTouchStart:m,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),c.jsx("div",{className:"relative z-10 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:t})})]})},Tte=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:l})=>{const u=j.useRef(null),[f,d]=j.useState(!1),[h,p]=j.useState(null),[y,m]=j.useState(null),[x,v]=j.useState(!0),[g,b]=j.useState(!0),[S,k]=j.useState("-1"),[w,C]=j.useState("8"),[P,O]=j.useState(64),[N,E]=j.useState(45),[M,_]=j.useState(60),$=j.useRef(!1),D=j.useRef({x:0,y:0});j.useEffect(()=>{!e||!r||!n||(d(!0),m(null),setTimeout(()=>{try{const I=q_(r.data,r.width,r.height,n,a,g);I?p(I):m("Could not extract valid data from ROI.")}catch(I){console.error("2D FFT Error",I),m("Calculation Error: "+I.message)}finally{d(!1)}},50))},[e,r,n,a,g]),j.useEffect(()=>{if(!h||!u.current)return;const I=u.current,U=I.getContext("2d");if(!U)return;const Z=I.width,Y=I.height;U.clearRect(0,0,Z,Y),U.fillStyle="#0f172a",U.fillRect(0,0,Z,Y);const L=h.width,Q=h.height,fe=h.data,J=Math.pow(10,parseFloat(S)||-1),de=Math.pow(10,parseFloat(w)||8);let H=J,X=de;x&&(H=Math.log10(Math.max(1e-10,J)),X=Math.log10(Math.max(1e-10,de)));const ce=X-H||1,ie=Z/2,V=Y/2+50,be=Math.min(Z,Y)*.4,ge=.6,se=N*Math.PI/180,te=M*Math.PI/180,ue=Math.cos(se),Ie=Math.sin(se),Le=Math.cos(te),Oe=Math.sin(te),Re=(qe,Ot,Et)=>{const Qt=qe*ue-Ot*Ie,dr=qe*Ie+Ot*ue,Wr=dr*Le-Et*Oe,bt=dr*Oe+Et*Le;return{x:ie+Qt*be,y:V-Wr*be,depth:bt}},rt=Math.max(16,P),mt=Math.max(1,Math.floor(L/rt)),ar=Math.max(1,Math.floor(Q/rt)),gt=(qe,Ot)=>{let Et=fe[Ot*L+qe];return x&&(Et=Math.log10(Math.max(1e-10,Et))),Et=Math.max(H,Math.min(X,Et)),(Et-H)/ce},Zt=qe=>`hsl(${(1-qe)*240}, 80%, 50%)`,ot=[];for(let qe=0;qe<Q-ar;qe+=ar)for(let Ot=0;Ot<L-mt;Ot+=mt){const Et=Ot,Qt=qe,dr=Ot+mt,Wr=qe,bt=Ot+mt,en=qe+ar,st=Ot,Jt=qe+ar,Cr=gt(Et,Qt),yn=gt(dr,Wr),xr=gt(bt,en),$r=gt(st,Jt),vn=(Cr+yn+xr+$r)/4,_n=Re(Et/(L-1)-.5,Qt/(Q-1)-.5,Cr*ge),Vr=Re(dr/(L-1)-.5,Wr/(Q-1)-.5,yn*ge),xn=Re(bt/(L-1)-.5,en/(Q-1)-.5,xr*ge),Xa=Re(st/(L-1)-.5,Jt/(Q-1)-.5,$r*ge),Pa=(_n.depth+Vr.depth+xn.depth+Xa.depth)/4;ot.push({pts:[{x:_n.x,y:_n.y},{x:Vr.x,y:Vr.y},{x:xn.x,y:xn.y},{x:Xa.x,y:Xa.y}],avgDepth:Pa,avgZ:vn})}ot.sort((qe,Ot)=>qe.avgDepth-Ot.avgDepth),U.lineWidth=.5,ot.forEach(qe=>{U.fillStyle=Zt(qe.avgZ),U.beginPath(),U.moveTo(qe.pts[0].x,qe.pts[0].y),U.lineTo(qe.pts[1].x,qe.pts[1].y),U.lineTo(qe.pts[2].x,qe.pts[2].y),U.lineTo(qe.pts[3].x,qe.pts[3].y),U.closePath(),U.fill()}),U.fillStyle="#aaa",U.font="10px monospace";const Tt=Re(-.5,-.5,0),Lt=Re(.5,-.5,0),fr=Re(-.5,.5,0),Vt=Re(.5,.5,0);U.strokeStyle="#666",U.beginPath(),U.moveTo(Tt.x,Tt.y),U.lineTo(Lt.x,Lt.y),U.lineTo(Vt.x,Vt.y),U.lineTo(fr.x,fr.y),U.closePath(),U.stroke(),U.fillText("0",Tt.x-10,Tt.y+10),U.fillText("Fx",Lt.x+5,Lt.y),U.fillText("Fy",fr.x-15,fr.y);const Nt=Re(-.5,-.5,ge);U.strokeStyle="#fff",U.beginPath(),U.moveTo(Tt.x,Tt.y),U.lineTo(Nt.x,Nt.y),U.stroke(),U.fillText(`10^${w}`,Nt.x-25,Nt.y),U.fillText(`10^${S}`,Tt.x-25,Tt.y)},[h,x,N,M,S,w,P]);const R=I=>{$.current=!0,D.current={x:I.clientX,y:I.clientY}},A=I=>{if(!$.current)return;const U=I.clientX-D.current.x,Z=I.clientY-D.current.y;E(Y=>Y-U*.5),_(Y=>Math.max(0,Math.min(90,Y+Z*.5))),D.current={x:I.clientX,y:I.clientY}},T=()=>{$.current=!1};return e?c.jsxs(fc,{initialPosition:l||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,h&&c.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[h.width,"x",h.height," (Chirp-Z)"]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),c.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),c.jsx("input",{type:"number",value:S,onChange:I=>k(I.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),c.jsx("span",{className:"text-slate-500",children:"to"}),c.jsx("input",{type:"number",value:w,onChange:I=>C(I.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),c.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:P,onChange:I=>O(Number(I.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),c.jsx("span",{className:"text-slate-300 w-6 text-right",children:P})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:I=>v(I.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:I=>b(I.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),c.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),y&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:y}),c.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:R,onMouseMove:A,onMouseUp:T,onMouseLeave:T}),c.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},Ete=.5,dv=1e-10,r5=(e,t)=>{const r=e.length-1;if(r<0)return dv;const n=t/Ete*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,dv)},$te=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},Dte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:l,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:h})=>{const[p,y]=j.useState((f==null?void 0:f.selectedChannel)??0),[m,x]=j.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[v,g]=j.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[b,S]=j.useState((f==null?void 0:f.useHanning)??!0),[k,w]=j.useState((f==null?void 0:f.doAverage)??!0),[C,P]=j.useState((f==null?void 0:f.welchSegments)??1),[O,N]=j.useState((f==null?void 0:f.showH)??!0),[E,M]=j.useState((f==null?void 0:f.showV)??!0),[_,$]=j.useState((f==null?void 0:f.interlaceRows)??!1),[D,R]=j.useState((f==null?void 0:f.rowGroup)??0),[A,T]=j.useState((f==null?void 0:f.interlaceCols)??!1),[I,U]=j.useState((f==null?void 0:f.colGroup)??0),[Z,Y]=j.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[L,Q]=j.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[fe,J]=j.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[de,H]=j.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[X,ce]=j.useState((f==null?void 0:f.intStart)||"0"),[ie,V]=j.useState((f==null?void 0:f.intEnd)||"0.5"),[be,ge]=j.useState(!1),[se,te]=j.useState([]),[ue,Ie]=j.useState(!1),[Le,Oe]=j.useState(0),[Re,rt]=j.useState(null),[mt,ar]=j.useState(!1),[gt,Zt]=j.useState(!1),[ot,Tt]=j.useState(null),[Lt,fr]=j.useState(!1),[Vt,Nt]=j.useState(null),[qe,Ot]=j.useState(u||{x:50,y:50}),[Et,Qt]=j.useState(!1),[dr,Wr]=j.useState(null),[bt,en]=j.useState({}),st=j.useRef({x:0,y:0}),Jt=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Cr=j.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);j.useEffect(()=>{localStorage.setItem("fft_y_min",m),localStorage.setItem("fft_y_max",v),localStorage.setItem("fft_theo_sigma",Z),localStorage.setItem("fft_theo_ksize",L),localStorage.setItem("fft_theo_noise",fe),localStorage.setItem("fft_theo_scale",de)},[m,v,Z,L,fe,de]),j.useEffect(()=>{if(!e||!n||!a)return;Ie(!0),rt(null),Oe(0);const le=setTimeout(async()=>{try{const De=p===-1?[0,1,2,3]:[p],Be=h&&h.length>1?h:[null],at=Be.length,Xe={};let Ct={h:0,v:0};for(let Ve=0;Ve<at;Ve++){Oe(Ve+1);let it;if(Be[Ve]){const wt=await Be[Ve].arrayBuffer();it=await o0(wt)}else it=n;for(const wt of De){const yt=Y_(it.data,it.width,it.height,a,wt,!1,b,{rows:_,rowGroup:D,cols:A,colGroup:I},k,C);yt&&(Xe[wt]||(Xe[wt]={h:new Array(yt.avgHoriz.length).fill(0),v:new Array(yt.avgVert.length).fill(0)}),yt.avgHoriz.forEach((sr,ke)=>Xe[wt].h[ke]+=sr/at),yt.avgVert.forEach((sr,ke)=>Xe[wt].v[ke]+=sr/at),Ct=yt.sampleCount)}}if(Object.keys(Xe).length===0)throw new Error("ROI too small or no data found.");const ir=1024,or=[];for(let Ve=0;Ve<ir;Ve++){const it=Ve/(ir-1)*.5,wt={freq:parseFloat(it.toFixed(6))};for(const yt of De)Xe[yt]&&(wt[`c${yt}_h`]=r5(Xe[yt].h,it),wt[`c${yt}_v`]=r5(Xe[yt].v,it));or.push(wt)}Wr(Ct),te(or)}catch(De){console.error("FFT Loop Failed:",De),rt(De.message||"Unknown error during FFT processing")}finally{Ie(!1)}},100);return()=>clearTimeout(le)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,p,b,k,C,_,D,A,I,h]);const yn=()=>{const le=parseFloat(X),De=parseFloat(ie);if(isNaN(le)||isNaN(De))return;const Be={},at=p===-1?[0,1,2,3]:[p],Xe=se.filter(Ct=>Ct.freq>=le&&Ct.freq<=De);if(Xe.length===0){en({});return}at.forEach(Ct=>{let ir=0,or=0;Xe.forEach(Ve=>{const it=Ve[`c${Ct}_h`],wt=Ve[`c${Ct}_v`];typeof it=="number"&&(ir+=it),typeof wt=="number"&&(or+=wt)}),Be[Ct]={h:ir/Xe.length,v:or/Xe.length,count:Xe.length}}),en(Be)},xr=j.useMemo(()=>{const le=parseFloat(Z),De=parseInt(L),Be=parseFloat(fe),at=parseFloat(de);if(isNaN(le)||isNaN(De)||isNaN(Be)||isNaN(at)||se.length===0)return se;const Xe=$te(De,le),Ct=Xe.reduce((Ve,it)=>Ve+it*it,0),ir=(De-1)/2,or=Be*Be*at;return se.map(Ve=>{const it=Ve.freq,wt=2*Math.PI*it;let yt=0,sr=0;for(let An=0;An<De;An++){const di=An-ir,sa=Xe[An],Hn=-wt*di;yt+=sa*Math.cos(Hn),sr+=sa*Math.sin(Hn)}const ke=yt*yt+sr*sr;return{...Ve,theory:Math.max(dv,or*Ct*ke)}})},[se,Z,L,fe,de]),$r=le=>{le&&le.activeLabel!==void 0&&(fr(!0),Nt(Number(le.activeLabel)),Tt(null))},vn=le=>{if(Lt&&Vt!==null&&le&&le.activeLabel!==void 0){const De=Number(le.activeLabel);Tt([Math.min(Vt,De),Math.max(Vt,De)])}},_n=()=>fr(!1),Vr=(le,De,Be)=>{l&&l(),!(Be.closest("button")||Be.closest("input"))&&(Qt(!0),st.current={x:le-qe.x,y:De-qe.y})},xn=le=>{Vr(le.clientX,le.clientY,le.target)},Xa=le=>{const De=le.touches[0];Vr(De.clientX,De.clientY,le.target)};j.useEffect(()=>{const le=Be=>{if(Et){const at="touches"in Be?Be.touches[0].clientX:Be.clientX,Xe="touches"in Be?Be.touches[0].clientY:Be.clientY;Ot({x:at-st.current.x,y:Xe-st.current.y})}},De=()=>Qt(!1);return Et&&(window.addEventListener("mousemove",le),window.addEventListener("mouseup",De),window.addEventListener("touchmove",le,{passive:!1}),window.addEventListener("touchend",De)),()=>{window.removeEventListener("mousemove",le),window.removeEventListener("mouseup",De),window.removeEventListener("touchmove",le),window.removeEventListener("touchend",De)}},[Et]);const Pa=j.useMemo(()=>{if(!ot||se.length===0)return null;const[le,De]=ot,Be=se.filter(Ct=>Ct.freq>=le&&Ct.freq<=De);if(Be.length===0)return null;const at=p===-1?[0,1,2,3]:[p],Xe={};return at.forEach(Ct=>{["h","v"].forEach(ir=>{const or=`c${Ct}_${ir}`;let Ve=0,it=0;for(const wt of Be){const yt=wt[or];typeof yt=="number"&&(Ve+=yt,it++)}it>0&&(Xe[`${or}_sigma`]=Math.sqrt(Ve/it))})}),{count:Be.length,stats:Xe}},[ot,se,p]),hr=()=>{if(se.length===0)return;let le=1/0,De=-1/0;if(se.forEach(ir=>{ir.freq<.01||ir.freq>.49||Object.keys(ir).forEach(or=>{if(or==="freq"||or==="theory")return;const Ve=ir[or];typeof Ve=="number"&&Ve>0&&(Ve<le&&(le=Ve),Ve>De&&(De=Ve))})}),le===1/0)return;const Be=Math.log10(le),at=Math.log10(De),Xe=at-Be,Ct=(Xe===0?1:Xe)*.1;x((Be-Ct).toFixed(2)),g((at+Ct).toFixed(2))},pr=(le,De)=>{a&&o&&o({...a,x:a.x+le,y:a.y+De})},ht=(le,De)=>{a&&o&&o({...a,w:Math.max(2,a.w+le),h:Math.max(2,a.h+De)})};return e?c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:qe.x,top:qe.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:l,children:[c.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${Et?"cursor-grabbing":"cursor-grab"}`,onMouseDown:xn,onTouchStart:Xa,children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:h&&h.length>1?`Stack Avg (${h.length} frames)`:"Single Mode"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[c.jsx("button",{onClick:()=>y(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(le=>c.jsx("button",{onClick:()=>y(le),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===le?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:Cr[le]},le))]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("button",{onClick:()=>ge(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[c.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),c.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:L,set:Q,w:"w-10"},{label:"Sigma",val:Z,set:Y,w:"w-12"},{label:"Noise()",val:fe,set:J,w:"w-12"},{label:"Scale",val:de,set:H,w:"w-12"}].map(le=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:le.label}),c.jsx("input",{type:"text",value:le.val,onChange:De=>le.set(De.target.value),className:`${le.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},le.label))})]})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),c.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:C,onChange:le=>P(parseInt(le.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),c.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:C})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:_,onChange:le=>$(le.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:A,onChange:le=>T(le.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),c.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${b?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:b&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:b,onChange:le=>S(le.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${k?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:k&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:k,onChange:le=>w(le.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),c.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("button",{onClick:()=>N(!O),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${O?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-cyan-400":"bg-gray-400"}`})," H"]}),c.jsxs("button",{onClick:()=>M(!E),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${E?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:()=>Zt(!gt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${gt?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),c.jsx("button",{onClick:()=>ar(!mt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${mt?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[c.jsx("button",{onClick:hr,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",c.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[c.jsx("input",{type:"text",value:m,onChange:le=>x(le.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),c.jsx("span",{className:"px-2 text-gray-400",children:"to"}),c.jsx("input",{type:"text",value:v,onChange:le=>g(le.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),ue&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),h&&h.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",Le," / ",h.length]})]}),Re?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:Re}):c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[c.jsx("div",{className:"flex-1 relative z-10",onMouseDown:$r,onMouseMove:vn,onMouseUp:_n,style:{cursor:Lt?"col-resize":"crosshair"},children:c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(dl,{data:xr,margin:{top:10,right:10,bottom:20,left:0},children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),c.jsx(Gn,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),c.jsx(Wn,{scale:"log",domain:[Math.pow(10,parseFloat(m)),Math.pow(10,parseFloat(v))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:le=>Number(le).toExponential(0),width:45}),c.jsx(qr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:le=>[Number(le).toExponential(3),""],labelFormatter:le=>`Freq: ${Number(le).toFixed(4)}`}),c.jsx(ri,{wrapperStyle:{fontSize:"10px"}}),c.jsx(Ar,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(le=>{if(p!==-1&&p!==le)return[];const De=`c${le}_h`,Be=`c${le}_v`,at=Jt[`c${le}`],Xe=[];return O&&Xe.push(c.jsx(Ar,{type:"linear",dataKey:De,name:`${Cr[le]} (H)`,stroke:at,strokeWidth:1,dot:!1,isAnimationActive:!1},`${le}_h`)),E&&Xe.push(c.jsx(Ar,{type:"linear",dataKey:Be,name:`${Cr[le]} (V)`,stroke:at,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${le}_v`)),Xe}),ot&&c.jsx(jf,{x1:ot[0],x2:ot[1],fill:"#8884d8",fillOpacity:.15})]})})}),Pa&&ot&&c.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[c.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",ot[0].toFixed(3),"-",ot[1].toFixed(3)]}),Object.entries(Pa.stats).map(([le,De])=>c.jsxs("div",{className:"flex justify-between gap-4",children:[c.jsxs("span",{className:"text-slate-400",children:[le,":"]}),c.jsx("span",{className:"font-bold text-cyan-400",children:De.toFixed(5)})]},le))]})]})]}),gt&&c.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[c.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("input",{type:"number",step:"0.01",value:X,onChange:le=>ce(le.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.01",value:ie,onChange:le=>V(le.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("button",{onClick:yn,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(le=>{const De=bt[le];if(!De)return null;const Be=Jt[`c${le}`];return c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:Be},children:[Cr[le]," ",c.jsxs("span",{className:"text-gray-400 font-normal",children:["(",De.count," pts)"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[c.jsxs("div",{children:["H: ",De.h.toExponential(3)]}),c.jsxs("div",{children:["V: ",De.v.toExponential(3)]})]})]},le)})})]}),mt&&c.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>pr(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>pr(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>pr(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>pr(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx("button",{onClick:()=>ht(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),c.jsx("button",{onClick:()=>ht(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),c.jsx("button",{onClick:()=>ht(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),c.jsx("button",{onClick:()=>ht(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),c.jsx(Tte,{isOpen:be,onClose:()=>ge(!1),rawImageData:n,roi:a,selectedChannel:p===-1?0:p,channelName:p===-1?"Red (Default)":Cr[p],zIndex:s?s+2:102,onFocus:l})]}):null},Ite=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f})=>{const[d,h]=j.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[p,y]=j.useState((u==null?void 0:u.blackLevel)??0),[m,x]=j.useState((u==null?void 0:u.whiteLevel)??16383),[v,g]=j.useState(null),[b,S]=j.useState(!1),[k,w]=j.useState(null),[C,P]=j.useState(l||{x:150,y:150}),[O,N]=j.useState(!1),E=j.useRef({x:0,y:0});j.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:p,whiteLevel:m})},[d,p,m]),j.useEffect(()=>{if(e&&n&&!u){const A=n.blackLevels?Math.floor(n.blackLevels[1]):0;y(A),x(n.whiteLevel||16383),g(null)}},[e,n]);const M=()=>{if(!n||!a)return;w(null),S(!0);const T=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const I=Z_(n.data,n.width,n.height,a,T,p,m);I?g(I):(w("No data found in selection with current filters."),g(null))}catch(I){console.error("Analysis failed:",I),w(I.message||"Analysis error")}finally{S(!1)}},50)},_=(A,T,I)=>{s&&s(),!(I.closest("button")||I.closest("input")||I.closest("select"))&&(N(!0),E.current={x:A-C.x,y:T-C.y})},$=A=>{_(A.clientX,A.clientY,A.target)},D=A=>{const T=A.touches[0];_(T.clientX,T.clientY,A.target)};if(j.useEffect(()=>{const A=I=>{if(O){const U="touches"in I?I.touches[0].clientX:I.clientX,Z="touches"in I?I.touches[0].clientY:I.clientY;P({x:U-E.current.x,y:Z-E.current.y})}},T=()=>N(!1);return O&&(window.addEventListener("mousemove",A),window.addEventListener("mouseup",T),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",T)),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",T),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",T)}},[O]),!e)return null;const R=i?["B","G1","G2","R"]:["R","G1","G2","B"];return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:C.x,top:C.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${O?"cursor-grabbing":"cursor-grab"}`,onMouseDown:$,onTouchStart:D,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),c.jsx("select",{value:d,onChange:A=>h(A.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:R.map(A=>c.jsx("option",{value:A,children:A},A))})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),c.jsx("input",{type:"number",value:p,onChange:A=>y(Number(A.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),c.jsx("input",{type:"number",value:m,onChange:A=>x(Number(A.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsx("button",{onClick:M,disabled:b,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:b?"Analyzing...":"Run Analysis"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[k&&c.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:k}),!v&&!b&&!k&&c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:c.jsx("p",{children:"Configure parameters and click Run Analysis"})}),v&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.uniqueCount})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:v.diffCount})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[c.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),c.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(v.stepCounts).sort((A,T)=>parseFloat(A[0])-parseFloat(T[0])).map(([A,T])=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",A,":"]}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(T)})]},A))})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[c.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(dl,{data:v.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Gn,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),c.jsx(Wn,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),c.jsx(qr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:A=>`Val: ${A}`,formatter:A=>[A,"Step Size"]}),c.jsx(Ar,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},Rte=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:l})=>{const[u,f]=j.useState("cross"),[d,h]=j.useState("R"),[p,y]=j.useState("B"),[m,x]=j.useState("H"),[v,g]=j.useState(null),[b,S]=j.useState(!1),[k,w]=j.useState(0),[C,P]=j.useState(0),[O,N]=j.useState("single"),E=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},M=a?["B","G1","G2","R"]:["R","G1","G2","B"],_=async $=>{if(!r||!n)return;S(!0),N($),w(0),g(null);let D=E[d],R=u==="cross"?E[p]:D,A=0,T=0;u==="self"&&(m==="H"?T=2:A=2),setTimeout(async()=>{try{let I={sumCov:0,sumVar1:0,sumVar2:0,n:0};if($==="single")I=c2(r.data,r.width,r.height,n,D,R,A,T);else if(l&&l.length>0)for(let U=0;U<l.length;U++){w(U+1);const Z=await l[U].arrayBuffer(),Y=await o0(Z),L=c2(Y.data,Y.width,Y.height,n,D,R,A,T);I.sumCov+=L.sumCov,I.sumVar1+=L.sumVar1,I.sumVar2+=L.sumVar2,I.n+=L.n}P(I.n),g(X_(I))}catch(I){console.error("Pearson calculation failed",I),alert("Calculation error: "+I.message)}finally{S(!1)}},50)};return e?c.jsxs(fc,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),c.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),c.jsx("select",{value:d,onChange:$=>h($.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:M.map($=>c.jsx("option",{value:$,children:$},$))})]}),c.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?c.jsx("select",{value:p,onChange:$=>y($.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:M.map($=>c.jsx("option",{value:$,children:$},$))}):c.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[c.jsx("button",{onClick:()=>x("H"),className:`flex-1 text-[9px] font-bold rounded ${m==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),c.jsx("button",{onClick:()=>x("V"),className:`flex-1 text-[9px] font-bold rounded ${m==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:()=>_("single"),disabled:b,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:b&&O==="single"?"Calculating...":"Calc Current Frame"}),l&&l.length>0&&c.jsxs("button",{onClick:()=>_("stack"),disabled:b,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[c.jsx("span",{children:"Calc Stack Concatenated"}),b&&O==="stack"&&c.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",k," / ",l.length]})]})]}),v!==null&&c.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${m})`," r"]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:v.toFixed(5)}),c.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",C.toLocaleString()," pairs"]}),c.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(v)>.5?c.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(v)>.1?c.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):c.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),c.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${m==="V"?"+2":""}, c${m==="H"?"+2":""}) in the same channel.`})]}):null},Lte=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],Bte=["5","9","0","8","2","1","4","7","3","6"],n5=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:Bte[r]}).join(""),Fte=({isOpen:e,onClose:t})=>{const[r,n]=j.useState({pv:"--",uv:"--"});return j.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[c.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:c.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[c.jsx("span",{className:"font-bold mr-2",children:"about:"}),c.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),c.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Lte.map(a=>c.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),c.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),c.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:c.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[c.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:n5(r.pv)}),c.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:n5(r.uv)})]})})})]})]})}):null},zte=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=j.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(h,p)=>{if(typeof p=="bigint")return p.toString()+"n";if(typeof p=="object"&&p!==null){if(d.has(p))return"[Circular]";if(d.add(p),ArrayBuffer.isView(p))return`[${p.constructor.name}]`}return p})}catch{return"[Unable to serialize object]"}},l=j.useMemo(()=>{if(!r)return[];const f=[],d=(h,p=0)=>{if(p>5)return"...";if(h==null)return String(h);if(h instanceof Date)return h.toLocaleString();if(typeof h=="number")return h.toString();if(typeof h=="string")return h;if(typeof h=="bigint")return h.toString()+"n";if(ArrayBuffer.isView(h))return`<${h.constructor.name} len=${h.length} bytes=${h.byteLength}>`;if(h instanceof ArrayBuffer)return`<ArrayBuffer bytes=${h.byteLength}>`;if(typeof h=="object"){if(Array.isArray(h))return h.length===0?"[]":h.length>20?`[${h.slice(0,10).map(x=>typeof x=="number"?x.toFixed(2):d(x,p+1)).join(", ")}, ... (+${h.length-10} more)]`:`[${h.map(m=>typeof m=="number"?Number.isInteger(m)?m:m.toFixed(4):d(m,p+1)).join(", ")}]`;try{const y=Object.keys(h);return y.length>5?`{Object with ${y.length} keys}`:s(h)}catch{return"<Complex Object>"}}return String(h)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(p=>{if(p==="MakerNote"||p==="UserComment"||p.includes("Strip")||p.includes("Offset")){f.push({key:p,value:"<Binary/Internal Data>"});return}const y=r[p];f.push({key:p,value:d(y)})})}catch(h){console.error("Error processing EXIF data:",h),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=l.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:c.jsxs("div",{className:"relative",children:[c.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?c.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[c.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),c.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):c.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:c.jsxs("p",{children:['No tags found matching "',i,'"']})})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},Ute=100,Ig=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},a5=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=j.useRef(null),s=j.useRef(null),l=j.useCallback(g=>{const b=i?Math.max(1e-6,e):e,S=i?Math.max(b*1.0001,t):t,k=Math.max(b,Math.min(S,g));if(i){const w=Math.log10(b),C=Math.log10(S);return(Math.log10(k)-w)/(C-w)}return(k-b)/(S-b)},[e,t,i]),u=j.useCallback(g=>{const b=i?Math.max(1e-6,e):e,S=i?Math.max(b*1.0001,t):t;if(i){const k=Math.log10(b),w=Math.log10(S);return Math.pow(10,k+g*(w-k))}return b+g*(S-b)},[e,t,i]),f=(g,b)=>{g.preventDefault(),g.stopPropagation(),s.current=b;const S=w=>{if(!s.current||!o.current)return;const C=o.current.getBoundingClientRect();let P=0;a?P=(C.bottom-w.clientY)/C.height:P=(w.clientX-C.left)/C.width,P=Math.max(0,Math.min(1,P));const O=u(P);if(s.current==="min"){const N=r[1];n([Math.min(O,N),N])}else{const N=r[0];n([N,Math.max(O,N)])}},k=()=>{s.current=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",k)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",k)},d=l(r[0])*100,h=l(r[1])*100,p=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},y=a?{left:"50%",bottom:`${d}%`,height:`${h-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${h-d}%`,height:"4px",transform:"translateY(-50%)"},m="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",x=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},v=a?{left:"50%",bottom:`${h}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${h}%`,transform:"translate(-50%, -50%)"};return c.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[c.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:p}),c.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:y}),c.jsx("div",{className:m,style:x,onMouseDown:g=>f(g,"min")}),c.jsx("div",{className:m,style:v,onMouseDown:g=>f(g,"max")})]})},Gte=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:l,initialISO:u})=>{const[f,d]=j.useState("Noise"),[h,p]=j.useState(!0),[y,m]=j.useState(null),[x,v]=j.useState("default"),[g,b]=j.useState(!1),[S,k]=j.useState(!1),[w,C]=j.useState({R:!0,G1:!0,G2:!0,B:!0}),[P,O]=j.useState(""),[N,E]=j.useState(""),[M,_]=j.useState(""),[$,D]=j.useState(""),[R,A]=j.useState("10"),[T,I]=j.useState(""),[U,Z]=j.useState("0 0 0 0"),[Y,L]=j.useState("0 0 0 0"),[Q,fe]=j.useState(!1),[J,de]=j.useState(null),[H,X]=j.useState(!1),[ce,ie]=j.useState(0),[V,be]=j.useState([]),[ge,se]=j.useState(""),[te,ue]=j.useState(""),Ie=()=>{const z=parseFloat(ge),ne=parseFloat(te);!isNaN(z)&&!isNaN(ne)&&(be([...V,{id:Date.now(),x:z,y:ne}]),se(""),ue(""))},[Le,Oe]=j.useState(()=>localStorage.getItem("ptc_tester_name")||""),[Re,rt]=j.useState(""),[mt,ar]=j.useState("");j.useEffect(()=>{localStorage.setItem("ptc_tester_name",Le)},[Le]);const gt=j.useRef(Q),Zt=j.useRef(H),ot=j.useRef(ce);j.useEffect(()=>{gt.current=Q,Zt.current=H,ot.current=ce},[Q,H,ce]);const[Tt,Lt]=j.useState(null),[fr,Vt]=j.useState({min:.01,max:90}),[Nt,qe]=j.useState({readNoise:0,gain:1,prnu:.5}),[Ot,Et]=j.useState(2e6),Qt=j.useRef(Nt),dr=j.useRef(fr),Wr=j.useRef(Ot);j.useEffect(()=>{Qt.current=Nt,dr.current=fr,Wr.current=Ot},[Nt,fr,Ot]);const[bt,en]=j.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[st,Jt]=j.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[Cr,yn]=j.useState(!1),[xr,$r]=j.useState([]),[vn,_n]=j.useState(null),[Vr,xn]=j.useState(""),Xa=j.useMemo(()=>n?n.join(","):"",[n]);j.useEffect(()=>{if(e){let z="0 0 0 0";o&&o.blackLevel?z=o.blackLevel.join(" "):z=n&&n.length===4?n.join(" "):"0 0 0 0",Z(z),L(z);let ne="";if(o&&o.height?ne=o.height.toString():a&&(ne=a.toString()),I(ne),ne){const B=parseFloat(ne);!isNaN(B)&&B>0?A((2309.4/B).toFixed(2)):A("10")}else A("10");de(null),fe(!1),X(!1),ie(0),$r([]),_n(null),Vt({min:.01,max:90}),en({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const oe={readNoise:0,gain:0,prnu:0};qe(oe),Qt.current=oe,O(""),E(""),_(""),D(""),d("Noise"),Lt(null),Et(2e6),xn(""),k(!1),be([]),rt(B=>B.trim()===""&&l?l:B),ar(B=>B.trim()===""&&u?u:B)}},[e,Xa,o,a,r,l,u]);const Pa=z=>{if(z.key==="Enter"){const ne=parseFloat(T);if(!isNaN(ne)&&ne>0){const oe=(2309.4/ne).toFixed(2);A(oe)}z.target.blur()}},hr=j.useMemo(()=>{let ne=Y.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(ne.length===1&&(ne=[ne[0],ne[0],ne[0],ne[0]]);ne.length<4;)ne.push(0);const oe=B=>{switch(B){case"R":return ne[0];case"G1":return ne[1];case"G2":return ne[2];case"B":return ne[3];default:return 0}};return r.map(B=>{const ye=B.mean-oe(B.channel),Ee=B.std>0?ye/B.std:0;return{...B,x:ye,std:B.std,snr:Ee}}).filter(B=>B.std>0)},[r,Y]),pr=j.useMemo(()=>{const z=Nt.readNoise,ne=z*z;return hr.map(oe=>{let B=0;if(f==="Noise")B=oe.std;else if(f==="SNR")B=oe.snr;else if(f==="Linear"){const Ee=oe.std*oe.std-ne;B=oe.x!==0?Ee/oe.x:0}return{...oe,y:B}})},[hr,f,Nt.readNoise]),ht=j.useMemo(()=>{if(hr.length===0)return"G1";const z={R:0,G1:0,G2:0,B:0},ne={R:0,G1:0,G2:0,B:0};for(const ye of hr)z[ye.channel]+=ye.x,ne[ye.channel]++;let oe="G1",B=-1/0;return Object.keys(z).forEach(ye=>{const Ee=ne[ye],Fe=Ee>0?z[ye]/Ee:-1/0;Fe>B&&(B=Fe,oe=ye)}),oe},[hr]),le=j.useCallback(()=>{let z=1/0,ne=-1/0;if(hr.length===0)return{min:.1,max:1};for(let oe=0;oe<hr.length;oe++){const B=hr[oe].x;h&&B<=0||(B<z&&(z=B),B>ne&&(ne=B))}return z===1/0?{min:.1,max:1}:{min:z,max:ne}},[hr,h]),De=j.useCallback(()=>{let z=1/0,ne=-1/0;if(pr.length===0)return{min:.1,max:1};for(let oe=0;oe<pr.length;oe++){const B=pr[oe].y;h&&B<=0||(B<z&&(z=B),B>ne&&(ne=B))}return z===1/0?{min:.1,max:1}:{min:z*.9,max:ne*1.1}},[pr,h]),{min:Be,max:at}=le(),{min:Xe,max:Ct}=De(),ir=at*(fr.min/100),or=at*(fr.max/100),Ve=j.useMemo(()=>{if(!h&&pr.length===0)return{shot:[],read:[],prnu:[],total:[]};const z=P?parseFloat(P):Be,ne=N?parseFloat(N):at,oe=100,B=Math.max(.1,z),ye=Math.max(1,ne);if(B>=ye)return{shot:[],read:[],prnu:[],total:[]};const Ee=Math.log10(B),nt=(Math.log10(ye)-Ee)/oe,Ze=Nt.readNoise,xe=Nt.gain>0?Nt.gain:1,Mt=Nt.prnu/100,Me=[],G=[],he=[],re=[];for(let Te=0;Te<=oe;Te++){const je=Math.pow(10,Ee+Te*nt);if(f==="Linear"){const et=1/xe,Qe=Mt*Mt,kt=et+Qe*je;re.push({x:je,y:kt}),Me.push({x:je,y:et}),he.push({x:je,y:Qe*je})}else{const et=Ze,Qe=Math.sqrt(je/xe),kt=Mt*je,tt=Math.sqrt(et*et+Qe*Qe+kt*kt);f==="Noise"?(Me.push({x:je,y:Qe}),G.push({x:je,y:et}),he.push({x:je,y:kt}),re.push({x:je,y:tt})):(Qe>0&&Me.push({x:je,y:je/Qe}),et>0&&G.push({x:je,y:je/et}),kt>0&&he.push({x:je,y:je/kt}),tt>0&&re.push({x:je,y:je/tt}))}}return{shot:Me,read:G,prnu:he,total:re}},[pr,h,P,N,Nt,f,Be,at]),it=j.useMemo(()=>{if(f==="Linear")return[];const z=parseFloat(R);if(isNaN(z)||z<=0)return[];const ne=P?parseFloat(P):Be,oe=N?parseFloat(N):at;return f==="SNR"?[{x:ne,y:z},{x:oe,y:z}]:[{x:ne,y:ne/z},{x:oe,y:oe/z}]},[pr,R,f,P,N,Be,at]),wt=j.useCallback((z,ne)=>{if(!ne||ne.length===0)return null;const oe=[...ne].sort((B,ye)=>B.x-ye.x);for(let B=0;B<oe.length-1;B++){const ye=oe[B],Ee=oe[B+1];if(ye.snr<=z&&Ee.snr>=z||ye.snr>=z&&Ee.snr<=z){const Fe=(z-ye.snr)/(Ee.snr-ye.snr);return ye.x+Fe*(Ee.x-ye.x)}}return null},[]),yt=j.useMemo(()=>{const z=hr,ne=1e3,oe=ye=>{if(ye.length===0)return[];if(ye.length<=ne)return ye;const Ee=[...ye].sort((Ze,xe)=>Ze.x-xe.x),Fe=[],nt=Ee.length/ne;for(let Ze=0;Ze<ne;Ze++){const xe=Math.floor(Ze*nt),Mt=Math.floor((Ze+1)*nt),Me=Ee.slice(xe,Mt);if(Me.length===0)continue;Me.sort((he,re)=>he.std-re.std);const G=Math.floor(Me.length/2);Fe.push(Me[G])}return Fe},B={R:[],G1:[],G2:[],B:[]};return z.forEach(ye=>{B[ye.channel]&&B[ye.channel].push(ye)}),{R:oe(B.R),G1:oe(B.G1),G2:oe(B.G2),B:oe(B.B)}},[hr]),sr=j.useMemo(()=>J&&Nt.gain?J*Nt.gain:null,[J,Nt.gain]),ke=j.useMemo(()=>{if(J===null||J===0)return null;const z=parseFloat(R);let ne=null;if(!isNaN(z)&&z>0){let Fe=0,nt=0;if(["R","G1","G2","B"].forEach(Ze=>{const xe=wt(z,yt[Ze]);xe!==null&&(Fe+=xe,nt++)}),nt>0){const Ze=Fe/nt;ne=Math.log2(J/Ze)}}const oe=parseFloat(T);let B=null,ye=NaN;if(!isNaN(oe)&&oe>0){ye=16e3/oe;let Fe=0,nt=0;if(["R","G1","G2","B"].forEach(Ze=>{const xe=wt(ye,yt[Ze]);xe!==null&&(Fe+=xe,nt++)}),nt>0){const Ze=Fe/nt;B=Math.log2(J/Ze)}}let Ee=null;if(!isNaN(oe)&&oe>0){const Fe=wt(ye,yt[ht]);Fe!==null&&(Ee=Math.log2(J/Fe))}return{manualDR:ne,ptpDR:B,d55DR:Ee,manualTarget:z,ptpTarget:ye,saturationSignal:J,dominantChannel:ht}},[J,R,T,yt,wt,ht]),An=j.useMemo(()=>{if(f==="Linear"||!ke||!ke.ptpTarget||isNaN(ke.ptpTarget))return[];const z=ke.ptpTarget,ne=P?parseFloat(P):Be,oe=N?parseFloat(N):at;return f==="SNR"?[{x:ne,y:z},{x:oe,y:z}]:[{x:ne,y:ne/z},{x:oe,y:oe/z}]},[f,ke,P,N,Be,at]),di=j.useCallback(()=>{const oe=document.createElement("canvas");oe.width=2048,oe.height=1536;const B=oe.getContext("2d");if(!B)return;const ye=s==="dark",Ee=ye?"#0f172a":"#ffffff",Fe=ye?"#ffffff":"#000000",nt=ye?"#475569":"#cbd5e1",Ze=ye?"#1e293b":"#f1f5f9",xe=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};B.fillStyle=Ee,B.fillRect(0,0,2048,1536);let Mt=P?parseFloat(P):Be,Me=N?parseFloat(N):at,G=M?parseFloat(M):Xe,he=$?parseFloat($):Ct;isNaN(Mt)&&(Mt=.1),isNaN(Me)&&(Me=1e4),isNaN(G)&&(G=.1),isNaN(he)&&(he=1e3);const re={top:80,right:80,bottom:100,left:120},Te=2048-re.left-re.right,je=1536-re.top-re.bottom,et=_e=>{if(h){const ct=Math.log10(Math.max(1e-9,Mt)),ut=Math.log10(Math.max(1e-9,Me)),ft=Math.log10(Math.max(1e-9,_e));return re.left+(ft-ct)/(ut-ct)*Te}else return re.left+(_e-Mt)/(Me-Mt)*Te},Qe=_e=>{if(h){const ct=Math.log10(Math.max(1e-9,G)),ut=Math.log10(Math.max(1e-9,he)),ft=Math.log10(Math.max(1e-9,_e));return re.top+je-(ft-ct)/(ut-ct)*je}else return re.top+je-(_e-G)/(he-G)*je};if(B.beginPath(),h){const _e=(ct,ut,ft)=>{const Hr=Math.log10(Math.max(1e-9,ct)),$n=Math.log10(Math.max(1e-9,ut)),ca=Math.floor(Hr),pi=Math.ceil($n);for(let Vi=ca;Vi<=pi;Vi++){const _a=Math.pow(10,Vi);let er=ft?et(_a):Qe(_a);(ft?er>=re.left-1&&er<=re.left+Te+1:er>=re.top-1&&er<=re.top+je+1)&&(B.lineWidth=1.5,B.strokeStyle=nt,B.beginPath(),ft?(B.moveTo(er,re.top),B.lineTo(er,re.top+je)):(B.moveTo(re.left,er),B.lineTo(re.left+Te,er)),B.stroke()),B.lineWidth=.5,B.strokeStyle=Ze;for(let bc=2;bc<10;bc++){const Nf=bc*_a;er=ft?et(Nf):Qe(Nf),(ft?er>=re.left&&er<=re.left+Te:er>=re.top&&er<=re.top+je)&&(B.beginPath(),ft?(B.moveTo(er,re.top),B.lineTo(er,re.top+je)):(B.moveTo(re.left,er),B.lineTo(re.left+Te,er)),B.stroke())}}};_e(Mt,Me,!0),_e(G,he,!1)}else{B.strokeStyle=nt,B.lineWidth=1;for(let _e=0;_e<=5;_e++){const ct=re.left+Te*_e/5;B.beginPath(),B.moveTo(ct,re.top),B.lineTo(ct,re.top+je),B.stroke();const ut=re.top+je*_e/5;B.beginPath(),B.moveTo(re.left,ut),B.lineTo(re.left+Te,ut),B.stroke()}}B.strokeStyle=Fe,B.lineWidth=2,B.strokeRect(re.left,re.top,Te,je);const kt=(_e,ct,ut)=>{_e<re.left||_e>re.left+Te||ct<re.top||ct>re.top+je||(B.fillStyle=ut,B.fillRect(_e-1.5,ct-1.5,3,3))},tt=pr.filter(_e=>!(h&&(_e.x<=0||_e.y<=0)));tt.forEach(_e=>{w[_e.channel]&&_e.channel!==ht&&kt(et(_e.x),Qe(_e.y),xe[_e.channel])}),tt.forEach(_e=>{w[_e.channel]&&_e.channel===ht&&kt(et(_e.x),Qe(_e.y),xe[_e.channel])}),V.forEach(_e=>{const ct=et(_e.x),ut=Qe(_e.y);if(ct<re.left||ct>re.left+Te||ut<re.top||ut>re.top+je)return;B.strokeStyle="#d946ef",B.lineWidth=2.5;const ft=6;B.beginPath(),B.moveTo(ct-ft,ut-ft),B.lineTo(ct+ft,ut+ft),B.moveTo(ct+ft,ut-ft),B.lineTo(ct-ft,ut+ft),B.stroke()});const _t=(_e,ct,ut=[])=>{if(_e.length<2)return;B.beginPath(),B.strokeStyle=ct,B.lineWidth=3,B.setLineDash(ut);let ft=!1;for(const Hr of _e){const $n=et(Hr.x),ca=Qe(Hr.y);if($n<re.left-100||$n>re.left+Te+100||ca<re.top-100||ca>re.top+je+100){ft=!1;continue}ft?B.lineTo($n,ca):(B.moveTo($n,ca),ft=!0)}B.stroke(),B.setLineDash([])},gr=ye?"#ffffff":"#000000";if(st.shot&&_t(Ve.shot,"#94a3b8",[5,5]),st.read&&_t(Ve.read,"#f43f5e",[3,3]),st.prnu&&_t(Ve.prnu,"#f59e0b",[3,3]),st.total&&_t(Ve.total,gr,[]),it.length===2){const _e="#6366f1";_t(it,_e,[4,2]);const ct=it[1],ut=Qe(ct.y);ut>=re.top&&ut<=re.top+je&&(B.fillStyle=_e,B.font="bold 20px sans-serif",B.textAlign="right",B.textBaseline="bottom",B.fillText(`M.Tgt=${R}`,re.left+Te-10,ut-8))}if(An.length===2&&(ke!=null&&ke.ptpTarget)){const _e="#10b981";_t(An,_e,[4,4]);const ct=An[1],ut=Qe(ct.y);if(ut>=re.top&&ut<=re.top+je){B.fillStyle=_e,B.font="bold 20px sans-serif",B.textAlign="right",B.textBaseline="bottom";const ft=ke.ptpTarget.toFixed(1),Hr=it.length===2?Qe(it[1].y):-100,$n=Math.abs(ut-Hr)<25?25:0;B.fillText(`PTP=${ft}`,re.left+Te-10,ut-8-$n)}}if(st.fitRange||H){const _e=(ct,ut)=>{const ft=et(ct);ft>=re.left&&ft<=re.left+Te&&(B.beginPath(),B.strokeStyle=ut,B.lineWidth=2,B.setLineDash([8,8]),B.moveTo(ft,re.top),B.lineTo(ft,re.top+je),B.stroke(),B.setLineDash([]))};_e(ir,"#22d3ee"),_e(or,"#22d3ee")}if(J){const _e=et(J);_e>=re.left&&_e<=re.left+Te&&(B.strokeStyle="#ef4444",B.lineWidth=3,B.setLineDash([10,10]),B.beginPath(),B.moveTo(_e,re.top),B.lineTo(_e,re.top+je),B.stroke(),B.setLineDash([]),B.fillStyle="#ef4444",B.font="bold 24px sans-serif",B.textAlign="center",B.fillText("Sat",_e,re.top-10))}B.fillStyle=Fe,B.font="28px monospace",B.textAlign="center",B.fillText(Mt.toExponential(1),re.left,re.top+je+40),B.fillText(Me.toExponential(1),re.left+Te,re.top+je+40),B.fillText("Signal (DN)",re.left+Te/2,re.top+je+80),B.textAlign="right",B.textBaseline="middle",B.fillText(G.toExponential(1),re.left-20,re.top+je),B.fillText(he.toExponential(1),re.left-20,re.top),B.save(),B.translate(re.left-80,re.top+je/2),B.rotate(-Math.PI/2),B.textAlign="center",B.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),B.restore(),B.save(),B.translate(2048/2,1536/2),B.rotate(-Math.PI/6),B.textAlign="center",B.textBaseline="middle",B.fillStyle=ye?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",B.font="bold 150px sans-serif",B.fillText(" y-g-jiang.github.io",0,0),B.restore(),B.fillStyle=Fe,B.font="bold 36px sans-serif",B.textAlign="left",B.textBaseline="top",B.fillText(`PTC Export: ${f} Mode`,re.left,20),B.font="24px sans-serif",B.fillStyle=ye?"#94a3b8":"#64748b",B.fillText(`Points: ${pr.length} | Sat Channel: ${ht}`,re.left,65);const Dr=re.left+30,Pr=re.top+30,ln=70,mc=_e=>{if(!J||_e<=0)return"--";const ct=Nt.readNoise,ut=Nt.gain,ft=Nt.prnu/100;if(ut<=0)return"--";const Hr=_e*_e,$n=ct*ct,ca=1-Hr*ft*ft,pi=-(Hr/ut),Vi=-(Hr*$n);let _a=0;if(Math.abs(ca)<1e-8)Math.abs(pi)>1e-8&&(_a=-Vi/pi);else{const er=pi*pi-4*ca*Vi;er>=0&&(_a=(-pi+Math.sqrt(er))/(2*ca))}return _a>0?Math.log2(J/_a).toFixed(2)+" EV":"--"},xp=ke!=null&&ke.ptpTarget&&!isNaN(ke.ptpTarget)?mc(ke.ptpTarget):"--",bp=R?mc(parseFloat(R)):"--";B.font="bold 48px monospace",B.textAlign="left",B.textBaseline="top",B.shadowColor=ye?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",B.shadowBlur=4,B.shadowOffsetX=1,B.shadowOffsetY=1;const En=(_e,ct,ut,ft)=>{const Hr=Pr+ut*ln;B.fillStyle=Fe,B.fillText(_e,Dr,Hr);const $n=B.measureText(_e).width;B.fillStyle=ft||Fe,B.fillText(ct,Dr+$n,Hr)},wp=bt.read,yc=parseFloat(bt.gain).toFixed(3),kp=parseFloat(bt.prnu).toFixed(2)+"%";let Wi=`M.DR@SNR${R}: `;const vc=parseFloat(T);if(!isNaN(vc)&&vc>0){const _e=(2309.4/vc).toFixed(2);Math.abs(parseFloat(R)-parseFloat(_e))<.05&&(Wi="8mpSNR=1 DR: ")}En("Tester: ",Le||"N/A",0),En("Model : ",Re||"Unknown",1),En("ISO   : ",mt||"N/A",2),En("RN/FPN: ",wp,3,"#f43f5e"),En("KADC  : ",yc,4,"#06b6d4"),En("PRNU  : ",kp,5,"#f59e0b"),En("PTP DR: ",ke!=null&&ke.ptpDR?ke.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),En("D55 DR: ",ke!=null&&ke.d55DR?ke.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),En("FWC   : ",sr?sr>1e4?(sr/1e3).toFixed(1)+"k":Math.round(sr).toString():"--",8,"#f97316"),En(Wi,ke!=null&&ke.manualDR?ke.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),En("PTCFitDR(PTP): ",xp,10,"#10b981"),En("PTCFitDR(Man): ",bp,11,"#06b6d4"),B.save(),B.textAlign="right",B.textBaseline="bottom",B.fillStyle="#3b82f6",B.font="bold 80px sans-serif",B.shadowColor=ye?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",B.shadowBlur=4,B.shadowOffsetX=2,B.shadowOffsetY=2;const Cf=1988,Pf=1476,Sp=90;B.fillText("Online",Cf,Pf),B.fillText("Jiangtherapee",Cf,Pf-Sp),B.restore();const xc=document.createElement("a");xc.download=`ptc_complete_${f}_${Date.now()}.jpg`,xc.href=oe.toDataURL("image/jpeg",.9),xc.click()},[pr,ht,w,P,N,M,$,Be,at,Xe,Ct,h,s,f,J,i,st,Ve,ir,or,fr,H,Le,Re,mt,ke,sr,R,it,An,bt,T,V]),sa=j.useMemo(()=>{let z=pr;if(h&&(z=z.filter(ye=>ye.y>0&&ye.x>0)),x==="top3"){const ye=[...z].sort((Fe,nt)=>nt.x-Fe.x),Ee=Math.max(50,Math.ceil(ye.length*.03));z=ye.slice(0,Ee)}const ne={R:[],G1:[],G2:[],B:[]};if(z.forEach(ye=>{ne[ye.channel]&&ne[ye.channel].push(ye)}),x==="raw")return ne;const oe=x==="top3"?500:Ute,B=ye=>{if(ye.length<=oe)return ye;const Ee=[...ye].sort((Ze,xe)=>Ze.x-xe.x),Fe=[],nt=Ee.length/oe;for(let Ze=0;Ze<oe;Ze++){const xe=Math.floor(Ze*nt),Mt=Math.floor((Ze+1)*nt),Me=Ee.slice(xe,Mt);if(Me.length===0)continue;Me.sort((he,re)=>he.y-re.y);const G=Math.floor(Me.length/2);Fe.push(Me[G])}return Fe};return{R:B(ne.R),G1:B(ne.G1),G2:B(ne.G2),B:B(ne.B)}},[pr,x,h]),Hn=j.useMemo(()=>{if(hr.length<5)return[];const z=hr.filter(oe=>oe.channel===ht);return[...z.length>20?z:hr].sort((oe,B)=>oe.x-B.x).map(oe=>({mean:oe.x,std:oe.std}))},[hr,ht]),zi=z=>{const ne=z.length;if(ne===0)return[];const oe=z.reduce((Te,je)=>Te+je,0)/ne,B=z.reduce((Te,je)=>Te+Math.pow(je-oe,2),0)/(ne-1||1),ye=Math.sqrt(B);if(ye===0)return[{x:oe-.001,density:0},{x:oe,density:1},{x:oe+.001,density:0}];const Ee=1.06*ye*Math.pow(ne,-.2),Fe=Math.min(...z),nt=Math.max(...z),Ze=(nt-Fe)*.2||Fe*.1,xe=Math.max(0,Fe-Ze),Mt=nt+Ze,Me=100,G=(Mt-xe)/(Me-1),he=Te=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*Te*Te),re=[];for(let Te=0;Te<Me;Te++){const je=xe+Te*G;let et=0;for(let Qe=0;Qe<ne;Qe++)et+=he((je-z[Qe])/Ee);et/=ne*Ee,re.push({x:je,density:et})}return re},Io=j.useCallback((z,ne,oe,B)=>{if(z.length<5)return{gain:0,prnu:0};const ye=z[z.length-1].mean,Ee=ye*(oe.min/100),Fe=ye*(oe.max/100),nt=z.filter(tt=>tt.mean>=Ee&&tt.mean<=Fe);if(nt.length<5)return{gain:0,prnu:0};Lt({nPoints:nt.length});const Ze=ne*ne,xe=[],Mt=[];if(nt.forEach(tt=>{const gr=tt.std*tt.std-Ze;if(tt.mean>1&&gr>0){const Dr=tt.mean,Pr=gr/tt.mean;xe.push({x:Dr,y:Pr}),Mt.push(tt.mean/gr)}}),xe.length<5)return{gain:0,prnu:0};const Me=[],G=xe.length,he=B,re=G*(G-1)/2;if(re<=he)for(let tt=0;tt<G;tt++)for(let _t=tt+1;_t<G;_t++){const gr=xe[_t].x-xe[tt].x;Math.abs(gr)>1e-5&&Me.push((xe[_t].y-xe[tt].y)/gr)}else{const tt=Math.max(1,Math.floor(re/he));for(let _t=0;_t<G;_t++)for(let gr=_t+1;gr<G;gr+=tt){const Dr=xe[gr].x-xe[_t].x;Math.abs(Dr)>1e-5&&Me.push((xe[gr].y-xe[_t].y)/Dr)}}const Te=Ig(Me),je=xe.map(tt=>tt.y-Te*tt.x),et=Ig(je);let Qe=0,kt=0;if(et>1e-6?Qe=1/et:Qe=Ig(Mt),Te>0&&(kt=Math.sqrt(Te)*100),Mt.length>0){const tt=zi(Mt);$r(tt),_n(Qe)}else $r([]);return{gain:Qe,prnu:kt}},[]),Xn=j.useCallback(z=>{let ne=z.read??Qt.current.readNoise;const oe=z.gRange??dr.current,B=Wr.current;if((z.read!==void 0||z.gRange!==void 0)&&z.gain===void 0&&z.prnu===void 0&&Hn.length>0&&ne>=0)k(!0),setTimeout(()=>{const Ee=Io(Hn,ne,oe,B);let Fe=Qt.current.gain,nt=Qt.current.prnu;Ee.gain>0&&(Fe=Ee.gain,nt=Ee.prnu),qe({readNoise:ne,gain:Fe,prnu:nt}),z.gRange!==void 0&&Vt(z.gRange),en(Ze=>{var xe,Mt;return{...Ze,read:ne.toString(),gain:Fe>0?Fe.toFixed(3):"0",prnu:nt.toFixed(2),rangeMin:(((xe=z.gRange)==null?void 0:xe.min)??Ze.rangeMin).toString(),rangeMax:(((Mt=z.gRange)==null?void 0:Mt.max)??Ze.rangeMax).toString()}}),k(!1)},50);else{let Ee=z.gain!==void 0?z.gain:Qt.current.gain,Fe=z.prnu!==void 0?z.prnu:Qt.current.prnu;qe({readNoise:ne,gain:Ee,prnu:Fe}),z.gRange!==void 0&&Vt(z.gRange),en(nt=>{var Ze,xe;return{...nt,read:ne.toString(),gain:Ee>0?Ee.toFixed(3):"0",prnu:Fe.toFixed(2),rangeMin:(((Ze=z.gRange)==null?void 0:Ze.min)??nt.rangeMin).toString(),rangeMax:(((xe=z.gRange)==null?void 0:xe.max)??nt.rangeMax).toString()}})}},[Hn,Io]),Ui=`${Y}-${r.length}`;j.useEffect(()=>{if(!e||!r||r.length===0)return;const z=sa[ht];if(!z||z.length===0||Vr===Ui)return;C({R:ht==="R",G1:ht==="G1",G2:ht==="G2",B:ht==="B"});const ne=[...z].sort((Ee,Fe)=>Ee.x-Fe.x);let oe=0;ne.length>0&&(oe=ne[0].std);const B=hr.filter(Ee=>Ee.channel===ht);let ye=-1/0;for(const Ee of B)Ee.x>ye&&(ye=Ee.x);ye!==-1/0&&de(ye),Xn({read:oe}),xn(Ui)},[e,r,Vr,Ui,sa,ht,Xn,hr]);const Ka=(z,ne)=>{en(oe=>({...oe,[z]:ne}))},bn=z=>{let ne=parseFloat(bt[z]);isNaN(ne)||ne<0||Xn({[z]:ne})},hi=()=>{L(U),xn("")},Na=()=>{const z=parseFloat(bt.rangeMin),ne=parseFloat(bt.rangeMax);!isNaN(z)&&!isNaN(ne)&&z<ne&&z>=0&&ne<=100&&Xn({gRange:{min:z,max:ne}})},Kn=(z,ne)=>{z.key==="Enter"&&(ne==="rangeMin"||ne==="rangeMax"?Na():bn(ne),z.target.blur())};j.useEffect(()=>{e&&Hn.length>0&&Xn({})},[e,Ot,Hn]);const Oa=z=>{C(ne=>({...ne,[z]:!ne[z]}))},Gi=()=>{v(z=>z==="top3"?"default":"top3")},Ro=()=>{x==="raw"?v("default"):b(!0)},dc=()=>{b(!1),v("raw")},la=(z,ne)=>{const oe=parseFloat(z),B=parseFloat(ne);let ye=isNaN(oe)?"auto":oe,Ee=isNaN(B)?"auto":B;return h&&typeof ye=="number"&&ye<=0&&(ye="auto"),[ye,Ee]},Ma=z=>{if(!z||!z.payload)return;const ne=z.payload;if(m(ne),gt.current&&(de(ne.x),fe(!1)),Zt.current){const oe=dr.current.min,B=dr.current.max,{max:ye}=le();if(ye<=0)return;const Ee=Math.max(0,Math.min(100,ne.x/ye*100));if(ot.current===1){const Fe=Math.min(Ee,B-.5);Xn({gRange:{min:Fe,max:B}}),ie(2)}else if(ot.current===2){const Fe=Math.max(Ee,oe+.5);Xn({gRange:{min:oe,max:Fe}}),ie(0),X(!1)}}},Tn=j.useCallback(z=>{const{cx:ne,cy:oe,fill:B}=z;return c.jsx("circle",{cx:ne,cy:oe,r:3,fill:B,stroke:"none",style:{cursor:"pointer"}})},[]),hc=({active:z,payload:ne})=>{if(z&&ne&&ne.length){const oe=ne[0].payload;return c.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[c.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:oe.channel}),c.jsxs("div",{children:["Signal: ",oe.x.toFixed(2)]}),c.jsxs("div",{children:[f,": ",oe.y.toFixed(4)]}),oe.row!==void 0&&oe.col!==void 0&&!isNaN(oe.row)&&!isNaN(oe.col)&&c.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",oe.row,", Col ",oe.col]}),oe.filename&&c.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:oe.filename,children:oe.filename})]})}return null},Yn=z=>{d(z),z==="Linear"&&p(!1)};if(!e)return null;const pc=s==="dark"?"#ffffff":"#000000";let qn=f;f==="Linear"&&(qn="(Var - RN) / Mean");const gc=U!==Y;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:z=>{z.stopPropagation()},children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:z=>z.stopPropagation(),children:[c.jsx(bo,{isOpen:g,onClose:()=>b(!1),onConfirm:dc,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),y&&c.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),c.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),c.jsx("span",{className:"font-bold",children:y.channel}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),c.jsx("span",{children:y.x.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),c.jsx("span",{children:y.std.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),c.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(y.x/y.std).toFixed(2)})]})})]}),Cr&&c.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[c.jsx("button",{onClick:()=>yn(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"mb-4 text-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:vn==null?void 0:vn.toFixed(4)}),c.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",xr.length>0?"Density Curve Generated":"No Data"]})]}),c.jsx("div",{className:"flex-1 min-h-0",children:xr.length>0?c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(mN,{data:xr,margin:{top:10,right:30,left:0,bottom:20},children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),c.jsx(Gn,{dataKey:"x",tickFormatter:z=>z.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),c.jsx(Wn,{tick:{fill:"#9ca3af",fontSize:10}}),c.jsx(qr,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),c.jsx(va,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),vn!==null&&c.jsx(co,{x:vn,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",c.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("button",{onClick:di,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),c.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>Yn("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),c.jsx("button",{onClick:()=>Yn("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),c.jsx("button",{onClick:()=>Yn("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:z=>p(z.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[c.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),c.jsx("input",{type:"number",placeholder:"Min",value:P,onChange:z=>O(z.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:N,onChange:z=>E(z.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),c.jsx("input",{type:"number",placeholder:"Min",value:M,onChange:z=>_(z.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:$,onChange:z=>D(z.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsx("button",{onClick:()=>{O(""),E(""),_(""),D("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>Oa("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),c.jsx("button",{onClick:()=>Oa("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),c.jsx("button",{onClick:()=>Oa("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),c.jsx("button",{onClick:()=>Oa("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${w.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),c.jsx("input",{type:"text",value:U,onChange:z=>Z(z.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),c.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),c.jsx("button",{onClick:()=>{X(!H),ie(H?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${H?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:H?ce===1?"Pick Min":"Pick Max":"Select"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx("input",{type:"number",step:"0.1",value:bt.rangeMin,onChange:z=>Ka("rangeMin",z.target.value),onBlur:Na,onKeyDown:z=>Kn(z,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.1",value:bt.rangeMax,onChange:z=>Ka("rangeMax",z.target.value),onBlur:Na,onKeyDown:z=>Kn(z,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),c.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),c.jsx("input",{type:"number",value:T,onChange:z=>I(z.target.value),onKeyDown:Pa,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),c.jsx("input",{type:"number",value:R,onChange:z=>A(z.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[c.jsx("button",{onClick:()=>{fe(!Q),J&&de(null)},disabled:H,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${Q?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:Q?"Pick Point":"Select Linear Limit"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Gi,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${x==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),c.jsx("button",{onClick:Ro,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${x==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:Le,onChange:z=>Oe(z.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:Re,onChange:z=>rt(z.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:mt,onChange:z=>ar(z.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",value:ge,onChange:z=>se(z.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("input",{type:"number",value:te,onChange:z=>ue(z.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("button",{onClick:Ie,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),V.length>0&&c.jsx("button",{onClick:()=>be([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[V.length," pts"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.shot,onChange:z=>Jt({...st,shot:z.target.checked}),className:"rounded text-gray-500"})," ",c.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.read,onChange:z=>Jt({...st,read:z.target.checked}),className:"rounded text-rose-500"})," ",c.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.prnu,onChange:z=>Jt({...st,prnu:z.target.checked}),className:"rounded text-amber-500"})," ",c.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.total,onChange:z=>Jt({...st,total:z.target.checked}),className:"rounded text-white"})," ",c.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),c.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",ht,")",S&&c.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:hi,disabled:S,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${S?"bg-gray-400 cursor-wait":gc?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:S?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),c.jsxs("select",{value:Ot,onChange:z=>Et(Number(z.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[c.jsx("option",{value:1e5,children:"100k Pairs"}),c.jsx("option",{value:5e5,children:"500k Pairs"}),c.jsx("option",{value:2e6,children:"2M Pairs"}),c.jsx("option",{value:5e6,children:"5M Pairs"}),c.jsx("option",{value:1e7,children:"10M Pairs"})]}),Tt&&c.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",Tt.nPoints]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),c.jsx("input",{type:"text",inputMode:"decimal",value:bt.read,onChange:z=>Ka("read",z.target.value),onBlur:()=>bn("read"),onKeyDown:z=>Kn(z,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center relative group",children:[c.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",c.jsx("button",{onClick:()=>yn(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),c.jsx("input",{type:"text",inputMode:"decimal",value:bt.gain,onChange:z=>Ka("gain",z.target.value),onBlur:()=>bn("gain"),onKeyDown:z=>Kn(z,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),c.jsx("input",{type:"text",inputMode:"decimal",value:bt.prnu,onChange:z=>Ka("prnu",z.target.value),onBlur:()=>bn("prnu"),onKeyDown:z=>Kn(z,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[c.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(ke==null?void 0:ke.manualTarget)||R}`,children:["M.DR @ SNR=",(ke==null?void 0:ke.manualTarget)||R]}),c.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:ke!=null&&ke.manualDR?`${ke.manualDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((ke==null?void 0:ke.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${T||"H"})`,children:[c.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),c.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:ke!=null&&ke.ptpDR?`${ke.ptpDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((ke==null?void 0:ke.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${T||"H"} on ${ke==null?void 0:ke.dominantChannel} Channel)`,children:[c.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",ke==null?void 0:ke.dominantChannel,")"]}),c.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:ke!=null&&ke.d55DR?`${ke.d55DR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),c.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:sr!==null?`${Math.round(sr)}`:"",children:sr!==null?sr>1e4?`${(sr/1e3).toFixed(1)}k`:`${Math.round(sr)}`:"--"})]})]}),J===null&&c.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),c.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${Q||H?"cursor-crosshair":""}`,children:[c.jsx("div",{className:"row-start-1 col-start-1 h-full",children:c.jsx(a5,{vertical:!0,min:Xe,max:Ct,value:[M?parseFloat(M):Xe,$?parseFloat($):Ct],onChange:([z,ne])=>{_(z.toString()),D(ne.toString())},logScale:h})}),c.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[pr.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(_te,{margin:{top:20,right:20,bottom:0,left:0},onClick:Ma,children:[c.jsx("defs",{children:c.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[c.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),c.jsx(Gn,{type:"number",dataKey:"x",name:"Signal",scale:h?"log":"linear",domain:la(P,N),allowDataOverflow:!0,hide:!0}),c.jsx(Wn,{type:"number",dataKey:"y",name:f,scale:h?"log":"linear",domain:la(M,$),label:{value:qn,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),c.jsx(qr,{content:c.jsx(hc,{}),cursor:{strokeDasharray:"3 3"}}),J&&c.jsx(co,{x:J,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(st.fitRange||H)&&c.jsxs(c.Fragment,{children:[c.jsx(co,{x:ir,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${fr.min}%`,fill:"#22d3ee",fontSize:9}}),c.jsx(co,{x:or,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${fr.max}%`,fill:"#22d3ee",fontSize:9}})]}),w.R&&c.jsx(jn,{name:"Red",data:sa.R,fill:"#ef4444",shape:Tn,onClick:Ma,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),w.G1&&c.jsx(jn,{name:"Green 1",data:sa.G1,fill:"#22c55e",shape:Tn,onClick:Ma,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),w.G2&&c.jsx(jn,{name:"Green 2",data:sa.G2,fill:"#4ade80",shape:Tn,onClick:Ma,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),w.B&&c.jsx(jn,{name:"Blue",data:sa.B,fill:"#3b82f6",shape:Tn,onClick:Ma,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),st.shot&&Ve.shot.length>0&&c.jsx(jn,{name:"Shot Noise (Ideal)",data:Ve.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),st.read&&Ve.read.length>0&&c.jsx(jn,{name:"Read Noise Floor",data:Ve.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),st.prnu&&Ve.prnu.length>0&&c.jsx(jn,{name:"PRNU (Non-uniformity)",data:Ve.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),st.total&&Ve.total.length>0&&c.jsx(jn,{name:"Total Noise Model",data:Ve.total,line:{stroke:pc,strokeWidth:2},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),it.length>0&&c.jsx(jn,{name:`Target SNR=${R}`,data:it,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),An.length>0&&c.jsx(jn,{name:`PTP Target SNR=${ke!=null&&ke.ptpTarget?ke.ptpTarget.toFixed(1):"?"}`,data:An,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),V.length>0&&c.jsx(jn,{name:"Manual Markers",data:V,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),c.jsx("div",{className:"row-start-2 col-start-2 w-full",children:c.jsx(a5,{min:Be,max:at,value:[P?parseFloat(P):Be,N?parseFloat(N):at],onChange:([z,ne])=>{O(z.toString()),E(ne.toString())},logScale:h})})]})]})})},Wte=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>c.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"relative md:col-span-3",children:[c.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>c.jsx("option",{value:s,children:s},s))}),c.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[c.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>c.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),Vte=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return c.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[c.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),c.jsx("div",{className:"mt-2 space-y-1 text-sm",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),c.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),c.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),c.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},Hte=({data:e,theme:t="dark"})=>{const r=j.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=j.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(y=>[...y.R_range,...y.G1_range,...y.G2_range,...y.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),l=Math.max(...o);const u=.25,f=l-s;if(f<u){const y=u-f;s-=y/2,l+=y/2}const d=(l-s)*.1,h=s-d,p=l+d;return[h,p]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:c.jsx("p",{children:"No data available for this mode."})}):c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(mN,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:a}),c.jsx(Gn,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),c.jsx(Wn,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),c.jsx(qr,{content:c.jsx(Vte,{theme:t})}),c.jsx(ri,{wrapperStyle:{fontSize:"14px",color:i}}),c.jsx(va,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),c.jsx(Ar,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),c.jsx(va,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),c.jsx(Ar,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),c.jsx(va,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),c.jsx(Ar,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),c.jsx(va,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),c.jsx(Ar,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},Xte=F.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=j.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=j.useState(n[0]||""),{chartData:o,tableData:s}=j.useMemo(()=>{const d=e.shootingModes.find(y=>y.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const h=d.data.map(y=>({iso:y.iso,R_range:y.r.range,R_avg:y.r.avg,G1_range:y.g1.range,G1_avg:y.g1.avg,B_range:y.b.range,B_avg:y.b.avg,G2_range:y.g2.range,G2_avg:y.g2.avg})),p=d.data.map(y=>({iso:y.iso,levels:[y.r.avg,y.g1.avg,y.g2.avg,y.b.avg],clipping:y.clipping}));return{chartData:h,tableData:p}},[e.shootingModes,a]),l=`Raw Data (${a})`,u=j.useRef(null),f=j.useRef(null);return j.useEffect(()=>{const d=u.current,h=f.current;if(!d||!h)return;const p=new ResizeObserver(y=>{for(let m of y){const{width:x}=m.contentRect,g=Math.max(8,x/35);h.style.fontSize=`${g}px`}});return p.observe(d),()=>p.disconnect()},[]),c.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),c.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),c.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>c.jsx("option",{value:d,children:d},d))})]}),c.jsxs("div",{ref:u,className:"h-64 relative",children:[c.jsx(Hte,{data:o,theme:t},a),c.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:c.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:l})}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),c.jsx("tbody",{children:s.map(({iso:d,levels:h,clipping:p})=>c.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[c.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,p&&c.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),c.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:h[0].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:h[1].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:h[3].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:h[2].toFixed(2)})]},d))})]})]})]})}),Se=(e,t,r)=>({avg:e,range:[t,r]}),Rg=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:Se(512.1,511.95,512.25),g1:Se(512.05,511.9,512.2),b:Se(512.12,511.98,512.28),g2:Se(512.06,511.92,512.22)},{iso:200,r:Se(512.15,512,512.3),g1:Se(512.1,511.95,512.25),b:Se(512.18,512.05,512.35),g2:Se(512.12,511.98,512.28)},{iso:400,r:Se(512.25,512.1,512.45),g1:Se(512.2,512.05,512.4),b:Se(512.3,512.15,512.5),g2:Se(512.22,512.08,512.42)},{iso:800,r:Se(512.5,512.2,512.8),g1:Se(512.45,512.15,512.75),b:Se(512.55,512.25,512.85),g2:Se(512.48,512.18,512.78)},{iso:1600,r:Se(513.1,512.8,513.4),g1:Se(513.05,512.75,513.35),b:Se(513.15,512.85,513.45),g2:Se(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:Se(512.02,511.98,512.05),g1:Se(512.01,511.97,512.04),b:Se(512.03,511.99,512.06),g2:Se(512.01,511.97,512.04)},{iso:640,r:Se(512.15,512.05,512.25),g1:Se(512.12,512.02,512.22),b:Se(512.18,512.08,512.28),g2:Se(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Se(512,511.8,512.2),g1:Se(512,511.8,512.2),b:Se(512,511.8,512.2),g2:Se(512,511.8,512.2)},{iso:400,r:Se(512,511.7,512.3),g1:Se(512,511.7,512.3),b:Se(512,511.7,512.3),g2:Se(512,511.7,512.3)},{iso:1600,r:Se(512.2,511.5,512.8),g1:Se(512.2,511.5,512.8),b:Se(512.2,511.5,512.8),g2:Se(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:Se(511.95,511.8,512.1),g1:Se(511.95,511.8,512.1),b:Se(511.95,511.8,512.1),g2:Se(511.95,511.8,512.1)},{iso:800,r:Se(512.1,511.9,512.3),g1:Se(512.1,511.9,512.3),b:Se(512.1,511.9,512.3),g2:Se(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:Se(400,399.9,400.1),g1:Se(400,399.9,400.1),b:Se(400,399.9,400.1),g2:Se(400,399.9,400.1)},{iso:100,r:Se(400,399.9,400.1),g1:Se(400,399.9,400.1),b:Se(400,399.9,400.1),g2:Se(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:Se(400.1,399.8,400.3),g1:Se(400.1,399.8,400.3),b:Se(400.1,399.8,400.3),g2:Se(400.1,399.8,400.3)},{iso:800,r:Se(400.3,399.5,401.1),g1:Se(400.3,399.5,401.1),b:Se(400.3,399.5,401.1),g2:Se(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:Se(1024,1023.8,1024.2),g1:Se(1024,1023.8,1024.2),b:Se(1024,1023.8,1024.2),g2:Se(1024,1023.8,1024.2)},{iso:800,r:Se(1024.2,1023.5,1025),g1:Se(1024.2,1023.5,1025),b:Se(1024.2,1023.5,1025),g2:Se(1024.2,1023.5,1025)}]}]}],Kte=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=j.useState(""),[i,o]=j.useState("All"),s=j.useMemo(()=>["All",...Array.from(new Set(Rg.map(d=>d.manufacturer))).sort()],[]),l=j.useMemo(()=>Rg.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),h=i==="All"||f.manufacturer===i;return d&&h}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",c.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Rg.length," Models"]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:c.jsx(Wte,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:l,onCameraSelect:u})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[l.map(f=>c.jsx("div",{id:`camera-${f.id}`,children:c.jsx(Xte,{camera:f,theme:r})},f.id)),l.length===0&&c.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:c.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Yte=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=j.useState(""),[i,o]=j.useState(""),[s,l]=j.useState(""),[u,f]=j.useState(""),[d,h]=j.useState(null),p=()=>{const y=parseFloat(n),m=parseFloat(i),x=parseFloat(s),v=parseFloat(u);if(isNaN(y)||isNaN(m)||isNaN(x)||isNaN(v)){h(null);return}const g=y,b=m,S=x*x,k=v*v,w=(g+b)/2;if(w<=1e-9){h(0);return}const C=S*k/w,P=Math.sqrt(C);h(P)};return e?c.jsxs(fc,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:n,onChange:y=>a(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:i,onChange:y=>o(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:s,onChange:y=>l(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:u,onChange:y=>f(y.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsx("button",{onClick:p,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&c.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[c.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),c.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},hv=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],qte=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function Zte(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),h=Math.hypot(n.x-r.x,n.y-r.y),p=Math.hypot(r.x-e.x,r.y-e.y),y=Math.hypot(n.x-t.x,n.y-t.y),m=(d+h)/2/5,x=(p+y)/2/3,v=m*f,g=x*f;for(let b=0;b<4;b++)for(let S=0;S<6;S++){const k=S/5,w=b/3,C=(1-k)*(1-w)*e.x+k*(1-w)*t.x+(1-k)*w*r.x+k*w*n.x,P=(1-k)*(1-w)*e.y+k*(1-w)*t.y+(1-k)*w*r.y+k*w*n.y;u.push({x:C-v/2,y:P-g/2,w:v,h:g})}return u}function yN(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function Nd(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let l=0;l<i;l++)for(let u=0;u<n;u++)o[s][l]+=e[s][u]*t[u][l];return o}function Qte(e,t){const r=yN(e),n=Nd(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=Pu(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=Nd(r,t);return Nd(o,s)}function Jte(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const l=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=l*r[n][u]}}return r.map(n=>n.slice(t))}function ere(e,t,r){const n=[...e].sort((m,x)=>m.id-x.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(m=>{const x=m.rawMeans,v=[x[0]-t[0],x[1]-t[1],x[2]-t[2],x[3]-t[3]];let g,b,S;r?(S=v[0],b=(v[1]+v[2])/2,g=v[3]):(g=v[0],b=(v[1]+v[2])/2,S=v[3]),g=Math.max(0,g),b=Math.max(0,b),S=Math.max(0,S),a.push([g,b,S])});const o=a[18],s=(o[0]+o[1]+o[2])/3,l=1/Math.max(1e-9,s),u=a.map(m=>[m[0]*l,m[1]*l,m[2]*l]),d=Qte(u,hv),h=yN(d);let p;try{p=Jte(h)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:Nd(p,qte)}}const tre=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,l]=j.useState(n),[u,f]=j.useState(["0","0","0","0"]),[d,h]=j.useState(null),[p,y]=j.useState(null);if(j.useEffect(()=>{if(e&&r&&r.length===24){const w=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([w[0].toFixed(2),w[1].toFixed(2),w[2].toFixed(2),w[3].toFixed(2)])}},[e,r]),j.useEffect(()=>{if(!e||!r||r.length!==24)return;const k=u.map(w=>parseFloat(w));if(!k.some(isNaN))try{const w=ere(r,k,s);h(w),y(null)}catch(w){y(w.message)}},[e,r,s,u]),!e)return null;const m=(k,w)=>{f(C=>{const P=[...C];return P[k]=w,P})},x=k=>{navigator.clipboard.writeText(k)},v=k=>k?k.map(w=>w.map(C=>C.toFixed(4))):[],g=d?v(d.matrix).flat().join(" "):"",b=s?["B","G1","G2","R"]:["R","G1","G2","B"],S=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return c.jsxs(fc,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),c.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:k=>o(parseFloat(k.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>l(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),c.jsx("button",{onClick:()=>l(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(k=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:`text-[10px] font-bold mb-1 ${S[k]}`,children:b[k]}),c.jsx("input",{type:"number",step:"0.01",value:u[k],onChange:w=>m(k,w.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},k))})]}),p?c.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:p}):d?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),c.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:v(d.matrix).map((k,w)=>c.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[c.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:k[0]}),c.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:k[1]}),c.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:k[2]})]},w))}),c.jsx("button",{onClick:()=>x(g),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):c.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function vN(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let l=0;l<r;l++)n+=e[l],a+=t[l],i+=e[l]*t[l],o+=e[l]*e[l];const s=r*o-n*n;return s===0?{slope:0,intercept:0}:{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function rre(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function pv(e,t,r,n){const a=Math.floor(n.x),i=Math.floor(n.y),o=Math.floor(n.w),s=Math.floor(n.h);if(o<8||s<8)return null;let l=[];for(let L=0;L<s;L++){const Q=[],fe=(i+L)*t;for(let J=0;J<o;J++)Q.push(e[fe+a+J]);l.push(Q)}let u=0,f=0;for(let L=1;L<s-1;L+=2)for(let Q=1;Q<o-1;Q+=2)u+=Math.abs(l[L][Q+1]-l[L][Q-1]),f+=Math.abs(l[L+1][Q]-l[L-1][Q]);let d=o,h=s,p=l,y=2;if(f>u){y=1,p=Array(o).fill(0).map(()=>Array(s).fill(0));for(let L=0;L<s;L++)for(let Q=0;Q<o;Q++)p[Q][s-1-L]=l[L][Q];d=s,h=o}else y=2;const m=[],x=[];for(let L=0;L<h;L++){const Q=p[L],fe=Q.map((H,X)=>X===0?0:Math.abs(H-Q[X-1])),J=Math.max(...fe),de=fe.indexOf(J);if(J>1){const H=Math.max(0,de-3),X=Math.min(d,de+4);let ce=0,ie=0;for(let V=H;V<X;V++)ce+=fe[V],ie+=V*fe[V];ce>0&&(m.push(ie/ce),x.push(L))}}if(m.length<h*.4)return null;const{slope:v,intercept:g}=vN(x,m),b=Math.cos(Math.atan(v)),S=[],k=[];for(let L=0;L<h;L++){const Q=v*L+g;for(let fe=0;fe<d;fe++)S.push((fe-Q)*b),k.push(p[L][fe])}const C=Math.min(o,s)/2;let P=0;for(const L of S)Math.abs(L)<=C&&P++;let O=.125;if(P>0){const L=40*C/P;O=Math.max(.01,Math.min(.125,L))}const N=O,E=Array.from(S.keys()).sort((L,Q)=>S[L]-S[Q]),M=E.map(L=>S[L]),_=E.map(L=>k[L]),$=M[0],D=M[M.length-1],R=Math.floor((D-$)/N),A=new Array(R).fill(0),T=new Array(R).fill(0);for(let L=0;L<M.length;L++){const Q=Math.floor((M[L]-$)/N);Q>=0&&Q<R&&(A[Q]+=_[L],T[Q]++)}let I=_[0];for(let L=0;L<R;L++)T[L]>0?(A[L]/=T[L],I=A[L]):A[L]=I;const U=A.slice(0,10).reduce((L,Q)=>L+Q,0)/10,Z=A.slice(-10).reduce((L,Q)=>L+Q,0)/10;if(U>Z){const L=Math.max(...A),Q=Math.min(...A);for(let fe=0;fe<A.length;fe++)A[fe]=L-A[fe]+Q}const Y=rre(A,N);return{esf:A,lsfFull:Y,binSize:N,orientation:y}}function xN(e,t,r,n=!1){if(e.length===0)return null;const a=4096,i=new gs(a),o=r?1e3/r:1,s=new Float32Array(501);for(let m=0;m<=500;m++)s[m]=m/500*o;const l=new Float32Array(501).fill(0);let u=0,f=[],d=[],h=0;for(const m of e){let x=[...m.lsfFull];const v=m.binSize;let g=0,b=-1/0;for(let T=0;T<x.length;T++)x[T]>b&&(b=x[T],g=T);const S=b*.2;let k=0,w=x.length-1;for(let T=g;T>=0;T--)if(x[T]<S){k=T;break}for(let T=g;T<x.length;T++)if(x[T]<S){w=T;break}const C=w-k;let P=!1;if(n&&C>0){const T=C*4,I=[],U=[];for(let Z=0;Z<Math.max(0,g-T);Z++)I.push(Z),U.push(x[Z]);for(let Z=Math.min(x.length,g+T);Z<x.length;Z++)I.push(Z),U.push(x[Z]);if(I.length>5){const{slope:Z,intercept:Y}=vN(I,U);for(let L=0;L<x.length;L++)x[L]=x[L]-(Z*L+Y);b=-1/0;for(let L=0;L<x.length;L++)x[L]>b&&(b=x[L],g=L);P=!0}}let O=0,N=0;if(t>0)N=t,O=Math.round(t/v);else{const T=b*.2;let I=0,U=x.length-1;for(let Q=g;Q>=0;Q--)if(x[Q]<T){I=Q;break}for(let Q=g;Q<x.length;Q++)if(x[Q]<T){U=Q;break}let L=(U-I)*v*8;L=Math.max(2,L),N=L,O=Math.round(L/v)}h+=N;const E=Math.max(0,g-O),M=Math.min(x.length,g+O),_=x.slice(E,M);if(_.length<8)continue;if(f.length===0)if(f=_,P){const T=new Array(x.length).fill(0);let I=0;for(let U=0;U<x.length;U++)I+=x[U],T[U]=I;d=T}else d=m.esf;const $=new Float32Array(a).fill(0);for(let T=0;T<_.length;T++){const I=.54-.46*Math.cos(2*Math.PI*T/(_.length-1));$[T]=_[T]*I}i.transform($);const D=[],R=[];for(let T=0;T<=a/2;T++){const I=Math.sqrt(i._real[T]**2+i._imag[T]**2);D.push(I),R.push(T/(a*v)*o)}const A=D[0];if(A>0){for(let T=0;T<=500;T++){const I=s[T];l[T]+=nre(I,R,D)/A}u++}}if(u===0)return null;const p=Array.from(l).map(m=>m/u);let y=null;for(let m=0;m<p.length-1;m++)if(p[m]>=.5&&p[m+1]<.5){y=s[m]+(.5-p[m])*(s[m+1]-s[m])/(p[m+1]-p[m]);break}return{esf:d,lsf:[],lsfCropped:f,mtf:p,freqs:Array.from(s),mtf50:y,calcRadius:h/u}}function nre(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const are=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o,isSfrLabOpen:s})=>{const[l,u]=j.useState([]),[f,d]=j.useState(""),[h,p]=j.useState(""),[y,m]=j.useState(12),[x,v]=j.useState(!0),[g,b]=j.useState(!1),[S,k]=j.useState(1),[w,C]=j.useState(null),[P,O]=j.useState({x:100,y:50}),[N,E]=j.useState({w:1e3,h:800}),[M,_]=j.useState(!1),[$,D]=j.useState(!1),R=j.useRef({x:0,y:0}),A=j.useRef({w:0,h:0}),[T,I]=j.useState(!1),U=l.length>0?l[l.length-1].binSize:null,Z=U?(1/U).toFixed(1):"-",Y=j.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),Q=(o==null?void 0:o.renderMode)==="advanced-zero-dep",fe=()=>{if(!(!r||!n)){if(!Q){alert("Scalar Unmixing is required. Please configure Background/Foreground/BlackLevel in the Sidebar and click 'RUN UNMIXING' first.");return}try{let te;if(o!=null&&o.advancedZeroDep){const ue=vx(r,n,o);te=pv(ue.data,ue.width,ue.height,{x:0,y:0,w:ue.width,h:ue.height})}else te=pv(r.data,r.width,r.height,n);te?u(ue=>[...ue,te]):alert("Could not detect valid edge.")}catch(te){console.error(te),alert("Error processing ROI")}}},J=()=>{u([]),C(null),k(1)},de=()=>{if(!w)return;const te=parseFloat(f),Le=`data:text/csv;charset=utf-8,Frequency (${!isNaN(te)&&te>0?"lp/mm":"cy/px"}),MTF
`+w.freqs.map((rt,mt)=>`${rt.toFixed(6)},${w.mtf[mt].toFixed(6)}`).join(`
`),Oe=encodeURI(Le),Re=document.createElement("a");Re.setAttribute("href",Oe),Re.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)},H=()=>{if(!(w!=null&&w.mtf50)||!n)return;const te=n.x+n.w/2,ue=n.y+n.h/2,Ie=`{${te.toFixed(1)},${ue.toFixed(1)},${w.mtf50.toFixed(4)}}`;navigator.clipboard.writeText(Ie)};j.useEffect(()=>{if(l.length===0){C(null);return}const te=parseFloat(f),ue=!isNaN(te)&&te>0?te:null,Le=xN(l,x?-1:y,ue,g);C(Le)},[l,y,x,g,f]),j.useEffect(()=>{e&&Q&&l.length===0&&n&&r&&fe()},[e]);const X=te=>{i&&i(),!(te.target.closest("button")||te.target.closest("input"))&&(_(!0),R.current={x:te.clientX-P.x,y:te.clientY-P.y})},ce=te=>{te.stopPropagation(),te.preventDefault(),D(!0),R.current={x:te.clientX,y:te.clientY},A.current={w:N.w,h:N.h}};j.useEffect(()=>{const te=Ie=>{if(M)O({x:Ie.clientX-R.current.x,y:Ie.clientY-R.current.y});else if($){const Le=Ie.clientX-R.current.x,Oe=Ie.clientY-R.current.y;E({w:Math.max(600,A.current.w+Le),h:Math.max(500,A.current.h+Oe)})}},ue=()=>{_(!1),D(!1)};return(M||$)&&(window.addEventListener("mousemove",te),window.addEventListener("mouseup",ue)),()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",ue)}},[M,$]);const ie=j.useMemo(()=>{if(!(w!=null&&w.mtf50)||!h)return null;const te=parseFloat(h);if(isNaN(te)||te<=0)return null;let ue=w.mtf50;const Ie=parseFloat(f);return!isNaN(Ie)&&Ie>0&&(ue=w.mtf50*(Ie/1e3)),ue*2*te},[w,h,f]);if(!e)return null;const V=w?w.lsfCropped.map((te,ue)=>({x:ue,y:te})):[],be=w?w.esf.map((te,ue)=>({x:ue,y:te})):[],ge=w?w.mtf.map((te,ue)=>({freq:w.freqs[ue],mtf:te})).filter(te=>te.freq<=(parseFloat(f)?200:1)):[],se=f?"lp/mm":"cy/px";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden",style:{left:P.x,top:P.y,width:N.w,height:T?"auto":N.h,zIndex:a??100},onMouseDownCapture:i,children:[c.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${M?"cursor-grabbing":"cursor-grab"}`,onMouseDown:X,children:[c.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[l.length," ROI",l.length!==1?"s":""]})]}),c.jsx("button",{onClick:()=>I(!T),className:"text-gray-400 hover:text-orange-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})]}),!T&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),c.jsx("input",{type:"number",value:f,onChange:te=>d(te.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),c.jsx("input",{type:"number",value:h,onChange:te=>p(te.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",title:"Auto-calculated based on ROI size",children:[c.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),U?c.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[U.toFixed(3),"px",c.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",Z,"x)"]})]}):c.jsx("span",{className:"text-gray-400 italic",children:"..."})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[300px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",title:"Linearly subtract vignetting trend (4x width distance)",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:te=>b(te.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:"Deshading"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:x,onChange:te=>{const ue=te.target.checked;v(ue),ue||m(Y)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's official NR"})]}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:x?"Calculated:":"Manual:"}),c.jsxs("span",{className:`font-mono font-bold ${x?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[x&&(w!=null&&w.calcRadius)?w.calcRadius.toFixed(2):y.toFixed(1)," px"]})]}),c.jsx("input",{type:"range",min:"2",max:Y,step:"0.5",value:y,onChange:te=>{m(parseFloat(te.target.value)),v(!1)},disabled:x,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${x?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:fe,disabled:!Q,title:Q?"":"Scalar Unmixing must be active. Run Unmixing in Sidebar first.",className:`px-3 py-1.5 text-white font-bold rounded shadow-sm transition-transform active:scale-95 ${Q?"bg-orange-600 hover:bg-orange-500":"bg-gray-400 cursor-not-allowed"}`,children:Q?"Add Current ROI":"Unmixing Required"}),c.jsx("button",{onClick:H,disabled:!w||!w.mtf50||!n,className:"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Copy Pos/MTF50"}),c.jsx("button",{onClick:de,disabled:!w,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),c.jsx("button",{onClick:J,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[c.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(dl,{data:be,children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Gn,{dataKey:"x",hide:!0})," ",c.jsx(Wn,{hide:!0,domain:["auto","auto"]})," ",c.jsx(qr,{contentStyle:{fontSize:"10px"}}),c.jsx(Ar,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",S>1?`(x${S.toFixed(0)})`:""]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),c.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:S,onChange:te=>k(parseFloat(te.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(dl,{data:V,children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(co,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),c.jsx(Gn,{dataKey:"x",hide:!0}),c.jsx(Wn,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[te=>te,te=>te/S],allowDataOverflow:!0,tickFormatter:te=>te.toFixed(3)}),c.jsx(qr,{contentStyle:{fontSize:"10px"},formatter:te=>[te.toFixed(5),"Amplitude"]}),c.jsx(Ar,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col min-h-[250px]",children:[c.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF / Spatial Frequency Response"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[(w==null?void 0:w.mtf50)&&c.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",c.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[w.mtf50.toFixed(2)," ",se]})]}),ie!==null&&c.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(ie)," LW/PH"]})]})]}),c.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 400 60",className:"w-[40rem] h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),c.jsx(Oi,{width:"100%",height:"100%",children:c.jsxs(dl,{data:ge,margin:{top:10,right:30,left:10,bottom:20},children:[c.jsx(oi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),c.jsx(Gn,{dataKey:"freq",type:"number",tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${se})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),c.jsx(Wn,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),c.jsx(qr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:te=>`Freq: ${Number(te).toFixed(3)}`,formatter:te=>[te.toFixed(4),"MTF"]}),c.jsx(ri,{verticalAlign:"top",height:20}),c.jsx(Ar,{type:"monotone",dataKey:"mtf",name:"SFR",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1}),(w==null?void 0:w.mtf50)&&c.jsx(Sf,{x:w.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:c.jsx(nn,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]})]})]}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:ce})]})},ire=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, linear_shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    
    # Use int32 for calculations to prevent premature overflow and allow negative offsets
    raw_data = raw_data.astype(np.int32)

    # Apply Bit Shift (<<)
    if shift > 0:
        raw_data = raw_data * (1 << shift)
    
    # Apply Linear Offset (+)
    if linear_shift != 0:
        raw_data = raw_data + linear_shift

    # Clip to 16-bit range
    raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,ore=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=j.useState(!0),[l,u]=j.useState(!1),f=j.useRef(null),[d,h]=j.useState(4),[p,y]=j.useState(0),[m,x]=j.useState(""),[v,g]=j.useState(""),[b,S]=j.useState("RGGB"),k=j.useMemo(()=>Object.keys(Qd).sort(),[]);j.useEffect(()=>{e&&!f.current&&(async()=>{try{const P=await window.loadPyodide();await P.loadPackage("numpy"),await P.runPythonAsync(ire),f.current=P,s(!1)}catch(P){console.error("Pyodide Init Failed",P)}})()},[e]),j.useEffect(()=>{if(e&&r){const C=r.whiteLevel;C>1e4?h(2):C>3e3?h(4):C>6e4&&h(0);const P=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(P)?S(P):S("RGGB")}},[e,r]);const w=async()=>{if(!(!r||!f.current)){u(!0);try{const C=f.current,P=m.trim()?m.trim().split(/\s+/).map(Number):[0,0,0,0];if(P.length===1&&!isNaN(P[0])&&P.push(P[0],P[0],P[0]),P.length<4)for(;P.length<4;)P.push(0);const O=v.trim()?v.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(O.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const N=b;C.globals.set("js_raw_bytes",new Uint8Array(r.data.buffer,r.data.byteOffset,r.data.byteLength)),C.globals.set("js_width",r.width),C.globals.set("js_height",r.height),C.globals.set("js_cfa",N),C.globals.set("js_bl_list",P),C.globals.set("js_shift",d),C.globals.set("js_linear_shift",p),C.globals.set("js_cm_flat",O);const E=await C.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift,
                    js_linear_shift,
                    js_cm_flat.to_py()
                )
            `),M=E.toJs();E.destroy();const _=new Blob([M],{type:"image/x-adobe-dng"}),$=URL.createObjectURL(_),D=document.createElement("a");D.href=$;const R=n.substring(0,n.lastIndexOf("."))||"image";D.download=`${R}_16bit_manual.dng`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL($)}catch(C){console.error(C),alert("Export Failed: "+C.message)}finally{u(!1)}}};return e?c.jsxs(fc,{initialPosition:{x:window.innerWidth/2-250,y:150},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),c.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Bit Shift (<<)"}),c.jsx("input",{type:"number",value:d,onChange:C=>h(parseInt(C.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase",children:"Offset (+)"}),c.jsx("input",{type:"number",value:p,onChange:C=>y(parseInt(C.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),c.jsxs("select",{value:b,onChange:C=>S(C.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]})]}),c.jsx("div",{className:"mt-[-10px] grid grid-cols-3 gap-4",children:c.jsx("div",{className:"text-[9px] text-gray-400 dark:text-gray-500 col-span-2",children:"Shift: 4=12bit(x16), 2=14bit(x4). Added after shift."})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level (Manual Fill)"}),c.jsx("input",{type:"text",value:m,onChange:C=>x(C.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:C=>{const P=Qd[C.target.value];P&&g(P),C.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),k.map(C=>c.jsx("option",{value:C,children:C},C))]})]}),c.jsx("textarea",{value:v,onChange:C=>g(C.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),c.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),c.jsx("button",{onClick:w,disabled:l,className:`w-full py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${l?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:l?"Processing Kernel...":"Convert & Download DNG"})]})})]}):null},sre="http://localhost:5428",lre=(e=!1)=>{const[t,r]=j.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return j.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${sre}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const l=await s.json(),u=`Connected (${l.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===l.exiftool&&f.hasDngConverter===!!l.dng_converter?f:{isConnected:!0,message:u,version:l.exiftool,hasDngConverter:!!l.dng_converter})}else r(l=>l.isConnected===!1&&l.message==="Service Error"?l:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},cre="JTR_BlobStore",ci="raw_files",ure=1,vp=()=>new Promise((e,t)=>{const r=indexedDB.open(cre,ure);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(ci)||a.createObjectStore(ci)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),i5=async(e,t)=>{const r=await vp();return new Promise((n,a)=>{const i=r.transaction(ci,"readwrite");i.objectStore(ci).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},fre=async e=>{const t=await vp();return new Promise((r,n)=>{const o=t.transaction(ci,"readonly").objectStore(ci).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},dre=async()=>{const e=await vp();return new Promise((t,r)=>{const n=e.transaction(ci,"readwrite");n.objectStore(ci).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},bN="jtr_workspace_index",hre=e=>{try{const t=JSON.stringify(e);localStorage.setItem(bN,t)}catch(t){console.error("Failed to save workspace index",t)}},pre=()=>{try{const e=localStorage.getItem(bN);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},gre=async e=>{const n=(await vp()).transaction(ci,"readwrite").objectStore(ci),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},mre=[{x:3050,y:1973},{x:4245,y:1980},{x:3043,y:2870},{x:4243,y:2876}],yre=1195,o5=150,s5=50,vre=[{x:3528,y:2437.5,ori:2},{x:3775,y:2419,ori:2},{x:3638.5,y:2303,ori:1},{x:3653,y:2548.5,ori:1},{x:3082,y:2413,ori:2},{x:2825,y:2427,ori:2},{x:2946,y:2300.5,ori:1},{x:2966,y:2550,ori:1},{x:3638.5,y:3e3,ori:1},{x:3657.5,y:3248.5,ori:1},{x:3521.5,y:3135,ori:2},{x:3770,y:3108.5,ori:2},{x:4375.5,y:3064.5,ori:2},{x:4620.5,y:3040,ori:2},{x:4486.5,y:2934,ori:1},{x:4509.5,y:3182.5,ori:1},{x:2066.5,y:1726,ori:2},{x:2176.5,y:1597,ori:1},{x:2194.5,y:1843,ori:1},{x:2313.5,y:1705,ori:2},{x:2675.5,y:1799.5,ori:2},{x:2789.5,y:1674,ori:1},{x:2926,y:1787.5,ori:2},{x:2810.5,y:1921.5,ori:1},{x:4380.5,y:1816,ori:2},{x:4497.5,y:1687,ori:1},{x:4513,y:1934.5,ori:1},{x:4628,y:1799.5,ori:2},{x:5099,y:1622.5,ori:1},{x:4985.5,y:1751,ori:2},{x:5122,y:1867.5,ori:1},{x:5229,y:1732,ori:2},{x:2194.5,y:2428,ori:2},{x:2305.5,y:2295.5,ori:1},{x:2327,y:2544,ori:1},{x:2442,y:2405,ori:2},{x:3530.5,y:1741.5,ori:2},{x:3640.5,y:1610,ori:1},{x:3777.5,y:1719.5,ori:2},{x:3666,y:1856.5,ori:1},{x:4222,y:2443.5,ori:2},{x:4470.5,y:2422,ori:2},{x:4334.5,y:2309,ori:1},{x:4356.5,y:2554,ori:1},{x:4965,y:2313,ori:1},{x:4852.5,y:2446,ori:2},{x:4987,y:2561,ori:1},{x:5097,y:2427,ori:2},{x:4981.5,y:3141.5,ori:2},{x:5096,y:3009,ori:1},{x:5222.5,y:3122.5,ori:2},{x:5115.5,y:3256.5,ori:1},{x:2779,y:2928,ori:1},{x:2667,y:3064.5,ori:2},{x:2799,y:3173.5,ori:1},{x:2917.5,y:3043,ori:2},{x:2167.5,y:2993,ori:1},{x:2052,y:3130,ori:2},{x:2187.5,y:3243.5,ori:1},{x:2304.5,y:3108.5,ori:2}];function xre(e,t){let r=[],n=[];for(let o=0;o<4;o++){let s=e[o].x,l=e[o].y,u=t[o].x,f=t[o].y;r.push([s,l,1,0,0,0,-s*u,-l*u]),r.push([0,0,0,s,l,1,-s*f,-l*f]),n.push(u),n.push(f)}const a=8;for(let o=0;o<a;o++){let s=o;for(let l=o+1;l<a;l++)Math.abs(r[l][o])>Math.abs(r[s][o])&&(s=l);[r[o],r[s]]=[r[s],r[o]],[n[o],n[s]]=[n[s],n[o]];for(let l=o+1;l<a;l++){const u=r[l][o]/r[o][o];n[l]-=u*n[o];for(let f=o;f<a;f++)r[l][f]-=u*r[o][f]}}const i=new Array(a).fill(0);for(let o=a-1;o>=0;o--){let s=0;for(let l=o+1;l<a;l++)s+=r[o][l]*i[l];i[o]=(n[o]-s)/r[o][o]}return[[i[0],i[1],i[2]],[i[3],i[4],i[5]],[i[6],i[7],1]]}function bre(e,t,r){const n=e[2][0]*t+e[2][1]*r+e[2][2];return{x:(e[0][0]*t+e[0][1]*r+e[0][2])/n,y:(e[1][0]*t+e[1][1]*r+e[1][2])/n}}function wre(e){if(e.length!==4)return[];const t=xre(mre,e),n=Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y)/yre;return vre.map(a=>{const i=bre(t,a.x,a.y);let o,s;return a.ori===1?(o=o5*n,s=s5*n):(o=s5*n,s=o5*n),{x:i.x-o/2,y:i.y-s/2,w:o,h:s,ori:a.ori}})}const dn=1024,l5=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,l=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),h=f*t*4,p=d*n*4;for(let y=0;y<t;y++){const x=Math.floor(y*l)*4,v=h+y*4,g=p+x;s[v]=o[g],s[v+1]=o[g+1],s[v+2]=o[g+2],s[v+3]=o[g+3]}}return i},kre=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];if(d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d.some(h=>h>0))return d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN)&&l.some(u=>u>0))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},Sre=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:l,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],h=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,p=j.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:b,y:S,width:k,height:w}=e,C=vx(u,{x:b,y:S,w:k,h:w},o),P=[0,0,0,0],O=[0,0,0,0],N=Math.floor(S),E=Math.floor(b);for(let M=0;M<C.height;M++){const _=M*C.width;for(let $=0;$<C.width;$++){const D=C.data[_+$],R=N+M,A=E+$,T=R%2,I=A%2,U=T*2+I;P[U]+=D,O[U]++}}return P.map((M,_)=>O[_]>0?M/O[_]:0)}catch(b){return console.error("Unmix calc error",b),null}},[e,u,o]),y=(b,S,k)=>f?S<=1e-4?0:(b-k)/S:null,m=(b,S)=>h?b-d[S]:b,x=()=>{if(!h){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let b,S,k,w;n?(w=0,S=1,k=2,b=3):(b=0,S=1,k=2,w=3);const C=O=>e.means[O]-d[O],P=O=>e.stdDevs[O];localStorage.setItem("import_signal_r",C(b).toString()),localStorage.setItem("import_signal_g1",C(S).toString()),localStorage.setItem("import_signal_g2",C(k).toString()),localStorage.setItem("import_signal_b",C(w).toString()),localStorage.setItem("import_sigma_r",P(b).toString()),localStorage.setItem("import_sigma_g1",P(S).toString()),localStorage.setItem("import_sigma_g2",P(k).toString()),localStorage.setItem("import_sigma_b",P(w).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},v=n?[{name:"B",desc:"(0,0)",mean:m(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:y(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:m(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:y(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:m(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:y(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"R",desc:"(1,1)",mean:m(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:y(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}]:[{name:"R",desc:"(0,0)",mean:m(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:y(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:m(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:y(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:m(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:y(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"B",desc:"(1,1)",mean:m(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:y(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}],g=p?"w-96":f?"w-80":"w-60";return c.jsxs(fc,{className:`${g} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:l,initialPosition:{x:20,y:80},children:[c.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",c.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),c.jsx("br",{}),"Y: ",Math.round(e.y)]}),c.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),c.jsxs("table",{className:"w-full mb-3",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[c.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),c.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",h?"*":""]}),c.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&c.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),p&&c.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),c.jsx("tbody",{className:"font-mono text-xs",children:v.map((b,S)=>c.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[c.jsxs("td",{className:"py-1",children:[c.jsx("span",{className:`font-bold ${b.color}`,children:b.name}),c.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:b.desc})]}),c.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",children:b.mean.toFixed(2)}),c.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:b.std.toFixed(2)}),f&&c.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:b.snr!==null?b.snr.toFixed(2):"-"}),p&&c.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:b.unmixed!==null?b.unmixed.toFixed(1):"-"})]},S))})]}),h&&c.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Hist"}),c.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"Quant"}),c.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"FFT"}),c.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"PCC"}),c.jsx("button",{onClick:x,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",children:"ColorN"})]})]})]})},jre=()=>{var E1;const[e,t]=j.useState("init"),[r,n]=j.useState("Checking storage..."),[a,i]=j.useState(null),o=j.useRef(!1),[s,l]=j.useState("dark");j.useEffect(()=>{const W=window.document.documentElement;W.classList.remove(s==="dark"?"light":"dark"),W.classList.add(s)},[s]);const[u,f]=j.useState(!1),[d,h]=j.useState(!1),[p,y]=j.useState(!1),[m,x]=j.useState(!1),v=lre(u||d||p),[g,b]=j.useState(!1),[S,k]=j.useState([]),[w,C]=j.useState(-1),[P,O]=j.useState([]),N=j.useMemo(()=>S[w],[S,w]),E=j.useRef(null);j.useEffect(()=>{E.current=N||null},[N]);const M=(N==null?void 0:N.file)||null,_=(N==null?void 0:N.imageElement)||null,$=(N==null?void 0:N.rawImageData)||null,D=(N==null?void 0:N.rawFileBuffer)||null,R=(N==null?void 0:N.renderedRawImageData)||null,A=(N==null?void 0:N.referenceImageData)||null,T=(N==null?void 0:N.sampledImageData)||null,I=(N==null?void 0:N.exifData)||null,U=(N==null?void 0:N.isThreePlane)||!1,Z=(N==null?void 0:N.xtransPhase)||{x:0,y:0},Y=(N==null?void 0:N.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[L,Q]=j.useState(!1),[fe,J]=j.useState(null),[de,H]=j.useState(!1),[X,ce]=j.useState(!1),[ie,V]=j.useState(null),[be,ge]=j.useState([]),[se,te]=j.useState(100),[ue,Ie]=j.useState(!0),[Le,Oe]=j.useState(!1),[Re,rt]=j.useState(null),[mt,ar]=j.useState(!1),[gt,Zt]=j.useState(!1),[ot,Tt]=j.useState(!1),[Lt,fr]=j.useState(!1),[Vt,Nt]=j.useState(!1),[qe,Ot]=j.useState("1.0"),[Et,Qt]=j.useState(!1),[dr,Wr]=j.useState(!1),[bt,en]=j.useState(!1),[st,Jt]=j.useState([]),[Cr,yn]=j.useState(!1),[xr,$r]=j.useState(0),[vn,_n]=j.useState([]),[Vr,xn]=j.useState(!1),[Xa,Pa]=j.useState({x:0,y:0}),[hr,pr]=j.useState(!1),[ht,le]=j.useState(!1),[De,Be]=j.useState([]),[at,Xe]=j.useState(0),[Ct,ir]=j.useState(null),[or,Ve]=j.useState(!1),[it,wt]=j.useState([]),[yt,sr]=j.useState(.5),[ke,An]=j.useState(!1),[di,sa]=j.useState(2),[Hn,zi]=j.useState(1),[Io,Xn]=j.useState([]),[Ui,Ka]=j.useState(null),[bn,hi]=j.useState(0),[Na,Kn]=j.useState([]),[Oa,Gi]=j.useState([]),[Ro,dc]=j.useState(64),[la,Ma]=j.useState(10),[Tn,hc]=j.useState(10),[Yn,pc]=j.useState(4),[qn,gc]=j.useState(1),[z,ne]=j.useState(0),[oe,B]=j.useState("processed"),[ye,Ee]=j.useState(!1),Fe=j.useMemo(()=>Y.blackLevel?Y.blackLevel:$!=null&&$.blackLevels?[$.blackLevels[0],$.blackLevels[1],$.blackLevels[2],$.blackLevels[3]]:[0,0,0,0],[Y.blackLevel,$]),nt=(I==null?void 0:I.ImageHeight)||(I==null?void 0:I.ExifImageHeight)||($==null?void 0:$.height)||0,[Ze,xe]=j.useState(null),[Mt,Me]=j.useState(null),[G,he]=j.useState({x:0,y:0}),[re,Te]=j.useState(1),[je,et]=j.useState("pan"),Qe=j.useRef(null),kt=j.useRef(null);j.useEffect(()=>{const W=pre();W&&W.sessions.length>0?(i(W),t("prompt")):t("idle")},[]),j.useCallback(async()=>{o.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await dre()}catch(W){console.error("Failed to clear DB",W)}t("idle"),i(null),o.current=!1},[]),j.useCallback(async()=>{if(!a)return;t("restoring"),n("Restoring layout...");const W=a;if(l(W.theme),Ie(W.sidebarOpen),W.sessions.length>0){n(`Restoring ${W.sessions.length} images...`);const K=[];for(const q of W.sessions){if(o.current)return;await new Promise(ee=>setTimeout(ee,50));try{const ee=await fre(q.id);if(ee){const we={id:q.id,fileName:q.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:ee,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:q.isThreePlane,displaySettings:q.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:ve,analysisData:Ae}=await Fo(ee);let $e=null;if(Ae)try{q.displaySettings.renderMode==="zero-dependency"?$e=await ag(ee,q.displaySettings):q.displaySettings.renderMode==="advanced-zero-dep"?$e=await J_(ee,q.displaySettings):q.displaySettings.renderMode==="zero-dep-color"?$e=await Q_(ee,q.displaySettings):$e=await u2(ee,q.displaySettings)}catch(Ue){console.error("Render failed",Ue),$e=await ag(ee,q.displaySettings)}const ze=URL.createObjectURL(ve),Ce=new Image;Ce.src=ze,await new Promise(Ue=>{Ce.onload=()=>Ue()}),K.push({...we,rawImageData:Ae,renderedRawImageData:$e,previewUrl:ze,imageElement:Ce,exifData:Ae.metadata})}}catch(ee){console.error(`Failed to restore session ${q.id}`,ee)}}if(o.current)return;if(k(K),W.activeSessionId){const q=K.findIndex(ee=>ee.id===W.activeSessionId);q>=0?C(q):K.length>0&&C(0)}ge(W.windows)}o.current||t("idle")},[a]);const tt=j.useCallback(async()=>{},[D,N,Y,Lt,Vt]),_t=j.useCallback(()=>{!D||!N||Tt(!0)},[D,N]),gr=j.useCallback(async()=>{},[$,N,qe,Fe]);j.useEffect(()=>{const W=K=>{(K.ctrlKey||K.metaKey)&&K.key.toLowerCase()==="s"&&(K.preventDefault(),_t())};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[_t]);const Dr=j.useRef(null),Pr=j.useCallback(()=>{e==="idle"&&(Dr.current&&clearTimeout(Dr.current),Dr.current=window.setTimeout(async()=>{var q;const W={version:1,timestamp:Date.now(),activeSessionId:((q=S[w])==null?void 0:q.id)||null,theme:s,sidebarOpen:ue,sessions:S.map(ee=>({id:ee.id,fileName:ee.fileName,fileType:ee.file?ee.file.type:"application/octet-stream",fileSize:ee.rawFileBuffer?ee.rawFileBuffer.byteLength:0,displaySettings:ee.displaySettings,isThreePlane:ee.isThreePlane})),windows:be.map(ee=>({id:ee.id,type:ee.type,roi:ee.roi,zIndex:ee.zIndex,initialPosition:ee.initialPosition,sessionId:ee.sessionId,isBGGR:ee.isBGGR,isMinimized:ee.isMinimized||!1,internalState:ee.internalState}))};hre(W);const K=S.map(ee=>ee.id);gre(K)},1e3))},[S,be,w,s,ue,e]);j.useEffect(()=>{Pr()},[Pr]);const ln=j.useCallback(W=>{k(K=>K.map((q,ee)=>ee===w?{...q,...W}:q))},[w]);j.useEffect(()=>{if($&&fe){const W=zo($.data,$.width,$.height,fe.x,fe.y,fe.width,fe.height);J(W)}},[$]);const mc=W=>{if(!fe||!N)return;const K=Date.now().toString()+Math.random().toString().slice(2,5),q=Math.max(se,...be.map(ve=>ve.zIndex),100),ee=be.length%10*30,we=W==="fft"?{x:50,y:50}:W==="histogram"?{x:100,y:100}:{x:150,y:150};ge(ve=>[...ve,{id:K,type:W,roi:{x:fe.x,y:fe.y,w:fe.width,h:fe.height},zIndex:q+1,initialPosition:{x:we.x+ee,y:we.y+ee},sessionId:N.id,isBGGR:de,isMinimized:!1,stackFiles:(W==="fft"||W==="pearson"||W==="histogram")&&P.length>0?P:void 0}])},xp=W=>{ge(K=>K.filter(q=>q.id!==W))},bp=W=>{ge(K=>K.map(q=>q.id===W?{...q,isMinimized:!0}:q))},En=W=>{ge(K=>{const q=Math.max(se,...K.map(ee=>ee.zIndex));return K.map(ee=>ee.id===W?{...ee,zIndex:q+1}:ee)})},wp=(W,K)=>{ge(q=>q.map(ee=>ee.id===W?{...ee,internalState:{...ee.internalState,...K}}:ee))},yc=()=>{const W=Math.max(se,...be.map(K=>K.zIndex));te(W+1)},kp=(W,K)=>{ge(q=>q.map(ee=>ee.id===W?{...ee,roi:K}:ee))};j.useEffect(()=>{if(!I)return;const W=I.CFAPattern2||I.CFAPattern;if(W){let K="";Array.isArray(W)?K=W.join(""):typeof W=="string"?K=W.replace(/[\s,]+/g,""):typeof W=="number"&&(K=String(W)),K==="0112"?H(!1):K==="2110"&&H(!0)}},[I]),j.useEffect(()=>{let W;const K=()=>{if(ke&&Vr){const q=Date.now()/1e3,ee=.55+.45*Math.sin(q*di);zi(ee),W=requestAnimationFrame(K)}else zi(1)};return ke&&Vr?K():zi(1),()=>{W&&cancelAnimationFrame(W)}},[ke,Vr,di]),j.useEffect(()=>{const W=K=>{K.key==="Escape"&&Vr&&(xn(!1),Pa({x:0,y:0}),An(!1))};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[Vr]),j.useEffect(()=>()=>{S.forEach(W=>{W.previewUrl&&URL.revokeObjectURL(W.previewUrl)}),kt.current&&kt.current.terminate()},[]);const Wi=async(W,K=!0)=>{K&&(he({x:0,y:0}),Te(1),hi(0),Kn([]),Gi([]),Oe(!1),rt(null),Q(!1),le(!1),Be([]),wt([]),Xe(0),Jt([]));let q=null;if(v.isConnected){const $e=new FormData;$e.append("file",W);try{const Ce=await(await fetch("http://localhost:5428/read",{method:"POST",body:$e})).json();if(Ce.success){let Ue=Ce.data;Array.isArray(Ue)&&Ue.length===1&&(Ue=Ue[0]),q=Ue}}catch(ze){console.warn("Auto Exif fetch failed",ze)}}const ee=W.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(W.type)||ee)){xe("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let ve={file:W,exifData:q};if(ee||W.type==="image/x-adobe-dng")try{K?Me("Processing RAW file (this may take a moment)..."):Ee(!0);const $e=await W.arrayBuffer();ve.rawFileBuffer=$e;const{previewBlob:ze,analysisData:Ce}=await Fo($e);ve.rawImageData=Ce,!q&&Ce.metadata&&(ve.exifData=Ce.metadata),ve.isThreePlane=Ce.isThreePlane||!1,Ce.isThreePlane&&K&&Q(!0);let Ue=!1,lt=null,St=!1;if(Ce.isXTrans){St=!0,lt=$e;const Nr=(await Qf($e,0,0)).dngBuffer,tr=await Fo(Nr);ve.rawFileBuffer=Nr,ve.rawImageData=tr.analysisData,ve.previewUrl=URL.createObjectURL(tr.previewBlob),Ue=!0}else ve.previewUrl=URL.createObjectURL(ze);ve.originalRawFileBuffer=lt,ve.isXTransOriginal=St,ve.isXTransConverted=Ue,ve.xtransPhase={x:0,y:0};const zt=new Image;if(zt.src=ve.previewUrl||"",await new Promise((br,Nr)=>{zt.onload=()=>{ve.imageElement=zt,br()},zt.onerror=()=>{br()}}),K){const br=ve.rawImageData||Ce,Nr=kre(br,q||br.metadata);let tr;Nr&&Nr.some(Ut=>Ut>0)&&(tr=Nr);const He={exposure:0,demosaicMethod:-1,blackLevel:tr,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},vt=ve.rawFileBuffer;if(vt&&(ee||W.type==="image/x-adobe-dng"))try{const Ut=await ag(vt,He);ve.renderedRawImageData=Ut,ve.displaySettings=He}catch(Ut){console.error("Initial Zero-Dep Render Failed",Ut)}}}catch($e){xe(`Failed to process RAW file: ${$e.message}`),Me(null),Ee(!1);return}else try{Me("Processing image...");const{previewBlob:$e,analysisData:ze}=await W_(W);ve.rawImageData=ze,!q&&ze.metadata&&(ve.exifData=ze.metadata),ve.rawFileBuffer=await W.arrayBuffer(),ve.isThreePlane=ze.isThreePlane||!1,ve.isXTransOriginal=!1,ve.isXTransConverted=!1,ve.originalRawFileBuffer=null;const Ce=URL.createObjectURL($e);ve.previewUrl=Ce;const Ue=new Image;Ue.src=Ce,await new Promise(lt=>{Ue.onload=()=>{ve.imageElement=Ue,lt()},Ue.onerror=()=>{xe("Could not load the image file."),lt()}})}catch($e){xe(`Failed to process image: ${$e.message}`),Me(null);return}const Ae=Date.now().toString()+Math.random();if(ve.rawFileBuffer&&await i5(Ae,ve.rawFileBuffer),K){const $e={exposure:0,demosaicMethod:-1,blackLevel:void 0,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ze={id:Ae,fileName:W.name,file:W,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:$e,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...ve};k(Ce=>{const Ue=[...Ce,ze];return C(Ue.length-1),Ue})}else ln(ve);Me(null),Ee(!1)},vc=async W=>{Me("Converting to DNG...");try{const K=new FormData;K.append("file",W);const q=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:K}),ee=q.headers.get("content-type")||"";if(q.ok)if(ee.includes("application/json")){const we=await q.json();throw new Error(we.error||"Conversion failed")}else{const we=await q.blob(),ve=URL.createObjectURL(we),Ae=document.createElement("a");Ae.href=ve;const $e=W.name,ze=$e.substring(0,$e.lastIndexOf("."))+".dng"||"converted.dng";Ae.download=ze,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(ve);const Ce=new File([we],ze,{type:"image/x-adobe-dng"});await Wi(Ce,!0)}else{const we=await q.text();throw new Error(`HTTP ${q.status}: ${we}`)}}catch(K){Me(null),xe(`Conversion Error: ${K.message}`)}},Cf=(W,K)=>{W&&(K==="direct"?Wi(W,!0):vc(W))},Pf=async W=>{var q;const K=(q=W.target.files)==null?void 0:q[0];K&&(await Wi(K,!0),W.target.value="")},Sp=async(W,K,q,ee)=>{!W||!K||(Me("Processing Pair Difference (May take a while)..."),xe(null),setTimeout(async()=>{try{const we=await W.arrayBuffer(),ve=await K.arrayBuffer(),Ae=await ng(we,ve,q,ee),$e=Cd(Ae.width,Ae.height,Ae.rawData),ze=new File([$e],`Diff_${W.name}_${K.name}.dng`,{type:"image/x-adobe-dng"});await Wi(ze,!0),mc("fft")}catch(we){console.error("Pair Processing Error",we),xe("Pair Processing Failed: "+we.message)}finally{Me(null)}},100))},xc=async W=>{if(W.length<2){xe("Need at least 2 files for Batch Diff.");return}Me(`Batch Processing 0/${Math.floor(W.length/2)} pairs...`);const K=Array.from(W).sort((q,ee)=>q.name.localeCompare(ee.name,void 0,{numeric:!0}));try{for(let q=0;q<K.length-1;q+=2){const ee=K[q],we=K[q+1];Me(`Batch Processing Pair ${Math.floor(q/2)+1}/${Math.floor(K.length/2)}: ${ee.name} & ${we.name}`);const ve=await ee.arrayBuffer(),Ae=await we.arrayBuffer(),$e=await ng(ve,Ae,!1,!1),ze=Cd($e.width,$e.height,$e.rawData),Ce=new Blob([ze],{type:"image/x-adobe-dng"}),Ue=URL.createObjectURL(Ce),lt=document.createElement("a");lt.href=Ue,lt.download=`Diff_${ee.name}_${we.name}.dng`,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),URL.revokeObjectURL(Ue)}}catch(q){console.error("FFT Batch Error",q),xe("Batch Processing Failed: "+q.message)}finally{Me(null)}},_e=async W=>{if(W.length<1)return;const K=Array.from(W).sort((q,ee)=>q.name.localeCompare(ee.name,void 0,{numeric:!0}));O(K),await Wi(K[0],!0)},ct=async()=>{Ee(!0);const W=128,K=W,q=W,ee=K*q,we=new Uint16Array(ee),ve=He=>{const vt=He/Yn+z;return Math.sin(2*Math.PI*vt)>=0?1:0},Ae=32,$e=qn*.5,ze=Math.max(1e-4,qn/Ae);for(let He=0;He<q;He++){let vt=0;const wr=He+.5-$e;for(let Ht=0;Ht<Ae;Ht++){const wn=wr+(Ht+.5)*ze;vt+=ve(wn)}const Xr=vt/Ae,$t=Math.round(Xr*65535);for(let Ht=0;Ht<K;Ht++)we[He*K+Ht]=$t}const Ce=new ImageData(dn,dn),Ue=dn/K,lt=qn/2;for(let He=0;He<dn;He++){const vt=He/Ue,Ut=Math.floor(vt),wr=vt-Ut,Xr=wr>=.5-lt&&wr<.5+lt;for(let $t=0;$t<dn;$t++){const Ht=$t/Ue,wn=Math.floor(Ht),cn=Ht-wn,Lo=cn>=.5-lt&&cn<.5+lt,Ir=(He*dn+$t)*4;if(wn>=K||Ut>=q){Ce.data[Ir]=30,Ce.data[Ir+1]=34,Ce.data[Ir+2]=40,Ce.data[Ir+3]=255;continue}if(Xr&&Lo){const Hi=we[Ut*K+wn],Bo=Math.round(Hi/257);Ce.data[Ir]=Bo,Ce.data[Ir+1]=Bo,Ce.data[Ir+2]=Bo,Ce.data[Ir+3]=255}else Ce.data[Ir]=30,Ce.data[Ir+1]=34,Ce.data[Ir+2]=40,Ce.data[Ir+3]=255}}const St=new ImageData(dn,dn),zt=q/dn;for(let He=0;He<dn;He++){const vt=(He+.5)*zt,wr=ve(vt)>.5?255:0,Xr=He*dn*4;for(let $t=0;$t<dn;$t++){const Ht=Xr+$t*4;St.data[Ht]=wr,St.data[Ht+1]=wr,St.data[Ht+2]=wr,St.data[Ht+3]=255}}const br=Cd(K,q,we),Nr=new File([br],"pattern_test.dng",{type:"image/x-adobe-dng"}),tr=Date.now().toString();try{const{previewBlob:He,analysisData:vt}=await Fo(br.slice(0)),Ut=await u2(br.slice(0),Y),wr=l5(Ut,dn,dn),Xr=URL.createObjectURL(He),$t=new Image;$t.src=Xr,await new Promise(wn=>{$t.onload=()=>wn()}),await i5(tr,br);const Ht={id:tr,fileName:"pattern_test.dng",file:Nr,imageElement:$t,rawImageData:vt,rawFileBuffer:br,renderedRawImageData:wr,referenceImageData:St,sampledImageData:Ce,exifData:null,isThreePlane:!1,previewUrl:Xr,displaySettings:Y,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(M==null?void 0:M.name)==="pattern_test.dng"?ln(Ht):k(wn=>{const cn=[...wn,Ht];return C(cn.length-1),cn})}catch(He){console.error("Error generating pattern:",He),xe(`Error generating pattern: ${He.message}`)}Ee(!1),Me(null)},ut=()=>{ar(!0)},ft=()=>{ar(!1),B("sampled"),Me("Generating..."),setTimeout(()=>ct(),50)},Hr=j.useRef({period:Yn,fill:qn,phase:z});j.useEffect(()=>{(M==null?void 0:M.name)==="pattern_test.dng"&&(Hr.current.period!==Yn||Hr.current.fill!==qn||Hr.current.phase!==z)&&(Hr.current={period:Yn,fill:qn,phase:z},ct())},[Yn,qn,z,M]);const $n=j.useCallback(W=>{if(ln({displaySettings:W}),!D)return;Ee(!0),kt.current&&kt.current.terminate();const K=new Worker(new URL("/assets/renderWorker-D73_7lpj.js",import.meta.url),{type:"module"});kt.current=K,K.onmessage=q=>{const{success:ee,imageData:we,error:ve}=q.data;if(ee){let Ae=we;(M==null?void 0:M.name)==="pattern_test.dng"&&(Ae=l5(we,dn,dn)),ln({renderedRawImageData:Ae})}else xe(ve||"Unknown worker error");Ee(!1),K.terminate(),kt.current=null},K.postMessage({buffer:D.slice(0),settings:W})},[D,M,ln]),ca=async(W,K)=>{Me("Re-sampling X-Trans with new Phase...");try{const ee=(await Qf(K,W.x,W.y)).dngBuffer,we=await Fo(ee),ve=URL.createObjectURL(we.previewBlob),Ae=new Image;Ae.src=ve,await new Promise($e=>{Ae.onload=()=>$e()}),N!=null&&N.previewUrl&&URL.revokeObjectURL(N.previewUrl),ln({rawFileBuffer:ee,rawImageData:we.analysisData,previewUrl:ve,imageElement:Ae,xtransPhase:W}),J(null)}catch(q){console.error("X-Trans Phase Update Failed",q),xe("Phase Update Failed: "+q.message)}finally{Me(null)}},pi=W=>{if(!N||!N.originalRawFileBuffer||!N.isXTransConverted)return;const K={...N.xtransPhase,...W};ca(K,N.originalRawFileBuffer)},Vi=j.useCallback(async W=>{if(N)if(W){if(N.isXTransConverted)return;const K=N.originalRawFileBuffer||N.rawFileBuffer;if(!K)return;Me("Converting X-Trans to Pseudo-Bayer DNG...");try{const q=N.xtransPhase||{x:0,y:0},we=(await Qf(K,q.x,q.y)).dngBuffer,ve=await Fo(we),Ae=URL.createObjectURL(ve.previewBlob),$e=new Image;$e.src=Ae,await new Promise(ze=>{$e.onload=()=>ze()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),ln({rawFileBuffer:we,rawImageData:ve.analysisData,previewUrl:Ae,imageElement:$e,isXTransConverted:!0,originalRawFileBuffer:K}),J(null)}catch(q){console.error("X-Trans Conversion Failed",q),xe("Failed to convert X-Trans: "+q.message)}finally{Me(null)}}else{if(!N.isXTransConverted)return;const K=N.originalRawFileBuffer;if(!K){xe("Original X-Trans buffer lost. Cannot revert.");return}Me("Reverting to Native X-Trans...");try{const q=await Fo(K),ee=URL.createObjectURL(q.previewBlob),we=new Image;we.src=ee,await new Promise(ve=>{we.onload=()=>ve()}),N.previewUrl&&URL.revokeObjectURL(N.previewUrl),ln({rawFileBuffer:K,rawImageData:q.analysisData,previewUrl:ee,imageElement:we,isXTransConverted:!1}),J(null)}catch(q){console.error("X-Trans Revert Failed",q),xe("Failed to revert X-Trans: "+q.message)}finally{Me(null)}}},[N,ln]),_a=W=>{if(Qe.current){const K=Qe.current,{width:q,height:ee}=K.getBoundingClientRect(),we=q/2,ve=ee/2,Ae=W/re,$e=we-(we-G.x)*Ae,ze=ve-(ve-G.y)*Ae;he({x:$e,y:ze})}Te(W)},er=W=>{if(!W)return;if(!$){J(null);return}if(Cr){W.w>0&&W.h>0&&Jt(q=>[...q,W]);return}X&&ce(!1);const K=zo($.data,$.width,$.height,W.x,W.y,W.w,W.h);J(K)},P1=W=>{V(W),er(W)},bc=()=>{et(W=>W==="pan"?"select":"pan")},Nf=(W,K,q)=>{Jt(ee=>{if(ee.length===0)return ee;if(W==="move")return ee.map(we=>({...we,x:we.x+K,y:we.y+q}));if(W==="scale"){const we=ee.reduce((Ae,$e)=>Ae+$e.x+$e.w/2,0)/ee.length,ve=ee.reduce((Ae,$e)=>Ae+$e.y+$e.h/2,0)/ee.length;return ee.map(Ae=>{const $e=Ae.x+Ae.w/2,ze=Ae.y+Ae.h/2,Ce=we+($e-we)*K,Ue=ve+(ze-ve)*q,lt=Ae.w*K,St=Ae.h*q;return{...Ae,x:Ce-lt/2,y:Ue-St/2,w:lt,h:St}})}return ee})},N1=()=>{if(st.length===0){xe("No ROIs to save.");return}let W=`Index,X,Y,W,H,Orientation
`;st.forEach((we,ve)=>{W+=`${ve+1},${we.x.toFixed(2)},${we.y.toFixed(2)},${we.w.toFixed(2)},${we.h.toFixed(2)},${we.ori||0}
`});const K=new Blob([W],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(K),ee=document.createElement("a");ee.setAttribute("href",q),ee.setAttribute("download",`sfr_plate_template_${Date.now()}.csv`),document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(q)},kN=W=>{if(!W||W.length===0){xe("No valid ROIs found in file.");return}Jt(K=>[...K,...W])},O1=W=>{if(st.length===0){xe("ROIs ");return}if(!$||Y.renderMode!=="advanced-zero-dep"){xe("Advanced Zero-Dep (Unmixed) mode required for scalar SFR calc.");return}Me("Computing Batch SFR..."),setTimeout(()=>{try{const K=[];for(const q of st){const ee=vx($,q,Y),we=pv(ee.data,ee.width,ee.height,{x:0,y:0,w:ee.width,h:ee.height});if(we){const ve=W.useNR?-1:12,Ae=xN([we],ve,null,W.useDeshading);Ae&&Ae.mtf50!==null&&K.push({x:q.x+q.w/2,y:q.y+q.h/2,mtf50:Ae.mtf50,orientation:we.orientation})}}if(K.length>0){const q=K.map(ee=>`{${ee.x.toFixed(1)},${ee.y.toFixed(1)},${ee.mtf50.toFixed(4)},${ee.orientation}}`).join("");navigator.clipboard.writeText(q).then(()=>alert(`Computed ${K.length}/${st.length} ROIs. Copied results to clipboard.`)).catch(ee=>xe("Failed to copy results: "+ee))}else xe("Failed to compute valid SFR for any selected ROIs.")}catch(K){xe("Batch Compute Failed: "+K.message)}finally{Me(null)}},100)},SN=W=>{if(bn===0||bn>4)return;const K=[...Na,W];Kn(K),bn===4?(jN(K),hi(0)):hi(bn+1)},M1=(W,K,q,ee)=>{const we=W[0],ve=W[1],Ae=W[2],$e=W[3],ze=K/2,Ce=[];for(let Ue=0;Ue<q;Ue++){const lt=q>1?Ue/(q-1):.5;for(let St=0;St<ee;St++){const zt=ee>1?St/(ee-1):.5,br=we.x*(1-zt)+ve.x*zt,Nr=we.y*(1-zt)+ve.y*zt,tr=Ae.x*(1-zt)+$e.x*zt,He=Ae.y*(1-zt)+$e.y*zt,vt=br*(1-lt)+tr*lt,Ut=Nr*(1-lt)+He*lt,wr=vt-ze,Xr=Ut-ze;Ce.push({x:wr,y:Xr,w:K,h:K})}}return Ce},jN=W=>{!$||!N||(Me("Calculating DR Lab Grid..."),setTimeout(()=>{try{const K=M1(W,Ro,la,Tn);Gi(K);const ve=[...[`#BlackLevel: ${(Y.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${$.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Ae=`img${N.fileName||"image"}`;K.forEach((lt,St)=>{const zt=Math.floor(St/Tn)+1,br=St%Tn+1,Nr=zo($.data,$.width,$.height,lt.x,lt.y,lt.w,lt.h),tr=Nr.means,He=Nr.stdDevs,vt=`${Ae},${zt},${br},${tr[0].toFixed(4)},${tr[1].toFixed(4)},${tr[2].toFixed(4)},${tr[3].toFixed(4)},${He[0].toFixed(4)},${He[1].toFixed(4)},${He[2].toFixed(4)},${He[3].toFixed(4)}`;ve.push(vt)});const $e=ve.join(`
`),ze=new Blob([$e],{type:"text/csv;charset=utf-8;"}),Ce=URL.createObjectURL(ze),Ue=document.createElement("a");Ue.setAttribute("href",Ce),Ue.setAttribute("download","dr_lab_results.csv"),document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue),URL.revokeObjectURL(Ce),Kn([])}catch(K){xe("DR Lab Error: "+K.message)}finally{Me(null)}},100))},CN=async(W,K)=>{if(Na.length<4&&Oa.length<1){xe("Please mark the grid on an image first before running batch processing.");return}let q=Oa;if(q.length===0&&Na.length===4&&(q=M1(Na,Ro,la,Tn)),q.length===0){xe("No grid definitions found. Mark corners first.");return}Me(K==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const we=(Y.blackLevel||[0,0,0,0]).join(","),ve=$?$.height:0,$e=[...[`#BlackLevel: ${we}`,`#ImageHeight: ${ve}`,K==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],ze=Array.from(W).sort((St,zt)=>St.name.localeCompare(zt.name,void 0,{numeric:!0}));if(K==="pair"&&ze.length<2){xe("Need at least 2 files for Pair processing."),Me(null);return}const Ce=E.current,Ue=(Ce==null?void 0:Ce.isXTransConverted)||!1,lt=(Ce==null?void 0:Ce.xtransPhase)||{x:0,y:0};try{const St=async He=>{let vt=await He.arrayBuffer();return Ue&&(vt=(await Qf(vt,lt.x,lt.y)).dngBuffer),vt};if(K==="single")for(let He=0;He<ze.length;He++){const vt=ze[He];Me(`Processing ${He+1}/${ze.length}: ${vt.name}...`);const Ut=await St(vt),wr=await o0(Ut),Xr=`img${vt.name}`;q.forEach(($t,Ht)=>{const wn=Math.floor(Ht/la)+1,cn=Ht%Tn+1,Lo=zo(wr.data,wr.width,wr.height,$t.x,$t.y,$t.w,$t.h),Ir=Lo.means,Hi=Lo.stdDevs,Bo=`${Xr},${wn},${cn},${Ir[0].toFixed(4)},${Ir[1].toFixed(4)},${Ir[2].toFixed(4)},${Ir[3].toFixed(4)},${Hi[0].toFixed(4)},${Hi[1].toFixed(4)},${Hi[2].toFixed(4)},${Hi[3].toFixed(4)}`;$e.push(Bo)})}else for(let He=0;He<ze.length-1;He+=2){const vt=ze[He],Ut=ze[He+1],wr=`img${vt.name} & ${Ut.name}`;Me(`Processing Pair ${Math.floor(He/2)+1}/${Math.floor(ze.length/2)}: ${vt.name} & ${Ut.name}...`);const Xr=await St(vt),$t=await o0(Xr),Ht=await St(Ut),wn=await ng(Xr,Ht,!1,!0);q.forEach((cn,Lo)=>{const Ir=Math.floor(Lo/la)+1,Hi=Lo%Tn+1,Bo=zo($t.data,$t.width,$t.height,cn.x,cn.y,cn.w,cn.h),RN=zo(wn.rawData,wn.width,wn.height,cn.x,cn.y,cn.w,cn.h),Mf=Bo.means,_f=RN.stdDevs,LN=`${wr},${Ir},${Hi},${Mf[0].toFixed(4)},${Mf[1].toFixed(4)},${Mf[2].toFixed(4)},${Mf[3].toFixed(4)},${_f[0].toFixed(4)},${_f[1].toFixed(4)},${_f[2].toFixed(4)},${_f[3].toFixed(4)}`;$e.push(LN)})}const zt=$e.join(`
`),br=new Blob([zt],{type:"text/csv;charset=utf-8;"}),Nr=URL.createObjectURL(br),tr=document.createElement("a");tr.href=Nr,tr.setAttribute("download",`dr_lab_batch_${K}_${new Date().getTime()}.csv`),document.body.appendChild(tr),tr.click(),document.body.removeChild(tr),URL.revokeObjectURL(Nr)}catch(St){console.error("Batch Error",St),xe("Batch Processing Failed: "+St.message)}finally{Me(null)}},PN=()=>{Be([]),Xe(1)},NN=W=>{if(!ht||at===0)return;const K=[...De,W];Be(K),K.length===4&&$?(_1(K,yt),Xe(0)):Xe(q=>q+1)},_1=(W,K)=>{$&&(Me("Analyzing Color Chart..."),setTimeout(()=>{try{const q=Zte(W[0],W[1],W[2],W[3],$.width,$.height,K);wt(q);const we=q.map((ve,Ae)=>{const $e=zo($.data,$.width,$.height,ve.x,ve.y,ve.w,ve.h);return{id:Ae,rawMeans:$e.means,refRGB:[0,0,0]}}).map((ve,Ae)=>({...ve,refRGB:hv[Ae]||[0,0,0]}));ir(we),Ve(!0)}catch(q){xe("Color Lab Error: "+q.message)}finally{Me(null)}},100))},ON=W=>{sr(W),De.length===4&&_1(De,W)},MN=()=>{Ve(!1)},_N=()=>{I||rt("No EXIF data found. The file might not contain metadata or it was stripped during processing."),Oe(!0)},AN=async W=>{Me("Parsing PTC Data...");const K=[];let q=null;try{for(let ee=0;ee<W.length;ee++){const ve=(await W[ee].text()).split(`
`);let Ae=!0;for(const $e of ve){const ze=$e.trim();if(!ze)continue;if(ze.startsWith("#")){if(ze.includes("BlackLevel:")){const $t=ze.split(":")[1].trim().split(",");if($t.length>=4){const Ht=$t.map(Number);q||(q={}),q.blackLevel=Ht}}if(ze.includes("ImageHeight:")){const $t=parseInt(ze.split(":")[1].trim());isNaN($t)||(q||(q={}),q.height=$t)}continue}if(Ae){ze.toLowerCase().includes("mean")&&ze.toLowerCase().includes("std")&&(Ae=!1);continue}const Ce=ze.split(",");if(Ce.length<5)continue;let Ue=0,lt;isNaN(parseFloat(Ce[0]))&&(lt=Ce[0],Ue=1);const St=parseInt(Ce[Ue]),zt=parseInt(Ce[Ue+1]),br=parseFloat(Ce[Ue+2]),Nr=parseFloat(Ce[Ue+3]),tr=parseFloat(Ce[Ue+4]),He=parseFloat(Ce[Ue+5]),vt=parseFloat(Ce[Ue+6]),Ut=parseFloat(Ce[Ue+7]),wr=parseFloat(Ce[Ue+8]),Xr=parseFloat(Ce[Ue+9]);!isNaN(br)&&!isNaN(vt)&&K.push({channel:"R",mean:br,std:vt,filename:lt,row:St,col:zt}),!isNaN(Nr)&&!isNaN(Ut)&&K.push({channel:"G1",mean:Nr,std:Ut,filename:lt,row:St,col:zt}),!isNaN(tr)&&!isNaN(wr)&&K.push({channel:"G2",mean:tr,std:wr,filename:lt,row:St,col:zt}),!isNaN(He)&&!isNaN(Xr)&&K.push({channel:"B",mean:He,std:Xr,filename:lt,row:St,col:zt})}}Xn(K),Ka(q),f(!0)}catch(ee){console.error("PTC Parse Error",ee),xe("Failed to parse CSV files: "+ee.message)}finally{Me(null)}},TN=()=>{if(!D||!N)return;const W=new Blob([D],{type:"image/x-adobe-dng"}),K=URL.createObjectURL(W),q=document.createElement("a");q.href=K;const ee=N.fileName||"image.dng",we=ee.toLowerCase().endsWith(".dng")?ee:ee.replace(/\.[^/.]+$/,"")+".dng";q.download=we,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(K)},EN=()=>{hi(1),Kn([]),Gi([])},A1=()=>{window.open("https://github.com/y-g-jiang/y-g-jiang.github.io/blob/main/drtest.png","_blank")},$N=j.useMemo(()=>Ct?Ct.map((W,K)=>({...W,refRGB:hv[K]||[0,0,0]})):[],[Ct]),DN=()=>{$r(1),_n([]),Jt([])},IN=W=>{if(xr===0)return;const K=[...vn,W];if(_n(K),K.length===4){$r(0);try{const q=wre(K);Jt(q),O1({useNR:!0,useDeshading:!0})}catch(q){console.error("Standard Chart Gen Error",q),xe("Failed to generate chart ROIs.")}}else $r(q=>q+1)};let Of=R||_;oe==="reference"&&A?Of=A:oe==="sampled"&&T&&(Of=T);const T1=Mt||ye;return c.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[c.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:c.jsx(h_,{onLoadImage:Pf,onFileSelected:Cf,onGenerateFakeDng:ut,fileName:M?M.name:null,hasGeneratedData:(M==null?void 0:M.name)==="pattern_test.dng",viewMode:oe,onSetViewMode:B,patternPeriod:Yn,onPatternPeriodChange:pc,fillFactor:qn,onFillFactorChange:gc,patternPhase:z,onPatternPhaseChange:ne,showPatternControls:(M==null?void 0:M.name)==="pattern_test.dng",onOpenAbout:()=>Zt(!0),onShowExif:_N,bridgeStatus:v,onBridgeClick:()=>b(!0),isDrLabOpen:Et,onToggleDrLab:()=>{Qt(!Et),hi(0),Kn([]),Gi([]),dr&&Wr(!1),ht&&le(!1),bt&&en(!1),Xe(0),wt([]),Jt([]),yn(!1),$r(0)},isColorLabOpen:ht,onToggleColorLab:()=>{le(!ht),Be([]),Xe(0),wt([]),Et&&Qt(!1),dr&&Wr(!1),bt&&en(!1),Jt([]),yn(!1),$r(0)},isFftLabOpen:dr,onToggleFftLab:()=>{Wr(!dr),Et&&Qt(!1),ht&&le(!1),bt&&en(!1),Xe(0),wt([]),Jt([]),yn(!1),$r(0)},isSfrLabOpen:bt,onToggleSfrLab:()=>{en(!bt),Et&&Qt(!1),ht&&le(!1),dr&&Wr(!1),Xe(0),wt([]),Jt([]),yn(!1),$r(0)},onGenerateTestPic:A1,onPTCFilesSelected:AN,onDownloadDng:TN,isThreePlane:U,onOpenDatabase:()=>h(!0),isSidebarOpen:ue,onToggleSidebar:()=>Ie(!ue),stretchMultiplier:qe,onStretchMultiplierChange:Ot,onStretchDngExport:gr,isRawLoaded:!!$})}),c.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[c.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:Qe,children:[T1&&c.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:Mt||"Processing..."})]}),c.jsx(Fte,{isOpen:gt,onClose:()=>Zt(!1)}),c.jsx(zte,{isOpen:Le,onClose:()=>Oe(!1),data:I,fileName:M?M.name:"",warning:Re}),c.jsx(Gte,{isOpen:u,onClose:()=>f(!1),data:Io,blackLevel:Fe,imageHeight:nt,isBGGR:de,importedMetadata:Ui||void 0,theme:s,initialCameraModel:(I==null?void 0:I.Model)||"",initialISO:(I==null?void 0:I.ISO)||((E1=I==null?void 0:I.ISOSpeedRatings)==null?void 0:E1.toString())||""}),c.jsx(Kte,{isOpen:d,onClose:()=>h(!1),theme:s}),c.jsx(Yte,{isOpen:p,onClose:()=>y(!1),zIndex:200}),c.jsx(tre,{isOpen:or,onClose:MN,patchStats:$N,initialIsBGGR:de,sizeRatio:yt,onSizeChange:ON}),c.jsx(are,{isOpen:bt,isSfrLabOpen:bt,onClose:()=>{},rawImageData:$,roi:fe?{x:fe.x,y:fe.y,w:fe.width,h:fe.height}:null,zIndex:200,onFocus:yc,displaySettings:Y}),c.jsx(ore,{isOpen:m,onClose:()=>x(!1),rawImageData:$,fileName:(M==null?void 0:M.name)||"image.dng",zIndex:300,onFocus:yc}),c.jsx(bo,{isOpen:mt,onClose:()=>ar(!1),onConfirm:ft,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),c.jsx("p",{className:"text-xs text-gray-500"})]})}),c.jsx(bo,{isOpen:g,onClose:()=>b(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),b(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),c.jsx(bo,{isOpen:ot,onClose:()=>Tt(!1),onConfirm:tt,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),c.jsx("div",{onClick:()=>fr(!Lt),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Lt?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Lt?"translate-x-6":""}`})})]}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),c.jsx("div",{onClick:()=>Nt(!Vt),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Vt?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Vt?"translate-x-6":""}`})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[Lt&&!Vt&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!Lt&&Vt&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",Lt&&Vt&&"Mode: Ready-to-Use. Conventional 16-bit development.",!Lt&&!Vt&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!X&&c.jsx(Sre,{stats:fe,onClose:()=>{J(null),V(null)},onMinimize:()=>ce(!0),isBGGR:de,onToggleBGGR:H,onOpenWindow:mc,displaySettings:Y,zIndex:se,onFocus:yc,rawImageData:$}),be.map(W=>{if(W.isMinimized)return null;const K=S.find(we=>we.id===W.sessionId),q=K==null?void 0:K.rawImageData;if(!q)return null;const ee={key:W.id,isOpen:!0,onClose:()=>xp(W.id),onMinimize:()=>bp(W.id),rawImageData:q,roi:W.roi,isBGGR:W.isBGGR,zIndex:W.zIndex,onFocus:()=>En(W.id),initialPosition:W.initialPosition,initialInternalState:W.internalState,onUpdateState:we=>wp(W.id,we),stackFiles:W.stackFiles};return W.type==="histogram"?c.jsx(Ate,{...ee}):W.type==="fft"?c.jsx(Dte,{...ee,onUpdateROI:we=>kp(W.id,we)}):W.type==="quant"?c.jsx(Ite,{...ee}):W.type==="pearson"?c.jsx(Rte,{...ee}):null}),Ze&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:c.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[c.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),c.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:Ze}),c.jsx("button",{onClick:()=>xe(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!Of&&!T1&&!Ze&&c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:c.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),c.jsx(p_,{image:Of,zoom:re,pan:G,onPanChange:he,onZoomChange:_a,onSelectionChange:er,forcedSelection:ie,theme:s,touchAction:je,isMarking:bn>0||ht&&at>0||xr>0,onPointClick:W=>{bn>0?SN(W):ht&&at>0?NN(W):xr>0&&IN(W)},markers:Na,gridRects:Oa,colorLabPoints:De,colorLabRects:it,sfrRects:st}),xr>0&&vn.map((W,K)=>c.jsxs("div",{className:"absolute pointer-events-none z-30",style:{left:W.x*re+G.x,top:W.y*re+G.y,transform:"translate(-50%, -50%)"},children:[c.jsx("div",{className:"w-3 h-3 border-2 border-cyan-400 rounded-full flex items-center justify-center bg-transparent",children:c.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})}),c.jsx("div",{className:"text-[10px] font-bold text-cyan-400 absolute top-3 left-1/2 -translate-x-1/2 bg-black/50 px-1 rounded",children:K+1})]},K)),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),$&&!bn&&!ht&&!Cr&&!xr&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",c.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),Cr&&c.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-red-500 bg-black/80 px-4 py-2 rounded-full border border-red-500 animate-pulse shadow-lg",children:"Manual Batch Marking Active (Shift+Drag to add)"}),xr>0&&c.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-emerald-500 bg-black/80 px-4 py-2 rounded-full border border-emerald-500 animate-pulse shadow-lg",children:["Calibration: Click Corner ",xr,"/4"]}),ht&&at>0&&c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[De.length===0&&"Click Top-Left Corner of Chart",De.length===1&&"Click Top-Right Corner",De.length===2&&"Click Bottom-Left Corner",De.length===3&&"Click Bottom-Right Corner",De.length===4&&"Processing..."]}),c.jsx(dA,{zoom:re,onZoomChange:_a,onResetView:()=>{Te(1),he({x:0,y:0})},touchAction:je,onToggleTouchAction:bc})]}),ue&&c.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:c.jsx(aA,{rawImageData:$,displaySettings:Y,onApplyDisplaySettings:$n,onSetSelection:P1,exifData:I,isBridgeConnected:v.isConnected,isDrLabOpen:Et,drMarkingStep:bn,onStartMarking:EN,onGenerateTestPic:A1,drRoiSize:Ro,onDrRoiSizeChange:dc,drGridRows:la,onDrGridRowsChange:Ma,drGridCols:Tn,onDrGridColsChange:hc,onBatchDrLab:CN,hasDrMarkers:Oa.length>0,isFftLabOpen:dr,onProcessPair:Sp,onProcessBatchDiff:xc,onProcessStackFft:_e,onOpenCrossCalc:()=>y(!0),isThreePlane:U,onToggleXTrans:Vi,xtransPhase:Z,onXTransPhaseChange:pi,isXTransConverted:N==null?void 0:N.isXTransConverted,roiStats:fe,isBGGR:de,isColorLabOpen:ht,colorLabMarkingStep:at,onStartColorLabMarking:PN,isSfrLabOpen:bt,onOpenDngExport:()=>x(!0),sfrRectCount:st.length,isBatchMarkingMode:Cr,onToggleBatchMarking:()=>yn(!Cr),onClearBatchMarks:()=>Jt([]),onBatchCompute:O1,stdChartStep:xr,onStartStandardCalibration:DN,onSaveBatchTemplate:N1,onImportBatchTemplate:kN,onBatchTransform:Nf})}),c.jsx(hA,{theme:s,setTheme:l})]})]})},wN=document.getElementById("root");if(!wN)throw new Error("Could not find root element to mount to");const Cre=Lg.createRoot(wN);Cre.render(c.jsx(F.StrictMode,{children:c.jsx(jre,{})}));export{y_ as _};
