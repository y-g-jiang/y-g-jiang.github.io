var CO=Object.defineProperty;var OO=(e,t,r)=>t in e?CO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Mn=(e,t,r)=>OO(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r5={exports:{}},uh={},n5={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=Symbol.for("react.element"),NO=Symbol.for("react.portal"),MO=Symbol.for("react.fragment"),_O=Symbol.for("react.strict_mode"),AO=Symbol.for("react.profiler"),TO=Symbol.for("react.provider"),EO=Symbol.for("react.context"),$O=Symbol.for("react.forward_ref"),DO=Symbol.for("react.suspense"),IO=Symbol.for("react.memo"),RO=Symbol.for("react.lazy"),N1=Symbol.iterator;function LO(e){return e===null||typeof e!="object"?null:(e=N1&&e[N1]||e["@@iterator"],typeof e=="function"?e:null)}var a5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i5=Object.assign,o5={};function Xl(e,t,r){this.props=e,this.context=t,this.refs=o5,this.updater=r||a5}Xl.prototype.isReactComponent={};Xl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function s5(){}s5.prototype=Xl.prototype;function hv(e,t,r){this.props=e,this.context=t,this.refs=o5,this.updater=r||a5}var pv=hv.prototype=new s5;pv.constructor=hv;i5(pv,Xl.prototype);pv.isPureReactComponent=!0;var M1=Array.isArray,l5=Object.prototype.hasOwnProperty,gv={current:null},c5={key:!0,ref:!0,__self:!0,__source:!0};function u5(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)l5.call(t,n)&&!c5.hasOwnProperty(n)&&(a[n]=t[n]);var s=arguments.length-2;if(s===1)a.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:df,type:e,key:i,ref:o,props:a,_owner:gv.current}}function BO(e,t){return{$$typeof:df,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mv(e){return typeof e=="object"&&e!==null&&e.$$typeof===df}function FO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var _1=/\/+/g;function Sp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FO(""+e.key):t.toString(36)}function pd(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case df:case NO:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Sp(o,0):n,M1(a)?(r="",e!=null&&(r=e.replace(_1,"$&/")+"/"),pd(a,t,r,"",function(u){return u})):a!=null&&(mv(a)&&(a=BO(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(_1,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",M1(e))for(var s=0;s<e.length;s++){i=e[s];var l=n+Sp(i,s);o+=pd(i,t,r,l,a)}else if(l=LO(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=n+Sp(i,s++),o+=pd(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ef(e,t,r){if(e==null)return e;var n=[],a=0;return pd(e,n,"","",function(i){return t.call(r,i,a++)}),n}function zO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dn={current:null},gd={transition:null},UO={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:gd,ReactCurrentOwner:gv};function f5(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Ef,forEach:function(e,t,r){Ef(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ef(e,function(){t++}),t},toArray:function(e){return Ef(e,function(t){return t})||[]},only:function(e){if(!mv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=Xl;at.Fragment=MO;at.Profiler=AO;at.PureComponent=hv;at.StrictMode=_O;at.Suspense=DO;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UO;at.act=f5;at.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=i5({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=gv.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)l5.call(t,l)&&!c5.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:df,type:e.type,key:a,ref:i,props:n,_owner:o}};at.createContext=function(e){return e={$$typeof:EO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:TO,_context:e},e.Consumer=e};at.createElement=u5;at.createFactory=function(e){var t=u5.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:$O,render:e}};at.isValidElement=mv;at.lazy=function(e){return{$$typeof:RO,_payload:{_status:-1,_result:e},_init:zO}};at.memo=function(e,t){return{$$typeof:IO,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=gd.transition;gd.transition={};try{e()}finally{gd.transition=t}};at.unstable_act=f5;at.useCallback=function(e,t){return Dn.current.useCallback(e,t)};at.useContext=function(e){return Dn.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return Dn.current.useDeferredValue(e)};at.useEffect=function(e,t){return Dn.current.useEffect(e,t)};at.useId=function(){return Dn.current.useId()};at.useImperativeHandle=function(e,t,r){return Dn.current.useImperativeHandle(e,t,r)};at.useInsertionEffect=function(e,t){return Dn.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return Dn.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return Dn.current.useMemo(e,t)};at.useReducer=function(e,t,r){return Dn.current.useReducer(e,t,r)};at.useRef=function(e){return Dn.current.useRef(e)};at.useState=function(e){return Dn.current.useState(e)};at.useSyncExternalStore=function(e,t,r){return Dn.current.useSyncExternalStore(e,t,r)};at.useTransition=function(){return Dn.current.useTransition()};at.version="18.3.1";n5.exports=at;var j=n5.exports;const F=Wt(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GO=j,WO=Symbol.for("react.element"),VO=Symbol.for("react.fragment"),HO=Object.prototype.hasOwnProperty,XO=GO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KO={key:!0,ref:!0,__self:!0,__source:!0};function d5(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)HO.call(t,n)&&!KO.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:WO,type:e,key:i,ref:o,props:a,_owner:XO.current}}uh.Fragment=VO;uh.jsx=d5;uh.jsxs=d5;r5.exports=uh;var c=r5.exports,Rg={},h5={exports:{}},fa={},p5={exports:{}},g5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,L){var V=R.length;R.push(L);e:for(;0<V;){var ee=V-1>>>1,G=R[ee];if(0<a(G,L))R[ee]=L,R[V]=G,V=ee;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var L=R[0],V=R.pop();if(V!==L){R[0]=V;e:for(var ee=0,G=R.length,W=G>>>1;ee<W;){var ne=2*(ee+1)-1,Q=R[ne],B=ne+1,ie=R[B];if(0>a(Q,V))B<G&&0>a(ie,Q)?(R[ee]=ie,R[B]=V,ee=B):(R[ee]=Q,R[ne]=V,ee=ne);else if(B<G&&0>a(ie,V))R[ee]=ie,R[B]=V,ee=B;else break e}}return L}function a(R,L){var V=R.sortIndex-L.sortIndex;return V!==0?V:R.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],f=1,d=null,h=3,p=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=R)n(u),L.sortIndex=L.expirationTime,t(l,L);else break;L=r(u)}}function S(R){if(y=!1,v(R),!m)if(r(l)!==null)m=!0,I(b);else{var L=r(u);L!==null&&A(S,L.startTime-R)}}function b(R,L){m=!1,y&&(y=!1,x(C),C=-1),p=!0;var V=h;try{for(v(L),d=r(l);d!==null&&(!(d.expirationTime>L)||R&&!E());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,h=d.priorityLevel;var G=ee(d.expirationTime<=L);L=e.unstable_now(),typeof G=="function"?d.callback=G:d===r(l)&&n(l),v(L)}else n(l);d=r(l)}if(d!==null)var W=!0;else{var ne=r(u);ne!==null&&A(S,ne.startTime-L),W=!1}return W}finally{d=null,h=V,p=!1}}var k=!1,P=null,C=-1,N=5,O=-1;function E(){return!(e.unstable_now()-O<N)}function M(){if(P!==null){var R=e.unstable_now();O=R;var L=!0;try{L=P(!0,R)}finally{L?_():(k=!1,P=null)}}else k=!1}var _;if(typeof g=="function")_=function(){g(M)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,$=T.port2;T.port1.onmessage=M,_=function(){$.postMessage(null)}}else _=function(){w(M,0)};function I(R){P=R,k||(k=!0,_())}function A(R,L){C=w(function(){R(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,I(b))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var V=h;h=L;try{return R()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,L){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=h;h=R;try{return L()}finally{h=V}},e.unstable_scheduleCallback=function(R,L,V){var ee=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ee+V:ee):V=ee,R){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,R={id:f++,callback:L,priorityLevel:R,startTime:V,expirationTime:G,sortIndex:-1},V>ee?(R.sortIndex=V,t(u,R),r(l)===null&&R===r(u)&&(y?(x(C),C=-1):y=!0,A(S,V-ee))):(R.sortIndex=G,t(l,R),m||p||(m=!0,I(b))),R},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(R){var L=h;return function(){var V=h;h=L;try{return R.apply(this,arguments)}finally{h=V}}}})(g5);p5.exports=g5;var YO=p5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qO=j,ua=YO;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m5=new Set,uu={};function Ns(e,t){pl(e,t),pl(e+"Capture",t)}function pl(e,t){for(uu[e]=t,e=0;e<t.length;e++)m5.add(t[e])}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lg=Object.prototype.hasOwnProperty,ZO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A1={},T1={};function QO(e){return Lg.call(T1,e)?!0:Lg.call(A1,e)?!1:ZO.test(e)?T1[e]=!0:(A1[e]=!0,!1)}function JO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eN(e,t,r,n){if(t===null||typeof t>"u"||JO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function In(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){cn[e]=new In(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];cn[t]=new In(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){cn[e]=new In(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){cn[e]=new In(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){cn[e]=new In(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){cn[e]=new In(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){cn[e]=new In(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){cn[e]=new In(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){cn[e]=new In(e,5,!1,e.toLowerCase(),null,!1,!1)});var yv=/[\-:]([a-z])/g;function vv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yv,vv);cn[t]=new In(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yv,vv);cn[t]=new In(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yv,vv);cn[t]=new In(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){cn[e]=new In(e,1,!1,e.toLowerCase(),null,!1,!1)});cn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){cn[e]=new In(e,1,!1,e.toLowerCase(),null,!0,!0)});function xv(e,t,r,n){var a=cn.hasOwnProperty(t)?cn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eN(t,r,a,n)&&(r=null),n||a===null?QO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Vi=qO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$f=Symbol.for("react.element"),Us=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),bv=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),y5=Symbol.for("react.provider"),v5=Symbol.for("react.context"),wv=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),zg=Symbol.for("react.suspense_list"),kv=Symbol.for("react.memo"),Qi=Symbol.for("react.lazy"),x5=Symbol.for("react.offscreen"),E1=Symbol.iterator;function wc(e){return e===null||typeof e!="object"?null:(e=E1&&e[E1]||e["@@iterator"],typeof e=="function"?e:null)}var pr=Object.assign,jp;function zc(e){if(jp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);jp=t&&t[1]||""}return`
`+jp+e}var Pp=!1;function Cp(e,t){if(!e||Pp)return"";Pp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{Pp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zc(e):""}function tN(e){switch(e.tag){case 5:return zc(e.type);case 16:return zc("Lazy");case 13:return zc("Suspense");case 19:return zc("SuspenseList");case 0:case 2:case 15:return e=Cp(e.type,!1),e;case 11:return e=Cp(e.type.render,!1),e;case 1:return e=Cp(e.type,!0),e;default:return""}}function Ug(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gs:return"Fragment";case Us:return"Portal";case Bg:return"Profiler";case bv:return"StrictMode";case Fg:return"Suspense";case zg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case v5:return(e.displayName||"Context")+".Consumer";case y5:return(e._context.displayName||"Context")+".Provider";case wv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kv:return t=e.displayName||null,t!==null?t:Ug(e.type)||"Memo";case Qi:t=e._payload,e=e._init;try{return Ug(e(t))}catch{}}return null}function rN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ug(t);case 8:return t===bv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Po(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function b5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nN(e){var t=b5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Df(e){e._valueTracker||(e._valueTracker=nN(e))}function w5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=b5(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Nd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gg(e,t){var r=t.checked;return pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function $1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Po(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function k5(e,t){t=t.checked,t!=null&&xv(e,"checked",t,!1)}function Wg(e,t){k5(e,t);var r=Po(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vg(e,t.type,Po(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function D1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vg(e,t,r){(t!=="number"||Nd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Uc=Array.isArray;function nl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Po(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Hg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function I1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ce(92));if(Uc(r)){if(1<r.length)throw Error(ce(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Po(r)}}function S5(e,t){var r=Po(t.value),n=Po(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function R1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function j5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?j5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var If,P5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(If=If||document.createElement("div"),If.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=If.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Xc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aN=["Webkit","ms","Moz","O"];Object.keys(Xc).forEach(function(e){aN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xc[t]=Xc[e]})});function C5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Xc.hasOwnProperty(e)&&Xc[e]?(""+t).trim():t+"px"}function O5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=C5(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var iN=pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kg(e,t){if(t){if(iN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qg=null;function Sv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zg=null,al=null,il=null;function L1(e){if(e=gf(e)){if(typeof Zg!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=gh(t),Zg(e.stateNode,e.type,t))}}function N5(e){al?il?il.push(e):il=[e]:al=e}function M5(){if(al){var e=al,t=il;if(il=al=null,L1(e),t)for(e=0;e<t.length;e++)L1(t[e])}}function _5(e,t){return e(t)}function A5(){}var Op=!1;function T5(e,t,r){if(Op)return e(t,r);Op=!0;try{return _5(e,t,r)}finally{Op=!1,(al!==null||il!==null)&&(A5(),M5())}}function du(e,t){var r=e.stateNode;if(r===null)return null;var n=gh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ce(231,t,typeof r));return r}var Qg=!1;if(Li)try{var kc={};Object.defineProperty(kc,"passive",{get:function(){Qg=!0}}),window.addEventListener("test",kc,kc),window.removeEventListener("test",kc,kc)}catch{Qg=!1}function oN(e,t,r,n,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Kc=!1,Md=null,_d=!1,Jg=null,sN={onError:function(e){Kc=!0,Md=e}};function lN(e,t,r,n,a,i,o,s,l){Kc=!1,Md=null,oN.apply(sN,arguments)}function cN(e,t,r,n,a,i,o,s,l){if(lN.apply(this,arguments),Kc){if(Kc){var u=Md;Kc=!1,Md=null}else throw Error(ce(198));_d||(_d=!0,Jg=u)}}function Ms(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function E5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function B1(e){if(Ms(e)!==e)throw Error(ce(188))}function uN(e){var t=e.alternate;if(!t){if(t=Ms(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return B1(a),e;if(i===n)return B1(a),t;i=i.sibling}throw Error(ce(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?e:t}function $5(e){return e=uN(e),e!==null?D5(e):null}function D5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=D5(e);if(t!==null)return t;e=e.sibling}return null}var I5=ua.unstable_scheduleCallback,F1=ua.unstable_cancelCallback,fN=ua.unstable_shouldYield,dN=ua.unstable_requestPaint,Cr=ua.unstable_now,hN=ua.unstable_getCurrentPriorityLevel,jv=ua.unstable_ImmediatePriority,R5=ua.unstable_UserBlockingPriority,Ad=ua.unstable_NormalPriority,pN=ua.unstable_LowPriority,L5=ua.unstable_IdlePriority,fh=null,ai=null;function gN(e){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(fh,e,void 0,(e.current.flags&128)===128)}catch{}}var Va=Math.clz32?Math.clz32:vN,mN=Math.log,yN=Math.LN2;function vN(e){return e>>>=0,e===0?32:31-(mN(e)/yN|0)|0}var Rf=64,Lf=4194304;function Gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Td(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var s=o&~a;s!==0?n=Gc(s):(i&=o,i!==0&&(n=Gc(i)))}else o=r&~a,o!==0?n=Gc(o):i!==0&&(n=Gc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Va(t),a=1<<r,n|=e[r],t&=~a;return n}function xN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bN(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Va(i),s=1<<o,l=a[o];l===-1?(!(s&r)||s&n)&&(a[o]=xN(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function em(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function B5(){var e=Rf;return Rf<<=1,!(Rf&4194240)&&(Rf=64),e}function Np(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Va(t),e[t]=r}function wN(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Va(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Pv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Va(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var At=0;function F5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var z5,Cv,U5,G5,W5,tm=!1,Bf=[],go=null,mo=null,yo=null,hu=new Map,pu=new Map,to=[],kN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z1(e,t){switch(e){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":hu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pu.delete(t.pointerId)}}function Sc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=gf(t),t!==null&&Cv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function SN(e,t,r,n,a){switch(t){case"focusin":return go=Sc(go,e,t,r,n,a),!0;case"dragenter":return mo=Sc(mo,e,t,r,n,a),!0;case"mouseover":return yo=Sc(yo,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return hu.set(i,Sc(hu.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,pu.set(i,Sc(pu.get(i)||null,e,t,r,n,a)),!0}return!1}function V5(e){var t=qo(e.target);if(t!==null){var r=Ms(t);if(r!==null){if(t=r.tag,t===13){if(t=E5(r),t!==null){e.blockedOn=t,W5(e.priority,function(){U5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function md(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=rm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);qg=n,r.target.dispatchEvent(n),qg=null}else return t=gf(r),t!==null&&Cv(t),e.blockedOn=r,!1;t.shift()}return!0}function U1(e,t,r){md(e)&&r.delete(t)}function jN(){tm=!1,go!==null&&md(go)&&(go=null),mo!==null&&md(mo)&&(mo=null),yo!==null&&md(yo)&&(yo=null),hu.forEach(U1),pu.forEach(U1)}function jc(e,t){e.blockedOn===t&&(e.blockedOn=null,tm||(tm=!0,ua.unstable_scheduleCallback(ua.unstable_NormalPriority,jN)))}function gu(e){function t(a){return jc(a,e)}if(0<Bf.length){jc(Bf[0],e);for(var r=1;r<Bf.length;r++){var n=Bf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(go!==null&&jc(go,e),mo!==null&&jc(mo,e),yo!==null&&jc(yo,e),hu.forEach(t),pu.forEach(t),r=0;r<to.length;r++)n=to[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<to.length&&(r=to[0],r.blockedOn===null);)V5(r),r.blockedOn===null&&to.shift()}var ol=Vi.ReactCurrentBatchConfig,Ed=!0;function PN(e,t,r,n){var a=At,i=ol.transition;ol.transition=null;try{At=1,Ov(e,t,r,n)}finally{At=a,ol.transition=i}}function CN(e,t,r,n){var a=At,i=ol.transition;ol.transition=null;try{At=4,Ov(e,t,r,n)}finally{At=a,ol.transition=i}}function Ov(e,t,r,n){if(Ed){var a=rm(e,t,r,n);if(a===null)Lp(e,t,n,$d,r),z1(e,n);else if(SN(a,e,t,r,n))n.stopPropagation();else if(z1(e,n),t&4&&-1<kN.indexOf(e)){for(;a!==null;){var i=gf(a);if(i!==null&&z5(i),i=rm(e,t,r,n),i===null&&Lp(e,t,n,$d,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Lp(e,t,n,null,r)}}var $d=null;function rm(e,t,r,n){if($d=null,e=Sv(n),e=qo(e),e!==null)if(t=Ms(e),t===null)e=null;else if(r=t.tag,r===13){if(e=E5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $d=e,null}function H5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hN()){case jv:return 1;case R5:return 4;case Ad:case pN:return 16;case L5:return 536870912;default:return 16}default:return 16}}var ao=null,Nv=null,yd=null;function X5(){if(yd)return yd;var e,t=Nv,r=t.length,n,a="value"in ao?ao.value:ao.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return yd=a.slice(e,1<n?1-n:void 0)}function vd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ff(){return!0}function G1(){return!1}function da(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ff:G1,this.isPropagationStopped=G1,this}return pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ff)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ff)},persist:function(){},isPersistent:Ff}),t}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mv=da(Kl),pf=pr({},Kl,{view:0,detail:0}),ON=da(pf),Mp,_p,Pc,dh=pr({},pf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pc&&(Pc&&e.type==="mousemove"?(Mp=e.screenX-Pc.screenX,_p=e.screenY-Pc.screenY):_p=Mp=0,Pc=e),Mp)},movementY:function(e){return"movementY"in e?e.movementY:_p}}),W1=da(dh),NN=pr({},dh,{dataTransfer:0}),MN=da(NN),_N=pr({},pf,{relatedTarget:0}),Ap=da(_N),AN=pr({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),TN=da(AN),EN=pr({},Kl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$N=da(EN),DN=pr({},Kl,{data:0}),V1=da(DN),IN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LN[e])?!!t[e]:!1}function _v(){return BN}var FN=pr({},pf,{key:function(e){if(e.key){var t=IN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(e){return e.type==="keypress"?vd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zN=da(FN),UN=pr({},dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H1=da(UN),GN=pr({},pf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),WN=da(GN),VN=pr({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),HN=da(VN),XN=pr({},dh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KN=da(XN),YN=[9,13,27,32],Av=Li&&"CompositionEvent"in window,Yc=null;Li&&"documentMode"in document&&(Yc=document.documentMode);var qN=Li&&"TextEvent"in window&&!Yc,K5=Li&&(!Av||Yc&&8<Yc&&11>=Yc),X1=" ",K1=!1;function Y5(e,t){switch(e){case"keyup":return YN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function ZN(e,t){switch(e){case"compositionend":return q5(t);case"keypress":return t.which!==32?null:(K1=!0,X1);case"textInput":return e=t.data,e===X1&&K1?null:e;default:return null}}function QN(e,t){if(Ws)return e==="compositionend"||!Av&&Y5(e,t)?(e=X5(),yd=Nv=ao=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return K5&&t.locale!=="ko"?null:t.data;default:return null}}var JN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!JN[e.type]:t==="textarea"}function Z5(e,t,r,n){N5(n),t=Dd(t,"onChange"),0<t.length&&(r=new Mv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qc=null,mu=null;function eM(e){l4(e,0)}function hh(e){var t=Xs(e);if(w5(t))return e}function tM(e,t){if(e==="change")return t}var Q5=!1;if(Li){var Tp;if(Li){var Ep="oninput"in document;if(!Ep){var q1=document.createElement("div");q1.setAttribute("oninput","return;"),Ep=typeof q1.oninput=="function"}Tp=Ep}else Tp=!1;Q5=Tp&&(!document.documentMode||9<document.documentMode)}function Z1(){qc&&(qc.detachEvent("onpropertychange",J5),mu=qc=null)}function J5(e){if(e.propertyName==="value"&&hh(mu)){var t=[];Z5(t,mu,e,Sv(e)),T5(eM,t)}}function rM(e,t,r){e==="focusin"?(Z1(),qc=t,mu=r,qc.attachEvent("onpropertychange",J5)):e==="focusout"&&Z1()}function nM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hh(mu)}function aM(e,t){if(e==="click")return hh(t)}function iM(e,t){if(e==="input"||e==="change")return hh(t)}function oM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xa=typeof Object.is=="function"?Object.is:oM;function yu(e,t){if(Xa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Lg.call(t,a)||!Xa(e[a],t[a]))return!1}return!0}function Q1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J1(e,t){var r=Q1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Q1(r)}}function e4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?e4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function t4(){for(var e=window,t=Nd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Nd(e.document)}return t}function Tv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sM(e){var t=t4(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&e4(r.ownerDocument.documentElement,r)){if(n!==null&&Tv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=J1(r,i);var o=J1(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lM=Li&&"documentMode"in document&&11>=document.documentMode,Vs=null,nm=null,Zc=null,am=!1;function eb(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;am||Vs==null||Vs!==Nd(n)||(n=Vs,"selectionStart"in n&&Tv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zc&&yu(Zc,n)||(Zc=n,n=Dd(nm,"onSelect"),0<n.length&&(t=new Mv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Vs)))}function zf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hs={animationend:zf("Animation","AnimationEnd"),animationiteration:zf("Animation","AnimationIteration"),animationstart:zf("Animation","AnimationStart"),transitionend:zf("Transition","TransitionEnd")},$p={},r4={};Li&&(r4=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function ph(e){if($p[e])return $p[e];if(!Hs[e])return e;var t=Hs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in r4)return $p[e]=t[r];return e}var n4=ph("animationend"),a4=ph("animationiteration"),i4=ph("animationstart"),o4=ph("transitionend"),s4=new Map,tb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(e,t){s4.set(e,t),Ns(t,[e])}for(var Dp=0;Dp<tb.length;Dp++){var Ip=tb[Dp],cM=Ip.toLowerCase(),uM=Ip[0].toUpperCase()+Ip.slice(1);Oo(cM,"on"+uM)}Oo(n4,"onAnimationEnd");Oo(a4,"onAnimationIteration");Oo(i4,"onAnimationStart");Oo("dblclick","onDoubleClick");Oo("focusin","onFocus");Oo("focusout","onBlur");Oo(o4,"onTransitionEnd");pl("onMouseEnter",["mouseout","mouseover"]);pl("onMouseLeave",["mouseout","mouseover"]);pl("onPointerEnter",["pointerout","pointerover"]);pl("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wc));function rb(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,cN(n,t,void 0,e),e.currentTarget=null}function l4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;rb(a,s,u),i=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;rb(a,s,u),i=l}}}if(_d)throw e=Jg,_d=!1,Jg=null,e}function Zt(e,t){var r=t[cm];r===void 0&&(r=t[cm]=new Set);var n=e+"__bubble";r.has(n)||(c4(t,e,2,!1),r.add(n))}function Rp(e,t,r){var n=0;t&&(n|=4),c4(r,e,n,t)}var Uf="_reactListening"+Math.random().toString(36).slice(2);function vu(e){if(!e[Uf]){e[Uf]=!0,m5.forEach(function(r){r!=="selectionchange"&&(fM.has(r)||Rp(r,!1,e),Rp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uf]||(t[Uf]=!0,Rp("selectionchange",!1,t))}}function c4(e,t,r,n){switch(H5(t)){case 1:var a=PN;break;case 4:a=CN;break;default:a=Ov}r=a.bind(null,t,r,e),a=void 0,!Qg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Lp(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=qo(s),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}s=s.parentNode}}n=n.return}T5(function(){var u=i,f=Sv(r),d=[];e:{var h=s4.get(e);if(h!==void 0){var p=Mv,m=e;switch(e){case"keypress":if(vd(r)===0)break e;case"keydown":case"keyup":p=zN;break;case"focusin":m="focus",p=Ap;break;case"focusout":m="blur",p=Ap;break;case"beforeblur":case"afterblur":p=Ap;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=W1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=MN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=WN;break;case n4:case a4:case i4:p=TN;break;case o4:p=HN;break;case"scroll":p=ON;break;case"wheel":p=KN;break;case"copy":case"cut":case"paste":p=$N;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=H1}var y=(t&4)!==0,w=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var g=u,v;g!==null;){v=g;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,x!==null&&(S=du(g,x),S!=null&&y.push(xu(g,S,v)))),w)break;g=g.return}0<y.length&&(h=new p(h,m,null,r,f),d.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==qg&&(m=r.relatedTarget||r.fromElement)&&(qo(m)||m[Bi]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?qo(m):null,m!==null&&(w=Ms(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=W1,S="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=H1,S="onPointerLeave",x="onPointerEnter",g="pointer"),w=p==null?h:Xs(p),v=m==null?h:Xs(m),h=new y(S,g+"leave",p,r,f),h.target=w,h.relatedTarget=v,S=null,qo(f)===u&&(y=new y(x,g+"enter",m,r,f),y.target=v,y.relatedTarget=w,S=y),w=S,p&&m)t:{for(y=p,x=m,g=0,v=y;v;v=Is(v))g++;for(v=0,S=x;S;S=Is(S))v++;for(;0<g-v;)y=Is(y),g--;for(;0<v-g;)x=Is(x),v--;for(;g--;){if(y===x||x!==null&&y===x.alternate)break t;y=Is(y),x=Is(x)}y=null}else y=null;p!==null&&nb(d,h,p,y,!1),m!==null&&w!==null&&nb(d,w,m,y,!0)}}e:{if(h=u?Xs(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var b=tM;else if(Y1(h))if(Q5)b=iM;else{b=nM;var k=rM}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=aM);if(b&&(b=b(e,u))){Z5(d,b,r,f);break e}k&&k(e,h,u),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Vg(h,"number",h.value)}switch(k=u?Xs(u):window,e){case"focusin":(Y1(k)||k.contentEditable==="true")&&(Vs=k,nm=u,Zc=null);break;case"focusout":Zc=nm=Vs=null;break;case"mousedown":am=!0;break;case"contextmenu":case"mouseup":case"dragend":am=!1,eb(d,r,f);break;case"selectionchange":if(lM)break;case"keydown":case"keyup":eb(d,r,f)}var P;if(Av)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ws?Y5(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(K5&&r.locale!=="ko"&&(Ws||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ws&&(P=X5()):(ao=f,Nv="value"in ao?ao.value:ao.textContent,Ws=!0)),k=Dd(u,C),0<k.length&&(C=new V1(C,e,null,r,f),d.push({event:C,listeners:k}),P?C.data=P:(P=q5(r),P!==null&&(C.data=P)))),(P=qN?ZN(e,r):QN(e,r))&&(u=Dd(u,"onBeforeInput"),0<u.length&&(f=new V1("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=P))}l4(d,t)})}function xu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=du(e,r),i!=null&&n.unshift(xu(e,i,a)),i=du(e,t),i!=null&&n.push(xu(e,i,a))),e=e.return}return n}function Is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nb(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,a?(l=du(r,i),l!=null&&o.unshift(xu(r,l,s))):a||(l=du(r,i),l!=null&&o.push(xu(r,l,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var dM=/\r\n?/g,hM=/\u0000|\uFFFD/g;function ab(e){return(typeof e=="string"?e:""+e).replace(dM,`
`).replace(hM,"")}function Gf(e,t,r){if(t=ab(t),ab(e)!==t&&r)throw Error(ce(425))}function Id(){}var im=null,om=null;function sm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,pM=typeof clearTimeout=="function"?clearTimeout:void 0,ib=typeof Promise=="function"?Promise:void 0,gM=typeof queueMicrotask=="function"?queueMicrotask:typeof ib<"u"?function(e){return ib.resolve(null).then(e).catch(mM)}:lm;function mM(e){setTimeout(function(){throw e})}function Bp(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),gu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);gu(t)}function vo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ob(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),ti="__reactFiber$"+Yl,bu="__reactProps$"+Yl,Bi="__reactContainer$"+Yl,cm="__reactEvents$"+Yl,yM="__reactListeners$"+Yl,vM="__reactHandles$"+Yl;function qo(e){var t=e[ti];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bi]||r[ti]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ob(e);e!==null;){if(r=e[ti])return r;e=ob(e)}return t}e=r,r=e.parentNode}return null}function gf(e){return e=e[ti]||e[Bi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function gh(e){return e[bu]||null}var um=[],Ks=-1;function No(e){return{current:e}}function er(e){0>Ks||(e.current=um[Ks],um[Ks]=null,Ks--)}function Yt(e,t){Ks++,um[Ks]=e.current,e.current=t}var Co={},Sn=No(Co),Yn=No(!1),ds=Co;function gl(e,t){var r=e.type.contextTypes;if(!r)return Co;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qn(e){return e=e.childContextTypes,e!=null}function Rd(){er(Yn),er(Sn)}function sb(e,t,r){if(Sn.current!==Co)throw Error(ce(168));Yt(Sn,t),Yt(Yn,r)}function u4(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ce(108,rN(e)||"Unknown",a));return pr({},r,n)}function Ld(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Co,ds=Sn.current,Yt(Sn,e),Yt(Yn,Yn.current),!0}function lb(e,t,r){var n=e.stateNode;if(!n)throw Error(ce(169));r?(e=u4(e,t,ds),n.__reactInternalMemoizedMergedChildContext=e,er(Yn),er(Sn),Yt(Sn,e)):er(Yn),Yt(Yn,r)}var Ci=null,mh=!1,Fp=!1;function f4(e){Ci===null?Ci=[e]:Ci.push(e)}function xM(e){mh=!0,f4(e)}function Mo(){if(!Fp&&Ci!==null){Fp=!0;var e=0,t=At;try{var r=Ci;for(At=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ci=null,mh=!1}catch(a){throw Ci!==null&&(Ci=Ci.slice(e+1)),I5(jv,Mo),a}finally{At=t,Fp=!1}}return null}var Ys=[],qs=0,Bd=null,Fd=0,xa=[],ba=0,hs=null,Oi=1,Ni="";function Vo(e,t){Ys[qs++]=Fd,Ys[qs++]=Bd,Bd=e,Fd=t}function d4(e,t,r){xa[ba++]=Oi,xa[ba++]=Ni,xa[ba++]=hs,hs=e;var n=Oi;e=Ni;var a=32-Va(n)-1;n&=~(1<<a),r+=1;var i=32-Va(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Oi=1<<32-Va(t)+a|r<<a|n,Ni=i+e}else Oi=1<<i|r<<a|n,Ni=e}function Ev(e){e.return!==null&&(Vo(e,1),d4(e,1,0))}function $v(e){for(;e===Bd;)Bd=Ys[--qs],Ys[qs]=null,Fd=Ys[--qs],Ys[qs]=null;for(;e===hs;)hs=xa[--ba],xa[ba]=null,Ni=xa[--ba],xa[ba]=null,Oi=xa[--ba],xa[ba]=null}var ca=null,la=null,rr=!1,za=null;function h4(e,t){var r=wa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function cb(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ca=e,la=vo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ca=e,la=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hs!==null?{id:Oi,overflow:Ni}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ca=e,la=null,!0):!1;default:return!1}}function fm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dm(e){if(rr){var t=la;if(t){var r=t;if(!cb(e,t)){if(fm(e))throw Error(ce(418));t=vo(r.nextSibling);var n=ca;t&&cb(e,t)?h4(n,r):(e.flags=e.flags&-4097|2,rr=!1,ca=e)}}else{if(fm(e))throw Error(ce(418));e.flags=e.flags&-4097|2,rr=!1,ca=e}}}function ub(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ca=e}function Wf(e){if(e!==ca)return!1;if(!rr)return ub(e),rr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sm(e.type,e.memoizedProps)),t&&(t=la)){if(fm(e))throw p4(),Error(ce(418));for(;t;)h4(e,t),t=vo(t.nextSibling)}if(ub(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){la=vo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}la=null}}else la=ca?vo(e.stateNode.nextSibling):null;return!0}function p4(){for(var e=la;e;)e=vo(e.nextSibling)}function ml(){la=ca=null,rr=!1}function Dv(e){za===null?za=[e]:za.push(e)}var bM=Vi.ReactCurrentBatchConfig;function Cc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,e))}return e}function Vf(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fb(e){var t=e._init;return t(e._payload)}function g4(e){function t(x,g){if(e){var v=x.deletions;v===null?(x.deletions=[g],x.flags|=16):v.push(g)}}function r(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function a(x,g){return x=ko(x,g),x.index=0,x.sibling=null,x}function i(x,g,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<g?(x.flags|=2,g):v):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function s(x,g,v,S){return g===null||g.tag!==6?(g=Xp(v,x.mode,S),g.return=x,g):(g=a(g,v),g.return=x,g)}function l(x,g,v,S){var b=v.type;return b===Gs?f(x,g,v.props.children,S,v.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qi&&fb(b)===g.type)?(S=a(g,v.props),S.ref=Cc(x,g,v),S.return=x,S):(S=Pd(v.type,v.key,v.props,null,x.mode,S),S.ref=Cc(x,g,v),S.return=x,S)}function u(x,g,v,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Kp(v,x.mode,S),g.return=x,g):(g=a(g,v.children||[]),g.return=x,g)}function f(x,g,v,S,b){return g===null||g.tag!==7?(g=ls(v,x.mode,S,b),g.return=x,g):(g=a(g,v),g.return=x,g)}function d(x,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Xp(""+g,x.mode,v),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $f:return v=Pd(g.type,g.key,g.props,null,x.mode,v),v.ref=Cc(x,null,g),v.return=x,v;case Us:return g=Kp(g,x.mode,v),g.return=x,g;case Qi:var S=g._init;return d(x,S(g._payload),v)}if(Uc(g)||wc(g))return g=ls(g,x.mode,v,null),g.return=x,g;Vf(x,g)}return null}function h(x,g,v,S){var b=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:s(x,g,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $f:return v.key===b?l(x,g,v,S):null;case Us:return v.key===b?u(x,g,v,S):null;case Qi:return b=v._init,h(x,g,b(v._payload),S)}if(Uc(v)||wc(v))return b!==null?null:f(x,g,v,S,null);Vf(x,v)}return null}function p(x,g,v,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(v)||null,s(g,x,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $f:return x=x.get(S.key===null?v:S.key)||null,l(g,x,S,b);case Us:return x=x.get(S.key===null?v:S.key)||null,u(g,x,S,b);case Qi:var k=S._init;return p(x,g,v,k(S._payload),b)}if(Uc(S)||wc(S))return x=x.get(v)||null,f(g,x,S,b,null);Vf(g,S)}return null}function m(x,g,v,S){for(var b=null,k=null,P=g,C=g=0,N=null;P!==null&&C<v.length;C++){P.index>C?(N=P,P=null):N=P.sibling;var O=h(x,P,v[C],S);if(O===null){P===null&&(P=N);break}e&&P&&O.alternate===null&&t(x,P),g=i(O,g,C),k===null?b=O:k.sibling=O,k=O,P=N}if(C===v.length)return r(x,P),rr&&Vo(x,C),b;if(P===null){for(;C<v.length;C++)P=d(x,v[C],S),P!==null&&(g=i(P,g,C),k===null?b=P:k.sibling=P,k=P);return rr&&Vo(x,C),b}for(P=n(x,P);C<v.length;C++)N=p(P,x,C,v[C],S),N!==null&&(e&&N.alternate!==null&&P.delete(N.key===null?C:N.key),g=i(N,g,C),k===null?b=N:k.sibling=N,k=N);return e&&P.forEach(function(E){return t(x,E)}),rr&&Vo(x,C),b}function y(x,g,v,S){var b=wc(v);if(typeof b!="function")throw Error(ce(150));if(v=b.call(v),v==null)throw Error(ce(151));for(var k=b=null,P=g,C=g=0,N=null,O=v.next();P!==null&&!O.done;C++,O=v.next()){P.index>C?(N=P,P=null):N=P.sibling;var E=h(x,P,O.value,S);if(E===null){P===null&&(P=N);break}e&&P&&E.alternate===null&&t(x,P),g=i(E,g,C),k===null?b=E:k.sibling=E,k=E,P=N}if(O.done)return r(x,P),rr&&Vo(x,C),b;if(P===null){for(;!O.done;C++,O=v.next())O=d(x,O.value,S),O!==null&&(g=i(O,g,C),k===null?b=O:k.sibling=O,k=O);return rr&&Vo(x,C),b}for(P=n(x,P);!O.done;C++,O=v.next())O=p(P,x,C,O.value,S),O!==null&&(e&&O.alternate!==null&&P.delete(O.key===null?C:O.key),g=i(O,g,C),k===null?b=O:k.sibling=O,k=O);return e&&P.forEach(function(M){return t(x,M)}),rr&&Vo(x,C),b}function w(x,g,v,S){if(typeof v=="object"&&v!==null&&v.type===Gs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case $f:e:{for(var b=v.key,k=g;k!==null;){if(k.key===b){if(b=v.type,b===Gs){if(k.tag===7){r(x,k.sibling),g=a(k,v.props.children),g.return=x,x=g;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Qi&&fb(b)===k.type){r(x,k.sibling),g=a(k,v.props),g.ref=Cc(x,k,v),g.return=x,x=g;break e}r(x,k);break}else t(x,k);k=k.sibling}v.type===Gs?(g=ls(v.props.children,x.mode,S,v.key),g.return=x,x=g):(S=Pd(v.type,v.key,v.props,null,x.mode,S),S.ref=Cc(x,g,v),S.return=x,x=S)}return o(x);case Us:e:{for(k=v.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(x,g.sibling),g=a(g,v.children||[]),g.return=x,x=g;break e}else{r(x,g);break}else t(x,g);g=g.sibling}g=Kp(v,x.mode,S),g.return=x,x=g}return o(x);case Qi:return k=v._init,w(x,g,k(v._payload),S)}if(Uc(v))return m(x,g,v,S);if(wc(v))return y(x,g,v,S);Vf(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(x,g.sibling),g=a(g,v),g.return=x,x=g):(r(x,g),g=Xp(v,x.mode,S),g.return=x,x=g),o(x)):r(x,g)}return w}var yl=g4(!0),m4=g4(!1),zd=No(null),Ud=null,Zs=null,Iv=null;function Rv(){Iv=Zs=Ud=null}function Lv(e){var t=zd.current;er(zd),e._currentValue=t}function hm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function sl(e,t){Ud=e,Iv=Zs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xn=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(Iv!==e)if(e={context:e,memoizedValue:t,next:null},Zs===null){if(Ud===null)throw Error(ce(308));Zs=e,Ud.dependencies={lanes:0,firstContext:e}}else Zs=Zs.next=e;return t}var Zo=null;function Bv(e){Zo===null?Zo=[e]:Zo.push(e)}function y4(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Bv(t)):(r.next=a.next,a.next=r),t.interleaved=r,Fi(e,n)}function Fi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ji=!1;function Fv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ti(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Fi(e,r)}return a=n.interleaved,a===null?(t.next=t,Bv(n)):(t.next=a.next,a.next=t),n.interleaved=t,Fi(e,r)}function xd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Pv(e,r)}}function db(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gd(e,t,r,n){var a=e.updateQueue;Ji=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==o&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;o=0,f=u=l=null,s=i;do{var h=s.lane,p=s.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,y=s;switch(h=t,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=pr({},d,h);break e;case 2:Ji=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=p,l=d):f=f.next=p,o|=h;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;h=s,s=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);gs|=o,e.lanes=o,e.memoizedState=d}}function hb(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ce(191,a));a.call(n)}}}var mf={},ii=No(mf),wu=No(mf),ku=No(mf);function Qo(e){if(e===mf)throw Error(ce(174));return e}function zv(e,t){switch(Yt(ku,t),Yt(wu,e),Yt(ii,mf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xg(t,e)}er(ii),Yt(ii,t)}function vl(){er(ii),er(wu),er(ku)}function x4(e){Qo(ku.current);var t=Qo(ii.current),r=Xg(t,e.type);t!==r&&(Yt(wu,e),Yt(ii,r))}function Uv(e){wu.current===e&&(er(ii),er(wu))}var dr=No(0);function Wd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zp=[];function Gv(){for(var e=0;e<zp.length;e++)zp[e]._workInProgressVersionPrimary=null;zp.length=0}var bd=Vi.ReactCurrentDispatcher,Up=Vi.ReactCurrentBatchConfig,ps=0,hr=null,Br=null,Hr=null,Vd=!1,Qc=!1,Su=0,wM=0;function yn(){throw Error(ce(321))}function Wv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xa(e[r],t[r]))return!1;return!0}function Vv(e,t,r,n,a,i){if(ps=i,hr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bd.current=e===null||e.memoizedState===null?PM:CM,e=r(n,a),Qc){i=0;do{if(Qc=!1,Su=0,25<=i)throw Error(ce(301));i+=1,Hr=Br=null,t.updateQueue=null,bd.current=OM,e=r(n,a)}while(Qc)}if(bd.current=Hd,t=Br!==null&&Br.next!==null,ps=0,Hr=Br=hr=null,Vd=!1,t)throw Error(ce(300));return e}function Hv(){var e=Su!==0;return Su=0,e}function ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?hr.memoizedState=Hr=e:Hr=Hr.next=e,Hr}function Oa(){if(Br===null){var e=hr.alternate;e=e!==null?e.memoizedState:null}else e=Br.next;var t=Hr===null?hr.memoizedState:Hr.next;if(t!==null)Hr=t,Br=e;else{if(e===null)throw Error(ce(310));Br=e,e={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Hr===null?hr.memoizedState=Hr=e:Hr=Hr.next=e}return Hr}function ju(e,t){return typeof t=="function"?t(e):t}function Gp(e){var t=Oa(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=Br,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var s=o=null,l=null,u=i;do{var f=u.lane;if((ps&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,hr.lanes|=f,gs|=f}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=s,Xa(n,t.memoizedState)||(Xn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,hr.lanes|=i,gs|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Wp(e){var t=Oa(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Xa(i,t.memoizedState)||(Xn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function b4(){}function w4(e,t){var r=hr,n=Oa(),a=t(),i=!Xa(n.memoizedState,a);if(i&&(n.memoizedState=a,Xn=!0),n=n.queue,Xv(j4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Hr!==null&&Hr.memoizedState.tag&1){if(r.flags|=2048,Pu(9,S4.bind(null,r,n,a,t),void 0,null),Kr===null)throw Error(ce(349));ps&30||k4(r,t,a)}return a}function k4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=hr.updateQueue,t===null?(t={lastEffect:null,stores:null},hr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function S4(e,t,r,n){t.value=r,t.getSnapshot=n,P4(t)&&C4(e)}function j4(e,t,r){return r(function(){P4(t)&&C4(e)})}function P4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xa(e,r)}catch{return!0}}function C4(e){var t=Fi(e,1);t!==null&&Ha(t,e,1,-1)}function pb(e){var t=ei();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ju,lastRenderedState:e},t.queue=e,e=e.dispatch=jM.bind(null,hr,e),[t.memoizedState,e]}function Pu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=hr.updateQueue,t===null?(t={lastEffect:null,stores:null},hr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function O4(){return Oa().memoizedState}function wd(e,t,r,n){var a=ei();hr.flags|=e,a.memoizedState=Pu(1|t,r,void 0,n===void 0?null:n)}function yh(e,t,r,n){var a=Oa();n=n===void 0?null:n;var i=void 0;if(Br!==null){var o=Br.memoizedState;if(i=o.destroy,n!==null&&Wv(n,o.deps)){a.memoizedState=Pu(t,r,i,n);return}}hr.flags|=e,a.memoizedState=Pu(1|t,r,i,n)}function gb(e,t){return wd(8390656,8,e,t)}function Xv(e,t){return yh(2048,8,e,t)}function N4(e,t){return yh(4,2,e,t)}function M4(e,t){return yh(4,4,e,t)}function _4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function A4(e,t,r){return r=r!=null?r.concat([e]):null,yh(4,4,_4.bind(null,t,e),r)}function Kv(){}function T4(e,t){var r=Oa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function E4(e,t){var r=Oa();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function $4(e,t,r){return ps&21?(Xa(r,t)||(r=B5(),hr.lanes|=r,gs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xn=!0),e.memoizedState=r)}function kM(e,t){var r=At;At=r!==0&&4>r?r:4,e(!0);var n=Up.transition;Up.transition={};try{e(!1),t()}finally{At=r,Up.transition=n}}function D4(){return Oa().memoizedState}function SM(e,t,r){var n=wo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},I4(e))R4(t,r);else if(r=y4(e,t,r,n),r!==null){var a=$n();Ha(r,e,n,a),L4(r,t,n)}}function jM(e,t,r){var n=wo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(I4(e))R4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Xa(s,o)){var l=t.interleaved;l===null?(a.next=a,Bv(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=y4(e,t,a,n),r!==null&&(a=$n(),Ha(r,e,n,a),L4(r,t,n))}}function I4(e){var t=e.alternate;return e===hr||t!==null&&t===hr}function R4(e,t){Qc=Vd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function L4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Pv(e,r)}}var Hd={readContext:Ca,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},PM={readContext:Ca,useCallback:function(e,t){return ei().memoizedState=[e,t===void 0?null:t],e},useContext:Ca,useEffect:gb,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,wd(4194308,4,_4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return wd(4194308,4,e,t)},useInsertionEffect:function(e,t){return wd(4,2,e,t)},useMemo:function(e,t){var r=ei();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ei();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=SM.bind(null,hr,e),[n.memoizedState,e]},useRef:function(e){var t=ei();return e={current:e},t.memoizedState=e},useState:pb,useDebugValue:Kv,useDeferredValue:function(e){return ei().memoizedState=e},useTransition:function(){var e=pb(!1),t=e[0];return e=kM.bind(null,e[1]),ei().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=hr,a=ei();if(rr){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=t(),Kr===null)throw Error(ce(349));ps&30||k4(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,gb(j4.bind(null,n,i,e),[e]),n.flags|=2048,Pu(9,S4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ei(),t=Kr.identifierPrefix;if(rr){var r=Ni,n=Oi;r=(n&~(1<<32-Va(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Su++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CM={readContext:Ca,useCallback:T4,useContext:Ca,useEffect:Xv,useImperativeHandle:A4,useInsertionEffect:N4,useLayoutEffect:M4,useMemo:E4,useReducer:Gp,useRef:O4,useState:function(){return Gp(ju)},useDebugValue:Kv,useDeferredValue:function(e){var t=Oa();return $4(t,Br.memoizedState,e)},useTransition:function(){var e=Gp(ju)[0],t=Oa().memoizedState;return[e,t]},useMutableSource:b4,useSyncExternalStore:w4,useId:D4,unstable_isNewReconciler:!1},OM={readContext:Ca,useCallback:T4,useContext:Ca,useEffect:Xv,useImperativeHandle:A4,useInsertionEffect:N4,useLayoutEffect:M4,useMemo:E4,useReducer:Wp,useRef:O4,useState:function(){return Wp(ju)},useDebugValue:Kv,useDeferredValue:function(e){var t=Oa();return Br===null?t.memoizedState=e:$4(t,Br.memoizedState,e)},useTransition:function(){var e=Wp(ju)[0],t=Oa().memoizedState;return[e,t]},useMutableSource:b4,useSyncExternalStore:w4,useId:D4,unstable_isNewReconciler:!1};function Ra(e,t){if(e&&e.defaultProps){t=pr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function pm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:pr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vh={isMounted:function(e){return(e=e._reactInternals)?Ms(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$n(),a=wo(e),i=Ti(n,a);i.payload=t,r!=null&&(i.callback=r),t=xo(e,i,a),t!==null&&(Ha(t,e,a,n),xd(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$n(),a=wo(e),i=Ti(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=xo(e,i,a),t!==null&&(Ha(t,e,a,n),xd(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$n(),n=wo(e),a=Ti(r,n);a.tag=2,t!=null&&(a.callback=t),t=xo(e,a,n),t!==null&&(Ha(t,e,n,r),xd(t,e,n))}};function mb(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!yu(r,n)||!yu(a,i):!0}function B4(e,t,r){var n=!1,a=Co,i=t.contextType;return typeof i=="object"&&i!==null?i=Ca(i):(a=qn(t)?ds:Sn.current,n=t.contextTypes,i=(n=n!=null)?gl(e,a):Co),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function yb(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vh.enqueueReplaceState(t,t.state,null)}function gm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Fv(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ca(i):(i=qn(t)?ds:Sn.current,a.context=gl(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(pm(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&vh.enqueueReplaceState(a,a.state,null),Gd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function xl(e,t){try{var r="",n=t;do r+=tN(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Vp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var NM=typeof WeakMap=="function"?WeakMap:Map;function F4(e,t,r){r=Ti(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Kd||(Kd=!0,Cm=n),mm(e,t)},r}function z4(e,t,r){r=Ti(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){mm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){mm(e,t),typeof n!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function vb(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new NM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=UM.bind(null,e,t,r),t.then(e,e))}function xb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bb(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ti(-1,1),t.tag=2,xo(r,t,1))),r.lanes|=1),e)}var MM=Vi.ReactCurrentOwner,Xn=!1;function Tn(e,t,r,n){t.child=e===null?m4(t,null,r,n):yl(t,e.child,r,n)}function wb(e,t,r,n,a){r=r.render;var i=t.ref;return sl(t,a),n=Vv(e,t,r,n,i,a),r=Hv(),e!==null&&!Xn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zi(e,t,a)):(rr&&r&&Ev(t),t.flags|=1,Tn(e,t,n,a),t.child)}function kb(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!rx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,U4(e,t,i,n,a)):(e=Pd(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:yu,r(o,n)&&e.ref===t.ref)return zi(e,t,a)}return t.flags|=1,e=ko(i,n),e.ref=t.ref,e.return=t,t.child=e}function U4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(yu(i,n)&&e.ref===t.ref)if(Xn=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Xn=!0);else return t.lanes=e.lanes,zi(e,t,a)}return ym(e,t,r,n,a)}function G4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Js,ia),ia|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Yt(Js,ia),ia|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Yt(Js,ia),ia|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Yt(Js,ia),ia|=n;return Tn(e,t,a,r),t.child}function W4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ym(e,t,r,n,a){var i=qn(r)?ds:Sn.current;return i=gl(t,i),sl(t,a),r=Vv(e,t,r,n,i,a),n=Hv(),e!==null&&!Xn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zi(e,t,a)):(rr&&n&&Ev(t),t.flags|=1,Tn(e,t,r,a),t.child)}function Sb(e,t,r,n,a){if(qn(r)){var i=!0;Ld(t)}else i=!1;if(sl(t,a),t.stateNode===null)kd(e,t),B4(t,r,n),gm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ca(u):(u=qn(r)?ds:Sn.current,u=gl(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==u)&&yb(t,o,n,u),Ji=!1;var h=t.memoizedState;o.state=h,Gd(t,n,o,a),l=t.memoizedState,s!==n||h!==l||Yn.current||Ji?(typeof f=="function"&&(pm(t,r,f,n),l=t.memoizedState),(s=Ji||mb(t,r,s,n,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,v4(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ra(t.type,s),o.props=u,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ca(l):(l=qn(r)?ds:Sn.current,l=gl(t,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||h!==l)&&yb(t,o,n,l),Ji=!1,h=t.memoizedState,o.state=h,Gd(t,n,o,a);var m=t.memoizedState;s!==d||h!==m||Yn.current||Ji?(typeof p=="function"&&(pm(t,r,p,n),m=t.memoizedState),(u=Ji||mb(t,r,u,n,h,m,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return vm(e,t,r,n,i,a)}function vm(e,t,r,n,a,i){W4(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&lb(t,r,!1),zi(e,t,i);n=t.stateNode,MM.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=yl(t,e.child,null,i),t.child=yl(t,null,s,i)):Tn(e,t,s,i),t.memoizedState=n.state,a&&lb(t,r,!0),t.child}function V4(e){var t=e.stateNode;t.pendingContext?sb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sb(e,t.context,!1),zv(e,t.containerInfo)}function jb(e,t,r,n,a){return ml(),Dv(a),t.flags|=256,Tn(e,t,r,n),t.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function bm(e){return{baseLanes:e,cachePool:null,transitions:null}}function H4(e,t,r){var n=t.pendingProps,a=dr.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Yt(dr,a&1),e===null)return dm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wh(o,n,0,null),e=ls(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bm(r),t.memoizedState=xm,e):Yv(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return _M(e,t,o,n,s,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=ko(a,l),n.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=ko(s,i):(i=ls(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?bm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=xm,n}return i=e.child,e=i.sibling,n=ko(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Yv(e,t){return t=wh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hf(e,t,r,n){return n!==null&&Dv(n),yl(t,e.child,null,r),e=Yv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _M(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Vp(Error(ce(422))),Hf(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=wh({mode:"visible",children:n.children},a,0,null),i=ls(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&yl(t,e.child,null,o),t.child.memoizedState=bm(o),t.memoizedState=xm,i);if(!(t.mode&1))return Hf(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var s=n.dgst;return n=s,i=Error(ce(419)),n=Vp(i,n,void 0),Hf(e,t,o,n)}if(s=(o&e.childLanes)!==0,Xn||s){if(n=Kr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Fi(e,a),Ha(n,e,a,-1))}return tx(),n=Vp(Error(ce(421))),Hf(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=GM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,la=vo(a.nextSibling),ca=t,rr=!0,za=null,e!==null&&(xa[ba++]=Oi,xa[ba++]=Ni,xa[ba++]=hs,Oi=e.id,Ni=e.overflow,hs=t),t=Yv(t,n.children),t.flags|=4096,t)}function Pb(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),hm(e.return,t,r)}function Hp(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function X4(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Tn(e,t,n.children,r),n=dr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pb(e,r,t);else if(e.tag===19)Pb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Yt(dr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Wd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Hp(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Wd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Hp(t,!0,r,null,i);break;case"together":Hp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,r=ko(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ko(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function AM(e,t,r){switch(t.tag){case 3:V4(t),ml();break;case 5:x4(t);break;case 1:qn(t.type)&&Ld(t);break;case 4:zv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Yt(zd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Yt(dr,dr.current&1),t.flags|=128,null):r&t.child.childLanes?H4(e,t,r):(Yt(dr,dr.current&1),e=zi(e,t,r),e!==null?e.sibling:null);Yt(dr,dr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return X4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Yt(dr,dr.current),n)break;return null;case 22:case 23:return t.lanes=0,G4(e,t,r)}return zi(e,t,r)}var K4,wm,Y4,q4;K4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wm=function(){};Y4=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Qo(ii.current);var i=null;switch(r){case"input":a=Gg(e,a),n=Gg(e,n),i=[];break;case"select":a=pr({},a,{value:void 0}),n=pr({},n,{value:void 0}),i=[];break;case"textarea":a=Hg(e,a),n=Hg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Id)}Kg(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(s=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Zt("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};q4=function(e,t,r,n){r!==n&&(t.flags|=4)};function Oc(e,t){if(!rr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function TM(e,t,r){var n=t.pendingProps;switch($v(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(t),null;case 1:return qn(t.type)&&Rd(),vn(t),null;case 3:return n=t.stateNode,vl(),er(Yn),er(Sn),Gv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,za!==null&&(Mm(za),za=null))),wm(e,t),vn(t),null;case 5:Uv(t);var a=Qo(ku.current);if(r=t.type,e!==null&&t.stateNode!=null)Y4(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ce(166));return vn(t),null}if(e=Qo(ii.current),Wf(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ti]=t,n[bu]=i,e=(t.mode&1)!==0,r){case"dialog":Zt("cancel",n),Zt("close",n);break;case"iframe":case"object":case"embed":Zt("load",n);break;case"video":case"audio":for(a=0;a<Wc.length;a++)Zt(Wc[a],n);break;case"source":Zt("error",n);break;case"img":case"image":case"link":Zt("error",n),Zt("load",n);break;case"details":Zt("toggle",n);break;case"input":$1(n,i),Zt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Zt("invalid",n);break;case"textarea":I1(n,i),Zt("invalid",n)}Kg(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?n.textContent!==s&&(i.suppressHydrationWarning!==!0&&Gf(n.textContent,s,e),a=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Gf(n.textContent,s,e),a=["children",""+s]):uu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Zt("scroll",n)}switch(r){case"input":Df(n),D1(n,i,!0);break;case"textarea":Df(n),R1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Id)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=j5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ti]=t,e[bu]=n,K4(e,t,!1,!1),t.stateNode=e;e:{switch(o=Yg(r,n),r){case"dialog":Zt("cancel",e),Zt("close",e),a=n;break;case"iframe":case"object":case"embed":Zt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Wc.length;a++)Zt(Wc[a],e);a=n;break;case"source":Zt("error",e),a=n;break;case"img":case"image":case"link":Zt("error",e),Zt("load",e),a=n;break;case"details":Zt("toggle",e),a=n;break;case"input":$1(e,n),a=Gg(e,n),Zt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=pr({},n,{value:void 0}),Zt("invalid",e);break;case"textarea":I1(e,n),a=Hg(e,n),Zt("invalid",e);break;default:a=n}Kg(r,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?O5(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&P5(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&fu(e,l):typeof l=="number"&&fu(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Zt("scroll",e):l!=null&&xv(e,i,l,o))}switch(r){case"input":Df(e),D1(e,n,!1);break;case"textarea":Df(e),R1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Po(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?nl(e,!!n.multiple,i,!1):n.defaultValue!=null&&nl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Id)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vn(t),null;case 6:if(e&&t.stateNode!=null)q4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ce(166));if(r=Qo(ku.current),Qo(ii.current),Wf(t)){if(n=t.stateNode,r=t.memoizedProps,n[ti]=t,(i=n.nodeValue!==r)&&(e=ca,e!==null))switch(e.tag){case 3:Gf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gf(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ti]=t,t.stateNode=n}return vn(t),null;case 13:if(er(dr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rr&&la!==null&&t.mode&1&&!(t.flags&128))p4(),ml(),t.flags|=98560,i=!1;else if(i=Wf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ce(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[ti]=t}else ml(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vn(t),i=!1}else za!==null&&(Mm(za),za=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||dr.current&1?Fr===0&&(Fr=3):tx())),t.updateQueue!==null&&(t.flags|=4),vn(t),null);case 4:return vl(),wm(e,t),e===null&&vu(t.stateNode.containerInfo),vn(t),null;case 10:return Lv(t.type._context),vn(t),null;case 17:return qn(t.type)&&Rd(),vn(t),null;case 19:if(er(dr),i=t.memoizedState,i===null)return vn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Oc(i,!1);else{if(Fr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wd(e),o!==null){for(t.flags|=128,Oc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Yt(dr,dr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Cr()>bl&&(t.flags|=128,n=!0,Oc(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Oc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rr)return vn(t),null}else 2*Cr()-i.renderingStartTime>bl&&r!==1073741824&&(t.flags|=128,n=!0,Oc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Cr(),t.sibling=null,r=dr.current,Yt(dr,n?r&1|2:r&1),t):(vn(t),null);case 22:case 23:return ex(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ia&1073741824&&(vn(t),t.subtreeFlags&6&&(t.flags|=8192)):vn(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function EM(e,t){switch($v(t),t.tag){case 1:return qn(t.type)&&Rd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vl(),er(Yn),er(Sn),Gv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uv(t),null;case 13:if(er(dr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));ml()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return er(dr),null;case 4:return vl(),null;case 10:return Lv(t.type._context),null;case 22:case 23:return ex(),null;case 24:return null;default:return null}}var Xf=!1,wn=!1,$M=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Qs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){vr(e,t,n)}else r.current=null}function km(e,t,r){try{r()}catch(n){vr(e,t,n)}}var Cb=!1;function DM(e,t){if(im=Ed,e=t4(),Tv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,s=-1,l=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||a!==0&&d.nodeType!==3||(s=o+a),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===a&&(s=o),h===i&&++f===n&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(om={focusedElem:e,selectionRange:r},Ed=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:Ra(t.type,y),w);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(S){vr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return m=Cb,Cb=!1,m}function Jc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&km(t,r,i)}a=a.next}while(a!==n)}}function xh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Sm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Z4(e){var t=e.alternate;t!==null&&(e.alternate=null,Z4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ti],delete t[bu],delete t[cm],delete t[yM],delete t[vM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Q4(e){return e.tag===5||e.tag===3||e.tag===4}function Ob(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Q4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Id));else if(n!==4&&(e=e.child,e!==null))for(jm(e,t,r),e=e.sibling;e!==null;)jm(e,t,r),e=e.sibling}function Pm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Pm(e,t,r),e=e.sibling;e!==null;)Pm(e,t,r),e=e.sibling}var an=null,La=!1;function qi(e,t,r){for(r=r.child;r!==null;)J4(e,t,r),r=r.sibling}function J4(e,t,r){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(fh,r)}catch{}switch(r.tag){case 5:wn||Qs(r,t);case 6:var n=an,a=La;an=null,qi(e,t,r),an=n,La=a,an!==null&&(La?(e=an,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):an.removeChild(r.stateNode));break;case 18:an!==null&&(La?(e=an,r=r.stateNode,e.nodeType===8?Bp(e.parentNode,r):e.nodeType===1&&Bp(e,r),gu(e)):Bp(an,r.stateNode));break;case 4:n=an,a=La,an=r.stateNode.containerInfo,La=!0,qi(e,t,r),an=n,La=a;break;case 0:case 11:case 14:case 15:if(!wn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&km(r,t,o),a=a.next}while(a!==n)}qi(e,t,r);break;case 1:if(!wn&&(Qs(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){vr(r,t,s)}qi(e,t,r);break;case 21:qi(e,t,r);break;case 22:r.mode&1?(wn=(n=wn)||r.memoizedState!==null,qi(e,t,r),wn=n):qi(e,t,r);break;default:qi(e,t,r)}}function Nb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new $M),t.forEach(function(n){var a=WM.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Da(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:an=s.stateNode,La=!1;break e;case 3:an=s.stateNode.containerInfo,La=!0;break e;case 4:an=s.stateNode.containerInfo,La=!0;break e}s=s.return}if(an===null)throw Error(ce(160));J4(i,o,a),an=null,La=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){vr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)e3(t,e),t=t.sibling}function e3(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Da(t,e),Ja(e),n&4){try{Jc(3,e,e.return),xh(3,e)}catch(y){vr(e,e.return,y)}try{Jc(5,e,e.return)}catch(y){vr(e,e.return,y)}}break;case 1:Da(t,e),Ja(e),n&512&&r!==null&&Qs(r,r.return);break;case 5:if(Da(t,e),Ja(e),n&512&&r!==null&&Qs(r,r.return),e.flags&32){var a=e.stateNode;try{fu(a,"")}catch(y){vr(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&k5(a,i),Yg(s,o);var u=Yg(s,i);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?O5(a,d):f==="dangerouslySetInnerHTML"?P5(a,d):f==="children"?fu(a,d):xv(a,f,d,u)}switch(s){case"input":Wg(a,i);break;case"textarea":S5(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?nl(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?nl(a,!!i.multiple,i.defaultValue,!0):nl(a,!!i.multiple,i.multiple?[]:"",!1))}a[bu]=i}catch(y){vr(e,e.return,y)}}break;case 6:if(Da(t,e),Ja(e),n&4){if(e.stateNode===null)throw Error(ce(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){vr(e,e.return,y)}}break;case 3:if(Da(t,e),Ja(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gu(t.containerInfo)}catch(y){vr(e,e.return,y)}break;case 4:Da(t,e),Ja(e);break;case 13:Da(t,e),Ja(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Qv=Cr())),n&4&&Nb(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(wn=(u=wn)||f,Da(t,e),wn=u):Da(t,e),Ja(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ke=e,f=e.child;f!==null;){for(d=ke=f;ke!==null;){switch(h=ke,p=h.child,h.tag){case 0:case 11:case 14:case 15:Jc(4,h,h.return);break;case 1:Qs(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){vr(n,r,y)}}break;case 5:Qs(h,h.return);break;case 22:if(h.memoizedState!==null){_b(d);continue}}p!==null?(p.return=h,ke=p):_b(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=C5("display",o))}catch(y){vr(e,e.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){vr(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Da(t,e),Ja(e),n&4&&Nb(e);break;case 21:break;default:Da(t,e),Ja(e)}}function Ja(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Q4(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(fu(a,""),n.flags&=-33);var i=Ob(e);Pm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,s=Ob(e);jm(e,s,o);break;default:throw Error(ce(161))}}catch(l){vr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IM(e,t,r){ke=e,t3(e)}function t3(e,t,r){for(var n=(e.mode&1)!==0;ke!==null;){var a=ke,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Xf;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||wn;s=Xf;var u=wn;if(Xf=o,(wn=l)&&!u)for(ke=a;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?Ab(a):l!==null?(l.return=o,ke=l):Ab(a);for(;i!==null;)ke=i,t3(i),i=i.sibling;ke=a,Xf=s,wn=u}Mb(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ke=i):Mb(e)}}function Mb(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wn||xh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!wn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ra(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&hb(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}hb(t,o,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&gu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}wn||t.flags&512&&Sm(t)}catch(h){vr(t,t.return,h)}}if(t===e){ke=null;break}if(r=t.sibling,r!==null){r.return=t.return,ke=r;break}ke=t.return}}function _b(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ke=r;break}ke=t.return}}function Ab(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xh(4,t)}catch(l){vr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){vr(t,a,l)}}var i=t.return;try{Sm(t)}catch(l){vr(t,i,l)}break;case 5:var o=t.return;try{Sm(t)}catch(l){vr(t,o,l)}}}catch(l){vr(t,t.return,l)}if(t===e){ke=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ke=s;break}ke=t.return}}var RM=Math.ceil,Xd=Vi.ReactCurrentDispatcher,qv=Vi.ReactCurrentOwner,ja=Vi.ReactCurrentBatchConfig,pt=0,Kr=null,Tr=null,ln=0,ia=0,Js=No(0),Fr=0,Cu=null,gs=0,bh=0,Zv=0,eu=null,Vn=null,Qv=0,bl=1/0,Pi=null,Kd=!1,Cm=null,bo=null,Kf=!1,io=null,Yd=0,tu=0,Om=null,Sd=-1,jd=0;function $n(){return pt&6?Cr():Sd!==-1?Sd:Sd=Cr()}function wo(e){return e.mode&1?pt&2&&ln!==0?ln&-ln:bM.transition!==null?(jd===0&&(jd=B5()),jd):(e=At,e!==0||(e=window.event,e=e===void 0?16:H5(e.type)),e):1}function Ha(e,t,r,n){if(50<tu)throw tu=0,Om=null,Error(ce(185));hf(e,r,n),(!(pt&2)||e!==Kr)&&(e===Kr&&(!(pt&2)&&(bh|=r),Fr===4&&ro(e,ln)),Zn(e,n),r===1&&pt===0&&!(t.mode&1)&&(bl=Cr()+500,mh&&Mo()))}function Zn(e,t){var r=e.callbackNode;bN(e,t);var n=Td(e,e===Kr?ln:0);if(n===0)r!==null&&F1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&F1(r),t===1)e.tag===0?xM(Tb.bind(null,e)):f4(Tb.bind(null,e)),gM(function(){!(pt&6)&&Mo()}),r=null;else{switch(F5(n)){case 1:r=jv;break;case 4:r=R5;break;case 16:r=Ad;break;case 536870912:r=L5;break;default:r=Ad}r=c3(r,r3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function r3(e,t){if(Sd=-1,jd=0,pt&6)throw Error(ce(327));var r=e.callbackNode;if(ll()&&e.callbackNode!==r)return null;var n=Td(e,e===Kr?ln:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=qd(e,n);else{t=n;var a=pt;pt|=2;var i=a3();(Kr!==e||ln!==t)&&(Pi=null,bl=Cr()+500,ss(e,t));do try{FM();break}catch(s){n3(e,s)}while(!0);Rv(),Xd.current=i,pt=a,Tr!==null?t=0:(Kr=null,ln=0,t=Fr)}if(t!==0){if(t===2&&(a=em(e),a!==0&&(n=a,t=Nm(e,a))),t===1)throw r=Cu,ss(e,0),ro(e,n),Zn(e,Cr()),r;if(t===6)ro(e,n);else{if(a=e.current.alternate,!(n&30)&&!LM(a)&&(t=qd(e,n),t===2&&(i=em(e),i!==0&&(n=i,t=Nm(e,i))),t===1))throw r=Cu,ss(e,0),ro(e,n),Zn(e,Cr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ce(345));case 2:Ho(e,Vn,Pi);break;case 3:if(ro(e,n),(n&130023424)===n&&(t=Qv+500-Cr(),10<t)){if(Td(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){$n(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=lm(Ho.bind(null,e,Vn,Pi),t);break}Ho(e,Vn,Pi);break;case 4:if(ro(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Va(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Cr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*RM(n/1960))-n,10<n){e.timeoutHandle=lm(Ho.bind(null,e,Vn,Pi),n);break}Ho(e,Vn,Pi);break;case 5:Ho(e,Vn,Pi);break;default:throw Error(ce(329))}}}return Zn(e,Cr()),e.callbackNode===r?r3.bind(null,e):null}function Nm(e,t){var r=eu;return e.current.memoizedState.isDehydrated&&(ss(e,t).flags|=256),e=qd(e,t),e!==2&&(t=Vn,Vn=r,t!==null&&Mm(t)),e}function Mm(e){Vn===null?Vn=e:Vn.push.apply(Vn,e)}function LM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Xa(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ro(e,t){for(t&=~Zv,t&=~bh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Va(t),n=1<<r;e[r]=-1,t&=~n}}function Tb(e){if(pt&6)throw Error(ce(327));ll();var t=Td(e,0);if(!(t&1))return Zn(e,Cr()),null;var r=qd(e,t);if(e.tag!==0&&r===2){var n=em(e);n!==0&&(t=n,r=Nm(e,n))}if(r===1)throw r=Cu,ss(e,0),ro(e,t),Zn(e,Cr()),r;if(r===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ho(e,Vn,Pi),Zn(e,Cr()),null}function Jv(e,t){var r=pt;pt|=1;try{return e(t)}finally{pt=r,pt===0&&(bl=Cr()+500,mh&&Mo())}}function ms(e){io!==null&&io.tag===0&&!(pt&6)&&ll();var t=pt;pt|=1;var r=ja.transition,n=At;try{if(ja.transition=null,At=1,e)return e()}finally{At=n,ja.transition=r,pt=t,!(pt&6)&&Mo()}}function ex(){ia=Js.current,er(Js)}function ss(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,pM(r)),Tr!==null)for(r=Tr.return;r!==null;){var n=r;switch($v(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rd();break;case 3:vl(),er(Yn),er(Sn),Gv();break;case 5:Uv(n);break;case 4:vl();break;case 13:er(dr);break;case 19:er(dr);break;case 10:Lv(n.type._context);break;case 22:case 23:ex()}r=r.return}if(Kr=e,Tr=e=ko(e.current,null),ln=ia=t,Fr=0,Cu=null,Zv=bh=gs=0,Vn=eu=null,Zo!==null){for(t=0;t<Zo.length;t++)if(r=Zo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Zo=null}return e}function n3(e,t){do{var r=Tr;try{if(Rv(),bd.current=Hd,Vd){for(var n=hr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Vd=!1}if(ps=0,Hr=Br=hr=null,Qc=!1,Su=0,qv.current=null,r===null||r.return===null){Fr=1,Cu=t,Tr=null;break}e:{var i=e,o=r.return,s=r,l=t;if(t=ln,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=xb(o);if(p!==null){p.flags&=-257,bb(p,o,s,i,t),p.mode&1&&vb(i,u,t),t=p,l=u;var m=t.updateQueue;if(m===null){var y=new Set;y.add(l),t.updateQueue=y}else m.add(l);break e}else{if(!(t&1)){vb(i,u,t),tx();break e}l=Error(ce(426))}}else if(rr&&s.mode&1){var w=xb(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),bb(w,o,s,i,t),Dv(xl(l,s));break e}}i=l=xl(l,s),Fr!==4&&(Fr=2),eu===null?eu=[i]:eu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=F4(i,l,t);db(i,x);break e;case 1:s=l;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bo===null||!bo.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=z4(i,s,t);db(i,S);break e}}i=i.return}while(i!==null)}o3(r)}catch(b){t=b,Tr===r&&r!==null&&(Tr=r=r.return);continue}break}while(!0)}function a3(){var e=Xd.current;return Xd.current=Hd,e===null?Hd:e}function tx(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Kr===null||!(gs&268435455)&&!(bh&268435455)||ro(Kr,ln)}function qd(e,t){var r=pt;pt|=2;var n=a3();(Kr!==e||ln!==t)&&(Pi=null,ss(e,t));do try{BM();break}catch(a){n3(e,a)}while(!0);if(Rv(),pt=r,Xd.current=n,Tr!==null)throw Error(ce(261));return Kr=null,ln=0,Fr}function BM(){for(;Tr!==null;)i3(Tr)}function FM(){for(;Tr!==null&&!fN();)i3(Tr)}function i3(e){var t=l3(e.alternate,e,ia);e.memoizedProps=e.pendingProps,t===null?o3(e):Tr=t,qv.current=null}function o3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=EM(r,t),r!==null){r.flags&=32767,Tr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fr=6,Tr=null;return}}else if(r=TM(r,t,ia),r!==null){Tr=r;return}if(t=t.sibling,t!==null){Tr=t;return}Tr=t=e}while(t!==null);Fr===0&&(Fr=5)}function Ho(e,t,r){var n=At,a=ja.transition;try{ja.transition=null,At=1,zM(e,t,r,n)}finally{ja.transition=a,At=n}return null}function zM(e,t,r,n){do ll();while(io!==null);if(pt&6)throw Error(ce(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(wN(e,i),e===Kr&&(Tr=Kr=null,ln=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Kf||(Kf=!0,c3(Ad,function(){return ll(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ja.transition,ja.transition=null;var o=At;At=1;var s=pt;pt|=4,qv.current=null,DM(e,r),e3(r,e),sM(om),Ed=!!im,om=im=null,e.current=r,IM(r),dN(),pt=s,At=o,ja.transition=i}else e.current=r;if(Kf&&(Kf=!1,io=e,Yd=a),i=e.pendingLanes,i===0&&(bo=null),gN(r.stateNode),Zn(e,Cr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Kd)throw Kd=!1,e=Cm,Cm=null,e;return Yd&1&&e.tag!==0&&ll(),i=e.pendingLanes,i&1?e===Om?tu++:(tu=0,Om=e):tu=0,Mo(),null}function ll(){if(io!==null){var e=F5(Yd),t=ja.transition,r=At;try{if(ja.transition=null,At=16>e?16:e,io===null)var n=!1;else{if(e=io,io=null,Yd=0,pt&6)throw Error(ce(331));var a=pt;for(pt|=4,ke=e.current;ke!==null;){var i=ke,o=i.child;if(ke.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ke=u;ke!==null;){var f=ke;switch(f.tag){case 0:case 11:case 15:Jc(8,f,i)}var d=f.child;if(d!==null)d.return=f,ke=d;else for(;ke!==null;){f=ke;var h=f.sibling,p=f.return;if(Z4(f),f===u){ke=null;break}if(h!==null){h.return=p,ke=h;break}ke=p}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ke=o;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ke=x;break e}ke=i.return}}var g=e.current;for(ke=g;ke!==null;){o=ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ke=v;else e:for(o=g;ke!==null;){if(s=ke,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:xh(9,s)}}catch(b){vr(s,s.return,b)}if(s===o){ke=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,ke=S;break e}ke=s.return}}if(pt=a,Mo(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(fh,e)}catch{}n=!0}return n}finally{At=r,ja.transition=t}}return!1}function Eb(e,t,r){t=xl(r,t),t=F4(e,t,1),e=xo(e,t,1),t=$n(),e!==null&&(hf(e,1,t),Zn(e,t))}function vr(e,t,r){if(e.tag===3)Eb(e,e,r);else for(;t!==null;){if(t.tag===3){Eb(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(bo===null||!bo.has(n))){e=xl(r,e),e=z4(t,e,1),t=xo(t,e,1),e=$n(),t!==null&&(hf(t,1,e),Zn(t,e));break}}t=t.return}}function UM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$n(),e.pingedLanes|=e.suspendedLanes&r,Kr===e&&(ln&r)===r&&(Fr===4||Fr===3&&(ln&130023424)===ln&&500>Cr()-Qv?ss(e,0):Zv|=r),Zn(e,t)}function s3(e,t){t===0&&(e.mode&1?(t=Lf,Lf<<=1,!(Lf&130023424)&&(Lf=4194304)):t=1);var r=$n();e=Fi(e,t),e!==null&&(hf(e,t,r),Zn(e,r))}function GM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),s3(e,r)}function WM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(t),s3(e,r)}var l3;l3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yn.current)Xn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xn=!1,AM(e,t,r);Xn=!!(e.flags&131072)}else Xn=!1,rr&&t.flags&1048576&&d4(t,Fd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;kd(e,t),e=t.pendingProps;var a=gl(t,Sn.current);sl(t,r),a=Vv(null,t,n,e,a,r);var i=Hv();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qn(n)?(i=!0,Ld(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Fv(t),a.updater=vh,t.stateNode=a,a._reactInternals=t,gm(t,n,e,r),t=vm(null,t,n,!0,i,r)):(t.tag=0,rr&&i&&Ev(t),Tn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(kd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=HM(n),e=Ra(n,e),a){case 0:t=ym(null,t,n,e,r);break e;case 1:t=Sb(null,t,n,e,r);break e;case 11:t=wb(null,t,n,e,r);break e;case 14:t=kb(null,t,n,Ra(n.type,e),r);break e}throw Error(ce(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),ym(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),Sb(e,t,n,a,r);case 3:e:{if(V4(t),e===null)throw Error(ce(387));n=t.pendingProps,i=t.memoizedState,a=i.element,v4(e,t),Gd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=xl(Error(ce(423)),t),t=jb(e,t,n,r,a);break e}else if(n!==a){a=xl(Error(ce(424)),t),t=jb(e,t,n,r,a);break e}else for(la=vo(t.stateNode.containerInfo.firstChild),ca=t,rr=!0,za=null,r=m4(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ml(),n===a){t=zi(e,t,r);break e}Tn(e,t,n,r)}t=t.child}return t;case 5:return x4(t),e===null&&dm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,sm(n,a)?o=null:i!==null&&sm(n,i)&&(t.flags|=32),W4(e,t),Tn(e,t,o,r),t.child;case 6:return e===null&&dm(t),null;case 13:return H4(e,t,r);case 4:return zv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=yl(t,null,n,r):Tn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),wb(e,t,n,a,r);case 7:return Tn(e,t,t.pendingProps,r),t.child;case 8:return Tn(e,t,t.pendingProps.children,r),t.child;case 12:return Tn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Yt(zd,n._currentValue),n._currentValue=o,i!==null)if(Xa(i.value,o)){if(i.children===a.children&&!Yn.current){t=zi(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Ti(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),hm(i.return,r,t),s.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ce(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),hm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,sl(t,r),a=Ca(a),n=n(a),t.flags|=1,Tn(e,t,n,r),t.child;case 14:return n=t.type,a=Ra(n,t.pendingProps),a=Ra(n.type,a),kb(e,t,n,a,r);case 15:return U4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),kd(e,t),t.tag=1,qn(n)?(e=!0,Ld(t)):e=!1,sl(t,r),B4(t,n,a),gm(t,n,a,r),vm(null,t,n,!0,e,r);case 19:return X4(e,t,r);case 22:return G4(e,t,r)}throw Error(ce(156,t.tag))};function c3(e,t){return I5(e,t)}function VM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(e,t,r,n){return new VM(e,t,r,n)}function rx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HM(e){if(typeof e=="function")return rx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wv)return 11;if(e===kv)return 14}return 2}function ko(e,t){var r=e.alternate;return r===null?(r=wa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pd(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")rx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gs:return ls(r.children,a,i,t);case bv:o=8,a|=8;break;case Bg:return e=wa(12,r,t,a|2),e.elementType=Bg,e.lanes=i,e;case Fg:return e=wa(13,r,t,a),e.elementType=Fg,e.lanes=i,e;case zg:return e=wa(19,r,t,a),e.elementType=zg,e.lanes=i,e;case x5:return wh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y5:o=10;break e;case v5:o=9;break e;case wv:o=11;break e;case kv:o=14;break e;case Qi:o=16,n=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=wa(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ls(e,t,r,n){return e=wa(7,e,n,t),e.lanes=r,e}function wh(e,t,r,n){return e=wa(22,e,n,t),e.elementType=x5,e.lanes=r,e.stateNode={isHidden:!1},e}function Xp(e,t,r){return e=wa(6,e,null,t),e.lanes=r,e}function Kp(e,t,r){return t=wa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function XM(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Np(0),this.expirationTimes=Np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Np(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function nx(e,t,r,n,a,i,o,s,l){return e=new XM(e,t,r,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=wa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fv(i),e}function KM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function u3(e){if(!e)return Co;e=e._reactInternals;e:{if(Ms(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var r=e.type;if(qn(r))return u4(e,r,t)}return t}function f3(e,t,r,n,a,i,o,s,l){return e=nx(r,n,!0,e,a,i,o,s,l),e.context=u3(null),r=e.current,n=$n(),a=wo(r),i=Ti(n,a),i.callback=t??null,xo(r,i,a),e.current.lanes=a,hf(e,a,n),Zn(e,n),e}function kh(e,t,r,n){var a=t.current,i=$n(),o=wo(a);return r=u3(r),t.context===null?t.context=r:t.pendingContext=r,t=Ti(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=xo(a,t,o),e!==null&&(Ha(e,a,o,i),xd(e,a,o)),o}function Zd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $b(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ax(e,t){$b(e,t),(e=e.alternate)&&$b(e,t)}function YM(){return null}var d3=typeof reportError=="function"?reportError:function(e){console.error(e)};function ix(e){this._internalRoot=e}Sh.prototype.render=ix.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));kh(e,t,null,null)};Sh.prototype.unmount=ix.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ms(function(){kh(null,e,null,null)}),t[Bi]=null}};function Sh(e){this._internalRoot=e}Sh.prototype.unstable_scheduleHydration=function(e){if(e){var t=G5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<to.length&&t!==0&&t<to[r].priority;r++);to.splice(r,0,e),r===0&&V5(e)}};function ox(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Db(){}function qM(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Zd(o);i.call(u)}}var o=f3(t,n,e,0,null,!1,!1,"",Db);return e._reactRootContainer=o,e[Bi]=o.current,vu(e.nodeType===8?e.parentNode:e),ms(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var s=n;n=function(){var u=Zd(l);s.call(u)}}var l=nx(e,0,!1,null,null,!1,!1,"",Db);return e._reactRootContainer=l,e[Bi]=l.current,vu(e.nodeType===8?e.parentNode:e),ms(function(){kh(t,l,r,n)}),l}function Ph(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Zd(o);s.call(l)}}kh(t,o,e,a)}else o=qM(r,t,e,a,n);return Zd(o)}z5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Gc(t.pendingLanes);r!==0&&(Pv(t,r|1),Zn(t,Cr()),!(pt&6)&&(bl=Cr()+500,Mo()))}break;case 13:ms(function(){var n=Fi(e,1);if(n!==null){var a=$n();Ha(n,e,1,a)}}),ax(e,1)}};Cv=function(e){if(e.tag===13){var t=Fi(e,134217728);if(t!==null){var r=$n();Ha(t,e,134217728,r)}ax(e,134217728)}};U5=function(e){if(e.tag===13){var t=wo(e),r=Fi(e,t);if(r!==null){var n=$n();Ha(r,e,t,n)}ax(e,t)}};G5=function(){return At};W5=function(e,t){var r=At;try{return At=e,t()}finally{At=r}};Zg=function(e,t,r){switch(t){case"input":if(Wg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=gh(n);if(!a)throw Error(ce(90));w5(n),Wg(n,a)}}}break;case"textarea":S5(e,r);break;case"select":t=r.value,t!=null&&nl(e,!!r.multiple,t,!1)}};_5=Jv;A5=ms;var ZM={usingClientEntryPoint:!1,Events:[gf,Xs,gh,N5,M5,Jv]},Nc={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QM={bundleType:Nc.bundleType,version:Nc.version,rendererPackageName:Nc.rendererPackageName,rendererConfig:Nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$5(e),e===null?null:e.stateNode},findFiberByHostInstance:Nc.findFiberByHostInstance||YM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{fh=Yf.inject(QM),ai=Yf}catch{}}fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZM;fa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ox(t))throw Error(ce(200));return KM(e,t,null,r)};fa.createRoot=function(e,t){if(!ox(e))throw Error(ce(299));var r=!1,n="",a=d3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=nx(e,1,!1,null,null,r,!1,n,a),e[Bi]=t.current,vu(e.nodeType===8?e.parentNode:e),new ix(t)};fa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=$5(t),e=e===null?null:e.stateNode,e};fa.flushSync=function(e){return ms(e)};fa.hydrate=function(e,t,r){if(!jh(t))throw Error(ce(200));return Ph(null,e,t,!0,r)};fa.hydrateRoot=function(e,t,r){if(!ox(e))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=d3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=f3(t,null,e,1,r??null,a,!1,i,o),e[Bi]=t.current,vu(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Sh(t)};fa.render=function(e,t,r){if(!jh(t))throw Error(ce(200));return Ph(null,e,t,!1,r)};fa.unmountComponentAtNode=function(e){if(!jh(e))throw Error(ce(40));return e._reactRootContainer?(ms(function(){Ph(null,null,e,!1,function(){e._reactRootContainer=null,e[Bi]=null})}),!0):!1};fa.unstable_batchedUpdates=Jv;fa.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!jh(r))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return Ph(e,t,r,!1,n)};fa.version="18.3.1-next-f1338f8080-20240426";function h3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h3)}catch(e){console.error(e)}}h3(),h5.exports=fa;var JM=h5.exports,Ib=JM;Rg.createRoot=Ib.createRoot,Rg.hydrateRoot=Ib.hydrateRoot;const Ei=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:i="I know the risk and insist to continue",cancelText:o="Cancel"})=>e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden transform transition-all scale-100",children:[c.jsxs("div",{className:"bg-amber-500/10 p-6 flex flex-col items-center justify-center border-b border-amber-500/20",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-amber-600 dark:text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white text-center",children:n})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-center text-sm leading-relaxed",children:a})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-gray-200 dark:border-slate-800",children:[c.jsx("button",{onClick:t,className:"px-4 py-2 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-slate-200 font-semibold rounded-lg border border-gray-300 dark:border-slate-600 transition-colors text-sm",children:o}),c.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all active:scale-95 text-sm",children:i})]})]})}):null,e_=({onFileSelected:e,onGenerateFakeDng:t,fileName:r,hasGeneratedData:n,viewMode:a,onSetViewMode:i,patternPeriod:o,onPatternPeriodChange:s,fillFactor:l,onFillFactorChange:u,patternPhase:f,onPatternPhaseChange:d,showPatternControls:h,onOpenAbout:p,onShowExif:m,bridgeStatus:y,onBridgeClick:w,isDrLabOpen:x,onToggleDrLab:g,isColorLabOpen:v,onToggleColorLab:S,isFftLabOpen:b,onToggleFftLab:k,isSfrLabOpen:P,onToggleSfrLab:C,onGenerateTestPic:N,onPTCFilesSelected:O,onDownloadDng:E,isThreePlane:M,onOpenDatabase:_,isSidebarOpen:T,onToggleSidebar:$})=>{const I=j.useRef(null),A=j.useRef(null),[R,L]=j.useState(!1),[V,ee]=j.useState(!1),[G,W]=j.useState(!1),[ne,Q]=j.useState(!1),[B,ie]=j.useState("direct"),K=j.useRef(null),X=j.useRef(null);j.useEffect(()=>{const te=he=>{K.current&&!K.current.contains(he.target)&&W(!1),X.current&&!X.current.contains(he.target)&&Q(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]);const se=te=>{var he;W(!1),te==="direct"?(ie("direct"),L(!0)):!y.isConnected||!y.hasDngConverter?ee(!0):(ie("convert"),(he=I.current)==null||he.click())},de=()=>{var te;L(!1),(te=I.current)==null||te.click()},J=te=>{var ve;const he=(ve=te.target.files)==null?void 0:ve[0];he&&e(he,B),te.target.value=""},je=te=>{te.target.files&&te.target.files.length>0&&O(te.target.files),te.target.value=""},ye=r==="pattern_test.dng"||(r==null?void 0:r.startsWith("Diff_"));return c.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 flex-shrink-0 relative z-50 font-mono",children:[c.jsx(Ei,{isOpen:R,onClose:()=>L(!1),onConfirm:de,title:"Format Compatibility Warning",confirmText:"Continue",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200 text-base",children:"Adobe DNG ConverterDNG"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Only 4-channel DNG files output by Adobe DNG Converter are fully guaranteed to be supported."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsx(Ei,{isOpen:V,onClose:()=>ee(!1),onConfirm:()=>ee(!1),title:"DNG Converter Missing",confirmText:"OK",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-base",children:"JiangBridge Offline or Adobe DNG Converter not installed (you may have to restart your device after installing ADC to use it here)"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"To use the conversion feature, you must run JiangBridge locally and have Adobe DNG Converter installed on your system."}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 border border-gray-400 dark:border-slate-600",children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-500 mb-1",children:"Download Adobe DNG Converter:"}),c.jsx("a",{href:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline text-xs break-all",children:"https://helpx.adobe.com/camera-raw/using/adobe-dng-converter.html"})]})]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-black dark:text-white text-center sm:text-left tracking-tight border-2 border-black dark:border-white px-2 py-1 bg-white dark:bg-black",children:"Jiangtherapee_Online"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-400 hidden lg:block max-w-xs truncate font-bold",title:r||"No image loaded",children:r||"No_Image_Loaded"}),M&&c.jsx("span",{className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-2 border-red-500 dark:border-red-800 text-[10px] font-bold px-2 py-1 animate-pulse",children:" 3-PLANE / RGB MODE"})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-end",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:y.isConnected?void 0:w,className:`px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-black dark:border-gray-500 ${y.isConnected?"bg-emerald-100 text-emerald-900 border-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-600 cursor-default":"bg-pink-100 text-pink-900 border-pink-800 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-600 hover:bg-pink-200 dark:hover:bg-pink-900/50 cursor-pointer animate-pulse"}`,title:y.isConnected?"Local Bridge Service Connected":"Click to download Jiangbridge",children:[c.jsx("span",{className:`w-2 h-2 ${y.isConnected?"bg-emerald-600":"bg-pink-600"}`}),y.isConnected?`JiangBridge Ready ${y.hasDngConverter?"DNG+":""}`:"JiangBridge Offline"]}),x&&c.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-indigo-800 bg-indigo-100 text-indigo-900 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-600 hover:bg-indigo-200 dark:hover:bg-indigo-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off DR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-indigo-600 animate-pulse"}),"DR Lab On"]}),v&&c.jsxs("button",{onClick:S,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-yellow-800 bg-yellow-100 text-yellow-900 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-600 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off Color Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-500 animate-pulse"}),"Color Lab On"]}),b&&c.jsxs("button",{onClick:k,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-fuchsia-800 bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-900/30 dark:text-fuchsia-400 dark:border-fuchsia-600 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off FFT Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-fuchsia-600 animate-pulse"}),"FFT Lab On"]}),P&&c.jsxs("button",{onClick:C,className:"px-3 py-1.5 text-xs font-bold transition-all duration-200 flex items-center gap-1.5 shadow-[2px_2px_0px_black] border-2 border-orange-800 bg-orange-100 text-orange-900 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-600 hover:bg-orange-200 dark:hover:bg-orange-900/50 cursor-pointer animate-in fade-in",title:"Click to turn off SFR Lab",children:[c.jsx("span",{className:"w-2 h-2 bg-orange-600 animate-pulse"}),"SFR Lab On"]}),n&&c.jsxs("div",{className:"flex bg-gray-200 dark:bg-slate-800 p-1 border-2 border-black dark:border-gray-500 shadow-inner transition-colors duration-300 gap-1",children:[c.jsx("button",{onClick:()=>i("reference"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="reference"?"bg-green-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"The perfect uniform input",children:"Perfect"}),c.jsx("button",{onClick:()=>i("sampled"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="sampled"?"bg-blue-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Sampled Sensor View with Aperture Visualization",children:"Sampled (Sensor)"}),c.jsx("button",{onClick:()=>i("processed"),className:`px-3 py-1.5 text-xs sm:text-sm font-bold transition-all duration-200 border-2 ${a==="processed"?"bg-purple-600 text-white border-black":"bg-gray-100 text-black border-transparent hover:bg-gray-300"}`,title:"Demosaiced Result",children:"Result"})]})]}),ye&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4 duration-300",children:[h&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Density (Period)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:o,onChange:te=>s(parseFloat(te.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-purple-500 border border-black",title:"Adjust the period of the line pairs in pixels"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0.1",max:"100",step:"0.01",value:o,onChange:te=>{const he=parseFloat(te.target.value);isNaN(he)||s(he)},className:"w-16 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-purple-700 dark:text-purple-300 text-right focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Phase"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:te=>d(parseFloat(te.target.value)),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-pink-500 border border-black",title:"Shift pattern phase (0-1 cycle)"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:te=>{const he=parseFloat(te.target.value);isNaN(he)||d(he)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-pink-700 dark:text-pink-300 text-right focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors duration-300"})})]})]}),c.jsxs("div",{className:"flex flex-col items-end mr-1 bg-gray-100 dark:bg-slate-800/50 p-1.5 border border-gray-400 dark:border-slate-600 transition-colors duration-300",children:[c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-400 font-mono uppercase tracking-wider mb-1",children:"Fill Factor"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:l*100,onChange:te=>u(parseInt(te.target.value)/100),className:"w-20 h-2 bg-gray-300 dark:bg-slate-700 appearance-none cursor-pointer accent-green-500 border border-black",title:"Adjust pixel aperture fill factor %"}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("input",{type:"number",min:"1",max:"100",step:"1",value:Math.round(l*100),onChange:te=>{const he=parseInt(te.target.value);isNaN(he)||u(Math.min(100,Math.max(1,he))/100)},className:"w-12 bg-white dark:bg-slate-900 border border-gray-400 dark:border-slate-600 px-1 py-0.5 text-xs font-mono text-green-700 dark:text-green-300 text-right focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-colors duration-300"}),c.jsx("span",{className:"ml-1 text-[10px] text-gray-500 dark:text-slate-500 font-mono",children:"%"})]})]})]})]}),c.jsxs("button",{onClick:E,className:`flex flex-col items-center justify-center p-2 transition-colors group border-2 border-black dark:border-gray-500 shadow-[2px_2px_0px_black] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none ${r!=null&&r.startsWith("Diff_")?"bg-fuchsia-100 hover:bg-fuchsia-200 dark:bg-fuchsia-900/40 dark:hover:bg-fuchsia-900/60":"bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700"}`,title:r!=null&&r.startsWith("Diff_")?"Export Subtracted Frame as DNG":"Download Synthetic DNG",children:[c.jsx("svg",{className:`w-5 h-5 ${r!=null&&r.startsWith("Diff_")?"text-fuchsia-600 group-hover:text-fuchsia-800":"text-gray-600 dark:text-slate-400 group-hover:text-black dark:group-hover:text-white"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),c.jsx("span",{className:"text-[8px] font-bold uppercase mt-0.5 opacity-70",children:"DNG"})]})]}),c.jsx("input",{type:"file",ref:I,onChange:J,className:"hidden",accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("input",{type:"file",ref:A,onChange:je,className:"hidden",multiple:!0,accept:".csv"}),c.jsxs("div",{className:"relative inline-block text-left",ref:X,children:[c.jsxs("button",{onClick:()=>Q(!ne),className:"bg-purple-700 hover:bg-purple-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["TEST Tools",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${ne?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ne&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>{Q(!1),t()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:"Generate Pattern DNG"})]}),c.jsxs("button",{onClick:()=>{Q(!1),x||g(),b&&k(),v&&S&&S(),P&&C&&C()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${x?"bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsxs("span",{children:["DR Lab ",x?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{Q(!1),S&&!v&&S(),x&&g(),b&&k(),P&&C&&C()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${v?"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:["Color Lab ",v?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{Q(!1),C&&!P&&C(),x&&g(),b&&k(),v&&S&&S()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${P?"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),c.jsxs("span",{children:["SFR Lab ",P?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{Q(!1),b||k(),x&&g(),v&&S&&S(),P&&C&&C()},className:`w-full text-left px-4 py-3 text-sm transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600 ${b?"bg-fuchsia-100 dark:bg-fuchsia-900/40 text-fuchsia-800 dark:text-fuchsia-300 font-bold":"text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:[c.jsx("svg",{className:"w-4 h-4 text-fuchsia-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2m0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsxs("span",{children:["FFT Lab ",b?"(On)":""]})]}),c.jsxs("button",{onClick:()=>{var te;Q(!1),(te=A.current)==null||te.click()},className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),c.jsx("span",{children:"Generate PTC & TargetSNR"})]})]})})]}),c.jsxs("div",{className:"relative inline-block text-left",ref:K,children:[c.jsxs("button",{onClick:()=>W(!G),className:"bg-cyan-700 hover:bg-cyan-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2",children:["Load Image",c.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${G?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),G&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden origin-top-right transition-all animate-in fade-in slide-in-from-top-2 border-2 border-black dark:border-gray-500",children:c.jsxs("div",{className:"py-1",children:[c.jsxs("button",{onClick:()=>se("direct"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2 border-b border-gray-300 dark:border-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 text-cyan-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c.jsx("span",{children:"Load Image (Direct)"})]}),c.jsxs("button",{onClick:()=>se("convert"),className:"w-full text-left px-4 py-3 text-sm text-gray-800 dark:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),c.jsx("span",{children:"Convert to Adobe DNG & Load"})]})]})})]}),r&&m&&c.jsxs("button",{onClick:m,className:"bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-1",title:"View EXIF Data",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"EXIF"]}),c.jsx("button",{onClick:p,className:"bg-teal-700 hover:bg-teal-600 text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap",children:"About/Tutorial/Tools"}),c.jsx("a",{href:"https://y-g-jiang.github.io/index.html",target:"_blank",rel:"noopener noreferrer",className:"bg-gray-300 hover:bg-gray-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-black dark:text-white font-bold py-2 px-4 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm no-underline",children:"Home"}),c.jsxs("button",{onClick:$,className:`bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-3 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_black] transition-all duration-100 text-sm whitespace-nowrap flex items-center gap-2 ${T?"":"ring-2 ring-cyan-500 ring-offset-2 dark:ring-offset-black"}`,title:T?"Hide Control Panel":"Show Control Panel",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),c.jsx("span",{className:"hidden sm:inline",children:T?"Hide Panel":"Show Panel"})]})]})]})},t_=({image:e,zoom:t,pan:r,onPanChange:n,onZoomChange:a,onSelectionChange:i,forcedSelection:o,theme:s,touchAction:l="pan",isMarking:u=!1,onPointClick:f,markers:d=[],gridRects:h=[],colorLabPoints:p=[],colorLabRects:m=[]})=>{var ne;const y=j.useRef(null),w=j.useRef(document.createElement("canvas")),[x,g]=j.useState(!1),[v,S]=j.useState({x:0,y:0}),b=j.useRef(null),k=j.useRef(null),P=j.useRef(null),[C,N]=j.useState(!1),[O,E]=j.useState(null),[M,_]=j.useState(null);j.useEffect(()=>{o!==void 0&&_(o)},[o]);const T=j.useCallback(()=>{const Q=y.current,B=Q==null?void 0:Q.getContext("2d");return{canvas:Q,ctx:B}},[]);j.useEffect(()=>{const Q=w.current,B=Q.getContext("2d");if(!e||!B)return;let ie=0,K=0;e instanceof ImageData?(ie=e.width,K=e.height):e instanceof HTMLImageElement&&(ie=e.naturalWidth,K=e.naturalHeight),!(ie===0||K===0)&&((Q.width!==ie||Q.height!==K)&&(Q.width=ie,Q.height=K),e instanceof ImageData?B.putImageData(e,0,0):(B.clearRect(0,0,ie,K),B.drawImage(e,0,0)))},[e]);const $=j.useCallback(()=>{const{canvas:Q,ctx:B}=T();if(!(!Q||!B||!e)){if(B.setTransform(1,0,0,1,0,0),B.fillStyle=s==="dark"?"rgb(15, 23, 42)":"rgb(243, 244, 246)",B.fillRect(0,0,Q.width,Q.height),B.setTransform(t,0,0,t,r.x,r.y),w.current.width>0&&(B.imageSmoothingEnabled=!1,B.drawImage(w.current,0,0)),M){B.strokeStyle="#06b6d4",B.lineWidth=1/t,B.fillStyle="rgba(6, 182, 212, 0.2)",B.beginPath(),B.rect(M.x,M.y,M.w,M.h),B.fill(),B.stroke(),B.save(),B.fillStyle="#fff";const ie=Math.max(10,14/t);B.font=`${ie}px monospace`,B.shadowColor="rgba(0,0,0,0.8)",B.shadowBlur=4,B.shadowOffsetX=1,B.shadowOffsetY=1,B.fillText(`${Math.round(M.w)}x${Math.round(M.h)}`,M.x,M.y-5/t),B.restore()}if(h&&h.length>0){B.save(),B.strokeStyle="#f59e0b",B.lineWidth=1/t,B.globalAlpha=.8,B.beginPath(),h.forEach(X=>{B.rect(X.x,X.y,X.w,X.h)}),B.stroke();const ie=h[0];B.fillStyle="#f59e0b";const K=Math.max(10,12/t);B.font=`${K}px monospace`,B.fillText(`${ie.w}x${ie.h}`,ie.x,ie.y-4/t),B.restore()}if(d&&d.length>0){B.save();const ie=6/t,K=Math.max(12,16/t);B.font=`bold ${K}px sans-serif`,B.textAlign="center",B.textBaseline="middle",d.forEach((X,se)=>{B.beginPath(),B.arc(X.x,X.y,ie,0,2*Math.PI),B.fillStyle="white",B.fill(),B.strokeStyle="#4338ca",B.lineWidth=2/t,B.stroke(),B.fillStyle="#4338ca",B.fillText((se+1).toString(),X.x,X.y-12/t)}),B.restore()}if(p&&p.length>0){B.save();const ie=5/t,K=Math.max(10,14/t);B.font=`bold ${K}px sans-serif`,B.textAlign="center",B.textBaseline="middle",p.forEach((X,se)=>{B.fillStyle="yellow",B.fillRect(X.x-ie,X.y-ie,ie*2,ie*2),B.strokeStyle="black",B.lineWidth=1/t,B.strokeRect(X.x-ie,X.y-ie,ie*2,ie*2),B.fillStyle="yellow",B.shadowColor="black",B.shadowBlur=2,B.fillText((se+1).toString(),X.x,X.y-10/t)}),B.restore()}if(m&&m.length>0){if(B.save(),B.strokeStyle="yellow",B.lineWidth=1/t,B.globalAlpha=.9,B.beginPath(),m.forEach(ie=>{B.rect(ie.x,ie.y,ie.w,ie.h)}),B.stroke(),m[0]){const ie=m[0];B.fillStyle="yellow",B.shadowColor="black",B.shadowBlur=3;const K=Math.max(10,12/t);B.font=`${K}px monospace`,B.fillText(`${Math.round(ie.w)}x${Math.round(ie.h)}`,ie.x,ie.y-4/t)}B.restore()}}},[T,e,t,r,s,M,d,h,p,m]);j.useEffect(()=>{const{canvas:Q}=T();if(!Q)return;const B=new ResizeObserver(()=>{Q.width=Q.clientWidth,Q.height=Q.clientHeight,$()});return B.observe(Q),()=>B.disconnect()},[T,$]),j.useEffect(()=>{$()},[$,e,r,t,s,M,d,h,p,m]);const I=Q=>{const{canvas:B}=T();if(!B)return{x:0,y:0};const ie=B.getBoundingClientRect();return{x:Q.clientX-ie.left,y:Q.clientY-ie.top}},A=(Q,B)=>({x:(Q-r.x)/t,y:(B-r.y)/t}),R=Q=>{Q.preventDefault();const B=I(Q);if(u){const ie=A(B.x,B.y);f&&f(ie);return}if(Q.shiftKey||l==="select"){N(!0);const ie=A(B.x,B.y),K={x:Math.floor(ie.x),y:Math.floor(ie.y)};E(K),_(null),i&&i(null)}else g(!0),S({x:B.x-r.x,y:B.y-r.y})},L=Q=>{const B=I(Q);if(C&&O){const ie=A(B.x,B.y),K=Math.floor(ie.x),X=Math.floor(ie.y),se=Math.min(O.x,K),de=Math.min(O.y,X),J=Math.max(O.x,K),je=Math.max(O.y,X),ye=J-se+1,te=je-de+1;_({x:se,y:de,w:ye,h:te})}else x&&n({x:B.x-v.x,y:B.y-v.y})},V=()=>{C&&(N(!1),M&&i&&M.w>0&&M.h>0&&i(M)),g(!1)},ee=Q=>{var B;if(Q.touches.length===1){const ie=Q.touches[0],K=(B=y.current)==null?void 0:B.getBoundingClientRect();if(!K)return;const X=ie.clientX-K.left,se=ie.clientY-K.top;if(u){const de=A(X,se);f&&f(de);return}if(l==="select"){const de=A(X,se),J={x:Math.floor(de.x),y:Math.floor(de.y)};E(J),N(!0),_(null),i&&i(null)}else P.current={x:X,y:se},S({x:X-r.x,y:se-r.y}),g(!0)}else if(Q.touches.length===2){const ie=Math.hypot(Q.touches[0].clientX-Q.touches[1].clientX,Q.touches[0].clientY-Q.touches[1].clientY);b.current=ie,k.current=t,g(!1),N(!1)}},G=Q=>{var B;if(Q.touches.length===1){const ie=Q.touches[0],K=(B=y.current)==null?void 0:B.getBoundingClientRect();if(!K)return;const X=ie.clientX-K.left,se=ie.clientY-K.top;if(u)return;if(C&&O){const de=A(X,se),J=Math.floor(de.x),je=Math.floor(de.y),ye=Math.min(O.x,J),te=Math.min(O.y,je),he=Math.max(O.x,J),ve=Math.max(O.y,je),Ke=he-ye+1,Fe=ve-te+1;_({x:ye,y:te,w:Ke,h:Fe})}else x&&n({x:X-v.x,y:se-v.y})}else if(Q.touches.length===2&&b.current&&k.current&&a){const K=Math.hypot(Q.touches[0].clientX-Q.touches[1].clientX,Q.touches[0].clientY-Q.touches[1].clientY)/b.current;a(k.current*K)}},W=()=>{C&&(N(!1),M&&i&&M.w>0&&M.h>0&&i(M)),g(!1),b.current=null,k.current=null,P.current=null};return c.jsx("canvas",{ref:y,className:`w-full h-full block touch-none ${u||C||(ne=window.event)!=null&&ne.shiftKey||l==="select"?"cursor-crosshair":"cursor-grab active:cursor-grabbing"}`,onMouseDown:R,onMouseMove:L,onMouseUp:V,onMouseLeave:V,onTouchStart:ee,onTouchMove:G,onTouchEnd:W,onTouchCancel:W,tabIndex:0})},Qd={"Canon EOS R5":"0.9766 -0.2953 -0.1254 -0.4276 1.2116 0.2433 -0.0437 0.1336 0.5131","Canon EOS 7D Mark II":"0.7268 -0.1082 -0.0969 -0.4186 1.1839 0.2663 -0.0825 0.2029 0.5839","Canon EOS R3":"0.9423 -0.2839 -0.1195 -0.4532 1.2377 0.2415 -0.0483 0.1374 0.5276","Canon EOS 5D Mark III":"0.6722 -0.0635 -0.0963 -0.4287 1.246 0.2028 -0.0908 0.2162 0.5668","Canon EOS 5DS R":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R6":"0.8293 -0.1611 -0.1132 -0.4759 1.2711 0.2275 -0.1013 0.2415 0.5509","Samsung NX U":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Canon EOS R5 Mark II":"0.9396 -0.2598 -0.1207 -0.4408 1.2296 0.2369 -0.0505 0.1575 0.6077","Canon EOS 5DS":"0.625 -0.0711 -0.0808 -0.5153 1.2794 0.2636 -0.1249 0.2198 0.561","Canon EOS R":"0.8293 -0.1789 -0.1094 -0.5025 1.2925 0.2327 -0.1199 0.2769 0.6108","Canon EOS R6 Mark II":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS R7":"1.0424 -0.3138 -0.13 -0.4221 1.1938 0.2584 -0.0547 0.1658 0.6183","Canon EOS 5D Mark IV":"0.6446 -0.0366 -0.0864 -0.4436 1.2204 0.2513 -0.0952 0.2496 0.6348","Canon EOS-1D X Mark III":"0.8971 -0.2022 -0.1242 -0.5405 1.3249 0.238 -0.128 0.2483 0.6072","Sony ILCE-7M3":"0.7374 -0.2389 -0.0551 -0.5435 1.3162 0.2519 -0.1006 0.1795 0.6552","Hasselblad 50-15-Coated5":"0.5002 -0.0878 0.0111 -0.4856 1.1929 0.3338 -0.1183 0.2041 0.7022","Canon EOS-1D X":"0.6847 -0.0614 -0.1014 -0.4669 1.2737 0.2139 -0.1197 0.2488 0.6846","Fujifilm GFX 100":"1.6212 -0.8423 -0.1583 -0.4336 1.2583 0.1937 -0.0195 0.0726 0.6199","Phase One IQ180":"0.6294 0.0686 -0.0712 -0.5435 1.3417 0.2211 -0.1006 0.2435 0.5042","Phase One IQ3 100MP":"0.2423 0 0 0 0.9901 0 0 0 0.7989","Canon EOS-1D X Mark II":"0.7596 -0.0978 -0.0967 -0.4808 1.2571 0.2503 -0.1398 0.2567 0.5752","Canon PowerShot Pro70":"-0.5106 1.0695 0.1576 0.382 0.0053 0.4566 -0.6497 1.0736 0.6701 -0.3336 1.1887 0.1394","Sony ILCE-9":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony ILCE-7CR":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCE-7S":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony ILCE-7RM3":"0.664 -0.1847 -0.0503 -0.5238 1.301 0.2474 -0.0993 0.1673 0.6527","Sony DSC-RX1RM3":"0.9034 -0.349 -0.0777 -0.4004 1.1841 0.2448 -0.0484 0.1352 0.5552","Sony ILCE-6100":"0.7657 -0.2847 -0.0607 -0.4083 1.1966 0.2389 -0.0684 0.1418 0.5844","Sony ILCE-7RM2":"0.6629 -0.19 -0.0483 -0.4618 1.2349 0.255 -0.0622 0.1381 0.6514","Sony ILCE-5100":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-7M2":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-7RM5":"0.82 -0.2976 -0.0719 -0.4296 1.2053 0.2532 -0.0429 0.1282 0.5774","Sony ILCA-77M2":"0.5991 -0.1732 -0.0443 -0.41 1.1989 0.2381 -0.0704 0.1467 0.5992","Sony ZV-1M2":"0.828 -0.2987 -0.0703 -0.3531 1.1645 0.2133 -0.055 0.1542 0.5312","Sony ILCE-7SM2":"0.5838 -0.143 -0.0246 -0.3497 1.1477 0.2297 -0.0748 0.1885 0.5778","Sony DSC-RX100M7":"1.0315 -0.439 -0.0937 -0.4859 1.2734 0.2365 -0.0734 0.1537 0.5997","Sony ILCE-6300":"0.5973 -0.1695 -0.0419 -0.3826 1.1797 0.2293 -0.0639 0.1398 0.5789","Sony ILCA-99M2":"0.666 -0.1918 -0.0471 -0.4613 1.2398 0.2485 -0.0649 0.1433 0.6447","Sony ILCE-9M3":"0.9811 -0.3908 -0.0752 -0.3704 1.1577 0.2417 -0.0073 0.095 0.598","Sony ILCE-9M2":"0.6389 -0.1703 -0.0378 -0.4562 1.2265 0.2587 -0.067 0.1489 0.655","Sony DSC-RX100M6":"0.7325 -0.2321 -0.0596 -0.3494 1.1674 0.2055 -0.0668 0.1562 0.5031","Sony ZV-E10M2":"0.6972 -0.2408 -0.06 -0.433 1.2101 0.2515 -0.0388 0.1277 0.5847","Sony DSC-RX100M4":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Sony ILCE-7SM3":"0.6912 -0.2127 -0.0469 -0.447 1.2175 0.2587 -0.0398 0.1478 0.6492","Sony ILCE-7":"0.5271 -0.0712 -0.0347 -0.6153 1.3653 0.2763 -0.1601 0.2366 0.7242","Sony ILCE-6000":"0.5991 -0.1456 -0.0455 -0.4764 1.2135 0.298 -0.0707 0.1425 0.6701","Sony ILCE-1":"0.8161 -0.2947 -0.0739 -0.4811 1.2668 0.2389 -0.0437 0.1229 0.6524","Sony ILCE-7M4":"0.746 -0.2365 -0.0588 -0.5687 1.3442 0.2474 -0.0624 0.1156 0.6584","Sony ILCE-7R":"0.4913 -0.0541 -0.0202 -0.613 1.3513 0.2906 -0.1564 0.2151 0.7183","Fujifilm X100VI":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-H2":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-A3":"1.2407 -0.5222 -0.1086 -0.2971 1.1116 0.212 -0.0294 0.1029 0.5284","Fujifilm X-H2S":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-Pro3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T50":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-T2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X-Pro2":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A7":"1.5055 -0.7391 -0.1274 -0.4062 1.2071 0.2238 -0.061 0.1217 0.6147","Fujifilm X-H1":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-S20":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-S10":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-T30":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X30":"1.2328 -0.5256 -0.1144 -0.4469 1.2927 0.1675 -0.0087 0.1291 0.4351","Fujifilm GFX 50R":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X100V":"1.3717 -0.649 -0.1154 -0.4348 1.2266 0.2335 -0.069 0.1286 0.6134","Fujifilm X-A5":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X100F":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T100":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm XQ1":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-T4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-E3":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-T20":"1.1434 -0.4948 -0.121 -0.3746 1.2042 0.1903 -0.0666 0.1479 0.5235","Fujifilm X-A2":"1.0763 -0.456 -0.0917 -0.3346 1.1311 0.2322 -0.0475 0.1135 0.5843","Fujifilm GFX 50S":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-A1":"1.1086 -0.4555 -0.0839 -0.3512 1.131 0.2517 -0.0815 0.1341 0.594","Fujifilm X70":"1.045 -0.4329 -0.0878 -0.3217 1.1105 0.2421 -0.0752 0.1758 0.6519","Fujifilm FinePix S1":"1.2297 -0.4882 -0.1202 -0.2106 1.0691 0.1623 -0.0088 0.1312 0.479","Fujifilm XQ2":"0.9252 -0.2704 -0.1064 -0.5893 1.4265 0.1717 -0.1101 0.2341 0.4349","Fujifilm X-E2":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm GFX 100RF":"1.2806 -0.5779 -0.111 -0.3546 1.1507 0.2318 -0.0177 0.0996 0.5715","Fujifilm X-T10":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X-E5":"1.1809 -0.5358 -0.1141 -0.4248 1.2164 0.2343 -0.0514 0.1097 0.5848","Fujifilm X100T":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X100S":"1.0592 -0.4262 -0.1008 -0.3514 1.1355 0.2465 -0.087 0.2025 0.6386","Fujifilm X-T3":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598","Fujifilm X-M5":"1.2836 -0.5909 -0.1032 -0.3087 1.1132 0.2236 -0.0035 0.0872 0.533","Fujifilm X-M1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm X-T1":"0.8458 -0.2451 -0.0855 -0.4597 1.2447 0.2407 -0.1475 0.2482 0.6526","Fujifilm X20":"1.1768 -0.4971 -0.1133 -0.4904 1.2927 0.2183 -0.048 0.1723 0.4605","Fujifilm GFX 50S II":"1.1756 -0.4754 -0.0874 -0.3056 1.1045 0.2305 -0.0381 0.1457 0.6006","Fujifilm X-Pro1":"1.0413 -0.3996 -0.0993 -0.3721 1.164 0.2361 -0.0733 0.154 0.6011","Fujifilm XF10":"1.1673 -0.476 -0.1041 -0.3988 1.2058 0.2166 -0.0771 0.1417 0.5569","Fujifilm X-E2S":"1.1562 -0.5118 -0.0961 -0.3022 1.1007 0.2311 -0.0525 0.1569 0.6097","Nikon Coolpix P330":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P1000":"1.4294 -0.6116 -0.1333 -0.1628 1.0219 0.1637 -0.0014 0.1158 0.5022","Nikon Coolpix P340":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7800":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon Coolpix P7700":"1.0321 -0.392 -0.0931 -0.275 1.1146 0.1824 -0.0442 0.1545 0.5539","Nikon 1 S2":"0.6612 -0.1342 -0.0618 -0.3338 1.1055 0.2623 -0.0174 0.1792 0.5075","Nikon D3300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D3200":"0.7013 -0.1408 -0.0635 -0.5268 1.2902 0.264 -0.147 0.2801 0.7379","Nikon Z 8":"1.1423 -0.4564 -0.1123 -0.4816 1.2895 0.2119 -0.021 0.1061 0.7282","Nikon D810A":"1.1973 -0.5685 -0.0888 -0.1965 1.0326 0.1901 -0.0115 0.1123 0.7169","Nikon D5500":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon Z 6 3":"1.1206 -0.4286 -0.0941 -0.4879 1.2847 0.2251 -0.0745 0.1654 0.7374","Nikon D750":"0.902 -0.289 -0.0715 -0.4535 1.2436 0.2348 -0.0934 0.1919 0.7086","Nikon Z 6":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D500":"0.8813 -0.321 -0.1036 -0.4703 1.2868 0.2021 -0.1054 0.194 0.6129","Nikon D3400":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5300":"0.6988 -0.1384 -0.0714 -0.5631 1.341 0.2447 -0.1485 0.2204 0.7318","Nikon D5600":"0.8821 -0.2938 -0.0785 -0.4178 1.2142 0.2287 -0.0824 0.1651 0.686","Nikon D780":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon Z 6 2":"0.9943 -0.3269 -0.0839 -0.5323 1.3269 0.2259 -0.1198 0.2083 0.7557","Nikon D5":"0.92 -0.3522 -0.0992 -0.5755 1.3803 0.2117 -0.0753 0.1486 0.6338","Nikon 1 J4":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D800":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","Nikon 1 S1":"0.8994 -0.2667 -0.0865 -0.4594 1.2324 0.2552 -0.0699 0.1786 0.626","Nikon D850":"1.0405 -0.3755 -0.127 -0.5461 1.3787 0.1793 -0.104 0.2015 0.6785","Nikon 1 J3":"0.6588 -0.1305 -0.0693 -0.3277 1.0987 0.2634 -0.0355 0.2016 0.5106","Nikon D7200":"0.8322 -0.3112 -0.1047 -0.6367 1.4342 0.2179 -0.0988 0.1638 0.6394","Nikon Z 5":"0.8695 -0.2558 -0.0648 -0.5015 1.2711 0.2575 -0.1279 0.2215 0.7514","Nikon Z 50":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z 7 2":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon 1 J5":"0.752 -0.2518 -0.0645 -0.3844 1.2102 0.1945 -0.0913 0.2249 0.6835","Nikon Z 5 2":"1.3133 -0.5542 -0.128 -0.4325 1.2543 0.1972 0.0034 0.0792 0.7662","Nikon Z fc":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon Z f":"1.1607 -0.4491 -0.0977 -0.4522 1.246 0.2304 -0.0458 0.1519 0.7616","Nikon D610":"0.8178 -0.2245 -0.0609 -0.4857 1.2394 0.2776 -0.1207 0.2086 0.7298","Nikon Z 7":"1.3705 -0.6004 -0.14 -0.5464 1.3568 0.2062 -0.094 0.1706 0.7618","Nikon Df":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon 1 V3":"0.5958 -0.1559 -0.0571 -0.4021 1.1453 0.2939 -0.0634 0.1548 0.5087","Nikon D7000":"0.8198 -0.2239 -0.0724 -0.4871 1.2389 0.2798 -0.1043 0.205 0.7181","Nikon Z 9":"1.3389 -0.6049 -0.1441 -0.4544 1.2757 0.1969 0.0229 0.0498 0.739","Nikon Z 50 2":"1.164 -0.4829 -0.1079 -0.5107 1.3006 0.2325 -0.0972 0.1711 0.738","Nikon D4S":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","Nikon D810":"0.9369 -0.3195 -0.0791 -0.4488 1.243 0.2301 -0.0893 0.1796 0.6872","Nikon D4":"0.8598 -0.2848 -0.0857 -0.5618 1.3606 0.2195 -0.1002 0.1773 0.7137","DXO ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","DXO-ONE":"0.6596 -0.2079 -0.0562 -0.4782 1.3016 0.1933 -0.097 0.1581 0.5181","Nikon D800E":"0.7866 -0.2108 -0.0555 -0.4869 1.2483 0.2681 -0.1176 0.2069 0.7501","ZEISS ZX1":"1 -0.4766 -0.0938 -0.2969 1.1328 0.1875 -0.0313 0.1094 0.7422","PENTAX K-50":"0.8628 -0.2607 -0.1156 -0.3995 1.2301 0.1881 -0.099 0.1735 0.6595","PENTAX K-500":"0.8513 -0.2572 -0.114 -0.3995 1.2301 0.1881 -0.1003 0.1758 0.6683","PENTAX K-3 II":"0.8571 -0.259 -0.1148 -0.3995 1.2301 0.1881 -0.1052 0.1844 0.7013","PENTAX K-S2":"0.8009 -0.2517 -0.114 -0.3882 1.235 0.1689 -0.0844 0.1493 0.6312","PENTAX K-3":"0.8761 -0.2648 -0.1173 -0.3995 1.2301 0.1881 -0.0901 0.1579 0.6001","PENTAX KP":"0.7357 -0.2031 -0.132 -0.4842 1.3555 0.1349 -0.1538 0.2416 0.5736","PENTAX MX-1":"0.8804 -0.2523 -0.1238 -0.2423 1.1627 0.086 -0.0682 0.1774 0.4753","PENTAX K-70":"0.8117 -0.2078 -0.1275 -0.4359 1.2953 0.1515 -0.1096 0.1965 0.6073","PENTAX K-3 Mark III":"0.6842 -0.1581 -0.0867 -0.4614 1.2728 0.2065 -0.0639 0.1428 0.5682","PENTAX 645Z":"0.9829 -0.31 -0.1271 -0.3685 1.2133 0.1721 -0.1068 0.1977 0.6854","PENTAX K-1":"0.8566 -0.2746 -0.1201 -0.3612 1.2204 0.155 -0.0893 0.168 0.6264","PENTAX Q7":"1.2995 -0.5593 -0.1107 -0.1879 1.0139 0.2027 -0.0064 0.1233 0.4919","Canon PowerShot SX60 HS":"1.3161 -0.5451 -0.1344 -0.1989 1.0654 0.1531 -0.0047 0.1271 0.4955","Canon PowerShot G15":"0.7474 -0.2301 -0.0567 -0.4056 1.1456 0.2975 -0.0222 0.0716 0.4181","Canon PowerShot G5 X Mark II":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon PowerShot G16":"0.802 -0.2687 -0.0682 -0.3704 1.1879 0.2052 -0.0965 0.1921 0.5556","Canon PowerShot S120":"0.6961 -0.1685 -0.0695 -0.4625 1.2945 0.1836 -0.1114 0.2152 0.5518","Canon PowerShot G1 X":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M5":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS M6":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G7 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G7 X Mark II":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G9 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G3 X":"0.9701 -0.3857 -0.0921 -0.3149 1.1537 0.1817 -0.0786 0.1817 0.5147","Canon EOS 6D Mark II":"0.6875 -0.097 -0.0932 -0.4691 1.2459 0.2501 -0.0874 0.1953 0.5809","Canon PowerShot G1 X Mark III":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon PowerShot G9 X Mark II":"1.0056 -0.4131 -0.0944 -0.2576 1.1143 0.1625 -0.0238 0.1294 0.5179","Canon EOS 200D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","Canon EOS R10":"0.9269 -0.2012 -0.1107 -0.399 1.1762 0.2527 -0.0569 0.2093 0.4913","Canon PowerShot G5 X":"0.9602 -0.3823 -0.0937 -0.2984 1.1495 0.1675 -0.0407 0.1415 0.5049","Canon PowerShot G1 X Mark II":"0.7378 -0.1255 -0.1043 -0.4088 1.2251 0.2048 -0.0876 0.1946 0.5805","Canon EOS M100":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS RP":"0.8608 -0.2097 -0.1178 -0.5425 1.3265 0.2383 -0.1149 0.2238 0.568","Canon EOS 7D":"0.6844 -0.0996 -0.0856 -0.3876 1.1761 0.2396 -0.0593 0.1772 0.6198","Canon EOS 90D":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon PowerShot V1":"1.26 -0.4747 -0.2027 -0.611 1.5868 -0.0029 0.011 0.0479 0.6011","Canon EOS M3":"0.6362 -0.0823 -0.0847 -0.4426 1.2109 0.2616 -0.0743 0.1857 0.5635","Canon PowerShot G7 X Mark III":"1.1629 -0.5713 -0.0914 -0.2706 1.109 0.1842 -0.0206 0.1225 0.5515","Canon EOS M50":"0.8532 -0.0701 -0.1167 -0.4095 1.1879 0.2508 -0.0797 0.2424 0.701","Canon EOS 80D":"0.7457 -0.0671 -0.0937 -0.4849 1.2495 0.2643 -0.1213 0.2354 0.5492","Canon EOS M200":"1.0463 -0.2173 -0.1437 -0.4856 1.2635 0.2482 -0.1216 0.2915 0.7237","Canon EOS R100":"0.823 -0.1515 -0.1032 -0.4179 1.2005 0.2454 -0.0649 0.2076 0.4711","Canon EOS 700D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS 100D":"0.6602 -0.0841 -0.0939 -0.4472 1.2458 0.2247 -0.0975 0.2039 0.6148","Canon EOS M6 Mark II":"1.1498 -0.3759 -0.1516 -0.5073 1.2954 0.2349 -0.0892 0.1867 0.6118","Canon EOS 70D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R8":"0.9539 -0.2795 -0.1224 -0.4175 1.1998 0.2458 -0.0465 0.1755 0.6048","Canon EOS 6D":"0.7034 -0.0804 -0.1014 -0.442 1.2564 0.2058 -0.0851 0.1994 0.5758","Canon EOS R50 V":"0.9089 -0.181 -0.1209 -0.4294 1.2116 0.2454 -0.0498 0.1862 0.4923","Canon EOS 77D":"0.7377 -0.0742 -0.0998 -0.4235 1.1981 0.2549 -0.0673 0.1918 0.5538","LEICA M10":"0.8249 -0.2849 -0.062 -0.5415 1.4756 0.0565 -0.0957 0.3074 0.6517","LEICA Q (Typ 116)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA Q3 43":"1.1111 -0.3816 -0.1057 -0.375 1.2107 0.1829 -0.0947 0.1868 0.4645","LEICA Q2":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA SL (Typ 601)":"1.1865 -0.4523 -0.1441 -0.5423 1.4458 0.0935 -0.1587 0.2687 0.483","LEICA D-Lux 8":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","LEICA T (Typ 701)":"0.5463 -0.0988 -0.0364 -0.4634 1.2036 0.2946 -0.0766 0.1389 0.6522","LEICA X (Typ 113)":"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","PENTAX K-1 Mark II":"0.8935 -0.2864 -0.1253 -0.3612 1.2204 0.155 -0.0905 0.1702 0.6346","Panasonic DMC-ZS40":"0.8607 -0.2822 -0.0808 -0.3755 1.193 0.2049 -0.082 0.206 0.5224","Panasonic DMC-CM1":"0.877 -0.3194 -0.082 -0.2871 1.1281 0.1803 -0.0513 0.1552 0.4434","Panasonic DC-G9":"0.7685 -0.2375 -0.0634 -0.3687 1.17 0.2249 -0.0748 0.1546 0.5111","Panasonic DMC-ZS50":"0.8802 -0.3135 -0.0789 -0.3151 1.1468 0.1904 -0.055 0.1745 0.481","Panasonic DMC-GX85":"0.7771 -0.302 -0.0629 -0.4029 1.195 0.2345 -0.0821 0.1977 0.6119","Panasonic DMC-LX9":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-FZ80":"1.1532 -0.4324 -0.1066 -0.2375 1.0847 0.1749 -0.0564 0.1699 0.4351","Panasonic DMC-FZ300":"0.8378 -0.2798 -0.0769 -0.3068 1.141 0.1877 -0.0538 0.1792 0.4623","Panasonic DMC-GX8":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DC-S1RM2":"0.9941 -0.4056 -0.0871 -0.3745 1.1604 0.2433 -0.0254 0.1132 0.5526","Panasonic DC-GH6":"0.7949 -0.3491 -0.071 -0.3435 1.1681 0.1977 -0.0503 0.1622 0.5065","Panasonic DC-S1":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Olympus E-M5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-ZS100":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Olympus E-M5 Mark II":"0.9422 -0.3258 -0.0711 -0.2655 1.0898 0.2015 -0.0512 0.1354 0.5512","Panasonic DC-GF9":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-GF7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus PEN-F":"0.9476 -0.3182 -0.0765 -0.2613 1.0958 0.1893 -0.0449 0.1315 0.5268","Panasonic DC-S1H":"0.9397 -0.3719 -0.0805 -0.5425 1.3326 0.2309 -0.0972 0.1715 0.6034","Panasonic DMC-LX100":"0.8844 -0.3538 -0.0768 -0.3709 1.1762 0.22 -0.0698 0.1792 0.522","Panasonic DMC-FZ2500":"0.7386 -0.2443 -0.0743 -0.3437 1.1864 0.1757 -0.0608 0.166 0.4766","Panasonic DC-G99":"0.9657 -0.3963 -0.0748 -0.3361 1.1378 0.2258 -0.0568 0.1415 0.5158","Panasonic DC-LX100M2":"0.8585 -0.3127 -0.0833 -0.4005 1.225 0.1953 -0.065 0.1494 0.4862","Panasonic DC-S1R":"1.1822 -0.5321 -0.1249 -0.5958 1.5114 0.0766 -0.0614 0.1264 0.7043","Panasonic DC-G9M2":"0.8325 -0.3456 -0.0623 -0.433 1.2089 0.2528 -0.086 0.2646 0.5984","Panasonic DC-S9":"0.9983 -0.389 -0.0841 -0.418 1.2164 0.2263 -0.0249 0.1139 0.5766","Panasonic DC-ZS200":"0.779 -0.2736 -0.0755 -0.3452 1.187 0.1769 -0.0628 0.1647 0.4898","Panasonic DC-GX9":"0.7564 -0.2263 -0.0606 -0.3148 1.1239 0.2177 -0.054 0.1435 0.4853","Panasonic DMC-G8":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-ZS60":"0.855 -0.2908 -0.0842 -0.3195 1.1529 0.1881 -0.0338 0.1603 0.4631","Panasonic DC-S1M2":"1.073 -0.4442 -0.0922 -0.4478 1.2504 0.2199 -0.038 0.1198 0.6039","Panasonic DC-GH5S":"0.6929 -0.2355 -0.0708 -0.4192 1.2534 0.1828 -0.1097 0.1989 0.5195","Panasonic DC-S5":"0.9744 -0.3905 -0.0779 -0.4899 1.2807 0.2324 -0.0798 0.163 0.5827","Panasonic DC-GH5M2":"0.93 -0.3659 -0.0755 -0.2981 1.0988 0.2287 -0.019 0.1077 0.5016","Panasonic DC-FZ1000M2":"0.9803 -0.4185 -0.0992 -0.4066 1.2578 0.1628 -0.0838 0.1824 0.5288","Panasonic DC-GH5":"0.7641 -0.2336 -0.0605 -0.3218 1.1299 0.2187 -0.0485 0.1338 0.5121","Panasonic DMC-GX7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Panasonic DMC-LX7":"1.0148 -0.3743 -0.0991 -0.2837 1.1366 0.1659 -0.0701 0.1893 0.4899","Panasonic DC-GH7":"0.8573 -0.3575 -0.0678 -0.4252 1.2079 0.2451 -0.0808 0.2524 0.5936","Panasonic DC-S5M2":"1.0308 -0.4206 -0.0783 -0.4088 1.2102 0.2229 -0.0125 0.1051 0.5912","Panasonic DMC-LF1":"0.9379 -0.3267 -0.0816 -0.3227 1.156 0.1881 -0.0926 0.1928 0.534","Panasonic DMC-G7":"0.761 -0.278 -0.0576 -0.4614 1.2195 0.2733 -0.1375 0.2393 0.649","Olympus E-M1X":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","OM Digital Solutions OM-1":"0.9488 -0.3984 -0.0714 -0.2887 1.0945 0.2229 -0.0137 0.096 0.5786","Olympus E-M10":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus TG-4":"1.1426 -0.4159 -0.1126 -0.2066 1.0678 0.1593 -0.012 0.1327 0.4998","Olympus E-P5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M10 Mark II":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Olympus E-M1":"0.7687 -0.1984 -0.0606 -0.4327 1.1928 0.2721 -0.1381 0.2339 0.6452","Olympus E-PL5":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Panasonic DMC-GM1":"0.677 -0.1895 -0.0744 -0.5232 1.3145 0.2303 -0.1664 0.2691 0.5703","Panasonic DMC-GF6":"0.813 -0.2801 -0.0946 -0.352 1.1289 0.2552 -0.1314 0.2511 0.5791","Panasonic DMC-FZ1000":"0.783 -0.2696 -0.0763 -0.3325 1.1667 0.1866 -0.0641 0.1712 0.4824","Panasonic DMC-GH4":"0.7122 -0.2108 -0.0512 -0.3155 1.1201 0.2231 -0.0541 0.1423 0.5045","Panasonic DMC-GM5":"0.8238 -0.3244 -0.0679 -0.3921 1.1814 0.2384 -0.0836 0.2022 0.5852","OM Digital Solutions OM-5 Mark II":"1.2008 -0.523 -0.1123 -0.2265 1.0496 0.2046 0.0069 0.0734 0.4938",M1:"0.7712 -0.2059 -0.0653 -0.3882 1.1494 0.2726 -0.071 0.1332 0.5958","Olympus XZ-2":"0.9777 -0.3483 -0.0925 -0.2886 1.1297 0.18 -0.0602 0.1663 0.5134","Olympus E-M1 Mark II":"0.9383 -0.317 -0.0763 -0.2457 1.0702 0.202 -0.0384 0.1236 0.5552","Olympus E-PL7":"0.9197 -0.319 -0.0659 -0.2606 1.083 0.2039 -0.0458 0.125 0.5458","OM Digital Solutions OM-5":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus E-M5 Mark III":"1.1896 -0.511 -0.1076 -0.3181 1.1378 0.2048 -0.0519 0.1224 0.5166","Olympus STYLUS 1":"0.836 -0.242 -0.088 -0.3928 1.2353 0.1739 -0.1381 0.2416 0.5173","RICOH GR IV":"0.6428 -0.1485 -0.0814 -0.4614 1.2728 0.2065 -0.0667 0.1489 0.5924","RICOH GR III":"0.6093 -0.1407 -0.0772 -0.4614 1.2728 0.2065 -0.0663 0.1481 0.5892","GR II":"0.4717 -0.085 -0.0431 -0.4977 1.2805 0.2417 -0.0641 0.1474 0.6143","Olympus E-M10 Mark III":"0.838 -0.263 -0.0639 -0.2887 1.0725 0.2496 -0.0627 0.1427 0.5438","Samsung NX1":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX2000":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX500":"1.0686 -0.4042 -0.1052 -0.3595 1.3238 0.0276 -0.0464 0.1259 0.5931","Samsung NX300":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX30":"0.7557 -0.2522 -0.0739 -0.4679 1.2949 0.1894 -0.084 0.1777 0.5311","Samsung NX mini":"0.5222 -0.1196 -0.055 -0.654 1.4649 0.2009 -0.1666 0.2819 0.5657","SIGMA fp L":"1.079 -0.2673 -0.228 -0.6718 1.5773 0.0854 -0.1473 0.2047 0.4597","sd Quattro H":"1.2907 0.0532 -0.3603 0.2957 0.7904 -0.0911 0.0255 0.7093 0.3228","Phase One IQ4 150MP":"0.6644 -0.2257 -0.0804 -0.6459 1.4562 0.2019 -0.1221 0.1876 0.6411","Sony ILCE-7RM4":"0.7662 -0.2686 -0.066 -0.524 1.2965 0.253 -0.0796 0.1508 0.6167","Fujifilm X-E4":"1.3426 -0.6334 -0.1177 -0.4244 1.2136 0.2371 -0.058 0.1303 0.598"},r_="modulepreload",n_=function(e){return"/"+e},Rb={},a_=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=n_(l),l in Rb)return;Rb[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":r_,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};function Ou(e){const[[t,r,n],[a,i,o],[s,l,u]]=e,f=t*(i*u-o*l)-r*(a*u-o*s)+n*(a*l-i*s);if(Math.abs(f)<1e-10)return null;const d=1/f;return[[(i*u-o*l)*d,(n*l-r*u)*d,(r*o-n*i)*d],[(o*s-a*u)*d,(t*u-n*s)*d,(n*a-t*o)*d],[(a*l-i*s)*d,(r*s-t*l)*d,(t*i-r*a)*d]]}function Jd(e,t){const r=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let a=0;a<3;a++)for(let i=0;i<3;i++)r[n][a]+=e[n][i]*t[i][a];return r}class ys{constructor(t){Mn(this,"size");Mn(this,"isPowerOfTwo");Mn(this,"_real");Mn(this,"_imag");Mn(this,"_scratch",null);Mn(this,"_rev",null);Mn(this,"_m",0);Mn(this,"_internalFFT",null);Mn(this,"_chirpReal",null);Mn(this,"_chirpImag",null);Mn(this,"_bReal",null);Mn(this,"_bImag",null);Mn(this,"_hanning",null);Mn(this,"_windowSumSq",0);this.size=t,this.isPowerOfTwo=(t&t-1)===0&&t>0,this._real=new Float32Array(t),this._imag=new Float32Array(t),this.isPowerOfTwo?this.initRadix2():this.initBluestein()}initRadix2(){const t=this.size,r=Math.log2(t);this._rev=new Uint32Array(t);for(let n=0;n<t;n++){let a=0,i=n;for(let o=0;o<r;o++)a=a<<1|i&1,i>>>=1;this._rev[n]=a}}initBluestein(){const t=this.size;this._m=Math.pow(2,Math.ceil(Math.log2(2*t-1))),this._internalFFT=new ys(this._m),this._chirpReal=new Float32Array(t),this._chirpImag=new Float32Array(t);for(let a=0;a<t;a++){const i=-Math.PI*(a*a)/t;this._chirpReal[a]=Math.cos(i),this._chirpImag[a]=Math.sin(i)}const r=new Float32Array(this._m),n=new Float32Array(this._m);for(let a=0;a<t;a++)r[a]=this._chirpReal[a],n[a]=-this._chirpImag[a];for(let a=1;a<t;a++)r[this._m-a]=r[a],n[this._m-a]=n[a];this._internalFFT.transform(r,n),this._bReal=new Float32Array(this._internalFFT._real),this._bImag=new Float32Array(this._internalFFT._imag)}initHanning(){if(this._hanning)return;const t=this.size;this._hanning=new Float32Array(t);let r=0;for(let n=0;n<t;n++){const a=.5*(1-Math.cos(2*Math.PI*n/(t-1)));this._hanning[n]=a,r+=a*a}this._windowSumSq=r}transform(t,r){this.isPowerOfTwo?this.transformRadix2(t,r):this.transformBluestein(t,r)}transformRadix2(t,r){const n=this.size,a=this._rev,i=this._real,o=this._imag;if(t===i)for(let s=0;s<n;s++){const l=a[s];if(s<l){const u=i[s],f=o[s];i[s]=i[l],o[s]=o[l],i[l]=u,o[l]=f}}else for(let s=0;s<n;s++){const l=a[s];i[s]=t[l],o[s]=r?r[l]:0}for(let s=2;s<=n;s*=2){const l=s/2,u=-2*Math.PI/s,f=Math.cos(u),d=Math.sin(u);for(let h=0;h<n;h+=s){let p=1,m=0;for(let y=0;y<l;y++){const w=h+y,x=h+y+l,g=p*i[x]-m*o[x],v=p*o[x]+m*i[x],S=i[w],b=o[w];i[w]=S+g,o[w]=b+v,i[x]=S-g,o[x]=b-v;const k=p*f-m*d,P=p*d+m*f;p=k,m=P}}}}transformBluestein(t,r){const n=this.size,a=this._m,i=this._internalFFT,o=i._real,s=i._imag;o.fill(0),s.fill(0);for(let d=0;d<n;d++){const h=t[d],p=r?r[d]:0,m=this._chirpReal[d],y=this._chirpImag[d];o[d]=h*m-p*y,s[d]=h*y+p*m}i.transformRadix2(o,s);for(let d=0;d<a;d++){const h=i._real[d],p=i._imag[d],m=this._bReal[d],y=this._bImag[d];i._real[d]=h*m-p*y,i._imag[d]=h*y+p*m}const l=i._real,u=i._imag;for(let d=0;d<a;d++)u[d]=-u[d];i.transformRadix2(l,u);const f=1/a;for(let d=0;d<n;d++){const h=i._real[d]*f,p=-i._imag[d]*f,m=this._chirpReal[d],y=this._chirpImag[d];this._real[d]=h*m-p*y,this._imag[d]=h*y+p*m}}calculateSpectrum(t,r,n=!1){const a=this.size;let i=0;for(let f=0;f<a;f++)i+=t[f];const o=i/a;this._scratch||(this._scratch=new Float32Array(a));const s=this._scratch;if(n){this.initHanning();const f=this._hanning;for(let d=0;d<a;d++)s[d]=(t[d]-o)*f[d]}else for(let f=0;f<a;f++)s[f]=t[f]-o;this.transform(s);const l=r.length;let u=1/a;n&&this._windowSumSq>0&&(u=1/this._windowSumSq);for(let f=0;f<l;f++){const d=this._real[f],h=this._imag[f];r[f]+=(d*d+h*h)*u}}}function i_(e,t,r,n=!1){const a=new ys(t),i=new ys(r),o=t*r,s=new Float32Array(o),l=new Float32Array(o);let u=null,f=null;if(n){u=new Float32Array(t);for(let y=0;y<t;y++)u[y]=.5*(1-Math.cos(2*Math.PI*y/(t-1)));f=new Float32Array(r);for(let y=0;y<r;y++)f[y]=.5*(1-Math.cos(2*Math.PI*y/(r-1)))}for(let y=0;y<r;y++){const w=y*t,x=a._real;let g=0;for(let S=0;S<t;S++)g+=e[w+S];const v=g/t;if(u)for(let S=0;S<t;S++)x[S]=(e[w+S]-v)*u[S];else for(let S=0;S<t;S++)x[S]=e[w+S]-v;a.transform(x);for(let S=0;S<t;S++)s[w+S]=a._real[S],l[w+S]=a._imag[S]}for(let y=0;y<t;y++){const w=i._real,x=i._imag;for(let g=0;g<r;g++){const v=g*t+y;let S=s[v],b=l[v];f&&(S*=f[g],b*=f[g]),w[g]=S,x[g]=b}i.transform(w,x);for(let g=0;g<r;g++){const v=g*t+y;s[v]=i._real[g],l[v]=i._imag[g]}}const d=new Float32Array(o);let h=1,p=t,m=r;if(n&&u&&f){p=0;for(let y=0;y<t;y++)p+=u[y]*u[y];m=0;for(let y=0;y<r;y++)m+=f[y]*f[y]}h=1/(p*m);for(let y=0;y<o;y++)d[y]=(s[y]*s[y]+l[y]*l[y])*h;return d}function o_(e,t,r){const n=new Float32Array(e.length),a=Math.floor(t/2),i=Math.floor(r/2);for(let o=0;o<r;o++)for(let s=0;s<t;s++){const l=(s+a)%t,u=(o+i)%r,f=o*t+s,d=u*t+l;n[d]=e[f]}return n}function Vc(e,t,r,n=[0,0,0,0],a=65535,i="RGGB"){const s=e*t*2,l=8,u=l+s,f="Fake",d="StretchedNoiseCam",h="StretchedNoiseCam",p=_=>{const T=new Uint8Array(_.length+1);for(let $=0;$<_.length;$++)T[$]=_.charCodeAt($);return T[_.length]=0,T},m=p(f),y=p(d),w=p(h),x=_=>{const T=[0,0,0,0],$={R:0,G:1,B:2},I=_.toUpperCase();for(let A=0;A<4;A++)T[A]=$[I[A]]??1;return T},g=[{id:254,type:4,count:1,value:0},{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:1,value:16},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:32803},{id:271,type:2,count:m.length,value:m},{id:272,type:2,count:y.length,value:y},{id:273,type:4,count:1,value:l},{id:277,type:3,count:1,value:1},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:s},{id:33421,type:3,count:2,value:[2,2]},{id:33422,type:1,count:4,value:x(i)},{id:50706,type:1,count:4,value:[1,4,0,0]},{id:50714,type:3,count:4,value:n.map(_=>Math.round(_))},{id:50715,type:4,count:1,value:Math.round(a)},{id:50717,type:2,count:w.length,value:w}],v=2+g.length*12+4;let S=0;const b=g.map(_=>{let T=1;_.type===3&&(T=2),_.type===4&&(T=4);const $=_.count*T,I=$<=4;let A=0;return I||(A=S,S+=$,S%2!==0&&S++),{..._,fits:I,totalBytes:$,extraOffset:A}}),k=u+v,P=k+S,C=new ArrayBuffer(P),N=new DataView(C),O=new Uint8Array(C);N.setUint16(0,18761,!0),N.setUint16(2,42,!0),N.setUint32(4,u,!0);const E=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);O.set(E,l);let M=u;return N.setUint16(M,g.length,!0),M+=2,b.forEach(_=>{if(N.setUint16(M,_.id,!0),N.setUint16(M+2,_.type,!0),N.setUint32(M+4,_.count,!0),_.fits){const T=M+8;Array.isArray(_.value)?_.value.forEach(($,I)=>{_.type===1&&N.setUint8(T+I,$),_.type===3&&N.setUint16(T+I*2,$,!0)}):(_.type===3&&N.setUint16(T,_.value,!0),_.type===4&&N.setUint32(T,_.value,!0))}else{const T=k+_.extraOffset;N.setUint32(M+8,T,!0),_.value instanceof Uint8Array?O.set(_.value,T):Array.isArray(_.value)&&_.value.forEach(($,I)=>{_.type===1&&N.setUint8(T+I,$),_.type===3&&N.setUint16(T+I*2,$,!0)})}M+=12}),N.setUint32(M,0,!0),C}var Ch=typeof self<"u"?self:global;const Nu=typeof navigator<"u",s_=Nu&&typeof HTMLImageElement>"u",e0=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Oh=Ch.Buffer,qf=Ch.BigInt,Nh=!!Oh,l_=e=>e;function t0(e,t=l_){if(e0)try{return typeof require=="function"?Promise.resolve(t(require(e))):import(e).then(t)}catch{console.warn(`Couldn't load ${e}`)}}let sx=Ch.fetch;const c_=e=>sx=e;if(!Ch.fetch){const e=t0("http",n=>n),t=t0("https",n=>n),r=(n,{headers:a}={})=>new Promise(async(i,o)=>{let{port:s,hostname:l,pathname:u,protocol:f,search:d}=new URL(n);const h={method:"GET",hostname:l,path:encodeURI(u)+d,headers:a};s!==""&&(h.port=Number(s));const p=(f==="https:"?await t:await e).request(h,m=>{if(m.statusCode===301||m.statusCode===302){let y=new URL(m.headers.location,n).toString();return r(y,{headers:a}).then(i).catch(o)}i({status:m.statusCode,arrayBuffer:()=>new Promise(y=>{let w=[];m.on("data",x=>w.push(x)),m.on("end",()=>y(Buffer.concat(w)))})})});p.on("error",o),p.end()});c_(r)}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const r0=e=>p3(e)?void 0:e,u_=e=>e!==void 0;function p3(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(u_).length===0)}function $r(e){let t=new Error(e);throw delete t.stack,t}function Jo(e){return(e=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(e).trim())===""?void 0:e}function _m(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const Am=e=>String.fromCharCode.apply(null,e),Lb=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function g3(e){return Lb?Lb.decode(e):Nh?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Am(e)))}class Hn{static from(t,r){return t instanceof this&&t.le===r?t:new Hn(t,void 0,void 0,r)}constructor(t,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let i=new DataView(t,r,n);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Hn){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&$r("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,r,n);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else $r("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=Hn){return t instanceof DataView||t instanceof Hn?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||$r("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new Hn(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return g3(this.getUint8Array(t,r))}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return Am(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let a=0;a<r&&t+a<this.byteLength;a+=2)n.push(this.getUint16(t+a));return Am(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function Tm(e,t){$r(`${e} '${t}' was not loaded, try using full build of exifr.`)}let lx=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||Tm(this.kind,t),r&&(t in r||function(n,a){$r(`Unknown ${n} '${a}'.`)}(this.kind,t),r[t].enabled||Tm(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var di=new lx("file parser"),Ar=new lx("segment parser"),gi=new lx("file reader");function f_(e,t){return typeof e=="string"?Bb(e,t):Nu&&!s_&&e instanceof HTMLImageElement?Bb(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Hn(e):Nu&&e instanceof Blob?Em(e,t,"blob",xs):void $r("Invalid input argument")}function Bb(e,t){return(r=e).startsWith("data:")||r.length>1e4?$m(e,t,"base64"):e0&&e.includes("://")?Em(e,t,"url",vs):e0?$m(e,t,"fs"):Nu?Em(e,t,"url",vs):void $r("Invalid input argument");var r}async function Em(e,t,r,n){return gi.has(r)?$m(e,t,r):n?async function(a,i){let o=await i(a);return new Hn(o)}(e,n):void $r(`Parser ${r} is not loaded`)}async function $m(e,t,r){let n=new(gi.get(r))(e,t);return await n.read(),n}const vs=e=>sx(e).then(t=>t.arrayBuffer()),xs=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)});class d_ extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Nr(e,t,r){let n=new d_;for(let[a,i]of r)n.set(a,i);if(Array.isArray(t))for(let a of t)e.set(a,n);else e.set(t,n);return n}function bs(e,t,r){let n,a=e.get(t);for(n of r)a.set(n[0],n[1])}const Yr=new Map,Ya=new Map,So=new Map,oo=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ql=["jfif","xmp","icc","iptc","ihdr"],ws=["tiff",...ql],yr=["ifd0","ifd1","exif","gps","interop"],so=[...ws,...yr],lo=["makerNote","userComment"],Zl=["translateKeys","translateValues","reviveValues","multiSegment"],co=[...Zl,"sanitize","mergeOutput","silentErrors"];class m3{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Mc extends m3{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,a){if(super(),Le(this,"enabled",!1),Le(this,"skip",new Set),Le(this,"pick",new Set),Le(this,"deps",new Set),Le(this,"translateKeys",!1),Le(this,"translateValues",!1),Le(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=yr.includes(t),this.canBeFiltered&&(this.dict=Yr.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:$r(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of Zl)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,n0(this.pick,this.deps)):this.enabled&&this.pick.size>0&&n0(this.pick,this.deps)}}var _n={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Fb=new Map;let _s=class extends m3{static useCached(t){let r=Fb.get(t);return r!==void 0||(r=new this(t),Fb.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):$r(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Nu?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of oo)this[t]=_n[t];for(t of co)this[t]=_n[t];for(t of lo)this[t]=_n[t];for(t of so)this[t]=new Mc(t,_n[t],void 0,this)}setupFromTrue(){let t;for(t of oo)this[t]=_n[t];for(t of co)this[t]=_n[t];for(t of lo)this[t]=!0;for(t of so)this[t]=new Mc(t,!0,void 0,this)}setupFromArray(t){let r;for(r of oo)this[r]=_n[r];for(r of co)this[r]=_n[r];for(r of lo)this[r]=_n[r];for(r of so)this[r]=new Mc(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,yr)}setupFromObject(t){let r;for(r of(yr.ifd0=yr.ifd0||yr.image,yr.ifd1=yr.ifd1||yr.thumbnail,Object.assign(this,t),oo))this[r]=Yp(t[r],_n[r]);for(r of co)this[r]=Yp(t[r],_n[r]);for(r of lo)this[r]=Yp(t[r],_n[r]);for(r of ws)this[r]=new Mc(r,_n[r],t[r],this);for(r of yr)this[r]=new Mc(r,_n[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,yr,so),t.tiff===!0?this.batchEnableWithBool(yr,!0):t.tiff===!1?this.batchEnableWithUserValue(yr,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,yr):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,yr)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,r,n,a=n){if(t&&t.length){for(let o of a)this[o].enabled=!1;let i=zb(t,n);for(let[o,s]of i)n0(this[o].pick,s),this[o].enabled=!0}else if(r&&r.length){let i=zb(r,n);for(let[o,s]of i)n0(this[o].skip,s)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=yr.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of yr)this[i].finalizeFilters()}get onlyTiff(){return!ql.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of ws)this[t].enabled&&!Ar.has(t)&&Tm("segment parser",t)}};function zb(e,t){let r,n,a,i,o=[];for(a of t){for(i of(r=Yr.get(a),n=[],r))(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function Yp(e,t){return e!==void 0?e:t!==void 0?t:void 0}function n0(e,t){for(let r of t)e.add(r)}Le(_s,"default",_n);class _o{constructor(t){Le(this,"parsers",{}),Le(this,"output",{}),Le(this,"errors",[]),Le(this,"pushToErrors",r=>this.errors.push(r)),this.options=_s.useCached(t)}async read(t){this.file=await f_(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,a]of di)if(a.canHandle(t,r))return this.fileParser=new a(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),$r("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),r0(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let a=await n.parse();n.assignToOutput(t,a)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=Ar.get("tiff",t);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,t,r),s=await o.extractThumbnail();return r.close&&r.close(),s}}async function Mh(e,t){let r=new _o(t);return await r.read(e),r.parse()}var h_=Object.freeze({__proto__:null,parse:Mh,Exifr:_o,fileParsers:di,segmentParsers:Ar,fileReaders:gi,tagKeys:Yr,tagValues:Ya,tagRevivers:So,createDictionary:Nr,extendDictionary:bs,fetchUrlAsArrayBuffer:vs,readBlobAsArrayBuffer:xs,chunkedProps:oo,otherSegments:ql,segments:ws,tiffBlocks:yr,segmentsAndBlocks:so,tiffExtractables:lo,inheritables:Zl,allFormatters:co,Options:_s});class _h{constructor(t,r,n){Le(this,"errors",[]),Le(this,"ensureSegmentChunk",async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(s){$r(`Couldn't read segment: ${JSON.stringify(a)}. ${s.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):$r("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(Ar.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}let Ga=class{static findPosition(t,r){let n=t.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(t,r={}){return new this(t,new _s({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof Hn?t:new Hn(t)}constructor(t,r={},n){Le(this,"errors",[]),Le(this,"raw",new Map),Le(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=So.get(r),a=Ya.get(r),i=Yr.get(r),o=this.options[r],s=o.reviveValues&&!!n,l=o.translateValues&&!!a,u=o.translateKeys&&!!i,f={};for(let[d,h]of t)s&&n.has(d)?h=n.get(d)(h):l&&a.has(d)&&(h=this.translateValue(h,a.get(d))),u&&i.has(d)&&(d=i.get(d)||d),f[d]=h;return f}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}};Le(Ga,"headerLength",4),Le(Ga,"type",void 0),Le(Ga,"multiSegment",!1),Le(Ga,"canHandle",()=>!1);function p_(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function g_(e){return e>=224&&e<=239}function m_(e,t,r){for(let[n,a]of Ar)if(a.canHandle(e,t,r))return n}class Ub extends _h{constructor(...t){super(...t),Le(this,"appSegments",[]),Le(this,"jpegSegments",[]),Le(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(Ar.keyList())):(t=t===void 0?Ar.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&Ar.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(s=>{let l=Ar.get(s),u=this.options[s];return l.multiSegment&&u.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let s=!1;for(;o.size>0&&!s&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(s=t>l&&!u?!await n.readNextChunk(t):!await n.readNextChunk(l),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,a,i,o,s,l,{file:u,findAll:f,wanted:d,remaining:h,options:p}=this;for(;t<r;t++)if(u.getUint8(t)===255){if(n=u.getUint8(t+1),g_(n)){if(a=u.getUint16(t+2),i=m_(u,t,a),i&&d.has(i)&&(o=Ar.get(i),s=o.findPosition(u,t),l=p[i],s.type=i,this.appSegments.push(s),!f&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||h.delete(i)):h.delete(i),h.size===0)))break;p.recordUnknownSegments&&(s=Ga.findPosition(u,t),s.marker=n,this.unknownSegments.push(s)),t+=a+1}else if(p_(n)){if(a=u.getUint16(t+2),n===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:n}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let a,i,o,s=new Map;for(let l=0;l<r.length;l++)a=r[l],i=a[n],s.has(i)?o=s.get(i):s.set(i,o=[]),o.push(a);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let a=Ar.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}Le(Ub,"type","jpeg"),di.set("jpeg",Ub);const y_=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class v_ extends Ga{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,s=i.size===0,l=this.chunk.getUint16(t);t+=2;for(let u=0;u<l;u++){let f=this.chunk.getUint16(t);if(o){if(a.has(f)&&(n.set(f,this.parseTag(t,f,r)),a.delete(f),a.size===0))break}else!s&&i.has(f)||n.set(f,this.parseTag(t,f,r));t+=12}return n}parseTag(t,r,n){let{chunk:a}=this,i=a.getUint16(t+2),o=a.getUint32(t+4),s=y_[i];if(s*o<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&$r(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&$r(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,o);if(i===2)return Jo(a.getString(t,o));if(i===7)return a.getUint8Array(t,o);if(o===1)return this.parseTagValue(i,t);{let l=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(o),u=s;for(let f=0;f<o;f++)l[f]=this.parseTagValue(i,t),t+=u;return l}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:$r(`Invalid tiff type ${t}`)}}}class qp extends v_{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&$r("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&$r(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,_m(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,_m(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Gb(...t.get(2),t.get(1))),t.set("longitude",Gb(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,a={};for(r of yr)if(t=this[r],!p3(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(t,n,a)}}function Gb(e,t,r,n){var a=e+t/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Le(qp,"type","tiff"),Le(qp,"headerLength",10),Ar.set("tiff",qp);var x_=Object.freeze({__proto__:null,default:h_,Exifr:_o,fileParsers:di,segmentParsers:Ar,fileReaders:gi,tagKeys:Yr,tagValues:Ya,tagRevivers:So,createDictionary:Nr,extendDictionary:bs,fetchUrlAsArrayBuffer:vs,readBlobAsArrayBuffer:xs,chunkedProps:oo,otherSegments:ql,segments:ws,tiffBlocks:yr,segmentsAndBlocks:so,tiffExtractables:lo,inheritables:Zl,allFormatters:co,Options:_s,parse:Mh});const cx={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ux=Object.assign({},cx,{firstChunkSize:4e4,gps:[1,2,3,4]});async function y3(e){let t=new _o(ux);await t.read(e);let r=await t.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const fx=Object.assign({},cx,{tiff:!1,ifd1:!0,mergeOutput:!1});async function v3(e){let t=new _o(fx);await t.read(e);let r=await t.extractThumbnail();return r&&Nh?Oh.from(r):r}async function x3(e){let t=await this.thumbnail(e);if(t!==void 0){let r=new Blob([t]);return URL.createObjectURL(r)}}const dx=Object.assign({},cx,{firstChunkSize:4e4,ifd0:[274]});async function hx(e){let t=new _o(dx);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const px=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let es=!0,ts=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;es=Number(r)+.1*Number(n)<13.4,ts=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);es=ts=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);es=ts=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);es=ts=Number(t)<77}}async function b3(e){let t=await hx(e);return Object.assign({canvas:es,css:ts},px[t])}class b_ extends Hn{constructor(...t){super(...t),Le(this,"ranges",new w_),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=t+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let r;r=Nh?Oh.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let a=super.set(t,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class w_{constructor(){Le(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let a=t+r,i=this.list.filter(o=>Wb(t,o.offset,a)||Wb(t,o.end,a));if(i.length>0){t=Math.min(t,...i.map(s=>s.offset)),a=Math.max(a,...i.map(s=>s.end)),r=a-t;let o=i.shift();o.offset=t,o.length=r,o.end=a,this.list=this.list.filter(s=>!i.includes(s))}else this.list.push({offset:t,length:r,end:a})}available(t,r){let n=t+r;return this.list.some(a=>a.offset<=t&&n<=a.end)}}function Wb(e,t,r){return e<=t&&t<=r}class Ah extends b_{constructor(t,r){super(0),Le(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}gi.set("blob",class extends Ah{async readWhole(){this.chunked=!1;let e=await xs(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),a=await xs(n);return this.set(a,e,!0)}});var k_=Object.freeze({__proto__:null,default:x_,Exifr:_o,fileParsers:di,segmentParsers:Ar,fileReaders:gi,tagKeys:Yr,tagValues:Ya,tagRevivers:So,createDictionary:Nr,extendDictionary:bs,fetchUrlAsArrayBuffer:vs,readBlobAsArrayBuffer:xs,chunkedProps:oo,otherSegments:ql,segments:ws,tiffBlocks:yr,segmentsAndBlocks:so,tiffExtractables:lo,inheritables:Zl,allFormatters:co,Options:_s,parse:Mh,gpsOnlyOptions:ux,gps:y3,thumbnailOnlyOptions:fx,thumbnail:v3,thumbnailUrl:x3,orientationOnlyOptions:dx,orientation:hx,rotations:px,get rotateCanvas(){return es},get rotateCss(){return ts},rotation:b3});gi.set("url",class extends Ah{async readWhole(){this.chunked=!1;let e=await vs(this.input);e instanceof ArrayBuffer?this._swapArrayBuffer(e):e instanceof Uint8Array&&this._swapBuffer(e)}async _readChunk(e,t){let r=t?e+t-1:void 0,n=this.options.httpHeaders||{};(e||r)&&(n.range=`bytes=${[e,r].join("-")}`);let a=await sx(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==t&&(this.size=e+o),this.set(i,e,!0)}});Hn.prototype.getUint64=function(e){let t=this.getUint32(e),r=this.getUint32(e+4);return t<1048575?t<<32|r:typeof qf!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),qf(t)<<qf(32)|qf(r)):void $r("Trying to read 64b value but JS can only handle 53b numbers.")};class S_ extends _h{parseBoxes(t=0){let r=[];for(;t<this.file.byteLength-4;){let n=this.parseBoxHead(t);if(r.push(n),n.length===0)break;t+=n.length}return r}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,r){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(n=>n.kind===r)}parseBoxHead(t){let r=this.file.getUint32(t),n=this.file.getString(t+4,4),a=t+8;return r===1&&(r=this.file.getUint64(t+8),a+=8),{offset:t,length:r,kind:n,start:a}}parseBoxFullHead(t){if(t.version!==void 0)return;let r=this.file.getUint32(t.start);t.version=r>>24,t.start+=4}}class w3 extends S_{static canHandle(t,r){if(r!==0)return!1;let n=t.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(t.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let t=this.file.getUint32(0),r=this.parseBoxHead(t);for(;r.kind!=="meta";)t+=r.length,await this.file.ensureChunk(t,16),r=this.parseBoxHead(t);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(t,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(t,a)}async findIcc(t){let r=this.findBox(t,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(t){let r=this.findBox(t,"iinf");if(r===void 0)return;let n=this.findBox(t,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,s]=i;await this.file.ensureChunk(o,s);let l=4+this.file.getUint32(o);o+=l,s-=l,await this.registerSegment("tiff",o,s)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let r,n,a,i,o=t.start,s=this.file.getUint16(o);for(o+=2;s--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(t){let r=this.file.getUint8(t);return[r>>4,15&r]}findExtentInIloc(t,r){this.parseBoxFullHead(t);let n=t.start,[a,i]=this.get8bits(n++),[o,s]=this.get8bits(n++),l=t.version===2?4:2,u=t.version===1||t.version===2?2:0,f=s+a+i,d=t.version===2?4:2,h=this.file.getUintBytes(n,d);for(n+=d;h--;){let p=this.file.getUintBytes(n,l);n+=l+u+2+o;let m=this.file.getUint16(n);if(n+=2,p===r)return m>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+s,a),this.file.getUintBytes(n+s+a,i)];n+=m*f}}}class k3 extends w3{}Le(k3,"type","heic");class Vb extends w3{}Le(Vb,"type","avif"),di.set("heic",k3),di.set("avif",Vb),Nr(Yr,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Nr(Yr,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Nr(Yr,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Nr(Ya,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let ru=Nr(Ya,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Hb={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};ru.set(37392,Hb),ru.set(41488,Hb);const Zp={0:"Normal",1:"Low",2:"High"};function Xb(e){return typeof e=="object"&&e.length!==void 0?e[0]:e}function Kb(e){let t=Array.from(e).slice(1);return t[1]>15&&(t=t.map(r=>String.fromCharCode(r))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function Qp(e){if(typeof e=="string"){var[t,r,n,a,i,o]=e.trim().split(/[-: ]/g).map(Number),s=new Date(t,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(s.setHours(a),s.setMinutes(i),s.setSeconds(o)),Number.isNaN(+s)?e:s}}function _c(e){if(typeof e=="string")return e;let t=[];if(e[1]===0&&e[e.length-1]===0)for(let r=0;r<e.length;r+=2)t.push(Yb(e[r+1],e[r]));else for(let r=0;r<e.length;r+=2)t.push(Yb(e[r],e[r+1]));return Jo(String.fromCodePoint(...t))}function Yb(e,t){return e<<8|t}ru.set(41992,Zp),ru.set(41993,Zp),ru.set(41994,Zp),Nr(So,["ifd0","ifd1"],[[50827,function(e){return typeof e!="string"?g3(e):e}],[306,Qp],[40091,_c],[40092,_c],[40093,_c],[40094,_c],[40095,_c]]),Nr(So,"exif",[[40960,Kb],[36864,Kb],[36867,Qp],[36868,Qp],[40962,Xb],[40963,Xb]]),Nr(So,"gps",[[0,e=>Array.from(e).join(".")],[7,e=>Array.from(e).join(":")]]);class Jp extends Ga{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1752462448&&t.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(t,r){return t.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,r){let n=super.findPosition(t,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=t.getUint8(r+72),n.chunkNumber=t.getUint8(r+76),t.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(t){return t.map(r=>r.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:Hn.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(i){let o={},s={};for(let l of C3)o[l]=[],s[l]=0;return i.replace(O_,(l,u,f)=>{if(u==="<"){let d=++s[f];return o[f].push(d),`${l}#${d}`}return`${l}#${o[f].pop()}`})}(t);let r=cl.findAll(t,"rdf","Description");r.length===0&&r.push(new cl("rdf","Description",void 0,t));let n,a={};for(let i of r)for(let o of i.properties)n=C_(o.ns,a),S3(o,n);return function(i){let o;for(let s in i)o=i[s]=r0(i[s]),o===void 0&&delete i[s];return r0(i)}(a)}assignToOutput(t,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(t,"ifd0",a);break;case"exif":this.assignObjectToOutput(t,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(t,n,a)}else t.xmp=r}}Le(Jp,"type","xmp"),Le(Jp,"multiSegment",!0),Ar.set("xmp",Jp);class a0{static findAll(t){return j3(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(a0.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[3].slice(1,-1);return a=P3(a),new a0(r,n,a)}constructor(t,r,n){this.ns=t,this.name=r,this.value=n}serialize(){return this.value}}class cl{static findAll(t,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return j3(t,a).map(cl.unpackMatch)}static unpackMatch(t){let r=t[1],n=t[2],a=t[4],i=t[8];return new cl(r,n,a,i)}constructor(t,r,n,a){this.ns=t,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=a0.findAll(n),this.children=cl.findAll(a),this.value=this.children.length===0?P3(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:r}=this;return t==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return P_(this.children.map(j_));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let r of this.properties)S3(r,t);return this.value!==void 0&&(t.value=this.value),r0(t)}}function S3(e,t){let r=e.serialize();r!==void 0&&(t[e.name]=r)}var j_=e=>e.serialize(),P_=e=>e.length===1?e[0]:e,C_=(e,t)=>t[e]?t[e]:t[e]={};function j3(e,t){let r,n=[];if(!e)return n;for(;(r=t.exec(e))!==null;)n.push(r);return n}function P3(e){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(e))return;let t=Number(e);if(!Number.isNaN(t))return t;let r=e.toLowerCase();return r==="true"||r!=="false"&&e.trim()}const C3=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],O_=new RegExp(`(<|\\/)(${C3.join("|")})`,"g");var O3=Object.freeze({__proto__:null,default:k_,Exifr:_o,fileParsers:di,segmentParsers:Ar,fileReaders:gi,tagKeys:Yr,tagValues:Ya,tagRevivers:So,createDictionary:Nr,extendDictionary:bs,fetchUrlAsArrayBuffer:vs,readBlobAsArrayBuffer:xs,chunkedProps:oo,otherSegments:ql,segments:ws,tiffBlocks:yr,segmentsAndBlocks:so,tiffExtractables:lo,inheritables:Zl,allFormatters:co,Options:_s,parse:Mh,gpsOnlyOptions:ux,gps:y3,thumbnailOnlyOptions:fx,thumbnail:v3,thumbnailUrl:x3,orientationOnlyOptions:dx,orientation:hx,rotations:px,get rotateCanvas(){return es},get rotateCss(){return ts},rotation:b3});let qb=t0("fs",e=>e.promises);gi.set("fs",class extends Ah{async readWhole(){this.chunked=!1,this.fs=await qb;let e=await this.fs.readFile(this.input);this._swapBuffer(e)}async readChunked(){this.chunked=!0,this.fs=await qb,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(e,t){this.fh===void 0&&await this.open(),e+t>this.size&&(t=this.size-e);var r=this.subarray(e,t,!0);return await this.fh.read(r.dataView,0,t,e),r}async close(){if(this.fh){let e=this.fh;this.fh=void 0,await e.close()}}});gi.set("base64",class extends Ah{constructor(...e){super(...e),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(e,t){let r,n,a=this.input;e===void 0?(e=0,r=0,n=0):(r=4*Math.floor(e/3),n=e-r/4*3),t===void 0&&(t=this.size);let i=e+t,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let s=Math.min(t,this.size-e);if(Nh){let l=Oh.from(a,"base64").slice(n,n+s);return this.set(l,e,!0)}{let l=this.subarray(e,s,!0),u=atob(a),f=l.toUint8();for(let d=0;d<s;d++)f[d]=u.charCodeAt(n+d);return l}}});class Zb extends _h{static canHandle(t,r){return r===18761||r===19789}extendOptions(t){let{ifd0:r,xmp:n,iptc:a,icc:i}=t;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:t,xmp:r,iptc:n,icc:a}=this.options;if(t.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(_m(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let r=this.parsers.tiff[t];this.injectSegment(t,r)}}}Le(Zb,"type","tiff"),di.set("tiff",Zb);let N_=t0("zlib");const M_=["ihdr","iccp","text","itxt","exif"];class Qb extends _h{constructor(...t){super(...t),Le(this,"catchError",r=>this.errors.push(r)),Le(this,"metaChunks",[]),Le(this,"unknownChunks",[])}static canHandle(t,r){return r===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,r){let{file:n}=this;for(;t<r;){let a=n.getUint32(t),i=n.getUint32(t+4),o=n.getString(t+4,4).toLowerCase(),s=a+4+4+4,l={type:o,offset:t,length:s,start:t+4+4,size:a,marker:i};M_.includes(o)?this.metaChunks.push(l):this.unknownChunks.push(l),t+=s}}parseTextChunks(){let t=this.metaChunks.filter(r=>r.type==="text");for(let r of t){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(t,r){let n=this.parsers.ihdr;n&&n.raw.set(t,r)}findIhdr(){let t=this.metaChunks.find(r=>r.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(r=>r.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(r=>r.type==="itxt");for(let r of t)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let t=this.metaChunks.find(s=>s.type==="iccp");if(!t)return;let{chunk:r}=t,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),e0){let s=await N_,l=r.getUint8Array(i);l=s.inflateSync(l),this.injectSegment("icc",l)}}}Le(Qb,"type","png"),di.set("png",Qb),Nr(Yr,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),bs(Yr,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Jb=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];bs(Yr,"ifd0",Jb),bs(Yr,"exif",Jb),Nr(Ya,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class eg extends Ga{static canHandle(t,r){return t.getUint8(r+1)===224&&t.getUint32(r+4)===1246120262&&t.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Le(eg,"type","jfif"),Le(eg,"headerLength",9),Ar.set("jfif",eg),Nr(Yr,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class e2 extends Ga{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Le(e2,"type","ihdr"),Ar.set("ihdr",e2),Nr(Yr,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Nr(Ya,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Cd extends Ga{static canHandle(t,r){return t.getUint8(r+1)===226&&t.getUint32(r+4)===1229144927}static findPosition(t,r){let n=super.findPosition(t,r);return n.chunkNumber=t.getUint8(r+16),n.chunkCount=t.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(t){return function(r){let n=function(a){let i=a[0].constructor,o=0;for(let u of a)o+=u.length;let s=new i(o),l=0;for(let u of a)s.set(u,l),l+=u.length;return s}(r.map(a=>a.chunk.toUint8()));return new Hn(n)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&$r("ICC header is too short");for(let[r,n]of Object.entries(__)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&t.set(r,a)}}parseTags(){let t,r,n,a,i,{raw:o}=this,s=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;s--;){if(t=this.chunk.getString(l,4),r=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),a=this.chunk.getString(r,4),r+n>u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(t,i),l+=12}}parseTag(t,r,n){switch(t){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(t){let r=this.chunk.getUint32(t+8)-1;return Jo(this.chunk.getString(t+12,r))}parseText(t,r){return Jo(this.chunk.getString(t+8,r-8))}parseSig(t){return Jo(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:r}=this,n=r.getUint32(t+8),a=r.getUint32(t+12),i=t+16,o=[];for(let s=0;s<n;s++){let l=r.getString(i+0,2),u=r.getString(i+2,2),f=r.getUint32(i+4),d=r.getUint32(i+8)+t,h=Jo(r.getUnicodeString(d,f));o.push({lang:l,country:u,text:h}),i+=a}return n===1?o[0].text:o}translateValue(t,r){return typeof t=="string"?r[t]||r[t.toLowerCase()]||t:r[t]||t}}Le(Cd,"type","icc"),Le(Cd,"multiSegment",!0),Le(Cd,"headerLength",18);const __={4:ki,8:function(e,t){return[e.getUint8(t),e.getUint8(t+1)>>4,e.getUint8(t+1)%16].map(r=>r.toString(10)).join(".")},12:ki,16:ki,20:ki,24:function(e,t){const r=e.getUint16(t),n=e.getUint16(t+2)-1,a=e.getUint16(t+4),i=e.getUint16(t+6),o=e.getUint16(t+8),s=e.getUint16(t+10);return new Date(Date.UTC(r,n,a,i,o,s))},36:ki,40:ki,48:ki,52:ki,64:(e,t)=>e.getUint32(t),80:ki};function ki(e,t){return Jo(e.getString(t,4))}Ar.set("icc",Cd),Nr(Yr,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Zf={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},t2={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Nr(Ya,"icc",[[4,Zf],[12,t2],[40,Object.assign({},Zf,t2)],[48,Zf],[80,Zf],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Qf extends Ga{static canHandle(t,r,n){return t.getUint8(r+1)===237&&t.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(t,r,n)!==void 0}static headerLength(t,r,n){let a,i=this.containsIptc8bim(t,r,n);if(i!==void 0)return a=t.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(t,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(t,r+a))return a}static isIptcSegmentHead(t,r){return t.getUint8(r)===56&&t.getUint32(r)===943868237&&t.getUint16(r+4)===1028}parse(){let{raw:t}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),s=this.chunk.getLatin1String(a+5,i);t.set(o,this.pluralizeValue(t.get(o),s)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(t,r){return t!==void 0?t instanceof Array?(t.push(r),t):[t,r]:r}}Le(Qf,"type","iptc"),Le(Qf,"translateValues",!1),Le(Qf,"reviveValues",!1),Ar.set("iptc",Qf),Nr(Yr,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Nr(Ya,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);let tg=null;async function Ao(){if(!tg)try{const n=(await a_(()=>import("./joraw-CT5e6Osn.js"),[])).default;if(typeof n!="function")throw new Error("JoRaw WASM import failed");const a=new URL("/assets/joraw-DraTMNgX.wasm",import.meta.url).href;tg=n({locateFile:(i,o)=>i.endsWith("joraw.wasm")?a:o+i})}catch(r){throw console.error("Failed to load joraw.js:",r),r}const e=await tg,t=e.LibRaw||e.JoRaw;if(!t)throw new Error("JoRaw class not found");return t}const gx=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],oi=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;async function Jf(e,t=0,r=0){const n=await Ao(),a=new n;try{await a.open(new Uint8Array(e));const i=a.getRawImage(),o=new Uint16Array(i.data),s=i.width,l=i.height,u=Math.floor((s-t)/6)*2,f=Math.floor((l-r)/6)*2;if(u<=0||f<=0)throw new Error("Image too small for X-Trans subsampling with current phase.");const d=new Uint16Array(u*f);for(let p=0;p<f/2;p++){const m=p*6+r;if(m+3>=l)break;const y=m*s,w=(m+3)*s,x=p*2,g=x*u,v=(x+1)*u;for(let S=0;S<u/2;S++){const b=S*6+t;if(b+1>=s)break;const k=S*2;d[g+k]=o[y+b+1],d[g+k+1]=o[y+b+0],d[v+k]=o[w+b+0],d[v+k+1]=o[w+b+1]}}return{dngBuffer:Vc(u,f,d),width:u,height:f}}finally{a.delete?a.delete():a.close()}}async function A_(e){const t=await createImageBitmap(e),r=t.width,n=t.height,a=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d");if(!i)throw new Error("Failed to create canvas context");i.drawImage(t,0,0);const s=i.getImageData(0,0,r,n).data,l=r*n,u=new Uint16Array(l);for(let h=0;h<n;h++)for(let p=0;p<r;p++){const m=(h*r+p)*4,y=h*r+p,w=h%2===0,x=p%2===0;let g=0;w&&x?g=s[m]:!w&&!x?g=s[m+2]:g=s[m+1],u[y]=g*64}const f=await new Promise(h=>a.toBlob(h,"image/png"));let d={description:"Standard image (non-RAW)"};try{const h=await O3.parse(e);h&&(d={...d,...h})}catch(h){console.warn("EXIF parsing failed for standard image",h)}return{previewBlob:f||e,analysisData:{data:u,width:r,height:n,bayerPattern:"RGGB",blackLevels:[0,0,0,0],whiteLevel:16320,metadata:d,isThreePlane:!0}}}const T_=async e=>{const t=await Ao(),r=new t;try{await r.open(e,{useCameraWb:!0,outputBps:8,noAutoBright:!0,userQual:3,outputColor:1});const n=await r.imageData();return new Promise((a,i)=>{const o=document.createElement("canvas");o.width=n.width,o.height=n.height;const s=o.getContext("2d");if(!s){i(new Error("Could not create canvas context"));return}const l=s.createImageData(n.width,n.height),u=n.data,f=n.width*n.height;for(let d=0;d<f;d++){const h=d*3,p=d*4;l.data[p]=u[h],l.data[p+1]=u[h+1],l.data[p+2]=u[h+2],l.data[p+3]=255}s.putImageData(l,0,0),o.toBlob(d=>{d?a(d):i(new Error("Canvas to Blob failed"))},"image/jpeg",.85)})}finally{r.delete?r.delete():r.close()}},i0=async e=>{var n,a,i,o,s,l,u,f,d;const t=await Ao(),r=new t;try{if(await r.open(e,{}),typeof r.getRawImage!="function")throw new Error("WASM mismatch");const h=r.getRawImage();let p=new Uint16Array(h.data);const m=await r.metadata(!0);let y={...m};try{const k=await O3.parse(e.buffer);k&&(y={...y,...k})}catch(k){console.warn("exifr parsing failed for RAW buffer",k)}const w=((n=m.idata)==null?void 0:n.filters)||0,x=((a=m.idata)==null?void 0:a.colors)||0,g=w===0&&x===3,v=w===9;let S=[0,0,0,0],b=!1;if(r.getBlackLevels)try{const k=r.getBlackLevels();k.dng_cblack&&k.dng_cblack.length===4&&Array.from(k.dng_cblack).some(P=>P>0)?(S=Array.from(k.dng_cblack).map(Number),b=!0):k.cblack&&k.cblack.length===4&&Array.from(k.cblack).some(P=>P>0)?(S=Array.from(k.cblack).map(Number),b=!0):typeof k.black=="number"&&k.black>0&&(S=[k.black,k.black,k.black,k.black],b=!0)}catch(k){console.warn("getBlackLevels binding failed",k)}if(!b){let k=[];if((i=m.color_data)!=null&&i.cblack_rawpy_style)k=m.color_data.cblack_rawpy_style;else if((s=(o=m.color_data)==null?void 0:o.dng_levels)!=null&&s.dng_cblack)k=m.color_data.dng_levels.dng_cblack;else if(((l=m.black_level_per_channel)==null?void 0:l.length)>=4)k=m.black_level_per_channel;else if(((u=m.cblack)==null?void 0:u.length)>=4)k=m.cblack;else if(((d=(f=m.color)==null?void 0:f.cblack)==null?void 0:d.length)>=4)k=m.color.cblack;else{const P=m.black_level||m.color_data&&m.color_data.black||0;k=[P,P,P,P]}S=[Number(k[0])||0,Number(k[1])||0,Number(k[2])||0,Number(k[3])||0]}return{data:p,width:h.width,height:h.height,bayerPattern:m.color_desc||"RGGB",blackLevels:S,whiteLevel:m.white_level||16383,metadata:y,isThreePlane:g,isXTrans:v}}finally{r.delete?r.delete():r.close()}};async function Uo(e){const t=new Uint8Array(e.slice(0)),r=new Uint8Array(e.slice(0)),[n,a]=await Promise.all([T_(t),i0(r)]);return{previewBlob:n,analysisData:a}}async function o0(e){const t=new Uint8Array(e);return i0(t)}const r2=e=>(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e);async function rg(e,t,r,n=!0){const a=await i0(new Uint8Array(e)),i=await i0(new Uint8Array(t));if(a.width!==i.width||a.height!==i.height)throw new Error("Dimension Mismatch");const o=a.width,s=a.height,l=r?r2(o):o,u=r?r2(s):s,f=l*u,d=new Uint16Array(f),h=6e4,p=1.41421356;for(let m=0;m<s;m++){const y=m*o,w=m*l;for(let x=0;x<o;x++){const g=a.data[y+x],v=i.data[y+x];let S=g-v;n&&(S/=p);let b=S+h;b=Math.max(0,Math.min(65535,b)),d[w+x]=Math.round(b)}}return{rawData:d,width:l,height:u,metadata:a.metadata}}function Go(e,t,r,n,a,i,o){const s=Math.max(0,Math.floor(n)),l=Math.max(0,Math.floor(a)),u=Math.min(t,Math.ceil(n+i)),f=Math.min(r,Math.ceil(a+o)),d=[0,0,0,0],h=[0,0,0,0],p=[0,0,0,0];for(let w=l;w<f;w++){const x=w*t,g=w%2;for(let v=s;v<u;v++){const S=v%2,b=e[x+v],k=g*2+S;d[k]+=b,h[k]+=b*b,p[k]++}}const m=[0,0,0,0],y=[0,0,0,0];for(let w=0;w<4;w++)if(p[w]>0){const x=d[w]/p[w];m[w]=x;const v=h[w]/p[w]-x*x;y[w]=Math.sqrt(Math.max(0,v))}return{x:s,y:l,width:u-s,height:f-l,means:m,stdDevs:y,pixelCount:p.reduce((w,x)=>w+x,0)}}function E_(e,t,r,n,a,i=!1){const o=Math.floor(Math.max(0,r.x)),s=Math.floor(Math.max(0,r.y)),l=Math.ceil(Math.min(t,r.x+r.w)),u=e.length/t,f=Math.ceil(Math.min(u,r.y+r.h)),d=[0,0,0,0],h=[0,0,0,0];for(let $=s;$<f;$++){const I=$*t,A=$%2;for(let R=o;R<l;R++){const L=R%2,V=A*2+L,ee=e[I+R],G=n[V]||0;d[V]+=Math.max(0,ee-G),h[V]++}}let p=0,m=3;i&&(p=3,m=0);const y=h[p]>0?d[p]/h[p]:1,w=(d[1]+d[2])/(h[1]+h[2]||1),x=h[m]>0?d[m]/h[m]:1;if(y<1||w<1||x<1)return[1,1];const g=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]],v=Ou(g);if(!v)return console.warn("Color Matrix is not invertible, falling back to standard WB"),[w/y,w/x];const S=Jd(gx,v),b=Ou(S);let k=1,P=1,C=1;if(b)k=b[0][0]+b[0][1]+b[0][2],P=b[1][0]+b[1][1]+b[1][2],C=b[2][0]+b[2][1]+b[2][2],Math.abs(P)<1e-6&&(P=1);else return console.warn("Final Matrix is not invertible"),[w/y,w/x];const N=w/y,O=w/x,E=k/P,M=C/P,_=N*E,T=O*M;return[Math.max(0,_),Math.max(0,T)]}function n2(e,t,r,n,a,i,o=0,s=0){const l=Math.max(0,Math.floor(n.x)),u=Math.max(0,Math.floor(n.y)),f=Math.min(t,Math.ceil(n.x+n.w)),d=Math.min(r,Math.ceil(n.y+n.h)),h=a>>1,p=a&1,m=(i>>1)+o,y=(i&1)+s;let w=0,x=0,g=0;for(let C=u;C<d-2;C+=2)for(let N=l;N<f-2;N+=2){const O=(C+h)*t+(N+p),E=(C+m)*t+(N+y);C+m>=r||N+y>=t||(w+=e[O],x+=e[E],g++)}if(g<2)return{sumCov:0,sumVar1:0,sumVar2:0,n:0};const v=w/g,S=x/g;let b=0,k=0,P=0;for(let C=u;C<d-2;C+=2)for(let N=l;N<f-2;N+=2){const O=(C+h)*t+(N+p),E=(C+m)*t+(N+y);if(C+m>=r||N+y>=t)continue;const M=e[O],_=e[E],T=M-v,$=_-S;b+=T*$,k+=T*T,P+=$*$}return{sumCov:b,sumVar1:k,sumVar2:P,n:g}}function $_(e){if(e.n<2)return 0;const t=Math.sqrt(e.sumVar1*e.sumVar2);return t===0?0:e.sumCov/t}function D_(e,t,r,n,a,i,o,s,l,u,f){if(u<=l)return[];const d=Math.max(0,Math.floor(n)),h=Math.max(0,Math.floor(a)),p=Math.min(t,Math.ceil(n+i)),m=Math.min(r,Math.ceil(a+o)),y=u-l,w=f?Math.floor(y)+1:s,x=y/w,g=[new Uint32Array(w),new Uint32Array(w),new Uint32Array(w),new Uint32Array(w)];for(let S=h;S<m;S++){const b=S*t,k=S%2;for(let P=d;P<p;P++){const C=P%2,N=e[b+P];if(N<l||N>u)continue;const O=k*2+C;let E;f?E=Math.floor(N-l):E=Math.floor((N-l)/x),E<0&&(E=0),E>=w&&(E=w-1),g[O][E]++}}const v=[];for(let S=0;S<w;S++){const b=l+(f?S:S*x);v.push({binStart:b,c0:g[0][S],c1:g[1][S],c2:g[2][S],c3:g[3][S]})}return v}function I_(e,t,r,n,a,i=!1,o=!1,s={rows:!1,rowGroup:0,cols:!1,colGroup:0},l=!0,u=1){const f=Math.max(0,Math.floor(n.x)),d=Math.max(0,Math.floor(n.y)),h=Math.min(t,Math.ceil(n.x+n.w)),p=Math.min(r,Math.ceil(n.y+n.h)),m=h-f,y=p-d;if(m<=1||y<=1)return null;let w=0;for(let E=f;E<h;E++)E%2===(a&1)&&w++;let x=0;for(let E=d;E<p;E++)E%2===a>>1&&x++;if(w<4||x<4)return null;const g=Math.max(1,u),v=Math.floor(2*w/(g+1)),S=Math.floor(2*x/(g+1));if(v<4||S<4)return null;const b=new ys(v),k=new ys(S),P=new Float32Array(Math.floor(v/2)+1),C=new Float32Array(Math.floor(S/2)+1);let N=0,O=0;for(let E=d;E<p;E++){const M=E%2;if(a>>1!==M||s.rows&&(E>>1&1)!==s.rowGroup)continue;const _=E*t,T=new Float32Array(w);let $=0;for(let I=f;I<h;I++)I%2===(a&1)&&$<w&&(T[$++]=e[_+I]);for(let I=0;I<g;I++){const A=Math.floor(I*v/2);if(A+v>w)break;const R=T.slice(A,A+v);b.calculateSpectrum(R,P,o),N++}if(!l)break}for(let E=f;E<h;E++){const M=E%2;if((a&1)!==M||s.cols&&(E>>1&1)!==s.rowGroup)continue;const _=new Float32Array(x);let T=0;for(let $=d;$<p;$++)$%2===a>>1&&T<x&&(_[T++]=e[$*t+E]);for(let $=0;$<g;$++){const I=Math.floor($*S/2);if(I+S>x)break;const A=_.slice(I,I+S);k.calculateSpectrum(A,C,o),O++}if(!l)break}if(N>0)for(let E=0;E<P.length;E++)P[E]/=N;if(O>0)for(let E=0;E<C.length;E++)C[E]/=O;return{avgHoriz:Array.from(P),avgVert:Array.from(C),sampleCount:{h:N,v:O}}}function R_(e,t,r,n,a,i=!1){const o=Math.max(0,Math.floor(n.x)),s=Math.max(0,Math.floor(n.y)),l=Math.min(t,Math.ceil(n.x+n.w)),u=Math.min(r,Math.ceil(n.y+n.h));let f=-1;for(let g=s;g<u;g++)if(g%2===a>>1){f=g;break}if(f===-1)return null;let d=-1;for(let g=o;g<l;g++)if(g%2===(a&1)){d=g;break}if(d===-1)return null;const h=[];for(let g=f;g<u;g+=2){const v=g*t,S=[];for(let b=d;b<l;b+=2)S.push(e[v+b]);h.push(S)}const p=h.length;if(p===0)return null;const m=h[0].length;if(m===0)return null;const y=new Float32Array(m*p);for(let g=0;g<p;g++){const v=h[g];for(let S=0;S<m;S++)y[g*m+S]=v[S]}const w=i_(y,m,p,i),x=o_(w,m,p);return{width:m,height:p,data:x}}function L_(e,t,r,n,a,i,o){const{x:s,y:l,w:u,h:f}=n,d=[],h=Math.max(0,Math.floor(s)),p=Math.max(0,Math.floor(l)),m=Math.min(t,Math.ceil(s+u)),y=Math.min(r,Math.ceil(l+f)),w=a>>1,x=a&1;for(let k=p;k<y;k++){if(k%2!==w)continue;const P=k*t;for(let C=h;C<m;C++){if(C%2!==x)continue;const N=e[P+C];N>=i&&N<=o&&d.push(N-i)}}if(d.length===0)return null;d.sort((k,P)=>k-P);const g=[d[0]];for(let k=1;k<d.length;k++)d[k]!==d[k-1]&&g.push(d[k]);const v=[],S=[],b={};for(let k=0;k<g.length-1;k++){const P=g[k],N=g[k+1]-P;v.push(N),S.push({x:P,y:N}),b[N]=(b[N]||0)+1}return{uniqueCount:g.length,diffCount:v.length,stepCounts:b,plotData:S}}function N3(e,t,r){if(!r.advancedZeroDep)throw new Error("Unmixing settings not found in DisplaySettings.");const{bl:n,bg:a,fg:i}=r.advancedZeroDep,{data:o,width:s,whiteLevel:l}=e,u=a.map((v,S)=>Math.max(0,v-n[S])),f=i.map((v,S)=>Math.max(0,v-n[S])),d=(u[1]+u[3])/2,h=(f[1]+f[3])/2,p=Math.floor(t.x),m=Math.floor(t.y),y=Math.floor(t.w),w=Math.floor(t.h),x=Math.pow(2,r.exposure),g=new Uint16Array(y*w);for(let v=0;v<w;v++){const S=m+v;if(S<0||S>=e.height)continue;const b=S%2,k=S*s,P=v*y;for(let C=0;C<y;C++){const N=p+C;if(N<0||N>=s)continue;const O=N%2;let E=0;!b&&!O?E=0:!b&&O?E=1:b&&!O?E=3:E=2;const M=o[k+N],_=n[E],T=u[E],$=f[E],I=Math.max(M-_,0),A=$-T||1e-9,R=(I-T)/A;let L;R<0?L=I*(d/Math.max(T,1e-9)):R>1?L=I*(h/Math.max($,1e-9)):L=(1-R)*d+R*h,L*=x,g[P+C]=Math.max(0,Math.min(65535,Math.round(L)))}}return{data:g,width:y,height:w}}async function a2(e,t){const r=await Ao(),n=new r;try{const a=new Uint8Array(e.slice(0));let i=!1,o=[];if(t.customMatrix&&t.customMatrix.length===9){const h=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],p=Ou(h);if(p){const m=t.wbGains?t.wbGains[0]:1,y=t.wbGains?t.wbGains[1]:1,x=Jd(p,[[m,0,0],[0,1,0],[0,0,y]]),g=Jd(gx,x);o=[g[0][0],g[0][1],g[0][2],g[1][0],g[1][1],g[1][2],g[2][0],g[2][1],g[2][2]],i=!0}else throw new Error("Custom Matrix is not invertible.")}const s={outputBps:16,noAutoBright:!0,bright:i?1:Math.pow(2,t.exposure)};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(h=>{const p=Math.round(h);return p===0?1:p})),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,i?(s.outputColor=0,s.gamma=[1,1],s.userMul=[1,1,1,1],s.useCameraWb=!1):(s.outputColor=1,s.useCameraWb=!0),await n.open(a,s);const l=await n.imageData(),u=new ImageData(l.width,l.height),f=u.data,d=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2);if(i&&o.length===9){const h=o,m=Math.pow(2,t.exposure)*.25;for(let y=0;y<d.length;y+=3){const w=d[y]/65535,x=d[y+1]/65535,g=d[y+2]/65535;let v=h[0]*w+h[1]*x+h[2]*g,S=h[3]*w+h[4]*x+h[5]*g,b=h[6]*w+h[7]*x+h[8]*g;v*=m,S*=m,b*=m,v=Math.max(0,Math.min(1,v)),S=Math.max(0,Math.min(1,S)),b=Math.max(0,Math.min(1,b)),v=oi(v),S=oi(S),b=oi(b);const k=y/3*4;f[k]=Math.round(v*255),f[k+1]=Math.round(S*255),f[k+2]=Math.round(b*255),f[k+3]=255}}else for(let h=0;h<d.length;h+=3){const p=h/3*4;f[p]=d[h]>>8,f[p+1]=d[h+1]>>8,f[p+2]=d[h+2]>>8,f[p+3]=255}return u}finally{n.delete?n.delete():n.close()}}async function ng(e,t){const r=await Ao(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const y=await n.metadata(!0);y&&y.white_level&&(a=y.white_level)}catch(y){console.warn("Metadata error",y)}const i=n.getRawImage(),o=i.width,s=i.height,l=i.data,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,m=t.wbGains?t.wbGains[1]:1;for(let y=0;y<s;y++){const w=y%2;for(let x=0;x<o;x++){const g=x%2,v=w*2+g,S=l[y*o+x],b=d[v];let k=(S-b)/(h-b);k=Math.max(0,Math.min(1,k)),t.exposure!==0&&(k*=Math.pow(2,t.exposure),k=Math.min(1,k)),v===0?k*=p:v===3&&(k*=m);const P=Math.round(oi(Math.min(1,k))*255),C=(y*o+x)*4;f[C]=P,f[C+1]=P,f[C+2]=P,f[C+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function B_(e,t){const r=await Ao(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const E=await n.metadata(!0);E&&E.white_level&&(a=E.white_level)}catch{}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data,d=t.blackLevel||[0,0,0,0],h=a,p=t.wbGains?t.wbGains[0]:1,m=t.wbGains?t.wbGains[1]:1,y=Math.pow(2,t.exposure);let w=[[1,0,0],[0,1,0],[0,0,1]];if(t.customMatrix&&t.customMatrix.length===9){const E=[[t.customMatrix[0],t.customMatrix[1],t.customMatrix[2]],[t.customMatrix[3],t.customMatrix[4],t.customMatrix[5]],[t.customMatrix[6],t.customMatrix[7],t.customMatrix[8]]],M=Ou(E);M&&(w=Jd(gx,M))}const x=w[0][0],g=w[0][1],v=w[0][2],S=w[1][0],b=w[1][1],k=w[1][2],P=w[2][0],C=w[2][1],N=w[2][2],O=new Float32Array(o*s);for(let E=0;E<o*s;E++){const M=Math.floor(E/o),_=E%o,T=M%2,$=_%2,I=T*2+$,A=l[E],R=d[I];let L=(A-R)/(h-R);L=Math.max(0,L),I===0?L*=p:I===3&&(L*=m),O[E]=L}for(let E=1;E<s-1;E++){const M=E%2,_=E*o;for(let T=1;T<o-1;T++){const $=T%2,I=_+T;let A=0,R=0,L=0;!M&&!$?(A=O[I],R=(O[I-1]+O[I+1]+O[I-o]+O[I+o])*.25,L=(O[I-o-1]+O[I-o+1]+O[I+o-1]+O[I+o+1])*.25):M&&$?(L=O[I],R=(O[I-1]+O[I+1]+O[I-o]+O[I+o])*.25,A=(O[I-o-1]+O[I-o+1]+O[I+o-1]+O[I+o+1])*.25):(R=O[I],!M&&$?(A=(O[I-1]+O[I+1])*.5,L=(O[I-o]+O[I+o])*.5):(L=(O[I-1]+O[I+1])*.5,A=(O[I-o]+O[I+o])*.5));let V=x*A+g*R+v*L,ee=S*A+b*R+k*L,G=P*A+C*R+N*L;V*=y,ee*=y,G*=y,V=Math.max(0,Math.min(1,V)),ee=Math.max(0,Math.min(1,ee)),G=Math.max(0,Math.min(1,G)),V=oi(V),ee=oi(ee),G=oi(G);const W=I*4;f[W]=Math.round(V*255),f[W+1]=Math.round(ee*255),f[W+2]=Math.round(G*255),f[W+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function F_(e,t){const r=await Ao(),n=new r;try{await n.open(new Uint8Array(e));let a=16383;try{const g=await n.metadata(!0);g&&g.white_level&&(a=g.white_level)}catch(g){console.warn("Metadata error",g)}const i=n.getRawImage(),{width:o,height:s,data:l}=i,u=new ImageData(o,s),f=u.data;if(!t.advancedZeroDep)throw new Error("Missing advanced settings");const{bl:d,bg:h,fg:p}=t.advancedZeroDep,m=h.map((g,v)=>Math.max(0,g-d[v])),y=p.map((g,v)=>Math.max(0,g-d[v])),w=(m[1]+m[3])/2,x=(y[1]+y[3])/2;for(let g=0;g<s;g++){const v=g%2;for(let S=0;S<o;S++){const b=S%2;let k=0;!v&&!b?k=0:!v&&b?k=1:v&&!b?k=3:k=2;const P=l[g*o+S],C=d[k],N=m[k],O=y[k],E=Math.max(P-C,0),M=O-N||1e-9,_=(E-N)/M;let T;_<0?T=E*(w/Math.max(N,1e-9)):_>1?T=E*(x/Math.max(O,1e-9)):T=(1-_)*w+_*x;let $=T/65535;$=Math.max(0,Math.min(1,$));const I=Math.round(oi($)*255),A=(g*o+S)*4;f[A]=I,f[A+1]=I,f[A+2]=I,f[A+3]=255}}return u}finally{n.delete?n.delete():n.close()}}async function z_(e,t,r=!1,n=!1){const a=await Ao(),i=new a;try{if(t.renderMode==="zero-dependency"||t.renderMode==="advanced-zero-dep"){await i.open(new Uint8Array(e));const o=await i.metadata(!0),s=(o==null?void 0:o.white_level)||16383,l=i.getRawImage(),{width:u,height:f,data:d}=l,h=new Uint16Array(u*f),p=Math.pow(2,t.exposure);if(t.renderMode==="advanced-zero-dep"&&t.advancedZeroDep){const{bl:m,bg:y,fg:w}=t.advancedZeroDep,x=y.map((b,k)=>Math.max(0,b-m[k])),g=w.map((b,k)=>Math.max(0,b-m[k])),v=(x[1]+x[3])/2,S=(g[1]+g[3])/2;for(let b=0;b<f;b++){const k=b%2;for(let P=0;P<u;P++){const C=P%2;let N=0;!k&&!C?N=0:!k&&C?N=1:k&&!C?N=3:N=2;const O=d[b*u+P],E=m[N],M=x[N],_=g[N],T=Math.max(O-E,0),$=_-M||1e-9,I=(T-M)/$;let A;I<0?A=T*(v/Math.max(M,1e-9)):I>1?A=T*(S/Math.max(_,1e-9)):A=(1-I)*v+I*S,A*=p;let R;if(n){const L=Math.max(0,Math.min(1,A/65535));R=oi(L)*65535}else R=A;h[b*u+P]=Math.round(Math.max(0,Math.min(65535,R)))}}}else{const m=t.blackLevel||[0,0,0,0],y=t.wbGains?t.wbGains[0]:1,w=t.wbGains?t.wbGains[1]:1;for(let x=0;x<f;x++){const g=x%2;for(let v=0;v<u;v++){const S=v%2,b=g*2+S,k=d[x*u+v],P=m[b];let C=k-P;b===0?C*=y:b===3&&(C*=w),C*=p;const N=Math.max(0,Math.min(1,C/(r?s-P:s))),O=n?oi(N):N;h[x*u+v]=Math.round(O*65535)}}}return{data:h,width:u,height:f,channels:1}}else{const o=new Uint8Array(e.slice(0)),s={outputBps:16,noAutoBright:!r,bright:1,outputColor:n?1:0,useCameraWb:!0};t.blackLevel&&t.blackLevel.length===4&&(s.userBlack=0,s.userCblack=t.blackLevel.map(d=>Math.max(1,Math.round(d)))),t.demosaicMethod===-1?s.noInterpolation=!0:s.userQual=t.demosaicMethod,await i.open(o,s);const l=await i.imageData(),u=new Uint16Array(l.data.buffer,l.data.byteOffset,l.data.byteLength/2),f=Math.pow(2,t.exposure);if(f!==1)for(let d=0;d<u.length;d++)u[d]=Math.max(0,Math.min(65535,Math.round(u[d]*f)));return{data:u,width:l.width,height:l.height,channels:3}}}finally{i.delete?i.delete():i.close()}}const Rs=({title:e,children:t})=>c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 transition-colors duration-300",children:[c.jsx("div",{className:"p-4 font-semibold text-gray-800 dark:text-slate-200 bg-gray-50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-800 select-none cursor-default transition-colors duration-300",children:c.jsx("span",{children:e})}),c.jsx("div",{className:"p-4 bg-white dark:bg-slate-900/50 transition-colors duration-300",children:t})]}),U_=[{value:-1,label:"Raw Bayer (Grayscale)"},{value:0,label:"Linear interpolation"},{value:1,label:"VNG (Variable Number of Gradients)"},{value:2,label:"PPG (Patterned Pixel Grouping)"},{value:3,label:"AHD (Adaptive Homogeneity-Directed)"},{value:4,label:"DCB (Demosaicing with Color Back-refinement)"},{value:11,label:"DHT (Modified AHD)"},{value:12,label:"AAHD (Adaptive AHD)"}],ag=({checked:e,onChange:t,label:r})=>c.jsxs("div",{className:"flex items-center justify-between py-2 cursor-pointer group",onClick:()=>t(!e),children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-slate-300 select-none group-hover:text-gray-900 dark:group-hover:text-slate-200 transition-colors",children:r}),c.jsx("div",{className:`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${e?"bg-cyan-500 dark:bg-cyan-600":"bg-gray-300 dark:bg-slate-600 group-hover:bg-gray-400 dark:group-hover:bg-slate-500"}`,children:c.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-200 ease-in-out ${e?"translate-x-5":"translate-x-0"}`})})]}),ig=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},G_=e=>{const{rawImageData:t,displaySettings:r,onApplyDisplaySettings:n,onSetSelection:a,exifData:i,isBridgeConnected:o,isDrLabOpen:s,drMarkingStep:l,onStartMarking:u,onGenerateTestPic:f,drRoiSize:d,onDrRoiSizeChange:h,drGridRows:p,onDrGridRowsChange:m,drGridCols:y,onDrGridColsChange:w,onBatchDrLab:x,hasDrMarkers:g,isFftLabOpen:v,onProcessPair:S,onProcessBatchDiff:b,onProcessStackFft:k,onOpenCrossCalc:P,isThreePlane:C,onToggleXTrans:N,xtransPhase:O,onXTransPhaseChange:E,isXTransConverted:M,onCommand:_,isColorLabOpen:T,colorLabMarkingStep:$,onStartColorLabMarking:I,isSfrLabOpen:A,roiStats:R,isBGGR:L,onOpenDngExport:V}=e,ee=!!t,G=!!(t!=null&&t.isXTrans),W=!!N,[ne,Q]=j.useState(r.exposure.toString()),[B,ie]=j.useState(""),[K,X]=j.useState("0 0 0 0"),[se,de]=j.useState("1.0"),[J,je]=j.useState("1.0"),[ye,te]=j.useState(r.demosaicMethod),[he,ve]=j.useState(!!r.showKadc),[Ke,Fe]=j.useState(!!r.subtractBlackLevelFromStats),[Ae,Ue]=j.useState("64"),[ft,yt]=j.useState(!1),[br,ut]=j.useState("0 0 0 0"),[gr,Je]=j.useState("2840 6303 3935 6303"),[Vt,Et]=j.useState("780 1720 1101 1720"),[wr,$t]=j.useState(!1),[Ot,Ge]=j.useState(!1),[Dt,kt]=j.useState(!1),[ar,kr]=j.useState(!1),[Zr,vt]=j.useState("single"),Qr=j.useMemo(()=>Object.keys(Qd).sort(),[]),st=j.useRef(null),jn=j.useRef(null),Rn=j.useRef(null),ha=j.useRef(null),[un,Aa]=j.useState(null),[It,fn]=j.useState(null),[Sr,Pn]=j.useState(!1),[dn,Jr]=j.useState(!0),zt=j.useRef(null),ir=j.useRef(null);j.useEffect(()=>{if(Q(r.exposure.toString()),r.customMatrix?ie(r.customMatrix.join(" ")):ie(""),r.blackLevel&&r.blackLevel.length===4)X(r.blackLevel.join(" "));else{const H=ig(t,i);H&&H.some(me=>me!==0)?X(H.join(" ")):X("")}de(r.wbGains?r.wbGains[0].toString():"1.0"),je(r.wbGains?r.wbGains[1].toString():"1.0"),te(r.demosaicMethod),ve(!!r.showKadc),Fe(!!r.subtractBlackLevelFromStats),r.advancedZeroDep&&(ut(r.advancedZeroDep.bl.join(" ")),Je(r.advancedZeroDep.bg.join(" ")),Et(r.advancedZeroDep.fg.join(" ")),yt(!0))},[r,t,i]);const Rt=j.useRef(!1),le=j.useRef(null);j.useEffect(()=>{t!==le.current&&(Rt.current=!1,le.current=t)},[t]),j.useEffect(()=>{if(o&&t&&!Rt.current){Rt.current=!0;const H=ig(t,i),me=H&&H.some(gt=>gt>0);if(H&&me){console.log("[AutoApply] Detected Black Levels via Bridge:",H);const gt={...r,blackLevel:H,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:r.exposure,wbGains:r.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};n(gt)}}},[o,t,i,r,n]);const Te=H=>Q(H),Ie=H=>de(H),it=H=>je(H),et=H=>te(parseInt(H.target.value,10)),St=H=>ie(H.target.value),mr=()=>{Q("0"),te(3),de("1.0"),je("1.0"),ve(!0),Fe(!0),ie(""),yt(!1);const H=ig(t,i);X(H&&H.some(me=>me!==0)?H.join(" "):"")},or=()=>{!t||!a||(a({x:0,y:0,w:t.width,h:t.height}),_==null||_("sel full"))},We=()=>{if(!t||!a)return;const H=parseInt(Ae,10);if(isNaN(H)||H<=0)return;const me=Math.min(H,t.width),gt=Math.min(H,t.height),Lt=Math.floor((t.width-me)/2),tn=Math.floor((t.height-gt)/2);a({x:Lt,y:tn,w:me,h:gt}),_==null||_(`sel center ${H}`)},dt=()=>{if(!t||!R){alert("Please select a region on the image first.");return}const H=xt()||[0,0,0,0],me=B.trim().replace(/[\s,\n]+/g," "),gt=me?me.split(" ").map(Number):[1,0,0,0,1,0,0,0,1];if(gt.length!==9){alert("Matrix must be 3x3 (9 values).");return}const[Lt,tn]=E_(t.data,t.width,{x:R.x,y:R.y,w:R.width,h:R.height},H,gt,L);de(Lt.toFixed(4)),je(tn.toFixed(4)),_==null||_(`wb ${Lt.toFixed(4)} ${tn.toFixed(4)} (Spot)`)},xt=()=>{const me=K.split(/[\s,]+/).filter(gt=>gt.trim()!=="").map(Number);if(me.length===1&&!isNaN(me[0]))return[me[0],me[0],me[0],me[0]];if(me.length>=4&&!me.slice(0,4).some(isNaN))return[me[0],me[1],me[2],me[3]]},jt=H=>{const me=H.trim().split(/[\s,]+/).map(Number);return me.length===4&&!me.some(isNaN)?me:me.length===1&&!isNaN(me[0])?[me[0],me[0],me[0],me[0]]:null},sr=()=>{_&&(ne!=="0"&&_(`ev ${ne}`),(se!=="1.0"||J!=="1.0")&&_(`wb ${se} ${J}`),K!=="0 0 0 0"&&K!==""&&_(`bl ${K}`),ye!==3&&_(`demo ${ye}`),B.trim().length>0&&_(`matrix ${B.replace(/\s+/g," ")}`),_("render"));const H={...r},me=parseFloat(ne);isNaN(me)||(H.exposure=me);const gt=parseFloat(se),Lt=parseFloat(J);!isNaN(gt)&&!isNaN(Lt)&&(H.wbGains=[gt,Lt]),H.demosaicMethod=ye,H.renderMode="standard";const tn=xt();tn?H.blackLevel=tn:delete H.blackLevel;const jr=B.trim().replace(/[\s,\n]+/g," ");if(jr){const rn=jr.split(" ").map(Number);rn.length===9&&!rn.some(isNaN)?H.customMatrix=rn:alert("Invalid matrix format. Please ensure exactly 9 numeric values (3x3).")}else delete H.customMatrix;H.showKadc=he,H.subtractBlackLevelFromStats=Ke,n(H)},be=()=>{Ge(!0)},hn=H=>{_&&(ne!=="0"&&_(`ev ${ne}`),(se!=="1.0"||J!=="1.0")&&_(`wb ${se} ${J}`),K!=="0 0 0 0"&&K!==""&&_(`bl ${K}`),_(H==="bilinear"?"render zero color":"render zero"));const me={...r},gt=xt();gt&&(me.blackLevel=gt);const Lt=parseFloat(se),tn=parseFloat(J);!isNaN(Lt)&&!isNaN(tn)&&(me.wbGains=[Lt,tn]);const jr=parseFloat(ne);if(isNaN(jr)||(me.exposure=jr),H==="bilinear"){const rn=B.trim().replace(/[\s,\n]+/g," ");if(rn){const zn=rn.split(" ").map(Number);zn.length===9&&!zn.some(isNaN)&&(me.customMatrix=zn)}}me.renderMode=H==="mosaic"?"zero-dependency":"zero-dep-color",me.showKadc=he,me.subtractBlackLevelFromStats=Ke,Ge(!1),n(me)},Ln=()=>{const H=jt(br),me=jt(gr),gt=jt(Vt);if(!H||!me||!gt){alert("Please enter valid 4-channel numbers for BL, BG, and FG.");return}_&&(ne!=="0"&&_(`ev ${ne}`),_(`render unmix ${H.join(" ")} ${me.join(" ")} ${gt.join(" ")}`));const Lt={...r,renderMode:"advanced-zero-dep",advancedZeroDep:{bl:H,bg:me,fg:gt}};Lt.showKadc=he,Lt.subtractBlackLevelFromStats=Ke,n(Lt)},en=()=>{if(R){const H=R.means,me=[H[0],H[1],H[3],H[2]].map(gt=>gt.toFixed(1));Je(me.join(" "))}else alert("Please select an ROI on the image first.")},pn=()=>{if(R){const H=R.means,me=[H[0],H[1],H[3],H[2]].map(gt=>gt.toFixed(1));Et(me.join(" "))}else alert("Please select an ROI on the image first.")},yi=H=>{H.target.files&&H.target.files.length>0&&x&&(x(H.target.files,Zr),_==null||_(`drlab batch ${Zr}`)),H.target.value="",kr(!1)},vi=async H=>{var gt;const me=(gt=H.target.files)==null?void 0:gt[0];if(me){try{const tn=(await me.text()).split(`
`),jr=[];jr.push("#BlackLevel: 0,0,0,0"),jr.push("#ImageHeight: 0"),jr.push("Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std");let rn=1;for(let ra=0;ra<tn.length;ra++){const Ea=tn[ra].trim();if(!Ea||Ea.includes("R_mean")||Ea.includes("R_std"))continue;const Un=Ea.split(/\s+/).map(Number);if(Un.length<8||Un.some(isNaN))continue;const U=[rn,1,Un[0],Un[2],Un[6],Un[4],Un[1],Un[3],Un[7],Un[5]].join(",");jr.push(U),rn++}const zn=new Blob([jr.join(`
`)],{type:"text/csv"}),Lo=URL.createObjectURL(zn),Ta=document.createElement("a");Ta.href=Lo,Ta.download=me.name.replace(/\.[^/.]+$/,"")+"_converted.csv",document.body.appendChild(Ta),Ta.click(),document.body.removeChild(Ta),URL.revokeObjectURL(Lo)}catch(Lt){console.error("Conversion failed",Lt),alert("Failed to convert file.")}H.target.value=""}},Bn=H=>{H.target.files&&H.target.files[0]&&(Aa(H.target.files[0]),_==null||_("fft load a"))},xi=H=>{H.target.files&&H.target.files[0]&&(fn(H.target.files[0]),_==null||_("fft load b"))},bi=()=>{un&&It&&S&&(S(un,It,Sr,dn),_==null||_("fft run"))},pa=H=>{H.target.files&&H.target.files.length>0&&b&&(b(H.target.files),_==null||_("fft batch")),H.target.value=""},hc=H=>{H.target.files&&H.target.files.length>0&&k&&(k(H.target.files),_==null||_("fft stack")),H.target.value=""},Fn=!!M;return c.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-black",children:[c.jsxs("div",{className:"flex-grow overflow-y-auto",children:[C&&c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 border-b border-red-100 dark:border-red-800 text-center animate-pulse",children:[c.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wide",children:" 3-Plane / Full Color"}),c.jsx("p",{className:"text-[10px] text-red-500/80 dark:text-red-300/70 mt-1",children:"Demosaic disabled. Stats analysis treated as pseudo-Bayer."})]}),G&&!M&&c.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-b border-amber-100 dark:border-amber-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wide",children:" X-Trans Native (Unsupported)"}),c.jsx("p",{className:"text-[10px] text-amber-600/80 dark:text-amber-300/70 mt-1 text-left leading-tight px-1",children:"Currently reading raw 6x6 pattern as Bayer. Stats will be incorrect. Please enable Pseudo-Bayer conversion below."})]}),M&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-3 border-b border-emerald-100 dark:border-emerald-800 text-center",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wide",children:" X-Trans Pseudo-Bayer"}),c.jsx("p",{className:"text-[10px] text-emerald-600/80 dark:text-emerald-300/70 mt-1 text-left leading-tight px-1",children:"Converted 6x6  2x2 RGGB (Subsampled). Demosaic & Analysis fully supported."})]}),A&&c.jsx(Rs,{title:"SFR Lab Tools (Scalar Unmixing)",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase mb-2",children:"Analyze ROI"}),c.jsx("p",{className:"text-[10px] text-gray-500 dark:text-slate-400 mb-2",children:"Select an edge on the main canvas and click analyze. Use the pop-up modal to view ESF/LSF/MTF."}),c.jsx("div",{className:"text-center text-xs font-bold text-orange-500",children:"(ROI Analysis Window is Active)"})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsx(ag,{checked:ft,onChange:yt,label:" (Scalar Unmixing)"}),ft&&c.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-indigo-200 dark:border-indigo-900 animate-in slide-in-from-top-2 duration-200",children:[c.jsxs("div",{className:"grid grid-cols-5 gap-1 items-center text-[9px] uppercase font-bold text-gray-400 mb-[-8px]",children:[c.jsx("div",{className:"col-span-1",children:"Param"}),c.jsx("div",{className:"text-center",children:"Ch0(R)"}),c.jsx("div",{className:"text-center",children:"Ch1(G1)"}),c.jsx("div",{className:"text-center",children:"Ch2(B)"}),c.jsx("div",{className:"text-center",children:"Ch3(G2)"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500",children:"BL:"}),c.jsx("input",{type:"text",value:br,onChange:H=>ut(H.target.value),className:"col-span-4 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"B ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:gr,onChange:H=>Je(H.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:en,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[c.jsx("span",{className:"text-[10px] font-bold text-emerald-500",children:"F ():"}),c.jsxs("div",{className:"col-span-4 flex gap-1",children:[c.jsx("input",{type:"text",value:Vt,onChange:H=>Et(H.target.value),className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-xs font-mono text-gray-900 dark:text-slate-100"}),c.jsx("button",{onClick:pn,className:"px-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-[9px] rounded font-bold transition-colors",title:"Fill with current ROI mean stats (Raw DN)",children:"Pick"})]})]}),c.jsx("button",{onClick:Ln,disabled:!ee,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 rounded text-[10px] shadow transition-transform active:scale-95",children:"RUN UNMIXING (ADV ZERO-DEP)"}),c.jsx("p",{className:"text-[9px] text-gray-400 italic text-center",children:" + sRGB Gamma "})]})]})}),v&&c.jsx(Rs,{title:"FFT Lab (Noise Profile)",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-fuchsia-500"})," 1. Pair Difference (Sub)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:st,className:"hidden",onChange:Bn,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var H;return(H=st.current)==null?void 0:H.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${un?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:un?`A: ${un.name}`:"Load Image A"}),c.jsx("input",{type:"file",ref:jn,className:"hidden",onChange:xi,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var H;return(H=jn.current)==null?void 0:H.click()},className:`w-full py-2 px-3 rounded-lg border text-[10px] font-bold text-left truncate transition-colors ${It?"bg-fuchsia-55 dark:bg-fuchsia-900/20 border-fuchsia-300 dark:border-fuchsia-800 text-fuchsia-700 dark:text-fuchsia-300":"bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-500 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:It?`B: ${It.name}`:"Load Image B"})]}),c.jsx("div",{className:"flex flex-col gap-1.5 pt-1",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:dn,onChange:H=>Jr(H.target.checked),className:"w-3 h-3 text-fuchsia-600 border-gray-300 rounded focus:ring-0"}),c.jsx("span",{className:"text-[10px] text-gray-600 dark:text-slate-300",children:"Normalize (2)"})]})}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:bi,disabled:!un||!It,className:"w-full bg-fuchsia-600 hover:bg-fuchsia-500 disabled:opacity-30 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px]",children:"Generate Diff & Load"}),c.jsx("input",{type:"file",ref:Rn,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:pa}),c.jsx("button",{onClick:()=>{var H;return(H=Rn.current)==null?void 0:H.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded shadow transition-all active:scale-95 text-[10px] flex items-center justify-center gap-1",children:"Batch Diffs (Auto Download)"})]})]}),c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-slate-800/40 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500"})," 2. Stack FFT (Avg PSD)"]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",ref:ha,className:"hidden",multiple:!0,onChange:hc,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff"}),c.jsx("button",{onClick:()=>{var H;return(H=ha.current)==null?void 0:H.click()},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Select Sequence Files"})]})]}),c.jsx("div",{className:"flex flex-col gap-2 pt-2",children:c.jsx("button",{onClick:()=>{P==null||P(),_==null||_("crosscalc")},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all active:scale-95 text-[10px] flex items-center justify-center gap-2",children:"Cross-Compensation Calc"})})]})}),s&&c.jsx(Rs,{title:"DR Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>{f==null||f(),_==null||_("gen test")},className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm",children:"Generate Test Pic"}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-2",children:"Grid Analysis"}),h&&d!==void 0&&c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Box Size:"}),c.jsx("input",{type:"number",min:"8",max:"512",step:"2",value:d,onChange:H=>h(parseInt(H.target.value)||64),className:"w-12 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 text-center"}),c.jsx("span",{className:"text-xs text-gray-400",children:"px"})]})}),m&&w&&p!==void 0&&y!==void 0&&c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-400",children:"Layout:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"1",max:"50",value:p,onChange:H=>m(Math.max(1,parseInt(H.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Rows"}),c.jsx("span",{className:"text-xs text-gray-400",children:"x"}),c.jsx("input",{type:"number",min:"1",max:"50",value:y,onChange:H=>w(Math.max(1,parseInt(H.target.value)||1)),className:"w-10 px-1 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md outline-none text-sm text-center",title:"Columns"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>{u==null||u(),_==null||_("mark")},disabled:!ee||l!==void 0&&l>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${ee?l&&l>0?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 border-2 border-indigo-500":"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l&&l>0?"Marking Active...":"Mark Corners"}),x&&c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"file",ref:zt,className:"hidden",multiple:!0,accept:".arw,.cr2,.cr3,.dng,.nef,.orf,.raf,.rw2,.pef,.srw,.sr2,.srf,.x3f,.erf,.mef,.mos,.mrw,.kdc,.dcr,.iiq,.3fr,.fff,.rwl,.nrw,.raw,.tif,.tiff",onChange:yi}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>kr(!ar),disabled:!g,className:"w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm bg-emerald-600 hover:bg-emerald-700 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed text-white flex items-center justify-center gap-2",children:"Reuse Last & Batch"}),ar&&c.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-20 flex flex-col animate-in fade-in zoom-in-95 duration-100",children:[c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-gray-700 dark:text-slate-200 border-b border-gray-100 dark:border-slate-700",onClick:()=>{var H;vt("single"),(H=zt.current)==null||H.click()},children:"1. Independent Frames"}),c.jsx("button",{className:"px-4 py-2 text-left text-xs hover:bg-gray-100 dark:hover:bg-slate-700 text-indigo-600 dark:text-indigo-400 font-bold",onClick:()=>{var H;vt("pair"),(H=zt.current)==null||H.click()},children:"2. Pair Difference (A-B)"})]})]})]}),c.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 dark:border-slate-800",children:[c.jsx("input",{type:"file",ref:ir,className:"hidden",accept:".txt",onChange:vi}),c.jsx("button",{onClick:()=>{var H;return(H=ir.current)==null?void 0:H.click()},className:"w-full font-bold py-2 px-4 rounded-lg shadow-sm transition-all text-xs bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 flex items-center justify-center gap-2 border border-gray-300 dark:border-slate-600",children:"Convert Format (.txt  .csv)"})]})]}),l!==void 0&&l>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-bold animate-pulse",children:[l===1&&"Click Top-Left Center",l===2&&"Click Top-Right Center",l===3&&"Click Bottom-Left Center",l===4&&"Click Bottom-Right Center"]})})]})]})}),T&&c.jsx(Rs,{title:"Color Lab Tools",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-slate-300 mb-2",children:"Calibrate colors using a standard ColorChecker 24 chart."}),c.jsx("button",{onClick:()=>{I==null||I(),_==null||_("cl mark")},disabled:!ee||$!==void 0&&$>0,className:`w-full font-bold py-2 px-4 rounded-lg shadow-md transition-all text-sm ${ee?$&&$>0?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 border-2 border-yellow-500":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:$&&$>0?"Marking Active...":"Mark 24-Patch Chart"}),$!==void 0&&$>0&&c.jsx("div",{className:"mt-2 text-center",children:c.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-bold animate-pulse",children:[$===1&&"Click Top-Left (Brown)",$===2&&"Click Top-Right (Cyanish)",$===3&&"Click Bottom-Left (White)",$===4&&"Click Bottom-Right (Black)"]})})]})}),c.jsx(Rs,{title:"Selection Tools",children:c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Quick Select or Shift+drag"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Size (px):"}),c.jsx("input",{type:"number",min:"1",value:Ae,onChange:H=>Ue(H.target.value),disabled:!ee,className:"flex-1 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx("button",{onClick:We,disabled:!ee,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Center Rect"}),c.jsx("button",{onClick:or,disabled:!ee,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-slate-200 text-xs font-semibold rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Full Image"})]})]})})}),c.jsx(Rs,{title:"Display Controls",children:c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"text-gray-500 dark:text-slate-400 text-center text-sm",children:["Adjust parameters and click ",c.jsx("b",{children:"Apply"}),"."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"exposure",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Exposure (EV)"}),c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("input",{type:"range",min:"-5",max:"5",step:"0.1",disabled:!ee,value:parseFloat(ne)||0,onChange:H=>Te(H.target.value),className:"w-full h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50"})}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{id:"exposure",type:"number",step:"0.1",value:ne,onChange:H=>Te(H.target.value),disabled:!ee,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})})]}),W&&c.jsxs("div",{className:"border-t border-gray-100 dark:border-slate-800 pt-2",children:[c.jsx(ag,{checked:!!Fn,onChange:H=>{N&&N(H),_==null||_(`xtrans ${H?"on":"off"}`)},label:"Force X-Trans (6x6 -> 2x2)"}),Fn&&O&&E&&c.jsxs("div",{className:"mt-2 pl-2 border-l-2 border-emerald-500/50 bg-emerald-50/20 dark:bg-emerald-900/10 p-2 rounded",children:[c.jsx("label",{className:"text-[9px] font-bold text-gray-500 dark:text-slate-400 uppercase block mb-1",children:"Phase Offset (Fine Tune)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"X (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:O.x,onChange:H=>{const me=Math.min(5,Math.max(0,parseInt(H.target.value)||0));E({x:me}),_==null||_(`xtrans phase ${me} ${O.y}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[9px] text-gray-400",children:"Y (0-5)"}),c.jsx("input",{type:"number",min:"0",max:"5",value:O.y,onChange:H=>{const me=Math.min(5,Math.max(0,parseInt(H.target.value)||0));E({y:me}),_==null||_(`xtrans phase ${O.x} ${me}`)},className:"w-full text-xs px-1 py-0.5 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded text-center outline-none focus:border-cyan-500"})]})]})]})]}),c.jsxs("div",{className:"space-y-5 pt-2 animate-in slide-in-from-top-2 duration-200 border-t border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx(ag,{checked:he,onChange:ve,label:"Show k"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1"})]}),c.jsxs("div",{children:[c.jsxs("button",{onClick:dt,disabled:!ee||!R,className:"w-full mb-3 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-bold rounded shadow-sm transition-all active:scale-95 disabled:bg-gray-300 dark:disabled:bg-slate-700 disabled:text-gray-500 dark:disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",title:"Calculate Gains to make the selected area neutral gray, accounting for Color Matrix",children:[c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Spot WB (Matrix-Aware)"]}),c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"White Balance Gains"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 block mb-1",children:"Red"}),c.jsx("input",{type:"number",step:"0.01",value:se,onChange:H=>Ie(H.target.value),disabled:!ee,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-red-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-blue-500 dark:text-blue-400 block mb-1",children:"Blue"}),c.jsx("input",{type:"number",step:"0.01",value:J,onChange:H=>it(H.target.value),disabled:!ee,className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-blue-500 outline-none text-sm text-gray-900 dark:text-slate-100 transition-colors duration-300"})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide flex items-center",children:["Black Level (4-Ch)",c.jsx("span",{className:"ml-1 text-[10px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"Native"}),c.jsx("button",{onClick:()=>$t(!0),className:"ml-2 text-[10px] text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 hover:underline cursor-pointer transition-colors",title:"About Black Level Settings",children:"[about]"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",title:"Subtract Black Level from ROI Mean stats (for display)",children:[c.jsx("span",{className:"text-[9px] font-mono text-gray-400 dark:text-slate-500 uppercase tracking-wide",children:"Sub. BL"}),c.jsx("div",{className:`relative w-8 h-4 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ${Ke?"bg-cyan-500":"bg-gray-300 dark:bg-slate-700"}`,onClick:()=>Fe(!Ke),children:c.jsx("div",{className:`absolute top-0.5 left-0.5 bg-white w-3 h-3 rounded-full shadow-sm transform transition-transform duration-200 ${Ke?"translate-x-4":"translate-x-0"}`})})]})]}),c.jsx("input",{type:"text",value:K,onChange:H=>X(H.target.value),disabled:!ee,placeholder:"0 0 0 0",className:"w-full px-2 py-1 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none text-xs font-mono text-gray-900 dark:text-slate-100 transition-colors duration-300",title:"Enter 4 values separated by space or comma"}),c.jsx("p",{className:"text-[10px] text-gray-400 dark:text-slate-500 mt-1",children:"Order: (0,0) (0,1) (1,0) (1,1). Spatial: TL, TR, BL, BR."})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsxs("label",{htmlFor:"customMatrix",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block flex flex-col gap-1",children:[c.jsx("span",{children:"Custom Color Matrix"}),c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-slate-500 font-normal normal-case",children:"XYZ to Camera RGB (3x3, 9 nums)"})]}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[120px] cursor-pointer outline-none text-gray-700 dark:text-gray-300",onChange:H=>{const me=Qd[H.target.value];me&&ie(me),H.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera..."}),Qr.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsx("textarea",{id:"customMatrix",value:B,onChange:St,disabled:!ee,placeholder:"0.66 -0.19 -0.04  -0.46 1.23 0.25  -0.06 0.13 0.65",className:"w-full h-24 px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-xs font-mono leading-relaxed text-gray-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"pt-4 flex flex-col gap-2",children:[c.jsx("button",{onClick:be,disabled:!ee,className:"w-full text-sm font-bold bg-slate-700 hover:bg-slate-600 text-white disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 transition-all py-4 rounded-xl flex items-center justify-center border-2 border-slate-500 shadow-lg",title:"Diagnostic Mode. Direct RAW-to-Grayscale mapping using manual Black Level & WB Gains (R/B calibration).",children:c.jsxs("span",{className:"text-center leading-tight",children:["Apply Settings/Render",c.jsx("br",{}),c.jsx("span",{className:"text-xs font-normal opacity-90",children:"CM"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>kt(!0),disabled:!ee,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed py-3 px-2 rounded-lg transition-all active:scale-95 border border-gray-700",children:["",c.jsx("br",{}),c.jsx("span",{className:"text-[10px] font-normal opacity-75",children:""})]}),c.jsx("button",{onClick:()=>V==null?void 0:V(),disabled:!ee,className:"w-full text-xs font-bold bg-black text-gray-400 hover:bg-gray-800 hover:text-gray-300 dark:bg-black dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-300 disabled:bg-gray-300 dark:disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-all py-3 rounded-lg flex items-center justify-center border border-gray-700 active:scale-95",title:"Manual Lab Workstation: 16-bit Bit Shift and Manual DNG Container Packaging",children:"Generate 16bit DNG"})]}),c.jsx("div",{className:"text-center pt-1",children:c.jsx("button",{onClick:mr,disabled:!ee,className:"text-xs text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 disabled:text-gray-300 dark:disabled:text-slate-600 transition-colors underline decoration-gray-300 hover:decoration-gray-600 underline-offset-2",children:"Reset Defaults (Local)"})})]})]})})]}),c.jsx(Ei,{isOpen:wr,onClose:()=>$t(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/CBLD.html","_blank"),$t(!1)},title:"Black Level Info / ",confirmText:"Visit Database (CBLD)",cancelText:"Close",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left text-sm text-gray-600 dark:text-slate-300",children:[c.jsxs("p",{className:"leading-relaxed",children:["JiangBridge/",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"CBLD.html"}),""]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("p",{className:"leading-relaxed",children:["Autofills. If no result is found or it's wrong or not precise enough, please check the ",c.jsx("a",{href:"https://y-g-jiang.github.io/CBLD.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline mx-1 font-bold",children:"Black Level Database"}),"to find your camera model. However, manually capturing a dark frame(close the lens cap) with the same ISO/speed setting to calculate the average (using jiangtherapee) and input the values is highly recommended for higher decimal precision, as internal tags often lack accuracy."]})]})}),c.jsx(Ei,{isOpen:Ot,onClose:()=>Ge(!1),onConfirm:()=>{},title:"Select Zero-Dependency Mode",confirmText:"",cancelText:"",message:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"text-gray-600 dark:text-slate-300 text-left text-sm leading-relaxed mb-2",children:"Select how you want to visualize the raw data without full JOraw processing."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>hn("mosaic"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-gray-400 dark:hover:border-slate-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-slate-600 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("span",{className:"font-bold text-gray-800 dark:text-slate-200",children:"Raw Mosaic"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Grayscale checkerboard"})]}),c.jsxs("button",{onClick:()=>hn("bilinear"),className:"flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 border-2 border-transparent hover:border-cyan-400 dark:hover:border-cyan-500 rounded-xl transition-all group",children:[c.jsx("div",{className:"w-12 h-12 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:c.jsx("svg",{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),c.jsx("span",{className:"font-bold text-cyan-700 dark:text-cyan-400",children:"Basic Color"}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Simple Demosaic + WB + Matrix"})]})]})]})}),c.jsx(Ei,{isOpen:Dt,onClose:()=>kt(!1),onConfirm:()=>{sr(),kt(!1)},title:"Official Render Options",confirmText:"Render",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:"Select a demosaicing algorithm for the standard render pipeline."}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"demosaic-modal",className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase tracking-wide block mb-2",children:"Demosaic Method"}),c.jsx("select",{id:"demosaic-modal",value:ye,onChange:et,disabled:!ee||C||(t==null?void 0:t.isXTrans),className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-md focus:ring-2 focus:ring-cyan-500 outline-none transition-colors disabled:bg-gray-100 dark:disabled:bg-slate-800/50 disabled:cursor-not-allowed text-sm text-gray-900 dark:text-slate-100",children:U_.map(H=>c.jsx("option",{value:H.value,children:H.label},H.value))}),C&&c.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"Full color data detected. Demosaicing skipped."}),(t==null?void 0:t.isXTrans)&&c.jsx("p",{className:"text-[9px] text-amber-500 mt-1",children:"X-Trans detected. Please enable Pseudo-Bayer conversion first."})]})]})})]})},W_=j.forwardRef((e,t)=>{const{rawImageData:r,displaySettings:n,onApplyDisplaySettings:a,onSetSelection:i,onStartMarking:o,onGenerateTestPic:s,onBatchDrLab:l,onProcessPair:u,onProcessBatchDiff:f,onProcessStackFft:d,onOpenCrossCalc:h,onToggleXTrans:p,onXTransPhaseChange:m}=e,[y,w]=j.useState([{id:"init",type:"info",text:'Jiangtherapee CLI v1.0. Type "help" for commands.'}]),[x,g]=j.useState(""),[v,S]=j.useState([]),[b,k]=j.useState(-1),P=j.useRef(null),C=j.useRef(null),N=j.useRef(null),O=j.useRef(null),E=j.useRef(null),M=j.useRef(null),_=j.useRef(null),T=j.useRef(null);j.useRef(null);const $=j.useRef({...n});j.useEffect(()=>{$.current={...n}},[n.exposure,n.demosaicMethod]);const I=j.useRef({fileA:null,fileB:null});j.useLayoutEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[y]);const A=(W,ne="out")=>{w(Q=>[...Q,{id:Date.now().toString()+Math.random(),type:ne,text:W}])};j.useImperativeHandle(t,()=>({log:(W,ne="in")=>{const Q=ne;let B=W;ne==="in"&&!W.startsWith(">")&&(B=`> ${W}`),A(B,Q)}}));const R=j.useRef(null);j.useEffect(()=>{if(e.roiStats&&e.roiStats!==R.current){const W=e.roiStats,ne=Math.round(W.x),Q=Math.round(W.y),B=Math.round(W.width),ie=Math.round(W.height);A(`> sel ${ne} ${Q} ${B} ${ie}`,"in");const K=e.isBGGR?[{name:"B",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"R",idx:3}]:[{name:"R",idx:0},{name:"G1",idx:1},{name:"G2",idx:2},{name:"B",idx:3}],X=c.jsxs("div",{className:"font-mono text-xs mt-1 mb-2",children:[c.jsxs("div",{className:"text-gray-400 mb-1",children:["Region Stats [",ne,", ",Q,", ",B,"x",ie,"]:"]}),c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 border-b border-gray-700 pb-1 mb-1 text-gray-500 font-bold",children:[c.jsx("div",{children:"Ch"}),c.jsx("div",{className:"text-right",children:"Mean"}),c.jsx("div",{className:"text-right",children:"StdDev"})]}),K.map(se=>c.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr] gap-x-2 hover:bg-gray-900",children:[c.jsx("div",{className:se.name==="R"?"text-red-500":se.name==="B"?"text-blue-500":"text-green-500",children:se.name}),c.jsx("div",{className:"text-right text-gray-300",children:W.means[se.idx].toFixed(2)}),c.jsx("div",{className:"text-right text-gray-400",children:W.stdDevs[se.idx].toFixed(2)})]},se.name))]});A(X,"out"),R.current=W}},[e.roiStats,e.isBGGR]);const L=W=>{var ie,K,X,se,de,J,je;const ne=W.trim().split(/\s+/),Q=ne[0].toLowerCase(),B=ne.slice(1);switch(Q){case"help":A("Available Commands:","info"),A("  ev <val>          Set Exposure (e.g. ev 1.5)","info"),A("  wb <r> <b>        Set WB Gains","info"),A("  bl <r> <g>...     Set Black Level (1 or 4 vals)","info"),A("  demo <id>         Demosaic (0=Lin, 3=AHD, -1=Raw)","info"),A("  matrix <n1..n9>   Set Custom Color Matrix","info"),A("  xtrans <on|off>   Force X-Trans Mode","info"),A("  xtrans phase <x> <y>  Set X-Trans Phase","info"),A("  render            Apply settings & Render","info"),A("  render zero       Zero-Dependency Render","info"),A("  render unmix      Advanced Unmixing Render","info"),A("  sel <full|center> Select ROI","info"),A("  sel <x> <y> <w> <h> Select ROI manually","info"),A("  mark              Start DR Lab Corner Marking","info"),A("  gen test          Generate Test Pattern","info"),A("  fft load <a>      Load FFT Pair Image A","info"),A("  fft load <b>      Load FFT Pair Image B","info"),A("  fft run           Run FFT Pair Diff","info"),A("  cls               Clear Screen","info");break;case"cls":case"clear":w([]);break;case"ev":case"exposure":if(B.length<1){A(`Current EV: ${$.current.exposure}`,"info");return}const ye=parseFloat(B[0]);if(isNaN(ye)){A("Invalid EV value","err");return}$.current.exposure=ye,A(`EV set to ${ye} (run 'render' to apply)`);break;case"wb":if(B.length<2){A("Usage: wb <red_gain> <blue_gain>","err");return}const te=parseFloat(B[0]),he=parseFloat(B[1]);if(isNaN(te)||isNaN(he)){A("Invalid gains","err");return}$.current.wbGains=[te,he],A(`WB set to R:${te} B:${he}`);break;case"bl":case"black":if(B.length===0){A(`Current BL: ${((ie=$.current.blackLevel)==null?void 0:ie.join(" "))||"Auto"}`,"info");return}let ve=B.map(Number);if(ve.some(isNaN)){A("Invalid numbers","err");return}if(ve.length===1&&(ve=[ve[0],ve[0],ve[0],ve[0]]),ve.length<4){A("Need 1 or 4 values","err");return}$.current.blackLevel=[ve[0],ve[1],ve[2],ve[3]],$.current.subtractBlackLevelFromStats=!0,$.current.showKadc=!0,A(`Black Level set: ${ve.slice(0,4).join(" ")}`);break;case"demo":case"demosaic":if(B.length===0){A("Usage: demo <id> (0=Lin, 1=VNG, 2=PPG, 3=AHD, 4=DCB, 11=DHT, 12=AAHD, -1=Raw)","info");return}const Ke=parseInt(B[0]);if(isNaN(Ke)){A("Invalid method ID","err");return}$.current.demosaicMethod=Ke,A(`Demosaic set to ID ${Ke}`);break;case"matrix":if(B.length!==9){A("Usage: matrix m1 m2 m3 m4 m5 m6 m7 m8 m9 (3x3)","err");return}const Fe=B.map(Number);if(Fe.some(isNaN)){A("Invalid matrix values","err");return}$.current.customMatrix=Fe,A("Custom Color Matrix set.");break;case"xtrans":if(B[0]==="on"||B[0]==="true")p?(p(!0),A("X-Trans conversion ON")):A("Feature not available","err");else if(B[0]==="off"||B[0]==="false")p?(p(!1),A("X-Trans conversion OFF")):A("Feature not available","err");else if(B[0]==="phase"){if(B.length<3){A("Usage: xtrans phase <x> <y>","err");return}const Ae=parseInt(B[1]),Ue=parseInt(B[2]);m&&(m({x:Ae,y:Ue}),A(`X-Trans Phase set to (${Ae}, ${Ue})`))}else A("Usage: xtrans <on|off> OR xtrans phase <x> <y>","err");break;case"render":case"apply":if(B[0]==="zero"){const Ae=B[1]==="color"?"zero-dep-color":"zero-dependency";$.current.renderMode=Ae,A(`Rendering Zero-Dependency (${Ae})...`)}else if(B[0]==="unmix"){if(B.length<13){A("Usage: render unmix <4xBL> <4xBG> <4xFG>","err");return}const Ae=B.slice(1).map(Number);if(Ae.some(isNaN)){A("Invalid params","err");return}$.current.renderMode="advanced-zero-dep",$.current.advancedZeroDep={bl:[Ae[0],Ae[1],Ae[2],Ae[3]],bg:[Ae[4],Ae[5],Ae[6],Ae[7]],fg:[Ae[8],Ae[9],Ae[10],Ae[11]]},A("Rendering Advanced Unmix...")}else $.current.renderMode="standard",A("Rendering Standard Pipeline...");a({...$.current});break;case"sel":case"select":if(!r||!i){A("No image loaded","err");return}if(B[0]==="full")i({x:0,y:0,w:r.width,h:r.height});else if(B[0]==="center"){const Ae=parseInt(B[1])||64,Ue=Math.floor((r.width-Ae)/2),ft=Math.floor((r.height-Ae)/2);i({x:Ue,y:ft,w:Ae,h:Ae})}else if(B.length===4){const[Ae,Ue,ft,yt]=B.map(Number);if([Ae,Ue,ft,yt].some(isNaN)){A("Invalid coordinates","err");return}i({x:Ae,y:Ue,w:ft,h:yt})}else A("Usage: sel full | sel center <size> | sel <x> <y> <w> <h>","err");break;case"mark":o&&(o(),A("Interactive marking started. Click 4 corners on canvas."));break;case"gen":(B[0]==="test"||B[0]==="pattern")&&s&&(s(),A("Generated Test Pattern"));break;case"drlab":if(B[0]==="config"){const[Ae,Ue,ft]=B.slice(1).map(Number);e.onDrRoiSizeChange&&e.onDrRoiSizeChange(Ae||64),e.onDrGridRowsChange&&e.onDrGridRowsChange(Ue||10),e.onDrGridColsChange&&e.onDrGridColsChange(ft||10),A(`DR Grid Configured: Size=${Ae}, Grid=${Ue}x${ft}`)}else B[0]==="batch"&&(B[1]==="pair"?(A("Select file pairs for DR Lab..."),(K=O.current)==null||K.click()):(A("Select single files for DR Lab..."),(X=N.current)==null||X.click()));break;case"fft":B[0]==="load"?B[1]==="a"?(se=E.current)==null||se.click():B[1]==="b"?(de=M.current)==null||de.click():A("Usage: fft load <a|b>","err"):B[0]==="run"?I.current.fileA&&I.current.fileB&&u?(A(`Processing Pair: ${I.current.fileA.name} - ${I.current.fileB.name}`),u(I.current.fileA,I.current.fileB,!1,!0)):A("Load both A and B first","err"):B[0]==="stack"?(A("Select files for Stack FFT..."),(J=_.current)==null||J.click()):B[0]==="batch"&&(A("Select files for Batch Diff...","info"),(je=T.current)==null||je.click());break;case"crosscalc":h&&(h(),A("Opened Cross-Calculator"));break;default:A(`Unknown command: ${Q}`,"err")}},V=W=>{if(W.key==="Enter"){const ne=x.trim();if(!ne)return;A(`> ${ne}`,"in"),ne.split(";").forEach(B=>{B.trim()&&L(B.trim())}),S(B=>[...B,ne]),k(-1),g("")}else if(W.key==="ArrowUp"){if(W.preventDefault(),v.length>0){const ne=b===-1?v.length-1:Math.max(0,b-1);k(ne),g(v[ne])}}else if(W.key==="ArrowDown")if(W.preventDefault(),b!==-1){const ne=Math.min(v.length-1,b+1);k(ne),g(v[ne])}else g("")},ee=(W,ne)=>{W.target.files&&W.target.files.length>0&&l&&(A(`Batch processing ${W.target.files.length} files in ${ne} mode...`),l(W.target.files,ne)),W.target.value=""},G=(W,ne)=>{var B;const Q=(B=W.target.files)==null?void 0:B[0];Q&&(ne==="A"?I.current.fileA=Q:I.current.fileB=Q,A(`Loaded ${ne}: ${Q.name}`)),W.target.value=""};return c.jsxs("div",{className:"flex flex-col h-full bg-black text-green-500 font-mono text-sm border-l-4 border-gray-700 p-2 shadow-2xl",children:[c.jsxs("div",{className:"border-b border-green-800 pb-2 mb-2 flex justify-between items-end select-none",children:[c.jsx("h2",{className:"text-xl font-bold tracking-widest",children:"TERMINAL"}),c.jsx("div",{className:"text-[10px] text-green-700",children:"JIANGTHERAPEE_CLI_V1"})]}),c.jsx("div",{ref:P,className:"flex-grow overflow-y-auto overflow-x-hidden break-words mb-2 pr-1 scrollbar-thin scrollbar-thumb-green-900 scrollbar-track-black",children:y.map(W=>c.jsxs("div",{className:`mb-1 ${W.type==="in"?"opacity-50":""} ${W.type==="err"?"text-red-500":""} ${W.type==="info"?"text-cyan-400":""}`,children:[W.type!=="in"&&typeof W.text=="string"&&!W.text.startsWith(">")&&c.jsx("span",{className:"mr-2 opacity-50",children:">"}),W.text]},W.id))}),c.jsxs("div",{className:"relative flex items-center border-t border-green-800 pt-2",children:[c.jsx("span",{className:"text-green-500 mr-2 animate-pulse font-bold",children:">"}),c.jsx("input",{ref:C,type:"text",value:x,onChange:W=>g(W.target.value),onKeyDown:V,autoFocus:!0,className:"w-full bg-transparent border-none outline-none text-green-400 placeholder-green-900",placeholder:"Enter command (e.g. 'help')",spellCheck:!1,autoComplete:"off"})]}),c.jsx("input",{type:"file",ref:N,className:"hidden",multiple:!0,onChange:W=>ee(W,"single")}),c.jsx("input",{type:"file",ref:O,className:"hidden",multiple:!0,onChange:W=>ee(W,"pair")}),c.jsx("input",{type:"file",ref:E,className:"hidden",onChange:W=>G(W,"A")}),c.jsx("input",{type:"file",ref:M,className:"hidden",onChange:W=>G(W,"B")}),c.jsx("input",{type:"file",ref:_,className:"hidden",multiple:!0,onChange:W=>{e.onProcessStackFft&&W.target.files&&(A(`Loading ${W.target.files.length} frames for Stack FFT...`),e.onProcessStackFft(W.target.files)),W.target.value=""}}),c.jsx("input",{type:"file",ref:T,className:"hidden",multiple:!0,onChange:W=>{e.onProcessBatchDiff&&W.target.files&&(A("Starting Batch Diff..."),e.onProcessBatchDiff(W.target.files)),W.target.value=""}})]})}),V_=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},H_=e=>{const[t,r]=j.useState("gui"),{rawImageData:n,exifData:a,isBridgeConnected:i,displaySettings:o,onApplyDisplaySettings:s}=e,l=j.useRef(null),u=j.useRef(!1),f=j.useRef(null);j.useEffect(()=>{n!==f.current&&(u.current=!1,f.current=n)},[n]),j.useEffect(()=>{var h;if(i&&n&&!u.current){u.current=!0;const p=V_(n,a),m=p&&p.some(y=>y>0);if(p&&m){console.log("[AutoApply] Detected Black Levels via Bridge:",p),(h=l.current)==null||h.log(`Auto-detected BL: ${p.join(" ")}`,"info");const y={...o,blackLevel:p,showKadc:!1,subtractBlackLevelFromStats:!1,exposure:o.exposure,wbGains:o.wbGains||[1,1],demosaicMethod:-1,renderMode:"zero-dependency"};s(y)}}},[i,n,a,o,s]);const d=h=>{l.current&&l.current.log(h,"in")};return c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-800 p-1 border-b border-gray-300 dark:border-gray-700 flex-shrink-0",children:[c.jsx("button",{onClick:()=>r("gui"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors border-r border-gray-300 dark:border-gray-700 ${t==="gui"?"bg-white dark:bg-black shadow-inner text-cyan-600 dark:text-cyan-400":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"GUI"}),c.jsx("button",{onClick:()=>r("terminal"),className:`flex-1 py-1 text-xs font-bold uppercase tracking-wider transition-colors ${t==="terminal"?"bg-black text-green-500 shadow-inner":"bg-gray-200 dark:bg-gray-900 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Terminal"})]}),c.jsxs("div",{className:"flex-grow overflow-hidden relative",children:[c.jsx("div",{className:`h-full w-full ${t==="gui"?"block":"hidden"}`,children:c.jsx(G_,{...e,onCommand:d})}),c.jsx("div",{className:`h-full w-full ${t==="terminal"?"block":"hidden"}`,children:c.jsx(W_,{...e,ref:l})})]})]})},X_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}),K_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),Y_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M4 12a8 8 0 0114.24-5.12M20 20v-5h-5M20 12a8 8 0 01-14.24 5.12"})}),q_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),Z_=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),Dm=.1,Im=16,Q_=Math.log(Dm),J_=Math.log(Im),eA=({zoom:e,onZoomChange:t,onResetView:r,touchAction:n,onToggleTouchAction:a})=>{const i=u=>{const f=parseFloat(u.target.value),d=Math.exp(f);t(Math.max(Dm,Math.min(Im,d)))},o=()=>{t(Math.min(Im,e*1.25))},s=()=>{t(Math.max(Dm,e/1.25))},l=Math.log(e);return c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",onClick:u=>u.stopPropagation(),children:[c.jsx("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center shadow-lg transition-colors duration-300",children:c.jsx("button",{onClick:a,className:`p-1.5 rounded-md transition-colors flex items-center justify-center ${n==="select"?"bg-cyan-100 text-cyan-600 dark:bg-cyan-900/50 dark:text-cyan-400 ring-2 ring-cyan-500/50":"text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-700"}`,title:n==="select"?"Mode: Selection (Drag to Select)":"Mode: Pan (Drag to Move)",children:n==="select"?c.jsx(Z_,{}):c.jsx(q_,{})})}),c.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/70 backdrop-blur-sm p-2 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center gap-2 text-gray-700 dark:text-slate-300 shadow-lg transition-colors duration-300",children:[c.jsx("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom Out","aria-label":"Zoom Out",children:c.jsx(X_,{})}),c.jsx("input",{type:"range",min:Q_,max:J_,step:"0.01",value:l,onChange:i,className:"w-24 sm:w-32 h-2 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500","aria-label":"Zoom slider"}),c.jsx("button",{onClick:o,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Zoom In","aria-label":"Zoom In",children:c.jsx(K_,{})}),c.jsxs("span",{className:"w-16 text-center font-mono text-sm","aria-live":"polite",children:[(e*100).toFixed(0),"%"]}),c.jsx("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",title:"Reset View","aria-label":"Reset View",children:c.jsx(Y_,{})})]})]})},tA=({theme:e,setTheme:t})=>{const r=()=>{t(e==="light"?"dark":"light")};return c.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 z-50 p-3 rounded-full bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-lg text-gray-800 dark:text-yellow-400 hover:bg-gray-100 dark:hover:bg-slate-700 transition-all duration-300",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})};function M3(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=M3(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=M3(e))&&(n&&(n+=" "),n+=t);return n}var rA=Array.isArray,ta=rA,nA=typeof Tf=="object"&&Tf&&Tf.Object===Object&&Tf,_3=nA,aA=_3,iA=typeof self=="object"&&self&&self.Object===Object&&self,oA=aA||iA||Function("return this")(),mi=oA,sA=mi,lA=sA.Symbol,yf=lA,i2=yf,A3=Object.prototype,cA=A3.hasOwnProperty,uA=A3.toString,Ac=i2?i2.toStringTag:void 0;function fA(e){var t=cA.call(e,Ac),r=e[Ac];try{e[Ac]=void 0;var n=!0}catch{}var a=uA.call(e);return n&&(t?e[Ac]=r:delete e[Ac]),a}var dA=fA,hA=Object.prototype,pA=hA.toString;function gA(e){return pA.call(e)}var mA=gA,o2=yf,yA=dA,vA=mA,xA="[object Null]",bA="[object Undefined]",s2=o2?o2.toStringTag:void 0;function wA(e){return e==null?e===void 0?bA:xA:s2&&s2 in Object(e)?yA(e):vA(e)}var Hi=wA;function kA(e){return e!=null&&typeof e=="object"}var Xi=kA,SA=Hi,jA=Xi,PA="[object Symbol]";function CA(e){return typeof e=="symbol"||jA(e)&&SA(e)==PA}var Ql=CA,OA=ta,NA=Ql,MA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_A=/^\w*$/;function AA(e,t){if(OA(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||NA(e)?!0:_A.test(e)||!MA.test(e)||t!=null&&e in Object(t)}var mx=AA;function TA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var To=TA;const Jl=Wt(To);var EA=Hi,$A=To,DA="[object AsyncFunction]",IA="[object Function]",RA="[object GeneratorFunction]",LA="[object Proxy]";function BA(e){if(!$A(e))return!1;var t=EA(e);return t==IA||t==RA||t==DA||t==LA}var yx=BA;const Xe=Wt(yx);var FA=mi,zA=FA["__core-js_shared__"],UA=zA,og=UA,l2=function(){var e=/[^.]+$/.exec(og&&og.keys&&og.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function GA(e){return!!l2&&l2 in e}var WA=GA,VA=Function.prototype,HA=VA.toString;function XA(e){if(e!=null){try{return HA.call(e)}catch{}try{return e+""}catch{}}return""}var T3=XA,KA=yx,YA=WA,qA=To,ZA=T3,QA=/[\\^$.*+?()[\]{}|]/g,JA=/^\[object .+?Constructor\]$/,e6=Function.prototype,t6=Object.prototype,r6=e6.toString,n6=t6.hasOwnProperty,a6=RegExp("^"+r6.call(n6).replace(QA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function i6(e){if(!qA(e)||YA(e))return!1;var t=KA(e)?a6:JA;return t.test(ZA(e))}var o6=i6;function s6(e,t){return e==null?void 0:e[t]}var l6=s6,c6=o6,u6=l6;function f6(e,t){var r=u6(e,t);return c6(r)?r:void 0}var As=f6,d6=As,h6=d6(Object,"create"),Th=h6,c2=Th;function p6(){this.__data__=c2?c2(null):{},this.size=0}var g6=p6;function m6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var y6=m6,v6=Th,x6="__lodash_hash_undefined__",b6=Object.prototype,w6=b6.hasOwnProperty;function k6(e){var t=this.__data__;if(v6){var r=t[e];return r===x6?void 0:r}return w6.call(t,e)?t[e]:void 0}var S6=k6,j6=Th,P6=Object.prototype,C6=P6.hasOwnProperty;function O6(e){var t=this.__data__;return j6?t[e]!==void 0:C6.call(t,e)}var N6=O6,M6=Th,_6="__lodash_hash_undefined__";function A6(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=M6&&t===void 0?_6:t,this}var T6=A6,E6=g6,$6=y6,D6=S6,I6=N6,R6=T6;function ec(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ec.prototype.clear=E6;ec.prototype.delete=$6;ec.prototype.get=D6;ec.prototype.has=I6;ec.prototype.set=R6;var L6=ec;function B6(){this.__data__=[],this.size=0}var F6=B6;function z6(e,t){return e===t||e!==e&&t!==t}var vx=z6,U6=vx;function G6(e,t){for(var r=e.length;r--;)if(U6(e[r][0],t))return r;return-1}var Eh=G6,W6=Eh,V6=Array.prototype,H6=V6.splice;function X6(e){var t=this.__data__,r=W6(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():H6.call(t,r,1),--this.size,!0}var K6=X6,Y6=Eh;function q6(e){var t=this.__data__,r=Y6(t,e);return r<0?void 0:t[r][1]}var Z6=q6,Q6=Eh;function J6(e){return Q6(this.__data__,e)>-1}var e8=J6,t8=Eh;function r8(e,t){var r=this.__data__,n=t8(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var n8=r8,a8=F6,i8=K6,o8=Z6,s8=e8,l8=n8;function tc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}tc.prototype.clear=a8;tc.prototype.delete=i8;tc.prototype.get=o8;tc.prototype.has=s8;tc.prototype.set=l8;var $h=tc,c8=As,u8=mi,f8=c8(u8,"Map"),xx=f8,u2=L6,d8=$h,h8=xx;function p8(){this.size=0,this.__data__={hash:new u2,map:new(h8||d8),string:new u2}}var g8=p8;function m8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var y8=m8,v8=y8;function x8(e,t){var r=e.__data__;return v8(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Dh=x8,b8=Dh;function w8(e){var t=b8(this,e).delete(e);return this.size-=t?1:0,t}var k8=w8,S8=Dh;function j8(e){return S8(this,e).get(e)}var P8=j8,C8=Dh;function O8(e){return C8(this,e).has(e)}var N8=O8,M8=Dh;function _8(e,t){var r=M8(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var A8=_8,T8=g8,E8=k8,$8=P8,D8=N8,I8=A8;function rc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}rc.prototype.clear=T8;rc.prototype.delete=E8;rc.prototype.get=$8;rc.prototype.has=D8;rc.prototype.set=I8;var bx=rc,E3=bx,R8="Expected a function";function wx(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(R8);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(wx.Cache||E3),r}wx.Cache=E3;var $3=wx;const L8=Wt($3);var B8=$3,F8=500;function z8(e){var t=B8(e,function(n){return r.size===F8&&r.clear(),n}),r=t.cache;return t}var U8=z8,G8=U8,W8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V8=/\\(\\)?/g,H8=G8(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(W8,function(r,n,a,i){t.push(a?i.replace(V8,"$1"):n||r)}),t}),X8=H8;function K8(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var kx=K8,f2=yf,Y8=kx,q8=ta,Z8=Ql,d2=f2?f2.prototype:void 0,h2=d2?d2.toString:void 0;function D3(e){if(typeof e=="string")return e;if(q8(e))return Y8(e,D3)+"";if(Z8(e))return h2?h2.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Q8=D3,J8=Q8;function eT(e){return e==null?"":J8(e)}var I3=eT,tT=ta,rT=mx,nT=X8,aT=I3;function iT(e,t){return tT(e)?e:rT(e,t)?[e]:nT(aT(e))}var R3=iT,oT=Ql;function sT(e){if(typeof e=="string"||oT(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ih=sT,lT=R3,cT=Ih;function uT(e,t){t=lT(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[cT(t[r++])];return r&&r==n?e:void 0}var Sx=uT,fT=Sx;function dT(e,t,r){var n=e==null?void 0:fT(e,t);return n===void 0?r:n}var L3=dT;const Pa=Wt(L3);function hT(e){return e==null}var pT=hT;const ze=Wt(pT);var gT=Hi,mT=ta,yT=Xi,vT="[object String]";function xT(e){return typeof e=="string"||!mT(e)&&yT(e)&&gT(e)==vT}var bT=xT;const ks=Wt(bT);var B3={exports:{}},Tt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx=Symbol.for("react.element"),Px=Symbol.for("react.portal"),Rh=Symbol.for("react.fragment"),Lh=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),Fh=Symbol.for("react.provider"),zh=Symbol.for("react.context"),wT=Symbol.for("react.server_context"),Uh=Symbol.for("react.forward_ref"),Gh=Symbol.for("react.suspense"),Wh=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),Hh=Symbol.for("react.lazy"),kT=Symbol.for("react.offscreen"),F3;F3=Symbol.for("react.module.reference");function Ma(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jx:switch(e=e.type,e){case Rh:case Bh:case Lh:case Gh:case Wh:return e;default:switch(e=e&&e.$$typeof,e){case wT:case zh:case Uh:case Hh:case Vh:case Fh:return e;default:return t}}case Px:return t}}}Tt.ContextConsumer=zh;Tt.ContextProvider=Fh;Tt.Element=jx;Tt.ForwardRef=Uh;Tt.Fragment=Rh;Tt.Lazy=Hh;Tt.Memo=Vh;Tt.Portal=Px;Tt.Profiler=Bh;Tt.StrictMode=Lh;Tt.Suspense=Gh;Tt.SuspenseList=Wh;Tt.isAsyncMode=function(){return!1};Tt.isConcurrentMode=function(){return!1};Tt.isContextConsumer=function(e){return Ma(e)===zh};Tt.isContextProvider=function(e){return Ma(e)===Fh};Tt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jx};Tt.isForwardRef=function(e){return Ma(e)===Uh};Tt.isFragment=function(e){return Ma(e)===Rh};Tt.isLazy=function(e){return Ma(e)===Hh};Tt.isMemo=function(e){return Ma(e)===Vh};Tt.isPortal=function(e){return Ma(e)===Px};Tt.isProfiler=function(e){return Ma(e)===Bh};Tt.isStrictMode=function(e){return Ma(e)===Lh};Tt.isSuspense=function(e){return Ma(e)===Gh};Tt.isSuspenseList=function(e){return Ma(e)===Wh};Tt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Rh||e===Bh||e===Lh||e===Gh||e===Wh||e===kT||typeof e=="object"&&e!==null&&(e.$$typeof===Hh||e.$$typeof===Vh||e.$$typeof===Fh||e.$$typeof===zh||e.$$typeof===Uh||e.$$typeof===F3||e.getModuleId!==void 0)};Tt.typeOf=Ma;B3.exports=Tt;var ST=B3.exports,jT=Hi,PT=Xi,CT="[object Number]";function OT(e){return typeof e=="number"||PT(e)&&jT(e)==CT}var z3=OT;const NT=Wt(z3);var MT=z3;function _T(e){return MT(e)&&e!=+e}var AT=_T;const nc=Wt(AT);var Wa=function(t){return t===0?0:t>0?1:-1},rs=function(t){return ks(t)&&t.indexOf("%")===t.length-1},fe=function(t){return NT(t)&&!nc(t)},TT=function(t){return ze(t)},zr=function(t){return fe(t)||ks(t)},ET=0,Ts=function(t){var r=++ET;return"".concat(t||"").concat(r)},Ss=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!fe(t)&&!ks(t))return n;var i;if(rs(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return nc(i)&&(i=n),a&&i>r&&(i=r),i},no=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},$T=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Or=function(t,r){return fe(t)&&fe(r)?function(n){return t+n*(r-t)}:function(){return r}};function s0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Pa(n,t))===r})}var DT=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,a=0,i=0,o=0,s=1/0,l=-1/0,u=0,f=0,d=0;d<r;d++)u=t[d].cx||0,f=t[d].cy||0,n+=u,a+=f,i+=u*f,o+=u*u,s=Math.min(s,u),l=Math.max(l,u);var h=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:s,xmax:l,a:h,b:(a-h*n)/r}},IT=function(t,r){return fe(t)&&fe(r)?t-r:ks(t)&&ks(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function ul(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}var RT=["viewBox","children"],LT=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],p2=["points","pathLength"],sg={svg:RT,polygon:p2,polyline:p2},Cx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],l0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),!Jl(n))return null;var a={};return Object.keys(n).forEach(function(i){Cx.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},BT=function(t,r,n){return function(a){return t(r,n,a),null}},Mu=function(t,r,n){if(!Jl(t)||Rm(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];Cx.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=BT(o,r,n))}),a},FT=["children"],zT=["children"];function g2(e,t){if(e==null)return{};var r=UT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}var m2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},$i=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},y2=null,lg=null,Ox=function e(t){if(t===y2&&Array.isArray(lg))return lg;var r=[];return j.Children.forEach(t,function(n){ze(n)||(ST.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),lg=r,y2=t,r};function Qn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return $i(a)}):n=[$i(t)],Ox(e).forEach(function(a){var i=Pa(a,"type.displayName")||Pa(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function oa(e,t){var r=Qn(e,t);return r&&r[0]}var v2=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!fe(n)||n<=0||!fe(a)||a<=0)},GT=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],WT=function(t){return t&&t.type&&ks(t.type)&&GT.indexOf(t.type)>=0},U3=function(t){return t&&Lm(t)==="object"&&"clipDot"in t},VT=function(t,r,n,a){var i,o=(i=sg==null?void 0:sg[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Xe(t)&&(a&&o.includes(r)||LT.includes(r))||n&&Cx.includes(r)},Ve=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!Jl(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;VT((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},Bm=function e(t,r){if(t===r)return!0;var n=j.Children.count(t);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return x2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!x2(i,o))return!1}return!0},x2=function(t,r){if(ze(t)&&ze(r))return!0;if(!ze(t)&&!ze(r)){var n=t.props||{},a=n.children,i=g2(n,FT),o=r.props||{},s=o.children,l=g2(o,zT);return a&&s?ul(i,l)&&Bm(a,s):!a&&!s?ul(i,l):!1}return!1},b2=function(t,r){var n=[],a={};return Ox(t).forEach(function(i,o){if(WT(i))n.push(i);else if(i){var s=$i(i.type),l=r[s]||{},u=l.handler,f=l.once;if(u&&(!f||!a[s])){var d=u(i,s,o);n.push(d),a[s]=!0}}}),n},HT=function(t){var r=t&&t.type;return r&&m2[r]?m2[r]:null},XT=function(t,r){return Ox(r).indexOf(t)},KT=["children","width","height","viewBox","className","style","title","desc"];function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fm.apply(this,arguments)}function YT(e,t){if(e==null)return{};var r=qT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zm(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,u=YT(e,KT),f=a||{width:r,height:n,x:0,y:0},d=ot("recharts-surface",i);return F.createElement("svg",Fm({},Ve(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),F.createElement("title",null,s),F.createElement("desc",null,l),t)}var ZT=["children","className"];function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Um.apply(this,arguments)}function QT(e,t){if(e==null)return{};var r=JT(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JT(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var wt=F.forwardRef(function(e,t){var r=e.children,n=e.className,a=QT(e,ZT),i=ot("recharts-layer",n);return F.createElement("g",Um({className:i},Ve(a,!0),{ref:t}),r)}),Di=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function eE(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var tE=eE,rE=tE;function nE(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:rE(e,t,r)}var aE=nE,iE="\\ud800-\\udfff",oE="\\u0300-\\u036f",sE="\\ufe20-\\ufe2f",lE="\\u20d0-\\u20ff",cE=oE+sE+lE,uE="\\ufe0e\\ufe0f",fE="\\u200d",dE=RegExp("["+fE+iE+cE+uE+"]");function hE(e){return dE.test(e)}var G3=hE;function pE(e){return e.split("")}var gE=pE,W3="\\ud800-\\udfff",mE="\\u0300-\\u036f",yE="\\ufe20-\\ufe2f",vE="\\u20d0-\\u20ff",xE=mE+yE+vE,bE="\\ufe0e\\ufe0f",wE="["+W3+"]",Gm="["+xE+"]",Wm="\\ud83c[\\udffb-\\udfff]",kE="(?:"+Gm+"|"+Wm+")",V3="[^"+W3+"]",H3="(?:\\ud83c[\\udde6-\\uddff]){2}",X3="[\\ud800-\\udbff][\\udc00-\\udfff]",SE="\\u200d",K3=kE+"?",Y3="["+bE+"]?",jE="(?:"+SE+"(?:"+[V3,H3,X3].join("|")+")"+Y3+K3+")*",PE=Y3+K3+jE,CE="(?:"+[V3+Gm+"?",Gm,H3,X3,wE].join("|")+")",OE=RegExp(Wm+"(?="+Wm+")|"+CE+PE,"g");function NE(e){return e.match(OE)||[]}var ME=NE,_E=gE,AE=G3,TE=ME;function EE(e){return AE(e)?TE(e):_E(e)}var $E=EE,DE=aE,IE=G3,RE=$E,LE=I3;function BE(e){return function(t){t=LE(t);var r=IE(t)?RE(t):void 0,n=r?r[0]:t.charAt(0),a=r?DE(r,1).join(""):t.slice(1);return n[e]()+a}}var FE=BE,zE=FE,UE=zE("toUpperCase"),GE=UE;const Xh=Wt(GE);function Kt(e){return function(){return e}}const q3=Math.cos,c0=Math.sin,qa=Math.sqrt,u0=Math.PI,Kh=2*u0,Vm=Math.PI,Hm=2*Vm,Xo=1e-6,WE=Hm-Xo;function Z3(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function VE(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Z3;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class HE{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Z3:VE(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,f=o-t,d=s-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Xo)if(!(Math.abs(d*l-u*f)>Xo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,m=a-s,y=l*l+u*u,w=p*p+m*m,x=Math.sqrt(y),g=Math.sqrt(h),v=i*Math.tan((Vm-Math.acos((y+h-w)/(2*x*g)))/2),S=v/g,b=v/x;Math.abs(S-1)>Xo&&this._append`L${t+S*f},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*p>f*m)},${this._x1=t+b*l},${this._y1=r+b*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,f=r+l,d=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Xo||Math.abs(this._y1-f)>Xo)&&this._append`L${u},${f}`,n&&(h<0&&(h=h%Hm+Hm),h>WE?this._append`A${n},${n},0,1,${d},${t-s},${r-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:h>Xo&&this._append`A${n},${n},0,${+(h>=Vm)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Nx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new HE(t)}function Mx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Q3(e){this._context=e}Q3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Yh(e){return new Q3(e)}function J3(e){return e[0]}function ej(e){return e[1]}function tj(e,t){var r=Kt(!0),n=null,a=Yh,i=null,o=Nx(s);e=typeof e=="function"?e:e===void 0?J3:Kt(e),t=typeof t=="function"?t:t===void 0?ej:Kt(t);function s(l){var u,f=(l=Mx(l)).length,d,h=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=f;++u)!(u<f&&r(d=l[u],u,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(d,u,l),+t(d,u,l));if(p)return i=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Kt(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function ed(e,t,r){var n=null,a=Kt(!0),i=null,o=Yh,s=null,l=Nx(u);e=typeof e=="function"?e:e===void 0?J3:Kt(+e),t=typeof t=="function"?t:Kt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ej:Kt(+r);function u(d){var h,p,m,y=(d=Mx(d)).length,w,x=!1,g,v=new Array(y),S=new Array(y);for(i==null&&(s=o(g=l())),h=0;h<=y;++h){if(!(h<y&&a(w=d[h],h,d))===x)if(x=!x)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=p;--m)s.point(v[m],S[m]);s.lineEnd(),s.areaEnd()}x&&(v[h]=+e(w,h,d),S[h]=+t(w,h,d),s.point(n?+n(w,h,d):v[h],r?+r(w,h,d):S[h]))}if(g)return s=null,g+""||null}function f(){return tj().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Kt(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Kt(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Kt(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Kt(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Kt(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Kt(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Kt(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(s=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=s=null:s=o(i=d),u):i},u}class rj{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function XE(e){return new rj(e,!0)}function KE(e){return new rj(e,!1)}const _x={draw(e,t){const r=qa(t/u0);e.moveTo(r,0),e.arc(0,0,r,0,Kh)}},YE={draw(e,t){const r=qa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},nj=qa(1/3),qE=nj*2,ZE={draw(e,t){const r=qa(t/qE),n=r*nj;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},QE={draw(e,t){const r=qa(t),n=-r/2;e.rect(n,n,r,r)}},JE=.8908130915292852,aj=c0(u0/10)/c0(7*u0/10),e7=c0(Kh/10)*aj,t7=-q3(Kh/10)*aj,r7={draw(e,t){const r=qa(t*JE),n=e7*r,a=t7*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Kh*i/5,s=q3(o),l=c0(o);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},cg=qa(3),n7={draw(e,t){const r=-qa(t/(cg*3));e.moveTo(0,r*2),e.lineTo(-cg*r,-r),e.lineTo(cg*r,-r),e.closePath()}},ga=-.5,ma=qa(3)/2,Xm=1/qa(12),a7=(Xm/2+1)*3,i7={draw(e,t){const r=qa(t/a7),n=r/2,a=r*Xm,i=n,o=r*Xm+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(ga*n-ma*a,ma*n+ga*a),e.lineTo(ga*i-ma*o,ma*i+ga*o),e.lineTo(ga*s-ma*l,ma*s+ga*l),e.lineTo(ga*n+ma*a,ga*a-ma*n),e.lineTo(ga*i+ma*o,ga*o-ma*i),e.lineTo(ga*s+ma*l,ga*l-ma*s),e.closePath()}};function o7(e,t){let r=null,n=Nx(a);e=typeof e=="function"?e:Kt(e||_x),t=typeof t=="function"?t:Kt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Kt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Kt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function f0(){}function d0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ij(e){this._context=e}ij.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:d0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:d0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function s7(e){return new ij(e)}function oj(e){this._context=e}oj.prototype={areaStart:f0,areaEnd:f0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:d0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l7(e){return new oj(e)}function sj(e){this._context=e}sj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:d0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c7(e){return new sj(e)}function lj(e){this._context=e}lj.prototype={areaStart:f0,areaEnd:f0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function u7(e){return new lj(e)}function w2(e){return e<0?-1:1}function k2(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(w2(i)+w2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function S2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ug(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function h0(e){this._context=e}h0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ug(this,this._t0,S2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ug(this,S2(this,r=k2(this,e,t)),r);break;default:ug(this,this._t0,r=k2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function cj(e){this._context=new uj(e)}(cj.prototype=Object.create(h0.prototype)).point=function(e,t){h0.prototype.point.call(this,t,e)};function uj(e){this._context=e}uj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function f7(e){return new h0(e)}function d7(e){return new cj(e)}function fj(e){this._context=e}fj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=j2(e),a=j2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function j2(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function h7(e){return new fj(e)}function qh(e,t){this._context=e,this._t=t}qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function p7(e){return new qh(e,.5)}function g7(e){return new qh(e,0)}function m7(e){return new qh(e,1)}function wl(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Km(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function y7(e,t){return e[t]}function v7(e){const t=[];return t.key=e,t}function x7(){var e=Kt([]),t=Km,r=wl,n=y7;function a(i){var o=Array.from(e.apply(this,arguments),v7),s,l=o.length,u=-1,f;for(const d of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(d,o[s].key,u,i)]).data=d;for(s=0,f=Mx(t(o));s<l;++s)o[f[s]].index=s;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Kt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Kt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Km:typeof i=="function"?i:Kt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??wl,a):r},a}function b7(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}wl(e,t)}}function w7(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}wl(e,t)}}function k7(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var f=e[t[s]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,m=0;m<s;++m){var y=e[t[m]],w=y[n][1]||0,x=y[n-1][1]||0;p+=w-x}l+=d,u+=p*d}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,wl(e,t)}}function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}var S7=["type","size","sizeType"];function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(this,arguments)}function P2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(r),!0).forEach(function(n){j7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j7(e,t,r){return t=P7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P7(e){var t=C7(e,"string");return _u(t)=="symbol"?t:t+""}function C7(e,t){if(_u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O7(e,t){if(e==null)return{};var r=N7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function N7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var dj={symbolCircle:_x,symbolCross:YE,symbolDiamond:ZE,symbolSquare:QE,symbolStar:r7,symbolTriangle:n7,symbolWye:i7},M7=Math.PI/180,_7=function(t){var r="symbol".concat(Xh(t));return dj[r]||_x},A7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*M7;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},T7=function(t,r){dj["symbol".concat(Xh(t))]=r},Zh=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=O7(t,S7),u=C2(C2({},l),{},{type:n,size:i,sizeType:s}),f=function(){var w=_7(n),x=o7().type(w).size(A7(i,s,n));return x()},d=u.className,h=u.cx,p=u.cy,m=Ve(u,!0);return h===+h&&p===+p&&i===+i?F.createElement("path",Ym({},m,{className:ot("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};Zh.registerSymbol=T7;function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(this,arguments)}function O2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(r),!0).forEach(function(n){Au(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pj(n.key),n)}}function I7(e,t,r){return t&&D7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R7(e,t,r){return t=p0(t),L7(e,hj()?Reflect.construct(t,r||[],p0(e).constructor):t.apply(e,r))}function L7(e,t){if(t&&(kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B7(e)}function B7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hj=function(){return!!e})()}function p0(e){return p0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p0(e)}function F7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zm(e,t)}function Zm(e,t){return Zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zm(e,t)}function Au(e,t,r){return t=pj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pj(e){var t=z7(e,"string");return kl(t)=="symbol"?t:t+""}function z7(e,t){if(kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ya=32,Ax=function(e){function t(){return $7(this,t),R7(this,t,arguments)}return F7(t,e),I7(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ya/2,o=ya/6,s=ya/3,l=n.inactive?a:n.color;if(n.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ya,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(ya,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return F.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ya/8,"h").concat(ya,"v").concat(ya*3/4,"h").concat(-ya,"z"),className:"recharts-legend-icon"});if(F.isValidElement(n.legendIcon)){var u=E7({},n);return delete u.legendIcon,F.cloneElement(n.legendIcon,u)}return F.createElement(Zh,{fill:l,cx:i,cy:i,size:ya,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:ya,height:ya},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,m){var y=p.formatter||l,w=ot(Au(Au({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=Xe(p.value)?null:p.value;Di(!Xe(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?u:p.color;return F.createElement("li",qm({className:w,style:d,key:"legend-item-".concat(m)},Mu(n.props,p,m)),F.createElement(zm,{width:o,height:o,viewBox:f,style:h},n.renderIcon(p)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y?y(x,p,m):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(j.PureComponent);Au(Ax,"displayName","Legend");Au(Ax,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var U7=$h;function G7(){this.__data__=new U7,this.size=0}var W7=G7;function V7(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var H7=V7;function X7(e){return this.__data__.get(e)}var K7=X7;function Y7(e){return this.__data__.has(e)}var q7=Y7,Z7=$h,Q7=xx,J7=bx,e$=200;function t$(e,t){var r=this.__data__;if(r instanceof Z7){var n=r.__data__;if(!Q7||n.length<e$-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new J7(n)}return r.set(e,t),this.size=r.size,this}var r$=t$,n$=$h,a$=W7,i$=H7,o$=K7,s$=q7,l$=r$;function ac(e){var t=this.__data__=new n$(e);this.size=t.size}ac.prototype.clear=a$;ac.prototype.delete=i$;ac.prototype.get=o$;ac.prototype.has=s$;ac.prototype.set=l$;var gj=ac,c$="__lodash_hash_undefined__";function u$(e){return this.__data__.set(e,c$),this}var f$=u$;function d$(e){return this.__data__.has(e)}var h$=d$,p$=bx,g$=f$,m$=h$;function g0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new p$;++t<r;)this.add(e[t])}g0.prototype.add=g0.prototype.push=g$;g0.prototype.has=m$;var mj=g0;function y$(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var yj=y$;function v$(e,t){return e.has(t)}var vj=v$,x$=mj,b$=yj,w$=vj,k$=1,S$=2;function j$(e,t,r,n,a,i){var o=r&k$,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=r&S$?new x$:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var m=e[d],y=t[d];if(n)var w=o?n(y,m,d,t,e,i):n(m,y,d,e,t,i);if(w!==void 0){if(w)continue;h=!1;break}if(p){if(!b$(t,function(x,g){if(!w$(p,g)&&(m===x||a(m,x,r,n,i)))return p.push(g)})){h=!1;break}}else if(!(m===y||a(m,y,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var xj=j$,P$=mi,C$=P$.Uint8Array,O$=C$;function N$(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var M$=N$;function _$(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Tx=_$,N2=yf,M2=O$,A$=vx,T$=xj,E$=M$,$$=Tx,D$=1,I$=2,R$="[object Boolean]",L$="[object Date]",B$="[object Error]",F$="[object Map]",z$="[object Number]",U$="[object RegExp]",G$="[object Set]",W$="[object String]",V$="[object Symbol]",H$="[object ArrayBuffer]",X$="[object DataView]",_2=N2?N2.prototype:void 0,fg=_2?_2.valueOf:void 0;function K$(e,t,r,n,a,i,o){switch(r){case X$:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case H$:return!(e.byteLength!=t.byteLength||!i(new M2(e),new M2(t)));case R$:case L$:case z$:return A$(+e,+t);case B$:return e.name==t.name&&e.message==t.message;case U$:case W$:return e==t+"";case F$:var s=E$;case G$:var l=n&D$;if(s||(s=$$),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=I$,o.set(e,t);var f=T$(s(e),s(t),n,a,i,o);return o.delete(e),f;case V$:if(fg)return fg.call(e)==fg.call(t)}return!1}var Y$=K$;function q$(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var bj=q$,Z$=bj,Q$=ta;function J$(e,t,r){var n=t(e);return Q$(e)?n:Z$(n,r(e))}var e9=J$;function t9(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var r9=t9;function n9(){return[]}var a9=n9,i9=r9,o9=a9,s9=Object.prototype,l9=s9.propertyIsEnumerable,A2=Object.getOwnPropertySymbols,c9=A2?function(e){return e==null?[]:(e=Object(e),i9(A2(e),function(t){return l9.call(e,t)}))}:o9,u9=c9;function f9(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var d9=f9,h9=Hi,p9=Xi,g9="[object Arguments]";function m9(e){return p9(e)&&h9(e)==g9}var y9=m9,T2=y9,v9=Xi,wj=Object.prototype,x9=wj.hasOwnProperty,b9=wj.propertyIsEnumerable,w9=T2(function(){return arguments}())?T2:function(e){return v9(e)&&x9.call(e,"callee")&&!b9.call(e,"callee")},Ex=w9,m0={exports:{}};function k9(){return!1}var S9=k9;m0.exports;(function(e,t){var r=mi,n=S9,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(m0,m0.exports);var kj=m0.exports,j9=9007199254740991,P9=/^(?:0|[1-9]\d*)$/;function C9(e,t){var r=typeof e;return t=t??j9,!!t&&(r=="number"||r!="symbol"&&P9.test(e))&&e>-1&&e%1==0&&e<t}var $x=C9,O9=9007199254740991;function N9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=O9}var Dx=N9,M9=Hi,_9=Dx,A9=Xi,T9="[object Arguments]",E9="[object Array]",$9="[object Boolean]",D9="[object Date]",I9="[object Error]",R9="[object Function]",L9="[object Map]",B9="[object Number]",F9="[object Object]",z9="[object RegExp]",U9="[object Set]",G9="[object String]",W9="[object WeakMap]",V9="[object ArrayBuffer]",H9="[object DataView]",X9="[object Float32Array]",K9="[object Float64Array]",Y9="[object Int8Array]",q9="[object Int16Array]",Z9="[object Int32Array]",Q9="[object Uint8Array]",J9="[object Uint8ClampedArray]",eD="[object Uint16Array]",tD="[object Uint32Array]",Qt={};Qt[X9]=Qt[K9]=Qt[Y9]=Qt[q9]=Qt[Z9]=Qt[Q9]=Qt[J9]=Qt[eD]=Qt[tD]=!0;Qt[T9]=Qt[E9]=Qt[V9]=Qt[$9]=Qt[H9]=Qt[D9]=Qt[I9]=Qt[R9]=Qt[L9]=Qt[B9]=Qt[F9]=Qt[z9]=Qt[U9]=Qt[G9]=Qt[W9]=!1;function rD(e){return A9(e)&&_9(e.length)&&!!Qt[M9(e)]}var nD=rD;function aD(e){return function(t){return e(t)}}var Sj=aD,y0={exports:{}};y0.exports;(function(e,t){var r=_3,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(y0,y0.exports);var iD=y0.exports,oD=nD,sD=Sj,E2=iD,$2=E2&&E2.isTypedArray,lD=$2?sD($2):oD,jj=lD,cD=d9,uD=Ex,fD=ta,dD=kj,hD=$x,pD=jj,gD=Object.prototype,mD=gD.hasOwnProperty;function yD(e,t){var r=fD(e),n=!r&&uD(e),a=!r&&!n&&dD(e),i=!r&&!n&&!a&&pD(e),o=r||n||a||i,s=o?cD(e.length,String):[],l=s.length;for(var u in e)(t||mD.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||hD(u,l)))&&s.push(u);return s}var vD=yD,xD=Object.prototype;function bD(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||xD;return e===r}var wD=bD;function kD(e,t){return function(r){return e(t(r))}}var Pj=kD,SD=Pj,jD=SD(Object.keys,Object),PD=jD,CD=wD,OD=PD,ND=Object.prototype,MD=ND.hasOwnProperty;function _D(e){if(!CD(e))return OD(e);var t=[];for(var r in Object(e))MD.call(e,r)&&r!="constructor"&&t.push(r);return t}var AD=_D,TD=yx,ED=Dx;function $D(e){return e!=null&&ED(e.length)&&!TD(e)}var vf=$D,DD=vD,ID=AD,RD=vf;function LD(e){return RD(e)?DD(e):ID(e)}var Qh=LD,BD=e9,FD=u9,zD=Qh;function UD(e){return BD(e,zD,FD)}var GD=UD,D2=GD,WD=1,VD=Object.prototype,HD=VD.hasOwnProperty;function XD(e,t,r,n,a,i){var o=r&WD,s=D2(e),l=s.length,u=D2(t),f=u.length;if(l!=f&&!o)return!1;for(var d=l;d--;){var h=s[d];if(!(o?h in t:HD.call(t,h)))return!1}var p=i.get(e),m=i.get(t);if(p&&m)return p==t&&m==e;var y=!0;i.set(e,t),i.set(t,e);for(var w=o;++d<l;){h=s[d];var x=e[h],g=t[h];if(n)var v=o?n(g,x,h,t,e,i):n(x,g,h,e,t,i);if(!(v===void 0?x===g||a(x,g,r,n,i):v)){y=!1;break}w||(w=h=="constructor")}if(y&&!w){var S=e.constructor,b=t.constructor;S!=b&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof b=="function"&&b instanceof b)&&(y=!1)}return i.delete(e),i.delete(t),y}var KD=XD,YD=As,qD=mi,ZD=YD(qD,"DataView"),QD=ZD,JD=As,eI=mi,tI=JD(eI,"Promise"),rI=tI,nI=As,aI=mi,iI=nI(aI,"Set"),Cj=iI,oI=As,sI=mi,lI=oI(sI,"WeakMap"),cI=lI,Qm=QD,Jm=xx,ey=rI,ty=Cj,ry=cI,Oj=Hi,ic=T3,I2="[object Map]",uI="[object Object]",R2="[object Promise]",L2="[object Set]",B2="[object WeakMap]",F2="[object DataView]",fI=ic(Qm),dI=ic(Jm),hI=ic(ey),pI=ic(ty),gI=ic(ry),Ko=Oj;(Qm&&Ko(new Qm(new ArrayBuffer(1)))!=F2||Jm&&Ko(new Jm)!=I2||ey&&Ko(ey.resolve())!=R2||ty&&Ko(new ty)!=L2||ry&&Ko(new ry)!=B2)&&(Ko=function(e){var t=Oj(e),r=t==uI?e.constructor:void 0,n=r?ic(r):"";if(n)switch(n){case fI:return F2;case dI:return I2;case hI:return R2;case pI:return L2;case gI:return B2}return t});var mI=Ko,dg=gj,yI=xj,vI=Y$,xI=KD,z2=mI,U2=ta,G2=kj,bI=jj,wI=1,W2="[object Arguments]",V2="[object Array]",td="[object Object]",kI=Object.prototype,H2=kI.hasOwnProperty;function SI(e,t,r,n,a,i){var o=U2(e),s=U2(t),l=o?V2:z2(e),u=s?V2:z2(t);l=l==W2?td:l,u=u==W2?td:u;var f=l==td,d=u==td,h=l==u;if(h&&G2(e)){if(!G2(t))return!1;o=!0,f=!1}if(h&&!f)return i||(i=new dg),o||bI(e)?yI(e,t,r,n,a,i):vI(e,t,l,r,n,a,i);if(!(r&wI)){var p=f&&H2.call(e,"__wrapped__"),m=d&&H2.call(t,"__wrapped__");if(p||m){var y=p?e.value():e,w=m?t.value():t;return i||(i=new dg),a(y,w,r,n,i)}}return h?(i||(i=new dg),xI(e,t,r,n,a,i)):!1}var jI=SI,PI=jI,X2=Xi;function Nj(e,t,r,n,a){return e===t?!0:e==null||t==null||!X2(e)&&!X2(t)?e!==e&&t!==t:PI(e,t,r,n,Nj,a)}var Ix=Nj,CI=gj,OI=Ix,NI=1,MI=2;function _I(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var s=r[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=r[a];var l=s[0],u=e[l],f=s[1];if(o&&s[2]){if(u===void 0&&!(l in e))return!1}else{var d=new CI;if(n)var h=n(u,f,l,e,t,d);if(!(h===void 0?OI(f,u,NI|MI,n,d):h))return!1}}return!0}var AI=_I,TI=To;function EI(e){return e===e&&!TI(e)}var Mj=EI,$I=Mj,DI=Qh;function II(e){for(var t=DI(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,$I(a)]}return t}var RI=II;function LI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var _j=LI,BI=AI,FI=RI,zI=_j;function UI(e){var t=FI(e);return t.length==1&&t[0][2]?zI(t[0][0],t[0][1]):function(r){return r===e||BI(r,e,t)}}var GI=UI;function WI(e,t){return e!=null&&t in Object(e)}var VI=WI,HI=R3,XI=Ex,KI=ta,YI=$x,qI=Dx,ZI=Ih;function QI(e,t,r){t=HI(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=ZI(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&qI(a)&&YI(o,a)&&(KI(e)||XI(e)))}var JI=QI,eR=VI,tR=JI;function rR(e,t){return e!=null&&tR(e,t,eR)}var nR=rR,aR=Ix,iR=L3,oR=nR,sR=mx,lR=Mj,cR=_j,uR=Ih,fR=1,dR=2;function hR(e,t){return sR(e)&&lR(t)?cR(uR(e),t):function(r){var n=iR(r,e);return n===void 0&&n===t?oR(r,e):aR(t,n,fR|dR)}}var pR=hR;function gR(e){return e}var oc=gR;function mR(e){return function(t){return t==null?void 0:t[e]}}var yR=mR,vR=Sx;function xR(e){return function(t){return vR(t,e)}}var bR=xR,wR=yR,kR=bR,SR=mx,jR=Ih;function PR(e){return SR(e)?wR(jR(e)):kR(e)}var CR=PR,OR=GI,NR=pR,MR=oc,_R=ta,AR=CR;function TR(e){return typeof e=="function"?e:e==null?MR:typeof e=="object"?_R(e)?NR(e[0],e[1]):OR(e):AR(e)}var Eo=TR;function ER(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Aj=ER;function $R(e){return e!==e}var DR=$R;function IR(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var RR=IR,LR=Aj,BR=DR,FR=RR;function zR(e,t,r){return t===t?FR(e,t,r):LR(e,BR,r)}var UR=zR,GR=UR;function WR(e,t){var r=e==null?0:e.length;return!!r&&GR(e,t,0)>-1}var VR=WR;function HR(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var XR=HR;function KR(){}var YR=KR,hg=Cj,qR=YR,ZR=Tx,QR=1/0,JR=hg&&1/ZR(new hg([,-0]))[1]==QR?function(e){return new hg(e)}:qR,eL=JR,tL=mj,rL=VR,nL=XR,aL=vj,iL=eL,oL=Tx,sL=200;function lL(e,t,r){var n=-1,a=rL,i=e.length,o=!0,s=[],l=s;if(r)o=!1,a=nL;else if(i>=sL){var u=t?null:iL(e);if(u)return oL(u);o=!1,a=aL,l=new tL}else l=t?[]:s;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(f)}else a(l,d,r)||(l!==s&&l.push(d),s.push(f))}return s}var cL=lL,uL=Eo,fL=cL;function dL(e,t){return e&&e.length?fL(e,uL(t)):[]}var hL=dL;const K2=Wt(hL);function Tj(e,t,r){return t===!0?K2(e,r):Xe(t)?K2(e,t):e}function Sl(e){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(e)}var pL=["ref"];function Y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(r),!0).forEach(function(n){Jh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$j(n.key),n)}}function mL(e,t,r){return t&&q2(e.prototype,t),r&&q2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yL(e,t,r){return t=v0(t),vL(e,Ej()?Reflect.construct(t,r||[],v0(e).constructor):t.apply(e,r))}function vL(e,t){if(t&&(Sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xL(e)}function xL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ej(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ej=function(){return!!e})()}function v0(e){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v0(e)}function bL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ny(e,t)}function ny(e,t){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ny(e,t)}function Jh(e,t,r){return t=$j(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $j(e){var t=wL(e,"string");return Sl(t)=="symbol"?t:t+""}function wL(e,t){if(Sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kL(e,t){if(e==null)return{};var r=SL(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jL(e){return e.value}function PL(e,t){if(F.isValidElement(e))return F.cloneElement(e,t);if(typeof e=="function")return F.createElement(e,t);t.ref;var r=kL(t,pL);return F.createElement(Ax,r)}var Z2=1,si=function(e){function t(){var r;gL(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=yL(this,t,[].concat(a)),Jh(r,"lastBoundingBox",{width:-1,height:-1}),r}return bL(t,e),mL(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>Z2||Math.abs(a.height-this.lastBoundingBox.height)>Z2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Si({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();h={top:((f||0)-m.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Si(Si({},d),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=Si(Si({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return F.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},PL(i,Si(Si({},this.props),{},{payload:Tj(f,u,jL)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Si(Si({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&fe(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);Jh(si,"displayName","Legend");Jh(si,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Q2=yf,CL=Ex,OL=ta,J2=Q2?Q2.isConcatSpreadable:void 0;function NL(e){return OL(e)||CL(e)||!!(J2&&e&&e[J2])}var ML=NL,_L=bj,AL=ML;function Dj(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=AL),a||(a=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?Dj(s,t-1,r,n,a):_L(a,s):n||(a[a.length]=s)}return a}var Ij=Dj;function TL(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(r(i[l],l,i)===!1)break}return t}}var EL=TL,$L=EL,DL=$L(),IL=DL,RL=IL,LL=Qh;function BL(e,t){return e&&RL(e,t,LL)}var Rj=BL,FL=vf;function zL(e,t){return function(r,n){if(r==null)return r;if(!FL(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var UL=zL,GL=Rj,WL=UL,VL=WL(GL),Rx=VL,HL=Rx,XL=vf;function KL(e,t){var r=-1,n=XL(e)?Array(e.length):[];return HL(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var Lj=KL;function YL(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var qL=YL,ew=Ql;function ZL(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=ew(e),o=t!==void 0,s=t===null,l=t===t,u=ew(t);if(!s&&!u&&!i&&e>t||i&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||s&&r&&a||!o&&a||!l)return-1}return 0}var QL=ZL,JL=QL;function eB(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,s=r.length;++n<o;){var l=JL(a[n],i[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var tB=eB,pg=kx,rB=Sx,nB=Eo,aB=Lj,iB=qL,oB=Sj,sB=tB,lB=oc,cB=ta;function uB(e,t,r){t.length?t=pg(t,function(i){return cB(i)?function(o){return rB(o,i.length===1?i[0]:i)}:i}):t=[lB];var n=-1;t=pg(t,oB(nB));var a=aB(e,function(i,o,s){var l=pg(t,function(u){return u(i)});return{criteria:l,index:++n,value:i}});return iB(a,function(i,o){return sB(i,o,r)})}var fB=uB;function dB(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var hB=dB,pB=hB,tw=Math.max;function gB(e,t,r){return t=tw(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=tw(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),pB(e,this,s)}}var mB=gB;function yB(e){return function(){return e}}var vB=yB,xB=As,bB=function(){try{var e=xB(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Bj=bB,wB=vB,rw=Bj,kB=oc,SB=rw?function(e,t){return rw(e,"toString",{configurable:!0,enumerable:!1,value:wB(t),writable:!0})}:kB,jB=SB,PB=800,CB=16,OB=Date.now;function NB(e){var t=0,r=0;return function(){var n=OB(),a=CB-(n-r);if(r=n,a>0){if(++t>=PB)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var MB=NB,_B=jB,AB=MB,TB=AB(_B),EB=TB,$B=oc,DB=mB,IB=EB;function RB(e,t){return IB(DB(e,t,$B),e+"")}var LB=RB,BB=vx,FB=vf,zB=$x,UB=To;function GB(e,t,r){if(!UB(r))return!1;var n=typeof t;return(n=="number"?FB(r)&&zB(t,r.length):n=="string"&&t in r)?BB(r[t],e):!1}var ep=GB,WB=Ij,VB=fB,HB=LB,nw=ep,XB=HB(function(e,t){if(e==null)return[];var r=t.length;return r>1&&nw(e,t[0],t[1])?t=[]:r>2&&nw(t[0],t[1],t[2])&&(t=[t[0]]),VB(e,WB(t,1),[])}),KB=XB;const Lx=Wt(KB);function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ay.apply(this,arguments)}function YB(e,t){return JB(e)||QB(e,t)||ZB(e,t)||qB()}function qB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZB(e,t){if(e){if(typeof e=="string")return aw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aw(e,t)}}function aw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QB(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function JB(e){if(Array.isArray(e))return e}function iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(r),!0).forEach(function(n){eF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eF(e,t,r){return t=tF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tF(e){var t=rF(e,"string");return Tu(t)=="symbol"?t:t+""}function rF(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nF(e){return Array.isArray(e)&&zr(e[0])&&zr(e[1])?e.join(" ~ "):e}var aF=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,m=t.labelClassName,y=t.label,w=t.labelFormatter,x=t.accessibilityLayer,g=x===void 0?!1:x,v=function(){if(f&&f.length){var M={padding:0,margin:0},_=(h?Lx(f,h):f).map(function(T,$){if(T.type==="none")return null;var I=gg({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},s),A=T.formatter||d||nF,R=T.value,L=T.name,V=R,ee=L;if(A&&V!=null&&ee!=null){var G=A(R,L,T,$,f);if(Array.isArray(G)){var W=YB(G,2);V=W[0],ee=W[1]}else V=G}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:I},zr(ee)?F.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,zr(ee)?F.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,F.createElement("span",{className:"recharts-tooltip-item-value"},V),F.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:M},_)}return null},S=gg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),b=gg({margin:0},u),k=!ze(y),P=k?y:"",C=ot("recharts-default-tooltip",p),N=ot("recharts-tooltip-label",m);k&&w&&f!==void 0&&f!==null&&(P=w(y,f));var O=g?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",ay({className:C,style:S},O),F.createElement("p",{className:N,style:b},F.isValidElement(P)?P:"".concat(P)),v())};function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function rd(e,t,r){return t=iF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iF(e){var t=oF(e,"string");return Eu(t)=="symbol"?t:t+""}function oF(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tc="recharts-tooltip-wrapper",sF={visibility:"hidden"};function lF(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ot(Tc,rd(rd(rd(rd({},"".concat(Tc,"-right"),fe(r)&&t&&fe(t.x)&&r>=t.x),"".concat(Tc,"-left"),fe(r)&&t&&fe(t.x)&&r<t.x),"".concat(Tc,"-bottom"),fe(n)&&t&&fe(t.y)&&n>=t.y),"".concat(Tc,"-top"),fe(n)&&t&&fe(t.y)&&n<t.y))}function ow(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(i&&fe(i[n]))return i[n];var f=r[n]-s-a,d=r[n]+a;if(t[n])return o[n]?f:d;if(o[n]){var h=f,p=l[n];return h<p?Math.max(d,l[n]):Math.max(f,l[n])}var m=d+s,y=l[n]+u;return m>y?Math.max(f,l[n]):Math.max(d,l[n])}function cF(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function uF(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=ow({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=ow({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=cF({translateX:f,translateY:d,useTranslate3d:s})):u=sF,{cssProperties:u,cssClasses:lF({translateX:f,translateY:d,coordinate:r})}}function jl(e){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(n){oy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zj(n.key),n)}}function hF(e,t,r){return t&&dF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pF(e,t,r){return t=x0(t),gF(e,Fj()?Reflect.construct(t,r||[],x0(e).constructor):t.apply(e,r))}function gF(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mF(e)}function mF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fj=function(){return!!e})()}function x0(e){return x0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x0(e)}function yF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iy(e,t)}function iy(e,t){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iy(e,t)}function oy(e,t,r){return t=zj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zj(e){var t=vF(e,"string");return jl(t)=="symbol"?t:t+""}function vF(e,t){if(jl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cw=1,xF=function(e){function t(){var r;fF(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=pF(this,t,[].concat(a)),oy(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),oy(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return yF(t,e),hF(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>cw||Math.abs(n.height-this.state.lastBoundingBox.height)>cw)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,p=a.offset,m=a.position,y=a.reverseDirection,w=a.useTranslate3d,x=a.viewBox,g=a.wrapperStyle,v=uF({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:m,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:x}),S=v.cssClasses,b=v.cssProperties,k=lw(lw({transition:h&&i?"transform ".concat(s,"ms ").concat(l):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},g);return F.createElement("div",{tabIndex:-1,className:S,style:k,ref:function(C){n.wrapperNode=C}},u)}}])}(j.PureComponent),bF=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},$o={isSsr:bF()};function Pl(e){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pl(e)}function uw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uw(Object(r),!0).forEach(function(n){Bx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gj(n.key),n)}}function SF(e,t,r){return t&&kF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jF(e,t,r){return t=b0(t),PF(e,Uj()?Reflect.construct(t,r||[],b0(e).constructor):t.apply(e,r))}function PF(e,t){if(t&&(Pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CF(e)}function CF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uj=function(){return!!e})()}function b0(e){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b0(e)}function OF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}function sy(e,t){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sy(e,t)}function Bx(e,t,r){return t=Gj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gj(e){var t=NF(e,"string");return Pl(t)=="symbol"?t:t+""}function NF(e,t){if(Pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function MF(e){return e.dataKey}function _F(e,t){return F.isValidElement(e)?F.cloneElement(e,t):typeof e=="function"?F.createElement(e,t):F.createElement(aF,t)}var Xr=function(e){function t(){return wF(this,t),jF(this,t,arguments)}return OF(t,e),SF(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,p=a.offset,m=a.payload,y=a.payloadUniqBy,w=a.position,x=a.reverseDirection,g=a.useTranslate3d,v=a.viewBox,S=a.wrapperStyle,b=m??[];d&&b.length&&(b=Tj(m.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),y,MF));var k=b.length>0;return F.createElement(xF,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:i,coordinate:f,hasPayload:k,offset:p,position:w,reverseDirection:x,useTranslate3d:g,viewBox:v,wrapperStyle:S},_F(u,fw(fw({},this.props),{},{payload:b})))}}])}(j.PureComponent);Bx(Xr,"displayName","Tooltip");Bx(Xr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!$o.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var AF=mi,TF=function(){return AF.Date.now()},EF=TF,$F=/\s/;function DF(e){for(var t=e.length;t--&&$F.test(e.charAt(t)););return t}var IF=DF,RF=IF,LF=/^\s+/;function BF(e){return e&&e.slice(0,RF(e)+1).replace(LF,"")}var FF=BF,zF=FF,dw=To,UF=Ql,hw=NaN,GF=/^[-+]0x[0-9a-f]+$/i,WF=/^0b[01]+$/i,VF=/^0o[0-7]+$/i,HF=parseInt;function XF(e){if(typeof e=="number")return e;if(UF(e))return hw;if(dw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=dw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=zF(e);var r=WF.test(e);return r||VF.test(e)?HF(e.slice(2),r?2:8):GF.test(e)?hw:+e}var Wj=XF,KF=To,mg=EF,pw=Wj,YF="Expected a function",qF=Math.max,ZF=Math.min;function QF(e,t,r){var n,a,i,o,s,l,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(YF);t=pw(t)||0,KF(r)&&(f=!!r.leading,d="maxWait"in r,i=d?qF(pw(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function p(k){var P=n,C=a;return n=a=void 0,u=k,o=e.apply(C,P),o}function m(k){return u=k,s=setTimeout(x,t),f?p(k):o}function y(k){var P=k-l,C=k-u,N=t-P;return d?ZF(N,i-C):N}function w(k){var P=k-l,C=k-u;return l===void 0||P>=t||P<0||d&&C>=i}function x(){var k=mg();if(w(k))return g(k);s=setTimeout(x,y(k))}function g(k){return s=void 0,h&&n?p(k):(n=a=void 0,o)}function v(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function S(){return s===void 0?o:g(mg())}function b(){var k=mg(),P=w(k);if(n=arguments,a=this,l=k,P){if(s===void 0)return m(l);if(d)return clearTimeout(s),s=setTimeout(x,t),p(l)}return s===void 0&&(s=setTimeout(x,t)),o}return b.cancel=v,b.flush=S,b}var JF=QF,ez=JF,tz=To,rz="Expected a function";function nz(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(rz);return tz(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),ez(e,t,{leading:n,maxWait:t,trailing:a})}var az=nz;const Vj=Wt(az);function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(r),!0).forEach(function(n){iz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iz(e,t,r){return t=oz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oz(e){var t=sz(e,"string");return $u(t)=="symbol"?t:t+""}function sz(e,t){if($u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lz(e,t){return dz(e)||fz(e,t)||uz(e,t)||cz()}function cz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uz(e,t){if(e){if(typeof e=="string")return mw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mw(e,t)}}function mw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function dz(e){if(Array.isArray(e))return e}var Ii=j.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,p=e.children,m=e.debounce,y=m===void 0?0:m,w=e.id,x=e.className,g=e.onResize,v=e.style,S=v===void 0?{}:v,b=j.useRef(null),k=j.useRef();k.current=g,j.useImperativeHandle(t,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var P=j.useState({containerWidth:a.width,containerHeight:a.height}),C=lz(P,2),N=C[0],O=C[1],E=j.useCallback(function(_,T){O(function($){var I=Math.round(_),A=Math.round(T);return $.containerWidth===I&&$.containerHeight===A?$:{containerWidth:I,containerHeight:A}})},[]);j.useEffect(function(){var _=function(L){var V,ee=L[0].contentRect,G=ee.width,W=ee.height;E(G,W),(V=k.current)===null||V===void 0||V.call(k,G,W)};y>0&&(_=Vj(_,y,{trailing:!0,leading:!1}));var T=new ResizeObserver(_),$=b.current.getBoundingClientRect(),I=$.width,A=$.height;return E(I,A),T.observe(b.current),function(){T.disconnect()}},[E,y]);var M=j.useMemo(function(){var _=N.containerWidth,T=N.containerHeight;if(_<0||T<0)return null;Di(rs(o)||rs(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Di(!r||r>0,"The aspect(%s) must be greater than zero.",r);var $=rs(o)?_:o,I=rs(l)?T:l;r&&r>0&&($?I=$/r:I&&($=I*r),h&&I>h&&(I=h)),Di($>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,I,o,l,f,d,r);var A=!Array.isArray(p)&&$i(p.type).endsWith("Chart");return F.Children.map(p,function(R){return F.isValidElement(R)?j.cloneElement(R,nd({width:$,height:I},A?{style:nd({height:"100%",width:"100%",maxHeight:I,maxWidth:$},R.props.style)}:{})):R})},[r,p,l,h,d,f,N,o]);return F.createElement("div",{id:w?"".concat(w):void 0,className:ot("recharts-responsive-container",x),style:nd(nd({},S),{},{width:o,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:b},M)}),Fx=function(t){return null};Fx.displayName="Cell";function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function yw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(r),!0).forEach(function(n){hz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hz(e,t,r){return t=pz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pz(e){var t=gz(e,"string");return Du(t)=="symbol"?t:t+""}function gz(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ls={widthCache:{},cacheCount:0},mz=2e3,yz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vw="recharts_measurement_span";function vz(e){var t=ly({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var nu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||$o.isSsr)return{width:0,height:0};var n=vz(r),a=JSON.stringify({text:t,copyStyle:n});if(Ls.widthCache[a])return Ls.widthCache[a];try{var i=document.getElementById(vw);i||(i=document.createElement("span"),i.setAttribute("id",vw),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=ly(ly({},yz),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Ls.widthCache[a]=l,++Ls.cacheCount>mz&&(Ls.cacheCount=0,Ls.widthCache={}),l}catch{return{width:0,height:0}}},xz=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function w0(e,t){return Sz(e)||kz(e,t)||wz(e,t)||bz()}function bz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wz(e,t){if(e){if(typeof e=="string")return xw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xw(e,t)}}function xw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Sz(e){if(Array.isArray(e))return e}function jz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cz(n.key),n)}}function Pz(e,t,r){return t&&bw(e.prototype,t),r&&bw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cz(e){var t=Oz(e,"string");return Iu(t)=="symbol"?t:t+""}function Oz(e,t){if(Iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ww=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Nz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Mz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Hj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_z=Object.keys(Hj),el="NaN";function Az(e,t){return e*Hj[t]}var ad=function(){function e(t,r){jz(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Nz.test(r)&&(this.num=NaN,this.unit=""),_z.includes(r)&&(this.num=Az(t,r),this.unit="px")}return Pz(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Mz.exec(r))!==null&&n!==void 0?n:[],i=w0(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function Xj(e){if(e.includes(el))return el;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=ww.exec(t))!==null&&r!==void 0?r:[],a=w0(n,4),i=a[1],o=a[2],s=a[3],l=ad.parse(i??""),u=ad.parse(s??""),f=o==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return el;t=t.replace(ww,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=kw.exec(t))!==null&&d!==void 0?d:[],p=w0(h,4),m=p[1],y=p[2],w=p[3],x=ad.parse(m??""),g=ad.parse(w??""),v=y==="+"?x.add(g):x.subtract(g);if(v.isNaN())return el;t=t.replace(kw,v.toString())}return t}var Sw=/\(([^()]*)\)/;function Tz(e){for(var t=e;t.includes("(");){var r=Sw.exec(t),n=w0(r,2),a=n[1];t=t.replace(Sw,Xj(a))}return t}function Ez(e){var t=e.replace(/\s+/g,"");return t=Tz(t),t=Xj(t),t}function $z(e){try{return Ez(e)}catch{return el}}function yg(e){var t=$z(e.slice(5,-1));return t===el?"":t}var Dz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Iz=["dx","dy","angle","className","breakAll"];function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(this,arguments)}function jw(e,t){if(e==null)return{};var r=Rz(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Rz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Pw(e,t){return zz(e)||Fz(e,t)||Bz(e,t)||Lz()}function Lz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bz(e,t){if(e){if(typeof e=="string")return Cw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cw(e,t)}}function Cw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function zz(e){if(Array.isArray(e))return e}var Kj=/[ \f\n\r\t\v\u2028\u2029]+/,Yj=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];ze(r)||(n?i=r.toString().split(""):i=r.toString().split(Kj));var o=i.map(function(l){return{word:l,width:nu(l,a).width}}),s=n?0:nu("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Uz=function(t,r,n,a,i){var o=t.maxLines,s=t.children,l=t.style,u=t.breakAll,f=fe(o),d=s,h=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce(function(I,A){var R=A.word,L=A.width,V=I[I.length-1];if(V&&(a==null||i||V.width+L+n<Number(a)))V.words.push(R),V.width+=L+n;else{var ee={words:[R],width:L};I.push(ee)}return I},[])},p=h(r),m=function($){return $.reduce(function(I,A){return I.width>A.width?I:A})};if(!f)return p;for(var y="",w=function($){var I=d.slice(0,$),A=Yj({breakAll:u,style:l,children:I+y}).wordsWithComputedWidth,R=h(A),L=R.length>o||m(R).width>Number(a);return[L,R]},x=0,g=d.length-1,v=0,S;x<=g&&v<=d.length-1;){var b=Math.floor((x+g)/2),k=b-1,P=w(k),C=Pw(P,2),N=C[0],O=C[1],E=w(b),M=Pw(E,1),_=M[0];if(!N&&!_&&(x=b+1),N&&_&&(g=b-1),!N&&_){S=O;break}v++}return S||p},Ow=function(t){var r=ze(t)?[]:t.toString().split(Kj);return[{words:r}]},Gz=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!$o.isSsr){var l,u,f=Yj({breakAll:o,children:a,style:i});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,u=h}else return Ow(a);return Uz({breakAll:o,children:a,maxLines:s,style:i},l,u,r,n)}return Ow(a)},Nw="#808080",k0=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,m=t.verticalAnchor,y=m===void 0?"end":m,w=t.fill,x=w===void 0?Nw:w,g=jw(t,Dz),v=j.useMemo(function(){return Gz({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),S=g.dx,b=g.dy,k=g.angle,P=g.className,C=g.breakAll,N=jw(g,Iz);if(!zr(n)||!zr(i))return null;var O=n+(fe(S)?S:0),E=i+(fe(b)?b:0),M;switch(y){case"start":M=yg("calc(".concat(u,")"));break;case"middle":M=yg("calc(".concat((v.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:M=yg("calc(".concat(v.length-1," * -").concat(s,")"));break}var _=[];if(d){var T=v[0].width,$=g.width;_.push("scale(".concat((fe($)?$/T:1)/T,")"))}return k&&_.push("rotate(".concat(k,", ").concat(O,", ").concat(E,")")),_.length&&(N.transform=_.join(" ")),F.createElement("text",cy({},Ve(N,!0),{x:O,y:E,className:ot("recharts-text",P),textAnchor:p,fill:x.includes("url")?Nw:x}),v.map(function(I,A){var R=I.words.join(C?"":" ");return F.createElement("tspan",{x:O,dy:A===0?M:s,key:"".concat(R,"-").concat(A)},R)}))};function jo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wz(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zx(e){let t,r,n;e.length!==2?(t=jo,r=(s,l)=>jo(e(s),l),n=(s,l)=>e(s)-l):(t=e===jo||e===Wz?e:Vz,r=e,n=e);function a(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;r(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){const d=a(s,l,u,f-1);return d>u&&n(s[d-1],l)>-n(s[d],l)?d-1:d}return{left:a,center:o,right:i}}function Vz(){return 0}function qj(e){return e===null?NaN:+e}function*Hz(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Xz=zx(jo),xf=Xz.right;zx(qj).center;class Mw extends Map{constructor(t,r=qz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(_w(this,t))}has(t){return super.has(_w(this,t))}set(t,r){return super.set(Kz(this,t),r)}delete(t){return super.delete(Yz(this,t))}}function _w({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Kz({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Yz({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function qz(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Zz(e=jo){if(e===jo)return Zj;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Zj(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Qz=Math.sqrt(50),Jz=Math.sqrt(10),eU=Math.sqrt(2);function S0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Qz?10:i>=Jz?5:i>=eU?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?S0(e,t,r*2):[s,l,u]}function uy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?S0(t,e,r):S0(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function fy(e,t,r){return t=+t,e=+e,r=+r,S0(e,t,r)[2]}function dy(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?fy(t,e,r):fy(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Aw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Tw(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Qj(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Zj:Zz(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/l+h)),m=Math.min(n,Math.floor(t+(l-u)*d/l+h));Qj(e,t,p,m,a)}const i=e[t];let o=r,s=n;for(Ec(e,r,t),a(e[n],i)>0&&Ec(e,r,n);o<s;){for(Ec(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?Ec(e,r,s):(++s,Ec(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function Ec(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function tU(e,t,r){if(e=Float64Array.from(Hz(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Tw(e);if(t>=1)return Aw(e);var n,a=(n-1)*t,i=Math.floor(a),o=Aw(Qj(e,i).subarray(0,i+1)),s=Tw(e.subarray(i+1));return o+(s-o)*(a-i)}}function rU(e,t,r=qj){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function nU(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function _a(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ki(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hy=Symbol("implicit");function Ux(){var e=new Mw,t=[],r=[],n=hy;function a(i){let o=e.get(i);if(o===void 0){if(n!==hy)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Mw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Ux(t,r).unknown(n)},_a.apply(a,arguments),a}function Ru(){var e=Ux().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,p=a<n,m=p?a:n,y=p?n:a;i=(y-m)/Math.max(1,h-l+u*2),s&&(i=Math.floor(i)),m+=(y-m-i*(h-l))*f,o=i*(1-l),s&&(m=Math.round(m),o=Math.round(o));var w=nU(h).map(function(x){return m+i*x});return r(p?w.reverse():w)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return Ru(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},_a.apply(d(),arguments)}function Jj(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Jj(t())},e}function au(){return Jj(Ru.apply(null,arguments).paddingInner(1))}function Gx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function eP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function bf(){}var Lu=.7,j0=1/Lu,fl="\\s*([+-]?\\d+)\\s*",Bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aU=/^#([0-9a-f]{3,8})$/,iU=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),oU=new RegExp(`^rgb\\(${li},${li},${li}\\)$`),sU=new RegExp(`^rgba\\(${fl},${fl},${fl},${Bu}\\)$`),lU=new RegExp(`^rgba\\(${li},${li},${li},${Bu}\\)$`),cU=new RegExp(`^hsl\\(${Bu},${li},${li}\\)$`),uU=new RegExp(`^hsla\\(${Bu},${li},${li},${Bu}\\)$`),Ew={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gx(bf,Fu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$w,formatHex:$w,formatHex8:fU,formatHsl:dU,formatRgb:Dw,toString:Dw});function $w(){return this.rgb().formatHex()}function fU(){return this.rgb().formatHex8()}function dU(){return tP(this).formatHsl()}function Dw(){return this.rgb().formatRgb()}function Fu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=aU.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Iw(t):r===3?new Kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?id(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?id(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iU.exec(e))?new Kn(t[1],t[2],t[3],1):(t=oU.exec(e))?new Kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sU.exec(e))?id(t[1],t[2],t[3],t[4]):(t=lU.exec(e))?id(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cU.exec(e))?Bw(t[1],t[2]/100,t[3]/100,1):(t=uU.exec(e))?Bw(t[1],t[2]/100,t[3]/100,t[4]):Ew.hasOwnProperty(e)?Iw(Ew[e]):e==="transparent"?new Kn(NaN,NaN,NaN,0):null}function Iw(e){return new Kn(e>>16&255,e>>8&255,e&255,1)}function id(e,t,r,n){return n<=0&&(e=t=r=NaN),new Kn(e,t,r,n)}function hU(e){return e instanceof bf||(e=Fu(e)),e?(e=e.rgb(),new Kn(e.r,e.g,e.b,e.opacity)):new Kn}function py(e,t,r,n){return arguments.length===1?hU(e):new Kn(e,t,r,n??1)}function Kn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Gx(Kn,py,eP(bf,{brighter(e){return e=e==null?j0:Math.pow(j0,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lu:Math.pow(Lu,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kn(cs(this.r),cs(this.g),cs(this.b),P0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rw,formatHex:Rw,formatHex8:pU,formatRgb:Lw,toString:Lw}));function Rw(){return`#${ns(this.r)}${ns(this.g)}${ns(this.b)}`}function pU(){return`#${ns(this.r)}${ns(this.g)}${ns(this.b)}${ns((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lw(){const e=P0(this.opacity);return`${e===1?"rgb(":"rgba("}${cs(this.r)}, ${cs(this.g)}, ${cs(this.b)}${e===1?")":`, ${e})`}`}function P0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ns(e){return e=cs(e),(e<16?"0":"")+e.toString(16)}function Bw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ua(e,t,r,n)}function tP(e){if(e instanceof Ua)return new Ua(e.h,e.s,e.l,e.opacity);if(e instanceof bf||(e=Fu(e)),!e)return new Ua;if(e instanceof Ua)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new Ua(o,s,l,e.opacity)}function gU(e,t,r,n){return arguments.length===1?tP(e):new Ua(e,t,r,n??1)}function Ua(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Gx(Ua,gU,eP(bf,{brighter(e){return e=e==null?j0:Math.pow(j0,e),new Ua(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lu:Math.pow(Lu,e),new Ua(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Kn(vg(e>=240?e-240:e+120,a,n),vg(e,a,n),vg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ua(Fw(this.h),od(this.s),od(this.l),P0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=P0(this.opacity);return`${e===1?"hsl(":"hsla("}${Fw(this.h)}, ${od(this.s)*100}%, ${od(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fw(e){return e=(e||0)%360,e<0?e+360:e}function od(e){return Math.max(0,Math.min(1,e||0))}function vg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Wx=e=>()=>e;function mU(e,t){return function(r){return e+r*t}}function yU(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function vU(e){return(e=+e)==1?rP:function(t,r){return r-t?yU(t,r,e):Wx(isNaN(t)?r:t)}}function rP(e,t){var r=t-e;return r?mU(e,r):Wx(isNaN(e)?t:e)}const zw=function e(t){var r=vU(t);function n(a,i){var o=r((a=py(a)).r,(i=py(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=rP(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function xU(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function bU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wU(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=sc(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function kU(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function C0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function SU(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=sc(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var gy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xg=new RegExp(gy.source,"g");function jU(e){return function(){return e}}function PU(e){return function(t){return e(t)+""}}function CU(e,t){var r=gy.lastIndex=xg.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=gy.exec(e))&&(a=xg.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:C0(n,a)})),r=xg.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?PU(l[0].x):jU(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function sc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Wx(t):(r==="number"?C0:r==="string"?(n=Fu(t))?(t=n,zw):CU:t instanceof Fu?zw:t instanceof Date?kU:bU(t)?xU:Array.isArray(t)?wU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?SU:C0)(e,t)}function Vx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function OU(e,t){t===void 0&&(t=e,e=sc);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function NU(e){return function(){return e}}function O0(e){return+e}var Uw=[0,1];function En(e){return e}function my(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:NU(isNaN(t)?NaN:.5)}function MU(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function _U(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=my(a,n),i=r(o,i)):(n=my(n,a),i=r(i,o)),function(s){return i(n(s))}}function AU(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=my(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=xf(e,s,1,n)-1;return i[l](a[l](s))}}function wf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tp(){var e=Uw,t=Uw,r=sc,n,a,i,o=En,s,l,u;function f(){var h=Math.min(e.length,t.length);return o!==En&&(o=MU(e[0],e[h-1])),s=h>2?AU:_U,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=s(e.map(n),t,r)))(n(o(h)))}return d.invert=function(h){return o(a((u||(u=s(t,e.map(n),C0)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,O0),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=Vx,f()},d.clamp=function(h){return arguments.length?(o=h?!0:En,f()):o!==En},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,p){return n=h,a=p,f()}}function Hx(){return tp()(En,En)}function TU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function N0(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Cl(e){return e=N0(Math.abs(e)),e?e[1]:NaN}function EU(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function $U(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var DU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zu(e){if(!(t=DU.exec(e)))throw new Error("invalid format: "+e);var t;return new Xx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zu.prototype=Xx.prototype;function Xx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function IU(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var M0;function RU(e,t){var r=N0(e,t);if(!r)return M0=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(M0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+N0(e,Math.max(0,t+i-1))[0]}function Gw(e,t){var r=N0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Ww={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Gw(e*100,t),r:Gw,s:RU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Vw(e){return e}var Hw=Array.prototype.map,Xw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function LU(e){var t=e.grouping===void 0||e.thousands===void 0?Vw:EU(Hw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Vw:$U(Hw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d,h){d=zu(d);var p=d.fill,m=d.align,y=d.sign,w=d.symbol,x=d.zero,g=d.width,v=d.comma,S=d.precision,b=d.trim,k=d.type;k==="n"?(v=!0,k="g"):Ww[k]||(S===void 0&&(S=12),b=!0,k="g"),(x||p==="0"&&m==="=")&&(x=!0,p="0",m="=");var P=(h&&h.prefix!==void 0?h.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),C=(w==="$"?n:/[%p]/.test(k)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),N=Ww[k],O=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function E(M){var _=P,T=C,$,I,A;if(k==="c")T=N(M)+T,M="";else{M=+M;var R=M<0||1/M<0;if(M=isNaN(M)?l:N(Math.abs(M),S),b&&(M=IU(M)),R&&+M==0&&y!=="+"&&(R=!1),_=(R?y==="("?y:s:y==="-"||y==="("?"":y)+_,T=(k==="s"&&!isNaN(M)&&M0!==void 0?Xw[8+M0/3]:"")+T+(R&&y==="("?")":""),O){for($=-1,I=M.length;++$<I;)if(A=M.charCodeAt($),48>A||A>57){T=(A===46?a+M.slice($+1):M.slice($))+T,M=M.slice(0,$);break}}}v&&!x&&(M=t(M,1/0));var L=_.length+M.length+T.length,V=L<g?new Array(g-L+1).join(p):"";switch(v&&x&&(M=t(V+M,V.length?g-T.length:1/0),V=""),m){case"<":M=_+M+T+V;break;case"=":M=_+V+M+T;break;case"^":M=V.slice(0,L=V.length>>1)+_+M+T+V.slice(L);break;default:M=V+_+M+T;break}return i(M)}return E.toString=function(){return d+""},E}function f(d,h){var p=Math.max(-8,Math.min(8,Math.floor(Cl(h)/3)))*3,m=Math.pow(10,-p),y=u((d=zu(d),d.type="f",d),{suffix:Xw[8+p/3]});return function(w){return y(m*w)}}return{format:u,formatPrefix:f}}var sd,Kx,nP;BU({thousands:",",grouping:[3],currency:["$",""]});function BU(e){return sd=LU(e),Kx=sd.format,nP=sd.formatPrefix,sd}function FU(e){return Math.max(0,-Cl(Math.abs(e)))}function zU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cl(t)/3)))*3-Cl(Math.abs(e)))}function UU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Cl(t)-Cl(e))+1}function aP(e,t,r,n){var a=dy(e,t,r),i;switch(n=zu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=zU(a,o))&&(n.precision=i),nP(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=UU(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=FU(a))&&(n.precision=i-(n.type==="%")*2);break}}return Kx(n)}function Do(e){var t=e.domain;return e.ticks=function(r){var n=t();return uy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return aP(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=fy(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function _0(){var e=Hx();return e.copy=function(){return wf(e,_0())},_a.apply(e,arguments),Do(e)}function iP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,O0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return iP(e).unknown(t)},e=arguments.length?Array.from(e,O0):[0,1],Do(r)}function oP(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Kw(e){return Math.log(e)}function Yw(e){return Math.exp(e)}function GU(e){return-Math.log(-e)}function WU(e){return-Math.exp(-e)}function VU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HU(e){return e===10?VU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function XU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function qw(e){return(t,r)=>-e(-t,r)}function Yx(e){const t=e(Kw,Yw),r=t.domain;let n=10,a,i;function o(){return a=XU(n),i=HU(n),r()[0]<0?(a=qw(a),i=qw(i),e(GU,WU)):e(Kw,Yw),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),p=a(f),m,y;const w=s==null?10:+s;let x=[];if(!(n%1)&&p-h<w){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<n;++m)if(y=h<0?m/i(-h):m*i(h),!(y<u)){if(y>f)break;x.push(y)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(y=h>0?m/i(-h):m*i(h),!(y<u)){if(y>f)break;x.push(y)}x.length*2<w&&(x=uy(u,f,w))}else x=uy(h,p,Math.min(p-h,w)).map(i);return d?x.reverse():x},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=zu(l)).precision==null&&(l.trim=!0),l=Kx(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return f=>{let d=f/i(Math.round(a(f)));return d*n<n-.5&&(d*=n),d<=u?l(f):""}},t.nice=()=>r(oP(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function sP(){const e=Yx(tp()).domain([1,10]);return e.copy=()=>wf(e,sP()).base(e.base()),_a.apply(e,arguments),e}function Zw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Qw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function qx(e){var t=1,r=e(Zw(t),Qw(t));return r.constant=function(n){return arguments.length?e(Zw(t=+n),Qw(t)):t},Do(r)}function lP(){var e=qx(tp());return e.copy=function(){return wf(e,lP()).constant(e.constant())},_a.apply(e,arguments)}function Jw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function KU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function YU(e){return e<0?-e*e:e*e}function Zx(e){var t=e(En,En),r=1;function n(){return r===1?e(En,En):r===.5?e(KU,YU):e(Jw(r),Jw(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Do(t)}function Qx(){var e=Zx(tp());return e.copy=function(){return wf(e,Qx()).exponent(e.exponent())},_a.apply(e,arguments),e}function qU(){return Qx.apply(null,arguments).exponent(.5)}function ek(e){return Math.sign(e)*e*e}function ZU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function cP(){var e=Hx(),t=[0,1],r=!1,n;function a(i){var o=ZU(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(ek(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,O0)).map(ek)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return cP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},_a.apply(a,arguments),Do(a)}function uP(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=rU(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[xf(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(jo),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return uP().domain(e).range(t).unknown(n)},_a.apply(i,arguments)}function fP(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[xf(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return fP().domain([e,t]).range(a).unknown(i)},_a.apply(Do(o),arguments)}function dP(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[xf(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return dP().domain(e).range(t).unknown(r)},_a.apply(a,arguments)}const bg=new Date,wg=new Date;function Gr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>Gr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(bg.setTime(+i),wg.setTime(+o),e(bg),e(wg),Math.floor(r(bg,wg))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const A0=Gr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);A0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):A0);A0.range;const Mi=1e3,ka=Mi*60,_i=ka*60,Ui=_i*24,Jx=Ui*7,tk=Ui*30,kg=Ui*365,as=Gr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Mi)},(e,t)=>(t-e)/Mi,e=>e.getUTCSeconds());as.range;const e1=Gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mi)},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getMinutes());e1.range;const t1=Gr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ka)},(e,t)=>(t-e)/ka,e=>e.getUTCMinutes());t1.range;const r1=Gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mi-e.getMinutes()*ka)},(e,t)=>{e.setTime(+e+t*_i)},(e,t)=>(t-e)/_i,e=>e.getHours());r1.range;const n1=Gr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_i)},(e,t)=>(t-e)/_i,e=>e.getUTCHours());n1.range;const kf=Gr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ka)/Ui,e=>e.getDate()-1);kf.range;const rp=Gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ui,e=>e.getUTCDate()-1);rp.range;const hP=Gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ui,e=>Math.floor(e/Ui));hP.range;function Es(e){return Gr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ka)/Jx)}const np=Es(0),T0=Es(1),QU=Es(2),JU=Es(3),Ol=Es(4),eG=Es(5),tG=Es(6);np.range;T0.range;QU.range;JU.range;Ol.range;eG.range;tG.range;function $s(e){return Gr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Jx)}const ap=$s(0),E0=$s(1),rG=$s(2),nG=$s(3),Nl=$s(4),aG=$s(5),iG=$s(6);ap.range;E0.range;rG.range;nG.range;Nl.range;aG.range;iG.range;const a1=Gr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());a1.range;const i1=Gr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());i1.range;const Gi=Gr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Gi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Gi.range;const Wi=Gr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Wi.range;function pP(e,t,r,n,a,i){const o=[[as,1,Mi],[as,5,5*Mi],[as,15,15*Mi],[as,30,30*Mi],[i,1,ka],[i,5,5*ka],[i,15,15*ka],[i,30,30*ka],[a,1,_i],[a,3,3*_i],[a,6,6*_i],[a,12,12*_i],[n,1,Ui],[n,2,2*Ui],[r,1,Jx],[t,1,tk],[t,3,3*tk],[e,1,kg]];function s(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:l(u,f,d),m=p?p.range(u,+f+1):[];return h?m.reverse():m}function l(u,f,d){const h=Math.abs(f-u)/d,p=zx(([,,w])=>w).right(o,h);if(p===o.length)return e.every(dy(u/kg,f/kg,d));if(p===0)return A0.every(Math.max(dy(u,f,d),1));const[m,y]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return m.every(y)}return[s,l]}const[oG,sG]=pP(Wi,i1,ap,hP,n1,t1),[lG,cG]=pP(Gi,a1,np,kf,r1,e1);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $c(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function uG(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=Dc(a),f=Ic(a),d=Dc(i),h=Ic(i),p=Dc(o),m=Ic(o),y=Dc(s),w=Ic(s),x=Dc(l),g=Ic(l),v={a:A,A:R,b:L,B:V,c:null,d:sk,e:sk,f:EG,g:GG,G:VG,H:_G,I:AG,j:TG,L:gP,m:$G,M:DG,p:ee,q:G,Q:uk,s:fk,S:IG,u:RG,U:LG,V:BG,w:FG,W:zG,x:null,X:null,y:UG,Y:WG,Z:HG,"%":ck},S={a:W,A:ne,b:Q,B,c:null,d:lk,e:lk,f:qG,g:oW,G:lW,H:XG,I:KG,j:YG,L:yP,m:ZG,M:QG,p:ie,q:K,Q:uk,s:fk,S:JG,u:eW,U:tW,V:rW,w:nW,W:aW,x:null,X:null,y:iW,Y:sW,Z:cW,"%":ck},b={a:O,A:E,b:M,B:_,c:T,d:ik,e:ik,f:CG,g:ak,G:nk,H:ok,I:ok,j:kG,L:PG,m:wG,M:SG,p:N,q:bG,Q:NG,s:MG,S:jG,u:gG,U:mG,V:yG,w:pG,W:vG,x:$,X:I,y:ak,Y:nk,Z:xG,"%":OG};v.x=k(r,v),v.X=k(n,v),v.c=k(t,v),S.x=k(r,S),S.X=k(n,S),S.c=k(t,S);function k(X,se){return function(de){var J=[],je=-1,ye=0,te=X.length,he,ve,Ke;for(de instanceof Date||(de=new Date(+de));++je<te;)X.charCodeAt(je)===37&&(J.push(X.slice(ye,je)),(ve=rk[he=X.charAt(++je)])!=null?he=X.charAt(++je):ve=he==="e"?" ":"0",(Ke=se[he])&&(he=Ke(de,ve)),J.push(he),ye=je+1);return J.push(X.slice(ye,je)),J.join("")}}function P(X,se){return function(de){var J=$c(1900,void 0,1),je=C(J,X,de+="",0),ye,te;if(je!=de.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(se&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(ye=jg($c(J.y,0,1)),te=ye.getUTCDay(),ye=te>4||te===0?E0.ceil(ye):E0(ye),ye=rp.offset(ye,(J.V-1)*7),J.y=ye.getUTCFullYear(),J.m=ye.getUTCMonth(),J.d=ye.getUTCDate()+(J.w+6)%7):(ye=Sg($c(J.y,0,1)),te=ye.getDay(),ye=te>4||te===0?T0.ceil(ye):T0(ye),ye=kf.offset(ye,(J.V-1)*7),J.y=ye.getFullYear(),J.m=ye.getMonth(),J.d=ye.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),te="Z"in J?jg($c(J.y,0,1)).getUTCDay():Sg($c(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(te+5)%7:J.w+J.U*7-(te+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,jg(J)):Sg(J)}}function C(X,se,de,J){for(var je=0,ye=se.length,te=de.length,he,ve;je<ye;){if(J>=te)return-1;if(he=se.charCodeAt(je++),he===37){if(he=se.charAt(je++),ve=b[he in rk?se.charAt(je++):he],!ve||(J=ve(X,de,J))<0)return-1}else if(he!=de.charCodeAt(J++))return-1}return J}function N(X,se,de){var J=u.exec(se.slice(de));return J?(X.p=f.get(J[0].toLowerCase()),de+J[0].length):-1}function O(X,se,de){var J=p.exec(se.slice(de));return J?(X.w=m.get(J[0].toLowerCase()),de+J[0].length):-1}function E(X,se,de){var J=d.exec(se.slice(de));return J?(X.w=h.get(J[0].toLowerCase()),de+J[0].length):-1}function M(X,se,de){var J=x.exec(se.slice(de));return J?(X.m=g.get(J[0].toLowerCase()),de+J[0].length):-1}function _(X,se,de){var J=y.exec(se.slice(de));return J?(X.m=w.get(J[0].toLowerCase()),de+J[0].length):-1}function T(X,se,de){return C(X,t,se,de)}function $(X,se,de){return C(X,r,se,de)}function I(X,se,de){return C(X,n,se,de)}function A(X){return o[X.getDay()]}function R(X){return i[X.getDay()]}function L(X){return l[X.getMonth()]}function V(X){return s[X.getMonth()]}function ee(X){return a[+(X.getHours()>=12)]}function G(X){return 1+~~(X.getMonth()/3)}function W(X){return o[X.getUTCDay()]}function ne(X){return i[X.getUTCDay()]}function Q(X){return l[X.getUTCMonth()]}function B(X){return s[X.getUTCMonth()]}function ie(X){return a[+(X.getUTCHours()>=12)]}function K(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var se=k(X+="",v);return se.toString=function(){return X},se},parse:function(X){var se=P(X+="",!1);return se.toString=function(){return X},se},utcFormat:function(X){var se=k(X+="",S);return se.toString=function(){return X},se},utcParse:function(X){var se=P(X+="",!0);return se.toString=function(){return X},se}}}var rk={"-":"",_:" ",0:"0"},qr=/^\s*\d+/,fG=/^%/,dG=/[\\^$*+?|[\]().{}]/g;function mt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function hG(e){return e.replace(dG,"\\$&")}function Dc(e){return new RegExp("^(?:"+e.map(hG).join("|")+")","i")}function Ic(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function pG(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function gG(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function mG(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function yG(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function vG(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function nk(e,t,r){var n=qr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ak(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function xG(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function bG(e,t,r){var n=qr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function wG(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ik(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function kG(e,t,r){var n=qr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function ok(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function SG(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function jG(e,t,r){var n=qr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function PG(e,t,r){var n=qr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function CG(e,t,r){var n=qr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function OG(e,t,r){var n=fG.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function NG(e,t,r){var n=qr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function MG(e,t,r){var n=qr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function sk(e,t){return mt(e.getDate(),t,2)}function _G(e,t){return mt(e.getHours(),t,2)}function AG(e,t){return mt(e.getHours()%12||12,t,2)}function TG(e,t){return mt(1+kf.count(Gi(e),e),t,3)}function gP(e,t){return mt(e.getMilliseconds(),t,3)}function EG(e,t){return gP(e,t)+"000"}function $G(e,t){return mt(e.getMonth()+1,t,2)}function DG(e,t){return mt(e.getMinutes(),t,2)}function IG(e,t){return mt(e.getSeconds(),t,2)}function RG(e){var t=e.getDay();return t===0?7:t}function LG(e,t){return mt(np.count(Gi(e)-1,e),t,2)}function mP(e){var t=e.getDay();return t>=4||t===0?Ol(e):Ol.ceil(e)}function BG(e,t){return e=mP(e),mt(Ol.count(Gi(e),e)+(Gi(e).getDay()===4),t,2)}function FG(e){return e.getDay()}function zG(e,t){return mt(T0.count(Gi(e)-1,e),t,2)}function UG(e,t){return mt(e.getFullYear()%100,t,2)}function GG(e,t){return e=mP(e),mt(e.getFullYear()%100,t,2)}function WG(e,t){return mt(e.getFullYear()%1e4,t,4)}function VG(e,t){var r=e.getDay();return e=r>=4||r===0?Ol(e):Ol.ceil(e),mt(e.getFullYear()%1e4,t,4)}function HG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mt(t/60|0,"0",2)+mt(t%60,"0",2)}function lk(e,t){return mt(e.getUTCDate(),t,2)}function XG(e,t){return mt(e.getUTCHours(),t,2)}function KG(e,t){return mt(e.getUTCHours()%12||12,t,2)}function YG(e,t){return mt(1+rp.count(Wi(e),e),t,3)}function yP(e,t){return mt(e.getUTCMilliseconds(),t,3)}function qG(e,t){return yP(e,t)+"000"}function ZG(e,t){return mt(e.getUTCMonth()+1,t,2)}function QG(e,t){return mt(e.getUTCMinutes(),t,2)}function JG(e,t){return mt(e.getUTCSeconds(),t,2)}function eW(e){var t=e.getUTCDay();return t===0?7:t}function tW(e,t){return mt(ap.count(Wi(e)-1,e),t,2)}function vP(e){var t=e.getUTCDay();return t>=4||t===0?Nl(e):Nl.ceil(e)}function rW(e,t){return e=vP(e),mt(Nl.count(Wi(e),e)+(Wi(e).getUTCDay()===4),t,2)}function nW(e){return e.getUTCDay()}function aW(e,t){return mt(E0.count(Wi(e)-1,e),t,2)}function iW(e,t){return mt(e.getUTCFullYear()%100,t,2)}function oW(e,t){return e=vP(e),mt(e.getUTCFullYear()%100,t,2)}function sW(e,t){return mt(e.getUTCFullYear()%1e4,t,4)}function lW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Nl(e):Nl.ceil(e),mt(e.getUTCFullYear()%1e4,t,4)}function cW(){return"+0000"}function ck(){return"%"}function uk(e){return+e}function fk(e){return Math.floor(+e/1e3)}var Bs,xP,bP;uW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uW(e){return Bs=uG(e),xP=Bs.format,Bs.parse,bP=Bs.utcFormat,Bs.utcParse,Bs}function fW(e){return new Date(e)}function dW(e){return e instanceof Date?+e:+new Date(+e)}function o1(e,t,r,n,a,i,o,s,l,u){var f=Hx(),d=f.invert,h=f.domain,p=u(".%L"),m=u(":%S"),y=u("%I:%M"),w=u("%I %p"),x=u("%a %d"),g=u("%b %d"),v=u("%B"),S=u("%Y");function b(k){return(l(k)<k?p:s(k)<k?m:o(k)<k?y:i(k)<k?w:n(k)<k?a(k)<k?x:g:r(k)<k?v:S)(k)}return f.invert=function(k){return new Date(d(k))},f.domain=function(k){return arguments.length?h(Array.from(k,dW)):h().map(fW)},f.ticks=function(k){var P=h();return e(P[0],P[P.length-1],k??10)},f.tickFormat=function(k,P){return P==null?b:u(P)},f.nice=function(k){var P=h();return(!k||typeof k.range!="function")&&(k=t(P[0],P[P.length-1],k??10)),k?h(oP(P,k)):f},f.copy=function(){return wf(f,o1(e,t,r,n,a,i,o,s,l,u))},f}function hW(){return _a.apply(o1(lG,cG,Gi,a1,np,kf,r1,e1,as,xP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pW(){return _a.apply(o1(oG,sG,Wi,i1,ap,rp,n1,t1,as,bP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ip(){var e=0,t=1,r,n,a,i,o=En,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(a===0?.5:(d=(i(d)-r)*a,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var p,m;return arguments.length?([p,m]=h,o=d(p,m),u):[o(0),o(1)]}}return u.range=f(sc),u.rangeRound=f(Vx),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function Io(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wP(){var e=Do(ip()(En));return e.copy=function(){return Io(e,wP())},Ki.apply(e,arguments)}function kP(){var e=Yx(ip()).domain([1,10]);return e.copy=function(){return Io(e,kP()).base(e.base())},Ki.apply(e,arguments)}function SP(){var e=qx(ip());return e.copy=function(){return Io(e,SP()).constant(e.constant())},Ki.apply(e,arguments)}function s1(){var e=Zx(ip());return e.copy=function(){return Io(e,s1()).exponent(e.exponent())},Ki.apply(e,arguments)}function gW(){return s1.apply(null,arguments).exponent(.5)}function jP(){var e=[],t=En;function r(n){if(n!=null&&!isNaN(n=+n))return t((xf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(jo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>tU(e,i/n))},r.copy=function(){return jP(t).domain(e)},Ki.apply(r,arguments)}function op(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=En,f,d=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+f(y))-i)*(n*y<n*i?s:l),u(d?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([e,t,r]=y,a=f(e=+e),i=f(t=+t),o=f(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(y){return arguments.length?(d=!!y,p):d},p.interpolator=function(y){return arguments.length?(u=y,p):u};function m(y){return function(w){var x,g,v;return arguments.length?([x,g,v]=w,u=OU(y,[x,g,v]),p):[u(0),u(.5),u(1)]}}return p.range=m(sc),p.rangeRound=m(Vx),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return f=y,a=y(e),i=y(t),o=y(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function PP(){var e=Do(op()(En));return e.copy=function(){return Io(e,PP())},Ki.apply(e,arguments)}function CP(){var e=Yx(op()).domain([.1,1,10]);return e.copy=function(){return Io(e,CP()).base(e.base())},Ki.apply(e,arguments)}function OP(){var e=qx(op());return e.copy=function(){return Io(e,OP()).constant(e.constant())},Ki.apply(e,arguments)}function l1(){var e=Zx(op());return e.copy=function(){return Io(e,l1()).exponent(e.exponent())},Ki.apply(e,arguments)}function mW(){return l1.apply(null,arguments).exponent(.5)}const dk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ru,scaleDiverging:PP,scaleDivergingLog:CP,scaleDivergingPow:l1,scaleDivergingSqrt:mW,scaleDivergingSymlog:OP,scaleIdentity:iP,scaleImplicit:hy,scaleLinear:_0,scaleLog:sP,scaleOrdinal:Ux,scalePoint:au,scalePow:Qx,scaleQuantile:uP,scaleQuantize:fP,scaleRadial:cP,scaleSequential:wP,scaleSequentialLog:kP,scaleSequentialPow:s1,scaleSequentialQuantile:jP,scaleSequentialSqrt:gW,scaleSequentialSymlog:SP,scaleSqrt:qU,scaleSymlog:lP,scaleThreshold:dP,scaleTime:hW,scaleUtc:pW,tickFormat:aP},Symbol.toStringTag,{value:"Module"}));var yW=Ql;function vW(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(s===void 0?o===o&&!yW(o):r(o,s)))var s=o,l=i}return l}var NP=vW;function xW(e,t){return e>t}var bW=xW,wW=NP,kW=bW,SW=oc;function jW(e){return e&&e.length?wW(e,SW,kW):void 0}var PW=jW;const uo=Wt(PW);function CW(e,t){return e<t}var OW=CW,NW=NP,MW=OW,_W=oc;function AW(e){return e&&e.length?NW(e,_W,MW):void 0}var TW=AW;const sp=Wt(TW);var EW=kx,$W=Eo,DW=Lj,IW=ta;function RW(e,t){var r=IW(e)?EW:DW;return r(e,$W(t))}var LW=RW,BW=Ij,FW=LW;function zW(e,t){return BW(FW(e,t),1)}var UW=zW;const GW=Wt(UW);var WW=Ix;function VW(e,t){return WW(e,t)}var HW=VW;const js=Wt(HW);var lc=1e9,XW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},u1,nr=!0,Na="[DecimalError] ",us=Na+"Invalid argument: ",c1=Na+"Exponent out of range: ",cc=Math.floor,Yo=Math.pow,KW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sa,Vr=1e7,Jt=7,MP=9007199254740991,$0=cc(MP/Jt),Se={};Se.absoluteValue=Se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Se.comparedTo=Se.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Jt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Se.dividedBy=Se.div=function(e){return Ri(this,new this.constructor(e))};Se.dividedToIntegerBy=Se.idiv=function(e){var t=this,r=t.constructor;return Gt(Ri(t,new r(e),0,1),r.precision)};Se.equals=Se.eq=function(e){return!this.cmp(e)};Se.exponent=function(){return Dr(this)};Se.greaterThan=Se.gt=function(e){return this.cmp(e)>0};Se.greaterThanOrEqualTo=Se.gte=function(e){return this.cmp(e)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(e){return this.cmp(e)<0};Se.lessThanOrEqualTo=Se.lte=function(e){return this.cmp(e)<1};Se.logarithm=Se.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(sa))throw Error(Na+"NaN");if(r.s<1)throw Error(Na+(r.s?"NaN":"-Infinity"));return r.eq(sa)?new n(0):(nr=!1,t=Ri(Uu(r,i),Uu(e,i),i),nr=!0,Gt(t,a))};Se.minus=Se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?TP(t,e):_P(t,(e.s=-e.s,e))};Se.modulo=Se.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Na+"NaN");return r.s?(nr=!1,t=Ri(r,e,0,1).times(e),nr=!0,r.minus(t)):Gt(new n(r),a)};Se.naturalExponential=Se.exp=function(){return AP(this)};Se.naturalLogarithm=Se.ln=function(){return Uu(this)};Se.negated=Se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Se.plus=Se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_P(t,e):TP(t,(e.s=-e.s,e))};Se.precision=Se.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(us+e);if(t=Dr(a)+1,n=a.d.length-1,r=n*Jt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Se.squareRoot=Se.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Na+"NaN")}for(e=Dr(s),nr=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=ri(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=cc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus(Ri(s,i,o+2)).times(.5),ri(i.d).slice(0,o)===(t=ri(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Gt(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return nr=!0,Gt(n,r)};Se.times=Se.mul=function(e){var t,r,n,a,i,o,s,l,u,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,l=h.length,u=p.length,l<u&&(i=h,h=p,p=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+p[n]*h[a-n-1]+t,i[a--]=s%Vr|0,t=s/Vr|0;i[a]=(i[a]+t)%Vr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,nr?Gt(e,d.precision):e};Se.toDecimalPlaces=Se.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(hi(e,0,lc),t===void 0?t=n.rounding:hi(t,0,8),Gt(r,e+Dr(r)+1,t))};Se.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Ps(n,!0):(hi(e,0,lc),t===void 0?t=a.rounding:hi(t,0,8),n=Gt(new a(n),e+1,t),r=Ps(n,!0,e+1)),r};Se.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Ps(a):(hi(e,0,lc),t===void 0?t=i.rounding:hi(t,0,8),n=Gt(new i(a),e+Dr(a)+1,t),r=Ps(n.abs(),!1,e+Dr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Se.toInteger=Se.toint=function(){var e=this,t=e.constructor;return Gt(new t(e),Dr(e)+1,t.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,f=+(e=new l(e));if(!e.s)return new l(sa);if(s=new l(s),!s.s){if(e.s<1)throw Error(Na+"Infinity");return s}if(s.eq(sa))return s;if(n=l.precision,e.eq(sa))return Gt(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=f<0?-f:f)<=MP){for(a=new l(sa),t=Math.ceil(n/Jt+4),nr=!1;r%2&&(a=a.times(s),pk(a.d,t)),r=cc(r/2),r!==0;)s=s.times(s),pk(s.d,t);return nr=!0,e.s<0?new l(sa).div(a):Gt(a,n)}}else if(i<0)throw Error(Na+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,nr=!1,a=e.times(Uu(s,n+u)),nr=!0,a=AP(a),a.s=i,a};Se.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Dr(a),n=Ps(a,r<=i.toExpNeg||r>=i.toExpPos)):(hi(e,1,lc),t===void 0?t=i.rounding:hi(t,0,8),a=Gt(new i(a),e,t),r=Dr(a),n=Ps(a,e<=r||r<=i.toExpNeg,e)),n};Se.toSignificantDigits=Se.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(hi(e,1,lc),t===void 0?t=n.rounding:hi(t,0,8)),Gt(new n(r),e,t)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Dr(e),r=e.constructor;return Ps(e,t<=r.toExpNeg||t>=r.toExpPos)};function _P(e,t){var r,n,a,i,o,s,l,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),nr?Gt(t,d):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(d/Jt),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/Vr|0,l[i]%=Vr;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,nr?Gt(t,d):t}function hi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(us+e)}function ri(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Jt-n.length,r&&(i+=eo(r)),i+=n;o=e[t],n=o+"",r=Jt-n.length,r&&(i+=eo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ri=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Vr|0,o=i/Vr|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Vr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,f,d,h,p,m,y,w,x,g,v,S,b,k,P,C,N=n.constructor,O=n.s==a.s?1:-1,E=n.d,M=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(Na+"Division by zero");for(l=n.e-a.e,P=M.length,b=E.length,p=new N(O),m=p.d=[],u=0;M[u]==(E[u]||0);)++u;if(M[u]>(E[u]||0)&&--l,i==null?g=i=N.precision:o?g=i+(Dr(n)-Dr(a))+1:g=i,g<0)return new N(0);if(g=g/Jt+2|0,u=0,P==1)for(f=0,M=M[0],g++;(u<b||f)&&g--;u++)v=f*Vr+(E[u]||0),m[u]=v/M|0,f=v%M|0;else{for(f=Vr/(M[0]+1)|0,f>1&&(M=e(M,f),E=e(E,f),P=M.length,b=E.length),S=P,y=E.slice(0,P),w=y.length;w<P;)y[w++]=0;C=M.slice(),C.unshift(0),k=M[0],M[1]>=Vr/2&&++k;do f=0,s=t(M,y,P,w),s<0?(x=y[0],P!=w&&(x=x*Vr+(y[1]||0)),f=x/k|0,f>1?(f>=Vr&&(f=Vr-1),d=e(M,f),h=d.length,w=y.length,s=t(d,y,h,w),s==1&&(f--,r(d,P<h?C:M,h))):(f==0&&(s=f=1),d=M.slice()),h=d.length,h<w&&d.unshift(0),r(y,d,w),s==-1&&(w=y.length,s=t(M,y,P,w),s<1&&(f++,r(y,P<w?C:M,w))),w=y.length):s===0&&(f++,y=[0]),m[u++]=f,s&&y[0]?y[w++]=E[S]||0:(y=[E[S]],w=1);while((S++<b||y[0]!==void 0)&&g--)}return m[0]||m.shift(),p.e=l,Gt(p,o?i+Dr(p)+1:i)}}();function AP(e,t){var r,n,a,i,o,s,l=0,u=0,f=e.constructor,d=f.precision;if(Dr(e)>16)throw Error(c1+Dr(e));if(!e.s)return new f(sa);for(nr=!1,s=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Yo(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new f(sa),f.precision=s;;){if(a=Gt(a.times(e),s),r=r.times(++l),o=i.plus(Ri(a,r,s)),ri(o.d).slice(0,s)===ri(i.d).slice(0,s)){for(;u--;)i=Gt(i.times(i),s);return f.precision=d,t==null?(nr=!0,Gt(i,d)):i}i=o}}function Dr(e){for(var t=e.e*Jt,r=e.d[0];r>=10;r/=10)t++;return t}function Pg(e,t,r){if(t>e.LN10.sd())throw nr=!0,r&&(e.precision=r),Error(Na+"LN10 precision limit exceeded");return Gt(new e(e.LN10),t)}function eo(e){for(var t="";e--;)t+="0";return t}function Uu(e,t){var r,n,a,i,o,s,l,u,f,d=1,h=10,p=e,m=p.d,y=p.constructor,w=y.precision;if(p.s<1)throw Error(Na+(p.s?"NaN":"-Infinity"));if(p.eq(sa))return new y(0);if(t==null?(nr=!1,u=w):u=t,p.eq(10))return t==null&&(nr=!0),Pg(y,u);if(u+=h,y.precision=u,r=ri(m),n=r.charAt(0),i=Dr(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=ri(p.d),n=r.charAt(0),d++;i=Dr(p),n>1?(p=new y("0."+r),i++):p=new y(n+"."+r.slice(1))}else return l=Pg(y,u+2,w).times(i+""),p=Uu(new y(n+"."+r.slice(1)),u-h).plus(l),y.precision=w,t==null?(nr=!0,Gt(p,w)):p;for(s=o=p=Ri(p.minus(sa),p.plus(sa),u),f=Gt(p.times(p),u),a=3;;){if(o=Gt(o.times(f),u),l=s.plus(Ri(o,new y(a),u)),ri(l.d).slice(0,u)===ri(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Pg(y,u+2,w).times(i+""))),s=Ri(s,new y(d),u),y.precision=w,t==null?(nr=!0,Gt(s,w)):s;s=l,a+=2}}function hk(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=cc(r/Jt),e.d=[],n=(r+1)%Jt,r<0&&(n+=Jt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Jt;n<a;)e.d.push(+t.slice(n,n+=Jt));t=t.slice(n),n=Jt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),nr&&(e.e>$0||e.e<-$0))throw Error(c1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Gt(e,t,r){var n,a,i,o,s,l,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Jt,a=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Jt),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=Jt,a=n-Jt+o}if(r!==void 0&&(i=Yo(10,o-a-1),s=u/i%10|0,l=t<0||d[f+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Yo(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(i=Dr(e),d.length=1,t=t-i-1,d[0]=Yo(10,(Jt-t%Jt)%Jt),e.e=cc(-t/Jt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=Yo(10,Jt-n),d[f]=a>0?(u/Yo(10,o-a)%Yo(10,a)|0)*i:0),l)for(;;)if(f==0){(d[0]+=i)==Vr&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Vr)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(nr&&(e.e>$0||e.e<-$0))throw Error(c1+Dr(e));return e}function TP(e,t){var r,n,a,i,o,s,l,u,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),nr?Gt(t,p):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(f=o<0,f?(r=l,o=-o,s=d.length):(r=d,n=u,s=l.length),a=Math.max(Math.ceil(p/Jt),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=d.length,f=a<s,f&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){f=l[a]<d[a];break}o=0}for(f&&(r=l,l=d,d=r,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>o;){if(l[--a]<d[a]){for(i=a;i&&l[--i]===0;)l[i]=Vr-1;--l[i],l[a]+=Vr}l[a]-=d[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,nr?Gt(t,p):t):new h(0)}function Ps(e,t,r){var n,a=Dr(e),i=ri(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+eo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+eo(-a-1)+i,r&&(n=r-o)>0&&(i+=eo(n))):a>=o?(i+=eo(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+eo(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=eo(n))),e.s<0?"-"+i:i}function pk(e,t){if(e.length>t)return e.length=t,!0}function EP(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(us+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return hk(o,i.toString())}else if(typeof i!="string")throw Error(us+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,KW.test(i))hk(o,i);else throw Error(us+i)}if(a.prototype=Se,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=EP,a.config=a.set=YW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function YW(e){if(!e||typeof e!="object")throw Error(Na+"Object expected");var t,r,n,a=["precision",1,lc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(cc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(us+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(us+r+": "+n);return this}var u1=EP(XW);sa=new u1(1);const Ft=u1;function qW(e){return eV(e)||JW(e)||QW(e)||ZW()}function ZW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QW(e,t){if(e){if(typeof e=="string")return yy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yy(e,t)}}function JW(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function eV(e){if(Array.isArray(e))return yy(e)}function yy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tV=function(t){return t},$P={},DP=function(t){return t===$P},gk=function(t){return function r(){return arguments.length===0||arguments.length===1&&DP(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},rV=function e(t,r){return t===1?r:gk(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==$P}).length;return o>=t?r.apply(void 0,a):e(t-o,gk(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var f=a.map(function(d){return DP(d)?l.shift():d});return r.apply(void 0,qW(f).concat(l))}))})},lp=function(t){return rV(t.length,t)},vy=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},nV=lp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),aV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return tV;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},xy=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},IP=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,l){return s===r[l]})||(r=i,n=t.apply(void 0,i)),n}};function iV(e){var t;return e===0?t=1:t=Math.floor(new Ft(e).abs().log(10).toNumber())+1,t}function oV(e,t,r){for(var n=new Ft(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var sV=lp(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),lV=lp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),cV=lp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const cp={rangeStep:oV,getDigitCount:iV,interpolateNumber:sV,uninterpolateNumber:lV,uninterpolateTruncation:cV};function by(e){return dV(e)||fV(e)||RP(e)||uV()}function uV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function dV(e){if(Array.isArray(e))return wy(e)}function Gu(e,t){return gV(e)||pV(e,t)||RP(e,t)||hV()}function hV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RP(e,t){if(e){if(typeof e=="string")return wy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wy(e,t)}}function wy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function gV(e){if(Array.isArray(e))return e}function LP(e){var t=Gu(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function BP(e,t,r){if(e.lte(0))return new Ft(0);var n=cp.getDigitCount(e.toNumber()),a=new Ft(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new Ft(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?l:new Ft(Math.ceil(l))}function mV(e,t,r){var n=1,a=new Ft(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ft(10).pow(cp.getDigitCount(e)-1),a=new Ft(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ft(Math.floor(e)))}else e===0?a=new Ft(Math.floor((t-1)/2)):r||(a=new Ft(Math.floor(e)));var o=Math.floor((t-1)/2),s=aV(nV(function(l){return a.add(new Ft(l-o).mul(n)).toNumber()}),vy);return s(0,t)}function FP(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ft(0),tickMin:new Ft(0),tickMax:new Ft(0)};var i=BP(new Ft(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Ft(0):(o=new Ft(e).add(t).div(2),o=o.sub(new Ft(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new Ft(t).sub(o).div(i).toNumber()),u=s+l+1;return u>r?FP(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new Ft(s).mul(i)),tickMax:o.add(new Ft(l).mul(i))})}function yV(e){var t=Gu(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=LP([r,n]),l=Gu(s,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(by(vy(0,a-1).map(function(){return 1/0}))):[].concat(by(vy(0,a-1).map(function(){return-1/0})),[f]);return r>n?xy(d):d}if(u===f)return mV(u,a,i);var h=FP(u,f,o,i),p=h.step,m=h.tickMin,y=h.tickMax,w=cp.rangeStep(m,y.add(new Ft(.1).mul(p)),p);return r>n?xy(w):w}function vV(e,t){var r=Gu(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=LP([n,a]),s=Gu(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var f=Math.max(t,2),d=BP(new Ft(u).sub(l).div(f-1),i,0),h=[].concat(by(cp.rangeStep(new Ft(l),new Ft(u).sub(new Ft(.99).mul(d)),d)),[u]);return n>a?xy(h):h}var xV=IP(yV),bV=IP(vV),wV="Invariant failed";function Cs(e,t){throw new Error(wV)}var kV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ml(e){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(e)}function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D0.apply(this,arguments)}function SV(e,t){return OV(e)||CV(e,t)||PV(e,t)||jV()}function jV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PV(e,t){if(e){if(typeof e=="string")return mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mk(e,t)}}function mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function OV(e){if(Array.isArray(e))return e}function NV(e,t){if(e==null)return{};var r=MV(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GP(n.key),n)}}function TV(e,t,r){return t&&AV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EV(e,t,r){return t=I0(t),$V(e,zP()?Reflect.construct(t,r||[],I0(e).constructor):t.apply(e,r))}function $V(e,t){if(t&&(Ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DV(e)}function DV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zP=function(){return!!e})()}function I0(e){return I0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I0(e)}function IV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ky(e,t)}function ky(e,t){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ky(e,t)}function UP(e,t,r){return t=GP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GP(e){var t=RV(e,"string");return Ml(t)=="symbol"?t:t+""}function RV(e,t){if(Ml(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uc=function(e){function t(){return _V(this,t),EV(this,t,arguments)}return IV(t,e),TV(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=NV(n,kV),p=Ve(h,!1);this.props.direction==="x"&&f.type!=="number"&&Cs();var m=l.map(function(y){var w=u(y,s),x=w.x,g=w.y,v=w.value,S=w.errorVal;if(!S)return null;var b=[],k,P;if(Array.isArray(S)){var C=SV(S,2);k=C[0],P=C[1]}else k=P=S;if(i==="vertical"){var N=f.scale,O=g+a,E=O+o,M=O-o,_=N(v-k),T=N(v+P);b.push({x1:T,y1:E,x2:T,y2:M}),b.push({x1:_,y1:O,x2:T,y2:O}),b.push({x1:_,y1:E,x2:_,y2:M})}else if(i==="horizontal"){var $=d.scale,I=x+a,A=I-o,R=I+o,L=$(v-k),V=$(v+P);b.push({x1:A,y1:V,x2:R,y2:V}),b.push({x1:I,y1:L,x2:I,y2:V}),b.push({x1:A,y1:L,x2:R,y2:L})}return F.createElement(wt,D0({className:"recharts-errorBar",key:"bar-".concat(b.map(function(ee){return"".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))},p),b.map(function(ee){return F.createElement("line",D0({},ee,{key:"line-".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))}))});return F.createElement(wt,{className:"recharts-errorBars"},m)}}])}(F.Component);UP(uc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});UP(uc,"displayName","ErrorBar");function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(r),!0).forEach(function(n){LV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LV(e,t,r){return t=BV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BV(e){var t=FV(e,"string");return Wu(t)=="symbol"?t:t+""}function FV(e,t){if(Wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WP=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=oa(r,si);if(!o)return null;var s=si.defaultProps,l=s!==void 0?Wo(Wo({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,m=p.sectors||p.data||[];return f.concat(m.map(function(y){return{type:o.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?Wo(Wo({},h),d.props):{},m=p.dataKey,y=p.name,w=p.legendType,x=p.hide;return{inactive:x,dataKey:m,type:l.iconType||w||"square",color:f1(d),value:y||m,payload:p}}),Wo(Wo(Wo({},l),si.getWithHeight(o,a)),{},{payload:u,item:o})};function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function vk(e){return WV(e)||GV(e)||UV(e)||zV()}function zV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UV(e,t){if(e){if(typeof e=="string")return Sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sy(e,t)}}function GV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WV(e){if(Array.isArray(e))return Sy(e)}function Sy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(r),!0).forEach(function(n){dl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dl(e,t,r){return t=VV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VV(e){var t=HV(e,"string");return Vu(t)=="symbol"?t:t+""}function HV(e,t){if(Vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ur(e,t,r){return ze(e)||ze(t)?r:zr(t)?Pa(e,t,r):Xe(t)?t(e):r}function iu(e,t,r,n){var a=GW(e,function(s){return Ur(s,t)});if(r==="number"){var i=a.filter(function(s){return fe(s)||parseFloat(s)});return i.length?[sp(i),uo(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!ze(s)}):a;return o.map(function(s){return zr(s)||s instanceof Date?s:""})}var XV=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<s;u++){var f=u>0?a[u-1].coordinate:a[s-1].coordinate,d=a[u].coordinate,h=u>=s-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(Wa(d-f)!==Wa(h-d)){var m=[];if(Wa(h-d)===Wa(l[1]-l[0])){p=h;var y=d+l[1]-l[0];m[0]=Math.min(y,(y+f)/2),m[1]=Math.max(y,(y+f)/2)}else{p=f;var w=h+l[1]-l[0];m[0]=Math.min(d,(w+d)/2),m[1]=Math.max(d,(w+d)/2)}var x=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>x[0]&&t<=x[1]||t>=m[0]&&t<=m[1]){o=a[u].index;break}}else{var g=Math.min(f,h),v=Math.max(f,h);if(t>(g+d)/2&&t<=(v+d)/2){o=a[u].index;break}}}else for(var S=0;S<s;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===s-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},f1=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?xr(xr({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},KV=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,u=s.length;l<u;l++)for(var f=i[s[l]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var m=f[d[h]],y=m.items,w=m.cateAxisId,x=y.filter(function(P){return $i(P.type).indexOf("Bar")>=0});if(x&&x.length){var g=x[0].type.defaultProps,v=g!==void 0?xr(xr({},g),x[0].props):x[0].props,S=v.barSize,b=v[w];o[b]||(o[b]=[]);var k=ze(S)?r:S;o[b].push({item:x[0],stackList:x.slice(1),barSize:ze(k)?void 0:Ss(k,n,0)})}}return o},YV=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var u=Ss(r,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/l,m=o.reduce(function(S,b){return S+b.barSize||0},0);m+=(l-1)*u,m>=a&&(m-=(l-1)*u,u=0),m>=a&&p>0&&(h=!0,p*=.9,m=l*p);var y=(a-m)/2>>0,w={offset:y-u,size:0};f=o.reduce(function(S,b){var k={item:b.item,position:{offset:w.offset+w.size+u,size:h?p:b.barSize}},P=[].concat(vk(S),[k]);return w=P[P.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){P.push({item:C,position:w})}),P},d)}else{var x=Ss(n,a,0,!0);a-2*x-(l-1)*u<=0&&(u=0);var g=(a-2*x-(l-1)*u)/l;g>1&&(g>>=0);var v=s===+s?Math.min(g,s):g;f=o.reduce(function(S,b,k){var P=[].concat(vk(S),[{item:b.item,position:{offset:x+(g+u)*k+(g-v)/2,size:v}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(C){P.push({item:C,position:P[P.length-1].position})}),P},d)}return f},qV=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=WP({children:i,legendWidth:l});if(u){var f=a||{},d=f.width,h=f.height,p=u.align,m=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&m==="middle")&&p!=="center"&&fe(t[p]))return xr(xr({},t),{},dl({},p,t[p]+(d||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&m!=="middle"&&fe(t[m]))return xr(xr({},t),{},dl({},m,t[m]+(h||0)))}return t},ZV=function(t,r,n){return ze(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},VP=function(t,r,n,a,i){var o=r.props.children,s=Qn(o,uc).filter(function(u){return ZV(a,i,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Ur(f,n);if(ze(d))return u;var h=Array.isArray(d)?[sp(d),uo(d)]:[d,d],p=l.reduce(function(m,y){var w=Ur(f,y,0),x=h[0]-Math.abs(Array.isArray(w)?w[0]:w),g=h[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(x,m[0]),Math.max(g,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},QV=function(t,r,n,a,i){var o=r.map(function(s){return VP(t,s,n,i,a)}).filter(function(s){return!ze(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},HP=function(t,r,n,a,i){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&VP(t,l,u,a)||iu(t,u,n,i)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var f=0,d=u.length;f<d;f++)s[u[f]]||(s[u[f]]=!0,l.push(u[f]));return l},[])},XP=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},KP=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===r&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate});return i||s.push(r),o||s.push(n),s},Ai=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Wa(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=i?i.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!nc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:i?i[d]:d,index:h,offset:u}})},Cg=new WeakMap,ld=function(t,r){if(typeof r!="function")return t;Cg.has(t)||Cg.set(t,new WeakMap);var n=Cg.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},JV=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Ru(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:_0(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:au(),realScaleType:"point"}:i==="category"?{scale:Ru(),realScaleType:"band"}:{scale:_0(),realScaleType:"linear"};if(ks(a)){var l="scale".concat(Xh(a));return{scale:(dk[l]||au)(),realScaleType:dk[l]?l:"point"}}return Xe(a)?{scale:a}:{scale:au(),realScaleType:"point"}},bk=1e-4,eH=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-bk,o=Math.max(a[0],a[1])+bk,s=t(r[0]),l=t(r[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([r[0],r[n-1]])}},tH=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},rH=function(t,r){if(!r||r.length!==2||!fe(r[0])||!fe(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!fe(t[0])||t[0]<n)&&(i[0]=n),(!fe(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},nH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var l=nc(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},aH=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=nc(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},iH={sign:nH,expand:b7,none:wl,silhouette:w7,wiggle:k7,positive:aH},oH=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=iH[n],o=x7().keys(a).value(function(s,l){return+Ur(s,l,0)}).order(Km).offset(i);return o(t)},sH=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(d,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?xr(xr({},h.type.defaultProps),h.props):h.props,y=m.stackId,w=m.hide;if(w)return d;var x=m[n],g=d[x]||{hasStack:!1,stackGroups:{}};if(zr(y)){var v=g.stackGroups[y]||{numericAxisId:n,cateAxisId:a,items:[]};v.items.push(h),g.hasStack=!0,g.stackGroups[y]=v}else g.stackGroups[Ts("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return xr(xr({},d),{},dl({},x,g))},l),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,w){var x=p.stackGroups[w];return xr(xr({},y),{},dl({},w,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:oH(t,x.items,i)}))},m)}return xr(xr({},d),{},dl({},h,p))},f)},lH=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=xV(u,i,s);return t.domain([sp(f),uo(f)]),{niceTicks:f}}if(i&&a==="number"){var d=t.domain(),h=bV(d,i,s);return{niceTicks:h}}return null};function _l(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ze(a[t.dataKey])){var s=s0(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Ur(a,ze(o)?t.dataKey:o);return ze(l)?null:t.scale(l)}var wk=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=Ur(o,r.dataKey,r.domain[s]);return ze(l)?null:r.scale(l)-i/2+a},cH=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},uH=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?xr(xr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(zr(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},fH=function(t){return t.reduce(function(r,n){return[sp(n.concat([r[0]]).filter(fe)),uo(n.concat([r[1]]).filter(fe))]},[1/0,-1/0])},YP=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(u,f){var d=fH(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},kk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Sk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jy=function(t,r,n){if(Xe(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(fe(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(kk.test(t[0])){var i=+kk.exec(t[0])[1];a[0]=r[0]-i}else Xe(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(fe(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(Sk.test(t[1])){var o=+Sk.exec(t[1])[1];a[1]=r[1]+o}else Xe(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},R0=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=Lx(r,function(d){return d.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var u=i[s],f=i[s-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},jk=function(t,r,n){return!t||!t.length||js(t,Pa(n,"type.defaultProps.domain"))?r:t},qP=function(t,r){var n=t.type.defaultProps?xr(xr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,f=n.hide;return xr(xr({},Ve(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:f1(t),value:Ur(r,a),type:l,payload:r,chartType:u,hide:f})};function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function Pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ck(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(r),!0).forEach(function(n){dH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dH(e,t,r){return t=hH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hH(e){var t=pH(e,"string");return Hu(t)=="symbol"?t:t+""}function pH(e,t){if(Hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L0=Math.PI/180,gH=function(t){return t*180/Math.PI},sn=function(t,r,n,a){return{x:t+Math.cos(-L0*a)*n,y:r+Math.sin(-L0*a)*n}},mH=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},yH=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=mH({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(n-i)/s,u=Math.acos(l);return a>o&&(u=2*Math.PI-u),{radius:s,angle:gH(u),angleInRadian:u}},vH=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},xH=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},Ok=function(t,r){var n=t.x,a=t.y,i=yH({x:n,y:a},r),o=i.radius,s=i.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var f=vH(r),d=f.startAngle,h=f.endAngle,p=s,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?Ck(Ck({},r),{},{radius:o,angle:xH(p,r)}):null};function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}var bH=["offset"];function wH(e){return PH(e)||jH(e)||SH(e)||kH()}function kH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SH(e,t){if(e){if(typeof e=="string")return Py(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Py(e,t)}}function jH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PH(e){if(Array.isArray(e))return Py(e)}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CH(e,t){if(e==null)return{};var r=OH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Nk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nk(Object(r),!0).forEach(function(n){NH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NH(e,t,r){return t=MH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MH(e){var t=_H(e,"string");return Xu(t)=="symbol"?t:t+""}function _H(e,t){if(Xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ku(){return Ku=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ku.apply(this,arguments)}var AH=function(t){var r=t.value,n=t.formatter,a=ze(t.children)?r:t.children;return Xe(n)?n(a):a},TH=function(t,r){var n=Wa(r-t),a=Math.min(Math.abs(r-t),360);return n*a},EH=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,u=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,y=l.clockWise,w=(d+h)/2,x=TH(p,m),g=x>=0?1:-1,v,S;a==="insideStart"?(v=p+g*o,S=y):a==="insideEnd"?(v=m-g*o,S=!y):a==="end"&&(v=m+g*o,S=y),S=x<=0?S:!S;var b=sn(u,f,w,v),k=sn(u,f,w,v+(S?1:-1)*359),P="M".concat(b.x,",").concat(b.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),C=ze(t.id)?Ts("recharts-radial-line-"):t.id;return F.createElement("text",Ku({},n,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",s)}),F.createElement("defs",null,F.createElement("path",{id:C,d:P})),F.createElement("textPath",{xlinkHref:"#".concat(C)},r))},$H=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,l=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,h=(f+d)/2;if(a==="outside"){var p=sn(o,s,u+n,h),m=p.x,y=p.y;return{x:m,y,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var w=(l+u)/2,x=sn(o,s,w,h),g=x.x,v=x.y;return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},DH=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,l=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,p=d>0?"end":"start",m=d>0?"start":"end",y=u>=0?1:-1,w=y*a,x=y>0?"end":"start",g=y>0?"start":"end";if(i==="top"){var v={x:s+u/2,y:l-d*a,textAnchor:"middle",verticalAnchor:p};return Lr(Lr({},v),n?{height:Math.max(l-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:s+u/2,y:l+f+h,textAnchor:"middle",verticalAnchor:m};return Lr(Lr({},S),n?{height:Math.max(n.y+n.height-(l+f),0),width:u}:{})}if(i==="left"){var b={x:s-w,y:l+f/2,textAnchor:x,verticalAnchor:"middle"};return Lr(Lr({},b),n?{width:Math.max(b.x-n.x,0),height:f}:{})}if(i==="right"){var k={x:s+u+w,y:l+f/2,textAnchor:g,verticalAnchor:"middle"};return Lr(Lr({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:f}:{})}var P=n?{width:u,height:f}:{};return i==="insideLeft"?Lr({x:s+w,y:l+f/2,textAnchor:g,verticalAnchor:"middle"},P):i==="insideRight"?Lr({x:s+u-w,y:l+f/2,textAnchor:x,verticalAnchor:"middle"},P):i==="insideTop"?Lr({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:m},P):i==="insideBottom"?Lr({x:s+u/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},P):i==="insideTopLeft"?Lr({x:s+w,y:l+h,textAnchor:g,verticalAnchor:m},P):i==="insideTopRight"?Lr({x:s+u-w,y:l+h,textAnchor:x,verticalAnchor:m},P):i==="insideBottomLeft"?Lr({x:s+w,y:l+f-h,textAnchor:g,verticalAnchor:p},P):i==="insideBottomRight"?Lr({x:s+u-w,y:l+f-h,textAnchor:x,verticalAnchor:p},P):Jl(i)&&(fe(i.x)||rs(i.x))&&(fe(i.y)||rs(i.y))?Lr({x:s+Ss(i.x,u),y:l+Ss(i.y,f),textAnchor:"end",verticalAnchor:"end"},P):Lr({x:s+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},P)},IH=function(t){return"cx"in t&&fe(t.cx)};function on(e){var t=e.offset,r=t===void 0?5:t,n=CH(e,bH),a=Lr({offset:r},n),i=a.viewBox,o=a.position,s=a.value,l=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!i||ze(s)&&ze(l)&&!j.isValidElement(u)&&!Xe(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var p;if(Xe(u)){if(p=j.createElement(u,a),j.isValidElement(p))return p}else p=AH(a);var m=IH(i),y=Ve(a,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return EH(a,p,y);var w=m?$H(a):DH(a);return F.createElement(k0,Ku({className:ot("recharts-label",d)},y,w,{breakAll:h}),p)}on.displayName="Label";var ZP=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,m=t.left,y=t.width,w=t.height,x=t.clockWise,g=t.labelViewBox;if(g)return g;if(fe(y)&&fe(w)){if(fe(d)&&fe(h))return{x:d,y:h,width:y,height:w};if(fe(p)&&fe(m))return{x:p,y:m,width:y,height:w}}return fe(d)&&fe(h)?{x:d,y:h,width:0,height:0}:fe(r)&&fe(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||l||s||0,clockWise:x}:t.viewBox?t.viewBox:{}},RH=function(t,r){return t?t===!0?F.createElement(on,{key:"label-implicit",viewBox:r}):zr(t)?F.createElement(on,{key:"label-implicit",viewBox:r,value:t}):j.isValidElement(t)?t.type===on?j.cloneElement(t,{key:"label-implicit",viewBox:r}):F.createElement(on,{key:"label-implicit",content:t,viewBox:r}):Xe(t)?F.createElement(on,{key:"label-implicit",content:t,viewBox:r}):Jl(t)?F.createElement(on,Ku({viewBox:r},t,{key:"label-implicit"})):null:null},LH=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=ZP(t),o=Qn(a,on).map(function(l,u){return j.cloneElement(l,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=RH(t.label,r||i);return[s].concat(wH(o))};on.parseViewBox=ZP;on.renderCallByParent=LH;function BH(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var FH=BH;const zH=Wt(FH);function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}var UH=["valueAccessor"],GH=["data","dataKey","clockWise","id","textBreakAll"];function WH(e){return KH(e)||XH(e)||HH(e)||VH()}function VH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HH(e,t){if(e){if(typeof e=="string")return Cy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(e,t)}}function XH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KH(e){if(Array.isArray(e))return Cy(e)}function Cy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}function Mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mk(Object(r),!0).forEach(function(n){YH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YH(e,t,r){return t=qH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qH(e){var t=ZH(e,"string");return Yu(t)=="symbol"?t:t+""}function ZH(e,t){if(Yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ak(e,t){if(e==null)return{};var r=QH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var JH=function(t){return Array.isArray(t.value)?zH(t.value):t.value};function ci(e){var t=e.valueAccessor,r=t===void 0?JH:t,n=Ak(e,UH),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=Ak(n,GH);return!a||!a.length?null:F.createElement(wt,{className:"recharts-label-list"},a.map(function(f,d){var h=ze(i)?r(f,d):Ur(f&&f.payload,i),p=ze(s)?{}:{id:"".concat(s,"-").concat(d)};return F.createElement(on,B0({},Ve(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:on.parseViewBox(ze(o)?f:_k(_k({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ci.displayName="LabelList";function eX(e,t){return e?e===!0?F.createElement(ci,{key:"labelList-implicit",data:t}):F.isValidElement(e)||Xe(e)?F.createElement(ci,{key:"labelList-implicit",data:t,content:e}):Jl(e)?F.createElement(ci,B0({data:t},e,{key:"labelList-implicit"})):null:null}function tX(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Qn(n,ci).map(function(o,s){return j.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=eX(e.label,t);return[i].concat(WH(a))}ci.renderCallByParent=tX;function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(this,arguments)}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ek(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){rX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rX(e,t,r){return t=nX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nX(e){var t=aX(e,"string");return qu(t)=="symbol"?t:t+""}function aX(e,t){if(qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iX=function(t,r){var n=Wa(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},cd=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,f=l*(s?1:-1)+a,d=Math.asin(l/f)/L0,h=u?i:i+o*d,p=sn(r,n,f,h),m=sn(r,n,a,h),y=u?i-o*d:i,w=sn(r,n,f*Math.cos(d*L0),y);return{center:p,circleTangency:m,lineTangency:w,theta:d}},QP=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=iX(o,s),u=o+l,f=sn(r,n,i,o),d=sn(r,n,i,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=sn(r,n,a,o),m=sn(r,n,a,u);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},oX=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Wa(f-u),h=cd({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,y=h.theta,w=cd({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:l}),x=w.circleTangency,g=w.lineTangency,v=w.theta,S=l?Math.abs(u-f):Math.abs(u-f)-y-v;if(S<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):QP({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f});var b="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var k=cd({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),P=k.circleTangency,C=k.lineTangency,N=k.theta,O=cd({cx:r,cy:n,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=O.circleTangency,M=O.lineTangency,_=O.theta,T=l?Math.abs(u-f):Math.abs(u-f)-N-_;if(T<0&&o===0)return"".concat(b,"L").concat(r,",").concat(n,"Z");b+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else b+="L".concat(r,",").concat(n,"Z");return b},sX={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JP=function(t){var r=Ek(Ek({},sX),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(o<i||f===d)return null;var p=ot("recharts-sector",h),m=o-i,y=Ss(s,m,0,!0),w;return y>0&&Math.abs(f-d)<360?w=oX({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}):w=QP({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),F.createElement("path",Oy({},Ve(r,!0),{className:p,d:w,role:"img"}))};function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(this,arguments)}function $k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(r),!0).forEach(function(n){lX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lX(e,t,r){return t=cX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cX(e){var t=uX(e,"string");return Zu(t)=="symbol"?t:t+""}function uX(e,t){if(Zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ik={curveBasisClosed:l7,curveBasisOpen:c7,curveBasis:s7,curveBumpX:XE,curveBumpY:KE,curveLinearClosed:u7,curveLinear:Yh,curveMonotoneX:f7,curveMonotoneY:d7,curveNatural:h7,curveStep:p7,curveStepAfter:m7,curveStepBefore:g7},ud=function(t){return t.x===+t.x&&t.y===+t.y},Rc=function(t){return t.x},Lc=function(t){return t.y},fX=function(t,r){if(Xe(t))return t;var n="curve".concat(Xh(t));return(n==="curveMonotone"||n==="curveBump")&&r?Ik["".concat(n).concat(r==="vertical"?"Y":"X")]:Ik[n]||Yh},dX=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,f=fX(n,s),d=u?i.filter(function(y){return ud(y)}):i,h;if(Array.isArray(o)){var p=u?o.filter(function(y){return ud(y)}):o,m=d.map(function(y,w){return Dk(Dk({},y),{},{base:p[w]})});return s==="vertical"?h=ed().y(Lc).x1(Rc).x0(function(y){return y.base.x}):h=ed().x(Rc).y1(Lc).y0(function(y){return y.base.y}),h.defined(ud).curve(f),h(m)}return s==="vertical"&&fe(o)?h=ed().y(Lc).x1(Rc).x0(o):fe(o)?h=ed().x(Rc).y1(Lc).y0(o):h=tj().x(Rc).y(Lc),h.defined(ud).curve(f),h(d)},fs=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?dX(t):a;return j.createElement("path",Ny({},Ve(t,!1),l0(t),{className:ot("recharts-curve",r),d:o,ref:i}))},eC={exports:{}},hX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",pX=hX,gX=pX;function tC(){}function rC(){}rC.resetWarningCache=tC;var mX=function(){function e(n,a,i,o,s,l){if(l!==gX){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rC,resetWarningCache:tC};return r.PropTypes=r,r};eC.exports=mX();var yX=eC.exports;const Ct=Wt(yX),{getOwnPropertyNames:vX,getOwnPropertySymbols:xX}=Object,{hasOwnProperty:bX}=Object.prototype;function Og(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function fd(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);const l=e(r,n,a);return i.delete(r),i.delete(n),l}}function wX(e){return e!=null?e[Symbol.toStringTag]:void 0}function Rk(e){return vX(e).concat(xX(e))}const kX=Object.hasOwn||((e,t)=>bX.call(e,t));function Ds(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const SX="__v",jX="__o",PX="_owner",{getOwnPropertyDescriptor:Lk,keys:Bk}=Object;function CX(e,t){return e.byteLength===t.byteLength&&F0(new Uint8Array(e),new Uint8Array(t))}function OX(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function NX(e,t){return e.byteLength===t.byteLength&&F0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function MX(e,t){return Ds(e.getTime(),t.getTime())}function _X(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function AX(e,t){return e===t}function Fk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,s,l=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(s=u.next())&&!s.done;){if(a[d]){d++;continue}const h=o.value,p=s.value;if(r.equals(h[0],p[0],l,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){f=a[d]=!0;break}d++}if(!f)return!1;l++}return!0}const TX=Ds;function EX(e,t,r){const n=Bk(e);let a=n.length;if(Bk(t).length!==a)return!1;for(;a-- >0;)if(!nC(e,t,r,n[a]))return!1;return!0}function Bc(e,t,r){const n=Rk(e);let a=n.length;if(Rk(t).length!==a)return!1;let i,o,s;for(;a-- >0;)if(i=n[a],!nC(e,t,r,i)||(o=Lk(e,i),s=Lk(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function $X(e,t){return Ds(e.valueOf(),t.valueOf())}function DX(e,t){return e.source===t.source&&e.flags===t.flags}function zk(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,s;for(;(o=i.next())&&!o.done;){const l=t.values();let u=!1,f=0;for(;(s=l.next())&&!s.done;){if(!a[f]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function F0(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function IX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function nC(e,t,r,n){return(n===PX||n===jX||n===SX)&&(e.$$typeof||t.$$typeof)?!0:kX(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const RX="[object ArrayBuffer]",LX="[object Arguments]",BX="[object Boolean]",FX="[object DataView]",zX="[object Date]",UX="[object Error]",GX="[object Map]",WX="[object Number]",VX="[object Object]",HX="[object RegExp]",XX="[object Set]",KX="[object String]",YX={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},qX="[object URL]",ZX=Object.prototype.toString;function QX({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:m}){return function(w,x,g){if(w===x)return!0;if(w==null||x==null)return!1;const v=typeof w;if(v!==typeof x)return!1;if(v!=="object")return v==="number"?s(w,x,g):v==="function"?i(w,x,g):!1;const S=w.constructor;if(S!==x.constructor)return!1;if(S===Object)return l(w,x,g);if(Array.isArray(w))return t(w,x,g);if(S===Date)return n(w,x,g);if(S===RegExp)return f(w,x,g);if(S===Map)return o(w,x,g);if(S===Set)return d(w,x,g);const b=ZX.call(w);if(b===zX)return n(w,x,g);if(b===HX)return f(w,x,g);if(b===GX)return o(w,x,g);if(b===XX)return d(w,x,g);if(b===VX)return typeof w.then!="function"&&typeof x.then!="function"&&l(w,x,g);if(b===qX)return p(w,x,g);if(b===UX)return a(w,x,g);if(b===LX)return l(w,x,g);if(YX[b])return h(w,x,g);if(b===RX)return e(w,x,g);if(b===FX)return r(w,x,g);if(b===BX||b===WX||b===KX)return u(w,x,g);if(m){let k=m[b];if(!k){const P=wX(w);P&&(k=m[P])}if(k)return k(w,x,g)}return!1}}function JX({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:CX,areArraysEqual:r?Bc:OX,areDataViewsEqual:NX,areDatesEqual:MX,areErrorsEqual:_X,areFunctionsEqual:AX,areMapsEqual:r?Og(Fk,Bc):Fk,areNumbersEqual:TX,areObjectsEqual:r?Bc:EX,arePrimitiveWrappersEqual:$X,areRegExpsEqual:DX,areSetsEqual:r?Og(zk,Bc):zk,areTypedArraysEqual:r?Og(F0,Bc):F0,areUrlsEqual:IX,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=fd(n.areArraysEqual),i=fd(n.areMapsEqual),o=fd(n.areObjectsEqual),s=fd(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:s})}return n}function eK(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function tK({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(s,l){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(s,l,{cache:u,equals:n,meta:f,strict:a})};if(e)return function(s,l){return t(s,l,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(s,l){return t(s,l,i)}}const rK=Ro();Ro({strict:!0});Ro({circular:!0});Ro({circular:!0,strict:!0});Ro({createInternalComparator:()=>Ds});Ro({strict:!0,createInternalComparator:()=>Ds});Ro({circular:!0,createInternalComparator:()=>Ds});Ro({circular:!0,createInternalComparator:()=>Ds,strict:!0});function Ro(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=JX(e),o=QX(i),s=r?r(o):eK(o);return tK({circular:t,comparator:o,createState:n,equals:s,strict:a})}function nK(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Uk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):nK(a)};requestAnimationFrame(n)}function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function aK(e){return lK(e)||sK(e)||oK(e)||iK()}function iK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oK(e,t){if(e){if(typeof e=="string")return Gk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gk(e,t)}}function Gk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lK(e){if(Array.isArray(e))return e}function cK(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=aK(o),l=s[0],u=s.slice(1);if(typeof l=="number"){Uk(a.bind(null,u),l);return}a(l),Uk(a.bind(null,u));return}My(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){aC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aC(e,t,r){return t=uK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uK(e){var t=fK(e,"string");return Qu(t)==="symbol"?t:String(t)}function fK(e,t){if(Qu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dK=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},hK=function(t){return t},pK=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ou=function(t,r){return Object.keys(r).reduce(function(n,a){return Vk(Vk({},n),{},aC({},a,t(a,r[a])))},{})},Hk=function(t,r,n){return t.map(function(a){return"".concat(pK(a)," ").concat(r,"ms ").concat(n)}).join(",")};function gK(e,t){return vK(e)||yK(e,t)||iC(e,t)||mK()}function mK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function vK(e){if(Array.isArray(e))return e}function xK(e){return kK(e)||wK(e)||iC(e)||bK()}function bK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iC(e,t){if(e){if(typeof e=="string")return _y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _y(e,t)}}function wK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kK(e){if(Array.isArray(e))return _y(e)}function _y(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z0=1e-4,oC=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},sC=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},Xk=function(t,r){return function(n){var a=oC(t,r);return sC(a,n)}},SK=function(t,r){return function(n){var a=oC(t,r),i=[].concat(xK(a.map(function(o,s){return o*s}).slice(1)),[0]);return sC(i,n)}},Kk=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=gK(u,4);a=f[0],i=f[1],o=f[2],s=f[3]}}}var d=Xk(a,o),h=Xk(i,s),p=SK(a,o),m=function(x){return x>1?1:x<0?0:x},y=function(x){for(var g=x>1?1:x,v=g,S=0;S<8;++S){var b=d(v)-g,k=p(v);if(Math.abs(b-g)<z0||k<z0)return h(v);v=m(v-b/k)}return h(v)};return y.isStepper=!1,y},jK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(f,d,h){var p=-(f-d)*n,m=h*i,y=h+(p-m)*s/1e3,w=h*s/1e3+f;return Math.abs(w-d)<z0&&Math.abs(y)<z0?[d,0]:[w,y]};return l.isStepper=!0,l.dt=s,l},PK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Kk(a);case"spring":return jK();default:if(a.split("(")[0]==="cubic-bezier")return Kk(a)}return typeof a=="function"?a:null};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function Yk(e){return NK(e)||OK(e)||lC(e)||CK()}function CK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NK(e){if(Array.isArray(e))return Ty(e)}function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){Ay(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ay(e,t,r){return t=MK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MK(e){var t=_K(e,"string");return Ju(t)==="symbol"?t:String(t)}function _K(e,t){if(Ju(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ju(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AK(e,t){return $K(e)||EK(e,t)||lC(e,t)||TK()}function TK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lC(e,t){if(e){if(typeof e=="string")return Ty(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ty(e,t)}}function Ty(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function $K(e){if(Array.isArray(e))return e}var U0=function(t,r,n){return t+(r-t)*n},Ey=function(t){var r=t.from,n=t.to;return r!==n},DK=function e(t,r,n){var a=ou(function(i,o){if(Ey(o)){var s=t(o.from,o.to,o.velocity),l=AK(s,2),u=l[0],f=l[1];return nn(nn({},o),{},{from:u,velocity:f})}return o},r);return n<1?ou(function(i,o){return Ey(o)?nn(nn({},o),{},{velocity:U0(o.velocity,a[i].velocity,n),from:U0(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const IK=function(e,t,r,n,a){var i=dK(e,t),o=i.reduce(function(w,x){return nn(nn({},w),{},Ay({},x,[e[x],t[x]]))},{}),s=i.reduce(function(w,x){return nn(nn({},w),{},Ay({},x,{from:e[x],velocity:0,to:t[x]}))},{}),l=-1,u,f,d=function(){return null},h=function(){return ou(function(x,g){return g.from},s)},p=function(){return!Object.values(s).filter(Ey).length},m=function(x){u||(u=x);var g=x-u,v=g/r.dt;s=DK(r,s,v),a(nn(nn(nn({},e),t),h())),u=x,p()||(l=requestAnimationFrame(d))},y=function(x){f||(f=x);var g=(x-f)/n,v=ou(function(b,k){return U0.apply(void 0,Yk(k).concat([r(g)]))},o);if(a(nn(nn(nn({},e),t),v)),g<1)l=requestAnimationFrame(d);else{var S=ou(function(b,k){return U0.apply(void 0,Yk(k).concat([r(1)]))},o);a(nn(nn(nn({},e),t),S))}};return d=r.isStepper?m:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}var RK=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function LK(e,t){if(e==null)return{};var r=BK(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BK(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Ng(e){return GK(e)||UK(e)||zK(e)||FK()}function FK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zK(e,t){if(e){if(typeof e=="string")return $y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $y(e,t)}}function UK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GK(e){if(Array.isArray(e))return $y(e)}function $y(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zk(Object(r),!0).forEach(function(n){Hc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hc(e,t,r){return t=cC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cC(n.key),n)}}function HK(e,t,r){return t&&VK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cC(e){var t=XK(e,"string");return Al(t)==="symbol"?t:String(t)}function XK(e,t){if(Al(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Al(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dy(e,t)}function Dy(e,t){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Dy(e,t)}function YK(e){var t=qK();return function(){var n=G0(e),a;if(t){var i=G0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Iy(this,a)}}function Iy(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ry(e)}function Ry(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G0(e){return G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G0(e)}var Ka=function(e){KK(r,e);var t=YK(r);function r(n,a){var i;WK(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,l=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Ry(i)),i.changeStyle=i.changeStyle.bind(Ry(i)),!s||p<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:f}),Iy(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof h=="function")return i.state={style:u},Iy(i);i.state={style:l?Hc({},l,u):u}}else i.state={style:{}};return i}return HK(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,h=this.state.style;if(s){if(!o){var p={style:l?Hc({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(rK(a.to,f)&&a.canBegin&&a.isActive)){var m=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||u?d:a.to;if(this.state&&h){var w={style:l?Hc({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(w)}this.runAnimation(Ia(Ia({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,p=IK(o,s,PK(u),l,this.changeStyle),m=function(){i.stopJSAnimation=p()};this.manager.start([h,f,m,l,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(y,w,x){if(x===0)return y;var g=w.duration,v=w.easing,S=v===void 0?"ease":v,b=w.style,k=w.properties,P=w.onAnimationEnd,C=x>0?o[x-1]:w,N=k||Object.keys(b);if(typeof S=="function"||S==="spring")return[].concat(Ng(y),[i.runJSAnimation.bind(i,{from:C.style,to:b,duration:g,easing:S}),g]);var O=Hk(N,g,S),E=Ia(Ia(Ia({},C.style),b),{},{transition:O});return[].concat(Ng(y),[E,g,P]).filter(hK)};return this.manager.start([l].concat(Ng(o.reduce(p,[f,Math.max(h,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=cK());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,p=a.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var y=s?Hc({},s,l):l,w=Hk(Object.keys(y),o,u);m.start([f,i,Ia(Ia({},y),{},{transition:w}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=LK(a,RK),u=j.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!s||u===0||o<=0)return i;var d=function(p){var m=p.props,y=m.style,w=y===void 0?{}:y,x=m.className,g=j.cloneElement(p,Ia(Ia({},l),{},{style:Ia(Ia({},w),f),className:x}));return g};return u===1?d(j.Children.only(i)):F.createElement("div",null,j.Children.map(i,function(h){return d(h)}))}}]),r}(j.PureComponent);Ka.displayName="Animate";Ka.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ka.propTypes={from:Ct.oneOfType([Ct.object,Ct.string]),to:Ct.oneOfType([Ct.object,Ct.string]),attributeName:Ct.string,duration:Ct.number,begin:Ct.number,easing:Ct.oneOfType([Ct.string,Ct.func]),steps:Ct.arrayOf(Ct.shape({duration:Ct.number.isRequired,style:Ct.object.isRequired,easing:Ct.oneOfType([Ct.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ct.func]),properties:Ct.arrayOf("string"),onAnimationEnd:Ct.func})),children:Ct.oneOfType([Ct.node,Ct.func]),isActive:Ct.bool,canBegin:Ct.bool,onAnimationEnd:Ct.func,shouldReAnimate:Ct.bool,onAnimationStart:Ct.func,onAnimationReStart:Ct.func};function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W0.apply(this,arguments)}function ZK(e,t){return tY(e)||eY(e,t)||JK(e,t)||QK()}function QK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JK(e,t){if(e){if(typeof e=="string")return Qk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qk(e,t)}}function Qk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function tY(e){if(Array.isArray(e))return e}function Jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jk(Object(r),!0).forEach(function(n){rY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rY(e,t,r){return t=nY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nY(e){var t=aY(e,"string");return ef(t)=="symbol"?t:t+""}function aY(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tS=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=i[h]>o?o:i[h];f="M".concat(t,",").concat(r+s*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+l*d[0],",").concat(r)),f+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*d[1])),f+="L ".concat(t+n,",").concat(r+a-s*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-l*d[2],",").concat(r+a)),f+="L ".concat(t+l*d[3],",").concat(r+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var m=Math.min(o,i);f="M ".concat(t,",").concat(r+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+l*m,",").concat(r,`
            L `).concat(t+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*m,`
            L `).concat(t+n,",").concat(r+a-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t+n-l*m,",").concat(r+a,`
            L `).concat(t+l*m,",").concat(r+a,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*m," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return f},iY=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(i,i+s),f=Math.max(i,i+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=f&&a>=d&&a<=h}return!1},oY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},d1=function(t){var r=eS(eS({},oY),t),n=j.useRef(),a=j.useState(-1),i=ZK(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch{}},[]);var l=r.x,u=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,m=r.animationEasing,y=r.animationDuration,w=r.animationBegin,x=r.isAnimationActive,g=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var v=ot("recharts-rectangle",p);return g?F.createElement(Ka,{canBegin:o>0,from:{width:f,height:d,x:l,y:u},to:{width:f,height:d,x:l,y:u},duration:y,animationEasing:m,isActive:g},function(S){var b=S.width,k=S.height,P=S.x,C=S.y;return F.createElement(Ka,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,isActive:x,easing:m},F.createElement("path",W0({},Ve(r,!0),{className:v,d:tS(P,C,b,k,h),ref:n})))}):F.createElement("path",W0({},Ve(r,!0),{className:v,d:tS(l,u,f,d,h)}))};function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ly.apply(this,arguments)}var up=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=ot("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",Ly({},Ve(t,!1),l0(t),{className:o,cx:r,cy:n,r:a})):null};function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}var sY=["x","y","top","left","width","height","className"];function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){cY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cY(e,t,r){return t=uY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=fY(e,"string");return tf(t)=="symbol"?t:t+""}function fY(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dY(e,t){if(e==null)return{};var r=hY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var pY=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},gY=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,u=l===void 0?0:l,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,m=t.className,y=dY(t,sY),w=lY({x:n,y:i,top:s,left:u,width:d,height:p},y);return!fe(n)||!fe(i)||!fe(d)||!fe(p)||!fe(s)||!fe(u)?null:F.createElement("path",By({},Ve(w,!0),{className:ot("recharts-cross",m),d:pY(n,i,d,p,s,u)}))},mY=Pj,yY=mY(Object.getPrototypeOf,Object),vY=yY,xY=Hi,bY=vY,wY=Xi,kY="[object Object]",SY=Function.prototype,jY=Object.prototype,uC=SY.toString,PY=jY.hasOwnProperty,CY=uC.call(Object);function OY(e){if(!wY(e)||xY(e)!=kY)return!1;var t=bY(e);if(t===null)return!0;var r=PY.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&uC.call(r)==CY}var NY=OY;const MY=Wt(NY);var _Y=Hi,AY=Xi,TY="[object Boolean]";function EY(e){return e===!0||e===!1||AY(e)&&_Y(e)==TY}var $Y=EY;const DY=Wt($Y);function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(this,arguments)}function IY(e,t){return FY(e)||BY(e,t)||LY(e,t)||RY()}function RY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LY(e,t){if(e){if(typeof e=="string")return nS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nS(e,t)}}function nS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function FY(e){if(Array.isArray(e))return e}function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(r),!0).forEach(function(n){zY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zY(e,t,r){return t=UY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UY(e){var t=GY(e,"string");return rf(t)=="symbol"?t:t+""}function GY(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oS=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},WY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VY=function(t){var r=iS(iS({},WY),t),n=j.useRef(),a=j.useState(-1),i=IY(a,2),o=i[0],s=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&s(v)}catch{}},[]);var l=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,y=r.animationDuration,w=r.animationBegin,x=r.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var g=ot("recharts-trapezoid",p);return x?F.createElement(Ka,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:u},duration:y,animationEasing:m,isActive:x},function(v){var S=v.upperWidth,b=v.lowerWidth,k=v.height,P=v.x,C=v.y;return F.createElement(Ka,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,easing:m},F.createElement("path",V0({},Ve(r,!0),{className:g,d:oS(P,C,S,b,k),ref:n})))}):F.createElement("g",null,F.createElement("path",V0({},Ve(r,!0),{className:g,d:oS(l,u,f,d,h)})))},HY=["option","shapeType","propTransformer","activeClassName","isActive"];function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function XY(e,t){if(e==null)return{};var r=KY(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function KY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sS(Object(r),!0).forEach(function(n){YY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YY(e,t,r){return t=qY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qY(e){var t=ZY(e,"string");return nf(t)=="symbol"?t:t+""}function ZY(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QY(e,t){return H0(H0({},t),e)}function JY(e,t){return e==="symbols"}function lS(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return F.createElement(d1,r);case"trapezoid":return F.createElement(VY,r);case"sector":return F.createElement(JP,r);case"symbols":if(JY(t))return F.createElement(Zh,r);break;default:return null}}function eq(e){return j.isValidElement(e)?e.props:e}function Fy(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?QY:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=XY(e,HY),u;if(j.isValidElement(t))u=j.cloneElement(t,H0(H0({},l),eq(t)));else if(Xe(t))u=t(l);else if(MY(t)&&!DY(t)){var f=a(t,l);u=F.createElement(lS,{shapeType:r,elementProps:f})}else{var d=l;u=F.createElement(lS,{shapeType:r,elementProps:d})}return s?F.createElement(wt,{className:o},u):u}function fp(e,t){return t!=null&&"trapezoids"in e.props}function dp(e,t){return t!=null&&"sectors"in e.props}function af(e,t){return t!=null&&"points"in e.props}function tq(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function rq(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function nq(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function aq(e,t){var r;return fp(e,t)?r=tq:dp(e,t)?r=rq:af(e,t)&&(r=nq),r}function iq(e,t){var r;return fp(e,t)?r="trapezoids":dp(e,t)?r="sectors":af(e,t)&&(r="points"),r}function oq(e,t){if(fp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(dp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return af(e,t)?t.payload:{}}function sq(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=iq(r,t),i=oq(r,t),o=n.filter(function(l,u){var f=js(i,l),d=r.props[a].filter(function(m){var y=aq(r,t);return y(m,t)}),h=r.props[a].indexOf(d[d.length-1]),p=u===h;return f&&p}),s=n.indexOf(o[o.length-1]);return s}var lq=Math.ceil,cq=Math.max;function uq(e,t,r,n){for(var a=-1,i=cq(lq((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var fq=uq,dq=Wj,cS=1/0,hq=17976931348623157e292;function pq(e){if(!e)return e===0?e:0;if(e=dq(e),e===cS||e===-cS){var t=e<0?-1:1;return t*hq}return e===e?e:0}var fC=pq,gq=fq,mq=ep,Mg=fC;function yq(e){return function(t,r,n){return n&&typeof n!="number"&&mq(t,r,n)&&(r=n=void 0),t=Mg(t),r===void 0?(r=t,t=0):r=Mg(r),n=n===void 0?t<r?1:-1:Mg(n),gq(t,r,n,e)}}var vq=yq,xq=vq,bq=xq(),wq=bq;const X0=Wt(wq);function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){dC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dC(e,t,r){return t=kq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kq(e){var t=Sq(e,"string");return of(t)=="symbol"?t:t+""}function Sq(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jq=["Webkit","Moz","O","ms"],Pq=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=jq.reduce(function(i,o){return fS(fS({},i),{},dC({},o+n,r))},{});return a[t]=r,a};function Tl(e){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0.apply(this,arguments)}function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(r),!0).forEach(function(n){aa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pC(n.key),n)}}function Oq(e,t,r){return t&&hS(e.prototype,t),r&&hS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nq(e,t,r){return t=Y0(t),Mq(e,hC()?Reflect.construct(t,r||[],Y0(e).constructor):t.apply(e,r))}function Mq(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _q(e)}function _q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hC=function(){return!!e})()}function Y0(e){return Y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y0(e)}function Aq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zy(e,t)}function zy(e,t){return zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zy(e,t)}function aa(e,t,r){return t=pC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pC(e){var t=Tq(e,"string");return Tl(t)=="symbol"?t:t+""}function Tq(e,t){if(Tl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eq=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=au().domain(X0(0,l)).range([i,i+o-s]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:f}},pS=function(t){return t.changedTouches&&!!t.changedTouches.length},El=function(e){function t(r){var n;return Cq(this,t),n=Nq(this,t,[r]),aa(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),aa(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),aa(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),aa(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),aa(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),aa(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),aa(n,"handleSlideDragStart",function(a){var i=pS(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Aq(t,e),Oq(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,f=u.length-1,d=Math.min(a,i),h=Math.max(a,i),p=t.getIndexInRange(o,d),m=t.getIndexInRange(o,h);return{startIndex:p-p%l,endIndex:m===f?f:m-m%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=Ur(i[n],s,n);return Xe(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,u=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,m=l.onChange,y=n.pageX-i;y>0?y=Math.min(y,u+f-d-s,u+f-d-o):y<0&&(y=Math.max(y,u-o,u-s));var w=this.getIndex({startX:o+y,endX:s+y});(w.startIndex!==h||w.endIndex!==p)&&m&&m(w),this.setState({startX:o+y,endX:s+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=pS(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,m=f.onChange,y=f.gap,w=f.data,x={startX:this.state.startX,endX:this.state.endX},g=n.pageX-i;g>0?g=Math.min(g,d+h-p-u):g<0&&(g=Math.max(g,d-u)),x[o]=u+g;var v=this.getIndex(x),S=v.startIndex,b=v.endIndex,k=function(){var C=w.length-1;return o==="startX"&&(s>l?S%y===0:b%y===0)||s<l&&b===C||o==="endX"&&(s>l?b%y===0:S%y===0)||s>l&&b===C};this.setState(aa(aa({},o,u+g),"brushMoveStartX",n.pageX),function(){m&&k()&&m(v)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,f=this.state[a],d=s.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=s.length)){var p=s[h];a==="startX"&&p>=u||a==="endX"&&p<=l||this.setState(aa({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return F.createElement("rect",{stroke:u,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.data,u=n.children,f=n.padding,d=j.Children.only(u);return d?F.cloneElement(d,{x:a,y:i,width:o,height:s,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,l=this.props,u=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,m=l.data,y=l.startIndex,w=l.endIndex,x=Math.max(n,this.props.x),g=_g(_g({},Ve(this.props,!1)),{},{x,y:u,width:f,height:d}),v=p||"Min value: ".concat((i=m[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=m[w])===null||o===void 0?void 0:o.name);return F.createElement(wt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),s.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,g))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,u=i.travellerWidth,f=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:o,width:d,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,m={pointerEvents:"none",fill:u};return F.createElement(wt,{className:"recharts-brush-texts"},F.createElement(k0,K0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:o+s/2},m),this.getTextOfTick(a)),F.createElement(k0,K0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:o+s/2},m),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,l=n.y,u=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,m=h.endX,y=h.isTextActive,w=h.isSlideMoving,x=h.isTravellerMoving,g=h.isTravellerFocused;if(!a||!a.length||!fe(s)||!fe(l)||!fe(u)||!fe(f)||u<=0||f<=0)return null;var v=ot("recharts-brush",i),S=F.Children.count(o)===1,b=Pq("userSelect","none");return F.createElement(wt,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(y||w||x||g||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(i+s/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),F.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return F.isValidElement(n)?i=F.cloneElement(n,a):Xe(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return _g({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?Eq({data:i,width:o,x:s,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>a?s=l:o=l}return a>=n[s]?s:o}}])}(j.PureComponent);aa(El,"displayName","Brush");aa(El,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $q=Rx;function Dq(e,t){var r;return $q(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Iq=Dq,Rq=yj,Lq=Eo,Bq=Iq,Fq=ta,zq=ep;function Uq(e,t,r){var n=Fq(e)?Rq:Bq;return r&&zq(e,t,r)&&(t=void 0),n(e,Lq(t))}var Gq=Uq;const Wq=Wt(Gq);var ui=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},gS=Bj;function Vq(e,t,r){t=="__proto__"&&gS?gS(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Hq=Vq,Xq=Hq,Kq=Rj,Yq=Eo;function qq(e,t){var r={};return t=Yq(t),Kq(e,function(n,a,i){Xq(r,a,t(n,a,i))}),r}var Zq=qq;const Qq=Wt(Zq);function Jq(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var eZ=Jq,tZ=Rx;function rZ(e,t){var r=!0;return tZ(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var nZ=rZ,aZ=eZ,iZ=nZ,oZ=Eo,sZ=ta,lZ=ep;function cZ(e,t,r){var n=sZ(e)?aZ:iZ;return r&&lZ(e,t,r)&&(t=void 0),n(e,oZ(t))}var uZ=cZ;const gC=Wt(uZ);var fZ=["x","y"];function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(this,arguments)}function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(n){dZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dZ(e,t,r){return t=hZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hZ(e){var t=pZ(e,"string");return sf(t)=="symbol"?t:t+""}function pZ(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gZ(e,t){if(e==null)return{};var r=mZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yZ(e,t){var r=e.x,n=e.y,a=gZ(e,fZ),i="".concat(r),o=parseInt(i,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Fc(Fc(Fc(Fc(Fc({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function yS(e){return F.createElement(Fy,Uy({shapeType:"rectangle",propTransformer:yZ,activeClassName:"recharts-active-bar"},e))}var vZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=fe(n)||TT(n);return i?t(n,a):(i||Cs(),r)}},xZ=["value","background"],mC;function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function bZ(e,t){if(e==null)return{};var r=wZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(this,arguments)}function vS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vS(Object(r),!0).forEach(function(n){fo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vC(n.key),n)}}function SZ(e,t,r){return t&&xS(e.prototype,t),r&&xS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jZ(e,t,r){return t=Z0(t),PZ(e,yC()?Reflect.construct(t,r||[],Z0(e).constructor):t.apply(e,r))}function PZ(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CZ(e)}function CZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yC=function(){return!!e})()}function Z0(e){return Z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z0(e)}function OZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gy(e,t)}function Gy(e,t){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gy(e,t)}function fo(e,t,r){return t=vC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vC(e){var t=NZ(e,"string");return $l(t)=="symbol"?t:t+""}function NZ(e,t){if($l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sf=function(e){function t(){var r;kZ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=jZ(this,t,[].concat(a)),fo(r,"state",{isAnimationFinished:!1}),fo(r,"id",Ts("recharts-bar-")),fo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),fo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return OZ(t,e),SZ(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,u=i.activeBar,f=Ve(this.props,!1);return n&&n.map(function(d,h){var p=h===l,m=p?u:o,y=_r(_r(_r({},f),d),{},{isActive:p,option:m,index:h,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return F.createElement(wt,q0({className:"recharts-bar-rectangle"},Mu(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),F.createElement(yS,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return F.createElement(Ka,{begin:l,duration:u,isActive:s,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,y=i.map(function(w,x){var g=h&&h[x];if(g){var v=Or(g.x,w.x),S=Or(g.y,w.y),b=Or(g.width,w.width),k=Or(g.height,w.height);return _r(_r({},w),{},{x:v(m),y:S(m),width:b(m),height:k(m)})}if(o==="horizontal"){var P=Or(0,w.height),C=P(m);return _r(_r({},w),{},{y:w.y+w.height-C,height:C})}var N=Or(0,w.width),O=N(m);return _r(_r({},w),{},{width:O})});return F.createElement(wt,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!js(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=Ve(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,h=bZ(u,xZ);if(!d)return null;var p=_r(_r(_r(_r(_r({},h),{},{fill:"#eee"},d),l),Mu(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return F.createElement(yS,q0({key:"background-bar-".concat(f),option:n.props.background,isActive:f===s},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Qn(f,uc);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(w,x){var g=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:g,errorVal:Ur(w,x)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return F.createElement(wt,m,d.map(function(y){return F.cloneElement(y,{key:"error-bar-".concat(a,"-").concat(y.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,f=n.top,d=n.width,h=n.height,p=n.isAnimationActive,m=n.background,y=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,x=ot("recharts-bar",o),g=s&&s.allowDataOverflow,v=l&&l.allowDataOverflow,S=g||v,b=ze(y)?this.id:y;return F.createElement(wt,{className:x},g||v?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(b)},F.createElement("rect",{x:g?u:u-d/2,y:v?f:f-h/2,width:g?d:d*2,height:v?h:h*2}))):null,F.createElement(wt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(b,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,b),(!p||w)&&ci.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);mC=Sf;fo(Sf,"displayName","Bar");fo(Sf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!$o.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});fo(Sf,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=tH(n,r);if(!p)return null;var m=t.layout,y=r.type.defaultProps,w=y!==void 0?_r(_r({},y),r.props):r.props,x=w.dataKey,g=w.children,v=w.minPointSize,S=m==="horizontal"?o:i,b=u?S.scale.domain():null,k=cH({numericAxis:S}),P=Qn(g,Fx),C=d.map(function(N,O){var E,M,_,T,$,I;u?E=rH(u[f+O],b):(E=Ur(N,x),Array.isArray(E)||(E=[k,E]));var A=vZ(v,mC.defaultProps.minPointSize)(E[1],O);if(m==="horizontal"){var R,L=[o.scale(E[0]),o.scale(E[1])],V=L[0],ee=L[1];M=wk({axis:i,ticks:s,bandSize:a,offset:p.offset,entry:N,index:O}),_=(R=ee??V)!==null&&R!==void 0?R:void 0,T=p.size;var G=V-ee;if($=Number.isNaN(G)?0:G,I={x:M,y:o.y,width:T,height:o.height},Math.abs(A)>0&&Math.abs($)<Math.abs(A)){var W=Wa($||A)*(Math.abs(A)-Math.abs($));_-=W,$+=W}}else{var ne=[i.scale(E[0]),i.scale(E[1])],Q=ne[0],B=ne[1];if(M=Q,_=wk({axis:o,ticks:l,bandSize:a,offset:p.offset,entry:N,index:O}),T=B-Q,$=p.size,I={x:i.x,y:_,width:i.width,height:$},Math.abs(A)>0&&Math.abs(T)<Math.abs(A)){var ie=Wa(T||A)*(Math.abs(A)-Math.abs(T));T+=ie}}return _r(_r(_r({},N),{},{x:M,y:_,width:T,height:$,value:u?E:E[1],payload:N,background:I},P&&P[O]&&P[O].props),{},{tooltipPayload:[qP(r,N)],tooltipPosition:{x:M+T/2,y:_+$/2}})});return _r({data:C,layout:m},h)});function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function MZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xC(n.key),n)}}function _Z(e,t,r){return t&&bS(e.prototype,t),r&&bS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(r),!0).forEach(function(n){hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hp(e,t,r){return t=xC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xC(e){var t=AZ(e,"string");return lf(t)=="symbol"?t:t+""}function AZ(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h1=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!oa(u,Sf);return f.reduce(function(p,m){var y=r[m],w=y.orientation,x=y.domain,g=y.padding,v=g===void 0?{}:g,S=y.mirror,b=y.reversed,k="".concat(w).concat(S?"Mirror":""),P,C,N,O,E;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var M=x[1]-x[0],_=1/0,T=y.categoricalDomain.sort(IT);if(T.forEach(function(ne,Q){Q>0&&(_=Math.min((ne||0)-(T[Q-1]||0),_))}),Number.isFinite(_)){var $=_/M,I=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(P=$*I/2),y.padding==="no-gap"){var A=Ss(t.barCategoryGap,$*I),R=$*I/2;P=R-A-(R-A)/I*A}}}a==="xAxis"?C=[n.left+(v.left||0)+(P||0),n.left+n.width-(v.right||0)-(P||0)]:a==="yAxis"?C=l==="horizontal"?[n.top+n.height-(v.bottom||0),n.top+(v.top||0)]:[n.top+(v.top||0)+(P||0),n.top+n.height-(v.bottom||0)-(P||0)]:C=y.range,b&&(C=[C[1],C[0]]);var L=JV(y,i,h),V=L.scale,ee=L.realScaleType;V.domain(x).range(C),eH(V);var G=lH(V,Ba(Ba({},y),{},{realScaleType:ee}));a==="xAxis"?(E=w==="top"&&!S||w==="bottom"&&S,N=n.left,O=d[k]-E*y.height):a==="yAxis"&&(E=w==="left"&&!S||w==="right"&&S,N=d[k]-E*y.width,O=n.top);var W=Ba(Ba(Ba({},y),G),{},{realScaleType:ee,x:N,y:O,scale:V,width:a==="xAxis"?n.width:y.width,height:a==="yAxis"?n.height:y.height});return W.bandSize=R0(W,G),!y.hide&&a==="xAxis"?d[k]+=(E?-1:1)*W.height:y.hide||(d[k]+=(E?-1:1)*W.width),Ba(Ba({},p),{},hp({},m,W))},{})},bC=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},TZ=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return bC({x:r,y:n},{x:a,y:i})},wC=function(){function e(t){MZ(this,e),this.scale=t}return _Z(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();hp(wC,"EPS",1e-4);var p1=function(t){var r=Object.keys(t).reduce(function(n,a){return Ba(Ba({},n),{},hp({},a,wC.create(t[a])))},{});return Ba(Ba({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return Qq(a,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return gC(a,function(i,o){return r[o].isInRange(i)})}})};function EZ(e){return(e%180+180)%180}var $Z=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=EZ(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},DZ=Eo,IZ=vf,RZ=Qh;function LZ(e){return function(t,r,n){var a=Object(t);if(!IZ(t)){var i=DZ(r);t=RZ(t),r=function(s){return i(a[s],s,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var BZ=LZ,FZ=fC;function zZ(e){var t=FZ(e),r=t%1;return t===t?r?t-r:t:0}var UZ=zZ,GZ=Aj,WZ=Eo,VZ=UZ,HZ=Math.max;function XZ(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:VZ(r);return a<0&&(a=HZ(n+a,0)),GZ(e,WZ(t),a)}var KZ=XZ,YZ=BZ,qZ=KZ,ZZ=YZ(qZ),QZ=ZZ;const JZ=Wt(QZ);var eQ=L8(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),g1=j.createContext(void 0),m1=j.createContext(void 0),kC=j.createContext(void 0),SC=j.createContext({}),jC=j.createContext(void 0),PC=j.createContext(0),CC=j.createContext(0),kS=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,l=t.width,u=t.height,f=eQ(i);return F.createElement(g1.Provider,{value:n},F.createElement(m1.Provider,{value:a},F.createElement(SC.Provider,{value:i},F.createElement(kC.Provider,{value:f},F.createElement(jC.Provider,{value:o},F.createElement(PC.Provider,{value:u},F.createElement(CC.Provider,{value:l},s)))))))},tQ=function(){return j.useContext(jC)},OC=function(t){var r=j.useContext(g1);r==null&&Cs();var n=r[t];return n==null&&Cs(),n},rQ=function(){var t=j.useContext(g1);return no(t)},nQ=function(){var t=j.useContext(m1),r=JZ(t,function(n){return gC(n.domain,Number.isFinite)});return r||no(t)},NC=function(t){var r=j.useContext(m1);r==null&&Cs();var n=r[t];return n==null&&Cs(),n},aQ=function(){var t=j.useContext(kC);return t},iQ=function(){return j.useContext(SC)},y1=function(){return j.useContext(CC)},v1=function(){return j.useContext(PC)};function Dl(e){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function oQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_C(n.key),n)}}function lQ(e,t,r){return t&&sQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cQ(e,t,r){return t=Q0(t),uQ(e,MC()?Reflect.construct(t,r||[],Q0(e).constructor):t.apply(e,r))}function uQ(e,t){if(t&&(Dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fQ(e)}function fQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MC=function(){return!!e})()}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q0(e)}function dQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}function Wy(e,t){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wy(e,t)}function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(n){x1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x1(e,t,r){return t=_C(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _C(e){var t=hQ(e,"string");return Dl(t)=="symbol"?t:t+""}function hQ(e,t){if(Dl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function pQ(e,t){return vQ(e)||yQ(e,t)||mQ(e,t)||gQ()}function gQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mQ(e,t){if(e){if(typeof e=="string")return PS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PS(e,t)}}function PS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function vQ(e){if(Array.isArray(e))return e}function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vy.apply(this,arguments)}var xQ=function(t,r){var n;return F.isValidElement(t)?n=F.cloneElement(t,r):Xe(t)?n=t(r):n=F.createElement("line",Vy({},r,{className:"recharts-reference-line-line"})),n},bQ=function(t,r,n,a,i,o,s,l,u){var f=i.x,d=i.y,h=i.width,p=i.height;if(n){var m=u.y,y=t.y.apply(m,{position:o});if(ui(u,"discard")&&!t.y.isInRange(y))return null;var w=[{x:f+h,y},{x:f,y}];return l==="left"?w.reverse():w}if(r){var x=u.x,g=t.x.apply(x,{position:o});if(ui(u,"discard")&&!t.x.isInRange(g))return null;var v=[{x:g,y:d+p},{x:g,y:d}];return s==="top"?v.reverse():v}if(a){var S=u.segment,b=S.map(function(k){return t.apply(k,{position:o})});return ui(u,"discard")&&Wq(b,function(k){return!t.isInRange(k)})?null:b}return null};function wQ(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,u=tQ(),f=OC(a),d=NC(i),h=aQ();if(!u||!h)return null;Di(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=p1({x:f.scale,y:d.scale}),m=zr(t),y=zr(r),w=n&&n.length===2,x=bQ(p,m,y,w,h,e.position,f.orientation,d.orientation,e);if(!x)return null;var g=pQ(x,2),v=g[0],S=v.x,b=v.y,k=g[1],P=k.x,C=k.y,N=ui(e,"hidden")?"url(#".concat(u,")"):void 0,O=jS(jS({clipPath:N},Ve(e,!0)),{},{x1:S,y1:b,x2:P,y2:C});return F.createElement(wt,{className:ot("recharts-reference-line",s)},xQ(o,O),on.renderCallByParent(e,TZ({x1:S,y1:b,x2:P,y2:C})))}var ho=function(e){function t(){return oQ(this,t),cQ(this,t,arguments)}return dQ(t,e),lQ(t,[{key:"render",value:function(){return F.createElement(wQ,this.props)}}])}(F.Component);x1(ho,"displayName","ReferenceLine");x1(ho,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(this,arguments)}function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function OS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(n){pp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TC(n.key),n)}}function jQ(e,t,r){return t&&SQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PQ(e,t,r){return t=J0(t),CQ(e,AC()?Reflect.construct(t,r||[],J0(e).constructor):t.apply(e,r))}function CQ(e,t){if(t&&(Il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OQ(e)}function OQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AC=function(){return!!e})()}function J0(e){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J0(e)}function NQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xy(e,t)}function Xy(e,t){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xy(e,t)}function pp(e,t,r){return t=TC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TC(e){var t=MQ(e,"string");return Il(t)=="symbol"?t:t+""}function MQ(e,t){if(Il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _Q=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=p1({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return ui(t,"discard")&&!o.isInRange(s)?null:s},jf=function(e){function t(){return kQ(this,t),PQ(this,t,arguments)}return NQ(t,e),jQ(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=zr(a),f=zr(i);if(Di(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=_Q(this.props);if(!d)return null;var h=d.x,p=d.y,m=this.props,y=m.shape,w=m.className,x=ui(this.props,"hidden")?"url(#".concat(l,")"):void 0,g=OS(OS({clipPath:x},Ve(this.props,!0)),{},{cx:h,cy:p});return F.createElement(wt,{className:ot("recharts-reference-dot",w)},t.renderDot(y,g),on.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(F.Component);pp(jf,"displayName","ReferenceDot");pp(jf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});pp(jf,"renderDot",function(e,t){var r;return F.isValidElement(e)?r=F.cloneElement(e,t):Xe(e)?r=e(t):r=F.createElement(up,Hy({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ky.apply(this,arguments)}function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function NS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(r),!0).forEach(function(n){gp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$C(n.key),n)}}function EQ(e,t,r){return t&&TQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Q(e,t,r){return t=eh(t),DQ(e,EC()?Reflect.construct(t,r||[],eh(e).constructor):t.apply(e,r))}function DQ(e,t){if(t&&(Rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IQ(e)}function IQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EC=function(){return!!e})()}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eh(e)}function RQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yy(e,t)}function Yy(e,t){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yy(e,t)}function gp(e,t,r){return t=$C(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $C(e){var t=LQ(e,"string");return Rl(t)=="symbol"?t:t+""}function LQ(e,t){if(Rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BQ=function(t,r,n,a,i){var o=i.x1,s=i.x2,l=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var h=p1({x:f.scale,y:d.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ui(i,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:bC(p,m)},Pf=function(e){function t(){return AQ(this,t),$Q(this,t,arguments)}return RQ(t,e),EQ(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,f=n.clipPathId;Di(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=zr(a),h=zr(i),p=zr(o),m=zr(s),y=this.props.shape;if(!d&&!h&&!p&&!m&&!y)return null;var w=BQ(d,h,p,m,this.props);if(!w&&!y)return null;var x=ui(this.props,"hidden")?"url(#".concat(f,")"):void 0;return F.createElement(wt,{className:ot("recharts-reference-area",l)},t.renderRect(y,MS(MS({clipPath:x},Ve(this.props,!0)),w)),on.renderCallByParent(this.props,w))}}])}(F.Component);gp(Pf,"displayName","ReferenceArea");gp(Pf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gp(Pf,"renderRect",function(e,t){var r;return F.isValidElement(e)?r=F.cloneElement(e,t):Xe(e)?r=e(t):r=F.createElement(d1,Ky({},t,{className:"recharts-reference-area-rect"})),r});function DC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function FQ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return $Z(n,r)}function zQ(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function th(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function UQ(e,t){return DC(e,t+1)}function GQ(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,l=0,u=1,f=o,d=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:DC(n,u)};var y=l,w,x=function(){return w===void 0&&(w=r(m,y)),w},g=m.coordinate,v=l===0||th(e,g,x,f,s);v||(l=0,f=o,u+=1),v&&(f=g+e*(x()/2+a),l+=u)},h;u<=i.length;)if(h=d(),h)return h.v;return[]}function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function _S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_S(Object(r),!0).forEach(function(n){WQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WQ(e,t,r){return t=VQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VQ(e){var t=HQ(e,"string");return cf(t)=="symbol"?t:t+""}function HQ(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XQ(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,l=t.end,u=function(h){var p=i[h],m,y=function(){return m===void 0&&(m=r(p,h)),m};if(h===o-1){var w=e*(p.coordinate+e*y()/2-l);i[h]=p=bn(bn({},p),{},{tickCoord:w>0?p.coordinate-w*e:p.coordinate})}else i[h]=p=bn(bn({},p),{},{tickCoord:p.coordinate});var x=th(e,p.tickCoord,y,s,l);x&&(l=p.tickCoord-e*(y()/2+a),i[h]=bn(bn({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function KQ(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,l=t.start,u=t.end;if(i){var f=n[s-1],d=r(f,s-1),h=e*(f.coordinate+e*d/2-u);o[s-1]=f=bn(bn({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var p=th(e,f.tickCoord,function(){return d},l,u);p&&(u=f.tickCoord-e*(d/2+a),o[s-1]=bn(bn({},f),{},{isShow:!0}))}for(var m=i?s-1:s,y=function(g){var v=o[g],S,b=function(){return S===void 0&&(S=r(v,g)),S};if(g===0){var k=e*(v.coordinate-e*b()/2-l);o[g]=v=bn(bn({},v),{},{tickCoord:k<0?v.coordinate-k*e:v.coordinate})}else o[g]=v=bn(bn({},v),{},{tickCoord:v.coordinate});var P=th(e,v.tickCoord,b,l,u);P&&(l=v.tickCoord+e*(b()/2+a),o[g]=bn(bn({},v),{},{isShow:!0}))},w=0;w<m;w++)y(w);return o}function b1(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(fe(l)||$o.isSsr)return UQ(a,typeof l=="number"&&fe(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",m=f&&p==="width"?nu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(v,S){var b=Xe(u)?u(v.value,S):v.value;return p==="width"?FQ(nu(b,{fontSize:t,letterSpacing:r}),m,d):nu(b,{fontSize:t,letterSpacing:r})[p]},w=a.length>=2?Wa(a[1].coordinate-a[0].coordinate):1,x=zQ(i,w,p);return l==="equidistantPreserveStart"?GQ(w,x,y,a,o):(l==="preserveStart"||l==="preserveStartEnd"?h=KQ(w,x,y,a,o,l==="preserveStartEnd"):h=XQ(w,x,y,a,o),h.filter(function(g){return g.isShow}))}var YQ=["viewBox"],qQ=["viewBox"],ZQ=["ticks"];function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tl.apply(this,arguments)}function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(r),!0).forEach(function(n){w1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ag(e,t){if(e==null)return{};var r=QQ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function JQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RC(n.key),n)}}function eJ(e,t,r){return t&&TS(e.prototype,t),r&&TS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tJ(e,t,r){return t=rh(t),rJ(e,IC()?Reflect.construct(t,r||[],rh(e).constructor):t.apply(e,r))}function rJ(e,t){if(t&&(Ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nJ(e)}function nJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IC=function(){return!!e})()}function rh(e){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rh(e)}function aJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qy(e,t)}function qy(e,t){return qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qy(e,t)}function w1(e,t,r){return t=RC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RC(e){var t=iJ(e,"string");return Ll(t)=="symbol"?t:t+""}function iJ(e,t){if(Ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fc=function(e){function t(r){var n;return JQ(this,t),n=tJ(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return aJ(t,e),eJ(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Ag(n,YQ),s=this.props,l=s.viewBox,u=Ag(s,qQ);return!ul(i,l)||!ul(o,u)||!ul(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,p,m,y,w,x,g,v=d?-1:1,S=n.tickSize||f,b=fe(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=m=n.coordinate,w=o+ +!d*l,y=w-v*S,g=y-v*h,x=b;break;case"left":y=w=n.coordinate,m=i+ +!d*s,p=m-v*S,x=p-v*h,g=b;break;case"right":y=w=n.coordinate,m=i+ +d*s,p=m+v*S,x=p+v*h,g=b;break;default:p=m=n.coordinate,w=o+ +d*l,y=w+v*S,g=y+v*h,x=b;break}return{line:{x1:p,y1:y,x2:m,y2:w},tick:{x,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,f=n.axisLine,d=Rr(Rr(Rr({},Ve(this.props,!1)),Ve(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=Rr(Rr({},d),{},{x1:a,y1:i+h*s,x2:a+o,y2:i+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);d=Rr(Rr({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+s})}return F.createElement("line",tl({},d,{className:ot("recharts-cartesian-axis-line",Pa(f,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,l=s.tickLine,u=s.stroke,f=s.tick,d=s.tickFormatter,h=s.unit,p=b1(Rr(Rr({},this.props),{},{ticks:n}),a,i),m=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),w=Ve(this.props,!1),x=Ve(f,!1),g=Rr(Rr({},w),{},{fill:"none"},Ve(l,!1)),v=p.map(function(S,b){var k=o.getTickLineCoord(S),P=k.line,C=k.tick,N=Rr(Rr(Rr(Rr({textAnchor:m,verticalAnchor:y},w),{},{stroke:"none",fill:u},x),C),{},{index:b,payload:S,visibleTicksCount:p.length,tickFormatter:d});return F.createElement(wt,tl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Mu(o.props,S,b)),l&&F.createElement("line",tl({},g,P,{className:ot("recharts-cartesian-axis-tick-line",Pa(l,"className"))})),f&&t.renderTickItem(f,N,"".concat(Xe(d)?d(S.value,b):S.value).concat(h||"")))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,p=Ag(d,ZQ),m=h;return Xe(l)&&(m=h&&h.length>0?l(this.props):l(p)),o<=0||s<=0||!m||!m.length?null:F.createElement(wt,{className:ot("recharts-cartesian-axis",u),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),on.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,s=ot(a.className,"recharts-cartesian-axis-tick-value");return F.isValidElement(n)?o=F.cloneElement(n,Rr(Rr({},a),{},{className:s})):Xe(n)?o=n(Rr(Rr({},a),{},{className:s})):o=F.createElement(k0,tl({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);w1(fc,"displayName","CartesianAxis");w1(fc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var oJ=["x1","y1","x2","y2","key"],sJ=["offset"];function Os(e){"@babel/helpers - typeof";return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(e)}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(n){lJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lJ(e,t,r){return t=cJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJ(e){var t=uJ(e,"string");return Os(t)=="symbol"?t:t+""}function uJ(e,t){if(Os(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Os(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function is(){return is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},is.apply(this,arguments)}function $S(e,t){if(e==null)return{};var r=fJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var dJ=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return F.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function LC(e,t){var r;if(F.isValidElement(e))r=F.cloneElement(e,t);else if(Xe(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=$S(t,oJ),u=Ve(l,!1);u.offset;var f=$S(u,sJ);r=F.createElement("line",is({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function hJ(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=kn(kn({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return LC(a,u)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function pJ(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=kn(kn({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return LC(a,u)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function gJ(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var f=s.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var m=!f[p+1],y=m?a+o-h:f[p+1]-h;if(y<=0)return null;var w=p%t.length;return F.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:y,width:i,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function mJ(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var m=!f[p+1],y=m?i+s-h:f[p+1]-h;if(y<=0)return null;var w=p%n.length;return F.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:y,height:l,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var yJ=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return KP(b1(kn(kn(kn({},fc.defaultProps),n),{},{ticks:Ai(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},vJ=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return KP(b1(kn(kn(kn({},fc.defaultProps),n),{},{ticks:Ai(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Fs={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fi(e){var t,r,n,a,i,o,s=y1(),l=v1(),u=iQ(),f=kn(kn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Fs.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Fs.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Fs.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Fs.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Fs.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Fs.verticalFill,x:fe(e.x)?e.x:u.left,y:fe(e.y)?e.y:u.top,width:fe(e.width)?e.width:u.width,height:fe(e.height)?e.height:u.height}),d=f.x,h=f.y,p=f.width,m=f.height,y=f.syncWithTicks,w=f.horizontalValues,x=f.verticalValues,g=rQ(),v=nQ();if(!fe(p)||p<=0||!fe(m)||m<=0||!fe(d)||d!==+d||!fe(h)||h!==+h)return null;var S=f.verticalCoordinatesGenerator||yJ,b=f.horizontalCoordinatesGenerator||vJ,k=f.horizontalPoints,P=f.verticalPoints;if((!k||!k.length)&&Xe(b)){var C=w&&w.length,N=b({yAxis:v?kn(kn({},v),{},{ticks:C?w:v.ticks}):void 0,width:s,height:l,offset:u},C?!0:y);Di(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Os(N),"]")),Array.isArray(N)&&(k=N)}if((!P||!P.length)&&Xe(S)){var O=x&&x.length,E=S({xAxis:g?kn(kn({},g),{},{ticks:O?x:g.ticks}):void 0,width:s,height:l,offset:u},O?!0:y);Di(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Os(E),"]")),Array.isArray(E)&&(P=E)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(dJ,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),F.createElement(hJ,is({},f,{offset:u,horizontalPoints:k,xAxis:g,yAxis:v})),F.createElement(pJ,is({},f,{offset:u,verticalPoints:P,xAxis:g,yAxis:v})),F.createElement(gJ,is({},f,{horizontalPoints:k})),F.createElement(mJ,is({},f,{verticalPoints:P})))}fi.displayName="CartesianGrid";var xJ=["type","layout","connectNulls","ref"],bJ=["key"];function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function DS(e,t){if(e==null)return{};var r=wJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},su.apply(this,arguments)}function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){Fa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zs(e){return PJ(e)||jJ(e)||SJ(e)||kJ()}function kJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SJ(e,t){if(e){if(typeof e=="string")return Zy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zy(e,t)}}function jJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PJ(e){if(Array.isArray(e))return Zy(e)}function Zy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FC(n.key),n)}}function OJ(e,t,r){return t&&RS(e.prototype,t),r&&RS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NJ(e,t,r){return t=nh(t),MJ(e,BC()?Reflect.construct(t,r||[],nh(e).constructor):t.apply(e,r))}function MJ(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _J(e)}function _J(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BC=function(){return!!e})()}function nh(e){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(e)}function AJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qy(e,t)}function Fa(e,t,r){return t=FC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FC(e){var t=TJ(e,"string");return Bl(t)=="symbol"?t:t+""}function TJ(e,t){if(Bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Er=function(e){function t(){var r;CJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=NJ(this,t,[].concat(a)),Fa(r,"state",{isAnimationFinished:!0,totalLength:0}),Fa(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),Fa(r,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(x,g){return x+g});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var f=Math.floor(o/u),d=o%u,h=s-o,p=[],m=0,y=0;m<l.length;y+=l[m],++m)if(y+l[m]>d){p=[].concat(zs(l.slice(0,m)),[d-y]);break}var w=p.length%2===0?[0,h]:[h];return[].concat(zs(t.repeat(l,f)),zs(p),w).map(function(x){return"".concat(x,"px")}).join(", ")}),Fa(r,"id",Ts("recharts-line-")),Fa(r,"pathRef",function(o){r.mainCurve=o}),Fa(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Fa(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return AJ(t,e),OJ(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,l=i.yAxis,u=i.layout,f=i.children,d=Qn(f,uc);if(!d)return null;var h=function(y,w){return{x:y.x,y:y.y,value:y.value,errorVal:Ur(y.payload,w)}},p={clipPath:n?"url(#clipPath-".concat(a,")"):null};return F.createElement(wt,p,d.map(function(m){return F.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,f=s.dataKey,d=Ve(this.props,!1),h=Ve(l,!0),p=u.map(function(y,w){var x=na(na(na({key:"dot-".concat(w),r:3},d),h),{},{index:w,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:u});return t.renderDotItem(l,x)}),m={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return F.createElement(wt,su({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,l=s.type,u=s.layout,f=s.connectNulls;s.ref;var d=DS(s,xJ),h=na(na(na({},Ve(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:l,layout:u,connectNulls:f});return F.createElement(fs,su({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,m=o.animateNewValues,y=o.width,w=o.height,x=this.state,g=x.prevPoints,v=x.totalLength;return F.createElement(Ka,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var b=S.t;if(g){var k=g.length/s.length,P=s.map(function(M,_){var T=Math.floor(_*k);if(g[T]){var $=g[T],I=Or($.x,M.x),A=Or($.y,M.y);return na(na({},M),{},{x:I(b),y:A(b)})}if(m){var R=Or(y*2,M.x),L=Or(w/2,M.y);return na(na({},M),{},{x:R(b),y:L(b)})}return na(na({},M),{},{x:M.x,y:M.y})});return i.renderCurveStatically(P,n,a)}var C=Or(0,v),N=C(b),O;if(l){var E="".concat(l).split(/[,\s]+/gim).map(function(M){return parseFloat(M)});O=i.getStrokeDasharray(N,v,E)}else O=i.generateSimpleStrokeDasharray(v,N);return i.renderCurveStatically(s,n,a,{strokeDasharray:O})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return s&&o&&o.length&&(!u&&f>0||!js(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.xAxis,f=a.yAxis,d=a.top,h=a.left,p=a.width,m=a.height,y=a.isAnimationActive,w=a.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,g=s.length===1,v=ot("recharts-line",l),S=u&&u.allowDataOverflow,b=f&&f.allowDataOverflow,k=S||b,P=ze(w)?this.id:w,C=(n=Ve(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=C.r,O=N===void 0?3:N,E=C.strokeWidth,M=E===void 0?2:E,_=U3(o)?o:{},T=_.clipDot,$=T===void 0?!0:T,I=O*2+M;return F.createElement(wt,{className:v},S||b?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(P)},F.createElement("rect",{x:S?h:h-p/2,y:b?d:d-m/2,width:S?p:p*2,height:b?m:m*2})),!$&&F.createElement("clipPath",{id:"clipPath-dots-".concat(P)},F.createElement("rect",{x:h-I/2,y:d-I/2,width:p+I,height:m+I}))):null,!g&&this.renderCurve(k,P),this.renderErrorBar(k,P),(g||o)&&this.renderDots(k,$,P),(!y||x)&&ci.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(zs(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(zs(o),zs(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(F.isValidElement(n))i=F.cloneElement(n,a);else if(Xe(n))i=n(a);else{var o=a.key,s=DS(a,bJ),l=ot("recharts-line-dot",typeof n!="boolean"?n.className:"");i=F.createElement(up,su({key:o},s,{className:l}))}return i}}])}(j.PureComponent);Fa(Er,"displayName","Line");Fa(Er,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!$o.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Fa(Er,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,f=t.layout,d=l.map(function(h,p){var m=Ur(h,o);return f==="horizontal"?{x:_l({axis:r,ticks:a,bandSize:s,entry:h,index:p}),y:ze(m)?null:n.scale(m),value:m,payload:h}:{x:ze(m)?null:r.scale(m),y:_l({axis:n,ticks:i,bandSize:s,entry:h,index:p}),value:m,payload:h}});return na({points:d,layout:f},u)});var EJ=["layout","type","stroke","connectNulls","isRange","ref"],$J=["key"],zC;function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function UC(e,t){if(e==null)return{};var r=DJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function os(){return os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},os.apply(this,arguments)}function LS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LS(Object(r),!0).forEach(function(n){ni(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WC(n.key),n)}}function RJ(e,t,r){return t&&BS(e.prototype,t),r&&BS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function LJ(e,t,r){return t=ah(t),BJ(e,GC()?Reflect.construct(t,r||[],ah(e).constructor):t.apply(e,r))}function BJ(e,t){if(t&&(Fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FJ(e)}function FJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GC=function(){return!!e})()}function ah(e){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ah(e)}function zJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jy(e,t)}function Jy(e,t){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jy(e,t)}function ni(e,t,r){return t=WC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WC(e){var t=UJ(e,"string");return Fl(t)=="symbol"?t:t+""}function UJ(e,t){if(Fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sa=function(e){function t(){var r;IJ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=LJ(this,t,[].concat(a)),ni(r,"state",{isAnimationFinished:!0}),ni(r,"id",Ts("recharts-area-")),ni(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Xe(o)&&o()}),ni(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Xe(o)&&o()}),r}return zJ(t,e),RJ(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,f=l.points,d=l.dataKey,h=Ve(this.props,!1),p=Ve(u,!0),m=f.map(function(w,x){var g=Zi(Zi(Zi({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:w.x,cy:w.y,dataKey:d,value:w.value,payload:w.payload,points:f});return t.renderDotItem(u,g)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return F.createElement(wt,os({className:"recharts-area-dots"},y),m)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,u=o[o.length-1].x,f=n*Math.abs(l-u),d=uo(o.map(function(h){return h.y||0}));return fe(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(uo(i.map(function(h){return h.y||0})),d)),fe(d)?F.createElement("rect",{x:l<u?l:l-f,y:0,width:f,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,u=o[o.length-1].y,f=n*Math.abs(l-u),d=uo(o.map(function(h){return h.x||0}));return fe(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(uo(i.map(function(h){return h.x||0})),d)),fe(d)?F.createElement("rect",{x:0,y:l<u?l:l-f,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,l=s.layout,u=s.type,f=s.stroke,d=s.connectNulls,h=s.isRange;s.ref;var p=UC(s,EJ);return F.createElement(wt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},F.createElement(fs,os({},Ve(p,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&F.createElement(fs,os({},Ve(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&h&&F.createElement(fs,os({},Ve(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,h=o.animationEasing,p=o.animationId,m=this.state,y=m.prevPoints,w=m.prevBaseLine;return F.createElement(Ka,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t;if(y){var v=y.length/s.length,S=s.map(function(C,N){var O=Math.floor(N*v);if(y[O]){var E=y[O],M=Or(E.x,C.x),_=Or(E.y,C.y);return Zi(Zi({},C),{},{x:M(g),y:_(g)})}return C}),b;if(fe(l)&&typeof l=="number"){var k=Or(w,l);b=k(g)}else if(ze(l)||nc(l)){var P=Or(w,0);b=P(g)}else b=l.map(function(C,N){var O=Math.floor(N*v);if(w[O]){var E=w[O],M=Or(E.x,C.x),_=Or(E.y,C.y);return Zi(Zi({},C),{},{x:M(g),y:_(g)})}return C});return i.renderAreaStatically(S,b,n,a)}return F.createElement(wt,null,F.createElement("defs",null,F.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(g))),F.createElement(wt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(s,l,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&o&&o.length&&(!f&&h>0||!js(f,o)||!js(d,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.top,f=a.left,d=a.xAxis,h=a.yAxis,p=a.width,m=a.height,y=a.isAnimationActive,w=a.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,g=s.length===1,v=ot("recharts-area",l),S=d&&d.allowDataOverflow,b=h&&h.allowDataOverflow,k=S||b,P=ze(w)?this.id:w,C=(n=Ve(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=C.r,O=N===void 0?3:N,E=C.strokeWidth,M=E===void 0?2:E,_=U3(o)?o:{},T=_.clipDot,$=T===void 0?!0:T,I=O*2+M;return F.createElement(wt,{className:v},S||b?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(P)},F.createElement("rect",{x:S?f:f-p/2,y:b?u:u-m/2,width:S?p:p*2,height:b?m:m*2})),!$&&F.createElement("clipPath",{id:"clipPath-dots-".concat(P)},F.createElement("rect",{x:f-I/2,y:u-I/2,width:p+I,height:m+I}))):null,g?null:this.renderArea(k,P),(o||g)&&this.renderDots(k,$,P),(!y||x)&&ci.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(j.PureComponent);zC=Sa;ni(Sa,"displayName","Area");ni(Sa,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!$o.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ni(Sa,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(fe(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});ni(Sa,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=t.layout,m=u&&u.length,y=zC.getBaseValue(t,r,n,a),w=p==="horizontal",x=!1,g=d.map(function(S,b){var k;m?k=u[f+b]:(k=Ur(S,l),Array.isArray(k)?x=!0:k=[y,k]);var P=k[1]==null||m&&Ur(S,l)==null;return w?{x:_l({axis:n,ticks:i,bandSize:s,entry:S,index:b}),y:P?null:a.scale(k[1]),value:k,payload:S}:{x:P?null:n.scale(k[1]),y:_l({axis:a,ticks:o,bandSize:s,entry:S,index:b}),value:k,payload:S}}),v;return m||x?v=g.map(function(S){var b=Array.isArray(S.value)?S.value[0]:null;return w?{x:S.x,y:b!=null&&S.y!=null?a.scale(b):null}:{x:b!=null?n.scale(b):null,y:S.y}}):v=w?a.scale(y):n.scale(y),Zi({points:g,baseLine:v,layout:p,isRange:x},h)});ni(Sa,"renderDotItem",function(e,t){var r;if(F.isValidElement(e))r=F.cloneElement(e,t);else if(Xe(e))r=e(t);else{var n=ot("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=UC(t,$J);r=F.createElement(up,os({},i,{key:a,className:n}))}return r});function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function GJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XC(n.key),n)}}function VJ(e,t,r){return t&&WJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HJ(e,t,r){return t=ih(t),XJ(e,VC()?Reflect.construct(t,r||[],ih(e).constructor):t.apply(e,r))}function XJ(e,t){if(t&&(zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KJ(e)}function KJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VC=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(e)}function YJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}function ev(e,t){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ev(e,t)}function HC(e,t,r){return t=XC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XC(e){var t=qJ(e,"string");return zl(t)=="symbol"?t:t+""}function qJ(e,t){if(zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mp=function(e){function t(){return GJ(this,t),HJ(this,t,arguments)}return YJ(t,e),VJ(t,[{key:"render",value:function(){return null}}])}(j.Component);HC(mp,"displayName","ZAxis");HC(mp,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ZJ=["option","isActive"];function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lu.apply(this,arguments)}function QJ(e,t){if(e==null)return{};var r=JJ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eee(e){var t=e.option,r=e.isActive,n=QJ(e,ZJ);return typeof t=="string"?j.createElement(Fy,lu({option:j.createElement(Zh,lu({type:t},n)),isActive:r,shapeType:"symbols"},n)):j.createElement(Fy,lu({option:t,isActive:r,shapeType:"symbols"},n))}function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(this,arguments)}function FS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FS(Object(r),!0).forEach(function(n){po(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YC(n.key),n)}}function ree(e,t,r){return t&&zS(e.prototype,t),r&&zS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nee(e,t,r){return t=oh(t),aee(e,KC()?Reflect.construct(t,r||[],oh(e).constructor):t.apply(e,r))}function aee(e,t){if(t&&(Ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iee(e)}function iee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KC=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(e)}function oee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}function tv(e,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tv(e,t)}function po(e,t,r){return t=YC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YC(e){var t=see(e,"string");return Ul(t)=="symbol"?t:t+""}function see(e,t){if(Ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var An=function(e){function t(){var r;tee(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=nee(this,t,[].concat(a)),po(r,"state",{isAnimationFinished:!1}),po(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),po(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),po(r,"id",Ts("recharts-scatter-")),r}return oee(t,e),ree(t,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.activeShape,l=i.activeIndex,u=Ve(this.props,!1);return n.map(function(f,d){var h=l===d,p=h?s:o,m=va(va({},u),f);return F.createElement(wt,cu({className:"recharts-scatter-symbol",key:"symbol-".concat(f==null?void 0:f.cx,"-").concat(f==null?void 0:f.cy,"-").concat(f==null?void 0:f.size,"-").concat(d)},Mu(a.props,f,d),{role:"img"}),F.createElement(eee,cu({option:p,isActive:h,key:"symbol-".concat(d)},m)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,f=a.animationId,d=this.state.prevPoints;return F.createElement(Ka,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=i.map(function(y,w){var x=d&&d[w];if(x){var g=Or(x.cx,y.cx),v=Or(x.cy,y.cy),S=Or(x.size,y.size);return va(va({},y),{},{cx:g(p),cy:v(p),size:S(p)})}var b=Or(0,y.size);return va(va({},y),{},{size:b(p)})});return F.createElement(wt,null,n.renderSymbolsStatically(m))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!js(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,s=a.yAxis,l=a.children,u=Qn(l,uc);return u?u.map(function(f,d){var h=f.props,p=h.direction,m=h.dataKey;return F.cloneElement(f,{key:"".concat(p,"-").concat(m,"-").concat(i[d]),data:i,xAxis:o,yAxis:s,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(w,x){return{x:w.cx,y:w.cy,value:p==="x"?+w.node.x:+w.node.y,errorVal:Ur(w,x)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,s=n.lineJointType,l=Ve(this.props,!1),u=Ve(i,!1),f,d;if(o==="joint")f=a.map(function(v){return{x:v.cx,y:v.cy}});else if(o==="fitting"){var h=DT(a),p=h.xmin,m=h.xmax,y=h.a,w=h.b,x=function(S){return y*S+w};f=[{x:p,y:x(p)},{x:m,y:x(m)}]}var g=va(va(va({},l),{},{fill:"none",stroke:l&&l.fill},u),{},{points:f});return F.isValidElement(i)?d=F.cloneElement(i,g):Xe(i)?d=i(g):d=F.createElement(fs,cu({},g,{type:s})),F.createElement(wt,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,s=n.className,l=n.xAxis,u=n.yAxis,f=n.left,d=n.top,h=n.width,p=n.height,m=n.id,y=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,x=ot("recharts-scatter",s),g=l&&l.allowDataOverflow,v=u&&u.allowDataOverflow,S=g||v,b=ze(m)?this.id:m;return F.createElement(wt,{className:x,clipPath:S?"url(#clipPath-".concat(b,")"):null},g||v?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(b)},F.createElement("rect",{x:g?f:f-h/2,y:v?d:d-p/2,width:g?h:h*2,height:v?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),F.createElement(wt,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!y||w)&&ci.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])}(j.PureComponent);po(An,"displayName","Scatter");po(An,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!$o.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});po(An,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,i=e.displayedData,o=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,u=a.props.tooltipType,f=Qn(a.props.children,Fx),d=ze(t.dataKey)?a.props.dataKey:t.dataKey,h=ze(r.dataKey)?a.props.dataKey:r.dataKey,p=n&&n.dataKey,m=n?n.range:mp.defaultProps.range,y=m&&m[0],w=t.scale.bandwidth?t.scale.bandwidth():0,x=r.scale.bandwidth?r.scale.bandwidth():0,g=i.map(function(v,S){var b=Ur(v,d),k=Ur(v,h),P=!ze(p)&&Ur(v,p)||"-",C=[{name:ze(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:b,payload:v,dataKey:d,type:u},{name:ze(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:v,dataKey:h,type:u}];P!=="-"&&C.push({name:n.name||n.dataKey,unit:n.unit||"",value:P,payload:v,dataKey:p,type:u});var N=_l({axis:t,ticks:o,bandSize:w,entry:v,index:S,dataKey:d}),O=_l({axis:r,ticks:s,bandSize:x,entry:v,index:S,dataKey:h}),E=P!=="-"?n.scale(P):y,M=Math.sqrt(Math.max(E,0)/Math.PI);return va(va({},v),{},{cx:N,cy:O,x:N-M,y:O-M,xAxis:t,yAxis:r,zAxis:n,width:2*M,height:2*M,size:E,node:{x:b,y:k,z:P},tooltipPayload:C,tooltipPosition:{x:N,y:O},payload:v},f&&f[S]&&f[S].props)});return va({points:g},l)});function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function lee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QC(n.key),n)}}function uee(e,t,r){return t&&cee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fee(e,t,r){return t=sh(t),dee(e,qC()?Reflect.construct(t,r||[],sh(e).constructor):t.apply(e,r))}function dee(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hee(e)}function hee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qC=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sh(e)}function pee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rv(e,t)}function rv(e,t){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rv(e,t)}function ZC(e,t,r){return t=QC(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QC(e){var t=gee(e,"string");return Gl(t)=="symbol"?t:t+""}function gee(e,t){if(Gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(this,arguments)}function mee(e){var t=e.xAxisId,r=y1(),n=v1(),a=OC(t);return a==null?null:j.createElement(fc,nv({},a,{className:ot("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Ai(o,!0)}}))}var Jn=function(e){function t(){return lee(this,t),fee(this,t,arguments)}return pee(t,e),uee(t,[{key:"render",value:function(){return j.createElement(mee,this.props)}}])}(j.Component);ZC(Jn,"displayName","XAxis");ZC(Jn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function yee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tO(n.key),n)}}function xee(e,t,r){return t&&vee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bee(e,t,r){return t=lh(t),wee(e,JC()?Reflect.construct(t,r||[],lh(e).constructor):t.apply(e,r))}function wee(e,t){if(t&&(Wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kee(e)}function kee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JC=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lh(e)}function See(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&av(e,t)}function av(e,t){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},av(e,t)}function eO(e,t,r){return t=tO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tO(e){var t=jee(e,"string");return Wl(t)=="symbol"?t:t+""}function jee(e,t){if(Wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(this,arguments)}var Pee=function(t){var r=t.yAxisId,n=y1(),a=v1(),i=NC(r);return i==null?null:j.createElement(fc,iv({},i,{className:ot("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return Ai(s,!0)}}))},ea=function(e){function t(){return yee(this,t),bee(this,t,arguments)}return See(t,e),xee(t,[{key:"render",value:function(){return j.createElement(Pee,this.props)}}])}(j.Component);eO(ea,"displayName","YAxis");eO(ea,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function US(e){return Mee(e)||Nee(e)||Oee(e)||Cee()}function Cee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oee(e,t){if(e){if(typeof e=="string")return ov(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ov(e,t)}}function Nee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mee(e){if(Array.isArray(e))return ov(e)}function ov(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sv=function(t,r,n,a,i){var o=Qn(t,ho),s=Qn(t,jf),l=[].concat(US(o),US(s)),u=Qn(t,Pf),f="".concat(a,"Id"),d=a[0],h=r;if(l.length&&(h=l.reduce(function(y,w){if(w.props[f]===n&&ui(w.props,"extendDomain")&&fe(w.props[d])){var x=w.props[d];return[Math.min(y[0],x),Math.max(y[1],x)]}return y},h)),u.length){var p="".concat(d,"1"),m="".concat(d,"2");h=u.reduce(function(y,w){if(w.props[f]===n&&ui(w.props,"extendDomain")&&fe(w.props[p])&&fe(w.props[m])){var x=w.props[p],g=w.props[m];return[Math.min(y[0],x,g),Math.max(y[1],x,g)]}return y},h)}return i&&i.length&&(h=i.reduce(function(y,w){return fe(w)?[Math.min(y[0],w),Math.max(y[1],w)]:y},h)),h},rO={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function i(l,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new a(f,d||l,h),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},s.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},s.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,f,d,h,p,m){var y=r?r+u:u;if(!this._events[y])return!1;var w=this._events[y],x=arguments.length,g,v;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,d),!0;case 4:return w.fn.call(w.context,f,d,h),!0;case 5:return w.fn.call(w.context,f,d,h,p),!0;case 6:return w.fn.call(w.context,f,d,h,p,m),!0}for(v=1,g=new Array(x-1);v<x;v++)g[v-1]=arguments[v];w.fn.apply(w.context,g)}else{var S=w.length,b;for(v=0;v<S;v++)switch(w[v].once&&this.removeListener(u,w[v].fn,void 0,!0),x){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,f);break;case 3:w[v].fn.call(w[v].context,f,d);break;case 4:w[v].fn.call(w[v].context,f,d,h);break;default:if(!g)for(b=1,g=new Array(x-1);b<x;b++)g[b-1]=arguments[b];w[v].fn.apply(w[v].context,g)}}return!0},s.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},s.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},s.prototype.removeListener=function(u,f,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===f&&(!h||m.once)&&(!d||m.context===d)&&o(this,p);else{for(var y=0,w=[],x=m.length;y<x;y++)(m[y].fn!==f||h&&!m[y].once||d&&m[y].context!==d)&&w.push(m[y]);w.length?this._events[p]=w.length===1?w[0]:w:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(rO);var _ee=rO.exports;const Aee=Wt(_ee);var Tg=new Aee,Eg="recharts.syncMouseEvents";function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function Tee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nO(n.key),n)}}function $ee(e,t,r){return t&&Eee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $g(e,t,r){return t=nO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nO(e){var t=Dee(e,"string");return uf(t)=="symbol"?t:t+""}function Dee(e,t){if(uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Iee=function(){function e(){Tee(this,e),$g(this,"activeIndex",0),$g(this,"coordinateList",[]),$g(this,"layout","horizontal")}return $ee(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+l+u,h=o+this.offset.top+s/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Ree(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&fe(n)&&fe(a))return!0}return!1}function Lee(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function aO(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=sn(t,r,n,a),s=sn(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Bee(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=sn(s,l,u,d),p=sn(s,l,f,d);n=h.x,a=h.y,i=p.x,o=p.y}else return aO(t);return[{x:n,y:a},{x:i,y:o}]}function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){Fee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fee(e,t,r){return t=zee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zee(e){var t=Uee(e,"string");return ff(t)=="symbol"?t:t+""}function Uee(e,t){if(ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gee(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var m,y=fs;if(h==="ScatterChart")m=o,y=gY;else if(h==="BarChart")m=Lee(d,o,l,f),y=d1;else if(d==="radial"){var w=aO(o),x=w.cx,g=w.cy,v=w.radius,S=w.startAngle,b=w.endAngle;m={cx:x,cy:g,startAngle:S,endAngle:b,innerRadius:v,outerRadius:v},y=JP}else m={points:Bee(d,o,l)},y=fs;var k=dd(dd(dd(dd({stroke:"#ccc",pointerEvents:"none"},l),m),Ve(p,!1)),{},{payload:s,payloadIndex:u,className:ot("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,k):j.createElement(y,k)}var Wee=["item"],Vee=["children","className","width","height","style","compact","title","desc"];function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rl.apply(this,arguments)}function WS(e,t){return Kee(e)||Xee(e,t)||oO(e,t)||Hee()}function Hee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(f){u=!0,a=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Kee(e){if(Array.isArray(e))return e}function VS(e,t){if(e==null)return{};var r=Yee(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sO(n.key),n)}}function Qee(e,t,r){return t&&Zee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jee(e,t,r){return t=ch(t),ete(e,iO()?Reflect.construct(t,r||[],ch(e).constructor):t.apply(e,r))}function ete(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tte(e)}function tte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iO=function(){return!!e})()}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ch(e)}function rte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lv(e,t)}function lv(e,t){return lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lv(e,t)}function Hl(e){return ite(e)||ate(e)||oO(e)||nte()}function nte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oO(e,t){if(e){if(typeof e=="string")return cv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cv(e,t)}}function ate(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ite(e){if(Array.isArray(e))return cv(e)}function cv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HS(Object(r),!0).forEach(function(n){Re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Re(e,t,r){return t=sO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sO(e){var t=ote(e,"string");return Vl(t)=="symbol"?t:t+""}function ote(e,t){if(Vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ste={xAxis:["bottom","top"],yAxis:["left","right"]},lte={width:"100%",height:"100%"},lO={x:0,y:0};function hd(e){return e}var cte=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},ute=function(t,r,n,a){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return re(re(re({},a),sn(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,u=a.angle;return re(re(re({},a),sn(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return lO},yp=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Hl(s),Hl(u)):s},[]);return o.length>0?o:t&&t.length&&fe(a)&&fe(i)?t.slice(a,i+1):[]};function cO(e){return e==="number"?[0,"auto"]:void 0}var uv=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=yp(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(l,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?s:d;h=s0(p,o.dataKey,a)}else h=d&&d[n]||s[n];return h?[].concat(Hl(l),[qP(u,h)]):l},[])},XS=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=cte(i,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,f=XV(o,s,u,l);if(f>=0&&u){var d=u[f]&&u[f].value,h=uv(t,r,f,d),p=ute(n,s,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},fte=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=XP(f,i);return n.reduce(function(m,y){var w,x=y.type.defaultProps!==void 0?re(re({},y.type.defaultProps),y.props):y.props,g=x.type,v=x.dataKey,S=x.allowDataOverflow,b=x.allowDuplicatedCategory,k=x.scale,P=x.ticks,C=x.includeHidden,N=x[o];if(m[N])return m;var O=yp(t.data,{graphicalItems:a.filter(function(G){var W,ne=o in G.props?G.props[o]:(W=G.type.defaultProps)===null||W===void 0?void 0:W[o];return ne===N}),dataStartIndex:l,dataEndIndex:u}),E=O.length,M,_,T;Ree(x.domain,S,g)&&(M=jy(x.domain,null,S),p&&(g==="number"||k!=="auto")&&(T=iu(O,v,"category")));var $=cO(g);if(!M||M.length===0){var I,A=(I=x.domain)!==null&&I!==void 0?I:$;if(v){if(M=iu(O,v,g),g==="category"&&p){var R=$T(M);b&&R?(_=M,M=X0(0,E)):b||(M=jk(A,M,y).reduce(function(G,W){return G.indexOf(W)>=0?G:[].concat(Hl(G),[W])},[]))}else if(g==="category")b?M=M.filter(function(G){return G!==""&&!ze(G)}):M=jk(A,M,y).reduce(function(G,W){return G.indexOf(W)>=0||W===""||ze(W)?G:[].concat(Hl(G),[W])},[]);else if(g==="number"){var L=QV(O,a.filter(function(G){var W,ne,Q=o in G.props?G.props[o]:(W=G.type.defaultProps)===null||W===void 0?void 0:W[o],B="hide"in G.props?G.props.hide:(ne=G.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return Q===N&&(C||!B)}),v,i,f);L&&(M=L)}p&&(g==="number"||k!=="auto")&&(T=iu(O,v,"category"))}else p?M=X0(0,E):s&&s[N]&&s[N].hasStack&&g==="number"?M=h==="expand"?[0,1]:YP(s[N].stackGroups,l,u):M=HP(O,a.filter(function(G){var W=o in G.props?G.props[o]:G.type.defaultProps[o],ne="hide"in G.props?G.props.hide:G.type.defaultProps.hide;return W===N&&(C||!ne)}),g,f,!0);if(g==="number")M=sv(d,M,N,i,P),A&&(M=jy(A,M,S));else if(g==="category"&&A){var V=A,ee=M.every(function(G){return V.indexOf(G)>=0});ee&&(M=V)}}return re(re({},m),{},Re({},N,re(re({},x),{},{axisType:i,domain:M,categoricalDomain:T,duplicateDomain:_,originalDomain:(w=x.domain)!==null&&w!==void 0?w:$,isCategorical:p,layout:f})))},{})},dte=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=yp(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=h.length,m=XP(f,i),y=-1;return n.reduce(function(w,x){var g=x.type.defaultProps!==void 0?re(re({},x.type.defaultProps),x.props):x.props,v=g[o],S=cO("number");if(!w[v]){y++;var b;return m?b=X0(0,p):s&&s[v]&&s[v].hasStack?(b=YP(s[v].stackGroups,l,u),b=sv(d,b,v,i)):(b=jy(S,HP(h,n.filter(function(k){var P,C,N=o in k.props?k.props[o]:(P=k.type.defaultProps)===null||P===void 0?void 0:P[o],O="hide"in k.props?k.props.hide:(C=k.type.defaultProps)===null||C===void 0?void 0:C.hide;return N===v&&!O}),"number",f),a.defaultProps.allowDataOverflow),b=sv(d,b,v,i)),re(re({},w),{},Re({},v,re(re({axisType:i},a.defaultProps),{},{hide:!0,orientation:Pa(ste,"".concat(i,".").concat(y%2),null),domain:b,originalDomain:S,isCategorical:m,layout:f})))}return w},{})},hte=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Qn(f,i),p={};return h&&h.length?p=fte(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(p=dte(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},pte=function(t){var r=no(t),n=Ai(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Lx(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:R0(r,n)}},KS=function(t){var r=t.children,n=t.defaultShowTooltip,a=oa(r,El),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},gte=function(t){return!t||!t.length?!1:t.some(function(r){var n=$i(r&&r.type);return n&&n.indexOf("Bar")>=0})},YS=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},mte=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,f=n.height,d=n.children,h=n.margin||{},p=oa(d,El),m=oa(d,si),y=Object.keys(l).reduce(function(b,k){var P=l[k],C=P.orientation;return!P.mirror&&!P.hide?re(re({},b),{},Re({},C,b[C]+P.width)):b},{left:h.left||0,right:h.right||0}),w=Object.keys(o).reduce(function(b,k){var P=o[k],C=P.orientation;return!P.mirror&&!P.hide?re(re({},b),{},Re({},C,Pa(b,"".concat(C))+P.height)):b},{top:h.top||0,bottom:h.bottom||0}),x=re(re({},w),y),g=x.bottom;p&&(x.bottom+=p.props.height||El.defaultProps.height),m&&r&&(x=qV(x,a,n,r));var v=u-x.left-x.right,S=f-x.top-x.bottom;return re(re({brushBottom:g},x),{},{width:Math.max(v,0),height:Math.max(S,0)})},yte=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},k1=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(x,g){var v=g.graphicalItems,S=g.stackGroups,b=g.offset,k=g.updateId,P=g.dataStartIndex,C=g.dataEndIndex,N=x.barSize,O=x.layout,E=x.barGap,M=x.barCategoryGap,_=x.maxBarSize,T=YS(O),$=T.numericAxisName,I=T.cateAxisName,A=gte(v),R=[];return v.forEach(function(L,V){var ee=yp(x.data,{graphicalItems:[L],dataStartIndex:P,dataEndIndex:C}),G=L.type.defaultProps!==void 0?re(re({},L.type.defaultProps),L.props):L.props,W=G.dataKey,ne=G.maxBarSize,Q=G["".concat($,"Id")],B=G["".concat(I,"Id")],ie={},K=l.reduce(function(Ue,ft){var yt=g["".concat(ft.axisType,"Map")],br=G["".concat(ft.axisType,"Id")];yt&&yt[br]||ft.axisType==="zAxis"||Cs();var ut=yt[br];return re(re({},Ue),{},Re(Re({},ft.axisType,ut),"".concat(ft.axisType,"Ticks"),Ai(ut)))},ie),X=K[I],se=K["".concat(I,"Ticks")],de=S&&S[Q]&&S[Q].hasStack&&uH(L,S[Q].stackGroups),J=$i(L.type).indexOf("Bar")>=0,je=R0(X,se),ye=[],te=A&&KV({barSize:N,stackGroups:S,totalSize:yte(K,I)});if(J){var he,ve,Ke=ze(ne)?_:ne,Fe=(he=(ve=R0(X,se,!0))!==null&&ve!==void 0?ve:Ke)!==null&&he!==void 0?he:0;ye=YV({barGap:E,barCategoryGap:M,bandSize:Fe!==je?Fe:je,sizeList:te[B],maxBarSize:Ke}),Fe!==je&&(ye=ye.map(function(Ue){return re(re({},Ue),{},{position:re(re({},Ue.position),{},{offset:Ue.position.offset-Fe/2})})}))}var Ae=L&&L.type&&L.type.getComposedData;Ae&&R.push({props:re(re({},Ae(re(re({},K),{},{displayedData:ee,props:x,dataKey:W,item:L,bandSize:je,barPosition:ye,offset:b,stackedData:de,layout:O,dataStartIndex:P,dataEndIndex:C}))),{},Re(Re(Re({key:L.key||"item-".concat(V)},$,K[$]),I,K[I]),"animationId",k)),childIndex:XT(L,x.children),item:L})}),R},p=function(x,g){var v=x.props,S=x.dataStartIndex,b=x.dataEndIndex,k=x.updateId;if(!v2({props:v}))return null;var P=v.children,C=v.layout,N=v.stackOffset,O=v.data,E=v.reverseStackOrder,M=YS(C),_=M.numericAxisName,T=M.cateAxisName,$=Qn(P,n),I=sH(O,$,"".concat(_,"Id"),"".concat(T,"Id"),N,E),A=l.reduce(function(G,W){var ne="".concat(W.axisType,"Map");return re(re({},G),{},Re({},ne,hte(v,re(re({},W),{},{graphicalItems:$,stackGroups:W.axisType===_&&I,dataStartIndex:S,dataEndIndex:b}))))},{}),R=mte(re(re({},A),{},{props:v,graphicalItems:$}),g==null?void 0:g.legendBBox);Object.keys(A).forEach(function(G){A[G]=f(v,A[G],R,G.replace("Map",""),r)});var L=A["".concat(T,"Map")],V=pte(L),ee=h(v,re(re({},A),{},{dataStartIndex:S,dataEndIndex:b,updateId:k,graphicalItems:$,stackGroups:I,offset:R}));return re(re({formattedGraphicalItems:ee,graphicalItems:$,offset:R,stackGroups:I},V),A)},m=function(w){function x(g){var v,S,b;return qee(this,x),b=Jee(this,x,[g]),Re(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(b,"accessibilityManager",new Iee),Re(b,"handleLegendBBoxUpdate",function(k){if(k){var P=b.state,C=P.dataStartIndex,N=P.dataEndIndex,O=P.updateId;b.setState(re({legendBBox:k},p({props:b.props,dataStartIndex:C,dataEndIndex:N,updateId:O},re(re({},b.state),{},{legendBBox:k}))))}}),Re(b,"handleReceiveSyncEvent",function(k,P,C){if(b.props.syncId===k){if(C===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(P)}}),Re(b,"handleBrushChange",function(k){var P=k.startIndex,C=k.endIndex;if(P!==b.state.dataStartIndex||C!==b.state.dataEndIndex){var N=b.state.updateId;b.setState(function(){return re({dataStartIndex:P,dataEndIndex:C},p({props:b.props,dataStartIndex:P,dataEndIndex:C,updateId:N},b.state))}),b.triggerSyncEvent({dataStartIndex:P,dataEndIndex:C})}}),Re(b,"handleMouseEnter",function(k){var P=b.getMouseInfo(k);if(P){var C=re(re({},P),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var N=b.props.onMouseEnter;Xe(N)&&N(C,k)}}),Re(b,"triggeredAfterMouseMove",function(k){var P=b.getMouseInfo(k),C=P?re(re({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(C),b.triggerSyncEvent(C);var N=b.props.onMouseMove;Xe(N)&&N(C,k)}),Re(b,"handleItemMouseEnter",function(k){b.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Re(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Re(b,"handleMouseMove",function(k){k.persist(),b.throttleTriggeredAfterMouseMove(k)}),Re(b,"handleMouseLeave",function(k){b.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};b.setState(P),b.triggerSyncEvent(P);var C=b.props.onMouseLeave;Xe(C)&&C(P,k)}),Re(b,"handleOuterEvent",function(k){var P=HT(k),C=Pa(b.props,"".concat(P));if(P&&Xe(C)){var N,O;/.*touch.*/i.test(P)?O=b.getMouseInfo(k.changedTouches[0]):O=b.getMouseInfo(k),C((N=O)!==null&&N!==void 0?N:{},k)}}),Re(b,"handleClick",function(k){var P=b.getMouseInfo(k);if(P){var C=re(re({},P),{},{isTooltipActive:!0});b.setState(C),b.triggerSyncEvent(C);var N=b.props.onClick;Xe(N)&&N(C,k)}}),Re(b,"handleMouseDown",function(k){var P=b.props.onMouseDown;if(Xe(P)){var C=b.getMouseInfo(k);P(C,k)}}),Re(b,"handleMouseUp",function(k){var P=b.props.onMouseUp;if(Xe(P)){var C=b.getMouseInfo(k);P(C,k)}}),Re(b,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Re(b,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.handleMouseDown(k.changedTouches[0])}),Re(b,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&b.handleMouseUp(k.changedTouches[0])}),Re(b,"handleDoubleClick",function(k){var P=b.props.onDoubleClick;if(Xe(P)){var C=b.getMouseInfo(k);P(C,k)}}),Re(b,"handleContextMenu",function(k){var P=b.props.onContextMenu;if(Xe(P)){var C=b.getMouseInfo(k);P(C,k)}}),Re(b,"triggerSyncEvent",function(k){b.props.syncId!==void 0&&Tg.emit(Eg,b.props.syncId,k,b.eventEmitterSymbol)}),Re(b,"applySyncEvent",function(k){var P=b.props,C=P.layout,N=P.syncMethod,O=b.state.updateId,E=k.dataStartIndex,M=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)b.setState(re({dataStartIndex:E,dataEndIndex:M},p({props:b.props,dataStartIndex:E,dataEndIndex:M,updateId:O},b.state)));else if(k.activeTooltipIndex!==void 0){var _=k.chartX,T=k.chartY,$=k.activeTooltipIndex,I=b.state,A=I.offset,R=I.tooltipTicks;if(!A)return;if(typeof N=="function")$=N(R,k);else if(N==="value"){$=-1;for(var L=0;L<R.length;L++)if(R[L].value===k.activeLabel){$=L;break}}var V=re(re({},A),{},{x:A.left,y:A.top}),ee=Math.min(_,V.x+V.width),G=Math.min(T,V.y+V.height),W=R[$]&&R[$].value,ne=uv(b.state,b.props.data,$),Q=R[$]?{x:C==="horizontal"?R[$].coordinate:ee,y:C==="horizontal"?G:R[$].coordinate}:lO;b.setState(re(re({},k),{},{activeLabel:W,activeCoordinate:Q,activePayload:ne,activeTooltipIndex:$}))}else b.setState(k)}),Re(b,"renderCursor",function(k){var P,C=b.state,N=C.isTooltipActive,O=C.activeCoordinate,E=C.activePayload,M=C.offset,_=C.activeTooltipIndex,T=C.tooltipAxisBandSize,$=b.getTooltipEventType(),I=(P=k.props.active)!==null&&P!==void 0?P:N,A=b.props.layout,R=k.key||"_recharts-cursor";return F.createElement(Gee,{key:R,activeCoordinate:O,activePayload:E,activeTooltipIndex:_,chartName:r,element:k,isActive:I,layout:A,offset:M,tooltipAxisBandSize:T,tooltipEventType:$})}),Re(b,"renderPolarAxis",function(k,P,C){var N=Pa(k,"type.axisType"),O=Pa(b.state,"".concat(N,"Map")),E=k.type.defaultProps,M=E!==void 0?re(re({},E),k.props):k.props,_=O&&O[M["".concat(N,"Id")]];return j.cloneElement(k,re(re({},_),{},{className:ot(N,_.className),key:k.key||"".concat(P,"-").concat(C),ticks:Ai(_,!0)}))}),Re(b,"renderPolarGrid",function(k){var P=k.props,C=P.radialLines,N=P.polarAngles,O=P.polarRadius,E=b.state,M=E.radiusAxisMap,_=E.angleAxisMap,T=no(M),$=no(_),I=$.cx,A=$.cy,R=$.innerRadius,L=$.outerRadius;return j.cloneElement(k,{polarAngles:Array.isArray(N)?N:Ai($,!0).map(function(V){return V.coordinate}),polarRadius:Array.isArray(O)?O:Ai(T,!0).map(function(V){return V.coordinate}),cx:I,cy:A,innerRadius:R,outerRadius:L,key:k.key||"polar-grid",radialLines:C})}),Re(b,"renderLegend",function(){var k=b.state.formattedGraphicalItems,P=b.props,C=P.children,N=P.width,O=P.height,E=b.props.margin||{},M=N-(E.left||0)-(E.right||0),_=WP({children:C,formattedGraphicalItems:k,legendWidth:M,legendContent:u});if(!_)return null;var T=_.item,$=VS(_,Wee);return j.cloneElement(T,re(re({},$),{},{chartWidth:N,chartHeight:O,margin:E,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Re(b,"renderTooltip",function(){var k,P=b.props,C=P.children,N=P.accessibilityLayer,O=oa(C,Xr);if(!O)return null;var E=b.state,M=E.isTooltipActive,_=E.activeCoordinate,T=E.activePayload,$=E.activeLabel,I=E.offset,A=(k=O.props.active)!==null&&k!==void 0?k:M;return j.cloneElement(O,{viewBox:re(re({},I),{},{x:I.left,y:I.top}),active:A,label:$,payload:A?T:[],coordinate:_,accessibilityLayer:N})}),Re(b,"renderBrush",function(k){var P=b.props,C=P.margin,N=P.data,O=b.state,E=O.offset,M=O.dataStartIndex,_=O.dataEndIndex,T=O.updateId;return j.cloneElement(k,{key:k.key||"_recharts-brush",onChange:ld(b.handleBrushChange,k.props.onChange),data:N,x:fe(k.props.x)?k.props.x:E.left,y:fe(k.props.y)?k.props.y:E.top+E.height+E.brushBottom-(C.bottom||0),width:fe(k.props.width)?k.props.width:E.width,startIndex:M,endIndex:_,updateId:"brush-".concat(T)})}),Re(b,"renderReferenceElement",function(k,P,C){if(!k)return null;var N=b,O=N.clipPathId,E=b.state,M=E.xAxisMap,_=E.yAxisMap,T=E.offset,$=k.type.defaultProps||{},I=k.props,A=I.xAxisId,R=A===void 0?$.xAxisId:A,L=I.yAxisId,V=L===void 0?$.yAxisId:L;return j.cloneElement(k,{key:k.key||"".concat(P,"-").concat(C),xAxis:M[R],yAxis:_[V],viewBox:{x:T.left,y:T.top,width:T.width,height:T.height},clipPathId:O})}),Re(b,"renderActivePoints",function(k){var P=k.item,C=k.activePoint,N=k.basePoint,O=k.childIndex,E=k.isRange,M=[],_=P.props.key,T=P.item.type.defaultProps!==void 0?re(re({},P.item.type.defaultProps),P.item.props):P.item.props,$=T.activeDot,I=T.dataKey,A=re(re({index:O,dataKey:I,cx:C.x,cy:C.y,r:4,fill:f1(P.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Ve($,!1)),l0($));return M.push(x.renderActiveDot($,A,"".concat(_,"-activePoint-").concat(O))),N?M.push(x.renderActiveDot($,re(re({},A),{},{cx:N.x,cy:N.y}),"".concat(_,"-basePoint-").concat(O))):E&&M.push(null),M}),Re(b,"renderGraphicChild",function(k,P,C){var N=b.filterFormatItem(k,P,C);if(!N)return null;var O=b.getTooltipEventType(),E=b.state,M=E.isTooltipActive,_=E.tooltipAxis,T=E.activeTooltipIndex,$=E.activeLabel,I=b.props.children,A=oa(I,Xr),R=N.props,L=R.points,V=R.isRange,ee=R.baseLine,G=N.item.type.defaultProps!==void 0?re(re({},N.item.type.defaultProps),N.item.props):N.item.props,W=G.activeDot,ne=G.hide,Q=G.activeBar,B=G.activeShape,ie=!!(!ne&&M&&A&&(W||Q||B)),K={};O!=="axis"&&A&&A.props.trigger==="click"?K={onClick:ld(b.handleItemMouseEnter,k.props.onClick)}:O!=="axis"&&(K={onMouseLeave:ld(b.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:ld(b.handleItemMouseEnter,k.props.onMouseEnter)});var X=j.cloneElement(k,re(re({},N.props),K));function se(ft){return typeof _.dataKey=="function"?_.dataKey(ft.payload):null}if(ie)if(T>=0){var de,J;if(_.dataKey&&!_.allowDuplicatedCategory){var je=typeof _.dataKey=="function"?se:"payload.".concat(_.dataKey.toString());de=s0(L,je,$),J=V&&ee&&s0(ee,je,$)}else de=L==null?void 0:L[T],J=V&&ee&&ee[T];if(B||Q){var ye=k.props.activeIndex!==void 0?k.props.activeIndex:T;return[j.cloneElement(k,re(re(re({},N.props),K),{},{activeIndex:ye})),null,null]}if(!ze(de))return[X].concat(Hl(b.renderActivePoints({item:N,activePoint:de,basePoint:J,childIndex:T,isRange:V})))}else{var te,he=(te=b.getItemByXY(b.state.activeCoordinate))!==null&&te!==void 0?te:{graphicalItem:X},ve=he.graphicalItem,Ke=ve.item,Fe=Ke===void 0?k:Ke,Ae=ve.childIndex,Ue=re(re(re({},N.props),K),{},{activeIndex:Ae});return[j.cloneElement(Fe,Ue),null,null]}return V?[X,null,null]:[X,null]}),Re(b,"renderCustomized",function(k,P,C){return j.cloneElement(k,re(re({key:"recharts-customized-".concat(C)},b.props),b.state))}),Re(b,"renderMap",{CartesianGrid:{handler:hd,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:hd},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:hd},YAxis:{handler:hd},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((v=g.id)!==null&&v!==void 0?v:Ts("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=Vj(b.triggeredAfterMouseMove,(S=g.throttleDelay)!==null&&S!==void 0?S:1e3/60),b.state={},b}return rte(x,w),Qee(x,[{key:"componentDidMount",value:function(){var v,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,S=v.children,b=v.data,k=v.height,P=v.layout,C=oa(S,Xr);if(C){var N=C.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,E=uv(this.state,b,N,O),M=this.state.tooltipTicks[N].coordinate,_=(this.state.offset.top+k)/2,T=P==="horizontal",$=T?{x:M,y:_}:{y:M,x:_},I=this.state.formattedGraphicalItems.find(function(R){var L=R.item;return L.type.name==="Scatter"});I&&($=re(re({},$),I.props.points[N].tooltipPosition),E=I.props.points[N].tooltipPayload);var A={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:O,activePayload:E,activeCoordinate:$};this.setState(A),this.renderCursor(C),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var b,k;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(v){Bm([oa(v.children,Xr)],[oa(this.props.children,Xr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=oa(this.props.children,Xr);if(v&&typeof v.props.shared=="boolean"){var S=v.props.shared?"axis":"item";return s.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var S=this.container,b=S.getBoundingClientRect(),k=xz(b),P={chartX:Math.round(v.pageX-k.left),chartY:Math.round(v.pageY-k.top)},C=b.width/S.offsetWidth||1,N=this.inRange(P.chartX,P.chartY,C);if(!N)return null;var O=this.state,E=O.xAxisMap,M=O.yAxisMap,_=this.getTooltipEventType(),T=XS(this.state,this.props.data,this.props.layout,N);if(_!=="axis"&&E&&M){var $=no(E).scale,I=no(M).scale,A=$&&$.invert?$.invert(P.chartX):null,R=I&&I.invert?I.invert(P.chartY):null;return re(re({},P),{},{xValue:A,yValue:R},T)}return T?re(re({},P),T):null}},{key:"inRange",value:function(v,S){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,P=v/b,C=S/b;if(k==="horizontal"||k==="vertical"){var N=this.state.offset,O=P>=N.left&&P<=N.left+N.width&&C>=N.top&&C<=N.top+N.height;return O?{x:P,y:C}:null}var E=this.state,M=E.angleAxisMap,_=E.radiusAxisMap;if(M&&_){var T=no(M);return Ok({x:P,y:C},T)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,S=this.getTooltipEventType(),b=oa(v,Xr),k={};b&&S==="axis"&&(b.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=l0(this.props,this.handleOuterEvent);return re(re({},P),k)}},{key:"addListener",value:function(){Tg.on(Eg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Tg.removeListener(Eg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,S,b){for(var k=this.state.formattedGraphicalItems,P=0,C=k.length;P<C;P++){var N=k[P];if(N.item===v||N.props.key===v.key||S===$i(N.item.type)&&b===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,S=this.state.offset,b=S.left,k=S.top,P=S.height,C=S.width;return F.createElement("defs",null,F.createElement("clipPath",{id:v},F.createElement("rect",{x:b,y:k,height:P,width:C})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(S,b){var k=WS(b,2),P=k[0],C=k[1];return re(re({},S),{},Re({},P,C.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(S,b){var k=WS(b,2),P=k[0],C=k[1];return re(re({},S),{},Re({},P,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(v){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(v){var S=this.state,b=S.formattedGraphicalItems,k=S.activeItem;if(b&&b.length)for(var P=0,C=b.length;P<C;P++){var N=b[P],O=N.props,E=N.item,M=E.type.defaultProps!==void 0?re(re({},E.type.defaultProps),E.props):E.props,_=$i(E.type);if(_==="Bar"){var T=(O.data||[]).find(function(R){return iY(v,R)});if(T)return{graphicalItem:N,payload:T}}else if(_==="RadialBar"){var $=(O.data||[]).find(function(R){return Ok(v,R)});if($)return{graphicalItem:N,payload:$}}else if(fp(N,k)||dp(N,k)||af(N,k)){var I=sq({graphicalItem:N,activeTooltipItem:k,itemData:M.data}),A=M.activeIndex===void 0?I:M.activeIndex;return{graphicalItem:re(re({},N),{},{childIndex:A}),payload:af(N,k)?M.data[I]:N.props.data[I]}}}return null}},{key:"render",value:function(){var v=this;if(!v2(this))return null;var S=this.props,b=S.children,k=S.className,P=S.width,C=S.height,N=S.style,O=S.compact,E=S.title,M=S.desc,_=VS(S,Vee),T=Ve(_,!1);if(O)return F.createElement(kS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(zm,rl({},T,{width:P,height:C,title:E,desc:M}),this.renderClipPath(),b2(b,this.renderMap)));if(this.props.accessibilityLayer){var $,I;T.tabIndex=($=this.props.tabIndex)!==null&&$!==void 0?$:0,T.role=(I=this.props.role)!==null&&I!==void 0?I:"application",T.onKeyDown=function(R){v.accessibilityManager.keyboardEvent(R)},T.onFocus=function(){v.accessibilityManager.focus()}}var A=this.parseEventsOfWrapper();return F.createElement(kS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",rl({className:ot("recharts-wrapper",k),style:re({position:"relative",cursor:"default",width:P,height:C},N)},A,{ref:function(L){v.container=L}}),F.createElement(zm,rl({},T,{width:P,height:C,title:E,desc:M,style:lte}),this.renderClipPath(),b2(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Re(m,"displayName",r),Re(m,"defaultProps",re({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Re(m,"getDerivedStateFromProps",function(w,x){var g=w.dataKey,v=w.data,S=w.children,b=w.width,k=w.height,P=w.layout,C=w.stackOffset,N=w.margin,O=x.dataStartIndex,E=x.dataEndIndex;if(x.updateId===void 0){var M=KS(w);return re(re(re({},M),{},{updateId:0},p(re(re({props:w},M),{},{updateId:0}),x)),{},{prevDataKey:g,prevData:v,prevWidth:b,prevHeight:k,prevLayout:P,prevStackOffset:C,prevMargin:N,prevChildren:S})}if(g!==x.prevDataKey||v!==x.prevData||b!==x.prevWidth||k!==x.prevHeight||P!==x.prevLayout||C!==x.prevStackOffset||!ul(N,x.prevMargin)){var _=KS(w),T={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},$=re(re({},XS(x,v,P)),{},{updateId:x.updateId+1}),I=re(re(re({},_),T),$);return re(re(re({},I),p(re({props:w},I),x)),{},{prevDataKey:g,prevData:v,prevWidth:b,prevHeight:k,prevLayout:P,prevStackOffset:C,prevMargin:N,prevChildren:S})}if(!Bm(S,x.prevChildren)){var A,R,L,V,ee=oa(S,El),G=ee&&(A=(R=ee.props)===null||R===void 0?void 0:R.startIndex)!==null&&A!==void 0?A:O,W=ee&&(L=(V=ee.props)===null||V===void 0?void 0:V.endIndex)!==null&&L!==void 0?L:E,ne=G!==O||W!==E,Q=!ze(v),B=Q&&!ne?x.updateId:x.updateId+1;return re(re({updateId:B},p(re(re({props:w},x),{},{updateId:B,dataStartIndex:G,dataEndIndex:W}),x)),{},{prevChildren:S,dataStartIndex:G,dataEndIndex:W})}return null}),Re(m,"renderActiveDot",function(w,x,g){var v;return j.isValidElement(w)?v=j.cloneElement(w,x):Xe(w)?v=w(x):v=F.createElement(up,x),F.createElement(wt,{className:"recharts-active-dot",key:g},v)});var y=j.forwardRef(function(x,g){return F.createElement(m,rl({},x,{ref:g}))});return y.displayName=m.displayName,y},hl=k1({chartName:"LineChart",GraphicalChild:Er,axisComponents:[{axisType:"xAxis",AxisComp:Jn},{axisType:"yAxis",AxisComp:ea}],formatAxisMap:h1}),vte=k1({chartName:"ScatterChart",GraphicalChild:An,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Jn},{axisType:"yAxis",AxisComp:ea},{axisType:"zAxis",AxisComp:mp}],formatAxisMap:h1}),uO=k1({chartName:"AreaChart",GraphicalChild:Sa,axisComponents:[{axisType:"xAxis",AxisComp:Jn},{axisType:"yAxis",AxisComp:ea}],formatAxisMap:h1});const ji=(e,t)=>{const r=localStorage.getItem(e);return r===null?t:typeof t=="boolean"?r==="true":typeof t=="number"?Number(r):r},xte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f,stackFiles:d})=>{const[h,p]=j.useState(()=>(u==null?void 0:u.channelMode)??ji("hist_mode","All")),[m,y]=j.useState(()=>(u==null?void 0:u.minVal)??ji("hist_min",0)),[w,x]=j.useState(()=>(u==null?void 0:u.maxVal)??ji("hist_max",16383)),[g,v]=j.useState(()=>(u==null?void 0:u.binCount)??ji("hist_bins",100)),[S,b]=j.useState(()=>(u==null?void 0:u.pointToPoint)??ji("hist_ptp",!1)),[k,P]=j.useState(()=>(u==null?void 0:u.showTheo)??ji("hist_show_theo",!1)),[C,N]=j.useState(()=>(u==null?void 0:u.theoMean)??ji("hist_theo_mean","512")),[O,E]=j.useState(()=>(u==null?void 0:u.theoSigma)??ji("hist_theo_sigma","10")),[M,_]=j.useState(()=>(u==null?void 0:u.theoAmp)??ji("hist_theo_amp","1000")),[T,$]=j.useState(!1),[I,A]=j.useState(0),[R,L]=j.useState([]),[V,ee]=j.useState(null),[G,W]=j.useState(l||{x:100,y:100}),[ne,Q]=j.useState(!1),B=j.useRef({x:0,y:0});j.useEffect(()=>{localStorage.setItem("hist_mode",h),localStorage.setItem("hist_min",String(m)),localStorage.setItem("hist_max",String(w)),localStorage.setItem("hist_bins",String(g)),localStorage.setItem("hist_ptp",String(S)),localStorage.setItem("hist_show_theo",String(k)),localStorage.setItem("hist_theo_mean",C),localStorage.setItem("hist_theo_sigma",O),localStorage.setItem("hist_theo_amp",M),f&&f({channelMode:h,minVal:m,maxVal:w,binCount:g,pointToPoint:S,showTheo:k,theoMean:C,theoSigma:O,theoAmp:M})},[h,m,w,g,S,k,C,O,M]),j.useEffect(()=>{if(!e||!a||!n&&(!d||d.length===0))return;if(w<=m){ee("Invalid range: Max must be greater than Min");return}ee(null),$(!0),A(0);const te=new AbortController,he=[],Ke=setTimeout(async()=>{try{let Fe=[];if(d&&d.length>1){const Ae=Math.min(d.length,navigator.hardwareConcurrency||4);for(let ut=0;ut<Ae;ut++){const gr=new Worker(new URL("/assets/histogramWorker-CC48bXVX.js",import.meta.url),{type:"module"});he.push(gr)}let Ue=0,ft=0;const yt=[],br=async ut=>{for(;Ue<d.length;){if(te.signal.aborted)return;const gr=Ue++,Je=d[gr];try{const Vt=await Je.arrayBuffer();await new Promise((Et,wr)=>{ut.onmessage=$t=>{const{success:Ot,hist:Ge,error:Dt}=$t.data;Ot?(yt.push(Ge),ft++,A(ft),Et()):(console.error(`Error processing ${Je.name}:`,Dt),Et())},ut.onerror=$t=>{console.error("Worker Error",$t),Et()},ut.postMessage({buffer:Vt,roi:a,binCount:g,minVal:m,maxVal:w,pointToPoint:S},[Vt])})}catch(Vt){console.error("File Read Error",Vt)}}};if(await Promise.all(he.map(ut=>br(ut))),he.forEach(ut=>ut.terminate()),he.length=0,yt.length>0){Fe=yt[0];for(let ut=1;ut<yt.length;ut++){const gr=yt[ut];for(let Je=0;Je<gr.length;Je++)Fe[Je]&&(Fe[Je].c0+=gr[Je].c0,Fe[Je].c1+=gr[Je].c1,Fe[Je].c2+=gr[Je].c2,Fe[Je].c3+=gr[Je].c3)}}}else n&&(Fe=D_(n.data,n.width,n.height,a.x,a.y,a.w,a.h,g,m,w,S));te.signal.aborted||L(Fe)}catch(Fe){console.error("Histogram calc error:",Fe),ee("Error calculating histogram")}finally{te.signal.aborted||$(!1)}},50);return()=>{clearTimeout(Ke),te.abort(),he.length>0&&(console.log(`Terminating ${he.length} active histogram workers...`),he.forEach(Fe=>Fe.terminate()))}},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,g,m,w,S,d]);const ie=j.useMemo(()=>{if(!k)return R;const te=parseFloat(C),he=parseFloat(O),ve=parseFloat(M);return isNaN(te)||isNaN(he)||isNaN(ve)||he<=0?R:R.map(Ke=>{const Fe=Ke.binStart,Ae=-Math.pow(Fe-te,2)/(2*Math.pow(he,2)),Ue=ve*Math.exp(Ae);return{...Ke,theory:Ue}})},[R,k,C,O,M]),K=()=>{if(R.length===0)return;let te=0,he=0;if(R.forEach(ve=>{const Ke=Math.max(ve.c0||0,ve.c1||0,ve.c2||0,ve.c3||0);Ke>te&&(te=Ke,he=ve.binStart)}),N(he.toFixed(2)),_(te.toString()),parseFloat(O)===0||isNaN(parseFloat(O))){const ve=w-m;E((ve/20).toFixed(2))}},X=(te,he,ve)=>{s&&s(),!(ve.closest("button")||ve.closest("input")||ve.closest("select"))&&(Q(!0),B.current={x:te-G.x,y:he-G.y})},se=te=>{X(te.clientX,te.clientY,te.target)},de=te=>{const he=te.touches[0];X(he.clientX,he.clientY,te.target)};if(j.useEffect(()=>{const te=ve=>{if(ne){const Ke="touches"in ve?ve.touches[0].clientX:ve.clientX,Fe="touches"in ve?ve.touches[0].clientY:ve.clientY;W({x:Ke-B.current.x,y:Fe-B.current.y})}},he=()=>Q(!1);return ne&&(window.addEventListener("mousemove",te),window.addEventListener("mouseup",he),window.addEventListener("touchmove",te,{passive:!1}),window.addEventListener("touchend",he)),()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",he),window.removeEventListener("touchmove",te),window.removeEventListener("touchend",he)}},[ne]),!e)return null;const J=i?{c0:"Blue",c1:"Green 1",c2:"Green 2",c3:"Red"}:{c0:"Red",c1:"Green 1",c2:"Green 2",c3:"Blue"},je=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},ye="step";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[650px]",style:{left:G.x,top:G.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-white dark:bg-slate-900 select-none touch-none ${ne?"cursor-grabbing":"cursor-grab"}`,onMouseDown:se,onTouchStart:de,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 pointer-events-none flex items-center gap-2",children:["ROI Histogram",d&&d.length>1&&c.jsxs("span",{className:"text-[10px] font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800 shadow-sm",children:["Stack Count: ",d.length]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-800/50 flex flex-wrap gap-x-6 gap-y-3 items-center border-b border-gray-200 dark:border-slate-700 text-xs flex-shrink-0 relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Channel:"}),c.jsxs("select",{value:h,onChange:te=>p(te.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500",children:[c.jsx("option",{value:"All",children:"All Colors"}),c.jsx("option",{value:"0",children:J.c0}),c.jsx("option",{value:"1",children:J.c1}),c.jsx("option",{value:"2",children:J.c2}),c.jsx("option",{value:"3",children:J.c3})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold uppercase tracking-tight",children:"Range:"}),c.jsx("input",{type:"number",value:m,onChange:te=>y(Number(te.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",value:w,onChange:te=>x(Number(te.target.value)),className:"w-16 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:S,onChange:te=>b(te.target.checked),className:"w-3.5 h-3.5 text-cyan-600 rounded border-gray-300 focus:ring-cyan-500"}),c.jsx("span",{className:"text-gray-700 dark:text-slate-300 select-none font-semibold",children:"PTP"})]}),!S&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"Bins:"}),c.jsx("input",{type:"number",value:g,onChange:te=>v(Math.max(1,Number(te.target.value))),className:"w-12 px-1.5 py-1 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-gray-900 dark:text-slate-100 text-right font-mono"})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:`flex items-center gap-3 p-1.5 rounded-lg border transition-all ${k?"bg-amber-50/30 dark:bg-amber-900/10 border-amber-200/50 dark:border-amber-800/50":"bg-transparent border-transparent"}`,children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:k,onChange:te=>P(te.target.checked),className:"w-3.5 h-3.5 text-amber-500 rounded border-gray-300 focus:ring-amber-500 bg-white dark:bg-slate-700"}),c.jsx("span",{className:`font-bold uppercase tracking-tight ${k?"text-amber-600 dark:text-amber-400":"text-gray-400"}`,children:"Theoretical Bell"})]}),k&&c.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-200",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Mean()"}),c.jsx("input",{type:"text",value:C,onChange:te=>N(te.target.value),className:"w-14 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Sigma()"}),c.jsx("input",{type:"text",value:O,onChange:te=>E(te.target.value),className:"w-12 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[8px] text-gray-400 uppercase font-bold",children:"Scale(A)"}),c.jsx("input",{type:"text",value:M,onChange:te=>_(te.target.value),className:"w-16 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center text-[10px] py-0.5 outline-none focus:border-amber-500"})]}),c.jsx("button",{onClick:K,className:"mt-3 px-2 py-0.5 bg-amber-600 hover:bg-amber-500 text-white text-[9px] font-bold rounded shadow-sm active:scale-95 transition-all",title:"Set Mean and Amplitude based on current peak",children:"AUTO FIT"})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 relative bg-white dark:bg-slate-900 overflow-hidden min-h-0",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),T&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px]",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-2"}),c.jsx("span",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-semibold",children:d&&d.length>1?`Stacking Histogram... ${I}/${d.length}`:"Calculating Histogram..."})]}),V?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 relative z-10",children:V}):c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(hl,{data:ie,children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),c.jsx(Jn,{dataKey:"binStart",type:"number",domain:[m,w],tickFormatter:te=>Math.floor(te).toString(),tick:{fill:"#9ca3af",fontSize:12},allowDataOverflow:!0,label:{value:"DN Value",position:"insideBottom",offset:-5,fill:"#9ca3af",fontSize:12}}),c.jsx(ea,{tick:{fill:"#9ca3af",fontSize:12},label:{value:"Count",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12}}),c.jsx(Xr,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"},itemStyle:{fontSize:"12px"},labelFormatter:te=>`DN: ${Math.round(Number(te))}`,formatter:(te,he)=>[Math.round(te),he]}),c.jsx(si,{wrapperStyle:{paddingTop:"10px"}}),k&&c.jsx(Er,{type:"monotone",dataKey:"theory",name:"Ideal Bell (Gaussian)",stroke:"#f59e0b",strokeWidth:2.5,strokeDasharray:"5 5",dot:!1,isAnimationActive:!1}),(h==="All"||h==="0")&&c.jsx(Er,{type:ye,dataKey:"c0",name:J.c0,stroke:je.c0,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="1")&&c.jsx(Er,{type:ye,dataKey:"c1",name:J.c1,stroke:je.c1,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="2")&&c.jsx(Er,{type:ye,dataKey:"c2",name:J.c2,stroke:je.c2,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1}),(h==="All"||h==="3")&&c.jsx(Er,{type:ye,dataKey:"c3",name:J.c3,stroke:je.c3,dot:!1,strokeWidth:1.5,activeDot:{r:4},isAnimationActive:!1})]})})})]})]})},dc=({initialPosition:e={x:20,y:80},children:t,className:r="",onClose:n,zIndex:a,onFocus:i})=>{const[o,s]=j.useState(e),[l,u]=j.useState(!1),[f,d]=j.useState({x:0,y:0}),h=j.useRef(null),p=(w,x,g)=>{i&&i(),!(g.closest("button")||g.closest("input"))&&(u(!0),d({x:w-o.x,y:x-o.y}))},m=w=>{p(w.clientX,w.clientY,w.target)},y=w=>{const x=w.touches[0];p(x.clientX,x.clientY,w.target)};return j.useEffect(()=>{const w=g=>{var v,S;if(l){g.cancelable&&g.preventDefault();const b="touches"in g?g.touches[0].clientX:g.clientX,k="touches"in g?g.touches[0].clientY:g.clientY,P=b-f.x,C=k-f.y,N=window.innerWidth-(((v=h.current)==null?void 0:v.offsetWidth)||100),O=window.innerHeight-(((S=h.current)==null?void 0:S.offsetHeight)||100);s({x:Math.max(0,Math.min(P,N)),y:Math.max(0,Math.min(C,O))})}},x=()=>{u(!1)};return l&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",x),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",x)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",x),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",x)}},[l,f]),c.jsxs("div",{ref:h,style:{left:o.x,top:o.y,zIndex:a??90},onMouseDownCapture:i,className:`fixed border-2 border-black dark:border-gray-500 bg-white dark:bg-black shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] transition-shadow duration-200 ${l?"cursor-grabbing shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":""} ${r}`,children:[c.jsx("div",{onMouseDown:m,onTouchStart:y,className:"absolute inset-0 w-full h-8 cursor-grab active:cursor-grabbing z-0 touch-none bg-gray-200 dark:bg-gray-800 border-b-2 border-black dark:border-gray-500",title:"Drag to move"}),c.jsx("div",{className:"relative z-10 pointer-events-none",children:c.jsx("div",{className:"pointer-events-auto",children:t})})]})},bte=({isOpen:e,onClose:t,rawImageData:r,roi:n,selectedChannel:a,channelName:i,zIndex:o,onFocus:s,initialPosition:l})=>{const u=j.useRef(null),[f,d]=j.useState(!1),[h,p]=j.useState(null),[m,y]=j.useState(null),[w,x]=j.useState(!0),[g,v]=j.useState(!0),[S,b]=j.useState("-1"),[k,P]=j.useState("8"),[C,N]=j.useState(64),[O,E]=j.useState(45),[M,_]=j.useState(60),T=j.useRef(!1),$=j.useRef({x:0,y:0});j.useEffect(()=>{!e||!r||!n||(d(!0),y(null),setTimeout(()=>{try{const L=R_(r.data,r.width,r.height,n,a,g);L?p(L):y("Could not extract valid data from ROI.")}catch(L){console.error("2D FFT Error",L),y("Calculation Error: "+L.message)}finally{d(!1)}},50))},[e,r,n,a,g]),j.useEffect(()=>{if(!h||!u.current)return;const L=u.current,V=L.getContext("2d");if(!V)return;const ee=L.width,G=L.height;V.clearRect(0,0,ee,G),V.fillStyle="#0f172a",V.fillRect(0,0,ee,G);const W=h.width,ne=h.height,Q=h.data,B=Math.pow(10,parseFloat(S)||-1),ie=Math.pow(10,parseFloat(k)||8);let K=B,X=ie;w&&(K=Math.log10(Math.max(1e-10,B)),X=Math.log10(Math.max(1e-10,ie)));const se=X-K||1,de=ee/2,J=G/2+50,je=Math.min(ee,G)*.4,ye=.6,te=O*Math.PI/180,he=M*Math.PI/180,ve=Math.cos(te),Ke=Math.sin(te),Fe=Math.cos(he),Ae=Math.sin(he),Ue=(Ge,Dt,kt)=>{const ar=Ge*ve-Dt*Ke,kr=Ge*Ke+Dt*ve,Zr=kr*Fe-kt*Ae,vt=kr*Ae+kt*Fe;return{x:de+ar*je,y:J-Zr*je,depth:vt}},ft=Math.max(16,C),yt=Math.max(1,Math.floor(W/ft)),br=Math.max(1,Math.floor(ne/ft)),ut=(Ge,Dt)=>{let kt=Q[Dt*W+Ge];return w&&(kt=Math.log10(Math.max(1e-10,kt))),kt=Math.max(K,Math.min(X,kt)),(kt-K)/se},gr=Ge=>`hsl(${(1-Ge)*240}, 80%, 50%)`,Je=[];for(let Ge=0;Ge<ne-br;Ge+=br)for(let Dt=0;Dt<W-yt;Dt+=yt){const kt=Dt,ar=Ge,kr=Dt+yt,Zr=Ge,vt=Dt+yt,Qr=Ge+br,st=Dt,jn=Ge+br,Rn=ut(kt,ar),ha=ut(kr,Zr),un=ut(vt,Qr),Aa=ut(st,jn),It=(Rn+ha+un+Aa)/4,fn=Ue(kt/(W-1)-.5,ar/(ne-1)-.5,Rn*ye),Sr=Ue(kr/(W-1)-.5,Zr/(ne-1)-.5,ha*ye),Pn=Ue(vt/(W-1)-.5,Qr/(ne-1)-.5,un*ye),dn=Ue(st/(W-1)-.5,jn/(ne-1)-.5,Aa*ye),Jr=(fn.depth+Sr.depth+Pn.depth+dn.depth)/4;Je.push({pts:[{x:fn.x,y:fn.y},{x:Sr.x,y:Sr.y},{x:Pn.x,y:Pn.y},{x:dn.x,y:dn.y}],avgDepth:Jr,avgZ:It})}Je.sort((Ge,Dt)=>Ge.avgDepth-Dt.avgDepth),V.lineWidth=.5,Je.forEach(Ge=>{V.fillStyle=gr(Ge.avgZ),V.beginPath(),V.moveTo(Ge.pts[0].x,Ge.pts[0].y),V.lineTo(Ge.pts[1].x,Ge.pts[1].y),V.lineTo(Ge.pts[2].x,Ge.pts[2].y),V.lineTo(Ge.pts[3].x,Ge.pts[3].y),V.closePath(),V.fill()}),V.fillStyle="#aaa",V.font="10px monospace";const Vt=Ue(-.5,-.5,0),Et=Ue(.5,-.5,0),wr=Ue(-.5,.5,0),$t=Ue(.5,.5,0);V.strokeStyle="#666",V.beginPath(),V.moveTo(Vt.x,Vt.y),V.lineTo(Et.x,Et.y),V.lineTo($t.x,$t.y),V.lineTo(wr.x,wr.y),V.closePath(),V.stroke(),V.fillText("0",Vt.x-10,Vt.y+10),V.fillText("Fx",Et.x+5,Et.y),V.fillText("Fy",wr.x-15,wr.y);const Ot=Ue(-.5,-.5,ye);V.strokeStyle="#fff",V.beginPath(),V.moveTo(Vt.x,Vt.y),V.lineTo(Ot.x,Ot.y),V.stroke(),V.fillText(`10^${k}`,Ot.x-25,Ot.y),V.fillText(`10^${S}`,Vt.x-25,Vt.y)},[h,w,O,M,S,k,C]);const I=L=>{T.current=!0,$.current={x:L.clientX,y:L.clientY}},A=L=>{if(!T.current)return;const V=L.clientX-$.current.x,ee=L.clientY-$.current.y;E(G=>G-V*.5),_(G=>Math.max(0,Math.min(90,G+ee*.5))),$.current={x:L.clientX,y:L.clientY}},R=()=>{T.current=!1};return e?c.jsxs(dc,{initialPosition:l||{x:100,y:100},onClose:t,zIndex:o,onFocus:s,className:"w-[700px] h-[600px] bg-slate-900 border border-slate-700 flex flex-col overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-slate-700 bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:["2D FFT Power Spectrum - ",i,h&&c.jsxs("span",{className:"text-[10px] font-normal text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:[h.width,"x",h.height," (Chirp-Z)"]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),c.jsxs("div",{className:"p-3 bg-slate-800/80 flex flex-wrap gap-4 text-xs items-center border-b border-slate-700",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Range (10^x):"}),c.jsx("input",{type:"number",value:S,onChange:L=>b(L.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"}),c.jsx("span",{className:"text-slate-500",children:"to"}),c.jsx("input",{type:"number",value:k,onChange:L=>P(L.target.value),className:"w-10 bg-transparent text-slate-200 text-center border-b border-slate-600 focus:border-cyan-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 px-2 py-1 rounded border border-slate-600",children:[c.jsx("span",{className:"text-slate-400 font-bold",children:"Density:"}),c.jsx("input",{type:"range",min:"16",max:"128",step:"16",value:C,onChange:L=>N(Number(L.target.value)),className:"w-20 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),c.jsx("span",{className:"text-slate-300 w-6 text-right",children:C})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:L=>x(L.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-cyan-500"}),"Log Z"]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none text-slate-300 hover:text-white",children:[c.jsx("input",{type:"checkbox",checked:g,onChange:L=>v(L.target.checked),className:"rounded bg-slate-700 border-slate-600 accent-fuchsia-500"}),"Hanning"]})]}),c.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-move",children:[f&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 backdrop-blur-sm",children:c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-cyan-400 font-bold animate-pulse text-sm",children:"Computing full-size 2D FFT..."})]})}),m&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80 z-20 text-red-400 p-4 text-center",children:m}),c.jsx("canvas",{ref:u,width:700,height:500,className:"w-full h-full block",onMouseDown:I,onMouseMove:A,onMouseUp:R,onMouseLeave:R}),c.jsx("div",{className:"absolute bottom-2 right-2 text-[9px] text-slate-600 pointer-events-none",children:"Drag to Rotate"})]})]}):null},wte=.5,fv=1e-10,qS=(e,t)=>{const r=e.length-1;if(r<0)return fv;const n=t/wte*r,a=Math.round(n),i=e[Math.min(Math.max(0,a),r)]||0;return Math.max(i,fv)},kte=(e,t)=>{if(t<=0)return[1];const r=new Array(e);let n=0;for(let a=0;a<e;a++){const i=a-(e-1)/2,o=Math.exp(-(i*i)/(2*t*t));r[a]=o,n+=o}for(let a=0;a<e;a++)r[a]/=n;return r},Ste=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,onUpdateROI:o,zIndex:s,onFocus:l,initialPosition:u,initialInternalState:f,onUpdateState:d,stackFiles:h})=>{const[p,m]=j.useState((f==null?void 0:f.selectedChannel)??0),[y,w]=j.useState(()=>(f==null?void 0:f.yMinExp)||localStorage.getItem("fft_y_min")||"1.73"),[x,g]=j.useState(()=>(f==null?void 0:f.yMaxExp)||localStorage.getItem("fft_y_max")||"8.00"),[v,S]=j.useState((f==null?void 0:f.useHanning)??!0),[b,k]=j.useState((f==null?void 0:f.doAverage)??!0),[P,C]=j.useState((f==null?void 0:f.welchSegments)??1),[N,O]=j.useState((f==null?void 0:f.showH)??!0),[E,M]=j.useState((f==null?void 0:f.showV)??!0),[_,T]=j.useState((f==null?void 0:f.interlaceRows)??!1),[$,I]=j.useState((f==null?void 0:f.rowGroup)??0),[A,R]=j.useState((f==null?void 0:f.interlaceCols)??!1),[L,V]=j.useState((f==null?void 0:f.colGroup)??0),[ee,G]=j.useState(()=>(f==null?void 0:f.theoSigma)||localStorage.getItem("fft_theo_sigma")||"0.00"),[W,ne]=j.useState(()=>(f==null?void 0:f.theoKernelSize)||localStorage.getItem("fft_theo_ksize")||"3"),[Q,B]=j.useState(()=>(f==null?void 0:f.theoNoiseStd)||localStorage.getItem("fft_theo_noise")||"7.5"),[ie,K]=j.useState(()=>(f==null?void 0:f.theoScale)||localStorage.getItem("fft_theo_scale")||"1.0"),[X,se]=j.useState((f==null?void 0:f.intStart)||"0"),[de,J]=j.useState((f==null?void 0:f.intEnd)||"0.5"),[je,ye]=j.useState(!1),[te,he]=j.useState([]),[ve,Ke]=j.useState(!1),[Fe,Ae]=j.useState(0),[Ue,ft]=j.useState(null),[yt,br]=j.useState(!1),[ut,gr]=j.useState(!1),[Je,Vt]=j.useState(null),[Et,wr]=j.useState(!1),[$t,Ot]=j.useState(null),[Ge,Dt]=j.useState(u||{x:50,y:50}),[kt,ar]=j.useState(!1),[kr,Zr]=j.useState(null),[vt,Qr]=j.useState({}),st=j.useRef({x:0,y:0}),jn=i?{c0:"#3b82f6",c1:"#22c55e",c2:"#4ade80",c3:"#ef4444"}:{c0:"#ef4444",c1:"#22c55e",c2:"#4ade80",c3:"#3b82f6"},Rn=j.useMemo(()=>i?{0:"Blue",1:"Green 1",2:"Green 2",3:"Red"}:{0:"Red",1:"Green 1",2:"Green 2",3:"Blue"},[i]);j.useEffect(()=>{localStorage.setItem("fft_y_min",y),localStorage.setItem("fft_y_max",x),localStorage.setItem("fft_theo_sigma",ee),localStorage.setItem("fft_theo_ksize",W),localStorage.setItem("fft_theo_noise",Q),localStorage.setItem("fft_theo_scale",ie)},[y,x,ee,W,Q,ie]),j.useEffect(()=>{if(!e||!n||!a)return;Ke(!0),ft(null),Ae(0);const le=setTimeout(async()=>{try{const Te=p===-1?[0,1,2,3]:[p],Ie=h&&h.length>1?h:[null],it=Ie.length,et={};let St={h:0,v:0};for(let We=0;We<it;We++){Ae(We+1);let dt;if(Ie[We]){const xt=await Ie[We].arrayBuffer();dt=await o0(xt)}else dt=n;for(const xt of Te){const jt=I_(dt.data,dt.width,dt.height,a,xt,!1,v,{rows:_,rowGroup:$,cols:A,colGroup:L},b,P);jt&&(et[xt]||(et[xt]={h:new Array(jt.avgHoriz.length).fill(0),v:new Array(jt.avgVert.length).fill(0)}),jt.avgHoriz.forEach((sr,be)=>et[xt].h[be]+=sr/it),jt.avgVert.forEach((sr,be)=>et[xt].v[be]+=sr/it),St=jt.sampleCount)}}if(Object.keys(et).length===0)throw new Error("ROI too small or no data found.");const mr=1024,or=[];for(let We=0;We<mr;We++){const dt=We/(mr-1)*.5,xt={freq:parseFloat(dt.toFixed(6))};for(const jt of Te)et[jt]&&(xt[`c${jt}_h`]=qS(et[jt].h,dt),xt[`c${jt}_v`]=qS(et[jt].v,dt));or.push(xt)}Zr(St),he(or)}catch(Te){console.error("FFT Loop Failed:",Te),ft(Te.message||"Unknown error during FFT processing")}finally{Ke(!1)}},100);return()=>clearTimeout(le)},[e,n,a==null?void 0:a.x,a==null?void 0:a.y,a==null?void 0:a.w,a==null?void 0:a.h,p,v,b,P,_,$,A,L,h]);const ha=()=>{const le=parseFloat(X),Te=parseFloat(de);if(isNaN(le)||isNaN(Te))return;const Ie={},it=p===-1?[0,1,2,3]:[p],et=te.filter(St=>St.freq>=le&&St.freq<=Te);if(et.length===0){Qr({});return}it.forEach(St=>{let mr=0,or=0;et.forEach(We=>{const dt=We[`c${St}_h`],xt=We[`c${St}_v`];typeof dt=="number"&&(mr+=dt),typeof xt=="number"&&(or+=xt)}),Ie[St]={h:mr/et.length,v:or/et.length,count:et.length}}),Qr(Ie)},un=j.useMemo(()=>{const le=parseFloat(ee),Te=parseInt(W),Ie=parseFloat(Q),it=parseFloat(ie);if(isNaN(le)||isNaN(Te)||isNaN(Ie)||isNaN(it)||te.length===0)return te;const et=kte(Te,le),St=et.reduce((We,dt)=>We+dt*dt,0),mr=(Te-1)/2,or=Ie*Ie*it;return te.map(We=>{const dt=We.freq,xt=2*Math.PI*dt;let jt=0,sr=0;for(let hn=0;hn<Te;hn++){const Ln=hn-mr,en=et[hn],pn=-xt*Ln;jt+=en*Math.cos(pn),sr+=en*Math.sin(pn)}const be=jt*jt+sr*sr;return{...We,theory:Math.max(fv,or*St*be)}})},[te,ee,W,Q,ie]),Aa=le=>{le&&le.activeLabel!==void 0&&(wr(!0),Ot(Number(le.activeLabel)),Vt(null))},It=le=>{if(Et&&$t!==null&&le&&le.activeLabel!==void 0){const Te=Number(le.activeLabel);Vt([Math.min($t,Te),Math.max($t,Te)])}},fn=()=>wr(!1),Sr=(le,Te,Ie)=>{l&&l(),!(Ie.closest("button")||Ie.closest("input"))&&(ar(!0),st.current={x:le-Ge.x,y:Te-Ge.y})},Pn=le=>{Sr(le.clientX,le.clientY,le.target)},dn=le=>{const Te=le.touches[0];Sr(Te.clientX,Te.clientY,le.target)};j.useEffect(()=>{const le=Ie=>{if(kt){const it="touches"in Ie?Ie.touches[0].clientX:Ie.clientX,et="touches"in Ie?Ie.touches[0].clientY:Ie.clientY;Dt({x:it-st.current.x,y:et-st.current.y})}},Te=()=>ar(!1);return kt&&(window.addEventListener("mousemove",le),window.addEventListener("mouseup",Te),window.addEventListener("touchmove",le,{passive:!1}),window.addEventListener("touchend",Te)),()=>{window.removeEventListener("mousemove",le),window.removeEventListener("mouseup",Te),window.removeEventListener("touchmove",le),window.removeEventListener("touchend",Te)}},[kt]);const Jr=j.useMemo(()=>{if(!Je||te.length===0)return null;const[le,Te]=Je,Ie=te.filter(St=>St.freq>=le&&St.freq<=Te);if(Ie.length===0)return null;const it=p===-1?[0,1,2,3]:[p],et={};return it.forEach(St=>{["h","v"].forEach(mr=>{const or=`c${St}_${mr}`;let We=0,dt=0;for(const xt of Ie){const jt=xt[or];typeof jt=="number"&&(We+=jt,dt++)}dt>0&&(et[`${or}_sigma`]=Math.sqrt(We/dt))})}),{count:Ie.length,stats:et}},[Je,te,p]),zt=()=>{if(te.length===0)return;let le=1/0,Te=-1/0;if(te.forEach(mr=>{mr.freq<.01||mr.freq>.49||Object.keys(mr).forEach(or=>{if(or==="freq"||or==="theory")return;const We=mr[or];typeof We=="number"&&We>0&&(We<le&&(le=We),We>Te&&(Te=We))})}),le===1/0)return;const Ie=Math.log10(le),it=Math.log10(Te),et=it-Ie,St=(et===0?1:et)*.1;w((Ie-St).toFixed(2)),g((it+St).toFixed(2))},ir=(le,Te)=>{a&&o&&o({...a,x:a.x+le,y:a.y+Te})},Rt=(le,Te)=>{a&&o&&o({...a,w:Math.max(2,a.w+le),h:Math.max(2,a.h+Te)})};return e?c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden resize-both min-w-[750px] min-h-[500px]",style:{left:Ge.x,top:Ge.y,width:"1000px",height:"850px",zIndex:s??100},onMouseDownCapture:l,children:[c.jsxs("div",{className:`flex justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 flex-shrink-0 bg-gray-50 dark:bg-slate-800 z-50 relative select-none touch-none ${kt?"cursor-grabbing":"cursor-grab"}`,onMouseDown:Pn,onTouchStart:dn,children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:["Power Spectrum Analysis",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-2 py-1 rounded text-gray-500 border border-gray-200 dark:border-slate-600 shadow-sm",children:h&&h.length>1?`Stack Avg (${h.length} frames)`:"Single Mode"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-900/80 border-b border-gray-200 dark:border-slate-800 flex-shrink-0 z-40 relative px-4 py-3 gap-3 overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase tracking-widest",children:"Channel"}),c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 rounded-lg p-0.5 border border-gray-200 dark:border-slate-700 shadow-inner",children:[c.jsx("button",{onClick:()=>m(-1),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===-1?"bg-slate-700 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:"All"}),[0,1,2,3].map(le=>c.jsx("button",{onClick:()=>m(le),className:`px-3 py-1 rounded text-[10px] font-bold transition-all ${p===le?"bg-cyan-600 text-white shadow-md":"text-gray-500 dark:text-slate-500 hover:bg-white dark:hover:bg-slate-700"}`,children:Rn[le]},le))]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("button",{onClick:()=>ye(!0),className:"flex items-center gap-1.5 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold rounded-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-95 group border border-indigo-400/30",children:[c.jsx("svg",{className:"w-3.5 h-3.5 group-hover:animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"2D Diagonal"]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700 mx-2"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Model"}),c.jsx("div",{className:"flex gap-2",children:[{label:"KSize",val:W,set:ne,w:"w-10"},{label:"Sigma",val:ee,set:G,w:"w-12"},{label:"Noise()",val:Q,set:B,w:"w-12"},{label:"Scale",val:ie,set:K,w:"w-12"}].map(le=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[8px] text-gray-400 dark:text-slate-500 uppercase font-bold mb-0.5",children:le.label}),c.jsx("input",{type:"text",value:le.val,onChange:Te=>le.set(Te.target.value),className:`${le.w} text-[11px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-center text-gray-900 dark:text-slate-100 outline-none focus:border-indigo-500 shadow-sm`})]},le.label))})]})]}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 mr-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-fuchsia-600 dark:text-fuchsia-500 uppercase tracking-widest",children:"Welch"}),c.jsx("input",{type:"range",min:"1",max:"16",step:"1",value:P,onChange:le=>C(parseInt(le.target.value)),className:"w-24 h-1.5 bg-gray-300 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-fuchsia-500"}),c.jsx("span",{className:"text-[10px] font-mono text-fuchsia-600 dark:text-fuchsia-400 w-4 font-bold",children:P})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col gap-1 px-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:_,onChange:le=>T(le.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Row Int."]}),c.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer text-[10px] text-gray-500 dark:text-slate-400 hover:text-gray-900 dark:hover:text-slate-200 select-none",children:[c.jsx("input",{type:"checkbox",checked:A,onChange:le=>R(le.target.checked),className:"w-3 h-3 rounded text-cyan-600 border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800"})," Col Int."]})]}),c.jsxs("div",{className:"flex flex-col gap-1.5 bg-gray-100 dark:bg-slate-800/60 p-1.5 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${v?"bg-fuchsia-600 border-fuchsia-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:v&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:v,onChange:le=>S(le.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Hanning"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[c.jsx("div",{className:`w-3.5 h-3.5 rounded-md border flex items-center justify-center transition-colors ${b?"bg-cyan-600 border-cyan-600":"bg-white dark:bg-slate-900 border-gray-300 dark:border-slate-600"}`,children:b&&c.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:4,children:c.jsx("path",{d:"M5 13l4 4L19 7"})})}),c.jsx("input",{type:"checkbox",checked:b,onChange:le=>k(le.target.checked),className:"hidden"}),c.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-slate-300",children:"Average"})]})]}),c.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("button",{onClick:()=>O(!N),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${N?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-cyan-400":"bg-gray-400"}`})," H"]}),c.jsxs("button",{onClick:()=>M(!E),className:`px-2.5 py-1 rounded-md border text-[11px] font-bold transition-all flex items-center gap-1.5 ${E?"bg-cyan-900/40 text-cyan-400 border-cyan-500 shadow-[0_0_8px_rgba(6,182,212,0.3)]":"bg-white dark:bg-slate-900 text-gray-400 border-gray-300 dark:border-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${N?"bg-cyan-400":"bg-gray-400"}`})," V"]})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:()=>gr(!ut),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${ut?"bg-emerald-600 text-white border-emerald-600 shadow-md":"bg-white dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50"}`,children:""}),c.jsx("button",{onClick:()=>br(!yt),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border ${yt?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-50"}`,children:"ROI"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 justify-end border-t border-gray-200 dark:border-slate-800/50 pt-2.5",children:[c.jsx("button",{onClick:zt,className:"px-4 py-1 text-[10px] font-bold bg-cyan-600/10 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-600/20 rounded-md border border-cyan-500/30 transition-all uppercase tracking-widest shadow-sm",children:"Auto"}),c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:["Y-AXIS (LOG)",c.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md overflow-hidden shadow-sm",children:[c.jsx("input",{type:"text",value:y,onChange:le=>w(le.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100 border-r border-gray-200 dark:border-slate-700"}),c.jsx("span",{className:"px-2 text-gray-400",children:"to"}),c.jsx("input",{type:"text",value:x,onChange:le=>g(le.target.value),className:"w-14 px-2 py-1 bg-transparent text-center outline-none text-gray-900 dark:text-slate-100"})]})]})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-2 relative bg-gray-50/30 dark:bg-slate-900/30",children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[50] select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 500 100",className:"w-3/4 h-auto drop-shadow-lg",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),ve&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-[55] bg-white/90 dark:bg-slate-900/90 backdrop-blur-[2px]",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:"Computing FFT Stack..."}),h&&h.length>1&&c.jsxs("span",{className:"text-xs text-gray-500 mt-2 font-mono",children:["Processing frame ",Fe," / ",h.length]})]}),Ue?c.jsx("div",{className:"flex items-center justify-center h-full text-red-500 font-semibold",children:Ue}):c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl p-2 flex flex-col relative z-20 shadow-xl overflow-hidden",children:[c.jsx("div",{className:"flex-1 relative z-10",onMouseDown:Aa,onMouseMove:It,onMouseUp:fn,style:{cursor:Et?"col-resize":"crosshair"},children:c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(hl,{data:un,margin:{top:10,right:10,bottom:20,left:0},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.08}),c.jsx(Jn,{dataKey:"freq",type:"number",domain:[0,.5],tickCount:6,tick:{fill:"#6b7280",fontSize:10},label:{value:"Frequency (cy/px)",position:"insideBottom",offset:-10,fill:"#6b7280",fontSize:11}}),c.jsx(ea,{scale:"log",domain:[Math.pow(10,parseFloat(y)),Math.pow(10,parseFloat(x))],allowDataOverflow:!0,tick:{fill:"#6b7280",fontSize:10},tickFormatter:le=>Number(le).toExponential(0),width:45}),c.jsx(Xr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"1px solid #334155",color:"#f3f4f6",fontSize:"11px",borderRadius:"8px"},formatter:le=>[Number(le).toExponential(3),""],labelFormatter:le=>`Freq: ${Number(le).toFixed(4)}`}),c.jsx(si,{wrapperStyle:{fontSize:"10px"}}),c.jsx(Er,{type:"monotone",dataKey:"theory",name:"Theory Model",stroke:"#6366f1",strokeWidth:2,dot:!1,isAnimationActive:!1}),[0,1,2,3].flatMap(le=>{if(p!==-1&&p!==le)return[];const Te=`c${le}_h`,Ie=`c${le}_v`,it=jn[`c${le}`],et=[];return N&&et.push(c.jsx(Er,{type:"linear",dataKey:Te,name:`${Rn[le]} (H)`,stroke:it,strokeWidth:1,dot:!1,isAnimationActive:!1},`${le}_h`)),E&&et.push(c.jsx(Er,{type:"linear",dataKey:Ie,name:`${Rn[le]} (V)`,stroke:it,strokeWidth:1,strokeDasharray:"3 3",dot:!1,isAnimationActive:!1},`${le}_v`)),et}),Je&&c.jsx(Pf,{x1:Je[0],x2:Je[1],fill:"#8884d8",fillOpacity:.15})]})})}),Jr&&Je&&c.jsxs("div",{className:"absolute bottom-12 left-12 bg-slate-900/90 backdrop-blur-md p-3 rounded-lg border border-indigo-500/50 shadow-2xl z-30 text-[10px] font-mono text-slate-100",children:[c.jsxs("div",{className:"text-indigo-400 font-bold mb-1 border-b border-indigo-500/30 pb-1",children:["Range: ",Je[0].toFixed(3),"-",Je[1].toFixed(3)]}),Object.entries(Jr.stats).map(([le,Te])=>c.jsxs("div",{className:"flex justify-between gap-4",children:[c.jsxs("span",{className:"text-slate-400",children:[le,":"]}),c.jsx("span",{className:"font-bold text-cyan-400",children:Te.toFixed(5)})]},le))]})]})]}),ut&&c.jsxs("div",{className:"absolute top-48 right-8 z-[55] w-72 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:[c.jsx("h4",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 mb-2 border-b border-gray-100 dark:border-slate-800 pb-1",children:"Range Averaging"}),c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("input",{type:"number",step:"0.01",value:X,onChange:le=>se(le.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.01",value:de,onChange:le=>J(le.target.value),className:"w-16 px-1 py-0.5 text-xs border rounded bg-transparent dark:border-slate-600 dark:text-white"}),c.jsx("button",{onClick:ha,className:"flex-1 bg-emerald-600 text-white text-[10px] font-bold py-1 rounded",children:"Avg"})]}),c.jsx("div",{className:"flex flex-col gap-2 max-h-48 overflow-y-auto",children:[0,1,2,3].map(le=>{const Te=vt[le];if(!Te)return null;const Ie=jn[`c${le}`];return c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-2 rounded text-[10px] border border-gray-100 dark:border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",style:{color:Ie},children:[Rn[le]," ",c.jsxs("span",{className:"text-gray-400 font-normal",children:["(",Te.count," pts)"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-2 text-gray-700 dark:text-slate-300 font-mono",children:[c.jsxs("div",{children:["H: ",Te.h.toExponential(3)]}),c.jsxs("div",{children:["V: ",Te.v.toExponential(3)]})]})]},le)})})]}),yt&&c.jsx("div",{className:"absolute top-48 right-8 z-[55] w-56 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-gray-200 dark:border-slate-700 p-4 animate-in slide-in-from-top-2",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Move"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>ir(0,-1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>ir(-1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>ir(1,0),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>ir(0,1),className:"p-1.5 bg-gray-100 dark:bg-slate-800 rounded",children:""}),c.jsx("div",{})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-[9px] uppercase font-bold text-gray-400 mb-1",children:"Size"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[c.jsx("button",{onClick:()=>Rt(2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W+"}),c.jsx("button",{onClick:()=>Rt(-2,0),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"W-"}),c.jsx("button",{onClick:()=>Rt(0,2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H+"}),c.jsx("button",{onClick:()=>Rt(0,-2),className:"p-1 bg-gray-100 dark:bg-slate-800 rounded",children:"H-"})]})]})]})}),c.jsx(bte,{isOpen:je,onClose:()=>ye(!1),rawImageData:n,roi:a,selectedChannel:p===-1?0:p,channelName:p===-1?"Red (Default)":Rn[p],zIndex:s?s+2:102,onFocus:l})]}):null},jte=({isOpen:e,onClose:t,onMinimize:r,rawImageData:n,roi:a,isBGGR:i,zIndex:o,onFocus:s,initialPosition:l,initialInternalState:u,onUpdateState:f})=>{const[d,h]=j.useState((u==null?void 0:u.selectedChannelKey)||"G1"),[p,m]=j.useState((u==null?void 0:u.blackLevel)??0),[y,w]=j.useState((u==null?void 0:u.whiteLevel)??16383),[x,g]=j.useState(null),[v,S]=j.useState(!1),[b,k]=j.useState(null),[P,C]=j.useState(l||{x:150,y:150}),[N,O]=j.useState(!1),E=j.useRef({x:0,y:0});j.useEffect(()=>{f&&f({selectedChannelKey:d,blackLevel:p,whiteLevel:y})},[d,p,y]),j.useEffect(()=>{if(e&&n&&!u){const A=n.blackLevels?Math.floor(n.blackLevels[1]):0;m(A),w(n.whiteLevel||16383),g(null)}},[e,n]);const M=()=>{if(!n||!a)return;k(null),S(!0);const R=(i?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3})[d];setTimeout(()=>{try{const L=L_(n.data,n.width,n.height,a,R,p,y);L?g(L):(k("No data found in selection with current filters."),g(null))}catch(L){console.error("Analysis failed:",L),k(L.message||"Analysis error")}finally{S(!1)}},50)},_=(A,R,L)=>{s&&s(),!(L.closest("button")||L.closest("input")||L.closest("select"))&&(O(!0),E.current={x:A-P.x,y:R-P.y})},T=A=>{_(A.clientX,A.clientY,A.target)},$=A=>{const R=A.touches[0];_(R.clientX,R.clientY,A.target)};if(j.useEffect(()=>{const A=L=>{if(N){const V="touches"in L?L.touches[0].clientX:L.clientX,ee="touches"in L?L.touches[0].clientY:L.clientY;C({x:V-E.current.x,y:ee-E.current.y})}},R=()=>O(!1);return N&&(window.addEventListener("mousemove",A),window.addEventListener("mouseup",R),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",R)),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",A),window.removeEventListener("touchend",R)}},[N]),!e)return null;const I=i?["B","G1","G2","R"]:["R","G1","G2","B"];return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl resize-both overflow-hidden min-w-[500px] min-h-[400px] w-[900px] h-[700px]",style:{left:P.x,top:P.y,zIndex:o??100},onMouseDownCapture:s,children:[c.jsxs("div",{className:`flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 select-none touch-none ${N?"cursor-grabbing":"cursor-grab"}`,onMouseDown:T,onTouchStart:$,children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2 pointer-events-none",children:"Quantization Step Analysis"}),c.jsxs("div",{className:"flex items-center gap-1",children:[r&&c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 p-2",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 border-b border-gray-200 dark:border-slate-700 flex flex-wrap gap-4 items-end flex-shrink-0",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Channel"}),c.jsx("select",{value:d,onChange:A=>h(A.target.value),className:"bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded px-3 py-1.5 text-sm text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-cyan-500 min-w-[80px]",children:I.map(A=>c.jsx("option",{value:A,children:A},A))})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Black Level"}),c.jsx("input",{type:"number",value:p,onChange:A=>m(Number(A.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"White Level"}),c.jsx("input",{type:"number",value:y,onChange:A=>w(Number(A.target.value)),className:"w-24 px-3 py-1.5 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded outline-none text-sm text-gray-900 dark:text-slate-100"})]}),c.jsx("button",{onClick:M,disabled:v,className:"mb-0.5 px-5 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded shadow-sm hover:shadow transition-colors disabled:opacity-50 text-sm",children:v?"Analyzing...":"Run Analysis"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-4 bg-white dark:bg-slate-900 min-h-0",children:[b&&c.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm text-center flex-shrink-0",children:b}),!x&&!v&&!b&&c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-slate-500 h-full",children:c.jsx("p",{children:"Configure parameters and click Run Analysis"})}),x&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 flex-shrink-0",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Unique Codes"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:x.uniqueCount})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-slate-400 uppercase mb-1",children:"Total Diffs"}),c.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:x.diffCount})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden flex-shrink-0",children:[c.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700 text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Step Distribution"}),c.jsx("div",{className:"p-4 flex flex-wrap gap-x-8 gap-y-2 text-sm font-mono max-h-32 overflow-y-auto",children:Object.entries(x.stepCounts).sort((A,R)=>parseFloat(A[0])-parseFloat(R[0])).map(([A,R])=>c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("span",{className:"text-gray-500 dark:text-slate-400",children:["Step ",A,":"]}),c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:String(R)})]},A))})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-2 relative overflow-hidden min-h-[300px]",children:[c.jsx("div",{className:"absolute top-2 left-4 text-xs font-bold text-gray-400 dark:text-slate-500 pointer-events-none z-20 bg-white/80 dark:bg-slate-900/80 px-2 rounded",children:"Step Size vs Code Value"}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-0 pointer-events-none select-none opacity-10 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),c.jsx("div",{className:"relative z-10 w-full h-full",children:c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(hl,{data:x.plotData,margin:{top:20,right:20,bottom:20,left:10},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Jn,{dataKey:"x",type:"number",domain:["auto","auto"],tick:{fill:"#9ca3af",fontSize:10},label:{value:"Code Value (Shifted)",position:"insideBottom",offset:-10,fill:"#9ca3af",fontSize:11}}),c.jsx(ea,{tick:{fill:"#9ca3af",fontSize:10},domain:[0,"auto"],allowDataOverflow:!1,label:{value:"Step Size (Delta)",angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:11}}),c.jsx(Xr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6",fontSize:"12px"},labelFormatter:A=>`Val: ${A}`,formatter:A=>[A,"Step Size"]}),c.jsx(Er,{type:"stepAfter",dataKey:"y",stroke:"#0891b2",strokeWidth:1.5,dot:{r:1.5,fill:"#0891b2",strokeWidth:0},activeDot:{r:4},isAnimationActive:!1})]})})})]})]})]})]})},Pte=({isOpen:e,onClose:t,rawImageData:r,roi:n,isBGGR:a,zIndex:i,onFocus:o,initialPosition:s,stackFiles:l})=>{const[u,f]=j.useState("cross"),[d,h]=j.useState("R"),[p,m]=j.useState("B"),[y,w]=j.useState("H"),[x,g]=j.useState(null),[v,S]=j.useState(!1),[b,k]=j.useState(0),[P,C]=j.useState(0),[N,O]=j.useState("single"),E=a?{B:0,G1:1,G2:2,R:3}:{R:0,G1:1,G2:2,B:3},M=a?["B","G1","G2","R"]:["R","G1","G2","B"],_=async T=>{if(!r||!n)return;S(!0),O(T),k(0),g(null);let $=E[d],I=u==="cross"?E[p]:$,A=0,R=0;u==="self"&&(y==="H"?R=2:A=2),setTimeout(async()=>{try{let L={sumCov:0,sumVar1:0,sumVar2:0,n:0};if(T==="single")L=n2(r.data,r.width,r.height,n,$,I,A,R);else if(l&&l.length>0)for(let V=0;V<l.length;V++){k(V+1);const ee=await l[V].arrayBuffer(),G=await o0(ee),W=n2(G.data,G.width,G.height,n,$,I,A,R);L.sumCov+=W.sumCov,L.sumVar1+=W.sumVar1,L.sumVar2+=W.sumVar2,L.n+=W.n}C(L.n),g($_(L))}catch(L){console.error("Pearson calculation failed",L),alert("Calculation error: "+L.message)}finally{S(!1)}},50)};return e?c.jsxs(dc,{initialPosition:s||{x:200,y:200},onClose:t,zIndex:i,onFocus:o,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200 flex items-center gap-2",children:["Pearson Correlation",c.jsx("span",{className:"text-[10px] font-normal bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-gray-200 dark:border-slate-600",children:"r"})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>f("cross"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="cross"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Cross-Channel"}),c.jsx("button",{onClick:()=>f("self"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-all ${u==="self"?"bg-indigo-600 text-white shadow":"text-gray-500 dark:text-slate-400 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:"Self-Adjacent"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 1":"Channel"}),c.jsx("select",{value:d,onChange:T=>h(T.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:M.map(T=>c.jsx("option",{value:T,children:T},T))})]}),c.jsx("div",{className:"text-gray-300 dark:text-slate-600 mt-4 font-mono",children:u==="cross"?"":""}),c.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[9px] uppercase font-bold text-gray-400",children:u==="cross"?"Channel 2":"Direction"}),u==="cross"?c.jsx("select",{value:p,onChange:T=>m(T.target.value),className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded px-2 py-1.5 text-xs text-gray-700 dark:text-slate-200 outline-none focus:ring-1 focus:ring-indigo-500",children:M.map(T=>c.jsx("option",{value:T,children:T},T))}):c.jsxs("div",{className:"flex h-[28px] bg-gray-100 dark:bg-slate-800 rounded border border-gray-200 dark:border-slate-700 p-0.5",children:[c.jsx("button",{onClick:()=>w("H"),className:`flex-1 text-[9px] font-bold rounded ${y==="H"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Horiz"}),c.jsx("button",{onClick:()=>w("V"),className:`flex-1 text-[9px] font-bold rounded ${y==="V"?"bg-slate-300 dark:bg-slate-600 text-indigo-600 dark:text-indigo-400":"text-gray-400"}`,children:"Vert"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx("button",{onClick:()=>_("single"),disabled:v,className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs",children:v&&N==="single"?"Calculating...":"Calc Current Frame"}),l&&l.length>0&&c.jsxs("button",{onClick:()=>_("stack"),disabled:v,className:"w-full py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-400 text-white font-bold rounded shadow-md transition-all active:scale-95 text-xs flex flex-col items-center justify-center",children:[c.jsx("span",{children:"Calc Stack Concatenated"}),v&&N==="stack"&&c.jsxs("span",{className:"text-[9px] font-normal opacity-80",children:["Progress: ",b," / ",l.length]})]})]}),x!==null&&c.jsxs("div",{className:"mt-2 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700 text-center animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500 mb-1",children:[u==="cross"?"Cross-Channel":`Self-Adj (${y})`," r"]}),c.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 dark:text-indigo-400 select-all",style:{fontSize:"24px"},children:x.toFixed(5)}),c.jsxs("div",{className:"text-[9px] text-gray-400 mt-2 font-mono",children:["N = ",P.toLocaleString()," pairs"]}),c.jsx("div",{className:"mt-3 text-[10px] font-bold",children:Math.abs(x)>.5?c.jsx("span",{className:"text-red-500",children:"Significant Correlation"}):Math.abs(x)>.1?c.jsx("span",{className:"text-amber-500",children:"Weak Correlation"}):c.jsx("span",{className:"text-emerald-500",children:"Near-Zero (Uncorrelated)"})})]})]}),c.jsx("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 text-[9px] text-gray-400 dark:text-slate-600 italic border-t border-gray-100 dark:border-slate-800",children:u==="cross"?"Comparing two color channels in the same Bayer 2x2 cells.":`Comparing pixel (r,c) with (r${y==="V"?"+2":""}, c${y==="H"?"+2":""}) in the same channel.`})]}):null},Cte=[{href:"https://y-g-jiang.github.io/CBLD.html",text:" (Primary Source)",abbr:"CBLD",description:"ISO",highlight:!0},{href:"https://y-G-jiang.github.io/LAC.html",text:"",abbr:"LAC",description:""},{href:"https://y-G-jiang.github.io/CCGV.html",text:"adobeIECMF",abbr:"CCGV",description:"acrRAWxy"},{href:"https://y-G-jiang.github.io/JTJS.html",text:"",abbr:"JTJS",description:"CMF/"},{href:"https://y-G-jiang.github.io/XJZS.html",text:"",abbr:"XJZS",description:""}],Ote=["5","9","0","8","2","1","4","7","3","6"],ZS=e=>!e||e==="--"?"--":String(e).split("").map(t=>{const r=parseInt(t);return isNaN(r)?t:Ote[r]}).join(""),Nte=({isOpen:e,onClose:t})=>{const[r,n]=j.useState({pv:"--",uv:"--"});return j.useEffect(()=>{if(e){const a=()=>{const o=document.getElementById("vercount_value_site_pv"),s=document.getElementById("vercount_value_site_uv");o&&s&&n({pv:o.innerText||"--",uv:s.innerText||"--"})};a();const i=setTimeout(a,1e3);return()=>clearTimeout(i)}},[e]),e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"About / Tools"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-1 rounded hover:bg-gray-200 dark:hover:bg-slate-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 relative",children:[c.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 text-center",children:c.jsxs("p",{className:"text-lg text-gray-700 dark:text-slate-300",children:[c.jsx("span",{className:"font-bold mr-2",children:"about:"}),c.jsx("a",{href:"https://y-g-jiang.github.io/JOindex.html",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline break-all font-mono",children:"https://y-g-jiang.github.io/JOindex.html"})]})}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"}),c.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-slate-500 uppercase tracking-wider",children:"Primary Resources"}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 flex-1"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:Cte.map(a=>c.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:`group block p-4 rounded-xl border transition-all duration-200 relative overflow-hidden ${a.highlight?"border-cyan-500 dark:border-cyan-400 bg-cyan-50/30 dark:bg-cyan-900/10 shadow-lg scale-[1.02] ring-2 ring-cyan-500/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800/30 hover:bg-gray-50 dark:hover:bg-slate-800 hover:border-cyan-500"}`,children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-cyan-500/5 to-transparent -mr-8 -mt-8 rounded-full pointer-events-none group-hover:from-cyan-500/10 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded transition-colors border ${a.highlight?"bg-cyan-600 text-white border-cyan-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600 group-hover:border-cyan-200"}`,children:a.abbr}),c.jsx("h3",{className:`font-bold transition-colors ${a.highlight?"text-cyan-700 dark:text-cyan-300":"text-gray-800 dark:text-slate-200 group-hover:text-cyan-600"}`,children:a.text})]}),c.jsx("p",{className:`text-xs pl-1 transition-colors relative z-10 ${a.highlight?"text-cyan-600/80 dark:text-cyan-400/80":"text-gray-500 dark:text-slate-400"}`,children:a.description})]},a.abbr))}),c.jsx("div",{className:"flex justify-end mt-4",children:c.jsx("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded border border-gray-200 dark:border-slate-800 p-1.5 opacity-40 hover:opacity-100 transition-opacity cursor-default select-none group",children:c.jsxs("div",{className:"font-mono text-[10px] text-gray-400 dark:text-slate-600 leading-tight text-right flex flex-col",children:[c.jsx("span",{className:"group-hover:text-indigo-400 transition-colors",children:ZS(r.pv)}),c.jsx("span",{className:"group-hover:text-emerald-400 transition-colors",children:ZS(r.uv)})]})})})]})]})}):null},Mte=({isOpen:e,onClose:t,data:r,fileName:n,warning:a})=>{const[i,o]=j.useState(""),s=f=>{const d=new WeakSet;try{return JSON.stringify(f,(h,p)=>{if(typeof p=="bigint")return p.toString()+"n";if(typeof p=="object"&&p!==null){if(d.has(p))return"[Circular]";if(d.add(p),ArrayBuffer.isView(p))return`[${p.constructor.name}]`}return p})}catch{return"[Unable to serialize object]"}},l=j.useMemo(()=>{if(!r)return[];const f=[],d=(h,p=0)=>{if(p>5)return"...";if(h==null)return String(h);if(h instanceof Date)return h.toLocaleString();if(typeof h=="number")return h.toString();if(typeof h=="string")return h;if(typeof h=="bigint")return h.toString()+"n";if(ArrayBuffer.isView(h))return`<${h.constructor.name} len=${h.length} bytes=${h.byteLength}>`;if(h instanceof ArrayBuffer)return`<ArrayBuffer bytes=${h.byteLength}>`;if(typeof h=="object"){if(Array.isArray(h))return h.length===0?"[]":h.length>20?`[${h.slice(0,10).map(w=>typeof w=="number"?w.toFixed(2):d(w,p+1)).join(", ")}, ... (+${h.length-10} more)]`:`[${h.map(y=>typeof y=="number"?Number.isInteger(y)?y:y.toFixed(4):d(y,p+1)).join(", ")}]`;try{const m=Object.keys(h);return m.length>5?`{Object with ${m.length} keys}`:s(h)}catch{return"<Complex Object>"}}return String(h)};try{if(typeof r!="object")return[{key:"Value",value:String(r)}];Object.keys(r).sort().forEach(p=>{if(p==="MakerNote"||p==="UserComment"||p.includes("Strip")||p.includes("Offset")){f.push({key:p,value:"<Binary/Internal Data>"});return}const m=r[p];f.push({key:p,value:d(m)})})}catch(h){console.error("Error processing EXIF data:",h),f.push({key:"Error",value:"Failed to process metadata structure."})}return f},[r]);if(!e)return null;const u=l.filter(f=>f.key.toLowerCase().includes(i.toLowerCase())||f.value.toLowerCase().includes(i.toLowerCase()));return c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100",children:"EXIF Data"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400 mt-1 font-mono truncate",children:n})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 px-4 py-2 border-b border-amber-100 dark:border-amber-800/50 text-center",children:c.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 whitespace-pre-line font-medium leading-relaxed",children:a})}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:c.jsxs("div",{className:"relative",children:[c.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),c.jsx("input",{type:"text",placeholder:"Search tags...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded-lg text-sm focus:ring-2 focus:ring-cyan-500 outline-none text-gray-900 dark:text-slate-100 transition-colors placeholder-gray-400"})]})}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700",children:u.length>0?c.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800 sticky top-0 shadow-sm z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-1/3 border-b border-gray-200 dark:border-slate-700",children:"Tag Name"}),c.jsx("th",{className:"py-3 px-5 font-semibold text-xs text-gray-500 dark:text-slate-400 uppercase tracking-wider w-2/3 border-b border-gray-200 dark:border-slate-700",children:"Value"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:u.map(f=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors group",children:[c.jsx("td",{className:"py-2 px-5 text-sm font-medium text-cyan-600 dark:text-cyan-400 font-mono break-words align-top",children:f.key}),c.jsx("td",{className:"py-2 px-5 text-sm text-gray-700 dark:text-slate-300 font-mono break-words align-top group-hover:text-gray-900 dark:group-hover:text-slate-100",children:f.value})]},f.key))})]}):c.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-slate-500",children:c.jsxs("p",{children:['No tags found matching "',i,'"']})})}),c.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 flex justify-end rounded-b-2xl",children:c.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-800 dark:text-white rounded-lg text-sm font-semibold transition-colors",children:"Close"})})]})})},_te=100,Dg=e=>{if(e.length===0)return 0;if(e.length===1)return e[0];if(e.length===2)return .5*(e[0]+e[1]);let t=[...e].sort((r,n)=>r-n);for(;t.length>4;){let r=1/0,n=0;const a=t.length,i=Math.floor(a/2);for(let o=0;o<=a-i;o++){const s=t[o+i-1]-t[o];s<r&&(r=s,n=o)}t=t.slice(n,n+i)}return t.reduce((r,n)=>r+n,0)/t.length},QS=({min:e,max:t,value:r,onChange:n,vertical:a=!1,logScale:i=!1})=>{const o=j.useRef(null),s=j.useRef(null),l=j.useCallback(g=>{const v=i?Math.max(1e-6,e):e,S=i?Math.max(v*1.0001,t):t,b=Math.max(v,Math.min(S,g));if(i){const k=Math.log10(v),P=Math.log10(S);return(Math.log10(b)-k)/(P-k)}return(b-v)/(S-v)},[e,t,i]),u=j.useCallback(g=>{const v=i?Math.max(1e-6,e):e,S=i?Math.max(v*1.0001,t):t;if(i){const b=Math.log10(v),k=Math.log10(S);return Math.pow(10,b+g*(k-b))}return v+g*(S-v)},[e,t,i]),f=(g,v)=>{g.preventDefault(),g.stopPropagation(),s.current=v;const S=k=>{if(!s.current||!o.current)return;const P=o.current.getBoundingClientRect();let C=0;a?C=(P.bottom-k.clientY)/P.height:C=(k.clientX-P.left)/P.width,C=Math.max(0,Math.min(1,C));const N=u(C);if(s.current==="min"){const O=r[1];n([Math.min(N,O),O])}else{const O=r[0];n([O,Math.max(N,O)])}},b=()=>{s.current=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",b)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",b)},d=l(r[0])*100,h=l(r[1])*100,p=a?{left:"50%",top:0,bottom:0,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:0,right:0,height:"4px",transform:"translateY(-50%)"},m=a?{left:"50%",bottom:`${d}%`,height:`${h-d}%`,width:"4px",transform:"translateX(-50%)"}:{top:"50%",left:`${d}%`,width:`${h-d}%`,height:"4px",transform:"translateY(-50%)"},y="absolute w-3 h-3 bg-white border-2 border-cyan-600 rounded-full shadow-md cursor-pointer hover:scale-125 transition-transform z-10",w=a?{left:"50%",bottom:`${d}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${d}%`,transform:"translate(-50%, -50%)"},x=a?{left:"50%",bottom:`${h}%`,transform:"translate(-50%, 50%)"}:{top:"50%",left:`${h}%`,transform:"translate(-50%, -50%)"};return c.jsxs("div",{ref:o,className:`relative select-none ${a?"h-full w-4 py-2":"w-full h-4 px-2"}`,children:[c.jsx("div",{className:"absolute bg-gray-300 dark:bg-slate-600 rounded-full",style:p}),c.jsx("div",{className:"absolute bg-cyan-500 dark:bg-cyan-400 rounded-full",style:m}),c.jsx("div",{className:y,style:w,onMouseDown:g=>f(g,"min")}),c.jsx("div",{className:y,style:x,onMouseDown:g=>f(g,"max")})]})},Ate=({isOpen:e,onClose:t,data:r,blackLevel:n,imageHeight:a,isBGGR:i,importedMetadata:o,theme:s,initialCameraModel:l,initialISO:u})=>{const[f,d]=j.useState("Noise"),[h,p]=j.useState(!0),[m,y]=j.useState(null),[w,x]=j.useState("default"),[g,v]=j.useState(!1),[S,b]=j.useState(!1),[k,P]=j.useState({R:!0,G1:!0,G2:!0,B:!0}),[C,N]=j.useState(""),[O,E]=j.useState(""),[M,_]=j.useState(""),[T,$]=j.useState(""),[I,A]=j.useState("10"),[R,L]=j.useState(""),[V,ee]=j.useState("0 0 0 0"),[G,W]=j.useState("0 0 0 0"),[ne,Q]=j.useState(!1),[B,ie]=j.useState(null),[K,X]=j.useState(!1),[se,de]=j.useState(0),[J,je]=j.useState([]),[ye,te]=j.useState(""),[he,ve]=j.useState(""),Ke=()=>{const U=parseFloat(ye),q=parseFloat(he);!isNaN(U)&&!isNaN(q)&&(je([...J,{id:Date.now(),x:U,y:q}]),te(""),ve(""))},[Fe,Ae]=j.useState(()=>localStorage.getItem("ptc_tester_name")||""),[Ue,ft]=j.useState(""),[yt,br]=j.useState("");j.useEffect(()=>{localStorage.setItem("ptc_tester_name",Fe)},[Fe]);const ut=j.useRef(ne),gr=j.useRef(K),Je=j.useRef(se);j.useEffect(()=>{ut.current=ne,gr.current=K,Je.current=se},[ne,K,se]);const[Vt,Et]=j.useState(null),[wr,$t]=j.useState({min:.01,max:90}),[Ot,Ge]=j.useState({readNoise:0,gain:1,prnu:.5}),[Dt,kt]=j.useState(2e6),ar=j.useRef(Ot),kr=j.useRef(wr),Zr=j.useRef(Dt);j.useEffect(()=>{ar.current=Ot,kr.current=wr,Zr.current=Dt},[Ot,wr,Dt]);const[vt,Qr]=j.useState({read:"0",gain:"1.0",prnu:"0.5",rangeMin:"0.01",rangeMax:"90"}),[st,jn]=j.useState({read:!0,shot:!0,prnu:!0,total:!0,fitRange:!0}),[Rn,ha]=j.useState(!1),[un,Aa]=j.useState([]),[It,fn]=j.useState(null),[Sr,Pn]=j.useState(""),dn=j.useMemo(()=>n?n.join(","):"",[n]);j.useEffect(()=>{if(e){let U="0 0 0 0";o&&o.blackLevel?U=o.blackLevel.join(" "):U=n&&n.length===4?n.join(" "):"0 0 0 0",ee(U),W(U);let q="";if(o&&o.height?q=o.height.toString():a&&(q=a.toString()),L(q),q){const D=parseFloat(q);!isNaN(D)&&D>0?A((2309.4/D).toFixed(2)):A("10")}else A("10");ie(null),Q(!1),X(!1),de(0),Aa([]),fn(null),$t({min:.01,max:90}),Qr({read:"0",gain:"0",prnu:"0",rangeMin:"0.01",rangeMax:"90"});const oe={readNoise:0,gain:0,prnu:0};Ge(oe),ar.current=oe,N(""),E(""),_(""),$(""),d("Noise"),Et(null),kt(2e6),Pn(""),b(!1),je([]),ft(D=>D.trim()===""&&l?l:D),br(D=>D.trim()===""&&u?u:D)}},[e,dn,o,a,r,l,u]);const Jr=U=>{if(U.key==="Enter"){const q=parseFloat(R);if(!isNaN(q)&&q>0){const oe=(2309.4/q).toFixed(2);A(oe)}U.target.blur()}},zt=j.useMemo(()=>{let q=G.trim().split(/[\s,]+/).filter(Boolean).map(Number);for(q.length===1&&(q=[q[0],q[0],q[0],q[0]]);q.length<4;)q.push(0);const oe=D=>{switch(D){case"R":return q[0];case"G1":return q[1];case"G2":return q[2];case"B":return q[3];default:return 0}};return r.map(D=>{const pe=D.mean-oe(D.channel),Ne=D.std>0?pe/D.std:0;return{...D,x:pe,std:D.std,snr:Ne}}).filter(D=>D.std>0)},[r,G]),ir=j.useMemo(()=>{const U=Ot.readNoise,q=U*U;return zt.map(oe=>{let D=0;if(f==="Noise")D=oe.std;else if(f==="SNR")D=oe.snr;else if(f==="Linear"){const Ne=oe.std*oe.std-q;D=oe.x!==0?Ne/oe.x:0}return{...oe,y:D}})},[zt,f,Ot.readNoise]),Rt=j.useMemo(()=>{if(zt.length===0)return"G1";const U={R:0,G1:0,G2:0,B:0},q={R:0,G1:0,G2:0,B:0};for(const pe of zt)U[pe.channel]+=pe.x,q[pe.channel]++;let oe="G1",D=-1/0;return Object.keys(U).forEach(pe=>{const Ne=q[pe],$e=Ne>0?U[pe]/Ne:-1/0;$e>D&&(D=$e,oe=pe)}),oe},[zt]),le=j.useCallback(()=>{let U=1/0,q=-1/0;if(zt.length===0)return{min:.1,max:1};for(let oe=0;oe<zt.length;oe++){const D=zt[oe].x;h&&D<=0||(D<U&&(U=D),D>q&&(q=D))}return U===1/0?{min:.1,max:1}:{min:U,max:q}},[zt,h]),Te=j.useCallback(()=>{let U=1/0,q=-1/0;if(ir.length===0)return{min:.1,max:1};for(let oe=0;oe<ir.length;oe++){const D=ir[oe].y;h&&D<=0||(D<U&&(U=D),D>q&&(q=D))}return U===1/0?{min:.1,max:1}:{min:U*.9,max:q*1.1}},[ir,h]),{min:Ie,max:it}=le(),{min:et,max:St}=Te(),mr=it*(wr.min/100),or=it*(wr.max/100),We=j.useMemo(()=>{if(!h&&ir.length===0)return{shot:[],read:[],prnu:[],total:[]};const U=C?parseFloat(C):Ie,q=O?parseFloat(O):it,oe=100,D=Math.max(.1,U),pe=Math.max(1,q);if(D>=pe)return{shot:[],read:[],prnu:[],total:[]};const Ne=Math.log10(D),Ye=(Math.log10(pe)-Ne)/oe,qe=Ot.readNoise,He=Ot.gain>0?Ot.gain:1,Nt=Ot.prnu/100,lt=[],Ht=[],lr=[],ue=[];for(let Ze=0;Ze<=oe;Ze++){const Ee=Math.pow(10,Ne+Ze*Ye);if(f==="Linear"){const Bt=1/He,Pt=Nt*Nt,cr=Bt+Pt*Ee;ue.push({x:Ee,y:cr}),lt.push({x:Ee,y:Bt}),lr.push({x:Ee,y:Pt*Ee})}else{const Bt=qe,Pt=Math.sqrt(Ee/He),cr=Nt*Ee,bt=Math.sqrt(Bt*Bt+Pt*Pt+cr*cr);f==="Noise"?(lt.push({x:Ee,y:Pt}),Ht.push({x:Ee,y:Bt}),lr.push({x:Ee,y:cr}),ue.push({x:Ee,y:bt})):(Pt>0&&lt.push({x:Ee,y:Ee/Pt}),Bt>0&&Ht.push({x:Ee,y:Ee/Bt}),cr>0&&lr.push({x:Ee,y:Ee/cr}),bt>0&&ue.push({x:Ee,y:Ee/bt}))}}return{shot:lt,read:Ht,prnu:lr,total:ue}},[ir,h,C,O,Ot,f,Ie,it]),dt=j.useMemo(()=>{if(f==="Linear")return[];const U=parseFloat(I);if(isNaN(U)||U<=0)return[];const q=C?parseFloat(C):Ie,oe=O?parseFloat(O):it;return f==="SNR"?[{x:q,y:U},{x:oe,y:U}]:[{x:q,y:q/U},{x:oe,y:oe/U}]},[ir,I,f,C,O,Ie,it]),xt=j.useCallback((U,q)=>{if(!q||q.length===0)return null;const oe=[...q].sort((D,pe)=>D.x-pe.x);for(let D=0;D<oe.length-1;D++){const pe=oe[D],Ne=oe[D+1];if(pe.snr<=U&&Ne.snr>=U||pe.snr>=U&&Ne.snr<=U){const $e=(U-pe.snr)/(Ne.snr-pe.snr);return pe.x+$e*(Ne.x-pe.x)}}return null},[]),jt=j.useMemo(()=>{const U=zt,q=1e3,oe=pe=>{if(pe.length===0)return[];if(pe.length<=q)return pe;const Ne=[...pe].sort((qe,He)=>qe.x-He.x),$e=[],Ye=Ne.length/q;for(let qe=0;qe<q;qe++){const He=Math.floor(qe*Ye),Nt=Math.floor((qe+1)*Ye),lt=Ne.slice(He,Nt);if(lt.length===0)continue;lt.sort((lr,ue)=>lr.std-ue.std);const Ht=Math.floor(lt.length/2);$e.push(lt[Ht])}return $e},D={R:[],G1:[],G2:[],B:[]};return U.forEach(pe=>{D[pe.channel]&&D[pe.channel].push(pe)}),{R:oe(D.R),G1:oe(D.G1),G2:oe(D.G2),B:oe(D.B)}},[zt]),sr=j.useMemo(()=>B&&Ot.gain?B*Ot.gain:null,[B,Ot.gain]),be=j.useMemo(()=>{if(B===null||B===0)return null;const U=parseFloat(I);let q=null;if(!isNaN(U)&&U>0){let $e=0,Ye=0;if(["R","G1","G2","B"].forEach(qe=>{const He=xt(U,jt[qe]);He!==null&&($e+=He,Ye++)}),Ye>0){const qe=$e/Ye;q=Math.log2(B/qe)}}const oe=parseFloat(R);let D=null,pe=NaN;if(!isNaN(oe)&&oe>0){pe=16e3/oe;let $e=0,Ye=0;if(["R","G1","G2","B"].forEach(qe=>{const He=xt(pe,jt[qe]);He!==null&&($e+=He,Ye++)}),Ye>0){const qe=$e/Ye;D=Math.log2(B/qe)}}let Ne=null;if(!isNaN(oe)&&oe>0){const $e=xt(pe,jt[Rt]);$e!==null&&(Ne=Math.log2(B/$e))}return{manualDR:q,ptpDR:D,d55DR:Ne,manualTarget:U,ptpTarget:pe,saturationSignal:B,dominantChannel:Rt}},[B,I,R,jt,xt,Rt]),hn=j.useMemo(()=>{if(f==="Linear"||!be||!be.ptpTarget||isNaN(be.ptpTarget))return[];const U=be.ptpTarget,q=C?parseFloat(C):Ie,oe=O?parseFloat(O):it;return f==="SNR"?[{x:q,y:U},{x:oe,y:U}]:[{x:q,y:q/U},{x:oe,y:oe/U}]},[f,be,C,O,Ie,it]),Ln=j.useCallback(()=>{const oe=document.createElement("canvas");oe.width=2048,oe.height=1536;const D=oe.getContext("2d");if(!D)return;const pe=s==="dark",Ne=pe?"#0f172a":"#ffffff",$e=pe?"#ffffff":"#000000",Ye=pe?"#475569":"#cbd5e1",qe=pe?"#1e293b":"#f1f5f9",He=i?{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"}:{R:"#ef4444",G1:"#22c55e",G2:"#4ade80",B:"#3b82f6"};D.fillStyle=Ne,D.fillRect(0,0,2048,1536);let Nt=C?parseFloat(C):Ie,lt=O?parseFloat(O):it,Ht=M?parseFloat(M):et,lr=T?parseFloat(T):St;isNaN(Nt)&&(Nt=.1),isNaN(lt)&&(lt=1e4),isNaN(Ht)&&(Ht=.1),isNaN(lr)&&(lr=1e3);const ue={top:80,right:80,bottom:100,left:120},Ze=2048-ue.left-ue.right,Ee=1536-ue.top-ue.bottom,Bt=Pe=>{if(h){const Qe=Math.log10(Math.max(1e-9,Nt)),rt=Math.log10(Math.max(1e-9,lt)),nt=Math.log10(Math.max(1e-9,Pe));return ue.left+(nt-Qe)/(rt-Qe)*Ze}else return ue.left+(Pe-Nt)/(lt-Nt)*Ze},Pt=Pe=>{if(h){const Qe=Math.log10(Math.max(1e-9,Ht)),rt=Math.log10(Math.max(1e-9,lr)),nt=Math.log10(Math.max(1e-9,Pe));return ue.top+Ee-(nt-Qe)/(rt-Qe)*Ee}else return ue.top+Ee-(Pe-Ht)/(lr-Ht)*Ee};if(D.beginPath(),h){const Pe=(Qe,rt,nt)=>{const Cn=Math.log10(Math.max(1e-9,Qe)),Wn=Math.log10(Math.max(1e-9,rt)),On=Math.floor(Cn),Qa=Math.ceil(Wn);for(let wi=On;wi<=Qa;wi++){const $a=Math.pow(10,wi);let ur=nt?Bt($a):Pt($a);(nt?ur>=ue.left-1&&ur<=ue.left+Ze+1:ur>=ue.top-1&&ur<=ue.top+Ee+1)&&(D.lineWidth=1.5,D.strokeStyle=Ye,D.beginPath(),nt?(D.moveTo(ur,ue.top),D.lineTo(ur,ue.top+Ee)):(D.moveTo(ue.left,ur),D.lineTo(ue.left+Ze,ur)),D.stroke()),D.lineWidth=.5,D.strokeStyle=qe;for(let xc=2;xc<10;xc++){const bc=xc*$a;ur=nt?Bt(bc):Pt(bc),(nt?ur>=ue.left&&ur<=ue.left+Ze:ur>=ue.top&&ur<=ue.top+Ee)&&(D.beginPath(),nt?(D.moveTo(ur,ue.top),D.lineTo(ur,ue.top+Ee)):(D.moveTo(ue.left,ur),D.lineTo(ue.left+Ze,ur)),D.stroke())}}};Pe(Nt,lt,!0),Pe(Ht,lr,!1)}else{D.strokeStyle=Ye,D.lineWidth=1;for(let Pe=0;Pe<=5;Pe++){const Qe=ue.left+Ze*Pe/5;D.beginPath(),D.moveTo(Qe,ue.top),D.lineTo(Qe,ue.top+Ee),D.stroke();const rt=ue.top+Ee*Pe/5;D.beginPath(),D.moveTo(ue.left,rt),D.lineTo(ue.left+Ze,rt),D.stroke()}}D.strokeStyle=$e,D.lineWidth=2,D.strokeRect(ue.left,ue.top,Ze,Ee);const cr=(Pe,Qe,rt)=>{Pe<ue.left||Pe>ue.left+Ze||Qe<ue.top||Qe>ue.top+Ee||(D.fillStyle=rt,D.fillRect(Pe-1.5,Qe-1.5,3,3))},bt=ir.filter(Pe=>!(h&&(Pe.x<=0||Pe.y<=0)));bt.forEach(Pe=>{k[Pe.channel]&&Pe.channel!==Rt&&cr(Bt(Pe.x),Pt(Pe.y),He[Pe.channel])}),bt.forEach(Pe=>{k[Pe.channel]&&Pe.channel===Rt&&cr(Bt(Pe.x),Pt(Pe.y),He[Pe.channel])}),J.forEach(Pe=>{const Qe=Bt(Pe.x),rt=Pt(Pe.y);if(Qe<ue.left||Qe>ue.left+Ze||rt<ue.top||rt>ue.top+Ee)return;D.strokeStyle="#d946ef",D.lineWidth=2.5;const nt=6;D.beginPath(),D.moveTo(Qe-nt,rt-nt),D.lineTo(Qe+nt,rt+nt),D.moveTo(Qe+nt,rt-nt),D.lineTo(Qe-nt,rt+nt),D.stroke()});const Mr=(Pe,Qe,rt=[])=>{if(Pe.length<2)return;D.beginPath(),D.strokeStyle=Qe,D.lineWidth=3,D.setLineDash(rt);let nt=!1;for(const Cn of Pe){const Wn=Bt(Cn.x),On=Pt(Cn.y);if(Wn<ue.left-100||Wn>ue.left+Ze+100||On<ue.top-100||On>ue.top+Ee+100){nt=!1;continue}nt?D.lineTo(Wn,On):(D.moveTo(Wn,On),nt=!0)}D.stroke(),D.setLineDash([])},gn=pe?"#ffffff":"#000000";if(st.shot&&Mr(We.shot,"#94a3b8",[5,5]),st.read&&Mr(We.read,"#f43f5e",[3,3]),st.prnu&&Mr(We.prnu,"#f59e0b",[3,3]),st.total&&Mr(We.total,gn,[]),dt.length===2){const Pe="#6366f1";Mr(dt,Pe,[4,2]);const Qe=dt[1],rt=Pt(Qe.y);rt>=ue.top&&rt<=ue.top+Ee&&(D.fillStyle=Pe,D.font="bold 20px sans-serif",D.textAlign="right",D.textBaseline="bottom",D.fillText(`M.Tgt=${I}`,ue.left+Ze-10,rt-8))}if(hn.length===2&&(be!=null&&be.ptpTarget)){const Pe="#10b981";Mr(hn,Pe,[4,4]);const Qe=hn[1],rt=Pt(Qe.y);if(rt>=ue.top&&rt<=ue.top+Ee){D.fillStyle=Pe,D.font="bold 20px sans-serif",D.textAlign="right",D.textBaseline="bottom";const nt=be.ptpTarget.toFixed(1),Cn=dt.length===2?Pt(dt[1].y):-100,Wn=Math.abs(rt-Cn)<25?25:0;D.fillText(`PTP=${nt}`,ue.left+Ze-10,rt-8-Wn)}}if(st.fitRange||K){const Pe=(Qe,rt)=>{const nt=Bt(Qe);nt>=ue.left&&nt<=ue.left+Ze&&(D.beginPath(),D.strokeStyle=rt,D.lineWidth=2,D.setLineDash([8,8]),D.moveTo(nt,ue.top),D.lineTo(nt,ue.top+Ee),D.stroke(),D.setLineDash([]))};Pe(mr,"#22d3ee"),Pe(or,"#22d3ee")}if(B){const Pe=Bt(B);Pe>=ue.left&&Pe<=ue.left+Ze&&(D.strokeStyle="#ef4444",D.lineWidth=3,D.setLineDash([10,10]),D.beginPath(),D.moveTo(Pe,ue.top),D.lineTo(Pe,ue.top+Ee),D.stroke(),D.setLineDash([]),D.fillStyle="#ef4444",D.font="bold 24px sans-serif",D.textAlign="center",D.fillText("Sat",Pe,ue.top-10))}D.fillStyle=$e,D.font="28px monospace",D.textAlign="center",D.fillText(Nt.toExponential(1),ue.left,ue.top+Ee+40),D.fillText(lt.toExponential(1),ue.left+Ze,ue.top+Ee+40),D.fillText("Signal (DN)",ue.left+Ze/2,ue.top+Ee+80),D.textAlign="right",D.textBaseline="middle",D.fillText(Ht.toExponential(1),ue.left-20,ue.top+Ee),D.fillText(lr.toExponential(1),ue.left-20,ue.top),D.save(),D.translate(ue.left-80,ue.top+Ee/2),D.rotate(-Math.PI/2),D.textAlign="center",D.fillText(f==="Linear"?"(Var - RN) / Mean":f,0,0),D.restore(),D.save(),D.translate(2048/2,1536/2),D.rotate(-Math.PI/6),D.textAlign="center",D.textBaseline="middle",D.fillStyle=pe?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",D.font="bold 150px sans-serif",D.fillText(" y-g-jiang.github.io",0,0),D.restore(),D.fillStyle=$e,D.font="bold 36px sans-serif",D.textAlign="left",D.textBaseline="top",D.fillText(`PTC Export: ${f} Mode`,ue.left,20),D.font="24px sans-serif",D.fillStyle=pe?"#94a3b8":"#64748b",D.fillText(`Points: ${ir.length} | Sat Channel: ${Rt}`,ue.left,65);const Za=ue.left+30,pc=ue.top+30,xp=70,gc=Pe=>{if(!B||Pe<=0)return"--";const Qe=Ot.readNoise,rt=Ot.gain,nt=Ot.prnu/100;if(rt<=0)return"--";const Cn=Pe*Pe,Wn=Qe*Qe,On=1-Cn*nt*nt,Qa=-(Cn/rt),wi=-(Cn*Wn);let $a=0;if(Math.abs(On)<1e-8)Math.abs(Qa)>1e-8&&($a=-wi/Qa);else{const ur=Qa*Qa-4*On*wi;ur>=0&&($a=(-Qa+Math.sqrt(ur))/(2*On))}return $a>0?Math.log2(B/$a).toFixed(2)+" EV":"--"},bp=be!=null&&be.ptpTarget&&!isNaN(be.ptpTarget)?gc(be.ptpTarget):"--",mc=I?gc(parseFloat(I)):"--";D.font="bold 48px monospace",D.textAlign="left",D.textBaseline="top",D.shadowColor=pe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",D.shadowBlur=4,D.shadowOffsetX=1,D.shadowOffsetY=1;const Gn=(Pe,Qe,rt,nt)=>{const Cn=pc+rt*xp;D.fillStyle=$e,D.fillText(Pe,Za,Cn);const Wn=D.measureText(Pe).width;D.fillStyle=nt||$e,D.fillText(Qe,Za+Wn,Cn)},Bo=vt.read,wp=parseFloat(vt.gain).toFixed(3),kp=parseFloat(vt.prnu).toFixed(2)+"%";let Cf=`M.DR@SNR${I}: `;const yc=parseFloat(R);if(!isNaN(yc)&&yc>0){const Pe=(2309.4/yc).toFixed(2);Math.abs(parseFloat(I)-parseFloat(Pe))<.05&&(Cf="8mpSNR=1 DR: ")}Gn("Tester: ",Fe||"N/A",0),Gn("Model : ",Ue||"Unknown",1),Gn("ISO   : ",yt||"N/A",2),Gn("RN/FPN: ",Bo,3,"#f43f5e"),Gn("KADC  : ",wp,4,"#06b6d4"),Gn("PRNU  : ",kp,5,"#f59e0b"),Gn("PTP DR: ",be!=null&&be.ptpDR?be.ptpDR.toFixed(2)+" EV":"--",6,"#10b981"),Gn("D55 DR: ",be!=null&&be.d55DR?be.d55DR.toFixed(2)+" EV":"--",7,"#8b5cf6"),Gn("FWC   : ",sr?sr>1e4?(sr/1e3).toFixed(1)+"k":Math.round(sr).toString():"--",8,"#f97316"),Gn(Cf,be!=null&&be.manualDR?be.manualDR.toFixed(2)+" EV":"--",9,"#06b6d4"),Gn("PTCFitDR(PTP): ",bp,10,"#10b981"),Gn("PTCFitDR(Man): ",mc,11,"#06b6d4"),D.save(),D.textAlign="right",D.textBaseline="bottom",D.fillStyle="#3b82f6",D.font="bold 80px sans-serif",D.shadowColor=pe?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)",D.shadowBlur=4,D.shadowOffsetX=2,D.shadowOffsetY=2;const Of=1988,Nf=1476,Mf=90;D.fillText("Online",Of,Nf),D.fillText("Jiangtherapee",Of,Nf-Mf),D.restore();const vc=document.createElement("a");vc.download=`ptc_complete_${f}_${Date.now()}.jpg`,vc.href=oe.toDataURL("image/jpeg",.9),vc.click()},[ir,Rt,k,C,O,M,T,Ie,it,et,St,h,s,f,B,i,st,We,mr,or,wr,K,Fe,Ue,yt,be,sr,I,dt,hn,vt,R,J]),en=j.useMemo(()=>{let U=ir;if(h&&(U=U.filter(pe=>pe.y>0&&pe.x>0)),w==="top3"){const pe=[...U].sort(($e,Ye)=>Ye.x-$e.x),Ne=Math.max(50,Math.ceil(pe.length*.03));U=pe.slice(0,Ne)}const q={R:[],G1:[],G2:[],B:[]};if(U.forEach(pe=>{q[pe.channel]&&q[pe.channel].push(pe)}),w==="raw")return q;const oe=w==="top3"?500:_te,D=pe=>{if(pe.length<=oe)return pe;const Ne=[...pe].sort((qe,He)=>qe.x-He.x),$e=[],Ye=Ne.length/oe;for(let qe=0;qe<oe;qe++){const He=Math.floor(qe*Ye),Nt=Math.floor((qe+1)*Ye),lt=Ne.slice(He,Nt);if(lt.length===0)continue;lt.sort((lr,ue)=>lr.y-ue.y);const Ht=Math.floor(lt.length/2);$e.push(lt[Ht])}return $e};return{R:D(q.R),G1:D(q.G1),G2:D(q.G2),B:D(q.B)}},[ir,w,h]),pn=j.useMemo(()=>{if(zt.length<5)return[];const U=zt.filter(oe=>oe.channel===Rt);return[...U.length>20?U:zt].sort((oe,D)=>oe.x-D.x).map(oe=>({mean:oe.x,std:oe.std}))},[zt,Rt]),yi=U=>{const q=U.length;if(q===0)return[];const oe=U.reduce((Ze,Ee)=>Ze+Ee,0)/q,D=U.reduce((Ze,Ee)=>Ze+Math.pow(Ee-oe,2),0)/(q-1||1),pe=Math.sqrt(D);if(pe===0)return[{x:oe-.001,density:0},{x:oe,density:1},{x:oe+.001,density:0}];const Ne=1.06*pe*Math.pow(q,-.2),$e=Math.min(...U),Ye=Math.max(...U),qe=(Ye-$e)*.2||$e*.1,He=Math.max(0,$e-qe),Nt=Ye+qe,lt=100,Ht=(Nt-He)/(lt-1),lr=Ze=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*Ze*Ze),ue=[];for(let Ze=0;Ze<lt;Ze++){const Ee=He+Ze*Ht;let Bt=0;for(let Pt=0;Pt<q;Pt++)Bt+=lr((Ee-U[Pt])/Ne);Bt/=q*Ne,ue.push({x:Ee,density:Bt})}return ue},vi=j.useCallback((U,q,oe,D)=>{if(U.length<5)return{gain:0,prnu:0};const pe=U[U.length-1].mean,Ne=pe*(oe.min/100),$e=pe*(oe.max/100),Ye=U.filter(bt=>bt.mean>=Ne&&bt.mean<=$e);if(Ye.length<5)return{gain:0,prnu:0};Et({nPoints:Ye.length});const qe=q*q,He=[],Nt=[];if(Ye.forEach(bt=>{const gn=bt.std*bt.std-qe;if(bt.mean>1&&gn>0){const Za=bt.mean,pc=gn/bt.mean;He.push({x:Za,y:pc}),Nt.push(bt.mean/gn)}}),He.length<5)return{gain:0,prnu:0};const lt=[],Ht=He.length,lr=D,ue=Ht*(Ht-1)/2;if(ue<=lr)for(let bt=0;bt<Ht;bt++)for(let Mr=bt+1;Mr<Ht;Mr++){const gn=He[Mr].x-He[bt].x;Math.abs(gn)>1e-5&&lt.push((He[Mr].y-He[bt].y)/gn)}else{const bt=Math.max(1,Math.floor(ue/lr));for(let Mr=0;Mr<Ht;Mr++)for(let gn=Mr+1;gn<Ht;gn+=bt){const Za=He[gn].x-He[Mr].x;Math.abs(Za)>1e-5&&lt.push((He[gn].y-He[Mr].y)/Za)}}const Ze=Dg(lt),Ee=He.map(bt=>bt.y-Ze*bt.x),Bt=Dg(Ee);let Pt=0,cr=0;if(Bt>1e-6?Pt=1/Bt:Pt=Dg(Nt),Ze>0&&(cr=Math.sqrt(Ze)*100),Nt.length>0){const bt=yi(Nt);Aa(bt),fn(Pt)}else Aa([]);return{gain:Pt,prnu:cr}},[]),Bn=j.useCallback(U=>{let q=U.read??ar.current.readNoise;const oe=U.gRange??kr.current,D=Zr.current;if((U.read!==void 0||U.gRange!==void 0)&&U.gain===void 0&&U.prnu===void 0&&pn.length>0&&q>=0)b(!0),setTimeout(()=>{const Ne=vi(pn,q,oe,D);let $e=ar.current.gain,Ye=ar.current.prnu;Ne.gain>0&&($e=Ne.gain,Ye=Ne.prnu),Ge({readNoise:q,gain:$e,prnu:Ye}),U.gRange!==void 0&&$t(U.gRange),Qr(qe=>{var He,Nt;return{...qe,read:q.toString(),gain:$e>0?$e.toFixed(3):"0",prnu:Ye.toFixed(2),rangeMin:(((He=U.gRange)==null?void 0:He.min)??qe.rangeMin).toString(),rangeMax:(((Nt=U.gRange)==null?void 0:Nt.max)??qe.rangeMax).toString()}}),b(!1)},50);else{let Ne=U.gain!==void 0?U.gain:ar.current.gain,$e=U.prnu!==void 0?U.prnu:ar.current.prnu;Ge({readNoise:q,gain:Ne,prnu:$e}),U.gRange!==void 0&&$t(U.gRange),Qr(Ye=>{var qe,He;return{...Ye,read:q.toString(),gain:Ne>0?Ne.toFixed(3):"0",prnu:$e.toFixed(2),rangeMin:(((qe=U.gRange)==null?void 0:qe.min)??Ye.rangeMin).toString(),rangeMax:(((He=U.gRange)==null?void 0:He.max)??Ye.rangeMax).toString()}})}},[pn,vi]),xi=`${G}-${r.length}`;j.useEffect(()=>{if(!e||!r||r.length===0)return;const U=en[Rt];if(!U||U.length===0||Sr===xi)return;P({R:Rt==="R",G1:Rt==="G1",G2:Rt==="G2",B:Rt==="B"});const q=[...U].sort((Ne,$e)=>Ne.x-$e.x);let oe=0;q.length>0&&(oe=q[0].std);const D=zt.filter(Ne=>Ne.channel===Rt);let pe=-1/0;for(const Ne of D)Ne.x>pe&&(pe=Ne.x);pe!==-1/0&&ie(pe),Bn({read:oe}),Pn(xi)},[e,r,Sr,xi,en,Rt,Bn,zt]);const bi=(U,q)=>{Qr(oe=>({...oe,[U]:q}))},pa=U=>{let q=parseFloat(vt[U]);isNaN(q)||q<0||Bn({[U]:q})},hc=()=>{W(V),Pn("")},Fn=()=>{const U=parseFloat(vt.rangeMin),q=parseFloat(vt.rangeMax);!isNaN(U)&&!isNaN(q)&&U<q&&U>=0&&q<=100&&Bn({gRange:{min:U,max:q}})},H=(U,q)=>{U.key==="Enter"&&(q==="rangeMin"||q==="rangeMax"?Fn():pa(q),U.target.blur())};j.useEffect(()=>{e&&pn.length>0&&Bn({})},[e,Dt,pn]);const me=U=>{P(q=>({...q,[U]:!q[U]}))},gt=()=>{x(U=>U==="top3"?"default":"top3")},Lt=()=>{w==="raw"?x("default"):v(!0)},tn=()=>{v(!1),x("raw")},jr=(U,q)=>{const oe=parseFloat(U),D=parseFloat(q);let pe=isNaN(oe)?"auto":oe,Ne=isNaN(D)?"auto":D;return h&&typeof pe=="number"&&pe<=0&&(pe="auto"),[pe,Ne]},rn=U=>{if(!U||!U.payload)return;const q=U.payload;if(y(q),ut.current&&(ie(q.x),Q(!1)),gr.current){const oe=kr.current.min,D=kr.current.max,{max:pe}=le();if(pe<=0)return;const Ne=Math.max(0,Math.min(100,q.x/pe*100));if(Je.current===1){const $e=Math.min(Ne,D-.5);Bn({gRange:{min:$e,max:D}}),de(2)}else if(Je.current===2){const $e=Math.max(Ne,oe+.5);Bn({gRange:{min:oe,max:$e}}),de(0),X(!1)}}},zn=j.useCallback(U=>{const{cx:q,cy:oe,fill:D}=U;return c.jsx("circle",{cx:q,cy:oe,r:3,fill:D,stroke:"none",style:{cursor:"pointer"}})},[]),Lo=({active:U,payload:q})=>{if(U&&q&&q.length){const oe=q[0].payload;return c.jsxs("div",{className:"bg-slate-800 text-white text-xs p-2 rounded border border-slate-600 shadow-xl opacity-90 font-mono z-50",children:[c.jsx("div",{className:"font-bold border-b border-slate-600 pb-1 mb-1",children:oe.channel}),c.jsxs("div",{children:["Signal: ",oe.x.toFixed(2)]}),c.jsxs("div",{children:[f,": ",oe.y.toFixed(4)]}),oe.row!==void 0&&oe.col!==void 0&&!isNaN(oe.row)&&!isNaN(oe.col)&&c.jsxs("div",{className:"text-cyan-400 mt-0.5",children:["Loc: Row ",oe.row,", Col ",oe.col]}),oe.filename&&c.jsx("div",{className:"text-gray-400 mt-1 max-w-[200px] truncate",title:oe.filename,children:oe.filename})]})}return null},Ta=U=>{d(U),U==="Linear"&&p(!1)};if(!e)return null;const ra=s==="dark"?"#ffffff":"#000000";let Ea=f;f==="Linear"&&(Ea="(Var - RN) / Mean");const Un=V!==G;return c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",onClick:U=>{U.stopPropagation()},children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[98vw] max-w-[2200px] h-[95vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden relative",onClick:U=>U.stopPropagation(),children:[c.jsx(Ei,{isOpen:g,onClose:()=>v(!1),onConfirm:tn,title:"Warning: High Performance Cost",message:"Displaying all data points may cause the browser to freeze or become unresponsive, especially with large datasets. Are you sure you want to continue?",confirmText:"Yes, Show All"}),m&&c.jsxs("div",{className:"absolute top-20 right-8 z-30 bg-white/90 dark:bg-slate-800/90 border border-cyan-500 rounded-xl p-4 shadow-xl backdrop-blur-md max-w-xs animate-in fade-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-gray-200 dark:border-slate-700 pb-2",children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Selected Point"}),c.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"space-y-1 text-xs font-mono text-gray-700 dark:text-slate-300",children:c.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5",children:[c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Channel:"}),c.jsx("span",{className:"font-bold",children:m.channel}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Signal (DN):"}),c.jsx("span",{children:m.x.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"Noise (Std):"}),c.jsx("span",{children:m.std.toFixed(4)}),c.jsx("span",{className:"text-gray-500 dark:text-slate-500",children:"SNR:"}),c.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:(m.x/m.std).toFixed(2)})]})})]}),Rn&&c.jsx("div",{className:"absolute inset-0 z-40 bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8 animate-in fade-in zoom-in-95 duration-200",children:c.jsxs("div",{className:"w-full max-w-2xl h-[60vh] bg-gray-50 dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-2xl p-4 flex flex-col relative",children:[c.jsx("button",{onClick:()=>ha(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"mb-4 text-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-slate-200",children:"Gain Density Estimation"}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["HSM Mode: ",c.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-bold",children:It==null?void 0:It.toFixed(4)}),c.jsx("span",{className:"mx-2",children:"|"}),"Data Points: ",un.length>0?"Density Curve Generated":"No Data"]})]}),c.jsx("div",{className:"flex-1 min-h-0",children:un.length>0?c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(uO,{data:un,margin:{top:10,right:30,left:0,bottom:20},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3,vertical:!1}),c.jsx(Jn,{dataKey:"x",tickFormatter:U=>U.toFixed(2),tick:{fill:"#9ca3af",fontSize:10},label:{value:"Gain (e/ADU)",position:"insideBottom",offset:-15,fill:"#9ca3af",fontSize:12}}),c.jsx(ea,{tick:{fill:"#9ca3af",fontSize:10}}),c.jsx(Xr,{cursor:{stroke:"rgba(255,255,255,0.2)"},contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"0.5rem",color:"#f3f4f6"}}),c.jsx(Sa,{type:"monotone",dataKey:"density",stroke:"#0ea5e9",fill:"#0ea5e9",fillOpacity:.3,strokeWidth:2}),It!==null&&c.jsx(ho,{x:It,stroke:"#ef4444",strokeWidth:2,label:{value:"HSM",fill:"#ef4444",fontSize:10,position:"top"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data in selected range"})})]})}),c.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50 gap-4 flex-shrink-0",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Photon Transfer Curve",c.jsxs("span",{className:"text-xs font-normal bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-300 px-2 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:[r.length," Pts"]})]}),c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("button",{onClick:Ln,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded text-xs shadow-md transition-all active:scale-95 flex items-center gap-1",title:"Render all points, target lines, and metadata to a high-res JPG",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Complete Result"]}),c.jsxs("div",{className:"flex bg-white dark:bg-slate-700 rounded-lg p-1 border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>Ta("Noise"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Noise"?"bg-cyan-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Noise ()"}),c.jsx("button",{onClick:()=>Ta("SNR"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="SNR"?"bg-purple-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"SNR"}),c.jsx("button",{onClick:()=>Ta("Linear"),className:`px-3 py-1 text-xs font-bold rounded transition-colors ${f==="Linear"?"bg-indigo-600 text-white shadow":"text-gray-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:"Linear (PTC)"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-slate-300 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:U=>p(U.target.checked),className:"rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 bg-gray-100 dark:bg-slate-700 dark:border-slate-600"}),"Log-Log"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 border-b border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm flex-shrink-0",children:[c.jsxs("div",{className:"lg:col-span-9 p-5 flex flex-col gap-5 border-r border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"X:"}),c.jsx("input",{type:"number",placeholder:"Min",value:C,onChange:U=>N(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:O,onChange:U=>E(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-slate-800 rounded-md p-1 border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400 pl-1",children:"Y:"}),c.jsx("input",{type:"number",placeholder:"Min",value:M,onChange:U=>_(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",placeholder:"Max",value:T,onChange:U=>$(U.target.value),className:"w-12 px-1 py-0.5 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded text-center outline-none"})]}),c.jsx("button",{onClick:()=>{N(""),E(""),_(""),$("")},className:"text-xs text-cyan-600 dark:text-cyan-400 hover:underline",children:"Auto"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-700 p-1 rounded-lg border border-gray-200 dark:border-slate-600",children:[c.jsx("button",{onClick:()=>me("R"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.R?"bg-red-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"R"}),c.jsx("button",{onClick:()=>me("G1"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G1?"bg-green-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G1"}),c.jsx("button",{onClick:()=>me("G2"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.G2?"bg-green-400 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"G2"}),c.jsx("button",{onClick:()=>me("B"),className:`w-6 h-6 text-[10px] font-bold rounded flex items-center justify-center transition-colors ${k.B?"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-600 text-gray-400"}`,children:"B"})]})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-8",children:[c.jsxs("div",{className:"flex flex-col bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Black Level (0,0 0,1 1,0 1,1)"}),c.jsx("input",{type:"text",value:V,onChange:U=>ee(U.target.value),className:"w-32 text-xs px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-cyan-500 font-mono",placeholder:"0 0 0 0"})]}),c.jsxs("div",{className:"flex flex-col justify-between bg-gray-50 dark:bg-slate-800/50 p-2 rounded border border-gray-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-gray-500 dark:text-slate-400 mr-2",children:"Fit Range % (Robust)"}),c.jsx("button",{onClick:()=>{X(!K),de(K?0:1)},className:`px-1.5 py-0.5 text-[9px] rounded border transition-colors ${K?"bg-cyan-100 text-cyan-700 border-cyan-300 animate-pulse":"bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-600 dark:text-slate-300 hover:bg-gray-50"}`,children:K?se===1?"Pick Min":"Pick Max":"Select"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx("input",{type:"number",step:"0.1",value:vt.rangeMin,onChange:U=>bi("rangeMin",U.target.value),onBlur:Fn,onKeyDown:U=>H(U,"rangeMin"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"}),c.jsx("span",{className:"text-gray-400",children:"-"}),c.jsx("input",{type:"number",step:"0.1",value:vt.rangeMax,onChange:U=>bi("rangeMax",U.target.value),onBlur:Fn,onKeyDown:U=>H(U,"rangeMax"),className:"w-10 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-1 py-0.5 text-center font-bold"})]})]}),c.jsxs("div",{className:"flex flex-col bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800/50",children:[c.jsx("span",{className:"text-[9px] uppercase font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:"DR Params"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Img H:"}),c.jsx("input",{type:"number",value:R,onChange:U=>L(U.target.value),onKeyDown:Jr,placeholder:"Empty",className:"w-14 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs placeholder:font-normal placeholder:text-gray-300"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-300",children:"Tgt SNR:"}),c.jsx("input",{type:"number",value:I,onChange:U=>A(U.target.value),className:"w-10 px-1 py-0.5 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-800 rounded text-center font-bold text-indigo-700 dark:text-indigo-300 text-xs"})]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1 text-[10px] justify-end pb-0.5",children:[c.jsx("button",{onClick:()=>{Q(!ne),B&&ie(null)},disabled:K,className:`font-bold rounded border shadow-sm transition-all px-3 py-1.5 ${ne?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-500 animate-pulse":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:ne?"Pick Point":"Select Linear Limit"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:gt,className:`flex-1 font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="top3"?"bg-indigo-600 text-white border-indigo-700":"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50"}`,children:"Top 3%"}),c.jsx("button",{onClick:Lt,className:`font-bold rounded border shadow-sm transition-all px-2 py-1 ${w==="raw"?"bg-red-600 text-white border-red-700":"text-red-500 border-red-200 hover:bg-red-50"}`,children:"All"})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-gray-50/50 dark:bg-slate-800/20 p-2 rounded-lg border border-gray-100 dark:border-slate-800",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 dark:text-slate-500",children:"Metadata"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:Fe,onChange:U=>Ae(U.target.value),placeholder:"Tester Name",className:"w-24 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:Ue,onChange:U=>ft(U.target.value),placeholder:"Camera Model",className:"w-32 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"}),c.jsx("input",{type:"text",value:yt,onChange:U=>br(U.target.value),placeholder:"ISO",className:"w-16 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 text-gray-700 dark:text-slate-300 outline-none focus:border-cyan-500 transition-colors"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-4 items-center bg-fuchsia-50/50 dark:bg-fuchsia-900/10 p-2 rounded-lg border border-fuchsia-100 dark:border-fuchsia-900/30",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-fuchsia-500 dark:text-fuchsia-400",children:"Markers"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"number",value:ye,onChange:U=>te(U.target.value),placeholder:"X (Signal)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("input",{type:"number",value:he,onChange:U=>ve(U.target.value),placeholder:"Y (Value)",className:"w-20 text-xs bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded px-2 py-1 outline-none focus:border-fuchsia-500 transition-colors"}),c.jsx("button",{onClick:Ke,className:"px-3 py-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"+"}),J.length>0&&c.jsx("button",{onClick:()=>je([]),className:"px-2 py-1 bg-gray-200 dark:bg-slate-700 hover:bg-red-500 hover:text-white text-gray-600 dark:text-slate-300 text-xs font-bold rounded shadow-sm transition-colors active:scale-95",children:"Clr"})]}),c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",children:[J.length," pts"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] pt-1 justify-center sm:justify-start flex-wrap",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.shot,onChange:U=>jn({...st,shot:U.target.checked}),className:"rounded text-gray-500"})," ",c.jsx("span",{className:"text-gray-500",children:"Shot Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.read,onChange:U=>jn({...st,read:U.target.checked}),className:"rounded text-rose-500"})," ",c.jsx("span",{className:"text-rose-500",children:"Read Noise"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.prnu,onChange:U=>jn({...st,prnu:U.target.checked}),className:"rounded text-amber-500"})," ",c.jsx("span",{className:"text-amber-500",children:"PRNU"})]}),c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:st.total,onChange:U=>jn({...st,total:U.target.checked}),className:"rounded text-white"})," ",c.jsx("span",{className:"text-gray-900 dark:text-white font-bold",children:"Model"})]})]})]}),c.jsxs("div",{className:"lg:col-span-3 bg-slate-100 dark:bg-slate-800 p-4 flex flex-col justify-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1 px-1",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase flex items-center gap-2",children:["Fit Parameters (D55 SAT Channel:",Rt,")",S&&c.jsx("span",{className:"text-orange-500 animate-pulse text-[10px]",children:"Calculating..."})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:hc,disabled:S,className:`px-3 py-1 text-white text-[10px] font-bold rounded shadow-sm transition-all flex items-center gap-1 active:scale-95 
                                            ${S?"bg-gray-400 cursor-wait":Un?"bg-orange-500 hover:bg-orange-600 animate-pulse ring-2 ring-orange-400/50":"bg-cyan-600 hover:bg-cyan-500"}
                                        `,title:"Apply Black Level, Auto-detect Read Noise, then Recalculate Fit",children:S?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Fitting..."]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Apply & Calc"]})}),c.jsxs("select",{value:Dt,onChange:U=>kt(Number(U.target.value)),className:"text-[9px] bg-slate-200 dark:bg-slate-700 text-gray-600 dark:text-slate-300 rounded px-1 py-0.5 border-none outline-none cursor-pointer hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",title:"Number of point-pairs to sample for robust regression (Theil-Sen)",children:[c.jsx("option",{value:1e5,children:"100k Pairs"}),c.jsx("option",{value:5e5,children:"500k Pairs"}),c.jsx("option",{value:2e6,children:"2M Pairs"}),c.jsx("option",{value:5e6,children:"5M Pairs"}),c.jsx("option",{value:1e7,children:"10M Pairs"})]}),Vt&&c.jsxs("span",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono",title:"Number of points used in regression",children:["N=",Vt.nPoints]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"rn/fpn"}),c.jsx("input",{type:"text",inputMode:"decimal",value:vt.read,onChange:U=>bi("read",U.target.value),onBlur:()=>pa("read"),onKeyDown:U=>H(U,"read"),className:"w-full text-center text-2xl font-light bg-transparent text-rose-500 outline-none border-b border-transparent focus:border-rose-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center relative group",children:[c.jsxs("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1 flex items-center gap-1",children:["Kadc (HSM)",c.jsx("button",{onClick:()=>ha(!0),className:"text-[9px] text-cyan-600 dark:text-cyan-400 hover:underline",children:"Dist."})]}),c.jsx("input",{type:"text",inputMode:"decimal",value:vt.gain,onChange:U=>bi("gain",U.target.value),onBlur:()=>pa("gain"),onKeyDown:U=>H(U,"gain"),className:"w-full text-center text-2xl font-light bg-transparent text-slate-700 dark:text-slate-200 outline-none border-b border-transparent focus:border-cyan-500 transition-colors"})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("label",{className:"text-[10px] text-gray-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"PRNU (%)"}),c.jsx("input",{type:"text",inputMode:"decimal",value:vt.prnu,onChange:U=>bi("prnu",U.target.value),onBlur:()=>pa("prnu"),onKeyDown:U=>H(U,"prnu"),className:"w-full text-center text-2xl font-light bg-transparent text-amber-500 outline-none border-b border-transparent focus:border-amber-500 transition-colors"})]})]})]}),c.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 w-full"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[c.jsxs("div",{className:"flex flex-col justify-center bg-cyan-50 dark:bg-cyan-900/10 p-2 rounded-lg border border-cyan-100 dark:border-cyan-900/30",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-500 uppercase tracking-wide mb-1 truncate",title:`Manual DR at SNR=${(be==null?void 0:be.manualTarget)||I}`,children:["M.DR @ SNR=",(be==null?void 0:be.manualTarget)||I]}),c.jsx("div",{className:"text-base font-bold text-cyan-700 dark:text-cyan-400 whitespace-nowrap",children:be!=null&&be.manualDR?`${be.manualDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-emerald-50 dark:bg-emerald-900/10 p-2 rounded-lg border border-emerald-100 dark:border-emerald-900/30",title:isNaN((be==null?void 0:be.ptpTarget)||NaN)?"Requires Image Height":`Standard Point-to-Point DR (Target SNR = 16000/${R||"H"})`,children:[c.jsx("h4",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wide mb-1",children:"PTP DR"}),c.jsx("div",{className:"text-base font-bold text-emerald-700 dark:text-emerald-400 whitespace-nowrap",children:be!=null&&be.ptpDR?`${be.ptpDR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-purple-50 dark:bg-purple-900/10 p-2 rounded-lg border border-purple-100 dark:border-purple-900/30",title:isNaN((be==null?void 0:be.ptpTarget)||NaN)?"Requires Image Height":`D55 Saturation DR (Target SNR = 16000/${R||"H"} on ${be==null?void 0:be.dominantChannel} Channel)`,children:[c.jsxs("h4",{className:"text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wide mb-1 truncate",children:["D55 DR (",be==null?void 0:be.dominantChannel,")"]}),c.jsx("div",{className:"text-base font-bold text-purple-700 dark:text-purple-400 whitespace-nowrap",children:be!=null&&be.d55DR?`${be.d55DR.toFixed(2)} EV`:"--"})]}),c.jsxs("div",{className:"flex flex-col justify-center bg-orange-50 dark:bg-orange-900/10 p-2 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[c.jsx("h4",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400 uppercase tracking-wide mb-1",children:"FWC"}),c.jsx("div",{className:"text-base font-bold text-orange-600 dark:text-orange-400 font-mono whitespace-nowrap truncate",title:sr!==null?`${Math.round(sr)}`:"",children:sr!==null?sr>1e4?`${(sr/1e3).toFixed(1)}k`:`${Math.round(sr)}`:"--"})]})]}),B===null&&c.jsx("div",{className:"text-center text-[10px] text-red-500 animate-pulse font-bold mt-[-10px]",children:"Please select Linear Limit on chart to calc DR"})]})]}),c.jsxs("div",{className:`flex-1 p-4 bg-white dark:bg-slate-900 relative grid grid-cols-[auto_1fr] grid-rows-[1fr_auto] gap-2 ${ne||K?"cursor-crosshair":""}`,children:[c.jsx("div",{className:"row-start-1 col-start-1 h-full",children:c.jsx(QS,{vertical:!0,min:et,max:St,value:[M?parseFloat(M):et,T?parseFloat(T):St],onChange:([U,q])=>{_(U.toString()),$(q.toString())},logScale:h})}),c.jsxs("div",{className:"row-start-1 col-start-2 relative",children:[ir.length===0?c.jsx("div",{className:"flex h-full items-center justify-center text-gray-400",children:"No valid data points found."}):c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(vte,{margin:{top:20,right:20,bottom:0,left:0},onClick:rn,children:[c.jsx("defs",{children:c.jsxs("filter",{id:"glow",height:"300%",width:"300%",x:"-100%",y:"-100%",children:[c.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.2}),c.jsx(Jn,{type:"number",dataKey:"x",name:"Signal",scale:h?"log":"linear",domain:jr(C,O),allowDataOverflow:!0,hide:!0}),c.jsx(ea,{type:"number",dataKey:"y",name:f,scale:h?"log":"linear",domain:jr(M,T),label:{value:Ea,angle:-90,position:"insideLeft",fill:"#9ca3af",fontSize:12},tick:{fill:"#9ca3af",fontSize:10},allowDataOverflow:!0}),c.jsx(Xr,{content:c.jsx(Lo,{}),cursor:{strokeDasharray:"3 3"}}),B&&c.jsx(ho,{x:B,stroke:"red",strokeDasharray:"3 3",label:{position:"top",value:"Sat",fill:"red",fontSize:10}}),(st.fitRange||K)&&c.jsxs(c.Fragment,{children:[c.jsx(ho,{x:mr,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Min: ${wr.min}%`,fill:"#22d3ee",fontSize:9}}),c.jsx(ho,{x:or,stroke:"#22d3ee",strokeDasharray:"5 5",label:{position:"insideTopLeft",value:`Max: ${wr.max}%`,fill:"#22d3ee",fontSize:9}})]}),k.R&&c.jsx(An,{name:"Red",data:en.R,fill:"#ef4444",shape:zn,onClick:rn,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-R"),k.G1&&c.jsx(An,{name:"Green 1",data:en.G1,fill:"#22c55e",shape:zn,onClick:rn,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G1"),k.G2&&c.jsx(An,{name:"Green 2",data:en.G2,fill:"#4ade80",shape:zn,onClick:rn,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-G2"),k.B&&c.jsx(An,{name:"Blue",data:en.B,fill:"#3b82f6",shape:zn,onClick:rn,style:s==="dark"?{filter:"url(#glow)"}:void 0},"scatter-B"),st.shot&&We.shot.length>0&&c.jsx(An,{name:"Shot Noise (Ideal)",data:We.shot,line:{stroke:"#94a3b8",strokeWidth:1,strokeDasharray:"5 5"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-shot"),st.read&&We.read.length>0&&c.jsx(An,{name:"Read Noise Floor",data:We.read,line:{stroke:"#f43f5e",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-read"),st.prnu&&We.prnu.length>0&&c.jsx(An,{name:"PRNU (Non-uniformity)",data:We.prnu,line:{stroke:"#f59e0b",strokeWidth:1,strokeDasharray:"3 3"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-prnu"),st.total&&We.total.length>0&&c.jsx(An,{name:"Total Noise Model",data:We.total,line:{stroke:ra,strokeWidth:2},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-total"),dt.length>0&&c.jsx(An,{name:`Target SNR=${I}`,data:dt,line:{stroke:"#6366f1",strokeWidth:2,strokeDasharray:"4 2"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-target"),hn.length>0&&c.jsx(An,{name:`PTP Target SNR=${be!=null&&be.ptpTarget?be.ptpTarget.toFixed(1):"?"}`,data:hn,line:{stroke:"#10b981",strokeWidth:2,strokeDasharray:"4 4"},shape:()=>c.jsx(c.Fragment,{}),legendType:"none",isAnimationActive:!1},"line-ptp"),J.length>0&&c.jsx(An,{name:"Manual Markers",data:J,fill:"#d946ef",shape:"star",legendType:"star"},"manual-points")]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-25 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-96 h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"36",fontWeight:"bold",style:{fontFamily:"sans-serif",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})})]}),c.jsx("div",{className:"row-start-2 col-start-2 w-full",children:c.jsx(QS,{min:Ie,max:it,value:[C?parseFloat(C):Ie,O?parseFloat(O):it],onChange:([U,q])=>{N(U.toString()),E(q.toString())},logScale:h})})]})]})})},Tte=({searchTerm:e,onSearchChange:t,manufacturers:r,selectedManufacturer:n,onManufacturerChange:a,cameras:i,onCameraSelect:o})=>c.jsx("div",{className:"sticky top-4 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"relative md:col-span-3",children:[c.jsx("input",{type:"text",placeholder:"Search camera model...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 text-gray-900 dark:text-slate-200 placeholder-gray-500 dark:placeholder-slate-400"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-slate-400 absolute top-1/2 left-3 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),c.jsx("select",{value:n,onChange:s=>a(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",children:r.map(s=>c.jsx("option",{value:s,children:s},s))}),c.jsxs("select",{onChange:s=>o(s.target.value),className:"w-full md:col-span-1 bg-gray-50 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition-all duration-300 appearance-none text-gray-900 dark:text-slate-200",value:"","aria-label":"Jump to camera model",children:[c.jsx("option",{value:"",disabled:!0,children:"Jump to model..."}),i.map(s=>c.jsx("option",{value:s.id,children:s.name},s.id))]})]})}),Ete=({active:e,payload:t,label:r,theme:n})=>{if(e&&t&&t.length){const a=t[0].payload,i=n==="dark"?"bg-slate-800/80 border-slate-600 text-slate-300":"bg-white/90 border-gray-200 text-gray-700";return c.jsxs("div",{className:`${i} backdrop-blur-sm border p-3 rounded-lg shadow-lg`,children:[c.jsx("p",{className:"label font-bold",children:`ISO ${r}`}),c.jsx("div",{className:"mt-2 space-y-1 text-sm",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{color:"#f87171"},children:["Red: ",a.R_avg.toFixed(2)," (Range: ",a.R_range[0]," - ",a.R_range[1],")"]}),c.jsxs("div",{style:{color:"#4ade80"},children:["Green 1: ",a.G1_avg.toFixed(2)," (Range: ",a.G1_range[0]," - ",a.G1_range[1],")"]}),c.jsxs("div",{style:{color:"#60a5fa"},children:["Blue: ",a.B_avg.toFixed(2)," (Range: ",a.B_range[0]," - ",a.B_range[1],")"]}),c.jsxs("div",{style:{color:"#86efac"},children:["Green 2: ",a.G2_avg.toFixed(2)," (Range: ",a.G2_range[0]," - ",a.G2_range[1],")"]})]})})]})}return null},$te=({data:e,theme:t="dark"})=>{const r=j.useMemo(()=>!e||e.length===0?[]:[...new Set(e.map(o=>o.iso))].sort((o,s)=>Number(o)-Number(s)),[e]),n=j.useMemo(()=>{if(!e||e.length===0)return[0,4096];const o=e.flatMap(m=>[...m.R_range,...m.G1_range,...m.G2_range,...m.B_range]);if(o.length===0)return[0,4096];let s=Math.min(...o),l=Math.max(...o);const u=.25,f=l-s;if(f<u){const m=u-f;s-=m/2,l+=m/2}const d=(l-s)*.1,h=s-d,p=l+d;return[h,p]},[e]),a=t==="dark"?"#475569":"#e5e7eb",i=t==="dark"?"#94a3b8":"#6b7280";return!e||e.length===0?c.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-slate-500",children:c.jsx("p",{children:"No data available for this mode."})}):c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(uO,{data:e,margin:{top:5,right:20,left:0,bottom:5},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:a}),c.jsx(Jn,{dataKey:"iso",type:"number",domain:["dataMin","dataMax"],tick:{fill:i,fontSize:12},scale:"log",allowDuplicatedCategory:!1,ticks:r}),c.jsx(ea,{tick:{fill:i,fontSize:12},domain:n,allowDecimals:!0,tickFormatter:o=>Number(o).toFixed(3)}),c.jsx(Xr,{content:c.jsx(Ete,{theme:t})}),c.jsx(si,{wrapperStyle:{fontSize:"14px",color:i}}),c.jsx(Sa,{type:"monotone",dataKey:"R_range",fill:"#f87171",stroke:"none",fillOpacity:.2,name:"Red",legendType:"none"}),c.jsx(Er,{type:"monotone",dataKey:"R_avg",stroke:"#f87171",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Red"}),c.jsx(Sa,{type:"monotone",dataKey:"G1_range",fill:"#4ade80",stroke:"none",fillOpacity:.2,name:"Green 1",legendType:"none"}),c.jsx(Er,{type:"monotone",dataKey:"G1_avg",stroke:"#4ade80",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 1"}),c.jsx(Sa,{type:"monotone",dataKey:"B_range",fill:"#60a5fa",stroke:"none",fillOpacity:.2,name:"Blue",legendType:"none"}),c.jsx(Er,{type:"monotone",dataKey:"B_avg",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Blue"}),c.jsx(Sa,{type:"monotone",dataKey:"G2_range",fill:"#86efac",stroke:"none",fillOpacity:.2,name:"Green 2",legendType:"none"}),c.jsx(Er,{type:"monotone",dataKey:"G2_avg",stroke:"#86efac",strokeWidth:2,dot:!1,activeDot:{r:5},name:"Green 2"})]})})},Dte=F.forwardRef(({camera:e,theme:t="dark"},r)=>{const n=j.useMemo(()=>e.shootingModes.map(d=>d.modeName),[e.shootingModes]),[a,i]=j.useState(n[0]||""),{chartData:o,tableData:s}=j.useMemo(()=>{const d=e.shootingModes.find(m=>m.modeName===a);if(!(d!=null&&d.data))return{chartData:[],tableData:[]};const h=d.data.map(m=>({iso:m.iso,R_range:m.r.range,R_avg:m.r.avg,G1_range:m.g1.range,G1_avg:m.g1.avg,B_range:m.b.range,B_avg:m.b.avg,G2_range:m.g2.range,G2_avg:m.g2.avg})),p=d.data.map(m=>({iso:m.iso,levels:[m.r.avg,m.g1.avg,m.g2.avg,m.b.avg],clipping:m.clipping}));return{chartData:h,tableData:p}},[e.shootingModes,a]),l=`Raw Data (${a})`,u=j.useRef(null),f=j.useRef(null);return j.useEffect(()=>{const d=u.current,h=f.current;if(!d||!h)return;const p=new ResizeObserver(m=>{for(let y of m){const{width:w}=y.contentRect,g=Math.max(8,w/35);h.style.fontSize=`${g}px`}});return p.observe(d),()=>p.disconnect()},[]),c.jsxs("div",{ref:r,className:"bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-xl shadow-lg p-6 flex flex-col gap-6 transform hover:scale-[1.02] hover:border-cyan-500/50 transition-all duration-500 ease-in-out",children:[c.jsxs("div",{className:"border-b border-gray-200 dark:border-slate-700 pb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100",children:e.name}),c.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:e.manufacturer})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:"Black Level vs. ISO"}),c.jsx("select",{value:a,onChange:d=>i(d.target.value),className:"w-full sm:w-auto bg-gray-50 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md px-3 py-1 text-sm outline-none focus:ring-2 focus:ring-cyan-500 transition-all duration-300 text-gray-900 dark:text-slate-200","aria-label":`Select shooting mode for ${e.name}`,children:n.map(d=>c.jsx("option",{value:d,children:d},d))})]}),c.jsxs("div",{ref:u,className:"h-64 relative",children:[c.jsx($te,{data:o,theme:t},a),c.jsx("div",{className:"absolute top-1/2 left-[52%] transform -translate-x-1/2 -translate-y-1/2 -rotate-30 pointer-events-none",children:c.jsx("p",{ref:f,className:"font-bold text-gray-900/10 dark:text-slate-200/40 whitespace-nowrap",children:" y-g-jiang.github.io"})})]})]}),c.jsxs("div",{className:"overflow-x-auto",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-slate-300",children:l})}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 font-semibold text-sm text-gray-700 dark:text-slate-300",children:"ISO"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-red-500 dark:text-red-400",children:"Red"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-600 dark:text-green-400",children:"Green 1"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-blue-500 dark:text-blue-400",children:"Blue"}),c.jsx("th",{className:"p-3 font-semibold text-sm text-green-500 dark:text-green-300",children:"Green 2"})]})}),c.jsx("tbody",{children:s.map(({iso:d,levels:h,clipping:p})=>c.jsxs("tr",{className:"border-b border-gray-200 dark:border-slate-700/50 last:border-b-0",children:[c.jsxs("td",{className:"p-3 font-mono text-gray-700 dark:text-slate-300 whitespace-nowrap",children:[d,p&&c.jsx("span",{className:"ml-3 text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full align-middle",children:"Clipping"})]}),c.jsx("td",{className:"p-3 font-mono text-red-500 dark:text-red-400",children:h[0].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-600 dark:text-green-400",children:h[1].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-blue-500 dark:text-blue-400",children:h[3].toFixed(2)}),c.jsx("td",{className:"p-3 font-mono text-green-500 dark:text-green-300",children:h[2].toFixed(2)})]},d))})]})]})]})}),xe=(e,t,r)=>({avg:e,range:[t,r]}),Ig=[{id:"sony-a7r2",name:"Sony ILCE-7RM2 (A7R II)",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical Shutter)",data:[{iso:100,r:xe(512.1,511.95,512.25),g1:xe(512.05,511.9,512.2),b:xe(512.12,511.98,512.28),g2:xe(512.06,511.92,512.22)},{iso:200,r:xe(512.15,512,512.3),g1:xe(512.1,511.95,512.25),b:xe(512.18,512.05,512.35),g2:xe(512.12,511.98,512.28)},{iso:400,r:xe(512.25,512.1,512.45),g1:xe(512.2,512.05,512.4),b:xe(512.3,512.15,512.5),g2:xe(512.22,512.08,512.42)},{iso:800,r:xe(512.5,512.2,512.8),g1:xe(512.45,512.15,512.75),b:xe(512.55,512.25,512.85),g2:xe(512.48,512.18,512.78)},{iso:1600,r:xe(513.1,512.8,513.4),g1:xe(513.05,512.75,513.35),b:xe(513.15,512.85,513.45),g2:xe(513.08,512.78,513.38)}]}]},{id:"sony-a7c",name:"Sony ILCE-7C",manufacturer:"Sony",shootingModes:[{modeName:"Still (Mechanical)",data:[{iso:100,r:xe(512.02,511.98,512.05),g1:xe(512.01,511.97,512.04),b:xe(512.03,511.99,512.06),g2:xe(512.01,511.97,512.04)},{iso:640,r:xe(512.15,512.05,512.25),g1:xe(512.12,512.02,512.22),b:xe(512.18,512.08,512.28),g2:xe(512.13,512.03,512.23)}]}]},{id:"canon-r5",name:"Canon EOS R5",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:xe(512,511.8,512.2),g1:xe(512,511.8,512.2),b:xe(512,511.8,512.2),g2:xe(512,511.8,512.2)},{iso:400,r:xe(512,511.7,512.3),g1:xe(512,511.7,512.3),b:xe(512,511.7,512.3),g2:xe(512,511.7,512.3)},{iso:1600,r:xe(512.2,511.5,512.8),g1:xe(512.2,511.5,512.8),b:xe(512.2,511.5,512.8),g2:xe(512.2,511.5,512.8)}]}]},{id:"canon-r6",name:"Canon EOS R6",manufacturer:"Canon",shootingModes:[{modeName:"Mechanical Shutter",data:[{iso:100,r:xe(511.95,511.8,512.1),g1:xe(511.95,511.8,512.1),b:xe(511.95,511.8,512.1),g2:xe(511.95,511.8,512.1)},{iso:800,r:xe(512.1,511.9,512.3),g1:xe(512.1,511.9,512.3),b:xe(512.1,511.9,512.3),g2:xe(512.1,511.9,512.3)}]}]},{id:"nikon-z9",name:"Nikon Z9",manufacturer:"Nikon",shootingModes:[{modeName:"Electronic Shutter",data:[{iso:64,r:xe(400,399.9,400.1),g1:xe(400,399.9,400.1),b:xe(400,399.9,400.1),g2:xe(400,399.9,400.1)},{iso:100,r:xe(400,399.9,400.1),g1:xe(400,399.9,400.1),b:xe(400,399.9,400.1),g2:xe(400,399.9,400.1)}]}]},{id:"nikon-z6-2",name:"Nikon Z 6II",manufacturer:"Nikon",shootingModes:[{modeName:"Still (Lossless)",data:[{iso:100,r:xe(400.1,399.8,400.3),g1:xe(400.1,399.8,400.3),b:xe(400.1,399.8,400.3),g2:xe(400.1,399.8,400.3)},{iso:800,r:xe(400.3,399.5,401.1),g1:xe(400.3,399.5,401.1),b:xe(400.3,399.5,401.1),g2:xe(400.3,399.5,401.1)}]}]},{id:"fujifilm-xt4",name:"Fujifilm X-T4",manufacturer:"Fujifilm",shootingModes:[{modeName:"Still (RAF)",data:[{iso:160,r:xe(1024,1023.8,1024.2),g1:xe(1024,1023.8,1024.2),b:xe(1024,1023.8,1024.2),g2:xe(1024,1023.8,1024.2)},{iso:800,r:xe(1024.2,1023.5,1025),g1:xe(1024.2,1023.5,1025),b:xe(1024.2,1023.5,1025),g2:xe(1024.2,1023.5,1025)}]}]}],Ite=({isOpen:e,onClose:t,theme:r})=>{const[n,a]=j.useState(""),[i,o]=j.useState("All"),s=j.useMemo(()=>["All",...Array.from(new Set(Ig.map(d=>d.manufacturer))).sort()],[]),l=j.useMemo(()=>Ig.filter(f=>{const d=f.name.toLowerCase().includes(n.toLowerCase()),h=i==="All"||f.manufacturer===i;return d&&h}),[n,i]),u=f=>{const d=document.getElementById(`camera-${f}`);d&&d.scrollIntoView({behavior:"smooth"})};return e?c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-slate-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-slate-100 flex items-center gap-2",children:["Camera Black Level Database",c.jsxs("span",{className:"text-xs font-normal bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 px-2 py-0.5 rounded border border-cyan-200 dark:border-cyan-800",children:[Ig.length," Models"]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/30",children:c.jsx(Tte,{searchTerm:n,onSearchChange:a,manufacturers:s,selectedManufacturer:i,onManufacturerChange:o,cameras:l,onCameraSelect:u})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-slate-700 bg-gray-100 dark:bg-slate-950",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-6",children:[l.map(f=>c.jsx("div",{id:`camera-${f.id}`,children:c.jsx(Dte,{camera:f,theme:r})},f.id)),l.length===0&&c.jsx("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 dark:text-slate-600",children:c.jsx("p",{className:"text-lg",children:"No cameras found matching your criteria."})})]})})]})}):null},Rte=({isOpen:e,onClose:t,zIndex:r=150})=>{const[n,a]=j.useState(""),[i,o]=j.useState(""),[s,l]=j.useState(""),[u,f]=j.useState(""),[d,h]=j.useState(null),p=()=>{const m=parseFloat(n),y=parseFloat(i),w=parseFloat(s),x=parseFloat(u);if(isNaN(m)||isNaN(y)||isNaN(w)||isNaN(x)){h(null);return}const g=m,v=y,S=w*w,b=x*x,k=(g+v)/2;if(k<=1e-9){h(0);return}const P=S*b/k,C=Math.sqrt(P);h(C)};return e?c.jsxs(dc,{initialPosition:{x:window.innerWidth/2-160,y:window.innerHeight/2-200},onClose:t,zIndex:r,className:"w-80 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700 dark:text-slate-200",children:"Cross-Compensation Calc"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-4 flex flex-col gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:n,onChange:m=>a(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V Mean (Power/Var)"}),c.jsx("input",{type:"number",step:"any",value:i,onChange:m=>o(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"H RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:s,onChange:m=>l(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-gray-500 dark:text-slate-400 font-bold",children:"V RMS 0 (Sigma)"}),c.jsx("input",{type:"number",step:"any",value:u,onChange:m=>f(m.target.value),className:"p-2 rounded bg-gray-100 dark:bg-slate-800 border border-gray-300 dark:border-slate-600 outline-none focus:border-indigo-500 text-gray-900 dark:text-slate-100 font-mono"})]}),c.jsx("button",{onClick:p,className:"mt-2 w-full py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded shadow transition-colors active:scale-95",children:"Calculate Sigma"}),d!==null&&c.jsxs("div",{className:"mt-2 p-3 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-800 rounded text-center animate-in fade-in slide-in-from-top-1",children:[c.jsx("span",{className:"block text-[10px] uppercase font-bold text-gray-500 dark:text-slate-400 mb-1",children:"Original White Noise Sigma"}),c.jsx("span",{className:"text-lg font-mono font-bold text-indigo-700 dark:text-indigo-300 select-all",children:d.toFixed(5)})]})]})]}):null},dv=[[.1725,.0838,.0576],[.5481,.2985,.217],[.1103,.1968,.3359],[.1038,.1502,.0521],[.2244,.2177,.4302],[.1232,.519,.4044],[.7168,.199,.0271],[.065,.1063,.3924],[.5417,.0884,.1203],[.1042,.0438,.1396],[.3547,.5078,.0482],[.7805,.3541,.0215],[.0234,.0492,.2916],[.0653,.3019,.0645],[.4294,.0319,.0402],[.8568,.5754,.0079],[.5032,.0889,.3055],[0,.249,.383],[.9163,.9155,.8705],[.5819,.5911,.5839],[.3552,.361,.359],[.1876,.1924,.1917],[.0871,.0901,.0908],[.0321,.0319,.0326]],Lte=[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]];function Bte(e,t,r,n,a,i,o=.5){const u=[],f=Math.max(.1,Math.min(.9,o)),d=Math.hypot(t.x-e.x,t.y-e.y),h=Math.hypot(n.x-r.x,n.y-r.y),p=Math.hypot(r.x-e.x,r.y-e.y),m=Math.hypot(n.x-t.x,n.y-t.y),y=(d+h)/2/5,w=(p+m)/2/3,x=y*f,g=w*f;for(let v=0;v<4;v++)for(let S=0;S<6;S++){const b=S/5,k=v/3,P=(1-b)*(1-k)*e.x+b*(1-k)*t.x+(1-b)*k*r.x+b*k*n.x,C=(1-b)*(1-k)*e.y+b*(1-k)*t.y+(1-b)*k*r.y+b*k*n.y;u.push({x:P-x/2,y:C-g/2,w:x,h:g})}return u}function fO(e){e.length;const t=e[0].length;return Array(t).fill(0).map((r,n)=>e.map(a=>a[n]))}function Od(e,t){const r=e.length,n=e[0].length,a=t.length,i=t[0].length;if(n!==a)throw new Error("Matrix dimensions mismatch");const o=Array(r).fill(0).map(()=>Array(i).fill(0));for(let s=0;s<r;s++)for(let l=0;l<i;l++)for(let u=0;u<n;u++)o[s][l]+=e[s][u]*t[u][l];return o}function Fte(e,t){const r=fO(e),n=Od(r,e);for(let u=0;u<3;u++)n[u][u]+=1e-9;const a=[[n[0][0],n[0][1],n[0][2]],[n[1][0],n[1][1],n[1][2]],[n[2][0],n[2][1],n[2][2]]],i=Ou(a);if(!i)throw new Error("Singular Matrix (Check Input Data)");const o=[[i[0][0],i[0][1],i[0][2]],[i[1][0],i[1][1],i[1][2]],[i[2][0],i[2][1],i[2][2]]],s=Od(r,t);return Od(o,s)}function zte(e){const t=e.length,r=e.map((n,a)=>[...n,...Array(t).fill(0).map((i,o)=>a===o?1:0)]);for(let n=0;n<t;n++){let a=n;for(let s=n+1;s<t;s++)Math.abs(r[s][n])>Math.abs(r[a][n])&&(a=s);const i=r[n];r[n]=r[a],r[a]=i;const o=r[n][n];if(Math.abs(o)<1e-12)throw new Error("Singular Matrix");for(let s=n;s<2*t;s++)r[n][s]/=o;for(let s=0;s<t;s++)if(s!==n){const l=r[s][n];for(let u=n;u<2*t;u++)r[s][u]-=l*r[n][u]}}return r.map(n=>n.slice(t))}function Ute(e,t,r){const n=[...e].sort((y,w)=>y.id-w.id);if(n.length!==24)throw new Error("Requires exactly 24 patches");const a=[];n.forEach(y=>{const w=y.rawMeans,x=[w[0]-t[0],w[1]-t[1],w[2]-t[2],w[3]-t[3]];let g,v,S;r?(S=x[0],v=(x[1]+x[2])/2,g=x[3]):(g=x[0],v=(x[1]+x[2])/2,S=x[3]),g=Math.max(0,g),v=Math.max(0,v),S=Math.max(0,S),a.push([g,v,S])});const o=a[18],s=(o[0]+o[1]+o[2])/3,l=1/Math.max(1e-9,s),u=a.map(y=>[y[0]*l,y[1]*l,y[2]*l]),d=Fte(u,dv),h=fO(d);let p;try{p=zte(h)}catch{throw new Error("CCM Inversion Failed. Input data might be too dark or clipped.")}return{matrix:Od(p,Lte)}}const Gte=({isOpen:e,onClose:t,patchStats:r,initialIsBGGR:n,zIndex:a=200,sizeRatio:i,onSizeChange:o})=>{const[s,l]=j.useState(n),[u,f]=j.useState(["0","0","0","0"]),[d,h]=j.useState(null),[p,m]=j.useState(null);if(j.useEffect(()=>{if(e&&r&&r.length===24){const k=r[23].rawMeans;u[0]==="0"&&u[1]==="0"&&f([k[0].toFixed(2),k[1].toFixed(2),k[2].toFixed(2),k[3].toFixed(2)])}},[e,r]),j.useEffect(()=>{if(!e||!r||r.length!==24)return;const b=u.map(k=>parseFloat(k));if(!b.some(isNaN))try{const k=Ute(r,b,s);h(k),m(null)}catch(k){m(k.message)}},[e,r,s,u]),!e)return null;const y=(b,k)=>{f(P=>{const C=[...P];return C[b]=k,C})},w=b=>{navigator.clipboard.writeText(b)},x=b=>b?b.map(k=>k.map(P=>P.toFixed(4))):[],g=d?x(d.matrix).flat().join(" "):"",v=s?["B","G1","G2","R"]:["R","G1","G2","B"],S=s?["text-blue-500","text-green-500","text-green-500","text-red-500"]:["text-red-500","text-green-500","text-green-500","text-blue-500"];return c.jsxs(dc,{initialPosition:{x:window.innerWidth/2-200,y:100},onClose:t,zIndex:a,className:"w-[500px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 flex flex-col shadow-2xl rounded-xl overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800 dark:text-slate-100 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Color Lab Result"]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-5 flex flex-col gap-5",children:[c.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 p-3 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 uppercase",children:"Patch Sampling Size"}),c.jsxs("span",{className:"text-xs font-mono font-bold text-cyan-600 dark:text-cyan-400",children:[Math.round(i*100),"%"]})]}),c.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:i,onChange:b=>o(parseFloat(b.target.value)),className:"w-full h-1.5 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1 rounded-lg border border-gray-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>l(!1),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"text-gray-500 dark:text-slate-400 hover:text-gray-700":"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm"}`,children:"RGGB Mode"}),c.jsx("button",{onClick:()=>l(!0),className:`px-4 py-1.5 text-xs font-bold rounded transition-all ${s?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-300 shadow-sm":"text-gray-500 dark:text-slate-400 hover:text-gray-700"}`,children:"BGGR Mode"})]})}),c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Input Black Levels ()"}),c.jsx("div",{className:"grid grid-cols-4 gap-2",children:[0,1,2,3].map(b=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:`text-[10px] font-bold mb-1 ${S[b]}`,children:v[b]}),c.jsx("input",{type:"number",step:"0.01",value:u[b],onChange:k=>y(b,k.target.value),className:"w-full px-2 py-1 text-sm font-mono border border-gray-300 dark:border-slate-600 rounded bg-white dark:bg-slate-900 text-gray-900 dark:text-slate-100 outline-none focus:ring-1 focus:ring-yellow-500"})]},b))})]}),p?c.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/20 p-2 rounded",children:p}):d?c.jsx(c.Fragment,{children:c.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-3 rounded-lg border border-gray-100 dark:border-slate-700",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-400 dark:text-slate-500 uppercase mb-2",children:"Calculated Color Matrix (XYZ  Camera RGB)"}),c.jsx("div",{className:"font-mono text-xs text-gray-700 dark:text-slate-300 grid grid-rows-3 gap-1 mb-3",children:x(d.matrix).map((b,k)=>c.jsxs("div",{className:"flex justify-between bg-white dark:bg-slate-900 px-2 py-1 rounded",children:[c.jsx("span",{className:"text-red-500/80 w-1/3 text-right",children:b[0]}),c.jsx("span",{className:"text-green-500/80 w-1/3 text-right",children:b[1]}),c.jsx("span",{className:"text-blue-500/80 w-1/3 text-right",children:b[2]})]},k))}),c.jsx("button",{onClick:()=>w(g),className:"w-full py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold rounded shadow transition-transform active:scale-95 flex items-center justify-center gap-2",children:"Copy Matrix String (for customMatrix)"})]})}):c.jsx("div",{className:"text-gray-400 text-sm text-center",children:"Calculating..."})]})]})};function Wte(e,t){const r=e.length;let n=0,a=0,i=0,o=0;for(let l=0;l<r;l++)n+=e[l],a+=t[l],i+=e[l]*t[l],o+=e[l]*e[l];const s=r*o-n*n;return{slope:(r*i-n*a)/s,intercept:(a*o-n*i)/s}}function Vte(e,t){const r=e.length,n=new Array(r).fill(0),a=2*t;for(let i=0;i<r;i++){const o=i>0?e[i-1]:e[0],s=i<r-1?e[i+1]:e[r-1];n[i]=(s-o)/a}return n}function JS(e,t,r,n){const a=Math.floor(n.x),i=Math.floor(n.y),o=Math.floor(n.w),s=Math.floor(n.h);if(o<8||s<8)return null;let l=[];for(let G=0;G<s;G++){const W=[],ne=(i+G)*t;for(let Q=0;Q<o;Q++)W.push(e[ne+a+Q]);l.push(W)}let u=0,f=0;for(let G=1;G<s-1;G+=2)for(let W=1;W<o-1;W+=2)u+=Math.abs(l[G][W+1]-l[G][W-1]),f+=Math.abs(l[G+1][W]-l[G-1][W]);let d=o,h=s,p=l;if(f>u){p=Array(o).fill(0).map(()=>Array(s).fill(0));for(let G=0;G<s;G++)for(let W=0;W<o;W++)p[W][s-1-G]=l[G][W];d=s,h=o}const m=[],y=[];for(let G=0;G<h;G++){const W=p[G],ne=W.map((ie,K)=>K===0?0:Math.abs(ie-W[K-1])),Q=Math.max(...ne),B=ne.indexOf(Q);if(Q>1){const ie=Math.max(0,B-3),K=Math.min(d,B+4);let X=0,se=0;for(let de=ie;de<K;de++)X+=ne[de],se+=de*ne[de];X>0&&(m.push(se/X),y.push(G))}}if(m.length<h*.4)return null;const{slope:w,intercept:x}=Wte(y,m),g=Math.cos(Math.atan(w)),v=[],S=[];for(let G=0;G<h;G++){const W=w*G+x;for(let ne=0;ne<d;ne++)v.push((ne-W)*g),S.push(p[G][ne])}const k=Math.min(o,s)/2;let P=0;for(const G of v)Math.abs(G)<=k&&P++;let C=.125;if(P>0){const G=40*k/P;C=Math.max(.01,Math.min(.125,G))}const N=C,O=Array.from(v.keys()).sort((G,W)=>v[G]-v[W]),E=O.map(G=>v[G]),M=O.map(G=>S[G]),_=E[0],T=E[E.length-1],$=Math.floor((T-_)/N),I=new Array($).fill(0),A=new Array($).fill(0);for(let G=0;G<E.length;G++){const W=Math.floor((E[G]-_)/N);W>=0&&W<$&&(I[W]+=M[G],A[W]++)}let R=M[0];for(let G=0;G<$;G++)A[G]>0?(I[G]/=A[G],R=I[G]):I[G]=R;const L=I.slice(0,10).reduce((G,W)=>G+W,0)/10,V=I.slice(-10).reduce((G,W)=>G+W,0)/10;if(L>V){const G=Math.max(...I),W=Math.min(...I);for(let ne=0;ne<I.length;ne++)I[ne]=G-I[ne]+W}const ee=Vte(I,N);return{esf:I,lsfFull:ee,binSize:N}}function Hte(e,t,r){if(e.length===0)return null;const n=4096,a=new ys(n),i=r?1e3/r:1,o=new Float32Array(501);for(let m=0;m<=500;m++)o[m]=m/500*i;const s=new Float32Array(501).fill(0);let l=0,u=[],f=[],d=0;for(const m of e){const y=m.lsfFull,w=m.binSize;let x=0,g=-1/0;for(let M=0;M<y.length;M++)y[M]>g&&(g=y[M],x=M);let v=0,S=0;if(t>0)S=t,v=Math.round(t/w);else{const M=g*.2;let _=0;for(let R=x;R>=0;R--)if(y[R]<M){_=R;break}let T=y.length-1;for(let R=x;R<y.length;R++)if(y[R]<M){T=R;break}let A=(T-_)*w*8;A=Math.max(2,A),S=A,v=Math.round(A/w)}d+=S;const b=Math.max(0,x-v),k=Math.min(y.length,x+v),P=y.slice(b,k);if(P.length<8)continue;u.length===0&&(u=P,f=m.esf);const C=new Float32Array(n).fill(0);for(let M=0;M<P.length;M++){const _=.54-.46*Math.cos(2*Math.PI*M/(P.length-1));C[M]=P[M]*_}a.transform(C);const N=[],O=[];for(let M=0;M<=n/2;M++){const _=Math.sqrt(a._real[M]**2+a._imag[M]**2);N.push(_),O.push(M/(n*w)*i)}const E=N[0];if(E>0){for(let M=0;M<=500;M++){const _=o[M];s[M]+=Xte(_,O,N)/E}l++}}if(l===0)return null;const h=Array.from(s).map(m=>m/l);let p=null;for(let m=0;m<h.length-1;m++)if(h[m]>=.5&&h[m+1]<.5){p=o[m]+(.5-h[m])*(o[m+1]-o[m])/(h[m+1]-h[m]);break}return{esf:f,lsf:[],lsfCropped:u,mtf:h,freqs:Array.from(o),mtf50:p,calcRadius:d/l}}function Xte(e,t,r){if(e<=t[0])return r[0];if(e>=t[t.length-1])return r[r.length-1];let n=0;for(;e>t[n+1];)n++;const a=(e-t[n])/(t[n+1]-t[n]);return r[n]+a*(r[n+1]-r[n])}const Kte=({isOpen:e,onClose:t,rawImageData:r,roi:n,zIndex:a=110,onFocus:i,displaySettings:o})=>{const[s,l]=j.useState([]),[u,f]=j.useState(""),[d,h]=j.useState(""),[p,m]=j.useState(12),[y,w]=j.useState(!1),[x,g]=j.useState(1),[v,S]=j.useState(null),[b,k]=j.useState({x:100,y:50}),[P,C]=j.useState({w:1e3,h:800}),[N,O]=j.useState(!1),[E,M]=j.useState(!1),_=j.useRef({x:0,y:0}),T=j.useRef({w:0,h:0});j.useEffect(()=>{if(e&&n&&!y){const K=Math.max(n.w,n.h);m(K)}},[e,n,y]);const $=s.length>0?s[s.length-1].binSize:null,I=$?(1/$).toFixed(1):"-",A=j.useMemo(()=>n?Math.max(n.w,n.h):100,[n]),R=()=>{if(!(!r||!n))try{let K;if((o==null?void 0:o.renderMode)==="advanced-zero-dep"&&o.advancedZeroDep){const X=N3(r,n,o);K=JS(X.data,X.width,X.height,{x:0,y:0,w:X.width,h:X.height})}else K=JS(r.data,r.width,r.height,n);K?l(X=>[...X,K]):alert("Could not detect valid edge.")}catch(K){console.error(K),alert("Error processing ROI")}},L=()=>{l([]),S(null),g(1)},V=()=>{if(!v)return;const K=parseFloat(u),de=`data:text/csv;charset=utf-8,Frequency (${!isNaN(K)&&K>0?"lp/mm":"cy/px"}),MTF
`+v.freqs.map((ye,te)=>`${ye.toFixed(6)},${v.mtf[te].toFixed(6)}`).join(`
`),J=encodeURI(de),je=document.createElement("a");je.setAttribute("href",J),je.setAttribute("download",`sfr_data_${Date.now()}.csv`),document.body.appendChild(je),je.click(),document.body.removeChild(je)};j.useEffect(()=>{if(s.length===0){S(null);return}const K=parseFloat(u),X=!isNaN(K)&&K>0?K:null,de=Hte(s,y?-1:p,X);S(de)},[s,p,y,u]),j.useEffect(()=>{e&&s.length===0&&n&&r&&R()},[e]);const ee=K=>{i&&i(),!(K.target.closest("button")||K.target.closest("input"))&&(O(!0),_.current={x:K.clientX-b.x,y:K.clientY-b.y})},G=K=>{K.stopPropagation(),K.preventDefault(),M(!0),_.current={x:K.clientX,y:K.clientY},T.current={w:P.w,h:P.h}};j.useEffect(()=>{const K=se=>{if(N)k({x:se.clientX-_.current.x,y:se.clientY-_.current.y});else if(E){const de=se.clientX-_.current.x,J=se.clientY-_.current.y;C({w:Math.max(600,T.current.w+de),h:Math.max(500,T.current.h+J)})}},X=()=>{O(!1),M(!1)};return(N||E)&&(window.addEventListener("mousemove",K),window.addEventListener("mouseup",X)),()=>{window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",X)}},[N,E]);const W=j.useMemo(()=>{if(!(v!=null&&v.mtf50)||!d)return null;const K=parseFloat(d);if(isNaN(K)||K<=0)return null;let X=v.mtf50;const se=parseFloat(u);return!isNaN(se)&&se>0&&(X=v.mtf50*(se/1e3)),X*2*K},[v,d,u]);if(!e)return null;const ne=v?v.lsfCropped.map((K,X)=>({x:X,y:K})):[],Q=v?v.esf.map((K,X)=>({x:X,y:K})):[],B=v?v.mtf.map((K,X)=>({freq:v.freqs[X],mtf:K})).filter(K=>K.freq<=(parseFloat(u)?200:1)):[],ie=u?"lp/mm":"cy/px";return c.jsxs("div",{className:"fixed flex flex-col bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden",style:{left:b.x,top:b.y,width:P.w,height:P.h,zIndex:a??100},onMouseDownCapture:i,children:[c.jsxs("div",{className:`flex justify-between items-center px-4 py-2 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800 select-none ${N?"cursor-grabbing":"cursor-grab"}`,onMouseDown:ee,children:[c.jsxs("h3",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 flex items-center gap-2 pointer-events-none",children:["SFR Expert (Adaptive Edge Method)",c.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded border border-orange-200 dark:border-orange-800",children:[s.length," ROI",s.length!==1?"s":""]})]}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-slate-800/30 border-b border-gray-200 dark:border-slate-700 flex items-center gap-4 flex-wrap text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Pixel Pitch (m):"}),c.jsx("input",{type:"number",value:u,onChange:K=>f(K.target.value),placeholder:"Default (cy/px)",className:"w-20 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:"Image Height:"}),c.jsx("input",{type:"number",value:d,onChange:K=>h(K.target.value),placeholder:"px",className:"w-16 px-2 py-1 bg-white dark:bg-slate-900 border border-gray-300 dark:border-slate-600 rounded outline-none focus:border-orange-500"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded border border-blue-100 dark:border-blue-800",title:"Auto-calculated based on ROI size",children:[c.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"Bin:"}),$?c.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[$.toFixed(3),"px",c.jsxs("span",{className:"text-[10px] ml-1 text-gray-500",children:["(",I,"x)"]})]}):c.jsx("span",{className:"text-gray-400 italic",children:"..."})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[240px] border-l border-gray-300 dark:border-slate-600 pl-3",children:[c.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:y,onChange:K=>{const X=K.target.checked;w(X),X||m(A)},className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 dark:text-slate-300",children:"Jiang's Official NR"})]}),c.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[c.jsxs("div",{className:"flex justify-between items-baseline",children:[c.jsx("span",{className:"font-bold text-gray-500 dark:text-slate-400",children:y?"Calculated:":"Manual:"}),c.jsxs("span",{className:`font-mono font-bold ${y?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:[y&&(v!=null&&v.calcRadius)?v.calcRadius.toFixed(2):p.toFixed(1)," px"]})]}),c.jsx("input",{type:"range",min:"2",max:A,step:"0.5",value:p,onChange:K=>{const X=parseFloat(K.target.value);m(X),w(!1)},disabled:y,className:`w-full h-1.5 rounded-lg appearance-none cursor-pointer ${y?"bg-gray-200 dark:bg-slate-800":"bg-gray-300 dark:bg-slate-600 accent-orange-500"}`})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:R,className:"px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Add Current ROI"}),c.jsx("button",{onClick:V,disabled:!v,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-gray-300 disabled:text-gray-500 text-white font-bold rounded shadow-sm transition-transform active:scale-95",children:"Export CSV"}),c.jsx("button",{onClick:L,className:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-600 dark:text-slate-300 font-bold rounded transition-colors",children:"Clear"})]})]}),c.jsxs("div",{className:"flex-1 p-4 overflow-hidden flex flex-col gap-4 bg-white dark:bg-slate-950",children:[c.jsxs("div",{className:"h-[35%] min-h-[180px] flex gap-4",children:[c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsx("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 absolute top-2 left-3 z-10 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:"ESF"}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(hl,{data:Q,children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(Jn,{dataKey:"x",hide:!0})," ",c.jsx(ea,{hide:!0,domain:["auto","auto"]})," ",c.jsx(Xr,{contentStyle:{fontSize:"10px"}}),c.jsx(Er,{type:"monotone",dataKey:"y",stroke:"#3b82f6",strokeWidth:1,dot:!1,isAnimationActive:!1})]})})})]}),c.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-slate-900/50 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col",children:[c.jsxs("div",{className:"absolute top-2 left-3 z-10 flex items-center gap-3",children:[c.jsxs("h4",{className:"text-[10px] font-bold text-gray-500 dark:text-slate-400 bg-white/80 dark:bg-slate-900/80 px-1 rounded",children:["LSF ",x>1?`(x${x.toFixed(0)})`:""]}),c.jsxs("div",{className:"flex items-center gap-1 bg-white/80 dark:bg-slate-900/80 px-1 rounded border border-gray-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[9px] text-gray-400 font-bold",children:"Zoom"}),c.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:x,onChange:K=>g(parseFloat(K.target.value)),className:"w-16 h-1 bg-gray-300 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-red-500"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 w-full",children:c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(hl,{data:ne,children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),c.jsx(ho,{y:0,stroke:"#9ca3af",strokeOpacity:.5,strokeDasharray:"3 3"}),c.jsx(Jn,{dataKey:"x",hide:!0}),c.jsx(ea,{hide:!1,width:30,tick:{fontSize:9,fill:"#888"},domain:[K=>K,K=>K/x],allowDataOverflow:!0,tickFormatter:K=>K.toFixed(3)}),c.jsx(Xr,{contentStyle:{fontSize:"10px"},formatter:K=>[K.toFixed(5),"Amplitude"]}),c.jsx(Er,{type:"monotone",dataKey:"y",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-2 relative flex flex-col min-h-[250px]",children:[c.jsxs("div",{className:"flex justify-between items-start px-2 mb-1",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 dark:text-slate-400 uppercase",children:"MTF / Spatial Frequency Response"}),c.jsxs("div",{className:"flex gap-4 items-center",children:[(v==null?void 0:v.mtf50)&&c.jsxs("div",{className:"text-sm font-bold text-gray-600 dark:text-slate-300",children:["MTF50 = ",c.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[v.mtf50.toFixed(2)," ",ie]})]}),W!==null&&c.jsxs("div",{className:"text-lg font-bold text-white bg-orange-500 px-3 py-0.5 rounded shadow-lg animate-in fade-in",children:[Math.round(W)," LW/PH"]})]})]}),c.jsxs("div",{className:"flex-1 relative min-h-0 w-full",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none select-none opacity-10",children:c.jsx("svg",{viewBox:"0 0 400 60",className:"w-[40rem] h-auto",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-gray-900 dark:fill-white",fontSize:"24",fontWeight:"bold",children:" y-g-jiang.github.io"})})}),c.jsx(Ii,{width:"100%",height:"100%",children:c.jsxs(hl,{data:B,margin:{top:10,right:30,left:10,bottom:20},children:[c.jsx(fi,{strokeDasharray:"3 3",stroke:"#374151",opacity:.15}),c.jsx(Jn,{dataKey:"freq",type:"number",tick:{fontSize:10,fill:"#9ca3af"},label:{value:`Frequency (${ie})`,position:"insideBottom",offset:-10,fontSize:11,fill:"#9ca3af"}}),c.jsx(ea,{domain:[0,1.1],tick:{fontSize:10,fill:"#9ca3af"},label:{value:"MTF",angle:-90,position:"insideLeft",fontSize:11,fill:"#9ca3af"}}),c.jsx(Xr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"none",color:"#fff",fontSize:"11px",borderRadius:"4px"},labelFormatter:K=>`Freq: ${Number(K).toFixed(3)}`,formatter:K=>[K.toFixed(4),"MTF"]}),c.jsx(si,{verticalAlign:"top",height:20}),c.jsx(Er,{type:"monotone",dataKey:"mtf",name:"SFR",stroke:"#000000",strokeWidth:2,className:"dark:stroke-white",dot:!1,isAnimationActive:!1}),(v==null?void 0:v.mtf50)&&c.jsx(jf,{x:v.mtf50,y:.5,r:4,fill:"#f97316",stroke:"none",children:c.jsx(on,{value:"MTF50",position:"top",fill:"#f97316",fontSize:10,fontWeight:"bold"})})]})})]})]})]}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 bg-gray-300 dark:bg-slate-600 rounded-tl hover:bg-orange-500 transition-colors",onMouseDown:G})]})},Yte=`
import struct
import numpy as np

class Type:
    Short = (3,2); Long = (4,4); Rational = (5,8); Ascii = (2,1); Byte = (1,1)
    Undefined = (7,1); Srational = (10,8); IFD = (13,4)

class Tag:
    NewSubfileType = (254, Type.Long); ImageWidth = (256, Type.Long); ImageLength = (257, Type.Long)
    BitsPerSample = (258, Type.Short); Compression = (259, Type.Short)
    PhotometricInterpretation = (262, Type.Short); Make = (271, Type.Ascii); Model = (272, Type.Ascii)
    StripOffsets = (273, Type.Long); Orientation = (274, Type.Short); SamplesPerPixel = (277, Type.Short)
    RowsPerStrip = (278, Type.Short); StripByteCounts = (279, Type.Long)
    CFARepeatPatternDim = (33421, Type.Short); CFAPattern = (33422, Type.Byte)
    DNGVersion = (50706, Type.Byte); UniqueCameraModel = (50708, Type.Ascii)
    BlackLevel = (50714, Type.Short); WhiteLevel = (50717, Type.Short)
    ColorMatrix1 = (50721, Type.Srational); CalibrationIlluminant1 = (50778, Type.Short)
    BlackLevelRepeatDim = (50713, Type.Short)

class Compression: Uncompressed = 1
class PhotometricInterpretation: Color_Filter_Array = 32803
class CFAPattern: BGGR=[2,1,1,0]; GBRG=[1,2,0,1]; GRBG=[1,0,2,1]; RGGB=[0,1,1,2]

class dngTag(object):
    def __init__(self, tagType, value=[]):
        self.TagId = tagType[0]
        self.DataType = tagType[1]
        self.DataCount = len(value) if not isinstance(value, str) else len(value) + 1
        self.Value = self._pack_value(tagType[1], value)
        self.DataLength = len(self.Value)
        self.selfContained = (self.DataLength <= 4)
        self.DataOffset = 0

    def _pack_value(self, dtype, value):
        tid = dtype[0]
        if tid == 1: return struct.pack('<%sB' % len(value), *value)
        elif tid == 3: return struct.pack('<%sH' % len(value), *value)
        elif tid == 4: return struct.pack('<%sL' % len(value), *value)
        elif tid == 2: return struct.pack('<%ss' % len(value), value.encode("ascii")) + b'\\x00'
        elif tid == 5 or tid == 10: 
            flat = [item for sublist in value for item in sublist]
            fmt = 'L' if tid == 5 else 'l'
            return struct.pack('<%s%s' % (len(flat), fmt), *flat)
        return b''

    def write_directory(self, buf, offset):
        if self.selfContained:
            val = self.Value + b'\\x00' * (4 - len(self.Value))
            struct.pack_into("<HHI4s", buf, offset, self.TagId, self.DataType[0], self.DataCount, val)
        else:
            struct.pack_into("<HHII", buf, offset, self.TagId, self.DataType[0], self.DataCount, self.DataOffset)

    def write_data(self, buf):
        if not self.selfContained:
            struct.pack_into(f"<{len(self.Value)}s", buf, self.DataOffset, self.Value)

def convert_to_dng(raw_bytes, width, height, cfa_str, black_level_list, shift, cm_flat):
    # 1. Pixel Data Processing
    # Ensure raw_bytes is a bytes-like object
    raw_data = np.frombuffer(raw_bytes, dtype=np.uint16).copy()
    if shift > 0:
        raw_data = raw_data.astype(np.uint32) * (1 << shift)
        raw_data = np.clip(raw_data, 0, 65535).astype(np.uint16)

    # 2. Metadata Preparation
    white_level = 65019
    # Format Color Matrix for Srational (Value, Denominator)
    color_matrix = [[int(x * 10000), 10000] for x in cm_flat]

    cfa_map = {"BGGR": CFAPattern.BGGR, "GBRG": CFAPattern.GBRG, "GRBG": CFAPattern.GRBG, "RGGB": CFAPattern.RGGB}
    
    tags = [
        dngTag(Tag.NewSubfileType, [0]),
        dngTag(Tag.ImageWidth, [width]),
        dngTag(Tag.ImageLength, [height]),
        dngTag(Tag.BitsPerSample, [16]), 
        dngTag(Tag.Compression, [Compression.Uncompressed]),
        dngTag(Tag.PhotometricInterpretation, [PhotometricInterpretation.Color_Filter_Array]),
        dngTag(Tag.Make, "JO-Workstation"),
        dngTag(Tag.Model, "Manual-16bit"),
        dngTag(Tag.SamplesPerPixel, [1]),
        dngTag(Tag.RowsPerStrip, [height]), 
        dngTag(Tag.CFARepeatPatternDim, [2, 2]),
        dngTag(Tag.CFAPattern, cfa_map.get(cfa_str.upper(), CFAPattern.RGGB)),
        dngTag(Tag.BlackLevelRepeatDim, [2, 2]),
        dngTag(Tag.BlackLevel, [int(x) for x in black_level_list]),
        dngTag(Tag.WhiteLevel, [white_level]),
        dngTag(Tag.ColorMatrix1, color_matrix),
        dngTag(Tag.CalibrationIlluminant1, [21]),
        dngTag(Tag.DNGVersion, [1, 4, 0, 0]),
        dngTag(Tag.UniqueCameraModel, "Generic 16bit Raw")
    ]
    
    pixel_bytes = raw_data.tobytes()
    tags.append(dngTag(Tag.StripOffsets, [0])) 
    tags.append(dngTag(Tag.StripByteCounts, [len(pixel_bytes)]))
    tags.sort(key=lambda x: x.TagId)
    
    ifd_size = 2 + (len(tags) * 12) + 4
    current_data_offset = 8 + ifd_size
    
    for tag in tags:
        if not tag.selfContained:
            tag.DataOffset = current_data_offset
            current_data_offset = (current_data_offset + tag.DataLength + 3) & 0xFFFFFFFC
            
    img_offset = current_data_offset
    for tag in tags:
        if tag.TagId == Tag.StripOffsets[0]:
            tag.Value = struct.pack('<L', img_offset)
            break
            
    buf = bytearray(img_offset + len(pixel_bytes))
    struct.pack_into("<ccbbI", buf, 0, b'I', b'I', 0x2A, 0x00, 8)
    struct.pack_into("<H", buf, 8, len(tags))
    
    offset = 10
    for tag in tags:
        tag.write_directory(buf, offset)
        offset += 12
        
    struct.pack_into("<I", buf, offset, 0)
    for tag in tags:
        tag.write_data(buf)
        
    buf[img_offset:img_offset+len(pixel_bytes)] = pixel_bytes
    return bytes(buf)
`,qte=({isOpen:e,onClose:t,rawImageData:r,fileName:n,zIndex:a=200,onFocus:i})=>{const[o,s]=j.useState(!0),[l,u]=j.useState(!1),f=j.useRef(null),[d,h]=j.useState(4),[p,m]=j.useState(""),[y,w]=j.useState(""),[x,g]=j.useState("RGGB"),v=j.useMemo(()=>Object.keys(Qd).sort(),[]);j.useEffect(()=>{e&&!f.current&&(async()=>{try{const k=await window.loadPyodide();await k.loadPackage("numpy"),await k.runPythonAsync(Yte),f.current=k,s(!1)}catch(k){console.error("Pyodide Init Failed",k)}})()},[e]),j.useEffect(()=>{if(e&&r){const b=r.whiteLevel;b>1e4?h(2):b>3e3?h(4):b>6e4&&h(0);const k=r.bayerPattern?r.bayerPattern.toUpperCase():"RGGB";["RGGB","BGGR","GBRG","GRBG"].includes(k)?g(k):g("RGGB")}},[e,r]);const S=async()=>{if(!(!r||!f.current)){u(!0);try{const b=f.current,k=p.trim()?p.trim().split(/\s+/).map(Number):[0,0,0,0];if(k.length===1&&!isNaN(k[0])&&k.push(k[0],k[0],k[0]),k.length<4)for(;k.length<4;)k.push(0);const P=y.trim()?y.trim().split(/[\s,\n]+/).map(Number):[1,0,0,0,1,0,0,0,1];if(P.length!==9)throw new Error("Color Matrix must contain exactly 9 numeric values.");const C=x;b.globals.set("js_raw_bytes",new Uint8Array(r.data.buffer,r.data.byteOffset,r.data.byteLength)),b.globals.set("js_width",r.width),b.globals.set("js_height",r.height),b.globals.set("js_cfa",C),b.globals.set("js_bl_list",k),b.globals.set("js_shift",d),b.globals.set("js_cm_flat",P);const N=await b.runPythonAsync(`
                convert_to_dng(
                    js_raw_bytes.to_py(), 
                    js_width, 
                    js_height, 
                    js_cfa, 
                    js_bl_list.to_py(), 
                    js_shift, 
                    js_cm_flat.to_py()
                )
            `),O=N.toJs();N.destroy();const E=new Blob([O],{type:"image/x-adobe-dng"}),M=URL.createObjectURL(E),_=document.createElement("a");_.href=M;const T=n.substring(0,n.lastIndexOf("."))||"image";_.download=`${T}_16bit_manual.dng`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(M)}catch(b){console.error(b),alert("Export Failed: "+b.message)}finally{u(!1)}}};return e?c.jsxs(dc,{initialPosition:{x:window.innerWidth/2-250,y:150},onClose:t,zIndex:a,onFocus:i,className:"w-[500px] bg-white dark:bg-black border-2 border-black dark:border-white shadow-2xl rounded-none flex flex-col font-mono",children:[c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b-2 border-black dark:border-gray-500 bg-gray-200 dark:bg-gray-800",children:[c.jsx("h3",{className:"text-sm font-bold text-black dark:text-white uppercase tracking-widest",children:"16-bit DNG Workstation"}),c.jsx("button",{onClick:t,className:"text-black dark:text-white hover:text-red-600 transition-colors",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6 flex flex-col gap-6",children:o?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("p",{className:"text-xs font-bold text-gray-500 animate-pulse"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Width (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.width)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Height (Read Only)"}),c.jsx("input",{type:"text",readOnly:!0,value:(r==null?void 0:r.height)||0,className:"w-full bg-gray-100 dark:bg-gray-900 border border-black dark:border-gray-600 px-2 py-1 text-sm text-gray-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 uppercase",children:"Shift"}),c.jsx("input",{type:"number",value:d,onChange:b=>h(parseInt(b.target.value)||0),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold"})]}),c.jsxs("div",{className:"col-span-1 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Pattern"}),c.jsxs("select",{value:x,onChange:b=>g(b.target.value),className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-1 py-1 text-sm font-bold",children:[c.jsx("option",{value:"RGGB",children:"RGGB"}),c.jsx("option",{value:"BGGR",children:"BGGR"}),c.jsx("option",{value:"GBRG",children:"GBRG"}),c.jsx("option",{value:"GRBG",children:"GRBG"})]})]}),c.jsxs("div",{className:"col-span-2 flex flex-col gap-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase",children:"16bit Black Level"}),c.jsx("input",{type:"text",value:p,onChange:b=>m(b.target.value),placeholder:"R G1 B G2",className:"w-full bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-sm font-bold font-mono placeholder:font-normal placeholder:text-gray-400"})]})]}),c.jsx("div",{className:"mt-[-15px]",children:c.jsx("span",{className:"text-[9px] text-gray-400 dark:text-gray-500",children:"4 = 12bit (x16) | 2 = 14bit (x4)"})}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Color Matrix (XYZ to Raw - 9 Values)"}),c.jsxs("select",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 border border-black dark:border-gray-500 rounded-none px-1 py-0.5 max-w-[180px] cursor-pointer",onChange:b=>{const k=Qd[b.target.value];k&&w(k),b.target.value=""},defaultValue:"",children:[c.jsx("option",{value:"",disabled:!0,children:"Select Camera Preset..."}),v.map(b=>c.jsx("option",{value:b,children:b},b))]})]}),c.jsx("textarea",{value:y,onChange:b=>w(b.target.value),placeholder:"e.g. 0.94 -0.39 -0.07 -0.28 1.09 0.22 -0.01 0.09 0.57",className:"w-full h-20 bg-white dark:bg-gray-800 border-2 border-black dark:border-gray-500 px-2 py-1 text-xs font-mono resize-none placeholder:font-normal placeholder:text-gray-400"}),c.jsx("span",{className:"text-[8px] text-gray-400 mt-0.5",children:"Enter 9 numbers separated by space or comma."})]}),c.jsx("button",{onClick:S,disabled:l,className:`w-full py-4 text-sm font-bold uppercase tracking-widest transition-all shadow-[4px_4px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1 ${l?"bg-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-white border-2 border-black"}`,children:l?"Processing Kernel...":"Convert & Download DNG"})]})})]}):null};function Zte(e,t,r,n=3){const i=r.byteLength,o=8,s=o+i,l=[{id:256,type:4,count:1,value:e},{id:257,type:4,count:1,value:t},{id:258,type:3,count:n,value:n===1?16:[16,16,16]},{id:259,type:3,count:1,value:1},{id:262,type:3,count:1,value:n===1?1:2},{id:273,type:4,count:1,value:o},{id:277,type:3,count:1,value:n},{id:278,type:4,count:1,value:t},{id:279,type:4,count:1,value:i}],u=2+l.length*12+4;let f=0;const d=l.map(g=>{let v=g.type===3?2:4;const S=g.count*v,b=S<=4;let k=0;return b||(k=f,f+=S),{...g,fits:b,totalBytes:S,extraOffset:k}}),h=s+u+f,p=new ArrayBuffer(h),m=new DataView(p),y=new Uint8Array(p);m.setUint16(0,18761,!0),m.setUint16(2,42,!0),m.setUint32(4,s,!0),y.set(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),o);let w=s;m.setUint16(w,l.length,!0),w+=2;const x=s+u;return d.forEach(g=>{if(m.setUint16(w,g.id,!0),m.setUint16(w+2,g.type,!0),m.setUint32(w+4,g.count,!0),g.fits)Array.isArray(g.value)||(g.type===3?m.setUint16(w+8,g.value,!0):m.setUint32(w+8,g.value,!0));else{const v=x+g.extraOffset;m.setUint32(w+8,v,!0),Array.isArray(g.value)&&g.value.forEach((S,b)=>{m.setUint16(v+b*2,S,!0)})}w+=12}),m.setUint32(w,0,!0),p}const Qte="http://localhost:5428",Jte=(e=!1)=>{const[t,r]=j.useState({isConnected:!1,message:"Initializing...",hasDngConverter:!1});return j.useEffect(()=>{if(e){r({isConnected:!1,message:"Bridge Paused",hasDngConverter:!1});return}const n=async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),1e3),s=await fetch(`${Qte}/health`,{method:"GET",signal:i.signal});if(clearTimeout(o),s.ok){const l=await s.json(),u=`Connected (${l.exiftool||"Ready"})`;r(f=>f.isConnected===!0&&f.message===u&&f.version===l.exiftool&&f.hasDngConverter===!!l.dng_converter?f:{isConnected:!0,message:u,version:l.exiftool,hasDngConverter:!!l.dng_converter})}else r(l=>l.isConnected===!1&&l.message==="Service Error"?l:{isConnected:!1,message:"Service Error",hasDngConverter:!1})}catch{r(o=>o.isConnected===!1&&o.message==="Not Detected"?o:{isConnected:!1,message:"Not Detected",hasDngConverter:!1})}};n();const a=setInterval(n,2e3);return()=>clearInterval(a)},[e]),t},ere="JTR_BlobStore",pi="raw_files",tre=1,vp=()=>new Promise((e,t)=>{const r=indexedDB.open(ere,tre);r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(pi)||a.createObjectStore(pi)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),e5=async(e,t)=>{const r=await vp();return new Promise((n,a)=>{const i=r.transaction(pi,"readwrite");i.objectStore(pi).put(t,e),i.oncomplete=()=>n(),i.onerror=()=>a(i.error)})},rre=async e=>{const t=await vp();return new Promise((r,n)=>{const o=t.transaction(pi,"readonly").objectStore(pi).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>n(o.error)})},nre=async()=>{const e=await vp();return new Promise((t,r)=>{const n=e.transaction(pi,"readwrite");n.objectStore(pi).clear(),n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})},dO="jtr_workspace_index",are=e=>{try{const t=JSON.stringify(e);localStorage.setItem(dO,t)}catch(t){console.error("Failed to save workspace index",t)}},ire=()=>{try{const e=localStorage.getItem(dO);return e?JSON.parse(e):null}catch(e){return console.error("Failed to load workspace index",e),null}},ore=async e=>{const n=(await vp()).transaction(pi,"readwrite").objectStore(pi),a=n.getAllKeys();a.onsuccess=()=>{a.result.forEach(o=>{e.includes(o)||n.delete(o)})}},xn=1024,t5=(e,t,r)=>{const n=e.width,a=e.height,i=new ImageData(t,r),o=e.data,s=i.data,l=n/t,u=a/r;for(let f=0;f<r;f++){const d=Math.floor(f*u),h=f*t*4,p=d*n*4;for(let m=0;m<t;m++){const w=Math.floor(m*l)*4,x=h+m*4,g=p+w;s[x]=o[g],s[x+1]=o[g+1],s[x+2]=o[g+2],s[x+3]=o[g+3]}}return i},sre=(e,t)=>{if(!e)return null;if(t){const r=e.bayerPattern.toUpperCase(),n=l=>{const u=[];for(let f=0;f<4;f++)r[f]===l&&u.push(f);return u},a=t.BlackLevelRed,i=t.BlackLevelGreen,o=t.BlackLevelBlue;if(a!==void 0&&i!==void 0&&o!==void 0){const l=parseFloat(a),u=parseFloat(i),f=parseFloat(o);if(!isNaN(l)&&!isNaN(u)&&!isNaN(f)){const d=[0,0,0,0];return d.fill(u),n("R").forEach(h=>d[h]=l),n("G").forEach(h=>d[h]=u),n("B").forEach(h=>d[h]=f),d}}let s=t.BlackLevel;if(s===void 0&&(s=t.BlackLevel2),s!==void 0){let l=[];if(Array.isArray(s)?l=s.map(Number):typeof s=="string"?l=s.trim().split(/\s+/).map(Number):typeof s=="number"&&(l=[s,s,s,s]),l.length===1&&!isNaN(l[0])&&(l=[l[0],l[0],l[0],l[0]]),l.length>=4&&!l.slice(0,4).some(isNaN))return[l[0],l[1],l[2],l[3]]}}return e.blackLevels&&e.blackLevels.length===4?[e.blackLevels[0],e.blackLevels[1],e.blackLevels[2],e.blackLevels[3]]:null},lre=({stats:e,onClose:t,onMinimize:r,isBGGR:n,onToggleBGGR:a,onOpenWindow:i,displaySettings:o,zIndex:s,onFocus:l,rawImageData:u})=>{if(!e)return null;const f=!!o.showKadc,d=o.blackLevel||[0,0,0,0],h=!!o.subtractBlackLevelFromStats&&!!o.blackLevel,p=j.useMemo(()=>{if(!e||!u||!o.advancedZeroDep||o.renderMode!=="advanced-zero-dep")return null;try{const{x:v,y:S,width:b,height:k}=e,P=N3(u,{x:v,y:S,w:b,h:k},o),C=[0,0,0,0],N=[0,0,0,0],O=Math.floor(S),E=Math.floor(v);for(let M=0;M<P.height;M++){const _=M*P.width;for(let T=0;T<P.width;T++){const $=P.data[_+T],I=O+M,A=E+T,R=I%2,L=A%2,V=R*2+L;C[V]+=$,N[V]++}}return C.map((M,_)=>N[_]>0?M/N[_]:0)}catch(v){return console.error("Unmix calc error",v),null}},[e,u,o]),m=(v,S,b)=>f?S<=1e-4?0:(v-b)/S:null,y=(v,S)=>h?v-d[S]:v,w=()=>{if(!h){alert(`Sub. BL
Please enable 'Sub. BL' in Tools sidebar first.`);return}let v,S,b,k;n?(k=0,S=1,b=2,v=3):(v=0,S=1,b=2,k=3);const P=N=>e.means[N]-d[N],C=N=>e.stdDevs[N];localStorage.setItem("import_signal_r",P(v).toString()),localStorage.setItem("import_signal_g1",P(S).toString()),localStorage.setItem("import_signal_g2",P(b).toString()),localStorage.setItem("import_signal_b",P(k).toString()),localStorage.setItem("import_sigma_r",C(v).toString()),localStorage.setItem("import_sigma_g1",C(S).toString()),localStorage.setItem("import_sigma_g2",C(b).toString()),localStorage.setItem("import_sigma_b",C(k).toString()),window.open("https://y-g-jiang.github.io/XJZS.html","_blank")},x=n?[{name:"B",desc:"(0,0)",mean:y(e.means[0],0),std:e.stdDevs[0],color:"text-blue-500",snr:m(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:y(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:m(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:y(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:m(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"R",desc:"(1,1)",mean:y(e.means[3],3),std:e.stdDevs[3],color:"text-red-500",snr:m(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}]:[{name:"R",desc:"(0,0)",mean:y(e.means[0],0),std:e.stdDevs[0],color:"text-red-500",snr:m(e.means[0],e.stdDevs[0],d[0]),unmixed:p?p[0]:null},{name:"G1",desc:"(0,1)",mean:y(e.means[1],1),std:e.stdDevs[1],color:"text-green-500",snr:m(e.means[1],e.stdDevs[1],d[1]),unmixed:p?p[1]:null},{name:"G2",desc:"(1,0)",mean:y(e.means[2],2),std:e.stdDevs[2],color:"text-green-500",snr:m(e.means[2],e.stdDevs[2],d[2]),unmixed:p?p[2]:null},{name:"B",desc:"(1,1)",mean:y(e.means[3],3),std:e.stdDevs[3],color:"text-blue-500",snr:m(e.means[3],e.stdDevs[3],d[3]),unmixed:p?p[3]:null}],g=p?"w-96":f?"w-80":"w-60";return c.jsxs(dc,{className:`${g} p-0 overflow-hidden transition-all duration-300 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_rgba(0,0,0,0.5)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.2)]`,onClose:t,zIndex:s,onFocus:l,initialPosition:{x:20,y:80},children:[c.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-800/50 select-none",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-700 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2",children:["ROI Analysis",c.jsxs("span",{className:"text-[10px] font-normal text-gray-400 bg-gray-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:[Math.round(e.width),"",Math.round(e.height)]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-slate-300 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 relative z-20",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-slate-500 font-mono leading-tight",children:["X: ",Math.round(e.x),c.jsx("br",{}),"Y: ",Math.round(e.y)]}),c.jsx("button",{onClick:()=>a(!n),className:"text-[10px] font-bold px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-gray-600 dark:text-slate-300 transition-colors border border-gray-200 dark:border-slate-700 relative z-20",title:"Toggle Bayer Pattern Interpretation",children:n?"BGGR":"RGGB"})]}),c.jsxs("table",{className:"w-full mb-3",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-400 dark:text-slate-500 border-b border-gray-100 dark:border-slate-800",children:[c.jsx("th",{className:"text-left pb-1 font-medium",children:"Ch"}),c.jsxs("th",{className:"text-right pb-1 font-medium",children:["Mean",h?"*":""]}),c.jsx("th",{className:"text-right pb-1 font-medium",children:"Std()"}),f&&c.jsx("th",{className:"text-right pb-1 font-medium text-cyan-600 dark:text-cyan-400",children:"k"}),p&&c.jsx("th",{className:"text-right pb-1 font-medium text-indigo-600 dark:text-indigo-400",children:"Unmix"})]})}),c.jsx("tbody",{className:"font-mono text-xs",children:x.map((v,S)=>c.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[c.jsxs("td",{className:"py-1",children:[c.jsx("span",{className:`font-bold ${v.color}`,children:v.name}),c.jsx("span",{className:"text-[9px] text-gray-300 dark:text-slate-600 ml-1 hidden group-hover:inline",children:v.desc})]}),c.jsx("td",{className:"py-1 text-right text-gray-700 dark:text-slate-200 font-semibold",title:h?"Mean minus Black Level":"Raw Mean",children:v.mean.toFixed(2)}),c.jsx("td",{className:"py-1 text-right text-gray-500 dark:text-slate-400",children:v.std.toFixed(2)}),f&&c.jsx("td",{className:"py-1 text-right text-cyan-600 dark:text-cyan-400 font-bold",children:v.snr!==null?v.snr.toFixed(2):"-"}),p&&c.jsx("td",{className:"py-1 text-right text-indigo-600 dark:text-indigo-400 font-bold",children:v.unmixed!==null?v.unmixed.toFixed(1):"-"})]},S))})]}),h&&c.jsx("div",{className:"mb-2 text-[9px] text-gray-400 dark:text-slate-500 text-right italic",children:"* Mean adjusted by Black Level"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>i("histogram"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Histogram",children:"Hist"}),c.jsx("button",{onClick:()=>i("quant"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-teal-600 hover:bg-teal-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Quantization Steps",children:"Quant"}),c.jsx("button",{onClick:()=>i("fft"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-purple-600 hover:bg-purple-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"View Power Spectrum (FFT)",children:"FFT"}),c.jsx("button",{onClick:()=>i("pearson"),className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Pearson Correlation Analysis",children:"PCC"}),c.jsx("button",{onClick:w,className:"relative z-20 flex-1 min-w-[50px] py-1.5 bg-pink-600 hover:bg-pink-500 text-white text-[10px] font-bold uppercase tracking-wide rounded shadow-sm hover:shadow transition-all active:scale-95 flex items-center justify-center gap-1",title:"Color Noise Analysis (External Tool)",children:"ColorN"})]})]})]})},cre=()=>{var O1;const[e,t]=j.useState("init"),[r,n]=j.useState("Checking storage..."),[a,i]=j.useState(null),o=j.useRef(!1),[s,l]=j.useState("dark");j.useEffect(()=>{const z=window.document.documentElement;z.classList.remove(s==="dark"?"light":"dark"),z.classList.add(s)},[s]);const[u,f]=j.useState(!1),[d,h]=j.useState(!1),[p,m]=j.useState(!1),[y,w]=j.useState(!1),x=Jte(u||d||p),[g,v]=j.useState(!1),[S,b]=j.useState([]),[k,P]=j.useState(-1),[C,N]=j.useState([]),O=j.useMemo(()=>S[k],[S,k]),E=j.useRef(null);j.useEffect(()=>{E.current=O||null},[O]);const M=(O==null?void 0:O.file)||null,_=(O==null?void 0:O.imageElement)||null,T=(O==null?void 0:O.rawImageData)||null,$=(O==null?void 0:O.rawFileBuffer)||null,I=(O==null?void 0:O.renderedRawImageData)||null,A=(O==null?void 0:O.referenceImageData)||null,R=(O==null?void 0:O.sampledImageData)||null,L=(O==null?void 0:O.exifData)||null,V=(O==null?void 0:O.isThreePlane)||!1,ee=(O==null?void 0:O.xtransPhase)||{x:0,y:0},G=(O==null?void 0:O.displaySettings)||{exposure:0,demosaicMethod:3,blackLevel:void 0,wbGains:[1,1],showKadc:!0,subtractBlackLevelFromStats:!0},[W,ne]=j.useState(!1),[Q,B]=j.useState(null),[ie,K]=j.useState(!1),[X,se]=j.useState(!1),[de,J]=j.useState(null),[je,ye]=j.useState([]),[te,he]=j.useState(100),[ve,Ke]=j.useState(!0),[Fe,Ae]=j.useState(!1),[Ue,ft]=j.useState(null),[yt,br]=j.useState(!1),[ut,gr]=j.useState(!1),[Je,Vt]=j.useState(!1),[Et,wr]=j.useState(!1),[$t,Ot]=j.useState(!1),[Ge,Dt]=j.useState("1.0"),[kt,ar]=j.useState(!1),[kr,Zr]=j.useState(!1),[vt,Qr]=j.useState(!1),[st,jn]=j.useState(!1),[Rn,ha]=j.useState({x:0,y:0}),[un,Aa]=j.useState(!1),[It,fn]=j.useState(!1),[Sr,Pn]=j.useState([]),[dn,Jr]=j.useState(0),[zt,ir]=j.useState(null),[Rt,le]=j.useState(!1),[Te,Ie]=j.useState([]),[it,et]=j.useState(.5),[St,mr]=j.useState(!1),[or,We]=j.useState(2),[dt,xt]=j.useState(1),[jt,sr]=j.useState([]),[be,hn]=j.useState(null),[Ln,en]=j.useState(0),[pn,yi]=j.useState([]),[vi,Bn]=j.useState([]),[xi,bi]=j.useState(64),[pa,hc]=j.useState(10),[Fn,H]=j.useState(10),[me,gt]=j.useState(4),[Lt,tn]=j.useState(1),[jr,rn]=j.useState(0),[zn,Lo]=j.useState("processed"),[Ta,ra]=j.useState(!1),Ea=j.useMemo(()=>G.blackLevel?G.blackLevel:T!=null&&T.blackLevels?[T.blackLevels[0],T.blackLevels[1],T.blackLevels[2],T.blackLevels[3]]:[0,0,0,0],[G.blackLevel,T]),Un=(L==null?void 0:L.ImageHeight)||(L==null?void 0:L.ExifImageHeight)||(T==null?void 0:T.height)||0,[U,q]=j.useState(null),[oe,D]=j.useState(null),[pe,Ne]=j.useState({x:0,y:0}),[$e,Ye]=j.useState(1),[qe,He]=j.useState("pan"),Nt=j.useRef(null),lt=j.useRef(null);j.useEffect(()=>{const z=ire();z&&z.sessions.length>0?(i(z),t("prompt")):t("idle")},[]);const Ht=j.useCallback(async()=>{if(!a)return;t("restoring"),n("Restoring layout...");const z=a;if(l(z.theme),Ke(z.sidebarOpen),z.sessions.length>0){n(`Restoring ${z.sessions.length} images...`);const Y=[];for(const Z of z.sessions){if(o.current)return;await new Promise(ae=>setTimeout(ae,50));try{const ae=await rre(Z.id);if(ae){const Ce={id:Z.id,fileName:Z.fileName,file:null,imageElement:null,rawImageData:null,rawFileBuffer:ae,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:Z.isThreePlane,displaySettings:Z.displaySettings,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}},{previewBlob:ge,analysisData:Me}=await Uo(ae);let Oe=null;if(Me)try{Z.displaySettings.renderMode==="zero-dependency"?Oe=await ng(ae,Z.displaySettings):Z.displaySettings.renderMode==="advanced-zero-dep"?Oe=await F_(ae,Z.displaySettings):Z.displaySettings.renderMode==="zero-dep-color"?Oe=await B_(ae,Z.displaySettings):Oe=await a2(ae,Z.displaySettings)}catch(De){console.error("Render failed during restore",De),Oe=await ng(ae,Z.displaySettings)}const _e=URL.createObjectURL(ge),we=new Image;we.src=_e,await new Promise(De=>{we.onload=()=>De()}),Y.push({...Ce,rawImageData:Me,renderedRawImageData:Oe,previewUrl:_e,imageElement:we,exifData:Me.metadata})}}catch(ae){console.error(`Failed to restore session ${Z.id}`,ae)}}if(o.current)return;if(b(Y),z.activeSessionId){const Z=Y.findIndex(ae=>ae.id===z.activeSessionId);Z>=0?P(Z):Y.length>0&&P(0)}ye(z.windows)}o.current||t("idle")},[a]),lr=j.useCallback(async()=>{o.current=!0,n("Cleaning up..."),localStorage.removeItem("jtr_workspace_index");try{await nre()}catch(z){console.error("Failed to clear DB",z)}t("idle"),i(null),o.current=!1},[]),ue=j.useCallback(async()=>{if(!$||!O)return;Vt(!1);const z=Et,Y=$t;D(`Rendering 16-bit TIFF (${z?"Stretched":"Native DN"} | ${Y?"sRGB":"Linear"})...`);try{const Z=await z_($.slice(0),G,z,Y),ae=Zte(Z.width,Z.height,Z.data,Z.channels),Ce=new Blob([ae],{type:"image/tiff"}),ge=URL.createObjectURL(Ce),Me=document.createElement("a"),Oe=O.fileName||"rendered",_e=Oe.substring(0,Oe.lastIndexOf("."))||Oe,we=[z?"stretch":"native",Y?"srgb":"linear"].join("_");Me.href=ge,Me.download=`${_e}_${we}.tif`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(ge)}catch(Z){q("TIFF Export Failed: "+Z.message)}finally{D(null)}},[$,O,G,Et,$t]),Ze=j.useCallback(()=>{!$||!O||Vt(!0)},[$,O]),Ee=j.useCallback(async()=>{if(!T||!O)return;const z=parseFloat(Ge);if(isNaN(z)||z<=0){q("Invalid multiplier for stretch.");return}D(`Stretching DNG by ${z}x...`);try{await new Promise(Mt=>setTimeout(Mt,50));const{width:Y,height:Z,data:ae,whiteLevel:Ce,bayerPattern:ge}=T,Me=new Uint16Array(ae.length);for(let Mt=0;Mt<ae.length;Mt++)Me[Mt]=Math.min(65535,Math.round(ae[Mt]*z));const Oe=Ea.map(Mt=>Mt*z),_e=Ce*z,we=Vc(Y,Z,Me,Oe,_e,ge),De=new Blob([we],{type:"image/x-adobe-dng"}),tt=URL.createObjectURL(De),ct=document.createElement("a");ct.href=tt;const fr=(O.fileName||"image.dng").replace(/\.[^/.]+$/,"");ct.download=`${fr}_stretched_${z}x.dng`,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),URL.revokeObjectURL(tt),console.log(`[App] Successfully exported stretched DNG: ${z}x`)}catch(Y){q(`Stretch Export Failed: ${Y.message}`)}finally{D(null)}},[T,O,Ge,Ea]);j.useEffect(()=>{const z=Y=>{(Y.ctrlKey||Y.metaKey)&&Y.key.toLowerCase()==="s"&&(Y.preventDefault(),Ze())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[Ze]);const Bt=j.useRef(null),Pt=j.useCallback(()=>{e==="idle"&&(Bt.current&&clearTimeout(Bt.current),Bt.current=window.setTimeout(async()=>{var Z;const z={version:1,timestamp:Date.now(),activeSessionId:((Z=S[k])==null?void 0:Z.id)||null,theme:s,sidebarOpen:ve,sessions:S.map(ae=>({id:ae.id,fileName:ae.fileName,fileType:ae.file?ae.file.type:"application/octet-stream",fileSize:ae.rawFileBuffer?ae.rawFileBuffer.byteLength:0,displaySettings:ae.displaySettings,isThreePlane:ae.isThreePlane})),windows:je.map(ae=>({id:ae.id,type:ae.type,roi:ae.roi,zIndex:ae.zIndex,initialPosition:ae.initialPosition,sessionId:ae.sessionId,isBGGR:ae.isBGGR,isMinimized:ae.isMinimized||!1,internalState:ae.internalState}))};are(z);const Y=S.map(ae=>ae.id);ore(Y)},1e3))},[S,je,k,s,ve,e]);j.useEffect(()=>{Pt()},[Pt]);const cr=j.useCallback(z=>{b(Y=>Y.map((Z,ae)=>ae===k?{...Z,...z}:Z))},[k]),bt=()=>P(z=>Math.min(z+1,S.length-1)),Mr=()=>P(z=>Math.max(0,z-1));j.useEffect(()=>{if(T&&Q){const z=Go(T.data,T.width,T.height,Q.x,Q.y,Q.width,Q.height);B(z)}},[T]);const gn=z=>{if(!Q||!O)return;const Y=Date.now().toString()+Math.random().toString().slice(2,5),Z=Math.max(te,...je.map(ge=>ge.zIndex),100),ae=je.length%10*30,Ce=z==="fft"?{x:50,y:50}:z==="histogram"?{x:100,y:100}:{x:150,y:150};ye(ge=>[...ge,{id:Y,type:z,roi:{x:Q.x,y:Q.y,w:Q.width,h:Q.height},zIndex:Z+1,initialPosition:{x:Ce.x+ae,y:Ce.y+ae},sessionId:O.id,isBGGR:ie,isMinimized:!1,stackFiles:(z==="fft"||z==="pearson"||z==="histogram")&&C.length>0?C:void 0}])},Za=z=>{ye(Y=>Y.filter(Z=>Z.id!==z))},pc=z=>{ye(Y=>Y.map(Z=>Z.id===z?{...Z,isMinimized:!0}:Z))},xp=z=>{ye(Y=>Y.map(Z=>Z.id===z?{...Z,isMinimized:!1}:Z)),gc(z)},gc=z=>{ye(Y=>{const Z=Math.max(te,...Y.map(ae=>ae.zIndex));return Y.map(ae=>ae.id===z?{...ae,zIndex:Z+1}:ae)})},bp=(z,Y)=>{ye(Z=>Z.map(ae=>ae.id===z?{...ae,internalState:{...ae.internalState,...Y}}:ae))},mc=()=>{const z=Math.max(te,...je.map(Y=>Y.zIndex));he(z+1)},Gn=(z,Y)=>{ye(Z=>Z.map(ae=>ae.id===z?{...ae,roi:Y}:ae))};j.useEffect(()=>{if(!L)return;const z=L.CFAPattern2||L.CFAPattern;if(z){let Y="";Array.isArray(z)?Y=z.join(""):typeof z=="string"?Y=z.replace(/[\s,]+/g,""):typeof z=="number"&&(Y=String(z)),Y==="0112"?K(!1):Y==="2110"&&K(!0)}},[L]),j.useEffect(()=>{let z;const Y=()=>{if(St&&st){const Z=Date.now()/1e3,ae=.55+.45*Math.sin(Z*or);xt(ae),z=requestAnimationFrame(Y)}else xt(1)};return St&&st?Y():xt(1),()=>{z&&cancelAnimationFrame(z)}},[St,st,or]),j.useEffect(()=>{const z=Y=>{Y.key==="Escape"&&st&&(jn(!1),ha({x:0,y:0}),mr(!1))};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[st]),j.useEffect(()=>()=>{S.forEach(z=>{z.previewUrl&&URL.revokeObjectURL(z.previewUrl)}),lt.current&&lt.current.terminate()},[]);const Bo=async(z,Y=!0)=>{Y&&(Ne({x:0,y:0}),Ye(1),en(0),yi([]),Bn([]),Ae(!1),ft(null),ne(!1),fn(!1),Pn([]),Ie([]),Jr(0));let Z=null;if(x.isConnected){const Oe=new FormData;Oe.append("file",z);try{const we=await(await fetch("http://localhost:5428/read",{method:"POST",body:Oe})).json();if(we.success){let De=we.data;Array.isArray(De)&&De.length===1&&(De=De[0]),Z=De}}catch(_e){console.warn("Auto Exif fetch failed",_e)}}const ae=z.name.toLowerCase().match(/\.(arw|cr2|cr3|dng|nef|orf|raf|rw2|pef|srw|sr2|srf|x3f|erf|mef|mos|mrw|kdc|dcr|iiq|3fr|fff|rwl|nrw|raw|tif|tiff)$/);if(!(["image/jpeg","image/png","image/tiff","image/x-adobe-dng"].includes(z.type)||ae)){q("Unsupported file type. Please load a JPG, PNG, or a supported RAW file.");return}let ge={file:z,exifData:Z};if(ae||z.type==="image/x-adobe-dng")try{Y?D("Processing RAW file (this may take a moment)..."):ra(!0);const Oe=await z.arrayBuffer();ge.rawFileBuffer=Oe;const{previewBlob:_e,analysisData:we}=await Uo(Oe);ge.rawImageData=we,!Z&&we.metadata&&(ge.exifData=we.metadata),ge.isThreePlane=we.isThreePlane||!1,we.isThreePlane&&Y&&ne(!0);let De=!1,tt=null,ct=!1;if(we.isXTrans){ct=!0,tt=Oe;const Mt=(await Jf(Oe,0,0)).dngBuffer,tr=await Uo(Mt);ge.rawFileBuffer=Mt,ge.rawImageData=tr.analysisData,ge.previewUrl=URL.createObjectURL(tr.previewBlob),De=!0}else ge.previewUrl=URL.createObjectURL(_e);ge.originalRawFileBuffer=tt,ge.isXTransOriginal=ct,ge.isXTransConverted=De,ge.xtransPhase={x:0,y:0};const Ut=new Image;if(Ut.src=ge.previewUrl||"",await new Promise((fr,Mt)=>{Ut.onload=()=>{ge.imageElement=Ut,fr()},Ut.onerror=()=>{fr()}}),Y){const fr=ge.rawImageData||we,Mt=sre(fr,Z||fr.metadata);let tr;Mt&&Mt.some(Xt=>Xt>0)&&(tr=Mt);const Be={exposure:0,demosaicMethod:-1,blackLevel:tr,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},ht=ge.rawFileBuffer;if(ht&&(ae||z.type==="image/x-adobe-dng"))try{const Xt=await ng(ht,Be);ge.renderedRawImageData=Xt,ge.displaySettings=Be}catch(Xt){console.error("Initial Zero-Dep Render Failed",Xt)}}}catch(Oe){q(`Failed to process RAW file: ${Oe.message}`),D(null),ra(!1);return}else try{D("Processing image...");const{previewBlob:Oe,analysisData:_e}=await A_(z);ge.rawImageData=_e,!Z&&_e.metadata&&(ge.exifData=_e.metadata),ge.rawFileBuffer=await z.arrayBuffer(),ge.isThreePlane=_e.isThreePlane||!1,ge.isXTransOriginal=!1,ge.isXTransConverted=!1,ge.originalRawFileBuffer=null;const we=URL.createObjectURL(Oe);ge.previewUrl=we;const De=new Image;De.src=we,await new Promise(tt=>{De.onload=()=>{ge.imageElement=De,tt()},De.onerror=()=>{q("Could not load the image file."),tt()}})}catch(Oe){q(`Failed to process image: ${Oe.message}`),D(null);return}const Me=Date.now().toString()+Math.random();if(ge.rawFileBuffer&&await e5(Me,ge.rawFileBuffer),Y){const Oe={exposure:0,demosaicMethod:-1,blackLevel:void 0,wbGains:[1,1],showKadc:!1,subtractBlackLevelFromStats:!1,renderMode:"zero-dependency"},_e={id:Me,fileName:z.name,file:z,imageElement:null,rawImageData:null,rawFileBuffer:null,renderedRawImageData:null,referenceImageData:null,sampledImageData:null,exifData:null,isThreePlane:!1,displaySettings:Oe,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0},...ge};b(we=>{const De=[...we,_e];return P(De.length-1),De})}else cr(ge);D(null),ra(!1)},wp=async z=>{D("Converting to DNG...");try{const Y=new FormData;Y.append("file",z);const Z=await fetch("http://localhost:5428/convert_dng",{method:"POST",body:Y}),ae=Z.headers.get("content-type")||"";if(Z.ok)if(ae.includes("application/json")){const Ce=await Z.json();throw new Error(Ce.error||"Conversion failed")}else{const Ce=await Z.blob(),ge=URL.createObjectURL(Ce),Me=document.createElement("a");Me.href=ge;const Oe=z.name,_e=Oe.substring(0,Oe.lastIndexOf("."))+".dng"||"converted.dng";Me.download=_e,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(ge);const we=new File([Ce],_e,{type:"image/x-adobe-dng"});await Bo(we,!0)}else{const Ce=await Z.text();throw new Error(`HTTP ${Z.status}: ${Ce}`)}}catch(Y){D(null),q(`Conversion Error: ${Y.message}`)}},kp=(z,Y)=>{z&&(Y==="direct"?Bo(z,!0):wp(z))},Cf=async z=>{var Z;const Y=(Z=z.target.files)==null?void 0:Z[0];Y&&(await Bo(Y,!0),z.target.value="")},yc=async(z,Y,Z,ae)=>{!z||!Y||(D("Processing Pair Difference (May take a while)..."),q(null),setTimeout(async()=>{try{const Ce=await z.arrayBuffer(),ge=await Y.arrayBuffer(),Me=await rg(Ce,ge,Z,ae),Oe=Vc(Me.width,Me.height,Me.rawData),_e=new File([Oe],`Diff_${z.name}_${Y.name}.dng`,{type:"image/x-adobe-dng"});await Bo(_e,!0),gn("fft")}catch(Ce){console.error("Pair Processing Error",Ce),q("Pair Processing Failed: "+Ce.message)}finally{D(null)}},100))},Of=async z=>{if(z.length<2){q("Need at least 2 files for Batch Diff.");return}D(`Batch Processing 0/${Math.floor(z.length/2)} pairs...`);const Y=Array.from(z).sort((Z,ae)=>Z.name.localeCompare(ae.name,void 0,{numeric:!0}));try{for(let Z=0;Z<Y.length-1;Z+=2){const ae=Y[Z],Ce=Y[Z+1];D(`Batch Processing Pair ${Math.floor(Z/2)+1}/${Math.floor(Y.length/2)}: ${ae.name} & ${Ce.name}`);const ge=await ae.arrayBuffer(),Me=await Ce.arrayBuffer(),Oe=await rg(ge,Me,!1,!1),_e=Vc(Oe.width,Oe.height,Oe.rawData),we=new Blob([_e],{type:"image/x-adobe-dng"}),De=URL.createObjectURL(we),tt=document.createElement("a");tt.href=De,tt.download=`Diff_${ae.name}_${Ce.name}.dng`,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),URL.revokeObjectURL(De)}}catch(Z){console.error("FFT Batch Error",Z),q("Batch Processing Failed: "+Z.message)}finally{D(null)}},Nf=async z=>{if(z.length<1)return;const Y=Array.from(z).sort((Z,ae)=>Z.name.localeCompare(ae.name,void 0,{numeric:!0}));N(Y),await Bo(Y[0],!0)},Mf=async()=>{ra(!0);const z=128,Y=z,Z=z,ae=Y*Z,Ce=new Uint16Array(ae),ge=Be=>{const ht=Be/me+jr;return Math.sin(2*Math.PI*ht)>=0?1:0},Me=32,Oe=Lt*.5,_e=Math.max(1e-4,Lt/Me);for(let Be=0;Be<Z;Be++){let ht=0;const Pr=Be+.5-Oe;for(let qt=0;qt<Me;qt++){const Nn=Pr+(qt+.5)*_e;ht+=ge(Nn)}const Wr=ht/Me,_t=Math.round(Wr*65535);for(let qt=0;qt<Y;qt++)Ce[Be*Y+qt]=_t}const we=new ImageData(xn,xn),De=xn/Y,tt=Lt/2;for(let Be=0;Be<xn;Be++){const ht=Be/De,Xt=Math.floor(ht),Pr=ht-Xt,Wr=Pr>=.5-tt&&Pr<.5+tt;for(let _t=0;_t<xn;_t++){const qt=_t/De,Nn=Math.floor(qt),mn=qt-Nn,Fo=mn>=.5-tt&&mn<.5+tt,Ir=(Be*xn+_t)*4;if(Nn>=Y||Xt>=Z){we.data[Ir]=30,we.data[Ir+1]=34,we.data[Ir+2]=40,we.data[Ir+3]=255;continue}if(Wr&&Fo){const Yi=Ce[Xt*Y+Nn],zo=Math.round(Yi/257);we.data[Ir]=zo,we.data[Ir+1]=zo,we.data[Ir+2]=zo,we.data[Ir+3]=255}else we.data[Ir]=30,we.data[Ir+1]=34,we.data[Ir+2]=40,we.data[Ir+3]=255}}const ct=new ImageData(xn,xn),Ut=Z/xn;for(let Be=0;Be<xn;Be++){const ht=(Be+.5)*Ut,Pr=ge(ht)>.5?255:0,Wr=Be*xn*4;for(let _t=0;_t<xn;_t++){const qt=Wr+_t*4;ct.data[qt]=Pr,ct.data[qt+1]=Pr,ct.data[qt+2]=Pr,ct.data[qt+3]=255}}const fr=Vc(Y,Z,Ce),Mt=new File([fr],"pattern_test.dng",{type:"image/x-adobe-dng"}),tr=Date.now().toString();try{const{previewBlob:Be,analysisData:ht}=await Uo(fr.slice(0)),Xt=await a2(fr.slice(0),G),Pr=t5(Xt,xn,xn),Wr=URL.createObjectURL(Be),_t=new Image;_t.src=Wr,await new Promise(Nn=>{_t.onload=()=>Nn()}),await e5(tr,fr);const qt={id:tr,fileName:"pattern_test.dng",file:Mt,imageElement:_t,rawImageData:ht,rawFileBuffer:fr,renderedRawImageData:Pr,referenceImageData:ct,sampledImageData:we,exifData:null,isThreePlane:!1,previewUrl:Wr,displaySettings:G,originalRawFileBuffer:null,isXTransOriginal:!1,isXTransConverted:!1,xtransPhase:{x:0,y:0}};(M==null?void 0:M.name)==="pattern_test.dng"?cr(qt):b(Nn=>{const mn=[...Nn,qt];return P(mn.length-1),mn})}catch(Be){console.error("Error generating pattern:",Be),q(`Error generating pattern: ${Be.message}`)}ra(!1),D(null)},vc=()=>{br(!0)},Pe=()=>{br(!1),Lo("sampled"),D("Generating..."),setTimeout(()=>Mf(),50)},Qe=j.useRef({period:me,fill:Lt,phase:jr});j.useEffect(()=>{(M==null?void 0:M.name)==="pattern_test.dng"&&(Qe.current.period!==me||Qe.current.fill!==Lt||Qe.current.phase!==jr)&&(Qe.current={period:me,fill:Lt,phase:jr},Mf())},[me,Lt,jr,M]);const rt=j.useCallback(z=>{if(cr({displaySettings:z}),!$)return;ra(!0),lt.current&&lt.current.terminate();const Y=new Worker(new URL("/assets/renderWorker-D73_7lpj.js",import.meta.url),{type:"module"});lt.current=Y,Y.onmessage=Z=>{const{success:ae,imageData:Ce,error:ge}=Z.data;if(ae){let Me=Ce;(M==null?void 0:M.name)==="pattern_test.dng"&&(Me=t5(Ce,xn,xn)),cr({renderedRawImageData:Me})}else q(ge||"Unknown worker error");ra(!1),Y.terminate(),lt.current=null},Y.postMessage({buffer:$.slice(0),settings:z})},[$,M,cr]),nt=async(z,Y)=>{D("Re-sampling X-Trans with new Phase...");try{const ae=(await Jf(Y,z.x,z.y)).dngBuffer,Ce=await Uo(ae),ge=URL.createObjectURL(Ce.previewBlob),Me=new Image;Me.src=ge,await new Promise(Oe=>{Me.onload=()=>Oe()}),O!=null&&O.previewUrl&&URL.revokeObjectURL(O.previewUrl),cr({rawFileBuffer:ae,rawImageData:Ce.analysisData,previewUrl:ge,imageElement:Me,xtransPhase:z}),B(null)}catch(Z){console.error("X-Trans Phase Update Failed",Z),q("Phase Update Failed: "+Z.message)}finally{D(null)}},Cn=z=>{if(!O||!O.originalRawFileBuffer||!O.isXTransConverted)return;const Y={...O.xtransPhase,...z};nt(Y,O.originalRawFileBuffer)},Wn=j.useCallback(async z=>{if(O)if(z){if(O.isXTransConverted)return;const Y=O.originalRawFileBuffer||O.rawFileBuffer;if(!Y)return;D("Converting X-Trans to Pseudo-Bayer DNG...");try{const Z=O.xtransPhase||{x:0,y:0},Ce=(await Jf(Y,Z.x,Z.y)).dngBuffer,ge=await Uo(Ce),Me=URL.createObjectURL(ge.previewBlob),Oe=new Image;Oe.src=Me,await new Promise(_e=>{Oe.onload=()=>_e()}),O.previewUrl&&URL.revokeObjectURL(O.previewUrl),cr({rawFileBuffer:Ce,rawImageData:ge.analysisData,previewUrl:Me,imageElement:Oe,isXTransConverted:!0,originalRawFileBuffer:Y}),B(null)}catch(Z){console.error("X-Trans Conversion Failed",Z),q("Failed to convert X-Trans: "+Z.message)}finally{D(null)}}else{if(!O.isXTransConverted)return;const Y=O.originalRawFileBuffer;if(!Y){q("Original X-Trans buffer lost. Cannot revert.");return}D("Reverting to Native X-Trans...");try{const Z=await Uo(Y),ae=URL.createObjectURL(Z.previewBlob),Ce=new Image;Ce.src=ae,await new Promise(ge=>{Ce.onload=()=>ge()}),O.previewUrl&&URL.revokeObjectURL(O.previewUrl),cr({rawFileBuffer:Y,rawImageData:Z.analysisData,previewUrl:ae,imageElement:Ce,isXTransConverted:!1}),B(null)}catch(Z){console.error("X-Trans Revert Failed",Z),q("Failed to revert X-Trans: "+Z.message)}finally{D(null)}}},[O,cr]);let On=I||_;zn==="reference"&&A?On=A:zn==="sampled"&&R&&(On=R);const Qa=oe||Ta,wi=z=>{if(Nt.current){const Y=Nt.current,{width:Z,height:ae}=Y.getBoundingClientRect(),Ce=Z/2,ge=ae/2,Me=z/$e,Oe=Ce-(Ce-pe.x)*Me,_e=ge-(ge-pe.y)*Me;Ne({x:Oe,y:_e})}Ye(z)},$a=z=>{if(!z)return;if(!T){B(null);return}X&&se(!1);const Y=Go(T.data,T.width,T.height,z.x,z.y,z.w,z.h);B(Y)},ur=z=>{J(z),$a(z)},S1=()=>{He(z=>z==="pan"?"select":"pan")},xc=z=>{if(Ln===0||Ln>4)return;const Y=[...pn,z];yi(Y),Ln===4?(j1(Y),en(0)):en(Ln+1)},bc=(z,Y,Z,ae)=>{const Ce=z[0],ge=z[1],Me=z[2],Oe=z[3],_e=Y/2,we=[];for(let De=0;De<Z;De++){const tt=Z>1?De/(Z-1):.5;for(let ct=0;ct<ae;ct++){const Ut=ae>1?ct/(ae-1):.5,fr=Ce.x*(1-Ut)+ge.x*Ut,Mt=Ce.y*(1-Ut)+ge.y*Ut,tr=Me.x*(1-Ut)+Oe.x*Ut,Be=Me.y*(1-Ut)+Oe.y*Ut,ht=fr*(1-tt)+tr*tt,Xt=Mt*(1-tt)+Be*tt,Pr=ht-_e,Wr=Xt-_e;we.push({x:Pr,y:Wr,w:Y,h:Y})}}return we},j1=z=>{!T||!O||(D("Calculating DR Lab Grid..."),setTimeout(()=>{try{const Y=bc(z,xi,pa,Fn);Bn(Y);const ge=[...[`#BlackLevel: ${(G.blackLevel||[0,0,0,0]).join(",")}`,`#ImageHeight: ${T.height}`],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],Me=`img${O.fileName||"image"}`;Y.forEach((tt,ct)=>{const Ut=Math.floor(ct/Fn)+1,fr=ct%Fn+1,Mt=Go(T.data,T.width,T.height,tt.x,tt.y,tt.w,tt.h),tr=Mt.means,Be=Mt.stdDevs,ht=`${Me},${Ut},${fr},${tr[0].toFixed(4)},${tr[1].toFixed(4)},${tr[2].toFixed(4)},${tr[3].toFixed(4)},${Be[0].toFixed(4)},${Be[1].toFixed(4)},${Be[2].toFixed(4)},${Be[3].toFixed(4)}`;ge.push(ht)});const Oe=ge.join(`
`),_e=new Blob([Oe],{type:"text/csv;charset=utf-8;"}),we=URL.createObjectURL(_e),De=document.createElement("a");De.setAttribute("href",we),De.setAttribute("download","dr_lab_results.csv"),document.body.appendChild(De),De.click(),document.body.removeChild(De),URL.revokeObjectURL(we),yi([])}catch(Y){q("DR Lab Error: "+Y.message)}finally{D(null)}},100))},pO=async(z,Y)=>{if(pn.length<4&&vi.length<1){q("Please mark the grid on an image first before running batch processing.");return}let Z=vi;if(Z.length===0&&pn.length===4&&(Z=bc(pn,xi,pa,Fn)),Z.length===0){q("No grid definitions found. Mark corners first.");return}D(Y==="pair"?"Batch Pair Difference (Sigma = Diff/sqrt(2))":"Batch Processing...");const Ce=(G.blackLevel||[0,0,0,0]).join(","),ge=T?T.height:0,Oe=[...[`#BlackLevel: ${Ce}`,`#ImageHeight: ${ge}`,Y==="pair"?"#Mode: Pair Difference (Sigma = Diff/sqrt(2))":"#Mode: Independent"],"Filename,Row,Col,R_Mean,G1_Mean,G2_Mean,B_Mean,R_Std,G1_Std,G2_Std,B_Std"],_e=Array.from(z).sort((ct,Ut)=>ct.name.localeCompare(Ut.name,void 0,{numeric:!0}));if(Y==="pair"&&_e.length<2){q("Need at least 2 files for Pair processing."),D(null);return}const we=E.current,De=(we==null?void 0:we.isXTransConverted)||!1,tt=(we==null?void 0:we.xtransPhase)||{x:0,y:0};try{const ct=async Be=>{let ht=await Be.arrayBuffer();return De&&(ht=(await Jf(ht,tt.x,tt.y)).dngBuffer),ht};if(Y==="single")for(let Be=0;Be<_e.length;Be++){const ht=_e[Be];D(`Processing ${Be+1}/${_e.length}: ${ht.name}...`);const Xt=await ct(ht),Pr=await o0(Xt),Wr=`img${ht.name}`;Z.forEach((_t,qt)=>{const Nn=Math.floor(qt/pa)+1,mn=qt%Fn+1,Fo=Go(Pr.data,Pr.width,Pr.height,_t.x,_t.y,_t.w,_t.h),Ir=Fo.means,Yi=Fo.stdDevs,zo=`${Wr},${Nn},${mn},${Ir[0].toFixed(4)},${Ir[1].toFixed(4)},${Ir[2].toFixed(4)},${Ir[3].toFixed(4)},${Yi[0].toFixed(4)},${Yi[1].toFixed(4)},${Yi[2].toFixed(4)},${Yi[3].toFixed(4)}`;Oe.push(zo)})}else for(let Be=0;Be<_e.length-1;Be+=2){const ht=_e[Be],Xt=_e[Be+1],Pr=`img${ht.name} & ${Xt.name}`;D(`Processing Pair ${Math.floor(Be/2)+1}/${Math.floor(_e.length/2)}: ${ht.name} & ${Xt.name}...`);const Wr=await ct(ht),_t=await o0(Wr),qt=await ct(Xt),Nn=await rg(Wr,qt,!1,!0);Z.forEach((mn,Fo)=>{const Ir=Math.floor(Fo/pa)+1,Yi=Fo%Fn+1,zo=Go(_t.data,_t.width,_t.height,mn.x,mn.y,mn.w,mn.h),jO=Go(Nn.rawData,Nn.width,Nn.height,mn.x,mn.y,mn.w,mn.h),_f=zo.means,Af=jO.stdDevs,PO=`${Pr},${Ir},${Yi},${_f[0].toFixed(4)},${_f[1].toFixed(4)},${_f[2].toFixed(4)},${_f[3].toFixed(4)},${Af[0].toFixed(4)},${Af[1].toFixed(4)},${Af[2].toFixed(4)},${Af[3].toFixed(4)}`;Oe.push(PO)})}const Ut=Oe.join(`
`),fr=new Blob([Ut],{type:"text/csv;charset=utf-8;"}),Mt=URL.createObjectURL(fr),tr=document.createElement("a");tr.href=Mt,tr.setAttribute("download",`dr_lab_batch_${Y}_${new Date().getTime()}.csv`),document.body.appendChild(tr),tr.click(),document.body.removeChild(tr),URL.revokeObjectURL(Mt)}catch(ct){console.error("Batch Error",ct),q("Batch Processing Failed: "+ct.message)}finally{D(null)}},gO=()=>{Pn([]),Jr(1)},mO=z=>{if(!It||dn===0)return;const Y=[...Sr,z];Pn(Y),Y.length===4&&T?(P1(Y,it),Jr(0)):Jr(Z=>Z+1)},P1=(z,Y)=>{T&&(D("Analyzing Color Chart..."),setTimeout(()=>{try{const Z=Bte(z[0],z[1],z[2],z[3],T.width,T.height,Y);Ie(Z);const Ce=Z.map((ge,Me)=>{const Oe=Go(T.data,T.width,T.height,ge.x,ge.y,ge.w,ge.h);return{id:Me,rawMeans:Oe.means,refRGB:[0,0,0]}}).map((ge,Me)=>({...ge,refRGB:dv[Me]||[0,0,0]}));ir(Ce),le(!0)}catch(Z){q("Color Lab Error: "+Z.message)}finally{D(null)}},100))},yO=z=>{et(z),Sr.length===4&&P1(Sr,z)},vO=()=>{le(!1)},xO=()=>{L||ft("No EXIF data found. The file might not contain metadata or it was stripped during processing."),Ae(!0)},bO=async z=>{D("Parsing PTC Data...");const Y=[];let Z=null;try{for(let ae=0;ae<z.length;ae++){const ge=(await z[ae].text()).split(`
`);let Me=!0;for(const Oe of ge){const _e=Oe.trim();if(!_e)continue;if(_e.startsWith("#")){if(_e.includes("BlackLevel:")){const _t=_e.split(":")[1].trim().split(",");if(_t.length>=4){const qt=_t.map(Number);Z||(Z={}),Z.blackLevel=qt}}if(_e.includes("ImageHeight:")){const _t=parseInt(_e.split(":")[1].trim());isNaN(_t)||(Z||(Z={}),Z.height=_t)}continue}if(Me){_e.toLowerCase().includes("mean")&&_e.toLowerCase().includes("std")&&(Me=!1);continue}const we=_e.split(",");if(we.length<5)continue;let De=0,tt;isNaN(parseFloat(we[0]))&&(tt=we[0],De=1);const ct=parseInt(we[De]),Ut=parseInt(we[De+1]),fr=parseFloat(we[De+2]),Mt=parseFloat(we[De+3]),tr=parseFloat(we[De+4]),Be=parseFloat(we[De+5]),ht=parseFloat(we[De+6]),Xt=parseFloat(we[De+7]),Pr=parseFloat(we[De+8]),Wr=parseFloat(we[De+9]);!isNaN(fr)&&!isNaN(ht)&&Y.push({channel:"R",mean:fr,std:ht,filename:tt,row:ct,col:Ut}),!isNaN(Mt)&&!isNaN(Xt)&&Y.push({channel:"G1",mean:Mt,std:Xt,filename:tt,row:ct,col:Ut}),!isNaN(tr)&&!isNaN(Pr)&&Y.push({channel:"G2",mean:tr,std:Pr,filename:tt,row:ct,col:Ut}),!isNaN(Be)&&!isNaN(Wr)&&Y.push({channel:"B",mean:Be,std:Wr,filename:tt,row:ct,col:Ut})}}sr(Y),hn(Z),f(!0)}catch(ae){console.error("PTC Parse Error",ae),q("Failed to parse CSV files: "+ae.message)}finally{D(null)}},wO=()=>{if(!$||!O)return;const z=new Blob([$],{type:"image/x-adobe-dng"}),Y=URL.createObjectURL(z),Z=document.createElement("a");Z.href=Y;const ae=O.fileName||"image.dng",Ce=ae.toLowerCase().endsWith(".dng")?ae:ae.replace(/\.[^/.]+$/,"")+".dng";Z.download=Ce,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(Y)},kO=()=>{en(1),yi([]),Bn([])},C1=()=>{window.open("https://github.com/y-g-jiang.github.io/blob/main/drtest.png","_blank")},SO=j.useMemo(()=>zt?zt.map((z,Y)=>({...z,refRGB:dv[Y]||[0,0,0]})):[],[zt]);return e==="prompt"?c.jsx("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-200 dark:bg-[#111] text-black dark:text-gray-200 font-mono",children:c.jsxs("div",{className:"p-8 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[8px_8px_0px_rgba(0,0,0,0.5)] dark:shadow-[8px_8px_0px_rgba(255,255,255,0.2)] max-w-md w-full text-center",children:[c.jsx("h2",{className:"text-xl font-bold mb-4 uppercase tracking-wider",children:"Session Recovery"}),c.jsx("p",{className:"mb-6 text-sm",children:"A saved workspace was found. Would you like to restore your previous session?"}),c.jsxs("div",{className:"flex gap-4 justify-center",children:[c.jsx("button",{onClick:lr,className:"px-4 py-2 border-2 border-red-500 text-red-600 dark:text-red-400 font-bold hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-[2px_2px_0px_rgba(239,68,68,0.5)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",children:"Start Fresh"}),c.jsx("button",{onClick:Ht,className:"px-4 py-2 bg-cyan-600 text-white font-bold hover:bg-cyan-500 border-2 border-black dark:border-white transition-colors shadow-[4px_4px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_rgba(255,255,255,0.5)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_rgba(0,0,0,1)] dark:active:shadow-[2px_2px_0px_rgba(255,255,255,0.5)]",children:"Restore Session"})]})]})}):e==="restoring"?c.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-300 dark:bg-[#111] text-black dark:text-white font-mono",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-black dark:border-white border-t-transparent animate-spin mb-4"}),c.jsx("h2",{className:"text-xl font-bold",children:r}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-6",children:"Reconstructing analysis environment..."}),c.jsx("button",{onClick:lr,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-bold border-2 border-black dark:border-gray-500 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:shadow-none active:translate-x-1 active:translate-y-1 transition-all text-sm",children:"Cancel Restore"})]}):c.jsxs("div",{className:"flex flex-col h-screen bg-[#d4d4d4] dark:bg-[#111111] text-black dark:text-gray-200 font-mono transition-colors duration-300 overflow-hidden",children:[c.jsx("div",{className:"p-4 pb-0 flex-shrink-0",children:c.jsx(e_,{onLoadImage:Cf,onFileSelected:kp,onGenerateFakeDng:vc,fileName:M?M.name:null,hasGeneratedData:(M==null?void 0:M.name)==="pattern_test.dng",viewMode:zn,onSetViewMode:Lo,patternPeriod:me,onPatternPeriodChange:gt,fillFactor:Lt,onFillFactorChange:tn,patternPhase:jr,onPatternPhaseChange:rn,showPatternControls:(M==null?void 0:M.name)==="pattern_test.dng",onOpenAbout:()=>gr(!0),onShowExif:xO,bridgeStatus:x,onBridgeClick:()=>v(!0),isDrLabOpen:kt,onToggleDrLab:()=>{ar(!kt),en(0),yi([]),Bn([]),kr&&Zr(!1),It&&fn(!1),vt&&Qr(!1),Jr(0),Ie([])},isColorLabOpen:It,onToggleColorLab:()=>{fn(!It),Pn([]),Jr(0),Ie([]),kt&&ar(!1),kr&&Zr(!1),vt&&Qr(!1)},isFftLabOpen:kr,onToggleFftLab:()=>{Zr(!kr),kt&&ar(!1),It&&fn(!1),vt&&Qr(!1),Jr(0),Ie([])},isSfrLabOpen:vt,onToggleSfrLab:()=>{Qr(!vt),kt&&ar(!1),It&&fn(!1),kr&&Zr(!1),Jr(0),Ie([])},onGenerateTestPic:C1,onPTCFilesSelected:bO,onDownloadDng:wO,isThreePlane:V,onOpenDatabase:()=>h(!0),isSidebarOpen:ve,onToggleSidebar:()=>Ke(!ve),stretchMultiplier:Ge,onStretchMultiplierChange:Dt,onStretchDngExport:Ee,isRawLoaded:!!T})}),c.jsxs("div",{className:"flex flex-1 overflow-hidden p-4 pt-2 gap-4 relative",children:[c.jsxs("div",{className:"flex-1 relative bg-gray-200 dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-colors duration-300",ref:Nt,children:[Qa&&c.jsxs("div",{className:"absolute bottom-4 right-4 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-black dark:border-white border-t-transparent animate-spin"}),c.jsx("span",{className:"text-xs font-bold text-black dark:text-white uppercase",children:oe||"Processing..."})]}),S.length>1&&c.jsxs("div",{className:"absolute bottom-4 right-20 z-50 flex items-center gap-2 bg-white/90 dark:bg-black/90 px-3 py-1.5 border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray] text-sm font-bold text-black dark:text-white",children:[c.jsx("button",{onClick:Mr,disabled:k<=0,className:"hover:text-gray-500 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Previous Image",children:"<"}),c.jsxs("span",{className:"min-w-[3rem] text-center select-none font-bold",children:[k+1," / ",S.length]}),c.jsx("button",{onClick:bt,disabled:k>=S.length-1,className:"hover:text-gray-500 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Next Image",children:">"})]}),c.jsx("div",{className:"absolute bottom-4 left-4 z-50 flex flex-col-reverse gap-2 items-start pointer-events-none",children:je.filter(z=>z.isMinimized).map(z=>{let Y="Window",Z="bg-gray-500";return z.type==="histogram"?(Y="Histogram",Z="bg-black dark:bg-white"):z.type==="fft"?(Y="FFT Spectrum",Z="bg-black dark:bg-white"):z.type==="quant"?(Y="Quantization",Z="bg-black dark:bg-white"):z.type==="pearson"&&(Y="Pearson",Z="bg-black dark:bg-white"),c.jsxs("div",{className:"pointer-events-auto flex items-center gap-1 bg-white dark:bg-black border-2 border-black dark:border-white shadow-[4px_4px_0px_black] dark:shadow-[4px_4px_0px_gray]",children:[c.jsxs("button",{onClick:()=>xp(z.id),className:"px-3 py-1.5 text-xs font-bold text-black dark:text-white hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors flex items-center gap-2",children:[c.jsx("span",{className:`w-2 h-2 ${Z}`}),Y]}),c.jsx("button",{onClick:()=>Za(z.id),className:"px-2 py-1.5 text-black hover:text-red-600 hover:bg-gray-200 dark:hover:bg-gray-800 border-l-2 border-black dark:border-white transition-colors",children:""})]},z.id)})}),c.jsx(Nte,{isOpen:ut,onClose:()=>gr(!1)}),c.jsx(Mte,{isOpen:Fe,onClose:()=>Ae(!1),data:L,fileName:M?M.name:"",warning:Ue}),c.jsx(Ate,{isOpen:u,onClose:()=>f(!1),data:jt,blackLevel:Ea,imageHeight:Un,isBGGR:ie,importedMetadata:be||void 0,theme:s,initialCameraModel:(L==null?void 0:L.Model)||"",initialISO:(L==null?void 0:L.ISO)||((O1=L==null?void 0:L.ISOSpeedRatings)==null?void 0:O1.toString())||""}),c.jsx(Ite,{isOpen:d,onClose:()=>h(!1),theme:s}),c.jsx(Rte,{isOpen:p,onClose:()=>m(!1),zIndex:200}),c.jsx(Gte,{isOpen:Rt,onClose:vO,patchStats:SO,initialIsBGGR:ie,sizeRatio:it,onSizeChange:yO}),c.jsx(Kte,{isOpen:vt,isSfrLabOpen:vt,onClose:()=>{},rawImageData:T,roi:Q?{x:Q.x,y:Q.y,w:Q.width,h:Q.height}:null,zIndex:200,onFocus:mc,displaySettings:G}),c.jsx(qte,{isOpen:y,onClose:()=>w(!1),rawImageData:T,fileName:(M==null?void 0:M.name)||"image.dng",zIndex:300,onFocus:mc}),c.jsx(Ei,{isOpen:yt,onClose:()=>br(!1),onConfirm:Pe,title:"High Resource Usage Warning",confirmText:"I know the risk and insist to continue",message:c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{children:"Patter DNG mode involves high-frequency refreshing and heavy computation. Due to current memory management limitations, repeated use may lead to browser memory overflow or crashes. Please proceed with caution."}),c.jsx("p",{className:"text-xs text-gray-500"})]})}),c.jsx(Ei,{isOpen:g,onClose:()=>v(!1),onConfirm:()=>{window.open("https://y-g-jiang.github.io/jiangbridge.exe","_blank"),v(!1)},title:"JiangBridge Connection / ",confirmText:"Download Bridge App",cancelText:"Cancel",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200",children:"JiangBridge"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:'JiangBridge is optional for this webpage, but recommended for full functionality. Simply double-click and run it once after system startup. If the indicator light does not turn green after double-clicking, please consider checking whether the web page is allowed to "View and connect to any device on the network".'})]})}),c.jsx(Ei,{isOpen:Je,onClose:()=>Vt(!1),onConfirm:ue,title:"Export 16-bit TIFF Options",confirmText:"Confirm Export",message:c.jsxs("div",{className:"flex flex-col gap-4 text-left",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 dark:bg-slate-800/80 p-4 border border-gray-400 dark:border-600",children:[c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"Stretch ()"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Map [0, White] to [0, 65535]"})]}),c.jsx("div",{onClick:()=>wr(!Et),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${Et?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${Et?"translate-x-6":""}`})})]}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("span",{className:"font-bold text-xs text-gray-800 dark:text-slate-200",children:"sRGB Gamma"}),c.jsx("span",{className:"text-[9px] text-gray-500 dark:text-slate-400 mt-0.5",children:"Apply non-linear contrast"})]}),c.jsx("div",{onClick:()=>Ot(!$t),className:`relative w-12 h-6 border-2 border-black dark:border-white cursor-pointer ${$t?"bg-black dark:bg-white":"bg-gray-300 dark:bg-slate-600"}`,children:c.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white dark:bg-black shadow-sm transition-transform ${$t?"translate-x-6":""}`})})]})]}),c.jsxs("div",{className:"p-3 bg-gray-200 dark:bg-slate-800 text-[11px] text-black dark:text-white italic border border-gray-400 dark:border-gray-600 text-center font-mono",children:[Et&&!$t&&"Mode: Stretched Linear. Histogram preserved but range expanded.",!Et&&$t&&"Mode: Native DN + sRGB. Best for analyzing raw distribution contrast.",Et&&$t&&"Mode: Ready-to-Use. Conventional 16-bit development.",!Et&&!$t&&"Mode: Native Linear. Pure physical sensor DN values."]})]})}),!X&&c.jsx(lre,{stats:Q,onClose:()=>{B(null),J(null)},onMinimize:()=>se(!0),isBGGR:ie,onToggleBGGR:K,onOpenWindow:gn,displaySettings:G,zIndex:te,onFocus:mc,rawImageData:T}),je.map(z=>{if(z.isMinimized)return null;const Y=S.find(Ce=>Ce.id===z.sessionId),Z=Y==null?void 0:Y.rawImageData;if(!Z)return null;const ae={key:z.id,isOpen:!0,onClose:()=>Za(z.id),onMinimize:()=>pc(z.id),rawImageData:Z,roi:z.roi,isBGGR:z.isBGGR,zIndex:z.zIndex,onFocus:()=>gc(z.id),initialPosition:z.initialPosition,initialInternalState:z.internalState,onUpdateState:Ce=>bp(z.id,Ce),stackFiles:z.stackFiles};return z.type==="histogram"?c.jsx(xte,{...ae}):z.type==="fft"?c.jsx(Ste,{...ae,onUpdateROI:Ce=>Gn(z.id,Ce)}):z.type==="quant"?c.jsx(jte,{...ae}):z.type==="pearson"?c.jsx(Pte,{...ae}):null}),U&&c.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/90 dark:bg-black/90 p-8",children:c.jsxs("div",{className:"max-w-md text-center p-6 bg-white dark:bg-black rounded-none border-2 border-red-600 shadow-[8px_8px_0px_rgba(200,0,0,0.5)]",children:[c.jsx("h3",{className:"text-xl font-bold text-red-600 uppercase mb-2",children:"Notice"}),c.jsx("p",{className:"text-black dark:text-white mb-6 whitespace-pre-wrap font-mono",children:U}),c.jsx("button",{onClick:()=>q(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-800 dark:hover:bg-gray-700 border-2 border-black dark:border-white text-black dark:text-white transition-colors uppercase font-bold",children:"Dismiss"})]})}),!On&&!Qa&&!U&&c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-600 select-none font-mono",children:c.jsx("p",{className:"text-lg",children:"Load an image or generate a pattern"})}),c.jsx(t_,{image:On,zoom:$e,pan:pe,onPanChange:Ne,onZoomChange:wi,onSelectionChange:$a,forcedSelection:de,theme:s,touchAction:qe,isMarking:Ln>0||It&&dn>0,onPointClick:z=>{Ln>0?xc(z):It&&dn>0&&mO(z)},markers:pn,gridRects:vi,colorLabPoints:Sr,colorLabRects:Te}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/2 z-30 pointer-events-none select-none opacity-20 mix-blend-normal dark:mix-blend-plus-lighter",children:c.jsx("svg",{viewBox:"0 0 500 60",className:"w-full h-auto drop-shadow-none",children:c.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-black dark:fill-white",fontSize:"26",fontWeight:"bold",style:{fontFamily:"Courier New, monospace",letterSpacing:"0.05em"},children:" y-g-jiang.github.io"})})}),T&&!Ln&&!It&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-30 pointer-events-none opacity-60 text-[10px] text-black dark:text-white font-mono bg-white/50 dark:bg-black/50 px-1",children:["Hold ",c.jsx("b",{children:"Shift"})," + Drag to calculate Raw ROI stats"]}),It&&dn>0&&c.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 pointer-events-none text-sm font-bold text-yellow-500 bg-black/80 px-4 py-2 rounded-full border border-yellow-500 animate-pulse shadow-lg",children:[Sr.length===0&&"Click Top-Left Corner of Chart",Sr.length===1&&"Click Top-Right Corner",Sr.length===2&&"Click Bottom-Left Corner",Sr.length===3&&"Click Bottom-Right Corner",Sr.length===4&&"Processing..."]}),c.jsx(eA,{zoom:$e,onZoomChange:wi,onResetView:()=>{Ye(1),Ne({x:0,y:0})},touchAction:qe,onToggleTouchAction:S1})]}),ve&&c.jsx("div",{className:"w-80 flex-shrink-0 bg-white dark:bg-black border-4 border-gray-500 dark:border-gray-700 shadow-[inset_2px_2px_8px_rgba(0,0,0,0.2)] overflow-hidden transition-all duration-300",children:c.jsx(H_,{rawImageData:T,displaySettings:G,onApplyDisplaySettings:rt,onSetSelection:ur,exifData:L,isBridgeConnected:x.isConnected,isDrLabOpen:kt,drMarkingStep:Ln,onStartMarking:kO,onGenerateTestPic:C1,drRoiSize:xi,onDrRoiSizeChange:bi,drGridRows:pa,onDrGridRowsChange:hc,drGridCols:Fn,onDrGridColsChange:H,onBatchDrLab:pO,hasDrMarkers:vi.length>0,isFftLabOpen:kr,onProcessPair:yc,onProcessBatchDiff:Of,onProcessStackFft:Nf,onOpenCrossCalc:()=>m(!0),isThreePlane:V,onToggleXTrans:Wn,xtransPhase:ee,onXTransPhaseChange:Cn,isXTransConverted:O==null?void 0:O.isXTransConverted,roiStats:Q,isBGGR:ie,isColorLabOpen:It,colorLabMarkingStep:dn,onStartColorLabMarking:gO,isSfrLabOpen:vt,onOpenDngExport:()=>w(!0)})}),c.jsx(tA,{theme:s,setTheme:l})]})]})},hO=document.getElementById("root");if(!hO)throw new Error("Could not find root element to mount to");const ure=Rg.createRoot(hO);ure.render(c.jsx(F.StrictMode,{children:c.jsx(cre,{})}));export{a_ as _};
